var JY=Object.defineProperty;var QY=(t,e,n)=>e in t?JY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Vg=(t,e,n)=>QY(t,typeof e!="symbol"?e+"":e,n);function eZ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tZ(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var DA={exports:{}},zb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IO;function nZ(){if(IO)return zb;IO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var a in i)a!=="key"&&(o[a]=i[a])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:o}}return zb.Fragment=e,zb.jsx=n,zb.jsxs=n,zb}var DO;function rZ(){return DO||(DO=1,DA.exports=nZ()),DA.exports}var ke=rZ(),LA={exports:{}},Ha={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LO;function iZ(){if(LO)return Ha;LO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),v=Symbol.iterator;function w(pe){return pe===null||typeof pe!="object"?null:(pe=v&&pe[v]||pe["@@iterator"],typeof pe=="function"?pe:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,M={};function D(pe,Ie,me){this.props=pe,this.context=Ie,this.refs=M,this.updater=me||_}D.prototype.isReactComponent={},D.prototype.setState=function(pe,Ie){if(typeof pe!="object"&&typeof pe!="function"&&pe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,pe,Ie,"setState")},D.prototype.forceUpdate=function(pe){this.updater.enqueueForceUpdate(this,pe,"forceUpdate")};function A(){}A.prototype=D.prototype;function F(pe,Ie,me){this.props=pe,this.context=Ie,this.refs=M,this.updater=me||_}var O=F.prototype=new A;O.constructor=F,E(O,D.prototype),O.isPureReactComponent=!0;var N=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function W(pe,Ie,me,xe,ve,Ee){return me=Ee.ref,{$$typeof:t,type:pe,key:Ie,ref:me!==void 0?me:null,props:Ee}}function X(pe,Ie){return W(pe.type,Ie,void 0,void 0,void 0,pe.props)}function K(pe){return typeof pe=="object"&&pe!==null&&pe.$$typeof===t}function k(pe){var Ie={"=":"=0",":":"=2"};return"$"+pe.replace(/[=:]/g,function(me){return Ie[me]})}var $=/\/+/g;function Q(pe,Ie){return typeof pe=="object"&&pe!==null&&pe.key!=null?k(""+pe.key):Ie.toString(36)}function ie(){}function ae(pe){switch(pe.status){case"fulfilled":return pe.value;case"rejected":throw pe.reason;default:switch(typeof pe.status=="string"?pe.then(ie,ie):(pe.status="pending",pe.then(function(Ie){pe.status==="pending"&&(pe.status="fulfilled",pe.value=Ie)},function(Ie){pe.status==="pending"&&(pe.status="rejected",pe.reason=Ie)})),pe.status){case"fulfilled":return pe.value;case"rejected":throw pe.reason}}throw pe}function ce(pe,Ie,me,xe,ve){var Ee=typeof pe;(Ee==="undefined"||Ee==="boolean")&&(pe=null);var De=!1;if(pe===null)De=!0;else switch(Ee){case"bigint":case"string":case"number":De=!0;break;case"object":switch(pe.$$typeof){case t:case e:De=!0;break;case d:return De=pe._init,ce(De(pe._payload),Ie,me,xe,ve)}}if(De)return ve=ve(pe),De=xe===""?"."+Q(pe,0):xe,N(ve)?(me="",De!=null&&(me=De.replace($,"$&/")+"/"),ce(ve,Ie,me,"",function(ut){return ut})):ve!=null&&(K(ve)&&(ve=X(ve,me+(ve.key==null||pe&&pe.key===ve.key?"":(""+ve.key).replace($,"$&/")+"/")+De)),Ie.push(ve)),1;De=0;var We=xe===""?".":xe+":";if(N(pe))for(var Ae=0;Ae<pe.length;Ae++)xe=pe[Ae],Ee=We+Q(xe,Ae),De+=ce(xe,Ie,me,Ee,ve);else if(Ae=w(pe),typeof Ae=="function")for(pe=Ae.call(pe),Ae=0;!(xe=pe.next()).done;)xe=xe.value,Ee=We+Q(xe,Ae++),De+=ce(xe,Ie,me,Ee,ve);else if(Ee==="object"){if(typeof pe.then=="function")return ce(ae(pe),Ie,me,xe,ve);throw Ie=String(pe),Error("Objects are not valid as a React child (found: "+(Ie==="[object Object]"?"object with keys {"+Object.keys(pe).join(", ")+"}":Ie)+"). If you meant to render a collection of children, use an array instead.")}return De}function se(pe,Ie,me){if(pe==null)return pe;var xe=[],ve=0;return ce(pe,xe,"","",function(Ee){return Ie.call(me,Ee,ve++)}),xe}function Se(pe){if(pe._status===-1){var Ie=pe._result;Ie=Ie(),Ie.then(function(me){(pe._status===0||pe._status===-1)&&(pe._status=1,pe._result=me)},function(me){(pe._status===0||pe._status===-1)&&(pe._status=2,pe._result=me)}),pe._status===-1&&(pe._status=0,pe._result=Ie)}if(pe._status===1)return pe._result.default;throw pe._result}var ye=typeof reportError=="function"?reportError:function(pe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof pe=="object"&&pe!==null&&typeof pe.message=="string"?String(pe.message):String(pe),error:pe});if(!window.dispatchEvent(Ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",pe);return}console.error(pe)};function Te(){}return Ha.Children={map:se,forEach:function(pe,Ie,me){se(pe,function(){Ie.apply(this,arguments)},me)},count:function(pe){var Ie=0;return se(pe,function(){Ie++}),Ie},toArray:function(pe){return se(pe,function(Ie){return Ie})||[]},only:function(pe){if(!K(pe))throw Error("React.Children.only expected to receive a single React element child.");return pe}},Ha.Component=D,Ha.Fragment=n,Ha.Profiler=i,Ha.PureComponent=F,Ha.StrictMode=r,Ha.Suspense=c,Ha.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Ha.__COMPILER_RUNTIME={__proto__:null,c:function(pe){return H.H.useMemoCache(pe)}},Ha.cache=function(pe){return function(){return pe.apply(null,arguments)}},Ha.cloneElement=function(pe,Ie,me){if(pe==null)throw Error("The argument must be a React element, but you passed "+pe+".");var xe=E({},pe.props),ve=pe.key,Ee=void 0;if(Ie!=null)for(De in Ie.ref!==void 0&&(Ee=void 0),Ie.key!==void 0&&(ve=""+Ie.key),Ie)!G.call(Ie,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&Ie.ref===void 0||(xe[De]=Ie[De]);var De=arguments.length-2;if(De===1)xe.children=me;else if(1<De){for(var We=Array(De),Ae=0;Ae<De;Ae++)We[Ae]=arguments[Ae+2];xe.children=We}return W(pe.type,ve,void 0,void 0,Ee,xe)},Ha.createContext=function(pe){return pe={$$typeof:s,_currentValue:pe,_currentValue2:pe,_threadCount:0,Provider:null,Consumer:null},pe.Provider=pe,pe.Consumer={$$typeof:o,_context:pe},pe},Ha.createElement=function(pe,Ie,me){var xe,ve={},Ee=null;if(Ie!=null)for(xe in Ie.key!==void 0&&(Ee=""+Ie.key),Ie)G.call(Ie,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(ve[xe]=Ie[xe]);var De=arguments.length-2;if(De===1)ve.children=me;else if(1<De){for(var We=Array(De),Ae=0;Ae<De;Ae++)We[Ae]=arguments[Ae+2];ve.children=We}if(pe&&pe.defaultProps)for(xe in De=pe.defaultProps,De)ve[xe]===void 0&&(ve[xe]=De[xe]);return W(pe,Ee,void 0,void 0,null,ve)},Ha.createRef=function(){return{current:null}},Ha.forwardRef=function(pe){return{$$typeof:a,render:pe}},Ha.isValidElement=K,Ha.lazy=function(pe){return{$$typeof:d,_payload:{_status:-1,_result:pe},_init:Se}},Ha.memo=function(pe,Ie){return{$$typeof:h,type:pe,compare:Ie===void 0?null:Ie}},Ha.startTransition=function(pe){var Ie=H.T,me={};H.T=me;try{var xe=pe(),ve=H.S;ve!==null&&ve(me,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(Te,ye)}catch(Ee){ye(Ee)}finally{H.T=Ie}},Ha.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Ha.use=function(pe){return H.H.use(pe)},Ha.useActionState=function(pe,Ie,me){return H.H.useActionState(pe,Ie,me)},Ha.useCallback=function(pe,Ie){return H.H.useCallback(pe,Ie)},Ha.useContext=function(pe){return H.H.useContext(pe)},Ha.useDebugValue=function(){},Ha.useDeferredValue=function(pe,Ie){return H.H.useDeferredValue(pe,Ie)},Ha.useEffect=function(pe,Ie,me){var xe=H.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return xe.useEffect(pe,Ie)},Ha.useId=function(){return H.H.useId()},Ha.useImperativeHandle=function(pe,Ie,me){return H.H.useImperativeHandle(pe,Ie,me)},Ha.useInsertionEffect=function(pe,Ie){return H.H.useInsertionEffect(pe,Ie)},Ha.useLayoutEffect=function(pe,Ie){return H.H.useLayoutEffect(pe,Ie)},Ha.useMemo=function(pe,Ie){return H.H.useMemo(pe,Ie)},Ha.useOptimistic=function(pe,Ie){return H.H.useOptimistic(pe,Ie)},Ha.useReducer=function(pe,Ie,me){return H.H.useReducer(pe,Ie,me)},Ha.useRef=function(pe){return H.H.useRef(pe)},Ha.useState=function(pe){return H.H.useState(pe)},Ha.useSyncExternalStore=function(pe,Ie,me){return H.H.useSyncExternalStore(pe,Ie,me)},Ha.useTransition=function(){return H.H.useTransition()},Ha.version="19.1.0",Ha}var NO;function yy(){return NO||(NO=1,LA.exports=iZ()),LA.exports}var Be=yy();const zt=vy(Be),rw=eZ({__proto__:null,default:zt},[Be]);var NA={exports:{}},Ub={},kA={exports:{}},OA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kO;function aZ(){return kO||(kO=1,function(t){function e(se,Se){var ye=se.length;se.push(Se);e:for(;0<ye;){var Te=ye-1>>>1,pe=se[Te];if(0<i(pe,Se))se[Te]=Se,se[ye]=pe,ye=Te;else break e}}function n(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var Se=se[0],ye=se.pop();if(ye!==Se){se[0]=ye;e:for(var Te=0,pe=se.length,Ie=pe>>>1;Te<Ie;){var me=2*(Te+1)-1,xe=se[me],ve=me+1,Ee=se[ve];if(0>i(xe,ye))ve<pe&&0>i(Ee,xe)?(se[Te]=Ee,se[ve]=ye,Te=ve):(se[Te]=xe,se[me]=ye,Te=me);else if(ve<pe&&0>i(Ee,ye))se[Te]=Ee,se[ve]=ye,Te=ve;else break e}}return Se}function i(se,Se){var ye=se.sortIndex-Se.sortIndex;return ye!==0?ye:se.id-Se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],h=[],d=1,v=null,w=3,_=!1,E=!1,M=!1,D=!1,A=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function N(se){for(var Se=n(h);Se!==null;){if(Se.callback===null)r(h);else if(Se.startTime<=se)r(h),Se.sortIndex=Se.expirationTime,e(c,Se);else break;Se=n(h)}}function H(se){if(M=!1,N(se),!E)if(n(c)!==null)E=!0,G||(G=!0,Q());else{var Se=n(h);Se!==null&&ce(H,Se.startTime-se)}}var G=!1,W=-1,X=5,K=-1;function k(){return D?!0:!(t.unstable_now()-K<X)}function $(){if(D=!1,G){var se=t.unstable_now();K=se;var Se=!0;try{e:{E=!1,M&&(M=!1,F(W),W=-1),_=!0;var ye=w;try{t:{for(N(se),v=n(c);v!==null&&!(v.expirationTime>se&&k());){var Te=v.callback;if(typeof Te=="function"){v.callback=null,w=v.priorityLevel;var pe=Te(v.expirationTime<=se);if(se=t.unstable_now(),typeof pe=="function"){v.callback=pe,N(se),Se=!0;break t}v===n(c)&&r(c),N(se)}else r(c);v=n(c)}if(v!==null)Se=!0;else{var Ie=n(h);Ie!==null&&ce(H,Ie.startTime-se),Se=!1}}break e}finally{v=null,w=ye,_=!1}Se=void 0}}finally{Se?Q():G=!1}}}var Q;if(typeof O=="function")Q=function(){O($)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ae=ie.port2;ie.port1.onmessage=$,Q=function(){ae.postMessage(null)}}else Q=function(){A($,0)};function ce(se,Se){W=A(function(){se(t.unstable_now())},Se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(se){switch(w){case 1:case 2:case 3:var Se=3;break;default:Se=w}var ye=w;w=Se;try{return se()}finally{w=ye}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(se,Se){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ye=w;w=se;try{return Se()}finally{w=ye}},t.unstable_scheduleCallback=function(se,Se,ye){var Te=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Te+ye:Te):ye=Te,se){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ye+pe,se={id:d++,callback:Se,priorityLevel:se,startTime:ye,expirationTime:pe,sortIndex:-1},ye>Te?(se.sortIndex=ye,e(h,se),n(c)===null&&se===n(h)&&(M?(F(W),W=-1):M=!0,ce(H,ye-Te))):(se.sortIndex=pe,e(c,se),E||_||(E=!0,G||(G=!0,Q()))),se},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(se){var Se=w;return function(){var ye=w;w=Se;try{return se.apply(this,arguments)}finally{w=ye}}}}(OA)),OA}var OO;function oZ(){return OO||(OO=1,kA.exports=aZ()),kA.exports}var FA={exports:{}},uh={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FO;function sZ(){if(FO)return uh;FO=1;var t=yy();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(c,h,d){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:c,containerInfo:h,implementation:d}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return uh.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,uh.createPortal=function(c,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(c,h,null,d)},uh.flushSync=function(c){var h=s.T,d=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=h,r.p=d,r.d.f()}},uh.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},uh.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},uh.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var d=h.as,v=a(d,h.crossOrigin),w=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:_}):d==="script"&&r.d.X(c,{crossOrigin:v,integrity:w,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},uh.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=a(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},uh.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,v=a(d,h.crossOrigin);r.d.L(c,d,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},uh.preloadModule=function(c,h){if(typeof c=="string")if(h){var d=a(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},uh.requestFormReset=function(c){r.d.r(c)},uh.unstable_batchedUpdates=function(c,h){return c(h)},uh.useFormState=function(c,h,d){return s.H.useFormState(c,h,d)},uh.useFormStatus=function(){return s.H.useHostTransitionStatus()},uh.version="19.1.0",uh}var BO;function kG(){if(BO)return FA.exports;BO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),FA.exports=sZ(),FA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zO;function lZ(){if(zO)return Ub;zO=1;var t=oZ(),e=yy(),n=kG();function r(f){var x="https://react.dev/errors/"+f;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)x+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+f+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function o(f){var x=f,C=f;if(f.alternate)for(;x.return;)x=x.return;else{f=x;do x=f,(x.flags&4098)!==0&&(C=x.return),f=x.return;while(f)}return x.tag===3?C:null}function s(f){if(f.tag===13){var x=f.memoizedState;if(x===null&&(f=f.alternate,f!==null&&(x=f.memoizedState)),x!==null)return x.dehydrated}return null}function a(f){if(o(f)!==f)throw Error(r(188))}function c(f){var x=f.alternate;if(!x){if(x=o(f),x===null)throw Error(r(188));return x!==f?null:f}for(var C=f,z=x;;){var ee=C.return;if(ee===null)break;var he=ee.alternate;if(he===null){if(z=ee.return,z!==null){C=z;continue}break}if(ee.child===he.child){for(he=ee.child;he;){if(he===C)return a(ee),f;if(he===z)return a(ee),x;he=he.sibling}throw Error(r(188))}if(C.return!==z.return)C=ee,z=he;else{for(var Qe=!1,St=ee.child;St;){if(St===C){Qe=!0,C=ee,z=he;break}if(St===z){Qe=!0,z=ee,C=he;break}St=St.sibling}if(!Qe){for(St=he.child;St;){if(St===C){Qe=!0,C=he,z=ee;break}if(St===z){Qe=!0,z=he,C=ee;break}St=St.sibling}if(!Qe)throw Error(r(189))}}if(C.alternate!==z)throw Error(r(190))}if(C.tag!==3)throw Error(r(188));return C.stateNode.current===C?f:x}function h(f){var x=f.tag;if(x===5||x===26||x===27||x===6)return f;for(f=f.child;f!==null;){if(x=h(f),x!==null)return x;f=f.sibling}return null}var d=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),O=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function Q(f){return f===null||typeof f!="object"?null:(f=$&&f[$]||f["@@iterator"],typeof f=="function"?f:null)}var ie=Symbol.for("react.client.reference");function ae(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===ie?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case E:return"Fragment";case D:return"Profiler";case M:return"StrictMode";case H:return"Suspense";case G:return"SuspenseList";case K:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case _:return"Portal";case O:return(f.displayName||"Context")+".Provider";case F:return(f._context.displayName||"Context")+".Consumer";case N:var x=f.render;return f=f.displayName,f||(f=x.displayName||x.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case W:return x=f.displayName||null,x!==null?x:ae(f.type)||"Memo";case X:x=f._payload,f=f._init;try{return ae(f(x))}catch{}}return null}var ce=Array.isArray,se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Te=[],pe=-1;function Ie(f){return{current:f}}function me(f){0>pe||(f.current=Te[pe],Te[pe]=null,pe--)}function xe(f,x){pe++,Te[pe]=f.current,f.current=x}var ve=Ie(null),Ee=Ie(null),De=Ie(null),We=Ie(null);function Ae(f,x){switch(xe(De,x),xe(Ee,f),xe(ve,null),x.nodeType){case 9:case 11:f=(f=x.documentElement)&&(f=f.namespaceURI)?d0(f):0;break;default:if(f=x.tagName,x=x.namespaceURI)x=d0(x),f=p0(x,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}me(ve),xe(ve,f)}function ut(){me(ve),me(Ee),me(De)}function pt(f){f.memoizedState!==null&&xe(We,f);var x=ve.current,C=p0(x,f.type);x!==C&&(xe(Ee,f),xe(ve,C))}function st(f){Ee.current===f&&(me(ve),me(Ee)),We.current===f&&(me(We),li._currentValue=ye)}var Ce=Object.prototype.hasOwnProperty,It=t.unstable_scheduleCallback,Ve=t.unstable_cancelCallback,yt=t.unstable_shouldYield,Ze=t.unstable_requestPaint,wt=t.unstable_now,Ut=t.unstable_getCurrentPriorityLevel,ht=t.unstable_ImmediatePriority,qt=t.unstable_UserBlockingPriority,Ye=t.unstable_NormalPriority,Re=t.unstable_LowPriority,Pt=t.unstable_IdlePriority,Dt=t.log,At=t.unstable_setDisableYieldValue,Bt=null,gn=null;function Zt(f){if(typeof Dt=="function"&&At(f),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(Bt,f)}catch{}}var cn=Math.clz32?Math.clz32:qn,$t=Math.log,Et=Math.LN2;function qn(f){return f>>>=0,f===0?32:31-($t(f)/Et|0)|0}var Dn=256,sr=4194304;function rt(f){var x=f&42;if(x!==0)return x;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function ze(f,x,C){var z=f.pendingLanes;if(z===0)return 0;var ee=0,he=f.suspendedLanes,Qe=f.pingedLanes;f=f.warmLanes;var St=z&134217727;return St!==0?(z=St&~he,z!==0?ee=rt(z):(Qe&=St,Qe!==0?ee=rt(Qe):C||(C=St&~f,C!==0&&(ee=rt(C))))):(St=z&~he,St!==0?ee=rt(St):Qe!==0?ee=rt(Qe):C||(C=z&~f,C!==0&&(ee=rt(C)))),ee===0?0:x!==0&&x!==ee&&(x&he)===0&&(he=ee&-ee,C=x&-x,he>=C||he===32&&(C&4194048)!==0)?x:ee}function Xe(f,x){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&x)===0}function Fe(f,x){switch(f){case 1:case 2:case 4:case 8:case 64:return x+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function He(){var f=Dn;return Dn<<=1,(Dn&4194048)===0&&(Dn=256),f}function mt(){var f=sr;return sr<<=1,(sr&62914560)===0&&(sr=4194304),f}function it(f){for(var x=[],C=0;31>C;C++)x.push(f);return x}function xt(f,x){f.pendingLanes|=x,x!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function Tt(f,x,C,z,ee,he){var Qe=f.pendingLanes;f.pendingLanes=C,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=C,f.entangledLanes&=C,f.errorRecoveryDisabledLanes&=C,f.shellSuspendCounter=0;var St=f.entanglements,ln=f.expirationTimes,$n=f.hiddenUpdates;for(C=Qe&~C;0<C;){var fr=31-cn(C),Dr=1<<fr;St[fr]=0,ln[fr]=-1;var Zn=$n[fr];if(Zn!==null)for($n[fr]=null,fr=0;fr<Zn.length;fr++){var er=Zn[fr];er!==null&&(er.lane&=-536870913)}C&=~Dr}z!==0&&kt(f,z,0),he!==0&&ee===0&&f.tag!==0&&(f.suspendedLanes|=he&~(Qe&~x))}function kt(f,x,C){f.pendingLanes|=x,f.suspendedLanes&=~x;var z=31-cn(x);f.entangledLanes|=x,f.entanglements[z]=f.entanglements[z]|1073741824|C&4194090}function Jt(f,x){var C=f.entangledLanes|=x;for(f=f.entanglements;C;){var z=31-cn(C),ee=1<<z;ee&x|f[z]&x&&(f[z]|=x),C&=~ee}}function rn(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function Yt(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function Qn(){var f=Se.p;return f!==0?f:(f=window.event,f===void 0?32:ec(f.type))}function An(f,x){var C=Se.p;try{return Se.p=f,x()}finally{Se.p=C}}var jt=Math.random().toString(36).slice(2),Pe="__reactFiber$"+jt,je="__reactProps$"+jt,_t="__reactContainer$"+jt,Qt="__reactEvents$"+jt,en="__reactListeners$"+jt,Fn="__reactHandles$"+jt,Wn="__reactResources$"+jt,kr="__reactMarker$"+jt;function Qr(f){delete f[Pe],delete f[je],delete f[Qt],delete f[en],delete f[Fn]}function vi(f){var x=f[Pe];if(x)return x;for(var C=f.parentNode;C;){if(x=C[_t]||C[Pe]){if(C=x.alternate,x.child!==null||C!==null&&C.child!==null)for(f=Nb(f);f!==null;){if(C=f[Pe])return C;f=Nb(f)}return x}f=C,C=f.parentNode}return null}function zr(f){if(f=f[Pe]||f[_t]){var x=f.tag;if(x===5||x===6||x===13||x===26||x===27||x===3)return f}return null}function zn(f){var x=f.tag;if(x===5||x===26||x===27||x===6)return f.stateNode;throw Error(r(33))}function En(f){var x=f[Wn];return x||(x=f[Wn]={hoistableStyles:new Map,hoistableScripts:new Map}),x}function mr(f){f[kr]=!0}var yi=new Set,_i={};function gi(f,x){lt(f,x),lt(f+"Capture",x)}function lt(f,x){for(_i[f]=x,f=0;f<x.length;f++)yi.add(x[f])}var yn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ln={},Vn={};function bn(f){return Ce.call(Vn,f)?!0:Ce.call(Ln,f)?!1:yn.test(f)?Vn[f]=!0:(Ln[f]=!0,!1)}function wr(f,x,C){if(bn(x))if(C===null)f.removeAttribute(x);else{switch(typeof C){case"undefined":case"function":case"symbol":f.removeAttribute(x);return;case"boolean":var z=x.toLowerCase().slice(0,5);if(z!=="data-"&&z!=="aria-"){f.removeAttribute(x);return}}f.setAttribute(x,""+C)}}function Lr(f,x,C){if(C===null)f.removeAttribute(x);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(x);return}f.setAttribute(x,""+C)}}function Mr(f,x,C,z){if(z===null)f.removeAttribute(C);else{switch(typeof z){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(C);return}f.setAttributeNS(x,C,""+z)}}var Xr,Yr;function ni(f){if(Xr===void 0)try{throw Error()}catch(C){var x=C.stack.trim().match(/\n( *(at )?)/);Xr=x&&x[1]||"",Yr=-1<C.stack.indexOf(`
    at`)?" (<anonymous>)":-1<C.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xr+f+Yr}var bi=!1;function Ni(f,x){if(!f||bi)return"";bi=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(x){var Dr=function(){throw Error()};if(Object.defineProperty(Dr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Dr,[])}catch(er){var Zn=er}Reflect.construct(f,[],Dr)}else{try{Dr.call()}catch(er){Zn=er}f.call(Dr.prototype)}}else{try{throw Error()}catch(er){Zn=er}(Dr=f())&&typeof Dr.catch=="function"&&Dr.catch(function(){})}}catch(er){if(er&&Zn&&typeof er.stack=="string")return[er.stack,Zn.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var ee=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");ee&&ee.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var he=z.DetermineComponentFrameRoot(),Qe=he[0],St=he[1];if(Qe&&St){var ln=Qe.split(`
`),$n=St.split(`
`);for(ee=z=0;z<ln.length&&!ln[z].includes("DetermineComponentFrameRoot");)z++;for(;ee<$n.length&&!$n[ee].includes("DetermineComponentFrameRoot");)ee++;if(z===ln.length||ee===$n.length)for(z=ln.length-1,ee=$n.length-1;1<=z&&0<=ee&&ln[z]!==$n[ee];)ee--;for(;1<=z&&0<=ee;z--,ee--)if(ln[z]!==$n[ee]){if(z!==1||ee!==1)do if(z--,ee--,0>ee||ln[z]!==$n[ee]){var fr=`
`+ln[z].replace(" at new "," at ");return f.displayName&&fr.includes("<anonymous>")&&(fr=fr.replace("<anonymous>",f.displayName)),fr}while(1<=z&&0<=ee);break}}}finally{bi=!1,Error.prepareStackTrace=C}return(C=f?f.displayName||f.name:"")?ni(C):""}function Yi(f){switch(f.tag){case 26:case 27:case 5:return ni(f.type);case 16:return ni("Lazy");case 13:return ni("Suspense");case 19:return ni("SuspenseList");case 0:case 15:return Ni(f.type,!1);case 11:return Ni(f.type.render,!1);case 1:return Ni(f.type,!0);case 31:return ni("Activity");default:return""}}function Qi(f){try{var x="";do x+=Yi(f),f=f.return;while(f);return x}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}function _a(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function ra(f){var x=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Ai(f){var x=ra(f)?"checked":"value",C=Object.getOwnPropertyDescriptor(f.constructor.prototype,x),z=""+f[x];if(!f.hasOwnProperty(x)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var ee=C.get,he=C.set;return Object.defineProperty(f,x,{configurable:!0,get:function(){return ee.call(this)},set:function(Qe){z=""+Qe,he.call(this,Qe)}}),Object.defineProperty(f,x,{enumerable:C.enumerable}),{getValue:function(){return z},setValue:function(Qe){z=""+Qe},stopTracking:function(){f._valueTracker=null,delete f[x]}}}}function Ka(f){f._valueTracker||(f._valueTracker=Ai(f))}function la(f){if(!f)return!1;var x=f._valueTracker;if(!x)return!0;var C=x.getValue(),z="";return f&&(z=ra(f)?f.checked?"true":"false":f.value),f=z,f!==C?(x.setValue(f),!0):!1}function Sa(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var _o=/[\n"\\]/g;function Ui(f){return f.replace(_o,function(x){return"\\"+x.charCodeAt(0).toString(16)+" "})}function Pi(f,x,C,z,ee,he,Qe,St){f.name="",Qe!=null&&typeof Qe!="function"&&typeof Qe!="symbol"&&typeof Qe!="boolean"?f.type=Qe:f.removeAttribute("type"),x!=null?Qe==="number"?(x===0&&f.value===""||f.value!=x)&&(f.value=""+_a(x)):f.value!==""+_a(x)&&(f.value=""+_a(x)):Qe!=="submit"&&Qe!=="reset"||f.removeAttribute("value"),x!=null?to(f,Qe,_a(x)):C!=null?to(f,Qe,_a(C)):z!=null&&f.removeAttribute("value"),ee==null&&he!=null&&(f.defaultChecked=!!he),ee!=null&&(f.checked=ee&&typeof ee!="function"&&typeof ee!="symbol"),St!=null&&typeof St!="function"&&typeof St!="symbol"&&typeof St!="boolean"?f.name=""+_a(St):f.removeAttribute("name")}function Ta(f,x,C,z,ee,he,Qe,St){if(he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"&&(f.type=he),x!=null||C!=null){if(!(he!=="submit"&&he!=="reset"||x!=null))return;C=C!=null?""+_a(C):"",x=x!=null?""+_a(x):C,St||x===f.value||(f.value=x),f.defaultValue=x}z=z??ee,z=typeof z!="function"&&typeof z!="symbol"&&!!z,f.checked=St?f.checked:!!z,f.defaultChecked=!!z,Qe!=null&&typeof Qe!="function"&&typeof Qe!="symbol"&&typeof Qe!="boolean"&&(f.name=Qe)}function to(f,x,C){x==="number"&&Sa(f.ownerDocument)===f||f.defaultValue===""+C||(f.defaultValue=""+C)}function ne(f,x,C,z){if(f=f.options,x){x={};for(var ee=0;ee<C.length;ee++)x["$"+C[ee]]=!0;for(C=0;C<f.length;C++)ee=x.hasOwnProperty("$"+f[C].value),f[C].selected!==ee&&(f[C].selected=ee),ee&&z&&(f[C].defaultSelected=!0)}else{for(C=""+_a(C),x=null,ee=0;ee<f.length;ee++){if(f[ee].value===C){f[ee].selected=!0,z&&(f[ee].defaultSelected=!0);return}x!==null||f[ee].disabled||(x=f[ee])}x!==null&&(x.selected=!0)}}function we(f,x,C){if(x!=null&&(x=""+_a(x),x!==f.value&&(f.value=x),C==null)){f.defaultValue!==x&&(f.defaultValue=x);return}f.defaultValue=C!=null?""+_a(C):""}function et(f,x,C,z){if(x==null){if(z!=null){if(C!=null)throw Error(r(92));if(ce(z)){if(1<z.length)throw Error(r(93));z=z[0]}C=z}C==null&&(C=""),x=C}C=_a(x),f.defaultValue=C,z=f.textContent,z===C&&z!==""&&z!==null&&(f.value=z)}function Gt(f,x){if(x){var C=f.firstChild;if(C&&C===f.lastChild&&C.nodeType===3){C.nodeValue=x;return}}f.textContent=x}var on=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dn(f,x,C){var z=x.indexOf("--")===0;C==null||typeof C=="boolean"||C===""?z?f.setProperty(x,""):x==="float"?f.cssFloat="":f[x]="":z?f.setProperty(x,C):typeof C!="number"||C===0||on.has(x)?x==="float"?f.cssFloat=C:f[x]=(""+C).trim():f[x]=C+"px"}function xn(f,x,C){if(x!=null&&typeof x!="object")throw Error(r(62));if(f=f.style,C!=null){for(var z in C)!C.hasOwnProperty(z)||x!=null&&x.hasOwnProperty(z)||(z.indexOf("--")===0?f.setProperty(z,""):z==="float"?f.cssFloat="":f[z]="");for(var ee in x)z=x[ee],x.hasOwnProperty(ee)&&C[ee]!==z&&dn(f,ee,z)}else for(var he in x)x.hasOwnProperty(he)&&dn(f,he,x[he])}function cr(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ur=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ir(f){return Rr.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var Nr=null;function Wr(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var ua=null,ui=null;function Vr(f){var x=zr(f);if(x&&(f=x.stateNode)){var C=f[je]||null;e:switch(f=x.stateNode,x.type){case"input":if(Pi(f,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name),x=C.name,C.type==="radio"&&x!=null){for(C=f;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll('input[name="'+Ui(""+x)+'"][type="radio"]'),x=0;x<C.length;x++){var z=C[x];if(z!==f&&z.form===f.form){var ee=z[je]||null;if(!ee)throw Error(r(90));Pi(z,ee.value,ee.defaultValue,ee.defaultValue,ee.checked,ee.defaultChecked,ee.type,ee.name)}}for(x=0;x<C.length;x++)z=C[x],z.form===f.form&&la(z)}break e;case"textarea":we(f,C.value,C.defaultValue);break e;case"select":x=C.value,x!=null&&ne(f,!!C.multiple,x,!1)}}}var hr=!1;function ii(f,x,C){if(hr)return f(x,C);hr=!0;try{var z=f(x);return z}finally{if(hr=!1,(ua!==null||ui!==null)&&(i0(),ua&&(x=ua,f=ui,ui=ua=null,Vr(x),f)))for(x=0;x<f.length;x++)Vr(f[x])}}function Wi(f,x){var C=f.stateNode;if(C===null)return null;var z=C[je]||null;if(z===null)return null;C=z[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(f=f.type,z=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!z;break e;default:f=!1}if(f)return null;if(C&&typeof C!="function")throw Error(r(231,x,typeof C));return C}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ji=!1;if(ea)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){ji=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{ji=!1}var ri=null,Jr=null,_l=null;function ha(){if(_l)return _l;var f,x=Jr,C=x.length,z,ee="value"in ri?ri.value:ri.textContent,he=ee.length;for(f=0;f<C&&x[f]===ee[f];f++);var Qe=C-f;for(z=1;z<=Qe&&x[C-z]===ee[he-z];z++);return _l=ee.slice(f,1<z?1-z:void 0)}function xo(f){var x=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&x===13&&(f=13)):f=x,f===10&&(f=13),32<=f||f===13?f:0}function Fo(){return!0}function no(){return!1}function Bo(f){function x(C,z,ee,he,Qe){this._reactName=C,this._targetInst=ee,this.type=z,this.nativeEvent=he,this.target=Qe,this.currentTarget=null;for(var St in f)f.hasOwnProperty(St)&&(C=f[St],this[St]=C?C(he):he[St]);return this.isDefaultPrevented=(he.defaultPrevented!=null?he.defaultPrevented:he.returnValue===!1)?Fo:no,this.isPropagationStopped=no,this}return d(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),x}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=Bo(ts),Ws=d({},ts,{view:0,detail:0}),wc=Bo(Ws),$l,sl,ws,Wa=d({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==ws&&(ws&&f.type==="mousemove"?($l=f.screenX-ws.screenX,sl=f.screenY-ws.screenY):sl=$l=0,ws=f),$l)},movementY:function(f){return"movementY"in f?f.movementY:sl}}),bo=Bo(Wa),Bu=d({},Wa,{dataTransfer:0}),Do=Bo(Bu),Ea=d({},Ws,{relatedTarget:0}),ns=Bo(Ea),Ss=d({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),bl=Bo(Ss),Fs=d({},ts,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),Dl=Bo(Fs),Sc=d({},ts,{data:0}),Ec=Bo(Sc),Eu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(f){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(f):(f=Xs[f])?!!x[f]:!1}function Es(){return $c}var Wl=d({},Ws,{key:function(f){if(f.key){var x=Eu[f.key]||f.key;if(x!=="Unidentified")return x}return f.type==="keypress"?(f=xo(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Tu[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(f){return f.type==="keypress"?xo(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?xo(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Lo=Bo(Wl),zu=d({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),au=Bo(zu),Xo=d({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),Uu=Bo(Xo),fe=d({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),nt=Bo(fe),Wt=d({},Wa,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),un=Bo(Wt),kn=d({},ts,{newState:0,oldState:0}),Kn=Bo(kn),Pr=[9,13,27,32],oi=ea&&"CompositionEvent"in window,Ci=null;ea&&"documentMode"in document&&(Ci=document.documentMode);var Zi=ea&&"TextEvent"in window&&!Ci,Oi=ea&&(!oi||Ci&&8<Ci&&11>=Ci),qi=" ",za=!1;function ro(f,x){switch(f){case"keyup":return Pr.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ja(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var zo=!1;function co(f,x){switch(f){case"compositionend":return Ja(x);case"keypress":return x.which!==32?null:(za=!0,qi);case"textInput":return f=x.data,f===qi&&za?null:f;default:return null}}function Ts(f,x){if(zo)return f==="compositionend"||!oi&&ro(f,x)?(f=ha(),_l=Jr=ri=null,zo=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Oi&&x.locale!=="ko"?null:x.data;default:return null}}var ll={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ys(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x==="input"?!!ll[f.type]:x==="textarea"}function Wc(f,x,C,z){ua?ui?ui.push(z):ui=[z]:ua=z,x=p_(x,"onChange"),0<x.length&&(C=new xl("onChange","change",null,C,z),f.push({event:C,listeners:x}))}var Ll=null,Xl=null;function Tc(f){lh(f,0)}function Yl(f){var x=zn(f);if(la(x))return f}function Nl(f,x){if(f==="change")return x}var ju=!1;if(ea){var io;if(ea){var Gu="oninput"in document;if(!Gu){var Zs=document.createElement("div");Zs.setAttribute("oninput","return;"),Gu=typeof Zs.oninput=="function"}io=Gu}else io=!1;ju=io&&(!document.documentMode||9<document.documentMode)}function Cs(){Ll&&(Ll.detachEvent("onpropertychange",Vu),Xl=Ll=null)}function Vu(f){if(f.propertyName==="value"&&Yl(Xl)){var x=[];Wc(x,Xl,f,Wr(f)),ii(Tc,x)}}function rs(f,x,C){f==="focusin"?(Cs(),Ll=x,Xl=C,Ll.attachEvent("onpropertychange",Vu)):f==="focusout"&&Cs()}function Cc(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Yl(Xl)}function sc(f,x){if(f==="click")return Yl(x)}function pa(f,x){if(f==="input"||f==="change")return Yl(x)}function ds(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var wo=typeof Object.is=="function"?Object.is:ds;function Cu(f,x){if(wo(f,x))return!0;if(typeof f!="object"||f===null||typeof x!="object"||x===null)return!1;var C=Object.keys(f),z=Object.keys(x);if(C.length!==z.length)return!1;for(z=0;z<C.length;z++){var ee=C[z];if(!Ce.call(x,ee)||!wo(f[ee],x[ee]))return!1}return!0}function wh(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Mn(f,x){var C=wh(f);f=0;for(var z;C;){if(C.nodeType===3){if(z=f+C.textContent.length,f<=x&&z>=x)return{node:C,offset:x-f};f=z}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=wh(C)}}function Yn(f,x){return f&&x?f===x?!0:f&&f.nodeType===3?!1:x&&x.nodeType===3?Yn(f,x.parentNode):"contains"in f?f.contains(x):f.compareDocumentPosition?!!(f.compareDocumentPosition(x)&16):!1:!1}function jr(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var x=Sa(f.document);x instanceof f.HTMLIFrameElement;){try{var C=typeof x.contentWindow.location.href=="string"}catch{C=!1}if(C)f=x.contentWindow;else break;x=Sa(f.document)}return x}function ai(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x&&(x==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||x==="textarea"||f.contentEditable==="true")}var ia=ea&&"documentMode"in document&&11>=document.documentMode,Mi=null,I=null,y=null,b=!1;function R(f,x,C){var z=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;b||Mi==null||Mi!==Sa(z)||(z=Mi,"selectionStart"in z&&ai(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),y&&Cu(y,z)||(y=z,z=p_(I,"onSelect"),0<z.length&&(x=new xl("onSelect","select",null,x,C),f.push({event:x,listeners:z}),x.target=Mi)))}function Z(f,x){var C={};return C[f.toLowerCase()]=x.toLowerCase(),C["Webkit"+f]="webkit"+x,C["Moz"+f]="moz"+x,C}var le={animationend:Z("Animation","AnimationEnd"),animationiteration:Z("Animation","AnimationIteration"),animationstart:Z("Animation","AnimationStart"),transitionrun:Z("Transition","TransitionRun"),transitionstart:Z("Transition","TransitionStart"),transitioncancel:Z("Transition","TransitionCancel"),transitionend:Z("Transition","TransitionEnd")},Me={},Ue={};ea&&(Ue=document.createElement("div").style,"AnimationEvent"in window||(delete le.animationend.animation,delete le.animationiteration.animation,delete le.animationstart.animation),"TransitionEvent"in window||delete le.transitionend.transition);function dt(f){if(Me[f])return Me[f];if(!le[f])return f;var x=le[f],C;for(C in x)if(x.hasOwnProperty(C)&&C in Ue)return Me[f]=x[C];return f}var Nt=dt("animationend"),wn=dt("animationiteration"),Nn=dt("animationstart"),dr=dt("transitionrun"),$r=dt("transitionstart"),mi=dt("transitioncancel"),xi=dt("transitionend"),si=new Map,ci="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ci.push("scrollEnd");function Fi(f,x){si.set(f,x),gi(x,[f])}var hi=new WeakMap;function Ii(f,x){if(typeof f=="object"&&f!==null){var C=hi.get(f);return C!==void 0?C:(x={value:f,source:x,stack:Qi(x)},hi.set(f,x),x)}return{value:f,source:x,stack:Qi(x)}}var Di=[],xa=0,ka=0;function Bs(){for(var f=xa,x=ka=xa=0;x<f;){var C=Di[x];Di[x++]=null;var z=Di[x];Di[x++]=null;var ee=Di[x];Di[x++]=null;var he=Di[x];if(Di[x++]=null,z!==null&&ee!==null){var Qe=z.pending;Qe===null?ee.next=ee:(ee.next=Qe.next,Qe.next=ee),z.pending=ee}he!==0&&ou(C,ee,he)}}function kl(f,x,C,z){Di[xa++]=f,Di[xa++]=x,Di[xa++]=C,Di[xa++]=z,ka|=z,f.lanes|=z,f=f.alternate,f!==null&&(f.lanes|=z)}function ul(f,x,C,z){return kl(f,x,C,z),Js(f)}function Ks(f,x){return kl(f,null,null,x),Js(f)}function ou(f,x,C){f.lanes|=C;var z=f.alternate;z!==null&&(z.lanes|=C);for(var ee=!1,he=f.return;he!==null;)he.childLanes|=C,z=he.alternate,z!==null&&(z.childLanes|=C),he.tag===22&&(f=he.stateNode,f===null||f._visibility&1||(ee=!0)),f=he,he=he.return;return f.tag===3?(he=f.stateNode,ee&&x!==null&&(ee=31-cn(C),f=he.hiddenUpdates,z=f[ee],z===null?f[ee]=[x]:z.push(x),x.lane=C|536870912),he):null}function Js(f){if(50<nf)throw nf=0,jm=null,Error(r(185));for(var x=f.return;x!==null;)f=x,x=f.return;return f.tag===3?f.stateNode:null}var So={};function cl(f,x,C,z){this.tag=f,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(f,x,C,z){return new cl(f,x,C,z)}function Xc(f){return f=f.prototype,!(!f||!f.isReactComponent)}function wl(f,x){var C=f.alternate;return C===null?(C=ps(f.tag,x,f.key,f.mode),C.elementType=f.elementType,C.type=f.type,C.stateNode=f.stateNode,C.alternate=f,f.alternate=C):(C.pendingProps=x,C.type=f.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=f.flags&65011712,C.childLanes=f.childLanes,C.lanes=f.lanes,C.child=f.child,C.memoizedProps=f.memoizedProps,C.memoizedState=f.memoizedState,C.updateQueue=f.updateQueue,x=f.dependencies,C.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},C.sibling=f.sibling,C.index=f.index,C.ref=f.ref,C.refCleanup=f.refCleanup,C}function Mu(f,x){f.flags&=65011714;var C=f.alternate;return C===null?(f.childLanes=0,f.lanes=x,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=C.childLanes,f.lanes=C.lanes,f.child=C.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=C.memoizedProps,f.memoizedState=C.memoizedState,f.updateQueue=C.updateQueue,f.type=C.type,x=C.dependencies,f.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),f}function Yc(f,x,C,z,ee,he){var Qe=0;if(z=f,typeof f=="function")Xc(f)&&(Qe=1);else if(typeof f=="string")Qe=Ct(f,C,ve.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case K:return f=ps(31,C,x,ee),f.elementType=K,f.lanes=he,f;case E:return Sh(C.children,ee,he,x);case M:Qe=8,ee|=24;break;case D:return f=ps(12,C,x,ee|2),f.elementType=D,f.lanes=he,f;case H:return f=ps(13,C,x,ee),f.elementType=H,f.lanes=he,f;case G:return f=ps(19,C,x,ee),f.elementType=G,f.lanes=he,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case A:case O:Qe=10;break e;case F:Qe=9;break e;case N:Qe=11;break e;case W:Qe=14;break e;case X:Qe=16,z=null;break e}Qe=29,C=Error(r(130,f===null?"null":typeof f,"")),z=null}return x=ps(Qe,C,x,ee),x.elementType=f,x.type=z,x.lanes=he,x}function Sh(f,x,C,z){return f=ps(7,f,z,x),f.lanes=C,f}function nd(f,x,C){return f=ps(6,f,null,x),f.lanes=C,f}function rd(f,x,C){return x=ps(4,f.children!==null?f.children:[],f.key,x),x.lanes=C,x.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},x}var Zc=[],Hu=0,Eh=null,Ef=0,su=[],Sl=0,lc=null,Th=1,Kc="";function Ro(f,x){Zc[Hu++]=Ef,Zc[Hu++]=Eh,Eh=f,Ef=x}function Yh(f,x,C){su[Sl++]=Th,su[Sl++]=Kc,su[Sl++]=lc,lc=f;var z=Th;f=Kc;var ee=32-cn(z)-1;z&=~(1<<ee),C+=1;var he=32-cn(x)+ee;if(30<he){var Qe=ee-ee%5;he=(z&(1<<Qe)-1).toString(32),z>>=Qe,ee-=Qe,Th=1<<32-cn(x)+ee|C<<ee|z,Kc=he+f}else Th=1<<he|C<<ee|z,Kc=f}function Zl(f){f.return!==null&&(Ro(f,1),Yh(f,1,0))}function Tf(f){for(;f===Eh;)Eh=Zc[--Hu],Zc[Hu]=null,Ef=Zc[--Hu],Zc[Hu]=null;for(;f===lc;)lc=su[--Sl],su[Sl]=null,Kc=su[--Sl],su[Sl]=null,Th=su[--Sl],su[Sl]=null}var Ms=null,is=null,Ra=!1,uc=null,qu=!1,zd=Error(r(519));function Zh(f){var x=Error(r(418,""));throw Cf(Ii(x,f)),zd}function Pp(f){var x=f.stateNode,C=f.type,z=f.memoizedProps;switch(x[Pe]=f,x[je]=z,C){case"dialog":Da("cancel",x),Da("close",x);break;case"iframe":case"object":case"embed":Da("load",x);break;case"video":case"audio":for(C=0;C<Fg.length;C++)Da(Fg[C],x);break;case"source":Da("error",x);break;case"img":case"image":case"link":Da("error",x),Da("load",x);break;case"details":Da("toggle",x);break;case"input":Da("invalid",x),Ta(x,z.value,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name,!0),Ka(x);break;case"select":Da("invalid",x);break;case"textarea":Da("invalid",x),et(x,z.value,z.defaultValue,z.children),Ka(x)}C=z.children,typeof C!="string"&&typeof C!="number"&&typeof C!="bigint"||x.textContent===""+C||z.suppressHydrationWarning===!0||Ab(x.textContent,C)?(z.popover!=null&&(Da("beforetoggle",x),Da("toggle",x)),z.onScroll!=null&&Da("scroll",x),z.onScrollEnd!=null&&Da("scrollend",x),z.onClick!=null&&(x.onclick=g_),x=!0):x=!1,x||Zh(f)}function Mc(f){for(Ms=f.return;Ms;)switch(Ms.tag){case 5:case 13:qu=!1;return;case 27:case 3:qu=!0;return;default:Ms=Ms.return}}function Qs(f){if(f!==Ms)return!1;if(!Ra)return Mc(f),Ra=!0,!1;var x=f.tag,C;if((C=x!==3&&x!==27)&&((C=x===5)&&(C=f.type,C=!(C!=="form"&&C!=="button")||Rb(f.type,f.memoizedProps)),C=!C),C&&is&&Zh(f),Mc(f),x===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));e:{for(f=f.nextSibling,x=0;f;){if(f.nodeType===8)if(C=f.data,C==="/$"){if(x===0){is=Nh(f.nextSibling);break e}x--}else C!=="$"&&C!=="$!"&&C!=="$?"||x++;f=f.nextSibling}is=null}}else x===27?(x=is,Jd(f.type)?(f=g0,g0=null,is=f):is=x):is=Ms?Nh(f.stateNode.nextSibling):null;return!0}function hl(){is=Ms=null,Ra=!1}function bg(){var f=uc;return f!==null&&(fc===null?fc=f:fc.push.apply(fc,f),uc=null),f}function Cf(f){uc===null?uc=[f]:uc.push(f)}var Ac=Ie(null),fl=null,Jc=null;function $u(f,x,C){xe(Ac,x._currentValue),x._currentValue=C}function lu(f){f._currentValue=Ac.current,me(Ac)}function dl(f,x,C){for(;f!==null;){var z=f.alternate;if((f.childLanes&x)!==x?(f.childLanes|=x,z!==null&&(z.childLanes|=x)):z!==null&&(z.childLanes&x)!==x&&(z.childLanes|=x),f===C)break;f=f.return}}function Ch(f,x,C,z){var ee=f.child;for(ee!==null&&(ee.return=f);ee!==null;){var he=ee.dependencies;if(he!==null){var Qe=ee.child;he=he.firstContext;e:for(;he!==null;){var St=he;he=ee;for(var ln=0;ln<x.length;ln++)if(St.context===x[ln]){he.lanes|=C,St=he.alternate,St!==null&&(St.lanes|=C),dl(he.return,C,f),z||(Qe=null);break e}he=St.next}}else if(ee.tag===18){if(Qe=ee.return,Qe===null)throw Error(r(341));Qe.lanes|=C,he=Qe.alternate,he!==null&&(he.lanes|=C),dl(Qe,C,f),Qe=null}else Qe=ee.child;if(Qe!==null)Qe.return=ee;else for(Qe=ee;Qe!==null;){if(Qe===f){Qe=null;break}if(ee=Qe.sibling,ee!==null){ee.return=Qe.return,Qe=ee;break}Qe=Qe.return}ee=Qe}}function Ol(f,x,C,z){f=null;for(var ee=x,he=!1;ee!==null;){if(!he){if((ee.flags&524288)!==0)he=!0;else if((ee.flags&262144)!==0)break}if(ee.tag===10){var Qe=ee.alternate;if(Qe===null)throw Error(r(387));if(Qe=Qe.memoizedProps,Qe!==null){var St=ee.type;wo(ee.pendingProps.value,Qe.value)||(f!==null?f.push(St):f=[St])}}else if(ee===We.current){if(Qe=ee.alternate,Qe===null)throw Error(r(387));Qe.memoizedState.memoizedState!==ee.memoizedState.memoizedState&&(f!==null?f.push(li):f=[li])}ee=ee.return}f!==null&&Ch(x,f,C,z),x.flags|=262144}function Wu(f){for(f=f.firstContext;f!==null;){if(!wo(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function Rc(f){fl=f,Jc=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function ao(f){return id(fl,f)}function Au(f,x){return fl===null&&Rc(f),id(f,x)}function id(f,x){var C=x._currentValue;if(x={context:x,memoizedValue:C,next:null},Jc===null){if(f===null)throw Error(r(308));Jc=x,f.dependencies={lanes:0,firstContext:x},f.flags|=524288}else Jc=Jc.next=x;return C}var Vv=typeof AbortController<"u"?AbortController:function(){var f=[],x=this.signal={aborted:!1,addEventListener:function(C,z){f.push(z)}};this.abort=function(){x.aborted=!0,f.forEach(function(C){return C()})}},Ip=t.unstable_scheduleCallback,Hv=t.unstable_NormalPriority,as={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new Vv,data:new Map,refCount:0}}function Fl(f){f.refCount--,f.refCount===0&&Ip(Hv,function(){f.controller.abort()})}var ei=null,Dp=0,cc=0,Qc=null;function Af(f,x){if(ei===null){var C=ei=[];Dp=0,cc=u_(),Qc={status:"pending",value:void 0,then:function(z){C.push(z)}}}return Dp++,x.then(Mh,Mh),x}function Mh(){if(--Dp===0&&ei!==null){Qc!==null&&(Qc.status="fulfilled");var f=ei;ei=null,cc=0,Qc=null;for(var x=0;x<f.length;x++)(0,f[x])()}}function Lp(f,x){var C=[],z={status:"pending",value:null,reason:null,then:function(ee){C.push(ee)}};return f.then(function(){z.status="fulfilled",z.value=x;for(var ee=0;ee<C.length;ee++)(0,C[ee])(x)},function(ee){for(z.status="rejected",z.reason=ee,ee=0;ee<C.length;ee++)(0,C[ee])(void 0)}),z}var q=se.S;se.S=function(f,x){typeof x=="object"&&x!==null&&typeof x.then=="function"&&Af(f,x),q!==null&&q(f,x)};var te=Ie(null);function _e(){var f=te.current;return f!==null?f:vs.pooledCache}function Oe(f,x){x===null?xe(te,te.current):xe(te,x.pool)}function at(){var f=_e();return f===null?null:{parent:as._currentValue,pool:f}}var gt=Error(r(460)),vt=Error(r(474)),bt=Error(r(542)),Mt={then:function(){}};function Vt(f){return f=f.status,f==="fulfilled"||f==="rejected"}function vn(){}function Hn(f,x,C){switch(C=f[C],C===void 0?f.push(x):C!==x&&(x.then(vn,vn),x=C),x.status){case"fulfilled":return x.value;case"rejected":throw f=x.reason,ar(f),f;default:if(typeof x.status=="string")x.then(vn,vn);else{if(f=vs,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=x,f.status="pending",f.then(function(z){if(x.status==="pending"){var ee=x;ee.status="fulfilled",ee.value=z}},function(z){if(x.status==="pending"){var ee=x;ee.status="rejected",ee.reason=z}})}switch(x.status){case"fulfilled":return x.value;case"rejected":throw f=x.reason,ar(f),f}throw Gn=x,gt}}var Gn=null;function Rn(){if(Gn===null)throw Error(r(459));var f=Gn;return Gn=null,f}function ar(f){if(f===gt||f===bt)throw Error(r(483))}var Jn=!1;function _n(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cn(f,x){f=f.updateQueue,x.updateQueue===f&&(x.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function gr(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Ar(f,x,C){var z=f.updateQueue;if(z===null)return null;if(z=z.shared,(Vo&2)!==0){var ee=z.pending;return ee===null?x.next=x:(x.next=ee.next,ee.next=x),z.pending=x,x=Js(f),ou(f,null,C),x}return kl(f,z,x,C),Js(f)}function Er(f,x,C){if(x=x.updateQueue,x!==null&&(x=x.shared,(C&4194048)!==0)){var z=x.lanes;z&=f.pendingLanes,C|=z,x.lanes=C,Jt(f,C)}}function ti(f,x){var C=f.updateQueue,z=f.alternate;if(z!==null&&(z=z.updateQueue,C===z)){var ee=null,he=null;if(C=C.firstBaseUpdate,C!==null){do{var Qe={lane:C.lane,tag:C.tag,payload:C.payload,callback:null,next:null};he===null?ee=he=Qe:he=he.next=Qe,C=C.next}while(C!==null);he===null?ee=he=x:he=he.next=x}else ee=he=x;C={baseState:z.baseState,firstBaseUpdate:ee,lastBaseUpdate:he,shared:z.shared,callbacks:z.callbacks},f.updateQueue=C;return}f=C.lastBaseUpdate,f===null?C.firstBaseUpdate=x:f.next=x,C.lastBaseUpdate=x}var Zr=!1;function yr(){if(Zr){var f=Qc;if(f!==null)throw f}}function or(f,x,C,z){Zr=!1;var ee=f.updateQueue;Jn=!1;var he=ee.firstBaseUpdate,Qe=ee.lastBaseUpdate,St=ee.shared.pending;if(St!==null){ee.shared.pending=null;var ln=St,$n=ln.next;ln.next=null,Qe===null?he=$n:Qe.next=$n,Qe=ln;var fr=f.alternate;fr!==null&&(fr=fr.updateQueue,St=fr.lastBaseUpdate,St!==Qe&&(St===null?fr.firstBaseUpdate=$n:St.next=$n,fr.lastBaseUpdate=ln))}if(he!==null){var Dr=ee.baseState;Qe=0,fr=$n=ln=null,St=he;do{var Zn=St.lane&-536870913,er=Zn!==St.lane;if(er?(eo&Zn)===Zn:(z&Zn)===Zn){Zn!==0&&Zn===cc&&(Zr=!0),fr!==null&&(fr=fr.next={lane:0,tag:St.tag,payload:St.payload,callback:null,next:null});e:{var va=f,aa=St;Zn=x;var Ma=C;switch(aa.tag){case 1:if(va=aa.payload,typeof va=="function"){Dr=va.call(Ma,Dr,Zn);break e}Dr=va;break e;case 3:va.flags=va.flags&-65537|128;case 0:if(va=aa.payload,Zn=typeof va=="function"?va.call(Ma,Dr,Zn):va,Zn==null)break e;Dr=d({},Dr,Zn);break e;case 2:Jn=!0}}Zn=St.callback,Zn!==null&&(f.flags|=64,er&&(f.flags|=8192),er=ee.callbacks,er===null?ee.callbacks=[Zn]:er.push(Zn))}else er={lane:Zn,tag:St.tag,payload:St.payload,callback:St.callback,next:null},fr===null?($n=fr=er,ln=Dr):fr=fr.next=er,Qe|=Zn;if(St=St.next,St===null){if(St=ee.shared.pending,St===null)break;er=St,St=er.next,er.next=null,ee.lastBaseUpdate=er,ee.shared.pending=null}}while(!0);fr===null&&(ln=Dr),ee.baseState=ln,ee.firstBaseUpdate=$n,ee.lastBaseUpdate=fr,he===null&&(ee.shared.lanes=0),jp|=Qe,f.lanes=Qe,f.memoizedState=Dr}}function Ga(f,x){if(typeof f!="function")throw Error(r(191,f));f.call(x)}function oo(f,x){var C=f.callbacks;if(C!==null)for(f.callbacks=null,f=0;f<C.length;f++)Ga(C[f],x)}var Ca=Ie(null),$i=Ie(0);function Eo(f,x){f=cd,xe($i,f),xe(Ca,x),cd=f|x.baseLanes}function ga(){xe($i,cd),xe(Ca,Ca.current)}function ma(){cd=$i.current,me(Ca),me($i)}var ho=0,fi=null,Ei=null,Xa=null,Ua=!1,No=!1,As=!1,Yo=0,os=0,Uo=null,Ru=0;function Va(){throw Error(r(321))}function jo(f,x){if(x===null)return!1;for(var C=0;C<x.length&&C<f.length;C++)if(!wo(f[C],x[C]))return!1;return!0}function Xu(f,x,C,z,ee,he){return ho=he,fi=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,se.H=f===null||f.memoizedState===null?Fy:$v,As=!1,he=C(z,ee),As=!1,No&&(he=Yu(x,C,z,ee)),Pc(f),he}function Pc(f){se.H=Kh;var x=Ei!==null&&Ei.next!==null;if(ho=0,Xa=Ei=fi=null,Ua=!1,os=0,Uo=null,x)throw Error(r(300));f===null||hu||(f=f.dependencies,f!==null&&Wu(f)&&(hu=!0))}function Yu(f,x,C,z){fi=f;var ee=0;do{if(No&&(Uo=null),os=0,No=!1,25<=ee)throw Error(r(301));if(ee+=1,Xa=Ei=null,f.updateQueue!=null){var he=f.updateQueue;he.lastEffect=null,he.events=null,he.stores=null,he.memoCache!=null&&(he.memoCache.index=0)}se.H=Wv,he=x(C,z)}while(No);return he}function eh(){var f=se.H,x=f.useState()[0];return x=typeof x.then=="function"?T(x):x,f=f.useState()[0],(Ei!==null?Ei.memoizedState:null)!==f&&(fi.flags|=1024),x}function Go(){var f=Yo!==0;return Yo=0,f}function Ah(f,x,C){x.updateQueue=f.updateQueue,x.flags&=-2053,f.lanes&=~C}function ad(f){if(Ua){for(f=f.memoizedState;f!==null;){var x=f.queue;x!==null&&(x.pending=null),f=f.next}Ua=!1}ho=0,Xa=Ei=fi=null,No=!1,os=Yo=0,Uo=null}function B(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xa===null?fi.memoizedState=Xa=f:Xa=Xa.next=f,Xa}function l(){if(Ei===null){var f=fi.alternate;f=f!==null?f.memoizedState:null}else f=Ei.next;var x=Xa===null?fi.memoizedState:Xa.next;if(x!==null)Xa=x,Ei=f;else{if(f===null)throw fi.alternate===null?Error(r(467)):Error(r(310));Ei=f,f={memoizedState:Ei.memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},Xa===null?fi.memoizedState=Xa=f:Xa=Xa.next=f}return Xa}function p(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function T(f){var x=os;return os+=1,Uo===null&&(Uo=[]),f=Hn(Uo,f,x),x=fi,(Xa===null?x.memoizedState:Xa.next)===null&&(x=x.alternate,se.H=x===null||x.memoizedState===null?Fy:$v),f}function P(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return T(f);if(f.$$typeof===O)return ao(f)}throw Error(r(438,String(f)))}function U(f){var x=null,C=fi.updateQueue;if(C!==null&&(x=C.memoCache),x==null){var z=fi.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(x={data:z.data.map(function(ee){return ee.slice()}),index:0})))}if(x==null&&(x={data:[],index:0}),C===null&&(C=p(),fi.updateQueue=C),C.memoCache=x,C=x.data[x.index],C===void 0)for(C=x.data[x.index]=Array(f),z=0;z<f;z++)C[z]=k;return x.index++,C}function Y(f,x){return typeof x=="function"?x(f):x}function re(f){var x=l();return ue(x,Ei,f)}function ue(f,x,C){var z=f.queue;if(z===null)throw Error(r(311));z.lastRenderedReducer=C;var ee=f.baseQueue,he=z.pending;if(he!==null){if(ee!==null){var Qe=ee.next;ee.next=he.next,he.next=Qe}x.baseQueue=ee=he,z.pending=null}if(he=f.baseState,ee===null)f.memoizedState=he;else{x=ee.next;var St=Qe=null,ln=null,$n=x,fr=!1;do{var Dr=$n.lane&-536870913;if(Dr!==$n.lane?(eo&Dr)===Dr:(ho&Dr)===Dr){var Zn=$n.revertLane;if(Zn===0)ln!==null&&(ln=ln.next={lane:0,revertLane:0,action:$n.action,hasEagerState:$n.hasEagerState,eagerState:$n.eagerState,next:null}),Dr===cc&&(fr=!0);else if((ho&Zn)===Zn){$n=$n.next,Zn===cc&&(fr=!0);continue}else Dr={lane:0,revertLane:$n.revertLane,action:$n.action,hasEagerState:$n.hasEagerState,eagerState:$n.eagerState,next:null},ln===null?(St=ln=Dr,Qe=he):ln=ln.next=Dr,fi.lanes|=Zn,jp|=Zn;Dr=$n.action,As&&C(he,Dr),he=$n.hasEagerState?$n.eagerState:C(he,Dr)}else Zn={lane:Dr,revertLane:$n.revertLane,action:$n.action,hasEagerState:$n.hasEagerState,eagerState:$n.eagerState,next:null},ln===null?(St=ln=Zn,Qe=he):ln=ln.next=Zn,fi.lanes|=Dr,jp|=Dr;$n=$n.next}while($n!==null&&$n!==x);if(ln===null?Qe=he:ln.next=St,!wo(he,f.memoizedState)&&(hu=!0,fr&&(C=Qc,C!==null)))throw C;f.memoizedState=he,f.baseState=Qe,f.baseQueue=ln,z.lastRenderedState=he}return ee===null&&(z.lanes=0),[f.memoizedState,z.dispatch]}function ge(f){var x=l(),C=x.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=f;var z=C.dispatch,ee=C.pending,he=x.memoizedState;if(ee!==null){C.pending=null;var Qe=ee=ee.next;do he=f(he,Qe.action),Qe=Qe.next;while(Qe!==ee);wo(he,x.memoizedState)||(hu=!0),x.memoizedState=he,x.baseQueue===null&&(x.baseState=he),C.lastRenderedState=he}return[he,z]}function Ne(f,x,C){var z=fi,ee=l(),he=Ra;if(he){if(C===void 0)throw Error(r(407));C=C()}else C=x();var Qe=!wo((Ei||ee).memoizedState,C);Qe&&(ee.memoizedState=C,hu=!0),ee=ee.queue;var St=ot.bind(null,z,ee,f);if(Ia(2048,8,St,[f]),ee.getSnapshot!==x||Qe||Xa!==null&&Xa.memoizedState.tag&1){if(z.flags|=2048,Br(9,pr(),Ge.bind(null,z,ee,C,x),null),vs===null)throw Error(r(349));he||(ho&124)!==0||qe(z,x,C)}return C}function qe(f,x,C){f.flags|=16384,f={getSnapshot:x,value:C},x=fi.updateQueue,x===null?(x=p(),fi.updateQueue=x,x.stores=[f]):(C=x.stores,C===null?x.stores=[f]:C.push(f))}function Ge(f,x,C,z){x.value=C,x.getSnapshot=z,ft(x)&&Ot(f)}function ot(f,x,C){return C(function(){ft(x)&&Ot(f)})}function ft(f){var x=f.getSnapshot;f=f.value;try{var C=x();return!wo(f,C)}catch{return!0}}function Ot(f){var x=Ks(f,2);x!==null&&dc(x,f,2)}function Lt(f){var x=B();if(typeof f=="function"){var C=f;if(f=C(),As){Zt(!0);try{C()}finally{Zt(!1)}}}return x.memoizedState=x.baseState=f,x.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Y,lastRenderedState:f},x}function Ft(f,x,C,z){return f.baseState=C,ue(f,Ei,typeof z=="function"?z:Y)}function Xt(f,x,C,z,ee){if(Co(f))throw Error(r(485));if(f=x.action,f!==null){var he={payload:ee,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Qe){he.listeners.push(Qe)}};se.T!==null?C(!0):he.isTransition=!1,z(he),C=x.pending,C===null?(he.next=x.pending=he,nn(x,he)):(he.next=C.next,x.pending=C.next=he)}}function nn(f,x){var C=x.action,z=x.payload,ee=f.state;if(x.isTransition){var he=se.T,Qe={};se.T=Qe;try{var St=C(ee,z),ln=se.S;ln!==null&&ln(Qe,St),an(f,x,St)}catch($n){pn(f,x,$n)}finally{se.T=he}}else try{he=C(ee,z),an(f,x,he)}catch($n){pn(f,x,$n)}}function an(f,x,C){C!==null&&typeof C=="object"&&typeof C.then=="function"?C.then(function(z){sn(f,x,z)},function(z){return pn(f,x,z)}):sn(f,x,C)}function sn(f,x,C){x.status="fulfilled",x.value=C,hn(x),f.state=C,x=f.pending,x!==null&&(C=x.next,C===x?f.pending=null:(C=C.next,x.next=C,nn(f,C)))}function pn(f,x,C){var z=f.pending;if(f.pending=null,z!==null){z=z.next;do x.status="rejected",x.reason=C,hn(x),x=x.next;while(x!==z)}f.action=null}function hn(f){f=f.listeners;for(var x=0;x<f.length;x++)(0,f[x])()}function Un(f,x){return x}function On(f,x){if(Ra){var C=vs.formState;if(C!==null){e:{var z=fi;if(Ra){if(is){t:{for(var ee=is,he=qu;ee.nodeType!==8;){if(!he){ee=null;break t}if(ee=Nh(ee.nextSibling),ee===null){ee=null;break t}}he=ee.data,ee=he==="F!"||he==="F"?ee:null}if(ee){is=Nh(ee.nextSibling),z=ee.data==="F!";break e}}Zh(z)}z=!1}z&&(x=C[0])}}return C=B(),C.memoizedState=C.baseState=x,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:x},C.queue=z,C=Rs.bind(null,fi,z),z.dispatch=C,z=Lt(!1),he=tl.bind(null,fi,!1,z.queue),z=B(),ee={state:x,dispatch:null,action:f,pending:null},z.queue=ee,C=Xt.bind(null,fi,ee,he,C),ee.dispatch=C,z.memoizedState=f,[x,C,!1]}function nr(f){var x=l();return ir(x,Ei,f)}function ir(f,x,C){if(x=ue(f,x,Un)[0],f=re(Y)[0],typeof x=="object"&&x!==null&&typeof x.then=="function")try{var z=T(x)}catch(Qe){throw Qe===gt?bt:Qe}else z=x;x=l();var ee=x.queue,he=ee.dispatch;return C!==x.memoizedState&&(fi.flags|=2048,Br(9,pr(),tr.bind(null,ee,C),null)),[z,he,f]}function tr(f,x){f.action=x}function Hr(f){var x=l(),C=Ei;if(C!==null)return ir(x,C,f);l(),x=x.memoizedState,C=l();var z=C.queue.dispatch;return C.memoizedState=f,[x,z,!1]}function Br(f,x,C,z){return f={tag:f,create:C,deps:z,inst:x,next:null},x=fi.updateQueue,x===null&&(x=p(),fi.updateQueue=x),C=x.lastEffect,C===null?x.lastEffect=f.next=f:(z=C.next,C.next=f,f.next=z,x.lastEffect=f),f}function pr(){return{destroy:void 0,resource:void 0}}function di(){return l().memoizedState}function Gi(f,x,C,z){var ee=B();z=z===void 0?null:z,fi.flags|=f,ee.memoizedState=Br(1|x,pr(),C,z)}function Ia(f,x,C,z){var ee=l();z=z===void 0?null:z;var he=ee.memoizedState.inst;Ei!==null&&z!==null&&jo(z,Ei.memoizedState.deps)?ee.memoizedState=Br(x,he,C,z):(fi.flags|=f,ee.memoizedState=Br(1|x,he,C,z))}function fa(f,x){Gi(8390656,8,f,x)}function yo(f,x){Ia(2048,8,f,x)}function To(f,x){return Ia(4,2,f,x)}function so(f,x){return Ia(4,4,f,x)}function fo(f,x){if(typeof x=="function"){f=f();var C=x(f);return function(){typeof C=="function"?C():x(null)}}if(x!=null)return f=f(),x.current=f,function(){x.current=null}}function po(f,x,C){C=C!=null?C.concat([f]):null,Ia(4,4,fo.bind(null,x,f),C)}function gs(){}function zs(f,x){var C=l();x=x===void 0?null:x;var z=C.memoizedState;return x!==null&&jo(x,z[1])?z[0]:(C.memoizedState=[f,x],f)}function pl(f,x){var C=l();x=x===void 0?null:x;var z=C.memoizedState;if(x!==null&&jo(x,z[1]))return z[0];if(z=f(),As){Zt(!0);try{f()}finally{Zt(!1)}}return C.memoizedState=[z,x],z}function el(f,x,C){return C===void 0||(ho&1073741824)!==0?f.memoizedState=x:(f.memoizedState=C,f=Lg(),fi.lanes|=f,jp|=f,C)}function hc(f,x,C,z){return wo(C,x)?C:Ca.current!==null?(f=el(f,C,z),wo(f,x)||(hu=!0),f):(ho&42)===0?(hu=!0,f.memoizedState=C):(f=Lg(),fi.lanes|=f,jp|=f,x)}function Pu(f,x,C,z,ee){var he=Se.p;Se.p=he!==0&&8>he?he:8;var Qe=se.T,St={};se.T=St,tl(f,!1,x,C);try{var ln=ee(),$n=se.S;if($n!==null&&$n(St,ln),ln!==null&&typeof ln=="object"&&typeof ln.then=="function"){var fr=Lp(ln,z);Zo(f,x,fr,Qu(f))}else Zo(f,x,z,Qu(f))}catch(Dr){Zo(f,x,{then:function(){},status:"rejected",reason:Dr},Qu())}finally{Se.p=he,se.T=Qe}}function Kl(){}function Bl(f,x,C,z){if(f.tag!==5)throw Error(r(476));var ee=uu(f).queue;Pu(f,ee,x,ye,C===null?Kl:function(){return Iu(f),C(z)})}function uu(f){var x=f.memoizedState;if(x!==null)return x;x={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Y,lastRenderedState:ye},next:null};var C={};return x.next={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Y,lastRenderedState:C},next:null},f.memoizedState=x,f=f.alternate,f!==null&&(f.memoizedState=x),x}function Iu(f){var x=uu(f).next.queue;Zo(f,x,{},Qu())}function Zu(){return ao(li)}function cu(){return l().memoizedState}function th(){return l().memoizedState}function Rh(f){for(var x=f.return;x!==null;){switch(x.tag){case 24:case 3:var C=Qu();f=gr(C);var z=Ar(x,f,C);z!==null&&(dc(z,x,C),Er(z,x,C)),x={cache:Mf()},f.payload=x;return}x=x.return}}function Ph(f,x,C){var z=Qu();C={lane:z,revertLane:0,action:C,hasEagerState:!1,eagerState:null,next:null},Co(f)?Rf(x,C):(C=ul(f,x,C,z),C!==null&&(dc(C,f,z),qv(C,x,z)))}function Rs(f,x,C){var z=Qu();Zo(f,x,C,z)}function Zo(f,x,C,z){var ee={lane:z,revertLane:0,action:C,hasEagerState:!1,eagerState:null,next:null};if(Co(f))Rf(x,ee);else{var he=f.alternate;if(f.lanes===0&&(he===null||he.lanes===0)&&(he=x.lastRenderedReducer,he!==null))try{var Qe=x.lastRenderedState,St=he(Qe,C);if(ee.hasEagerState=!0,ee.eagerState=St,wo(St,Qe))return kl(f,x,ee,0),vs===null&&Bs(),!1}catch{}finally{}if(C=ul(f,x,ee,z),C!==null)return dc(C,f,z),qv(C,x,z),!0}return!1}function tl(f,x,C,z){if(z={lane:2,revertLane:u_(),action:z,hasEagerState:!1,eagerState:null,next:null},Co(f)){if(x)throw Error(r(479))}else x=ul(f,C,z,2),x!==null&&dc(x,f,2)}function Co(f){var x=f.alternate;return f===fi||x!==null&&x===fi}function Rf(f,x){No=Ua=!0;var C=f.pending;C===null?x.next=x:(x.next=C.next,C.next=x),f.pending=x}function qv(f,x,C){if((C&4194048)!==0){var z=x.lanes;z&=f.pendingLanes,C|=z,x.lanes=C,Jt(f,C)}}var Kh={readContext:ao,use:P,useCallback:Va,useContext:Va,useEffect:Va,useImperativeHandle:Va,useLayoutEffect:Va,useInsertionEffect:Va,useMemo:Va,useReducer:Va,useRef:Va,useState:Va,useDebugValue:Va,useDeferredValue:Va,useTransition:Va,useSyncExternalStore:Va,useId:Va,useHostTransitionStatus:Va,useFormState:Va,useActionState:Va,useOptimistic:Va,useMemoCache:Va,useCacheRefresh:Va},Fy={readContext:ao,use:P,useCallback:function(f,x){return B().memoizedState=[f,x===void 0?null:x],f},useContext:ao,useEffect:fa,useImperativeHandle:function(f,x,C){C=C!=null?C.concat([f]):null,Gi(4194308,4,fo.bind(null,x,f),C)},useLayoutEffect:function(f,x){return Gi(4194308,4,f,x)},useInsertionEffect:function(f,x){Gi(4,2,f,x)},useMemo:function(f,x){var C=B();x=x===void 0?null:x;var z=f();if(As){Zt(!0);try{f()}finally{Zt(!1)}}return C.memoizedState=[z,x],z},useReducer:function(f,x,C){var z=B();if(C!==void 0){var ee=C(x);if(As){Zt(!0);try{C(x)}finally{Zt(!1)}}}else ee=x;return z.memoizedState=z.baseState=ee,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:ee},z.queue=f,f=f.dispatch=Ph.bind(null,fi,f),[z.memoizedState,f]},useRef:function(f){var x=B();return f={current:f},x.memoizedState=f},useState:function(f){f=Lt(f);var x=f.queue,C=Rs.bind(null,fi,x);return x.dispatch=C,[f.memoizedState,C]},useDebugValue:gs,useDeferredValue:function(f,x){var C=B();return el(C,f,x)},useTransition:function(){var f=Lt(!1);return f=Pu.bind(null,fi,f.queue,!0,!1),B().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,x,C){var z=fi,ee=B();if(Ra){if(C===void 0)throw Error(r(407));C=C()}else{if(C=x(),vs===null)throw Error(r(349));(eo&124)!==0||qe(z,x,C)}ee.memoizedState=C;var he={value:C,getSnapshot:x};return ee.queue=he,fa(ot.bind(null,z,he,f),[f]),z.flags|=2048,Br(9,pr(),Ge.bind(null,z,he,C,x),null),C},useId:function(){var f=B(),x=vs.identifierPrefix;if(Ra){var C=Kc,z=Th;C=(z&~(1<<32-cn(z)-1)).toString(32)+C,x="«"+x+"R"+C,C=Yo++,0<C&&(x+="H"+C.toString(32)),x+="»"}else C=Ru++,x="«"+x+"r"+C.toString(32)+"»";return f.memoizedState=x},useHostTransitionStatus:Zu,useFormState:On,useActionState:On,useOptimistic:function(f){var x=B();x.memoizedState=x.baseState=f;var C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return x.queue=C,x=tl.bind(null,fi,!0,C),C.dispatch=x,[f,x]},useMemoCache:U,useCacheRefresh:function(){return B().memoizedState=Rh.bind(null,fi)}},$v={readContext:ao,use:P,useCallback:zs,useContext:ao,useEffect:yo,useImperativeHandle:po,useInsertionEffect:To,useLayoutEffect:so,useMemo:pl,useReducer:re,useRef:di,useState:function(){return re(Y)},useDebugValue:gs,useDeferredValue:function(f,x){var C=l();return hc(C,Ei.memoizedState,f,x)},useTransition:function(){var f=re(Y)[0],x=l().memoizedState;return[typeof f=="boolean"?f:T(f),x]},useSyncExternalStore:Ne,useId:cu,useHostTransitionStatus:Zu,useFormState:nr,useActionState:nr,useOptimistic:function(f,x){var C=l();return Ft(C,Ei,f,x)},useMemoCache:U,useCacheRefresh:th},Wv={readContext:ao,use:P,useCallback:zs,useContext:ao,useEffect:yo,useImperativeHandle:po,useInsertionEffect:To,useLayoutEffect:so,useMemo:pl,useReducer:ge,useRef:di,useState:function(){return ge(Y)},useDebugValue:gs,useDeferredValue:function(f,x){var C=l();return Ei===null?el(C,f,x):hc(C,Ei.memoizedState,f,x)},useTransition:function(){var f=ge(Y)[0],x=l().memoizedState;return[typeof f=="boolean"?f:T(f),x]},useSyncExternalStore:Ne,useId:cu,useHostTransitionStatus:Zu,useFormState:Hr,useActionState:Hr,useOptimistic:function(f,x){var C=l();return Ei!==null?Ft(C,Ei,f,x):(C.baseState=f,[f,C.queue.dispatch])},useMemoCache:U,useCacheRefresh:th},Ic=null,nh=0;function Ih(f){var x=nh;return nh+=1,Ic===null&&(Ic=[]),Hn(Ic,f,x)}function Ud(f,x){x=x.props.ref,f.ref=x!==void 0?x:null}function Np(f,x){throw x.$$typeof===v?Error(r(525)):(f=Object.prototype.toString.call(x),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":f)))}function wg(f){var x=f._init;return x(f._payload)}function Sg(f){function x(In,Sn){if(f){var Bn=In.deletions;Bn===null?(In.deletions=[Sn],In.flags|=16):Bn.push(Sn)}}function C(In,Sn){if(!f)return null;for(;Sn!==null;)x(In,Sn),Sn=Sn.sibling;return null}function z(In){for(var Sn=new Map;In!==null;)In.key!==null?Sn.set(In.key,In):Sn.set(In.index,In),In=In.sibling;return Sn}function ee(In,Sn){return In=wl(In,Sn),In.index=0,In.sibling=null,In}function he(In,Sn,Bn){return In.index=Bn,f?(Bn=In.alternate,Bn!==null?(Bn=Bn.index,Bn<Sn?(In.flags|=67108866,Sn):Bn):(In.flags|=67108866,Sn)):(In.flags|=1048576,Sn)}function Qe(In){return f&&In.alternate===null&&(In.flags|=67108866),In}function St(In,Sn,Bn,Sr){return Sn===null||Sn.tag!==6?(Sn=nd(Bn,In.mode,Sr),Sn.return=In,Sn):(Sn=ee(Sn,Bn),Sn.return=In,Sn)}function ln(In,Sn,Bn,Sr){var wi=Bn.type;return wi===E?fr(In,Sn,Bn.props.children,Sr,Bn.key):Sn!==null&&(Sn.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===X&&wg(wi)===Sn.type)?(Sn=ee(Sn,Bn.props),Ud(Sn,Bn),Sn.return=In,Sn):(Sn=Yc(Bn.type,Bn.key,Bn.props,null,In.mode,Sr),Ud(Sn,Bn),Sn.return=In,Sn)}function $n(In,Sn,Bn,Sr){return Sn===null||Sn.tag!==4||Sn.stateNode.containerInfo!==Bn.containerInfo||Sn.stateNode.implementation!==Bn.implementation?(Sn=rd(Bn,In.mode,Sr),Sn.return=In,Sn):(Sn=ee(Sn,Bn.children||[]),Sn.return=In,Sn)}function fr(In,Sn,Bn,Sr,wi){return Sn===null||Sn.tag!==7?(Sn=Sh(Bn,In.mode,Sr,wi),Sn.return=In,Sn):(Sn=ee(Sn,Bn),Sn.return=In,Sn)}function Dr(In,Sn,Bn){if(typeof Sn=="string"&&Sn!==""||typeof Sn=="number"||typeof Sn=="bigint")return Sn=nd(""+Sn,In.mode,Bn),Sn.return=In,Sn;if(typeof Sn=="object"&&Sn!==null){switch(Sn.$$typeof){case w:return Bn=Yc(Sn.type,Sn.key,Sn.props,null,In.mode,Bn),Ud(Bn,Sn),Bn.return=In,Bn;case _:return Sn=rd(Sn,In.mode,Bn),Sn.return=In,Sn;case X:var Sr=Sn._init;return Sn=Sr(Sn._payload),Dr(In,Sn,Bn)}if(ce(Sn)||Q(Sn))return Sn=Sh(Sn,In.mode,Bn,null),Sn.return=In,Sn;if(typeof Sn.then=="function")return Dr(In,Ih(Sn),Bn);if(Sn.$$typeof===O)return Dr(In,Au(In,Sn),Bn);Np(In,Sn)}return null}function Zn(In,Sn,Bn,Sr){var wi=Sn!==null?Sn.key:null;if(typeof Bn=="string"&&Bn!==""||typeof Bn=="number"||typeof Bn=="bigint")return wi!==null?null:St(In,Sn,""+Bn,Sr);if(typeof Bn=="object"&&Bn!==null){switch(Bn.$$typeof){case w:return Bn.key===wi?ln(In,Sn,Bn,Sr):null;case _:return Bn.key===wi?$n(In,Sn,Bn,Sr):null;case X:return wi=Bn._init,Bn=wi(Bn._payload),Zn(In,Sn,Bn,Sr)}if(ce(Bn)||Q(Bn))return wi!==null?null:fr(In,Sn,Bn,Sr,null);if(typeof Bn.then=="function")return Zn(In,Sn,Ih(Bn),Sr);if(Bn.$$typeof===O)return Zn(In,Sn,Au(In,Bn),Sr);Np(In,Bn)}return null}function er(In,Sn,Bn,Sr,wi){if(typeof Sr=="string"&&Sr!==""||typeof Sr=="number"||typeof Sr=="bigint")return In=In.get(Bn)||null,St(Sn,In,""+Sr,wi);if(typeof Sr=="object"&&Sr!==null){switch(Sr.$$typeof){case w:return In=In.get(Sr.key===null?Bn:Sr.key)||null,ln(Sn,In,Sr,wi);case _:return In=In.get(Sr.key===null?Bn:Sr.key)||null,$n(Sn,In,Sr,wi);case X:var lo=Sr._init;return Sr=lo(Sr._payload),er(In,Sn,Bn,Sr,wi)}if(ce(Sr)||Q(Sr))return In=In.get(Bn)||null,fr(Sn,In,Sr,wi,null);if(typeof Sr.then=="function")return er(In,Sn,Bn,Ih(Sr),wi);if(Sr.$$typeof===O)return er(In,Sn,Bn,Au(Sn,Sr),wi);Np(Sn,Sr)}return null}function va(In,Sn,Bn,Sr){for(var wi=null,lo=null,Xi=Sn,ya=Sn=0,gc=null;Xi!==null&&ya<Bn.length;ya++){Xi.index>ya?(gc=Xi,Xi=null):gc=Xi.sibling;var Ho=Zn(In,Xi,Bn[ya],Sr);if(Ho===null){Xi===null&&(Xi=gc);break}f&&Xi&&Ho.alternate===null&&x(In,Xi),Sn=he(Ho,Sn,ya),lo===null?wi=Ho:lo.sibling=Ho,lo=Ho,Xi=gc}if(ya===Bn.length)return C(In,Xi),Ra&&Ro(In,ya),wi;if(Xi===null){for(;ya<Bn.length;ya++)Xi=Dr(In,Bn[ya],Sr),Xi!==null&&(Sn=he(Xi,Sn,ya),lo===null?wi=Xi:lo.sibling=Xi,lo=Xi);return Ra&&Ro(In,ya),wi}for(Xi=z(Xi);ya<Bn.length;ya++)gc=er(Xi,In,ya,Bn[ya],Sr),gc!==null&&(f&&gc.alternate!==null&&Xi.delete(gc.key===null?ya:gc.key),Sn=he(gc,Sn,ya),lo===null?wi=gc:lo.sibling=gc,lo=gc);return f&&Xi.forEach(function(Xm){return x(In,Xm)}),Ra&&Ro(In,ya),wi}function aa(In,Sn,Bn,Sr){if(Bn==null)throw Error(r(151));for(var wi=null,lo=null,Xi=Sn,ya=Sn=0,gc=null,Ho=Bn.next();Xi!==null&&!Ho.done;ya++,Ho=Bn.next()){Xi.index>ya?(gc=Xi,Xi=null):gc=Xi.sibling;var Xm=Zn(In,Xi,Ho.value,Sr);if(Xm===null){Xi===null&&(Xi=gc);break}f&&Xi&&Xm.alternate===null&&x(In,Xi),Sn=he(Xm,Sn,ya),lo===null?wi=Xm:lo.sibling=Xm,lo=Xm,Xi=gc}if(Ho.done)return C(In,Xi),Ra&&Ro(In,ya),wi;if(Xi===null){for(;!Ho.done;ya++,Ho=Bn.next())Ho=Dr(In,Ho.value,Sr),Ho!==null&&(Sn=he(Ho,Sn,ya),lo===null?wi=Ho:lo.sibling=Ho,lo=Ho);return Ra&&Ro(In,ya),wi}for(Xi=z(Xi);!Ho.done;ya++,Ho=Bn.next())Ho=er(Xi,In,ya,Ho.value,Sr),Ho!==null&&(f&&Ho.alternate!==null&&Xi.delete(Ho.key===null?ya:Ho.key),Sn=he(Ho,Sn,ya),lo===null?wi=Ho:lo.sibling=Ho,lo=Ho);return f&&Xi.forEach(function(KY){return x(In,KY)}),Ra&&Ro(In,ya),wi}function Ma(In,Sn,Bn,Sr){if(typeof Bn=="object"&&Bn!==null&&Bn.type===E&&Bn.key===null&&(Bn=Bn.props.children),typeof Bn=="object"&&Bn!==null){switch(Bn.$$typeof){case w:e:{for(var wi=Bn.key;Sn!==null;){if(Sn.key===wi){if(wi=Bn.type,wi===E){if(Sn.tag===7){C(In,Sn.sibling),Sr=ee(Sn,Bn.props.children),Sr.return=In,In=Sr;break e}}else if(Sn.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===X&&wg(wi)===Sn.type){C(In,Sn.sibling),Sr=ee(Sn,Bn.props),Ud(Sr,Bn),Sr.return=In,In=Sr;break e}C(In,Sn);break}else x(In,Sn);Sn=Sn.sibling}Bn.type===E?(Sr=Sh(Bn.props.children,In.mode,Sr,Bn.key),Sr.return=In,In=Sr):(Sr=Yc(Bn.type,Bn.key,Bn.props,null,In.mode,Sr),Ud(Sr,Bn),Sr.return=In,In=Sr)}return Qe(In);case _:e:{for(wi=Bn.key;Sn!==null;){if(Sn.key===wi)if(Sn.tag===4&&Sn.stateNode.containerInfo===Bn.containerInfo&&Sn.stateNode.implementation===Bn.implementation){C(In,Sn.sibling),Sr=ee(Sn,Bn.children||[]),Sr.return=In,In=Sr;break e}else{C(In,Sn);break}else x(In,Sn);Sn=Sn.sibling}Sr=rd(Bn,In.mode,Sr),Sr.return=In,In=Sr}return Qe(In);case X:return wi=Bn._init,Bn=wi(Bn._payload),Ma(In,Sn,Bn,Sr)}if(ce(Bn))return va(In,Sn,Bn,Sr);if(Q(Bn)){if(wi=Q(Bn),typeof wi!="function")throw Error(r(150));return Bn=wi.call(Bn),aa(In,Sn,Bn,Sr)}if(typeof Bn.then=="function")return Ma(In,Sn,Ih(Bn),Sr);if(Bn.$$typeof===O)return Ma(In,Sn,Au(In,Bn),Sr);Np(In,Bn)}return typeof Bn=="string"&&Bn!==""||typeof Bn=="number"||typeof Bn=="bigint"?(Bn=""+Bn,Sn!==null&&Sn.tag===6?(C(In,Sn.sibling),Sr=ee(Sn,Bn),Sr.return=In,In=Sr):(C(In,Sn),Sr=nd(Bn,In.mode,Sr),Sr.return=In,In=Sr),Qe(In)):C(In,Sn)}return function(In,Sn,Bn,Sr){try{nh=0;var wi=Ma(In,Sn,Bn,Sr);return Ic=null,wi}catch(Xi){if(Xi===gt||Xi===bt)throw Xi;var lo=ps(29,Xi,null,In.mode);return lo.lanes=Sr,lo.return=In,lo}finally{}}}var Rm=Sg(!0),Wx=Sg(!1),Jh=Ie(null),Qh=null;function kp(f){var x=f.alternate;xe(Us,Us.current&1),xe(Jh,f),Qh===null&&(x===null||Ca.current!==null||x.memoizedState!==null)&&(Qh=f)}function By(f){if(f.tag===22){if(xe(Us,Us.current),xe(Jh,f),Qh===null){var x=f.alternate;x!==null&&x.memoizedState!==null&&(Qh=f)}}else jd()}function jd(){xe(Us,Us.current),xe(Jh,Jh.current)}function od(f){me(Jh),Qh===f&&(Qh=null),me(Us)}var Us=Ie(0);function zy(f){for(var x=f;x!==null;){if(x.tag===13){var C=x.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||Lb(C)))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}function Eg(f,x,C,z){x=f.memoizedState,C=C(z,x),C=C==null?x:d({},x,C),f.memoizedState=C,f.lanes===0&&(f.updateQueue.baseState=C)}var Pm={enqueueSetState:function(f,x,C){f=f._reactInternals;var z=Qu(),ee=gr(z);ee.payload=x,C!=null&&(ee.callback=C),x=Ar(f,ee,z),x!==null&&(dc(x,f,z),Er(x,f,z))},enqueueReplaceState:function(f,x,C){f=f._reactInternals;var z=Qu(),ee=gr(z);ee.tag=1,ee.payload=x,C!=null&&(ee.callback=C),x=Ar(f,ee,z),x!==null&&(dc(x,f,z),Er(x,f,z))},enqueueForceUpdate:function(f,x){f=f._reactInternals;var C=Qu(),z=gr(C);z.tag=2,x!=null&&(z.callback=x),x=Ar(f,z,C),x!==null&&(dc(x,f,C),Er(x,f,C))}};function Xv(f,x,C,z,ee,he,Qe){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(z,he,Qe):x.prototype&&x.prototype.isPureReactComponent?!Cu(C,z)||!Cu(ee,he):!0}function Xx(f,x,C,z){f=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(C,z),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(C,z),x.state!==f&&Pm.enqueueReplaceState(x,x.state,null)}function Op(f,x){var C=x;if("ref"in x){C={};for(var z in x)z!=="ref"&&(C[z]=x[z])}if(f=f.defaultProps){C===x&&(C=d({},C));for(var ee in f)C[ee]===void 0&&(C[ee]=f[ee])}return C}var Uy=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function uS(f){Uy(f)}function Yx(f){console.error(f)}function Zx(f){Uy(f)}function Yv(f,x){try{var C=f.onUncaughtError;C(x.value,{componentStack:x.stack})}catch(z){setTimeout(function(){throw z})}}function cS(f,x,C){try{var z=f.onCaughtError;z(C.value,{componentStack:C.stack,errorBoundary:x.tag===1?x.stateNode:null})}catch(ee){setTimeout(function(){throw ee})}}function Zv(f,x,C){return C=gr(C),C.tag=3,C.payload={element:null},C.callback=function(){Yv(f,x)},C}function Kx(f){return f=gr(f),f.tag=3,f}function jy(f,x,C,z){var ee=C.type.getDerivedStateFromError;if(typeof ee=="function"){var he=z.value;f.payload=function(){return ee(he)},f.callback=function(){cS(x,C,z)}}var Qe=C.stateNode;Qe!==null&&typeof Qe.componentDidCatch=="function"&&(f.callback=function(){cS(x,C,z),typeof ee!="function"&&(Gp===null?Gp=new Set([this]):Gp.add(this));var St=z.stack;this.componentDidCatch(z.value,{componentStack:St!==null?St:""})})}function Kv(f,x,C,z,ee){if(C.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(x=C.alternate,x!==null&&Ol(x,C,ee,!0),C=Jh.current,C!==null){switch(C.tag){case 13:return Qh===null?_b():C.alternate===null&&El===0&&(El=3),C.flags&=-257,C.flags|=65536,C.lanes=ee,z===Mt?C.flags|=16384:(x=C.updateQueue,x===null?C.updateQueue=new Set([z]):x.add(z),s0(f,z,ee)),!1;case 22:return C.flags|=65536,z===Mt?C.flags|=16384:(x=C.updateQueue,x===null?(x={transitions:null,markerInstances:null,retryQueue:new Set([z])},C.updateQueue=x):(C=x.retryQueue,C===null?x.retryQueue=new Set([z]):C.add(z)),s0(f,z,ee)),!1}throw Error(r(435,C.tag))}return s0(f,z,ee),_b(),!1}if(Ra)return x=Jh.current,x!==null?((x.flags&65536)===0&&(x.flags|=256),x.flags|=65536,x.lanes=ee,z!==zd&&(f=Error(r(422),{cause:z}),Cf(Ii(f,C)))):(z!==zd&&(x=Error(r(423),{cause:z}),Cf(Ii(x,C))),f=f.current.alternate,f.flags|=65536,ee&=-ee,f.lanes|=ee,z=Ii(z,C),ee=Zv(f.stateNode,z,ee),ti(f,ee),El!==4&&(El=2)),!1;var he=Error(r(520),{cause:z});if(he=Ii(he,C),js===null?js=[he]:js.push(he),El!==4&&(El=2),x===null)return!0;z=Ii(z,C),C=x;do{switch(C.tag){case 3:return C.flags|=65536,f=ee&-ee,C.lanes|=f,f=Zv(C.stateNode,z,f),ti(C,f),!1;case 1:if(x=C.type,he=C.stateNode,(C.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(Gp===null||!Gp.has(he))))return C.flags|=65536,ee&=-ee,C.lanes|=ee,ee=Kx(ee),jy(ee,f,C,z),ti(C,ee),!1}C=C.return}while(C!==null);return!1}var rh=Error(r(461)),hu=!1;function fu(f,x,C,z){x.child=f===null?Wx(x,null,C,z):Rm(x,f.child,C,z)}function hS(f,x,C,z,ee){C=C.render;var he=x.ref;if("ref"in z){var Qe={};for(var St in z)St!=="ref"&&(Qe[St]=z[St])}else Qe=z;return Rc(x),z=Xu(f,x,C,Qe,he,ee),St=Go(),f!==null&&!hu?(Ah(f,x,ee),sd(f,x,ee)):(Ra&&St&&Zl(x),x.flags|=1,fu(f,x,z,ee),x.child)}function Jx(f,x,C,z,ee){if(f===null){var he=C.type;return typeof he=="function"&&!Xc(he)&&he.defaultProps===void 0&&C.compare===null?(x.tag=15,x.type=he,fS(f,x,he,z,ee)):(f=Yc(C.type,null,z,x,x.mode,ee),f.ref=x.ref,f.return=x,x.child=f)}if(he=f.child,!Cg(f,ee)){var Qe=he.memoizedProps;if(C=C.compare,C=C!==null?C:Cu,C(Qe,z)&&f.ref===x.ref)return sd(f,x,ee)}return x.flags|=1,f=wl(he,z),f.ref=x.ref,f.return=x,x.child=f}function fS(f,x,C,z,ee){if(f!==null){var he=f.memoizedProps;if(Cu(he,z)&&f.ref===x.ref)if(hu=!1,x.pendingProps=z=he,Cg(f,ee))(f.flags&131072)!==0&&(hu=!0);else return x.lanes=f.lanes,sd(f,x,ee)}return Jv(f,x,C,z,ee)}function dS(f,x,C){var z=x.pendingProps,ee=z.children,he=f!==null?f.memoizedState:null;if(z.mode==="hidden"){if((x.flags&128)!==0){if(z=he!==null?he.baseLanes|C:C,f!==null){for(ee=x.child=f.child,he=0;ee!==null;)he=he|ee.lanes|ee.childLanes,ee=ee.sibling;x.childLanes=he&~z}else x.childLanes=0,x.child=null;return pS(f,x,z,C)}if((C&536870912)!==0)x.memoizedState={baseLanes:0,cachePool:null},f!==null&&Oe(x,he!==null?he.cachePool:null),he!==null?Eo(x,he):ga(),By(x);else return x.lanes=x.childLanes=536870912,pS(f,x,he!==null?he.baseLanes|C:C,C)}else he!==null?(Oe(x,he.cachePool),Eo(x,he),jd(),x.memoizedState=null):(f!==null&&Oe(x,null),ga(),jd());return fu(f,x,ee,C),x.child}function pS(f,x,C,z){var ee=_e();return ee=ee===null?null:{parent:as._currentValue,pool:ee},x.memoizedState={baseLanes:C,cachePool:ee},f!==null&&Oe(x,null),ga(),By(x),f!==null&&Ol(f,x,z,!0),null}function Gy(f,x){var C=x.ref;if(C===null)f!==null&&f.ref!==null&&(x.flags|=4194816);else{if(typeof C!="function"&&typeof C!="object")throw Error(r(284));(f===null||f.ref!==C)&&(x.flags|=4194816)}}function Jv(f,x,C,z,ee){return Rc(x),C=Xu(f,x,C,z,void 0,ee),z=Go(),f!==null&&!hu?(Ah(f,x,ee),sd(f,x,ee)):(Ra&&z&&Zl(x),x.flags|=1,fu(f,x,C,ee),x.child)}function Vy(f,x,C,z,ee,he){return Rc(x),x.updateQueue=null,C=Yu(x,z,C,ee),Pc(f),z=Go(),f!==null&&!hu?(Ah(f,x,he),sd(f,x,he)):(Ra&&z&&Zl(x),x.flags|=1,fu(f,x,C,he),x.child)}function Qx(f,x,C,z,ee){if(Rc(x),x.stateNode===null){var he=So,Qe=C.contextType;typeof Qe=="object"&&Qe!==null&&(he=ao(Qe)),he=new C(z,he),x.memoizedState=he.state!==null&&he.state!==void 0?he.state:null,he.updater=Pm,x.stateNode=he,he._reactInternals=x,he=x.stateNode,he.props=z,he.state=x.memoizedState,he.refs={},_n(x),Qe=C.contextType,he.context=typeof Qe=="object"&&Qe!==null?ao(Qe):So,he.state=x.memoizedState,Qe=C.getDerivedStateFromProps,typeof Qe=="function"&&(Eg(x,C,Qe,z),he.state=x.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof he.getSnapshotBeforeUpdate=="function"||typeof he.UNSAFE_componentWillMount!="function"&&typeof he.componentWillMount!="function"||(Qe=he.state,typeof he.componentWillMount=="function"&&he.componentWillMount(),typeof he.UNSAFE_componentWillMount=="function"&&he.UNSAFE_componentWillMount(),Qe!==he.state&&Pm.enqueueReplaceState(he,he.state,null),or(x,z,he,ee),yr(),he.state=x.memoizedState),typeof he.componentDidMount=="function"&&(x.flags|=4194308),z=!0}else if(f===null){he=x.stateNode;var St=x.memoizedProps,ln=Op(C,St);he.props=ln;var $n=he.context,fr=C.contextType;Qe=So,typeof fr=="object"&&fr!==null&&(Qe=ao(fr));var Dr=C.getDerivedStateFromProps;fr=typeof Dr=="function"||typeof he.getSnapshotBeforeUpdate=="function",St=x.pendingProps!==St,fr||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(St||$n!==Qe)&&Xx(x,he,z,Qe),Jn=!1;var Zn=x.memoizedState;he.state=Zn,or(x,z,he,ee),yr(),$n=x.memoizedState,St||Zn!==$n||Jn?(typeof Dr=="function"&&(Eg(x,C,Dr,z),$n=x.memoizedState),(ln=Jn||Xv(x,C,ln,z,Zn,$n,Qe))?(fr||typeof he.UNSAFE_componentWillMount!="function"&&typeof he.componentWillMount!="function"||(typeof he.componentWillMount=="function"&&he.componentWillMount(),typeof he.UNSAFE_componentWillMount=="function"&&he.UNSAFE_componentWillMount()),typeof he.componentDidMount=="function"&&(x.flags|=4194308)):(typeof he.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=z,x.memoizedState=$n),he.props=z,he.state=$n,he.context=Qe,z=ln):(typeof he.componentDidMount=="function"&&(x.flags|=4194308),z=!1)}else{he=x.stateNode,Cn(f,x),Qe=x.memoizedProps,fr=Op(C,Qe),he.props=fr,Dr=x.pendingProps,Zn=he.context,$n=C.contextType,ln=So,typeof $n=="object"&&$n!==null&&(ln=ao($n)),St=C.getDerivedStateFromProps,($n=typeof St=="function"||typeof he.getSnapshotBeforeUpdate=="function")||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(Qe!==Dr||Zn!==ln)&&Xx(x,he,z,ln),Jn=!1,Zn=x.memoizedState,he.state=Zn,or(x,z,he,ee),yr();var er=x.memoizedState;Qe!==Dr||Zn!==er||Jn||f!==null&&f.dependencies!==null&&Wu(f.dependencies)?(typeof St=="function"&&(Eg(x,C,St,z),er=x.memoizedState),(fr=Jn||Xv(x,C,fr,z,Zn,er,ln)||f!==null&&f.dependencies!==null&&Wu(f.dependencies))?($n||typeof he.UNSAFE_componentWillUpdate!="function"&&typeof he.componentWillUpdate!="function"||(typeof he.componentWillUpdate=="function"&&he.componentWillUpdate(z,er,ln),typeof he.UNSAFE_componentWillUpdate=="function"&&he.UNSAFE_componentWillUpdate(z,er,ln)),typeof he.componentDidUpdate=="function"&&(x.flags|=4),typeof he.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof he.componentDidUpdate!="function"||Qe===f.memoizedProps&&Zn===f.memoizedState||(x.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||Qe===f.memoizedProps&&Zn===f.memoizedState||(x.flags|=1024),x.memoizedProps=z,x.memoizedState=er),he.props=z,he.state=er,he.context=ln,z=fr):(typeof he.componentDidUpdate!="function"||Qe===f.memoizedProps&&Zn===f.memoizedState||(x.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||Qe===f.memoizedProps&&Zn===f.memoizedState||(x.flags|=1024),z=!1)}return he=z,Gy(f,x),z=(x.flags&128)!==0,he||z?(he=x.stateNode,C=z&&typeof C.getDerivedStateFromError!="function"?null:he.render(),x.flags|=1,f!==null&&z?(x.child=Rm(x,f.child,null,ee),x.child=Rm(x,null,C,ee)):fu(f,x,C,ee),x.memoizedState=he.state,f=x.child):f=sd(f,x,ee),f}function Fp(f,x,C,z){return hl(),x.flags|=256,fu(f,x,C,z),x.child}var Tg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eb(f){return{baseLanes:f,cachePool:at()}}function tb(f,x,C){return f=f!==null?f.childLanes&~C:0,x&&(f|=sh),f}function gS(f,x,C){var z=x.pendingProps,ee=!1,he=(x.flags&128)!==0,Qe;if((Qe=he)||(Qe=f!==null&&f.memoizedState===null?!1:(Us.current&2)!==0),Qe&&(ee=!0,x.flags&=-129),Qe=(x.flags&32)!==0,x.flags&=-33,f===null){if(Ra){if(ee?kp(x):jd(),Ra){var St=is,ln;if(ln=St){e:{for(ln=St,St=qu;ln.nodeType!==8;){if(!St){St=null;break e}if(ln=Nh(ln.nextSibling),ln===null){St=null;break e}}St=ln}St!==null?(x.memoizedState={dehydrated:St,treeContext:lc!==null?{id:Th,overflow:Kc}:null,retryLane:536870912,hydrationErrors:null},ln=ps(18,null,null,0),ln.stateNode=St,ln.return=x,x.child=ln,Ms=x,is=null,ln=!0):ln=!1}ln||Zh(x)}if(St=x.memoizedState,St!==null&&(St=St.dehydrated,St!==null))return Lb(St)?x.lanes=32:x.lanes=536870912,null;od(x)}return St=z.children,z=z.fallback,ee?(jd(),ee=x.mode,St=Hy({mode:"hidden",children:St},ee),z=Sh(z,ee,C,null),St.return=x,z.return=x,St.sibling=z,x.child=St,ee=x.child,ee.memoizedState=eb(C),ee.childLanes=tb(f,Qe,C),x.memoizedState=Tg,z):(kp(x),nb(x,St))}if(ln=f.memoizedState,ln!==null&&(St=ln.dehydrated,St!==null)){if(he)x.flags&256?(kp(x),x.flags&=-257,x=rb(f,x,C)):x.memoizedState!==null?(jd(),x.child=f.child,x.flags|=128,x=null):(jd(),ee=z.fallback,St=x.mode,z=Hy({mode:"visible",children:z.children},St),ee=Sh(ee,St,C,null),ee.flags|=2,z.return=x,ee.return=x,z.sibling=ee,x.child=z,Rm(x,f.child,null,C),z=x.child,z.memoizedState=eb(C),z.childLanes=tb(f,Qe,C),x.memoizedState=Tg,x=ee);else if(kp(x),Lb(St)){if(Qe=St.nextSibling&&St.nextSibling.dataset,Qe)var $n=Qe.dgst;Qe=$n,z=Error(r(419)),z.stack="",z.digest=Qe,Cf({value:z,source:null,stack:null}),x=rb(f,x,C)}else if(hu||Ol(f,x,C,!1),Qe=(C&f.childLanes)!==0,hu||Qe){if(Qe=vs,Qe!==null&&(z=C&-C,z=(z&42)!==0?1:rn(z),z=(z&(Qe.suspendedLanes|C))!==0?0:z,z!==0&&z!==ln.retryLane))throw ln.retryLane=z,Ks(f,z),dc(Qe,f,z),rh;St.data==="$?"||_b(),x=rb(f,x,C)}else St.data==="$?"?(x.flags|=192,x.child=f.child,x=null):(f=ln.treeContext,is=Nh(St.nextSibling),Ms=x,Ra=!0,uc=null,qu=!1,f!==null&&(su[Sl++]=Th,su[Sl++]=Kc,su[Sl++]=lc,Th=f.id,Kc=f.overflow,lc=x),x=nb(x,z.children),x.flags|=4096);return x}return ee?(jd(),ee=z.fallback,St=x.mode,ln=f.child,$n=ln.sibling,z=wl(ln,{mode:"hidden",children:z.children}),z.subtreeFlags=ln.subtreeFlags&65011712,$n!==null?ee=wl($n,ee):(ee=Sh(ee,St,C,null),ee.flags|=2),ee.return=x,z.return=x,z.sibling=ee,x.child=z,z=ee,ee=x.child,St=f.child.memoizedState,St===null?St=eb(C):(ln=St.cachePool,ln!==null?($n=as._currentValue,ln=ln.parent!==$n?{parent:$n,pool:$n}:ln):ln=at(),St={baseLanes:St.baseLanes|C,cachePool:ln}),ee.memoizedState=St,ee.childLanes=tb(f,Qe,C),x.memoizedState=Tg,z):(kp(x),C=f.child,f=C.sibling,C=wl(C,{mode:"visible",children:z.children}),C.return=x,C.sibling=null,f!==null&&(Qe=x.deletions,Qe===null?(x.deletions=[f],x.flags|=16):Qe.push(f)),x.child=C,x.memoizedState=null,C)}function nb(f,x){return x=Hy({mode:"visible",children:x},f.mode),x.return=f,f.child=x}function Hy(f,x){return f=ps(22,f,null,x),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function rb(f,x,C){return Rm(x,f.child,null,C),f=nb(x,x.pendingProps.children),f.flags|=2,x.memoizedState=null,f}function mS(f,x,C){f.lanes|=x;var z=f.alternate;z!==null&&(z.lanes|=x),dl(f.return,x,C)}function Qv(f,x,C,z,ee){var he=f.memoizedState;he===null?f.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:z,tail:C,tailMode:ee}:(he.isBackwards=x,he.rendering=null,he.renderingStartTime=0,he.last=z,he.tail=C,he.tailMode=ee)}function vS(f,x,C){var z=x.pendingProps,ee=z.revealOrder,he=z.tail;if(fu(f,x,z.children,C),z=Us.current,(z&2)!==0)z=z&1|2,x.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=x.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&mS(f,C,x);else if(f.tag===19)mS(f,C,x);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===x)break e;for(;f.sibling===null;){if(f.return===null||f.return===x)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}z&=1}switch(xe(Us,z),ee){case"forwards":for(C=x.child,ee=null;C!==null;)f=C.alternate,f!==null&&zy(f)===null&&(ee=C),C=C.sibling;C=ee,C===null?(ee=x.child,x.child=null):(ee=C.sibling,C.sibling=null),Qv(x,!1,ee,C,he);break;case"backwards":for(C=null,ee=x.child,x.child=null;ee!==null;){if(f=ee.alternate,f!==null&&zy(f)===null){x.child=ee;break}f=ee.sibling,ee.sibling=C,C=ee,ee=f}Qv(x,!0,C,null,he);break;case"together":Qv(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function sd(f,x,C){if(f!==null&&(x.dependencies=f.dependencies),jp|=x.lanes,(C&x.childLanes)===0)if(f!==null){if(Ol(f,x,C,!1),(C&x.childLanes)===0)return null}else return null;if(f!==null&&x.child!==f.child)throw Error(r(153));if(x.child!==null){for(f=x.child,C=wl(f,f.pendingProps),x.child=C,C.return=x;f.sibling!==null;)f=f.sibling,C=C.sibling=wl(f,f.pendingProps),C.return=x;C.sibling=null}return x.child}function Cg(f,x){return(f.lanes&x)!==0?!0:(f=f.dependencies,!!(f!==null&&Wu(f)))}function EA(f,x,C){switch(x.tag){case 3:Ae(x,x.stateNode.containerInfo),$u(x,as,f.memoizedState.cache),hl();break;case 27:case 5:pt(x);break;case 4:Ae(x,x.stateNode.containerInfo);break;case 10:$u(x,x.type,x.memoizedProps.value);break;case 13:var z=x.memoizedState;if(z!==null)return z.dehydrated!==null?(kp(x),x.flags|=128,null):(C&x.child.childLanes)!==0?gS(f,x,C):(kp(x),f=sd(f,x,C),f!==null?f.sibling:null);kp(x);break;case 19:var ee=(f.flags&128)!==0;if(z=(C&x.childLanes)!==0,z||(Ol(f,x,C,!1),z=(C&x.childLanes)!==0),ee){if(z)return vS(f,x,C);x.flags|=128}if(ee=x.memoizedState,ee!==null&&(ee.rendering=null,ee.tail=null,ee.lastEffect=null),xe(Us,Us.current),z)break;return null;case 22:case 23:return x.lanes=0,dS(f,x,C);case 24:$u(x,as,f.memoizedState.cache)}return sd(f,x,C)}function nl(f,x,C){if(f!==null)if(f.memoizedProps!==x.pendingProps)hu=!0;else{if(!Cg(f,C)&&(x.flags&128)===0)return hu=!1,EA(f,x,C);hu=(f.flags&131072)!==0}else hu=!1,Ra&&(x.flags&1048576)!==0&&Yh(x,Ef,x.index);switch(x.lanes=0,x.tag){case 16:e:{f=x.pendingProps;var z=x.elementType,ee=z._init;if(z=ee(z._payload),x.type=z,typeof z=="function")Xc(z)?(f=Op(z,f),x.tag=1,x=Qx(null,x,z,f,C)):(x.tag=0,x=Jv(null,x,z,f,C));else{if(z!=null){if(ee=z.$$typeof,ee===N){x.tag=11,x=hS(null,x,z,f,C);break e}else if(ee===W){x.tag=14,x=Jx(null,x,z,f,C);break e}}throw x=ae(z)||z,Error(r(306,x,""))}}return x;case 0:return Jv(f,x,x.type,x.pendingProps,C);case 1:return z=x.type,ee=Op(z,x.pendingProps),Qx(f,x,z,ee,C);case 3:e:{if(Ae(x,x.stateNode.containerInfo),f===null)throw Error(r(387));z=x.pendingProps;var he=x.memoizedState;ee=he.element,Cn(f,x),or(x,z,null,C);var Qe=x.memoizedState;if(z=Qe.cache,$u(x,as,z),z!==he.cache&&Ch(x,[as],C,!0),yr(),z=Qe.element,he.isDehydrated)if(he={element:z,isDehydrated:!1,cache:Qe.cache},x.updateQueue.baseState=he,x.memoizedState=he,x.flags&256){x=Fp(f,x,z,C);break e}else if(z!==ee){ee=Ii(Error(r(424)),x),Cf(ee),x=Fp(f,x,z,C);break e}else{switch(f=x.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(is=Nh(f.firstChild),Ms=x,Ra=!0,uc=null,qu=!0,C=Wx(x,null,z,C),x.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling}else{if(hl(),z===ee){x=sd(f,x,C);break e}fu(f,x,z,C)}x=x.child}return x;case 26:return Gy(f,x),f===null?(C=J(x.type,null,x.pendingProps,null))?x.memoizedState=C:Ra||(C=x.type,f=x.pendingProps,z=zg(De.current).createElement(C),z[Pe]=x,z[je]=f,Ul(z,C,f),mr(z),x.stateNode=z):x.memoizedState=J(x.type,f.memoizedProps,x.pendingProps,f.memoizedState),null;case 27:return pt(x),f===null&&Ra&&(z=x.stateNode=qm(x.type,x.pendingProps,De.current),Ms=x,qu=!0,ee=is,Jd(x.type)?(g0=ee,is=Nh(z.firstChild)):is=ee),fu(f,x,x.pendingProps.children,C),Gy(f,x),f===null&&(x.flags|=4194304),x.child;case 5:return f===null&&Ra&&((ee=z=is)&&(z=VS(z,x.type,x.pendingProps,qu),z!==null?(x.stateNode=z,Ms=x,is=Nh(z.firstChild),qu=!1,ee=!0):ee=!1),ee||Zh(x)),pt(x),ee=x.type,he=x.pendingProps,Qe=f!==null?f.memoizedProps:null,z=he.children,Rb(ee,he)?z=null:Qe!==null&&Rb(ee,Qe)&&(x.flags|=32),x.memoizedState!==null&&(ee=Xu(f,x,eh,null,null,C),li._currentValue=ee),Gy(f,x),fu(f,x,z,C),x.child;case 6:return f===null&&Ra&&((f=C=is)&&(C=HS(C,x.pendingProps,qu),C!==null?(x.stateNode=C,Ms=x,is=null,f=!0):f=!1),f||Zh(x)),null;case 13:return gS(f,x,C);case 4:return Ae(x,x.stateNode.containerInfo),z=x.pendingProps,f===null?x.child=Rm(x,null,z,C):fu(f,x,z,C),x.child;case 11:return hS(f,x,x.type,x.pendingProps,C);case 7:return fu(f,x,x.pendingProps,C),x.child;case 8:return fu(f,x,x.pendingProps.children,C),x.child;case 12:return fu(f,x,x.pendingProps.children,C),x.child;case 10:return z=x.pendingProps,$u(x,x.type,z.value),fu(f,x,z.children,C),x.child;case 9:return ee=x.type._context,z=x.pendingProps.children,Rc(x),ee=ao(ee),z=z(ee),x.flags|=1,fu(f,x,z,C),x.child;case 14:return Jx(f,x,x.type,x.pendingProps,C);case 15:return fS(f,x,x.type,x.pendingProps,C);case 19:return vS(f,x,C);case 31:return z=x.pendingProps,C=x.mode,z={mode:z.mode,children:z.children},f===null?(C=Hy(z,C),C.ref=x.ref,x.child=C,C.return=x,x=C):(C=wl(f.child,z),C.ref=x.ref,x.child=C,C.return=x,x=C),x;case 22:return dS(f,x,C);case 24:return Rc(x),z=ao(as),f===null?(ee=_e(),ee===null&&(ee=vs,he=Mf(),ee.pooledCache=he,he.refCount++,he!==null&&(ee.pooledCacheLanes|=C),ee=he),x.memoizedState={parent:z,cache:ee},_n(x),$u(x,as,ee)):((f.lanes&C)!==0&&(Cn(f,x),or(x,null,null,C),yr()),ee=f.memoizedState,he=x.memoizedState,ee.parent!==z?(ee={parent:z,cache:z},x.memoizedState=ee,x.lanes===0&&(x.memoizedState=x.updateQueue.baseState=ee),$u(x,as,z)):(z=he.cache,$u(x,as,z),z!==ee.cache&&Ch(x,[as],C,!0))),fu(f,x,x.pendingProps.children,C),x.child;case 29:throw x.pendingProps}throw Error(r(156,x.tag))}function ih(f){f.flags|=4}function ib(f,x){if(x.type!=="stylesheet"||(x.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!tn(x)){if(x=Jh.current,x!==null&&((eo&4194048)===eo?Qh!==null:(eo&62914560)!==eo&&(eo&536870912)===0||x!==Qh))throw Gn=Mt,vt;f.flags|=8192}}function Mg(f,x){x!==null&&(f.flags|=4),f.flags&16384&&(x=f.tag!==22?mt():536870912,f.lanes|=x,Ig|=x)}function Bp(f,x){if(!Ra)switch(f.tailMode){case"hidden":x=f.tail;for(var C=null;x!==null;)x.alternate!==null&&(C=x),x=x.sibling;C===null?f.tail=null:C.sibling=null;break;case"collapsed":C=f.tail;for(var z=null;C!==null;)C.alternate!==null&&(z=C),C=C.sibling;z===null?x||f.tail===null?f.tail=null:f.tail.sibling=null:z.sibling=null}}function ms(f){var x=f.alternate!==null&&f.alternate.child===f.child,C=0,z=0;if(x)for(var ee=f.child;ee!==null;)C|=ee.lanes|ee.childLanes,z|=ee.subtreeFlags&65011712,z|=ee.flags&65011712,ee.return=f,ee=ee.sibling;else for(ee=f.child;ee!==null;)C|=ee.lanes|ee.childLanes,z|=ee.subtreeFlags,z|=ee.flags,ee.return=f,ee=ee.sibling;return f.subtreeFlags|=z,f.childLanes=C,x}function yS(f,x,C){var z=x.pendingProps;switch(Tf(x),x.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ms(x),null;case 1:return ms(x),null;case 3:return C=x.stateNode,z=null,f!==null&&(z=f.memoizedState.cache),x.memoizedState.cache!==z&&(x.flags|=2048),lu(as),ut(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(f===null||f.child===null)&&(Qs(x)?ih(x):f===null||f.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,bg())),ms(x),null;case 26:return C=x.memoizedState,f===null?(ih(x),C!==null?(ms(x),ib(x,C)):(ms(x),x.flags&=-16777217)):C?C!==f.memoizedState?(ih(x),ms(x),ib(x,C)):(ms(x),x.flags&=-16777217):(f.memoizedProps!==z&&ih(x),ms(x),x.flags&=-16777217),null;case 27:st(x),C=De.current;var ee=x.type;if(f!==null&&x.stateNode!=null)f.memoizedProps!==z&&ih(x);else{if(!z){if(x.stateNode===null)throw Error(r(166));return ms(x),null}f=ve.current,Qs(x)?Pp(x):(f=qm(ee,z,C),x.stateNode=f,ih(x))}return ms(x),null;case 5:if(st(x),C=x.type,f!==null&&x.stateNode!=null)f.memoizedProps!==z&&ih(x);else{if(!z){if(x.stateNode===null)throw Error(r(166));return ms(x),null}if(f=ve.current,Qs(x))Pp(x);else{switch(ee=zg(De.current),f){case 1:f=ee.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:f=ee.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":f=ee.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":f=ee.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":f=ee.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof z.is=="string"?ee.createElement("select",{is:z.is}):ee.createElement("select"),z.multiple?f.multiple=!0:z.size&&(f.size=z.size);break;default:f=typeof z.is=="string"?ee.createElement(C,{is:z.is}):ee.createElement(C)}}f[Pe]=x,f[je]=z;e:for(ee=x.child;ee!==null;){if(ee.tag===5||ee.tag===6)f.appendChild(ee.stateNode);else if(ee.tag!==4&&ee.tag!==27&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===x)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===x)break e;ee=ee.return}ee.sibling.return=ee.return,ee=ee.sibling}x.stateNode=f;e:switch(Ul(f,C,z),C){case"button":case"input":case"select":case"textarea":f=!!z.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ih(x)}}return ms(x),x.flags&=-16777217,null;case 6:if(f&&x.stateNode!=null)f.memoizedProps!==z&&ih(x);else{if(typeof z!="string"&&x.stateNode===null)throw Error(r(166));if(f=De.current,Qs(x)){if(f=x.stateNode,C=x.memoizedProps,z=null,ee=Ms,ee!==null)switch(ee.tag){case 27:case 5:z=ee.memoizedProps}f[Pe]=x,f=!!(f.nodeValue===C||z!==null&&z.suppressHydrationWarning===!0||Ab(f.nodeValue,C)),f||Zh(x)}else f=zg(f).createTextNode(z),f[Pe]=x,x.stateNode=f}return ms(x),null;case 13:if(z=x.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(ee=Qs(x),z!==null&&z.dehydrated!==null){if(f===null){if(!ee)throw Error(r(318));if(ee=x.memoizedState,ee=ee!==null?ee.dehydrated:null,!ee)throw Error(r(317));ee[Pe]=x}else hl(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;ms(x),ee=!1}else ee=bg(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=ee),ee=!0;if(!ee)return x.flags&256?(od(x),x):(od(x),null)}if(od(x),(x.flags&128)!==0)return x.lanes=C,x;if(C=z!==null,f=f!==null&&f.memoizedState!==null,C){z=x.child,ee=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(ee=z.alternate.memoizedState.cachePool.pool);var he=null;z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(he=z.memoizedState.cachePool.pool),he!==ee&&(z.flags|=2048)}return C!==f&&C&&(x.child.flags|=8192),Mg(x,x.updateQueue),ms(x),null;case 4:return ut(),f===null&&f_(x.stateNode.containerInfo),ms(x),null;case 10:return lu(x.type),ms(x),null;case 19:if(me(Us),ee=x.memoizedState,ee===null)return ms(x),null;if(z=(x.flags&128)!==0,he=ee.rendering,he===null)if(z)Bp(ee,!1);else{if(El!==0||f!==null&&(f.flags&128)!==0)for(f=x.child;f!==null;){if(he=zy(f),he!==null){for(x.flags|=128,Bp(ee,!1),f=he.updateQueue,x.updateQueue=f,Mg(x,f),x.subtreeFlags=0,f=C,C=x.child;C!==null;)Mu(C,f),C=C.sibling;return xe(Us,Us.current&1|2),x.child}f=f.sibling}ee.tail!==null&&wt()>Bm&&(x.flags|=128,z=!0,Bp(ee,!1),x.lanes=4194304)}else{if(!z)if(f=zy(he),f!==null){if(x.flags|=128,z=!0,f=f.updateQueue,x.updateQueue=f,Mg(x,f),Bp(ee,!0),ee.tail===null&&ee.tailMode==="hidden"&&!he.alternate&&!Ra)return ms(x),null}else 2*wt()-ee.renderingStartTime>Bm&&C!==536870912&&(x.flags|=128,z=!0,Bp(ee,!1),x.lanes=4194304);ee.isBackwards?(he.sibling=x.child,x.child=he):(f=ee.last,f!==null?f.sibling=he:x.child=he,ee.last=he)}return ee.tail!==null?(x=ee.tail,ee.rendering=x,ee.tail=x.sibling,ee.renderingStartTime=wt(),x.sibling=null,f=Us.current,xe(Us,z?f&1|2:f&1),x):(ms(x),null);case 22:case 23:return od(x),ma(),z=x.memoizedState!==null,f!==null?f.memoizedState!==null!==z&&(x.flags|=8192):z&&(x.flags|=8192),z?(C&536870912)!==0&&(x.flags&128)===0&&(ms(x),x.subtreeFlags&6&&(x.flags|=8192)):ms(x),C=x.updateQueue,C!==null&&Mg(x,C.retryQueue),C=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(C=f.memoizedState.cachePool.pool),z=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(z=x.memoizedState.cachePool.pool),z!==C&&(x.flags|=2048),f!==null&&me(te),null;case 24:return C=null,f!==null&&(C=f.memoizedState.cache),x.memoizedState.cache!==C&&(x.flags|=2048),lu(as),ms(x),null;case 25:return null;case 30:return null}throw Error(r(156,x.tag))}function _S(f,x){switch(Tf(x),x.tag){case 1:return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 3:return lu(as),ut(),f=x.flags,(f&65536)!==0&&(f&128)===0?(x.flags=f&-65537|128,x):null;case 26:case 27:case 5:return st(x),null;case 13:if(od(x),f=x.memoizedState,f!==null&&f.dehydrated!==null){if(x.alternate===null)throw Error(r(340));hl()}return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 19:return me(Us),null;case 4:return ut(),null;case 10:return lu(x.type),null;case 22:case 23:return od(x),ma(),f!==null&&me(te),f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 24:return lu(as),null;case 25:return null;default:return null}}function Im(f,x){switch(Tf(x),x.tag){case 3:lu(as),ut();break;case 26:case 27:case 5:st(x);break;case 4:ut();break;case 13:od(x);break;case 19:me(Us);break;case 10:lu(x.type);break;case 22:case 23:od(x),ma(),f!==null&&me(te);break;case 24:lu(as)}}function Ag(f,x){try{var C=x.updateQueue,z=C!==null?C.lastEffect:null;if(z!==null){var ee=z.next;C=ee;do{if((C.tag&f)===f){z=void 0;var he=C.create,Qe=C.inst;z=he(),Qe.destroy=z}C=C.next}while(C!==ee)}}catch(St){ys(x,x.return,St)}}function Dh(f,x,C){try{var z=x.updateQueue,ee=z!==null?z.lastEffect:null;if(ee!==null){var he=ee.next;z=he;do{if((z.tag&f)===f){var Qe=z.inst,St=Qe.destroy;if(St!==void 0){Qe.destroy=void 0,ee=x;var ln=C,$n=St;try{$n()}catch(fr){ys(ee,ln,fr)}}}z=z.next}while(z!==he)}}catch(fr){ys(x,x.return,fr)}}function e0(f){var x=f.updateQueue;if(x!==null){var C=f.stateNode;try{oo(x,C)}catch(z){ys(f,f.return,z)}}}function Rg(f,x,C){C.props=Op(f.type,f.memoizedProps),C.state=f.memoizedState;try{C.componentWillUnmount()}catch(z){ys(f,x,z)}}function Gd(f,x){try{var C=f.ref;if(C!==null){switch(f.tag){case 26:case 27:case 5:var z=f.stateNode;break;case 30:z=f.stateNode;break;default:z=f.stateNode}typeof C=="function"?f.refCleanup=C(z):C.current=z}}catch(ee){ys(f,x,ee)}}function ld(f,x){var C=f.ref,z=f.refCleanup;if(C!==null)if(typeof z=="function")try{z()}catch(ee){ys(f,x,ee)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof C=="function")try{C(null)}catch(ee){ys(f,x,ee)}else C.current=null}function ab(f){var x=f.type,C=f.memoizedProps,z=f.stateNode;try{e:switch(x){case"button":case"input":case"select":case"textarea":C.autoFocus&&z.focus();break e;case"img":C.src?z.src=C.src:C.srcSet&&(z.srcset=C.srcSet)}}catch(ee){ys(f,f.return,ee)}}function Vd(f,x,C){try{var z=f.stateNode;jS(z,f.type,C,x),z[je]=x}catch(ee){ys(f,f.return,ee)}}function xS(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&Jd(f.type)||f.tag===4}function qy(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||xS(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&Jd(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Pg(f,x,C){var z=f.tag;if(z===5||z===6)f=f.stateNode,x?(C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C).insertBefore(f,x):(x=C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C,x.appendChild(f),C=C._reactRootContainer,C!=null||x.onclick!==null||(x.onclick=g_));else if(z!==4&&(z===27&&Jd(f.type)&&(C=f.stateNode,x=null),f=f.child,f!==null))for(Pg(f,x,C),f=f.sibling;f!==null;)Pg(f,x,C),f=f.sibling}function Dm(f,x,C){var z=f.tag;if(z===5||z===6)f=f.stateNode,x?C.insertBefore(f,x):C.appendChild(f);else if(z!==4&&(z===27&&Jd(f.type)&&(C=f.stateNode),f=f.child,f!==null))for(Dm(f,x,C),f=f.sibling;f!==null;)Dm(f,x,C),f=f.sibling}function ob(f){var x=f.stateNode,C=f.memoizedProps;try{for(var z=f.type,ee=x.attributes;ee.length;)x.removeAttributeNode(ee[0]);Ul(x,z,C),x[Pe]=f,x[je]=C}catch(he){ys(f,f.return,he)}}var ud=!1,zl=!1,sb=!1,bS=typeof WeakSet=="function"?WeakSet:Set,Du=null;function TA(f,x){if(f=f.containerInfo,Hm=pc,f=jr(f),ai(f)){if("selectionStart"in f)var C={start:f.selectionStart,end:f.selectionEnd};else e:{C=(C=f.ownerDocument)&&C.defaultView||window;var z=C.getSelection&&C.getSelection();if(z&&z.rangeCount!==0){C=z.anchorNode;var ee=z.anchorOffset,he=z.focusNode;z=z.focusOffset;try{C.nodeType,he.nodeType}catch{C=null;break e}var Qe=0,St=-1,ln=-1,$n=0,fr=0,Dr=f,Zn=null;t:for(;;){for(var er;Dr!==C||ee!==0&&Dr.nodeType!==3||(St=Qe+ee),Dr!==he||z!==0&&Dr.nodeType!==3||(ln=Qe+z),Dr.nodeType===3&&(Qe+=Dr.nodeValue.length),(er=Dr.firstChild)!==null;)Zn=Dr,Dr=er;for(;;){if(Dr===f)break t;if(Zn===C&&++$n===ee&&(St=Qe),Zn===he&&++fr===z&&(ln=Qe),(er=Dr.nextSibling)!==null)break;Dr=Zn,Zn=Dr.parentNode}Dr=er}C=St===-1||ln===-1?null:{start:St,end:ln}}else C=null}C=C||{start:0,end:0}}else C=null;for(v_={focusedElem:f,selectionRange:C},pc=!1,Du=x;Du!==null;)if(x=Du,f=x.child,(x.subtreeFlags&1024)!==0&&f!==null)f.return=x,Du=f;else for(;Du!==null;){switch(x=Du,he=x.alternate,f=x.flags,x.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&he!==null){f=void 0,C=x,ee=he.memoizedProps,he=he.memoizedState,z=C.stateNode;try{var va=Op(C.type,ee,C.elementType===C.type);f=z.getSnapshotBeforeUpdate(va,he),z.__reactInternalSnapshotBeforeUpdate=f}catch(aa){ys(C,C.return,aa)}}break;case 3:if((f&1024)!==0){if(f=x.stateNode.containerInfo,C=f.nodeType,C===9)Db(f);else if(C===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":Db(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=x.sibling,f!==null){f.return=x.return,Du=f;break}Du=x.return}}function $y(f,x,C){var z=C.flags;switch(C.tag){case 0:case 11:case 15:tf(f,C),z&4&&Ag(5,C);break;case 1:if(tf(f,C),z&4)if(f=C.stateNode,x===null)try{f.componentDidMount()}catch(Qe){ys(C,C.return,Qe)}else{var ee=Op(C.type,x.memoizedProps);x=x.memoizedState;try{f.componentDidUpdate(ee,x,f.__reactInternalSnapshotBeforeUpdate)}catch(Qe){ys(C,C.return,Qe)}}z&64&&e0(C),z&512&&Gd(C,C.return);break;case 3:if(tf(f,C),z&64&&(f=C.updateQueue,f!==null)){if(x=null,C.child!==null)switch(C.child.tag){case 27:case 5:x=C.child.stateNode;break;case 1:x=C.child.stateNode}try{oo(f,x)}catch(Qe){ys(C,C.return,Qe)}}break;case 27:x===null&&z&4&&ob(C);case 26:case 5:tf(f,C),x===null&&z&4&&ab(C),z&512&&Gd(C,C.return);break;case 12:tf(f,C);break;case 13:tf(f,C),z&4&&cb(f,C),z&64&&(f=C.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(C=IS.bind(null,C),qS(f,C))));break;case 22:if(z=C.memoizedState!==null||ud,!z){x=x!==null&&x.memoizedState!==null||zl,ee=ud;var he=zl;ud=z,(zl=x)&&!he?zp(f,C,(C.subtreeFlags&8772)!==0):tf(f,C),ud=ee,zl=he}break;case 30:break;default:tf(f,C)}}function lb(f){var x=f.alternate;x!==null&&(f.alternate=null,lb(x)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(x=f.stateNode,x!==null&&Qr(x)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Ps=null,Dc=!1;function Pf(f,x,C){for(C=C.child;C!==null;)ub(f,x,C),C=C.sibling}function ub(f,x,C){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Bt,C)}catch{}switch(C.tag){case 26:zl||ld(C,x),Pf(f,x,C),C.memoizedState?C.memoizedState.count--:C.stateNode&&(C=C.stateNode,C.parentNode.removeChild(C));break;case 27:zl||ld(C,x);var z=Ps,ee=Dc;Jd(C.type)&&(Ps=C.stateNode,Dc=!1),Pf(f,x,C),jg(C.stateNode),Ps=z,Dc=ee;break;case 5:zl||ld(C,x);case 6:if(z=Ps,ee=Dc,Ps=null,Pf(f,x,C),Ps=z,Dc=ee,Ps!==null)if(Dc)try{(Ps.nodeType===9?Ps.body:Ps.nodeName==="HTML"?Ps.ownerDocument.body:Ps).removeChild(C.stateNode)}catch(he){ys(C,x,he)}else try{Ps.removeChild(C.stateNode)}catch(he){ys(C,x,he)}break;case 18:Ps!==null&&(Dc?(f=Ps,y_(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,C.stateNode),Wm(f)):y_(Ps,C.stateNode));break;case 4:z=Ps,ee=Dc,Ps=C.stateNode.containerInfo,Dc=!0,Pf(f,x,C),Ps=z,Dc=ee;break;case 0:case 11:case 14:case 15:zl||Dh(2,C,x),zl||Dh(4,C,x),Pf(f,x,C);break;case 1:zl||(ld(C,x),z=C.stateNode,typeof z.componentWillUnmount=="function"&&Rg(C,x,z)),Pf(f,x,C);break;case 21:Pf(f,x,C);break;case 22:zl=(z=zl)||C.memoizedState!==null,Pf(f,x,C),zl=z;break;default:Pf(f,x,C)}}function cb(f,x){if(x.memoizedState===null&&(f=x.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{Wm(f)}catch(C){ys(x,x.return,C)}}function Wy(f){switch(f.tag){case 13:case 19:var x=f.stateNode;return x===null&&(x=f.stateNode=new bS),x;case 22:return f=f.stateNode,x=f._retryCache,x===null&&(x=f._retryCache=new bS),x;default:throw Error(r(435,f.tag))}}function Xy(f,x){var C=Wy(f);x.forEach(function(z){var ee=DS.bind(null,f,z);C.has(z)||(C.add(z),z.then(ee,ee))})}function ah(f,x){var C=x.deletions;if(C!==null)for(var z=0;z<C.length;z++){var ee=C[z],he=f,Qe=x,St=Qe;e:for(;St!==null;){switch(St.tag){case 27:if(Jd(St.type)){Ps=St.stateNode,Dc=!1;break e}break;case 5:Ps=St.stateNode,Dc=!1;break e;case 3:case 4:Ps=St.stateNode.containerInfo,Dc=!0;break e}St=St.return}if(Ps===null)throw Error(r(160));ub(he,Qe,ee),Ps=null,Dc=!1,he=ee.alternate,he!==null&&(he.return=null),ee.return=null}if(x.subtreeFlags&13878)for(x=x.child;x!==null;)Lm(x,f),x=x.sibling}var ef=null;function Lm(f,x){var C=f.alternate,z=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:ah(x,f),Lh(f),z&4&&(Dh(3,f,f.return),Ag(3,f),Dh(5,f,f.return));break;case 1:ah(x,f),Lh(f),z&512&&(zl||C===null||ld(C,C.return)),z&64&&ud&&(f=f.updateQueue,f!==null&&(z=f.callbacks,z!==null&&(C=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=C===null?z:C.concat(z))));break;case 26:var ee=ef;if(ah(x,f),Lh(f),z&512&&(zl||C===null||ld(C,C.return)),z&4){var he=C!==null?C.memoizedState:null;if(z=f.memoizedState,C===null)if(z===null)if(f.stateNode===null){e:{z=f.type,C=f.memoizedProps,ee=ee.ownerDocument||ee;t:switch(z){case"title":he=ee.getElementsByTagName("title")[0],(!he||he[kr]||he[Pe]||he.namespaceURI==="http://www.w3.org/2000/svg"||he.hasAttribute("itemprop"))&&(he=ee.createElement(z),ee.head.insertBefore(he,ee.querySelector("head > title"))),Ul(he,z,C),he[Pe]=f,mr(he),z=he;break e;case"link":var Qe=Kt("link","href",ee).get(z+(C.href||""));if(Qe){for(var St=0;St<Qe.length;St++)if(he=Qe[St],he.getAttribute("href")===(C.href==null||C.href===""?null:C.href)&&he.getAttribute("rel")===(C.rel==null?null:C.rel)&&he.getAttribute("title")===(C.title==null?null:C.title)&&he.getAttribute("crossorigin")===(C.crossOrigin==null?null:C.crossOrigin)){Qe.splice(St,1);break t}}he=ee.createElement(z),Ul(he,z,C),ee.head.appendChild(he);break;case"meta":if(Qe=Kt("meta","content",ee).get(z+(C.content||""))){for(St=0;St<Qe.length;St++)if(he=Qe[St],he.getAttribute("content")===(C.content==null?null:""+C.content)&&he.getAttribute("name")===(C.name==null?null:C.name)&&he.getAttribute("property")===(C.property==null?null:C.property)&&he.getAttribute("http-equiv")===(C.httpEquiv==null?null:C.httpEquiv)&&he.getAttribute("charset")===(C.charSet==null?null:C.charSet)){Qe.splice(St,1);break t}}he=ee.createElement(z),Ul(he,z,C),ee.head.appendChild(he);break;default:throw Error(r(468,z))}he[Pe]=f,mr(he),z=he}f.stateNode=z}else Ke(ee,f.type,f.stateNode);else f.stateNode=tt(ee,z,f.memoizedProps);else he!==z?(he===null?C.stateNode!==null&&(C=C.stateNode,C.parentNode.removeChild(C)):he.count--,z===null?Ke(ee,f.type,f.stateNode):tt(ee,z,f.memoizedProps)):z===null&&f.stateNode!==null&&Vd(f,f.memoizedProps,C.memoizedProps)}break;case 27:ah(x,f),Lh(f),z&512&&(zl||C===null||ld(C,C.return)),C!==null&&z&4&&Vd(f,f.memoizedProps,C.memoizedProps);break;case 5:if(ah(x,f),Lh(f),z&512&&(zl||C===null||ld(C,C.return)),f.flags&32){ee=f.stateNode;try{Gt(ee,"")}catch(er){ys(f,f.return,er)}}z&4&&f.stateNode!=null&&(ee=f.memoizedProps,Vd(f,ee,C!==null?C.memoizedProps:ee)),z&1024&&(sb=!0);break;case 6:if(ah(x,f),Lh(f),z&4){if(f.stateNode===null)throw Error(r(162));z=f.memoizedProps,C=f.stateNode;try{C.nodeValue=z}catch(er){ys(f,f.return,er)}}break;case 3:if(fn=null,ee=ef,ef=Gg(x.containerInfo),ah(x,f),ef=ee,Lh(f),z&4&&C!==null&&C.memoizedState.isDehydrated)try{Wm(x.containerInfo)}catch(er){ys(f,f.return,er)}sb&&(sb=!1,Yy(f));break;case 4:z=ef,ef=Gg(f.stateNode.containerInfo),ah(x,f),Lh(f),ef=z;break;case 12:ah(x,f),Lh(f);break;case 13:ah(x,f),Lh(f),f.child.flags&8192&&f.memoizedState!==null!=(C!==null&&C.memoizedState!==null)&&(Qy=wt()),z&4&&(z=f.updateQueue,z!==null&&(f.updateQueue=null,Xy(f,z)));break;case 22:ee=f.memoizedState!==null;var ln=C!==null&&C.memoizedState!==null,$n=ud,fr=zl;if(ud=$n||ee,zl=fr||ln,ah(x,f),zl=fr,ud=$n,Lh(f),z&8192)e:for(x=f.stateNode,x._visibility=ee?x._visibility&-2:x._visibility|1,ee&&(C===null||ln||ud||zl||Hd(f)),C=null,x=f;;){if(x.tag===5||x.tag===26){if(C===null){ln=C=x;try{if(he=ln.stateNode,ee)Qe=he.style,typeof Qe.setProperty=="function"?Qe.setProperty("display","none","important"):Qe.display="none";else{St=ln.stateNode;var Dr=ln.memoizedProps.style,Zn=Dr!=null&&Dr.hasOwnProperty("display")?Dr.display:null;St.style.display=Zn==null||typeof Zn=="boolean"?"":(""+Zn).trim()}}catch(er){ys(ln,ln.return,er)}}}else if(x.tag===6){if(C===null){ln=x;try{ln.stateNode.nodeValue=ee?"":ln.memoizedProps}catch(er){ys(ln,ln.return,er)}}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===f)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break e;for(;x.sibling===null;){if(x.return===null||x.return===f)break e;C===x&&(C=null),x=x.return}C===x&&(C=null),x.sibling.return=x.return,x=x.sibling}z&4&&(z=f.updateQueue,z!==null&&(C=z.retryQueue,C!==null&&(z.retryQueue=null,Xy(f,C))));break;case 19:ah(x,f),Lh(f),z&4&&(z=f.updateQueue,z!==null&&(f.updateQueue=null,Xy(f,z)));break;case 30:break;case 21:break;default:ah(x,f),Lh(f)}}function Lh(f){var x=f.flags;if(x&2){try{for(var C,z=f.return;z!==null;){if(xS(z)){C=z;break}z=z.return}if(C==null)throw Error(r(160));switch(C.tag){case 27:var ee=C.stateNode,he=qy(f);Dm(f,he,ee);break;case 5:var Qe=C.stateNode;C.flags&32&&(Gt(Qe,""),C.flags&=-33);var St=qy(f);Dm(f,St,Qe);break;case 3:case 4:var ln=C.stateNode.containerInfo,$n=qy(f);Pg(f,$n,ln);break;default:throw Error(r(161))}}catch(fr){ys(f,f.return,fr)}f.flags&=-3}x&4096&&(f.flags&=-4097)}function Yy(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var x=f;Yy(x),x.tag===5&&x.flags&1024&&x.stateNode.reset(),f=f.sibling}}function tf(f,x){if(x.subtreeFlags&8772)for(x=x.child;x!==null;)$y(f,x.alternate,x),x=x.sibling}function Hd(f){for(f=f.child;f!==null;){var x=f;switch(x.tag){case 0:case 11:case 14:case 15:Dh(4,x,x.return),Hd(x);break;case 1:ld(x,x.return);var C=x.stateNode;typeof C.componentWillUnmount=="function"&&Rg(x,x.return,C),Hd(x);break;case 27:jg(x.stateNode);case 26:case 5:ld(x,x.return),Hd(x);break;case 22:x.memoizedState===null&&Hd(x);break;case 30:Hd(x);break;default:Hd(x)}f=f.sibling}}function zp(f,x,C){for(C=C&&(x.subtreeFlags&8772)!==0,x=x.child;x!==null;){var z=x.alternate,ee=f,he=x,Qe=he.flags;switch(he.tag){case 0:case 11:case 15:zp(ee,he,C),Ag(4,he);break;case 1:if(zp(ee,he,C),z=he,ee=z.stateNode,typeof ee.componentDidMount=="function")try{ee.componentDidMount()}catch($n){ys(z,z.return,$n)}if(z=he,ee=z.updateQueue,ee!==null){var St=z.stateNode;try{var ln=ee.shared.hiddenCallbacks;if(ln!==null)for(ee.shared.hiddenCallbacks=null,ee=0;ee<ln.length;ee++)Ga(ln[ee],St)}catch($n){ys(z,z.return,$n)}}C&&Qe&64&&e0(he),Gd(he,he.return);break;case 27:ob(he);case 26:case 5:zp(ee,he,C),C&&z===null&&Qe&4&&ab(he),Gd(he,he.return);break;case 12:zp(ee,he,C);break;case 13:zp(ee,he,C),C&&Qe&4&&cb(ee,he);break;case 22:he.memoizedState===null&&zp(ee,he,C),Gd(he,he.return);break;case 30:break;default:zp(ee,he,C)}x=x.sibling}}function hb(f,x){var C=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(C=f.memoizedState.cachePool.pool),f=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(f=x.memoizedState.cachePool.pool),f!==C&&(f!=null&&f.refCount++,C!=null&&Fl(C))}function Zy(f,x){f=null,x.alternate!==null&&(f=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==f&&(x.refCount++,f!=null&&Fl(f))}function If(f,x,C,z){if(x.subtreeFlags&10256)for(x=x.child;x!==null;)wS(f,x,C,z),x=x.sibling}function wS(f,x,C,z){var ee=x.flags;switch(x.tag){case 0:case 11:case 15:If(f,x,C,z),ee&2048&&Ag(9,x);break;case 1:If(f,x,C,z);break;case 3:If(f,x,C,z),ee&2048&&(f=null,x.alternate!==null&&(f=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==f&&(x.refCount++,f!=null&&Fl(f)));break;case 12:if(ee&2048){If(f,x,C,z),f=x.stateNode;try{var he=x.memoizedProps,Qe=he.id,St=he.onPostCommit;typeof St=="function"&&St(Qe,x.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(ln){ys(x,x.return,ln)}}else If(f,x,C,z);break;case 13:If(f,x,C,z);break;case 23:break;case 22:he=x.stateNode,Qe=x.alternate,x.memoizedState!==null?he._visibility&2?If(f,x,C,z):qd(f,x):he._visibility&2?If(f,x,C,z):(he._visibility|=2,Nm(f,x,C,z,(x.subtreeFlags&10256)!==0)),ee&2048&&hb(Qe,x);break;case 24:If(f,x,C,z),ee&2048&&Zy(x.alternate,x);break;default:If(f,x,C,z)}}function Nm(f,x,C,z,ee){for(ee=ee&&(x.subtreeFlags&10256)!==0,x=x.child;x!==null;){var he=f,Qe=x,St=C,ln=z,$n=Qe.flags;switch(Qe.tag){case 0:case 11:case 15:Nm(he,Qe,St,ln,ee),Ag(8,Qe);break;case 23:break;case 22:var fr=Qe.stateNode;Qe.memoizedState!==null?fr._visibility&2?Nm(he,Qe,St,ln,ee):qd(he,Qe):(fr._visibility|=2,Nm(he,Qe,St,ln,ee)),ee&&$n&2048&&hb(Qe.alternate,Qe);break;case 24:Nm(he,Qe,St,ln,ee),ee&&$n&2048&&Zy(Qe.alternate,Qe);break;default:Nm(he,Qe,St,ln,ee)}x=x.sibling}}function qd(f,x){if(x.subtreeFlags&10256)for(x=x.child;x!==null;){var C=f,z=x,ee=z.flags;switch(z.tag){case 22:qd(C,z),ee&2048&&hb(z.alternate,z);break;case 24:qd(C,z),ee&2048&&Zy(z.alternate,z);break;default:qd(C,z)}x=x.sibling}}var km=8192;function Om(f){if(f.subtreeFlags&km)for(f=f.child;f!==null;)SS(f),f=f.sibling}function SS(f){switch(f.tag){case 26:Om(f),f.flags&km&&f.memoizedState!==null&&Xn(ef,f.memoizedState,f.memoizedProps);break;case 5:Om(f);break;case 3:case 4:var x=ef;ef=Gg(f.stateNode.containerInfo),Om(f),ef=x;break;case 22:f.memoizedState===null&&(x=f.alternate,x!==null&&x.memoizedState!==null?(x=km,km=16777216,Om(f),km=x):Om(f));break;default:Om(f)}}function ES(f){var x=f.alternate;if(x!==null&&(f=x.child,f!==null)){x.child=null;do x=f.sibling,f.sibling=null,f=x;while(f!==null)}}function t0(f){var x=f.deletions;if((f.flags&16)!==0){if(x!==null)for(var C=0;C<x.length;C++){var z=x[C];Du=z,fb(z,f)}ES(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)TS(f),f=f.sibling}function TS(f){switch(f.tag){case 0:case 11:case 15:t0(f),f.flags&2048&&Dh(9,f,f.return);break;case 3:t0(f);break;case 12:t0(f);break;case 22:var x=f.stateNode;f.memoizedState!==null&&x._visibility&2&&(f.return===null||f.return.tag!==13)?(x._visibility&=-3,Ky(f)):t0(f);break;default:t0(f)}}function Ky(f){var x=f.deletions;if((f.flags&16)!==0){if(x!==null)for(var C=0;C<x.length;C++){var z=x[C];Du=z,fb(z,f)}ES(f)}for(f=f.child;f!==null;){switch(x=f,x.tag){case 0:case 11:case 15:Dh(8,x,x.return),Ky(x);break;case 22:C=x.stateNode,C._visibility&2&&(C._visibility&=-3,Ky(x));break;default:Ky(x)}f=f.sibling}}function fb(f,x){for(;Du!==null;){var C=Du;switch(C.tag){case 0:case 11:case 15:Dh(8,C,x);break;case 23:case 22:if(C.memoizedState!==null&&C.memoizedState.cachePool!==null){var z=C.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:Fl(C.memoizedState.cache)}if(z=C.child,z!==null)z.return=C,Du=z;else e:for(C=f;Du!==null;){z=Du;var ee=z.sibling,he=z.return;if(lb(z),z===C){Du=null;break e}if(ee!==null){ee.return=he,Du=ee;break e}Du=he}}}var db={getCacheForType:function(f){var x=ao(as),C=x.data.get(f);return C===void 0&&(C=f(),x.data.set(f,C)),C}},CS=typeof WeakMap=="function"?WeakMap:Map,Vo=0,vs=null,Qa=null,eo=0,Ko=0,oh=null,Up=!1,Fm=!1,pb=!1,cd=0,El=0,jp=0,Df=0,Jy=0,sh=0,Ig=0,js=null,fc=null,gb=!1,Qy=0,Bm=1/0,zm=null,Gp=null,Ku=0,Vp=null,Um=null,Dg=0,Ju=0,n0=null,mb=null,nf=0,jm=null;function Qu(){if((Vo&2)!==0&&eo!==0)return eo&-eo;if(se.T!==null){var f=cc;return f!==0?f:u_()}return Qn()}function Lg(){sh===0&&(sh=(eo&536870912)===0||Ra?He():536870912);var f=Jh.current;return f!==null&&(f.flags|=32),sh}function dc(f,x,C){(f===vs&&(Ko===2||Ko===9)||f.cancelPendingCommit!==null)&&(Ng(f,0),$d(f,eo,sh,!1)),xt(f,C),((Vo&2)===0||f!==vs)&&(f===vs&&((Vo&2)===0&&(Df|=C),El===4&&$d(f,eo,sh,!1)),hd(f))}function r0(f,x,C){if((Vo&6)!==0)throw Error(r(327));var z=!C&&(x&124)===0&&(x&f.expiredLanes)===0||Xe(f,x),ee=z?AA(f,x):n_(f,x,!0),he=z;do{if(ee===0){Fm&&!z&&$d(f,x,0,!1);break}else{if(C=f.current.alternate,he&&!CA(C)){ee=n_(f,x,!1),he=!1;continue}if(ee===2){if(he=x,f.errorRecoveryDisabledLanes&he)var Qe=0;else Qe=f.pendingLanes&-536870913,Qe=Qe!==0?Qe:Qe&536870912?536870912:0;if(Qe!==0){x=Qe;e:{var St=f;ee=js;var ln=St.current.memoizedState.isDehydrated;if(ln&&(Ng(St,Qe).flags|=256),Qe=n_(St,Qe,!1),Qe!==2){if(pb&&!ln){St.errorRecoveryDisabledLanes|=he,Df|=he,ee=4;break e}he=fc,fc=ee,he!==null&&(fc===null?fc=he:fc.push.apply(fc,he))}ee=Qe}if(he=!1,ee!==2)continue}}if(ee===1){Ng(f,0),$d(f,x,0,!0);break}e:{switch(z=f,he=ee,he){case 0:case 1:throw Error(r(345));case 4:if((x&4194048)!==x)break;case 6:$d(z,x,sh,!Up);break e;case 2:fc=null;break;case 3:case 5:break;default:throw Error(r(329))}if((x&62914560)===x&&(ee=Qy+300-wt(),10<ee)){if($d(z,x,sh,!Up),ze(z,0,!0)!==0)break e;z.timeoutHandle=Ug(MS.bind(null,z,C,fc,zm,gb,x,sh,Df,Ig,Up,he,2,-0,0),ee);break e}MS(z,C,fc,zm,gb,x,sh,Df,Ig,Up,he,0,-0,0)}}break}while(!0);hd(f)}function MS(f,x,C,z,ee,he,Qe,St,ln,$n,fr,Dr,Zn,er){if(f.timeoutHandle=-1,Dr=x.subtreeFlags,(Dr&8192||(Dr&16785408)===16785408)&&(jn={stylesheets:null,count:0,unsuspend:Cr},SS(x),Dr=rr(),Dr!==null)){f.cancelPendingCommit=Dr(Lf.bind(null,f,x,he,C,z,ee,Qe,St,ln,fr,1,Zn,er)),$d(f,he,Qe,!$n);return}Lf(f,x,he,C,z,ee,Qe,St,ln)}function CA(f){for(var x=f;;){var C=x.tag;if((C===0||C===11||C===15)&&x.flags&16384&&(C=x.updateQueue,C!==null&&(C=C.stores,C!==null)))for(var z=0;z<C.length;z++){var ee=C[z],he=ee.getSnapshot;ee=ee.value;try{if(!wo(he(),ee))return!1}catch{return!1}}if(C=x.child,x.subtreeFlags&16384&&C!==null)C.return=x,x=C;else{if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function $d(f,x,C,z){x&=~Jy,x&=~Df,f.suspendedLanes|=x,f.pingedLanes&=~x,z&&(f.warmLanes|=x),z=f.expirationTimes;for(var ee=x;0<ee;){var he=31-cn(ee),Qe=1<<he;z[he]=-1,ee&=~Qe}C!==0&&kt(f,C,x)}function i0(){return(Vo&6)===0?(u0(0),!1):!0}function vb(){if(Qa!==null){if(Ko===0)var f=Qa.return;else f=Qa,Jc=fl=null,ad(f),Ic=null,nh=0,f=Qa;for(;f!==null;)Im(f.alternate,f),f=f.return;Qa=null}}function Ng(f,x){var C=f.timeoutHandle;C!==-1&&(f.timeoutHandle=-1,Lu(C)),C=f.cancelPendingCommit,C!==null&&(f.cancelPendingCommit=null,C()),vb(),vs=f,Qa=C=wl(f.current,null),eo=x,Ko=0,oh=null,Up=!1,Fm=Xe(f,x),pb=!1,Ig=sh=Jy=Df=jp=El=0,fc=js=null,gb=!1,(x&8)!==0&&(x|=x&32);var z=f.entangledLanes;if(z!==0)for(f=f.entanglements,z&=x;0<z;){var ee=31-cn(z),he=1<<ee;x|=f[ee],z&=~he}return cd=x,Bs(),C}function yb(f,x){fi=null,se.H=Kh,x===gt||x===bt?(x=Rn(),Ko=3):x===vt?(x=Rn(),Ko=4):Ko=x===rh?8:x!==null&&typeof x=="object"&&typeof x.then=="function"?6:1,oh=x,Qa===null&&(El=1,Yv(f,Ii(x,f.current)))}function e_(){var f=se.H;return se.H=Kh,f===null?Kh:f}function t_(){var f=se.A;return se.A=db,f}function _b(){El=4,Up||(eo&4194048)!==eo&&Jh.current!==null||(Fm=!0),(jp&134217727)===0&&(Df&134217727)===0||vs===null||$d(vs,eo,sh,!1)}function n_(f,x,C){var z=Vo;Vo|=2;var ee=e_(),he=t_();(vs!==f||eo!==x)&&(zm=null,Ng(f,x)),x=!1;var Qe=El;e:do try{if(Ko!==0&&Qa!==null){var St=Qa,ln=oh;switch(Ko){case 8:vb(),Qe=6;break e;case 3:case 2:case 9:case 6:Jh.current===null&&(x=!0);var $n=Ko;if(Ko=0,oh=null,kg(f,St,ln,$n),C&&Fm){Qe=0;break e}break;default:$n=Ko,Ko=0,oh=null,kg(f,St,ln,$n)}}MA(),Qe=El;break}catch(fr){yb(f,fr)}while(!0);return x&&f.shellSuspendCounter++,Jc=fl=null,Vo=z,se.H=ee,se.A=he,Qa===null&&(vs=null,eo=0,Bs()),Qe}function MA(){for(;Qa!==null;)AS(Qa)}function AA(f,x){var C=Vo;Vo|=2;var z=e_(),ee=t_();vs!==f||eo!==x?(zm=null,Bm=wt()+500,Ng(f,x)):Fm=Xe(f,x);e:do try{if(Ko!==0&&Qa!==null){x=Qa;var he=oh;t:switch(Ko){case 1:Ko=0,oh=null,kg(f,x,he,1);break;case 2:case 9:if(Vt(he)){Ko=0,oh=null,RS(x);break}x=function(){Ko!==2&&Ko!==9||vs!==f||(Ko=7),hd(f)},he.then(x,x);break e;case 3:Ko=7;break e;case 4:Ko=5;break e;case 7:Vt(he)?(Ko=0,oh=null,RS(x)):(Ko=0,oh=null,kg(f,x,he,7));break;case 5:var Qe=null;switch(Qa.tag){case 26:Qe=Qa.memoizedState;case 5:case 27:var St=Qa;if(!Qe||tn(Qe)){Ko=0,oh=null;var ln=St.sibling;if(ln!==null)Qa=ln;else{var $n=St.return;$n!==null?(Qa=$n,a0($n)):Qa=null}break t}}Ko=0,oh=null,kg(f,x,he,5);break;case 6:Ko=0,oh=null,kg(f,x,he,6);break;case 8:vb(),El=6;break e;default:throw Error(r(462))}}RA();break}catch(fr){yb(f,fr)}while(!0);return Jc=fl=null,se.H=z,se.A=ee,Vo=C,Qa!==null?0:(vs=null,eo=0,Bs(),El)}function RA(){for(;Qa!==null&&!yt();)AS(Qa)}function AS(f){var x=nl(f.alternate,f,cd);f.memoizedProps=f.pendingProps,x===null?a0(f):Qa=x}function RS(f){var x=f,C=x.alternate;switch(x.tag){case 15:case 0:x=Vy(C,x,x.pendingProps,x.type,void 0,eo);break;case 11:x=Vy(C,x,x.pendingProps,x.type.render,x.ref,eo);break;case 5:ad(x);default:Im(C,x),x=Qa=Mu(x,cd),x=nl(C,x,cd)}f.memoizedProps=f.pendingProps,x===null?a0(f):Qa=x}function kg(f,x,C,z){Jc=fl=null,ad(x),Ic=null,nh=0;var ee=x.return;try{if(Kv(f,ee,x,C,eo)){El=1,Yv(f,Ii(C,f.current)),Qa=null;return}}catch(he){if(ee!==null)throw Qa=ee,he;El=1,Yv(f,Ii(C,f.current)),Qa=null;return}x.flags&32768?(Ra||z===1?f=!0:Fm||(eo&536870912)!==0?f=!1:(Up=f=!0,(z===2||z===9||z===3||z===6)&&(z=Jh.current,z!==null&&z.tag===13&&(z.flags|=16384))),Gm(x,f)):a0(x)}function a0(f){var x=f;do{if((x.flags&32768)!==0){Gm(x,Up);return}f=x.return;var C=yS(x.alternate,x,cd);if(C!==null){Qa=C;return}if(x=x.sibling,x!==null){Qa=x;return}Qa=x=f}while(x!==null);El===0&&(El=5)}function Gm(f,x){do{var C=_S(f.alternate,f);if(C!==null){C.flags&=32767,Qa=C;return}if(C=f.return,C!==null&&(C.flags|=32768,C.subtreeFlags=0,C.deletions=null),!x&&(f=f.sibling,f!==null)){Qa=f;return}Qa=f=C}while(f!==null);El=6,Qa=null}function Lf(f,x,C,z,ee,he,Qe,St,ln){f.cancelPendingCommit=null;do i_();while(Ku!==0);if((Vo&6)!==0)throw Error(r(327));if(x!==null){if(x===f.current)throw Error(r(177));if(he=x.lanes|x.childLanes,he|=ka,Tt(f,C,he,Qe,St,ln),f===vs&&(Qa=vs=null,eo=0),Um=x,Vp=f,Dg=C,Ju=he,n0=ee,mb=z,(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,wb(Ye,function(){return o0(),null})):(f.callbackNode=null,f.callbackPriority=0),z=(x.flags&13878)!==0,(x.subtreeFlags&13878)!==0||z){z=se.T,se.T=null,ee=Se.p,Se.p=2,Qe=Vo,Vo|=4;try{TA(f,x,C)}finally{Vo=Qe,Se.p=ee,se.T=z}}Ku=1,Wd(),xb(),r_()}}function Wd(){if(Ku===1){Ku=0;var f=Vp,x=Um,C=(x.flags&13878)!==0;if((x.subtreeFlags&13878)!==0||C){C=se.T,se.T=null;var z=Se.p;Se.p=2;var ee=Vo;Vo|=4;try{Lm(x,f);var he=v_,Qe=jr(f.containerInfo),St=he.focusedElem,ln=he.selectionRange;if(Qe!==St&&St&&St.ownerDocument&&Yn(St.ownerDocument.documentElement,St)){if(ln!==null&&ai(St)){var $n=ln.start,fr=ln.end;if(fr===void 0&&(fr=$n),"selectionStart"in St)St.selectionStart=$n,St.selectionEnd=Math.min(fr,St.value.length);else{var Dr=St.ownerDocument||document,Zn=Dr&&Dr.defaultView||window;if(Zn.getSelection){var er=Zn.getSelection(),va=St.textContent.length,aa=Math.min(ln.start,va),Ma=ln.end===void 0?aa:Math.min(ln.end,va);!er.extend&&aa>Ma&&(Qe=Ma,Ma=aa,aa=Qe);var In=Mn(St,aa),Sn=Mn(St,Ma);if(In&&Sn&&(er.rangeCount!==1||er.anchorNode!==In.node||er.anchorOffset!==In.offset||er.focusNode!==Sn.node||er.focusOffset!==Sn.offset)){var Bn=Dr.createRange();Bn.setStart(In.node,In.offset),er.removeAllRanges(),aa>Ma?(er.addRange(Bn),er.extend(Sn.node,Sn.offset)):(Bn.setEnd(Sn.node,Sn.offset),er.addRange(Bn))}}}}for(Dr=[],er=St;er=er.parentNode;)er.nodeType===1&&Dr.push({element:er,left:er.scrollLeft,top:er.scrollTop});for(typeof St.focus=="function"&&St.focus(),St=0;St<Dr.length;St++){var Sr=Dr[St];Sr.element.scrollLeft=Sr.left,Sr.element.scrollTop=Sr.top}}pc=!!Hm,v_=Hm=null}finally{Vo=ee,Se.p=z,se.T=C}}f.current=x,Ku=2}}function xb(){if(Ku===2){Ku=0;var f=Vp,x=Um,C=(x.flags&8772)!==0;if((x.subtreeFlags&8772)!==0||C){C=se.T,se.T=null;var z=Se.p;Se.p=2;var ee=Vo;Vo|=4;try{$y(f,x.alternate,x)}finally{Vo=ee,Se.p=z,se.T=C}}Ku=3}}function r_(){if(Ku===4||Ku===3){Ku=0,Ze();var f=Vp,x=Um,C=Dg,z=mb;(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?Ku=5:(Ku=0,Um=Vp=null,PS(f,f.pendingLanes));var ee=f.pendingLanes;if(ee===0&&(Gp=null),Yt(C),x=x.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Bt,x,void 0,(x.current.flags&128)===128)}catch{}if(z!==null){x=se.T,ee=Se.p,Se.p=2,se.T=null;try{for(var he=f.onRecoverableError,Qe=0;Qe<z.length;Qe++){var St=z[Qe];he(St.value,{componentStack:St.stack})}}finally{se.T=x,Se.p=ee}}(Dg&3)!==0&&i_(),hd(f),ee=f.pendingLanes,(C&4194090)!==0&&(ee&42)!==0?f===jm?nf++:(nf=0,jm=f):nf=0,u0(0)}}function PS(f,x){(f.pooledCacheLanes&=x)===0&&(x=f.pooledCache,x!=null&&(f.pooledCache=null,Fl(x)))}function i_(f){return Wd(),xb(),r_(),o0()}function o0(){if(Ku!==5)return!1;var f=Vp,x=Ju;Ju=0;var C=Yt(Dg),z=se.T,ee=Se.p;try{Se.p=32>C?32:C,se.T=null,C=n0,n0=null;var he=Vp,Qe=Dg;if(Ku=0,Um=Vp=null,Dg=0,(Vo&6)!==0)throw Error(r(331));var St=Vo;if(Vo|=4,TS(he.current),wS(he,he.current,Qe,C),Vo=St,u0(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Bt,he)}catch{}return!0}finally{Se.p=ee,se.T=z,PS(f,x)}}function a_(f,x,C){x=Ii(C,x),x=Zv(f.stateNode,x,2),f=Ar(f,x,2),f!==null&&(xt(f,2),hd(f))}function ys(f,x,C){if(f.tag===3)a_(f,f,C);else for(;x!==null;){if(x.tag===3){a_(x,f,C);break}else if(x.tag===1){var z=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(Gp===null||!Gp.has(z))){f=Ii(C,f),C=Kx(2),z=Ar(x,C,2),z!==null&&(jy(C,z,x,f),xt(z,2),hd(z));break}}x=x.return}}function s0(f,x,C){var z=f.pingCache;if(z===null){z=f.pingCache=new CS;var ee=new Set;z.set(x,ee)}else ee=z.get(x),ee===void 0&&(ee=new Set,z.set(x,ee));ee.has(C)||(pb=!0,ee.add(C),f=bb.bind(null,f,x,C),x.then(f,f))}function bb(f,x,C){var z=f.pingCache;z!==null&&z.delete(x),f.pingedLanes|=f.suspendedLanes&C,f.warmLanes&=~C,vs===f&&(eo&C)===C&&(El===4||El===3&&(eo&62914560)===eo&&300>wt()-Qy?(Vo&2)===0&&Ng(f,0):Jy|=C,Ig===eo&&(Ig=0)),hd(f)}function Og(f,x){x===0&&(x=mt()),f=Ks(f,x),f!==null&&(xt(f,x),hd(f))}function IS(f){var x=f.memoizedState,C=0;x!==null&&(C=x.retryLane),Og(f,C)}function DS(f,x){var C=0;switch(f.tag){case 13:var z=f.stateNode,ee=f.memoizedState;ee!==null&&(C=ee.retryLane);break;case 19:z=f.stateNode;break;case 22:z=f.stateNode._retryCache;break;default:throw Error(r(314))}z!==null&&z.delete(x),Og(f,C)}function wb(f,x){return It(f,x)}var l0=null,Xd=null,o_=!1,s_=!1,Sb=!1,Hp=0;function hd(f){f!==Xd&&f.next===null&&(Xd===null?l0=Xd=f:Xd=Xd.next=f),s_=!0,o_||(o_=!0,kS())}function u0(f,x){if(!Sb&&s_){Sb=!0;do for(var C=!1,z=l0;z!==null;){if(f!==0){var ee=z.pendingLanes;if(ee===0)var he=0;else{var Qe=z.suspendedLanes,St=z.pingedLanes;he=(1<<31-cn(42|f)+1)-1,he&=ee&~(Qe&~St),he=he&201326741?he&201326741|1:he?he|2:0}he!==0&&(C=!0,Yd(z,he))}else he=eo,he=ze(z,z===vs?he:0,z.cancelPendingCommit!==null||z.timeoutHandle!==-1),(he&3)===0||Xe(z,he)||(C=!0,Yd(z,he));z=z.next}while(C);Sb=!1}}function PA(){LS()}function LS(){s_=o_=!1;var f=0;Hp!==0&&(IA()&&(f=Hp),Hp=0);for(var x=wt(),C=null,z=l0;z!==null;){var ee=z.next,he=NS(z,x);he===0?(z.next=null,C===null?l0=ee:C.next=ee,ee===null&&(Xd=C)):(C=z,(f!==0||(he&3)!==0)&&(s_=!0)),z=ee}u0(f)}function NS(f,x){for(var C=f.suspendedLanes,z=f.pingedLanes,ee=f.expirationTimes,he=f.pendingLanes&-62914561;0<he;){var Qe=31-cn(he),St=1<<Qe,ln=ee[Qe];ln===-1?((St&C)===0||(St&z)!==0)&&(ee[Qe]=Fe(St,x)):ln<=x&&(f.expiredLanes|=St),he&=~St}if(x=vs,C=eo,C=ze(f,f===x?C:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),z=f.callbackNode,C===0||f===x&&(Ko===2||Ko===9)||f.cancelPendingCommit!==null)return z!==null&&z!==null&&Ve(z),f.callbackNode=null,f.callbackPriority=0;if((C&3)===0||Xe(f,C)){if(x=C&-C,x===f.callbackPriority)return x;switch(z!==null&&Ve(z),Yt(C)){case 2:case 8:C=qt;break;case 32:C=Ye;break;case 268435456:C=Pt;break;default:C=Ye}return z=l_.bind(null,f),C=It(C,z),f.callbackPriority=x,f.callbackNode=C,x}return z!==null&&z!==null&&Ve(z),f.callbackPriority=2,f.callbackNode=null,2}function l_(f,x){if(Ku!==0&&Ku!==5)return f.callbackNode=null,f.callbackPriority=0,null;var C=f.callbackNode;if(i_()&&f.callbackNode!==C)return null;var z=eo;return z=ze(f,f===vs?z:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),z===0?null:(r0(f,z,x),NS(f,wt()),f.callbackNode!=null&&f.callbackNode===C?l_.bind(null,f):null)}function Yd(f,x){if(i_())return null;r0(f,x,!0)}function kS(){Ib(function(){(Vo&6)!==0?It(ht,PA):LS()})}function u_(){return Hp===0&&(Hp=He()),Hp}function Eb(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:Ir(""+f)}function Tb(f,x){var C=x.ownerDocument.createElement("input");return C.name=x.name,C.value=x.value,f.id&&C.setAttribute("form",f.id),x.parentNode.insertBefore(C,x),f=new FormData(f),C.parentNode.removeChild(C),f}function OS(f,x,C,z,ee){if(x==="submit"&&C&&C.stateNode===ee){var he=Eb((ee[je]||null).action),Qe=z.submitter;Qe&&(x=(x=Qe[je]||null)?Eb(x.formAction):Qe.getAttribute("formAction"),x!==null&&(he=x,Qe=null));var St=new xl("action","action",null,z,ee);f.push({event:St,listeners:[{instance:null,listener:function(){if(z.defaultPrevented){if(Hp!==0){var ln=Qe?Tb(ee,Qe):new FormData(ee);Bl(C,{pending:!0,data:ln,method:ee.method,action:he},null,ln)}}else typeof he=="function"&&(St.preventDefault(),ln=Qe?Tb(ee,Qe):new FormData(ee),Bl(C,{pending:!0,data:ln,method:ee.method,action:he},he,ln))},currentTarget:ee}]})}}for(var c0=0;c0<ci.length;c0++){var c_=ci[c0],h0=c_.toLowerCase(),FS=c_[0].toUpperCase()+c_.slice(1);Fi(h0,"on"+FS)}Fi(Nt,"onAnimationEnd"),Fi(wn,"onAnimationIteration"),Fi(Nn,"onAnimationStart"),Fi("dblclick","onDoubleClick"),Fi("focusin","onFocus"),Fi("focusout","onBlur"),Fi(dr,"onTransitionRun"),Fi($r,"onTransitionStart"),Fi(mi,"onTransitionCancel"),Fi(xi,"onTransitionEnd"),lt("onMouseEnter",["mouseout","mouseover"]),lt("onMouseLeave",["mouseout","mouseover"]),lt("onPointerEnter",["pointerout","pointerover"]),lt("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fg));function lh(f,x){x=(x&4)!==0;for(var C=0;C<f.length;C++){var z=f[C],ee=z.event;z=z.listeners;e:{var he=void 0;if(x)for(var Qe=z.length-1;0<=Qe;Qe--){var St=z[Qe],ln=St.instance,$n=St.currentTarget;if(St=St.listener,ln!==he&&ee.isPropagationStopped())break e;he=St,ee.currentTarget=$n;try{he(ee)}catch(fr){Uy(fr)}ee.currentTarget=null,he=ln}else for(Qe=0;Qe<z.length;Qe++){if(St=z[Qe],ln=St.instance,$n=St.currentTarget,St=St.listener,ln!==he&&ee.isPropagationStopped())break e;he=St,ee.currentTarget=$n;try{he(ee)}catch(fr){Uy(fr)}ee.currentTarget=null,he=ln}}}}function Da(f,x){var C=x[Qt];C===void 0&&(C=x[Qt]=new Set);var z=f+"__bubble";C.has(z)||(Cb(x,f,2,!1),C.add(z))}function h_(f,x,C){var z=0;x&&(z|=4),Cb(C,f,z,x)}var f0="_reactListening"+Math.random().toString(36).slice(2);function f_(f){if(!f[f0]){f[f0]=!0,yi.forEach(function(C){C!=="selectionchange"&&(BS.has(C)||h_(C,!1,f),h_(C,!0,f))});var x=f.nodeType===9?f:f.ownerDocument;x===null||x[f0]||(x[f0]=!0,h_("selectionchange",!1,x))}}function Cb(f,x,C,z){switch(ec(x)){case 2:var ee=Lc;break;case 8:ee=pu;break;default:ee=ls}C=ee.bind(null,x,C,f),ee=void 0,!ji||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(ee=!0),z?ee!==void 0?f.addEventListener(x,C,{capture:!0,passive:ee}):f.addEventListener(x,C,!0):ee!==void 0?f.addEventListener(x,C,{passive:ee}):f.addEventListener(x,C,!1)}function d_(f,x,C,z,ee){var he=z;if((x&1)===0&&(x&2)===0&&z!==null)e:for(;;){if(z===null)return;var Qe=z.tag;if(Qe===3||Qe===4){var St=z.stateNode.containerInfo;if(St===ee)break;if(Qe===4)for(Qe=z.return;Qe!==null;){var ln=Qe.tag;if((ln===3||ln===4)&&Qe.stateNode.containerInfo===ee)return;Qe=Qe.return}for(;St!==null;){if(Qe=vi(St),Qe===null)return;if(ln=Qe.tag,ln===5||ln===6||ln===26||ln===27){z=he=Qe;continue e}St=St.parentNode}}z=z.return}ii(function(){var $n=he,fr=Wr(C),Dr=[];e:{var Zn=si.get(f);if(Zn!==void 0){var er=xl,va=f;switch(f){case"keypress":if(xo(C)===0)break e;case"keydown":case"keyup":er=Lo;break;case"focusin":va="focus",er=ns;break;case"focusout":va="blur",er=ns;break;case"beforeblur":case"afterblur":er=ns;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":er=bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":er=Do;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":er=Uu;break;case Nt:case wn:case Nn:er=bl;break;case xi:er=nt;break;case"scroll":case"scrollend":er=wc;break;case"wheel":er=un;break;case"copy":case"cut":case"paste":er=Dl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":er=au;break;case"toggle":case"beforetoggle":er=Kn}var aa=(x&4)!==0,Ma=!aa&&(f==="scroll"||f==="scrollend"),In=aa?Zn!==null?Zn+"Capture":null:Zn;aa=[];for(var Sn=$n,Bn;Sn!==null;){var Sr=Sn;if(Bn=Sr.stateNode,Sr=Sr.tag,Sr!==5&&Sr!==26&&Sr!==27||Bn===null||In===null||(Sr=Wi(Sn,In),Sr!=null&&aa.push(Vm(Sn,Sr,Bn))),Ma)break;Sn=Sn.return}0<aa.length&&(Zn=new er(Zn,va,null,C,fr),Dr.push({event:Zn,listeners:aa}))}}if((x&7)===0){e:{if(Zn=f==="mouseover"||f==="pointerover",er=f==="mouseout"||f==="pointerout",Zn&&C!==Nr&&(va=C.relatedTarget||C.fromElement)&&(vi(va)||va[_t]))break e;if((er||Zn)&&(Zn=fr.window===fr?fr:(Zn=fr.ownerDocument)?Zn.defaultView||Zn.parentWindow:window,er?(va=C.relatedTarget||C.toElement,er=$n,va=va?vi(va):null,va!==null&&(Ma=o(va),aa=va.tag,va!==Ma||aa!==5&&aa!==27&&aa!==6)&&(va=null)):(er=null,va=$n),er!==va)){if(aa=bo,Sr="onMouseLeave",In="onMouseEnter",Sn="mouse",(f==="pointerout"||f==="pointerover")&&(aa=au,Sr="onPointerLeave",In="onPointerEnter",Sn="pointer"),Ma=er==null?Zn:zn(er),Bn=va==null?Zn:zn(va),Zn=new aa(Sr,Sn+"leave",er,C,fr),Zn.target=Ma,Zn.relatedTarget=Bn,Sr=null,vi(fr)===$n&&(aa=new aa(In,Sn+"enter",va,C,fr),aa.target=Bn,aa.relatedTarget=Ma,Sr=aa),Ma=Sr,er&&va)t:{for(aa=er,In=va,Sn=0,Bn=aa;Bn;Bn=Bg(Bn))Sn++;for(Bn=0,Sr=In;Sr;Sr=Bg(Sr))Bn++;for(;0<Sn-Bn;)aa=Bg(aa),Sn--;for(;0<Bn-Sn;)In=Bg(In),Bn--;for(;Sn--;){if(aa===In||In!==null&&aa===In.alternate)break t;aa=Bg(aa),In=Bg(In)}aa=null}else aa=null;er!==null&&Zd(Dr,Zn,er,aa,!1),va!==null&&Ma!==null&&Zd(Dr,Ma,va,aa,!0)}}e:{if(Zn=$n?zn($n):window,er=Zn.nodeName&&Zn.nodeName.toLowerCase(),er==="select"||er==="input"&&Zn.type==="file")var wi=Nl;else if(Ys(Zn))if(ju)wi=pa;else{wi=Cc;var lo=rs}else er=Zn.nodeName,!er||er.toLowerCase()!=="input"||Zn.type!=="checkbox"&&Zn.type!=="radio"?$n&&cr($n.elementType)&&(wi=Nl):wi=sc;if(wi&&(wi=wi(f,$n))){Wc(Dr,wi,C,fr);break e}lo&&lo(f,Zn,$n),f==="focusout"&&$n&&Zn.type==="number"&&$n.memoizedProps.value!=null&&to(Zn,"number",Zn.value)}switch(lo=$n?zn($n):window,f){case"focusin":(Ys(lo)||lo.contentEditable==="true")&&(Mi=lo,I=$n,y=null);break;case"focusout":y=I=Mi=null;break;case"mousedown":b=!0;break;case"contextmenu":case"mouseup":case"dragend":b=!1,R(Dr,C,fr);break;case"selectionchange":if(ia)break;case"keydown":case"keyup":R(Dr,C,fr)}var Xi;if(oi)e:{switch(f){case"compositionstart":var ya="onCompositionStart";break e;case"compositionend":ya="onCompositionEnd";break e;case"compositionupdate":ya="onCompositionUpdate";break e}ya=void 0}else zo?ro(f,C)&&(ya="onCompositionEnd"):f==="keydown"&&C.keyCode===229&&(ya="onCompositionStart");ya&&(Oi&&C.locale!=="ko"&&(zo||ya!=="onCompositionStart"?ya==="onCompositionEnd"&&zo&&(Xi=ha()):(ri=fr,Jr="value"in ri?ri.value:ri.textContent,zo=!0)),lo=p_($n,ya),0<lo.length&&(ya=new Ec(ya,f,null,C,fr),Dr.push({event:ya,listeners:lo}),Xi?ya.data=Xi:(Xi=Ja(C),Xi!==null&&(ya.data=Xi)))),(Xi=Zi?co(f,C):Ts(f,C))&&(ya=p_($n,"onBeforeInput"),0<ya.length&&(lo=new Ec("onBeforeInput","beforeinput",null,C,fr),Dr.push({event:lo,listeners:ya}),lo.data=Xi)),OS(Dr,f,$n,C,fr)}lh(Dr,x)})}function Vm(f,x,C){return{instance:f,listener:x,currentTarget:C}}function p_(f,x){for(var C=x+"Capture",z=[];f!==null;){var ee=f,he=ee.stateNode;if(ee=ee.tag,ee!==5&&ee!==26&&ee!==27||he===null||(ee=Wi(f,C),ee!=null&&z.unshift(Vm(f,ee,he)),ee=Wi(f,x),ee!=null&&z.push(Vm(f,ee,he))),f.tag===3)return z;f=f.return}return[]}function Bg(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function Zd(f,x,C,z,ee){for(var he=x._reactName,Qe=[];C!==null&&C!==z;){var St=C,ln=St.alternate,$n=St.stateNode;if(St=St.tag,ln!==null&&ln===z)break;St!==5&&St!==26&&St!==27||$n===null||(ln=$n,ee?($n=Wi(C,he),$n!=null&&Qe.unshift(Vm(C,$n,ln))):ee||($n=Wi(C,he),$n!=null&&Qe.push(Vm(C,$n,ln)))),C=C.return}Qe.length!==0&&f.push({event:x,listeners:Qe})}var zS=/\r\n?/g,US=/\u0000|\uFFFD/g;function Mb(f){return(typeof f=="string"?f:""+f).replace(zS,`
`).replace(US,"")}function Ab(f,x){return x=Mb(x),Mb(f)===x}function g_(){}function ss(f,x,C,z,ee,he){switch(C){case"children":typeof z=="string"?x==="body"||x==="textarea"&&z===""||Gt(f,z):(typeof z=="number"||typeof z=="bigint")&&x!=="body"&&Gt(f,""+z);break;case"className":Lr(f,"class",z);break;case"tabIndex":Lr(f,"tabindex",z);break;case"dir":case"role":case"viewBox":case"width":case"height":Lr(f,C,z);break;case"style":xn(f,z,he);break;case"data":if(x!=="object"){Lr(f,"data",z);break}case"src":case"href":if(z===""&&(x!=="a"||C!=="href")){f.removeAttribute(C);break}if(z==null||typeof z=="function"||typeof z=="symbol"||typeof z=="boolean"){f.removeAttribute(C);break}z=Ir(""+z),f.setAttribute(C,z);break;case"action":case"formAction":if(typeof z=="function"){f.setAttribute(C,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof he=="function"&&(C==="formAction"?(x!=="input"&&ss(f,x,"name",ee.name,ee,null),ss(f,x,"formEncType",ee.formEncType,ee,null),ss(f,x,"formMethod",ee.formMethod,ee,null),ss(f,x,"formTarget",ee.formTarget,ee,null)):(ss(f,x,"encType",ee.encType,ee,null),ss(f,x,"method",ee.method,ee,null),ss(f,x,"target",ee.target,ee,null)));if(z==null||typeof z=="symbol"||typeof z=="boolean"){f.removeAttribute(C);break}z=Ir(""+z),f.setAttribute(C,z);break;case"onClick":z!=null&&(f.onclick=g_);break;case"onScroll":z!=null&&Da("scroll",f);break;case"onScrollEnd":z!=null&&Da("scrollend",f);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(r(61));if(C=z.__html,C!=null){if(ee.children!=null)throw Error(r(60));f.innerHTML=C}}break;case"multiple":f.multiple=z&&typeof z!="function"&&typeof z!="symbol";break;case"muted":f.muted=z&&typeof z!="function"&&typeof z!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(z==null||typeof z=="function"||typeof z=="boolean"||typeof z=="symbol"){f.removeAttribute("xlink:href");break}C=Ir(""+z),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":z!=null&&typeof z!="function"&&typeof z!="symbol"?f.setAttribute(C,""+z):f.removeAttribute(C);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":z&&typeof z!="function"&&typeof z!="symbol"?f.setAttribute(C,""):f.removeAttribute(C);break;case"capture":case"download":z===!0?f.setAttribute(C,""):z!==!1&&z!=null&&typeof z!="function"&&typeof z!="symbol"?f.setAttribute(C,z):f.removeAttribute(C);break;case"cols":case"rows":case"size":case"span":z!=null&&typeof z!="function"&&typeof z!="symbol"&&!isNaN(z)&&1<=z?f.setAttribute(C,z):f.removeAttribute(C);break;case"rowSpan":case"start":z==null||typeof z=="function"||typeof z=="symbol"||isNaN(z)?f.removeAttribute(C):f.setAttribute(C,z);break;case"popover":Da("beforetoggle",f),Da("toggle",f),wr(f,"popover",z);break;case"xlinkActuate":Mr(f,"http://www.w3.org/1999/xlink","xlink:actuate",z);break;case"xlinkArcrole":Mr(f,"http://www.w3.org/1999/xlink","xlink:arcrole",z);break;case"xlinkRole":Mr(f,"http://www.w3.org/1999/xlink","xlink:role",z);break;case"xlinkShow":Mr(f,"http://www.w3.org/1999/xlink","xlink:show",z);break;case"xlinkTitle":Mr(f,"http://www.w3.org/1999/xlink","xlink:title",z);break;case"xlinkType":Mr(f,"http://www.w3.org/1999/xlink","xlink:type",z);break;case"xmlBase":Mr(f,"http://www.w3.org/XML/1998/namespace","xml:base",z);break;case"xmlLang":Mr(f,"http://www.w3.org/XML/1998/namespace","xml:lang",z);break;case"xmlSpace":Mr(f,"http://www.w3.org/XML/1998/namespace","xml:space",z);break;case"is":wr(f,"is",z);break;case"innerText":case"textContent":break;default:(!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(C=ur.get(C)||C,wr(f,C,z))}}function m_(f,x,C,z,ee,he){switch(C){case"style":xn(f,z,he);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(r(61));if(C=z.__html,C!=null){if(ee.children!=null)throw Error(r(60));f.innerHTML=C}}break;case"children":typeof z=="string"?Gt(f,z):(typeof z=="number"||typeof z=="bigint")&&Gt(f,""+z);break;case"onScroll":z!=null&&Da("scroll",f);break;case"onScrollEnd":z!=null&&Da("scrollend",f);break;case"onClick":z!=null&&(f.onclick=g_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_i.hasOwnProperty(C))e:{if(C[0]==="o"&&C[1]==="n"&&(ee=C.endsWith("Capture"),x=C.slice(2,ee?C.length-7:void 0),he=f[je]||null,he=he!=null?he[C]:null,typeof he=="function"&&f.removeEventListener(x,he,ee),typeof z=="function")){typeof he!="function"&&he!==null&&(C in f?f[C]=null:f.hasAttribute(C)&&f.removeAttribute(C)),f.addEventListener(x,z,ee);break e}C in f?f[C]=z:z===!0?f.setAttribute(C,""):wr(f,C,z)}}}function Ul(f,x,C){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Da("error",f),Da("load",f);var z=!1,ee=!1,he;for(he in C)if(C.hasOwnProperty(he)){var Qe=C[he];if(Qe!=null)switch(he){case"src":z=!0;break;case"srcSet":ee=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,x));default:ss(f,x,he,Qe,C,null)}}ee&&ss(f,x,"srcSet",C.srcSet,C,null),z&&ss(f,x,"src",C.src,C,null);return;case"input":Da("invalid",f);var St=he=Qe=ee=null,ln=null,$n=null;for(z in C)if(C.hasOwnProperty(z)){var fr=C[z];if(fr!=null)switch(z){case"name":ee=fr;break;case"type":Qe=fr;break;case"checked":ln=fr;break;case"defaultChecked":$n=fr;break;case"value":he=fr;break;case"defaultValue":St=fr;break;case"children":case"dangerouslySetInnerHTML":if(fr!=null)throw Error(r(137,x));break;default:ss(f,x,z,fr,C,null)}}Ta(f,he,St,ln,$n,Qe,ee,!1),Ka(f);return;case"select":Da("invalid",f),z=Qe=he=null;for(ee in C)if(C.hasOwnProperty(ee)&&(St=C[ee],St!=null))switch(ee){case"value":he=St;break;case"defaultValue":Qe=St;break;case"multiple":z=St;default:ss(f,x,ee,St,C,null)}x=he,C=Qe,f.multiple=!!z,x!=null?ne(f,!!z,x,!1):C!=null&&ne(f,!!z,C,!0);return;case"textarea":Da("invalid",f),he=ee=z=null;for(Qe in C)if(C.hasOwnProperty(Qe)&&(St=C[Qe],St!=null))switch(Qe){case"value":z=St;break;case"defaultValue":ee=St;break;case"children":he=St;break;case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(91));break;default:ss(f,x,Qe,St,C,null)}et(f,z,ee,he),Ka(f);return;case"option":for(ln in C)if(C.hasOwnProperty(ln)&&(z=C[ln],z!=null))switch(ln){case"selected":f.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:ss(f,x,ln,z,C,null)}return;case"dialog":Da("beforetoggle",f),Da("toggle",f),Da("cancel",f),Da("close",f);break;case"iframe":case"object":Da("load",f);break;case"video":case"audio":for(z=0;z<Fg.length;z++)Da(Fg[z],f);break;case"image":Da("error",f),Da("load",f);break;case"details":Da("toggle",f);break;case"embed":case"source":case"link":Da("error",f),Da("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($n in C)if(C.hasOwnProperty($n)&&(z=C[$n],z!=null))switch($n){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,x));default:ss(f,x,$n,z,C,null)}return;default:if(cr(x)){for(fr in C)C.hasOwnProperty(fr)&&(z=C[fr],z!==void 0&&m_(f,x,fr,z,C,void 0));return}}for(St in C)C.hasOwnProperty(St)&&(z=C[St],z!=null&&ss(f,x,St,z,C,null))}function jS(f,x,C,z){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var ee=null,he=null,Qe=null,St=null,ln=null,$n=null,fr=null;for(er in C){var Dr=C[er];if(C.hasOwnProperty(er)&&Dr!=null)switch(er){case"checked":break;case"value":break;case"defaultValue":ln=Dr;default:z.hasOwnProperty(er)||ss(f,x,er,null,z,Dr)}}for(var Zn in z){var er=z[Zn];if(Dr=C[Zn],z.hasOwnProperty(Zn)&&(er!=null||Dr!=null))switch(Zn){case"type":he=er;break;case"name":ee=er;break;case"checked":$n=er;break;case"defaultChecked":fr=er;break;case"value":Qe=er;break;case"defaultValue":St=er;break;case"children":case"dangerouslySetInnerHTML":if(er!=null)throw Error(r(137,x));break;default:er!==Dr&&ss(f,x,Zn,er,z,Dr)}}Pi(f,Qe,St,ln,$n,fr,he,ee);return;case"select":er=Qe=St=Zn=null;for(he in C)if(ln=C[he],C.hasOwnProperty(he)&&ln!=null)switch(he){case"value":break;case"multiple":er=ln;default:z.hasOwnProperty(he)||ss(f,x,he,null,z,ln)}for(ee in z)if(he=z[ee],ln=C[ee],z.hasOwnProperty(ee)&&(he!=null||ln!=null))switch(ee){case"value":Zn=he;break;case"defaultValue":St=he;break;case"multiple":Qe=he;default:he!==ln&&ss(f,x,ee,he,z,ln)}x=St,C=Qe,z=er,Zn!=null?ne(f,!!C,Zn,!1):!!z!=!!C&&(x!=null?ne(f,!!C,x,!0):ne(f,!!C,C?[]:"",!1));return;case"textarea":er=Zn=null;for(St in C)if(ee=C[St],C.hasOwnProperty(St)&&ee!=null&&!z.hasOwnProperty(St))switch(St){case"value":break;case"children":break;default:ss(f,x,St,null,z,ee)}for(Qe in z)if(ee=z[Qe],he=C[Qe],z.hasOwnProperty(Qe)&&(ee!=null||he!=null))switch(Qe){case"value":Zn=ee;break;case"defaultValue":er=ee;break;case"children":break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(91));break;default:ee!==he&&ss(f,x,Qe,ee,z,he)}we(f,Zn,er);return;case"option":for(var va in C)if(Zn=C[va],C.hasOwnProperty(va)&&Zn!=null&&!z.hasOwnProperty(va))switch(va){case"selected":f.selected=!1;break;default:ss(f,x,va,null,z,Zn)}for(ln in z)if(Zn=z[ln],er=C[ln],z.hasOwnProperty(ln)&&Zn!==er&&(Zn!=null||er!=null))switch(ln){case"selected":f.selected=Zn&&typeof Zn!="function"&&typeof Zn!="symbol";break;default:ss(f,x,ln,Zn,z,er)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var aa in C)Zn=C[aa],C.hasOwnProperty(aa)&&Zn!=null&&!z.hasOwnProperty(aa)&&ss(f,x,aa,null,z,Zn);for($n in z)if(Zn=z[$n],er=C[$n],z.hasOwnProperty($n)&&Zn!==er&&(Zn!=null||er!=null))switch($n){case"children":case"dangerouslySetInnerHTML":if(Zn!=null)throw Error(r(137,x));break;default:ss(f,x,$n,Zn,z,er)}return;default:if(cr(x)){for(var Ma in C)Zn=C[Ma],C.hasOwnProperty(Ma)&&Zn!==void 0&&!z.hasOwnProperty(Ma)&&m_(f,x,Ma,void 0,z,Zn);for(fr in z)Zn=z[fr],er=C[fr],!z.hasOwnProperty(fr)||Zn===er||Zn===void 0&&er===void 0||m_(f,x,fr,Zn,z,er);return}}for(var In in C)Zn=C[In],C.hasOwnProperty(In)&&Zn!=null&&!z.hasOwnProperty(In)&&ss(f,x,In,null,z,Zn);for(Dr in z)Zn=z[Dr],er=C[Dr],!z.hasOwnProperty(Dr)||Zn===er||Zn==null&&er==null||ss(f,x,Dr,Zn,z,er)}var Hm=null,v_=null;function zg(f){return f.nodeType===9?f:f.ownerDocument}function d0(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p0(f,x){if(f===0)switch(x){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&x==="foreignObject"?0:f}function Rb(f,x){return f==="textarea"||f==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.children=="bigint"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var Pb=null;function IA(){var f=window.event;return f&&f.type==="popstate"?f===Pb?!1:(Pb=f,!0):(Pb=null,!1)}var Ug=typeof setTimeout=="function"?setTimeout:void 0,Lu=typeof clearTimeout=="function"?clearTimeout:void 0,Kd=typeof Promise=="function"?Promise:void 0,Ib=typeof queueMicrotask=="function"?queueMicrotask:typeof Kd<"u"?function(f){return Kd.resolve(null).then(f).catch(GS)}:Ug;function GS(f){setTimeout(function(){throw f})}function Jd(f){return f==="head"}function y_(f,x){var C=x,z=0,ee=0;do{var he=C.nextSibling;if(f.removeChild(C),he&&he.nodeType===8)if(C=he.data,C==="/$"){if(0<z&&8>z){C=z;var Qe=f.ownerDocument;if(C&1&&jg(Qe.documentElement),C&2&&jg(Qe.body),C&4)for(C=Qe.head,jg(C),Qe=C.firstChild;Qe;){var St=Qe.nextSibling,ln=Qe.nodeName;Qe[kr]||ln==="SCRIPT"||ln==="STYLE"||ln==="LINK"&&Qe.rel.toLowerCase()==="stylesheet"||C.removeChild(Qe),Qe=St}}if(ee===0){f.removeChild(he),Wm(x);return}ee--}else C==="$"||C==="$?"||C==="$!"?ee++:z=C.charCodeAt(0)-48;else z=0;C=he}while(C);Wm(x)}function Db(f){var x=f.firstChild;for(x&&x.nodeType===10&&(x=x.nextSibling);x;){var C=x;switch(x=x.nextSibling,C.nodeName){case"HTML":case"HEAD":case"BODY":Db(C),Qr(C);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(C.rel.toLowerCase()==="stylesheet")continue}f.removeChild(C)}}function VS(f,x,C,z){for(;f.nodeType===1;){var ee=C;if(f.nodeName.toLowerCase()!==x.toLowerCase()){if(!z&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(z){if(!f[kr])switch(x){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(he=f.getAttribute("rel"),he==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(he!==ee.rel||f.getAttribute("href")!==(ee.href==null||ee.href===""?null:ee.href)||f.getAttribute("crossorigin")!==(ee.crossOrigin==null?null:ee.crossOrigin)||f.getAttribute("title")!==(ee.title==null?null:ee.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(he=f.getAttribute("src"),(he!==(ee.src==null?null:ee.src)||f.getAttribute("type")!==(ee.type==null?null:ee.type)||f.getAttribute("crossorigin")!==(ee.crossOrigin==null?null:ee.crossOrigin))&&he&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(x==="input"&&f.type==="hidden"){var he=ee.name==null?null:""+ee.name;if(ee.type==="hidden"&&f.getAttribute("name")===he)return f}else return f;if(f=Nh(f.nextSibling),f===null)break}return null}function HS(f,x,C){if(x==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!C||(f=Nh(f.nextSibling),f===null))return null;return f}function Lb(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function qS(f,x){var C=f.ownerDocument;if(f.data!=="$?"||C.readyState==="complete")x();else{var z=function(){x(),C.removeEventListener("DOMContentLoaded",z)};C.addEventListener("DOMContentLoaded",z),f._reactRetry=z}}function Nh(f){for(;f!=null;f=f.nextSibling){var x=f.nodeType;if(x===1||x===3)break;if(x===8){if(x=f.data,x==="$"||x==="$!"||x==="$?"||x==="F!"||x==="F")break;if(x==="/$")return null}}return f}var g0=null;function Nb(f){f=f.previousSibling;for(var x=0;f;){if(f.nodeType===8){var C=f.data;if(C==="$"||C==="$!"||C==="$?"){if(x===0)return f;x--}else C==="/$"&&x++}f=f.previousSibling}return null}function qm(f,x,C){switch(x=zg(C),f){case"html":if(f=x.documentElement,!f)throw Error(r(452));return f;case"head":if(f=x.head,!f)throw Error(r(453));return f;case"body":if(f=x.body,!f)throw Error(r(454));return f;default:throw Error(r(451))}}function jg(f){for(var x=f.attributes;x.length;)f.removeAttributeNode(x[0]);Qr(f)}var kh=new Map,__=new Set;function Gg(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Oh=Se.d;Se.d={f:kb,r:Ob,D:g,C:u,L:m,m:S,X:j,S:L,M:V};function kb(){var f=Oh.f(),x=i0();return f||x}function Ob(f){var x=zr(f);x!==null&&x.tag===5&&x.type==="form"?Iu(x):Oh.r(f)}var qp=typeof document>"u"?null:document;function $S(f,x,C){var z=qp;if(z&&typeof x=="string"&&x){var ee=Ui(x);ee='link[rel="'+f+'"][href="'+ee+'"]',typeof C=="string"&&(ee+='[crossorigin="'+C+'"]'),__.has(ee)||(__.add(ee),f={rel:f,crossOrigin:C,href:x},z.querySelector(ee)===null&&(x=z.createElement("link"),Ul(x,"link",f),mr(x),z.head.appendChild(x)))}}function g(f){Oh.D(f),$S("dns-prefetch",f,null)}function u(f,x){Oh.C(f,x),$S("preconnect",f,x)}function m(f,x,C){Oh.L(f,x,C);var z=qp;if(z&&f&&x){var ee='link[rel="preload"][as="'+Ui(x)+'"]';x==="image"&&C&&C.imageSrcSet?(ee+='[imagesrcset="'+Ui(C.imageSrcSet)+'"]',typeof C.imageSizes=="string"&&(ee+='[imagesizes="'+Ui(C.imageSizes)+'"]')):ee+='[href="'+Ui(f)+'"]';var he=ee;switch(x){case"style":he=oe(f);break;case"script":he=$e(f)}kh.has(he)||(f=d({rel:"preload",href:x==="image"&&C&&C.imageSrcSet?void 0:f,as:x},C),kh.set(he,f),z.querySelector(ee)!==null||x==="style"&&z.querySelector(de(he))||x==="script"&&z.querySelector(Je(he))||(x=z.createElement("link"),Ul(x,"link",f),mr(x),z.head.appendChild(x)))}}function S(f,x){Oh.m(f,x);var C=qp;if(C&&f){var z=x&&typeof x.as=="string"?x.as:"script",ee='link[rel="modulepreload"][as="'+Ui(z)+'"][href="'+Ui(f)+'"]',he=ee;switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":he=$e(f)}if(!kh.has(he)&&(f=d({rel:"modulepreload",href:f},x),kh.set(he,f),C.querySelector(ee)===null)){switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(C.querySelector(Je(he)))return}z=C.createElement("link"),Ul(z,"link",f),mr(z),C.head.appendChild(z)}}}function L(f,x,C){Oh.S(f,x,C);var z=qp;if(z&&f){var ee=En(z).hoistableStyles,he=oe(f);x=x||"default";var Qe=ee.get(he);if(!Qe){var St={loading:0,preload:null};if(Qe=z.querySelector(de(he)))St.loading=5;else{f=d({rel:"stylesheet",href:f,"data-precedence":x},C),(C=kh.get(he))&&Rt(f,C);var ln=Qe=z.createElement("link");mr(ln),Ul(ln,"link",f),ln._p=new Promise(function($n,fr){ln.onload=$n,ln.onerror=fr}),ln.addEventListener("load",function(){St.loading|=1}),ln.addEventListener("error",function(){St.loading|=2}),St.loading|=4,ct(Qe,x,z)}Qe={type:"stylesheet",instance:Qe,count:1,state:St},ee.set(he,Qe)}}}function j(f,x){Oh.X(f,x);var C=qp;if(C&&f){var z=En(C).hoistableScripts,ee=$e(f),he=z.get(ee);he||(he=C.querySelector(Je(ee)),he||(f=d({src:f,async:!0},x),(x=kh.get(ee))&&Ht(f,x),he=C.createElement("script"),mr(he),Ul(he,"link",f),C.head.appendChild(he)),he={type:"script",instance:he,count:1,state:null},z.set(ee,he))}}function V(f,x){Oh.M(f,x);var C=qp;if(C&&f){var z=En(C).hoistableScripts,ee=$e(f),he=z.get(ee);he||(he=C.querySelector(Je(ee)),he||(f=d({src:f,async:!0,type:"module"},x),(x=kh.get(ee))&&Ht(f,x),he=C.createElement("script"),mr(he),Ul(he,"link",f),C.head.appendChild(he)),he={type:"script",instance:he,count:1,state:null},z.set(ee,he))}}function J(f,x,C,z){var ee=(ee=De.current)?Gg(ee):null;if(!ee)throw Error(r(446));switch(f){case"meta":case"title":return null;case"style":return typeof C.precedence=="string"&&typeof C.href=="string"?(x=oe(C.href),C=En(ee).hoistableStyles,z=C.get(x),z||(z={type:"style",instance:null,count:0,state:null},C.set(x,z)),z):{type:"void",instance:null,count:0,state:null};case"link":if(C.rel==="stylesheet"&&typeof C.href=="string"&&typeof C.precedence=="string"){f=oe(C.href);var he=En(ee).hoistableStyles,Qe=he.get(f);if(Qe||(ee=ee.ownerDocument||ee,Qe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},he.set(f,Qe),(he=ee.querySelector(de(f)))&&!he._p&&(Qe.instance=he,Qe.state.loading=5),kh.has(f)||(C={rel:"preload",as:"style",href:C.href,crossOrigin:C.crossOrigin,integrity:C.integrity,media:C.media,hrefLang:C.hrefLang,referrerPolicy:C.referrerPolicy},kh.set(f,C),he||Le(ee,f,C,Qe.state))),x&&z===null)throw Error(r(528,""));return Qe}if(x&&z!==null)throw Error(r(529,""));return null;case"script":return x=C.async,C=C.src,typeof C=="string"&&x&&typeof x!="function"&&typeof x!="symbol"?(x=$e(C),C=En(ee).hoistableScripts,z=C.get(x),z||(z={type:"script",instance:null,count:0,state:null},C.set(x,z)),z):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,f))}}function oe(f){return'href="'+Ui(f)+'"'}function de(f){return'link[rel="stylesheet"]['+f+"]"}function be(f){return d({},f,{"data-precedence":f.precedence,precedence:null})}function Le(f,x,C,z){f.querySelector('link[rel="preload"][as="style"]['+x+"]")?z.loading=1:(x=f.createElement("link"),z.preload=x,x.addEventListener("load",function(){return z.loading|=1}),x.addEventListener("error",function(){return z.loading|=2}),Ul(x,"link",C),mr(x),f.head.appendChild(x))}function $e(f){return'[src="'+Ui(f)+'"]'}function Je(f){return"script[async]"+f}function tt(f,x,C){if(x.count++,x.instance===null)switch(x.type){case"style":var z=f.querySelector('style[data-href~="'+Ui(C.href)+'"]');if(z)return x.instance=z,mr(z),z;var ee=d({},C,{"data-href":C.href,"data-precedence":C.precedence,href:null,precedence:null});return z=(f.ownerDocument||f).createElement("style"),mr(z),Ul(z,"style",ee),ct(z,C.precedence,f),x.instance=z;case"stylesheet":ee=oe(C.href);var he=f.querySelector(de(ee));if(he)return x.state.loading|=4,x.instance=he,mr(he),he;z=be(C),(ee=kh.get(ee))&&Rt(z,ee),he=(f.ownerDocument||f).createElement("link"),mr(he);var Qe=he;return Qe._p=new Promise(function(St,ln){Qe.onload=St,Qe.onerror=ln}),Ul(he,"link",z),x.state.loading|=4,ct(he,C.precedence,f),x.instance=he;case"script":return he=$e(C.src),(ee=f.querySelector(Je(he)))?(x.instance=ee,mr(ee),ee):(z=C,(ee=kh.get(he))&&(z=d({},C),Ht(z,ee)),f=f.ownerDocument||f,ee=f.createElement("script"),mr(ee),Ul(ee,"link",z),f.head.appendChild(ee),x.instance=ee);case"void":return null;default:throw Error(r(443,x.type))}else x.type==="stylesheet"&&(x.state.loading&4)===0&&(z=x.instance,x.state.loading|=4,ct(z,C.precedence,f));return x.instance}function ct(f,x,C){for(var z=C.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),ee=z.length?z[z.length-1]:null,he=ee,Qe=0;Qe<z.length;Qe++){var St=z[Qe];if(St.dataset.precedence===x)he=St;else if(he!==ee)break}he?he.parentNode.insertBefore(f,he.nextSibling):(x=C.nodeType===9?C.head:C,x.insertBefore(f,x.firstChild))}function Rt(f,x){f.crossOrigin==null&&(f.crossOrigin=x.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=x.referrerPolicy),f.title==null&&(f.title=x.title)}function Ht(f,x){f.crossOrigin==null&&(f.crossOrigin=x.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=x.referrerPolicy),f.integrity==null&&(f.integrity=x.integrity)}var fn=null;function Kt(f,x,C){if(fn===null){var z=new Map,ee=fn=new Map;ee.set(C,z)}else ee=fn,z=ee.get(C),z||(z=new Map,ee.set(C,z));if(z.has(f))return z;for(z.set(f,null),C=C.getElementsByTagName(f),ee=0;ee<C.length;ee++){var he=C[ee];if(!(he[kr]||he[Pe]||f==="link"&&he.getAttribute("rel")==="stylesheet")&&he.namespaceURI!=="http://www.w3.org/2000/svg"){var Qe=he.getAttribute(x)||"";Qe=f+Qe;var St=z.get(Qe);St?St.push(he):z.set(Qe,[he])}}return z}function Ke(f,x,C){f=f.ownerDocument||f,f.head.insertBefore(C,x==="title"?f.querySelector("head > title"):null)}function Ct(f,x,C){if(C===1||x.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof x.precedence!="string"||typeof x.href!="string"||x.href==="")break;return!0;case"link":if(typeof x.rel!="string"||typeof x.href!="string"||x.href===""||x.onLoad||x.onError)break;switch(x.rel){case"stylesheet":return f=x.disabled,typeof x.precedence=="string"&&f==null;default:return!0}case"script":if(x.async&&typeof x.async!="function"&&typeof x.async!="symbol"&&!x.onLoad&&!x.onError&&x.src&&typeof x.src=="string")return!0}return!1}function tn(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var jn=null;function Cr(){}function Xn(f,x,C){if(jn===null)throw Error(r(475));var z=jn;if(x.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var ee=oe(C.href),he=f.querySelector(de(ee));if(he){f=he._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(z.count++,z=Or.bind(z),f.then(z,z)),x.state.loading|=4,x.instance=he,mr(he);return}he=f.ownerDocument||f,C=be(C),(ee=kh.get(ee))&&Rt(C,ee),he=he.createElement("link"),mr(he);var Qe=he;Qe._p=new Promise(function(St,ln){Qe.onload=St,Qe.onerror=ln}),Ul(he,"link",C),x.instance=he}z.stylesheets===null&&(z.stylesheets=new Map),z.stylesheets.set(x,f),(f=x.state.preload)&&(x.state.loading&3)===0&&(z.count++,x=Or.bind(z),f.addEventListener("load",x),f.addEventListener("error",x))}}function rr(){if(jn===null)throw Error(r(475));var f=jn;return f.stylesheets&&f.count===0&&Ur(f,f.stylesheets),0<f.count?function(x){var C=setTimeout(function(){if(f.stylesheets&&Ur(f,f.stylesheets),f.unsuspend){var z=f.unsuspend;f.unsuspend=null,z()}},6e4);return f.unsuspend=x,function(){f.unsuspend=null,clearTimeout(C)}}:null}function Or(){if(this.count--,this.count===0){if(this.stylesheets)Ur(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var Tr=null;function Ur(f,x){f.stylesheets=null,f.unsuspend!==null&&(f.count++,Tr=new Map,x.forEach(lr,f),Tr=null,Or.call(f))}function lr(f,x){if(!(x.state.loading&4)){var C=Tr.get(f);if(C)var z=C.get(null);else{C=new Map,Tr.set(f,C);for(var ee=f.querySelectorAll("link[data-precedence],style[data-precedence]"),he=0;he<ee.length;he++){var Qe=ee[he];(Qe.nodeName==="LINK"||Qe.getAttribute("media")!=="not all")&&(C.set(Qe.dataset.precedence,Qe),z=Qe)}z&&C.set(null,z)}ee=x.instance,Qe=ee.getAttribute("data-precedence"),he=C.get(Qe)||z,he===z&&C.set(null,ee),C.set(Qe,ee),this.count++,z=Or.bind(this),ee.addEventListener("load",z),ee.addEventListener("error",z),he?he.parentNode.insertBefore(ee,he.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(ee,f.firstChild)),x.state.loading|=4}}var li={$$typeof:O,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function Bi(f,x,C,z,ee,he,Qe,St){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=it(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=it(0),this.hiddenUpdates=it(null),this.identifierPrefix=z,this.onUncaughtError=ee,this.onCaughtError=he,this.onRecoverableError=Qe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=St,this.incompleteTransitions=new Map}function Li(f,x,C,z,ee,he,Qe,St,ln,$n,fr,Dr){return f=new Bi(f,x,C,Qe,St,ln,$n,Dr),x=1,he===!0&&(x|=24),he=ps(3,null,null,x),f.current=he,he.stateNode=f,x=Mf(),x.refCount++,f.pooledCache=x,x.refCount++,he.memoizedState={element:z,isDehydrated:C,cache:x},_n(he),f}function Ti(f){return f?(f=So,f):So}function La(f,x,C,z,ee,he){ee=Ti(ee),z.context===null?z.context=ee:z.pendingContext=ee,z=gr(x),z.payload={element:C},he=he===void 0?null:he,he!==null&&(z.callback=he),C=Ar(f,z,x),C!==null&&(dc(C,f,x),Er(C,f,x))}function Is(f,x){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var C=f.retryLane;f.retryLane=C!==0&&C<x?C:x}}function gl(f,x){Is(f,x),(f=f.alternate)&&Is(f,x)}function du(f){if(f.tag===13){var x=Ks(f,67108864);x!==null&&dc(x,f,67108864),gl(f,67108864)}}var pc=!0;function Lc(f,x,C,z){var ee=se.T;se.T=null;var he=Se.p;try{Se.p=2,ls(f,x,C,z)}finally{Se.p=he,se.T=ee}}function pu(f,x,C,z){var ee=se.T;se.T=null;var he=Se.p;try{Se.p=8,ls(f,x,C,z)}finally{Se.p=he,se.T=ee}}function ls(f,x,C,z){if(pc){var ee=Tl(z);if(ee===null)d_(f,x,z,Cl,C),rf(f,z);else if(Nf(ee,f,x,C,z))z.stopPropagation();else if(rf(f,z),x&4&&-1<cs.indexOf(f)){for(;ee!==null;){var he=zr(ee);if(he!==null)switch(he.tag){case 3:if(he=he.stateNode,he.current.memoizedState.isDehydrated){var Qe=rt(he.pendingLanes);if(Qe!==0){var St=he;for(St.pendingLanes|=2,St.entangledLanes|=2;Qe;){var ln=1<<31-cn(Qe);St.entanglements[1]|=ln,Qe&=~ln}hd(he),(Vo&6)===0&&(Bm=wt()+500,u0(0))}}break;case 13:St=Ks(he,2),St!==null&&dc(St,he,2),i0(),gl(he,2)}if(he=Tl(z),he===null&&d_(f,x,z,Cl,C),he===ee)break;ee=he}ee!==null&&z.stopPropagation()}else d_(f,x,z,null,C)}}function Tl(f){return f=Wr(f),jl(f)}var Cl=null;function jl(f){if(Cl=null,f=vi(f),f!==null){var x=o(f);if(x===null)f=null;else{var C=x.tag;if(C===13){if(f=s(x),f!==null)return f;f=null}else if(C===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;f=null}else x!==f&&(f=null)}}return Cl=f,null}function ec(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ut()){case ht:return 2;case qt:return 8;case Ye:case Re:return 32;case Pt:return 268435456;default:return 32}default:return 32}}var Nc=!1,_s=null,Ml=null,us=null,rl=new Map,il=new Map,Jo=[],cs="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rf(f,x){switch(f){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":Ml=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":rl.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(x.pointerId)}}function fd(f,x,C,z,ee,he){return f===null||f.nativeEvent!==he?(f={blockedOn:x,domEventName:C,eventSystemFlags:z,nativeEvent:he,targetContainers:[ee]},x!==null&&(x=zr(x),x!==null&&du(x)),f):(f.eventSystemFlags|=z,x=f.targetContainers,ee!==null&&x.indexOf(ee)===-1&&x.push(ee),f)}function Nf(f,x,C,z,ee){switch(x){case"focusin":return _s=fd(_s,f,x,C,z,ee),!0;case"dragenter":return Ml=fd(Ml,f,x,C,z,ee),!0;case"mouseover":return us=fd(us,f,x,C,z,ee),!0;case"pointerover":var he=ee.pointerId;return rl.set(he,fd(rl.get(he)||null,f,x,C,z,ee)),!0;case"gotpointercapture":return he=ee.pointerId,il.set(he,fd(il.get(he)||null,f,x,C,z,ee)),!0}return!1}function WS(f){var x=vi(f.target);if(x!==null){var C=o(x);if(C!==null){if(x=C.tag,x===13){if(x=s(C),x!==null){f.blockedOn=x,An(f.priority,function(){if(C.tag===13){var z=Qu();z=rn(z);var ee=Ks(C,z);ee!==null&&dc(ee,C,z),gl(C,z)}});return}}else if(x===3&&C.stateNode.current.memoizedState.isDehydrated){f.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Qd(f){if(f.blockedOn!==null)return!1;for(var x=f.targetContainers;0<x.length;){var C=Tl(f.nativeEvent);if(C===null){C=f.nativeEvent;var z=new C.constructor(C.type,C);Nr=z,C.target.dispatchEvent(z),Nr=null}else return x=zr(C),x!==null&&du(x),f.blockedOn=C,!1;x.shift()}return!0}function $p(f,x,C){Qd(f)&&C.delete(x)}function $m(){Nc=!1,_s!==null&&Qd(_s)&&(_s=null),Ml!==null&&Qd(Ml)&&(Ml=null),us!==null&&Qd(us)&&(us=null),rl.forEach($p),il.forEach($p)}function ep(f,x){f.blockedOn===x&&(f.blockedOn=null,Nc||(Nc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$m)))}var tp=null;function Fb(f){tp!==f&&(tp=f,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tp===f&&(tp=null);for(var x=0;x<f.length;x+=3){var C=f[x],z=f[x+1],ee=f[x+2];if(typeof z!="function"){if(jl(z||C)===null)continue;break}var he=zr(C);he!==null&&(f.splice(x,3),x-=3,Bl(he,{pending:!0,data:ee,method:C.method,action:z},z,ee))}}))}function Wm(f){function x(ln){return ep(ln,f)}_s!==null&&ep(_s,f),Ml!==null&&ep(Ml,f),us!==null&&ep(us,f),rl.forEach(x),il.forEach(x);for(var C=0;C<Jo.length;C++){var z=Jo[C];z.blockedOn===f&&(z.blockedOn=null)}for(;0<Jo.length&&(C=Jo[0],C.blockedOn===null);)WS(C),C.blockedOn===null&&Jo.shift();if(C=(f.ownerDocument||f).$$reactFormReplay,C!=null)for(z=0;z<C.length;z+=3){var ee=C[z],he=C[z+1],Qe=ee[je]||null;if(typeof he=="function")Qe||Fb(C);else if(Qe){var St=null;if(he&&he.hasAttribute("formAction")){if(ee=he,Qe=he[je]||null)St=Qe.formAction;else if(jl(ee)!==null)continue}else St=Qe.action;typeof St=="function"?C[z+1]=St:(C.splice(z,3),z-=3),Fb(C)}}}function x_(f){this._internalRoot=f}m0.prototype.render=x_.prototype.render=function(f){var x=this._internalRoot;if(x===null)throw Error(r(409));var C=x.current,z=Qu();La(C,z,f,x,null,null)},m0.prototype.unmount=x_.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var x=f.containerInfo;La(f.current,2,null,f,null,null),i0(),x[_t]=null}};function m0(f){this._internalRoot=f}m0.prototype.unstable_scheduleHydration=function(f){if(f){var x=Qn();f={blockedOn:null,target:f,priority:x};for(var C=0;C<Jo.length&&x!==0&&x<Jo[C].priority;C++);Jo.splice(C,0,f),C===0&&WS(f)}};var b_=e.version;if(b_!=="19.1.0")throw Error(r(527,b_,"19.1.0"));Se.findDOMNode=function(f){var x=f._reactInternals;if(x===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=c(x),f=f!==null?h(f):null,f=f===null?null:f.stateNode,f};var Bb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{Bt=af.inject(Bb),gn=af}catch{}}return Ub.createRoot=function(f,x){if(!i(f))throw Error(r(299));var C=!1,z="",ee=uS,he=Yx,Qe=Zx,St=null;return x!=null&&(x.unstable_strictMode===!0&&(C=!0),x.identifierPrefix!==void 0&&(z=x.identifierPrefix),x.onUncaughtError!==void 0&&(ee=x.onUncaughtError),x.onCaughtError!==void 0&&(he=x.onCaughtError),x.onRecoverableError!==void 0&&(Qe=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(St=x.unstable_transitionCallbacks)),x=Li(f,1,!1,null,null,C,z,ee,he,Qe,St,null),f[_t]=x.current,f_(f),new x_(x)},Ub.hydrateRoot=function(f,x,C){if(!i(f))throw Error(r(299));var z=!1,ee="",he=uS,Qe=Yx,St=Zx,ln=null,$n=null;return C!=null&&(C.unstable_strictMode===!0&&(z=!0),C.identifierPrefix!==void 0&&(ee=C.identifierPrefix),C.onUncaughtError!==void 0&&(he=C.onUncaughtError),C.onCaughtError!==void 0&&(Qe=C.onCaughtError),C.onRecoverableError!==void 0&&(St=C.onRecoverableError),C.unstable_transitionCallbacks!==void 0&&(ln=C.unstable_transitionCallbacks),C.formState!==void 0&&($n=C.formState)),x=Li(f,1,!0,x,C??null,z,ee,he,Qe,St,ln,$n),x.context=Ti(null),C=x.current,z=Qu(),z=rn(z),ee=gr(z),ee.callback=null,Ar(C,ee,z),C=z,x.current.lanes=C,xt(x,C),hd(x),f[_t]=x.current,f_(f),new m0(x)},Ub.version="19.1.0",Ub}var UO;function uZ(){if(UO)return NA.exports;UO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),NA.exports=lZ(),NA.exports}var cZ=uZ();const iw={black:"#000",white:"#fff"},w_={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},S_={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},E_={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},T_={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},C_={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},jb={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},hZ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function gm(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const zw="$$material";function QT(){return QT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QT.apply(null,arguments)}function fZ(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function dZ(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var pZ=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(dZ(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=fZ(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),vh="-ms-",eC="-moz-",Qo="-webkit-",OG="comm",dN="rule",pN="decl",gZ="@import",FG="@keyframes",mZ="@layer",vZ=Math.abs,rM=String.fromCharCode,yZ=Object.assign;function _Z(t,e){return Bc(t,0)^45?(((e<<2^Bc(t,0))<<2^Bc(t,1))<<2^Bc(t,2))<<2^Bc(t,3):0}function BG(t){return t.trim()}function xZ(t,e){return(t=e.exec(t))?t[0]:t}function es(t,e,n){return t.replace(e,n)}function AI(t,e){return t.indexOf(e)}function Bc(t,e){return t.charCodeAt(e)|0}function aw(t,e,n){return t.slice(e,n)}function Zp(t){return t.length}function gN(t){return t.length}function XS(t,e){return e.push(t),t}function bZ(t,e){return t.map(e).join("")}var iM=1,tx=1,zG=0,yf=0,Ou=0,Mx="";function aM(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:iM,column:tx,length:s,return:""}}function Gb(t,e){return yZ(aM("",null,null,"",null,null,0),t,{length:-t.length},e)}function wZ(){return Ou}function SZ(){return Ou=yf>0?Bc(Mx,--yf):0,tx--,Ou===10&&(tx=1,iM--),Ou}function Hf(){return Ou=yf<zG?Bc(Mx,yf++):0,tx++,Ou===10&&(tx=1,iM++),Ou}function ag(){return Bc(Mx,yf)}function xT(){return yf}function Uw(t,e){return aw(Mx,t,e)}function ow(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function UG(t){return iM=tx=1,zG=Zp(Mx=t),yf=0,[]}function jG(t){return Mx="",t}function bT(t){return BG(Uw(yf-1,RI(t===91?t+2:t===40?t+1:t)))}function EZ(t){for(;(Ou=ag())&&Ou<33;)Hf();return ow(t)>2||ow(Ou)>3?"":" "}function TZ(t,e){for(;--e&&Hf()&&!(Ou<48||Ou>102||Ou>57&&Ou<65||Ou>70&&Ou<97););return Uw(t,xT()+(e<6&&ag()==32&&Hf()==32))}function RI(t){for(;Hf();)switch(Ou){case t:return yf;case 34:case 39:t!==34&&t!==39&&RI(Ou);break;case 40:t===41&&RI(t);break;case 92:Hf();break}return yf}function CZ(t,e){for(;Hf()&&t+Ou!==57;)if(t+Ou===84&&ag()===47)break;return"/*"+Uw(e,yf-1)+"*"+rM(t===47?t:Hf())}function MZ(t){for(;!ow(ag());)Hf();return Uw(t,yf)}function AZ(t){return jG(wT("",null,null,null,[""],t=UG(t),0,[0],t))}function wT(t,e,n,r,i,o,s,a,c){for(var h=0,d=0,v=s,w=0,_=0,E=0,M=1,D=1,A=1,F=0,O="",N=i,H=o,G=r,W=O;D;)switch(E=F,F=Hf()){case 40:if(E!=108&&Bc(W,v-1)==58){AI(W+=es(bT(F),"&","&\f"),"&\f")!=-1&&(A=-1);break}case 34:case 39:case 91:W+=bT(F);break;case 9:case 10:case 13:case 32:W+=EZ(E);break;case 92:W+=TZ(xT()-1,7);continue;case 47:switch(ag()){case 42:case 47:XS(RZ(CZ(Hf(),xT()),e,n),c);break;default:W+="/"}break;case 123*M:a[h++]=Zp(W)*A;case 125*M:case 59:case 0:switch(F){case 0:case 125:D=0;case 59+d:A==-1&&(W=es(W,/\f/g,"")),_>0&&Zp(W)-v&&XS(_>32?GO(W+";",r,n,v-1):GO(es(W," ","")+";",r,n,v-2),c);break;case 59:W+=";";default:if(XS(G=jO(W,e,n,h,d,i,a,O,N=[],H=[],v),o),F===123)if(d===0)wT(W,e,G,G,N,o,v,a,H);else switch(w===99&&Bc(W,3)===110?100:w){case 100:case 108:case 109:case 115:wT(t,G,G,r&&XS(jO(t,G,G,0,0,i,a,O,i,N=[],v),H),i,H,v,a,r?N:H);break;default:wT(W,G,G,G,[""],H,0,a,H)}}h=d=_=0,M=A=1,O=W="",v=s;break;case 58:v=1+Zp(W),_=E;default:if(M<1){if(F==123)--M;else if(F==125&&M++==0&&SZ()==125)continue}switch(W+=rM(F),F*M){case 38:A=d>0?1:(W+="\f",-1);break;case 44:a[h++]=(Zp(W)-1)*A,A=1;break;case 64:ag()===45&&(W+=bT(Hf())),w=ag(),d=v=Zp(O=W+=MZ(xT())),F++;break;case 45:E===45&&Zp(W)==2&&(M=0)}}return o}function jO(t,e,n,r,i,o,s,a,c,h,d){for(var v=i-1,w=i===0?o:[""],_=gN(w),E=0,M=0,D=0;E<r;++E)for(var A=0,F=aw(t,v+1,v=vZ(M=s[E])),O=t;A<_;++A)(O=BG(M>0?w[A]+" "+F:es(F,/&\f/g,w[A])))&&(c[D++]=O);return aM(t,e,n,i===0?dN:a,c,h,d)}function RZ(t,e,n){return aM(t,e,n,OG,rM(wZ()),aw(t,2,-2),0)}function GO(t,e,n,r){return aM(t,e,n,pN,aw(t,0,r),aw(t,r+1,-1),r)}function U1(t,e){for(var n="",r=gN(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function PZ(t,e,n,r){switch(t.type){case mZ:if(t.children.length)break;case gZ:case pN:return t.return=t.return||t.value;case OG:return"";case FG:return t.return=t.value+"{"+U1(t.children,r)+"}";case dN:t.value=t.props.join(",")}return Zp(n=U1(t.children,r))?t.return=t.value+"{"+n+"}":""}function IZ(t){var e=gN(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}function DZ(t){return function(e){e.root||(e=e.return)&&t(e)}}function GG(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var LZ=function(e,n,r){for(var i=0,o=0;i=o,o=ag(),i===38&&o===12&&(n[r]=1),!ow(o);)Hf();return Uw(e,yf)},NZ=function(e,n){var r=-1,i=44;do switch(ow(i)){case 0:i===38&&ag()===12&&(n[r]=1),e[r]+=LZ(yf-1,n,r);break;case 2:e[r]+=bT(i);break;case 4:if(i===44){e[++r]=ag()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=rM(i)}while(i=Hf());return e},kZ=function(e,n){return jG(NZ(UG(e),n))},VO=new WeakMap,OZ=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!VO.get(r))&&!i){VO.set(e,!0);for(var o=[],s=kZ(n,o),a=r.props,c=0,h=0;c<s.length;c++)for(var d=0;d<a.length;d++,h++)e.props[h]=o[c]?s[c].replace(/&\f/g,a[d]):a[d]+" "+s[c]}}},FZ=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function VG(t,e){switch(_Z(t,e)){case 5103:return Qo+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qo+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Qo+t+eC+t+vh+t+t;case 6828:case 4268:return Qo+t+vh+t+t;case 6165:return Qo+t+vh+"flex-"+t+t;case 5187:return Qo+t+es(t,/(\w+).+(:[^]+)/,Qo+"box-$1$2"+vh+"flex-$1$2")+t;case 5443:return Qo+t+vh+"flex-item-"+es(t,/flex-|-self/,"")+t;case 4675:return Qo+t+vh+"flex-line-pack"+es(t,/align-content|flex-|-self/,"")+t;case 5548:return Qo+t+vh+es(t,"shrink","negative")+t;case 5292:return Qo+t+vh+es(t,"basis","preferred-size")+t;case 6060:return Qo+"box-"+es(t,"-grow","")+Qo+t+vh+es(t,"grow","positive")+t;case 4554:return Qo+es(t,/([^-])(transform)/g,"$1"+Qo+"$2")+t;case 6187:return es(es(es(t,/(zoom-|grab)/,Qo+"$1"),/(image-set)/,Qo+"$1"),t,"")+t;case 5495:case 3959:return es(t,/(image-set\([^]*)/,Qo+"$1$`$1");case 4968:return es(es(t,/(.+:)(flex-)?(.*)/,Qo+"box-pack:$3"+vh+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qo+t+t;case 4095:case 3583:case 4068:case 2532:return es(t,/(.+)-inline(.+)/,Qo+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Zp(t)-1-e>6)switch(Bc(t,e+1)){case 109:if(Bc(t,e+4)!==45)break;case 102:return es(t,/(.+:)(.+)-([^]+)/,"$1"+Qo+"$2-$3$1"+eC+(Bc(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~AI(t,"stretch")?VG(es(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Bc(t,e+1)!==115)break;case 6444:switch(Bc(t,Zp(t)-3-(~AI(t,"!important")&&10))){case 107:return es(t,":",":"+Qo)+t;case 101:return es(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Qo+(Bc(t,14)===45?"inline-":"")+"box$3$1"+Qo+"$2$3$1"+vh+"$2box$3")+t}break;case 5936:switch(Bc(t,e+11)){case 114:return Qo+t+vh+es(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Qo+t+vh+es(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Qo+t+vh+es(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Qo+t+vh+t+t}return t}var BZ=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case pN:e.return=VG(e.value,e.length);break;case FG:return U1([Gb(e,{value:es(e.value,"@","@"+Qo)})],i);case dN:if(e.length)return bZ(e.props,function(o){switch(xZ(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return U1([Gb(e,{props:[es(o,/:(read-\w+)/,":"+eC+"$1")]})],i);case"::placeholder":return U1([Gb(e,{props:[es(o,/:(plac\w+)/,":"+Qo+"input-$1")]}),Gb(e,{props:[es(o,/:(plac\w+)/,":"+eC+"$1")]}),Gb(e,{props:[es(o,/:(plac\w+)/,vh+"input-$1")]})],i)}return""})}},zZ=[BZ],UZ=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(M){var D=M.getAttribute("data-emotion");D.indexOf(" ")!==-1&&(document.head.appendChild(M),M.setAttribute("data-s",""))})}var i=e.stylisPlugins||zZ,o={},s,a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(M){for(var D=M.getAttribute("data-emotion").split(" "),A=1;A<D.length;A++)o[D[A]]=!0;a.push(M)});var c,h=[OZ,FZ];{var d,v=[PZ,DZ(function(M){d.insert(M)})],w=IZ(h.concat(i,v)),_=function(D){return U1(AZ(D),w)};c=function(D,A,F,O){d=F,_(D?D+"{"+A.styles+"}":A.styles),O&&(E.inserted[A.name]=!0)}}var E={key:n,sheet:new pZ({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:c};return E.sheet.hydrate(a),E},BA={exports:{}},hs={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HO;function jZ(){if(HO)return hs;HO=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,a=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,h=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,v=t?Symbol.for("react.suspense"):60113,w=t?Symbol.for("react.suspense_list"):60120,_=t?Symbol.for("react.memo"):60115,E=t?Symbol.for("react.lazy"):60116,M=t?Symbol.for("react.block"):60121,D=t?Symbol.for("react.fundamental"):60117,A=t?Symbol.for("react.responder"):60118,F=t?Symbol.for("react.scope"):60119;function O(H){if(typeof H=="object"&&H!==null){var G=H.$$typeof;switch(G){case e:switch(H=H.type,H){case c:case h:case r:case o:case i:case v:return H;default:switch(H=H&&H.$$typeof,H){case a:case d:case E:case _:case s:return H;default:return G}}case n:return G}}}function N(H){return O(H)===h}return hs.AsyncMode=c,hs.ConcurrentMode=h,hs.ContextConsumer=a,hs.ContextProvider=s,hs.Element=e,hs.ForwardRef=d,hs.Fragment=r,hs.Lazy=E,hs.Memo=_,hs.Portal=n,hs.Profiler=o,hs.StrictMode=i,hs.Suspense=v,hs.isAsyncMode=function(H){return N(H)||O(H)===c},hs.isConcurrentMode=N,hs.isContextConsumer=function(H){return O(H)===a},hs.isContextProvider=function(H){return O(H)===s},hs.isElement=function(H){return typeof H=="object"&&H!==null&&H.$$typeof===e},hs.isForwardRef=function(H){return O(H)===d},hs.isFragment=function(H){return O(H)===r},hs.isLazy=function(H){return O(H)===E},hs.isMemo=function(H){return O(H)===_},hs.isPortal=function(H){return O(H)===n},hs.isProfiler=function(H){return O(H)===o},hs.isStrictMode=function(H){return O(H)===i},hs.isSuspense=function(H){return O(H)===v},hs.isValidElementType=function(H){return typeof H=="string"||typeof H=="function"||H===r||H===h||H===o||H===i||H===v||H===w||typeof H=="object"&&H!==null&&(H.$$typeof===E||H.$$typeof===_||H.$$typeof===s||H.$$typeof===a||H.$$typeof===d||H.$$typeof===D||H.$$typeof===A||H.$$typeof===F||H.$$typeof===M)},hs.typeOf=O,hs}var qO;function GZ(){return qO||(qO=1,BA.exports=jZ()),BA.exports}var zA,$O;function VZ(){if($O)return zA;$O=1;var t=GZ(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[t.ForwardRef]=r,o[t.Memo]=i;function s(E){return t.isMemo(E)?i:o[E.$$typeof]||e}var a=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,w=Object.prototype;function _(E,M,D){if(typeof M!="string"){if(w){var A=v(M);A&&A!==w&&_(E,A,D)}var F=c(M);h&&(F=F.concat(h(M)));for(var O=s(E),N=s(M),H=0;H<F.length;++H){var G=F[H];if(!n[G]&&!(D&&D[G])&&!(N&&N[G])&&!(O&&O[G])){var W=d(M,G);try{a(E,G,W)}catch{}}}}return E}return zA=_,zA}VZ();var HZ=!0;function HG(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var mN=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||HZ===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},vN=function(e,n,r){mN(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function qZ(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var $Z={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},WZ=/[A-Z]|^ms/g,XZ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,qG=function(e){return e.charCodeAt(1)===45},WO=function(e){return e!=null&&typeof e!="boolean"},UA=GG(function(t){return qG(t)?t:t.replace(WZ,"-$&").toLowerCase()}),XO=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(XZ,function(r,i,o){return Kp={name:i,styles:o,next:Kp},i})}return $Z[e]!==1&&!qG(e)&&typeof n=="number"&&n!==0?n+"px":n};function sw(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Kp={name:i.name,styles:i.styles,next:Kp},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Kp={name:s.name,styles:s.styles,next:Kp},s=s.next;var a=o.styles+";";return a}return YZ(t,e,n)}case"function":{if(t!==void 0){var c=Kp,h=n(t);return Kp=c,sw(t,e,h)}break}}var d=n;if(e==null)return d;var v=e[d];return v!==void 0?v:d}function YZ(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=sw(t,e,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var a=s;e!=null&&e[a]!==void 0?r+=o+"{"+e[a]+"}":WO(a)&&(r+=UA(o)+":"+XO(o,a)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&(e==null||e[s[0]]===void 0))for(var c=0;c<s.length;c++)WO(s[c])&&(r+=UA(o)+":"+XO(o,s[c])+";");else{var h=sw(t,e,s);switch(o){case"animation":case"animationName":{r+=UA(o)+":"+h+";";break}default:r+=o+"{"+h+"}"}}}return r}var YO=/label:\s*([^\s;{]+)\s*(;|$)/g,Kp;function Ax(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Kp=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=sw(n,e,o);else{var s=o;i+=s[0]}for(var a=1;a<t.length;a++)if(i+=sw(n,e,t[a]),r){var c=o;i+=c[a]}YO.lastIndex=0;for(var h="",d;(d=YO.exec(i))!==null;)h+="-"+d[1];var v=qZ(i)+h;return{name:v,styles:i,next:Kp}}var ZZ=function(e){return e()},$G=rw.useInsertionEffect?rw.useInsertionEffect:!1,WG=$G||ZZ,ZO=$G||Be.useLayoutEffect,XG=Be.createContext(typeof HTMLElement<"u"?UZ({key:"css"}):null);XG.Provider;var yN=function(e){return Be.forwardRef(function(n,r){var i=Be.useContext(XG);return e(n,i,r)})},Rx=Be.createContext({}),_N={}.hasOwnProperty,PI="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",KZ=function(e,n){var r={};for(var i in n)_N.call(n,i)&&(r[i]=n[i]);return r[PI]=e,r},JZ=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return mN(n,r,i),WG(function(){return vN(n,r,i)}),null},QZ=yN(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[PI],o=[r],s="";typeof t.className=="string"?s=HG(e.registered,o,t.className):t.className!=null&&(s=t.className+" ");var a=Ax(o,void 0,Be.useContext(Rx));s+=e.key+"-"+a.name;var c={};for(var h in t)_N.call(t,h)&&h!=="css"&&h!==PI&&(c[h]=t[h]);return c.className=s,n&&(c.ref=n),Be.createElement(Be.Fragment,null,Be.createElement(JZ,{cache:e,serialized:a,isStringTag:typeof i=="string"}),Be.createElement(i,c))}),eK=QZ,KO=function(e,n){var r=arguments;if(n==null||!_N.call(n,"css"))return Be.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=eK,o[1]=KZ(e,n);for(var s=2;s<i;s++)o[s]=r[s];return Be.createElement.apply(null,o)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(KO||(KO={}));var YG=yN(function(t,e){var n=t.styles,r=Ax([n],void 0,Be.useContext(Rx)),i=Be.useRef();return ZO(function(){var o=e.key+"-global",s=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,c=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(s.before=e.sheet.tags[0]),c!==null&&(a=!0,c.setAttribute("data-emotion",o),s.hydrate([c])),i.current=[s,a],function(){s.flush()}},[e]),ZO(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&vN(e,r.next,!0),s.tags.length){var c=s.tags[s.tags.length-1].nextElementSibling;s.before=c,s.flush()}e.insert("",r,s,!1)},[e,r.name]),null});function Fv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ax(e)}function Wh(){var t=Fv.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var tK=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,nK=GG(function(t){return tK.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),rK=nK,iK=function(e){return e!=="theme"},JO=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?rK:iK},QO=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(s){return e.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},aK=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return mN(n,r,i),WG(function(){return vN(n,r,i)}),null},oK=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,s;n!==void 0&&(o=n.label,s=n.target);var a=QO(e,n,r),c=a||JO(i),h=!c("as");return function(){var d=arguments,v=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&v.push("label:"+o+";"),d[0]==null||d[0].raw===void 0)v.push.apply(v,d);else{var w=d[0];v.push(w[0]);for(var _=d.length,E=1;E<_;E++)v.push(d[E],w[E])}var M=yN(function(D,A,F){var O=h&&D.as||i,N="",H=[],G=D;if(D.theme==null){G={};for(var W in D)G[W]=D[W];G.theme=Be.useContext(Rx)}typeof D.className=="string"?N=HG(A.registered,H,D.className):D.className!=null&&(N=D.className+" ");var X=Ax(v.concat(H),A.registered,G);N+=A.key+"-"+X.name,s!==void 0&&(N+=" "+s);var K=h&&a===void 0?JO(O):c,k={};for(var $ in D)h&&$==="as"||K($)&&(k[$]=D[$]);return k.className=N,F&&(k.ref=F),Be.createElement(Be.Fragment,null,Be.createElement(aK,{cache:A,serialized:X,isStringTag:typeof O=="string"}),Be.createElement(O,k))});return M.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",M.defaultProps=e.defaultProps,M.__emotion_real=M,M.__emotion_base=i,M.__emotion_styles=v,M.__emotion_forwardProp=a,Object.defineProperty(M,"toString",{value:function(){return"."+s}}),M.withComponent=function(D,A){var F=t(D,QT({},n,A,{shouldForwardProp:QO(M,A,!0)}));return F.apply(void 0,v)},M}},sK=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],tC=oK.bind(null);sK.forEach(function(t){tC[t]=tC(t)});var jA={exports:{}},GA,eF;function lK(){if(eF)return GA;eF=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return GA=t,GA}var VA,tF;function uK(){if(tF)return VA;tF=1;var t=lK();function e(){}function n(){}return n.resetWarningCache=e,VA=function(){function r(s,a,c,h,d,v){if(v!==t){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},VA}var nF;function cK(){return nF||(nF=1,jA.exports=uK()()),jA.exports}var hK=cK();const pi=vy(hK);function fK(t){return t==null||Object.keys(t).length===0}function dK(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(fK(i)?n:i):e;return ke.jsx(YG,{styles:r})}/**
 * @mui/styled-engine v6.4.9
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ZG(t,e){return tC(t,e)}function pK(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const rF=[];function iF(t){return rF[0]=t,Ax(rF)}var HA={exports:{}},Ds={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF;function gK(){if(aF)return Ds;aF=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.view_transition"),_=Symbol.for("react.client.reference");function E(M){if(typeof M=="object"&&M!==null){var D=M.$$typeof;switch(D){case t:switch(M=M.type,M){case n:case i:case r:case c:case h:case w:return M;default:switch(M=M&&M.$$typeof,M){case s:case a:case v:case d:return M;case o:return M;default:return D}}case e:return D}}}return Ds.ContextConsumer=o,Ds.ContextProvider=s,Ds.Element=t,Ds.ForwardRef=a,Ds.Fragment=n,Ds.Lazy=v,Ds.Memo=d,Ds.Portal=e,Ds.Profiler=i,Ds.StrictMode=r,Ds.Suspense=c,Ds.SuspenseList=h,Ds.isContextConsumer=function(M){return E(M)===o},Ds.isContextProvider=function(M){return E(M)===s},Ds.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},Ds.isForwardRef=function(M){return E(M)===a},Ds.isFragment=function(M){return E(M)===n},Ds.isLazy=function(M){return E(M)===v},Ds.isMemo=function(M){return E(M)===d},Ds.isPortal=function(M){return E(M)===e},Ds.isProfiler=function(M){return E(M)===i},Ds.isStrictMode=function(M){return E(M)===r},Ds.isSuspense=function(M){return E(M)===c},Ds.isSuspenseList=function(M){return E(M)===h},Ds.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===n||M===i||M===r||M===c||M===h||typeof M=="object"&&M!==null&&(M.$$typeof===v||M.$$typeof===d||M.$$typeof===s||M.$$typeof===o||M.$$typeof===a||M.$$typeof===_||M.getModuleId!==void 0)},Ds.typeOf=E,Ds}var oF;function mK(){return oF||(oF=1,HA.exports=gK()),HA.exports}var oM=mK();function eg(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function KG(t){if(Be.isValidElement(t)||oM.isValidElementType(t)||!eg(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=KG(t[n])}),e}function _h(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return eg(t)&&eg(e)&&Object.keys(e).forEach(i=>{Be.isValidElement(e[i])||oM.isValidElementType(e[i])?r[i]=e[i]:eg(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&eg(t[i])?r[i]=_h(t[i],e[i],n):n.clone?r[i]=eg(e[i])?KG(e[i]):e[i]:r[i]=e[i]}),r}const vK=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function yK(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,o=vK(e),s=Object.keys(o);function a(w){return`@media (min-width:${typeof e[w]=="number"?e[w]:w}${n})`}function c(w){return`@media (max-width:${(typeof e[w]=="number"?e[w]:w)-r/100}${n})`}function h(w,_){const E=s.indexOf(_);return`@media (min-width:${typeof e[w]=="number"?e[w]:w}${n}) and (max-width:${(E!==-1&&typeof e[s[E]]=="number"?e[s[E]]:_)-r/100}${n})`}function d(w){return s.indexOf(w)+1<s.length?h(w,s[s.indexOf(w)+1]):a(w)}function v(w){const _=s.indexOf(w);return _===0?a(s[1]):_===s.length-1?c(s[_]):h(w,s[s.indexOf(w)+1]).replace("@media","@media not all and")}return{keys:s,values:o,up:a,down:c,between:h,only:d,not:v,unit:n,...i}}function _K(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var s,a;const o=/min-width:\s*([0-9.]+)/;return+(((s=r.match(o))==null?void 0:s[1])||0)-+(((a=i.match(o))==null?void 0:a[1])||0)});return n.length?n.reduce((r,i)=>{const o=e[i];return delete r[i],r[i]=o,r},{...e}):e}function xK(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function bK(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(o)}function wK(t){const e=(o,s)=>o.replace("@media",s?`@container ${s}`:"@container");function n(o,s){o.up=(...a)=>e(t.breakpoints.up(...a),s),o.down=(...a)=>e(t.breakpoints.down(...a),s),o.between=(...a)=>e(t.breakpoints.between(...a),s),o.only=(...a)=>e(t.breakpoints.only(...a),s),o.not=(...a)=>{const c=e(t.breakpoints.not(...a),s);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const r={},i=o=>(n(r,o),r);return n(i),{...t,containerQueries:i}}const SK={borderRadius:4};function N2(t,e){return e?_h(t,e,{clone:!1}):t}const sM={xs:0,sm:600,md:900,lg:1200,xl:1536},sF={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${sM[t]}px)`},EK={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:sM[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Ad(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||sF;return e.reduce((s,a,c)=>(s[o.up(o.keys[c])]=n(e[c]),s),{})}if(typeof e=="object"){const o=r.breakpoints||sF;return Object.keys(e).reduce((s,a)=>{if(xK(o.keys,a)){const c=bK(r.containerQueries?r:EK,a);c&&(s[c]=n(e[a],a))}else if(Object.keys(o.values||sM).includes(a)){const c=o.up(a);s[c]=n(e[a],a)}else{const c=a;s[c]=e[c]}return s},{})}return n(e)}function TK(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function CK(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function MK(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,o)=>{o<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function lM({values:t,breakpoints:e,base:n}){const r=n||MK(t,e),i=Object.keys(r);if(i.length===0)return t;let o;return i.reduce((s,a,c)=>(Array.isArray(t)?(s[a]=t[c]!=null?t[c]:t[o],o=c):typeof t=="object"?(s[a]=t[a]!=null?t[a]:t[o],o=a):s[a]=t,s),{})}function vr(t){if(typeof t!="string")throw new Error(gm(7));return t.charAt(0).toUpperCase()+t.slice(1)}function dv(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function nC(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=dv(t,n)||r,e&&(i=e(i,r,t)),i}function wu(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=s=>{if(s[e]==null)return null;const a=s[e],c=s.theme,h=dv(c,r)||{};return Ad(s,a,v=>{let w=nC(h,i,v);return v===w&&typeof v=="string"&&(w=nC(h,i,`${e}${v==="default"?"":vr(v)}`,v)),n===!1?w:{[n]:w}})};return o.propTypes={},o.filterProps=[e],o}function AK(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const RK={m:"margin",p:"padding"},PK={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},lF={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},IK=AK(t=>{if(t.length>2)if(lF[t])t=lF[t];else return[t];const[e,n]=t.split(""),r=RK[e],i=PK[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),xN=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],bN=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...xN,...bN];function jw(t,e,n,r){const i=dv(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const s=Math.abs(o),a=i[s];return o>=0?a:typeof a=="number"?-a:`-${a}`}:typeof i=="function"?i:()=>{}}function wN(t){return jw(t,"spacing",8)}function Gw(t,e){return typeof e=="string"||e==null?e:t(e)}function DK(t,e){return n=>t.reduce((r,i)=>(r[i]=Gw(e,n),r),{})}function LK(t,e,n,r){if(!e.includes(n))return null;const i=IK(n),o=DK(i,r),s=t[n];return Ad(t,s,o)}function JG(t,e){const n=wN(t.theme);return Object.keys(t).map(r=>LK(t,e,r,n)).reduce(N2,{})}function Ql(t){return JG(t,xN)}Ql.propTypes={};Ql.filterProps=xN;function eu(t){return JG(t,bN)}eu.propTypes={};eu.filterProps=bN;function QG(t=8,e=wN({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const s=e(o);return typeof s=="number"?`${s}px`:s}).join(" ");return n.mui=!0,n}function uM(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?N2(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function xd(t){return typeof t!="number"?t:`${t}px solid`}function kd(t,e){return wu({prop:t,themeKey:"borders",transform:e})}const NK=kd("border",xd),kK=kd("borderTop",xd),OK=kd("borderRight",xd),FK=kd("borderBottom",xd),BK=kd("borderLeft",xd),zK=kd("borderColor"),UK=kd("borderTopColor"),jK=kd("borderRightColor"),GK=kd("borderBottomColor"),VK=kd("borderLeftColor"),HK=kd("outline",xd),qK=kd("outlineColor"),cM=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=jw(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Gw(e,r)});return Ad(t,t.borderRadius,n)}return null};cM.propTypes={};cM.filterProps=["borderRadius"];uM(NK,kK,OK,FK,BK,zK,UK,jK,GK,VK,cM,HK,qK);const hM=t=>{if(t.gap!==void 0&&t.gap!==null){const e=jw(t.theme,"spacing",8),n=r=>({gap:Gw(e,r)});return Ad(t,t.gap,n)}return null};hM.propTypes={};hM.filterProps=["gap"];const fM=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=jw(t.theme,"spacing",8),n=r=>({columnGap:Gw(e,r)});return Ad(t,t.columnGap,n)}return null};fM.propTypes={};fM.filterProps=["columnGap"];const dM=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=jw(t.theme,"spacing",8),n=r=>({rowGap:Gw(e,r)});return Ad(t,t.rowGap,n)}return null};dM.propTypes={};dM.filterProps=["rowGap"];const $K=wu({prop:"gridColumn"}),WK=wu({prop:"gridRow"}),XK=wu({prop:"gridAutoFlow"}),YK=wu({prop:"gridAutoColumns"}),ZK=wu({prop:"gridAutoRows"}),KK=wu({prop:"gridTemplateColumns"}),JK=wu({prop:"gridTemplateRows"}),QK=wu({prop:"gridTemplateAreas"}),eJ=wu({prop:"gridArea"});uM(hM,fM,dM,$K,WK,XK,YK,ZK,KK,JK,QK,eJ);function j1(t,e){return e==="grey"?e:t}const tJ=wu({prop:"color",themeKey:"palette",transform:j1}),nJ=wu({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:j1}),rJ=wu({prop:"backgroundColor",themeKey:"palette",transform:j1});uM(tJ,nJ,rJ);function Uf(t){return t<=1&&t!==0?`${t*100}%`:t}const iJ=wu({prop:"width",transform:Uf}),SN=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,o,s,a,c;const r=((s=(o=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:o.values)==null?void 0:s[n])||sM[n];return r?((c=(a=t.theme)==null?void 0:a.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Uf(n)}};return Ad(t,t.maxWidth,e)}return null};SN.filterProps=["maxWidth"];const aJ=wu({prop:"minWidth",transform:Uf}),oJ=wu({prop:"height",transform:Uf}),sJ=wu({prop:"maxHeight",transform:Uf}),lJ=wu({prop:"minHeight",transform:Uf});wu({prop:"size",cssProperty:"width",transform:Uf});wu({prop:"size",cssProperty:"height",transform:Uf});const uJ=wu({prop:"boxSizing"});uM(iJ,SN,aJ,oJ,sJ,lJ,uJ);const Vw={border:{themeKey:"borders",transform:xd},borderTop:{themeKey:"borders",transform:xd},borderRight:{themeKey:"borders",transform:xd},borderBottom:{themeKey:"borders",transform:xd},borderLeft:{themeKey:"borders",transform:xd},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:xd},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:cM},color:{themeKey:"palette",transform:j1},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:j1},backgroundColor:{themeKey:"palette",transform:j1},p:{style:eu},pt:{style:eu},pr:{style:eu},pb:{style:eu},pl:{style:eu},px:{style:eu},py:{style:eu},padding:{style:eu},paddingTop:{style:eu},paddingRight:{style:eu},paddingBottom:{style:eu},paddingLeft:{style:eu},paddingX:{style:eu},paddingY:{style:eu},paddingInline:{style:eu},paddingInlineStart:{style:eu},paddingInlineEnd:{style:eu},paddingBlock:{style:eu},paddingBlockStart:{style:eu},paddingBlockEnd:{style:eu},m:{style:Ql},mt:{style:Ql},mr:{style:Ql},mb:{style:Ql},ml:{style:Ql},mx:{style:Ql},my:{style:Ql},margin:{style:Ql},marginTop:{style:Ql},marginRight:{style:Ql},marginBottom:{style:Ql},marginLeft:{style:Ql},marginX:{style:Ql},marginY:{style:Ql},marginInline:{style:Ql},marginInlineStart:{style:Ql},marginInlineEnd:{style:Ql},marginBlock:{style:Ql},marginBlockStart:{style:Ql},marginBlockEnd:{style:Ql},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:hM},rowGap:{style:dM},columnGap:{style:fM},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Uf},maxWidth:{style:SN},minWidth:{transform:Uf},height:{transform:Uf},maxHeight:{transform:Uf},minHeight:{transform:Uf},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function cJ(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function hJ(t,e){return typeof t=="function"?t(e):t}function fJ(){function t(n,r,i,o){const s={[n]:r,theme:i},a=o[n];if(!a)return{[n]:r};const{cssProperty:c=n,themeKey:h,transform:d,style:v}=a;if(r==null)return null;if(h==="typography"&&r==="inherit")return{[n]:r};const w=dv(i,h)||{};return v?v(s):Ad(s,r,E=>{let M=nC(w,d,E);return E===M&&typeof E=="string"&&(M=nC(w,d,`${n}${E==="default"?"":vr(E)}`,E)),c===!1?M:{[c]:M}})}function e(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??Vw;function s(a){let c=a;if(typeof a=="function")c=a(i);else if(typeof a!="object")return a;if(!c)return null;const h=TK(i.breakpoints),d=Object.keys(h);let v=h;return Object.keys(c).forEach(w=>{const _=hJ(c[w],i);if(_!=null)if(typeof _=="object")if(o[w])v=N2(v,t(w,_,i,o));else{const E=Ad({theme:i},_,M=>({[w]:M}));cJ(E,_)?v[w]=e({sx:_,theme:i}):v=N2(v,E)}else v=N2(v,t(w,_,i,o))}),_K(i,CK(d,v))}return Array.isArray(r)?r.map(s):s(r)}return e}const Z0=fJ();Z0.filterProps=["sx"];function dJ(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function EN(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={},...s}=t,a=yK(n),c=QG(i);let h=_h({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:c,shape:{...SK,...o}},s);return h=wK(h),h.applyStyles=dJ,h=e.reduce((d,v)=>_h(d,v),h),h.unstable_sxConfig={...Vw,...s==null?void 0:s.unstable_sxConfig},h.unstable_sx=function(v){return Z0({sx:v,theme:this})},h}function pJ(t){return Object.keys(t).length===0}function eV(t=null){const e=Be.useContext(Rx);return!e||pJ(e)?t:e}const gJ=EN();function TN(t=gJ){return eV(t)}function mJ({styles:t,themeId:e,defaultTheme:n={}}){const r=TN(n),i=typeof t=="function"?t(e&&r[e]||r):t;return ke.jsx(dK,{styles:i})}const vJ=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??Vw;return Object.keys(t).forEach(i=>{n[i]?e.systemProps[i]=t[i]:e.otherProps[i]=t[i]}),e};function CN(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=vJ(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...s)=>{const a=e(...s);return eg(a)?{...r,...a}:r}:o={...r,...e},{...i,sx:o}}const uF=t=>t,yJ=()=>{let t=uF;return{configure(e){t=e},generate(e){return t(e)},reset(){t=uF}}},tV=yJ();function nV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=nV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Fr(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=nV(t))&&(r&&(r+=" "),r+=e);return r}function _J(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=ZG("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Z0);return Be.forwardRef(function(c,h){const d=TN(n),{className:v,component:w="div",..._}=CN(c);return ke.jsx(o,{as:w,ref:h,className:Fr(v,i?i(r):r),theme:e&&d[e]||d,..._})})}const xJ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function oa(t,e,n="Mui"){const r=xJ[e];return r?`${n}-${r}`:`${tV.generate(t)}-${e}`}function na(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=oa(t,i,n)}),r}function rV(t){const{variants:e,...n}=t,r={variants:e,style:iF(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=iF(i.style))}),r}const bJ=EN();function qA(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function wJ(t){return t?(e,n)=>n[t]:null}function SJ(t,e,n){t.theme=CJ(t.theme)?n:t.theme[e]||t.theme}function ST(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>ST(t,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:i,...o}=n;r=o}return iV(t,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function iV(t,e,n=[]){var i;let r;e:for(let o=0;o<e.length;o+=1){const s=e[o];if(typeof s.props=="function"){if(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),!s.props(r))continue}else for(const a in s.props)if(t[a]!==s.props[a]&&((i=t.ownerState)==null?void 0:i[a])!==s.props[a])continue e;typeof s.style=="function"?(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),n.push(s.style(r))):n.push(s.style)}return n}function EJ(t={}){const{themeId:e,defaultTheme:n=bJ,rootShouldForwardProp:r=qA,slotShouldForwardProp:i=qA}=t;function o(a){SJ(a,e,n)}return(a,c={})=>{pK(a,H=>H.filter(G=>G!==Z0));const{name:h,slot:d,skipVariantsResolver:v,skipSx:w,overridesResolver:_=wJ(AJ(d)),...E}=c,M=v!==void 0?v:d&&d!=="Root"&&d!=="root"||!1,D=w||!1;let A=qA;d==="Root"||d==="root"?A=r:d?A=i:MJ(a)&&(A=void 0);const F=ZG(a,{shouldForwardProp:A,label:TJ(),...E}),O=H=>{if(typeof H=="function"&&H.__emotion_real!==H)return function(W){return ST(W,H)};if(eg(H)){const G=rV(H);return G.variants?function(X){return ST(X,G)}:G.style}return H},N=(...H)=>{const G=[],W=H.map(O),X=[];if(G.push(o),h&&_&&X.push(function(Q){var se,Se;const ae=(Se=(se=Q.theme.components)==null?void 0:se[h])==null?void 0:Se.styleOverrides;if(!ae)return null;const ce={};for(const ye in ae)ce[ye]=ST(Q,ae[ye]);return _(Q,ce)}),h&&!M&&X.push(function(Q){var ce,se;const ie=Q.theme,ae=(se=(ce=ie==null?void 0:ie.components)==null?void 0:ce[h])==null?void 0:se.variants;return ae?iV(Q,ae):null}),D||X.push(Z0),Array.isArray(W[0])){const $=W.shift(),Q=new Array(G.length).fill(""),ie=new Array(X.length).fill("");let ae;ae=[...Q,...$,...ie],ae.raw=[...Q,...$.raw,...ie],G.unshift(ae)}const K=[...G,...W,...X],k=F(...K);return a.muiName&&(k.muiName=a.muiName),k};return F.withConfig&&(N.withConfig=F.withConfig),N}}function TJ(t,e){return void 0}function CJ(t){for(const e in t)return!1;return!0}function MJ(t){return typeof t=="string"&&t.charCodeAt(0)>96}function AJ(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function lw(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=r;if(i==="components"||i==="slots")n[i]={...t[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const o=t[i],s=e[i];if(!s)n[i]=o||{};else if(!o)n[i]=s;else{n[i]={...s};for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)){const c=a;n[i][c]=lw(o[c],s[c])}}}else n[i]===void 0&&(n[i]=t[i])}return n}function RJ(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:lw(e.components[n].defaultProps,r)}const Rd=typeof window<"u"?Be.useLayoutEffect:Be.useEffect;function PJ(t,e,n,r,i){const[o,s]=Be.useState(()=>i&&n?n(t).matches:r?r(t).matches:e);return Rd(()=>{if(!n)return;const a=n(t),c=()=>{s(a.matches)};return c(),a.addEventListener("change",c),()=>{a.removeEventListener("change",c)}},[t,n]),o}const IJ={...rw},aV=IJ.useSyncExternalStore;function DJ(t,e,n,r,i){const o=Be.useCallback(()=>e,[e]),s=Be.useMemo(()=>{if(i&&n)return()=>n(t).matches;if(r!==null){const{matches:d}=r(t);return()=>d}return o},[o,t,r,i,n]),[a,c]=Be.useMemo(()=>{if(n===null)return[o,()=>()=>{}];const d=n(t);return[()=>d.matches,v=>(d.addEventListener("change",v),()=>{d.removeEventListener("change",v)})]},[o,n,t]);return aV(c,a,s)}function oV(t={}){const{themeId:e}=t;return function(r,i={}){let o=eV();o&&e&&(o=o[e]||o);const s=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:a=!1,matchMedia:c=s?window.matchMedia:null,ssrMatchMedia:h=null,noSsr:d=!1}=RJ({name:"MuiUseMediaQuery",props:i,theme:o});let v=typeof r=="function"?r(o):r;return v=v.replace(/^@media( ?)/m,""),(aV!==void 0?DJ:PJ)(v,a,c,h,d)}}oV();function a1(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function MN(t,e=0,n=1){return a1(t,e,n)}function LJ(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Sv(t){if(t.type)return t;if(t.charAt(0)==="#")return Sv(LJ(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(gm(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(gm(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const NJ=t=>{const e=Sv(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},u2=(t,e)=>{try{return NJ(t)}catch{return t}};function pM(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function sV(t){t=Sv(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),s=(h,d=(h+n/30)%12)=>i-o*Math.max(Math.min(d-3,9-d,1),-1);let a="rgb";const c=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return t.type==="hsla"&&(a+="a",c.push(e[3])),pM({type:a,values:c})}function II(t){t=Sv(t);let e=t.type==="hsl"||t.type==="hsla"?Sv(sV(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function kJ(t,e){const n=II(t),r=II(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Io(t,e){return t=Sv(t),e=MN(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,pM(t)}function YS(t,e,n){try{return Io(t,e)}catch{return t}}function K0(t,e){if(t=Sv(t),e=MN(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return pM(t)}function Gs(t,e,n){try{return K0(t,e)}catch{return t}}function J0(t,e){if(t=Sv(t),e=MN(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return pM(t)}function Vs(t,e,n){try{return J0(t,e)}catch{return t}}function OJ(t,e=.15){return II(t)>.5?K0(t,e):J0(t,e)}function ZS(t,e,n){try{return OJ(t,e)}catch{return t}}function cF(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function Hw(t,e=166){let n;function r(...i){const o=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(o,e)}return r.clear=()=>{clearTimeout(n)},r}function ET(t,e){var n,r,i;return Be.isValidElement(t)&&e.indexOf(t.type.muiName??((i=(r=(n=t.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:i.muiName))!==-1}function xc(t){return t&&t.ownerDocument||document}function Xf(t){return xc(t).defaultView||window}function DI(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let hF=0;function FJ(t){const[e,n]=Be.useState(t),r=t||e;return Be.useEffect(()=>{e==null&&(hF+=1,n(`mui-${hF}`))},[e]),r}const BJ={...rw},fF=BJ.useId;function Px(t){if(fF!==void 0){const e=fF();return t??e}return FJ(t)}function V0({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=Be.useRef(t!==void 0),[o,s]=Be.useState(e),a=i?t:o,c=Be.useCallback(h=>{i||s(h)},[]);return[a,c]}function zc(t){const e=Be.useRef(t);return Rd(()=>{e.current=t}),Be.useRef((...n)=>(0,e.current)(...n)).current}function xu(...t){const e=Be.useRef(void 0),n=Be.useCallback(r=>{const i=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const s=o,a=s(r);return typeof a=="function"?a:()=>{s(null)}}return o.current=r,()=>{o.current=null}});return()=>{i.forEach(o=>o==null?void 0:o())}},t);return Be.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}const dF={};function lV(t,e){const n=Be.useRef(dF);return n.current===dF&&(n.current=t(e)),n}const zJ=[];function UJ(t){Be.useEffect(t,zJ)}let jJ=class uV{constructor(){Vg(this,"currentId",null);Vg(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Vg(this,"disposeEffect",()=>this.clear)}static create(){return new uV}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}};function AN(){const t=lV(jJ.create).current;return UJ(t.disposeEffect),t}function nx(t){try{return t.matches(":focus-visible")}catch{}return!1}function cV(t=window){const e=t.document.documentElement.clientWidth;return t.innerWidth-e}const GJ=t=>{const e=Be.useRef({});return Be.useEffect(()=>{e.current=t}),e.current},VJ={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function sa(t,e,n=void 0){const r={};for(const i in t){const o=t[i];let s="",a=!0;for(let c=0;c<o.length;c+=1){const h=o[c];h&&(s+=(a===!0?"":" ")+e(h),a=!1,n&&n[h]&&(s+=" "+n[h]))}r[i]=s}return r}function HJ(t){return typeof t=="string"}function hV(t,e,n){return t===void 0||HJ(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function k2(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function pF(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function fV(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const _=Fr(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),E={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},M={...n,...i,...r};return _.length>0&&(M.className=_),Object.keys(E).length>0&&(M.style=E),{props:M,internalRef:void 0}}const s=k2({...i,...r}),a=pF(r),c=pF(i),h=e(s),d=Fr(h==null?void 0:h.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),v={...h==null?void 0:h.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},w={...h,...n,...c,...a};return d.length>0&&(w.className=d),Object.keys(v).length>0&&(w.style=v),{props:w,internalRef:h.ref}}function dV(t,e,n){return typeof t=="function"?t(e,n):t}function hf(t){var v;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=t,s=i?{}:dV(n,r),{props:a,internalRef:c}=fV({...o,externalSlotProps:s}),h=xu(c,s==null?void 0:s.ref,(v=t.additionalProps)==null?void 0:v.ref);return hV(e,{...a,ref:h},r)}function Ix(t){var e;return parseInt(Be.version,10)>=19?((e=t==null?void 0:t.props)==null?void 0:e.ref)||null:(t==null?void 0:t.ref)||null}const qJ=Be.createContext(),_y=()=>Be.useContext(qJ)??!1,$J=Be.createContext(void 0);function WJ(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?lw(i.defaultProps,r):!i.styleOverrides&&!i.variants?lw(i,r):r}function XJ({props:t,name:e}){const n=Be.useContext($J);return WJ({props:t,name:e,theme:{components:n}})}const gF={theme:void 0};function YJ(t){let e,n;return function(i){let o=e;return(o===void 0||i.theme!==n)&&(gF.theme=i.theme,o=rV(t(gF)),e=o,n=i.theme),o}}function ZJ(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const mF=(t,e,n,r=[])=>{let i=t;e.forEach((o,s)=>{s===e.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},KJ=(t,e,n)=>{function r(i,o=[],s=[]){Object.entries(i).forEach(([a,c])=>{(!n||n&&!n([...o,a]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?r(c,[...o,a],Array.isArray(c)?[...s,a]:s):e([...o,a],c,s))})}r(t)},JJ=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function $A(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},o={},s={};return KJ(t,(a,c,h)=>{if((typeof c=="string"||typeof c=="number")&&(!r||!r(a,c))){const d=`--${n?`${n}-`:""}${a.join("-")}`,v=JJ(a,c);Object.assign(i,{[d]:v}),mF(o,a,`var(${d})`,h),mF(s,a,`var(${d}, ${v})`,h)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:s}}function QJ(t,e={}){const{getSelector:n=D,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:o={},components:s,defaultColorScheme:a="light",...c}=t,{vars:h,css:d,varsWithDefaults:v}=$A(c,e);let w=v;const _={},{[a]:E,...M}=o;if(Object.entries(M||{}).forEach(([O,N])=>{const{vars:H,css:G,varsWithDefaults:W}=$A(N,e);w=_h(w,W),_[O]={css:G,vars:H}}),E){const{css:O,vars:N,varsWithDefaults:H}=$A(E,e);w=_h(w,H),_[a]={css:O,vars:N}}function D(O,N){var G,W;let H=i;if(i==="class"&&(H=".%s"),i==="data"&&(H="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(H=`[${i}="%s"]`),O){if(H==="media")return t.defaultColorScheme===O?":root":{[`@media (prefers-color-scheme: ${((W=(G=o[O])==null?void 0:G.palette)==null?void 0:W.mode)||O})`]:{":root":N}};if(H)return t.defaultColorScheme===O?`:root, ${H.replace("%s",String(O))}`:H.replace("%s",String(O))}return":root"}return{vars:w,generateThemeVars:()=>{let O={...h};return Object.entries(_).forEach(([,{vars:N}])=>{O=_h(O,N)}),O},generateStyleSheets:()=>{var X,K;const O=[],N=t.defaultColorScheme||"light";function H(k,$){Object.keys($).length&&O.push(typeof k=="string"?{[k]:{...$}}:k)}H(n(void 0,{...d}),d);const{[N]:G,...W}=_;if(G){const{css:k}=G,$=(K=(X=o[N])==null?void 0:X.palette)==null?void 0:K.mode,Q=!r&&$?{colorScheme:$,...k}:{...k};H(n(N,{...Q}),Q)}return Object.entries(W).forEach(([k,{css:$}])=>{var ae,ce;const Q=(ce=(ae=o[k])==null?void 0:ae.palette)==null?void 0:ce.mode,ie=!r&&Q?{colorScheme:Q,...$}:{...$};H(n(k,{...ie}),ie)}),O}}}function eQ(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}function pV(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:iw.white,default:iw.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const tQ=pV();function gV(){return{text:{primary:iw.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:iw.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const vF=gV();function yF(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=J0(t.main,i):e==="dark"&&(t.dark=K0(t.main,o)))}function nQ(t="light"){return t==="dark"?{main:E_[200],light:E_[50],dark:E_[400]}:{main:E_[700],light:E_[400],dark:E_[800]}}function rQ(t="light"){return t==="dark"?{main:S_[200],light:S_[50],dark:S_[400]}:{main:S_[500],light:S_[300],dark:S_[700]}}function iQ(t="light"){return t==="dark"?{main:w_[500],light:w_[300],dark:w_[700]}:{main:w_[700],light:w_[400],dark:w_[800]}}function aQ(t="light"){return t==="dark"?{main:T_[400],light:T_[300],dark:T_[700]}:{main:T_[700],light:T_[500],dark:T_[900]}}function oQ(t="light"){return t==="dark"?{main:C_[400],light:C_[300],dark:C_[700]}:{main:C_[800],light:C_[500],dark:C_[900]}}function sQ(t="light"){return t==="dark"?{main:jb[400],light:jb[300],dark:jb[700]}:{main:"#ed6c02",light:jb[500],dark:jb[900]}}function RN(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,o=t.primary||nQ(e),s=t.secondary||rQ(e),a=t.error||iQ(e),c=t.info||aQ(e),h=t.success||oQ(e),d=t.warning||sQ(e);function v(M){return kJ(M,vF.text.primary)>=n?vF.text.primary:tQ.text.primary}const w=({color:M,name:D,mainShade:A=500,lightShade:F=300,darkShade:O=700})=>{if(M={...M},!M.main&&M[A]&&(M.main=M[A]),!M.hasOwnProperty("main"))throw new Error(gm(11,D?` (${D})`:"",A));if(typeof M.main!="string")throw new Error(gm(12,D?` (${D})`:"",JSON.stringify(M.main)));return yF(M,"light",F,r),yF(M,"dark",O,r),M.contrastText||(M.contrastText=v(M.main)),M};let _;return e==="light"?_=pV():e==="dark"&&(_=gV()),_h({common:{...iw},mode:e,primary:w({color:o,name:"primary"}),secondary:w({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:w({color:a,name:"error"}),warning:w({color:d,name:"warning"}),info:w({color:c,name:"info"}),success:w({color:h,name:"success"}),grey:hZ,contrastThreshold:n,getContrastText:v,augmentColor:w,tonalOffset:r,..._},i)}function lQ(t){const e={};return Object.entries(t).forEach(r=>{const[i,o]=r;typeof o=="object"&&(e[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function uQ(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function cQ(t){return Math.round(t*1e5)/1e5}const _F={textTransform:"uppercase"},xF='"Roboto", "Helvetica", "Arial", sans-serif';function hQ(t,e){const{fontFamily:n=xF,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:s=500,fontWeightBold:a=700,htmlFontSize:c=16,allVariants:h,pxToRem:d,...v}=typeof e=="function"?e(t):e,w=r/14,_=d||(D=>`${D/c*w}rem`),E=(D,A,F,O,N)=>({fontFamily:n,fontWeight:D,fontSize:_(A),lineHeight:F,...n===xF?{letterSpacing:`${cQ(O/A)}em`}:{},...N,...h}),M={h1:E(i,96,1.167,-1.5),h2:E(i,60,1.2,-.5),h3:E(o,48,1.167,0),h4:E(o,34,1.235,.25),h5:E(o,24,1.334,0),h6:E(s,20,1.6,.15),subtitle1:E(o,16,1.75,.15),subtitle2:E(s,14,1.57,.1),body1:E(o,16,1.5,.15),body2:E(o,14,1.43,.15),button:E(s,14,1.75,.4,_F),caption:E(o,12,1.66,.4),overline:E(o,12,2.66,1,_F),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return _h({htmlFontSize:c,pxToRem:_,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:s,fontWeightBold:a,...M},v,{clone:!1})}const fQ=.2,dQ=.14,pQ=.12;function Al(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${fQ})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${dQ})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${pQ})`].join(",")}const gQ=["none",Al(0,2,1,-1,0,1,1,0,0,1,3,0),Al(0,3,1,-2,0,2,2,0,0,1,5,0),Al(0,3,3,-2,0,3,4,0,0,1,8,0),Al(0,2,4,-1,0,4,5,0,0,1,10,0),Al(0,3,5,-1,0,5,8,0,0,1,14,0),Al(0,3,5,-1,0,6,10,0,0,1,18,0),Al(0,4,5,-2,0,7,10,1,0,2,16,1),Al(0,5,5,-3,0,8,10,1,0,3,14,2),Al(0,5,6,-3,0,9,12,1,0,3,16,2),Al(0,6,6,-3,0,10,14,1,0,4,18,3),Al(0,6,7,-4,0,11,15,1,0,4,20,3),Al(0,7,8,-4,0,12,17,2,0,5,22,4),Al(0,7,8,-4,0,13,19,2,0,5,24,4),Al(0,7,9,-4,0,14,21,2,0,5,26,4),Al(0,8,9,-5,0,15,22,2,0,6,28,5),Al(0,8,10,-5,0,16,24,2,0,6,30,5),Al(0,8,11,-5,0,17,26,2,0,6,32,5),Al(0,9,11,-5,0,18,28,2,0,7,34,6),Al(0,9,12,-6,0,19,29,2,0,7,36,6),Al(0,10,13,-6,0,20,31,3,0,8,38,7),Al(0,10,13,-6,0,21,33,3,0,8,40,7),Al(0,10,14,-6,0,22,35,3,0,8,42,7),Al(0,11,14,-7,0,23,36,3,0,9,44,8),Al(0,11,15,-7,0,24,38,3,0,9,46,8)],mQ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},mV={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function bF(t){return`${Math.round(t)}ms`}function vQ(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function yQ(t){const e={...mQ,...t.easing},n={...mV,...t.duration};return{getAutoHeightDuration:vQ,create:(i=["all"],o={})=>{const{duration:s=n.standard,easing:a=e.easeInOut,delay:c=0,...h}=o;return(Array.isArray(i)?i:[i]).map(d=>`${d} ${typeof s=="string"?s:bF(s)} ${a} ${typeof c=="string"?c:bF(c)}`).join(",")},...t,easing:e,duration:n}}const _Q={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function xQ(t){return eg(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function vV(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let o=0;o<i.length;o++){const[s,a]=i[o];!xQ(a)||s.startsWith("unstable_")?delete r[s]:eg(a)&&(r[s]={...a},n(r[s]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function LI(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:o={},transitions:s={},typography:a={},shape:c,...h}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(gm(20));const d=RN(o),v=EN(t);let w=_h(v,{mixins:uQ(v.breakpoints,r),palette:d,shadows:gQ.slice(),typography:hQ(d,a),transitions:yQ(s),zIndex:{..._Q}});return w=_h(w,h),w=e.reduce((_,E)=>_h(_,E),w),w.unstable_sxConfig={...Vw,...h==null?void 0:h.unstable_sxConfig},w.unstable_sx=function(E){return Z0({sx:E,theme:this})},w.toRuntimeSource=vV,w}function NI(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const bQ=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=NI(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function yV(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function _V(t){return t==="dark"?bQ:[]}function wQ(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,o=RN(e);return{palette:o,opacity:{...yV(o.mode),...n},overlays:r||_V(o.mode),...i}}function SQ(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const EQ=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],TQ=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const s={};return EQ(t.cssVarPrefix).forEach(a=>{s[a]=n[a],delete n[a]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:s}}:o?{[o.replace("%s",e)]:s,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...s}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function CQ(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function xr(t,e,n){!t[e]&&n&&(t[e]=n)}function c2(t){return typeof t!="string"||!t.startsWith("hsl")?t:sV(t)}function Hg(t,e){`${e}Channel`in t||(t[`${e}Channel`]=u2(c2(t[e])))}function MQ(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Wp=t=>{try{return t()}catch{}},AQ=(t="mui")=>ZJ(t);function WA(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=wQ({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:o,...s}=LI({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:o,opacity:{...yV(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||_V(i)},s}function RQ(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:s=SQ,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:c=":root",...h}=t,d=Object.keys(n)[0],v=r||(n.light&&d!=="light"?"light":d),w=AQ(o),{[v]:_,light:E,dark:M,...D}=n,A={...D};let F=_;if((v==="dark"&&!("dark"in n)||v==="light"&&!("light"in n))&&(F=!0),!F)throw new Error(gm(21,v));const O=WA(A,F,h,v);E&&!A.light&&WA(A,E,void 0,"light"),M&&!A.dark&&WA(A,M,void 0,"dark");let N={defaultColorScheme:v,...O,cssVarPrefix:o,colorSchemeSelector:a,rootSelector:c,getCssVar:w,colorSchemes:A,font:{...lQ(O.typography),...O.font},spacing:MQ(h.spacing)};Object.keys(N.colorSchemes).forEach(K=>{const k=N.colorSchemes[K].palette,$=Q=>{const ie=Q.split("-"),ae=ie[1],ce=ie[2];return w(Q,k[ae][ce])};if(k.mode==="light"&&(xr(k.common,"background","#fff"),xr(k.common,"onBackground","#000")),k.mode==="dark"&&(xr(k.common,"background","#000"),xr(k.common,"onBackground","#fff")),CQ(k,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),k.mode==="light"){xr(k.Alert,"errorColor",Gs(k.error.light,.6)),xr(k.Alert,"infoColor",Gs(k.info.light,.6)),xr(k.Alert,"successColor",Gs(k.success.light,.6)),xr(k.Alert,"warningColor",Gs(k.warning.light,.6)),xr(k.Alert,"errorFilledBg",$("palette-error-main")),xr(k.Alert,"infoFilledBg",$("palette-info-main")),xr(k.Alert,"successFilledBg",$("palette-success-main")),xr(k.Alert,"warningFilledBg",$("palette-warning-main")),xr(k.Alert,"errorFilledColor",Wp(()=>k.getContrastText(k.error.main))),xr(k.Alert,"infoFilledColor",Wp(()=>k.getContrastText(k.info.main))),xr(k.Alert,"successFilledColor",Wp(()=>k.getContrastText(k.success.main))),xr(k.Alert,"warningFilledColor",Wp(()=>k.getContrastText(k.warning.main))),xr(k.Alert,"errorStandardBg",Vs(k.error.light,.9)),xr(k.Alert,"infoStandardBg",Vs(k.info.light,.9)),xr(k.Alert,"successStandardBg",Vs(k.success.light,.9)),xr(k.Alert,"warningStandardBg",Vs(k.warning.light,.9)),xr(k.Alert,"errorIconColor",$("palette-error-main")),xr(k.Alert,"infoIconColor",$("palette-info-main")),xr(k.Alert,"successIconColor",$("palette-success-main")),xr(k.Alert,"warningIconColor",$("palette-warning-main")),xr(k.AppBar,"defaultBg",$("palette-grey-100")),xr(k.Avatar,"defaultBg",$("palette-grey-400")),xr(k.Button,"inheritContainedBg",$("palette-grey-300")),xr(k.Button,"inheritContainedHoverBg",$("palette-grey-A100")),xr(k.Chip,"defaultBorder",$("palette-grey-400")),xr(k.Chip,"defaultAvatarColor",$("palette-grey-700")),xr(k.Chip,"defaultIconColor",$("palette-grey-700")),xr(k.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),xr(k.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),xr(k.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),xr(k.LinearProgress,"primaryBg",Vs(k.primary.main,.62)),xr(k.LinearProgress,"secondaryBg",Vs(k.secondary.main,.62)),xr(k.LinearProgress,"errorBg",Vs(k.error.main,.62)),xr(k.LinearProgress,"infoBg",Vs(k.info.main,.62)),xr(k.LinearProgress,"successBg",Vs(k.success.main,.62)),xr(k.LinearProgress,"warningBg",Vs(k.warning.main,.62)),xr(k.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.11)`),xr(k.Slider,"primaryTrack",Vs(k.primary.main,.62)),xr(k.Slider,"secondaryTrack",Vs(k.secondary.main,.62)),xr(k.Slider,"errorTrack",Vs(k.error.main,.62)),xr(k.Slider,"infoTrack",Vs(k.info.main,.62)),xr(k.Slider,"successTrack",Vs(k.success.main,.62)),xr(k.Slider,"warningTrack",Vs(k.warning.main,.62));const Q=ZS(k.background.default,.8);xr(k.SnackbarContent,"bg",Q),xr(k.SnackbarContent,"color",Wp(()=>k.getContrastText(Q))),xr(k.SpeedDialAction,"fabHoverBg",ZS(k.background.paper,.15)),xr(k.StepConnector,"border",$("palette-grey-400")),xr(k.StepContent,"border",$("palette-grey-400")),xr(k.Switch,"defaultColor",$("palette-common-white")),xr(k.Switch,"defaultDisabledColor",$("palette-grey-100")),xr(k.Switch,"primaryDisabledColor",Vs(k.primary.main,.62)),xr(k.Switch,"secondaryDisabledColor",Vs(k.secondary.main,.62)),xr(k.Switch,"errorDisabledColor",Vs(k.error.main,.62)),xr(k.Switch,"infoDisabledColor",Vs(k.info.main,.62)),xr(k.Switch,"successDisabledColor",Vs(k.success.main,.62)),xr(k.Switch,"warningDisabledColor",Vs(k.warning.main,.62)),xr(k.TableCell,"border",Vs(YS(k.divider,1),.88)),xr(k.Tooltip,"bg",YS(k.grey[700],.92))}if(k.mode==="dark"){xr(k.Alert,"errorColor",Vs(k.error.light,.6)),xr(k.Alert,"infoColor",Vs(k.info.light,.6)),xr(k.Alert,"successColor",Vs(k.success.light,.6)),xr(k.Alert,"warningColor",Vs(k.warning.light,.6)),xr(k.Alert,"errorFilledBg",$("palette-error-dark")),xr(k.Alert,"infoFilledBg",$("palette-info-dark")),xr(k.Alert,"successFilledBg",$("palette-success-dark")),xr(k.Alert,"warningFilledBg",$("palette-warning-dark")),xr(k.Alert,"errorFilledColor",Wp(()=>k.getContrastText(k.error.dark))),xr(k.Alert,"infoFilledColor",Wp(()=>k.getContrastText(k.info.dark))),xr(k.Alert,"successFilledColor",Wp(()=>k.getContrastText(k.success.dark))),xr(k.Alert,"warningFilledColor",Wp(()=>k.getContrastText(k.warning.dark))),xr(k.Alert,"errorStandardBg",Gs(k.error.light,.9)),xr(k.Alert,"infoStandardBg",Gs(k.info.light,.9)),xr(k.Alert,"successStandardBg",Gs(k.success.light,.9)),xr(k.Alert,"warningStandardBg",Gs(k.warning.light,.9)),xr(k.Alert,"errorIconColor",$("palette-error-main")),xr(k.Alert,"infoIconColor",$("palette-info-main")),xr(k.Alert,"successIconColor",$("palette-success-main")),xr(k.Alert,"warningIconColor",$("palette-warning-main")),xr(k.AppBar,"defaultBg",$("palette-grey-900")),xr(k.AppBar,"darkBg",$("palette-background-paper")),xr(k.AppBar,"darkColor",$("palette-text-primary")),xr(k.Avatar,"defaultBg",$("palette-grey-600")),xr(k.Button,"inheritContainedBg",$("palette-grey-800")),xr(k.Button,"inheritContainedHoverBg",$("palette-grey-700")),xr(k.Chip,"defaultBorder",$("palette-grey-700")),xr(k.Chip,"defaultAvatarColor",$("palette-grey-300")),xr(k.Chip,"defaultIconColor",$("palette-grey-300")),xr(k.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),xr(k.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),xr(k.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),xr(k.LinearProgress,"primaryBg",Gs(k.primary.main,.5)),xr(k.LinearProgress,"secondaryBg",Gs(k.secondary.main,.5)),xr(k.LinearProgress,"errorBg",Gs(k.error.main,.5)),xr(k.LinearProgress,"infoBg",Gs(k.info.main,.5)),xr(k.LinearProgress,"successBg",Gs(k.success.main,.5)),xr(k.LinearProgress,"warningBg",Gs(k.warning.main,.5)),xr(k.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.13)`),xr(k.Slider,"primaryTrack",Gs(k.primary.main,.5)),xr(k.Slider,"secondaryTrack",Gs(k.secondary.main,.5)),xr(k.Slider,"errorTrack",Gs(k.error.main,.5)),xr(k.Slider,"infoTrack",Gs(k.info.main,.5)),xr(k.Slider,"successTrack",Gs(k.success.main,.5)),xr(k.Slider,"warningTrack",Gs(k.warning.main,.5));const Q=ZS(k.background.default,.98);xr(k.SnackbarContent,"bg",Q),xr(k.SnackbarContent,"color",Wp(()=>k.getContrastText(Q))),xr(k.SpeedDialAction,"fabHoverBg",ZS(k.background.paper,.15)),xr(k.StepConnector,"border",$("palette-grey-600")),xr(k.StepContent,"border",$("palette-grey-600")),xr(k.Switch,"defaultColor",$("palette-grey-300")),xr(k.Switch,"defaultDisabledColor",$("palette-grey-600")),xr(k.Switch,"primaryDisabledColor",Gs(k.primary.main,.55)),xr(k.Switch,"secondaryDisabledColor",Gs(k.secondary.main,.55)),xr(k.Switch,"errorDisabledColor",Gs(k.error.main,.55)),xr(k.Switch,"infoDisabledColor",Gs(k.info.main,.55)),xr(k.Switch,"successDisabledColor",Gs(k.success.main,.55)),xr(k.Switch,"warningDisabledColor",Gs(k.warning.main,.55)),xr(k.TableCell,"border",Gs(YS(k.divider,1),.68)),xr(k.Tooltip,"bg",YS(k.grey[700],.92))}Hg(k.background,"default"),Hg(k.background,"paper"),Hg(k.common,"background"),Hg(k.common,"onBackground"),Hg(k,"divider"),Object.keys(k).forEach(Q=>{const ie=k[Q];Q!=="tonalOffset"&&ie&&typeof ie=="object"&&(ie.main&&xr(k[Q],"mainChannel",u2(c2(ie.main))),ie.light&&xr(k[Q],"lightChannel",u2(c2(ie.light))),ie.dark&&xr(k[Q],"darkChannel",u2(c2(ie.dark))),ie.contrastText&&xr(k[Q],"contrastTextChannel",u2(c2(ie.contrastText))),Q==="text"&&(Hg(k[Q],"primary"),Hg(k[Q],"secondary")),Q==="action"&&(ie.active&&Hg(k[Q],"active"),ie.selected&&Hg(k[Q],"selected")))})}),N=e.reduce((K,k)=>_h(K,k),N);const H={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:s,getSelector:TQ(N)},{vars:G,generateThemeVars:W,generateStyleSheets:X}=QJ(N,H);return N.vars=G,Object.entries(N.colorSchemes[N.defaultColorScheme]).forEach(([K,k])=>{N[K]=k}),N.generateThemeVars=W,N.generateStyleSheets=X,N.generateSpacing=function(){return QG(h.spacing,wN(this))},N.getColorSchemeSelector=eQ(a),N.spacing=N.generateSpacing(),N.shouldSkipGeneratingVar=s,N.unstable_sxConfig={...Vw,...h==null?void 0:h.unstable_sxConfig},N.unstable_sx=function(k){return Z0({sx:k,theme:this})},N.toRuntimeSource=vV,N}function wF(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:RN({...n===!0?{}:n.palette,mode:e})})}function xV(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...s}=t,a=o||"light",c=i==null?void 0:i[a],h={...i,...n?{[a]:{...typeof c!="boolean"&&c,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return LI(t,...e);let d=n;"palette"in t||h[a]&&(h[a]!==!0?d=h[a].palette:a==="dark"&&(d={mode:"dark"}));const v=LI({...t,palette:d},...e);return v.defaultColorScheme=a,v.colorSchemes=h,v.palette.mode==="light"&&(v.colorSchemes.light={...h.light!==!0&&h.light,palette:v.palette},wF(v,"dark",h.dark)),v.palette.mode==="dark"&&(v.colorSchemes.dark={...h.dark!==!0&&h.dark,palette:v.palette},wF(v,"light",h.light)),v}return!n&&!("light"in h)&&a==="light"&&(h.light=!0),RQ({...s,colorSchemes:h,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const PN=xV();function td(){const t=TN(PN);return t[zw]||t}function gM(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const xf=t=>gM(t)&&t!=="classes",_r=EJ({themeId:zw,defaultTheme:PN,rootShouldForwardProp:xf});function PQ(t){return ke.jsx(mJ,{...t,defaultTheme:PN,themeId:zw})}function IN(t){return function(n){return ke.jsx(PQ,{styles:typeof t=="function"?r=>t({theme:r,...n}):t})}}function IQ(){return CN}const zi=YJ;function ca(t){return XJ(t)}function DQ(t){return oa("MuiSvgIcon",t)}na("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const LQ=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${vr(e)}`,`fontSize${vr(n)}`]};return sa(i,DQ,r)},NQ=_r("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${vr(n.color)}`],e[`fontSize${vr(n.fontSize)}`]]}})(zi(({theme:t})=>{var e,n,r,i,o,s,a,c,h,d,v,w,_,E;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=t.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:M=>!M.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((s=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:s.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(a=t.typography)==null?void 0:a.pxToRem)==null?void 0:c.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((d=(h=t.typography)==null?void 0:h.pxToRem)==null?void 0:d.call(h,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,M])=>M&&M.main).map(([M])=>{var D,A;return{props:{color:M},style:{color:(A=(D=(t.vars??t).palette)==null?void 0:D[M])==null?void 0:A.main}}}),{props:{color:"action"},style:{color:(w=(v=(t.vars??t).palette)==null?void 0:v.action)==null?void 0:w.active}},{props:{color:"disabled"},style:{color:(E=(_=(t.vars??t).palette)==null?void 0:_.action)==null?void 0:E.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),kI=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:c="medium",htmlColor:h,inheritViewBox:d=!1,titleAccess:v,viewBox:w="0 0 24 24",..._}=r,E=Be.isValidElement(i)&&i.type==="svg",M={...r,color:s,component:a,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:w,hasSvgAsChild:E},D={};d||(D.viewBox=w);const A=LQ(M);return ke.jsxs(NQ,{as:a,className:Fr(A.root,o),focusable:"false",color:h,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:n,...D,..._,...E&&i.props,ownerState:M,children:[E?i.props.children:i,v?ke.jsx("title",{children:v}):null]})});kI.muiName="SvgIcon";function fs(t,e){function n(r,i){return ke.jsx(kI,{"data-testid":`${e}Icon`,ref:i,...r,children:t})}return n.muiName=kI.muiName,Be.memo(Be.forwardRef(n))}function DN(t,e){if(!t)return e;if(typeof t=="function"||typeof e=="function")return i=>{const o=typeof e=="function"?e(i):e,s=typeof t=="function"?t({...i,...o}):t,a=Fr(i==null?void 0:i.className,o==null?void 0:o.className,s==null?void 0:s.className);return{...o,...s,...!!a&&{className:a},...(o==null?void 0:o.style)&&(s==null?void 0:s.style)&&{style:{...o.style,...s.style}},...(o==null?void 0:o.sx)&&(s==null?void 0:s.sx)&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(s.sx)?s.sx:[s.sx]]}}};const n=e,r=Fr(n==null?void 0:n.className,t==null?void 0:t.className);return{...e,...t,...!!r&&{className:r},...(n==null?void 0:n.style)&&(t==null?void 0:t.style)&&{style:{...n.style,...t.style}},...(n==null?void 0:n.sx)&&(t==null?void 0:t.sx)&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function bV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function OI(t,e){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},OI(t,e)}function wV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,OI(t,e)}var SV=kG();const h2=vy(SV),SF={disabled:!1},rC=zt.createContext(null);var kQ=function(e){return e.scrollTop},f2="unmounted",M0="exited",A0="entering",o1="entered",FI="exiting",Od=function(t){wV(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var s=i,a=s&&!s.isMounting?r.enter:r.appear,c;return o.appearStatus=null,r.in?a?(c=M0,o.appearStatus=A0):c=o1:r.unmountOnExit||r.mountOnEnter?c=f2:c=M0,o.state={status:c},o.nextCallback=null,o}e.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===f2?{status:M0}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==A0&&s!==o1&&(o=A0):(s===A0||s===o1)&&(o=FI)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,s,a;return o=s=a=i,i!=null&&typeof i!="number"&&(o=i.exit,s=i.enter,a=i.appear!==void 0?i.appear:s),{exit:o,enter:s,appear:a}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===A0){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:h2.findDOMNode(this);s&&kQ(s)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===M0&&this.setState({status:f2})},n.performEnter=function(i){var o=this,s=this.props.enter,a=this.context?this.context.isMounting:i,c=this.props.nodeRef?[a]:[h2.findDOMNode(this),a],h=c[0],d=c[1],v=this.getTimeouts(),w=a?v.appear:v.enter;if(!i&&!s||SF.disabled){this.safeSetState({status:o1},function(){o.props.onEntered(h)});return}this.props.onEnter(h,d),this.safeSetState({status:A0},function(){o.props.onEntering(h,d),o.onTransitionEnd(w,function(){o.safeSetState({status:o1},function(){o.props.onEntered(h,d)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:h2.findDOMNode(this);if(!o||SF.disabled){this.safeSetState({status:M0},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:FI},function(){i.props.onExiting(a),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:M0},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=this.props.nodeRef?this.props.nodeRef.current:h2.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],h=c[0],d=c[1];this.props.addEndListener(h,d)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===f2)return null;var o=this.props,s=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=bV(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return zt.createElement(rC.Provider,{value:null},typeof s=="function"?s(i,a):zt.cloneElement(zt.Children.only(s),a))},e}(zt.Component);Od.contextType=rC;Od.propTypes={};function M_(){}Od.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:M_,onEntering:M_,onEntered:M_,onExit:M_,onExiting:M_,onExited:M_};Od.UNMOUNTED=f2;Od.EXITED=M0;Od.ENTERING=A0;Od.ENTERED=o1;Od.EXITING=FI;function OQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LN(t,e){var n=function(o){return e&&Be.isValidElement(o)?e(o):o},r=Object.create(null);return t&&Be.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function FQ(t,e){t=t||{},e=e||{};function n(d){return d in e?e[d]:t[d]}var r=Object.create(null),i=[];for(var o in t)o in e?i.length&&(r[o]=i,i=[]):i.push(o);var s,a={};for(var c in e){if(r[c])for(s=0;s<r[c].length;s++){var h=r[c][s];a[r[c][s]]=n(h)}a[c]=n(c)}for(s=0;s<i.length;s++)a[i[s]]=n(i[s]);return a}function z0(t,e,n){return n[e]!=null?n[e]:t.props[e]}function BQ(t,e){return LN(t.children,function(n){return Be.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:z0(n,"appear",t),enter:z0(n,"enter",t),exit:z0(n,"exit",t)})})}function zQ(t,e,n){var r=LN(t.children),i=FQ(e,r);return Object.keys(i).forEach(function(o){var s=i[o];if(Be.isValidElement(s)){var a=o in e,c=o in r,h=e[o],d=Be.isValidElement(h)&&!h.props.in;c&&(!a||d)?i[o]=Be.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:z0(s,"exit",t),enter:z0(s,"enter",t)}):!c&&a&&!d?i[o]=Be.cloneElement(s,{in:!1}):c&&a&&Be.isValidElement(h)&&(i[o]=Be.cloneElement(s,{onExited:n.bind(null,s),in:h.props.in,exit:z0(s,"exit",t),enter:z0(s,"enter",t)}))}}),i}var UQ=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},jQ={component:"div",childFactory:function(e){return e}},mM=function(t){wV(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var s=o.handleExited.bind(OQ(o));return o.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,o){var s=o.children,a=o.handleExited,c=o.firstRender;return{children:c?BQ(i,a):zQ(i,s,a),firstRender:!1}},n.handleExited=function(i,o){var s=LN(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var c=QT({},a.children);return delete c[i.key],{children:c}}))},n.render=function(){var i=this.props,o=i.component,s=i.childFactory,a=bV(i,["component","childFactory"]),c=this.state.contextValue,h=UQ(this.state.children).map(s);return delete a.appear,delete a.enter,delete a.exit,o===null?zt.createElement(rC.Provider,{value:c},h):zt.createElement(rC.Provider,{value:c},zt.createElement(o,a,h))},e}(zt.Component);mM.propTypes={};mM.defaultProps=jQ;const NN=t=>t.scrollTop;function Ev(t,e){const{timeout:n,easing:r,style:i={}}=t;return{duration:i.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function GQ(t){return oa("MuiCollapse",t)}na("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const VQ=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return sa(r,GQ,n)},HQ=_r("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(zi(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),qQ=_r("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),$Q=_r("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),iC=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiCollapse"}),{addEndListener:i,children:o,className:s,collapsedSize:a="0px",component:c,easing:h,in:d,onEnter:v,onEntered:w,onEntering:_,onExit:E,onExited:M,onExiting:D,orientation:A="vertical",style:F,timeout:O=mV.standard,TransitionComponent:N=Od,...H}=r,G={...r,orientation:A,collapsedSize:a},W=VQ(G),X=td(),K=AN(),k=Be.useRef(null),$=Be.useRef(),Q=typeof a=="number"?`${a}px`:a,ie=A==="horizontal",ae=ie?"width":"height",ce=Be.useRef(null),se=xu(n,ce),Se=De=>We=>{if(De){const Ae=ce.current;We===void 0?De(Ae):De(Ae,We)}},ye=()=>k.current?k.current[ie?"clientWidth":"clientHeight"]:0,Te=Se((De,We)=>{k.current&&ie&&(k.current.style.position="absolute"),De.style[ae]=Q,v&&v(De,We)}),pe=Se((De,We)=>{const Ae=ye();k.current&&ie&&(k.current.style.position="");const{duration:ut,easing:pt}=Ev({style:F,timeout:O,easing:h},{mode:"enter"});if(O==="auto"){const st=X.transitions.getAutoHeightDuration(Ae);De.style.transitionDuration=`${st}ms`,$.current=st}else De.style.transitionDuration=typeof ut=="string"?ut:`${ut}ms`;De.style[ae]=`${Ae}px`,De.style.transitionTimingFunction=pt,_&&_(De,We)}),Ie=Se((De,We)=>{De.style[ae]="auto",w&&w(De,We)}),me=Se(De=>{De.style[ae]=`${ye()}px`,E&&E(De)}),xe=Se(M),ve=Se(De=>{const We=ye(),{duration:Ae,easing:ut}=Ev({style:F,timeout:O,easing:h},{mode:"exit"});if(O==="auto"){const pt=X.transitions.getAutoHeightDuration(We);De.style.transitionDuration=`${pt}ms`,$.current=pt}else De.style.transitionDuration=typeof Ae=="string"?Ae:`${Ae}ms`;De.style[ae]=Q,De.style.transitionTimingFunction=ut,D&&D(De)}),Ee=De=>{O==="auto"&&K.start($.current||0,De),i&&i(ce.current,De)};return ke.jsx(N,{in:d,onEnter:Te,onEntered:Ie,onEntering:pe,onExit:me,onExited:xe,onExiting:ve,addEndListener:Ee,nodeRef:ce,timeout:O==="auto"?null:O,...H,children:(De,{ownerState:We,...Ae})=>ke.jsx(HQ,{as:c,className:Fr(W.root,s,{entered:W.entered,exited:!d&&Q==="0px"&&W.hidden}[De]),style:{[ie?"minWidth":"minHeight"]:Q,...F},ref:se,ownerState:{...G,state:De},...Ae,children:ke.jsx(qQ,{ownerState:{...G,state:De},className:W.wrapper,ref:k,children:ke.jsx($Q,{ownerState:{...G,state:De},className:W.wrapperInner,children:o})})})})});iC&&(iC.muiSupportAuto=!0);function WQ(t){return oa("MuiPaper",t)}na("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const XQ=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return sa(o,WQ,i)},YQ=_r("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(zi(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),wp=Be.forwardRef(function(e,n){var _;const r=ca({props:e,name:"MuiPaper"}),i=td(),{className:o,component:s="div",elevation:a=1,square:c=!1,variant:h="elevation",...d}=r,v={...r,component:s,elevation:a,square:c,variant:h},w=XQ(v);return ke.jsx(YQ,{as:s,ownerState:v,className:Fr(w.root,o),ref:n,...d,style:{...h==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":(_=i.vars.overlays)==null?void 0:_[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Io("#fff",NI(a))}, ${Io("#fff",NI(a))})`}},...d.style}})});function Fa(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,internalForwardedProps:s,shouldForwardComponentProp:a=!1,...c}=e,{component:h,slots:d={[t]:void 0},slotProps:v={[t]:void 0},...w}=o,_=d[t]||r,E=dV(v[t],i),{props:{component:M,...D},internalRef:A}=fV({className:n,...c,externalForwardedProps:t==="root"?w:void 0,externalSlotProps:E}),F=xu(A,E==null?void 0:E.ref,e.ref),O=t==="root"?M||h:M,N=hV(_,{...t==="root"&&!h&&!d[t]&&s,...t!=="root"&&!d[t]&&s,...D,...O&&!a&&{as:O},...O&&a&&{component:O},ref:F},i);return[_,N]}let ZQ=class BI{constructor(){Vg(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new BI}static use(){const e=lV(BI.create).current,[n,r]=Be.useState(!1);return e.shouldMount=n,e.setShouldMount=r,Be.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=JQ(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}};function KQ(){return ZQ.use()}function JQ(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function QQ(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:a,onExited:c,timeout:h}=t,[d,v]=Be.useState(!1),w=Fr(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),_={width:s,height:s,top:-(s/2)+o,left:-(s/2)+i},E=Fr(n.child,d&&n.childLeaving,r&&n.childPulsate);return!a&&!d&&v(!0),Be.useEffect(()=>{if(!a&&c!=null){const M=setTimeout(c,h);return()=>{clearTimeout(M)}}},[c,a,h]),ke.jsx("span",{className:w,style:_,children:ke.jsx("span",{className:E})})}const yd=na("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),zI=550,eee=80,tee=Wh`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,nee=Wh`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,ree=Wh`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,iee=_r("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),aee=_r(QQ,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${yd.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${tee};
    animation-duration: ${zI}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${yd.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${yd.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${yd.childLeaving} {
    opacity: 0;
    animation-name: ${nee};
    animation-duration: ${zI}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${yd.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${ree};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,oee=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s,...a}=r,[c,h]=Be.useState([]),d=Be.useRef(0),v=Be.useRef(null);Be.useEffect(()=>{v.current&&(v.current(),v.current=null)},[c]);const w=Be.useRef(!1),_=AN(),E=Be.useRef(null),M=Be.useRef(null),D=Be.useCallback(N=>{const{pulsate:H,rippleX:G,rippleY:W,rippleSize:X,cb:K}=N;h(k=>[...k,ke.jsx(aee,{classes:{ripple:Fr(o.ripple,yd.ripple),rippleVisible:Fr(o.rippleVisible,yd.rippleVisible),ripplePulsate:Fr(o.ripplePulsate,yd.ripplePulsate),child:Fr(o.child,yd.child),childLeaving:Fr(o.childLeaving,yd.childLeaving),childPulsate:Fr(o.childPulsate,yd.childPulsate)},timeout:zI,pulsate:H,rippleX:G,rippleY:W,rippleSize:X},d.current)]),d.current+=1,v.current=K},[o]),A=Be.useCallback((N={},H={},G=()=>{})=>{const{pulsate:W=!1,center:X=i||H.pulsate,fakeElement:K=!1}=H;if((N==null?void 0:N.type)==="mousedown"&&w.current){w.current=!1;return}(N==null?void 0:N.type)==="touchstart"&&(w.current=!0);const k=K?null:M.current,$=k?k.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Q,ie,ae;if(X||N===void 0||N.clientX===0&&N.clientY===0||!N.clientX&&!N.touches)Q=Math.round($.width/2),ie=Math.round($.height/2);else{const{clientX:ce,clientY:se}=N.touches&&N.touches.length>0?N.touches[0]:N;Q=Math.round(ce-$.left),ie=Math.round(se-$.top)}if(X)ae=Math.sqrt((2*$.width**2+$.height**2)/3),ae%2===0&&(ae+=1);else{const ce=Math.max(Math.abs((k?k.clientWidth:0)-Q),Q)*2+2,se=Math.max(Math.abs((k?k.clientHeight:0)-ie),ie)*2+2;ae=Math.sqrt(ce**2+se**2)}N!=null&&N.touches?E.current===null&&(E.current=()=>{D({pulsate:W,rippleX:Q,rippleY:ie,rippleSize:ae,cb:G})},_.start(eee,()=>{E.current&&(E.current(),E.current=null)})):D({pulsate:W,rippleX:Q,rippleY:ie,rippleSize:ae,cb:G})},[i,D,_]),F=Be.useCallback(()=>{A({},{pulsate:!0})},[A]),O=Be.useCallback((N,H)=>{if(_.clear(),(N==null?void 0:N.type)==="touchend"&&E.current){E.current(),E.current=null,_.start(0,()=>{O(N,H)});return}E.current=null,h(G=>G.length>0?G.slice(1):G),v.current=H},[_]);return Be.useImperativeHandle(n,()=>({pulsate:F,start:A,stop:O}),[F,A,O]),ke.jsx(iee,{className:Fr(yd.root,o.root,s),ref:M,...a,children:ke.jsx(mM,{component:null,exit:!0,children:c})})});function see(t){return oa("MuiButtonBase",t)}const lee=na("MuiButtonBase",["root","disabled","focusVisible"]),uee=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,s=sa({root:["root",e&&"disabled",n&&"focusVisible"]},see,i);return n&&r&&(s.root+=` ${r}`),s},cee=_r("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${lee.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Q0=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:c="button",disabled:h=!1,disableRipple:d=!1,disableTouchRipple:v=!1,focusRipple:w=!1,focusVisibleClassName:_,LinkComponent:E="a",onBlur:M,onClick:D,onContextMenu:A,onDragLeave:F,onFocus:O,onFocusVisible:N,onKeyDown:H,onKeyUp:G,onMouseDown:W,onMouseLeave:X,onMouseUp:K,onTouchEnd:k,onTouchMove:$,onTouchStart:Q,tabIndex:ie=0,TouchRippleProps:ae,touchRippleRef:ce,type:se,...Se}=r,ye=Be.useRef(null),Te=KQ(),pe=xu(Te.ref,ce),[Ie,me]=Be.useState(!1);h&&Ie&&me(!1),Be.useImperativeHandle(i,()=>({focusVisible:()=>{me(!0),ye.current.focus()}}),[]);const xe=Te.shouldMount&&!d&&!h;Be.useEffect(()=>{Ie&&w&&!d&&Te.pulsate()},[d,w,Ie,Te]);const ve=qg(Te,"start",W,v),Ee=qg(Te,"stop",A,v),De=qg(Te,"stop",F,v),We=qg(Te,"stop",K,v),Ae=qg(Te,"stop",Re=>{Ie&&Re.preventDefault(),X&&X(Re)},v),ut=qg(Te,"start",Q,v),pt=qg(Te,"stop",k,v),st=qg(Te,"stop",$,v),Ce=qg(Te,"stop",Re=>{nx(Re.target)||me(!1),M&&M(Re)},!1),It=zc(Re=>{ye.current||(ye.current=Re.currentTarget),nx(Re.target)&&(me(!0),N&&N(Re)),O&&O(Re)}),Ve=()=>{const Re=ye.current;return c&&c!=="button"&&!(Re.tagName==="A"&&Re.href)},yt=zc(Re=>{w&&!Re.repeat&&Ie&&Re.key===" "&&Te.stop(Re,()=>{Te.start(Re)}),Re.target===Re.currentTarget&&Ve()&&Re.key===" "&&Re.preventDefault(),H&&H(Re),Re.target===Re.currentTarget&&Ve()&&Re.key==="Enter"&&!h&&(Re.preventDefault(),D&&D(Re))}),Ze=zc(Re=>{w&&Re.key===" "&&Ie&&!Re.defaultPrevented&&Te.stop(Re,()=>{Te.pulsate(Re)}),G&&G(Re),D&&Re.target===Re.currentTarget&&Ve()&&Re.key===" "&&!Re.defaultPrevented&&D(Re)});let wt=c;wt==="button"&&(Se.href||Se.to)&&(wt=E);const Ut={};wt==="button"?(Ut.type=se===void 0?"button":se,Ut.disabled=h):(!Se.href&&!Se.to&&(Ut.role="button"),h&&(Ut["aria-disabled"]=h));const ht=xu(n,ye),qt={...r,centerRipple:o,component:c,disabled:h,disableRipple:d,disableTouchRipple:v,focusRipple:w,tabIndex:ie,focusVisible:Ie},Ye=uee(qt);return ke.jsxs(cee,{as:wt,className:Fr(Ye.root,a),ownerState:qt,onBlur:Ce,onClick:D,onContextMenu:Ee,onFocus:It,onKeyDown:yt,onKeyUp:Ze,onMouseDown:ve,onMouseLeave:Ae,onMouseUp:We,onDragLeave:De,onTouchEnd:pt,onTouchMove:st,onTouchStart:ut,ref:ht,tabIndex:h?-1:ie,type:se,...Ut,...Se,children:[s,xe?ke.jsx(oee,{ref:pe,center:o,...ae}):null]})});function qg(t,e,n,r=!1){return zc(i=>(n&&n(i),r||t[e](i),!0))}function hee(t){return typeof t.main=="string"}function fee(t,e=[]){if(!hee(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function al(t=[]){return([,e])=>e&&fee(e,t)}function dee(t){return oa("MuiCircularProgress",t)}na("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Ym=44,UI=Wh`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,jI=Wh`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,pee=typeof UI!="string"?Fv`
        animation: ${UI} 1.4s linear infinite;
      `:null,gee=typeof jI!="string"?Fv`
        animation: ${jI} 1.4s ease-in-out infinite;
      `:null,mee=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,o={root:["root",n,`color${vr(r)}`],svg:["svg"],circle:["circle",`circle${vr(n)}`,i&&"circleDisableShrink"]};return sa(o,dee,e)},vee=_r("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${vr(n.color)}`]]}})(zi(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:pee||{animation:`${UI} 1.4s linear infinite`}},...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),yee=_r("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),_ee=_r("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${vr(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(zi(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:gee||{animation:`${jI} 1.4s ease-in-out infinite`}}]}))),vM=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:s=!1,size:a=40,style:c,thickness:h=3.6,value:d=0,variant:v="indeterminate",...w}=r,_={...r,color:o,disableShrink:s,size:a,thickness:h,value:d,variant:v},E=mee(_),M={},D={},A={};if(v==="determinate"){const F=2*Math.PI*((Ym-h)/2);M.strokeDasharray=F.toFixed(3),A["aria-valuenow"]=Math.round(d),M.strokeDashoffset=`${((100-d)/100*F).toFixed(3)}px`,D.transform="rotate(-90deg)"}return ke.jsx(vee,{className:Fr(E.root,i),style:{width:a,height:a,...D,...c},ownerState:_,ref:n,role:"progressbar",...A,...w,children:ke.jsx(yee,{className:E.svg,ownerState:_,viewBox:`${Ym/2} ${Ym/2} ${Ym} ${Ym}`,children:ke.jsx(_ee,{className:E.circle,style:M,ownerState:_,cx:Ym,cy:Ym,r:(Ym-h)/2,fill:"none",strokeWidth:h})})})});function xee(t){return oa("MuiIconButton",t)}const EF=na("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),bee=t=>{const{classes:e,disabled:n,color:r,edge:i,size:o,loading:s}=t,a={root:["root",s&&"loading",n&&"disabled",r!=="default"&&`color${vr(r)}`,i&&`edge${vr(i)}`,`size${vr(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return sa(a,xee,e)},wee=_r(Q0,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${vr(n.color)}`],n.edge&&e[`edge${vr(n.edge)}`],e[`size${vr(n.size)}`]]}})(zi(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Io(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),zi(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.vars?`rgba(${(t.vars||t).palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Io((t.vars||t).palette[e].main,t.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${EF.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${EF.loading}`]:{color:"transparent"}}))),See=_r("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(t,e)=>e.loadingIndicator})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),O2=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiIconButton"}),{edge:i=!1,children:o,className:s,color:a="default",disabled:c=!1,disableFocusRipple:h=!1,size:d="medium",id:v,loading:w=null,loadingIndicator:_,...E}=r,M=Px(v),D=_??ke.jsx(vM,{"aria-labelledby":M,color:"inherit",size:16}),A={...r,edge:i,color:a,disabled:c,disableFocusRipple:h,loading:w,loadingIndicator:D,size:d},F=bee(A);return ke.jsxs(wee,{id:w?M:v,className:Fr(F.root,s),centerRipple:!0,focusRipple:!h,disabled:c||w,ref:n,...E,ownerState:A,children:[typeof w=="boolean"&&ke.jsx("span",{className:F.loadingWrapper,style:{display:"contents"},children:ke.jsx(See,{className:F.loadingIndicator,ownerState:A,children:w&&D})}),o]})}),Eee=fs(ke.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function Tee(t){return oa("MuiTypography",t)}const TF=na("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Cee={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Mee=IQ(),Aee=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=t,a={root:["root",o,t.align!=="inherit"&&`align${vr(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return sa(a,Tee,s)},Ree=_r("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${vr(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(zi(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(al()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${vr(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),CF={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},uo=Be.forwardRef(function(e,n){const{color:r,...i}=ca({props:e,name:"MuiTypography"}),o=!Cee[r],s=Mee({...i,...o&&{color:r}}),{align:a="inherit",className:c,component:h,gutterBottom:d=!1,noWrap:v=!1,paragraph:w=!1,variant:_="body1",variantMapping:E=CF,...M}=s,D={...s,align:a,color:r,className:c,component:h,gutterBottom:d,noWrap:v,paragraph:w,variant:_,variantMapping:E},A=h||(w?"p":E[_]||CF[_])||"span",F=Aee(D);return ke.jsx(Ree,{as:A,ref:n,className:Fr(F.root,c),...M,ownerState:D,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...M.style}})});function Pee(t){return oa("MuiAppBar",t)}na("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Iee=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${vr(e)}`,`position${vr(n)}`]};return sa(i,Pee,r)},MF=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,Dee=_r(wp,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${vr(n.position)}`],e[`color${vr(n.color)}`]]}})(zi(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(al(["contrastText"])).map(([e])=>({props:{color:e},style:{"--AppBar-background":(t.vars??t).palette[e].main,"--AppBar-color":(t.vars??t).palette[e].contrastText}})),{props:e=>e.enableColorOnDark===!0&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>e.enableColorOnDark===!1&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?MF(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?MF(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),Lee=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:s=!1,position:a="fixed",...c}=r,h={...r,color:o,position:a,enableColorOnDark:s},d=Iee(h);return ke.jsx(Dee,{square:!0,component:"header",ownerState:h,elevation:4,className:Fr(d.root,i,a==="fixed"&&"mui-fixed"),ref:n,...c})});function AF(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function Nee(t={}){const{ignoreAccents:e=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:s=!1}=t;return(a,{inputValue:c,getOptionLabel:h})=>{let d=s?c.trim():c;n&&(d=d.toLowerCase()),e&&(d=AF(d));const v=d?a.filter(w=>{let _=(o||h)(w);return n&&(_=_.toLowerCase()),e&&(_=AF(_)),i==="start"?_.startsWith(d):_.includes(d)}):a;return typeof r=="number"?v.slice(0,r):v}}const kee=Nee(),Oee=5,Fee=t=>{var e;return t.current!==null&&((e=t.current.parentElement)==null?void 0:e.contains(document.activeElement))},Bee=[];function RF(t,e,n){if(e||t==null)return"";const r=n(t);return typeof r=="string"?r:""}function zee(t){const{unstable_isActiveElementInListbox:e=Fee,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:i=!1,autoSelect:o=!1,blurOnSelect:s=!1,clearOnBlur:a=!t.freeSolo,clearOnEscape:c=!1,componentName:h="useAutocomplete",defaultValue:d=t.multiple?Bee:null,disableClearable:v=!1,disableCloseOnSelect:w=!1,disabled:_,disabledItemsFocusable:E=!1,disableListWrap:M=!1,filterOptions:D=kee,filterSelectedOptions:A=!1,freeSolo:F=!1,getOptionDisabled:O,getOptionKey:N,getOptionLabel:H=zn=>zn.label??zn,groupBy:G,handleHomeEndKeys:W=!t.freeSolo,id:X,includeInputInList:K=!1,inputValue:k,isOptionEqualToValue:$=(zn,En)=>zn===En,multiple:Q=!1,onChange:ie,onClose:ae,onHighlightChange:ce,onInputChange:se,onOpen:Se,open:ye,openOnFocus:Te=!1,options:pe,readOnly:Ie=!1,selectOnFocus:me=!t.freeSolo,value:xe}=t,ve=Px(X);let Ee=H;Ee=zn=>{const En=H(zn);return typeof En!="string"?String(En):En};const De=Be.useRef(!1),We=Be.useRef(!0),Ae=Be.useRef(null),ut=Be.useRef(null),[pt,st]=Be.useState(null),[Ce,It]=Be.useState(-1),Ve=i?0:-1,yt=Be.useRef(Ve),Ze=Be.useRef(RF(d??xe,Q,Ee)).current,[wt,Ut]=V0({controlled:xe,default:d,name:h}),[ht,qt]=V0({controlled:k,default:Ze,name:h,state:"inputValue"}),[Ye,Re]=Be.useState(!1),Pt=Be.useCallback((zn,En,mr)=>{if(!(Q?wt.length<En.length:En!==null)&&!a)return;const _i=RF(En,Q,Ee);ht!==_i&&(qt(_i),se&&se(zn,_i,mr))},[Ee,ht,Q,se,qt,a,wt]),[Dt,At]=V0({controlled:ye,default:!1,name:h,state:"open"}),[Bt,gn]=Be.useState(!0),Zt=!Q&&wt!=null&&ht===Ee(wt),cn=Dt&&!Ie,$t=cn?D(pe.filter(zn=>!(A&&(Q?wt:[wt]).some(En=>En!==null&&$(zn,En)))),{inputValue:Zt&&Bt?"":ht,getOptionLabel:Ee}):[],Et=GJ({filteredOptions:$t,value:wt,inputValue:ht});Be.useEffect(()=>{const zn=wt!==Et.value;Ye&&!zn||F&&!zn||Pt(null,wt,"reset")},[wt,Pt,Ye,Et.value,F]);const qn=Dt&&$t.length>0&&!Ie,Dn=zc(zn=>{zn===-1?Ae.current.focus():pt.querySelector(`[data-tag-index="${zn}"]`).focus()});Be.useEffect(()=>{Q&&Ce>wt.length-1&&(It(-1),Dn(-1))},[wt,Q,Ce,Dn]);function sr(zn,En){if(!ut.current||zn<0||zn>=$t.length)return-1;let mr=zn;for(;;){const yi=ut.current.querySelector(`[data-option-index="${mr}"]`),_i=E?!1:!yi||yi.disabled||yi.getAttribute("aria-disabled")==="true";if(yi&&yi.hasAttribute("tabindex")&&!_i)return mr;if(En==="next"?mr=(mr+1)%$t.length:mr=(mr-1+$t.length)%$t.length,mr===zn)return-1}}const rt=zc(({event:zn,index:En,reason:mr})=>{if(yt.current=En,En===-1?Ae.current.removeAttribute("aria-activedescendant"):Ae.current.setAttribute("aria-activedescendant",`${ve}-option-${En}`),ce&&["mouse","keyboard","touch"].includes(mr)&&ce(zn,En===-1?null:$t[En],mr),!ut.current)return;const yi=ut.current.querySelector(`[role="option"].${n}-focused`);yi&&(yi.classList.remove(`${n}-focused`),yi.classList.remove(`${n}-focusVisible`));let _i=ut.current;if(ut.current.getAttribute("role")!=="listbox"&&(_i=ut.current.parentElement.querySelector('[role="listbox"]')),!_i)return;if(En===-1){_i.scrollTop=0;return}const gi=ut.current.querySelector(`[data-option-index="${En}"]`);if(gi&&(gi.classList.add(`${n}-focused`),mr==="keyboard"&&gi.classList.add(`${n}-focusVisible`),_i.scrollHeight>_i.clientHeight&&mr!=="mouse"&&mr!=="touch")){const lt=gi,yn=_i.clientHeight+_i.scrollTop,Ln=lt.offsetTop+lt.offsetHeight;Ln>yn?_i.scrollTop=Ln-_i.clientHeight:lt.offsetTop-lt.offsetHeight*(G?1.3:0)<_i.scrollTop&&(_i.scrollTop=lt.offsetTop-lt.offsetHeight*(G?1.3:0))}}),ze=zc(({event:zn,diff:En,direction:mr="next",reason:yi})=>{if(!cn)return;const gi=sr((()=>{const lt=$t.length-1;if(En==="reset")return Ve;if(En==="start")return 0;if(En==="end")return lt;const yn=yt.current+En;return yn<0?yn===-1&&K?-1:M&&yt.current!==-1||Math.abs(En)>1?0:lt:yn>lt?yn===lt+1&&K?-1:M||Math.abs(En)>1?lt:0:yn})(),mr);if(rt({index:gi,reason:yi,event:zn}),r&&En!=="reset")if(gi===-1)Ae.current.value=ht;else{const lt=Ee($t[gi]);Ae.current.value=lt,lt.toLowerCase().indexOf(ht.toLowerCase())===0&&ht.length>0&&Ae.current.setSelectionRange(ht.length,lt.length)}}),Xe=()=>{const zn=(En,mr)=>{const yi=En?Ee(En):"",_i=mr?Ee(mr):"";return yi===_i};if(yt.current!==-1&&Et.filteredOptions&&Et.filteredOptions.length!==$t.length&&Et.inputValue===ht&&(Q?wt.length===Et.value.length&&Et.value.every((En,mr)=>Ee(wt[mr])===Ee(En)):zn(Et.value,wt))){const En=Et.filteredOptions[yt.current];if(En)return $t.findIndex(mr=>Ee(mr)===Ee(En))}return-1},Fe=Be.useCallback(()=>{if(!cn)return;const zn=Xe();if(zn!==-1){yt.current=zn;return}const En=Q?wt[0]:wt;if($t.length===0||En==null){ze({diff:"reset"});return}if(ut.current){if(En!=null){const mr=$t[yt.current];if(Q&&mr&&wt.findIndex(_i=>$(mr,_i))!==-1)return;const yi=$t.findIndex(_i=>$(_i,En));yi===-1?ze({diff:"reset"}):rt({index:yi});return}if(yt.current>=$t.length-1){rt({index:$t.length-1});return}rt({index:yt.current})}},[$t.length,Q?!1:wt,A,ze,rt,cn,ht,Q]),He=zc(zn=>{DI(ut,zn),zn&&Fe()});Be.useEffect(()=>{Fe()},[Fe]);const mt=zn=>{Dt||(At(!0),gn(!0),Se&&Se(zn))},it=(zn,En)=>{Dt&&(At(!1),ae&&ae(zn,En))},xt=(zn,En,mr,yi)=>{if(Q){if(wt.length===En.length&&wt.every((_i,gi)=>_i===En[gi]))return}else if(wt===En)return;ie&&ie(zn,En,mr,yi),Ut(En)},Tt=Be.useRef(!1),kt=(zn,En,mr="selectOption",yi="options")=>{let _i=mr,gi=En;if(Q){gi=Array.isArray(wt)?wt.slice():[];const lt=gi.findIndex(yn=>$(En,yn));lt===-1?gi.push(En):yi!=="freeSolo"&&(gi.splice(lt,1),_i="removeOption")}Pt(zn,gi,_i),xt(zn,gi,_i,{option:En}),!w&&(!zn||!zn.ctrlKey&&!zn.metaKey)&&it(zn,_i),(s===!0||s==="touch"&&Tt.current||s==="mouse"&&!Tt.current)&&Ae.current.blur()};function Jt(zn,En){if(zn===-1)return-1;let mr=zn;for(;;){if(En==="next"&&mr===wt.length||En==="previous"&&mr===-1)return-1;const yi=pt.querySelector(`[data-tag-index="${mr}"]`);if(!yi||!yi.hasAttribute("tabindex")||yi.disabled||yi.getAttribute("aria-disabled")==="true")mr+=En==="next"?1:-1;else return mr}}const rn=(zn,En)=>{if(!Q)return;ht===""&&it(zn,"toggleInput");let mr=Ce;Ce===-1?ht===""&&En==="previous"&&(mr=wt.length-1):(mr+=En==="next"?1:-1,mr<0&&(mr=0),mr===wt.length&&(mr=-1)),mr=Jt(mr,En),It(mr),Dn(mr)},Yt=zn=>{De.current=!0,qt(""),se&&se(zn,"","clear"),xt(zn,Q?[]:null,"clear")},Qn=zn=>En=>{if(zn.onKeyDown&&zn.onKeyDown(En),!En.defaultMuiPrevented&&(Ce!==-1&&!["ArrowLeft","ArrowRight"].includes(En.key)&&(It(-1),Dn(-1)),En.which!==229))switch(En.key){case"Home":cn&&W&&(En.preventDefault(),ze({diff:"start",direction:"next",reason:"keyboard",event:En}));break;case"End":cn&&W&&(En.preventDefault(),ze({diff:"end",direction:"previous",reason:"keyboard",event:En}));break;case"PageUp":En.preventDefault(),ze({diff:-5,direction:"previous",reason:"keyboard",event:En}),mt(En);break;case"PageDown":En.preventDefault(),ze({diff:Oee,direction:"next",reason:"keyboard",event:En}),mt(En);break;case"ArrowDown":En.preventDefault(),ze({diff:1,direction:"next",reason:"keyboard",event:En}),mt(En);break;case"ArrowUp":En.preventDefault(),ze({diff:-1,direction:"previous",reason:"keyboard",event:En}),mt(En);break;case"ArrowLeft":rn(En,"previous");break;case"ArrowRight":rn(En,"next");break;case"Enter":if(yt.current!==-1&&cn){const mr=$t[yt.current],yi=O?O(mr):!1;if(En.preventDefault(),yi)return;kt(En,mr,"selectOption"),r&&Ae.current.setSelectionRange(Ae.current.value.length,Ae.current.value.length)}else F&&ht!==""&&Zt===!1&&(Q&&En.preventDefault(),kt(En,ht,"createOption","freeSolo"));break;case"Escape":cn?(En.preventDefault(),En.stopPropagation(),it(En,"escape")):c&&(ht!==""||Q&&wt.length>0)&&(En.preventDefault(),En.stopPropagation(),Yt(En));break;case"Backspace":if(Q&&!Ie&&ht===""&&wt.length>0){const mr=Ce===-1?wt.length-1:Ce,yi=wt.slice();yi.splice(mr,1),xt(En,yi,"removeOption",{option:wt[mr]})}break;case"Delete":if(Q&&!Ie&&ht===""&&wt.length>0&&Ce!==-1){const mr=Ce,yi=wt.slice();yi.splice(mr,1),xt(En,yi,"removeOption",{option:wt[mr]})}break}},An=zn=>{Re(!0),Te&&!De.current&&mt(zn)},jt=zn=>{if(e(ut)){Ae.current.focus();return}Re(!1),We.current=!0,De.current=!1,o&&yt.current!==-1&&cn?kt(zn,$t[yt.current],"blur"):o&&F&&ht!==""?kt(zn,ht,"blur","freeSolo"):a&&Pt(zn,wt,"blur"),it(zn,"blur")},Pe=zn=>{const En=zn.target.value;ht!==En&&(qt(En),gn(!1),se&&se(zn,En,"input")),En===""?!v&&!Q&&xt(zn,null,"clear"):mt(zn)},je=zn=>{const En=Number(zn.currentTarget.getAttribute("data-option-index"));yt.current!==En&&rt({event:zn,index:En,reason:"mouse"})},_t=zn=>{rt({event:zn,index:Number(zn.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Tt.current=!0},Qt=zn=>{const En=Number(zn.currentTarget.getAttribute("data-option-index"));kt(zn,$t[En],"selectOption"),Tt.current=!1},en=zn=>En=>{const mr=wt.slice();mr.splice(zn,1),xt(En,mr,"removeOption",{option:wt[zn]})},Fn=zn=>{Dt?it(zn,"toggleInput"):mt(zn)},Wn=zn=>{zn.currentTarget.contains(zn.target)&&zn.target.getAttribute("id")!==ve&&zn.preventDefault()},kr=zn=>{zn.currentTarget.contains(zn.target)&&(Ae.current.focus(),me&&We.current&&Ae.current.selectionEnd-Ae.current.selectionStart===0&&Ae.current.select(),We.current=!1)},Qr=zn=>{!_&&(ht===""||!Dt)&&Fn(zn)};let vi=F&&ht.length>0;vi=vi||(Q?wt.length>0:wt!==null);let zr=$t;return G&&(zr=$t.reduce((zn,En,mr)=>{const yi=G(En);return zn.length>0&&zn[zn.length-1].group===yi?zn[zn.length-1].options.push(En):zn.push({key:mr,index:mr,group:yi,options:[En]}),zn},[])),_&&Ye&&jt(),{getRootProps:(zn={})=>({...zn,onKeyDown:Qn(zn),onMouseDown:Wn,onClick:kr}),getInputLabelProps:()=>({id:`${ve}-label`,htmlFor:ve}),getInputProps:()=>({id:ve,value:ht,onBlur:jt,onFocus:An,onChange:Pe,onMouseDown:Qr,"aria-activedescendant":cn?"":null,"aria-autocomplete":r?"both":"list","aria-controls":qn?`${ve}-listbox`:void 0,"aria-expanded":qn,autoComplete:"off",ref:Ae,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:_}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Yt}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Fn}),getTagProps:({index:zn})=>({key:zn,"data-tag-index":zn,tabIndex:-1,...!Ie&&{onDelete:en(zn)}}),getListboxProps:()=>({role:"listbox",id:`${ve}-listbox`,"aria-labelledby":`${ve}-label`,ref:He,onMouseDown:zn=>{zn.preventDefault()}}),getOptionProps:({index:zn,option:En})=>{const mr=(Q?wt:[wt]).some(_i=>_i!=null&&$(En,_i)),yi=O?O(En):!1;return{key:(N==null?void 0:N(En))??Ee(En),tabIndex:-1,role:"option",id:`${ve}-option-${zn}`,onMouseMove:je,onClick:Qt,onTouchStart:_t,"data-option-index":zn,"aria-disabled":yi,"aria-selected":mr}},id:ve,inputValue:ht,value:wt,dirty:vi,expanded:cn&&pt,popupOpen:cn,focused:Ye||Ce!==-1,anchorEl:pt,setAnchorEl:st,focusedTag:Ce,groupedOptions:zr}}var gf="top",Pd="bottom",Id="right",mf="left",kN="auto",qw=[gf,Pd,Id,mf],rx="start",uw="end",Uee="clippingParents",EV="viewport",Vb="popper",jee="reference",PF=qw.reduce(function(t,e){return t.concat([e+"-"+rx,e+"-"+uw])},[]),TV=[].concat(qw,[kN]).reduce(function(t,e){return t.concat([e,e+"-"+rx,e+"-"+uw])},[]),Gee="beforeRead",Vee="read",Hee="afterRead",qee="beforeMain",$ee="main",Wee="afterMain",Xee="beforeWrite",Yee="write",Zee="afterWrite",Kee=[Gee,Vee,Hee,qee,$ee,Wee,Xee,Yee,Zee];function hg(t){return t?(t.nodeName||"").toLowerCase():null}function Yf(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ey(t){var e=Yf(t).Element;return t instanceof e||t instanceof Element}function Cd(t){var e=Yf(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ON(t){if(typeof ShadowRoot>"u")return!1;var e=Yf(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Jee(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!Cd(o)||!hg(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function Qee(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(c,h){return c[h]="",c},{});!Cd(i)||!hg(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(c){i.removeAttribute(c)}))})}}const ete={name:"applyStyles",enabled:!0,phase:"write",fn:Jee,effect:Qee,requires:["computeStyles"]};function og(t){return t.split("-")[0]}var H0=Math.max,aC=Math.min,ix=Math.round;function GI(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function CV(){return!/^((?!chrome|android).)*safari/i.test(GI())}function ax(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&Cd(t)&&(i=t.offsetWidth>0&&ix(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&ix(r.height)/t.offsetHeight||1);var s=ey(t)?Yf(t):window,a=s.visualViewport,c=!CV()&&n,h=(r.left+(c&&a?a.offsetLeft:0))/i,d=(r.top+(c&&a?a.offsetTop:0))/o,v=r.width/i,w=r.height/o;return{width:v,height:w,top:d,right:h+v,bottom:d+w,left:h,x:h,y:d}}function FN(t){var e=ax(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function MV(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ON(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function mm(t){return Yf(t).getComputedStyle(t)}function tte(t){return["table","td","th"].indexOf(hg(t))>=0}function Bv(t){return((ey(t)?t.ownerDocument:t.document)||window.document).documentElement}function yM(t){return hg(t)==="html"?t:t.assignedSlot||t.parentNode||(ON(t)?t.host:null)||Bv(t)}function IF(t){return!Cd(t)||mm(t).position==="fixed"?null:t.offsetParent}function nte(t){var e=/firefox/i.test(GI()),n=/Trident/i.test(GI());if(n&&Cd(t)){var r=mm(t);if(r.position==="fixed")return null}var i=yM(t);for(ON(i)&&(i=i.host);Cd(i)&&["html","body"].indexOf(hg(i))<0;){var o=mm(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function $w(t){for(var e=Yf(t),n=IF(t);n&&tte(n)&&mm(n).position==="static";)n=IF(n);return n&&(hg(n)==="html"||hg(n)==="body"&&mm(n).position==="static")?e:n||nte(t)||e}function BN(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function F2(t,e,n){return H0(t,aC(e,n))}function rte(t,e,n){var r=F2(t,e,n);return r>n?n:r}function AV(){return{top:0,right:0,bottom:0,left:0}}function RV(t){return Object.assign({},AV(),t)}function PV(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var ite=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,RV(typeof e!="number"?e:PV(e,qw))};function ate(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=og(n.placement),c=BN(a),h=[mf,Id].indexOf(a)>=0,d=h?"height":"width";if(!(!o||!s)){var v=ite(i.padding,n),w=FN(o),_=c==="y"?gf:mf,E=c==="y"?Pd:Id,M=n.rects.reference[d]+n.rects.reference[c]-s[c]-n.rects.popper[d],D=s[c]-n.rects.reference[c],A=$w(o),F=A?c==="y"?A.clientHeight||0:A.clientWidth||0:0,O=M/2-D/2,N=v[_],H=F-w[d]-v[E],G=F/2-w[d]/2+O,W=F2(N,G,H),X=c;n.modifiersData[r]=(e={},e[X]=W,e.centerOffset=W-G,e)}}function ote(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||MV(e.elements.popper,i)&&(e.elements.arrow=i))}const ste={name:"arrow",enabled:!0,phase:"main",fn:ate,effect:ote,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ox(t){return t.split("-")[1]}var lte={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ute(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:ix(n*i)/i||0,y:ix(r*i)/i||0}}function DF(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,c=t.gpuAcceleration,h=t.adaptive,d=t.roundOffsets,v=t.isFixed,w=s.x,_=w===void 0?0:w,E=s.y,M=E===void 0?0:E,D=typeof d=="function"?d({x:_,y:M}):{x:_,y:M};_=D.x,M=D.y;var A=s.hasOwnProperty("x"),F=s.hasOwnProperty("y"),O=mf,N=gf,H=window;if(h){var G=$w(n),W="clientHeight",X="clientWidth";if(G===Yf(n)&&(G=Bv(n),mm(G).position!=="static"&&a==="absolute"&&(W="scrollHeight",X="scrollWidth")),G=G,i===gf||(i===mf||i===Id)&&o===uw){N=Pd;var K=v&&G===H&&H.visualViewport?H.visualViewport.height:G[W];M-=K-r.height,M*=c?1:-1}if(i===mf||(i===gf||i===Pd)&&o===uw){O=Id;var k=v&&G===H&&H.visualViewport?H.visualViewport.width:G[X];_-=k-r.width,_*=c?1:-1}}var $=Object.assign({position:a},h&&lte),Q=d===!0?ute({x:_,y:M},Yf(n)):{x:_,y:M};if(_=Q.x,M=Q.y,c){var ie;return Object.assign({},$,(ie={},ie[N]=F?"0":"",ie[O]=A?"0":"",ie.transform=(H.devicePixelRatio||1)<=1?"translate("+_+"px, "+M+"px)":"translate3d("+_+"px, "+M+"px, 0)",ie))}return Object.assign({},$,(e={},e[N]=F?M+"px":"",e[O]=A?_+"px":"",e.transform="",e))}function cte(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,c=a===void 0?!0:a,h={placement:og(e.placement),variation:ox(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,DF(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,DF(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const hte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:cte,data:{}};var KS={passive:!0};function fte(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,c=Yf(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&h.forEach(function(d){d.addEventListener("scroll",n.update,KS)}),a&&c.addEventListener("resize",n.update,KS),function(){o&&h.forEach(function(d){d.removeEventListener("scroll",n.update,KS)}),a&&c.removeEventListener("resize",n.update,KS)}}const dte={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:fte,data:{}};var pte={left:"right",right:"left",bottom:"top",top:"bottom"};function TT(t){return t.replace(/left|right|bottom|top/g,function(e){return pte[e]})}var gte={start:"end",end:"start"};function LF(t){return t.replace(/start|end/g,function(e){return gte[e]})}function zN(t){var e=Yf(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function UN(t){return ax(Bv(t)).left+zN(t).scrollLeft}function mte(t,e){var n=Yf(t),r=Bv(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;var h=CV();(h||!h&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a+UN(t),y:c}}function vte(t){var e,n=Bv(t),r=zN(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=H0(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=H0(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+UN(t),c=-r.scrollTop;return mm(i||n).direction==="rtl"&&(a+=H0(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}function jN(t){var e=mm(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function IV(t){return["html","body","#document"].indexOf(hg(t))>=0?t.ownerDocument.body:Cd(t)&&jN(t)?t:IV(yM(t))}function B2(t,e){var n;e===void 0&&(e=[]);var r=IV(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Yf(r),s=i?[o].concat(o.visualViewport||[],jN(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(B2(yM(s)))}function VI(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function yte(t,e){var n=ax(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function NF(t,e,n){return e===EV?VI(mte(t,n)):ey(e)?yte(e,n):VI(vte(Bv(t)))}function _te(t){var e=B2(yM(t)),n=["absolute","fixed"].indexOf(mm(t).position)>=0,r=n&&Cd(t)?$w(t):t;return ey(r)?e.filter(function(i){return ey(i)&&MV(i,r)&&hg(i)!=="body"}):[]}function xte(t,e,n,r){var i=e==="clippingParents"?_te(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(c,h){var d=NF(t,h,r);return c.top=H0(d.top,c.top),c.right=aC(d.right,c.right),c.bottom=aC(d.bottom,c.bottom),c.left=H0(d.left,c.left),c},NF(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function DV(t){var e=t.reference,n=t.element,r=t.placement,i=r?og(r):null,o=r?ox(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,c;switch(i){case gf:c={x:s,y:e.y-n.height};break;case Pd:c={x:s,y:e.y+e.height};break;case Id:c={x:e.x+e.width,y:a};break;case mf:c={x:e.x-n.width,y:a};break;default:c={x:e.x,y:e.y}}var h=i?BN(i):null;if(h!=null){var d=h==="y"?"height":"width";switch(o){case rx:c[h]=c[h]-(e[d]/2-n[d]/2);break;case uw:c[h]=c[h]+(e[d]/2-n[d]/2);break}}return c}function cw(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,c=a===void 0?Uee:a,h=n.rootBoundary,d=h===void 0?EV:h,v=n.elementContext,w=v===void 0?Vb:v,_=n.altBoundary,E=_===void 0?!1:_,M=n.padding,D=M===void 0?0:M,A=RV(typeof D!="number"?D:PV(D,qw)),F=w===Vb?jee:Vb,O=t.rects.popper,N=t.elements[E?F:w],H=xte(ey(N)?N:N.contextElement||Bv(t.elements.popper),c,d,s),G=ax(t.elements.reference),W=DV({reference:G,element:O,placement:i}),X=VI(Object.assign({},O,W)),K=w===Vb?X:G,k={top:H.top-K.top+A.top,bottom:K.bottom-H.bottom+A.bottom,left:H.left-K.left+A.left,right:K.right-H.right+A.right},$=t.modifiersData.offset;if(w===Vb&&$){var Q=$[i];Object.keys(k).forEach(function(ie){var ae=[Id,Pd].indexOf(ie)>=0?1:-1,ce=[gf,Pd].indexOf(ie)>=0?"y":"x";k[ie]+=Q[ce]*ae})}return k}function bte(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,h=c===void 0?TV:c,d=ox(r),v=d?a?PF:PF.filter(function(E){return ox(E)===d}):qw,w=v.filter(function(E){return h.indexOf(E)>=0});w.length===0&&(w=v);var _=w.reduce(function(E,M){return E[M]=cw(t,{placement:M,boundary:i,rootBoundary:o,padding:s})[og(M)],E},{});return Object.keys(_).sort(function(E,M){return _[E]-_[M]})}function wte(t){if(og(t)===kN)return[];var e=TT(t);return[LF(t),e,LF(e)]}function Ste(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,c=n.fallbackPlacements,h=n.padding,d=n.boundary,v=n.rootBoundary,w=n.altBoundary,_=n.flipVariations,E=_===void 0?!0:_,M=n.allowedAutoPlacements,D=e.options.placement,A=og(D),F=A===D,O=c||(F||!E?[TT(D)]:wte(D)),N=[D].concat(O).reduce(function(ve,Ee){return ve.concat(og(Ee)===kN?bte(e,{placement:Ee,boundary:d,rootBoundary:v,padding:h,flipVariations:E,allowedAutoPlacements:M}):Ee)},[]),H=e.rects.reference,G=e.rects.popper,W=new Map,X=!0,K=N[0],k=0;k<N.length;k++){var $=N[k],Q=og($),ie=ox($)===rx,ae=[gf,Pd].indexOf(Q)>=0,ce=ae?"width":"height",se=cw(e,{placement:$,boundary:d,rootBoundary:v,altBoundary:w,padding:h}),Se=ae?ie?Id:mf:ie?Pd:gf;H[ce]>G[ce]&&(Se=TT(Se));var ye=TT(Se),Te=[];if(o&&Te.push(se[Q]<=0),a&&Te.push(se[Se]<=0,se[ye]<=0),Te.every(function(ve){return ve})){K=$,X=!1;break}W.set($,Te)}if(X)for(var pe=E?3:1,Ie=function(Ee){var De=N.find(function(We){var Ae=W.get(We);if(Ae)return Ae.slice(0,Ee).every(function(ut){return ut})});if(De)return K=De,"break"},me=pe;me>0;me--){var xe=Ie(me);if(xe==="break")break}e.placement!==K&&(e.modifiersData[r]._skip=!0,e.placement=K,e.reset=!0)}}const Ete={name:"flip",enabled:!0,phase:"main",fn:Ste,requiresIfExists:["offset"],data:{_skip:!1}};function kF(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function OF(t){return[gf,Id,Pd,mf].some(function(e){return t[e]>=0})}function Tte(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=cw(e,{elementContext:"reference"}),a=cw(e,{altBoundary:!0}),c=kF(s,r),h=kF(a,i,o),d=OF(c),v=OF(h);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:h,isReferenceHidden:d,hasPopperEscaped:v},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":v})}const Cte={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Tte};function Mte(t,e,n){var r=og(t),i=[mf,gf].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[mf,Id].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function Ate(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=TV.reduce(function(d,v){return d[v]=Mte(v,e.rects,o),d},{}),a=s[e.placement],c=a.x,h=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=h),e.modifiersData[r]=s}const Rte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ate};function Pte(t){var e=t.state,n=t.name;e.modifiersData[n]=DV({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Ite={name:"popperOffsets",enabled:!0,phase:"read",fn:Pte,data:{}};function Dte(t){return t==="x"?"y":"x"}function Lte(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,v=n.padding,w=n.tether,_=w===void 0?!0:w,E=n.tetherOffset,M=E===void 0?0:E,D=cw(e,{boundary:c,rootBoundary:h,padding:v,altBoundary:d}),A=og(e.placement),F=ox(e.placement),O=!F,N=BN(A),H=Dte(N),G=e.modifiersData.popperOffsets,W=e.rects.reference,X=e.rects.popper,K=typeof M=="function"?M(Object.assign({},e.rects,{placement:e.placement})):M,k=typeof K=="number"?{mainAxis:K,altAxis:K}:Object.assign({mainAxis:0,altAxis:0},K),$=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Q={x:0,y:0};if(G){if(o){var ie,ae=N==="y"?gf:mf,ce=N==="y"?Pd:Id,se=N==="y"?"height":"width",Se=G[N],ye=Se+D[ae],Te=Se-D[ce],pe=_?-X[se]/2:0,Ie=F===rx?W[se]:X[se],me=F===rx?-X[se]:-W[se],xe=e.elements.arrow,ve=_&&xe?FN(xe):{width:0,height:0},Ee=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:AV(),De=Ee[ae],We=Ee[ce],Ae=F2(0,W[se],ve[se]),ut=O?W[se]/2-pe-Ae-De-k.mainAxis:Ie-Ae-De-k.mainAxis,pt=O?-W[se]/2+pe+Ae+We+k.mainAxis:me+Ae+We+k.mainAxis,st=e.elements.arrow&&$w(e.elements.arrow),Ce=st?N==="y"?st.clientTop||0:st.clientLeft||0:0,It=(ie=$==null?void 0:$[N])!=null?ie:0,Ve=Se+ut-It-Ce,yt=Se+pt-It,Ze=F2(_?aC(ye,Ve):ye,Se,_?H0(Te,yt):Te);G[N]=Ze,Q[N]=Ze-Se}if(a){var wt,Ut=N==="x"?gf:mf,ht=N==="x"?Pd:Id,qt=G[H],Ye=H==="y"?"height":"width",Re=qt+D[Ut],Pt=qt-D[ht],Dt=[gf,mf].indexOf(A)!==-1,At=(wt=$==null?void 0:$[H])!=null?wt:0,Bt=Dt?Re:qt-W[Ye]-X[Ye]-At+k.altAxis,gn=Dt?qt+W[Ye]+X[Ye]-At-k.altAxis:Pt,Zt=_&&Dt?rte(Bt,qt,gn):F2(_?Bt:Re,qt,_?gn:Pt);G[H]=Zt,Q[H]=Zt-qt}e.modifiersData[r]=Q}}const Nte={name:"preventOverflow",enabled:!0,phase:"main",fn:Lte,requiresIfExists:["offset"]};function kte(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Ote(t){return t===Yf(t)||!Cd(t)?zN(t):kte(t)}function Fte(t){var e=t.getBoundingClientRect(),n=ix(e.width)/t.offsetWidth||1,r=ix(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Bte(t,e,n){n===void 0&&(n=!1);var r=Cd(e),i=Cd(e)&&Fte(e),o=Bv(e),s=ax(t,i,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((hg(e)!=="body"||jN(o))&&(a=Ote(e)),Cd(e)?(c=ax(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):o&&(c.x=UN(o))),{x:s.left+a.scrollLeft-c.x,y:s.top+a.scrollTop-c.y,width:s.width,height:s.height}}function zte(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var c=e.get(a);c&&i(c)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function Ute(t){var e=zte(t);return Kee.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function jte(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Gte(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var FF={placement:"bottom",modifiers:[],strategy:"absolute"};function BF(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Vte(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?FF:i;return function(a,c,h){h===void 0&&(h=o);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},FF,o),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},v=[],w=!1,_={state:d,setOptions:function(A){var F=typeof A=="function"?A(d.options):A;M(),d.options=Object.assign({},o,d.options,F),d.scrollParents={reference:ey(a)?B2(a):a.contextElement?B2(a.contextElement):[],popper:B2(c)};var O=Ute(Gte([].concat(r,d.options.modifiers)));return d.orderedModifiers=O.filter(function(N){return N.enabled}),E(),_.update()},forceUpdate:function(){if(!w){var A=d.elements,F=A.reference,O=A.popper;if(BF(F,O)){d.rects={reference:Bte(F,$w(O),d.options.strategy==="fixed"),popper:FN(O)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(k){return d.modifiersData[k.name]=Object.assign({},k.data)});for(var N=0;N<d.orderedModifiers.length;N++){if(d.reset===!0){d.reset=!1,N=-1;continue}var H=d.orderedModifiers[N],G=H.fn,W=H.options,X=W===void 0?{}:W,K=H.name;typeof G=="function"&&(d=G({state:d,options:X,name:K,instance:_})||d)}}}},update:jte(function(){return new Promise(function(D){_.forceUpdate(),D(d)})}),destroy:function(){M(),w=!0}};if(!BF(a,c))return _;_.setOptions(h).then(function(D){!w&&h.onFirstUpdate&&h.onFirstUpdate(D)});function E(){d.orderedModifiers.forEach(function(D){var A=D.name,F=D.options,O=F===void 0?{}:F,N=D.effect;if(typeof N=="function"){var H=N({state:d,name:A,instance:_,options:O}),G=function(){};v.push(H||G)}})}function M(){v.forEach(function(D){return D()}),v=[]}return _}}var Hte=[dte,Ite,hte,ete,Rte,Ete,Nte,ste,Cte],qte=Vte({defaultModifiers:Hte});function $te(t){return typeof t=="function"?t():t}const LV=Be.forwardRef(function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[s,a]=Be.useState(null),c=xu(Be.isValidElement(r)?Ix(r):null,n);if(Rd(()=>{o||a($te(i)||document.body)},[i,o]),Rd(()=>{if(s&&!o)return DI(n,s),()=>{DI(n,null)}},[n,s,o]),o){if(Be.isValidElement(r)){const h={ref:c};return Be.cloneElement(r,h)}return r}return s&&SV.createPortal(r,s)});function Wte(t){return oa("MuiPopper",t)}na("MuiPopper",["root"]);function Xte(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function HI(t){return typeof t=="function"?t():t}function Yte(t){return t.nodeType!==void 0}const Zte=t=>{const{classes:e}=t;return sa({root:["root"]},Wte,e)},Kte={},Jte=Be.forwardRef(function(e,n){const{anchorEl:r,children:i,direction:o,disablePortal:s,modifiers:a,open:c,placement:h,popperOptions:d,popperRef:v,slotProps:w={},slots:_={},TransitionProps:E,ownerState:M,...D}=e,A=Be.useRef(null),F=xu(A,n),O=Be.useRef(null),N=xu(O,v),H=Be.useRef(N);Rd(()=>{H.current=N},[N]),Be.useImperativeHandle(v,()=>O.current,[]);const G=Xte(h,o),[W,X]=Be.useState(G),[K,k]=Be.useState(HI(r));Be.useEffect(()=>{O.current&&O.current.forceUpdate()}),Be.useEffect(()=>{r&&k(HI(r))},[r]),Rd(()=>{if(!K||!c)return;const ce=ye=>{X(ye.placement)};let se=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:ye})=>{ce(ye)}}];a!=null&&(se=se.concat(a)),d&&d.modifiers!=null&&(se=se.concat(d.modifiers));const Se=qte(K,A.current,{placement:G,...d,modifiers:se});return H.current(Se),()=>{Se.destroy(),H.current(null)}},[K,s,a,c,d,G]);const $={placement:W};E!==null&&($.TransitionProps=E);const Q=Zte(e),ie=_.root??"div",ae=hf({elementType:ie,externalSlotProps:w.root,externalForwardedProps:D,additionalProps:{role:"tooltip",ref:F},ownerState:e,className:Q.root});return ke.jsx(ie,{...ae,children:typeof i=="function"?i($):i})}),Qte=Be.forwardRef(function(e,n){const{anchorEl:r,children:i,container:o,direction:s="ltr",disablePortal:a=!1,keepMounted:c=!1,modifiers:h,open:d,placement:v="bottom",popperOptions:w=Kte,popperRef:_,style:E,transition:M=!1,slotProps:D={},slots:A={},...F}=e,[O,N]=Be.useState(!0),H=()=>{N(!1)},G=()=>{N(!0)};if(!c&&!d&&(!M||O))return null;let W;if(o)W=o;else if(r){const k=HI(r);W=k&&Yte(k)?xc(k).body:xc(null).body}const X=!d&&c&&(!M||O)?"none":void 0,K=M?{in:d,onEnter:H,onExited:G}:void 0;return ke.jsx(LV,{disablePortal:a,container:W,children:ke.jsx(Jte,{anchorEl:r,direction:s,disablePortal:a,modifiers:h,ref:n,open:M?!O:d,placement:v,popperOptions:w,popperRef:_,slotProps:D,slots:A,...F,style:{position:"fixed",top:0,left:0,display:X,...E},TransitionProps:K,children:i})})}),ene=_r(Qte,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),NV=Be.forwardRef(function(e,n){const r=_y(),i=ca({props:e,name:"MuiPopper"}),{anchorEl:o,component:s,components:a,componentsProps:c,container:h,disablePortal:d,keepMounted:v,modifiers:w,open:_,placement:E,popperOptions:M,popperRef:D,transition:A,slots:F,slotProps:O,...N}=i,H=(F==null?void 0:F.root)??(a==null?void 0:a.Root),G={anchorEl:o,container:h,disablePortal:d,keepMounted:v,modifiers:w,open:_,placement:E,popperOptions:M,popperRef:D,transition:A,...N};return ke.jsx(ene,{as:s,direction:r?"rtl":"ltr",slots:{root:H},slotProps:O??c,...G,ref:n})});function tne(t){return oa("MuiListSubheader",t)}na("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const nne=t=>{const{classes:e,color:n,disableGutters:r,inset:i,disableSticky:o}=t,s={root:["root",n!=="default"&&`color${vr(n)}`,!r&&"gutters",i&&"inset",!o&&"sticky"]};return sa(s,tne,e)},rne=_r("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${vr(n.color)}`],!n.disableGutters&&e.gutters,n.inset&&e.inset,!n.disableSticky&&e.sticky]}})(zi(({theme:t})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(t.vars||t).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:72}},{props:({ownerState:e})=>!e.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper}}]}))),qI=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiListSubheader"}),{className:i,color:o="default",component:s="li",disableGutters:a=!1,disableSticky:c=!1,inset:h=!1,...d}=r,v={...r,color:o,component:s,disableGutters:a,disableSticky:c,inset:h},w=nne(v);return ke.jsx(rne,{as:s,className:Fr(w.root,i),ref:n,ownerState:v,...d})});qI&&(qI.muiSkipListHighlight=!0);const ine=fs(ke.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function ane(t){return oa("MuiChip",t)}const go=na("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),one=t=>{const{classes:e,disabled:n,size:r,color:i,iconColor:o,onDelete:s,clickable:a,variant:c}=t,h={root:["root",c,n&&"disabled",`size${vr(r)}`,`color${vr(i)}`,a&&"clickable",a&&`clickableColor${vr(i)}`,s&&"deletable",s&&`deletableColor${vr(i)}`,`${c}${vr(i)}`],label:["label",`label${vr(r)}`],avatar:["avatar",`avatar${vr(r)}`,`avatarColor${vr(i)}`],icon:["icon",`icon${vr(r)}`,`iconColor${vr(o)}`],deleteIcon:["deleteIcon",`deleteIcon${vr(r)}`,`deleteIconColor${vr(i)}`,`deleteIcon${vr(c)}Color${vr(i)}`]};return sa(h,ane,e)},sne=_r("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:i,clickable:o,onDelete:s,size:a,variant:c}=n;return[{[`& .${go.avatar}`]:e.avatar},{[`& .${go.avatar}`]:e[`avatar${vr(a)}`]},{[`& .${go.avatar}`]:e[`avatarColor${vr(r)}`]},{[`& .${go.icon}`]:e.icon},{[`& .${go.icon}`]:e[`icon${vr(a)}`]},{[`& .${go.icon}`]:e[`iconColor${vr(i)}`]},{[`& .${go.deleteIcon}`]:e.deleteIcon},{[`& .${go.deleteIcon}`]:e[`deleteIcon${vr(a)}`]},{[`& .${go.deleteIcon}`]:e[`deleteIconColor${vr(r)}`]},{[`& .${go.deleteIcon}`]:e[`deleteIcon${vr(c)}Color${vr(r)}`]},e.root,e[`size${vr(a)}`],e[`color${vr(r)}`],o&&e.clickable,o&&r!=="default"&&e[`clickableColor${vr(r)})`],s&&e.deletable,s&&r!=="default"&&e[`deletableColor${vr(r)}`],e[c],e[`${c}${vr(r)}`]]}})(zi(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${go.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${go.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:e,fontSize:t.typography.pxToRem(12)},[`& .${go.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${go.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${go.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${go.icon}`]:{marginLeft:5,marginRight:-6},[`& .${go.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:Io(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:Io(t.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${go.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${go.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(al(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,[`& .${go.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n].contrastTextChannel} / 0.7)`:Io(t.palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${go.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:e}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${go.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${go.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Io(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}},...Object.entries(t.palette).filter(al(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${go.focusVisible}`]:{background:(t.vars||t).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Io(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${go.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Io(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(al(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${go.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${go.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${go.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${go.avatar}`]:{marginLeft:4},[`& .${go.avatarSmall}`]:{marginLeft:2},[`& .${go.icon}`]:{marginLeft:4},[`& .${go.iconSmall}`]:{marginLeft:2},[`& .${go.deleteIcon}`]:{marginRight:5},[`& .${go.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(al()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.7)`:Io(t.palette[n].main,.7)}`,[`&.${go.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Io(t.palette[n].main,t.palette.action.hoverOpacity)},[`&.${go.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.focusOpacity})`:Io(t.palette[n].main,t.palette.action.focusOpacity)},[`& .${go.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.7)`:Io(t.palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}))]}})),lne=_r("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${vr(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function zF(t){return t.key==="Backspace"||t.key==="Delete"}const z2=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiChip"}),{avatar:i,className:o,clickable:s,color:a="default",component:c,deleteIcon:h,disabled:d=!1,icon:v,label:w,onClick:_,onDelete:E,onKeyDown:M,onKeyUp:D,size:A="medium",variant:F="filled",tabIndex:O,skipFocusWhenDisabled:N=!1,...H}=r,G=Be.useRef(null),W=xu(G,n),X=Te=>{Te.stopPropagation(),E&&E(Te)},K=Te=>{Te.currentTarget===Te.target&&zF(Te)&&Te.preventDefault(),M&&M(Te)},k=Te=>{Te.currentTarget===Te.target&&E&&zF(Te)&&E(Te),D&&D(Te)},$=s!==!1&&_?!0:s,Q=$||E?Q0:c||"div",ie={...r,component:Q,disabled:d,size:A,color:a,iconColor:Be.isValidElement(v)&&v.props.color||a,onDelete:!!E,clickable:$,variant:F},ae=one(ie),ce=Q===Q0?{component:c||"div",focusVisibleClassName:ae.focusVisible,...E&&{disableRipple:!0}}:{};let se=null;E&&(se=h&&Be.isValidElement(h)?Be.cloneElement(h,{className:Fr(h.props.className,ae.deleteIcon),onClick:X}):ke.jsx(ine,{className:Fr(ae.deleteIcon),onClick:X}));let Se=null;i&&Be.isValidElement(i)&&(Se=Be.cloneElement(i,{className:Fr(ae.avatar,i.props.className)}));let ye=null;return v&&Be.isValidElement(v)&&(ye=Be.cloneElement(v,{className:Fr(ae.icon,v.props.className)})),ke.jsxs(sne,{as:Q,className:Fr(ae.root,o),disabled:$&&d?!0:void 0,onClick:_,onKeyDown:K,onKeyUp:k,ref:W,tabIndex:N&&d?-1:O,ownerState:ie,...ce,...H,children:[Se||ye,ke.jsx(lne,{className:Fr(ae.label),ownerState:ie,children:w}),se]})});function JS(t){return parseInt(t,10)||0}const une={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function cne(t){for(const e in t)return!1;return!0}function UF(t){return cne(t)||t.outerHeightStyle===0&&!t.overflowing}const hne=Be.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:s,value:a,...c}=e,{current:h}=Be.useRef(a!=null),d=Be.useRef(null),v=xu(n,d),w=Be.useRef(null),_=Be.useRef(null),E=Be.useCallback(()=>{const O=d.current,N=_.current;if(!O||!N)return;const G=Xf(O).getComputedStyle(O);if(G.width==="0px")return{outerHeightStyle:0,overflowing:!1};N.style.width=G.width,N.value=O.value||e.placeholder||"x",N.value.slice(-1)===`
`&&(N.value+=" ");const W=G.boxSizing,X=JS(G.paddingBottom)+JS(G.paddingTop),K=JS(G.borderBottomWidth)+JS(G.borderTopWidth),k=N.scrollHeight;N.value="x";const $=N.scrollHeight;let Q=k;o&&(Q=Math.max(Number(o)*$,Q)),i&&(Q=Math.min(Number(i)*$,Q)),Q=Math.max(Q,$);const ie=Q+(W==="border-box"?X+K:0),ae=Math.abs(Q-k)<=1;return{outerHeightStyle:ie,overflowing:ae}},[i,o,e.placeholder]),M=zc(()=>{const O=d.current,N=E();if(!O||!N||UF(N))return!1;const H=N.outerHeightStyle;return w.current!=null&&w.current!==H}),D=Be.useCallback(()=>{const O=d.current,N=E();if(!O||!N||UF(N))return;const H=N.outerHeightStyle;w.current!==H&&(w.current=H,O.style.height=`${H}px`),O.style.overflow=N.overflowing?"hidden":""},[E]),A=Be.useRef(-1);Rd(()=>{const O=Hw(D),N=d==null?void 0:d.current;if(!N)return;const H=Xf(N);H.addEventListener("resize",O);let G;return typeof ResizeObserver<"u"&&(G=new ResizeObserver(()=>{M()&&(G.unobserve(N),cancelAnimationFrame(A.current),D(),A.current=requestAnimationFrame(()=>{G.observe(N)}))}),G.observe(N)),()=>{O.clear(),cancelAnimationFrame(A.current),H.removeEventListener("resize",O),G&&G.disconnect()}},[E,D,M]),Rd(()=>{D()});const F=O=>{h||D(),r&&r(O)};return ke.jsxs(Be.Fragment,{children:[ke.jsx("textarea",{value:a,onChange:F,ref:v,rows:o,style:s,...c}),ke.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:_,tabIndex:-1,style:{...une.shadow,...s,paddingTop:0,paddingBottom:0}})]})});function um(t){return typeof t=="string"}function xy({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const _M=Be.createContext(void 0);function Em(){return Be.useContext(_M)}function jF(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function oC(t,e=!1){return t&&(jF(t.value)&&t.value!==""||e&&jF(t.defaultValue)&&t.defaultValue!=="")}function fne(t){return t.startAdornment}function dne(t){return oa("MuiInputBase",t)}const Bf=na("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var GF;const xM=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${vr(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},bM=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},pne=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:c,hiddenLabel:h,multiline:d,readOnly:v,size:w,startAdornment:_,type:E}=t,M={root:["root",`color${vr(n)}`,r&&"disabled",i&&"error",c&&"fullWidth",s&&"focused",a&&"formControl",w&&w!=="medium"&&`size${vr(w)}`,d&&"multiline",_&&"adornedStart",o&&"adornedEnd",h&&"hiddenLabel",v&&"readOnly"],input:["input",r&&"disabled",E==="search"&&"inputTypeSearch",d&&"inputMultiline",w==="small"&&"inputSizeSmall",h&&"inputHiddenLabel",_&&"inputAdornedStart",o&&"inputAdornedEnd",v&&"readOnly"]};return sa(M,dne,e)},wM=_r("div",{name:"MuiInputBase",slot:"Root",overridesResolver:xM})(zi(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Bf.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:n})=>e.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),SM=_r("input",{name:"MuiInputBase",slot:"Input",overridesResolver:bM})(zi(({theme:t})=>{const e=t.palette.mode==="light",n={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},i=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Bf.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${Bf.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),VF=IN({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),GN=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:s,className:a,color:c,components:h={},componentsProps:d={},defaultValue:v,disabled:w,disableInjectingGlobalStyles:_,endAdornment:E,error:M,fullWidth:D=!1,id:A,inputComponent:F="input",inputProps:O={},inputRef:N,margin:H,maxRows:G,minRows:W,multiline:X=!1,name:K,onBlur:k,onChange:$,onClick:Q,onFocus:ie,onKeyDown:ae,onKeyUp:ce,placeholder:se,readOnly:Se,renderSuffix:ye,rows:Te,size:pe,slotProps:Ie={},slots:me={},startAdornment:xe,type:ve="text",value:Ee,...De}=r,We=O.value!=null?O.value:Ee,{current:Ae}=Be.useRef(We!=null),ut=Be.useRef(),pt=Be.useCallback(Et=>{},[]),st=xu(ut,N,O.ref,pt),[Ce,It]=Be.useState(!1),Ve=Em(),yt=xy({props:r,muiFormControl:Ve,states:["color","disabled","error","hiddenLabel","size","required","filled"]});yt.focused=Ve?Ve.focused:Ce,Be.useEffect(()=>{!Ve&&w&&Ce&&(It(!1),k&&k())},[Ve,w,Ce,k]);const Ze=Ve&&Ve.onFilled,wt=Ve&&Ve.onEmpty,Ut=Be.useCallback(Et=>{oC(Et)?Ze&&Ze():wt&&wt()},[Ze,wt]);Rd(()=>{Ae&&Ut({value:We})},[We,Ut,Ae]);const ht=Et=>{ie&&ie(Et),O.onFocus&&O.onFocus(Et),Ve&&Ve.onFocus?Ve.onFocus(Et):It(!0)},qt=Et=>{k&&k(Et),O.onBlur&&O.onBlur(Et),Ve&&Ve.onBlur?Ve.onBlur(Et):It(!1)},Ye=(Et,...qn)=>{if(!Ae){const Dn=Et.target||ut.current;if(Dn==null)throw new Error(gm(1));Ut({value:Dn.value})}O.onChange&&O.onChange(Et,...qn),$&&$(Et,...qn)};Be.useEffect(()=>{Ut(ut.current)},[]);const Re=Et=>{ut.current&&Et.currentTarget===Et.target&&ut.current.focus(),Q&&Q(Et)};let Pt=F,Dt=O;X&&Pt==="input"&&(Te?Dt={type:void 0,minRows:Te,maxRows:Te,...Dt}:Dt={type:void 0,maxRows:G,minRows:W,...Dt},Pt=hne);const At=Et=>{Ut(Et.animationName==="mui-auto-fill-cancel"?ut.current:{value:"x"})};Be.useEffect(()=>{Ve&&Ve.setAdornedStart(!!xe)},[Ve,xe]);const Bt={...r,color:yt.color||"primary",disabled:yt.disabled,endAdornment:E,error:yt.error,focused:yt.focused,formControl:Ve,fullWidth:D,hiddenLabel:yt.hiddenLabel,multiline:X,size:yt.size,startAdornment:xe,type:ve},gn=pne(Bt),Zt=me.root||h.Root||wM,cn=Ie.root||d.root||{},$t=me.input||h.Input||SM;return Dt={...Dt,...Ie.input??d.input},ke.jsxs(Be.Fragment,{children:[!_&&typeof VF=="function"&&(GF||(GF=ke.jsx(VF,{}))),ke.jsxs(Zt,{...cn,ref:n,onClick:Re,...De,...!um(Zt)&&{ownerState:{...Bt,...cn.ownerState}},className:Fr(gn.root,cn.className,a,Se&&"MuiInputBase-readOnly"),children:[xe,ke.jsx(_M.Provider,{value:null,children:ke.jsx($t,{"aria-invalid":yt.error,"aria-describedby":i,autoComplete:o,autoFocus:s,defaultValue:v,disabled:yt.disabled,id:A,onAnimationStart:At,name:K,placeholder:se,readOnly:Se,required:yt.required,rows:Te,value:We,onKeyDown:ae,onKeyUp:ce,type:ve,...Dt,...!um($t)&&{as:Pt,ownerState:{...Bt,...Dt.ownerState}},ref:st,className:Fr(gn.input,Dt.className,Se&&"MuiInputBase-readOnly"),onBlur:qt,onChange:Ye,onFocus:ht})}),E,ye?ye({...yt,startAdornment:xe}):null]})]})});function gne(t){return oa("MuiInput",t)}const cv={...Bf,...na("MuiInput",["root","underline","input"])};function mne(t){return oa("MuiOutlinedInput",t)}const md={...Bf,...na("MuiOutlinedInput",["root","notchedOutline","input"])};function vne(t){return oa("MuiFilledInput",t)}const zf={...Bf,...na("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},kV=fs(ke.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function yne(t){return oa("MuiAutocomplete",t)}const Za=na("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var HF,qF;const _ne=t=>{const{classes:e,disablePortal:n,expanded:r,focused:i,fullWidth:o,hasClearIcon:s,hasPopupIcon:a,inputFocused:c,popupOpen:h,size:d}=t,v={root:["root",r&&"expanded",i&&"focused",o&&"fullWidth",s&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",c&&"inputFocused"],tag:["tag",`tagSize${vr(d)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",h&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return sa(v,yne,e)},xne=_r("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{fullWidth:r,hasClearIcon:i,hasPopupIcon:o,inputFocused:s,size:a}=n;return[{[`& .${Za.tag}`]:e.tag},{[`& .${Za.tag}`]:e[`tagSize${vr(a)}`]},{[`& .${Za.inputRoot}`]:e.inputRoot},{[`& .${Za.input}`]:e.input},{[`& .${Za.input}`]:s&&e.inputFocused},e.root,r&&e.fullWidth,o&&e.hasPopupIcon,i&&e.hasClearIcon]}})({[`&.${Za.focused} .${Za.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${Za.clearIndicator}`]:{visibility:"visible"}},[`& .${Za.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${Za.inputRoot}`]:{[`.${Za.hasPopupIcon}&, .${Za.hasClearIcon}&`]:{paddingRight:30},[`.${Za.hasPopupIcon}.${Za.hasClearIcon}&`]:{paddingRight:56},[`& .${Za.input}`]:{width:0,minWidth:30}},[`& .${cv.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${cv.root}.${Bf.sizeSmall}`]:{[`& .${cv.input}`]:{padding:"2px 4px 3px 0"}},[`& .${md.root}`]:{padding:9,[`.${Za.hasPopupIcon}&, .${Za.hasClearIcon}&`]:{paddingRight:39},[`.${Za.hasPopupIcon}.${Za.hasClearIcon}&`]:{paddingRight:65},[`& .${Za.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${Za.endAdornment}`]:{right:9}},[`& .${md.root}.${Bf.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${Za.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${zf.root}`]:{paddingTop:19,paddingLeft:8,[`.${Za.hasPopupIcon}&, .${Za.hasClearIcon}&`]:{paddingRight:39},[`.${Za.hasPopupIcon}.${Za.hasClearIcon}&`]:{paddingRight:65},[`& .${zf.input}`]:{padding:"7px 4px"},[`& .${Za.endAdornment}`]:{right:9}},[`& .${zf.root}.${Bf.sizeSmall}`]:{paddingBottom:1,[`& .${zf.input}`]:{padding:"2.5px 4px"}},[`& .${Bf.hiddenLabel}`]:{paddingTop:8},[`& .${zf.root}.${Bf.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${Za.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${zf.root}.${Bf.hiddenLabel}.${Bf.sizeSmall}`]:{[`& .${Za.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${Za.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${Za.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${Za.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${Za.inputRoot}`]:{flexWrap:"wrap"}}}]}),bne=_r("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(t,e)=>e.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),wne=_r(O2,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(t,e)=>e.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Sne=_r(O2,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popupIndicator,n.popupOpen&&e.popupIndicatorOpen]}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),Ene=_r(NV,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Za.option}`]:e.option},e.popper,n.disablePortal&&e.popperDisablePortal]}})(zi(({theme:t})=>({zIndex:(t.vars||t).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}))),Tne=_r(wp,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(t,e)=>e.paper})(zi(({theme:t})=>({...t.typography.body1,overflow:"auto"}))),Cne=_r("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(t,e)=>e.loading})(zi(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}))),Mne=_r("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(t,e)=>e.noOptions})(zi(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}))),Ane=_r("ul",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(t,e)=>e.listbox})(zi(({theme:t})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${Za.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${Za.focused}`]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Za.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Io(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Za.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Io(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${Za.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Io(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}}))),Rne=_r(qI,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(t,e)=>e.groupLabel})(zi(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,top:-8}))),Pne=_r("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(t,e)=>e.groupUl})({padding:0,[`& .${Za.option}`]:{paddingLeft:24}}),Ine=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiAutocomplete"}),{autoComplete:i=!1,autoHighlight:o=!1,autoSelect:s=!1,blurOnSelect:a=!1,ChipProps:c,className:h,clearIcon:d=HF||(HF=ke.jsx(Eee,{fontSize:"small"})),clearOnBlur:v=!r.freeSolo,clearOnEscape:w=!1,clearText:_="Clear",closeText:E="Close",componentsProps:M,defaultValue:D=r.multiple?[]:null,disableClearable:A=!1,disableCloseOnSelect:F=!1,disabled:O=!1,disabledItemsFocusable:N=!1,disableListWrap:H=!1,disablePortal:G=!1,filterOptions:W,filterSelectedOptions:X=!1,forcePopupIcon:K="auto",freeSolo:k=!1,fullWidth:$=!1,getLimitTagsText:Q=Mr=>`+${Mr}`,getOptionDisabled:ie,getOptionKey:ae,getOptionLabel:ce,isOptionEqualToValue:se,groupBy:Se,handleHomeEndKeys:ye=!r.freeSolo,id:Te,includeInputInList:pe=!1,inputValue:Ie,limitTags:me=-1,ListboxComponent:xe,ListboxProps:ve,loading:Ee=!1,loadingText:De="Loading…",multiple:We=!1,noOptionsText:Ae="No options",onChange:ut,onClose:pt,onHighlightChange:st,onInputChange:Ce,onOpen:It,open:Ve,openOnFocus:yt=!1,openText:Ze="Open",options:wt,PaperComponent:Ut,PopperComponent:ht,popupIcon:qt=qF||(qF=ke.jsx(kV,{})),readOnly:Ye=!1,renderGroup:Re,renderInput:Pt,renderOption:Dt,renderTags:At,selectOnFocus:Bt=!r.freeSolo,size:gn="medium",slots:Zt={},slotProps:cn={},value:$t,...Et}=r,{getRootProps:qn,getInputProps:Dn,getInputLabelProps:sr,getPopupIndicatorProps:rt,getClearProps:ze,getTagProps:Xe,getListboxProps:Fe,getOptionProps:He,value:mt,dirty:it,expanded:xt,id:Tt,popupOpen:kt,focused:Jt,focusedTag:rn,anchorEl:Yt,setAnchorEl:Qn,inputValue:An,groupedOptions:jt}=zee({...r,componentName:"Autocomplete"}),Pe=!A&&!O&&it&&!Ye,je=(!k||K===!0)&&K!==!1,{onMouseDown:_t}=Dn(),{ref:Qt,...en}=Fe(),Wn=ce||(Mr=>Mr.label??Mr),kr={...r,disablePortal:G,expanded:xt,focused:Jt,fullWidth:$,getOptionLabel:Wn,hasClearIcon:Pe,hasPopupIcon:je,inputFocused:rn===-1,popupOpen:kt,size:gn},Qr=_ne(kr),vi={slots:{paper:Ut,popper:ht,...Zt},slotProps:{chip:c,listbox:ve,...M,...cn}},[zr,zn]=Fa("listbox",{elementType:Ane,externalForwardedProps:vi,ownerState:kr,className:Qr.listbox,additionalProps:en,ref:Qt}),[En,mr]=Fa("paper",{elementType:wp,externalForwardedProps:vi,ownerState:kr,className:Qr.paper}),[yi,_i]=Fa("popper",{elementType:NV,externalForwardedProps:vi,ownerState:kr,className:Qr.popper,additionalProps:{disablePortal:G,style:{width:Yt?Yt.clientWidth:null},role:"presentation",anchorEl:Yt,open:kt}});let gi;if(We&&mt.length>0){const Mr=Xr=>({className:Qr.tag,disabled:O,...Xe(Xr)});At?gi=At(mt,Mr,kr):gi=mt.map((Xr,Yr)=>{const{key:ni,...bi}=Mr({index:Yr});return ke.jsx(z2,{label:Wn(Xr),size:gn,...bi,...vi.slotProps.chip},ni)})}if(me>-1&&Array.isArray(gi)){const Mr=gi.length-me;!Jt&&Mr>0&&(gi=gi.splice(0,me),gi.push(ke.jsx("span",{className:Qr.tag,children:Q(Mr)},gi.length)))}const yn=Re||(Mr=>ke.jsxs("li",{children:[ke.jsx(Rne,{className:Qr.groupLabel,ownerState:kr,component:"div",children:Mr.group}),ke.jsx(Pne,{className:Qr.groupUl,ownerState:kr,children:Mr.children})]},Mr.key)),Vn=Dt||((Mr,Xr)=>{const{key:Yr,...ni}=Mr;return ke.jsx("li",{...ni,children:Wn(Xr)},Yr)}),bn=(Mr,Xr)=>{const Yr=He({option:Mr,index:Xr});return Vn({...Yr,className:Qr.option},Mr,{selected:Yr["aria-selected"],index:Xr,inputValue:An},kr)},wr=vi.slotProps.clearIndicator,Lr=vi.slotProps.popupIndicator;return ke.jsxs(Be.Fragment,{children:[ke.jsx(xne,{ref:n,className:Fr(Qr.root,h),ownerState:kr,...qn(Et),children:Pt({id:Tt,disabled:O,fullWidth:!0,size:gn==="small"?"small":void 0,InputLabelProps:sr(),InputProps:{ref:Qn,className:Qr.inputRoot,startAdornment:gi,onMouseDown:Mr=>{Mr.target===Mr.currentTarget&&_t(Mr)},...(Pe||je)&&{endAdornment:ke.jsxs(bne,{className:Qr.endAdornment,ownerState:kr,children:[Pe?ke.jsx(wne,{...ze(),"aria-label":_,title:_,ownerState:kr,...wr,className:Fr(Qr.clearIndicator,wr==null?void 0:wr.className),children:d}):null,je?ke.jsx(Sne,{...rt(),disabled:O,"aria-label":kt?E:Ze,title:kt?E:Ze,ownerState:kr,...Lr,className:Fr(Qr.popupIndicator,Lr==null?void 0:Lr.className),children:qt}):null]})}},inputProps:{className:Qr.input,disabled:O,readOnly:Ye,...Dn()}})}),Yt?ke.jsx(Ene,{as:yi,..._i,children:ke.jsxs(Tne,{as:En,...mr,children:[Ee&&jt.length===0?ke.jsx(Cne,{className:Qr.loading,ownerState:kr,children:De}):null,jt.length===0&&!k&&!Ee?ke.jsx(Mne,{className:Qr.noOptions,ownerState:kr,role:"presentation",onMouseDown:Mr=>{Mr.preventDefault()},children:Ae}):null,jt.length>0?ke.jsx(zr,{as:xe,...zn,children:jt.map((Mr,Xr)=>Se?yn({key:Mr.key,group:Mr.group,children:Mr.options.map((Yr,ni)=>bn(Yr,Mr.index+ni))}):bn(Mr,Xr))}):null]})}):null]})}),Dne={entering:{opacity:1},entered:{opacity:1}},$I=Be.forwardRef(function(e,n){const r=td(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:c,in:h,onEnter:d,onEntered:v,onEntering:w,onExit:_,onExited:E,onExiting:M,style:D,timeout:A=i,TransitionComponent:F=Od,...O}=e,N=Be.useRef(null),H=xu(N,Ix(a),n),G=ae=>ce=>{if(ae){const se=N.current;ce===void 0?ae(se):ae(se,ce)}},W=G(w),X=G((ae,ce)=>{NN(ae);const se=Ev({style:D,timeout:A,easing:c},{mode:"enter"});ae.style.webkitTransition=r.transitions.create("opacity",se),ae.style.transition=r.transitions.create("opacity",se),d&&d(ae,ce)}),K=G(v),k=G(M),$=G(ae=>{const ce=Ev({style:D,timeout:A,easing:c},{mode:"exit"});ae.style.webkitTransition=r.transitions.create("opacity",ce),ae.style.transition=r.transitions.create("opacity",ce),_&&_(ae)}),Q=G(E),ie=ae=>{o&&o(N.current,ae)};return ke.jsx(F,{appear:s,in:h,nodeRef:N,onEnter:X,onEntered:K,onEntering:W,onExit:$,onExited:Q,onExiting:k,addEndListener:ie,timeout:A,...O,children:(ae,{ownerState:ce,...se})=>Be.cloneElement(a,{style:{opacity:0,visibility:ae==="exited"&&!h?"hidden":void 0,...Dne[ae],...D,...a.props.style},ref:H,...se})})});function Lne(t){return oa("MuiBackdrop",t)}na("MuiBackdrop",["root","invisible"]);const Nne=t=>{const{classes:e,invisible:n}=t;return sa({root:["root",n&&"invisible"]},Lne,e)},kne=_r("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),OV=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiBackdrop"}),{children:i,className:o,component:s="div",invisible:a=!1,open:c,components:h={},componentsProps:d={},slotProps:v={},slots:w={},TransitionComponent:_,transitionDuration:E,...M}=r,D={...r,component:s,invisible:a},A=Nne(D),F={transition:_,root:h.Root,...w},O={...d,...v},N={slots:F,slotProps:O},[H,G]=Fa("root",{elementType:kne,externalForwardedProps:N,className:Fr(A.root,o),ownerState:D}),[W,X]=Fa("transition",{elementType:$I,externalForwardedProps:N,ownerState:D});return ke.jsx(W,{in:c,timeout:E,...M,...X,children:ke.jsx(H,{"aria-hidden":!0,...G,classes:A,ref:n,children:i})})}),One=na("MuiBox",["root"]),Fne=xV(),da=_J({themeId:zw,defaultTheme:Fne,defaultClassName:One.root,generateClassName:tV.generate});function Bne(t){return oa("MuiButton",t)}const v0=na("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),zne=Be.createContext({}),Une=Be.createContext(void 0),jne=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:o,loading:s,loadingPosition:a,classes:c}=t,h={root:["root",s&&"loading",o,`${o}${vr(e)}`,`size${vr(i)}`,`${o}Size${vr(i)}`,`color${vr(e)}`,n&&"disableElevation",r&&"fullWidth",s&&`loadingPosition${vr(a)}`],startIcon:["icon","startIcon",`iconSize${vr(i)}`],endIcon:["icon","endIcon",`iconSize${vr(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},d=sa(h,Bne,c);return{...c,...d}},FV=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Gne=_r(Q0,{shouldForwardProp:t=>xf(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${vr(n.color)}`],e[`size${vr(n.size)}`],e[`${n.variant}Size${vr(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(zi(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${v0.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${v0.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${v0.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${v0.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(al()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[r].mainChannel} / 0.5)`:Io(t.palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Io(t.palette[r].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Io(t.palette[r].main,t.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Io(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Io(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${v0.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${v0.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${v0.loading}`]:{color:"transparent"}}}]}})),Vne=_r("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${vr(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...FV]})),Hne=_r("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${vr(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...FV]})),qne=_r("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(t,e)=>e.loadingIndicator})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),$F=_r("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(t,e)=>e.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),rm=Be.forwardRef(function(e,n){const r=Be.useContext(zne),i=Be.useContext(Une),o=lw(r,e),s=ca({props:o,name:"MuiButton"}),{children:a,color:c="primary",component:h="button",className:d,disabled:v=!1,disableElevation:w=!1,disableFocusRipple:_=!1,endIcon:E,focusVisibleClassName:M,fullWidth:D=!1,id:A,loading:F=null,loadingIndicator:O,loadingPosition:N="center",size:H="medium",startIcon:G,type:W,variant:X="text",...K}=s,k=Px(A),$=O??ke.jsx(vM,{"aria-labelledby":k,color:"inherit",size:16}),Q={...s,color:c,component:h,disabled:v,disableElevation:w,disableFocusRipple:_,fullWidth:D,loading:F,loadingIndicator:$,loadingPosition:N,size:H,type:W,variant:X},ie=jne(Q),ae=(G||F&&N==="start")&&ke.jsx(Vne,{className:ie.startIcon,ownerState:Q,children:G||ke.jsx($F,{className:ie.loadingIconPlaceholder,ownerState:Q})}),ce=(E||F&&N==="end")&&ke.jsx(Hne,{className:ie.endIcon,ownerState:Q,children:E||ke.jsx($F,{className:ie.loadingIconPlaceholder,ownerState:Q})}),se=i||"",Se=typeof F=="boolean"?ke.jsx("span",{className:ie.loadingWrapper,style:{display:"contents"},children:F&&ke.jsx(qne,{className:ie.loadingIndicator,ownerState:Q,children:$})}):null;return ke.jsxs(Gne,{ownerState:Q,className:Fr(r.className,ie.root,d,se),component:h,disabled:v||F,focusRipple:!_,focusVisibleClassName:Fr(ie.focusVisible,M),ref:n,type:W,id:F?k:A,...K,classes:ie,children:[ae,N!=="end"&&Se,a,N==="end"&&Se,ce]})});function $ne(t){return oa("PrivateSwitchBase",t)}na("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Wne=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${vr(i)}`],input:["input"]};return sa(o,$ne,e)},Xne=_r(Q0)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:e})=>t==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:e})=>t==="end"&&e.size!=="small",style:{marginRight:-12}}]}),Yne=_r("input",{shouldForwardProp:xf})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),BV=Be.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:o,defaultChecked:s,disabled:a,disableFocusRipple:c=!1,edge:h=!1,icon:d,id:v,inputProps:w,inputRef:_,name:E,onBlur:M,onChange:D,onFocus:A,readOnly:F,required:O=!1,tabIndex:N,type:H,value:G,slots:W={},slotProps:X={},...K}=e,[k,$]=V0({controlled:i,default:!!s,name:"SwitchBase",state:"checked"}),Q=Em(),ie=Ee=>{A&&A(Ee),Q&&Q.onFocus&&Q.onFocus(Ee)},ae=Ee=>{M&&M(Ee),Q&&Q.onBlur&&Q.onBlur(Ee)},ce=Ee=>{if(Ee.nativeEvent.defaultPrevented)return;const De=Ee.target.checked;$(De),D&&D(Ee,De)};let se=a;Q&&typeof se>"u"&&(se=Q.disabled);const Se=H==="checkbox"||H==="radio",ye={...e,checked:k,disabled:se,disableFocusRipple:c,edge:h},Te=Wne(ye),pe={slots:W,slotProps:{input:w,...X}},[Ie,me]=Fa("root",{ref:n,elementType:Xne,className:Te.root,shouldForwardComponentProp:!0,externalForwardedProps:{...pe,component:"span",...K},getSlotProps:Ee=>({...Ee,onFocus:De=>{var We;(We=Ee.onFocus)==null||We.call(Ee,De),ie(De)},onBlur:De=>{var We;(We=Ee.onBlur)==null||We.call(Ee,De),ae(De)}}),ownerState:ye,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:se,role:void 0,tabIndex:null}}),[xe,ve]=Fa("input",{ref:_,elementType:Yne,className:Te.input,externalForwardedProps:pe,getSlotProps:Ee=>({onChange:De=>{var We;(We=Ee.onChange)==null||We.call(Ee,De),ce(De)}}),ownerState:ye,additionalProps:{autoFocus:r,checked:i,defaultChecked:s,disabled:se,id:Se?v:void 0,name:E,readOnly:F,required:O,tabIndex:N,type:H,...H==="checkbox"&&G===void 0?{}:{value:G}}});return ke.jsxs(Ie,{...me,children:[ke.jsx(xe,{...ve}),k?o:d]})}),Zne=fs(ke.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Kne=fs(ke.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Jne=fs(ke.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Qne(t){return oa("MuiCheckbox",t)}const XA=na("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),ere=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,o={root:["root",n&&"indeterminate",`color${vr(r)}`,`size${vr(i)}`]},s=sa(o,Qne,e);return{...e,...s}},tre=_r(BV,{shouldForwardProp:t=>xf(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${vr(n.size)}`],n.color!=="default"&&e[`color${vr(n.color)}`]]}})(zi(({theme:t})=>({color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Io(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Io(t.palette[e].main,t.palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e},style:{[`&.${XA.checked}, &.${XA.indeterminate}`]:{color:(t.vars||t).palette[e].main},[`&.${XA.disabled}`]:{color:(t.vars||t).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),nre=ke.jsx(Kne,{}),rre=ke.jsx(Zne,{}),ire=ke.jsx(Jne,{}),YA=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiCheckbox"}),{checkedIcon:i=nre,color:o="primary",icon:s=rre,indeterminate:a=!1,indeterminateIcon:c=ire,inputProps:h,size:d="medium",disableRipple:v=!1,className:w,slots:_={},slotProps:E={},...M}=r,D=a?c:s,A=a?c:i,F={...r,disableRipple:v,color:o,indeterminate:a,size:d},O=ere(F),N=E.input??h,[H,G]=Fa("root",{ref:n,elementType:tre,className:Fr(O.root,w),shouldForwardComponentProp:!0,externalForwardedProps:{slots:_,slotProps:E,...M},ownerState:F,additionalProps:{type:"checkbox",icon:Be.cloneElement(D,{fontSize:D.props.fontSize??d}),checkedIcon:Be.cloneElement(A,{fontSize:A.props.fontSize??d}),disableRipple:v,slots:_,slotProps:{input:DN(typeof N=="function"?N(F):N,{"data-indeterminate":a})}}});return ke.jsx(H,{...G,classes:O})}),WI=typeof IN({})=="function",are=(t,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!t.vars&&{colorScheme:t.palette.mode}}),ore=t=>({color:(t.vars||t).palette.text.primary,...t.typography.body1,backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),zV=(t,e=!1)=>{var o,s;const n={};e&&t.colorSchemes&&typeof t.getColorSchemeSelector=="function"&&Object.entries(t.colorSchemes).forEach(([a,c])=>{var d,v;const h=t.getColorSchemeSelector(a);h.startsWith("@")?n[h]={":root":{colorScheme:(d=c.palette)==null?void 0:d.mode}}:n[h.replace(/\s*&/,"")]={colorScheme:(v=c.palette)==null?void 0:v.mode}});let r={html:are(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:{margin:0,...ore(t),"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}},...n};const i=(s=(o=t.components)==null?void 0:o.MuiCssBaseline)==null?void 0:s.styleOverrides;return i&&(r=[r,i]),r},CT="mui-ecs",sre=t=>{const e=zV(t,!1),n=Array.isArray(e)?e[0]:e;return!t.vars&&n&&(n.html[`:root:has(${CT})`]={colorScheme:t.palette.mode}),t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([r,i])=>{var s,a;const o=t.getColorSchemeSelector(r);o.startsWith("@")?n[o]={[`:root:not(:has(.${CT}))`]:{colorScheme:(s=i.palette)==null?void 0:s.mode}}:n[o.replace(/\s*&/,"")]={[`&:not(:has(.${CT}))`]:{colorScheme:(a=i.palette)==null?void 0:a.mode}}}),e},lre=IN(WI?({theme:t,enableColorScheme:e})=>zV(t,e):({theme:t})=>sre(t));function ure(t){const e=ca({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return ke.jsxs(Be.Fragment,{children:[WI&&ke.jsx(lre,{enableColorScheme:r}),!WI&&!r&&ke.jsx("span",{className:CT,style:{display:"none"}}),n]})}function cre(t){const e=xc(t);return e.body===t?Xf(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function U2(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function WF(t){return parseInt(Xf(t).getComputedStyle(t).paddingRight,10)||0}function hre(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function XF(t,e,n,r,i){const o=[e,n,...r];[].forEach.call(t.children,s=>{const a=!o.includes(s),c=!hre(s);a&&c&&U2(s,i)})}function ZA(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function fre(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(cre(r)){const s=cV(Xf(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${WF(r)+s}px`;const a=xc(r).querySelectorAll(".mui-fixed");[].forEach.call(a,c=>{n.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${WF(c)+s}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=xc(r).body;else{const s=r.parentElement,a=Xf(r);o=(s==null?void 0:s.nodeName)==="HTML"&&a.getComputedStyle(s).overflowY==="scroll"?s:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:s,property:a})=>{o?s.style.setProperty(a,o):s.style.removeProperty(a)})}}function dre(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class pre{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&U2(e.modalRef,!1);const i=dre(n);XF(n,e.mount,e.modalRef,i,!0);const o=ZA(this.containers,s=>s.container===n);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=ZA(this.containers,o=>o.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=fre(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=ZA(this.containers,s=>s.modals.includes(e)),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&U2(e.modalRef,n),XF(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const s=o.modals[o.modals.length-1];s.modalRef&&U2(s.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const gre=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function mre(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function vre(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function yre(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||vre(t))}function _re(t){const e=[],n=[];return Array.from(t.querySelectorAll(gre)).forEach((r,i)=>{const o=mre(r);o===-1||!yre(r)||(o===0?e.push(r):n.push({documentOrder:i,tabIndex:o,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function xre(){return!0}function bre(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=_re,isEnabled:s=xre,open:a}=t,c=Be.useRef(!1),h=Be.useRef(null),d=Be.useRef(null),v=Be.useRef(null),w=Be.useRef(null),_=Be.useRef(!1),E=Be.useRef(null),M=xu(Ix(e),E),D=Be.useRef(null);Be.useEffect(()=>{!a||!E.current||(_.current=!n)},[n,a]),Be.useEffect(()=>{if(!a||!E.current)return;const O=xc(E.current);return E.current.contains(O.activeElement)||(E.current.hasAttribute("tabIndex")||E.current.setAttribute("tabIndex","-1"),_.current&&E.current.focus()),()=>{i||(v.current&&v.current.focus&&(c.current=!0,v.current.focus()),v.current=null)}},[a]),Be.useEffect(()=>{if(!a||!E.current)return;const O=xc(E.current),N=W=>{D.current=W,!(r||!s()||W.key!=="Tab")&&O.activeElement===E.current&&W.shiftKey&&(c.current=!0,d.current&&d.current.focus())},H=()=>{var K,k;const W=E.current;if(W===null)return;if(!O.hasFocus()||!s()||c.current){c.current=!1;return}if(W.contains(O.activeElement)||r&&O.activeElement!==h.current&&O.activeElement!==d.current)return;if(O.activeElement!==w.current)w.current=null;else if(w.current!==null)return;if(!_.current)return;let X=[];if((O.activeElement===h.current||O.activeElement===d.current)&&(X=o(E.current)),X.length>0){const $=!!((K=D.current)!=null&&K.shiftKey&&((k=D.current)==null?void 0:k.key)==="Tab"),Q=X[0],ie=X[X.length-1];typeof Q!="string"&&typeof ie!="string"&&($?ie.focus():Q.focus())}else W.focus()};O.addEventListener("focusin",H),O.addEventListener("keydown",N,!0);const G=setInterval(()=>{O.activeElement&&O.activeElement.tagName==="BODY"&&H()},50);return()=>{clearInterval(G),O.removeEventListener("focusin",H),O.removeEventListener("keydown",N,!0)}},[n,r,i,s,a,o]);const A=O=>{v.current===null&&(v.current=O.relatedTarget),_.current=!0,w.current=O.target;const N=e.props.onFocus;N&&N(O)},F=O=>{v.current===null&&(v.current=O.relatedTarget),_.current=!0};return ke.jsxs(Be.Fragment,{children:[ke.jsx("div",{tabIndex:a?0:-1,onFocus:F,ref:h,"data-testid":"sentinelStart"}),Be.cloneElement(e,{ref:M,onFocus:A}),ke.jsx("div",{tabIndex:a?0:-1,onFocus:F,ref:d,"data-testid":"sentinelEnd"})]})}function wre(t){return typeof t=="function"?t():t}function Sre(t){return t?t.props.hasOwnProperty("in"):!1}const YF=()=>{},QS=new pre;function Ere(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:o,onTransitionExited:s,children:a,onClose:c,open:h,rootRef:d}=t,v=Be.useRef({}),w=Be.useRef(null),_=Be.useRef(null),E=xu(_,d),[M,D]=Be.useState(!h),A=Sre(a);let F=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(F=!1);const O=()=>xc(w.current),N=()=>(v.current.modalRef=_.current,v.current.mount=w.current,v.current),H=()=>{QS.mount(N(),{disableScrollLock:r}),_.current&&(_.current.scrollTop=0)},G=zc(()=>{const ce=wre(e)||O().body;QS.add(N(),ce),_.current&&H()}),W=()=>QS.isTopModal(N()),X=zc(ce=>{w.current=ce,ce&&(h&&W()?H():_.current&&U2(_.current,F))}),K=Be.useCallback(()=>{QS.remove(N(),F)},[F]);Be.useEffect(()=>()=>{K()},[K]),Be.useEffect(()=>{h?G():(!A||!i)&&K()},[h,K,A,i,G]);const k=ce=>se=>{var Se;(Se=ce.onKeyDown)==null||Se.call(ce,se),!(se.key!=="Escape"||se.which===229||!W())&&(n||(se.stopPropagation(),c&&c(se,"escapeKeyDown")))},$=ce=>se=>{var Se;(Se=ce.onClick)==null||Se.call(ce,se),se.target===se.currentTarget&&c&&c(se,"backdropClick")};return{getRootProps:(ce={})=>{const se=k2(t);delete se.onTransitionEnter,delete se.onTransitionExited;const Se={...se,...ce};return{role:"presentation",...Se,onKeyDown:k(Se),ref:E}},getBackdropProps:(ce={})=>{const se=ce;return{"aria-hidden":!0,...se,onClick:$(se),open:h}},getTransitionProps:()=>{const ce=()=>{D(!1),o&&o()},se=()=>{D(!0),s&&s(),i&&K()};return{onEnter:cF(ce,(a==null?void 0:a.props.onEnter)??YF),onExited:cF(se,(a==null?void 0:a.props.onExited)??YF)}},rootRef:E,portalRef:X,isTopModal:W,exited:M,hasTransition:A}}function Tre(t){return oa("MuiModal",t)}na("MuiModal",["root","hidden","backdrop"]);const Cre=t=>{const{open:e,exited:n,classes:r}=t;return sa({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},Tre,r)},Mre=_r("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(zi(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),Are=_r(OV,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),VN=Be.forwardRef(function(e,n){const r=ca({name:"MuiModal",props:e}),{BackdropComponent:i=Are,BackdropProps:o,classes:s,className:a,closeAfterTransition:c=!1,children:h,container:d,component:v,components:w={},componentsProps:_={},disableAutoFocus:E=!1,disableEnforceFocus:M=!1,disableEscapeKeyDown:D=!1,disablePortal:A=!1,disableRestoreFocus:F=!1,disableScrollLock:O=!1,hideBackdrop:N=!1,keepMounted:H=!1,onBackdropClick:G,onClose:W,onTransitionEnter:X,onTransitionExited:K,open:k,slotProps:$={},slots:Q={},theme:ie,...ae}=r,ce={...r,closeAfterTransition:c,disableAutoFocus:E,disableEnforceFocus:M,disableEscapeKeyDown:D,disablePortal:A,disableRestoreFocus:F,disableScrollLock:O,hideBackdrop:N,keepMounted:H},{getRootProps:se,getBackdropProps:Se,getTransitionProps:ye,portalRef:Te,isTopModal:pe,exited:Ie,hasTransition:me}=Ere({...ce,rootRef:n}),xe={...ce,exited:Ie},ve=Cre(xe),Ee={};if(h.props.tabIndex===void 0&&(Ee.tabIndex="-1"),me){const{onEnter:st,onExited:Ce}=ye();Ee.onEnter=st,Ee.onExited=Ce}const De={slots:{root:w.Root,backdrop:w.Backdrop,...Q},slotProps:{..._,...$}},[We,Ae]=Fa("root",{ref:n,elementType:Mre,externalForwardedProps:{...De,...ae,component:v},getSlotProps:se,ownerState:xe,className:Fr(a,ve==null?void 0:ve.root,!xe.open&&xe.exited&&(ve==null?void 0:ve.hidden))}),[ut,pt]=Fa("backdrop",{ref:o==null?void 0:o.ref,elementType:i,externalForwardedProps:De,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:st=>Se({...st,onClick:Ce=>{G&&G(Ce),st!=null&&st.onClick&&st.onClick(Ce)}}),className:Fr(o==null?void 0:o.className,ve==null?void 0:ve.backdrop),ownerState:xe});return!H&&!k&&(!me||Ie)?null:ke.jsx(LV,{ref:Te,container:d,disablePortal:A,children:ke.jsxs(We,{...Ae,children:[!N&&i?ke.jsx(ut,{...pt}):null,ke.jsx(bre,{disableEnforceFocus:M,disableAutoFocus:E,disableRestoreFocus:F,isEnabled:pe,open:k,children:Be.cloneElement(h,Ee)})]})})});function Rre(t){return oa("MuiDialog",t)}const KA=na("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),UV=Be.createContext({}),Pre=_r(OV,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),Ire=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=t,s={root:["root"],container:["container",`scroll${vr(n)}`],paper:["paper",`paperScroll${vr(n)}`,`paperWidth${vr(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return sa(s,Rre,e)},Dre=_r(VN,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),Lre=_r("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${vr(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Nre=_r(wp,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${vr(n.scroll)}`],e[`paperWidth${vr(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(zi(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${KA.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${KA.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${KA.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),HN=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiDialog"}),i=td(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":s,"aria-labelledby":a,"aria-modal":c=!0,BackdropComponent:h,BackdropProps:d,children:v,className:w,disableEscapeKeyDown:_=!1,fullScreen:E=!1,fullWidth:M=!1,maxWidth:D="sm",onBackdropClick:A,onClick:F,onClose:O,open:N,PaperComponent:H=wp,PaperProps:G={},scroll:W="paper",slots:X={},slotProps:K={},TransitionComponent:k=$I,transitionDuration:$=o,TransitionProps:Q,...ie}=r,ae={...r,disableEscapeKeyDown:_,fullScreen:E,fullWidth:M,maxWidth:D,scroll:W},ce=Ire(ae),se=Be.useRef(),Se=Ve=>{se.current=Ve.target===Ve.currentTarget},ye=Ve=>{F&&F(Ve),se.current&&(se.current=null,A&&A(Ve),O&&O(Ve,"backdropClick"))},Te=Px(a),pe=Be.useMemo(()=>({titleId:Te}),[Te]),Ie={transition:k,...X},me={transition:Q,paper:G,backdrop:d,...K},xe={slots:Ie,slotProps:me},[ve,Ee]=Fa("root",{elementType:Dre,shouldForwardComponentProp:!0,externalForwardedProps:xe,ownerState:ae,className:Fr(ce.root,w),ref:n}),[De,We]=Fa("backdrop",{elementType:Pre,shouldForwardComponentProp:!0,externalForwardedProps:xe,ownerState:ae}),[Ae,ut]=Fa("paper",{elementType:Nre,shouldForwardComponentProp:!0,externalForwardedProps:xe,ownerState:ae,className:Fr(ce.paper,G.className)}),[pt,st]=Fa("container",{elementType:Lre,externalForwardedProps:xe,ownerState:ae,className:Fr(ce.container)}),[Ce,It]=Fa("transition",{elementType:$I,externalForwardedProps:xe,ownerState:ae,additionalProps:{appear:!0,in:N,timeout:$,role:"presentation"}});return ke.jsx(ve,{closeAfterTransition:!0,slots:{backdrop:De},slotProps:{backdrop:{transitionDuration:$,as:h,...We}},disableEscapeKeyDown:_,onClose:O,open:N,onClick:ye,...Ee,...ie,children:ke.jsx(Ce,{...It,children:ke.jsx(pt,{onMouseDown:Se,...st,children:ke.jsx(Ae,{as:H,elevation:24,role:"dialog","aria-describedby":s,"aria-labelledby":Te,"aria-modal":c,...ut,children:ke.jsx(UV.Provider,{value:pe,children:v})})})})})});function kre(t){return oa("MuiDialogActions",t)}na("MuiDialogActions",["root","spacing"]);const Ore=t=>{const{classes:e,disableSpacing:n}=t;return sa({root:["root",!n&&"spacing"]},kre,e)},Fre=_r("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),qN=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:o=!1,...s}=r,a={...r,disableSpacing:o},c=Ore(a);return ke.jsx(Fre,{className:Fr(c.root,i),ownerState:a,ref:n,...s})});function Bre(t){return oa("MuiDialogContent",t)}na("MuiDialogContent",["root","dividers"]);function zre(t){return oa("MuiDialogTitle",t)}const Ure=na("MuiDialogTitle",["root"]),jre=t=>{const{classes:e,dividers:n}=t;return sa({root:["root",n&&"dividers"]},Bre,e)},Gre=_r("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(zi(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${Ure.root} + &`]:{paddingTop:0}}}]}))),$N=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiDialogContent"}),{className:i,dividers:o=!1,...s}=r,a={...r,dividers:o},c=jre(a);return ke.jsx(Gre,{className:Fr(c.root,i),ownerState:a,ref:n,...s})}),Vre=t=>{const{classes:e}=t;return sa({root:["root"]},zre,e)},Hre=_r(uo,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),WN=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiDialogTitle"}),{className:i,id:o,...s}=r,a=r,c=Vre(a),{titleId:h=o}=Be.useContext(UV);return ke.jsx(Hre,{component:"h2",className:Fr(c.root,i),ownerState:a,ref:n,variant:"h6",id:o??h,...s})});function qre(t){return oa("MuiDivider",t)}na("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const $re=t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:o,orientation:s,textAlign:a,variant:c}=t;return sa({root:["root",e&&"absolute",c,o&&"light",s==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&s==="vertical"&&"withChildrenVertical",a==="right"&&s!=="vertical"&&"textAlignRight",a==="left"&&s!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",s==="vertical"&&"wrapperVertical"]},qre,r)},Wre=_r("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(zi(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:Io(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),Xre=_r("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(zi(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),Tv=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiDivider"}),{absolute:i=!1,children:o,className:s,orientation:a="horizontal",component:c=o||a==="vertical"?"div":"hr",flexItem:h=!1,light:d=!1,role:v=c!=="hr"?"separator":void 0,textAlign:w="center",variant:_="fullWidth",...E}=r,M={...r,absolute:i,component:c,flexItem:h,light:d,orientation:a,role:v,textAlign:w,variant:_},D=$re(M);return ke.jsx(Wre,{as:c,className:Fr(D.root,s),role:v,ref:n,ownerState:M,"aria-orientation":v==="separator"&&(c!=="hr"||a==="vertical")?a:void 0,...E,children:o?ke.jsx(Xre,{className:D.wrapper,ownerState:M,children:o}):null})});Tv&&(Tv.muiSkipListHighlight=!0);function Yre(t,e,n){const r=e.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=Xf(e);let s;if(e.fakeTransform)s=e.fakeTransform;else{const h=o.getComputedStyle(e);s=h.getPropertyValue("-webkit-transform")||h.getPropertyValue("transform")}let a=0,c=0;if(s&&s!=="none"&&typeof s=="string"){const h=s.split("(")[1].split(")")[0].split(",");a=parseInt(h[4],10),c=parseInt(h[5],10)}return t==="left"?i?`translateX(${i.right+a-r.left}px)`:`translateX(${o.innerWidth+a-r.left}px)`:t==="right"?i?`translateX(-${r.right-i.left-a}px)`:`translateX(-${r.left+r.width-a}px)`:t==="up"?i?`translateY(${i.bottom+c-r.top}px)`:`translateY(${o.innerHeight+c-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-c}px)`:`translateY(-${r.top+r.height-c}px)`}function Zre(t){return typeof t=="function"?t():t}function eE(t,e,n){const r=Zre(n),i=Yre(t,e,r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const Kre=Be.forwardRef(function(e,n){const r=td(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:c,container:h,direction:d="down",easing:v=i,in:w,onEnter:_,onEntered:E,onEntering:M,onExit:D,onExited:A,onExiting:F,style:O,timeout:N=o,TransitionComponent:H=Od,...G}=e,W=Be.useRef(null),X=xu(Ix(c),W,n),K=ye=>Te=>{ye&&(Te===void 0?ye(W.current):ye(W.current,Te))},k=K((ye,Te)=>{eE(d,ye,h),NN(ye),_&&_(ye,Te)}),$=K((ye,Te)=>{const pe=Ev({timeout:N,style:O,easing:v},{mode:"enter"});ye.style.webkitTransition=r.transitions.create("-webkit-transform",{...pe}),ye.style.transition=r.transitions.create("transform",{...pe}),ye.style.webkitTransform="none",ye.style.transform="none",M&&M(ye,Te)}),Q=K(E),ie=K(F),ae=K(ye=>{const Te=Ev({timeout:N,style:O,easing:v},{mode:"exit"});ye.style.webkitTransition=r.transitions.create("-webkit-transform",Te),ye.style.transition=r.transitions.create("transform",Te),eE(d,ye,h),D&&D(ye)}),ce=K(ye=>{ye.style.webkitTransition="",ye.style.transition="",A&&A(ye)}),se=ye=>{s&&s(W.current,ye)},Se=Be.useCallback(()=>{W.current&&eE(d,W.current,h)},[d,h]);return Be.useEffect(()=>{if(w||d==="down"||d==="right")return;const ye=Hw(()=>{W.current&&eE(d,W.current,h)}),Te=Xf(W.current);return Te.addEventListener("resize",ye),()=>{ye.clear(),Te.removeEventListener("resize",ye)}},[d,w,h]),Be.useEffect(()=>{w||Se()},[w,Se]),ke.jsx(H,{nodeRef:W,onEnter:k,onEntered:Q,onEntering:$,onExit:ae,onExited:ce,onExiting:ie,addEndListener:se,appear:a,in:w,timeout:N,...G,children:(ye,{ownerState:Te,...pe})=>Be.cloneElement(c,{ref:X,style:{visibility:ye==="exited"&&!w?"hidden":void 0,...O,...c.props.style},...pe})})});function Jre(t){return oa("MuiDrawer",t)}na("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const jV=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},Qre=t=>{const{classes:e,anchor:n,variant:r}=t,i={root:["root",`anchor${vr(n)}`],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${vr(n)}`,r!=="temporary"&&`paperAnchorDocked${vr(n)}`]};return sa(i,Jre,e)},eie=_r(VN,{name:"MuiDrawer",slot:"Root",overridesResolver:jV})(zi(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer}))),tie=_r("div",{shouldForwardProp:xf,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:jV})({flex:"0 0 auto"}),nie=_r(wp,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${vr(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${vr(n.anchor)}`]]}})(zi(({theme:t})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(t.vars||t).palette.divider}`}}]}))),GV={left:"right",right:"left",top:"down",bottom:"up"};function rie(t){return["left","right"].includes(t)}function iie({direction:t},e){return t==="rtl"&&rie(e)?GV[e]:e}const XI=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiDrawer"}),i=td(),o=_y(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:c,children:h,className:d,elevation:v=16,hideBackdrop:w=!1,ModalProps:{BackdropProps:_,...E}={},onClose:M,open:D=!1,PaperProps:A={},SlideProps:F,TransitionComponent:O,transitionDuration:N=s,variant:H="temporary",slots:G={},slotProps:W={},...X}=r,K=Be.useRef(!1);Be.useEffect(()=>{K.current=!0},[]);const k=iie({direction:o?"rtl":"ltr"},a),Q={...r,anchor:a,elevation:v,open:D,variant:H,...X},ie=Qre(Q),ae={slots:{transition:O,...G},slotProps:{paper:A,transition:F,...W,backdrop:DN(W.backdrop||{...c,..._},{transitionDuration:N})}},[ce,se]=Fa("root",{ref:n,elementType:eie,className:Fr(ie.root,ie.modal,d),shouldForwardComponentProp:!0,ownerState:Q,externalForwardedProps:{...ae,...X,...E},additionalProps:{open:D,onClose:M,hideBackdrop:w,slots:{backdrop:ae.slots.backdrop},slotProps:{backdrop:ae.slotProps.backdrop}}}),[Se,ye]=Fa("paper",{elementType:nie,shouldForwardComponentProp:!0,className:Fr(ie.paper,A.className),ownerState:Q,externalForwardedProps:ae,additionalProps:{elevation:H==="temporary"?v:0,square:!0}}),[Te,pe]=Fa("docked",{elementType:tie,ref:n,className:Fr(ie.root,ie.docked,d),ownerState:Q,externalForwardedProps:ae,additionalProps:X}),[Ie,me]=Fa("transition",{elementType:Kre,ownerState:Q,externalForwardedProps:ae,additionalProps:{in:D,direction:GV[k],timeout:N,appear:K.current}}),xe=ke.jsx(Se,{...ye,children:h});if(H==="permanent")return ke.jsx(Te,{...pe,children:xe});const ve=ke.jsx(Ie,{...me,children:xe});return H==="persistent"?ke.jsx(Te,{...pe,children:ve}):ke.jsx(ce,{...se,children:ve})}),aie=t=>{const{classes:e,disableUnderline:n,startAdornment:r,endAdornment:i,size:o,hiddenLabel:s,multiline:a}=t,c={root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd",o==="small"&&`size${vr(o)}`,s&&"hiddenLabel",a&&"multiline"],input:["input"]},h=sa(c,vne,e);return{...e,...h}},oie=_r(wM,{shouldForwardProp:t=>xf(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...xM(t,e),!n.disableUnderline&&e.underline]}})(zi(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${zf.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${zf.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:s})=>!s.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${zf.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${zf.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${zf.disabled}, .${zf.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${zf.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(al()).map(([s])=>{var a;return{props:{disableUnderline:!1,color:s},style:{"&::after":{borderBottom:`2px solid ${(a=(t.vars||t).palette[s])==null?void 0:a.main}`}}}}),{props:({ownerState:s})=>s.startAdornment,style:{paddingLeft:12}},{props:({ownerState:s})=>s.endAdornment,style:{paddingRight:12}},{props:({ownerState:s})=>s.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:s,size:a})=>s.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:s})=>s.multiline&&s.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:s})=>s.multiline&&s.hiddenLabel&&s.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),sie=_r(SM,{name:"MuiFilledInput",slot:"Input",overridesResolver:bM})(zi(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),XN=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:o={},componentsProps:s,fullWidth:a=!1,hiddenLabel:c,inputComponent:h="input",multiline:d=!1,slotProps:v,slots:w={},type:_="text",...E}=r,M={...r,disableUnderline:i,fullWidth:a,inputComponent:h,multiline:d,type:_},D=aie(r),A={root:{ownerState:M},input:{ownerState:M}},F=v??s?_h(A,v??s):A,O=w.root??o.Root??oie,N=w.input??o.Input??sie;return ke.jsx(GN,{slots:{root:O,input:N},slotProps:F,fullWidth:a,inputComponent:h,multiline:d,ref:n,type:_,...E,classes:D})});XN.muiName="Input";function lie(t){return oa("MuiFormControl",t)}na("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const uie=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${vr(n)}`,r&&"fullWidth"]};return sa(i,lie,e)},cie=_r("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`margin${vr(n.margin)}`],n.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),hie=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiFormControl"}),{children:i,className:o,color:s="primary",component:a="div",disabled:c=!1,error:h=!1,focused:d,fullWidth:v=!1,hiddenLabel:w=!1,margin:_="none",required:E=!1,size:M="medium",variant:D="outlined",...A}=r,F={...r,color:s,component:a,disabled:c,error:h,fullWidth:v,hiddenLabel:w,margin:_,required:E,size:M,variant:D},O=uie(F),[N,H]=Be.useState(()=>{let ce=!1;return i&&Be.Children.forEach(i,se=>{if(!ET(se,["Input","Select"]))return;const Se=ET(se,["Select"])?se.props.input:se;Se&&fne(Se.props)&&(ce=!0)}),ce}),[G,W]=Be.useState(()=>{let ce=!1;return i&&Be.Children.forEach(i,se=>{ET(se,["Input","Select"])&&(oC(se.props,!0)||oC(se.props.inputProps,!0))&&(ce=!0)}),ce}),[X,K]=Be.useState(!1);c&&X&&K(!1);const k=d!==void 0&&!c?d:X;let $;Be.useRef(!1);const Q=Be.useCallback(()=>{W(!0)},[]),ie=Be.useCallback(()=>{W(!1)},[]),ae=Be.useMemo(()=>({adornedStart:N,setAdornedStart:H,color:s,disabled:c,error:h,filled:G,focused:k,fullWidth:v,hiddenLabel:w,size:M,onBlur:()=>{K(!1)},onFocus:()=>{K(!0)},onEmpty:ie,onFilled:Q,registerEffect:$,required:E,variant:D}),[N,s,c,h,G,k,v,w,$,ie,Q,E,M,D]);return ke.jsx(_M.Provider,{value:ae,children:ke.jsx(cie,{as:a,ownerState:F,className:Fr(O.root,o),ref:n,...A,children:i})})});function fie(t){return oa("MuiFormControlLabel",t)}const d2=na("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),die=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:o}=t,s={root:["root",n&&"disabled",`labelPlacement${vr(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return sa(s,fie,e)},pie=_r("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${d2.label}`]:e.label},e.root,e[`labelPlacement${vr(n.labelPlacement)}`]]}})(zi(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${d2.disabled}`]:{cursor:"default"},[`& .${d2.label}`]:{[`&.${d2.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),gie=_r("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(zi(({theme:t})=>({[`&.${d2.error}`]:{color:(t.vars||t).palette.error.main}}))),Hb=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiFormControlLabel"}),{checked:i,className:o,componentsProps:s={},control:a,disabled:c,disableTypography:h,inputRef:d,label:v,labelPlacement:w="end",name:_,onChange:E,required:M,slots:D={},slotProps:A={},value:F,...O}=r,N=Em(),H=c??a.props.disabled??(N==null?void 0:N.disabled),G=M??a.props.required,W={disabled:H,required:G};["checked","name","onChange","value","inputRef"].forEach(ce=>{typeof a.props[ce]>"u"&&typeof r[ce]<"u"&&(W[ce]=r[ce])});const X=xy({props:r,muiFormControl:N,states:["error"]}),K={...r,disabled:H,labelPlacement:w,required:G,error:X.error},k=die(K),$={slots:D,slotProps:{...s,...A}},[Q,ie]=Fa("typography",{elementType:uo,externalForwardedProps:$,ownerState:K});let ae=v;return ae!=null&&ae.type!==uo&&!h&&(ae=ke.jsx(Q,{component:"span",...ie,className:Fr(k.label,ie==null?void 0:ie.className),children:ae})),ke.jsxs(pie,{className:Fr(k.root,o),ownerState:K,ref:n,...O,children:[Be.cloneElement(a,W),G?ke.jsxs("div",{children:[ae,ke.jsxs(gie,{ownerState:K,"aria-hidden":!0,className:k.asterisk,children:[" ","*"]})]}):ae]})});function mie(t){return oa("MuiFormHelperText",t)}const ZF=na("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var KF;const vie=t=>{const{classes:e,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:c}=t,h={root:["root",i&&"disabled",o&&"error",r&&`size${vr(r)}`,n&&"contained",a&&"focused",s&&"filled",c&&"required"]};return sa(h,mie,e)},yie=_r("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${vr(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(zi(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${ZF.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${ZF.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),_ie=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiFormHelperText"}),{children:i,className:o,component:s="p",disabled:a,error:c,filled:h,focused:d,margin:v,required:w,variant:_,...E}=r,M=Em(),D=xy({props:r,muiFormControl:M,states:["variant","size","disabled","error","filled","focused","required"]}),A={...r,component:s,contained:D.variant==="filled"||D.variant==="outlined",variant:D.variant,size:D.size,disabled:D.disabled,error:D.error,filled:D.filled,focused:D.focused,required:D.required};delete A.ownerState;const F=vie(A);return ke.jsx(yie,{as:s,className:Fr(F.root,o),ref:n,...E,ownerState:A,children:i===" "?KF||(KF=ke.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):i})});function xie(t){return oa("MuiFormLabel",t)}const j2=na("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),bie=t=>{const{classes:e,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=t,c={root:["root",`color${vr(n)}`,i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return sa(c,xie,e)},wie=_r("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled]}})(zi(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e},style:{[`&.${j2.focused}`]:{color:(t.vars||t).palette[e].main}}})),{props:{},style:{[`&.${j2.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${j2.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),Sie=_r("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(zi(({theme:t})=>({[`&.${j2.error}`]:{color:(t.vars||t).palette.error.main}}))),Eie=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiFormLabel"}),{children:i,className:o,color:s,component:a="label",disabled:c,error:h,filled:d,focused:v,required:w,..._}=r,E=Em(),M=xy({props:r,muiFormControl:E,states:["color","required","focused","disabled","error","filled"]}),D={...r,color:M.color||"primary",component:a,disabled:M.disabled,error:M.error,filled:M.filled,focused:M.focused,required:M.required},A=bie(D);return ke.jsxs(wie,{as:a,ownerState:D,className:Fr(A.root,o),ref:n,..._,children:[i,M.required&&ke.jsxs(Sie,{ownerState:D,"aria-hidden":!0,className:A.asterisk,children:[" ","*"]})]})}),JF=Be.createContext();function Tie(t){return oa("MuiGrid",t)}const Cie=[0,1,2,3,4,5,6,7,8,9,10],Mie=["column-reverse","column","row-reverse","row"],Aie=["nowrap","wrap-reverse","wrap"],qb=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],hw=na("MuiGrid",["root","container","item","zeroMinWidth",...Cie.map(t=>`spacing-xs-${t}`),...Mie.map(t=>`direction-xs-${t}`),...Aie.map(t=>`wrap-xs-${t}`),...qb.map(t=>`grid-xs-${t}`),...qb.map(t=>`grid-sm-${t}`),...qb.map(t=>`grid-md-${t}`),...qb.map(t=>`grid-lg-${t}`),...qb.map(t=>`grid-xl-${t}`)]);function Rie({theme:t,ownerState:e}){let n;return t.breakpoints.keys.reduce((r,i)=>{let o={};if(e[i]&&(n=e[i]),!n)return r;if(n===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=lM({values:e.columns,breakpoints:t.breakpoints.values}),a=typeof s=="object"?s[i]:s;if(a==null)return r;const c=`${Math.round(n/a*1e8)/1e6}%`;let h={};if(e.container&&e.item&&e.columnSpacing!==0){const d=t.spacing(e.columnSpacing);if(d!=="0px"){const v=`calc(${c} + ${d})`;h={flexBasis:v,maxWidth:v}}}o={flexBasis:c,flexGrow:0,maxWidth:c,...h}}return t.breakpoints.values[i]===0?Object.assign(r,o):r[t.breakpoints.up(i)]=o,r},{})}function Pie({theme:t,ownerState:e}){const n=lM({values:e.direction,breakpoints:t.breakpoints.values});return Ad({theme:t},n,r=>{const i={flexDirection:r};return r.startsWith("column")&&(i[`& > .${hw.item}`]={maxWidth:"none"}),i})}function VV({breakpoints:t,values:e}){let n="";Object.keys(e).forEach(i=>{n===""&&e[i]!==0&&(n=i)});const r=Object.keys(t).sort((i,o)=>t[i]-t[o]);return r.slice(0,r.indexOf(n))}function Iie({theme:t,ownerState:e}){const{container:n,rowSpacing:r}=e;let i={};if(n&&r!==0){const o=lM({values:r,breakpoints:t.breakpoints.values});let s;typeof o=="object"&&(s=VV({breakpoints:t.breakpoints.values,values:o})),i=Ad({theme:t},o,(a,c)=>{const h=t.spacing(a);return h!=="0px"?{marginTop:`calc(-1 * ${h})`,[`& > .${hw.item}`]:{paddingTop:h}}:s!=null&&s.includes(c)?{}:{marginTop:0,[`& > .${hw.item}`]:{paddingTop:0}}})}return i}function Die({theme:t,ownerState:e}){const{container:n,columnSpacing:r}=e;let i={};if(n&&r!==0){const o=lM({values:r,breakpoints:t.breakpoints.values});let s;typeof o=="object"&&(s=VV({breakpoints:t.breakpoints.values,values:o})),i=Ad({theme:t},o,(a,c)=>{const h=t.spacing(a);if(h!=="0px"){const d=`calc(-1 * ${h})`;return{width:`calc(100% + ${h})`,marginLeft:d,[`& > .${hw.item}`]:{paddingLeft:h}}}return s!=null&&s.includes(c)?{}:{width:"100%",marginLeft:0,[`& > .${hw.item}`]:{paddingLeft:0}}})}return i}function Lie(t,e,n={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[n[`spacing-xs-${String(t)}`]];const r=[];return e.forEach(i=>{const o=t[i];Number(o)>0&&r.push(n[`spacing-${i}-${String(o)}`])}),r}const Nie=_r("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:o,spacing:s,wrap:a,zeroMinWidth:c,breakpoints:h}=n;let d=[];r&&(d=Lie(s,h,e));const v=[];return h.forEach(w=>{const _=n[w];_&&v.push(e[`grid-${w}-${String(_)}`])}),[e.root,r&&e.container,o&&e.item,c&&e.zeroMinWidth,...d,i!=="row"&&e[`direction-xs-${String(i)}`],a!=="wrap"&&e[`wrap-xs-${String(a)}`],...v]}})(({ownerState:t})=>({boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...t.item&&{margin:0},...t.zeroMinWidth&&{minWidth:0},...t.wrap!=="wrap"&&{flexWrap:t.wrap}}),Pie,Iie,Die,Rie);function kie(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const n=[];return e.forEach(r=>{const i=t[r];if(Number(i)>0){const o=`spacing-${r}-${String(i)}`;n.push(o)}}),n}const Oie=t=>{const{classes:e,container:n,direction:r,item:i,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:c}=t;let h=[];n&&(h=kie(o,c));const d=[];c.forEach(w=>{const _=t[w];_&&d.push(`grid-${w}-${String(_)}`)});const v={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...h,r!=="row"&&`direction-xs-${String(r)}`,s!=="wrap"&&`wrap-xs-${String(s)}`,...d]};return sa(v,Tie,e)},QF=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiGrid"}),{breakpoints:i}=td(),o=CN(r),{className:s,columns:a,columnSpacing:c,component:h="div",container:d=!1,direction:v="row",item:w=!1,rowSpacing:_,spacing:E=0,wrap:M="wrap",zeroMinWidth:D=!1,...A}=o,F=_||E,O=c||E,N=Be.useContext(JF),H=d?a||12:N,G={},W={...A};i.keys.forEach(k=>{A[k]!=null&&(G[k]=A[k],delete W[k])});const X={...o,columns:H,container:d,direction:v,item:w,rowSpacing:F,columnSpacing:O,wrap:M,zeroMinWidth:D,spacing:E,...G,breakpoints:i.keys},K=Oie(X);return ke.jsx(JF.Provider,{value:H,children:ke.jsx(Nie,{ownerState:X,className:Fr(K.root,s),as:h,ref:n,...W})})});function YI(t){return`scale(${t}, ${t**2})`}const Fie={entering:{opacity:1,transform:YI(1)},entered:{opacity:1,transform:"none"}},JA=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),ZI=Be.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:s,in:a,onEnter:c,onEntered:h,onEntering:d,onExit:v,onExited:w,onExiting:_,style:E,timeout:M="auto",TransitionComponent:D=Od,...A}=e,F=AN(),O=Be.useRef(),N=td(),H=Be.useRef(null),G=xu(H,Ix(o),n),W=ce=>se=>{if(ce){const Se=H.current;se===void 0?ce(Se):ce(Se,se)}},X=W(d),K=W((ce,se)=>{NN(ce);const{duration:Se,delay:ye,easing:Te}=Ev({style:E,timeout:M,easing:s},{mode:"enter"});let pe;M==="auto"?(pe=N.transitions.getAutoHeightDuration(ce.clientHeight),O.current=pe):pe=Se,ce.style.transition=[N.transitions.create("opacity",{duration:pe,delay:ye}),N.transitions.create("transform",{duration:JA?pe:pe*.666,delay:ye,easing:Te})].join(","),c&&c(ce,se)}),k=W(h),$=W(_),Q=W(ce=>{const{duration:se,delay:Se,easing:ye}=Ev({style:E,timeout:M,easing:s},{mode:"exit"});let Te;M==="auto"?(Te=N.transitions.getAutoHeightDuration(ce.clientHeight),O.current=Te):Te=se,ce.style.transition=[N.transitions.create("opacity",{duration:Te,delay:Se}),N.transitions.create("transform",{duration:JA?Te:Te*.666,delay:JA?Se:Se||Te*.333,easing:ye})].join(","),ce.style.opacity=0,ce.style.transform=YI(.75),v&&v(ce)}),ie=W(w),ae=ce=>{M==="auto"&&F.start(O.current||0,ce),r&&r(H.current,ce)};return ke.jsx(D,{appear:i,in:a,nodeRef:H,onEnter:K,onEntered:k,onEntering:X,onExit:Q,onExited:ie,onExiting:$,addEndListener:ae,timeout:M==="auto"?null:M,...A,children:(ce,{ownerState:se,...Se})=>Be.cloneElement(o,{style:{opacity:0,transform:YI(.75),visibility:ce==="exited"&&!a?"hidden":void 0,...Fie[ce],...E,...o.props.style},ref:G,...Se})})});ZI&&(ZI.muiSupportAuto=!0);const Bie=oV({themeId:zw}),zie=t=>{const{classes:e,disableUnderline:n}=t,i=sa({root:["root",!n&&"underline"],input:["input"]},gne,e);return{...e,...i}},Uie=_r(wM,{shouldForwardProp:t=>xf(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...xM(t,e),!n.disableUnderline&&e.underline]}})(zi(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${cv.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${cv.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${cv.disabled}, .${cv.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${cv.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(al()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}}))]}})),jie=_r(SM,{name:"MuiInput",slot:"Input",overridesResolver:bM})({}),YN=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:o={},componentsProps:s,fullWidth:a=!1,inputComponent:c="input",multiline:h=!1,slotProps:d,slots:v={},type:w="text",..._}=r,E=zie(r),D={root:{ownerState:{disableUnderline:i}}},A=d??s?_h(d??s,D):D,F=v.root??o.Root??Uie,O=v.input??o.Input??jie;return ke.jsx(GN,{slots:{root:F,input:O},slotProps:A,fullWidth:a,inputComponent:c,multiline:h,ref:n,type:w,..._,classes:E})});YN.muiName="Input";function Gie(t){return oa("MuiInputAdornment",t)}const e6=na("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var t6;const Vie=(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${vr(n.position)}`],n.disablePointerEvents===!0&&e.disablePointerEvents,e[n.variant]]},Hie=t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:s}=t,a={root:["root",n&&"disablePointerEvents",i&&`position${vr(i)}`,s,r&&"hiddenLabel",o&&`size${vr(o)}`]};return sa(a,Gie,e)},qie=_r("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Vie})(zi(({theme:t})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${e6.positionStart}&:not(.${e6.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),HV=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiInputAdornment"}),{children:i,className:o,component:s="div",disablePointerEvents:a=!1,disableTypography:c=!1,position:h,variant:d,...v}=r,w=Em()||{};let _=d;d&&w.variant,w&&!_&&(_=w.variant);const E={...r,hiddenLabel:w.hiddenLabel,size:w.size,disablePointerEvents:a,position:h,variant:_},M=Hie(E);return ke.jsx(_M.Provider,{value:null,children:ke.jsx(qie,{as:s,ownerState:E,className:Fr(M.root,o),ref:n,...v,children:typeof i=="string"&&!c?ke.jsx(uo,{color:"textSecondary",children:i}):ke.jsxs(Be.Fragment,{children:[h==="start"?t6||(t6=ke.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):null,i]})})})});function $ie(t){return oa("MuiInputLabel",t)}na("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Wie=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=t,c={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&r!=="normal"&&`size${vr(r)}`,s],asterisk:[a&&"asterisk"]},h=sa(c,$ie,e);return{...e,...h}},Xie=_r(Eie,{shouldForwardProp:t=>xf(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${j2.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(zi(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:n,size:r})=>e==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Yie=Be.forwardRef(function(e,n){const r=ca({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:o,shrink:s,variant:a,className:c,...h}=r,d=Em();let v=s;typeof v>"u"&&d&&(v=d.filled||d.focused||d.adornedStart);const w=xy({props:r,muiFormControl:d,states:["size","variant","required","focused"]}),_={...r,disableAnimation:i,formControl:d,shrink:v,size:w.size,variant:w.variant,required:w.required,focused:w.focused},E=Wie(_);return ke.jsx(Xie,{"data-shrink":v,ref:n,className:Fr(E.root,c),...h,ownerState:_,classes:E})});function Zie(t){return oa("MuiLinearProgress",t)}na("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const KI=4,JI=Wh`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,Kie=typeof JI!="string"?Fv`
        animation: ${JI} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,QI=Wh`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,Jie=typeof QI!="string"?Fv`
        animation: ${QI} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,eD=Wh`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,Qie=typeof eD!="string"?Fv`
        animation: ${eD} 3s infinite linear;
      `:null,eae=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${vr(r)}`,n],dashed:["dashed",`dashedColor${vr(r)}`],bar1:["bar","bar1",`barColor${vr(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",n!=="buffer"&&`barColor${vr(r)}`,n==="buffer"&&`color${vr(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return sa(i,Zie,e)},ZN=(t,e)=>t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?J0(t.palette[e].main,.62):K0(t.palette[e].main,.5),tae=_r("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${vr(n.color)}`],e[n.variant]]}})(zi(({theme:t})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e},style:{backgroundColor:ZN(t,e)}})),{props:({ownerState:e})=>e.color==="inherit"&&e.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),nae=_r("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${vr(n.color)}`]]}})(zi(({theme:t})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(t.palette).filter(al()).map(([e])=>{const n=ZN(t,e);return{props:{color:e},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),Qie||{animation:`${eD} 3s infinite linear`}),rae=_r("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e.bar1,e[`barColor${vr(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(zi(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main}})),{props:{variant:"determinate"},style:{transition:`transform .${KI}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${KI}s linear`}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:Kie||{animation:`${JI} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),iae=_r("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e.bar2,e[`barColor${vr(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(zi(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e},style:{"--LinearProgressBar2-barColor":(t.vars||t).palette[e].main}})),{props:({ownerState:e})=>e.variant!=="buffer"&&e.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:e})=>e.variant!=="buffer"&&e.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e,variant:"buffer"},style:{backgroundColor:ZN(t,e),transition:`transform .${KI}s linear`}})),{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:Jie||{animation:`${QI} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),qV=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiLinearProgress"}),{className:i,color:o="primary",value:s,valueBuffer:a,variant:c="indeterminate",...h}=r,d={...r,color:o,variant:c},v=eae(d),w=_y(),_={},E={bar1:{},bar2:{}};if((c==="determinate"||c==="buffer")&&s!==void 0){_["aria-valuenow"]=Math.round(s),_["aria-valuemin"]=0,_["aria-valuemax"]=100;let M=s-100;w&&(M=-M),E.bar1.transform=`translateX(${M}%)`}if(c==="buffer"&&a!==void 0){let M=(a||0)-100;w&&(M=-M),E.bar2.transform=`translateX(${M}%)`}return ke.jsxs(tae,{className:Fr(v.root,i),ownerState:d,role:"progressbar",..._,ref:n,...h,children:[c==="buffer"?ke.jsx(nae,{className:v.dashed,ownerState:d}):null,ke.jsx(rae,{className:v.bar1,ownerState:d,style:E.bar1}),c==="determinate"?null:ke.jsx(iae,{className:v.bar2,ownerState:d,style:E.bar2})]})});function aae(t){return oa("MuiLink",t)}const oae=na("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),sae=({theme:t,ownerState:e})=>{const n=e.color,r=dv(t,`palette.${n}.main`,!1)||dv(t,`palette.${n}`,!1)||e.color,i=dv(t,`palette.${n}.mainChannel`)||dv(t,`palette.${n}Channel`);return"vars"in t&&i?`rgba(${i} / 0.4)`:Io(r,.4)},n6={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},lae=t=>{const{classes:e,component:n,focusVisible:r,underline:i}=t,o={root:["root",`underline${vr(i)}`,n==="button"&&"button",r&&"focusVisible"]};return sa(o,aae,e)},uae=_r(uo,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`underline${vr(n.underline)}`],n.component==="button"&&e.button]}})(zi(({theme:t})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:e,ownerState:n})=>e==="always"&&n.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(t.palette).filter(al()).map(([e])=>({props:{underline:"always",color:e},style:{"--Link-underlineColor":t.vars?`rgba(${t.vars.palette[e].mainChannel} / 0.4)`:Io(t.palette[e].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:Io(t.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.vars?`rgba(${t.vars.palette.text.secondaryChannel} / 0.4)`:Io(t.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${oae.focusVisible}`]:{outline:"auto"}}}]}))),QA=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiLink"}),i=td(),{className:o,color:s="primary",component:a="a",onBlur:c,onFocus:h,TypographyClasses:d,underline:v="always",variant:w="inherit",sx:_,...E}=r,[M,D]=Be.useState(!1),A=H=>{nx(H.target)||D(!1),c&&c(H)},F=H=>{nx(H.target)&&D(!0),h&&h(H)},O={...r,color:s,component:a,focusVisible:M,underline:v,variant:w},N=lae(O);return ke.jsx(uae,{color:s,className:Fr(N.root,o),classes:d,component:a,onBlur:A,onFocus:F,ref:n,ownerState:O,variant:w,...E,sx:[...n6[s]===void 0?[{color:s}]:[],...Array.isArray(_)?_:[_]],style:{...E.style,...v==="always"&&s!=="inherit"&&!n6[s]&&{"--Link-underlineColor":sae({theme:i,ownerState:O})}}})}),q0=Be.createContext({});function cae(t){return oa("MuiList",t)}na("MuiList",["root","padding","dense","subheader"]);const hae=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return sa({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},cae,e)},fae=_r("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),KN=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:c=!1,subheader:h,...d}=r,v=Be.useMemo(()=>({dense:a}),[a]),w={...r,component:s,dense:a,disablePadding:c},_=hae(w);return ke.jsx(q0.Provider,{value:v,children:ke.jsxs(fae,{as:s,className:Fr(_.root,o),ref:n,ownerState:w,...d,children:[h,i]})})});function dae(t){return oa("MuiListItem",t)}na("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const pae=na("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function gae(t){return oa("MuiListItemSecondaryAction",t)}na("MuiListItemSecondaryAction",["root","disableGutters"]);const mae=t=>{const{disableGutters:e,classes:n}=t;return sa({root:["root",e&&"disableGutters"]},gae,n)},vae=_r("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),$V=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiListItemSecondaryAction"}),{className:i,...o}=r,s=Be.useContext(q0),a={...r,disableGutters:s.disableGutters},c=mae(a);return ke.jsx(vae,{className:Fr(c.root,i),ownerState:a,ref:n,...o})});$V.muiName="ListItemSecondaryAction";const yae=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.hasSecondaryAction&&e.secondaryAction]},_ae=t=>{const{alignItems:e,classes:n,dense:r,disableGutters:i,disablePadding:o,divider:s,hasSecondaryAction:a}=t;return sa({root:["root",r&&"dense",!i&&"gutters",!o&&"padding",s&&"divider",e==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},dae,n)},xae=_r("div",{name:"MuiListItem",slot:"Root",overridesResolver:yae})(zi(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${pae.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),bae=_r("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),A1=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiListItem"}),{alignItems:i="center",children:o,className:s,component:a,components:c={},componentsProps:h={},ContainerComponent:d="li",ContainerProps:{className:v,...w}={},dense:_=!1,disableGutters:E=!1,disablePadding:M=!1,divider:D=!1,secondaryAction:A,slotProps:F={},slots:O={},...N}=r,H=Be.useContext(q0),G=Be.useMemo(()=>({dense:_||H.dense||!1,alignItems:i,disableGutters:E}),[i,H.dense,_,E]),W=Be.useRef(null),X=Be.Children.toArray(o),K=X.length&&ET(X[X.length-1],["ListItemSecondaryAction"]),k={...r,alignItems:i,dense:G.dense,disableGutters:E,disablePadding:M,divider:D,hasSecondaryAction:K},$=_ae(k),Q=xu(W,n),ie=O.root||c.Root||xae,ae=F.root||h.root||{},ce={className:Fr($.root,ae.className,s),...N};let se=a||"li";return K?(se=!ce.component&&!a?"div":se,d==="li"&&(se==="li"?se="div":ce.component==="li"&&(ce.component="div")),ke.jsx(q0.Provider,{value:G,children:ke.jsxs(bae,{as:d,className:Fr($.container,v),ref:Q,ownerState:k,...w,children:[ke.jsx(ie,{...ae,...!um(ie)&&{as:se,ownerState:{...k,...ae.ownerState}},...ce,children:X}),X.pop()]})})):ke.jsx(q0.Provider,{value:G,children:ke.jsxs(ie,{...ae,as:se,ref:Q,...!um(ie)&&{ownerState:{...k,...ae.ownerState}},...ce,children:[X,A&&ke.jsx($V,{children:A})]})})});function wae(t){return oa("MuiListItemIcon",t)}na("MuiListItemIcon",["root","alignItemsFlexStart"]);const Sae=t=>{const{alignItems:e,classes:n}=t;return sa({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},wae,n)},Eae=_r("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(zi(({theme:t})=>({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),fw=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiListItemIcon"}),{className:i,...o}=r,s=Be.useContext(q0),a={...r,alignItems:s.alignItems},c=Sae(a);return ke.jsx(Eae,{className:Fr(c.root,i),ownerState:a,ref:n,...o})});function Tae(t){return oa("MuiListItemText",t)}const tE=na("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Cae=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:o}=t;return sa({root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Tae,e)},Mae=_r("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${tE.primary}`]:e.primary},{[`& .${tE.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${TF.root}:where(& .${tE.primary})`]:{display:"block"},[`.${TF.root}:where(& .${tE.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),dw=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:s=!1,inset:a=!1,primary:c,primaryTypographyProps:h,secondary:d,secondaryTypographyProps:v,slots:w={},slotProps:_={},...E}=r,{dense:M}=Be.useContext(q0);let D=c??i,A=d;const F={...r,disableTypography:s,inset:a,primary:!!D,secondary:!!A,dense:M},O=Cae(F),N={slots:w,slotProps:{primary:h,secondary:v,..._}},[H,G]=Fa("root",{className:Fr(O.root,o),elementType:Mae,externalForwardedProps:{...N,...E},ownerState:F,ref:n}),[W,X]=Fa("primary",{className:O.primary,elementType:uo,externalForwardedProps:N,ownerState:F}),[K,k]=Fa("secondary",{className:O.secondary,elementType:uo,externalForwardedProps:N,ownerState:F});return D!=null&&D.type!==uo&&!s&&(D=ke.jsx(W,{variant:M?"body2":"body1",component:X!=null&&X.variant?void 0:"span",...X,children:D})),A!=null&&A.type!==uo&&!s&&(A=ke.jsx(K,{variant:"body2",color:"textSecondary",...k,children:A})),ke.jsxs(H,{...G,children:[D,A]})});function e5(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function r6(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function WV(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.startsWith(e.keys.join(""))}function $b(t,e,n,r,i,o){let s=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(s)return!1;s=!0}const c=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!WV(a,o)||c)a=i(t,a,n);else return a.focus(),!0}return!1}const Aae=Be.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:c=!1,disableListWrap:h=!1,onKeyDown:d,variant:v="selectedMenu",...w}=e,_=Be.useRef(null),E=Be.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Rd(()=>{i&&_.current.focus()},[i]),Be.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(O,{direction:N})=>{const H=!_.current.style.width;if(O.clientHeight<_.current.clientHeight&&H){const G=`${cV(Xf(O))}px`;_.current.style[N==="rtl"?"paddingLeft":"paddingRight"]=G,_.current.style.width=`calc(100% + ${G})`}return _.current}}),[]);const M=O=>{const N=_.current,H=O.key;if(O.ctrlKey||O.metaKey||O.altKey){d&&d(O);return}const W=xc(N).activeElement;if(H==="ArrowDown")O.preventDefault(),$b(N,W,h,c,e5);else if(H==="ArrowUp")O.preventDefault(),$b(N,W,h,c,r6);else if(H==="Home")O.preventDefault(),$b(N,null,h,c,e5);else if(H==="End")O.preventDefault(),$b(N,null,h,c,r6);else if(H.length===1){const X=E.current,K=H.toLowerCase(),k=performance.now();X.keys.length>0&&(k-X.lastTime>500?(X.keys=[],X.repeating=!0,X.previousKeyMatched=!0):X.repeating&&K!==X.keys[0]&&(X.repeating=!1)),X.lastTime=k,X.keys.push(K);const $=W&&!X.repeating&&WV(W,X);X.previousKeyMatched&&($||$b(N,W,!1,c,e5,X))?O.preventDefault():X.previousKeyMatched=!1}d&&d(O)},D=xu(_,n);let A=-1;Be.Children.forEach(s,(O,N)=>{if(!Be.isValidElement(O)){A===N&&(A+=1,A>=s.length&&(A=-1));return}O.props.disabled||(v==="selectedMenu"&&O.props.selected||A===-1)&&(A=N),A===N&&(O.props.disabled||O.props.muiSkipListHighlight||O.type.muiSkipListHighlight)&&(A+=1,A>=s.length&&(A=-1))});const F=Be.Children.map(s,(O,N)=>{if(N===A){const H={};return o&&(H.autoFocus=!0),O.props.tabIndex===void 0&&v==="selectedMenu"&&(H.tabIndex=0),Be.cloneElement(O,H)}return O});return ke.jsx(KN,{role:"menu",ref:D,className:a,onKeyDown:M,tabIndex:i?0:-1,...w,children:F})});function Rae(t){return oa("MuiPopover",t)}na("MuiPopover",["root","paper"]);function i6(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function a6(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function o6(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function nE(t){return typeof t=="function"?t():t}const Pae=t=>{const{classes:e}=t;return sa({root:["root"],paper:["paper"]},Rae,e)},Iae=_r(VN,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),XV=_r(wp,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Dae=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:s={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:c="anchorEl",children:h,className:d,container:v,elevation:w=8,marginThreshold:_=16,open:E,PaperProps:M={},slots:D={},slotProps:A={},transformOrigin:F={vertical:"top",horizontal:"left"},TransitionComponent:O,transitionDuration:N="auto",TransitionProps:H={},disableScrollLock:G=!1,...W}=r,X=Be.useRef(),K={...r,anchorOrigin:s,anchorReference:c,elevation:w,marginThreshold:_,transformOrigin:F,TransitionComponent:O,transitionDuration:N,TransitionProps:H},k=Pae(K),$=Be.useCallback(()=>{if(c==="anchorPosition")return a;const pt=nE(o),Ce=(pt&&pt.nodeType===1?pt:xc(X.current).body).getBoundingClientRect();return{top:Ce.top+i6(Ce,s.vertical),left:Ce.left+a6(Ce,s.horizontal)}},[o,s.horizontal,s.vertical,a,c]),Q=Be.useCallback(pt=>({vertical:i6(pt,F.vertical),horizontal:a6(pt,F.horizontal)}),[F.horizontal,F.vertical]),ie=Be.useCallback(pt=>{const st={width:pt.offsetWidth,height:pt.offsetHeight},Ce=Q(st);if(c==="none")return{top:null,left:null,transformOrigin:o6(Ce)};const It=$();let Ve=It.top-Ce.vertical,yt=It.left-Ce.horizontal;const Ze=Ve+st.height,wt=yt+st.width,Ut=Xf(nE(o)),ht=Ut.innerHeight-_,qt=Ut.innerWidth-_;if(_!==null&&Ve<_){const Ye=Ve-_;Ve-=Ye,Ce.vertical+=Ye}else if(_!==null&&Ze>ht){const Ye=Ze-ht;Ve-=Ye,Ce.vertical+=Ye}if(_!==null&&yt<_){const Ye=yt-_;yt-=Ye,Ce.horizontal+=Ye}else if(wt>qt){const Ye=wt-qt;yt-=Ye,Ce.horizontal+=Ye}return{top:`${Math.round(Ve)}px`,left:`${Math.round(yt)}px`,transformOrigin:o6(Ce)}},[o,c,$,Q,_]),[ae,ce]=Be.useState(E),se=Be.useCallback(()=>{const pt=X.current;if(!pt)return;const st=ie(pt);st.top!==null&&pt.style.setProperty("top",st.top),st.left!==null&&(pt.style.left=st.left),pt.style.transformOrigin=st.transformOrigin,ce(!0)},[ie]);Be.useEffect(()=>(G&&window.addEventListener("scroll",se),()=>window.removeEventListener("scroll",se)),[o,G,se]);const Se=()=>{se()},ye=()=>{ce(!1)};Be.useEffect(()=>{E&&se()}),Be.useImperativeHandle(i,()=>E?{updatePosition:()=>{se()}}:null,[E,se]),Be.useEffect(()=>{if(!E)return;const pt=Hw(()=>{se()}),st=Xf(nE(o));return st.addEventListener("resize",pt),()=>{pt.clear(),st.removeEventListener("resize",pt)}},[o,E,se]);let Te=N;const pe={slots:{transition:O,...D},slotProps:{transition:H,paper:M,...A}},[Ie,me]=Fa("transition",{elementType:ZI,externalForwardedProps:pe,ownerState:K,getSlotProps:pt=>({...pt,onEntering:(st,Ce)=>{var It;(It=pt.onEntering)==null||It.call(pt,st,Ce),Se()},onExited:st=>{var Ce;(Ce=pt.onExited)==null||Ce.call(pt,st),ye()}}),additionalProps:{appear:!0,in:E}});N==="auto"&&!Ie.muiSupportAuto&&(Te=void 0);const xe=v||(o?xc(nE(o)).body:void 0),[ve,{slots:Ee,slotProps:De,...We}]=Fa("root",{ref:n,elementType:Iae,externalForwardedProps:{...pe,...W},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:D.backdrop},slotProps:{backdrop:DN(typeof A.backdrop=="function"?A.backdrop(K):A.backdrop,{invisible:!0})},container:xe,open:E},ownerState:K,className:Fr(k.root,d)}),[Ae,ut]=Fa("paper",{ref:X,className:k.paper,elementType:XV,externalForwardedProps:pe,shouldForwardComponentProp:!0,additionalProps:{elevation:w,style:ae?void 0:{opacity:0}},ownerState:K});return ke.jsx(ve,{...We,...!um(ve)&&{slots:Ee,slotProps:De,disableScrollLock:G},children:ke.jsx(Ie,{...me,timeout:Te,children:ke.jsx(Ae,{...ut,children:h})})})});function Lae(t){return oa("MuiMenu",t)}na("MuiMenu",["root","paper","list"]);const Nae={vertical:"top",horizontal:"right"},kae={vertical:"top",horizontal:"left"},Oae=t=>{const{classes:e}=t;return sa({root:["root"],paper:["paper"],list:["list"]},Lae,e)},Fae=_r(Dae,{shouldForwardProp:t=>xf(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Bae=_r(XV,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),zae=_r(Aae,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),Uae=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:o,className:s,disableAutoFocusItem:a=!1,MenuListProps:c={},onClose:h,open:d,PaperProps:v={},PopoverClasses:w,transitionDuration:_="auto",TransitionProps:{onEntering:E,...M}={},variant:D="selectedMenu",slots:A={},slotProps:F={},...O}=r,N=_y(),H={...r,autoFocus:i,disableAutoFocusItem:a,MenuListProps:c,onEntering:E,PaperProps:v,transitionDuration:_,TransitionProps:M,variant:D},G=Oae(H),W=i&&!a&&d,X=Be.useRef(null),K=(Te,pe)=>{X.current&&X.current.adjustStyleForScrollbar(Te,{direction:N?"rtl":"ltr"}),E&&E(Te,pe)},k=Te=>{Te.key==="Tab"&&(Te.preventDefault(),h&&h(Te,"tabKeyDown"))};let $=-1;Be.Children.map(o,(Te,pe)=>{Be.isValidElement(Te)&&(Te.props.disabled||(D==="selectedMenu"&&Te.props.selected||$===-1)&&($=pe))});const Q={slots:A,slotProps:{list:c,transition:M,paper:v,...F}},ie=hf({elementType:A.root,externalSlotProps:F.root,ownerState:H,className:[G.root,s]}),[ae,ce]=Fa("paper",{className:G.paper,elementType:Bae,externalForwardedProps:Q,shouldForwardComponentProp:!0,ownerState:H}),[se,Se]=Fa("list",{className:Fr(G.list,c.className),elementType:zae,shouldForwardComponentProp:!0,externalForwardedProps:Q,getSlotProps:Te=>({...Te,onKeyDown:pe=>{var Ie;k(pe),(Ie=Te.onKeyDown)==null||Ie.call(Te,pe)}}),ownerState:H}),ye=typeof Q.slotProps.transition=="function"?Q.slotProps.transition(H):Q.slotProps.transition;return ke.jsx(Fae,{onClose:h,anchorOrigin:{vertical:"bottom",horizontal:N?"right":"left"},transformOrigin:N?Nae:kae,slots:{root:A.root,paper:ae,backdrop:A.backdrop,...A.transition&&{transition:A.transition}},slotProps:{root:ie,paper:ce,backdrop:typeof F.backdrop=="function"?F.backdrop(H):F.backdrop,transition:{...ye,onEntering:(...Te)=>{var pe;K(...Te),(pe=ye==null?void 0:ye.onEntering)==null||pe.call(ye,...Te)}}},open:d,ref:n,transitionDuration:_,ownerState:H,...O,classes:w,children:ke.jsx(se,{actions:X,autoFocus:i&&($===-1||a),autoFocusItem:W,variant:D,...Se,children:o})})});function jae(t){return oa("MuiNativeSelect",t)}const JN=na("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Gae=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:s}=t,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${vr(n)}`,o&&"iconOpen",r&&"disabled"]};return sa(a,jae,e)},YV=_r("select")(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${JN.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Vae=_r(YV,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:xf,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${JN.multiple}`]:e.multiple}]}})({}),ZV=_r("svg")(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${JN.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Hae=_r(ZV,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${vr(n.variant)}`],n.open&&e.iconOpen]}})({}),qae=Be.forwardRef(function(e,n){const{className:r,disabled:i,error:o,IconComponent:s,inputRef:a,variant:c="standard",...h}=e,d={...e,disabled:i,variant:c,error:o},v=Gae(d);return ke.jsxs(Be.Fragment,{children:[ke.jsx(Vae,{ownerState:d,className:Fr(v.select,r),disabled:i,ref:a||n,...h}),e.multiple?null:ke.jsx(Hae,{as:s,ownerState:d,className:v.icon})]})});var s6;const $ae=_r("fieldset",{shouldForwardProp:xf})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Wae=_r("legend",{shouldForwardProp:xf})(zi(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function Xae(t){const{children:e,classes:n,className:r,label:i,notched:o,...s}=t,a=i!=null&&i!=="",c={...t,notched:o,withLabel:a};return ke.jsx($ae,{"aria-hidden":!0,className:r,ownerState:c,...s,children:ke.jsx(Wae,{ownerState:c,children:a?ke.jsx("span",{children:i}):s6||(s6=ke.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const Yae=t=>{const{classes:e}=t,r=sa({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},mne,e);return{...e,...r}},Zae=_r(wM,{shouldForwardProp:t=>xf(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:xM})(zi(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${md.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${md.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${md.focused} .${md.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(al()).map(([n])=>({props:{color:n},style:{[`&.${md.focused} .${md.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${md.error} .${md.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${md.disabled} .${md.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),Kae=_r(Xae,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(zi(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),Jae=_r(SM,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:bM})(zi(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),QN=Be.forwardRef(function(e,n){var r;const i=ca({props:e,name:"MuiOutlinedInput"}),{components:o={},fullWidth:s=!1,inputComponent:a="input",label:c,multiline:h=!1,notched:d,slots:v={},type:w="text",..._}=i,E=Yae(i),M=Em(),D=xy({props:i,muiFormControl:M,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),A={...i,color:D.color||"primary",disabled:D.disabled,error:D.error,focused:D.focused,formControl:M,fullWidth:s,hiddenLabel:D.hiddenLabel,multiline:h,size:D.size,type:w},F=v.root??o.Root??Zae,O=v.input??o.Input??Jae;return ke.jsx(GN,{slots:{root:F,input:O},renderSuffix:N=>ke.jsx(Kae,{ownerState:A,className:E.notchedOutline,label:c!=null&&c!==""&&D.required?r||(r=ke.jsxs(Be.Fragment,{children:[c," ","*"]})):c,notched:typeof d<"u"?d:!!(N.startAdornment||N.filled||N.focused)}),fullWidth:s,inputComponent:a,multiline:h,ref:n,type:w,..._,classes:{...E,notchedOutline:null}})});QN.muiName="Input";function KV(t){return oa("MuiSelect",t)}const Wb=na("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var l6;const Qae=_r(YV,{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${Wb.select}`]:e.select},{[`&.${Wb.select}`]:e[n.variant]},{[`&.${Wb.error}`]:e.error},{[`&.${Wb.multiple}`]:e.multiple}]}})({[`&.${Wb.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),eoe=_r(ZV,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${vr(n.variant)}`],n.open&&e.iconOpen]}})({}),toe=_r("input",{shouldForwardProp:t=>gM(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function u6(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function noe(t){return t==null||typeof t=="string"&&!t.trim()}const roe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:s}=t,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${vr(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return sa(a,KV,e)},ioe=Be.forwardRef(function(e,n){var sr;const{"aria-describedby":r,"aria-label":i,autoFocus:o,autoWidth:s,children:a,className:c,defaultOpen:h,defaultValue:d,disabled:v,displayEmpty:w,error:_=!1,IconComponent:E,inputRef:M,labelId:D,MenuProps:A={},multiple:F,name:O,onBlur:N,onChange:H,onClose:G,onFocus:W,onOpen:X,open:K,readOnly:k,renderValue:$,required:Q,SelectDisplayProps:ie={},tabIndex:ae,type:ce,value:se,variant:Se="standard",...ye}=e,[Te,pe]=V0({controlled:se,default:d,name:"Select"}),[Ie,me]=V0({controlled:K,default:h,name:"Select"}),xe=Be.useRef(null),ve=Be.useRef(null),[Ee,De]=Be.useState(null),{current:We}=Be.useRef(K!=null),[Ae,ut]=Be.useState(),pt=xu(n,M),st=Be.useCallback(rt=>{ve.current=rt,rt&&De(rt)},[]),Ce=Ee==null?void 0:Ee.parentNode;Be.useImperativeHandle(pt,()=>({focus:()=>{ve.current.focus()},node:xe.current,value:Te}),[Te]),Be.useEffect(()=>{h&&Ie&&Ee&&!We&&(ut(s?null:Ce.clientWidth),ve.current.focus())},[Ee,s]),Be.useEffect(()=>{o&&ve.current.focus()},[o]),Be.useEffect(()=>{if(!D)return;const rt=xc(ve.current).getElementById(D);if(rt){const ze=()=>{getSelection().isCollapsed&&ve.current.focus()};return rt.addEventListener("click",ze),()=>{rt.removeEventListener("click",ze)}}},[D]);const It=(rt,ze)=>{rt?X&&X(ze):G&&G(ze),We||(ut(s?null:Ce.clientWidth),me(rt))},Ve=rt=>{rt.button===0&&(rt.preventDefault(),ve.current.focus(),It(!0,rt))},yt=rt=>{It(!1,rt)},Ze=Be.Children.toArray(a),wt=rt=>{const ze=Ze.find(Xe=>Xe.props.value===rt.target.value);ze!==void 0&&(pe(ze.props.value),H&&H(rt,ze))},Ut=rt=>ze=>{let Xe;if(ze.currentTarget.hasAttribute("tabindex")){if(F){Xe=Array.isArray(Te)?Te.slice():[];const Fe=Te.indexOf(rt.props.value);Fe===-1?Xe.push(rt.props.value):Xe.splice(Fe,1)}else Xe=rt.props.value;if(rt.props.onClick&&rt.props.onClick(ze),Te!==Xe&&(pe(Xe),H)){const Fe=ze.nativeEvent||ze,He=new Fe.constructor(Fe.type,Fe);Object.defineProperty(He,"target",{writable:!0,value:{value:Xe,name:O}}),H(He,rt)}F||It(!1,ze)}},ht=rt=>{k||[" ","ArrowUp","ArrowDown","Enter"].includes(rt.key)&&(rt.preventDefault(),It(!0,rt))},qt=Ee!==null&&Ie,Ye=rt=>{!qt&&N&&(Object.defineProperty(rt,"target",{writable:!0,value:{value:Te,name:O}}),N(rt))};delete ye["aria-invalid"];let Re,Pt;const Dt=[];let At=!1;(oC({value:Te})||w)&&($?Re=$(Te):At=!0);const Bt=Ze.map(rt=>{if(!Be.isValidElement(rt))return null;let ze;if(F){if(!Array.isArray(Te))throw new Error(gm(2));ze=Te.some(Xe=>u6(Xe,rt.props.value)),ze&&At&&Dt.push(rt.props.children)}else ze=u6(Te,rt.props.value),ze&&At&&(Pt=rt.props.children);return Be.cloneElement(rt,{"aria-selected":ze?"true":"false",onClick:Ut(rt),onKeyUp:Xe=>{Xe.key===" "&&Xe.preventDefault(),rt.props.onKeyUp&&rt.props.onKeyUp(Xe)},role:"option",selected:ze,value:void 0,"data-value":rt.props.value})});At&&(F?Dt.length===0?Re=null:Re=Dt.reduce((rt,ze,Xe)=>(rt.push(ze),Xe<Dt.length-1&&rt.push(", "),rt),[]):Re=Pt);let gn=Ae;!s&&We&&Ee&&(gn=Ce.clientWidth);let Zt;typeof ae<"u"?Zt=ae:Zt=v?null:0;const cn=ie.id||(O?`mui-component-select-${O}`:void 0),$t={...e,variant:Se,value:Te,open:qt,error:_},Et=roe($t),qn={...A.PaperProps,...(sr=A.slotProps)==null?void 0:sr.paper},Dn=Px();return ke.jsxs(Be.Fragment,{children:[ke.jsx(Qae,{as:"div",ref:st,tabIndex:Zt,role:"combobox","aria-controls":qt?Dn:void 0,"aria-disabled":v?"true":void 0,"aria-expanded":qt?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[D,cn].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":Q?"true":void 0,"aria-invalid":_?"true":void 0,onKeyDown:ht,onMouseDown:v||k?null:Ve,onBlur:Ye,onFocus:W,...ie,ownerState:$t,className:Fr(ie.className,Et.select,c),id:cn,children:noe(Re)?l6||(l6=ke.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):Re}),ke.jsx(toe,{"aria-invalid":_,value:Array.isArray(Te)?Te.join(","):Te,name:O,ref:xe,"aria-hidden":!0,onChange:wt,tabIndex:-1,disabled:v,className:Et.nativeInput,autoFocus:o,required:Q,...ye,ownerState:$t}),ke.jsx(eoe,{as:E,className:Et.icon,ownerState:$t}),ke.jsx(Uae,{id:`menu-${O||""}`,anchorEl:Ce,open:qt,onClose:yt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...A,slotProps:{...A.slotProps,list:{"aria-labelledby":D,role:"listbox","aria-multiselectable":F?"true":void 0,disableListWrap:!0,id:Dn,...A.MenuListProps},paper:{...qn,style:{minWidth:gn,...qn!=null?qn.style:null}}},children:Bt})]})}),aoe=t=>{const{classes:e}=t,r=sa({root:["root"]},KV,e);return{...e,...r}},ek={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>xf(t)&&t!=="variant",slot:"Root"},ooe=_r(YN,ek)(""),soe=_r(QN,ek)(""),loe=_r(XN,ek)(""),JV=Be.forwardRef(function(e,n){const r=ca({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:s={},className:a,defaultOpen:c=!1,displayEmpty:h=!1,IconComponent:d=kV,id:v,input:w,inputProps:_,label:E,labelId:M,MenuProps:D,multiple:A=!1,native:F=!1,onClose:O,onOpen:N,open:H,renderValue:G,SelectDisplayProps:W,variant:X="outlined",...K}=r,k=F?qae:ioe,$=Em(),Q=xy({props:r,muiFormControl:$,states:["variant","error"]}),ie=Q.variant||X,ae={...r,variant:ie,classes:s},ce=aoe(ae),{root:se,...Se}=ce,ye=w||{standard:ke.jsx(ooe,{ownerState:ae}),outlined:ke.jsx(soe,{label:E,ownerState:ae}),filled:ke.jsx(loe,{ownerState:ae})}[ie],Te=xu(n,Ix(ye));return ke.jsx(Be.Fragment,{children:Be.cloneElement(ye,{inputComponent:k,inputProps:{children:o,error:Q.error,IconComponent:d,variant:ie,type:void 0,multiple:A,...F?{id:v}:{autoWidth:i,defaultOpen:c,displayEmpty:h,labelId:M,MenuProps:D,onClose:O,onOpen:N,open:H,renderValue:G,SelectDisplayProps:{id:v,...W}},..._,classes:_?_h(Se,_.classes):Se,...w?w.props.inputProps:{}},...(A&&F||h)&&ie==="outlined"?{notched:!0}:{},ref:Te,className:Fr(ye.props.className,a,ce.root),...!w&&{variant:ie},...K})})});JV.muiName="Select";function uoe(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const coe=2;function A_(t,e,n,r,i){return n===1?Math.min(t+e,i):Math.max(t-e,r)}function QV(t,e){return t-e}function c6(t,e){const{index:n}=t.reduce((r,i,o)=>{const s=Math.abs(e-i);return r===null||s<r.distance||s===r.distance?{distance:s,index:o}:r},null)??{};return n}function rE(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function sC(t,e,n){return(t-e)*100/(n-e)}function hoe(t,e,n){return(n-e)*t+e}function foe(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function doe(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(foe(e)))}function h6({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(QV)}function iE({sliderRef:t,activeIndex:e,setActive:n}){var i,o,s;const r=xc(t.current);(!((i=t.current)!=null&&i.contains(r.activeElement))||Number((o=r==null?void 0:r.activeElement)==null?void 0:o.getAttribute("data-index"))!==e)&&((s=t.current)==null||s.querySelector(`[type="range"][data-index="${e}"]`).focus()),n&&n(e)}function aE(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?uoe(t,e):!1}const poe={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},goe=t=>t;let oE;function f6(){return oE===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?oE=CSS.supports("touch-action","none"):oE=!0),oE}function moe(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:o=!1,marks:s=!1,max:a=100,min:c=0,name:h,onChange:d,onChangeCommitted:v,orientation:w="horizontal",rootRef:_,scale:E=goe,step:M=1,shiftStep:D=10,tabIndex:A,value:F}=t,O=Be.useRef(void 0),[N,H]=Be.useState(-1),[G,W]=Be.useState(-1),[X,K]=Be.useState(!1),k=Be.useRef(0),$=Be.useRef(null),[Q,ie]=V0({controlled:F,default:n??c,name:"Slider"}),ae=d&&((At,Bt,gn)=>{const Zt=At.nativeEvent||At,cn=new Zt.constructor(Zt.type,Zt);Object.defineProperty(cn,"target",{writable:!0,value:{value:Bt,name:h}}),$.current=Bt,d(cn,Bt,gn)}),ce=Array.isArray(Q);let se=ce?Q.slice().sort(QV):[Q];se=se.map(At=>At==null?c:a1(At,c,a));const Se=s===!0&&M!==null?[...Array(Math.floor((a-c)/M)+1)].map((At,Bt)=>({value:c+M*Bt})):s||[],ye=Se.map(At=>At.value),[Te,pe]=Be.useState(-1),Ie=Be.useRef(null),me=xu(_,Ie),xe=At=>Bt=>{var Zt;const gn=Number(Bt.currentTarget.getAttribute("data-index"));nx(Bt.target)&&pe(gn),W(gn),(Zt=At==null?void 0:At.onFocus)==null||Zt.call(At,Bt)},ve=At=>Bt=>{var gn;nx(Bt.target)||pe(-1),W(-1),(gn=At==null?void 0:At.onBlur)==null||gn.call(At,Bt)},Ee=(At,Bt)=>{const gn=Number(At.currentTarget.getAttribute("data-index")),Zt=se[gn],cn=ye.indexOf(Zt);let $t=Bt;if(Se&&M==null){const Et=ye[ye.length-1];$t>=Et?$t=Et:$t<=ye[0]?$t=ye[0]:$t=$t<Zt?ye[cn-1]:ye[cn+1]}if($t=a1($t,c,a),ce){i&&($t=a1($t,se[gn-1]||-1/0,se[gn+1]||1/0));const Et=$t;$t=h6({values:se,newValue:$t,index:gn});let qn=gn;i||(qn=$t.indexOf(Et)),iE({sliderRef:Ie,activeIndex:qn})}ie($t),pe(gn),ae&&!aE($t,Q)&&ae(At,$t,gn),v&&v(At,$.current??$t)},De=At=>Bt=>{var gn;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(Bt.key)){Bt.preventDefault();const Zt=Number(Bt.currentTarget.getAttribute("data-index")),cn=se[Zt];let $t=null;if(M!=null){const Et=Bt.shiftKey?D:M;switch(Bt.key){case"ArrowUp":$t=A_(cn,Et,1,c,a);break;case"ArrowRight":$t=A_(cn,Et,o?-1:1,c,a);break;case"ArrowDown":$t=A_(cn,Et,-1,c,a);break;case"ArrowLeft":$t=A_(cn,Et,o?1:-1,c,a);break;case"PageUp":$t=A_(cn,D,1,c,a);break;case"PageDown":$t=A_(cn,D,-1,c,a);break;case"Home":$t=c;break;case"End":$t=a;break}}else if(Se){const Et=ye[ye.length-1],qn=ye.indexOf(cn),Dn=[o?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],sr=[o?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];Dn.includes(Bt.key)?qn===0?$t=ye[0]:$t=ye[qn-1]:sr.includes(Bt.key)&&(qn===ye.length-1?$t=Et:$t=ye[qn+1])}$t!=null&&Ee(Bt,$t)}(gn=At==null?void 0:At.onKeyDown)==null||gn.call(At,Bt)};Rd(()=>{var At;r&&Ie.current.contains(document.activeElement)&&((At=document.activeElement)==null||At.blur())},[r]),r&&N!==-1&&H(-1),r&&Te!==-1&&pe(-1);const We=At=>Bt=>{var gn;(gn=At.onChange)==null||gn.call(At,Bt),Ee(Bt,Bt.target.valueAsNumber)},Ae=Be.useRef(void 0);let ut=w;o&&w==="horizontal"&&(ut+="-reverse");const pt=({finger:At,move:Bt=!1})=>{const{current:gn}=Ie,{width:Zt,height:cn,bottom:$t,left:Et}=gn.getBoundingClientRect();let qn;ut.startsWith("vertical")?qn=($t-At.y)/cn:qn=(At.x-Et)/Zt,ut.includes("-reverse")&&(qn=1-qn);let Dn;if(Dn=hoe(qn,c,a),M)Dn=doe(Dn,M,c);else{const rt=c6(ye,Dn);Dn=ye[rt]}Dn=a1(Dn,c,a);let sr=0;if(ce){Bt?sr=Ae.current:sr=c6(se,Dn),i&&(Dn=a1(Dn,se[sr-1]||-1/0,se[sr+1]||1/0));const rt=Dn;Dn=h6({values:se,newValue:Dn,index:sr}),i&&Bt||(sr=Dn.indexOf(rt),Ae.current=sr)}return{newValue:Dn,activeIndex:sr}},st=zc(At=>{const Bt=rE(At,O);if(!Bt)return;if(k.current+=1,At.type==="mousemove"&&At.buttons===0){Ce(At);return}const{newValue:gn,activeIndex:Zt}=pt({finger:Bt,move:!0});iE({sliderRef:Ie,activeIndex:Zt,setActive:H}),ie(gn),!X&&k.current>coe&&K(!0),ae&&!aE(gn,Q)&&ae(At,gn,Zt)}),Ce=zc(At=>{const Bt=rE(At,O);if(K(!1),!Bt)return;const{newValue:gn}=pt({finger:Bt,move:!0});H(-1),At.type==="touchend"&&W(-1),v&&v(At,$.current??gn),O.current=void 0,Ve()}),It=zc(At=>{if(r)return;f6()||At.preventDefault();const Bt=At.changedTouches[0];Bt!=null&&(O.current=Bt.identifier);const gn=rE(At,O);if(gn!==!1){const{newValue:cn,activeIndex:$t}=pt({finger:gn});iE({sliderRef:Ie,activeIndex:$t,setActive:H}),ie(cn),ae&&!aE(cn,Q)&&ae(At,cn,$t)}k.current=0;const Zt=xc(Ie.current);Zt.addEventListener("touchmove",st,{passive:!0}),Zt.addEventListener("touchend",Ce,{passive:!0})}),Ve=Be.useCallback(()=>{const At=xc(Ie.current);At.removeEventListener("mousemove",st),At.removeEventListener("mouseup",Ce),At.removeEventListener("touchmove",st),At.removeEventListener("touchend",Ce)},[Ce,st]);Be.useEffect(()=>{const{current:At}=Ie;return At.addEventListener("touchstart",It,{passive:f6()}),()=>{At.removeEventListener("touchstart",It),Ve()}},[Ve,It]),Be.useEffect(()=>{r&&Ve()},[r,Ve]);const yt=At=>Bt=>{var cn;if((cn=At.onMouseDown)==null||cn.call(At,Bt),r||Bt.defaultPrevented||Bt.button!==0)return;Bt.preventDefault();const gn=rE(Bt,O);if(gn!==!1){const{newValue:$t,activeIndex:Et}=pt({finger:gn});iE({sliderRef:Ie,activeIndex:Et,setActive:H}),ie($t),ae&&!aE($t,Q)&&ae(Bt,$t,Et)}k.current=0;const Zt=xc(Ie.current);Zt.addEventListener("mousemove",st,{passive:!0}),Zt.addEventListener("mouseup",Ce)},Ze=sC(ce?se[0]:c,c,a),wt=sC(se[se.length-1],c,a)-Ze,Ut=(At={})=>{const Bt=k2(At),gn={onMouseDown:yt(Bt||{})},Zt={...Bt,...gn};return{...At,ref:me,...Zt}},ht=At=>Bt=>{var Zt;(Zt=At.onMouseOver)==null||Zt.call(At,Bt);const gn=Number(Bt.currentTarget.getAttribute("data-index"));W(gn)},qt=At=>Bt=>{var gn;(gn=At.onMouseLeave)==null||gn.call(At,Bt),W(-1)},Ye=(At={})=>{const Bt=k2(At),gn={onMouseOver:ht(Bt||{}),onMouseLeave:qt(Bt||{})};return{...At,...Bt,...gn}},Re=At=>({pointerEvents:N!==-1&&N!==At?"none":void 0});let Pt;return w==="vertical"&&(Pt=o?"vertical-rl":"vertical-lr"),{active:N,axis:ut,axisProps:poe,dragging:X,focusedThumbIndex:Te,getHiddenInputProps:(At={})=>{const Bt=k2(At),gn={onChange:We(Bt||{}),onFocus:xe(Bt||{}),onBlur:ve(Bt||{}),onKeyDown:De(Bt||{})},Zt={...Bt,...gn};return{tabIndex:A,"aria-labelledby":e,"aria-orientation":w,"aria-valuemax":E(a),"aria-valuemin":E(c),name:h,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:r,...At,...Zt,style:{...VJ,direction:o?"rtl":"ltr",width:"100%",height:"100%",writingMode:Pt}}},getRootProps:Ut,getThumbProps:Ye,marks:Se,open:G,range:ce,rootRef:me,trackLeap:wt,trackOffset:Ze,values:se,getThumbStyle:Re}}const voe=t=>!t||!um(t);function yoe(t){return oa("MuiSlider",t)}const Ed=na("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),_oe=t=>{const{open:e}=t;return{offset:Fr(e&&Ed.valueLabelOpen),circle:Ed.valueLabelCircle,label:Ed.valueLabelLabel}};function xoe(t){const{children:e,className:n,value:r}=t,i=_oe(t);return e?Be.cloneElement(e,{className:Fr(e.props.className)},ke.jsxs(Be.Fragment,{children:[e.props.children,ke.jsx("span",{className:Fr(i.offset,n),"aria-hidden":!0,children:ke.jsx("span",{className:i.circle,children:ke.jsx("span",{className:i.label,children:r})})})]})):null}function d6(t){return t}const boe=_r("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${vr(n.color)}`],n.size!=="medium"&&e[`size${vr(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(zi(({theme:t})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Ed.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Ed.dragging}`]:{[`& .${Ed.thumb}, & .${Ed.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),woe=_r("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Soe=_r("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})(zi(({theme:t})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:{backgroundColor:J0(t.palette[e].main,.62),borderColor:J0(t.palette[e].main,.62),...t.applyStyles("dark",{backgroundColor:K0(t.palette[e].main,.5)}),...t.applyStyles("dark",{borderColor:K0(t.palette[e].main,.5)})}}}))]}))),Eoe=_r("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${vr(n.color)}`],n.size!=="medium"&&e[`thumbSize${vr(n.size)}`]]}})(zi(({theme:t})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Ed.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(al()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${Ed.focusVisible}`]:{...t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Io(t.palette[e].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${Ed.active}`]:{...t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Io(t.palette[e].main,.16)}`}}}}))]}))),Toe=_r(xoe,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})(zi(({theme:t})=>({zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Ed.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Ed.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Coe=_r("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>gM(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(zi(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}))),Moe=_r("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>gM(t)&&t!=="markLabelActive",overridesResolver:(t,e)=>e.markLabel})(zi(({theme:t})=>({...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}))),Aoe=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:o,classes:s,color:a,size:c}=t,h={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",a&&`color${vr(a)}`,c&&`size${vr(c)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",c&&`thumbSize${vr(c)}`,a&&`thumbColor${vr(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return sa(h,yoe,s)},Roe=({children:t})=>t,y0=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiSlider"}),i=_y(),{"aria-label":o,"aria-valuetext":s,"aria-labelledby":a,component:c="span",components:h={},componentsProps:d={},color:v="primary",classes:w,className:_,disableSwap:E=!1,disabled:M=!1,getAriaLabel:D,getAriaValueText:A,marks:F=!1,max:O=100,min:N=0,name:H,onChange:G,onChangeCommitted:W,orientation:X="horizontal",shiftStep:K=10,size:k="medium",step:$=1,scale:Q=d6,slotProps:ie,slots:ae,tabIndex:ce,track:se="normal",value:Se,valueLabelDisplay:ye="off",valueLabelFormat:Te=d6,...pe}=r,Ie={...r,isRtl:i,max:O,min:N,classes:w,disabled:M,disableSwap:E,orientation:X,marks:F,color:v,size:k,step:$,shiftStep:K,scale:Q,track:se,valueLabelDisplay:ye,valueLabelFormat:Te},{axisProps:me,getRootProps:xe,getHiddenInputProps:ve,getThumbProps:Ee,open:De,active:We,axis:Ae,focusedThumbIndex:ut,range:pt,dragging:st,marks:Ce,values:It,trackOffset:Ve,trackLeap:yt,getThumbStyle:Ze}=moe({...Ie,rootRef:n});Ie.marked=Ce.length>0&&Ce.some(xt=>xt.label),Ie.dragging=st,Ie.focusedThumbIndex=ut;const wt=Aoe(Ie),Ut=(ae==null?void 0:ae.root)??h.Root??boe,ht=(ae==null?void 0:ae.rail)??h.Rail??woe,qt=(ae==null?void 0:ae.track)??h.Track??Soe,Ye=(ae==null?void 0:ae.thumb)??h.Thumb??Eoe,Re=(ae==null?void 0:ae.valueLabel)??h.ValueLabel??Toe,Pt=(ae==null?void 0:ae.mark)??h.Mark??Coe,Dt=(ae==null?void 0:ae.markLabel)??h.MarkLabel??Moe,At=(ae==null?void 0:ae.input)??h.Input??"input",Bt=(ie==null?void 0:ie.root)??d.root,gn=(ie==null?void 0:ie.rail)??d.rail,Zt=(ie==null?void 0:ie.track)??d.track,cn=(ie==null?void 0:ie.thumb)??d.thumb,$t=(ie==null?void 0:ie.valueLabel)??d.valueLabel,Et=(ie==null?void 0:ie.mark)??d.mark,qn=(ie==null?void 0:ie.markLabel)??d.markLabel,Dn=(ie==null?void 0:ie.input)??d.input,sr=hf({elementType:Ut,getSlotProps:xe,externalSlotProps:Bt,externalForwardedProps:pe,additionalProps:{...voe(Ut)&&{as:c}},ownerState:{...Ie,...Bt==null?void 0:Bt.ownerState},className:[wt.root,_]}),rt=hf({elementType:ht,externalSlotProps:gn,ownerState:Ie,className:wt.rail}),ze=hf({elementType:qt,externalSlotProps:Zt,additionalProps:{style:{...me[Ae].offset(Ve),...me[Ae].leap(yt)}},ownerState:{...Ie,...Zt==null?void 0:Zt.ownerState},className:wt.track}),Xe=hf({elementType:Ye,getSlotProps:Ee,externalSlotProps:cn,ownerState:{...Ie,...cn==null?void 0:cn.ownerState},className:wt.thumb}),Fe=hf({elementType:Re,externalSlotProps:$t,ownerState:{...Ie,...$t==null?void 0:$t.ownerState},className:wt.valueLabel}),He=hf({elementType:Pt,externalSlotProps:Et,ownerState:Ie,className:wt.mark}),mt=hf({elementType:Dt,externalSlotProps:qn,ownerState:Ie,className:wt.markLabel}),it=hf({elementType:At,getSlotProps:ve,externalSlotProps:Dn,ownerState:Ie});return ke.jsxs(Ut,{...sr,children:[ke.jsx(ht,{...rt}),ke.jsx(qt,{...ze}),Ce.filter(xt=>xt.value>=N&&xt.value<=O).map((xt,Tt)=>{const kt=sC(xt.value,N,O),Jt=me[Ae].offset(kt);let rn;return se===!1?rn=It.includes(xt.value):rn=se==="normal"&&(pt?xt.value>=It[0]&&xt.value<=It[It.length-1]:xt.value<=It[0])||se==="inverted"&&(pt?xt.value<=It[0]||xt.value>=It[It.length-1]:xt.value>=It[0]),ke.jsxs(Be.Fragment,{children:[ke.jsx(Pt,{"data-index":Tt,...He,...!um(Pt)&&{markActive:rn},style:{...Jt,...He.style},className:Fr(He.className,rn&&wt.markActive)}),xt.label!=null?ke.jsx(Dt,{"aria-hidden":!0,"data-index":Tt,...mt,...!um(Dt)&&{markLabelActive:rn},style:{...Jt,...mt.style},className:Fr(wt.markLabel,mt.className,rn&&wt.markLabelActive),children:xt.label}):null]},Tt)}),It.map((xt,Tt)=>{const kt=sC(xt,N,O),Jt=me[Ae].offset(kt),rn=ye==="off"?Roe:Re;return ke.jsx(rn,{...!um(rn)&&{valueLabelFormat:Te,valueLabelDisplay:ye,value:typeof Te=="function"?Te(Q(xt),Tt):Te,index:Tt,open:De===Tt||We===Tt||ye==="on",disabled:M},...Fe,children:ke.jsx(Ye,{"data-index":Tt,...Xe,className:Fr(wt.thumb,Xe.className,We===Tt&&wt.active,ut===Tt&&wt.focusVisible),style:{...Jt,...Ze(Tt),...Xe.style},children:ke.jsx(At,{"data-index":Tt,"aria-label":D?D(Tt):o,"aria-valuenow":Q(xt),"aria-labelledby":a,"aria-valuetext":A?A(Q(xt),Tt):s,value:It[Tt],...it})})},Tt)})]})});function Poe(t){return oa("MuiSwitch",t)}const zh=na("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Ioe=t=>{const{classes:e,edge:n,size:r,color:i,checked:o,disabled:s}=t,a={root:["root",n&&`edge${vr(n)}`,`size${vr(r)}`],switchBase:["switchBase",`color${vr(i)}`,o&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=sa(a,Poe,e);return{...e,...c}},Doe=_r("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.edge&&e[`edge${vr(n.edge)}`],e[`size${vr(n.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${zh.thumb}`]:{width:16,height:16},[`& .${zh.switchBase}`]:{padding:4,[`&.${zh.checked}`]:{transform:"translateX(16px)"}}}}]}),Loe=_r(BV,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.switchBase,{[`& .${zh.input}`]:e.input},n.color!=="default"&&e[`color${vr(n.color)}`]]}})(zi(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${zh.checked}`]:{transform:"translateX(20px)"},[`&.${zh.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${zh.checked} + .${zh.track}`]:{opacity:.5},[`&.${zh.disabled} + .${zh.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${zh.input}`]:{left:"-100%",width:"300%"}})),zi(({theme:t})=>({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Io(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(al(["light"])).map(([e])=>({props:{color:e},style:{[`&.${zh.checked}`]:{color:(t.vars||t).palette[e].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Io(t.palette[e].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${zh.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${e}DisabledColor`]:`${t.palette.mode==="light"?J0(t.palette[e].main,.62):K0(t.palette[e].main,.55)}`}},[`&.${zh.checked} + .${zh.track}`]:{backgroundColor:(t.vars||t).palette[e].main}}}))]}))),Noe=_r("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,e)=>e.track})(zi(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`}))),koe=_r("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,e)=>e.thumb})(zi(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),p6=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiSwitch"}),{className:i,color:o="primary",edge:s=!1,size:a="medium",sx:c,slots:h={},slotProps:d={},...v}=r,w={...r,color:o,edge:s,size:a},_=Ioe(w),E={slots:h,slotProps:d},[M,D]=Fa("root",{className:Fr(_.root,i),elementType:Doe,externalForwardedProps:E,ownerState:w,additionalProps:{sx:c}}),[A,F]=Fa("thumb",{className:_.thumb,elementType:koe,externalForwardedProps:E,ownerState:w}),O=ke.jsx(A,{...F}),[N,H]=Fa("track",{className:_.track,elementType:Noe,externalForwardedProps:E,ownerState:w});return ke.jsxs(M,{...D,children:[ke.jsx(Loe,{type:"checkbox",icon:O,checkedIcon:O,ref:n,ownerState:w,...v,classes:{..._,root:_.switchBase},slots:{...h.switchBase&&{root:h.switchBase},...h.input&&{input:h.input}},slotProps:{...d.switchBase&&{root:typeof d.switchBase=="function"?d.switchBase(w):d.switchBase},...d.input&&{input:typeof d.input=="function"?d.input(w):d.input}}}),ke.jsx(N,{...H})]})});function Ooe(t){return oa("MuiTab",t)}const dd=na("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Foe=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:o,label:s,selected:a,disabled:c}=t,h={root:["root",o&&s&&"labelIcon",`textColor${vr(n)}`,r&&"fullWidth",i&&"wrapped",a&&"selected",c&&"disabled"],icon:["iconWrapper","icon"]};return sa(h,Ooe,e)},Boe=_r(Q0,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${vr(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped,{[`& .${dd.iconWrapper}`]:e.iconWrapper},{[`& .${dd.icon}`]:e.icon}]}})(zi(({theme:t})=>({...t.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition==="top"||e.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:e})=>e.label&&e.iconPosition!=="top"&&e.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="top",style:{[`& > .${dd.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="bottom",style:{[`& > .${dd.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="start",style:{[`& > .${dd.icon}`]:{marginRight:t.spacing(1)}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="end",style:{[`& > .${dd.icon}`]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${dd.selected}`]:{opacity:1},[`&.${dd.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${dd.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${dd.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${dd.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${dd.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:t.typography.pxToRem(12)}}]}))),g6=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:s=!1,fullWidth:a,icon:c,iconPosition:h="top",indicator:d,label:v,onChange:w,onClick:_,onFocus:E,selected:M,selectionFollowsFocus:D,textColor:A="inherit",value:F,wrapped:O=!1,...N}=r,H={...r,disabled:o,disableFocusRipple:s,selected:M,icon:!!c,iconPosition:h,label:!!v,fullWidth:a,textColor:A,wrapped:O},G=Foe(H),W=c&&v&&Be.isValidElement(c)?Be.cloneElement(c,{className:Fr(G.icon,c.props.className)}):c,X=k=>{!M&&w&&w(k,F),_&&_(k)},K=k=>{D&&!M&&w&&w(k,F),E&&E(k)};return ke.jsxs(Boe,{focusRipple:!s,className:Fr(G.root,i),ref:n,role:"tab","aria-selected":M,disabled:o,onClick:X,onFocus:K,ownerState:H,tabIndex:M?0:-1,...N,children:[h==="top"||h==="start"?ke.jsxs(Be.Fragment,{children:[W,v]}):ke.jsxs(Be.Fragment,{children:[v,W]}),d]})});function zoe(t){return oa("MuiToolbar",t)}na("MuiToolbar",["root","gutters","regular","dense"]);const Uoe=t=>{const{classes:e,disableGutters:n,variant:r}=t;return sa({root:["root",!n&&"gutters",r]},zoe,e)},joe=_r("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(zi(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),MT=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:s=!1,variant:a="regular",...c}=r,h={...r,component:o,disableGutters:s,variant:a},d=Uoe(h);return ke.jsx(joe,{as:o,className:Fr(d.root,i),ref:n,ownerState:h,...c})}),Goe=fs(ke.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Voe=fs(ke.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Hoe(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function qoe(t,e,n,r={},i=()=>{}){const{ease:o=Hoe,duration:s=300}=r;let a=null;const c=e[t];let h=!1;const d=()=>{h=!0},v=w=>{if(h){i(new Error("Animation cancelled"));return}a===null&&(a=w);const _=Math.min(1,(w-a)/s);if(e[t]=o(_)*(n-c)+c,_>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(v)};return c===n?(i(new Error("Element already at target position")),d):(requestAnimationFrame(v),d)}const $oe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Woe(t){const{onChange:e,...n}=t,r=Be.useRef(),i=Be.useRef(null),o=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return Rd(()=>{const s=Hw(()=>{const c=r.current;o(),c!==r.current&&e(r.current)}),a=Xf(i.current);return a.addEventListener("resize",s),()=>{s.clear(),a.removeEventListener("resize",s)}},[e]),Be.useEffect(()=>{o(),e(r.current)},[e]),ke.jsx("div",{style:$oe,...n,ref:i})}function Xoe(t){return oa("MuiTabScrollButton",t)}const Yoe=na("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Zoe=t=>{const{classes:e,orientation:n,disabled:r}=t;return sa({root:["root",n,r&&"disabled"]},Xoe,e)},Koe=_r(Q0,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${Yoe.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),Joe=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiTabScrollButton"}),{className:i,slots:o={},slotProps:s={},direction:a,orientation:c,disabled:h,...d}=r,v=_y(),w={isRtl:v,...r},_=Zoe(w),E=o.StartScrollButtonIcon??Goe,M=o.EndScrollButtonIcon??Voe,D=hf({elementType:E,externalSlotProps:s.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:w}),A=hf({elementType:M,externalSlotProps:s.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:w});return ke.jsx(Koe,{component:"div",className:Fr(_.root,i),ref:n,role:null,ownerState:w,tabIndex:null,...d,style:{...d.style,...c==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${v?-90:90}deg)`}},children:a==="left"?ke.jsx(E,{...D}):ke.jsx(M,{...A})})});function Qoe(t){return oa("MuiTabs",t)}const t5=na("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),m6=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,v6=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,sE=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const o=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||o)i=n(t,i);else{i.focus();return}}},ese=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:s,scrollButtonsHideMobile:a,classes:c}=t;return sa({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],list:["list","flexContainer",e&&"flexContainerVertical",e&&"vertical",s&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},Qoe,c)},tse=_r("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${t5.scrollButtons}`]:e.scrollButtons},{[`& .${t5.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(zi(({theme:t})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${t5.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}}}]}))),nse=_r("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:t})=>t.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:t})=>t.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:t})=>t.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:t})=>t.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),rse=_r("div",{name:"MuiTabs",slot:"List",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.list,e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})({display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.centered,style:{justifyContent:"center"}}]}),ise=_r("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,e)=>e.indicator})(zi(({theme:t})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(t.vars||t).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(t.vars||t).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:"100%",width:2,right:0}}]}))),ase=_r(Woe)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),y6={},ose=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiTabs"}),i=td(),o=_y(),{"aria-label":s,"aria-labelledby":a,action:c,centered:h=!1,children:d,className:v,component:w="div",allowScrollButtonsMobile:_=!1,indicatorColor:E="primary",onChange:M,orientation:D="horizontal",ScrollButtonComponent:A,scrollButtons:F="auto",selectionFollowsFocus:O,slots:N={},slotProps:H={},TabIndicatorProps:G={},TabScrollButtonProps:W={},textColor:X="primary",value:K,variant:k="standard",visibleScrollbar:$=!1,...Q}=r,ie=k==="scrollable",ae=D==="vertical",ce=ae?"scrollTop":"scrollLeft",se=ae?"top":"left",Se=ae?"bottom":"right",ye=ae?"clientHeight":"clientWidth",Te=ae?"height":"width",pe={...r,component:w,allowScrollButtonsMobile:_,indicatorColor:E,orientation:D,vertical:ae,scrollButtons:F,textColor:X,variant:k,visibleScrollbar:$,fixed:!ie,hideScrollbar:ie&&!$,scrollableX:ie&&!ae,scrollableY:ie&&ae,centered:h&&!ie,scrollButtonsHideMobile:!_},Ie=ese(pe),me=hf({elementType:N.StartScrollButtonIcon,externalSlotProps:H.startScrollButtonIcon,ownerState:pe}),xe=hf({elementType:N.EndScrollButtonIcon,externalSlotProps:H.endScrollButtonIcon,ownerState:pe}),[ve,Ee]=Be.useState(!1),[De,We]=Be.useState(y6),[Ae,ut]=Be.useState(!1),[pt,st]=Be.useState(!1),[Ce,It]=Be.useState(!1),[Ve,yt]=Be.useState({overflow:"hidden",scrollbarWidth:0}),Ze=new Map,wt=Be.useRef(null),Ut=Be.useRef(null),ht={slots:N,slotProps:{indicator:G,scrollButton:W,...H}},qt=()=>{const An=wt.current;let jt;if(An){const je=An.getBoundingClientRect();jt={clientWidth:An.clientWidth,scrollLeft:An.scrollLeft,scrollTop:An.scrollTop,scrollWidth:An.scrollWidth,top:je.top,bottom:je.bottom,left:je.left,right:je.right}}let Pe;if(An&&K!==!1){const je=Ut.current.children;if(je.length>0){const _t=je[Ze.get(K)];Pe=_t?_t.getBoundingClientRect():null}}return{tabsMeta:jt,tabMeta:Pe}},Ye=zc(()=>{const{tabsMeta:An,tabMeta:jt}=qt();let Pe=0,je;ae?(je="top",jt&&An&&(Pe=jt.top-An.top+An.scrollTop)):(je=o?"right":"left",jt&&An&&(Pe=(o?-1:1)*(jt[je]-An[je]+An.scrollLeft)));const _t={[je]:Pe,[Te]:jt?jt[Te]:0};if(typeof De[je]!="number"||typeof De[Te]!="number")We(_t);else{const Qt=Math.abs(De[je]-_t[je]),en=Math.abs(De[Te]-_t[Te]);(Qt>=1||en>=1)&&We(_t)}}),Re=(An,{animation:jt=!0}={})=>{jt?qoe(ce,wt.current,An,{duration:i.transitions.duration.standard}):wt.current[ce]=An},Pt=An=>{let jt=wt.current[ce];ae?jt+=An:jt+=An*(o?-1:1),Re(jt)},Dt=()=>{const An=wt.current[ye];let jt=0;const Pe=Array.from(Ut.current.children);for(let je=0;je<Pe.length;je+=1){const _t=Pe[je];if(jt+_t[ye]>An){je===0&&(jt=An);break}jt+=_t[ye]}return jt},At=()=>{Pt(-1*Dt())},Bt=()=>{Pt(Dt())},[gn,{onChange:Zt,...cn}]=Fa("scrollbar",{className:Fr(Ie.scrollableX,Ie.hideScrollbar),elementType:ase,shouldForwardComponentProp:!0,externalForwardedProps:ht,ownerState:pe}),$t=Be.useCallback(An=>{Zt==null||Zt(An),yt({overflow:null,scrollbarWidth:An})},[Zt]),[Et,qn]=Fa("scrollButtons",{className:Fr(Ie.scrollButtons,W.className),elementType:Joe,externalForwardedProps:ht,ownerState:pe,additionalProps:{orientation:D,slots:{StartScrollButtonIcon:N.startScrollButtonIcon||N.StartScrollButtonIcon,EndScrollButtonIcon:N.endScrollButtonIcon||N.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:me,endScrollButtonIcon:xe}}}),Dn=()=>{const An={};An.scrollbarSizeListener=ie?ke.jsx(gn,{...cn,onChange:$t}):null;const Pe=ie&&(F==="auto"&&(Ae||pt)||F===!0);return An.scrollButtonStart=Pe?ke.jsx(Et,{direction:o?"right":"left",onClick:At,disabled:!Ae,...qn}):null,An.scrollButtonEnd=Pe?ke.jsx(Et,{direction:o?"left":"right",onClick:Bt,disabled:!pt,...qn}):null,An},sr=zc(An=>{const{tabsMeta:jt,tabMeta:Pe}=qt();if(!(!Pe||!jt)){if(Pe[se]<jt[se]){const je=jt[ce]+(Pe[se]-jt[se]);Re(je,{animation:An})}else if(Pe[Se]>jt[Se]){const je=jt[ce]+(Pe[Se]-jt[Se]);Re(je,{animation:An})}}}),rt=zc(()=>{ie&&F!==!1&&It(!Ce)});Be.useEffect(()=>{const An=Hw(()=>{wt.current&&Ye()});let jt;const Pe=Qt=>{Qt.forEach(en=>{en.removedNodes.forEach(Fn=>{jt==null||jt.unobserve(Fn)}),en.addedNodes.forEach(Fn=>{jt==null||jt.observe(Fn)})}),An(),rt()},je=Xf(wt.current);je.addEventListener("resize",An);let _t;return typeof ResizeObserver<"u"&&(jt=new ResizeObserver(An),Array.from(Ut.current.children).forEach(Qt=>{jt.observe(Qt)})),typeof MutationObserver<"u"&&(_t=new MutationObserver(Pe),_t.observe(Ut.current,{childList:!0})),()=>{An.clear(),je.removeEventListener("resize",An),_t==null||_t.disconnect(),jt==null||jt.disconnect()}},[Ye,rt]),Be.useEffect(()=>{const An=Array.from(Ut.current.children),jt=An.length;if(typeof IntersectionObserver<"u"&&jt>0&&ie&&F!==!1){const Pe=An[0],je=An[jt-1],_t={root:wt.current,threshold:.99},Qt=kr=>{ut(!kr[0].isIntersecting)},en=new IntersectionObserver(Qt,_t);en.observe(Pe);const Fn=kr=>{st(!kr[0].isIntersecting)},Wn=new IntersectionObserver(Fn,_t);return Wn.observe(je),()=>{en.disconnect(),Wn.disconnect()}}},[ie,F,Ce,d==null?void 0:d.length]),Be.useEffect(()=>{Ee(!0)},[]),Be.useEffect(()=>{Ye()}),Be.useEffect(()=>{sr(y6!==De)},[sr,De]),Be.useImperativeHandle(c,()=>({updateIndicator:Ye,updateScrollButtons:rt}),[Ye,rt]);const[ze,Xe]=Fa("indicator",{className:Fr(Ie.indicator,G.className),elementType:ise,externalForwardedProps:ht,ownerState:pe,additionalProps:{style:De}}),Fe=ke.jsx(ze,{...Xe});let He=0;const mt=Be.Children.map(d,An=>{if(!Be.isValidElement(An))return null;const jt=An.props.value===void 0?He:An.props.value;Ze.set(jt,He);const Pe=jt===K;return He+=1,Be.cloneElement(An,{fullWidth:k==="fullWidth",indicator:Pe&&!ve&&Fe,selected:Pe,selectionFollowsFocus:O,onChange:M,textColor:X,value:jt,...He===1&&K===!1&&!An.props.tabIndex?{tabIndex:0}:{}})}),it=An=>{if(An.altKey||An.shiftKey||An.ctrlKey||An.metaKey)return;const jt=Ut.current,Pe=xc(jt).activeElement;if(Pe.getAttribute("role")!=="tab")return;let _t=D==="horizontal"?"ArrowLeft":"ArrowUp",Qt=D==="horizontal"?"ArrowRight":"ArrowDown";switch(D==="horizontal"&&o&&(_t="ArrowRight",Qt="ArrowLeft"),An.key){case _t:An.preventDefault(),sE(jt,Pe,v6);break;case Qt:An.preventDefault(),sE(jt,Pe,m6);break;case"Home":An.preventDefault(),sE(jt,null,m6);break;case"End":An.preventDefault(),sE(jt,null,v6);break}},xt=Dn(),[Tt,kt]=Fa("root",{ref:n,className:Fr(Ie.root,v),elementType:tse,externalForwardedProps:{...ht,...Q,component:w},ownerState:pe}),[Jt,rn]=Fa("scroller",{ref:wt,className:Ie.scroller,elementType:nse,externalForwardedProps:ht,ownerState:pe,additionalProps:{style:{overflow:Ve.overflow,[ae?`margin${o?"Left":"Right"}`:"marginBottom"]:$?void 0:-Ve.scrollbarWidth}}}),[Yt,Qn]=Fa("list",{ref:Ut,className:Fr(Ie.list,Ie.flexContainer),elementType:rse,externalForwardedProps:ht,ownerState:pe,getSlotProps:An=>({...An,onKeyDown:jt=>{var Pe;it(jt),(Pe=An.onKeyDown)==null||Pe.call(An,jt)}})});return ke.jsxs(Tt,{...kt,children:[xt.scrollButtonStart,xt.scrollbarSizeListener,ke.jsxs(Jt,{...rn,children:[ke.jsx(Yt,{"aria-label":s,"aria-labelledby":a,"aria-orientation":D==="vertical"?"vertical":null,role:"tablist",...Qn,children:mt}),ve&&Fe]}),xt.scrollButtonEnd]})});function sse(t){return oa("MuiTextField",t)}na("MuiTextField",["root"]);const lse={standard:YN,filled:XN,outlined:QN},use=t=>{const{classes:e}=t;return sa({root:["root"]},sse,e)},cse=_r(hie,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),eH=Be.forwardRef(function(e,n){const r=ca({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:s,className:a,color:c="primary",defaultValue:h,disabled:d=!1,error:v=!1,FormHelperTextProps:w,fullWidth:_=!1,helperText:E,id:M,InputLabelProps:D,inputProps:A,InputProps:F,inputRef:O,label:N,maxRows:H,minRows:G,multiline:W=!1,name:X,onBlur:K,onChange:k,onFocus:$,placeholder:Q,required:ie=!1,rows:ae,select:ce=!1,SelectProps:se,slots:Se={},slotProps:ye={},type:Te,value:pe,variant:Ie="outlined",...me}=r,xe={...r,autoFocus:o,color:c,disabled:d,error:v,fullWidth:_,multiline:W,required:ie,select:ce,variant:Ie},ve=use(xe),Ee=Px(M),De=E&&Ee?`${Ee}-helper-text`:void 0,We=N&&Ee?`${Ee}-label`:void 0,Ae=lse[Ie],ut={slots:Se,slotProps:{input:F,inputLabel:D,htmlInput:A,formHelperText:w,select:se,...ye}},pt={},st=ut.slotProps.inputLabel;Ie==="outlined"&&(st&&typeof st.shrink<"u"&&(pt.notched=st.shrink),pt.label=N),ce&&((!se||!se.native)&&(pt.id=void 0),pt["aria-describedby"]=void 0);const[Ce,It]=Fa("root",{elementType:cse,shouldForwardComponentProp:!0,externalForwardedProps:{...ut,...me},ownerState:xe,className:Fr(ve.root,a),ref:n,additionalProps:{disabled:d,error:v,fullWidth:_,required:ie,color:c,variant:Ie}}),[Ve,yt]=Fa("input",{elementType:Ae,externalForwardedProps:ut,additionalProps:pt,ownerState:xe}),[Ze,wt]=Fa("inputLabel",{elementType:Yie,externalForwardedProps:ut,ownerState:xe}),[Ut,ht]=Fa("htmlInput",{elementType:"input",externalForwardedProps:ut,ownerState:xe}),[qt,Ye]=Fa("formHelperText",{elementType:_ie,externalForwardedProps:ut,ownerState:xe}),[Re,Pt]=Fa("select",{elementType:JV,externalForwardedProps:ut,ownerState:xe}),Dt=ke.jsx(Ve,{"aria-describedby":De,autoComplete:i,autoFocus:o,defaultValue:h,fullWidth:_,multiline:W,name:X,rows:ae,maxRows:H,minRows:G,type:Te,value:pe,id:Ee,inputRef:O,onBlur:K,onChange:k,onFocus:$,placeholder:Q,inputProps:ht,slots:{input:Se.htmlInput?Ut:void 0},...yt});return ke.jsxs(Ce,{...It,children:[N!=null&&N!==""&&ke.jsx(Ze,{htmlFor:Ee,id:We,...wt,children:N}),ce?ke.jsx(Re,{"aria-describedby":De,id:Ee,labelId:We,value:pe,input:Dt,...Pt,children:s}):Dt,E&&ke.jsx(qt,{id:De,...Ye,children:E})]})});var AT={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.3.0/LICENSE.txt
 */var hse=AT.exports,_6;function fse(){return _6||(_6=1,function(t,e){(function(n,r){t.exports=r()})(hse,function(){var n={},r={};function i(s,a,c){if(r[s]=c,s==="index"){var h="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",d={};return r.shared(d),r.index(n,d),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),n}}i("shared",["exports"],function(s){function a(g,u,m,S){return new(m||(m=Promise))(function(L,j){function V(de){try{oe(S.next(de))}catch(be){j(be)}}function J(de){try{oe(S.throw(de))}catch(be){j(be)}}function oe(de){var be;de.done?L(de.value):(be=de.value,be instanceof m?be:new m(function(Le){Le(be)})).then(V,J)}oe((S=S.apply(g,u||[])).next())})}function c(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var h,d;function v(){if(d)return h;function g(u,m){this.x=u,this.y=m}return d=1,h=g,g.prototype={clone:function(){return new g(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,m){return this.clone()._rotateAround(u,m)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var m=u.x-this.x,S=u.y-this.y;return m*m+S*S},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,m){return Math.atan2(this.x*m-this.y*u,this.x*u+this.y*m)},_matMult:function(u){var m=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=m,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var m=Math.cos(u),S=Math.sin(u),L=S*this.x+m*this.y;return this.x=m*this.x-S*this.y,this.y=L,this},_rotateAround:function(u,m){var S=Math.cos(u),L=Math.sin(u),j=m.y+L*(this.x-m.x)+S*(this.y-m.y);return this.x=m.x+S*(this.x-m.x)-L*(this.y-m.y),this.y=j,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(u){return u instanceof g?u:Array.isArray(u)?new g(u[0],u[1]):u},h}typeof SuppressedError=="function"&&SuppressedError;var w,_,E=c(v()),M=function(){if(_)return w;function g(u,m,S,L){this.cx=3*u,this.bx=3*(S-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*m,this.by=3*(L-m)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=m,this.p2x=S,this.p2y=L}return _=1,w=g,g.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,m){if(m===void 0&&(m=1e-6),u<0)return 0;if(u>1)return 1;for(var S=u,L=0;L<8;L++){var j=this.sampleCurveX(S)-u;if(Math.abs(j)<m)return S;var V=this.sampleCurveDerivativeX(S);if(Math.abs(V)<1e-6)break;S-=j/V}var J=0,oe=1;for(S=u,L=0;L<20&&(j=this.sampleCurveX(S),!(Math.abs(j-u)<m));L++)u>j?J=S:oe=S,S=.5*(oe-J)+J;return S},solve:function(u,m){return this.sampleCurveY(this.solveCurveX(u,m))}},w}(),D=c(M);let A,F;function O(){return A==null&&(A=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),A}function N(){if(F==null&&(F=!1,O())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let S=0;S<5*5;S++){const L=4*S;u.fillStyle=`rgb(${L},${L+1},${L+2})`,u.fillRect(S%5,Math.floor(S/5),1,1)}const m=u.getImageData(0,0,5,5).data;for(let S=0;S<5*5*4;S++)if(S%4!=3&&m[S]!==S){F=!0;break}}}return F||!1}var H,G=1e-6,W=typeof Float32Array<"u"?Float32Array:Array;function X(){var g=new W(9);return W!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[5]=0,g[6]=0,g[7]=0),g[0]=1,g[4]=1,g[8]=1,g}function K(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}function k(){var g=new W(3);return W!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g}function $(g,u,m){var S=new W(3);return S[0]=g,S[1]=u,S[2]=m,S}function Q(g,u,m){var S=u[0],L=u[1],j=u[2],V=u[3];return g[0]=m[0]*S+m[4]*L+m[8]*j+m[12]*V,g[1]=m[1]*S+m[5]*L+m[9]*j+m[13]*V,g[2]=m[2]*S+m[6]*L+m[10]*j+m[14]*V,g[3]=m[3]*S+m[7]*L+m[11]*j+m[15]*V,g}function ie(){var g=new W(4);return W!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g[3]=1,g}function ae(){var g=new W(2);return W!=Float32Array&&(g[0]=0,g[1]=0),g}function ce(g,u){var m=new W(2);return m[0]=g,m[1]=u,m}Math.hypot||(Math.hypot=function(){for(var g=0,u=arguments.length;u--;)g+=arguments[u]*arguments[u];return Math.sqrt(g)}),k(),H=new W(4),W!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0,H[3]=0),k(),$(1,0,0),$(0,1,0),ie(),ie(),X(),ae();const se=8192;function Se(g,u,m){return u*(se/(g.tileSize*Math.pow(2,m-g.tileID.overscaledZ)))}function ye(g,u){return(g%u+u)%u}function Te(g,u,m){return g*(1-m)+u*m}function pe(g){if(g<=0)return 0;if(g>=1)return 1;const u=g*g,m=u*g;return 4*(g<.5?m:3*(g-u)+m-.75)}function Ie(g,u,m,S){const L=new D(g,u,m,S);return j=>L.solve(j)}const me=Ie(.25,.1,.25,1);function xe(g,u,m){return Math.min(m,Math.max(u,g))}function ve(g,u,m){const S=m-u,L=((g-u)%S+S)%S+u;return L===u?m:L}function Ee(g,...u){for(const m of u)for(const S in m)g[S]=m[S];return g}let De=1;function We(g,u,m){const S={};for(const L in g)S[L]=u.call(this,g[L],L,g);return S}function Ae(g,u,m){const S={};for(const L in g)u.call(this,g[L],L,g)&&(S[L]=g[L]);return S}function ut(g){return Array.isArray(g)?g.map(ut):typeof g=="object"&&g?We(g,ut):g}const pt={};function st(g){pt[g]||(typeof console<"u"&&console.warn(g),pt[g]=!0)}function Ce(g,u,m){return(m.y-g.y)*(u.x-g.x)>(u.y-g.y)*(m.x-g.x)}function It(g){return typeof WorkerGlobalScope<"u"&&g!==void 0&&g instanceof WorkerGlobalScope}let Ve=null;function yt(g){return typeof ImageBitmap<"u"&&g instanceof ImageBitmap}const Ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function wt(g,u,m,S,L){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const j=new VideoFrame(g,{timestamp:0});try{const V=j==null?void 0:j.format;if(!V||!V.startsWith("BGR")&&!V.startsWith("RGB"))throw new Error(`Unrecognized format ${V}`);const J=V.startsWith("BGR"),oe=new Uint8ClampedArray(S*L*4);if(yield j.copyTo(oe,function(de,be,Le,$e,Je){const tt=4*Math.max(1,0),ct=(Math.max(0,Le)-Le)*$e*4+tt,Rt=4*$e,Ht=Math.max(0,be),fn=Math.max(0,Le);return{rect:{x:Ht,y:fn,width:Math.min(de.width,be+$e)-Ht,height:Math.min(de.height,Le+Je)-fn},layout:[{offset:ct,stride:Rt}]}}(g,u,m,S,L)),J)for(let de=0;de<oe.length;de+=4){const be=oe[de];oe[de]=oe[de+2],oe[de+2]=be}return oe}finally{j.close()}})}let Ut,ht;function qt(g,u,m,S){return g.addEventListener(u,m,S),{unsubscribe:()=>{g.removeEventListener(u,m,S)}}}function Ye(g){return g/Math.PI*180}const Re={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Pt={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Dt="AbortError";function At(){return new Error(Dt)}const Bt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function gn(g){return Bt.REGISTERED_PROTOCOLS[g.substring(0,g.indexOf("://"))]}const Zt="global-dispatcher";class cn extends Error{constructor(u,m,S,L){super(`AJAXError: ${m} (${u}): ${S}`),this.status=u,this.statusText=m,this.url=S,this.body=L}}const $t=()=>It(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Et=function(g,u){if(/:\/\//.test(g.url)&&!/^https?:|^file:/.test(g.url)){const S=gn(g.url);if(S)return S(g,u);if(It(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:g,targetMapId:Zt},u)}if(!(/^file:/.test(m=g.url)||/^file:/.test($t())&&!/^\w+:/.test(m))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(S,L){return a(this,void 0,void 0,function*(){const j=new Request(S.url,{method:S.method||"GET",body:S.body,credentials:S.credentials,headers:S.headers,cache:S.cache,referrer:$t(),signal:L.signal});let V,J;S.type!=="json"||j.headers.has("Accept")||j.headers.set("Accept","application/json");try{V=yield fetch(j)}catch(de){throw new cn(0,de.message,S.url,new Blob)}if(!V.ok){const de=yield V.blob();throw new cn(V.status,V.statusText,S.url,de)}J=S.type==="arrayBuffer"||S.type==="image"?V.arrayBuffer():S.type==="json"?V.json():V.text();const oe=yield J;if(L.signal.aborted)throw At();return{data:oe,cacheControl:V.headers.get("Cache-Control"),expires:V.headers.get("Expires")}})}(g,u);if(It(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:g,mustQueue:!0,targetMapId:Zt},u)}var m;return function(S,L){return new Promise((j,V)=>{var J;const oe=new XMLHttpRequest;oe.open(S.method||"GET",S.url,!0),S.type!=="arrayBuffer"&&S.type!=="image"||(oe.responseType="arraybuffer");for(const de in S.headers)oe.setRequestHeader(de,S.headers[de]);S.type==="json"&&(oe.responseType="text",!((J=S.headers)===null||J===void 0)&&J.Accept||oe.setRequestHeader("Accept","application/json")),oe.withCredentials=S.credentials==="include",oe.onerror=()=>{V(new Error(oe.statusText))},oe.onload=()=>{if(!L.signal.aborted)if((oe.status>=200&&oe.status<300||oe.status===0)&&oe.response!==null){let de=oe.response;if(S.type==="json")try{de=JSON.parse(oe.response)}catch(be){return void V(be)}j({data:de,cacheControl:oe.getResponseHeader("Cache-Control"),expires:oe.getResponseHeader("Expires")})}else{const de=new Blob([oe.response],{type:oe.getResponseHeader("Content-Type")});V(new cn(oe.status,oe.statusText,S.url,de))}},L.signal.addEventListener("abort",()=>{oe.abort(),V(At())}),oe.send(S.body)})}(g,u)};function qn(g){if(!g||g.indexOf("://")<=0||g.indexOf("data:image/")===0||g.indexOf("blob:")===0)return!0;const u=new URL(g),m=window.location;return u.protocol===m.protocol&&u.host===m.host}function Dn(g,u,m){m[g]&&m[g].indexOf(u)!==-1||(m[g]=m[g]||[],m[g].push(u))}function sr(g,u,m){if(m&&m[g]){const S=m[g].indexOf(u);S!==-1&&m[g].splice(S,1)}}class rt{constructor(u,m={}){Ee(this,m),this.type=u}}class ze extends rt{constructor(u,m={}){super("error",Ee({error:u},m))}}class Xe{on(u,m){return this._listeners=this._listeners||{},Dn(u,m,this._listeners),{unsubscribe:()=>{this.off(u,m)}}}off(u,m){return sr(u,m,this._listeners),sr(u,m,this._oneTimeListeners),this}once(u,m){return m?(this._oneTimeListeners=this._oneTimeListeners||{},Dn(u,m,this._oneTimeListeners),this):new Promise(S=>this.once(u,S))}fire(u,m){typeof u=="string"&&(u=new rt(u,m||{}));const S=u.type;if(this.listens(S)){u.target=this;const L=this._listeners&&this._listeners[S]?this._listeners[S].slice():[];for(const J of L)J.call(this,u);const j=this._oneTimeListeners&&this._oneTimeListeners[S]?this._oneTimeListeners[S].slice():[];for(const J of j)sr(S,J,this._oneTimeListeners),J.call(this,u);const V=this._eventedParent;V&&(Ee(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),V.fire(u))}else u instanceof ze&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,m){return this._eventedParent=u,this._eventedParentData=m,this}}var Fe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const He=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function mt(g,u){const m={};for(const S in g)S!=="ref"&&(m[S]=g[S]);return He.forEach(S=>{S in u&&(m[S]=u[S])}),m}function it(g,u){if(Array.isArray(g)){if(!Array.isArray(u)||g.length!==u.length)return!1;for(let m=0;m<g.length;m++)if(!it(g[m],u[m]))return!1;return!0}if(typeof g=="object"&&g!==null&&u!==null){if(typeof u!="object"||Object.keys(g).length!==Object.keys(u).length)return!1;for(const m in g)if(!it(g[m],u[m]))return!1;return!0}return g===u}function xt(g,u){g.push(u)}function Tt(g,u,m){xt(m,{command:"addSource",args:[g,u[g]]})}function kt(g,u,m){xt(u,{command:"removeSource",args:[g]}),m[g]=!0}function Jt(g,u,m,S){kt(g,m,S),Tt(g,u,m)}function rn(g,u,m){let S;for(S in g[m])if(Object.prototype.hasOwnProperty.call(g[m],S)&&S!=="data"&&!it(g[m][S],u[m][S]))return!1;for(S in u[m])if(Object.prototype.hasOwnProperty.call(u[m],S)&&S!=="data"&&!it(g[m][S],u[m][S]))return!1;return!0}function Yt(g,u,m,S,L,j){g=g||{},u=u||{};for(const V in g)Object.prototype.hasOwnProperty.call(g,V)&&(it(g[V],u[V])||m.push({command:j,args:[S,V,u[V],L]}));for(const V in u)Object.prototype.hasOwnProperty.call(u,V)&&!Object.prototype.hasOwnProperty.call(g,V)&&(it(g[V],u[V])||m.push({command:j,args:[S,V,u[V],L]}))}function Qn(g){return g.id}function An(g,u){return g[u.id]=u,g}class jt{constructor(u,m,S,L){this.message=(u?`${u}: `:"")+S,L&&(this.identifier=L),m!=null&&m.__line__&&(this.line=m.__line__)}}function Pe(g,...u){for(const m of u)for(const S in m)g[S]=m[S];return g}class je extends Error{constructor(u,m){super(m),this.message=m,this.key=u}}class _t{constructor(u,m=[]){this.parent=u,this.bindings={};for(const[S,L]of m)this.bindings[S]=L}concat(u){return new _t(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Qt={kind:"null"},en={kind:"number"},Fn={kind:"string"},Wn={kind:"boolean"},kr={kind:"color"},Qr={kind:"projectionDefinition"},vi={kind:"object"},zr={kind:"value"},zn={kind:"collator"},En={kind:"formatted"},mr={kind:"padding"},yi={kind:"resolvedImage"},_i={kind:"variableAnchorOffsetCollection"};function gi(g,u){return{kind:"array",itemType:g,N:u}}function lt(g){if(g.kind==="array"){const u=lt(g.itemType);return typeof g.N=="number"?`array<${u}, ${g.N}>`:g.itemType.kind==="value"?"array":`array<${u}>`}return g.kind}const yn=[Qt,en,Fn,Wn,kr,Qr,En,vi,gi(zr),mr,yi,_i];function Ln(g,u){if(u.kind==="error")return null;if(g.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Ln(g.itemType,u.itemType))&&(typeof g.N!="number"||g.N===u.N))return null}else{if(g.kind===u.kind)return null;if(g.kind==="value"){for(const m of yn)if(!Ln(m,u))return null}}return`Expected ${lt(g)} but found ${lt(u)} instead.`}function Vn(g,u){return u.some(m=>m.kind===g.kind)}function bn(g,u){return u.some(m=>m==="null"?g===null:m==="array"?Array.isArray(g):m==="object"?g&&!Array.isArray(g)&&typeof g=="object":m===typeof g)}function wr(g,u){return g.kind==="array"&&u.kind==="array"?g.itemType.kind===u.itemType.kind&&typeof g.N=="number":g.kind===u.kind}const Lr=.96422,Mr=.82521,Xr=4/29,Yr=6/29,ni=3*Yr*Yr,bi=Yr*Yr*Yr,Ni=Math.PI/180,Yi=180/Math.PI;function Qi(g){return(g%=360)<0&&(g+=360),g}function _a([g,u,m,S]){let L,j;const V=Ai((.2225045*(g=ra(g))+.7168786*(u=ra(u))+.0606169*(m=ra(m)))/1);g===u&&u===m?L=j=V:(L=Ai((.4360747*g+.3850649*u+.1430804*m)/Lr),j=Ai((.0139322*g+.0971045*u+.7141733*m)/Mr));const J=116*V-16;return[J<0?0:J,500*(L-V),200*(V-j),S]}function ra(g){return g<=.04045?g/12.92:Math.pow((g+.055)/1.055,2.4)}function Ai(g){return g>bi?Math.pow(g,1/3):g/ni+Xr}function Ka([g,u,m,S]){let L=(g+16)/116,j=isNaN(u)?L:L+u/500,V=isNaN(m)?L:L-m/200;return L=1*Sa(L),j=Lr*Sa(j),V=Mr*Sa(V),[la(3.1338561*j-1.6168667*L-.4906146*V),la(-.9787684*j+1.9161415*L+.033454*V),la(.0719453*j-.2289914*L+1.4052427*V),S]}function la(g){return(g=g<=.00304?12.92*g:1.055*Math.pow(g,1/2.4)-.055)<0?0:g>1?1:g}function Sa(g){return g>Yr?g*g*g:ni*(g-Xr)}function _o(g){return parseInt(g.padEnd(2,g),16)/255}function Ui(g,u){return Pi(u?g/100:g,0,1)}function Pi(g,u,m){return Math.min(Math.max(u,g),m)}function Ta(g){return!g.some(Number.isNaN)}const to={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ne(g,u,m){return g+m*(u-g)}function we(g,u,m){return g.map((S,L)=>ne(S,u[L],m))}class et{constructor(u,m,S,L=1,j=!0){this.r=u,this.g=m,this.b=S,this.a=L,j||(this.r*=L,this.g*=L,this.b*=L,L||this.overwriteGetter("rgb",[u,m,S,L]))}static parse(u){if(u instanceof et)return u;if(typeof u!="string")return;const m=function(S){if((S=S.toLowerCase().trim())==="transparent")return[0,0,0,0];const L=to[S];if(L){const[V,J,oe]=L;return[V/255,J/255,oe/255,1]}if(S.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(S)){const V=S.length<6?1:2;let J=1;return[_o(S.slice(J,J+=V)),_o(S.slice(J,J+=V)),_o(S.slice(J,J+=V)),_o(S.slice(J,J+V)||"ff")]}if(S.startsWith("rgb")){const V=S.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(V){const[J,oe,de,be,Le,$e,Je,tt,ct,Rt,Ht,fn]=V,Kt=[be||" ",Je||" ",Rt].join("");if(Kt==="  "||Kt==="  /"||Kt===",,"||Kt===",,,"){const Ke=[de,$e,ct].join(""),Ct=Ke==="%%%"?100:Ke===""?255:0;if(Ct){const tn=[Pi(+oe/Ct,0,1),Pi(+Le/Ct,0,1),Pi(+tt/Ct,0,1),Ht?Ui(+Ht,fn):1];if(Ta(tn))return tn}}return}}const j=S.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(j){const[V,J,oe,de,be,Le,$e,Je,tt]=j,ct=[oe||" ",be||" ",$e].join("");if(ct==="  "||ct==="  /"||ct===",,"||ct===",,,"){const Rt=[+J,Pi(+de,0,100),Pi(+Le,0,100),Je?Ui(+Je,tt):1];if(Ta(Rt))return function([Ht,fn,Kt,Ke]){function Ct(tn){const jn=(tn+Ht/30)%12,Cr=fn*Math.min(Kt,1-Kt);return Kt-Cr*Math.max(-1,Math.min(jn-3,9-jn,1))}return Ht=Qi(Ht),fn/=100,Kt/=100,[Ct(0),Ct(8),Ct(4),Ke]}(Rt)}}}(u);return m?new et(...m,!1):void 0}get rgb(){const{r:u,g:m,b:S,a:L}=this,j=L||1/0;return this.overwriteGetter("rgb",[u/j,m/j,S/j,L])}get hcl(){return this.overwriteGetter("hcl",function(u){const[m,S,L,j]=_a(u),V=Math.sqrt(S*S+L*L);return[Math.round(1e4*V)?Qi(Math.atan2(L,S)*Yi):NaN,V,m,j]}(this.rgb))}get lab(){return this.overwriteGetter("lab",_a(this.rgb))}overwriteGetter(u,m){return Object.defineProperty(this,u,{value:m}),m}toString(){const[u,m,S,L]=this.rgb;return`rgba(${[u,m,S].map(j=>Math.round(255*j)).join(",")},${L})`}static interpolate(u,m,S,L="rgb"){switch(L){case"rgb":{const[j,V,J,oe]=we(u.rgb,m.rgb,S);return new et(j,V,J,oe,!1)}case"hcl":{const[j,V,J,oe]=u.hcl,[de,be,Le,$e]=m.hcl;let Je,tt;if(isNaN(j)||isNaN(de))isNaN(j)?isNaN(de)?Je=NaN:(Je=de,J!==1&&J!==0||(tt=be)):(Je=j,Le!==1&&Le!==0||(tt=V));else{let Kt=de-j;de>j&&Kt>180?Kt-=360:de<j&&j-de>180&&(Kt+=360),Je=j+S*Kt}const[ct,Rt,Ht,fn]=function([Kt,Ke,Ct,tn]){return Kt=isNaN(Kt)?0:Kt*Ni,Ka([Ct,Math.cos(Kt)*Ke,Math.sin(Kt)*Ke,tn])}([Je,tt??ne(V,be,S),ne(J,Le,S),ne(oe,$e,S)]);return new et(ct,Rt,Ht,fn,!1)}case"lab":{const[j,V,J,oe]=Ka(we(u.lab,m.lab,S));return new et(j,V,J,oe,!1)}}}}et.black=new et(0,0,0,1),et.white=new et(1,1,1,1),et.transparent=new et(0,0,0,0),et.red=new et(1,0,0,1);class Gt{constructor(u,m,S){this.sensitivity=u?m?"variant":"case":m?"accent":"base",this.locale=S,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,m){return this.collator.compare(u,m)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const on=["bottom","center","top"];class dn{constructor(u,m,S,L,j,V){this.text=u,this.image=m,this.scale=S,this.fontStack=L,this.textColor=j,this.verticalAlign=V}}class xn{constructor(u){this.sections=u}static fromString(u){return new xn([new dn(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof xn?u:xn.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class cr{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof cr)return u;if(typeof u=="number")return new cr([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const m of u)if(typeof m!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new cr(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,m,S){return new cr(we(u.values,m.values,S))}}class ur{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const Rr=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ir{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Ir)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let m=0;m<u.length;m+=2){const S=u[m],L=u[m+1];if(typeof S!="string"||!Rr.has(S)||!Array.isArray(L)||L.length!==2||typeof L[0]!="number"||typeof L[1]!="number")return}return new Ir(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,m,S){const L=u.values,j=m.values;if(L.length!==j.length)throw new ur(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${m.toString()}`);const V=[];for(let J=0;J<L.length;J+=2){if(L[J]!==j[J])throw new ur(`Cannot interpolate values containing mismatched anchors. from[${J}]: ${L[J]}, to[${J}]: ${j[J]}`);V.push(L[J]);const[oe,de]=L[J+1],[be,Le]=j[J+1];V.push([ne(oe,be,S),ne(de,Le,S)])}return new Ir(V)}}class Nr{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Nr({name:u,available:!1}):null}}class Wr{constructor(u,m,S){this.from=u,this.to=m,this.transition=S}static interpolate(u,m,S){return new Wr(u,m,S)}static parse(u){return u instanceof Wr?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new Wr(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new Wr(u.from,u.to,u.transition):typeof u=="string"?new Wr(u,u,1):void 0}}function ua(g,u,m,S){return typeof g=="number"&&g>=0&&g<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof m=="number"&&m>=0&&m<=255?S===void 0||typeof S=="number"&&S>=0&&S<=1?null:`Invalid rgba value [${[g,u,m,S].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof S=="number"?[g,u,m,S]:[g,u,m]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ui(g){if(g===null||typeof g=="string"||typeof g=="boolean"||typeof g=="number"||g instanceof Wr||g instanceof et||g instanceof Gt||g instanceof xn||g instanceof cr||g instanceof Ir||g instanceof Nr)return!0;if(Array.isArray(g)){for(const u of g)if(!ui(u))return!1;return!0}if(typeof g=="object"){for(const u in g)if(!ui(g[u]))return!1;return!0}return!1}function Vr(g){if(g===null)return Qt;if(typeof g=="string")return Fn;if(typeof g=="boolean")return Wn;if(typeof g=="number")return en;if(g instanceof et)return kr;if(g instanceof Wr)return Qr;if(g instanceof Gt)return zn;if(g instanceof xn)return En;if(g instanceof cr)return mr;if(g instanceof Ir)return _i;if(g instanceof Nr)return yi;if(Array.isArray(g)){const u=g.length;let m;for(const S of g){const L=Vr(S);if(m){if(m===L)continue;m=zr;break}m=L}return gi(m||zr,u)}return vi}function hr(g){const u=typeof g;return g===null?"":u==="string"||u==="number"||u==="boolean"?String(g):g instanceof et||g instanceof Wr||g instanceof xn||g instanceof cr||g instanceof Ir||g instanceof Nr?g.toString():JSON.stringify(g)}class ii{constructor(u,m){this.type=u,this.value=m}static parse(u,m){if(u.length!==2)return m.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!ui(u[1]))return m.error("invalid value");const S=u[1];let L=Vr(S);const j=m.expectedType;return L.kind!=="array"||L.N!==0||!j||j.kind!=="array"||typeof j.N=="number"&&j.N!==0||(L=j),new ii(L,S)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Wi={string:Fn,number:en,boolean:Wn,object:vi};class ea{constructor(u,m){this.type=u,this.args=m}static parse(u,m){if(u.length<2)return m.error("Expected at least one argument.");let S,L=1;const j=u[0];if(j==="array"){let J,oe;if(u.length>2){const de=u[1];if(typeof de!="string"||!(de in Wi)||de==="object")return m.error('The item type argument of "array" must be one of string, number, boolean',1);J=Wi[de],L++}else J=zr;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return m.error('The length argument to "array" must be a positive integer literal',2);oe=u[2],L++}S=gi(J,oe)}else{if(!Wi[j])throw new Error(`Types doesn't contain name = ${j}`);S=Wi[j]}const V=[];for(;L<u.length;L++){const J=m.parse(u[L],L,zr);if(!J)return null;V.push(J)}return new ea(S,V)}evaluate(u){for(let m=0;m<this.args.length;m++){const S=this.args[m].evaluate(u);if(!Ln(this.type,Vr(S)))return S;if(m===this.args.length-1)throw new ur(`Expected value to be of type ${lt(this.type)}, but found ${lt(Vr(S))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const ji={"to-boolean":Wn,"to-color":kr,"to-number":en,"to-string":Fn};class Oo{constructor(u,m){this.type=u,this.args=m}static parse(u,m){if(u.length<2)return m.error("Expected at least one argument.");const S=u[0];if(!ji[S])throw new Error(`Can't parse ${S} as it is not part of the known types`);if((S==="to-boolean"||S==="to-string")&&u.length!==2)return m.error("Expected one argument.");const L=ji[S],j=[];for(let V=1;V<u.length;V++){const J=m.parse(u[V],V,zr);if(!J)return null;j.push(J)}return new Oo(L,j)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let m,S;for(const L of this.args){if(m=L.evaluate(u),S=null,m instanceof et)return m;if(typeof m=="string"){const j=u.parseColor(m);if(j)return j}else if(Array.isArray(m)&&(S=m.length<3||m.length>4?`Invalid rgba value ${JSON.stringify(m)}: expected an array containing either three or four numeric values.`:ua(m[0],m[1],m[2],m[3]),!S))return new et(m[0]/255,m[1]/255,m[2]/255,m[3])}throw new ur(S||`Could not parse color from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"padding":{let m;for(const S of this.args){m=S.evaluate(u);const L=cr.parse(m);if(L)return L}throw new ur(`Could not parse padding from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"variableAnchorOffsetCollection":{let m;for(const S of this.args){m=S.evaluate(u);const L=Ir.parse(m);if(L)return L}throw new ur(`Could not parse variableAnchorOffsetCollection from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"number":{let m=null;for(const S of this.args){if(m=S.evaluate(u),m===null)return 0;const L=Number(m);if(!isNaN(L))return L}throw new ur(`Could not convert ${JSON.stringify(m)} to number.`)}case"formatted":return xn.fromString(hr(this.args[0].evaluate(u)));case"resolvedImage":return Nr.fromString(hr(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return hr(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const ri=["Unknown","Point","LineString","Polygon"];class Jr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ri[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let m=this._parseColorCache[u];return m||(m=this._parseColorCache[u]=et.parse(u)),m}}class _l{constructor(u,m,S=[],L,j=new _t,V=[]){this.registry=u,this.path=S,this.key=S.map(J=>`[${J}]`).join(""),this.scope=j,this.errors=V,this.expectedType=L,this._isConstant=m}parse(u,m,S,L,j={}){return m?this.concat(m,S,L)._parse(u,j):this._parse(u,j)}_parse(u,m){function S(L,j,V){return V==="assert"?new ea(j,[L]):V==="coerce"?new Oo(j,[L]):L}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const L=u[0];if(typeof L!="string")return this.error(`Expression name must be a string, but found ${typeof L} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const j=this.registry[L];if(j){let V=j.parse(u,this);if(!V)return null;if(this.expectedType){const J=this.expectedType,oe=V.type;if(J.kind!=="string"&&J.kind!=="number"&&J.kind!=="boolean"&&J.kind!=="object"&&J.kind!=="array"||oe.kind!=="value")if(J.kind!=="projectionDefinition"||oe.kind!=="string"&&oe.kind!=="array")if(J.kind!=="color"&&J.kind!=="formatted"&&J.kind!=="resolvedImage"||oe.kind!=="value"&&oe.kind!=="string")if(J.kind!=="padding"||oe.kind!=="value"&&oe.kind!=="number"&&oe.kind!=="array")if(J.kind!=="variableAnchorOffsetCollection"||oe.kind!=="value"&&oe.kind!=="array"){if(this.checkSubtype(J,oe))return null}else V=S(V,J,m.typeAnnotation||"coerce");else V=S(V,J,m.typeAnnotation||"coerce");else V=S(V,J,m.typeAnnotation||"coerce");else V=S(V,J,m.typeAnnotation||"coerce");else V=S(V,J,m.typeAnnotation||"assert")}if(!(V instanceof ii)&&V.type.kind!=="resolvedImage"&&this._isConstant(V)){const J=new Jr;try{V=new ii(V.type,V.evaluate(J))}catch(oe){return this.error(oe.message),null}}return V}return this.error(`Unknown expression "${L}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,m,S){const L=typeof u=="number"?this.path.concat(u):this.path,j=S?this.scope.concat(S):this.scope;return new _l(this.registry,this._isConstant,L,m||null,j,this.errors)}error(u,...m){const S=`${this.key}${m.map(L=>`[${L}]`).join("")}`;this.errors.push(new je(S,u))}checkSubtype(u,m){const S=Ln(u,m);return S&&this.error(S),S}}class ha{constructor(u,m){this.type=m.type,this.bindings=[].concat(u),this.result=m}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const m of this.bindings)u(m[1]);u(this.result)}static parse(u,m){if(u.length<4)return m.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const S=[];for(let j=1;j<u.length-1;j+=2){const V=u[j];if(typeof V!="string")return m.error(`Expected string, but found ${typeof V} instead.`,j);if(/[^a-zA-Z0-9_]/.test(V))return m.error("Variable names must contain only alphanumeric characters or '_'.",j);const J=m.parse(u[j+1],j+1);if(!J)return null;S.push([V,J])}const L=m.parse(u[u.length-1],u.length-1,m.expectedType,S);return L?new ha(S,L):null}outputDefined(){return this.result.outputDefined()}}class xo{constructor(u,m){this.type=m.type,this.name=u,this.boundExpression=m}static parse(u,m){if(u.length!==2||typeof u[1]!="string")return m.error("'var' expression requires exactly one string literal argument.");const S=u[1];return m.scope.has(S)?new xo(S,m.scope.get(S)):m.error(`Unknown variable "${S}". Make sure "${S}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Fo{constructor(u,m,S){this.type=u,this.index=m,this.input=S}static parse(u,m){if(u.length!==3)return m.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const S=m.parse(u[1],1,en),L=m.parse(u[2],2,gi(m.expectedType||zr));return S&&L?new Fo(L.type.itemType,S,L):null}evaluate(u){const m=this.index.evaluate(u),S=this.input.evaluate(u);if(m<0)throw new ur(`Array index out of bounds: ${m} < 0.`);if(m>=S.length)throw new ur(`Array index out of bounds: ${m} > ${S.length-1}.`);if(m!==Math.floor(m))throw new ur(`Array index must be an integer, but found ${m} instead.`);return S[m]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class no{constructor(u,m){this.type=Wn,this.needle=u,this.haystack=m}static parse(u,m){if(u.length!==3)return m.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const S=m.parse(u[1],1,zr),L=m.parse(u[2],2,zr);return S&&L?Vn(S.type,[Wn,Fn,en,Qt,zr])?new no(S,L):m.error(`Expected first argument to be of type boolean, string, number or null, but found ${lt(S.type)} instead`):null}evaluate(u){const m=this.needle.evaluate(u),S=this.haystack.evaluate(u);if(!S)return!1;if(!bn(m,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${lt(Vr(m))} instead.`);if(!bn(S,["string","array"]))throw new ur(`Expected second argument to be of type array or string, but found ${lt(Vr(S))} instead.`);return S.indexOf(m)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class Bo{constructor(u,m,S){this.type=en,this.needle=u,this.haystack=m,this.fromIndex=S}static parse(u,m){if(u.length<=2||u.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const S=m.parse(u[1],1,zr),L=m.parse(u[2],2,zr);if(!S||!L)return null;if(!Vn(S.type,[Wn,Fn,en,Qt,zr]))return m.error(`Expected first argument to be of type boolean, string, number or null, but found ${lt(S.type)} instead`);if(u.length===4){const j=m.parse(u[3],3,en);return j?new Bo(S,L,j):null}return new Bo(S,L)}evaluate(u){const m=this.needle.evaluate(u),S=this.haystack.evaluate(u);if(!bn(m,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${lt(Vr(m))} instead.`);let L;if(this.fromIndex&&(L=this.fromIndex.evaluate(u)),bn(S,["string"])){const j=S.indexOf(m,L);return j===-1?-1:[...S.slice(0,j)].length}if(bn(S,["array"]))return S.indexOf(m,L);throw new ur(`Expected second argument to be of type array or string, but found ${lt(Vr(S))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class ts{constructor(u,m,S,L,j,V){this.inputType=u,this.type=m,this.input=S,this.cases=L,this.outputs=j,this.otherwise=V}static parse(u,m){if(u.length<5)return m.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return m.error("Expected an even number of arguments.");let S,L;m.expectedType&&m.expectedType.kind!=="value"&&(L=m.expectedType);const j={},V=[];for(let de=2;de<u.length-1;de+=2){let be=u[de];const Le=u[de+1];Array.isArray(be)||(be=[be]);const $e=m.concat(de);if(be.length===0)return $e.error("Expected at least one branch label.");for(const tt of be){if(typeof tt!="number"&&typeof tt!="string")return $e.error("Branch labels must be numbers or strings.");if(typeof tt=="number"&&Math.abs(tt)>Number.MAX_SAFE_INTEGER)return $e.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof tt=="number"&&Math.floor(tt)!==tt)return $e.error("Numeric branch labels must be integer values.");if(S){if($e.checkSubtype(S,Vr(tt)))return null}else S=Vr(tt);if(j[String(tt)]!==void 0)return $e.error("Branch labels must be unique.");j[String(tt)]=V.length}const Je=m.parse(Le,de,L);if(!Je)return null;L=L||Je.type,V.push(Je)}const J=m.parse(u[1],1,zr);if(!J)return null;const oe=m.parse(u[u.length-1],u.length-1,L);return oe?J.type.kind!=="value"&&m.concat(1).checkSubtype(S,J.type)?null:new ts(S,L,J,j,V,oe):null}evaluate(u){const m=this.input.evaluate(u);return(Vr(m)===this.inputType&&this.outputs[this.cases[m]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class xl{constructor(u,m,S){this.type=u,this.branches=m,this.otherwise=S}static parse(u,m){if(u.length<4)return m.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return m.error("Expected an odd number of arguments.");let S;m.expectedType&&m.expectedType.kind!=="value"&&(S=m.expectedType);const L=[];for(let V=1;V<u.length-1;V+=2){const J=m.parse(u[V],V,Wn);if(!J)return null;const oe=m.parse(u[V+1],V+1,S);if(!oe)return null;L.push([J,oe]),S=S||oe.type}const j=m.parse(u[u.length-1],u.length-1,S);if(!j)return null;if(!S)throw new Error("Can't infer output type");return new xl(S,L,j)}evaluate(u){for(const[m,S]of this.branches)if(m.evaluate(u))return S.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[m,S]of this.branches)u(m),u(S);u(this.otherwise)}outputDefined(){return this.branches.every(([u,m])=>m.outputDefined())&&this.otherwise.outputDefined()}}class Ws{constructor(u,m,S,L){this.type=u,this.input=m,this.beginIndex=S,this.endIndex=L}static parse(u,m){if(u.length<=2||u.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const S=m.parse(u[1],1,zr),L=m.parse(u[2],2,en);if(!S||!L)return null;if(!Vn(S.type,[gi(zr),Fn,zr]))return m.error(`Expected first argument to be of type array or string, but found ${lt(S.type)} instead`);if(u.length===4){const j=m.parse(u[3],3,en);return j?new Ws(S.type,S,L,j):null}return new Ws(S.type,S,L)}evaluate(u){const m=this.input.evaluate(u),S=this.beginIndex.evaluate(u);let L;if(this.endIndex&&(L=this.endIndex.evaluate(u)),bn(m,["string"]))return[...m].slice(S,L).join("");if(bn(m,["array"]))return m.slice(S,L);throw new ur(`Expected first argument to be of type array or string, but found ${lt(Vr(m))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function wc(g,u){const m=g.length-1;let S,L,j=0,V=m,J=0;for(;j<=V;)if(J=Math.floor((j+V)/2),S=g[J],L=g[J+1],S<=u){if(J===m||u<L)return J;j=J+1}else{if(!(S>u))throw new ur("Input is not a number.");V=J-1}return 0}class $l{constructor(u,m,S){this.type=u,this.input=m,this.labels=[],this.outputs=[];for(const[L,j]of S)this.labels.push(L),this.outputs.push(j)}static parse(u,m){if(u.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return m.error("Expected an even number of arguments.");const S=m.parse(u[1],1,en);if(!S)return null;const L=[];let j=null;m.expectedType&&m.expectedType.kind!=="value"&&(j=m.expectedType);for(let V=1;V<u.length;V+=2){const J=V===1?-1/0:u[V],oe=u[V+1],de=V,be=V+1;if(typeof J!="number")return m.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',de);if(L.length&&L[L.length-1][0]>=J)return m.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',de);const Le=m.parse(oe,be,j);if(!Le)return null;j=j||Le.type,L.push([J,Le])}return new $l(j,S,L)}evaluate(u){const m=this.labels,S=this.outputs;if(m.length===1)return S[0].evaluate(u);const L=this.input.evaluate(u);if(L<=m[0])return S[0].evaluate(u);const j=m.length;return L>=m[j-1]?S[j-1].evaluate(u):S[wc(m,L)].evaluate(u)}eachChild(u){u(this.input);for(const m of this.outputs)u(m)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function sl(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var ws,Wa,bo=function(){if(Wa)return ws;function g(u,m,S,L){this.cx=3*u,this.bx=3*(S-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*m,this.by=3*(L-m)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=m,this.p2x=S,this.p2y=L}return Wa=1,ws=g,g.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,m){if(m===void 0&&(m=1e-6),u<0)return 0;if(u>1)return 1;for(var S=u,L=0;L<8;L++){var j=this.sampleCurveX(S)-u;if(Math.abs(j)<m)return S;var V=this.sampleCurveDerivativeX(S);if(Math.abs(V)<1e-6)break;S-=j/V}var J=0,oe=1;for(S=u,L=0;L<20&&(j=this.sampleCurveX(S),!(Math.abs(j-u)<m));L++)u>j?J=S:oe=S,S=.5*(oe-J)+J;return S},solve:function(u,m){return this.sampleCurveY(this.solveCurveX(u,m))}},ws}(),Bu=sl(bo);class Do{constructor(u,m,S,L,j){this.type=u,this.operator=m,this.interpolation=S,this.input=L,this.labels=[],this.outputs=[];for(const[V,J]of j)this.labels.push(V),this.outputs.push(J)}static interpolationFactor(u,m,S,L){let j=0;if(u.name==="exponential")j=Ea(m,u.base,S,L);else if(u.name==="linear")j=Ea(m,1,S,L);else if(u.name==="cubic-bezier"){const V=u.controlPoints;j=new Bu(V[0],V[1],V[2],V[3]).solve(Ea(m,1,S,L))}return j}static parse(u,m){let[S,L,j,...V]=u;if(!Array.isArray(L)||L.length===0)return m.error("Expected an interpolation type expression.",1);if(L[0]==="linear")L={name:"linear"};else if(L[0]==="exponential"){const de=L[1];if(typeof de!="number")return m.error("Exponential interpolation requires a numeric base.",1,1);L={name:"exponential",base:de}}else{if(L[0]!=="cubic-bezier")return m.error(`Unknown interpolation type ${String(L[0])}`,1,0);{const de=L.slice(1);if(de.length!==4||de.some(be=>typeof be!="number"||be<0||be>1))return m.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);L={name:"cubic-bezier",controlPoints:de}}}if(u.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return m.error("Expected an even number of arguments.");if(j=m.parse(j,2,en),!j)return null;const J=[];let oe=null;S==="interpolate-hcl"||S==="interpolate-lab"?oe=kr:m.expectedType&&m.expectedType.kind!=="value"&&(oe=m.expectedType);for(let de=0;de<V.length;de+=2){const be=V[de],Le=V[de+1],$e=de+3,Je=de+4;if(typeof be!="number")return m.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$e);if(J.length&&J[J.length-1][0]>=be)return m.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$e);const tt=m.parse(Le,Je,oe);if(!tt)return null;oe=oe||tt.type,J.push([be,tt])}return wr(oe,en)||wr(oe,Qr)||wr(oe,kr)||wr(oe,mr)||wr(oe,_i)||wr(oe,gi(en))?new Do(oe,S,L,j,J):m.error(`Type ${lt(oe)} is not interpolatable.`)}evaluate(u){const m=this.labels,S=this.outputs;if(m.length===1)return S[0].evaluate(u);const L=this.input.evaluate(u);if(L<=m[0])return S[0].evaluate(u);const j=m.length;if(L>=m[j-1])return S[j-1].evaluate(u);const V=wc(m,L),J=Do.interpolationFactor(this.interpolation,L,m[V],m[V+1]),oe=S[V].evaluate(u),de=S[V+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ne(oe,de,J);case"color":return et.interpolate(oe,de,J);case"padding":return cr.interpolate(oe,de,J);case"variableAnchorOffsetCollection":return Ir.interpolate(oe,de,J);case"array":return we(oe,de,J);case"projectionDefinition":return Wr.interpolate(oe,de,J)}case"interpolate-hcl":return et.interpolate(oe,de,J,"hcl");case"interpolate-lab":return et.interpolate(oe,de,J,"lab")}}eachChild(u){u(this.input);for(const m of this.outputs)u(m)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Ea(g,u,m,S){const L=S-m,j=g-m;return L===0?0:u===1?j/L:(Math.pow(u,j)-1)/(Math.pow(u,L)-1)}const ns={color:et.interpolate,number:ne,padding:cr.interpolate,variableAnchorOffsetCollection:Ir.interpolate,array:we};class Ss{constructor(u,m){this.type=u,this.args=m}static parse(u,m){if(u.length<2)return m.error("Expected at least one argument.");let S=null;const L=m.expectedType;L&&L.kind!=="value"&&(S=L);const j=[];for(const J of u.slice(1)){const oe=m.parse(J,1+j.length,S,void 0,{typeAnnotation:"omit"});if(!oe)return null;S=S||oe.type,j.push(oe)}if(!S)throw new Error("No output type");const V=L&&j.some(J=>Ln(L,J.type));return new Ss(V?zr:S,j)}evaluate(u){let m,S=null,L=0;for(const j of this.args)if(L++,S=j.evaluate(u),S&&S instanceof Nr&&!S.available&&(m||(m=S.name),S=null,L===this.args.length&&(S=m)),S!==null)break;return S}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function bl(g,u){return g==="=="||g==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Fs(g,u,m,S){return S.compare(u,m)===0}function Dl(g,u,m){const S=g!=="=="&&g!=="!=";return class tH{constructor(j,V,J){this.type=Wn,this.lhs=j,this.rhs=V,this.collator=J,this.hasUntypedArgument=j.type.kind==="value"||V.type.kind==="value"}static parse(j,V){if(j.length!==3&&j.length!==4)return V.error("Expected two or three arguments.");const J=j[0];let oe=V.parse(j[1],1,zr);if(!oe)return null;if(!bl(J,oe.type))return V.concat(1).error(`"${J}" comparisons are not supported for type '${lt(oe.type)}'.`);let de=V.parse(j[2],2,zr);if(!de)return null;if(!bl(J,de.type))return V.concat(2).error(`"${J}" comparisons are not supported for type '${lt(de.type)}'.`);if(oe.type.kind!==de.type.kind&&oe.type.kind!=="value"&&de.type.kind!=="value")return V.error(`Cannot compare types '${lt(oe.type)}' and '${lt(de.type)}'.`);S&&(oe.type.kind==="value"&&de.type.kind!=="value"?oe=new ea(de.type,[oe]):oe.type.kind!=="value"&&de.type.kind==="value"&&(de=new ea(oe.type,[de])));let be=null;if(j.length===4){if(oe.type.kind!=="string"&&de.type.kind!=="string"&&oe.type.kind!=="value"&&de.type.kind!=="value")return V.error("Cannot use collator to compare non-string types.");if(be=V.parse(j[3],3,zn),!be)return null}return new tH(oe,de,be)}evaluate(j){const V=this.lhs.evaluate(j),J=this.rhs.evaluate(j);if(S&&this.hasUntypedArgument){const oe=Vr(V),de=Vr(J);if(oe.kind!==de.kind||oe.kind!=="string"&&oe.kind!=="number")throw new ur(`Expected arguments for "${g}" to be (string, string) or (number, number), but found (${oe.kind}, ${de.kind}) instead.`)}if(this.collator&&!S&&this.hasUntypedArgument){const oe=Vr(V),de=Vr(J);if(oe.kind!=="string"||de.kind!=="string")return u(j,V,J)}return this.collator?m(j,V,J,this.collator.evaluate(j)):u(j,V,J)}eachChild(j){j(this.lhs),j(this.rhs),this.collator&&j(this.collator)}outputDefined(){return!0}}}const Sc=Dl("==",function(g,u,m){return u===m},Fs),Ec=Dl("!=",function(g,u,m){return u!==m},function(g,u,m,S){return!Fs(0,u,m,S)}),Eu=Dl("<",function(g,u,m){return u<m},function(g,u,m,S){return S.compare(u,m)<0}),Tu=Dl(">",function(g,u,m){return u>m},function(g,u,m,S){return S.compare(u,m)>0}),Xs=Dl("<=",function(g,u,m){return u<=m},function(g,u,m,S){return S.compare(u,m)<=0}),$c=Dl(">=",function(g,u,m){return u>=m},function(g,u,m,S){return S.compare(u,m)>=0});class Es{constructor(u,m,S){this.type=zn,this.locale=S,this.caseSensitive=u,this.diacriticSensitive=m}static parse(u,m){if(u.length!==2)return m.error("Expected one argument.");const S=u[1];if(typeof S!="object"||Array.isArray(S))return m.error("Collator options argument must be an object.");const L=m.parse(S["case-sensitive"]!==void 0&&S["case-sensitive"],1,Wn);if(!L)return null;const j=m.parse(S["diacritic-sensitive"]!==void 0&&S["diacritic-sensitive"],1,Wn);if(!j)return null;let V=null;return S.locale&&(V=m.parse(S.locale,1,Fn),!V)?null:new Es(L,j,V)}evaluate(u){return new Gt(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class Wl{constructor(u,m,S,L,j){this.type=Fn,this.number=u,this.locale=m,this.currency=S,this.minFractionDigits=L,this.maxFractionDigits=j}static parse(u,m){if(u.length!==3)return m.error("Expected two arguments.");const S=m.parse(u[1],1,en);if(!S)return null;const L=u[2];if(typeof L!="object"||Array.isArray(L))return m.error("NumberFormat options argument must be an object.");let j=null;if(L.locale&&(j=m.parse(L.locale,1,Fn),!j))return null;let V=null;if(L.currency&&(V=m.parse(L.currency,1,Fn),!V))return null;let J=null;if(L["min-fraction-digits"]&&(J=m.parse(L["min-fraction-digits"],1,en),!J))return null;let oe=null;return L["max-fraction-digits"]&&(oe=m.parse(L["max-fraction-digits"],1,en),!oe)?null:new Wl(S,j,V,J,oe)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class Lo{constructor(u){this.type=En,this.sections=u}static parse(u,m){if(u.length<2)return m.error("Expected at least one argument.");const S=u[1];if(!Array.isArray(S)&&typeof S=="object")return m.error("First argument must be an image or text section.");const L=[];let j=!1;for(let V=1;V<=u.length-1;++V){const J=u[V];if(j&&typeof J=="object"&&!Array.isArray(J)){j=!1;let oe=null;if(J["font-scale"]&&(oe=m.parse(J["font-scale"],1,en),!oe))return null;let de=null;if(J["text-font"]&&(de=m.parse(J["text-font"],1,gi(Fn)),!de))return null;let be=null;if(J["text-color"]&&(be=m.parse(J["text-color"],1,kr),!be))return null;let Le=null;if(J["vertical-align"]){if(typeof J["vertical-align"]=="string"&&!on.includes(J["vertical-align"]))return m.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${J["vertical-align"]}' instead.`);if(Le=m.parse(J["vertical-align"],1,Fn),!Le)return null}const $e=L[L.length-1];$e.scale=oe,$e.font=de,$e.textColor=be,$e.verticalAlign=Le}else{const oe=m.parse(u[V],1,zr);if(!oe)return null;const de=oe.type.kind;if(de!=="string"&&de!=="value"&&de!=="null"&&de!=="resolvedImage")return m.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");j=!0,L.push({content:oe,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Lo(L)}evaluate(u){return new xn(this.sections.map(m=>{const S=m.content.evaluate(u);return Vr(S)===yi?new dn("",S,null,null,null,m.verticalAlign?m.verticalAlign.evaluate(u):null):new dn(hr(S),null,m.scale?m.scale.evaluate(u):null,m.font?m.font.evaluate(u).join(","):null,m.textColor?m.textColor.evaluate(u):null,m.verticalAlign?m.verticalAlign.evaluate(u):null)}))}eachChild(u){for(const m of this.sections)u(m.content),m.scale&&u(m.scale),m.font&&u(m.font),m.textColor&&u(m.textColor),m.verticalAlign&&u(m.verticalAlign)}outputDefined(){return!1}}class zu{constructor(u){this.type=yi,this.input=u}static parse(u,m){if(u.length!==2)return m.error("Expected two arguments.");const S=m.parse(u[1],1,Fn);return S?new zu(S):m.error("No image name provided.")}evaluate(u){const m=this.input.evaluate(u),S=Nr.fromString(m);return S&&u.availableImages&&(S.available=u.availableImages.indexOf(m)>-1),S}eachChild(u){u(this.input)}outputDefined(){return!1}}class au{constructor(u){this.type=en,this.input=u}static parse(u,m){if(u.length!==2)return m.error(`Expected 1 argument, but found ${u.length-1} instead.`);const S=m.parse(u[1],1);return S?S.type.kind!=="array"&&S.type.kind!=="string"&&S.type.kind!=="value"?m.error(`Expected argument of type string or array, but found ${lt(S.type)} instead.`):new au(S):null}evaluate(u){const m=this.input.evaluate(u);if(typeof m=="string")return[...m].length;if(Array.isArray(m))return m.length;throw new ur(`Expected value to be of type string or array, but found ${lt(Vr(m))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Xo=8192;function Uu(g,u){const m=(180+g[0])/360,S=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+g[1]*Math.PI/360)))/360,L=Math.pow(2,u.z);return[Math.round(m*L*Xo),Math.round(S*L*Xo)]}function fe(g,u){const m=Math.pow(2,u.z);return[(L=(g[0]/Xo+u.x)/m,360*L-180),(S=(g[1]/Xo+u.y)/m,360/Math.PI*Math.atan(Math.exp((180-360*S)*Math.PI/180))-90)];var S,L}function nt(g,u){g[0]=Math.min(g[0],u[0]),g[1]=Math.min(g[1],u[1]),g[2]=Math.max(g[2],u[0]),g[3]=Math.max(g[3],u[1])}function Wt(g,u){return!(g[0]<=u[0]||g[2]>=u[2]||g[1]<=u[1]||g[3]>=u[3])}function un(g,u,m){const S=g[0]-u[0],L=g[1]-u[1],j=g[0]-m[0],V=g[1]-m[1];return S*V-j*L==0&&S*j<=0&&L*V<=0}function kn(g,u,m,S){return(L=[S[0]-m[0],S[1]-m[1]])[0]*(j=[u[0]-g[0],u[1]-g[1]])[1]-L[1]*j[0]!=0&&!(!Oi(g,u,m,S)||!Oi(m,S,g,u));var L,j}function Kn(g,u,m){for(const S of m)for(let L=0;L<S.length-1;++L)if(kn(g,u,S[L],S[L+1]))return!0;return!1}function Pr(g,u,m=!1){let S=!1;for(const J of u)for(let oe=0;oe<J.length-1;oe++){if(un(g,J[oe],J[oe+1]))return m;(j=J[oe])[1]>(L=g)[1]!=(V=J[oe+1])[1]>L[1]&&L[0]<(V[0]-j[0])*(L[1]-j[1])/(V[1]-j[1])+j[0]&&(S=!S)}var L,j,V;return S}function oi(g,u){for(const m of u)if(Pr(g,m))return!0;return!1}function Ci(g,u){for(const m of g)if(!Pr(m,u))return!1;for(let m=0;m<g.length-1;++m)if(Kn(g[m],g[m+1],u))return!1;return!0}function Zi(g,u){for(const m of u)if(Ci(g,m))return!0;return!1}function Oi(g,u,m,S){const L=S[0]-m[0],j=S[1]-m[1],V=(g[0]-m[0])*j-L*(g[1]-m[1]),J=(u[0]-m[0])*j-L*(u[1]-m[1]);return V>0&&J<0||V<0&&J>0}function qi(g,u,m){const S=[];for(let L=0;L<g.length;L++){const j=[];for(let V=0;V<g[L].length;V++){const J=Uu(g[L][V],m);nt(u,J),j.push(J)}S.push(j)}return S}function za(g,u,m){const S=[];for(let L=0;L<g.length;L++){const j=qi(g[L],u,m);S.push(j)}return S}function ro(g,u,m,S){if(g[0]<m[0]||g[0]>m[2]){const L=.5*S;let j=g[0]-m[0]>L?-S:m[0]-g[0]>L?S:0;j===0&&(j=g[0]-m[2]>L?-S:m[2]-g[0]>L?S:0),g[0]+=j}nt(u,g)}function Ja(g,u,m,S){const L=Math.pow(2,S.z)*Xo,j=[S.x*Xo,S.y*Xo],V=[];for(const J of g)for(const oe of J){const de=[oe.x+j[0],oe.y+j[1]];ro(de,u,m,L),V.push(de)}return V}function zo(g,u,m,S){const L=Math.pow(2,S.z)*Xo,j=[S.x*Xo,S.y*Xo],V=[];for(const oe of g){const de=[];for(const be of oe){const Le=[be.x+j[0],be.y+j[1]];nt(u,Le),de.push(Le)}V.push(de)}if(u[2]-u[0]<=L/2){(J=u)[0]=J[1]=1/0,J[2]=J[3]=-1/0;for(const oe of V)for(const de of oe)ro(de,u,m,L)}var J;return V}class co{constructor(u,m){this.type=Wn,this.geojson=u,this.geometries=m}static parse(u,m){if(u.length!==2)return m.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(ui(u[1])){const S=u[1];if(S.type==="FeatureCollection"){const L=[];for(const j of S.features){const{type:V,coordinates:J}=j.geometry;V==="Polygon"&&L.push(J),V==="MultiPolygon"&&L.push(...J)}if(L.length)return new co(S,{type:"MultiPolygon",coordinates:L})}else if(S.type==="Feature"){const L=S.geometry.type;if(L==="Polygon"||L==="MultiPolygon")return new co(S,S.geometry)}else if(S.type==="Polygon"||S.type==="MultiPolygon")return new co(S,S)}return m.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(m,S){const L=[1/0,1/0,-1/0,-1/0],j=[1/0,1/0,-1/0,-1/0],V=m.canonicalID();if(S.type==="Polygon"){const J=qi(S.coordinates,j,V),oe=Ja(m.geometry(),L,j,V);if(!Wt(L,j))return!1;for(const de of oe)if(!Pr(de,J))return!1}if(S.type==="MultiPolygon"){const J=za(S.coordinates,j,V),oe=Ja(m.geometry(),L,j,V);if(!Wt(L,j))return!1;for(const de of oe)if(!oi(de,J))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(m,S){const L=[1/0,1/0,-1/0,-1/0],j=[1/0,1/0,-1/0,-1/0],V=m.canonicalID();if(S.type==="Polygon"){const J=qi(S.coordinates,j,V),oe=zo(m.geometry(),L,j,V);if(!Wt(L,j))return!1;for(const de of oe)if(!Ci(de,J))return!1}if(S.type==="MultiPolygon"){const J=za(S.coordinates,j,V),oe=zo(m.geometry(),L,j,V);if(!Wt(L,j))return!1;for(const de of oe)if(!Zi(de,J))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ts=class{constructor(g=[],u=(m,S)=>m<S?-1:m>S?1:0){if(this.data=g,this.length=this.data.length,this.compare=u,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(g){this.data.push(g),this._up(this.length++)}pop(){if(this.length===0)return;const g=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),g}peek(){return this.data[0]}_up(g){const{data:u,compare:m}=this,S=u[g];for(;g>0;){const L=g-1>>1,j=u[L];if(m(S,j)>=0)break;u[g]=j,g=L}u[g]=S}_down(g){const{data:u,compare:m}=this,S=this.length>>1,L=u[g];for(;g<S;){let j=1+(g<<1);const V=j+1;if(V<this.length&&m(u[V],u[j])<0&&(j=V),m(u[j],L)>=0)break;u[g]=u[j],g=j}u[g]=L}};function ll(g,u,m=0,S=g.length-1,L=Wc){for(;S>m;){if(S-m>600){const oe=S-m+1,de=u-m+1,be=Math.log(oe),Le=.5*Math.exp(2*be/3),$e=.5*Math.sqrt(be*Le*(oe-Le)/oe)*(de-oe/2<0?-1:1);ll(g,u,Math.max(m,Math.floor(u-de*Le/oe+$e)),Math.min(S,Math.floor(u+(oe-de)*Le/oe+$e)),L)}const j=g[u];let V=m,J=S;for(Ys(g,m,u),L(g[S],j)>0&&Ys(g,m,S);V<J;){for(Ys(g,V,J),V++,J--;L(g[V],j)<0;)V++;for(;L(g[J],j)>0;)J--}L(g[m],j)===0?Ys(g,m,J):(J++,Ys(g,J,S)),J<=u&&(m=J+1),u<=J&&(S=J-1)}}function Ys(g,u,m){const S=g[u];g[u]=g[m],g[m]=S}function Wc(g,u){return g<u?-1:g>u?1:0}function Ll(g,u){if(g.length<=1)return[g];const m=[];let S,L;for(const j of g){const V=Tc(j);V!==0&&(j.area=Math.abs(V),L===void 0&&(L=V<0),L===V<0?(S&&m.push(S),S=[j]):S.push(j))}if(S&&m.push(S),u>1)for(let j=0;j<m.length;j++)m[j].length<=u||(ll(m[j],u,1,m[j].length-1,Xl),m[j]=m[j].slice(0,u));return m}function Xl(g,u){return u.area-g.area}function Tc(g){let u=0;for(let m,S,L=0,j=g.length,V=j-1;L<j;V=L++)m=g[L],S=g[V],u+=(S.x-m.x)*(m.y+S.y);return u}const Yl=1/298.257223563,Nl=Yl*(2-Yl),ju=Math.PI/180;class io{constructor(u){const m=6378.137*ju*1e3,S=Math.cos(u*ju),L=1/(1-Nl*(1-S*S)),j=Math.sqrt(L);this.kx=m*j*S,this.ky=m*j*L*(1-Nl)}distance(u,m){const S=this.wrap(u[0]-m[0])*this.kx,L=(u[1]-m[1])*this.ky;return Math.sqrt(S*S+L*L)}pointOnLine(u,m){let S,L,j,V,J=1/0;for(let oe=0;oe<u.length-1;oe++){let de=u[oe][0],be=u[oe][1],Le=this.wrap(u[oe+1][0]-de)*this.kx,$e=(u[oe+1][1]-be)*this.ky,Je=0;Le===0&&$e===0||(Je=(this.wrap(m[0]-de)*this.kx*Le+(m[1]-be)*this.ky*$e)/(Le*Le+$e*$e),Je>1?(de=u[oe+1][0],be=u[oe+1][1]):Je>0&&(de+=Le/this.kx*Je,be+=$e/this.ky*Je)),Le=this.wrap(m[0]-de)*this.kx,$e=(m[1]-be)*this.ky;const tt=Le*Le+$e*$e;tt<J&&(J=tt,S=de,L=be,j=oe,V=Je)}return{point:[S,L],index:j,t:Math.max(0,Math.min(1,V))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function Gu(g,u){return u[0]-g[0]}function Zs(g){return g[1]-g[0]+1}function Cs(g,u){return g[1]>=g[0]&&g[1]<u}function Vu(g,u){if(g[0]>g[1])return[null,null];const m=Zs(g);if(u){if(m===2)return[g,null];const L=Math.floor(m/2);return[[g[0],g[0]+L],[g[0]+L,g[1]]]}if(m===1)return[g,null];const S=Math.floor(m/2)-1;return[[g[0],g[0]+S],[g[0]+S+1,g[1]]]}function rs(g,u){if(!Cs(u,g.length))return[1/0,1/0,-1/0,-1/0];const m=[1/0,1/0,-1/0,-1/0];for(let S=u[0];S<=u[1];++S)nt(m,g[S]);return m}function Cc(g){const u=[1/0,1/0,-1/0,-1/0];for(const m of g)for(const S of m)nt(u,S);return u}function sc(g){return g[0]!==-1/0&&g[1]!==-1/0&&g[2]!==1/0&&g[3]!==1/0}function pa(g,u,m){if(!sc(g)||!sc(u))return NaN;let S=0,L=0;return g[2]<u[0]&&(S=u[0]-g[2]),g[0]>u[2]&&(S=g[0]-u[2]),g[1]>u[3]&&(L=g[1]-u[3]),g[3]<u[1]&&(L=u[1]-g[3]),m.distance([0,0],[S,L])}function ds(g,u,m){const S=m.pointOnLine(u,g);return m.distance(g,S.point)}function wo(g,u,m,S,L){const j=Math.min(ds(g,[m,S],L),ds(u,[m,S],L)),V=Math.min(ds(m,[g,u],L),ds(S,[g,u],L));return Math.min(j,V)}function Cu(g,u,m,S,L){if(!Cs(u,g.length)||!Cs(S,m.length))return 1/0;let j=1/0;for(let V=u[0];V<u[1];++V){const J=g[V],oe=g[V+1];for(let de=S[0];de<S[1];++de){const be=m[de],Le=m[de+1];if(kn(J,oe,be,Le))return 0;j=Math.min(j,wo(J,oe,be,Le,L))}}return j}function wh(g,u,m,S,L){if(!Cs(u,g.length)||!Cs(S,m.length))return NaN;let j=1/0;for(let V=u[0];V<=u[1];++V)for(let J=S[0];J<=S[1];++J)if(j=Math.min(j,L.distance(g[V],m[J])),j===0)return j;return j}function Mn(g,u,m){if(Pr(g,u,!0))return 0;let S=1/0;for(const L of u){const j=L[0],V=L[L.length-1];if(j!==V&&(S=Math.min(S,ds(g,[V,j],m)),S===0))return S;const J=m.pointOnLine(L,g);if(S=Math.min(S,m.distance(g,J.point)),S===0)return S}return S}function Yn(g,u,m,S){if(!Cs(u,g.length))return NaN;for(let j=u[0];j<=u[1];++j)if(Pr(g[j],m,!0))return 0;let L=1/0;for(let j=u[0];j<u[1];++j){const V=g[j],J=g[j+1];for(const oe of m)for(let de=0,be=oe.length,Le=be-1;de<be;Le=de++){const $e=oe[Le],Je=oe[de];if(kn(V,J,$e,Je))return 0;L=Math.min(L,wo(V,J,$e,Je,S))}}return L}function jr(g,u){for(const m of g)for(const S of m)if(Pr(S,u,!0))return!0;return!1}function ai(g,u,m,S=1/0){const L=Cc(g),j=Cc(u);if(S!==1/0&&pa(L,j,m)>=S)return S;if(Wt(L,j)){if(jr(g,u))return 0}else if(jr(u,g))return 0;let V=1/0;for(const J of g)for(let oe=0,de=J.length,be=de-1;oe<de;be=oe++){const Le=J[be],$e=J[oe];for(const Je of u)for(let tt=0,ct=Je.length,Rt=ct-1;tt<ct;Rt=tt++){const Ht=Je[Rt],fn=Je[tt];if(kn(Le,$e,Ht,fn))return 0;V=Math.min(V,wo(Le,$e,Ht,fn,m))}}return V}function ia(g,u,m,S,L,j){if(!j)return;const V=pa(rs(S,j),L,m);V<u&&g.push([V,j,[0,0]])}function Mi(g,u,m,S,L,j,V){if(!j||!V)return;const J=pa(rs(S,j),rs(L,V),m);J<u&&g.push([J,j,V])}function I(g,u,m,S,L=1/0){let j=Math.min(S.distance(g[0],m[0][0]),L);if(j===0)return j;const V=new Ts([[0,[0,g.length-1],[0,0]]],Gu),J=Cc(m);for(;V.length>0;){const oe=V.pop();if(oe[0]>=j)continue;const de=oe[1],be=u?50:100;if(Zs(de)<=be){if(!Cs(de,g.length))return NaN;if(u){const Le=Yn(g,de,m,S);if(isNaN(Le)||Le===0)return Le;j=Math.min(j,Le)}else for(let Le=de[0];Le<=de[1];++Le){const $e=Mn(g[Le],m,S);if(j=Math.min(j,$e),j===0)return 0}}else{const Le=Vu(de,u);ia(V,j,S,g,J,Le[0]),ia(V,j,S,g,J,Le[1])}}return j}function y(g,u,m,S,L,j=1/0){let V=Math.min(j,L.distance(g[0],m[0]));if(V===0)return V;const J=new Ts([[0,[0,g.length-1],[0,m.length-1]]],Gu);for(;J.length>0;){const oe=J.pop();if(oe[0]>=V)continue;const de=oe[1],be=oe[2],Le=u?50:100,$e=S?50:100;if(Zs(de)<=Le&&Zs(be)<=$e){if(!Cs(de,g.length)&&Cs(be,m.length))return NaN;let Je;if(u&&S)Je=Cu(g,de,m,be,L),V=Math.min(V,Je);else if(u&&!S){const tt=g.slice(de[0],de[1]+1);for(let ct=be[0];ct<=be[1];++ct)if(Je=ds(m[ct],tt,L),V=Math.min(V,Je),V===0)return V}else if(!u&&S){const tt=m.slice(be[0],be[1]+1);for(let ct=de[0];ct<=de[1];++ct)if(Je=ds(g[ct],tt,L),V=Math.min(V,Je),V===0)return V}else Je=wh(g,de,m,be,L),V=Math.min(V,Je)}else{const Je=Vu(de,u),tt=Vu(be,S);Mi(J,V,L,g,m,Je[0],tt[0]),Mi(J,V,L,g,m,Je[0],tt[1]),Mi(J,V,L,g,m,Je[1],tt[0]),Mi(J,V,L,g,m,Je[1],tt[1])}}return V}function b(g){return g.type==="MultiPolygon"?g.coordinates.map(u=>({type:"Polygon",coordinates:u})):g.type==="MultiLineString"?g.coordinates.map(u=>({type:"LineString",coordinates:u})):g.type==="MultiPoint"?g.coordinates.map(u=>({type:"Point",coordinates:u})):[g]}class R{constructor(u,m){this.type=en,this.geojson=u,this.geometries=m}static parse(u,m){if(u.length!==2)return m.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(ui(u[1])){const S=u[1];if(S.type==="FeatureCollection")return new R(S,S.features.map(L=>b(L.geometry)).flat());if(S.type==="Feature")return new R(S,b(S.geometry));if("type"in S&&"coordinates"in S)return new R(S,b(S))}return m.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(m,S){const L=m.geometry(),j=L.flat().map(oe=>fe([oe.x,oe.y],m.canonical));if(L.length===0)return NaN;const V=new io(j[0][1]);let J=1/0;for(const oe of S){switch(oe.type){case"Point":J=Math.min(J,y(j,!1,[oe.coordinates],!1,V,J));break;case"LineString":J=Math.min(J,y(j,!1,oe.coordinates,!0,V,J));break;case"Polygon":J=Math.min(J,I(j,!1,oe.coordinates,V,J))}if(J===0)return J}return J}(u,this.geometries);if(u.geometryType()==="LineString")return function(m,S){const L=m.geometry(),j=L.flat().map(oe=>fe([oe.x,oe.y],m.canonical));if(L.length===0)return NaN;const V=new io(j[0][1]);let J=1/0;for(const oe of S){switch(oe.type){case"Point":J=Math.min(J,y(j,!0,[oe.coordinates],!1,V,J));break;case"LineString":J=Math.min(J,y(j,!0,oe.coordinates,!0,V,J));break;case"Polygon":J=Math.min(J,I(j,!0,oe.coordinates,V,J))}if(J===0)return J}return J}(u,this.geometries);if(u.geometryType()==="Polygon")return function(m,S){const L=m.geometry();if(L.length===0||L[0].length===0)return NaN;const j=Ll(L,0).map(oe=>oe.map(de=>de.map(be=>fe([be.x,be.y],m.canonical)))),V=new io(j[0][0][0][1]);let J=1/0;for(const oe of S)for(const de of j){switch(oe.type){case"Point":J=Math.min(J,I([oe.coordinates],!1,de,V,J));break;case"LineString":J=Math.min(J,I(oe.coordinates,!0,de,V,J));break;case"Polygon":J=Math.min(J,ai(de,oe.coordinates,V,J))}if(J===0)return J}return J}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Z={"==":Sc,"!=":Ec,">":Tu,"<":Eu,">=":$c,"<=":Xs,array:ea,at:Fo,boolean:ea,case:xl,coalesce:Ss,collator:Es,format:Lo,image:zu,in:no,"index-of":Bo,interpolate:Do,"interpolate-hcl":Do,"interpolate-lab":Do,length:au,let:ha,literal:ii,match:ts,number:ea,"number-format":Wl,object:ea,slice:Ws,step:$l,string:ea,"to-boolean":Oo,"to-color":Oo,"to-number":Oo,"to-string":Oo,var:xo,within:co,distance:R};class le{constructor(u,m,S,L){this.name=u,this.type=m,this._evaluate=S,this.args=L}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,m){const S=u[0],L=le.definitions[S];if(!L)return m.error(`Unknown expression "${S}". If you wanted a literal array, use ["literal", [...]].`,0);const j=Array.isArray(L)?L[0]:L.type,V=Array.isArray(L)?[[L[1],L[2]]]:L.overloads,J=V.filter(([de])=>!Array.isArray(de)||de.length===u.length-1);let oe=null;for(const[de,be]of J){oe=new _l(m.registry,wn,m.path,null,m.scope);const Le=[];let $e=!1;for(let Je=1;Je<u.length;Je++){const tt=u[Je],ct=Array.isArray(de)?de[Je-1]:de.type,Rt=oe.parse(tt,1+Le.length,ct);if(!Rt){$e=!0;break}Le.push(Rt)}if(!$e)if(Array.isArray(de)&&de.length!==Le.length)oe.error(`Expected ${de.length} arguments, but found ${Le.length} instead.`);else{for(let Je=0;Je<Le.length;Je++){const tt=Array.isArray(de)?de[Je]:de.type,ct=Le[Je];oe.concat(Je+1).checkSubtype(tt,ct.type)}if(oe.errors.length===0)return new le(S,j,be,Le)}}if(J.length===1)m.errors.push(...oe.errors);else{const de=(J.length?J:V).map(([Le])=>{return $e=Le,Array.isArray($e)?`(${$e.map(lt).join(", ")})`:`(${lt($e.type)}...)`;var $e}).join(" | "),be=[];for(let Le=1;Le<u.length;Le++){const $e=m.parse(u[Le],1+be.length);if(!$e)return null;be.push(lt($e.type))}m.error(`Expected arguments of type ${de}, but found (${be.join(", ")}) instead.`)}return null}static register(u,m){le.definitions=m;for(const S in m)u[S]=le}}function Me(g,[u,m,S,L]){u=u.evaluate(g),m=m.evaluate(g),S=S.evaluate(g);const j=L?L.evaluate(g):1,V=ua(u,m,S,j);if(V)throw new ur(V);return new et(u/255,m/255,S/255,j,!1)}function Ue(g,u){return g in u}function dt(g,u){const m=u[g];return m===void 0?null:m}function Nt(g){return{type:g}}function wn(g){if(g instanceof xo)return wn(g.boundExpression);if(g instanceof le&&g.name==="error"||g instanceof Es||g instanceof co||g instanceof R)return!1;const u=g instanceof Oo||g instanceof ea;let m=!0;return g.eachChild(S=>{m=u?m&&wn(S):m&&S instanceof ii}),!!m&&Nn(g)&&$r(g,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Nn(g){if(g instanceof le&&(g.name==="get"&&g.args.length===1||g.name==="feature-state"||g.name==="has"&&g.args.length===1||g.name==="properties"||g.name==="geometry-type"||g.name==="id"||/^filter-/.test(g.name))||g instanceof co||g instanceof R)return!1;let u=!0;return g.eachChild(m=>{u&&!Nn(m)&&(u=!1)}),u}function dr(g){if(g instanceof le&&g.name==="feature-state")return!1;let u=!0;return g.eachChild(m=>{u&&!dr(m)&&(u=!1)}),u}function $r(g,u){if(g instanceof le&&u.indexOf(g.name)>=0)return!1;let m=!0;return g.eachChild(S=>{m&&!$r(S,u)&&(m=!1)}),m}function mi(g){return{result:"success",value:g}}function xi(g){return{result:"error",value:g}}function si(g){return g["property-type"]==="data-driven"||g["property-type"]==="cross-faded-data-driven"}function ci(g){return!!g.expression&&g.expression.parameters.indexOf("zoom")>-1}function Fi(g){return!!g.expression&&g.expression.interpolated}function hi(g){return g instanceof Number?"number":g instanceof String?"string":g instanceof Boolean?"boolean":Array.isArray(g)?"array":g===null?"null":typeof g}function Ii(g){return typeof g=="object"&&g!==null&&!Array.isArray(g)}function Di(g){return g}function xa(g,u){const m=u.type==="color",S=g.stops&&typeof g.stops[0][0]=="object",L=S||!(S||g.property!==void 0),j=g.type||(Fi(u)?"exponential":"interval");if(m||u.type==="padding"){const be=m?et.parse:cr.parse;(g=Pe({},g)).stops&&(g.stops=g.stops.map(Le=>[Le[0],be(Le[1])])),g.default=be(g.default?g.default:u.default)}if(g.colorSpace&&(V=g.colorSpace)!=="rgb"&&V!=="hcl"&&V!=="lab")throw new Error(`Unknown color space: "${g.colorSpace}"`);var V;let J,oe,de;if(j==="exponential")J=ul;else if(j==="interval")J=kl;else if(j==="categorical"){J=Bs,oe=Object.create(null);for(const be of g.stops)oe[be[0]]=be[1];de=typeof g.stops[0][0]}else{if(j!=="identity")throw new Error(`Unknown function type "${j}"`);J=Ks}if(S){const be={},Le=[];for(let tt=0;tt<g.stops.length;tt++){const ct=g.stops[tt],Rt=ct[0].zoom;be[Rt]===void 0&&(be[Rt]={zoom:Rt,type:g.type,property:g.property,default:g.default,stops:[]},Le.push(Rt)),be[Rt].stops.push([ct[0].value,ct[1]])}const $e=[];for(const tt of Le)$e.push([be[tt].zoom,xa(be[tt],u)]);const Je={name:"linear"};return{kind:"composite",interpolationType:Je,interpolationFactor:Do.interpolationFactor.bind(void 0,Je),zoomStops:$e.map(tt=>tt[0]),evaluate:({zoom:tt},ct)=>ul({stops:$e,base:g.base},u,tt).evaluate(tt,ct)}}if(L){const be=j==="exponential"?{name:"exponential",base:g.base!==void 0?g.base:1}:null;return{kind:"camera",interpolationType:be,interpolationFactor:Do.interpolationFactor.bind(void 0,be),zoomStops:g.stops.map(Le=>Le[0]),evaluate:({zoom:Le})=>J(g,u,Le,oe,de)}}return{kind:"source",evaluate(be,Le){const $e=Le&&Le.properties?Le.properties[g.property]:void 0;return $e===void 0?ka(g.default,u.default):J(g,u,$e,oe,de)}}}function ka(g,u,m){return g!==void 0?g:u!==void 0?u:m!==void 0?m:void 0}function Bs(g,u,m,S,L){return ka(typeof m===L?S[m]:void 0,g.default,u.default)}function kl(g,u,m){if(hi(m)!=="number")return ka(g.default,u.default);const S=g.stops.length;if(S===1||m<=g.stops[0][0])return g.stops[0][1];if(m>=g.stops[S-1][0])return g.stops[S-1][1];const L=wc(g.stops.map(j=>j[0]),m);return g.stops[L][1]}function ul(g,u,m){const S=g.base!==void 0?g.base:1;if(hi(m)!=="number")return ka(g.default,u.default);const L=g.stops.length;if(L===1||m<=g.stops[0][0])return g.stops[0][1];if(m>=g.stops[L-1][0])return g.stops[L-1][1];const j=wc(g.stops.map(be=>be[0]),m),V=function(be,Le,$e,Je){const tt=Je-$e,ct=be-$e;return tt===0?0:Le===1?ct/tt:(Math.pow(Le,ct)-1)/(Math.pow(Le,tt)-1)}(m,S,g.stops[j][0],g.stops[j+1][0]),J=g.stops[j][1],oe=g.stops[j+1][1],de=ns[u.type]||Di;return typeof J.evaluate=="function"?{evaluate(...be){const Le=J.evaluate.apply(void 0,be),$e=oe.evaluate.apply(void 0,be);if(Le!==void 0&&$e!==void 0)return de(Le,$e,V,g.colorSpace)}}:de(J,oe,V,g.colorSpace)}function Ks(g,u,m){switch(u.type){case"color":m=et.parse(m);break;case"formatted":m=xn.fromString(m.toString());break;case"resolvedImage":m=Nr.fromString(m.toString());break;case"padding":m=cr.parse(m);break;default:hi(m)===u.type||u.type==="enum"&&u.values[m]||(m=void 0)}return ka(m,g.default,u.default)}le.register(Z,{error:[{kind:"error"},[Fn],(g,[u])=>{throw new ur(u.evaluate(g))}],typeof:[Fn,[zr],(g,[u])=>lt(Vr(u.evaluate(g)))],"to-rgba":[gi(en,4),[kr],(g,[u])=>{const[m,S,L,j]=u.evaluate(g).rgb;return[255*m,255*S,255*L,j]}],rgb:[kr,[en,en,en],Me],rgba:[kr,[en,en,en,en],Me],has:{type:Wn,overloads:[[[Fn],(g,[u])=>Ue(u.evaluate(g),g.properties())],[[Fn,vi],(g,[u,m])=>Ue(u.evaluate(g),m.evaluate(g))]]},get:{type:zr,overloads:[[[Fn],(g,[u])=>dt(u.evaluate(g),g.properties())],[[Fn,vi],(g,[u,m])=>dt(u.evaluate(g),m.evaluate(g))]]},"feature-state":[zr,[Fn],(g,[u])=>dt(u.evaluate(g),g.featureState||{})],properties:[vi,[],g=>g.properties()],"geometry-type":[Fn,[],g=>g.geometryType()],id:[zr,[],g=>g.id()],zoom:[en,[],g=>g.globals.zoom],"heatmap-density":[en,[],g=>g.globals.heatmapDensity||0],"line-progress":[en,[],g=>g.globals.lineProgress||0],accumulated:[zr,[],g=>g.globals.accumulated===void 0?null:g.globals.accumulated],"+":[en,Nt(en),(g,u)=>{let m=0;for(const S of u)m+=S.evaluate(g);return m}],"*":[en,Nt(en),(g,u)=>{let m=1;for(const S of u)m*=S.evaluate(g);return m}],"-":{type:en,overloads:[[[en,en],(g,[u,m])=>u.evaluate(g)-m.evaluate(g)],[[en],(g,[u])=>-u.evaluate(g)]]},"/":[en,[en,en],(g,[u,m])=>u.evaluate(g)/m.evaluate(g)],"%":[en,[en,en],(g,[u,m])=>u.evaluate(g)%m.evaluate(g)],ln2:[en,[],()=>Math.LN2],pi:[en,[],()=>Math.PI],e:[en,[],()=>Math.E],"^":[en,[en,en],(g,[u,m])=>Math.pow(u.evaluate(g),m.evaluate(g))],sqrt:[en,[en],(g,[u])=>Math.sqrt(u.evaluate(g))],log10:[en,[en],(g,[u])=>Math.log(u.evaluate(g))/Math.LN10],ln:[en,[en],(g,[u])=>Math.log(u.evaluate(g))],log2:[en,[en],(g,[u])=>Math.log(u.evaluate(g))/Math.LN2],sin:[en,[en],(g,[u])=>Math.sin(u.evaluate(g))],cos:[en,[en],(g,[u])=>Math.cos(u.evaluate(g))],tan:[en,[en],(g,[u])=>Math.tan(u.evaluate(g))],asin:[en,[en],(g,[u])=>Math.asin(u.evaluate(g))],acos:[en,[en],(g,[u])=>Math.acos(u.evaluate(g))],atan:[en,[en],(g,[u])=>Math.atan(u.evaluate(g))],min:[en,Nt(en),(g,u)=>Math.min(...u.map(m=>m.evaluate(g)))],max:[en,Nt(en),(g,u)=>Math.max(...u.map(m=>m.evaluate(g)))],abs:[en,[en],(g,[u])=>Math.abs(u.evaluate(g))],round:[en,[en],(g,[u])=>{const m=u.evaluate(g);return m<0?-Math.round(-m):Math.round(m)}],floor:[en,[en],(g,[u])=>Math.floor(u.evaluate(g))],ceil:[en,[en],(g,[u])=>Math.ceil(u.evaluate(g))],"filter-==":[Wn,[Fn,zr],(g,[u,m])=>g.properties()[u.value]===m.value],"filter-id-==":[Wn,[zr],(g,[u])=>g.id()===u.value],"filter-type-==":[Wn,[Fn],(g,[u])=>g.geometryType()===u.value],"filter-<":[Wn,[Fn,zr],(g,[u,m])=>{const S=g.properties()[u.value],L=m.value;return typeof S==typeof L&&S<L}],"filter-id-<":[Wn,[zr],(g,[u])=>{const m=g.id(),S=u.value;return typeof m==typeof S&&m<S}],"filter->":[Wn,[Fn,zr],(g,[u,m])=>{const S=g.properties()[u.value],L=m.value;return typeof S==typeof L&&S>L}],"filter-id->":[Wn,[zr],(g,[u])=>{const m=g.id(),S=u.value;return typeof m==typeof S&&m>S}],"filter-<=":[Wn,[Fn,zr],(g,[u,m])=>{const S=g.properties()[u.value],L=m.value;return typeof S==typeof L&&S<=L}],"filter-id-<=":[Wn,[zr],(g,[u])=>{const m=g.id(),S=u.value;return typeof m==typeof S&&m<=S}],"filter->=":[Wn,[Fn,zr],(g,[u,m])=>{const S=g.properties()[u.value],L=m.value;return typeof S==typeof L&&S>=L}],"filter-id->=":[Wn,[zr],(g,[u])=>{const m=g.id(),S=u.value;return typeof m==typeof S&&m>=S}],"filter-has":[Wn,[zr],(g,[u])=>u.value in g.properties()],"filter-has-id":[Wn,[],g=>g.id()!==null&&g.id()!==void 0],"filter-type-in":[Wn,[gi(Fn)],(g,[u])=>u.value.indexOf(g.geometryType())>=0],"filter-id-in":[Wn,[gi(zr)],(g,[u])=>u.value.indexOf(g.id())>=0],"filter-in-small":[Wn,[Fn,gi(zr)],(g,[u,m])=>m.value.indexOf(g.properties()[u.value])>=0],"filter-in-large":[Wn,[Fn,gi(zr)],(g,[u,m])=>function(S,L,j,V){for(;j<=V;){const J=j+V>>1;if(L[J]===S)return!0;L[J]>S?V=J-1:j=J+1}return!1}(g.properties()[u.value],m.value,0,m.value.length-1)],all:{type:Wn,overloads:[[[Wn,Wn],(g,[u,m])=>u.evaluate(g)&&m.evaluate(g)],[Nt(Wn),(g,u)=>{for(const m of u)if(!m.evaluate(g))return!1;return!0}]]},any:{type:Wn,overloads:[[[Wn,Wn],(g,[u,m])=>u.evaluate(g)||m.evaluate(g)],[Nt(Wn),(g,u)=>{for(const m of u)if(m.evaluate(g))return!0;return!1}]]},"!":[Wn,[Wn],(g,[u])=>!u.evaluate(g)],"is-supported-script":[Wn,[Fn],(g,[u])=>{const m=g.globals&&g.globals.isSupportedScript;return!m||m(u.evaluate(g))}],upcase:[Fn,[Fn],(g,[u])=>u.evaluate(g).toUpperCase()],downcase:[Fn,[Fn],(g,[u])=>u.evaluate(g).toLowerCase()],concat:[Fn,Nt(zr),(g,u)=>u.map(m=>hr(m.evaluate(g))).join("")],"resolved-locale":[Fn,[zn],(g,[u])=>u.evaluate(g).resolvedLocale()]});class ou{constructor(u,m){var S;this.expression=u,this._warningHistory={},this._evaluator=new Jr,this._defaultValue=m?(S=m).type==="color"&&Ii(S.default)?new et(0,0,0,0):S.type==="color"?et.parse(S.default)||null:S.type==="padding"?cr.parse(S.default)||null:S.type==="variableAnchorOffsetCollection"?Ir.parse(S.default)||null:S.type==="projectionDefinition"?Wr.parse(S.default)||null:S.default===void 0?null:S.default:null,this._enumValues=m&&m.type==="enum"?m.values:null}evaluateWithoutErrorHandling(u,m,S,L,j,V){return this._evaluator.globals=u,this._evaluator.feature=m,this._evaluator.featureState=S,this._evaluator.canonical=L,this._evaluator.availableImages=j||null,this._evaluator.formattedSection=V,this.expression.evaluate(this._evaluator)}evaluate(u,m,S,L,j,V){this._evaluator.globals=u,this._evaluator.feature=m||null,this._evaluator.featureState=S||null,this._evaluator.canonical=L,this._evaluator.availableImages=j||null,this._evaluator.formattedSection=V||null;try{const J=this.expression.evaluate(this._evaluator);if(J==null||typeof J=="number"&&J!=J)return this._defaultValue;if(this._enumValues&&!(J in this._enumValues))throw new ur(`Expected value to be one of ${Object.keys(this._enumValues).map(oe=>JSON.stringify(oe)).join(", ")}, but found ${JSON.stringify(J)} instead.`);return J}catch(J){return this._warningHistory[J.message]||(this._warningHistory[J.message]=!0,typeof console<"u"&&console.warn(J.message)),this._defaultValue}}}function Js(g){return Array.isArray(g)&&g.length>0&&typeof g[0]=="string"&&g[0]in Z}function So(g,u){const m=new _l(Z,wn,[],u?function(L){const j={color:kr,string:Fn,number:en,enum:Fn,boolean:Wn,formatted:En,padding:mr,projectionDefinition:Qr,resolvedImage:yi,variableAnchorOffsetCollection:_i};return L.type==="array"?gi(j[L.value]||zr,L.length):j[L.type]}(u):void 0),S=m.parse(g,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return S?mi(new ou(S,u)):xi(m.errors)}class cl{constructor(u,m){this.kind=u,this._styleExpression=m,this.isStateDependent=u!=="constant"&&!dr(m.expression)}evaluateWithoutErrorHandling(u,m,S,L,j,V){return this._styleExpression.evaluateWithoutErrorHandling(u,m,S,L,j,V)}evaluate(u,m,S,L,j,V){return this._styleExpression.evaluate(u,m,S,L,j,V)}}class ps{constructor(u,m,S,L){this.kind=u,this.zoomStops=S,this._styleExpression=m,this.isStateDependent=u!=="camera"&&!dr(m.expression),this.interpolationType=L}evaluateWithoutErrorHandling(u,m,S,L,j,V){return this._styleExpression.evaluateWithoutErrorHandling(u,m,S,L,j,V)}evaluate(u,m,S,L,j,V){return this._styleExpression.evaluate(u,m,S,L,j,V)}interpolationFactor(u,m,S){return this.interpolationType?Do.interpolationFactor(this.interpolationType,u,m,S):0}}function Xc(g,u){const m=So(g,u);if(m.result==="error")return m;const S=m.value.expression,L=Nn(S);if(!L&&!si(u))return xi([new je("","data expressions not supported")]);const j=$r(S,["zoom"]);if(!j&&!ci(u))return xi([new je("","zoom expressions not supported")]);const V=Mu(S);return V||j?V instanceof je?xi([V]):V instanceof Do&&!Fi(u)?xi([new je("",'"interpolate" expressions cannot be used with this property')]):mi(V?new ps(L?"camera":"composite",m.value,V.labels,V instanceof Do?V.interpolation:void 0):new cl(L?"constant":"source",m.value)):xi([new je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class wl{constructor(u,m){this._parameters=u,this._specification=m,Pe(this,xa(this._parameters,this._specification))}static deserialize(u){return new wl(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function Mu(g){let u=null;if(g instanceof ha)u=Mu(g.result);else if(g instanceof Ss){for(const m of g.args)if(u=Mu(m),u)break}else(g instanceof $l||g instanceof Do)&&g.input instanceof le&&g.input.name==="zoom"&&(u=g);return u instanceof je||g.eachChild(m=>{const S=Mu(m);S instanceof je?u=S:!u&&S?u=new je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&S&&u!==S&&(u=new je("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function Yc(g){if(g===!0||g===!1)return!0;if(!Array.isArray(g)||g.length===0)return!1;switch(g[0]){case"has":return g.length>=2&&g[1]!=="$id"&&g[1]!=="$type";case"in":return g.length>=3&&(typeof g[1]!="string"||Array.isArray(g[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return g.length!==3||Array.isArray(g[1])||Array.isArray(g[2]);case"any":case"all":for(const u of g.slice(1))if(!Yc(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const Sh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function nd(g){if(g==null)return{filter:()=>!0,needGeometry:!1};Yc(g)||(g=Hu(g));const u=So(g,Sh);if(u.result==="error")throw new Error(u.value.map(m=>`${m.key}: ${m.message}`).join(", "));return{filter:(m,S,L)=>u.value.evaluate(m,S,{},L),needGeometry:Zc(g)}}function rd(g,u){return g<u?-1:g>u?1:0}function Zc(g){if(!Array.isArray(g))return!1;if(g[0]==="within"||g[0]==="distance")return!0;for(let u=1;u<g.length;u++)if(Zc(g[u]))return!0;return!1}function Hu(g){if(!g)return!0;const u=g[0];return g.length<=1?u!=="any":u==="=="?Eh(g[1],g[2],"=="):u==="!="?Sl(Eh(g[1],g[2],"==")):u==="<"||u===">"||u==="<="||u===">="?Eh(g[1],g[2],u):u==="any"?(m=g.slice(1),["any"].concat(m.map(Hu))):u==="all"?["all"].concat(g.slice(1).map(Hu)):u==="none"?["all"].concat(g.slice(1).map(Hu).map(Sl)):u==="in"?Ef(g[1],g.slice(2)):u==="!in"?Sl(Ef(g[1],g.slice(2))):u==="has"?su(g[1]):u!=="!has"||Sl(su(g[1]));var m}function Eh(g,u,m){switch(g){case"$type":return[`filter-type-${m}`,u];case"$id":return[`filter-id-${m}`,u];default:return[`filter-${m}`,g,u]}}function Ef(g,u){if(u.length===0)return!1;switch(g){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(m=>typeof m!=typeof u[0])?["filter-in-large",g,["literal",u.sort(rd)]]:["filter-in-small",g,["literal",u]]}}function su(g){switch(g){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",g]}}function Sl(g){return["!",g]}function lc(g){const u=typeof g;if(u==="number"||u==="boolean"||u==="string"||g==null)return JSON.stringify(g);if(Array.isArray(g)){let L="[";for(const j of g)L+=`${lc(j)},`;return`${L}]`}const m=Object.keys(g).sort();let S="{";for(let L=0;L<m.length;L++)S+=`${JSON.stringify(m[L])}:${lc(g[m[L]])},`;return`${S}}`}function Th(g){let u="";for(const m of He)u+=`/${lc(g[m])}`;return u}function Kc(g){const u=g.value;return u?[new jt(g.key,u,"constants have been deprecated as of v8")]:[]}function Ro(g){return g instanceof Number||g instanceof String||g instanceof Boolean?g.valueOf():g}function Yh(g){if(Array.isArray(g))return g.map(Yh);if(g instanceof Object&&!(g instanceof Number||g instanceof String||g instanceof Boolean)){const u={};for(const m in g)u[m]=Yh(g[m]);return u}return Ro(g)}function Zl(g){const u=g.key,m=g.value,S=g.valueSpec||{},L=g.objectElementValidators||{},j=g.style,V=g.styleSpec,J=g.validateSpec;let oe=[];const de=hi(m);if(de!=="object")return[new jt(u,m,`object expected, ${de} found`)];for(const be in m){const Le=be.split(".")[0],$e=S[Le]||S["*"];let Je;if(L[Le])Je=L[Le];else if(S[Le])Je=J;else if(L["*"])Je=L["*"];else{if(!S["*"]){oe.push(new jt(u,m[be],`unknown property "${be}"`));continue}Je=J}oe=oe.concat(Je({key:(u&&`${u}.`)+be,value:m[be],valueSpec:$e,style:j,styleSpec:V,object:m,objectKey:be,validateSpec:J},m))}for(const be in S)L[be]||S[be].required&&S[be].default===void 0&&m[be]===void 0&&oe.push(new jt(u,m,`missing required property "${be}"`));return oe}function Tf(g){const u=g.value,m=g.valueSpec,S=g.style,L=g.styleSpec,j=g.key,V=g.arrayElementValidator||g.validateSpec;if(hi(u)!=="array")return[new jt(j,u,`array expected, ${hi(u)} found`)];if(m.length&&u.length!==m.length)return[new jt(j,u,`array length ${m.length} expected, length ${u.length} found`)];if(m["min-length"]&&u.length<m["min-length"])return[new jt(j,u,`array length at least ${m["min-length"]} expected, length ${u.length} found`)];let J={type:m.value,values:m.values};L.$version<7&&(J.function=m.function),hi(m.value)==="object"&&(J=m.value);let oe=[];for(let de=0;de<u.length;de++)oe=oe.concat(V({array:u,arrayIndex:de,value:u[de],valueSpec:J,validateSpec:g.validateSpec,style:S,styleSpec:L,key:`${j}[${de}]`}));return oe}function Ms(g){const u=g.key,m=g.value,S=g.valueSpec;let L=hi(m);return L==="number"&&m!=m&&(L="NaN"),L!=="number"?[new jt(u,m,`number expected, ${L} found`)]:"minimum"in S&&m<S.minimum?[new jt(u,m,`${m} is less than the minimum value ${S.minimum}`)]:"maximum"in S&&m>S.maximum?[new jt(u,m,`${m} is greater than the maximum value ${S.maximum}`)]:[]}function is(g){const u=g.valueSpec,m=Ro(g.value.type);let S,L,j,V={};const J=m!=="categorical"&&g.value.property===void 0,oe=!J,de=hi(g.value.stops)==="array"&&hi(g.value.stops[0])==="array"&&hi(g.value.stops[0][0])==="object",be=Zl({key:g.key,value:g.value,valueSpec:g.styleSpec.function,validateSpec:g.validateSpec,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{stops:function(Je){if(m==="identity")return[new jt(Je.key,Je.value,'identity function may not have a "stops" property')];let tt=[];const ct=Je.value;return tt=tt.concat(Tf({key:Je.key,value:ct,valueSpec:Je.valueSpec,validateSpec:Je.validateSpec,style:Je.style,styleSpec:Je.styleSpec,arrayElementValidator:Le})),hi(ct)==="array"&&ct.length===0&&tt.push(new jt(Je.key,ct,"array must have at least one stop")),tt},default:function(Je){return Je.validateSpec({key:Je.key,value:Je.value,valueSpec:u,validateSpec:Je.validateSpec,style:Je.style,styleSpec:Je.styleSpec})}}});return m==="identity"&&J&&be.push(new jt(g.key,g.value,'missing required property "property"')),m==="identity"||g.value.stops||be.push(new jt(g.key,g.value,'missing required property "stops"')),m==="exponential"&&g.valueSpec.expression&&!Fi(g.valueSpec)&&be.push(new jt(g.key,g.value,"exponential functions not supported")),g.styleSpec.$version>=8&&(oe&&!si(g.valueSpec)?be.push(new jt(g.key,g.value,"property functions not supported")):J&&!ci(g.valueSpec)&&be.push(new jt(g.key,g.value,"zoom functions not supported"))),m!=="categorical"&&!de||g.value.property!==void 0||be.push(new jt(g.key,g.value,'"property" property is required')),be;function Le(Je){let tt=[];const ct=Je.value,Rt=Je.key;if(hi(ct)!=="array")return[new jt(Rt,ct,`array expected, ${hi(ct)} found`)];if(ct.length!==2)return[new jt(Rt,ct,`array length 2 expected, length ${ct.length} found`)];if(de){if(hi(ct[0])!=="object")return[new jt(Rt,ct,`object expected, ${hi(ct[0])} found`)];if(ct[0].zoom===void 0)return[new jt(Rt,ct,"object stop key must have zoom")];if(ct[0].value===void 0)return[new jt(Rt,ct,"object stop key must have value")];if(j&&j>Ro(ct[0].zoom))return[new jt(Rt,ct[0].zoom,"stop zoom values must appear in ascending order")];Ro(ct[0].zoom)!==j&&(j=Ro(ct[0].zoom),L=void 0,V={}),tt=tt.concat(Zl({key:`${Rt}[0]`,value:ct[0],valueSpec:{zoom:{}},validateSpec:Je.validateSpec,style:Je.style,styleSpec:Je.styleSpec,objectElementValidators:{zoom:Ms,value:$e}}))}else tt=tt.concat($e({key:`${Rt}[0]`,value:ct[0],validateSpec:Je.validateSpec,style:Je.style,styleSpec:Je.styleSpec},ct));return Js(Yh(ct[1]))?tt.concat([new jt(`${Rt}[1]`,ct[1],"expressions are not allowed in function stops.")]):tt.concat(Je.validateSpec({key:`${Rt}[1]`,value:ct[1],valueSpec:u,validateSpec:Je.validateSpec,style:Je.style,styleSpec:Je.styleSpec}))}function $e(Je,tt){const ct=hi(Je.value),Rt=Ro(Je.value),Ht=Je.value!==null?Je.value:tt;if(S){if(ct!==S)return[new jt(Je.key,Ht,`${ct} stop domain type must match previous stop domain type ${S}`)]}else S=ct;if(ct!=="number"&&ct!=="string"&&ct!=="boolean")return[new jt(Je.key,Ht,"stop domain value must be a number, string, or boolean")];if(ct!=="number"&&m!=="categorical"){let fn=`number expected, ${ct} found`;return si(u)&&m===void 0&&(fn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new jt(Je.key,Ht,fn)]}return m!=="categorical"||ct!=="number"||isFinite(Rt)&&Math.floor(Rt)===Rt?m!=="categorical"&&ct==="number"&&L!==void 0&&Rt<L?[new jt(Je.key,Ht,"stop domain values must appear in ascending order")]:(L=Rt,m==="categorical"&&Rt in V?[new jt(Je.key,Ht,"stop domain values must be unique")]:(V[Rt]=!0,[])):[new jt(Je.key,Ht,`integer expected, found ${Rt}`)]}}function Ra(g){const u=(g.expressionContext==="property"?Xc:So)(Yh(g.value),g.valueSpec);if(u.result==="error")return u.value.map(S=>new jt(`${g.key}${S.key}`,g.value,S.message));const m=u.value.expression||u.value._styleExpression.expression;if(g.expressionContext==="property"&&g.propertyKey==="text-font"&&!m.outputDefined())return[new jt(g.key,g.value,`Invalid data expression for "${g.propertyKey}". Output values must be contained as literals within the expression.`)];if(g.expressionContext==="property"&&g.propertyType==="layout"&&!dr(m))return[new jt(g.key,g.value,'"feature-state" data expressions are not supported with layout properties.')];if(g.expressionContext==="filter"&&!dr(m))return[new jt(g.key,g.value,'"feature-state" data expressions are not supported with filters.')];if(g.expressionContext&&g.expressionContext.indexOf("cluster")===0){if(!$r(m,["zoom","feature-state"]))return[new jt(g.key,g.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(g.expressionContext==="cluster-initial"&&!Nn(m))return[new jt(g.key,g.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function uc(g){const u=g.key,m=g.value,S=g.valueSpec,L=[];return Array.isArray(S.values)?S.values.indexOf(Ro(m))===-1&&L.push(new jt(u,m,`expected one of [${S.values.join(", ")}], ${JSON.stringify(m)} found`)):Object.keys(S.values).indexOf(Ro(m))===-1&&L.push(new jt(u,m,`expected one of [${Object.keys(S.values).join(", ")}], ${JSON.stringify(m)} found`)),L}function qu(g){return Yc(Yh(g.value))?Ra(Pe({},g,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zd(g)}function zd(g){const u=g.value,m=g.key;if(hi(u)!=="array")return[new jt(m,u,`array expected, ${hi(u)} found`)];const S=g.styleSpec;let L,j=[];if(u.length<1)return[new jt(m,u,"filter array must have at least 1 element")];switch(j=j.concat(uc({key:`${m}[0]`,value:u[0],valueSpec:S.filter_operator,style:g.style,styleSpec:g.styleSpec})),Ro(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Ro(u[1])==="$type"&&j.push(new jt(m,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&j.push(new jt(m,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(L=hi(u[1]),L!=="string"&&j.push(new jt(`${m}[1]`,u[1],`string expected, ${L} found`)));for(let V=2;V<u.length;V++)L=hi(u[V]),Ro(u[1])==="$type"?j=j.concat(uc({key:`${m}[${V}]`,value:u[V],valueSpec:S.geometry_type,style:g.style,styleSpec:g.styleSpec})):L!=="string"&&L!=="number"&&L!=="boolean"&&j.push(new jt(`${m}[${V}]`,u[V],`string, number, or boolean expected, ${L} found`));break;case"any":case"all":case"none":for(let V=1;V<u.length;V++)j=j.concat(zd({key:`${m}[${V}]`,value:u[V],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":L=hi(u[1]),u.length!==2?j.push(new jt(m,u,`filter array for "${u[0]}" operator must have 2 elements`)):L!=="string"&&j.push(new jt(`${m}[1]`,u[1],`string expected, ${L} found`))}return j}function Zh(g,u){const m=g.key,S=g.validateSpec,L=g.style,j=g.styleSpec,V=g.value,J=g.objectKey,oe=j[`${u}_${g.layerType}`];if(!oe)return[];const de=J.match(/^(.*)-transition$/);if(u==="paint"&&de&&oe[de[1]]&&oe[de[1]].transition)return S({key:m,value:V,valueSpec:j.transition,style:L,styleSpec:j});const be=g.valueSpec||oe[J];if(!be)return[new jt(m,V,`unknown property "${J}"`)];let Le;if(hi(V)==="string"&&si(be)&&!be.tokens&&(Le=/^{([^}]+)}$/.exec(V)))return[new jt(m,V,`"${J}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Le[1])} }\`.`)];const $e=[];return g.layerType==="symbol"&&(J==="text-field"&&L&&!L.glyphs&&$e.push(new jt(m,V,'use of "text-field" requires a style "glyphs" property')),J==="text-font"&&Ii(Yh(V))&&Ro(V.type)==="identity"&&$e.push(new jt(m,V,'"text-font" does not support identity functions'))),$e.concat(S({key:g.key,value:V,valueSpec:be,style:L,styleSpec:j,expressionContext:"property",propertyType:u,propertyKey:J}))}function Pp(g){return Zh(g,"paint")}function Mc(g){return Zh(g,"layout")}function Qs(g){let u=[];const m=g.value,S=g.key,L=g.style,j=g.styleSpec;m.type||m.ref||u.push(new jt(S,m,'either "type" or "ref" is required'));let V=Ro(m.type);const J=Ro(m.ref);if(m.id){const oe=Ro(m.id);for(let de=0;de<g.arrayIndex;de++){const be=L.layers[de];Ro(be.id)===oe&&u.push(new jt(S,m.id,`duplicate layer id "${m.id}", previously used at line ${be.id.__line__}`))}}if("ref"in m){let oe;["type","source","source-layer","filter","layout"].forEach(de=>{de in m&&u.push(new jt(S,m[de],`"${de}" is prohibited for ref layers`))}),L.layers.forEach(de=>{Ro(de.id)===J&&(oe=de)}),oe?oe.ref?u.push(new jt(S,m.ref,"ref cannot reference another ref layer")):V=Ro(oe.type):u.push(new jt(S,m.ref,`ref layer "${J}" not found`))}else if(V!=="background")if(m.source){const oe=L.sources&&L.sources[m.source],de=oe&&Ro(oe.type);oe?de==="vector"&&V==="raster"?u.push(new jt(S,m.source,`layer "${m.id}" requires a raster source`)):de!=="raster-dem"&&V==="hillshade"?u.push(new jt(S,m.source,`layer "${m.id}" requires a raster-dem source`)):de==="raster"&&V!=="raster"?u.push(new jt(S,m.source,`layer "${m.id}" requires a vector source`)):de!=="vector"||m["source-layer"]?de==="raster-dem"&&V!=="hillshade"?u.push(new jt(S,m.source,"raster-dem source can only be used with layer type 'hillshade'.")):V!=="line"||!m.paint||!m.paint["line-gradient"]||de==="geojson"&&oe.lineMetrics||u.push(new jt(S,m,`layer "${m.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new jt(S,m,`layer "${m.id}" must specify a "source-layer"`)):u.push(new jt(S,m.source,`source "${m.source}" not found`))}else u.push(new jt(S,m,'missing required property "source"'));return u=u.concat(Zl({key:S,value:m,valueSpec:j.layer,style:g.style,styleSpec:g.styleSpec,validateSpec:g.validateSpec,objectElementValidators:{"*":()=>[],type:()=>g.validateSpec({key:`${S}.type`,value:m.type,valueSpec:j.layer.type,style:g.style,styleSpec:g.styleSpec,validateSpec:g.validateSpec,object:m,objectKey:"type"}),filter:qu,layout:oe=>Zl({layer:m,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,validateSpec:oe.validateSpec,objectElementValidators:{"*":de=>Mc(Pe({layerType:V},de))}}),paint:oe=>Zl({layer:m,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,validateSpec:oe.validateSpec,objectElementValidators:{"*":de=>Pp(Pe({layerType:V},de))}})}})),u}function hl(g){const u=g.value,m=g.key,S=hi(u);return S!=="string"?[new jt(m,u,`string expected, ${S} found`)]:[]}const bg={promoteId:function({key:g,value:u}){if(hi(u)==="string")return hl({key:g,value:u});{const m=[];for(const S in u)m.push(...hl({key:`${g}.${S}`,value:u[S]}));return m}}};function Cf(g){const u=g.value,m=g.key,S=g.styleSpec,L=g.style,j=g.validateSpec;if(!u.type)return[new jt(m,u,'"type" is required')];const V=Ro(u.type);let J;switch(V){case"vector":case"raster":return J=Zl({key:m,value:u,valueSpec:S[`source_${V.replace("-","_")}`],style:g.style,styleSpec:S,objectElementValidators:bg,validateSpec:j}),J;case"raster-dem":return J=function(oe){var de;const be=(de=oe.sourceName)!==null&&de!==void 0?de:"",Le=oe.value,$e=oe.styleSpec,Je=$e.source_raster_dem,tt=oe.style;let ct=[];const Rt=hi(Le);if(Le===void 0)return ct;if(Rt!=="object")return ct.push(new jt("source_raster_dem",Le,`object expected, ${Rt} found`)),ct;const Ht=Ro(Le.encoding)==="custom",fn=["redFactor","greenFactor","blueFactor","baseShift"],Kt=oe.value.encoding?`"${oe.value.encoding}"`:"Default";for(const Ke in Le)!Ht&&fn.includes(Ke)?ct.push(new jt(Ke,Le[Ke],`In "${be}": "${Ke}" is only valid when "encoding" is set to "custom". ${Kt} encoding found`)):Je[Ke]?ct=ct.concat(oe.validateSpec({key:Ke,value:Le[Ke],valueSpec:Je[Ke],validateSpec:oe.validateSpec,style:tt,styleSpec:$e})):ct.push(new jt(Ke,Le[Ke],`unknown property "${Ke}"`));return ct}({sourceName:m,value:u,style:g.style,styleSpec:S,validateSpec:j}),J;case"geojson":if(J=Zl({key:m,value:u,valueSpec:S.source_geojson,style:L,styleSpec:S,validateSpec:j,objectElementValidators:bg}),u.cluster)for(const oe in u.clusterProperties){const[de,be]=u.clusterProperties[oe],Le=typeof de=="string"?[de,["accumulated"],["get",oe]]:de;J.push(...Ra({key:`${m}.${oe}.map`,value:be,expressionContext:"cluster-map"})),J.push(...Ra({key:`${m}.${oe}.reduce`,value:Le,expressionContext:"cluster-reduce"}))}return J;case"video":return Zl({key:m,value:u,valueSpec:S.source_video,style:L,validateSpec:j,styleSpec:S});case"image":return Zl({key:m,value:u,valueSpec:S.source_image,style:L,validateSpec:j,styleSpec:S});case"canvas":return[new jt(m,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return uc({key:`${m}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ac(g){const u=g.value,m=g.styleSpec,S=m.light,L=g.style;let j=[];const V=hi(u);if(u===void 0)return j;if(V!=="object")return j=j.concat([new jt("light",u,`object expected, ${V} found`)]),j;for(const J in u){const oe=J.match(/^(.*)-transition$/);j=j.concat(oe&&S[oe[1]]&&S[oe[1]].transition?g.validateSpec({key:J,value:u[J],valueSpec:m.transition,validateSpec:g.validateSpec,style:L,styleSpec:m}):S[J]?g.validateSpec({key:J,value:u[J],valueSpec:S[J],validateSpec:g.validateSpec,style:L,styleSpec:m}):[new jt(J,u[J],`unknown property "${J}"`)])}return j}function fl(g){const u=g.value,m=g.styleSpec,S=m.sky,L=g.style,j=hi(u);if(u===void 0)return[];if(j!=="object")return[new jt("sky",u,`object expected, ${j} found`)];let V=[];for(const J in u)V=V.concat(S[J]?g.validateSpec({key:J,value:u[J],valueSpec:S[J],style:L,styleSpec:m}):[new jt(J,u[J],`unknown property "${J}"`)]);return V}function Jc(g){const u=g.value,m=g.styleSpec,S=m.terrain,L=g.style;let j=[];const V=hi(u);if(u===void 0)return j;if(V!=="object")return j=j.concat([new jt("terrain",u,`object expected, ${V} found`)]),j;for(const J in u)j=j.concat(S[J]?g.validateSpec({key:J,value:u[J],valueSpec:S[J],validateSpec:g.validateSpec,style:L,styleSpec:m}):[new jt(J,u[J],`unknown property "${J}"`)]);return j}function $u(g){let u=[];const m=g.value,S=g.key;if(Array.isArray(m)){const L=[],j=[];for(const V in m)m[V].id&&L.includes(m[V].id)&&u.push(new jt(S,m,`all the sprites' ids must be unique, but ${m[V].id} is duplicated`)),L.push(m[V].id),m[V].url&&j.includes(m[V].url)&&u.push(new jt(S,m,`all the sprites' URLs must be unique, but ${m[V].url} is duplicated`)),j.push(m[V].url),u=u.concat(Zl({key:`${S}[${V}]`,value:m[V],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:g.validateSpec}));return u}return hl({key:S,value:m})}const lu={"*":()=>[],array:Tf,boolean:function(g){const u=g.value,m=g.key,S=hi(u);return S!=="boolean"?[new jt(m,u,`boolean expected, ${S} found`)]:[]},number:Ms,color:function(g){const u=g.key,m=g.value,S=hi(m);return S!=="string"?[new jt(u,m,`color expected, ${S} found`)]:et.parse(String(m))?[]:[new jt(u,m,`color expected, "${m}" found`)]},constants:Kc,enum:uc,filter:qu,function:is,layer:Qs,object:Zl,source:Cf,light:Ac,sky:fl,terrain:Jc,projection:function(g){const u=g.value,m=g.styleSpec,S=m.projection,L=g.style,j=hi(u);if(u===void 0)return[];if(j!=="object")return[new jt("projection",u,`object expected, ${j} found`)];let V=[];for(const J in u)V=V.concat(S[J]?g.validateSpec({key:J,value:u[J],valueSpec:S[J],style:L,styleSpec:m}):[new jt(J,u[J],`unknown property "${J}"`)]);return V},projectionDefinition:function(g){const u=g.key;let m=g.value;m=m instanceof String?m.valueOf():m;const S=hi(m);return S!=="array"||function(L){return Array.isArray(L)&&L.length===3&&typeof L[0]=="string"&&typeof L[1]=="string"&&typeof L[2]=="number"}(m)||function(L){return!!["interpolate","step","literal"].includes(L[0])}(m)?["array","string"].includes(S)?[]:[new jt(u,m,`projection expected, invalid type "${S}" found`)]:[new jt(u,m,`projection expected, invalid array ${JSON.stringify(m)} found`)]},string:hl,formatted:function(g){return hl(g).length===0?[]:Ra(g)},resolvedImage:function(g){return hl(g).length===0?[]:Ra(g)},padding:function(g){const u=g.key,m=g.value;if(hi(m)==="array"){if(m.length<1||m.length>4)return[new jt(u,m,`padding requires 1 to 4 values; ${m.length} values found`)];const S={type:"number"};let L=[];for(let j=0;j<m.length;j++)L=L.concat(g.validateSpec({key:`${u}[${j}]`,value:m[j],validateSpec:g.validateSpec,valueSpec:S}));return L}return Ms({key:u,value:m,valueSpec:{}})},variableAnchorOffsetCollection:function(g){const u=g.key,m=g.value,S=hi(m),L=g.styleSpec;if(S!=="array"||m.length<1||m.length%2!=0)return[new jt(u,m,"variableAnchorOffsetCollection requires a non-empty array of even length")];let j=[];for(let V=0;V<m.length;V+=2)j=j.concat(uc({key:`${u}[${V}]`,value:m[V],valueSpec:L.layout_symbol["text-anchor"]})),j=j.concat(Tf({key:`${u}[${V+1}]`,value:m[V+1],valueSpec:{length:2,value:"number"},validateSpec:g.validateSpec,style:g.style,styleSpec:L}));return j},sprite:$u};function dl(g){const u=g.value,m=g.valueSpec,S=g.styleSpec;return g.validateSpec=dl,m.expression&&Ii(Ro(u))?is(g):m.expression&&Js(Yh(u))?Ra(g):m.type&&lu[m.type]?lu[m.type](g):Zl(Pe({},g,{valueSpec:m.type?S[m.type]:m}))}function Ch(g){const u=g.value,m=g.key,S=hl(g);return S.length||(u.indexOf("{fontstack}")===-1&&S.push(new jt(m,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&S.push(new jt(m,u,'"glyphs" url must include a "{range}" token'))),S}function Ol(g,u=Fe){let m=[];return m=m.concat(dl({key:"",value:g,valueSpec:u.$root,styleSpec:u,style:g,validateSpec:dl,objectElementValidators:{glyphs:Ch,"*":()=>[]}})),g.constants&&(m=m.concat(Kc({key:"constants",value:g.constants}))),Rc(m)}function Wu(g){return function(u){return g({...u,validateSpec:dl})}}function Rc(g){return[].concat(g).sort((u,m)=>u.line-m.line)}function ao(g){return function(...u){return Rc(g.apply(this,u))}}Ol.source=ao(Wu(Cf)),Ol.sprite=ao(Wu($u)),Ol.glyphs=ao(Wu(Ch)),Ol.light=ao(Wu(Ac)),Ol.sky=ao(Wu(fl)),Ol.terrain=ao(Wu(Jc)),Ol.layer=ao(Wu(Qs)),Ol.filter=ao(Wu(qu)),Ol.paintProperty=ao(Wu(Pp)),Ol.layoutProperty=ao(Wu(Mc));const Au=Ol,id=Au.light,Vv=Au.sky,Ip=Au.paintProperty,Hv=Au.layoutProperty;function as(g,u){let m=!1;if(u&&u.length)for(const S of u)g.fire(new ze(new Error(S.message))),m=!0;return m}class Mf{constructor(u,m,S){const L=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const V=new Int32Array(this.arrayBuffer);u=V[0],this.d=(m=V[1])+2*(S=V[2]);for(let oe=0;oe<this.d*this.d;oe++){const de=V[3+oe],be=V[3+oe+1];L.push(de===be?null:V.subarray(de,be))}const J=V[3+L.length+1];this.keys=V.subarray(V[3+L.length],J),this.bboxes=V.subarray(J),this.insert=this._insertReadonly}else{this.d=m+2*S;for(let V=0;V<this.d*this.d;V++)L.push([]);this.keys=[],this.bboxes=[]}this.n=m,this.extent=u,this.padding=S,this.scale=m/u,this.uid=0;const j=S/m*u;this.min=-j,this.max=u+j}insert(u,m,S,L,j){this._forEachCell(m,S,L,j,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(m),this.bboxes.push(S),this.bboxes.push(L),this.bboxes.push(j)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,m,S,L,j,V){this.cells[j].push(V)}query(u,m,S,L,j){const V=this.min,J=this.max;if(u<=V&&m<=V&&J<=S&&J<=L&&!j)return Array.prototype.slice.call(this.keys);{const oe=[];return this._forEachCell(u,m,S,L,this._queryCell,oe,{},j),oe}}_queryCell(u,m,S,L,j,V,J,oe){const de=this.cells[j];if(de!==null){const be=this.keys,Le=this.bboxes;for(let $e=0;$e<de.length;$e++){const Je=de[$e];if(J[Je]===void 0){const tt=4*Je;(oe?oe(Le[tt+0],Le[tt+1],Le[tt+2],Le[tt+3]):u<=Le[tt+2]&&m<=Le[tt+3]&&S>=Le[tt+0]&&L>=Le[tt+1])?(J[Je]=!0,V.push(be[Je])):J[Je]=!1}}}}_forEachCell(u,m,S,L,j,V,J,oe){const de=this._convertToCellCoord(u),be=this._convertToCellCoord(m),Le=this._convertToCellCoord(S),$e=this._convertToCellCoord(L);for(let Je=de;Je<=Le;Je++)for(let tt=be;tt<=$e;tt++){const ct=this.d*tt+Je;if((!oe||oe(this._convertFromCellCoord(Je),this._convertFromCellCoord(tt),this._convertFromCellCoord(Je+1),this._convertFromCellCoord(tt+1)))&&j.call(this,u,m,S,L,ct,V,J,oe))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,m=3+this.cells.length+1+1;let S=0;for(let V=0;V<this.cells.length;V++)S+=this.cells[V].length;const L=new Int32Array(m+S+this.keys.length+this.bboxes.length);L[0]=this.extent,L[1]=this.n,L[2]=this.padding;let j=m;for(let V=0;V<u.length;V++){const J=u[V];L[3+V]=j,L.set(J,j),j+=J.length}return L[3+u.length]=j,L.set(this.keys,j),j+=this.keys.length,L[3+u.length+1]=j,L.set(this.bboxes,j),j+=this.bboxes.length,L.buffer}static serialize(u,m){const S=u.toArrayBuffer();return m&&m.push(S),{buffer:S}}static deserialize(u){return new Mf(u.buffer)}}const Fl={};function ei(g,u,m={}){if(Fl[g])throw new Error(`${g} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:g,writeable:!1}),Fl[g]={klass:u,omit:m.omit||[],shallow:m.shallow||[]}}ei("Object",Object),ei("TransferableGridIndex",Mf),ei("Color",et),ei("Error",Error),ei("AJAXError",cn),ei("ResolvedImage",Nr),ei("StylePropertyFunction",wl),ei("StyleExpression",ou,{omit:["_evaluator"]}),ei("ZoomDependentExpression",ps),ei("ZoomConstantExpression",cl),ei("CompoundExpression",le,{omit:["_evaluate"]});for(const g in Z)Z[g]._classRegistryKey||ei(`Expression_${g}`,Z[g]);function Dp(g){return g&&typeof ArrayBuffer<"u"&&(g instanceof ArrayBuffer||g.constructor&&g.constructor.name==="ArrayBuffer")}function cc(g){return g.$name||g.constructor._classRegistryKey}function Qc(g){return!function(u){if(u===null||typeof u!="object")return!1;const m=cc(u);return!(!m||m==="Object")}(g)&&(g==null||typeof g=="boolean"||typeof g=="number"||typeof g=="string"||g instanceof Boolean||g instanceof Number||g instanceof String||g instanceof Date||g instanceof RegExp||g instanceof Blob||g instanceof Error||Dp(g)||yt(g)||ArrayBuffer.isView(g)||g instanceof ImageData)}function Af(g,u){if(Qc(g))return(Dp(g)||yt(g))&&u&&u.push(g),ArrayBuffer.isView(g)&&u&&u.push(g.buffer),g instanceof ImageData&&u&&u.push(g.data.buffer),g;if(Array.isArray(g)){const j=[];for(const V of g)j.push(Af(V,u));return j}if(typeof g!="object")throw new Error("can't serialize object of type "+typeof g);const m=cc(g);if(!m)throw new Error(`can't serialize object of unregistered class ${g.constructor.name}`);if(!Fl[m])throw new Error(`${m} is not registered.`);const{klass:S}=Fl[m],L=S.serialize?S.serialize(g,u):{};if(S.serialize){if(u&&L===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const j in g){if(!g.hasOwnProperty(j)||Fl[m].omit.indexOf(j)>=0)continue;const V=g[j];L[j]=Fl[m].shallow.indexOf(j)>=0?V:Af(V,u)}g instanceof Error&&(L.message=g.message)}if(L.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(L.$name=m),L}function Mh(g){if(Qc(g))return g;if(Array.isArray(g))return g.map(Mh);if(typeof g!="object")throw new Error("can't deserialize object of type "+typeof g);const u=cc(g)||"Object";if(!Fl[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:m}=Fl[u];if(!m)throw new Error(`can't deserialize unregistered class ${u}`);if(m.deserialize)return m.deserialize(g);const S=Object.create(m.prototype);for(const L of Object.keys(g)){if(L==="$name")continue;const j=g[L];S[L]=Fl[u].shallow.indexOf(L)>=0?j:Mh(j)}return S}class Lp{constructor(){this.first=!0}update(u,m){const S=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=S,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=S,!0):(this.lastFloorZoom>S?(this.lastIntegerZoom=S+1,this.lastIntegerZoomTime=m):this.lastFloorZoom<S&&(this.lastIntegerZoom=S,this.lastIntegerZoomTime=m),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=S,!0))}}const q={"Latin-1 Supplement":g=>g>=128&&g<=255,"Hangul Jamo":g=>g>=4352&&g<=4607,Khmer:g=>g>=6016&&g<=6143,"General Punctuation":g=>g>=8192&&g<=8303,"Letterlike Symbols":g=>g>=8448&&g<=8527,"Number Forms":g=>g>=8528&&g<=8591,"Miscellaneous Technical":g=>g>=8960&&g<=9215,"Control Pictures":g=>g>=9216&&g<=9279,"Optical Character Recognition":g=>g>=9280&&g<=9311,"Enclosed Alphanumerics":g=>g>=9312&&g<=9471,"Geometric Shapes":g=>g>=9632&&g<=9727,"Miscellaneous Symbols":g=>g>=9728&&g<=9983,"Miscellaneous Symbols and Arrows":g=>g>=11008&&g<=11263,"Ideographic Description Characters":g=>g>=12272&&g<=12287,"CJK Symbols and Punctuation":g=>g>=12288&&g<=12351,Hiragana:g=>g>=12352&&g<=12447,Katakana:g=>g>=12448&&g<=12543,Kanbun:g=>g>=12688&&g<=12703,"CJK Strokes":g=>g>=12736&&g<=12783,"Enclosed CJK Letters and Months":g=>g>=12800&&g<=13055,"CJK Compatibility":g=>g>=13056&&g<=13311,"Yijing Hexagram Symbols":g=>g>=19904&&g<=19967,"CJK Unified Ideographs":g=>g>=19968&&g<=40959,"Hangul Syllables":g=>g>=44032&&g<=55215,"Private Use Area":g=>g>=57344&&g<=63743,"Vertical Forms":g=>g>=65040&&g<=65055,"CJK Compatibility Forms":g=>g>=65072&&g<=65103,"Small Form Variants":g=>g>=65104&&g<=65135,"Halfwidth and Fullwidth Forms":g=>g>=65280&&g<=65519};function te(g){for(const u of g)if(bt(u.charCodeAt(0)))return!0;return!1}function _e(g){for(const u of g)if(!gt(u.charCodeAt(0)))return!1;return!0}function Oe(g){const u=g.map(m=>{try{return new RegExp(`\\p{sc=${m}}`,"u").source}catch{return null}}).filter(m=>m);return new RegExp(u.join("|"),"u")}const at=Oe(["Arab","Dupl","Mong","Ougr","Syrc"]);function gt(g){return!at.test(String.fromCodePoint(g))}const vt=Oe(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function bt(g){return!(g!==746&&g!==747&&(g<4352||!(q["CJK Compatibility Forms"](g)&&!(g>=65097&&g<=65103)||q["CJK Compatibility"](g)||q["CJK Strokes"](g)||!(!q["CJK Symbols and Punctuation"](g)||g>=12296&&g<=12305||g>=12308&&g<=12319||g===12336)||q["Enclosed CJK Letters and Months"](g)||q["Ideographic Description Characters"](g)||q.Kanbun(g)||q.Katakana(g)&&g!==12540||!(!q["Halfwidth and Fullwidth Forms"](g)||g===65288||g===65289||g===65293||g>=65306&&g<=65310||g===65339||g===65341||g===65343||g>=65371&&g<=65503||g===65507||g>=65512&&g<=65519)||!(!q["Small Form Variants"](g)||g>=65112&&g<=65118||g>=65123&&g<=65126)||q["Vertical Forms"](g)||q["Yijing Hexagram Symbols"](g)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(g))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(g))||vt.test(String.fromCodePoint(g)))))}function Mt(g){return!(bt(g)||function(u){return!!(q["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||q["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||q["Letterlike Symbols"](u)||q["Number Forms"](u)||q["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||q["Control Pictures"](u)&&u!==9251||q["Optical Character Recognition"](u)||q["Enclosed Alphanumerics"](u)||q["Geometric Shapes"](u)||q["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||q["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||q["CJK Symbols and Punctuation"](u)||q.Katakana(u)||q["Private Use Area"](u)||q["CJK Compatibility Forms"](u)||q["Small Form Variants"](u)||q["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(g))}const Vt=Oe(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function vn(g){return Vt.test(String.fromCodePoint(g))}function Hn(g,u){return!(!u&&vn(g)||g>=2304&&g<=3583||g>=3840&&g<=4255||q.Khmer(g))}function Gn(g){for(const u of g)if(vn(u.charCodeAt(0)))return!0;return!1}const Rn=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(g){this.pluginStatus=g.pluginStatus,this.pluginURL=g.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(g){if(Rn.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=g.applyArabicShaping,this.processBidirectionalText=g.processBidirectionalText,this.processStyledBidirectionalText=g.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(g,u){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(g.pluginStatus!=="loading")return this.setState(g),g;const m=g.pluginURL,S=new Promise(j=>{this.loadScriptResolve=j});u(m);const L=new Promise(j=>setTimeout(()=>j(),this.TIMEOUT));if(yield Promise.race([S,L]),this.isParsed()){const j={pluginStatus:"loaded",pluginURL:m};return this.setState(j),j}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${m}`)})}};class ar{constructor(u,m){this.zoom=u,m?(this.now=m.now,this.fadeDuration=m.fadeDuration,this.zoomHistory=m.zoomHistory,this.transition=m.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Lp,this.transition={})}isSupportedScript(u){return function(m,S){for(const L of m)if(!Hn(L.charCodeAt(0),S))return!1;return!0}(u,Rn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,m=u-Math.floor(u),S=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:m+(1-m)*S}:{fromScale:.5,toScale:1,t:1-(1-S)*m}}}class Jn{constructor(u,m){this.property=u,this.value=m,this.expression=function(S,L){if(Ii(S))return new wl(S,L);if(Js(S)){const j=Xc(S,L);if(j.result==="error")throw new Error(j.value.map(V=>`${V.key}: ${V.message}`).join(", "));return j.value}{let j=S;return L.type==="color"&&typeof S=="string"?j=et.parse(S):L.type!=="padding"||typeof S!="number"&&!Array.isArray(S)?L.type==="variableAnchorOffsetCollection"&&Array.isArray(S)?j=Ir.parse(S):L.type==="projectionDefinition"&&typeof S=="string"&&(j=Wr.parse(S)):j=cr.parse(S),{kind:"constant",evaluate:()=>j}}}(m===void 0?u.specification.default:m,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,m,S){return this.property.possiblyEvaluate(this,u,m,S)}}class _n{constructor(u){this.property=u,this.value=new Jn(u,void 0)}transitioned(u,m){return new gr(this.property,this.value,m,Ee({},u.transition,this.transition),u.now)}untransitioned(){return new gr(this.property,this.value,null,{},0)}}class Cn{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return ut(this._values[u].value.value)}setValue(u,m){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new _n(this._values[u].property)),this._values[u].value=new Jn(this._values[u].property,m===null?void 0:ut(m))}getTransition(u){return ut(this._values[u].transition)}setTransition(u,m){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new _n(this._values[u].property)),this._values[u].transition=ut(m)||void 0}serialize(){const u={};for(const m of Object.keys(this._values)){const S=this.getValue(m);S!==void 0&&(u[m]=S);const L=this.getTransition(m);L!==void 0&&(u[`${m}-transition`]=L)}return u}transitioned(u,m){const S=new Ar(this._properties);for(const L of Object.keys(this._values))S._values[L]=this._values[L].transitioned(u,m._values[L]);return S}untransitioned(){const u=new Ar(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].untransitioned();return u}}class gr{constructor(u,m,S,L,j){this.property=u,this.value=m,this.begin=j+L.delay||0,this.end=this.begin+L.duration||0,u.specification.transition&&(L.delay||L.duration)&&(this.prior=S)}possiblyEvaluate(u,m,S){const L=u.now||0,j=this.value.possiblyEvaluate(u,m,S),V=this.prior;if(V){if(L>this.end)return this.prior=null,j;if(this.value.isDataDriven())return this.prior=null,j;if(L<this.begin)return V.possiblyEvaluate(u,m,S);{const J=(L-this.begin)/(this.end-this.begin);return this.property.interpolate(V.possiblyEvaluate(u,m,S),j,pe(J))}}return j}}class Ar{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,m,S){const L=new Zr(this._properties);for(const j of Object.keys(this._values))L._values[j]=this._values[j].possiblyEvaluate(u,m,S);return L}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class Er{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return ut(this._values[u].value)}setValue(u,m){this._values[u]=new Jn(this._values[u].property,m===null?void 0:ut(m))}serialize(){const u={};for(const m of Object.keys(this._values)){const S=this.getValue(m);S!==void 0&&(u[m]=S)}return u}possiblyEvaluate(u,m,S){const L=new Zr(this._properties);for(const j of Object.keys(this._values))L._values[j]=this._values[j].possiblyEvaluate(u,m,S);return L}}class ti{constructor(u,m,S){this.property=u,this.value=m,this.parameters=S}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,m,S,L){return this.property.evaluate(this.value,this.parameters,u,m,S,L)}}class Zr{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class yr{constructor(u){this.specification=u}possiblyEvaluate(u,m){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(m)}interpolate(u,m,S){const L=ns[this.specification.type];return L?L(u,m,S):u}}class or{constructor(u,m){this.specification=u,this.overrides=m}possiblyEvaluate(u,m,S,L){return new ti(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(m,null,{},S,L)}:u.expression,m)}interpolate(u,m,S){if(u.value.kind!=="constant"||m.value.kind!=="constant")return u;if(u.value.value===void 0||m.value.value===void 0)return new ti(this,{kind:"constant",value:void 0},u.parameters);const L=ns[this.specification.type];if(L){const j=L(u.value.value,m.value.value,S);return new ti(this,{kind:"constant",value:j},u.parameters)}return u}evaluate(u,m,S,L,j,V){return u.kind==="constant"?u.value:u.evaluate(m,S,L,j,V)}}class Ga extends or{possiblyEvaluate(u,m,S,L){if(u.value===void 0)return new ti(this,{kind:"constant",value:void 0},m);if(u.expression.kind==="constant"){const j=u.expression.evaluate(m,null,{},S,L),V=u.property.specification.type==="resolvedImage"&&typeof j!="string"?j.name:j,J=this._calculate(V,V,V,m);return new ti(this,{kind:"constant",value:J},m)}if(u.expression.kind==="camera"){const j=this._calculate(u.expression.evaluate({zoom:m.zoom-1}),u.expression.evaluate({zoom:m.zoom}),u.expression.evaluate({zoom:m.zoom+1}),m);return new ti(this,{kind:"constant",value:j},m)}return new ti(this,u.expression,m)}evaluate(u,m,S,L,j,V){if(u.kind==="source"){const J=u.evaluate(m,S,L,j,V);return this._calculate(J,J,J,m)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(m.zoom)-1},S,L),u.evaluate({zoom:Math.floor(m.zoom)},S,L),u.evaluate({zoom:Math.floor(m.zoom)+1},S,L),m):u.value}_calculate(u,m,S,L){return L.zoom>L.zoomHistory.lastIntegerZoom?{from:u,to:m}:{from:S,to:m}}interpolate(u){return u}}class oo{constructor(u){this.specification=u}possiblyEvaluate(u,m,S,L){if(u.value!==void 0){if(u.expression.kind==="constant"){const j=u.expression.evaluate(m,null,{},S,L);return this._calculate(j,j,j,m)}return this._calculate(u.expression.evaluate(new ar(Math.floor(m.zoom-1),m)),u.expression.evaluate(new ar(Math.floor(m.zoom),m)),u.expression.evaluate(new ar(Math.floor(m.zoom+1),m)),m)}}_calculate(u,m,S,L){return L.zoom>L.zoomHistory.lastIntegerZoom?{from:u,to:m}:{from:S,to:m}}interpolate(u){return u}}class Ca{constructor(u){this.specification=u}possiblyEvaluate(u,m,S,L){return!!u.expression.evaluate(m,null,{},S,L)}interpolate(){return!1}}class $i{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const m in u){const S=u[m];S.specification.overridable&&this.overridableProperties.push(m);const L=this.defaultPropertyValues[m]=new Jn(S,void 0),j=this.defaultTransitionablePropertyValues[m]=new _n(S);this.defaultTransitioningPropertyValues[m]=j.untransitioned(),this.defaultPossiblyEvaluatedValues[m]=L.possiblyEvaluate({})}}}ei("DataDrivenProperty",or),ei("DataConstantProperty",yr),ei("CrossFadedDataDrivenProperty",Ga),ei("CrossFadedProperty",oo),ei("ColorRampProperty",Ca);const Eo="-transition";class ga extends Xe{constructor(u,m){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),m.layout&&(this._unevaluatedLayout=new Er(m.layout)),m.paint)){this._transitionablePaint=new Cn(m.paint);for(const S in u.paint)this.setPaintProperty(S,u.paint[S],{validate:!1});for(const S in u.layout)this.setLayoutProperty(S,u.layout[S],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Zr(m.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,m,S={}){m!=null&&this._validate(Hv,`layers.${this.id}.layout.${u}`,u,m,S)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,m):this.visibility=m)}getPaintProperty(u){return u.endsWith(Eo)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,m,S={}){if(m!=null&&this._validate(Ip,`layers.${this.id}.paint.${u}`,u,m,S))return!1;if(u.endsWith(Eo))return this._transitionablePaint.setTransition(u.slice(0,-11),m||void 0),!1;{const L=this._transitionablePaint._values[u],j=L.property.specification["property-type"]==="cross-faded-data-driven",V=L.value.isDataDriven(),J=L.value;this._transitionablePaint.setValue(u,m),this._handleSpecialPaintPropertyUpdate(u);const oe=this._transitionablePaint._values[u].value;return oe.isDataDriven()||V||j||this._handleOverridablePaintPropertyUpdate(u,J,oe)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,m,S){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,m){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,m)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,m)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Ae(u,(m,S)=>!(m===void 0||S==="layout"&&!Object.keys(m).length||S==="paint"&&!Object.keys(m).length))}_validate(u,m,S,L,j={}){return(!j||j.validate!==!1)&&as(this,u.call(Au,{key:m,layerType:this.type,objectKey:S,value:L,styleSpec:Fe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const m=this.paint.get(u);if(m instanceof ti&&si(m.property.specification)&&(m.value.kind==="source"||m.value.kind==="composite")&&m.value.isStateDependent)return!0}return!1}}const ma={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ho{constructor(u,m){this._structArray=u,this._pos1=m*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class fi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,m){return u._trim(),m&&(u.isTransferred=!0,m.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const m=Object.create(this.prototype);return m.arrayBuffer=u.arrayBuffer,m.length=u.length,m.capacity=u.arrayBuffer.byteLength/m.bytesPerElement,m._refreshViews(),m}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const m=this.uint8;this._refreshViews(),m&&this.uint8.set(m)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ei(g,u=1){let m=0,S=0;return{members:g.map(L=>{const j=ma[L.type].BYTES_PER_ELEMENT,V=m=Xa(m,Math.max(u,j)),J=L.components||1;return S=Math.max(S,j),m+=j*J,{name:L.name,type:L.type,components:J,offset:V}}),size:Xa(m,Math.max(S,u)),alignment:u}}function Xa(g,u){return Math.ceil(g/u)*u}class Ua extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m){const S=this.length;return this.resize(S+1),this.emplace(S,u,m)}emplace(u,m,S){const L=2*u;return this.int16[L+0]=m,this.int16[L+1]=S,u}}Ua.prototype.bytesPerElement=4,ei("StructArrayLayout2i4",Ua);class No extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,S){const L=this.length;return this.resize(L+1),this.emplace(L,u,m,S)}emplace(u,m,S,L){const j=3*u;return this.int16[j+0]=m,this.int16[j+1]=S,this.int16[j+2]=L,u}}No.prototype.bytesPerElement=6,ei("StructArrayLayout3i6",No);class As extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,S,L){const j=this.length;return this.resize(j+1),this.emplace(j,u,m,S,L)}emplace(u,m,S,L,j){const V=4*u;return this.int16[V+0]=m,this.int16[V+1]=S,this.int16[V+2]=L,this.int16[V+3]=j,u}}As.prototype.bytesPerElement=8,ei("StructArrayLayout4i8",As);class Yo extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,S,L,j,V){const J=this.length;return this.resize(J+1),this.emplace(J,u,m,S,L,j,V)}emplace(u,m,S,L,j,V,J){const oe=6*u;return this.int16[oe+0]=m,this.int16[oe+1]=S,this.int16[oe+2]=L,this.int16[oe+3]=j,this.int16[oe+4]=V,this.int16[oe+5]=J,u}}Yo.prototype.bytesPerElement=12,ei("StructArrayLayout2i4i12",Yo);class os extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,S,L,j,V){const J=this.length;return this.resize(J+1),this.emplace(J,u,m,S,L,j,V)}emplace(u,m,S,L,j,V,J){const oe=4*u,de=8*u;return this.int16[oe+0]=m,this.int16[oe+1]=S,this.uint8[de+4]=L,this.uint8[de+5]=j,this.uint8[de+6]=V,this.uint8[de+7]=J,u}}os.prototype.bytesPerElement=8,ei("StructArrayLayout2i4ub8",os);class Uo extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m){const S=this.length;return this.resize(S+1),this.emplace(S,u,m)}emplace(u,m,S){const L=2*u;return this.float32[L+0]=m,this.float32[L+1]=S,u}}Uo.prototype.bytesPerElement=8,ei("StructArrayLayout2f8",Uo);class Ru extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,S,L,j,V,J,oe,de,be){const Le=this.length;return this.resize(Le+1),this.emplace(Le,u,m,S,L,j,V,J,oe,de,be)}emplace(u,m,S,L,j,V,J,oe,de,be,Le){const $e=10*u;return this.uint16[$e+0]=m,this.uint16[$e+1]=S,this.uint16[$e+2]=L,this.uint16[$e+3]=j,this.uint16[$e+4]=V,this.uint16[$e+5]=J,this.uint16[$e+6]=oe,this.uint16[$e+7]=de,this.uint16[$e+8]=be,this.uint16[$e+9]=Le,u}}Ru.prototype.bytesPerElement=20,ei("StructArrayLayout10ui20",Ru);class Va extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,S,L,j,V,J,oe,de,be,Le,$e){const Je=this.length;return this.resize(Je+1),this.emplace(Je,u,m,S,L,j,V,J,oe,de,be,Le,$e)}emplace(u,m,S,L,j,V,J,oe,de,be,Le,$e,Je){const tt=12*u;return this.int16[tt+0]=m,this.int16[tt+1]=S,this.int16[tt+2]=L,this.int16[tt+3]=j,this.uint16[tt+4]=V,this.uint16[tt+5]=J,this.uint16[tt+6]=oe,this.uint16[tt+7]=de,this.int16[tt+8]=be,this.int16[tt+9]=Le,this.int16[tt+10]=$e,this.int16[tt+11]=Je,u}}Va.prototype.bytesPerElement=24,ei("StructArrayLayout4i4ui4i24",Va);class jo extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,S){const L=this.length;return this.resize(L+1),this.emplace(L,u,m,S)}emplace(u,m,S,L){const j=3*u;return this.float32[j+0]=m,this.float32[j+1]=S,this.float32[j+2]=L,u}}jo.prototype.bytesPerElement=12,ei("StructArrayLayout3f12",jo);class Xu extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const m=this.length;return this.resize(m+1),this.emplace(m,u)}emplace(u,m){return this.uint32[1*u+0]=m,u}}Xu.prototype.bytesPerElement=4,ei("StructArrayLayout1ul4",Xu);class Pc extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,S,L,j,V,J,oe,de){const be=this.length;return this.resize(be+1),this.emplace(be,u,m,S,L,j,V,J,oe,de)}emplace(u,m,S,L,j,V,J,oe,de,be){const Le=10*u,$e=5*u;return this.int16[Le+0]=m,this.int16[Le+1]=S,this.int16[Le+2]=L,this.int16[Le+3]=j,this.int16[Le+4]=V,this.int16[Le+5]=J,this.uint32[$e+3]=oe,this.uint16[Le+8]=de,this.uint16[Le+9]=be,u}}Pc.prototype.bytesPerElement=20,ei("StructArrayLayout6i1ul2ui20",Pc);class Yu extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,S,L,j,V){const J=this.length;return this.resize(J+1),this.emplace(J,u,m,S,L,j,V)}emplace(u,m,S,L,j,V,J){const oe=6*u;return this.int16[oe+0]=m,this.int16[oe+1]=S,this.int16[oe+2]=L,this.int16[oe+3]=j,this.int16[oe+4]=V,this.int16[oe+5]=J,u}}Yu.prototype.bytesPerElement=12,ei("StructArrayLayout2i2i2i12",Yu);class eh extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,S,L,j){const V=this.length;return this.resize(V+1),this.emplace(V,u,m,S,L,j)}emplace(u,m,S,L,j,V){const J=4*u,oe=8*u;return this.float32[J+0]=m,this.float32[J+1]=S,this.float32[J+2]=L,this.int16[oe+6]=j,this.int16[oe+7]=V,u}}eh.prototype.bytesPerElement=16,ei("StructArrayLayout2f1f2i16",eh);class Go extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,S,L,j,V){const J=this.length;return this.resize(J+1),this.emplace(J,u,m,S,L,j,V)}emplace(u,m,S,L,j,V,J){const oe=16*u,de=4*u,be=8*u;return this.uint8[oe+0]=m,this.uint8[oe+1]=S,this.float32[de+1]=L,this.float32[de+2]=j,this.int16[be+6]=V,this.int16[be+7]=J,u}}Go.prototype.bytesPerElement=16,ei("StructArrayLayout2ub2f2i16",Go);class Ah extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,S){const L=this.length;return this.resize(L+1),this.emplace(L,u,m,S)}emplace(u,m,S,L){const j=3*u;return this.uint16[j+0]=m,this.uint16[j+1]=S,this.uint16[j+2]=L,u}}Ah.prototype.bytesPerElement=6,ei("StructArrayLayout3ui6",Ah);class ad extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,S,L,j,V,J,oe,de,be,Le,$e,Je,tt,ct,Rt,Ht){const fn=this.length;return this.resize(fn+1),this.emplace(fn,u,m,S,L,j,V,J,oe,de,be,Le,$e,Je,tt,ct,Rt,Ht)}emplace(u,m,S,L,j,V,J,oe,de,be,Le,$e,Je,tt,ct,Rt,Ht,fn){const Kt=24*u,Ke=12*u,Ct=48*u;return this.int16[Kt+0]=m,this.int16[Kt+1]=S,this.uint16[Kt+2]=L,this.uint16[Kt+3]=j,this.uint32[Ke+2]=V,this.uint32[Ke+3]=J,this.uint32[Ke+4]=oe,this.uint16[Kt+10]=de,this.uint16[Kt+11]=be,this.uint16[Kt+12]=Le,this.float32[Ke+7]=$e,this.float32[Ke+8]=Je,this.uint8[Ct+36]=tt,this.uint8[Ct+37]=ct,this.uint8[Ct+38]=Rt,this.uint32[Ke+10]=Ht,this.int16[Kt+22]=fn,u}}ad.prototype.bytesPerElement=48,ei("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ad);class B extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,S,L,j,V,J,oe,de,be,Le,$e,Je,tt,ct,Rt,Ht,fn,Kt,Ke,Ct,tn,jn,Cr,Xn,rr,Or,Tr){const Ur=this.length;return this.resize(Ur+1),this.emplace(Ur,u,m,S,L,j,V,J,oe,de,be,Le,$e,Je,tt,ct,Rt,Ht,fn,Kt,Ke,Ct,tn,jn,Cr,Xn,rr,Or,Tr)}emplace(u,m,S,L,j,V,J,oe,de,be,Le,$e,Je,tt,ct,Rt,Ht,fn,Kt,Ke,Ct,tn,jn,Cr,Xn,rr,Or,Tr,Ur){const lr=32*u,li=16*u;return this.int16[lr+0]=m,this.int16[lr+1]=S,this.int16[lr+2]=L,this.int16[lr+3]=j,this.int16[lr+4]=V,this.int16[lr+5]=J,this.int16[lr+6]=oe,this.int16[lr+7]=de,this.uint16[lr+8]=be,this.uint16[lr+9]=Le,this.uint16[lr+10]=$e,this.uint16[lr+11]=Je,this.uint16[lr+12]=tt,this.uint16[lr+13]=ct,this.uint16[lr+14]=Rt,this.uint16[lr+15]=Ht,this.uint16[lr+16]=fn,this.uint16[lr+17]=Kt,this.uint16[lr+18]=Ke,this.uint16[lr+19]=Ct,this.uint16[lr+20]=tn,this.uint16[lr+21]=jn,this.uint16[lr+22]=Cr,this.uint32[li+12]=Xn,this.float32[li+13]=rr,this.float32[li+14]=Or,this.uint16[lr+30]=Tr,this.uint16[lr+31]=Ur,u}}B.prototype.bytesPerElement=64,ei("StructArrayLayout8i15ui1ul2f2ui64",B);class l extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const m=this.length;return this.resize(m+1),this.emplace(m,u)}emplace(u,m){return this.float32[1*u+0]=m,u}}l.prototype.bytesPerElement=4,ei("StructArrayLayout1f4",l);class p extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,S){const L=this.length;return this.resize(L+1),this.emplace(L,u,m,S)}emplace(u,m,S,L){const j=3*u;return this.uint16[6*u+0]=m,this.float32[j+1]=S,this.float32[j+2]=L,u}}p.prototype.bytesPerElement=12,ei("StructArrayLayout1ui2f12",p);class T extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,S){const L=this.length;return this.resize(L+1),this.emplace(L,u,m,S)}emplace(u,m,S,L){const j=4*u;return this.uint32[2*u+0]=m,this.uint16[j+2]=S,this.uint16[j+3]=L,u}}T.prototype.bytesPerElement=8,ei("StructArrayLayout1ul2ui8",T);class P extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m){const S=this.length;return this.resize(S+1),this.emplace(S,u,m)}emplace(u,m,S){const L=2*u;return this.uint16[L+0]=m,this.uint16[L+1]=S,u}}P.prototype.bytesPerElement=4,ei("StructArrayLayout2ui4",P);class U extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const m=this.length;return this.resize(m+1),this.emplace(m,u)}emplace(u,m){return this.uint16[1*u+0]=m,u}}U.prototype.bytesPerElement=2,ei("StructArrayLayout1ui2",U);class Y extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,S,L){const j=this.length;return this.resize(j+1),this.emplace(j,u,m,S,L)}emplace(u,m,S,L,j){const V=4*u;return this.float32[V+0]=m,this.float32[V+1]=S,this.float32[V+2]=L,this.float32[V+3]=j,u}}Y.prototype.bytesPerElement=16,ei("StructArrayLayout4f16",Y);class re extends ho{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}re.prototype.size=20;class ue extends Pc{get(u){return new re(this,u)}}ei("CollisionBoxArray",ue);class ge extends ho{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ge.prototype.size=48;class Ne extends ad{get(u){return new ge(this,u)}}ei("PlacedSymbolArray",Ne);class qe extends ho{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}qe.prototype.size=64;class Ge extends B{get(u){return new qe(this,u)}}ei("SymbolInstanceArray",Ge);class ot extends l{getoffsetX(u){return this.float32[1*u+0]}}ei("GlyphOffsetArray",ot);class ft extends No{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}ei("SymbolLineVertexArray",ft);class Ot extends ho{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ot.prototype.size=12;class Lt extends p{get(u){return new Ot(this,u)}}ei("TextAnchorOffsetArray",Lt);class Ft extends ho{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ft.prototype.size=8;class Xt extends T{get(u){return new Ft(this,u)}}ei("FeatureIndexArray",Xt);class nn extends Ua{}class an extends Ua{}class sn extends Ua{}class pn extends Yo{}class hn extends os{}class Un extends Uo{}class On extends Ru{}class nr extends Va{}class ir extends jo{}class tr extends Xu{}class Hr extends Yu{}class Br extends Go{}class pr extends Ah{}class di extends P{}const Gi=Ei([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ia}=Gi;class fa{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,m,S,L){const j=this.segments[this.segments.length-1];return u>fa.MAX_VERTEX_ARRAY_LENGTH&&st(`Max vertices per segment is ${fa.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${fa.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!j||j.vertexLength+u>fa.MAX_VERTEX_ARRAY_LENGTH||j.sortKey!==L?this.createNewSegment(m,S,L):j}createNewSegment(u,m,S){const L={vertexOffset:u.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0,vaos:{}};return S!==void 0&&(L.sortKey=S),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(L),L}getOrCreateLatestSegment(u,m,S){return this.prepareSegment(0,u,m,S)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const m in u.vaos)u.vaos[m].destroy()}static simpleSegment(u,m,S,L){return new fa([{vertexOffset:u,primitiveOffset:m,vertexLength:S,primitiveLength:L,vaos:{},sortKey:0}])}}function yo(g,u){return 256*(g=xe(Math.floor(g),0,255))+xe(Math.floor(u),0,255)}fa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ei("SegmentVector",fa);const To=Ei([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var so,fo,po,gs={exports:{}},zs={exports:{}},pl={exports:{}},el=function(){if(po)return gs.exports;po=1;var g=(so||(so=1,zs.exports=function(m,S){var L,j,V,J,oe,de,be,Le;for(j=m.length-(L=3&m.length),V=S,oe=3432918353,de=461845907,Le=0;Le<j;)be=255&m.charCodeAt(Le)|(255&m.charCodeAt(++Le))<<8|(255&m.charCodeAt(++Le))<<16|(255&m.charCodeAt(++Le))<<24,++Le,V=27492+(65535&(J=5*(65535&(V=(V^=be=(65535&(be=(be=(65535&be)*oe+(((be>>>16)*oe&65535)<<16)&4294967295)<<15|be>>>17))*de+(((be>>>16)*de&65535)<<16)&4294967295)<<13|V>>>19))+((5*(V>>>16)&65535)<<16)&4294967295))+((58964+(J>>>16)&65535)<<16);switch(be=0,L){case 3:be^=(255&m.charCodeAt(Le+2))<<16;case 2:be^=(255&m.charCodeAt(Le+1))<<8;case 1:V^=be=(65535&(be=(be=(65535&(be^=255&m.charCodeAt(Le)))*oe+(((be>>>16)*oe&65535)<<16)&4294967295)<<15|be>>>17))*de+(((be>>>16)*de&65535)<<16)&4294967295}return V^=m.length,V=2246822507*(65535&(V^=V>>>16))+((2246822507*(V>>>16)&65535)<<16)&4294967295,V=3266489909*(65535&(V^=V>>>13))+((3266489909*(V>>>16)&65535)<<16)&4294967295,(V^=V>>>16)>>>0}),zs.exports),u=(fo||(fo=1,pl.exports=function(m,S){for(var L,j=m.length,V=S^j,J=0;j>=4;)L=1540483477*(65535&(L=255&m.charCodeAt(J)|(255&m.charCodeAt(++J))<<8|(255&m.charCodeAt(++J))<<16|(255&m.charCodeAt(++J))<<24))+((1540483477*(L>>>16)&65535)<<16),V=1540483477*(65535&V)+((1540483477*(V>>>16)&65535)<<16)^(L=1540483477*(65535&(L^=L>>>24))+((1540483477*(L>>>16)&65535)<<16)),j-=4,++J;switch(j){case 3:V^=(255&m.charCodeAt(J+2))<<16;case 2:V^=(255&m.charCodeAt(J+1))<<8;case 1:V=1540483477*(65535&(V^=255&m.charCodeAt(J)))+((1540483477*(V>>>16)&65535)<<16)}return V=1540483477*(65535&(V^=V>>>13))+((1540483477*(V>>>16)&65535)<<16),(V^=V>>>15)>>>0}),pl.exports);return gs.exports=g,gs.exports.murmur3=g,gs.exports.murmur2=u,gs.exports}(),hc=c(el);class Pu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,m,S,L){this.ids.push(Kl(u)),this.positions.push(m,S,L)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const m=Kl(u);let S=0,L=this.ids.length-1;for(;S<L;){const V=S+L>>1;this.ids[V]>=m?L=V:S=V+1}const j=[];for(;this.ids[S]===m;)j.push({index:this.positions[3*S],start:this.positions[3*S+1],end:this.positions[3*S+2]}),S++;return j}static serialize(u,m){const S=new Float64Array(u.ids),L=new Uint32Array(u.positions);return Bl(S,L,0,S.length-1),m&&m.push(S.buffer,L.buffer),{ids:S,positions:L}}static deserialize(u){const m=new Pu;return m.ids=u.ids,m.positions=u.positions,m.indexed=!0,m}}function Kl(g){const u=+g;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:hc(String(g))}function Bl(g,u,m,S){for(;m<S;){const L=g[m+S>>1];let j=m-1,V=S+1;for(;;){do j++;while(g[j]<L);do V--;while(g[V]>L);if(j>=V)break;uu(g,j,V),uu(u,3*j,3*V),uu(u,3*j+1,3*V+1),uu(u,3*j+2,3*V+2)}V-m<S-V?(Bl(g,u,m,V),m=V+1):(Bl(g,u,V+1,S),S=V)}}function uu(g,u,m){const S=g[u];g[u]=g[m],g[m]=S}ei("FeaturePositionMap",Pu);class Iu{constructor(u,m){this.gl=u.gl,this.location=m}}class Zu extends Iu{constructor(u,m){super(u,m),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class cu extends Iu{constructor(u,m){super(u,m),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class th extends Iu{constructor(u,m){super(u,m),this.current=et.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const Rh=new Float32Array(16);function Ph(g){return[yo(255*g.r,255*g.g),yo(255*g.b,255*g.a)]}class Rs{constructor(u,m,S){this.value=u,this.uniformNames=m.map(L=>`u_${L}`),this.type=S}setUniform(u,m,S){u.set(S.constantOr(this.value))}getBinding(u,m,S){return this.type==="color"?new th(u,m):new Zu(u,m)}}class Zo{constructor(u,m){this.uniformNames=m.map(S=>`u_${S}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,m){this.pixelRatioFrom=m.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=m.tlbr,this.patternTo=u.tlbr}setUniform(u,m,S,L){const j=L==="u_pattern_to"?this.patternTo:L==="u_pattern_from"?this.patternFrom:L==="u_pixel_ratio_to"?this.pixelRatioTo:L==="u_pixel_ratio_from"?this.pixelRatioFrom:null;j&&u.set(j)}getBinding(u,m,S){return S.substr(0,9)==="u_pattern"?new cu(u,m):new Zu(u,m)}}class tl{constructor(u,m,S,L){this.expression=u,this.type=S,this.maxValue=0,this.paintVertexAttributes=m.map(j=>({name:`a_${j}`,type:"Float32",components:S==="color"?2:1,offset:0})),this.paintVertexArray=new L}populatePaintArray(u,m,S,L,j){const V=this.paintVertexArray.length,J=this.expression.evaluate(new ar(0),m,{},L,[],j);this.paintVertexArray.resize(u),this._setPaintValue(V,u,J)}updatePaintArray(u,m,S,L){const j=this.expression.evaluate({zoom:0},S,L);this._setPaintValue(u,m,j)}_setPaintValue(u,m,S){if(this.type==="color"){const L=Ph(S);for(let j=u;j<m;j++)this.paintVertexArray.emplace(j,L[0],L[1])}else{for(let L=u;L<m;L++)this.paintVertexArray.emplace(L,S);this.maxValue=Math.max(this.maxValue,Math.abs(S))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Co{constructor(u,m,S,L,j,V){this.expression=u,this.uniformNames=m.map(J=>`u_${J}_t`),this.type=S,this.useIntegerZoom=L,this.zoom=j,this.maxValue=0,this.paintVertexAttributes=m.map(J=>({name:`a_${J}`,type:"Float32",components:S==="color"?4:2,offset:0})),this.paintVertexArray=new V}populatePaintArray(u,m,S,L,j){const V=this.expression.evaluate(new ar(this.zoom),m,{},L,[],j),J=this.expression.evaluate(new ar(this.zoom+1),m,{},L,[],j),oe=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(oe,u,V,J)}updatePaintArray(u,m,S,L){const j=this.expression.evaluate({zoom:this.zoom},S,L),V=this.expression.evaluate({zoom:this.zoom+1},S,L);this._setPaintValue(u,m,j,V)}_setPaintValue(u,m,S,L){if(this.type==="color"){const j=Ph(S),V=Ph(L);for(let J=u;J<m;J++)this.paintVertexArray.emplace(J,j[0],j[1],V[0],V[1])}else{for(let j=u;j<m;j++)this.paintVertexArray.emplace(j,S,L);this.maxValue=Math.max(this.maxValue,Math.abs(S),Math.abs(L))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,m){const S=this.useIntegerZoom?Math.floor(m.zoom):m.zoom,L=xe(this.expression.interpolationFactor(S,this.zoom,this.zoom+1),0,1);u.set(L)}getBinding(u,m,S){return new Zu(u,m)}}class Rf{constructor(u,m,S,L,j,V){this.expression=u,this.type=m,this.useIntegerZoom=S,this.zoom=L,this.layerId=V,this.zoomInPaintVertexArray=new j,this.zoomOutPaintVertexArray=new j}populatePaintArray(u,m,S){const L=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(L,u,m.patterns&&m.patterns[this.layerId],S)}updatePaintArray(u,m,S,L,j){this._setPaintValues(u,m,S.patterns&&S.patterns[this.layerId],j)}_setPaintValues(u,m,S,L){if(!L||!S)return;const{min:j,mid:V,max:J}=S,oe=L[j],de=L[V],be=L[J];if(oe&&de&&be)for(let Le=u;Le<m;Le++)this.zoomInPaintVertexArray.emplace(Le,de.tl[0],de.tl[1],de.br[0],de.br[1],oe.tl[0],oe.tl[1],oe.br[0],oe.br[1],de.pixelRatio,oe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Le,de.tl[0],de.tl[1],de.br[0],de.br[1],be.tl[0],be.tl[1],be.br[0],be.br[1],de.pixelRatio,be.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,To.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,To.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class qv{constructor(u,m,S){this.binders={},this._buffers=[];const L=[];for(const j in u.paint._values){if(!S(j))continue;const V=u.paint.get(j);if(!(V instanceof ti&&si(V.property.specification)))continue;const J=Fy(j,u.type),oe=V.value,de=V.property.specification.type,be=V.property.useIntegerZoom,Le=V.property.specification["property-type"],$e=Le==="cross-faded"||Le==="cross-faded-data-driven";if(oe.kind==="constant")this.binders[j]=$e?new Zo(oe.value,J):new Rs(oe.value,J,de),L.push(`/u_${j}`);else if(oe.kind==="source"||$e){const Je=$v(j,de,"source");this.binders[j]=$e?new Rf(oe,de,be,m,Je,u.id):new tl(oe,J,de,Je),L.push(`/a_${j}`)}else{const Je=$v(j,de,"composite");this.binders[j]=new Co(oe,J,de,be,m,Je),L.push(`/z_${j}`)}}this.cacheKey=L.sort().join("")}getMaxValue(u){const m=this.binders[u];return m instanceof tl||m instanceof Co?m.maxValue:0}populatePaintArrays(u,m,S,L,j){for(const V in this.binders){const J=this.binders[V];(J instanceof tl||J instanceof Co||J instanceof Rf)&&J.populatePaintArray(u,m,S,L,j)}}setConstantPatternPositions(u,m){for(const S in this.binders){const L=this.binders[S];L instanceof Zo&&L.setConstantPatternPositions(u,m)}}updatePaintArrays(u,m,S,L,j){let V=!1;for(const J in u){const oe=m.getPositions(J);for(const de of oe){const be=S.feature(de.index);for(const Le in this.binders){const $e=this.binders[Le];if(($e instanceof tl||$e instanceof Co||$e instanceof Rf)&&$e.expression.isStateDependent===!0){const Je=L.paint.get(Le);$e.expression=Je.value,$e.updatePaintArray(de.start,de.end,be,u[J],j),V=!0}}}}return V}defines(){const u=[];for(const m in this.binders){const S=this.binders[m];(S instanceof Rs||S instanceof Zo)&&u.push(...S.uniformNames.map(L=>`#define HAS_UNIFORM_${L}`))}return u}getBinderAttributes(){const u=[];for(const m in this.binders){const S=this.binders[m];if(S instanceof tl||S instanceof Co)for(let L=0;L<S.paintVertexAttributes.length;L++)u.push(S.paintVertexAttributes[L].name);else if(S instanceof Rf)for(let L=0;L<To.members.length;L++)u.push(To.members[L].name)}return u}getBinderUniforms(){const u=[];for(const m in this.binders){const S=this.binders[m];if(S instanceof Rs||S instanceof Zo||S instanceof Co)for(const L of S.uniformNames)u.push(L)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,m){const S=[];for(const L in this.binders){const j=this.binders[L];if(j instanceof Rs||j instanceof Zo||j instanceof Co){for(const V of j.uniformNames)if(m[V]){const J=j.getBinding(u,m[V],V);S.push({name:V,property:L,binding:J})}}}return S}setUniforms(u,m,S,L){for(const{name:j,property:V,binding:J}of m)this.binders[V].setUniform(J,L,S.get(V),j)}updatePaintBuffers(u){this._buffers=[];for(const m in this.binders){const S=this.binders[m];if(u&&S instanceof Rf){const L=u.fromScale===2?S.zoomInPaintVertexBuffer:S.zoomOutPaintVertexBuffer;L&&this._buffers.push(L)}else(S instanceof tl||S instanceof Co)&&S.paintVertexBuffer&&this._buffers.push(S.paintVertexBuffer)}}upload(u){for(const m in this.binders){const S=this.binders[m];(S instanceof tl||S instanceof Co||S instanceof Rf)&&S.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const m=this.binders[u];(m instanceof tl||m instanceof Co||m instanceof Rf)&&m.destroy()}}}class Kh{constructor(u,m,S=()=>!0){this.programConfigurations={};for(const L of u)this.programConfigurations[L.id]=new qv(L,m,S);this.needsUpload=!1,this._featureMap=new Pu,this._bufferOffset=0}populatePaintArrays(u,m,S,L,j,V){for(const J in this.programConfigurations)this.programConfigurations[J].populatePaintArrays(u,m,L,j,V);m.id!==void 0&&this._featureMap.add(m.id,S,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,m,S,L){for(const j of S)this.needsUpload=this.programConfigurations[j.id].updatePaintArrays(u,this._featureMap,m,j,L)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const m in this.programConfigurations)this.programConfigurations[m].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function Fy(g,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[g]||[g.replace(`${u}-`,"").replace(/-/g,"_")]}function $v(g,u,m){const S={color:{source:Uo,composite:Y},number:{source:l,composite:Uo}},L=function(j){return{"line-pattern":{source:On,composite:On},"fill-pattern":{source:On,composite:On},"fill-extrusion-pattern":{source:On,composite:On}}[j]}(g);return L&&L[m]||S[u][m]}ei("ConstantBinder",Rs),ei("CrossFadedConstantBinder",Zo),ei("SourceExpressionBinder",tl),ei("CrossFadedCompositeBinder",Rf),ei("CompositeExpressionBinder",Co),ei("ProgramConfiguration",qv,{omit:["_buffers"]}),ei("ProgramConfigurationSet",Kh);const Wv=Math.pow(2,14)-1,Ic=-Wv-1;function nh(g){const u=se/g.extent,m=g.loadGeometry();for(let S=0;S<m.length;S++){const L=m[S];for(let j=0;j<L.length;j++){const V=L[j],J=Math.round(V.x*u),oe=Math.round(V.y*u);V.x=xe(J,Ic,Wv),V.y=xe(oe,Ic,Wv),(J<V.x||J>V.x+1||oe<V.y||oe>V.y+1)&&st("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return m}function Ih(g,u){return{type:g.type,id:g.id,properties:g.properties,geometry:u?nh(g):[]}}const Ud=-32768;function Np(g,u,m,S,L){g.emplaceBack(Ud+8*u+S,Ud+8*m+L)}class wg{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new an,this.indexArray=new pr,this.segments=new fa,this.programConfigurations=new Kh(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,S){const L=this.layers[0],j=[];let V=null,J=!1,oe=L.type==="heatmap";if(L.type==="circle"){const be=L;V=be.layout.get("circle-sort-key"),J=!V.isConstant(),oe=oe||be.paint.get("circle-pitch-alignment")==="map"}const de=oe?m.subdivisionGranularity.circle:1;for(const{feature:be,id:Le,index:$e,sourceLayerIndex:Je}of u){const tt=this.layers[0]._featureFilter.needGeometry,ct=Ih(be,tt);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),ct,S))continue;const Rt=J?V.evaluate(ct,{},S):void 0,Ht={id:Le,properties:be.properties,type:be.type,sourceLayerIndex:Je,index:$e,geometry:tt?ct.geometry:nh(be),patterns:{},sortKey:Rt};j.push(Ht)}J&&j.sort((be,Le)=>be.sortKey-Le.sortKey);for(const be of j){const{geometry:Le,index:$e,sourceLayerIndex:Je}=be,tt=u[$e].feature;this.addFeature(be,Le,$e,S,de),m.featureIndex.insert(tt,Le,$e,Je,this.index)}}update(u,m,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ia),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,m,S,L,j=1){let V;switch(j){case 1:V=[0,7];break;case 3:V=[0,2,5,7];break;case 5:V=[0,1,3,4,6,7];break;case 7:V=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${j}; valid values are 1, 3, 5, 7.`)}const J=V.length;for(const oe of m)for(const de of oe){const be=de.x,Le=de.y;if(be<0||be>=se||Le<0||Le>=se)continue;const $e=this.segments.prepareSegment(J*J,this.layoutVertexArray,this.indexArray,u.sortKey),Je=$e.vertexLength;for(let tt=0;tt<J;tt++)for(let ct=0;ct<J;ct++)Np(this.layoutVertexArray,be,Le,V[ct],V[tt]);for(let tt=0;tt<J-1;tt++)for(let ct=0;ct<J-1;ct++){const Rt=Je+tt*J+ct,Ht=Je+(tt+1)*J+ct;this.indexArray.emplaceBack(Rt,Ht+1,Rt+1),this.indexArray.emplaceBack(Rt,Ht,Ht+1)}$e.vertexLength+=J*J,$e.primitiveLength+=(J-1)*(J-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,S,{},L)}}function Sg(g,u){for(let m=0;m<g.length;m++)if(Us(u,g[m]))return!0;for(let m=0;m<u.length;m++)if(Us(g,u[m]))return!0;return!!Qh(g,u)}function Rm(g,u,m){return!!Us(g,u)||!!By(u,g,m)}function Wx(g,u){if(g.length===1)return od(u,g[0]);for(let m=0;m<u.length;m++){const S=u[m];for(let L=0;L<S.length;L++)if(Us(g,S[L]))return!0}for(let m=0;m<g.length;m++)if(od(u,g[m]))return!0;for(let m=0;m<u.length;m++)if(Qh(g,u[m]))return!0;return!1}function Jh(g,u,m){if(g.length>1){if(Qh(g,u))return!0;for(let S=0;S<u.length;S++)if(By(u[S],g,m))return!0}for(let S=0;S<g.length;S++)if(By(g[S],u,m))return!0;return!1}function Qh(g,u){if(g.length===0||u.length===0)return!1;for(let m=0;m<g.length-1;m++){const S=g[m],L=g[m+1];for(let j=0;j<u.length-1;j++)if(kp(S,L,u[j],u[j+1]))return!0}return!1}function kp(g,u,m,S){return Ce(g,m,S)!==Ce(u,m,S)&&Ce(g,u,m)!==Ce(g,u,S)}function By(g,u,m){const S=m*m;if(u.length===1)return g.distSqr(u[0])<S;for(let L=1;L<u.length;L++)if(jd(g,u[L-1],u[L])<S)return!0;return!1}function jd(g,u,m){const S=u.distSqr(m);if(S===0)return g.distSqr(u);const L=((g.x-u.x)*(m.x-u.x)+(g.y-u.y)*(m.y-u.y))/S;return g.distSqr(L<0?u:L>1?m:m.sub(u)._mult(L)._add(u))}function od(g,u){for(let m=0;m<g.length;m++)if(Us(g[m],u))return!0;return!1}function Us(g,u){let m=!1;for(let S=0,L=g.length-1;S<g.length;L=S++){const j=g[S],V=g[L];j.y>u.y!=V.y>u.y&&u.x<(V.x-j.x)*(u.y-j.y)/(V.y-j.y)+j.x&&(m=!m)}return m}function zy(g,u,m){const S=m[0],L=m[2];if(g.x<S.x&&u.x<S.x||g.x>L.x&&u.x>L.x||g.y<S.y&&u.y<S.y||g.y>L.y&&u.y>L.y)return!1;const j=Ce(g,u,m[0]);return j!==Ce(g,u,m[1])||j!==Ce(g,u,m[2])||j!==Ce(g,u,m[3])}function Eg(g,u,m){const S=u.paint.get(g).value;return S.kind==="constant"?S.value:m.programConfigurations.get(u.id).getMaxValue(g)}function Pm(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1])}function Xv(g,u,m,S,L){if(!u[0]&&!u[1])return g;const j=E.convert(u)._mult(L);m==="viewport"&&j._rotate(-S);const V=[];for(let J=0;J<g.length;J++)V.push(g[J].sub(j));return V}let Xx,Op;ei("CircleBucket",wg,{omit:["layers"]});var Uy={get paint(){return Op=Op||new $i({"circle-radius":new or(Fe.paint_circle["circle-radius"]),"circle-color":new or(Fe.paint_circle["circle-color"]),"circle-blur":new or(Fe.paint_circle["circle-blur"]),"circle-opacity":new or(Fe.paint_circle["circle-opacity"]),"circle-translate":new yr(Fe.paint_circle["circle-translate"]),"circle-translate-anchor":new yr(Fe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yr(Fe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yr(Fe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new or(Fe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new or(Fe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new or(Fe.paint_circle["circle-stroke-opacity"])})},get layout(){return Xx=Xx||new $i({"circle-sort-key":new or(Fe.layout_circle["circle-sort-key"])})}};class uS extends ga{constructor(u){super(u,Uy)}createBucket(u){return new wg(u)}queryRadius(u){const m=u;return Eg("circle-radius",this,m)+Eg("circle-stroke-width",this,m)+Pm(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:m,featureState:S,geometry:L,transform:j,pixelsToTileUnits:V,unwrappedTileID:J,getElevation:oe}){const de=Xv(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-j.bearingInRadians,V),be=this.paint.get("circle-radius").evaluate(m,S)+this.paint.get("circle-stroke-width").evaluate(m,S),Le=this.paint.get("circle-pitch-alignment")==="map",$e=Le?de:function(tt,ct,Rt,Ht){return tt.map(fn=>Yx(fn,ct,Rt,Ht))}(de,j,J,oe),Je=Le?be*V:be;for(const tt of L)for(const ct of tt){const Rt=Le?ct:Yx(ct,j,J,oe);let Ht=Je;const fn=j.projectTileCoordinates(ct.x,ct.y,J,oe).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ht*=fn/j.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ht*=j.cameraToCenterDistance/fn),Rm($e,Rt,Ht))return!0}return!1}}function Yx(g,u,m,S){const L=u.projectTileCoordinates(g.x,g.y,m,S).point;return new E((.5*L.x+.5)*u.width,(.5*-L.y+.5)*u.height)}class Zx extends wg{}let Yv;ei("HeatmapBucket",Zx,{omit:["layers"]});var cS={get paint(){return Yv=Yv||new $i({"heatmap-radius":new or(Fe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new or(Fe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yr(Fe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ca(Fe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yr(Fe.paint_heatmap["heatmap-opacity"])})}};function Zv(g,{width:u,height:m},S,L){if(L){if(L instanceof Uint8ClampedArray)L=new Uint8Array(L.buffer);else if(L.length!==u*m*S)throw new RangeError(`mismatched image size. expected: ${L.length} but got: ${u*m*S}`)}else L=new Uint8Array(u*m*S);return g.width=u,g.height=m,g.data=L,g}function Kx(g,{width:u,height:m},S){if(u===g.width&&m===g.height)return;const L=Zv({},{width:u,height:m},S);jy(g,L,{x:0,y:0},{x:0,y:0},{width:Math.min(g.width,u),height:Math.min(g.height,m)},S),g.width=u,g.height=m,g.data=L.data}function jy(g,u,m,S,L,j){if(L.width===0||L.height===0)return u;if(L.width>g.width||L.height>g.height||m.x>g.width-L.width||m.y>g.height-L.height)throw new RangeError("out of range source coordinates for image copy");if(L.width>u.width||L.height>u.height||S.x>u.width-L.width||S.y>u.height-L.height)throw new RangeError("out of range destination coordinates for image copy");const V=g.data,J=u.data;if(V===J)throw new Error("srcData equals dstData, so image is already copied");for(let oe=0;oe<L.height;oe++){const de=((m.y+oe)*g.width+m.x)*j,be=((S.y+oe)*u.width+S.x)*j;for(let Le=0;Le<L.width*j;Le++)J[be+Le]=V[de+Le]}return u}class Kv{constructor(u,m){Zv(this,u,1,m)}resize(u){Kx(this,u,1)}clone(){return new Kv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,m,S,L,j){jy(u,m,S,L,j,1)}}class rh{constructor(u,m){Zv(this,u,4,m)}resize(u){Kx(this,u,4)}replace(u,m){m?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new rh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,m,S,L,j){jy(u,m,S,L,j,4)}}function hu(g){const u={},m=g.resolution||256,S=g.clips?g.clips.length:1,L=g.image||new rh({width:m,height:S});if(Math.log(m)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${m}`);const j=(V,J,oe)=>{u[g.evaluationKey]=oe;const de=g.expression.evaluate(u);L.data[V+J+0]=Math.floor(255*de.r/de.a),L.data[V+J+1]=Math.floor(255*de.g/de.a),L.data[V+J+2]=Math.floor(255*de.b/de.a),L.data[V+J+3]=Math.floor(255*de.a)};if(g.clips)for(let V=0,J=0;V<S;++V,J+=4*m)for(let oe=0,de=0;oe<m;oe++,de+=4){const be=oe/(m-1),{start:Le,end:$e}=g.clips[V];j(J,de,Le*(1-be)+$e*be)}else for(let V=0,J=0;V<m;V++,J+=4)j(0,J,V/(m-1));return L}ei("AlphaImage",Kv),ei("RGBAImage",rh);const fu="big-fb";class hS extends ga{createBucket(u){return new Zx(u)}constructor(u){super(u,cS),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(fu)&&this.heatmapFbos.delete(fu)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Jx;var fS={get paint(){return Jx=Jx||new $i({"hillshade-illumination-direction":new yr(Fe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yr(Fe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yr(Fe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yr(Fe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yr(Fe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yr(Fe.paint_hillshade["hillshade-accent-color"])})}};class dS extends ga{constructor(u){super(u,fS)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const pS=Ei([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gy}=pS;function Jv(g,u,m){const S=m.patternDependencies;let L=!1;for(const j of u){const V=j.paint.get(`${g}-pattern`);V.isConstant()||(L=!0);const J=V.constantOr(null);J&&(L=!0,S[J.to]=!0,S[J.from]=!0)}return L}function Vy(g,u,m,S,L){const j=L.patternDependencies;for(const V of u){const J=V.paint.get(`${g}-pattern`).value;if(J.kind!=="constant"){let oe=J.evaluate({zoom:S-1},m,{},L.availableImages),de=J.evaluate({zoom:S},m,{},L.availableImages),be=J.evaluate({zoom:S+1},m,{},L.availableImages);oe=oe&&oe.name?oe.name:oe,de=de&&de.name?de.name:de,be=be&&be.name?be.name:be,j[oe]=!0,j[de]=!0,j[be]=!0,m.patterns[V.id]={min:oe,mid:de,max:be}}}return m}function Qx(g,u,m,S,L){let j;if(L===function(V,J,oe,de){let be=0;for(let Le=J,$e=oe-de;Le<oe;Le+=de)be+=(V[$e]-V[Le])*(V[Le+1]+V[$e+1]),$e=Le;return be}(g,u,m,S)>0)for(let V=u;V<m;V+=S)j=_S(V/S|0,g[V],g[V+1],j);else for(let V=m-S;V>=u;V-=S)j=_S(V/S|0,g[V],g[V+1],j);return j&&ih(j,j.next)&&(Im(j),j=j.next),j}function Fp(g,u){if(!g)return g;u||(u=g);let m,S=g;do if(m=!1,S.steiner||!ih(S,S.next)&&nl(S.prev,S,S.next)!==0)S=S.next;else{if(Im(S),S=u=S.prev,S===S.next)break;m=!0}while(m||S!==u);return u}function Tg(g,u,m,S,L,j,V){if(!g)return;!V&&j&&function(oe,de,be,Le){let $e=oe;do $e.z===0&&($e.z=Qv($e.x,$e.y,de,be,Le)),$e.prevZ=$e.prev,$e.nextZ=$e.next,$e=$e.next;while($e!==oe);$e.prevZ.nextZ=null,$e.prevZ=null,function(Je){let tt,ct=1;do{let Rt,Ht=Je;Je=null;let fn=null;for(tt=0;Ht;){tt++;let Kt=Ht,Ke=0;for(let tn=0;tn<ct&&(Ke++,Kt=Kt.nextZ,Kt);tn++);let Ct=ct;for(;Ke>0||Ct>0&&Kt;)Ke!==0&&(Ct===0||!Kt||Ht.z<=Kt.z)?(Rt=Ht,Ht=Ht.nextZ,Ke--):(Rt=Kt,Kt=Kt.nextZ,Ct--),fn?fn.nextZ=Rt:Je=Rt,Rt.prevZ=fn,fn=Rt;Ht=Kt}fn.nextZ=null,ct*=2}while(tt>1)}($e)}(g,S,L,j);let J=g;for(;g.prev!==g.next;){const oe=g.prev,de=g.next;if(j?tb(g,S,L,j):eb(g))u.push(oe.i,g.i,de.i),Im(g),g=de.next,J=de.next;else if((g=de)===J){V?V===1?Tg(g=gS(Fp(g),u),u,m,S,L,j,2):V===2&&nb(g,u,m,S,L,j):Tg(Fp(g),u,m,S,L,j,1);break}}}function eb(g){const u=g.prev,m=g,S=g.next;if(nl(u,m,S)>=0)return!1;const L=u.x,j=m.x,V=S.x,J=u.y,oe=m.y,de=S.y,be=Math.min(L,j,V),Le=Math.min(J,oe,de),$e=Math.max(L,j,V),Je=Math.max(J,oe,de);let tt=S.next;for(;tt!==u;){if(tt.x>=be&&tt.x<=$e&&tt.y>=Le&&tt.y<=Je&&Cg(L,J,j,oe,V,de,tt.x,tt.y)&&nl(tt.prev,tt,tt.next)>=0)return!1;tt=tt.next}return!0}function tb(g,u,m,S){const L=g.prev,j=g,V=g.next;if(nl(L,j,V)>=0)return!1;const J=L.x,oe=j.x,de=V.x,be=L.y,Le=j.y,$e=V.y,Je=Math.min(J,oe,de),tt=Math.min(be,Le,$e),ct=Math.max(J,oe,de),Rt=Math.max(be,Le,$e),Ht=Qv(Je,tt,u,m,S),fn=Qv(ct,Rt,u,m,S);let Kt=g.prevZ,Ke=g.nextZ;for(;Kt&&Kt.z>=Ht&&Ke&&Ke.z<=fn;){if(Kt.x>=Je&&Kt.x<=ct&&Kt.y>=tt&&Kt.y<=Rt&&Kt!==L&&Kt!==V&&Cg(J,be,oe,Le,de,$e,Kt.x,Kt.y)&&nl(Kt.prev,Kt,Kt.next)>=0||(Kt=Kt.prevZ,Ke.x>=Je&&Ke.x<=ct&&Ke.y>=tt&&Ke.y<=Rt&&Ke!==L&&Ke!==V&&Cg(J,be,oe,Le,de,$e,Ke.x,Ke.y)&&nl(Ke.prev,Ke,Ke.next)>=0))return!1;Ke=Ke.nextZ}for(;Kt&&Kt.z>=Ht;){if(Kt.x>=Je&&Kt.x<=ct&&Kt.y>=tt&&Kt.y<=Rt&&Kt!==L&&Kt!==V&&Cg(J,be,oe,Le,de,$e,Kt.x,Kt.y)&&nl(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.prevZ}for(;Ke&&Ke.z<=fn;){if(Ke.x>=Je&&Ke.x<=ct&&Ke.y>=tt&&Ke.y<=Rt&&Ke!==L&&Ke!==V&&Cg(J,be,oe,Le,de,$e,Ke.x,Ke.y)&&nl(Ke.prev,Ke,Ke.next)>=0)return!1;Ke=Ke.nextZ}return!0}function gS(g,u){let m=g;do{const S=m.prev,L=m.next.next;!ih(S,L)&&ib(S,m,m.next,L)&&ms(S,L)&&ms(L,S)&&(u.push(S.i,m.i,L.i),Im(m),Im(m.next),m=g=L),m=m.next}while(m!==g);return Fp(m)}function nb(g,u,m,S,L,j){let V=g;do{let J=V.next.next;for(;J!==V.prev;){if(V.i!==J.i&&EA(V,J)){let oe=yS(V,J);return V=Fp(V,V.next),oe=Fp(oe,oe.next),Tg(V,u,m,S,L,j,0),void Tg(oe,u,m,S,L,j,0)}J=J.next}V=V.next}while(V!==g)}function Hy(g,u){let m=g.x-u.x;return m===0&&(m=g.y-u.y,m===0)&&(m=(g.next.y-g.y)/(g.next.x-g.x)-(u.next.y-u.y)/(u.next.x-u.x)),m}function rb(g,u){const m=function(L,j){let V=j;const J=L.x,oe=L.y;let de,be=-1/0;if(ih(L,V))return V;do{if(ih(L,V.next))return V.next;if(oe<=V.y&&oe>=V.next.y&&V.next.y!==V.y){const ct=V.x+(oe-V.y)*(V.next.x-V.x)/(V.next.y-V.y);if(ct<=J&&ct>be&&(be=ct,de=V.x<V.next.x?V:V.next,ct===J))return de}V=V.next}while(V!==j);if(!de)return null;const Le=de,$e=de.x,Je=de.y;let tt=1/0;V=de;do{if(J>=V.x&&V.x>=$e&&J!==V.x&&sd(oe<Je?J:be,oe,$e,Je,oe<Je?be:J,oe,V.x,V.y)){const ct=Math.abs(oe-V.y)/(J-V.x);ms(V,L)&&(ct<tt||ct===tt&&(V.x>de.x||V.x===de.x&&mS(de,V)))&&(de=V,tt=ct)}V=V.next}while(V!==Le);return de}(g,u);if(!m)return u;const S=yS(m,g);return Fp(S,S.next),Fp(m,m.next)}function mS(g,u){return nl(g.prev,g,u.prev)<0&&nl(u.next,g,g.next)<0}function Qv(g,u,m,S,L){return(g=1431655765&((g=858993459&((g=252645135&((g=16711935&((g=(g-m)*L|0)|g<<8))|g<<4))|g<<2))|g<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-S)*L|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function vS(g){let u=g,m=g;do(u.x<m.x||u.x===m.x&&u.y<m.y)&&(m=u),u=u.next;while(u!==g);return m}function sd(g,u,m,S,L,j,V,J){return(L-V)*(u-J)>=(g-V)*(j-J)&&(g-V)*(S-J)>=(m-V)*(u-J)&&(m-V)*(j-J)>=(L-V)*(S-J)}function Cg(g,u,m,S,L,j,V,J){return!(g===V&&u===J)&&sd(g,u,m,S,L,j,V,J)}function EA(g,u){return g.next.i!==u.i&&g.prev.i!==u.i&&!function(m,S){let L=m;do{if(L.i!==m.i&&L.next.i!==m.i&&L.i!==S.i&&L.next.i!==S.i&&ib(L,L.next,m,S))return!0;L=L.next}while(L!==m);return!1}(g,u)&&(ms(g,u)&&ms(u,g)&&function(m,S){let L=m,j=!1;const V=(m.x+S.x)/2,J=(m.y+S.y)/2;do L.y>J!=L.next.y>J&&L.next.y!==L.y&&V<(L.next.x-L.x)*(J-L.y)/(L.next.y-L.y)+L.x&&(j=!j),L=L.next;while(L!==m);return j}(g,u)&&(nl(g.prev,g,u.prev)||nl(g,u.prev,u))||ih(g,u)&&nl(g.prev,g,g.next)>0&&nl(u.prev,u,u.next)>0)}function nl(g,u,m){return(u.y-g.y)*(m.x-u.x)-(u.x-g.x)*(m.y-u.y)}function ih(g,u){return g.x===u.x&&g.y===u.y}function ib(g,u,m,S){const L=Bp(nl(g,u,m)),j=Bp(nl(g,u,S)),V=Bp(nl(m,S,g)),J=Bp(nl(m,S,u));return L!==j&&V!==J||!(L!==0||!Mg(g,m,u))||!(j!==0||!Mg(g,S,u))||!(V!==0||!Mg(m,g,S))||!(J!==0||!Mg(m,u,S))}function Mg(g,u,m){return u.x<=Math.max(g.x,m.x)&&u.x>=Math.min(g.x,m.x)&&u.y<=Math.max(g.y,m.y)&&u.y>=Math.min(g.y,m.y)}function Bp(g){return g>0?1:g<0?-1:0}function ms(g,u){return nl(g.prev,g,g.next)<0?nl(g,u,g.next)>=0&&nl(g,g.prev,u)>=0:nl(g,u,g.prev)<0||nl(g,g.next,u)<0}function yS(g,u){const m=Ag(g.i,g.x,g.y),S=Ag(u.i,u.x,u.y),L=g.next,j=u.prev;return g.next=u,u.prev=g,m.next=L,L.prev=m,S.next=m,m.prev=S,j.next=S,S.prev=j,S}function _S(g,u,m,S){const L=Ag(g,u,m);return S?(L.next=S.next,L.prev=S,S.next.prev=L,S.next=L):(L.prev=L,L.next=L),L}function Im(g){g.next.prev=g.prev,g.prev.next=g.next,g.prevZ&&(g.prevZ.nextZ=g.nextZ),g.nextZ&&(g.nextZ.prevZ=g.prevZ)}function Ag(g,u,m){return{i:g,x:u,y:m,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Dh{constructor(u,m){if(m>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=m}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class e0{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}e0.noSubdivision=new e0({fill:new Dh(0,0),line:new Dh(0,0),tile:new Dh(0,0),stencil:new Dh(0,0),circle:1}),ei("SubdivisionGranularityExpression",Dh),ei("SubdivisionGranularitySetting",e0);const Rg=-32768,Gd=32767;class ld{constructor(u,m){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=se/u,this._canonical=m}_getKey(u,m){return(u+=32768)<<16|(m+=32768)<<0}_vertexToIndex(u,m){if(u<-32768||m<-32768||u>32767||m>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const S=0|Math.round(u),L=0|Math.round(m),j=this._getKey(S,L);if(this._vertexDictionary.has(j))return this._vertexDictionary.get(j);const V=this._vertexBuffer.length/2;return this._vertexDictionary.set(j,V),this._vertexBuffer.push(S,L),V}_subdivideTrianglesScanline(u){if(this._granularity<2)return function(L,j){const V=[];for(let J=0;J<j.length;J+=3){const oe=j[J],de=j[J+1],be=j[J+2],Le=L[2*oe],$e=L[2*oe+1];(L[2*de]-Le)*(L[2*be+1]-$e)-(L[2*de+1]-$e)*(L[2*be]-Le)>0?(V.push(oe),V.push(be),V.push(de)):(V.push(oe),V.push(de),V.push(be))}return V}(this._vertexBuffer,u);const m=[],S=u.length;for(let L=0;L<S;L+=3){const j=[u[L+0],u[L+1],u[L+2]],V=[this._vertexBuffer[2*u[L+0]+0],this._vertexBuffer[2*u[L+0]+1],this._vertexBuffer[2*u[L+1]+0],this._vertexBuffer[2*u[L+1]+1],this._vertexBuffer[2*u[L+2]+0],this._vertexBuffer[2*u[L+2]+1]];let J=1/0,oe=1/0,de=-1/0,be=-1/0;for(let ct=0;ct<3;ct++){const Rt=V[2*ct],Ht=V[2*ct+1];J=Math.min(J,Rt),de=Math.max(de,Rt),oe=Math.min(oe,Ht),be=Math.max(be,Ht)}if(J===de||oe===be)continue;const Le=Math.floor(J/this._granularityCellSize),$e=Math.ceil(de/this._granularityCellSize),Je=Math.floor(oe/this._granularityCellSize),tt=Math.ceil(be/this._granularityCellSize);if(Le!==$e||Je!==tt)for(let ct=Je;ct<tt;ct++){const Rt=this._scanlineGenerateVertexRingForCellRow(ct,V,j);xS(this._vertexBuffer,Rt,m)}else m.push(...j)}return m}_scanlineGenerateVertexRingForCellRow(u,m,S){const L=u*this._granularityCellSize,j=L+this._granularityCellSize,V=[];for(let J=0;J<3;J++){const oe=m[2*J],de=m[2*J+1],be=m[2*(J+1)%6],Le=m[(2*(J+1)+1)%6],$e=m[2*(J+2)%6],Je=m[(2*(J+2)+1)%6],tt=be-oe,ct=Le-de,Rt=tt===0,Ht=ct===0,fn=(L-de)/ct,Kt=(j-de)/ct,Ke=Math.min(fn,Kt),Ct=Math.max(fn,Kt);if(!Ht&&(Ke>=1||Ct<=0)||Ht&&(de<L||de>j)){Le>=L&&Le<=j&&V.push(S[(J+1)%3]);continue}!Ht&&Ke>0&&V.push(this._vertexToIndex(oe+tt*Ke,de+ct*Ke));const tn=oe+tt*Math.max(Ke,0),jn=oe+tt*Math.min(Ct,1);Rt||this._generateIntraEdgeVertices(V,oe,de,be,Le,tn,jn),!Ht&&Ct<1&&V.push(this._vertexToIndex(oe+tt*Ct,de+ct*Ct)),(Ht||Le>=L&&Le<=j)&&V.push(S[(J+1)%3]),!Ht&&(Le<=L||Le>=j)&&this._generateInterEdgeVertices(V,oe,de,be,Le,$e,Je,jn,L,j)}return V}_generateIntraEdgeVertices(u,m,S,L,j,V,J){const oe=L-m,de=j-S,be=de===0,Le=be?Math.min(m,L):Math.min(V,J),$e=be?Math.max(m,L):Math.max(V,J),Je=Math.floor(Le/this._granularityCellSize)+1,tt=Math.ceil($e/this._granularityCellSize)-1;if(be?m<L:V<J)for(let ct=Je;ct<=tt;ct++){const Rt=ct*this._granularityCellSize;u.push(this._vertexToIndex(Rt,S+de*(Rt-m)/oe))}else for(let ct=tt;ct>=Je;ct--){const Rt=ct*this._granularityCellSize;u.push(this._vertexToIndex(Rt,S+de*(Rt-m)/oe))}}_generateInterEdgeVertices(u,m,S,L,j,V,J,oe,de,be){const Le=j-S,$e=V-L,Je=J-j,tt=(de-j)/Je,ct=(be-j)/Je,Rt=Math.min(tt,ct),Ht=Math.max(tt,ct),fn=L+$e*Rt;let Kt=Math.floor(Math.min(fn,oe)/this._granularityCellSize)+1,Ke=Math.ceil(Math.max(fn,oe)/this._granularityCellSize)-1,Ct=oe<fn;const tn=Je===0;if(tn&&(J===de||J===be))return;if(tn||Rt>=1||Ht<=0){const Cr=S-J,Xn=V+(m-V)*Math.min((de-J)/Cr,(be-J)/Cr);Kt=Math.floor(Math.min(Xn,oe)/this._granularityCellSize)+1,Ke=Math.ceil(Math.max(Xn,oe)/this._granularityCellSize)-1,Ct=oe<Xn}const jn=Le>0?be:de;if(Ct)for(let Cr=Kt;Cr<=Ke;Cr++)u.push(this._vertexToIndex(Cr*this._granularityCellSize,jn));else for(let Cr=Ke;Cr>=Kt;Cr--)u.push(this._vertexToIndex(Cr*this._granularityCellSize,jn))}_generateOutline(u){const m=[];for(const S of u){const L=Vd(S,this._granularity,!0),j=this._pointArrayToIndices(L),V=[];for(let J=1;J<j.length;J++)V.push(j[J-1]),V.push(j[J]);m.push(V)}return m}_handlePoles(u){let m=!1,S=!1;this._canonical&&(this._canonical.y===0&&(m=!0),this._canonical.y===(1<<this._canonical.z)-1&&(S=!0)),(m||S)&&this._fillPoles(u,m,S)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let m=0;m<u.length;m+=2){const S=u[m+1];S===Rg&&(u[m+1]=-32767),S===Gd&&(u[m+1]=32766)}}_generatePoleQuad(u,m,S,L,j,V){L>j!=(V===Rg)?(u.push(m),u.push(S),u.push(this._vertexToIndex(L,V)),u.push(S),u.push(this._vertexToIndex(j,V)),u.push(this._vertexToIndex(L,V))):(u.push(S),u.push(m),u.push(this._vertexToIndex(L,V)),u.push(this._vertexToIndex(j,V)),u.push(S),u.push(this._vertexToIndex(L,V)))}_fillPoles(u,m,S){const L=this._vertexBuffer,j=se,V=u.length;for(let J=2;J<V;J+=3){const oe=u[J-2],de=u[J-1],be=u[J],Le=L[2*oe],$e=L[2*oe+1],Je=L[2*de],tt=L[2*de+1],ct=L[2*be],Rt=L[2*be+1];m&&($e===0&&tt===0&&this._generatePoleQuad(u,oe,de,Le,Je,Rg),tt===0&&Rt===0&&this._generatePoleQuad(u,de,be,Je,ct,Rg),Rt===0&&$e===0&&this._generatePoleQuad(u,be,oe,ct,Le,Rg)),S&&($e===j&&tt===j&&this._generatePoleQuad(u,oe,de,Le,Je,Gd),tt===j&&Rt===j&&this._generatePoleQuad(u,de,be,Je,ct,Gd),Rt===j&&$e===j&&this._generatePoleQuad(u,be,oe,ct,Le,Gd))}}_initializeVertices(u){for(let m=0;m<u.length;m+=2)this._vertexToIndex(u[m],u[m+1])}subdividePolygonInternal(u,m){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:S,holeIndices:L}=function(J){const oe=[],de=[];for(const be of J)if(be.length!==0){be!==J[0]&&oe.push(de.length/2);for(let Le=0;Le<be.length;Le++)de.push(be[Le].x),de.push(be[Le].y)}return{flattened:de,holeIndices:oe}}(u);let j;this._initializeVertices(S);try{const J=function(de,be,Le=2){const $e=be&&be.length,Je=$e?be[0]*Le:de.length;let tt=Qx(de,0,Je,Le,!0);const ct=[];if(!tt||tt.next===tt.prev)return ct;let Rt,Ht,fn;if($e&&(tt=function(Kt,Ke,Ct,tn){const jn=[];for(let Cr=0,Xn=Ke.length;Cr<Xn;Cr++){const rr=Qx(Kt,Ke[Cr]*tn,Cr<Xn-1?Ke[Cr+1]*tn:Kt.length,tn,!1);rr===rr.next&&(rr.steiner=!0),jn.push(vS(rr))}jn.sort(Hy);for(let Cr=0;Cr<jn.length;Cr++)Ct=rb(jn[Cr],Ct);return Ct}(de,be,tt,Le)),de.length>80*Le){Rt=1/0,Ht=1/0;let Kt=-1/0,Ke=-1/0;for(let Ct=Le;Ct<Je;Ct+=Le){const tn=de[Ct],jn=de[Ct+1];tn<Rt&&(Rt=tn),jn<Ht&&(Ht=jn),tn>Kt&&(Kt=tn),jn>Ke&&(Ke=jn)}fn=Math.max(Kt-Rt,Ke-Ht),fn=fn!==0?32767/fn:0}return Tg(tt,ct,Le,Rt,Ht,fn,0),ct}(S,L),oe=this._convertIndices(S,J);j=this._subdivideTrianglesScanline(oe)}catch(J){console.error(J)}let V=[];return m&&(V=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(j),{verticesFlattened:this._vertexBuffer,indicesTriangles:j,indicesLineList:V}}_convertIndices(u,m){const S=[];for(let L=0;L<m.length;L++)S.push(this._vertexToIndex(u[2*m[L]],u[2*m[L]+1]));return S}_pointArrayToIndices(u){const m=[];for(let S=0;S<u.length;S++){const L=u[S];m.push(this._vertexToIndex(L.x,L.y))}return m}}function ab(g,u,m,S=!0){return new ld(m,u).subdividePolygonInternal(g,S)}function Vd(g,u,m=!1){if(!g||g.length<1)return[];if(g.length<2)return[];const S=g[0],L=g[g.length-1],j=m&&(S.x!==L.x||S.y!==L.y);if(u<2)return j?[...g,g[0]]:[...g];const V=Math.floor(se/u),J=[];J.push(new E(g[0].x,g[0].y));const oe=g.length,de=j?oe:oe-1;for(let be=0;be<de;be++){const Le=g[be],$e=be<oe-1?g[be+1]:g[0],Je=Le.x,tt=Le.y,ct=$e.x,Rt=$e.y,Ht=Je!==ct,fn=tt!==Rt;if(!Ht&&!fn)continue;const Kt=ct-Je,Ke=Rt-tt,Ct=Math.abs(Kt),tn=Math.abs(Ke);let jn=Je,Cr=tt;for(;;){const rr=Kt>0?(Math.floor(jn/V)+1)*V:(Math.ceil(jn/V)-1)*V,Or=Ke>0?(Math.floor(Cr/V)+1)*V:(Math.ceil(Cr/V)-1)*V,Tr=Math.abs(jn-rr),Ur=Math.abs(Cr-Or),lr=Math.abs(jn-ct),li=Math.abs(Cr-Rt),Bi=Ht?Tr/Ct:Number.POSITIVE_INFINITY,Li=fn?Ur/tn:Number.POSITIVE_INFINITY;if((lr<=Tr||!Ht)&&(li<=Ur||!fn))break;if(Bi<Li&&Ht||!fn){jn=rr,Cr+=Ke*Bi;const Ti=new E(jn,Math.round(Cr));J[J.length-1].x===Ti.x&&J[J.length-1].y===Ti.y||J.push(Ti)}else{jn+=Kt*Li,Cr=Or;const Ti=new E(Math.round(jn),Cr);J[J.length-1].x===Ti.x&&J[J.length-1].y===Ti.y||J.push(Ti)}}const Xn=new E(ct,Rt);J[J.length-1].x===Xn.x&&J[J.length-1].y===Xn.y||J.push(Xn)}return J}function xS(g,u,m){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let S=0,L=g[2*u[0]];for(let oe=1;oe<u.length;oe++){const de=g[2*u[oe]];de<L&&(L=de,S=oe)}const j=u.length;let V=S,J=(V+1)%j;for(;;){const oe=V-1>=0?V-1:j-1,de=(J+1)%j,be=g[2*u[oe]],Le=g[2*u[de]],$e=g[2*u[V]],Je=g[2*u[V]+1],tt=g[2*u[J]+1];let ct=!1;if(be<Le)ct=!0;else if(be>Le)ct=!1;else{const Rt=tt-Je,Ht=-(g[2*u[J]]-$e),fn=Je<tt?1:-1;((be-$e)*Rt+(g[2*u[oe]+1]-Je)*Ht)*fn>((Le-$e)*Rt+(g[2*u[de]+1]-Je)*Ht)*fn&&(ct=!0)}if(ct){const Rt=u[oe],Ht=u[V],fn=u[J];Rt!==Ht&&Rt!==fn&&Ht!==fn&&m.push(fn,Ht,Rt),V--,V<0&&(V=j-1)}else{const Rt=u[de],Ht=u[V],fn=u[J];Rt!==Ht&&Rt!==fn&&Ht!==fn&&m.push(fn,Ht,Rt),J++,J>=j&&(J=0)}if(oe===de)break}}function qy(g,u,m,S,L,j,V,J,oe){const de=L.length/2,be=V&&J&&oe;if(de<fa.MAX_VERTEX_ARRAY_LENGTH){const Le=u.prepareSegment(de,m,S),$e=Le.vertexLength;for(let ct=0;ct<j.length;ct+=3)S.emplaceBack($e+j[ct],$e+j[ct+1],$e+j[ct+2]);let Je,tt;Le.vertexLength+=de,Le.primitiveLength+=j.length/3,be&&(tt=V.prepareSegment(de,m,J),Je=tt.vertexLength,tt.vertexLength+=de);for(let ct=0;ct<L.length;ct+=2)g(L[ct],L[ct+1]);if(be)for(let ct=0;ct<oe.length;ct++){const Rt=oe[ct];for(let Ht=1;Ht<Rt.length;Ht+=2)J.emplaceBack(Je+Rt[Ht-1],Je+Rt[Ht]);tt.primitiveLength+=Rt.length/2}}else(function(Le,$e,Je,tt,ct,Rt){const Ht=[];for(let tn=0;tn<tt.length/2;tn++)Ht.push(-1);const fn={count:0};let Kt=0,Ke=Le.getOrCreateLatestSegment($e,Je),Ct=Ke.vertexLength;for(let tn=2;tn<ct.length;tn+=3){const jn=ct[tn-2],Cr=ct[tn-1],Xn=ct[tn];let rr=Ht[jn]<Kt,Or=Ht[Cr]<Kt,Tr=Ht[Xn]<Kt;Ke.vertexLength+((rr?1:0)+(Or?1:0)+(Tr?1:0))>fa.MAX_VERTEX_ARRAY_LENGTH&&(Ke=Le.createNewSegment($e,Je),Kt=fn.count,rr=!0,Or=!0,Tr=!0,Ct=0);const Ur=Pg(Ht,tt,Rt,fn,jn,rr,Ke),lr=Pg(Ht,tt,Rt,fn,Cr,Or,Ke),li=Pg(Ht,tt,Rt,fn,Xn,Tr,Ke);Je.emplaceBack(Ct+Ur-Kt,Ct+lr-Kt,Ct+li-Kt),Ke.primitiveLength++}})(u,m,S,L,j,g),be&&function(Le,$e,Je,tt,ct,Rt){const Ht=[];for(let tn=0;tn<tt.length/2;tn++)Ht.push(-1);const fn={count:0};let Kt=0,Ke=Le.getOrCreateLatestSegment($e,Je),Ct=Ke.vertexLength;for(let tn=0;tn<ct.length;tn++){const jn=ct[tn];for(let Cr=1;Cr<ct[tn].length;Cr+=2){const Xn=jn[Cr-1],rr=jn[Cr];let Or=Ht[Xn]<Kt,Tr=Ht[rr]<Kt;Ke.vertexLength+((Or?1:0)+(Tr?1:0))>fa.MAX_VERTEX_ARRAY_LENGTH&&(Ke=Le.createNewSegment($e,Je),Kt=fn.count,Or=!0,Tr=!0,Ct=0);const Ur=Pg(Ht,tt,Rt,fn,Xn,Or,Ke),lr=Pg(Ht,tt,Rt,fn,rr,Tr,Ke);Je.emplaceBack(Ct+Ur-Kt,Ct+lr-Kt),Ke.primitiveLength++}}}(V,m,J,L,oe,g),u.forceNewSegmentOnNextPrepare(),V==null||V.forceNewSegmentOnNextPrepare()}function Pg(g,u,m,S,L,j,V){if(j){const J=S.count;return m(u[2*L],u[2*L+1]),g[L]=S.count,S.count++,V.vertexLength++,J}return g[L]}class Dm{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new sn,this.indexArray=new pr,this.indexArray2=new di,this.programConfigurations=new Kh(u.layers,u.zoom),this.segments=new fa,this.segments2=new fa,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,S){this.hasPattern=Jv("fill",this.layers,m);const L=this.layers[0].layout.get("fill-sort-key"),j=!L.isConstant(),V=[];for(const{feature:J,id:oe,index:de,sourceLayerIndex:be}of u){const Le=this.layers[0]._featureFilter.needGeometry,$e=Ih(J,Le);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),$e,S))continue;const Je=j?L.evaluate($e,{},S,m.availableImages):void 0,tt={id:oe,properties:J.properties,type:J.type,sourceLayerIndex:be,index:de,geometry:Le?$e.geometry:nh(J),patterns:{},sortKey:Je};V.push(tt)}j&&V.sort((J,oe)=>J.sortKey-oe.sortKey);for(const J of V){const{geometry:oe,index:de,sourceLayerIndex:be}=J;if(this.hasPattern){const Le=Vy("fill",this.layers,J,this.zoom,m);this.patternFeatures.push(Le)}else this.addFeature(J,oe,de,S,{},m.subdivisionGranularity);m.featureIndex.insert(u[de].feature,oe,de,be,this.index)}}update(u,m,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,S)}addFeatures(u,m,S){for(const L of this.patternFeatures)this.addFeature(L,L.geometry,L.index,m,S,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Gy),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,m,S,L,j,V){for(const J of Ll(m,500)){const oe=ab(J,L,V.fill.getGranularityForZoomLevel(L.z)),de=this.layoutVertexArray;qy((be,Le)=>{de.emplaceBack(be,Le)},this.segments,this.layoutVertexArray,this.indexArray,oe.verticesFlattened,oe.indicesTriangles,this.segments2,this.indexArray2,oe.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,S,j,L)}}let ob,ud;ei("FillBucket",Dm,{omit:["layers","patternFeatures"]});var zl={get paint(){return ud=ud||new $i({"fill-antialias":new yr(Fe.paint_fill["fill-antialias"]),"fill-opacity":new or(Fe.paint_fill["fill-opacity"]),"fill-color":new or(Fe.paint_fill["fill-color"]),"fill-outline-color":new or(Fe.paint_fill["fill-outline-color"]),"fill-translate":new yr(Fe.paint_fill["fill-translate"]),"fill-translate-anchor":new yr(Fe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ga(Fe.paint_fill["fill-pattern"])})},get layout(){return ob=ob||new $i({"fill-sort-key":new or(Fe.layout_fill["fill-sort-key"])})}};class sb extends ga{constructor(u){super(u,zl)}recalculate(u,m){super.recalculate(u,m);const S=this.paint._values["fill-outline-color"];S.value.kind==="constant"&&S.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Dm(u)}queryRadius(){return Pm(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:m,transform:S,pixelsToTileUnits:L}){return Wx(Xv(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-S.bearingInRadians,L),m)}isTileClipped(){return!0}}const bS=Ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Du=Ei([{name:"a_centroid",components:2,type:"Int16"}],4),{members:TA}=bS;var $y,lb,Ps,Dc,Pf,ub,cb,Wy={};function Xy(){if(lb)return $y;lb=1;var g=v();function u(L,j,V,J,oe){this.properties={},this.extent=V,this.type=0,this._pbf=L,this._geometry=-1,this._keys=J,this._values=oe,L.readFields(m,this,j)}function m(L,j,V){L==1?j.id=V.readVarint():L==2?function(J,oe){for(var de=J.readVarint()+J.pos;J.pos<de;){var be=oe._keys[J.readVarint()],Le=oe._values[J.readVarint()];oe.properties[be]=Le}}(V,j):L==3?j.type=V.readVarint():L==4&&(j._geometry=V.pos)}function S(L){for(var j,V,J=0,oe=0,de=L.length,be=de-1;oe<de;be=oe++)J+=((V=L[be]).x-(j=L[oe]).x)*(j.y+V.y);return J}return $y=u,u.types=["Unknown","Point","LineString","Polygon"],u.prototype.loadGeometry=function(){var L=this._pbf;L.pos=this._geometry;for(var j,V=L.readVarint()+L.pos,J=1,oe=0,de=0,be=0,Le=[];L.pos<V;){if(oe<=0){var $e=L.readVarint();J=7&$e,oe=$e>>3}if(oe--,J===1||J===2)de+=L.readSVarint(),be+=L.readSVarint(),J===1&&(j&&Le.push(j),j=[]),j.push(new g(de,be));else{if(J!==7)throw new Error("unknown command "+J);j&&j.push(j[0].clone())}}return j&&Le.push(j),Le},u.prototype.bbox=function(){var L=this._pbf;L.pos=this._geometry;for(var j=L.readVarint()+L.pos,V=1,J=0,oe=0,de=0,be=1/0,Le=-1/0,$e=1/0,Je=-1/0;L.pos<j;){if(J<=0){var tt=L.readVarint();V=7&tt,J=tt>>3}if(J--,V===1||V===2)(oe+=L.readSVarint())<be&&(be=oe),oe>Le&&(Le=oe),(de+=L.readSVarint())<$e&&($e=de),de>Je&&(Je=de);else if(V!==7)throw new Error("unknown command "+V)}return[be,$e,Le,Je]},u.prototype.toGeoJSON=function(L,j,V){var J,oe,de=this.extent*Math.pow(2,V),be=this.extent*L,Le=this.extent*j,$e=this.loadGeometry(),Je=u.types[this.type];function tt(Ht){for(var fn=0;fn<Ht.length;fn++){var Kt=Ht[fn];Ht[fn]=[360*(Kt.x+be)/de-180,360/Math.PI*Math.atan(Math.exp((180-360*(Kt.y+Le)/de)*Math.PI/180))-90]}}switch(this.type){case 1:var ct=[];for(J=0;J<$e.length;J++)ct[J]=$e[J][0];tt($e=ct);break;case 2:for(J=0;J<$e.length;J++)tt($e[J]);break;case 3:for($e=function(Ht){var fn=Ht.length;if(fn<=1)return[Ht];for(var Kt,Ke,Ct=[],tn=0;tn<fn;tn++){var jn=S(Ht[tn]);jn!==0&&(Ke===void 0&&(Ke=jn<0),Ke===jn<0?(Kt&&Ct.push(Kt),Kt=[Ht[tn]]):Kt.push(Ht[tn]))}return Kt&&Ct.push(Kt),Ct}($e),J=0;J<$e.length;J++)for(oe=0;oe<$e[J].length;oe++)tt($e[J][oe])}$e.length===1?$e=$e[0]:Je="Multi"+Je;var Rt={type:"Feature",geometry:{type:Je,coordinates:$e},properties:this.properties};return"id"in this&&(Rt.id=this.id),Rt},$y}function ah(){if(Dc)return Ps;Dc=1;var g=Xy();function u(S,L){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=S,this._keys=[],this._values=[],this._features=[],S.readFields(m,this,L),this.length=this._features.length}function m(S,L,j){S===15?L.version=j.readVarint():S===1?L.name=j.readString():S===5?L.extent=j.readVarint():S===2?L._features.push(j.pos):S===3?L._keys.push(j.readString()):S===4&&L._values.push(function(V){for(var J=null,oe=V.readVarint()+V.pos;V.pos<oe;){var de=V.readVarint()>>3;J=de===1?V.readString():de===2?V.readFloat():de===3?V.readDouble():de===4?V.readVarint64():de===5?V.readVarint():de===6?V.readSVarint():de===7?V.readBoolean():null}return J}(j))}return Ps=u,u.prototype.feature=function(S){if(S<0||S>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[S];var L=this._pbf.readVarint()+this._pbf.pos;return new g(this._pbf,L,this.extent,this._keys,this._values)},Ps}function ef(){return cb||(cb=1,Wy.VectorTile=function(){if(ub)return Pf;ub=1;var g=ah();function u(m,S,L){if(m===3){var j=new g(L,L.readVarint()+L.pos);j.length&&(S[j.name]=j)}}return Pf=function(m,S){this.layers=m.readFields(u,{},S)},Pf}(),Wy.VectorTileFeature=Xy(),Wy.VectorTileLayer=ah()),Wy}var Lm=c(ef());const Lh=Lm.VectorTileFeature.types,Yy=Math.pow(2,13);function tf(g,u,m,S,L,j,V,J){g.emplaceBack(u,m,2*Math.floor(S*Yy)+V,L*Yy*2,j*Yy*2,Math.round(J))}class Hd{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new pn,this.centroidVertexArray=new nn,this.indexArray=new pr,this.programConfigurations=new Kh(u.layers,u.zoom),this.segments=new fa,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,S){this.features=[],this.hasPattern=Jv("fill-extrusion",this.layers,m);for(const{feature:L,id:j,index:V,sourceLayerIndex:J}of u){const oe=this.layers[0]._featureFilter.needGeometry,de=Ih(L,oe);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),de,S))continue;const be={id:j,sourceLayerIndex:J,index:V,geometry:oe?de.geometry:nh(L),properties:L.properties,type:L.type,patterns:{}};this.hasPattern?this.features.push(Vy("fill-extrusion",this.layers,be,this.zoom,m)):this.addFeature(be,be.geometry,V,S,{},m.subdivisionGranularity),m.featureIndex.insert(L,be.geometry,V,J,this.index,!0)}}addFeatures(u,m,S){for(const L of this.features){const{geometry:j}=L;this.addFeature(L,j,L.index,m,S,u.subdivisionGranularity)}}update(u,m,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,S)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,TA),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,Du.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,m,S,L,j,V){for(const J of Ll(m,500)){const oe={x:0,y:0,sampleCount:0},de=this.layoutVertexArray.length;this.processPolygon(oe,L,u,J,V);const be=this.layoutVertexArray.length-de,Le=Math.floor(oe.x/oe.sampleCount),$e=Math.floor(oe.y/oe.sampleCount);for(let Je=0;Je<be;Je++)this.centroidVertexArray.emplaceBack(Le,$e)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,S,j,L)}processPolygon(u,m,S,L,j){if(L.length<1||Zy(L[0]))return;for(const Le of L)Le.length!==0&&zp(u,Le);const V={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},J=j.fill.getGranularityForZoomLevel(m.z),oe=Lh[S.type]==="Polygon";for(const Le of L){if(Le.length===0||Zy(Le))continue;const $e=Vd(Le,J,oe);this._generateSideFaces($e,V)}if(!oe)return;const de=ab(L,m,J,!1),be=this.layoutVertexArray;qy((Le,$e)=>{tf(be,Le,$e,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,de.verticesFlattened,de.indicesTriangles)}_generateSideFaces(u,m){let S=0;for(let L=1;L<u.length;L++){const j=u[L],V=u[L-1];if(hb(j,V))continue;m.segment.vertexLength+4>fa.MAX_VERTEX_ARRAY_LENGTH&&(m.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const J=j.sub(V)._perp()._unit(),oe=V.dist(j);S+oe>32768&&(S=0),tf(this.layoutVertexArray,j.x,j.y,J.x,J.y,0,0,S),tf(this.layoutVertexArray,j.x,j.y,J.x,J.y,0,1,S),S+=oe,tf(this.layoutVertexArray,V.x,V.y,J.x,J.y,0,0,S),tf(this.layoutVertexArray,V.x,V.y,J.x,J.y,0,1,S);const de=m.segment.vertexLength;this.indexArray.emplaceBack(de,de+2,de+1),this.indexArray.emplaceBack(de+1,de+2,de+3),m.segment.vertexLength+=4,m.segment.primitiveLength+=2}}}function zp(g,u){for(let m=0;m<u.length;m++){const S=u[m];m===u.length-1&&u[0].x===S.x&&u[0].y===S.y||(g.x+=S.x,g.y+=S.y,g.sampleCount++)}}function hb(g,u){return g.x===u.x&&(g.x<0||g.x>se)||g.y===u.y&&(g.y<0||g.y>se)}function Zy(g){return g.every(u=>u.x<0)||g.every(u=>u.x>se)||g.every(u=>u.y<0)||g.every(u=>u.y>se)}let If;ei("FillExtrusionBucket",Hd,{omit:["layers","features"]});var wS={get paint(){return If=If||new $i({"fill-extrusion-opacity":new yr(Fe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new or(Fe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yr(Fe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yr(Fe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ga(Fe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new or(Fe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new or(Fe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yr(Fe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Nm extends ga{constructor(u){super(u,wS)}createBucket(u){return new Hd(u)}queryRadius(){return Pm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:m,featureState:S,geometry:L,transform:j,pixelsToTileUnits:V,pixelPosMatrix:J}){const oe=Xv(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-j.bearingInRadians,V),de=this.paint.get("fill-extrusion-height").evaluate(m,S),be=this.paint.get("fill-extrusion-base").evaluate(m,S),Le=function(Je,tt,ct){const Rt=[];for(const Ht of Je){const fn=[Ht.x,Ht.y,0,1];Q(fn,fn,tt),Rt.push(new E(fn[0]/fn[3],fn[1]/fn[3]))}return Rt}(oe,J),$e=function(Je,tt,ct,Rt){const Ht=[],fn=[],Kt=Rt[8]*tt,Ke=Rt[9]*tt,Ct=Rt[10]*tt,tn=Rt[11]*tt,jn=Rt[8]*ct,Cr=Rt[9]*ct,Xn=Rt[10]*ct,rr=Rt[11]*ct;for(const Or of Je){const Tr=[],Ur=[];for(const lr of Or){const li=lr.x,Bi=lr.y,Li=Rt[0]*li+Rt[4]*Bi+Rt[12],Ti=Rt[1]*li+Rt[5]*Bi+Rt[13],La=Rt[2]*li+Rt[6]*Bi+Rt[14],Is=Rt[3]*li+Rt[7]*Bi+Rt[15],gl=La+Ct,du=Is+tn,pc=Li+jn,Lc=Ti+Cr,pu=La+Xn,ls=Is+rr,Tl=new E((Li+Kt)/du,(Ti+Ke)/du);Tl.z=gl/du,Tr.push(Tl);const Cl=new E(pc/ls,Lc/ls);Cl.z=pu/ls,Ur.push(Cl)}Ht.push(Tr),fn.push(Ur)}return[Ht,fn]}(L,be,de,J);return function(Je,tt,ct){let Rt=1/0;Wx(ct,tt)&&(Rt=km(ct,tt[0]));for(let Ht=0;Ht<tt.length;Ht++){const fn=tt[Ht],Kt=Je[Ht];for(let Ke=0;Ke<fn.length-1;Ke++){const Ct=fn[Ke],tn=[Ct,fn[Ke+1],Kt[Ke+1],Kt[Ke],Ct];Sg(ct,tn)&&(Rt=Math.min(Rt,km(ct,tn)))}}return Rt!==1/0&&Rt}($e[0],$e[1],Le)}}function qd(g,u){return g.x*u.x+g.y*u.y}function km(g,u){if(g.length===1){let m=0;const S=u[m++];let L;for(;!L||S.equals(L);)if(L=u[m++],!L)return 1/0;for(;m<u.length;m++){const j=u[m],V=g[0],J=L.sub(S),oe=j.sub(S),de=V.sub(S),be=qd(J,J),Le=qd(J,oe),$e=qd(oe,oe),Je=qd(de,J),tt=qd(de,oe),ct=be*$e-Le*Le,Rt=($e*Je-Le*tt)/ct,Ht=(be*tt-Le*Je)/ct,fn=S.z*(1-Rt-Ht)+L.z*Rt+j.z*Ht;if(isFinite(fn))return fn}return 1/0}{let m=1/0;for(const S of u)m=Math.min(m,S.z);return m}}const Om=Ei([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:SS}=Om,ES=Ei([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:t0}=ES,TS=Lm.VectorTileFeature.types,Ky=Math.cos(Math.PI/180*37.5),fb=Math.pow(2,14)/.5;class db{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(m=>{this.gradients[m.id]={}}),this.layoutVertexArray=new hn,this.layoutVertexArray2=new Un,this.indexArray=new pr,this.programConfigurations=new Kh(u.layers,u.zoom),this.segments=new fa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,S){this.hasPattern=Jv("line",this.layers,m);const L=this.layers[0].layout.get("line-sort-key"),j=!L.isConstant(),V=[];for(const{feature:J,id:oe,index:de,sourceLayerIndex:be}of u){const Le=this.layers[0]._featureFilter.needGeometry,$e=Ih(J,Le);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),$e,S))continue;const Je=j?L.evaluate($e,{},S):void 0,tt={id:oe,properties:J.properties,type:J.type,sourceLayerIndex:be,index:de,geometry:Le?$e.geometry:nh(J),patterns:{},sortKey:Je};V.push(tt)}j&&V.sort((J,oe)=>J.sortKey-oe.sortKey);for(const J of V){const{geometry:oe,index:de,sourceLayerIndex:be}=J;if(this.hasPattern){const Le=Vy("line",this.layers,J,this.zoom,m);this.patternFeatures.push(Le)}else this.addFeature(J,oe,de,S,{},m.subdivisionGranularity);m.featureIndex.insert(u[de].feature,oe,de,be,this.index)}}update(u,m,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,S)}addFeatures(u,m,S){for(const L of this.patternFeatures)this.addFeature(L,L.geometry,L.index,m,S,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,t0)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,SS),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,m,S,L,j,V){const J=this.layers[0].layout,oe=J.get("line-join").evaluate(u,{}),de=J.get("line-cap"),be=J.get("line-miter-limit"),Le=J.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const $e of m)this.addLine($e,u,oe,de,be,Le,L,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,S,j,L)}addLine(u,m,S,L,j,V,J,oe){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=Vd(u,J?oe.line.getGranularityForZoomLevel(J.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Kt=0;Kt<u.length-1;Kt++)this.totalDistance+=u[Kt].dist(u[Kt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const de=TS[m.type]==="Polygon";let be=u.length;for(;be>=2&&u[be-1].equals(u[be-2]);)be--;let Le=0;for(;Le<be-1&&u[Le].equals(u[Le+1]);)Le++;if(be<(de?3:2))return;S==="bevel"&&(j=1.05);const $e=this.overscaling<=16?15*se/(512*this.overscaling):0,Je=this.segments.prepareSegment(10*be,this.layoutVertexArray,this.indexArray);let tt,ct,Rt,Ht,fn;this.e1=this.e2=-1,de&&(tt=u[be-2],fn=u[Le].sub(tt)._unit()._perp());for(let Kt=Le;Kt<be;Kt++){if(Rt=Kt===be-1?de?u[Le+1]:void 0:u[Kt+1],Rt&&u[Kt].equals(Rt))continue;fn&&(Ht=fn),tt&&(ct=tt),tt=u[Kt],fn=Rt?Rt.sub(tt)._unit()._perp():Ht,Ht=Ht||fn;let Ke=Ht.add(fn);Ke.x===0&&Ke.y===0||Ke._unit();const Ct=Ht.x*fn.x+Ht.y*fn.y,tn=Ke.x*fn.x+Ke.y*fn.y,jn=tn!==0?1/tn:1/0,Cr=2*Math.sqrt(2-2*tn),Xn=tn<Ky&&ct&&Rt,rr=Ht.x*fn.y-Ht.y*fn.x>0;if(Xn&&Kt>Le){const Ur=tt.dist(ct);if(Ur>2*$e){const lr=tt.sub(tt.sub(ct)._mult($e/Ur)._round());this.updateDistance(ct,lr),this.addCurrentVertex(lr,Ht,0,0,Je),ct=lr}}const Or=ct&&Rt;let Tr=Or?S:de?"butt":L;if(Or&&Tr==="round"&&(jn<V?Tr="miter":jn<=2&&(Tr="fakeround")),Tr==="miter"&&jn>j&&(Tr="bevel"),Tr==="bevel"&&(jn>2&&(Tr="flipbevel"),jn<j&&(Tr="miter")),ct&&this.updateDistance(ct,tt),Tr==="miter")Ke._mult(jn),this.addCurrentVertex(tt,Ke,0,0,Je);else if(Tr==="flipbevel"){if(jn>100)Ke=fn.mult(-1);else{const Ur=jn*Ht.add(fn).mag()/Ht.sub(fn).mag();Ke._perp()._mult(Ur*(rr?-1:1))}this.addCurrentVertex(tt,Ke,0,0,Je),this.addCurrentVertex(tt,Ke.mult(-1),0,0,Je)}else if(Tr==="bevel"||Tr==="fakeround"){const Ur=-Math.sqrt(jn*jn-1),lr=rr?Ur:0,li=rr?0:Ur;if(ct&&this.addCurrentVertex(tt,Ht,lr,li,Je),Tr==="fakeround"){const Bi=Math.round(180*Cr/Math.PI/20);for(let Li=1;Li<Bi;Li++){let Ti=Li/Bi;if(Ti!==.5){const Is=Ti-.5;Ti+=Ti*Is*(Ti-1)*((1.0904+Ct*(Ct*(3.55645-1.43519*Ct)-3.2452))*Is*Is+(.848013+Ct*(.215638*Ct-1.06021)))}const La=fn.sub(Ht)._mult(Ti)._add(Ht)._unit()._mult(rr?-1:1);this.addHalfVertex(tt,La.x,La.y,!1,rr,0,Je)}}Rt&&this.addCurrentVertex(tt,fn,-lr,-li,Je)}else if(Tr==="butt")this.addCurrentVertex(tt,Ke,0,0,Je);else if(Tr==="square"){const Ur=ct?1:-1;this.addCurrentVertex(tt,Ke,Ur,Ur,Je)}else Tr==="round"&&(ct&&(this.addCurrentVertex(tt,Ht,0,0,Je),this.addCurrentVertex(tt,Ht,1,1,Je,!0)),Rt&&(this.addCurrentVertex(tt,fn,-1,-1,Je,!0),this.addCurrentVertex(tt,fn,0,0,Je)));if(Xn&&Kt<be-1){const Ur=tt.dist(Rt);if(Ur>2*$e){const lr=tt.add(Rt.sub(tt)._mult($e/Ur)._round());this.updateDistance(tt,lr),this.addCurrentVertex(lr,fn,0,0,Je),tt=lr}}}}addCurrentVertex(u,m,S,L,j,V=!1){const J=m.y*L-m.x,oe=-m.y-m.x*L;this.addHalfVertex(u,m.x+m.y*S,m.y-m.x*S,V,!1,S,j),this.addHalfVertex(u,J,oe,V,!0,-L,j),this.distance>fb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,m,S,L,j,V))}addHalfVertex({x:u,y:m},S,L,j,V,J,oe){const de=.5*(this.lineClips?this.scaledDistance*(fb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(j?1:0),(m<<1)+(V?1:0),Math.round(63*S)+128,Math.round(63*L)+128,1+(J===0?0:J<0?-1:1)|(63&de)<<2,de>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const be=oe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,be,this.e2),oe.primitiveLength++),V?this.e2=be:this.e1=be}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,m){this.distance+=u.dist(m),this.updateScaledDistance()}}let CS,Vo;ei("LineBucket",db,{omit:["layers","patternFeatures"]});var vs={get paint(){return Vo=Vo||new $i({"line-opacity":new or(Fe.paint_line["line-opacity"]),"line-color":new or(Fe.paint_line["line-color"]),"line-translate":new yr(Fe.paint_line["line-translate"]),"line-translate-anchor":new yr(Fe.paint_line["line-translate-anchor"]),"line-width":new or(Fe.paint_line["line-width"]),"line-gap-width":new or(Fe.paint_line["line-gap-width"]),"line-offset":new or(Fe.paint_line["line-offset"]),"line-blur":new or(Fe.paint_line["line-blur"]),"line-dasharray":new oo(Fe.paint_line["line-dasharray"]),"line-pattern":new Ga(Fe.paint_line["line-pattern"]),"line-gradient":new Ca(Fe.paint_line["line-gradient"])})},get layout(){return CS=CS||new $i({"line-cap":new yr(Fe.layout_line["line-cap"]),"line-join":new or(Fe.layout_line["line-join"]),"line-miter-limit":new yr(Fe.layout_line["line-miter-limit"]),"line-round-limit":new yr(Fe.layout_line["line-round-limit"]),"line-sort-key":new or(Fe.layout_line["line-sort-key"])})}};class Qa extends or{possiblyEvaluate(u,m){return m=new ar(Math.floor(m.zoom),{now:m.now,fadeDuration:m.fadeDuration,zoomHistory:m.zoomHistory,transition:m.transition}),super.possiblyEvaluate(u,m)}evaluate(u,m,S,L){return m=Ee({},m,{zoom:Math.floor(m.zoom)}),super.evaluate(u,m,S,L)}}let eo;class Ko extends ga{constructor(u){super(u,vs),this.gradientVersion=0,eo||(eo=new Qa(vs.paint.properties["line-width"].specification),eo.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const m=this.gradientExpression();this.stepInterpolant=!!function(S){return S._styleExpression!==void 0}(m)&&m._styleExpression.expression instanceof $l,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,m){super.recalculate(u,m),this.paint._values["line-floorwidth"]=eo.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new db(u)}queryRadius(u){const m=u,S=oh(Eg("line-width",this,m),Eg("line-gap-width",this,m)),L=Eg("line-offset",this,m);return S/2+Math.abs(L)+Pm(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:m,featureState:S,geometry:L,transform:j,pixelsToTileUnits:V}){const J=Xv(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-j.bearingInRadians,V),oe=V/2*oh(this.paint.get("line-width").evaluate(m,S),this.paint.get("line-gap-width").evaluate(m,S)),de=this.paint.get("line-offset").evaluate(m,S);return de&&(L=function(be,Le){const $e=[];for(let Je=0;Je<be.length;Je++){const tt=be[Je],ct=[];for(let Rt=0;Rt<tt.length;Rt++){const Ht=tt[Rt-1],fn=tt[Rt],Kt=tt[Rt+1],Ke=Rt===0?new E(0,0):fn.sub(Ht)._unit()._perp(),Ct=Rt===tt.length-1?new E(0,0):Kt.sub(fn)._unit()._perp(),tn=Ke._add(Ct)._unit(),jn=tn.x*Ct.x+tn.y*Ct.y;jn!==0&&tn._mult(1/jn),ct.push(tn._mult(Le)._add(fn))}$e.push(ct)}return $e}(L,de*V)),function(be,Le,$e){for(let Je=0;Je<Le.length;Je++){const tt=Le[Je];if(be.length>=3){for(let ct=0;ct<tt.length;ct++)if(Us(be,tt[ct]))return!0}if(Jh(be,tt,$e))return!0}return!1}(J,L,oe)}isTileClipped(){return!0}}function oh(g,u){return u>0?u+2*g:g}const Up=Ei([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Fm=Ei([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ei([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const pb=Ei([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ei([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const cd=Ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),El=Ei([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function jp(g,u,m){return g.sections.forEach(S=>{S.text=function(L,j,V){const J=j.layout.get("text-transform").evaluate(V,{});return J==="uppercase"?L=L.toLocaleUpperCase():J==="lowercase"&&(L=L.toLocaleLowerCase()),Rn.applyArabicShaping&&(L=Rn.applyArabicShaping(L)),L}(S.text,u,m)}),g}Ei([{name:"triangle",components:3,type:"Uint16"}]),Ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ei([{type:"Float32",name:"offsetX"}]),Ei([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ei([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Df={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Jy,sh,Ig,js=24,fc={};function gb(){return Jy||(Jy=1,fc.read=function(g,u,m,S,L){var j,V,J=8*L-S-1,oe=(1<<J)-1,de=oe>>1,be=-7,Le=m?L-1:0,$e=m?-1:1,Je=g[u+Le];for(Le+=$e,j=Je&(1<<-be)-1,Je>>=-be,be+=J;be>0;j=256*j+g[u+Le],Le+=$e,be-=8);for(V=j&(1<<-be)-1,j>>=-be,be+=S;be>0;V=256*V+g[u+Le],Le+=$e,be-=8);if(j===0)j=1-de;else{if(j===oe)return V?NaN:1/0*(Je?-1:1);V+=Math.pow(2,S),j-=de}return(Je?-1:1)*V*Math.pow(2,j-S)},fc.write=function(g,u,m,S,L,j){var V,J,oe,de=8*j-L-1,be=(1<<de)-1,Le=be>>1,$e=L===23?Math.pow(2,-24)-Math.pow(2,-77):0,Je=S?0:j-1,tt=S?1:-1,ct=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(J=isNaN(u)?1:0,V=be):(V=Math.floor(Math.log(u)/Math.LN2),u*(oe=Math.pow(2,-V))<1&&(V--,oe*=2),(u+=V+Le>=1?$e/oe:$e*Math.pow(2,1-Le))*oe>=2&&(V++,oe/=2),V+Le>=be?(J=0,V=be):V+Le>=1?(J=(u*oe-1)*Math.pow(2,L),V+=Le):(J=u*Math.pow(2,Le-1)*Math.pow(2,L),V=0));L>=8;g[m+Je]=255&J,Je+=tt,J/=256,L-=8);for(V=V<<L|J,de+=L;de>0;g[m+Je]=255&V,Je+=tt,V/=256,de-=8);g[m+Je-tt]|=128*ct}),fc}function Qy(){if(Ig)return sh;Ig=1,sh=u;var g=gb();function u(Ke){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Ke)?Ke:new Uint8Array(Ke||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0,u.Fixed64=1,u.Bytes=2,u.Fixed32=5;var m=4294967296,S=1/m,L=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function j(Ke){return Ke.type===u.Bytes?Ke.readVarint()+Ke.pos:Ke.pos+1}function V(Ke,Ct,tn){return tn?4294967296*Ct+(Ke>>>0):4294967296*(Ct>>>0)+(Ke>>>0)}function J(Ke,Ct,tn){var jn=Ct<=16383?1:Ct<=2097151?2:Ct<=268435455?3:Math.floor(Math.log(Ct)/(7*Math.LN2));tn.realloc(jn);for(var Cr=tn.pos-1;Cr>=Ke;Cr--)tn.buf[Cr+jn]=tn.buf[Cr]}function oe(Ke,Ct){for(var tn=0;tn<Ke.length;tn++)Ct.writeVarint(Ke[tn])}function de(Ke,Ct){for(var tn=0;tn<Ke.length;tn++)Ct.writeSVarint(Ke[tn])}function be(Ke,Ct){for(var tn=0;tn<Ke.length;tn++)Ct.writeFloat(Ke[tn])}function Le(Ke,Ct){for(var tn=0;tn<Ke.length;tn++)Ct.writeDouble(Ke[tn])}function $e(Ke,Ct){for(var tn=0;tn<Ke.length;tn++)Ct.writeBoolean(Ke[tn])}function Je(Ke,Ct){for(var tn=0;tn<Ke.length;tn++)Ct.writeFixed32(Ke[tn])}function tt(Ke,Ct){for(var tn=0;tn<Ke.length;tn++)Ct.writeSFixed32(Ke[tn])}function ct(Ke,Ct){for(var tn=0;tn<Ke.length;tn++)Ct.writeFixed64(Ke[tn])}function Rt(Ke,Ct){for(var tn=0;tn<Ke.length;tn++)Ct.writeSFixed64(Ke[tn])}function Ht(Ke,Ct){return(Ke[Ct]|Ke[Ct+1]<<8|Ke[Ct+2]<<16)+16777216*Ke[Ct+3]}function fn(Ke,Ct,tn){Ke[tn]=Ct,Ke[tn+1]=Ct>>>8,Ke[tn+2]=Ct>>>16,Ke[tn+3]=Ct>>>24}function Kt(Ke,Ct){return(Ke[Ct]|Ke[Ct+1]<<8|Ke[Ct+2]<<16)+(Ke[Ct+3]<<24)}return u.prototype={destroy:function(){this.buf=null},readFields:function(Ke,Ct,tn){for(tn=tn||this.length;this.pos<tn;){var jn=this.readVarint(),Cr=jn>>3,Xn=this.pos;this.type=7&jn,Ke(Cr,Ct,this),this.pos===Xn&&this.skip(jn)}return Ct},readMessage:function(Ke,Ct){return this.readFields(Ke,Ct,this.readVarint()+this.pos)},readFixed32:function(){var Ke=Ht(this.buf,this.pos);return this.pos+=4,Ke},readSFixed32:function(){var Ke=Kt(this.buf,this.pos);return this.pos+=4,Ke},readFixed64:function(){var Ke=Ht(this.buf,this.pos)+Ht(this.buf,this.pos+4)*m;return this.pos+=8,Ke},readSFixed64:function(){var Ke=Ht(this.buf,this.pos)+Kt(this.buf,this.pos+4)*m;return this.pos+=8,Ke},readFloat:function(){var Ke=g.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Ke},readDouble:function(){var Ke=g.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Ke},readVarint:function(Ke){var Ct,tn,jn=this.buf;return Ct=127&(tn=jn[this.pos++]),tn<128?Ct:(Ct|=(127&(tn=jn[this.pos++]))<<7,tn<128?Ct:(Ct|=(127&(tn=jn[this.pos++]))<<14,tn<128?Ct:(Ct|=(127&(tn=jn[this.pos++]))<<21,tn<128?Ct:function(Cr,Xn,rr){var Or,Tr,Ur=rr.buf;if(Or=(112&(Tr=Ur[rr.pos++]))>>4,Tr<128||(Or|=(127&(Tr=Ur[rr.pos++]))<<3,Tr<128)||(Or|=(127&(Tr=Ur[rr.pos++]))<<10,Tr<128)||(Or|=(127&(Tr=Ur[rr.pos++]))<<17,Tr<128)||(Or|=(127&(Tr=Ur[rr.pos++]))<<24,Tr<128)||(Or|=(1&(Tr=Ur[rr.pos++]))<<31,Tr<128))return V(Cr,Or,Xn);throw new Error("Expected varint not more than 10 bytes")}(Ct|=(15&(tn=jn[this.pos]))<<28,Ke,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Ke=this.readVarint();return Ke%2==1?(Ke+1)/-2:Ke/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Ke=this.readVarint()+this.pos,Ct=this.pos;return this.pos=Ke,Ke-Ct>=12&&L?function(tn,jn,Cr){return L.decode(tn.subarray(jn,Cr))}(this.buf,Ct,Ke):function(tn,jn,Cr){for(var Xn="",rr=jn;rr<Cr;){var Or,Tr,Ur,lr=tn[rr],li=null,Bi=lr>239?4:lr>223?3:lr>191?2:1;if(rr+Bi>Cr)break;Bi===1?lr<128&&(li=lr):Bi===2?(192&(Or=tn[rr+1]))==128&&(li=(31&lr)<<6|63&Or)<=127&&(li=null):Bi===3?(Tr=tn[rr+2],(192&(Or=tn[rr+1]))==128&&(192&Tr)==128&&((li=(15&lr)<<12|(63&Or)<<6|63&Tr)<=2047||li>=55296&&li<=57343)&&(li=null)):Bi===4&&(Tr=tn[rr+2],Ur=tn[rr+3],(192&(Or=tn[rr+1]))==128&&(192&Tr)==128&&(192&Ur)==128&&((li=(15&lr)<<18|(63&Or)<<12|(63&Tr)<<6|63&Ur)<=65535||li>=1114112)&&(li=null)),li===null?(li=65533,Bi=1):li>65535&&(li-=65536,Xn+=String.fromCharCode(li>>>10&1023|55296),li=56320|1023&li),Xn+=String.fromCharCode(li),rr+=Bi}return Xn}(this.buf,Ct,Ke)},readBytes:function(){var Ke=this.readVarint()+this.pos,Ct=this.buf.subarray(this.pos,Ke);return this.pos=Ke,Ct},readPackedVarint:function(Ke,Ct){if(this.type!==u.Bytes)return Ke.push(this.readVarint(Ct));var tn=j(this);for(Ke=Ke||[];this.pos<tn;)Ke.push(this.readVarint(Ct));return Ke},readPackedSVarint:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readSVarint());var Ct=j(this);for(Ke=Ke||[];this.pos<Ct;)Ke.push(this.readSVarint());return Ke},readPackedBoolean:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readBoolean());var Ct=j(this);for(Ke=Ke||[];this.pos<Ct;)Ke.push(this.readBoolean());return Ke},readPackedFloat:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readFloat());var Ct=j(this);for(Ke=Ke||[];this.pos<Ct;)Ke.push(this.readFloat());return Ke},readPackedDouble:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readDouble());var Ct=j(this);for(Ke=Ke||[];this.pos<Ct;)Ke.push(this.readDouble());return Ke},readPackedFixed32:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readFixed32());var Ct=j(this);for(Ke=Ke||[];this.pos<Ct;)Ke.push(this.readFixed32());return Ke},readPackedSFixed32:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readSFixed32());var Ct=j(this);for(Ke=Ke||[];this.pos<Ct;)Ke.push(this.readSFixed32());return Ke},readPackedFixed64:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readFixed64());var Ct=j(this);for(Ke=Ke||[];this.pos<Ct;)Ke.push(this.readFixed64());return Ke},readPackedSFixed64:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readSFixed64());var Ct=j(this);for(Ke=Ke||[];this.pos<Ct;)Ke.push(this.readSFixed64());return Ke},skip:function(Ke){var Ct=7&Ke;if(Ct===u.Varint)for(;this.buf[this.pos++]>127;);else if(Ct===u.Bytes)this.pos=this.readVarint()+this.pos;else if(Ct===u.Fixed32)this.pos+=4;else{if(Ct!==u.Fixed64)throw new Error("Unimplemented type: "+Ct);this.pos+=8}},writeTag:function(Ke,Ct){this.writeVarint(Ke<<3|Ct)},realloc:function(Ke){for(var Ct=this.length||16;Ct<this.pos+Ke;)Ct*=2;if(Ct!==this.length){var tn=new Uint8Array(Ct);tn.set(this.buf),this.buf=tn,this.length=Ct}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Ke){this.realloc(4),fn(this.buf,Ke,this.pos),this.pos+=4},writeSFixed32:function(Ke){this.realloc(4),fn(this.buf,Ke,this.pos),this.pos+=4},writeFixed64:function(Ke){this.realloc(8),fn(this.buf,-1&Ke,this.pos),fn(this.buf,Math.floor(Ke*S),this.pos+4),this.pos+=8},writeSFixed64:function(Ke){this.realloc(8),fn(this.buf,-1&Ke,this.pos),fn(this.buf,Math.floor(Ke*S),this.pos+4),this.pos+=8},writeVarint:function(Ke){(Ke=+Ke||0)>268435455||Ke<0?function(Ct,tn){var jn,Cr;if(Ct>=0?(jn=Ct%4294967296|0,Cr=Ct/4294967296|0):(Cr=~(-Ct/4294967296),4294967295^(jn=~(-Ct%4294967296))?jn=jn+1|0:(jn=0,Cr=Cr+1|0)),Ct>=18446744073709552e3||Ct<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");tn.realloc(10),function(Xn,rr,Or){Or.buf[Or.pos++]=127&Xn|128,Xn>>>=7,Or.buf[Or.pos++]=127&Xn|128,Xn>>>=7,Or.buf[Or.pos++]=127&Xn|128,Xn>>>=7,Or.buf[Or.pos++]=127&Xn|128,Or.buf[Or.pos]=127&(Xn>>>=7)}(jn,0,tn),function(Xn,rr){var Or=(7&Xn)<<4;rr.buf[rr.pos++]|=Or|((Xn>>>=3)?128:0),Xn&&(rr.buf[rr.pos++]=127&Xn|((Xn>>>=7)?128:0),Xn&&(rr.buf[rr.pos++]=127&Xn|((Xn>>>=7)?128:0),Xn&&(rr.buf[rr.pos++]=127&Xn|((Xn>>>=7)?128:0),Xn&&(rr.buf[rr.pos++]=127&Xn|((Xn>>>=7)?128:0),Xn&&(rr.buf[rr.pos++]=127&Xn)))))}(Cr,tn)}(Ke,this):(this.realloc(4),this.buf[this.pos++]=127&Ke|(Ke>127?128:0),Ke<=127||(this.buf[this.pos++]=127&(Ke>>>=7)|(Ke>127?128:0),Ke<=127||(this.buf[this.pos++]=127&(Ke>>>=7)|(Ke>127?128:0),Ke<=127||(this.buf[this.pos++]=Ke>>>7&127))))},writeSVarint:function(Ke){this.writeVarint(Ke<0?2*-Ke-1:2*Ke)},writeBoolean:function(Ke){this.writeVarint(!!Ke)},writeString:function(Ke){Ke=String(Ke),this.realloc(4*Ke.length),this.pos++;var Ct=this.pos;this.pos=function(jn,Cr,Xn){for(var rr,Or,Tr=0;Tr<Cr.length;Tr++){if((rr=Cr.charCodeAt(Tr))>55295&&rr<57344){if(!Or){rr>56319||Tr+1===Cr.length?(jn[Xn++]=239,jn[Xn++]=191,jn[Xn++]=189):Or=rr;continue}if(rr<56320){jn[Xn++]=239,jn[Xn++]=191,jn[Xn++]=189,Or=rr;continue}rr=Or-55296<<10|rr-56320|65536,Or=null}else Or&&(jn[Xn++]=239,jn[Xn++]=191,jn[Xn++]=189,Or=null);rr<128?jn[Xn++]=rr:(rr<2048?jn[Xn++]=rr>>6|192:(rr<65536?jn[Xn++]=rr>>12|224:(jn[Xn++]=rr>>18|240,jn[Xn++]=rr>>12&63|128),jn[Xn++]=rr>>6&63|128),jn[Xn++]=63&rr|128)}return Xn}(this.buf,Ke,this.pos);var tn=this.pos-Ct;tn>=128&&J(Ct,tn,this),this.pos=Ct-1,this.writeVarint(tn),this.pos+=tn},writeFloat:function(Ke){this.realloc(4),g.write(this.buf,Ke,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Ke){this.realloc(8),g.write(this.buf,Ke,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Ke){var Ct=Ke.length;this.writeVarint(Ct),this.realloc(Ct);for(var tn=0;tn<Ct;tn++)this.buf[this.pos++]=Ke[tn]},writeRawMessage:function(Ke,Ct){this.pos++;var tn=this.pos;Ke(Ct,this);var jn=this.pos-tn;jn>=128&&J(tn,jn,this),this.pos=tn-1,this.writeVarint(jn),this.pos+=jn},writeMessage:function(Ke,Ct,tn){this.writeTag(Ke,u.Bytes),this.writeRawMessage(Ct,tn)},writePackedVarint:function(Ke,Ct){Ct.length&&this.writeMessage(Ke,oe,Ct)},writePackedSVarint:function(Ke,Ct){Ct.length&&this.writeMessage(Ke,de,Ct)},writePackedBoolean:function(Ke,Ct){Ct.length&&this.writeMessage(Ke,$e,Ct)},writePackedFloat:function(Ke,Ct){Ct.length&&this.writeMessage(Ke,be,Ct)},writePackedDouble:function(Ke,Ct){Ct.length&&this.writeMessage(Ke,Le,Ct)},writePackedFixed32:function(Ke,Ct){Ct.length&&this.writeMessage(Ke,Je,Ct)},writePackedSFixed32:function(Ke,Ct){Ct.length&&this.writeMessage(Ke,tt,Ct)},writePackedFixed64:function(Ke,Ct){Ct.length&&this.writeMessage(Ke,ct,Ct)},writePackedSFixed64:function(Ke,Ct){Ct.length&&this.writeMessage(Ke,Rt,Ct)},writeBytesField:function(Ke,Ct){this.writeTag(Ke,u.Bytes),this.writeBytes(Ct)},writeFixed32Field:function(Ke,Ct){this.writeTag(Ke,u.Fixed32),this.writeFixed32(Ct)},writeSFixed32Field:function(Ke,Ct){this.writeTag(Ke,u.Fixed32),this.writeSFixed32(Ct)},writeFixed64Field:function(Ke,Ct){this.writeTag(Ke,u.Fixed64),this.writeFixed64(Ct)},writeSFixed64Field:function(Ke,Ct){this.writeTag(Ke,u.Fixed64),this.writeSFixed64(Ct)},writeVarintField:function(Ke,Ct){this.writeTag(Ke,u.Varint),this.writeVarint(Ct)},writeSVarintField:function(Ke,Ct){this.writeTag(Ke,u.Varint),this.writeSVarint(Ct)},writeStringField:function(Ke,Ct){this.writeTag(Ke,u.Bytes),this.writeString(Ct)},writeFloatField:function(Ke,Ct){this.writeTag(Ke,u.Fixed32),this.writeFloat(Ct)},writeDoubleField:function(Ke,Ct){this.writeTag(Ke,u.Fixed64),this.writeDouble(Ct)},writeBooleanField:function(Ke,Ct){this.writeVarintField(Ke,!!Ct)}},sh}var Bm=c(Qy());const zm=3;function Gp(g,u,m){g===1&&m.readMessage(Ku,u)}function Ku(g,u,m){if(g===3){const{id:S,bitmap:L,width:j,height:V,left:J,top:oe,advance:de}=m.readMessage(Vp,{});u.push({id:S,bitmap:new Kv({width:j+2*zm,height:V+2*zm},L),metrics:{width:j,height:V,left:J,top:oe,advance:de}})}}function Vp(g,u,m){g===1?u.id=m.readVarint():g===2?u.bitmap=m.readBytes():g===3?u.width=m.readVarint():g===4?u.height=m.readVarint():g===5?u.left=m.readSVarint():g===6?u.top=m.readSVarint():g===7&&(u.advance=m.readVarint())}const Um=zm;function Dg(g){let u=0,m=0;for(const V of g)u+=V.w*V.h,m=Math.max(m,V.w);g.sort((V,J)=>J.h-V.h);const S=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),m),h:1/0}];let L=0,j=0;for(const V of g)for(let J=S.length-1;J>=0;J--){const oe=S[J];if(!(V.w>oe.w||V.h>oe.h)){if(V.x=oe.x,V.y=oe.y,j=Math.max(j,V.y+V.h),L=Math.max(L,V.x+V.w),V.w===oe.w&&V.h===oe.h){const de=S.pop();J<S.length&&(S[J]=de)}else V.h===oe.h?(oe.x+=V.w,oe.w-=V.w):V.w===oe.w?(oe.y+=V.h,oe.h-=V.h):(S.push({x:oe.x+V.w,y:oe.y,w:oe.w-V.w,h:V.h}),oe.y+=V.h,oe.h-=V.h);break}}return{w:L,h:j,fill:u/(L*j)||0}}const Ju=1;class n0{constructor(u,{pixelRatio:m,version:S,stretchX:L,stretchY:j,content:V,textFitWidth:J,textFitHeight:oe}){this.paddedRect=u,this.pixelRatio=m,this.stretchX=L,this.stretchY=j,this.content=V,this.version=S,this.textFitWidth=J,this.textFitHeight=oe}get tl(){return[this.paddedRect.x+Ju,this.paddedRect.y+Ju]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ju,this.paddedRect.y+this.paddedRect.h-Ju]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ju)/this.pixelRatio,(this.paddedRect.h-2*Ju)/this.pixelRatio]}}class mb{constructor(u,m){const S={},L={};this.haveRenderCallbacks=[];const j=[];this.addImages(u,S,j),this.addImages(m,L,j);const{w:V,h:J}=Dg(j),oe=new rh({width:V||1,height:J||1});for(const de in u){const be=u[de],Le=S[de].paddedRect;rh.copy(be.data,oe,{x:0,y:0},{x:Le.x+Ju,y:Le.y+Ju},be.data)}for(const de in m){const be=m[de],Le=L[de].paddedRect,$e=Le.x+Ju,Je=Le.y+Ju,tt=be.data.width,ct=be.data.height;rh.copy(be.data,oe,{x:0,y:0},{x:$e,y:Je},be.data),rh.copy(be.data,oe,{x:0,y:ct-1},{x:$e,y:Je-1},{width:tt,height:1}),rh.copy(be.data,oe,{x:0,y:0},{x:$e,y:Je+ct},{width:tt,height:1}),rh.copy(be.data,oe,{x:tt-1,y:0},{x:$e-1,y:Je},{width:1,height:ct}),rh.copy(be.data,oe,{x:0,y:0},{x:$e+tt,y:Je},{width:1,height:ct})}this.image=oe,this.iconPositions=S,this.patternPositions=L}addImages(u,m,S){for(const L in u){const j=u[L],V={x:0,y:0,w:j.data.width+2*Ju,h:j.data.height+2*Ju};S.push(V),m[L]=new n0(V,j),j.hasRenderCallback&&this.haveRenderCallbacks.push(L)}}patchUpdatedImages(u,m){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const S in u.updatedImages)this.patchUpdatedImage(this.iconPositions[S],u.getImage(S),m),this.patchUpdatedImage(this.patternPositions[S],u.getImage(S),m)}patchUpdatedImage(u,m,S){if(!u||!m||u.version===m.version)return;u.version=m.version;const[L,j]=u.tl;S.update(m.data,void 0,{x:L,y:j})}}var nf;ei("ImagePosition",n0),ei("ImageAtlas",mb),s.ah=void 0,(nf=s.ah||(s.ah={}))[nf.none=0]="none",nf[nf.horizontal=1]="horizontal",nf[nf.vertical=2]="vertical",nf[nf.horizontalOnly=3]="horizontalOnly";const jm=-17;class Qu{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,m,S){const L=new Qu;return L.scale=u||1,L.fontStack=m,L.verticalAlign=S||"bottom",L}static forImage(u,m){const S=new Qu;return S.imageName=u,S.verticalAlign=m||"bottom",S}}class Lg{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,m){const S=new Lg;for(let L=0;L<u.sections.length;L++){const j=u.sections[L];j.image?S.addImageSection(j):S.addTextSection(j,m)}return S}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let m="";for(let S=0;S<u.length;S++){const L=u.charCodeAt(S+1)||null,j=u.charCodeAt(S-1)||null;m+=L&&Mt(L)&&!Df[u[S+1]]||j&&Mt(j)&&!Df[u[S-1]]||!Df[u[S]]?u[S]:Df[u[S]]}return m}(this.text)}trim(){let u=0;for(let S=0;S<this.text.length&&r0[this.text.charCodeAt(S)];S++)u++;let m=this.text.length;for(let S=this.text.length-1;S>=0&&S>=u&&r0[this.text.charCodeAt(S)];S--)m--;this.text=this.text.substring(u,m),this.sectionIndex=this.sectionIndex.slice(u,m)}substring(u,m){const S=new Lg;return S.text=this.text.substring(u,m),S.sectionIndex=this.sectionIndex.slice(u,m),S.sections=this.sections,S}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,m)=>Math.max(u,this.sections[m].scale),0)}getMaxImageSize(u){let m=0,S=0;for(let L=0;L<this.length();L++){const j=this.getSection(L);if(j.imageName){const V=u[j.imageName];if(!V)continue;const J=V.displaySize;m=Math.max(m,J[0]),S=Math.max(S,J[1])}}return{maxImageWidth:m,maxImageHeight:S}}addTextSection(u,m){this.text+=u.text,this.sections.push(Qu.forText(u.scale,u.fontStack||m,u.verticalAlign));const S=this.sections.length-1;for(let L=0;L<u.text.length;++L)this.sectionIndex.push(S)}addImageSection(u){const m=u.image?u.image.name:"";if(m.length===0)return void st("Can't add FormattedSection with an empty image.");const S=this.getNextImageSectionCharCode();S?(this.text+=String.fromCharCode(S),this.sections.push(Qu.forImage(m,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):st("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function dc(g,u,m,S,L,j,V,J,oe,de,be,Le,$e,Je,tt){const ct=Lg.fromFeature(g,L);let Rt;Le===s.ah.vertical&&ct.verticalizePunctuation();const{processBidirectionalText:Ht,processStyledBidirectionalText:fn}=Rn;if(Ht&&ct.sections.length===1){Rt=[];const Ct=Ht(ct.toString(),e_(ct,de,j,u,S,Je));for(const tn of Ct){const jn=new Lg;jn.text=tn,jn.sections=ct.sections;for(let Cr=0;Cr<tn.length;Cr++)jn.sectionIndex.push(0);Rt.push(jn)}}else if(fn){Rt=[];const Ct=fn(ct.text,ct.sectionIndex,e_(ct,de,j,u,S,Je));for(const tn of Ct){const jn=new Lg;jn.text=tn[0],jn.sectionIndex=tn[1],jn.sections=ct.sections,Rt.push(jn)}}else Rt=function(Ct,tn){const jn=[],Cr=Ct.text;let Xn=0;for(const rr of tn)jn.push(Ct.substring(Xn,rr)),Xn=rr;return Xn<Cr.length&&jn.push(Ct.substring(Xn,Cr.length)),jn}(ct,e_(ct,de,j,u,S,Je));const Kt=[],Ke={positionedLines:Kt,text:ct.toString(),top:be[1],bottom:be[1],left:be[0],right:be[0],writingMode:Le,iconsInText:!1,verticalizable:!1};return function(Ct,tn,jn,Cr,Xn,rr,Or,Tr,Ur,lr,li,Bi){let Li=0,Ti=0,La=0,Is=0;const gl=Tr==="right"?1:Tr==="left"?0:.5,du=js/Bi;let pc=0;for(const ls of Xn){ls.trim();const Tl=ls.getMaxScale(),Cl={positionedGlyphs:[],lineOffset:0};Ct.positionedLines[pc]=Cl;const jl=Cl.positionedGlyphs;let ec=0;if(!ls.length()){Ti+=rr,++pc;continue}const Nc=_b(Cr,ls,du);for(let Ml=0;Ml<ls.length();Ml++){const us=ls.getSection(Ml),rl=ls.getSectionIndex(Ml),il=ls.getCharCode(Ml),Jo=MA(Ur,li,il);let cs;if(us.imageName){if(Ct.iconsInText=!0,us.scale=us.scale*du,cs=RA(us,Jo,Tl,Nc,Cr),!cs)continue;ec=Math.max(ec,cs.imageOffset)}else if(cs=AA(us,il,Jo,Nc,tn,jn),!cs)continue;const{rect:rf,metrics:fd,baselineOffset:Nf}=cs;jl.push({glyph:il,imageName:us.imageName,x:Li,y:Ti+Nf+jm,vertical:Jo,scale:us.scale,fontStack:us.fontStack,sectionIndex:rl,metrics:fd,rect:rf}),Jo?(Ct.verticalizable=!0,Li+=(us.imageName?fd.advance:js)*us.scale+lr):Li+=fd.advance*us.scale+lr}jl.length!==0&&(La=Math.max(Li-lr,La),AS(jl,0,jl.length-1,gl)),Li=0,Cl.lineOffset=Math.max(ec,(Tl-1)*js);const _s=rr*Tl+ec;Ti+=_s,Is=Math.max(_s,Is),++pc}const{horizontalAlign:Lc,verticalAlign:pu}=t_(Or);(function(ls,Tl,Cl,jl,ec,Nc,_s,Ml,us){const rl=(Tl-Cl)*ec;let il=0;il=Nc!==_s?-Ml*jl-jm:-jl*us*_s+.5*_s;for(const Jo of ls)for(const cs of Jo.positionedGlyphs)cs.x+=rl,cs.y+=il})(Ct.positionedLines,gl,Lc,pu,La,Is,rr,Ti,Xn.length),Ct.top+=-pu*Ti,Ct.bottom=Ct.top+Ti,Ct.left+=-Lc*La,Ct.right=Ct.left+La}(Ke,u,m,S,Rt,V,J,oe,Le,de,$e,tt),!function(Ct){for(const tn of Ct)if(tn.positionedGlyphs.length!==0)return!1;return!0}(Kt)&&Ke}const r0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},MS={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},CA={40:!0};function $d(g,u,m,S,L,j){if(u.imageName){const V=S[u.imageName];return V?V.displaySize[0]*u.scale*js/j+L:0}{const V=m[u.fontStack],J=V&&V[g];return J?J.metrics.advance*u.scale+L:0}}function i0(g,u,m,S){const L=Math.pow(g-u,2);return S?g<u?L/2:2*L:L+Math.abs(m)*m}function vb(g,u,m){let S=0;return g===10&&(S-=1e4),m&&(S+=150),g!==40&&g!==65288||(S+=50),u!==41&&u!==65289||(S+=50),S}function Ng(g,u,m,S,L,j){let V=null,J=i0(u,m,L,j);for(const oe of S){const de=i0(u-oe.x,m,L,j)+oe.badness;de<=J&&(V=oe,J=de)}return{index:g,x:u,priorBreak:V,badness:J}}function yb(g){return g?yb(g.priorBreak).concat(g.index):[]}function e_(g,u,m,S,L,j){if(!g)return[];const V=[],J=function(Le,$e,Je,tt,ct,Rt){let Ht=0;for(let fn=0;fn<Le.length();fn++){const Kt=Le.getSection(fn);Ht+=$d(Le.getCharCode(fn),Kt,tt,ct,$e,Rt)}return Ht/Math.max(1,Math.ceil(Ht/Je))}(g,u,m,S,L,j),oe=g.text.indexOf("​")>=0;let de=0;for(let Le=0;Le<g.length();Le++){const $e=g.getSection(Le),Je=g.getCharCode(Le);if(r0[Je]||(de+=$d(Je,$e,S,L,u,j)),Le<g.length()-1){const tt=!((be=Je)<11904)&&(!!q["CJK Compatibility Forms"](be)||!!q["CJK Compatibility"](be)||!!q["CJK Strokes"](be)||!!q["CJK Symbols and Punctuation"](be)||!!q["Enclosed CJK Letters and Months"](be)||!!q["Halfwidth and Fullwidth Forms"](be)||!!q["Ideographic Description Characters"](be)||!!q["Vertical Forms"](be)||vt.test(String.fromCodePoint(be)));(MS[Je]||tt||$e.imageName||Le!==g.length()-2&&CA[g.getCharCode(Le+1)])&&V.push(Ng(Le+1,de,J,V,vb(Je,g.getCharCode(Le+1),tt&&oe),!1))}}var be;return yb(Ng(g.length(),de,J,V,0,!0))}function t_(g){let u=.5,m=.5;switch(g){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(g){case"bottom":case"bottom-right":case"bottom-left":m=1;break;case"top":case"top-right":case"top-left":m=0}return{horizontalAlign:u,verticalAlign:m}}function _b(g,u,m){const S=u.getMaxScale()*js,{maxImageWidth:L,maxImageHeight:j}=u.getMaxImageSize(g),V=Math.max(S,j*m);return{verticalLineContentWidth:Math.max(S,L*m),horizontalLineContentHeight:V}}function n_(g){switch(g){case"top":return 0;case"center":return .5;default:return 1}}function MA(g,u,m){return!(g===s.ah.horizontal||!u&&!bt(m)||u&&(r0[m]||(S=m,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(S)))));var S}function AA(g,u,m,S,L,j){const V=j[g.fontStack],J=function(de,be,Le,$e){if(de&&de.rect)return de;const Je=be[Le.fontStack],tt=Je&&Je[$e];return tt?{rect:null,metrics:tt.metrics}:null}(V&&V[u],L,g,u);if(J===null)return null;let oe;if(m)oe=S.verticalLineContentWidth-g.scale*js;else{const de=n_(g.verticalAlign);oe=(S.horizontalLineContentHeight-g.scale*js)*de}return{rect:J.rect,metrics:J.metrics,baselineOffset:oe}}function RA(g,u,m,S,L){const j=L[g.imageName];if(!j)return null;const V=j.paddedRect,J=j.displaySize,oe={width:J[0],height:J[1],left:Ju,top:-3,advance:u?J[1]:J[0]};let de;if(u)de=S.verticalLineContentWidth-J[1]*g.scale;else{const be=n_(g.verticalAlign);de=(S.horizontalLineContentHeight-J[1]*g.scale)*be}return{rect:V,metrics:oe,baselineOffset:de,imageOffset:(u?J[0]:J[1])*g.scale-js*m}}function AS(g,u,m,S){if(S===0)return;const L=g[m],j=(g[m].x+L.metrics.advance*L.scale)*S;for(let V=u;V<=m;V++)g[V].x-=j}function RS(g,u,m){const{horizontalAlign:S,verticalAlign:L}=t_(m),j=u[0]-g.displaySize[0]*S,V=u[1]-g.displaySize[1]*L;return{image:g,top:V,bottom:V+g.displaySize[1],left:j,right:j+g.displaySize[0]}}function kg(g){var u,m;let S=g.left,L=g.top,j=g.right-S,V=g.bottom-L;const J=(u=g.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",oe=(m=g.image.textFitHeight)!==null&&m!==void 0?m:"stretchOrShrink",de=(g.image.content[2]-g.image.content[0])/(g.image.content[3]-g.image.content[1]);if(oe==="proportional"){if(J==="stretchOnly"&&j/V<de||J==="proportional"){const be=Math.ceil(V*de);S*=be/j,j=be}}else if(J==="proportional"&&oe==="stretchOnly"&&de!==0&&j/V>de){const be=Math.ceil(j/de);L*=be/V,V=be}return{x1:S,y1:L,x2:S+j,y2:L+V}}function a0(g,u,m,S,L,j){const V=g.image;let J;if(V.content){const Rt=V.content,Ht=V.pixelRatio||1;J=[Rt[0]/Ht,Rt[1]/Ht,V.displaySize[0]-Rt[2]/Ht,V.displaySize[1]-Rt[3]/Ht]}const oe=u.left*j,de=u.right*j;let be,Le,$e,Je;m==="width"||m==="both"?(Je=L[0]+oe-S[3],Le=L[0]+de+S[1]):(Je=L[0]+(oe+de-V.displaySize[0])/2,Le=Je+V.displaySize[0]);const tt=u.top*j,ct=u.bottom*j;return m==="height"||m==="both"?(be=L[1]+tt-S[0],$e=L[1]+ct+S[2]):(be=L[1]+(tt+ct-V.displaySize[1])/2,$e=be+V.displaySize[1]),{image:V,top:be,right:Le,bottom:$e,left:Je,collisionPadding:J}}const Gm=255,Lf=128,Wd=Gm*Lf;function xb(g,u){const{expression:m}=u;if(m.kind==="constant")return{kind:"constant",layoutSize:m.evaluate(new ar(g+1))};if(m.kind==="source")return{kind:"source"};{const{zoomStops:S,interpolationType:L}=m;let j=0;for(;j<S.length&&S[j]<=g;)j++;j=Math.max(0,j-1);let V=j;for(;V<S.length&&S[V]<g+1;)V++;V=Math.min(S.length-1,V);const J=S[j],oe=S[V];return m.kind==="composite"?{kind:"composite",minZoom:J,maxZoom:oe,interpolationType:L}:{kind:"camera",minZoom:J,maxZoom:oe,minSize:m.evaluate(new ar(J)),maxSize:m.evaluate(new ar(oe)),interpolationType:L}}}function r_(g,u,m){let S="never";const L=g.get(u);return L?S=L:g.get(m)&&(S="always"),S}const PS=Lm.VectorTileFeature.types,i_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function o0(g,u,m,S,L,j,V,J,oe,de,be,Le,$e){const Je=J?Math.min(Wd,Math.round(J[0])):0,tt=J?Math.min(Wd,Math.round(J[1])):0;g.emplaceBack(u,m,Math.round(32*S),Math.round(32*L),j,V,(Je<<1)+(oe?1:0),tt,16*de,16*be,256*Le,256*$e)}function a_(g,u,m){g.emplaceBack(u.x,u.y,m),g.emplaceBack(u.x,u.y,m),g.emplaceBack(u.x,u.y,m),g.emplaceBack(u.x,u.y,m)}function ys(g){for(const u of g.sections)if(Gn(u.text))return!0;return!1}class s0{constructor(u){this.layoutVertexArray=new nr,this.indexArray=new pr,this.programConfigurations=u,this.segments=new fa,this.dynamicLayoutVertexArray=new ir,this.opacityVertexArray=new tr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ne}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,m,S,L){this.isEmpty()||(S&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Up.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,m),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,Fm.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,i_,!0),this.opacityVertexBuffer.itemSize=1),(S||L)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ei("SymbolBuffers",s0);class bb{constructor(u,m,S){this.layoutVertexArray=new u,this.layoutAttributes=m,this.indexArray=new S,this.segments=new fa,this.collisionVertexArray=new Br}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,pb.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ei("CollisionBuffers",bb);class Og{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(V=>V.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const m=this.layers[0]._unevaluatedLayout._values;this.textSizeData=xb(this.zoom,m["text-size"]),this.iconSizeData=xb(this.zoom,m["icon-size"]);const S=this.layers[0].layout,L=S.get("symbol-sort-key"),j=S.get("symbol-z-order");this.canOverlap=r_(S,"text-overlap","text-allow-overlap")!=="never"||r_(S,"icon-overlap","icon-allow-overlap")!=="never"||S.get("text-ignore-placement")||S.get("icon-ignore-placement"),this.sortFeaturesByKey=j!=="viewport-y"&&!L.isConstant(),this.sortFeaturesByY=(j==="viewport-y"||j==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,S.get("symbol-placement")==="point"&&(this.writingModes=S.get("text-writing-mode").map(V=>s.ah[V])),this.stateDependentLayerIds=this.layers.filter(V=>V.isStateDependent()).map(V=>V.id),this.sourceID=u.sourceID}createArrays(){this.text=new s0(new Kh(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new s0(new Kh(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new ot,this.lineVertexArray=new ft,this.symbolInstances=new Ge,this.textAnchorOffsets=new Lt}calculateGlyphDependencies(u,m,S,L,j){for(let V=0;V<u.length;V++)if(m[u.charCodeAt(V)]=!0,(S||L)&&j){const J=Df[u.charAt(V)];J&&(m[J.charCodeAt(0)]=!0)}}populate(u,m,S){const L=this.layers[0],j=L.layout,V=j.get("text-font"),J=j.get("text-field"),oe=j.get("icon-image"),de=(J.value.kind!=="constant"||J.value.value instanceof xn&&!J.value.value.isEmpty()||J.value.value.toString().length>0)&&(V.value.kind!=="constant"||V.value.value.length>0),be=oe.value.kind!=="constant"||!!oe.value.value||Object.keys(oe.parameters).length>0,Le=j.get("symbol-sort-key");if(this.features=[],!de&&!be)return;const $e=m.iconDependencies,Je=m.glyphDependencies,tt=m.availableImages,ct=new ar(this.zoom);for(const{feature:Rt,id:Ht,index:fn,sourceLayerIndex:Kt}of u){const Ke=L._featureFilter.needGeometry,Ct=Ih(Rt,Ke);if(!L._featureFilter.filter(ct,Ct,S))continue;let tn,jn;if(Ke||(Ct.geometry=nh(Rt)),de){const Xn=L.getValueAndResolveTokens("text-field",Ct,S,tt),rr=xn.factory(Xn),Or=this.hasRTLText=this.hasRTLText||ys(rr);(!Or||Rn.getRTLTextPluginStatus()==="unavailable"||Or&&Rn.isParsed())&&(tn=jp(rr,L,Ct))}if(be){const Xn=L.getValueAndResolveTokens("icon-image",Ct,S,tt);jn=Xn instanceof Nr?Xn:Nr.fromString(Xn)}if(!tn&&!jn)continue;const Cr=this.sortFeaturesByKey?Le.evaluate(Ct,{},S):void 0;if(this.features.push({id:Ht,text:tn,icon:jn,index:fn,sourceLayerIndex:Kt,geometry:Ct.geometry,properties:Rt.properties,type:PS[Rt.type],sortKey:Cr}),jn&&($e[jn.name]=!0),tn){const Xn=V.evaluate(Ct,{},S).join(","),rr=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ah.vertical)>=0;for(const Or of tn.sections)if(Or.image)$e[Or.image.name]=!0;else{const Tr=te(tn.toString()),Ur=Or.fontStack||Xn,lr=Je[Ur]=Je[Ur]||{};this.calculateGlyphDependencies(Or.text,lr,rr,this.allowVerticalPlacement,Tr)}}}j.get("symbol-placement")==="line"&&(this.features=function(Rt){const Ht={},fn={},Kt=[];let Ke=0;function Ct(Xn){Kt.push(Rt[Xn]),Ke++}function tn(Xn,rr,Or){const Tr=fn[Xn];return delete fn[Xn],fn[rr]=Tr,Kt[Tr].geometry[0].pop(),Kt[Tr].geometry[0]=Kt[Tr].geometry[0].concat(Or[0]),Tr}function jn(Xn,rr,Or){const Tr=Ht[rr];return delete Ht[rr],Ht[Xn]=Tr,Kt[Tr].geometry[0].shift(),Kt[Tr].geometry[0]=Or[0].concat(Kt[Tr].geometry[0]),Tr}function Cr(Xn,rr,Or){const Tr=Or?rr[0][rr[0].length-1]:rr[0][0];return`${Xn}:${Tr.x}:${Tr.y}`}for(let Xn=0;Xn<Rt.length;Xn++){const rr=Rt[Xn],Or=rr.geometry,Tr=rr.text?rr.text.toString():null;if(!Tr){Ct(Xn);continue}const Ur=Cr(Tr,Or),lr=Cr(Tr,Or,!0);if(Ur in fn&&lr in Ht&&fn[Ur]!==Ht[lr]){const li=jn(Ur,lr,Or),Bi=tn(Ur,lr,Kt[li].geometry);delete Ht[Ur],delete fn[lr],fn[Cr(Tr,Kt[Bi].geometry,!0)]=Bi,Kt[li].geometry=null}else Ur in fn?tn(Ur,lr,Or):lr in Ht?jn(Ur,lr,Or):(Ct(Xn),Ht[Ur]=Ke-1,fn[lr]=Ke-1)}return Kt.filter(Xn=>Xn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Rt,Ht)=>Rt.sortKey-Ht.sortKey)}update(u,m,S){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,m,this.layers,S),this.icon.programConfigurations.updatePaintArrays(u,m,this.layers,S))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,m){const S=this.lineVertexArray.length;if(u.segment!==void 0){let L=u.dist(m[u.segment+1]),j=u.dist(m[u.segment]);const V={};for(let J=u.segment+1;J<m.length;J++)V[J]={x:m[J].x,y:m[J].y,tileUnitDistanceFromAnchor:L},J<m.length-1&&(L+=m[J+1].dist(m[J]));for(let J=u.segment||0;J>=0;J--)V[J]={x:m[J].x,y:m[J].y,tileUnitDistanceFromAnchor:j},J>0&&(j+=m[J-1].dist(m[J]));for(let J=0;J<m.length;J++){const oe=V[J];this.lineVertexArray.emplaceBack(oe.x,oe.y,oe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:S,lineLength:this.lineVertexArray.length-S}}addSymbols(u,m,S,L,j,V,J,oe,de,be,Le,$e){const Je=u.indexArray,tt=u.layoutVertexArray,ct=u.segments.prepareSegment(4*m.length,tt,Je,this.canOverlap?V.sortKey:void 0),Rt=this.glyphOffsetArray.length,Ht=ct.vertexLength,fn=this.allowVerticalPlacement&&J===s.ah.vertical?Math.PI/2:0,Kt=V.text&&V.text.sections;for(let Ke=0;Ke<m.length;Ke++){const{tl:Ct,tr:tn,bl:jn,br:Cr,tex:Xn,pixelOffsetTL:rr,pixelOffsetBR:Or,minFontScaleX:Tr,minFontScaleY:Ur,glyphOffset:lr,isSDF:li,sectionIndex:Bi}=m[Ke],Li=ct.vertexLength,Ti=lr[1];o0(tt,oe.x,oe.y,Ct.x,Ti+Ct.y,Xn.x,Xn.y,S,li,rr.x,rr.y,Tr,Ur),o0(tt,oe.x,oe.y,tn.x,Ti+tn.y,Xn.x+Xn.w,Xn.y,S,li,Or.x,rr.y,Tr,Ur),o0(tt,oe.x,oe.y,jn.x,Ti+jn.y,Xn.x,Xn.y+Xn.h,S,li,rr.x,Or.y,Tr,Ur),o0(tt,oe.x,oe.y,Cr.x,Ti+Cr.y,Xn.x+Xn.w,Xn.y+Xn.h,S,li,Or.x,Or.y,Tr,Ur),a_(u.dynamicLayoutVertexArray,oe,fn),Je.emplaceBack(Li,Li+2,Li+1),Je.emplaceBack(Li+1,Li+2,Li+3),ct.vertexLength+=4,ct.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(lr[0]),Ke!==m.length-1&&Bi===m[Ke+1].sectionIndex||u.programConfigurations.populatePaintArrays(tt.length,V,V.index,{},$e,Kt&&Kt[Bi])}u.placedSymbolArray.emplaceBack(oe.x,oe.y,Rt,this.glyphOffsetArray.length-Rt,Ht,de,be,oe.segment,S?S[0]:0,S?S[1]:0,L[0],L[1],J,0,!1,0,Le)}_addCollisionDebugVertex(u,m,S,L,j,V){return m.emplaceBack(0,0),u.emplaceBack(S.x,S.y,L,j,Math.round(V.x),Math.round(V.y))}addCollisionDebugVertices(u,m,S,L,j,V,J){const oe=j.segments.prepareSegment(4,j.layoutVertexArray,j.indexArray),de=oe.vertexLength,be=j.layoutVertexArray,Le=j.collisionVertexArray,$e=J.anchorX,Je=J.anchorY;this._addCollisionDebugVertex(be,Le,V,$e,Je,new E(u,m)),this._addCollisionDebugVertex(be,Le,V,$e,Je,new E(S,m)),this._addCollisionDebugVertex(be,Le,V,$e,Je,new E(S,L)),this._addCollisionDebugVertex(be,Le,V,$e,Je,new E(u,L)),oe.vertexLength+=4;const tt=j.indexArray;tt.emplaceBack(de,de+1),tt.emplaceBack(de+1,de+2),tt.emplaceBack(de+2,de+3),tt.emplaceBack(de+3,de),oe.primitiveLength+=4}addDebugCollisionBoxes(u,m,S,L){for(let j=u;j<m;j++){const V=this.collisionBoxArray.get(j);this.addCollisionDebugVertices(V.x1,V.y1,V.x2,V.y2,L?this.textCollisionBox:this.iconCollisionBox,V.anchorPoint,S)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new bb(Hr,cd.members,di),this.iconCollisionBox=new bb(Hr,cd.members,di);for(let u=0;u<this.symbolInstances.length;u++){const m=this.symbolInstances.get(u);this.addDebugCollisionBoxes(m.textBoxStartIndex,m.textBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.iconBoxStartIndex,m.iconBoxEndIndex,m,!1),this.addDebugCollisionBoxes(m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m,!1)}}_deserializeCollisionBoxesForSymbol(u,m,S,L,j,V,J,oe,de){const be={};for(let Le=m;Le<S;Le++){const $e=u.get(Le);be.textBox={x1:$e.x1,y1:$e.y1,x2:$e.x2,y2:$e.y2,anchorPointX:$e.anchorPointX,anchorPointY:$e.anchorPointY},be.textFeatureIndex=$e.featureIndex;break}for(let Le=L;Le<j;Le++){const $e=u.get(Le);be.verticalTextBox={x1:$e.x1,y1:$e.y1,x2:$e.x2,y2:$e.y2,anchorPointX:$e.anchorPointX,anchorPointY:$e.anchorPointY},be.verticalTextFeatureIndex=$e.featureIndex;break}for(let Le=V;Le<J;Le++){const $e=u.get(Le);be.iconBox={x1:$e.x1,y1:$e.y1,x2:$e.x2,y2:$e.y2,anchorPointX:$e.anchorPointX,anchorPointY:$e.anchorPointY},be.iconFeatureIndex=$e.featureIndex;break}for(let Le=oe;Le<de;Le++){const $e=u.get(Le);be.verticalIconBox={x1:$e.x1,y1:$e.y1,x2:$e.x2,y2:$e.y2,anchorPointX:$e.anchorPointX,anchorPointY:$e.anchorPointY},be.verticalIconFeatureIndex=$e.featureIndex;break}return be}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let m=0;m<this.symbolInstances.length;m++){const S=this.symbolInstances.get(m);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,S.textBoxStartIndex,S.textBoxEndIndex,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S.iconBoxStartIndex,S.iconBoxEndIndex,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,m){const S=u.placedSymbolArray.get(m),L=S.vertexStartIndex+4*S.numGlyphs;for(let j=S.vertexStartIndex;j<L;j+=4)u.indexArray.emplaceBack(j,j+2,j+1),u.indexArray.emplaceBack(j+1,j+2,j+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const m=Math.sin(u),S=Math.cos(u),L=[],j=[],V=[];for(let J=0;J<this.symbolInstances.length;++J){V.push(J);const oe=this.symbolInstances.get(J);L.push(0|Math.round(m*oe.anchorX+S*oe.anchorY)),j.push(oe.featureIndex)}return V.sort((J,oe)=>L[J]-L[oe]||j[oe]-j[J]),V}addToSortKeyRanges(u,m){const S=this.sortKeyRanges[this.sortKeyRanges.length-1];S&&S.sortKey===m?S.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:m,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const m of this.symbolInstanceIndexes){const S=this.symbolInstances.get(m);this.featureSortOrder.push(S.featureIndex),[S.rightJustifiedTextSymbolIndex,S.centerJustifiedTextSymbolIndex,S.leftJustifiedTextSymbolIndex].forEach((L,j,V)=>{L>=0&&V.indexOf(L)===j&&this.addIndicesForPlacedSymbol(this.text,L)}),S.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,S.verticalPlacedTextSymbolIndex),S.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,S.placedIconSymbolIndex),S.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,S.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let IS,DS;ei("SymbolBucket",Og,{omit:["layers","collisionBoxArray","features","compareText"]}),Og.MAX_GLYPHS=65535,Og.addDynamicAttributes=a_;var wb={get paint(){return DS=DS||new $i({"icon-opacity":new or(Fe.paint_symbol["icon-opacity"]),"icon-color":new or(Fe.paint_symbol["icon-color"]),"icon-halo-color":new or(Fe.paint_symbol["icon-halo-color"]),"icon-halo-width":new or(Fe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new or(Fe.paint_symbol["icon-halo-blur"]),"icon-translate":new yr(Fe.paint_symbol["icon-translate"]),"icon-translate-anchor":new yr(Fe.paint_symbol["icon-translate-anchor"]),"text-opacity":new or(Fe.paint_symbol["text-opacity"]),"text-color":new or(Fe.paint_symbol["text-color"],{runtimeType:kr,getOverride:g=>g.textColor,hasOverride:g=>!!g.textColor}),"text-halo-color":new or(Fe.paint_symbol["text-halo-color"]),"text-halo-width":new or(Fe.paint_symbol["text-halo-width"]),"text-halo-blur":new or(Fe.paint_symbol["text-halo-blur"]),"text-translate":new yr(Fe.paint_symbol["text-translate"]),"text-translate-anchor":new yr(Fe.paint_symbol["text-translate-anchor"])})},get layout(){return IS=IS||new $i({"symbol-placement":new yr(Fe.layout_symbol["symbol-placement"]),"symbol-spacing":new yr(Fe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yr(Fe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new or(Fe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yr(Fe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yr(Fe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new yr(Fe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new yr(Fe.layout_symbol["icon-ignore-placement"]),"icon-optional":new yr(Fe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yr(Fe.layout_symbol["icon-rotation-alignment"]),"icon-size":new or(Fe.layout_symbol["icon-size"]),"icon-text-fit":new yr(Fe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yr(Fe.layout_symbol["icon-text-fit-padding"]),"icon-image":new or(Fe.layout_symbol["icon-image"]),"icon-rotate":new or(Fe.layout_symbol["icon-rotate"]),"icon-padding":new or(Fe.layout_symbol["icon-padding"]),"icon-keep-upright":new yr(Fe.layout_symbol["icon-keep-upright"]),"icon-offset":new or(Fe.layout_symbol["icon-offset"]),"icon-anchor":new or(Fe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yr(Fe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yr(Fe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yr(Fe.layout_symbol["text-rotation-alignment"]),"text-field":new or(Fe.layout_symbol["text-field"]),"text-font":new or(Fe.layout_symbol["text-font"]),"text-size":new or(Fe.layout_symbol["text-size"]),"text-max-width":new or(Fe.layout_symbol["text-max-width"]),"text-line-height":new yr(Fe.layout_symbol["text-line-height"]),"text-letter-spacing":new or(Fe.layout_symbol["text-letter-spacing"]),"text-justify":new or(Fe.layout_symbol["text-justify"]),"text-radial-offset":new or(Fe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yr(Fe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new or(Fe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new or(Fe.layout_symbol["text-anchor"]),"text-max-angle":new yr(Fe.layout_symbol["text-max-angle"]),"text-writing-mode":new yr(Fe.layout_symbol["text-writing-mode"]),"text-rotate":new or(Fe.layout_symbol["text-rotate"]),"text-padding":new yr(Fe.layout_symbol["text-padding"]),"text-keep-upright":new yr(Fe.layout_symbol["text-keep-upright"]),"text-transform":new or(Fe.layout_symbol["text-transform"]),"text-offset":new or(Fe.layout_symbol["text-offset"]),"text-allow-overlap":new yr(Fe.layout_symbol["text-allow-overlap"]),"text-overlap":new yr(Fe.layout_symbol["text-overlap"]),"text-ignore-placement":new yr(Fe.layout_symbol["text-ignore-placement"]),"text-optional":new yr(Fe.layout_symbol["text-optional"])})}};class l0{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Qt,this.defaultValue=u}evaluate(u){if(u.formattedSection){const m=this.defaultValue.property.overrides;if(m&&m.hasOverride(u.formattedSection))return m.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ei("FormatSectionOverride",l0,{omit:["defaultValue"]});class Xd extends ga{constructor(u){super(u,wb)}recalculate(u,m){if(super.recalculate(u,m),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const S=this.layout.get("text-writing-mode");if(S){const L=[];for(const j of S)L.indexOf(j)<0&&L.push(j);this.layout._values["text-writing-mode"]=L}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,m,S,L){const j=this.layout.get(u).evaluate(m,{},S,L),V=this._unevaluatedLayout._values[u];return V.isDataDriven()||Js(V.value)||!j?j:function(J,oe){return oe.replace(/{([^{}]+)}/g,(de,be)=>J&&be in J?String(J[be]):"")}(m.properties,j)}createBucket(u){return new Og(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of wb.paint.overridableProperties){if(!Xd.hasPaintOverride(this.layout,u))continue;const m=this.paint.get(u),S=new l0(m),L=new ou(S,m.property.specification);let j=null;j=m.value.kind==="constant"||m.value.kind==="source"?new cl("source",L):new ps("composite",L,m.value.zoomStops),this.paint._values[u]=new ti(m.property,j,m.parameters)}}_handleOverridablePaintPropertyUpdate(u,m,S){return!(!this.layout||m.isDataDriven()||S.isDataDriven())&&Xd.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,m){const S=u.get("text-field"),L=wb.paint.properties[m];let j=!1;const V=J=>{for(const oe of J)if(L.overrides&&L.overrides.hasOverride(oe))return void(j=!0)};if(S.value.kind==="constant"&&S.value.value instanceof xn)V(S.value.value.sections);else if(S.value.kind==="source"){const J=de=>{j||(de instanceof ii&&Vr(de.value)===En?V(de.value.sections):de instanceof Lo?V(de.sections):de.eachChild(J))},oe=S.value;oe._styleExpression&&J(oe._styleExpression.expression)}return j}}let o_;var s_={get paint(){return o_=o_||new $i({"background-color":new yr(Fe.paint_background["background-color"]),"background-pattern":new oo(Fe.paint_background["background-pattern"]),"background-opacity":new yr(Fe.paint_background["background-opacity"])})}};class Sb extends ga{constructor(u){super(u,s_)}}let Hp;var hd={get paint(){return Hp=Hp||new $i({"raster-opacity":new yr(Fe.paint_raster["raster-opacity"]),"raster-hue-rotate":new yr(Fe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yr(Fe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yr(Fe.paint_raster["raster-brightness-max"]),"raster-saturation":new yr(Fe.paint_raster["raster-saturation"]),"raster-contrast":new yr(Fe.paint_raster["raster-contrast"]),"raster-resampling":new yr(Fe.paint_raster["raster-resampling"]),"raster-fade-duration":new yr(Fe.paint_raster["raster-fade-duration"])})}};class u0 extends ga{constructor(u){super(u,hd)}}class PA extends ga{constructor(u){super(u,{}),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class LS{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const NS={once:!0},l_=63710088e-1;class Yd{constructor(u,m){if(isNaN(u)||isNaN(m))throw new Error(`Invalid LngLat object: (${u}, ${m})`);if(this.lng=+u,this.lat=+m,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Yd(ve(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const m=Math.PI/180,S=this.lat*m,L=u.lat*m,j=Math.sin(S)*Math.sin(L)+Math.cos(S)*Math.cos(L)*Math.cos((u.lng-this.lng)*m);return l_*Math.acos(Math.min(j,1))}static convert(u){if(u instanceof Yd)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Yd(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Yd(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const kS=2*Math.PI*l_;function u_(g){return kS*Math.cos(g*Math.PI/180)}function Eb(g){return(180+g)/360}function Tb(g){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+g*Math.PI/360)))/360}function OS(g,u){return g/u_(u)}function c0(g){return 360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90}function c_(g,u){return g*u_(c0(u))}class h0{constructor(u,m,S=0){this.x=+u,this.y=+m,this.z=+S}static fromLngLat(u,m=0){const S=Yd.convert(u);return new h0(Eb(S.lng),Tb(S.lat),OS(m,S.lat))}toLngLat(){return new Yd(360*this.x-180,c0(this.y))}toAltitude(){return c_(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/kS*(u=c0(this.y),1/Math.cos(u*Math.PI/180));var u}}function FS(g,u,m){var S=2*Math.PI*6378137/256/Math.pow(2,m);return[g*S-2*Math.PI*6378137/2,u*S-2*Math.PI*6378137/2]}class Fg{constructor(u,m,S){if(!function(L,j,V){return!(L<0||L>25||V<0||V>=Math.pow(2,L)||j<0||j>=Math.pow(2,L))}(u,m,S))throw new Error(`x=${m}, y=${S}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=m,this.y=S,this.key=Da(0,u,u,m,S)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,m,S){const L=(V=this.y,J=this.z,oe=FS(256*(j=this.x),256*(V=Math.pow(2,J)-V-1),J),de=FS(256*(j+1),256*(V+1),J),oe[0]+","+oe[1]+","+de[0]+","+de[1]);var j,V,J,oe,de;const be=function(Le,$e,Je){let tt,ct="";for(let Rt=Le;Rt>0;Rt--)tt=1<<Rt-1,ct+=($e&tt?1:0)+(Je&tt?2:0);return ct}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(S==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,m>1?"@2x":"").replace(/{quadkey}/g,be).replace(/{bbox-epsg-3857}/g,L)}isChildOf(u){const m=this.z-u.z;return m>0&&u.x===this.x>>m&&u.y===this.y>>m}getTilePoint(u){const m=Math.pow(2,this.z);return new E((u.x*m-this.x)*se,(u.y*m-this.y)*se)}toString(){return`${this.z}/${this.x}/${this.y}`}}class BS{constructor(u,m){this.wrap=u,this.canonical=m,this.key=Da(u,m.z,m.z,m.x,m.y)}}class lh{constructor(u,m,S,L,j){if(this.terrainRttPosMatrix32f=null,u<S)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${S}`);this.overscaledZ=u,this.wrap=m,this.canonical=new Fg(S,+L,+j),this.key=Da(m,u,S,L,j)}clone(){return new lh(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-u;return u>this.canonical.z?new lh(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lh(u,this.wrap,u,this.canonical.x>>m,this.canonical.y>>m)}calculateScaledKey(u,m){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const S=this.canonical.z-u;return u>this.canonical.z?Da(this.wrap*+m,u,this.canonical.z,this.canonical.x,this.canonical.y):Da(this.wrap*+m,u,u,this.canonical.x>>S,this.canonical.y>>S)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const m=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>m&&u.canonical.y===this.canonical.y>>m}children(u){if(this.overscaledZ>=u)return[new lh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const m=this.canonical.z+1,S=2*this.canonical.x,L=2*this.canonical.y;return[new lh(m,this.wrap,m,S,L),new lh(m,this.wrap,m,S+1,L),new lh(m,this.wrap,m,S,L+1),new lh(m,this.wrap,m,S+1,L+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new lh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new lh(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new BS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new h0(u.x-this.wrap,u.y))}}function Da(g,u,m,S,L){(g*=2)<0&&(g=-1*g-1);const j=1<<m;return(j*j*g+j*L+S).toString(36)+m.toString(36)+u.toString(36)}ei("CanonicalTileID",Fg),ei("OverscaledTileID",lh,{omit:["terrainRttPosMatrix32f"]});class h_{constructor(u,m,S,L=1,j=1,V=1,J=0){if(this.uid=u,m.height!==m.width)throw new RangeError("DEM tiles must be square");if(S&&!["mapbox","terrarium","custom"].includes(S))return void st(`"${S}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=m.height;const oe=this.dim=m.height-2;switch(this.data=new Uint32Array(m.data.buffer),S){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=L,this.greenFactor=j,this.blueFactor=V,this.baseShift=J;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let de=0;de<oe;de++)this.data[this._idx(-1,de)]=this.data[this._idx(0,de)],this.data[this._idx(oe,de)]=this.data[this._idx(oe-1,de)],this.data[this._idx(de,-1)]=this.data[this._idx(de,0)],this.data[this._idx(de,oe)]=this.data[this._idx(de,oe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(oe,-1)]=this.data[this._idx(oe-1,0)],this.data[this._idx(-1,oe)]=this.data[this._idx(0,oe-1)],this.data[this._idx(oe,oe)]=this.data[this._idx(oe-1,oe-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let de=0;de<oe;de++)for(let be=0;be<oe;be++){const Le=this.get(de,be);Le>this.max&&(this.max=Le),Le<this.min&&(this.min=Le)}}get(u,m){const S=new Uint8Array(this.data.buffer),L=4*this._idx(u,m);return this.unpack(S[L],S[L+1],S[L+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,m){if(u<-1||u>=this.dim+1||m<-1||m>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(m+1)*this.stride+(u+1)}unpack(u,m,S){return u*this.redFactor+m*this.greenFactor+S*this.blueFactor-this.baseShift}getPixels(){return new rh({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,m,S){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let L=m*this.dim,j=m*this.dim+this.dim,V=S*this.dim,J=S*this.dim+this.dim;switch(m){case-1:L=j-1;break;case 1:j=L+1}switch(S){case-1:V=J-1;break;case 1:J=V+1}const oe=-m*this.dim,de=-S*this.dim;for(let be=V;be<J;be++)for(let Le=L;Le<j;Le++)this.data[this._idx(Le,be)]=u.data[this._idx(Le+oe,be+de)]}}ei("DEMData",h_);class f0{constructor(u){this._stringToNumber={},this._numberToString=[];for(let m=0;m<u.length;m++){const S=u[m];this._stringToNumber[S]=m,this._numberToString[m]=S}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class f_{constructor(u,m,S,L,j){this.type="Feature",this._vectorTileFeature=u,u._z=m,u._x=S,u._y=L,this.properties=u.properties,this.id=j}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const m in this)m!=="_geometry"&&m!=="_vectorTileFeature"&&(u[m]=this[m]);return u}}class Cb{constructor(u,m){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Mf(se,16,0),this.grid3D=new Mf(se,16,0),this.featureIndexArray=new Xt,this.promoteId=m}insert(u,m,S,L,j,V){const J=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(S,L,j);const oe=V?this.grid3D:this.grid;for(let de=0;de<m.length;de++){const be=m[de],Le=[1/0,1/0,-1/0,-1/0];for(let $e=0;$e<be.length;$e++){const Je=be[$e];Le[0]=Math.min(Le[0],Je.x),Le[1]=Math.min(Le[1],Je.y),Le[2]=Math.max(Le[2],Je.x),Le[3]=Math.max(Le[3],Je.y)}Le[0]<se&&Le[1]<se&&Le[2]>=0&&Le[3]>=0&&oe.insert(J,Le[0],Le[1],Le[2],Le[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Lm.VectorTile(new Bm(this.rawTileData)).layers,this.sourceLayerCoder=new f0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,m,S,L){this.loadVTLayers();const j=u.params,V=se/u.tileSize/u.scale,J=nd(j.filter),oe=u.queryGeometry,de=u.queryPadding*V,be=Vm(oe),Le=this.grid.query(be.minX-de,be.minY-de,be.maxX+de,be.maxY+de),$e=Vm(u.cameraQueryGeometry),Je=this.grid3D.query($e.minX-de,$e.minY-de,$e.maxX+de,$e.maxY+de,(Rt,Ht,fn,Kt)=>function(Ke,Ct,tn,jn,Cr){for(const rr of Ke)if(Ct<=rr.x&&tn<=rr.y&&jn>=rr.x&&Cr>=rr.y)return!0;const Xn=[new E(Ct,tn),new E(Ct,Cr),new E(jn,Cr),new E(jn,tn)];if(Ke.length>2){for(const rr of Xn)if(Us(Ke,rr))return!0}for(let rr=0;rr<Ke.length-1;rr++)if(zy(Ke[rr],Ke[rr+1],Xn))return!0;return!1}(u.cameraQueryGeometry,Rt-de,Ht-de,fn+de,Kt+de));for(const Rt of Je)Le.push(Rt);Le.sort(p_);const tt={};let ct;for(let Rt=0;Rt<Le.length;Rt++){const Ht=Le[Rt];if(Ht===ct)continue;ct=Ht;const fn=this.featureIndexArray.get(Ht);let Kt=null;this.loadMatchingFeature(tt,fn.bucketIndex,fn.sourceLayerIndex,fn.featureIndex,J,j.layers,j.availableImages,m,S,L,(Ke,Ct,tn)=>(Kt||(Kt=nh(Ke)),Ct.queryIntersectsFeature({queryGeometry:oe,feature:Ke,featureState:tn,geometry:Kt,zoom:this.z,transform:u.transform,pixelsToTileUnits:V,pixelPosMatrix:u.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:u.getElevation})))}return tt}loadMatchingFeature(u,m,S,L,j,V,J,oe,de,be,Le){const $e=this.bucketLayerIDs[m];if(V&&!$e.some(Rt=>V.has(Rt)))return;const Je=this.sourceLayerCoder.decode(S),tt=this.vtLayers[Je].feature(L);if(j.needGeometry){const Rt=Ih(tt,!0);if(!j.filter(new ar(this.tileID.overscaledZ),Rt,this.tileID.canonical))return}else if(!j.filter(new ar(this.tileID.overscaledZ),tt))return;const ct=this.getId(tt,Je);for(let Rt=0;Rt<$e.length;Rt++){const Ht=$e[Rt];if(V&&!V.has(Ht))continue;const fn=oe[Ht];if(!fn)continue;let Kt={};ct&&be&&(Kt=be.getState(fn.sourceLayer||"_geojsonTileLayer",ct));const Ke=Ee({},de[Ht]);Ke.paint=d_(Ke.paint,fn.paint,tt,Kt,J),Ke.layout=d_(Ke.layout,fn.layout,tt,Kt,J);const Ct=!Le||Le(tt,fn,Kt);if(!Ct)continue;const tn=new f_(tt,this.z,this.x,this.y,ct);tn.layer=Ke;let jn=u[Ht];jn===void 0&&(jn=u[Ht]=[]),jn.push({featureIndex:L,feature:tn,intersectionZ:Ct})}}lookupSymbolFeatures(u,m,S,L,j,V,J,oe){const de={};this.loadVTLayers();const be=nd(j);for(const Le of u)this.loadMatchingFeature(de,S,L,Le,be,V,J,oe,m);return de}hasLayer(u){for(const m of this.bucketLayerIDs)for(const S of m)if(u===S)return!0;return!1}getId(u,m){var S;let L=u.id;return this.promoteId&&(L=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[m]],typeof L=="boolean"&&(L=Number(L)),L===void 0&&(!((S=u.properties)===null||S===void 0)&&S.cluster)&&this.promoteId&&(L=Number(u.properties.cluster_id))),L}}function d_(g,u,m,S,L){return We(g,(j,V)=>{const J=u instanceof Zr?u.get(V):null;return J&&J.evaluate?J.evaluate(m,S,L):J})}function Vm(g){let u=1/0,m=1/0,S=-1/0,L=-1/0;for(const j of g)u=Math.min(u,j.x),m=Math.min(m,j.y),S=Math.max(S,j.x),L=Math.max(L,j.y);return{minX:u,minY:m,maxX:S,maxY:L}}function p_(g,u){return u-g}function Bg(g,u,m,S,L){const j=[];for(let V=0;V<g.length;V++){const J=g[V];let oe;for(let de=0;de<J.length-1;de++){let be=J[de],Le=J[de+1];be.x<u&&Le.x<u||(be.x<u?be=new E(u,be.y+(u-be.x)/(Le.x-be.x)*(Le.y-be.y))._round():Le.x<u&&(Le=new E(u,be.y+(u-be.x)/(Le.x-be.x)*(Le.y-be.y))._round()),be.y<m&&Le.y<m||(be.y<m?be=new E(be.x+(m-be.y)/(Le.y-be.y)*(Le.x-be.x),m)._round():Le.y<m&&(Le=new E(be.x+(m-be.y)/(Le.y-be.y)*(Le.x-be.x),m)._round()),be.x>=S&&Le.x>=S||(be.x>=S?be=new E(S,be.y+(S-be.x)/(Le.x-be.x)*(Le.y-be.y))._round():Le.x>=S&&(Le=new E(S,be.y+(S-be.x)/(Le.x-be.x)*(Le.y-be.y))._round()),be.y>=L&&Le.y>=L||(be.y>=L?be=new E(be.x+(L-be.y)/(Le.y-be.y)*(Le.x-be.x),L)._round():Le.y>=L&&(Le=new E(be.x+(L-be.y)/(Le.y-be.y)*(Le.x-be.x),L)._round()),oe&&be.equals(oe[oe.length-1])||(oe=[be],j.push(oe)),oe.push(Le)))))}}return j}ei("FeatureIndex",Cb,{omit:["rawTileData","sourceLayerCoder"]});class Zd extends E{constructor(u,m,S,L){super(u,m),this.angle=S,L!==void 0&&(this.segment=L)}clone(){return new Zd(this.x,this.y,this.angle,this.segment)}}function zS(g,u,m,S,L){if(u.segment===void 0||m===0)return!0;let j=u,V=u.segment+1,J=0;for(;J>-m/2;){if(V--,V<0)return!1;J-=g[V].dist(j),j=g[V]}J+=g[V].dist(g[V+1]),V++;const oe=[];let de=0;for(;J<m/2;){const be=g[V],Le=g[V+1];if(!Le)return!1;let $e=g[V-1].angleTo(be)-be.angleTo(Le);for($e=Math.abs(($e+3*Math.PI)%(2*Math.PI)-Math.PI),oe.push({distance:J,angleDelta:$e}),de+=$e;J-oe[0].distance>S;)de-=oe.shift().angleDelta;if(de>L)return!1;V++,J+=be.dist(Le)}return!0}function US(g){let u=0;for(let m=0;m<g.length-1;m++)u+=g[m].dist(g[m+1]);return u}function Mb(g,u,m){return g?.6*u*m:0}function Ab(g,u){return Math.max(g?g.right-g.left:0,u?u.right-u.left:0)}function g_(g,u,m,S,L,j){const V=Mb(m,L,j),J=Ab(m,S)*j;let oe=0;const de=US(g)/2;for(let be=0;be<g.length-1;be++){const Le=g[be],$e=g[be+1],Je=Le.dist($e);if(oe+Je>de){const tt=(de-oe)/Je,ct=ns.number(Le.x,$e.x,tt),Rt=ns.number(Le.y,$e.y,tt),Ht=new Zd(ct,Rt,$e.angleTo(Le),be);return Ht._round(),!V||zS(g,Ht,J,V,u)?Ht:void 0}oe+=Je}}function ss(g,u,m,S,L,j,V,J,oe){const de=Mb(S,j,V),be=Ab(S,L),Le=be*V,$e=g[0].x===0||g[0].x===oe||g[0].y===0||g[0].y===oe;return u-Le<u/4&&(u=Le+u/4),m_(g,$e?u/2*J%u:(be/2+2*j)*V*J%u,u,de,m,Le,$e,!1,oe)}function m_(g,u,m,S,L,j,V,J,oe){const de=j/2,be=US(g);let Le=0,$e=u-m,Je=[];for(let tt=0;tt<g.length-1;tt++){const ct=g[tt],Rt=g[tt+1],Ht=ct.dist(Rt),fn=Rt.angleTo(ct);for(;$e+m<Le+Ht;){$e+=m;const Kt=($e-Le)/Ht,Ke=ns.number(ct.x,Rt.x,Kt),Ct=ns.number(ct.y,Rt.y,Kt);if(Ke>=0&&Ke<oe&&Ct>=0&&Ct<oe&&$e-de>=0&&$e+de<=be){const tn=new Zd(Ke,Ct,fn,tt);tn._round(),S&&!zS(g,tn,j,S,L)||Je.push(tn)}}Le+=Ht}return J||Je.length||V||(Je=m_(g,Le/2,m,S,L,j,V,!0,oe)),Je}ei("Anchor",Zd);const Ul=Ju;function jS(g,u,m,S){const L=[],j=g.image,V=j.pixelRatio,J=j.paddedRect.w-2*Ul,oe=j.paddedRect.h-2*Ul;let de={x1:g.left,y1:g.top,x2:g.right,y2:g.bottom};const be=j.stretchX||[[0,J]],Le=j.stretchY||[[0,oe]],$e=(lr,li)=>lr+li[1]-li[0],Je=be.reduce($e,0),tt=Le.reduce($e,0),ct=J-Je,Rt=oe-tt;let Ht=0,fn=Je,Kt=0,Ke=tt,Ct=0,tn=ct,jn=0,Cr=Rt;if(j.content&&S){const lr=j.content,li=lr[2]-lr[0],Bi=lr[3]-lr[1];(j.textFitWidth||j.textFitHeight)&&(de=kg(g)),Ht=Hm(be,0,lr[0]),Kt=Hm(Le,0,lr[1]),fn=Hm(be,lr[0],lr[2]),Ke=Hm(Le,lr[1],lr[3]),Ct=lr[0]-Ht,jn=lr[1]-Kt,tn=li-fn,Cr=Bi-Ke}const Xn=de.x1,rr=de.y1,Or=de.x2-Xn,Tr=de.y2-rr,Ur=(lr,li,Bi,Li)=>{const Ti=zg(lr.stretch-Ht,fn,Or,Xn),La=d0(lr.fixed-Ct,tn,lr.stretch,Je),Is=zg(li.stretch-Kt,Ke,Tr,rr),gl=d0(li.fixed-jn,Cr,li.stretch,tt),du=zg(Bi.stretch-Ht,fn,Or,Xn),pc=d0(Bi.fixed-Ct,tn,Bi.stretch,Je),Lc=zg(Li.stretch-Kt,Ke,Tr,rr),pu=d0(Li.fixed-jn,Cr,Li.stretch,tt),ls=new E(Ti,Is),Tl=new E(du,Is),Cl=new E(du,Lc),jl=new E(Ti,Lc),ec=new E(La/V,gl/V),Nc=new E(pc/V,pu/V),_s=u*Math.PI/180;if(_s){const rl=Math.sin(_s),il=Math.cos(_s),Jo=[il,-rl,rl,il];ls._matMult(Jo),Tl._matMult(Jo),jl._matMult(Jo),Cl._matMult(Jo)}const Ml=lr.stretch+lr.fixed,us=li.stretch+li.fixed;return{tl:ls,tr:Tl,bl:jl,br:Cl,tex:{x:j.paddedRect.x+Ul+Ml,y:j.paddedRect.y+Ul+us,w:Bi.stretch+Bi.fixed-Ml,h:Li.stretch+Li.fixed-us},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ec,pixelOffsetBR:Nc,minFontScaleX:tn/V/Or,minFontScaleY:Cr/V/Tr,isSDF:m}};if(S&&(j.stretchX||j.stretchY)){const lr=v_(be,ct,Je),li=v_(Le,Rt,tt);for(let Bi=0;Bi<lr.length-1;Bi++){const Li=lr[Bi],Ti=lr[Bi+1];for(let La=0;La<li.length-1;La++)L.push(Ur(Li,li[La],Ti,li[La+1]))}}else L.push(Ur({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:J+1},{fixed:0,stretch:oe+1}));return L}function Hm(g,u,m){let S=0;for(const L of g)S+=Math.max(u,Math.min(m,L[1]))-Math.max(u,Math.min(m,L[0]));return S}function v_(g,u,m){const S=[{fixed:-1,stretch:0}];for(const[L,j]of g){const V=S[S.length-1];S.push({fixed:L-V.stretch,stretch:V.stretch}),S.push({fixed:L-V.stretch,stretch:V.stretch+(j-L)})}return S.push({fixed:u+Ul,stretch:m}),S}function zg(g,u,m,S){return g/u*m+S}function d0(g,u,m,S){return g-u*m/S}class p0{constructor(u,m,S,L,j,V,J,oe,de,be){var Le;if(this.boxStartIndex=u.length,de){let $e=V.top,Je=V.bottom;const tt=V.collisionPadding;tt&&($e-=tt[1],Je+=tt[3]);let ct=Je-$e;ct>0&&(ct=Math.max(10,ct),this.circleDiameter=ct)}else{const $e=!((Le=V.image)===null||Le===void 0)&&Le.content&&(V.image.textFitWidth||V.image.textFitHeight)?kg(V):{x1:V.left,y1:V.top,x2:V.right,y2:V.bottom};$e.y1=$e.y1*J-oe[0],$e.y2=$e.y2*J+oe[2],$e.x1=$e.x1*J-oe[3],$e.x2=$e.x2*J+oe[1];const Je=V.collisionPadding;if(Je&&($e.x1-=Je[0]*J,$e.y1-=Je[1]*J,$e.x2+=Je[2]*J,$e.y2+=Je[3]*J),be){const tt=new E($e.x1,$e.y1),ct=new E($e.x2,$e.y1),Rt=new E($e.x1,$e.y2),Ht=new E($e.x2,$e.y2),fn=be*Math.PI/180;tt._rotate(fn),ct._rotate(fn),Rt._rotate(fn),Ht._rotate(fn),$e.x1=Math.min(tt.x,ct.x,Rt.x,Ht.x),$e.x2=Math.max(tt.x,ct.x,Rt.x,Ht.x),$e.y1=Math.min(tt.y,ct.y,Rt.y,Ht.y),$e.y2=Math.max(tt.y,ct.y,Rt.y,Ht.y)}u.emplaceBack(m.x,m.y,$e.x1,$e.y1,$e.x2,$e.y2,S,L,j)}this.boxEndIndex=u.length}}class Rb{constructor(u=[],m=(S,L)=>S<L?-1:S>L?1:0){if(this.data=u,this.length=this.data.length,this.compare=m,this.length>0)for(let S=(this.length>>1)-1;S>=0;S--)this._down(S)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],m=this.data.pop();return--this.length>0&&(this.data[0]=m,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:m,compare:S}=this,L=m[u];for(;u>0;){const j=u-1>>1,V=m[j];if(S(L,V)>=0)break;m[u]=V,u=j}m[u]=L}_down(u){const{data:m,compare:S}=this,L=this.length>>1,j=m[u];for(;u<L;){let V=1+(u<<1);const J=V+1;if(J<this.length&&S(m[J],m[V])<0&&(V=J),S(m[V],j)>=0)break;m[u]=m[V],u=V}m[u]=j}}function Pb(g,u=1,m=!1){let S=1/0,L=1/0,j=-1/0,V=-1/0;const J=g[0];for(let Je=0;Je<J.length;Je++){const tt=J[Je];(!Je||tt.x<S)&&(S=tt.x),(!Je||tt.y<L)&&(L=tt.y),(!Je||tt.x>j)&&(j=tt.x),(!Je||tt.y>V)&&(V=tt.y)}const oe=Math.min(j-S,V-L);let de=oe/2;const be=new Rb([],IA);if(oe===0)return new E(S,L);for(let Je=S;Je<j;Je+=oe)for(let tt=L;tt<V;tt+=oe)be.push(new Ug(Je+de,tt+de,de,g));let Le=function(Je){let tt=0,ct=0,Rt=0;const Ht=Je[0];for(let fn=0,Kt=Ht.length,Ke=Kt-1;fn<Kt;Ke=fn++){const Ct=Ht[fn],tn=Ht[Ke],jn=Ct.x*tn.y-tn.x*Ct.y;ct+=(Ct.x+tn.x)*jn,Rt+=(Ct.y+tn.y)*jn,tt+=3*jn}return new Ug(ct/tt,Rt/tt,0,Je)}(g),$e=be.length;for(;be.length;){const Je=be.pop();(Je.d>Le.d||!Le.d)&&(Le=Je,m&&console.log("found best %d after %d probes",Math.round(1e4*Je.d)/1e4,$e)),Je.max-Le.d<=u||(de=Je.h/2,be.push(new Ug(Je.p.x-de,Je.p.y-de,de,g)),be.push(new Ug(Je.p.x+de,Je.p.y-de,de,g)),be.push(new Ug(Je.p.x-de,Je.p.y+de,de,g)),be.push(new Ug(Je.p.x+de,Je.p.y+de,de,g)),$e+=4)}return m&&(console.log(`num probes: ${$e}`),console.log(`best distance: ${Le.d}`)),Le.p}function IA(g,u){return u.max-g.max}function Ug(g,u,m,S){this.p=new E(g,u),this.h=m,this.d=function(L,j){let V=!1,J=1/0;for(let oe=0;oe<j.length;oe++){const de=j[oe];for(let be=0,Le=de.length,$e=Le-1;be<Le;$e=be++){const Je=de[be],tt=de[$e];Je.y>L.y!=tt.y>L.y&&L.x<(tt.x-Je.x)*(L.y-Je.y)/(tt.y-Je.y)+Je.x&&(V=!V),J=Math.min(J,jd(L,Je,tt))}}return(V?1:-1)*Math.sqrt(J)}(this.p,S),this.max=this.d+this.h*Math.SQRT2}var Lu;s.ay=void 0,(Lu=s.ay||(s.ay={}))[Lu.center=1]="center",Lu[Lu.left=2]="left",Lu[Lu.right=3]="right",Lu[Lu.top=4]="top",Lu[Lu.bottom=5]="bottom",Lu[Lu["top-left"]=6]="top-left",Lu[Lu["top-right"]=7]="top-right",Lu[Lu["bottom-left"]=8]="bottom-left",Lu[Lu["bottom-right"]=9]="bottom-right";const Kd=7,Ib=Number.POSITIVE_INFINITY;function GS(g,u){return u[1]!==Ib?function(m,S,L){let j=0,V=0;switch(S=Math.abs(S),L=Math.abs(L),m){case"top-right":case"top-left":case"top":V=L-Kd;break;case"bottom-right":case"bottom-left":case"bottom":V=-L+Kd}switch(m){case"top-right":case"bottom-right":case"right":j=-S;break;case"top-left":case"bottom-left":case"left":j=S}return[j,V]}(g,u[0],u[1]):function(m,S){let L=0,j=0;S<0&&(S=0);const V=S/Math.SQRT2;switch(m){case"top-right":case"top-left":j=V-Kd;break;case"bottom-right":case"bottom-left":j=-V+Kd;break;case"bottom":j=-S+Kd;break;case"top":j=S-Kd}switch(m){case"top-right":case"bottom-right":L=-V;break;case"top-left":case"bottom-left":L=V;break;case"left":L=S;break;case"right":L=-S}return[L,j]}(g,u[0])}function Jd(g,u,m){var S;const L=g.layout,j=(S=L.get("text-variable-anchor-offset"))===null||S===void 0?void 0:S.evaluate(u,{},m);if(j){const J=j.values,oe=[];for(let de=0;de<J.length;de+=2){const be=oe[de]=J[de],Le=J[de+1].map($e=>$e*js);be.startsWith("top")?Le[1]-=Kd:be.startsWith("bottom")&&(Le[1]+=Kd),oe[de+1]=Le}return new Ir(oe)}const V=L.get("text-variable-anchor");if(V){let J;J=g._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[L.get("text-radial-offset").evaluate(u,{},m)*js,Ib]:L.get("text-offset").evaluate(u,{},m).map(de=>de*js);const oe=[];for(const de of V)oe.push(de,GS(de,J));return new Ir(oe)}return null}function y_(g){switch(g){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Db(g,u,m,S,L,j,V,J,oe,de,be,Le){let $e=j.textMaxSize.evaluate(u,{});$e===void 0&&($e=V);const Je=g.layers[0].layout,tt=Je.get("icon-offset").evaluate(u,{},be),ct=HS(m.horizontal),Rt=V/24,Ht=g.tilePixelRatio*Rt,fn=g.tilePixelRatio*$e/24,Kt=g.tilePixelRatio*J,Ke=g.tilePixelRatio*Je.get("symbol-spacing"),Ct=Je.get("text-padding")*g.tilePixelRatio,tn=function(Bi,Li,Ti,La=1){const Is=Bi.get("icon-padding").evaluate(Li,{},Ti),gl=Is&&Is.values;return[gl[0]*La,gl[1]*La,gl[2]*La,gl[3]*La]}(Je,u,be,g.tilePixelRatio),jn=Je.get("text-max-angle")/180*Math.PI,Cr=Je.get("text-rotation-alignment")!=="viewport"&&Je.get("symbol-placement")!=="point",Xn=Je.get("icon-rotation-alignment")==="map"&&Je.get("symbol-placement")!=="point",rr=Je.get("symbol-placement"),Or=Ke/2,Tr=Je.get("icon-text-fit");let Ur;S&&Tr!=="none"&&(g.allowVerticalPlacement&&m.vertical&&(Ur=a0(S,m.vertical,Tr,Je.get("icon-text-fit-padding"),tt,Rt)),ct&&(S=a0(S,ct,Tr,Je.get("icon-text-fit-padding"),tt,Rt)));const lr=be?Le.line.getGranularityForZoomLevel(be.z):1,li=(Bi,Li)=>{Li.x<0||Li.x>=se||Li.y<0||Li.y>=se||function(Ti,La,Is,gl,du,pc,Lc,pu,ls,Tl,Cl,jl,ec,Nc,_s,Ml,us,rl,il,Jo,cs,rf,fd,Nf,WS){const Qd=Ti.addToLineVertexArray(La,Is);let $p,$m,ep,tp,Fb=0,Wm=0,x_=0,m0=0,b_=-1,Bb=-1;const af={};let f=hc("");if(Ti.allowVerticalPlacement&&gl.vertical){const Ma=pu.layout.get("text-rotate").evaluate(cs,{},Nf)+90;ep=new p0(ls,La,Tl,Cl,jl,gl.vertical,ec,Nc,_s,Ma),Lc&&(tp=new p0(ls,La,Tl,Cl,jl,Lc,us,rl,_s,Ma))}if(du){const Ma=pu.layout.get("icon-rotate").evaluate(cs,{}),In=pu.layout.get("icon-text-fit")!=="none",Sn=jS(du,Ma,fd,In),Bn=Lc?jS(Lc,Ma,fd,In):void 0;$m=new p0(ls,La,Tl,Cl,jl,du,us,rl,!1,Ma),Fb=4*Sn.length;const Sr=Ti.iconSizeData;let wi=null;Sr.kind==="source"?(wi=[Lf*pu.layout.get("icon-size").evaluate(cs,{})],wi[0]>Wd&&st(`${Ti.layerIds[0]}: Value for "icon-size" is >= ${Gm}. Reduce your "icon-size".`)):Sr.kind==="composite"&&(wi=[Lf*rf.compositeIconSizes[0].evaluate(cs,{},Nf),Lf*rf.compositeIconSizes[1].evaluate(cs,{},Nf)],(wi[0]>Wd||wi[1]>Wd)&&st(`${Ti.layerIds[0]}: Value for "icon-size" is >= ${Gm}. Reduce your "icon-size".`)),Ti.addSymbols(Ti.icon,Sn,wi,Jo,il,cs,s.ah.none,La,Qd.lineStartIndex,Qd.lineLength,-1,Nf),b_=Ti.icon.placedSymbolArray.length-1,Bn&&(Wm=4*Bn.length,Ti.addSymbols(Ti.icon,Bn,wi,Jo,il,cs,s.ah.vertical,La,Qd.lineStartIndex,Qd.lineLength,-1,Nf),Bb=Ti.icon.placedSymbolArray.length-1)}const x=Object.keys(gl.horizontal);for(const Ma of x){const In=gl.horizontal[Ma];if(!$p){f=hc(In.text);const Bn=pu.layout.get("text-rotate").evaluate(cs,{},Nf);$p=new p0(ls,La,Tl,Cl,jl,In,ec,Nc,_s,Bn)}const Sn=In.positionedLines.length===1;if(x_+=VS(Ti,La,In,pc,pu,_s,cs,Ml,Qd,gl.vertical?s.ah.horizontal:s.ah.horizontalOnly,Sn?x:[Ma],af,b_,rf,Nf),Sn)break}gl.vertical&&(m0+=VS(Ti,La,gl.vertical,pc,pu,_s,cs,Ml,Qd,s.ah.vertical,["vertical"],af,Bb,rf,Nf));const C=$p?$p.boxStartIndex:Ti.collisionBoxArray.length,z=$p?$p.boxEndIndex:Ti.collisionBoxArray.length,ee=ep?ep.boxStartIndex:Ti.collisionBoxArray.length,he=ep?ep.boxEndIndex:Ti.collisionBoxArray.length,Qe=$m?$m.boxStartIndex:Ti.collisionBoxArray.length,St=$m?$m.boxEndIndex:Ti.collisionBoxArray.length,ln=tp?tp.boxStartIndex:Ti.collisionBoxArray.length,$n=tp?tp.boxEndIndex:Ti.collisionBoxArray.length;let fr=-1;const Dr=(Ma,In)=>Ma&&Ma.circleDiameter?Math.max(Ma.circleDiameter,In):In;fr=Dr($p,fr),fr=Dr(ep,fr),fr=Dr($m,fr),fr=Dr(tp,fr);const Zn=fr>-1?1:0;Zn&&(fr*=WS/js),Ti.glyphOffsetArray.length>=Og.MAX_GLYPHS&&st("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),cs.sortKey!==void 0&&Ti.addToSortKeyRanges(Ti.symbolInstances.length,cs.sortKey);const er=Jd(pu,cs,Nf),[va,aa]=function(Ma,In){const Sn=Ma.length,Bn=In==null?void 0:In.values;if((Bn==null?void 0:Bn.length)>0)for(let Sr=0;Sr<Bn.length;Sr+=2){const wi=Bn[Sr+1];Ma.emplaceBack(s.ay[Bn[Sr]],wi[0],wi[1])}return[Sn,Ma.length]}(Ti.textAnchorOffsets,er);Ti.symbolInstances.emplaceBack(La.x,La.y,af.right>=0?af.right:-1,af.center>=0?af.center:-1,af.left>=0?af.left:-1,af.vertical||-1,b_,Bb,f,C,z,ee,he,Qe,St,ln,$n,Tl,x_,m0,Fb,Wm,Zn,0,ec,fr,va,aa)}(g,Li,Bi,m,S,L,Ur,g.layers[0],g.collisionBoxArray,u.index,u.sourceLayerIndex,g.index,Ht,[Ct,Ct,Ct,Ct],Cr,oe,Kt,tn,Xn,tt,u,j,de,be,V)};if(rr==="line")for(const Bi of Bg(u.geometry,0,0,se,se)){const Li=Vd(Bi,lr),Ti=ss(Li,Ke,jn,m.vertical||ct,S,24,fn,g.overscaling,se);for(const La of Ti)ct&&Lb(g,ct.text,Or,La)||li(Li,La)}else if(rr==="line-center"){for(const Bi of u.geometry)if(Bi.length>1){const Li=Vd(Bi,lr),Ti=g_(Li,jn,m.vertical||ct,S,24,fn);Ti&&li(Li,Ti)}}else if(u.type==="Polygon")for(const Bi of Ll(u.geometry,0)){const Li=Pb(Bi,16);li(Vd(Bi[0],lr,!0),new Zd(Li.x,Li.y,0))}else if(u.type==="LineString")for(const Bi of u.geometry){const Li=Vd(Bi,lr);li(Li,new Zd(Li[0].x,Li[0].y,0))}else if(u.type==="Point")for(const Bi of u.geometry)for(const Li of Bi)li([Li],new Zd(Li.x,Li.y,0))}function VS(g,u,m,S,L,j,V,J,oe,de,be,Le,$e,Je,tt){const ct=function(fn,Kt,Ke,Ct,tn,jn,Cr,Xn){const rr=Ct.layout.get("text-rotate").evaluate(jn,{})*Math.PI/180,Or=[];for(const Tr of Kt.positionedLines)for(const Ur of Tr.positionedGlyphs){if(!Ur.rect)continue;const lr=Ur.rect||{};let li=Um+1,Bi=!0,Li=1,Ti=0;const La=(tn||Xn)&&Ur.vertical,Is=Ur.metrics.advance*Ur.scale/2;if(Xn&&Kt.verticalizable&&(Ti=Tr.lineOffset/2-(Ur.imageName?-(js-Ur.metrics.width*Ur.scale)/2:(Ur.scale-1)*js)),Ur.imageName){const rl=Cr[Ur.imageName];Bi=rl.sdf,Li=rl.pixelRatio,li=Ju/Li}const gl=tn?[Ur.x+Is,Ur.y]:[0,0];let du=tn?[0,0]:[Ur.x+Is+Ke[0],Ur.y+Ke[1]-Ti],pc=[0,0];La&&(pc=du,du=[0,0]);const Lc=Ur.metrics.isDoubleResolution?2:1,pu=(Ur.metrics.left-li)*Ur.scale-Is+du[0],ls=(-Ur.metrics.top-li)*Ur.scale+du[1],Tl=pu+lr.w/Lc*Ur.scale/Li,Cl=ls+lr.h/Lc*Ur.scale/Li,jl=new E(pu,ls),ec=new E(Tl,ls),Nc=new E(pu,Cl),_s=new E(Tl,Cl);if(La){const rl=new E(-Is,Is-jm),il=-Math.PI/2,Jo=js/2-Is,cs=new E(5-jm-Jo,-(Ur.imageName?Jo:0)),rf=new E(...pc);jl._rotateAround(il,rl)._add(cs)._add(rf),ec._rotateAround(il,rl)._add(cs)._add(rf),Nc._rotateAround(il,rl)._add(cs)._add(rf),_s._rotateAround(il,rl)._add(cs)._add(rf)}if(rr){const rl=Math.sin(rr),il=Math.cos(rr),Jo=[il,-rl,rl,il];jl._matMult(Jo),ec._matMult(Jo),Nc._matMult(Jo),_s._matMult(Jo)}const Ml=new E(0,0),us=new E(0,0);Or.push({tl:jl,tr:ec,bl:Nc,br:_s,tex:lr,writingMode:Kt.writingMode,glyphOffset:gl,sectionIndex:Ur.sectionIndex,isSDF:Bi,pixelOffsetTL:Ml,pixelOffsetBR:us,minFontScaleX:0,minFontScaleY:0})}return Or}(0,m,J,L,j,V,S,g.allowVerticalPlacement),Rt=g.textSizeData;let Ht=null;Rt.kind==="source"?(Ht=[Lf*L.layout.get("text-size").evaluate(V,{})],Ht[0]>Wd&&st(`${g.layerIds[0]}: Value for "text-size" is >= ${Gm}. Reduce your "text-size".`)):Rt.kind==="composite"&&(Ht=[Lf*Je.compositeTextSizes[0].evaluate(V,{},tt),Lf*Je.compositeTextSizes[1].evaluate(V,{},tt)],(Ht[0]>Wd||Ht[1]>Wd)&&st(`${g.layerIds[0]}: Value for "text-size" is >= ${Gm}. Reduce your "text-size".`)),g.addSymbols(g.text,ct,Ht,J,j,V,de,u,oe.lineStartIndex,oe.lineLength,$e,tt);for(const fn of be)Le[fn]=g.text.placedSymbolArray.length-1;return 4*ct.length}function HS(g){for(const u in g)return g[u];return null}function Lb(g,u,m,S){const L=g.compareText;if(u in L){const j=L[u];for(let V=j.length-1;V>=0;V--)if(S.dist(j[V])<m)return!0}else L[u]=[];return L[u].push(S),!1}const qS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Nh{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[m,S]=new Uint8Array(u,0,2);if(m!==219)throw new Error("Data does not appear to be in a KDBush format.");const L=S>>4;if(L!==1)throw new Error(`Got v${L} data when expected v1.`);const j=qS[15&S];if(!j)throw new Error("Unrecognized array type.");const[V]=new Uint16Array(u,2,1),[J]=new Uint32Array(u,4,1);return new Nh(J,V,j,u)}constructor(u,m=64,S=Float64Array,L){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+m,2),65535),this.ArrayType=S,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const j=qS.indexOf(this.ArrayType),V=2*u*this.ArrayType.BYTES_PER_ELEMENT,J=u*this.IndexArrayType.BYTES_PER_ELEMENT,oe=(8-J%8)%8;if(j<0)throw new Error(`Unexpected typed array class: ${S}.`);L&&L instanceof ArrayBuffer?(this.data=L,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+J+oe,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+V+J+oe),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+J+oe,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+j]),new Uint16Array(this.data,2,1)[0]=m,new Uint32Array(this.data,4,1)[0]=u)}add(u,m){const S=this._pos>>1;return this.ids[S]=S,this.coords[this._pos++]=u,this.coords[this._pos++]=m,S}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return g0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,m,S,L){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:j,coords:V,nodeSize:J}=this,oe=[0,j.length-1,0],de=[];for(;oe.length;){const be=oe.pop()||0,Le=oe.pop()||0,$e=oe.pop()||0;if(Le-$e<=J){for(let Rt=$e;Rt<=Le;Rt++){const Ht=V[2*Rt],fn=V[2*Rt+1];Ht>=u&&Ht<=S&&fn>=m&&fn<=L&&de.push(j[Rt])}continue}const Je=$e+Le>>1,tt=V[2*Je],ct=V[2*Je+1];tt>=u&&tt<=S&&ct>=m&&ct<=L&&de.push(j[Je]),(be===0?u<=tt:m<=ct)&&(oe.push($e),oe.push(Je-1),oe.push(1-be)),(be===0?S>=tt:L>=ct)&&(oe.push(Je+1),oe.push(Le),oe.push(1-be))}return de}within(u,m,S){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:L,coords:j,nodeSize:V}=this,J=[0,L.length-1,0],oe=[],de=S*S;for(;J.length;){const be=J.pop()||0,Le=J.pop()||0,$e=J.pop()||0;if(Le-$e<=V){for(let Rt=$e;Rt<=Le;Rt++)kh(j[2*Rt],j[2*Rt+1],u,m)<=de&&oe.push(L[Rt]);continue}const Je=$e+Le>>1,tt=j[2*Je],ct=j[2*Je+1];kh(tt,ct,u,m)<=de&&oe.push(L[Je]),(be===0?u-S<=tt:m-S<=ct)&&(J.push($e),J.push(Je-1),J.push(1-be)),(be===0?u+S>=tt:m+S>=ct)&&(J.push(Je+1),J.push(Le),J.push(1-be))}return oe}}function g0(g,u,m,S,L,j){if(L-S<=m)return;const V=S+L>>1;Nb(g,u,V,S,L,j),g0(g,u,m,S,V-1,1-j),g0(g,u,m,V+1,L,1-j)}function Nb(g,u,m,S,L,j){for(;L>S;){if(L-S>600){const de=L-S+1,be=m-S+1,Le=Math.log(de),$e=.5*Math.exp(2*Le/3),Je=.5*Math.sqrt(Le*$e*(de-$e)/de)*(be-de/2<0?-1:1);Nb(g,u,m,Math.max(S,Math.floor(m-be*$e/de+Je)),Math.min(L,Math.floor(m+(de-be)*$e/de+Je)),j)}const V=u[2*m+j];let J=S,oe=L;for(qm(g,u,S,m),u[2*L+j]>V&&qm(g,u,S,L);J<oe;){for(qm(g,u,J,oe),J++,oe--;u[2*J+j]<V;)J++;for(;u[2*oe+j]>V;)oe--}u[2*S+j]===V?qm(g,u,S,oe):(oe++,qm(g,u,oe,L)),oe<=m&&(S=oe+1),m<=oe&&(L=oe-1)}}function qm(g,u,m,S){jg(g,m,S),jg(u,2*m,2*S),jg(u,2*m+1,2*S+1)}function jg(g,u,m){const S=g[u];g[u]=g[m],g[m]=S}function kh(g,u,m,S){const L=g-m,j=u-S;return L*L+j*j}var __;s.ck=void 0,(__=s.ck||(s.ck={})).create="create",__.load="load",__.fullLoad="fullLoad";let Gg=null,Oh=[];const kb=1e3/60,Ob="loadTime",qp="fullLoadTime",$S={mark(g){performance.mark(g)},frame(g){const u=g;Gg!=null&&Oh.push(u-Gg),Gg=u},clearMetrics(){Gg=null,Oh=[],performance.clearMeasures(Ob),performance.clearMeasures(qp);for(const g in s.ck)performance.clearMarks(s.ck[g])},getPerformanceMetrics(){performance.measure(Ob,s.ck.create,s.ck.load),performance.measure(qp,s.ck.create,s.ck.fullLoad);const g=performance.getEntriesByName(Ob)[0].duration,u=performance.getEntriesByName(qp)[0].duration,m=Oh.length,S=1/(Oh.reduce((j,V)=>j+V,0)/m/1e3),L=Oh.filter(j=>j>kb).reduce((j,V)=>j+(V-kb)/kb,0);return{loadTime:g,fullLoadTime:u,fps:S,percentDroppedFrames:L/(m+L)*100,totalFrames:m}}};s.$=h0,s.A=W,s.B=ns,s.C=ar,s.D=yr,s.E=Xe,s.F=Vv,s.G=function(g){if(Ve==null){const u=g.navigator?g.navigator.userAgent:null;Ve=!!g.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Ve},s.H=class{constructor(g,u){this.target=g,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new LS(()=>this.process()),this.subscription=qt(this.target,"message",m=>this.receive(m),!1),this.globalScope=It(self)?g:window}registerMessageHandler(g,u){this.messageHandlers[g]=u}sendAsync(g,u){return new Promise((m,S)=>{const L=Math.round(1e18*Math.random()).toString(36).substring(0,10),j=u?qt(u.signal,"abort",()=>{j==null||j.unsubscribe(),delete this.resolveRejects[L];const oe={id:L,type:"<cancel>",origin:location.origin,targetMapId:g.targetMapId,sourceMapId:this.mapId};this.target.postMessage(oe)},NS):null;this.resolveRejects[L]={resolve:oe=>{j==null||j.unsubscribe(),m(oe)},reject:oe=>{j==null||j.unsubscribe(),S(oe)}};const V=[],J=Object.assign(Object.assign({},g),{id:L,sourceMapId:this.mapId,origin:location.origin,data:Af(g.data,V)});this.target.postMessage(J,{transfer:V})})}receive(g){const u=g.data,m=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[m];const S=this.abortControllers[m];return delete this.abortControllers[m],void(S&&S.abort())}if(It(self)||u.mustQueue)return this.tasks[m]=u,this.taskQueue.push(m),void this.invoker.trigger();this.processTask(m,u)}}process(){if(this.taskQueue.length===0)return;const g=this.taskQueue.shift(),u=this.tasks[g];delete this.tasks[g],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(g,u)}processTask(g,u){return a(this,void 0,void 0,function*(){if(u.type==="<response>"){const L=this.resolveRejects[g];return delete this.resolveRejects[g],L?void(u.error?L.reject(Mh(u.error)):L.resolve(Mh(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(g,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const m=Mh(u.data),S=new AbortController;this.abortControllers[g]=S;try{const L=yield this.messageHandlers[u.type](u.sourceMapId,m,S);this.completeTask(g,null,L)}catch(L){this.completeTask(g,L)}})}completeTask(g,u,m){const S=[];delete this.abortControllers[g];const L={id:g,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Af(u):null,data:Af(m,S)};this.target.postMessage(L,{transfer:S})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.I=n0,s.J=Zt,s.K=function(){var g=new W(16);return W!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=0,g[12]=0,g[13]=0,g[14]=0),g[0]=1,g[5]=1,g[10]=1,g[15]=1,g},s.L=function(g,u,m){var S,L,j,V,J,oe,de,be,Le,$e,Je,tt,ct=m[0],Rt=m[1],Ht=m[2];return u===g?(g[12]=u[0]*ct+u[4]*Rt+u[8]*Ht+u[12],g[13]=u[1]*ct+u[5]*Rt+u[9]*Ht+u[13],g[14]=u[2]*ct+u[6]*Rt+u[10]*Ht+u[14],g[15]=u[3]*ct+u[7]*Rt+u[11]*Ht+u[15]):(L=u[1],j=u[2],V=u[3],J=u[4],oe=u[5],de=u[6],be=u[7],Le=u[8],$e=u[9],Je=u[10],tt=u[11],g[0]=S=u[0],g[1]=L,g[2]=j,g[3]=V,g[4]=J,g[5]=oe,g[6]=de,g[7]=be,g[8]=Le,g[9]=$e,g[10]=Je,g[11]=tt,g[12]=S*ct+J*Rt+Le*Ht+u[12],g[13]=L*ct+oe*Rt+$e*Ht+u[13],g[14]=j*ct+de*Rt+Je*Ht+u[14],g[15]=V*ct+be*Rt+tt*Ht+u[15]),g},s.M=function(g,u,m){var S=m[0],L=m[1],j=m[2];return g[0]=u[0]*S,g[1]=u[1]*S,g[2]=u[2]*S,g[3]=u[3]*S,g[4]=u[4]*L,g[5]=u[5]*L,g[6]=u[6]*L,g[7]=u[7]*L,g[8]=u[8]*j,g[9]=u[9]*j,g[10]=u[10]*j,g[11]=u[11]*j,g[12]=u[12],g[13]=u[13],g[14]=u[14],g[15]=u[15],g},s.N=function(g,u,m){var S=u[0],L=u[1],j=u[2],V=u[3],J=u[4],oe=u[5],de=u[6],be=u[7],Le=u[8],$e=u[9],Je=u[10],tt=u[11],ct=u[12],Rt=u[13],Ht=u[14],fn=u[15],Kt=m[0],Ke=m[1],Ct=m[2],tn=m[3];return g[0]=Kt*S+Ke*J+Ct*Le+tn*ct,g[1]=Kt*L+Ke*oe+Ct*$e+tn*Rt,g[2]=Kt*j+Ke*de+Ct*Je+tn*Ht,g[3]=Kt*V+Ke*be+Ct*tt+tn*fn,g[4]=(Kt=m[4])*S+(Ke=m[5])*J+(Ct=m[6])*Le+(tn=m[7])*ct,g[5]=Kt*L+Ke*oe+Ct*$e+tn*Rt,g[6]=Kt*j+Ke*de+Ct*Je+tn*Ht,g[7]=Kt*V+Ke*be+Ct*tt+tn*fn,g[8]=(Kt=m[8])*S+(Ke=m[9])*J+(Ct=m[10])*Le+(tn=m[11])*ct,g[9]=Kt*L+Ke*oe+Ct*$e+tn*Rt,g[10]=Kt*j+Ke*de+Ct*Je+tn*Ht,g[11]=Kt*V+Ke*be+Ct*tt+tn*fn,g[12]=(Kt=m[12])*S+(Ke=m[13])*J+(Ct=m[14])*Le+(tn=m[15])*ct,g[13]=Kt*L+Ke*oe+Ct*$e+tn*Rt,g[14]=Kt*j+Ke*de+Ct*Je+tn*Ht,g[15]=Kt*V+Ke*be+Ct*tt+tn*fn,g},s.O=function(g,u){const m={};for(let S=0;S<u.length;S++){const L=u[S];L in g&&(m[L]=g[L])}return m},s.P=E,s.Q=Yd,s.R=rh,s.S=Tb,s.T=Cn,s.U=Eb,s.V=O,s.W=N,s.X=wt,s.Y=lh,s.Z=se,s._=a,s.a=Bt,s.a$=function(g,u,m){var S=Math.sin(m),L=Math.cos(m),j=u[4],V=u[5],J=u[6],oe=u[7],de=u[8],be=u[9],Le=u[10],$e=u[11];return u!==g&&(g[0]=u[0],g[1]=u[1],g[2]=u[2],g[3]=u[3],g[12]=u[12],g[13]=u[13],g[14]=u[14],g[15]=u[15]),g[4]=j*L+de*S,g[5]=V*L+be*S,g[6]=J*L+Le*S,g[7]=oe*L+$e*S,g[8]=de*L-j*S,g[9]=be*L-V*S,g[10]=Le*L-J*S,g[11]=$e*L-oe*S,g},s.a0=25,s.a1=Fg,s.a2=g=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(m=>{u.onloadstart=()=>{m(u)};for(const S of g){const L=window.document.createElement("source");qn(S)||(u.crossOrigin="Anonymous"),L.src=S,u.appendChild(L)}})},s.a3=jt,s.a4=function(){return De++},s.a5=ue,s.a6=Og,s.a7=nd,s.a8=Ih,s.a9=f_,s.aA=y_,s.aB=t_,s.aC=Nh,s.aD=Ei,s.aE=e0,s.aF=nn,s.aG=fa,s.aH=pr,s.aI=function(g){return Math.pow(2,g)},s.aJ=85.051129,s.aK=OS,s.aL=ve,s.aM=Ye,s.aN=c_,s.aO=function(g,u,m){return g[0]=u[0]*m,g[1]=u[1]*m,g[2]=u[2]*m,g},s.aP=function(g,u,m){return g[0]=u[0]+m[0],g[1]=u[1]+m[1],g[2]=u[2]+m[2],g},s.aQ=function(g){var u=new W(3);return u[0]=g[0],u[1]=g[1],u[2]=g[2],u},s.aR=function(g,u,m){return g[0]=u[0]*m[0],g[1]=u[1]*m[1],g[2]=u[2]*m[2],g[3]=u[3]*m[3],g},s.aS=function(g,u,m){return g[0]=u[0]-m[0],g[1]=u[1]-m[1],g[2]=u[2]-m[2],g},s.aT=function(g,u){var m=u[0],S=u[1],L=u[2],j=m*m+S*S+L*L;return j>0&&(j=1/Math.sqrt(j)),g[0]=u[0]*j,g[1]=u[1]*j,g[2]=u[2]*j,g},s.aU=function(g,u,m){var S=u[0],L=u[1],j=u[2],V=m[0],J=m[1],oe=m[2];return g[0]=L*oe-j*J,g[1]=j*V-S*oe,g[2]=S*J-L*V,g},s.aV=function(g,u){return g[0]*u[0]+g[1]*u[1]+g[2]*u[2]},s.aW=BS,s.aX=Da,s.aY=function(g,u,m,S,L){var j,V=1/Math.tan(u/2);return g[0]=V/m,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=V,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=-1,g[12]=0,g[13]=0,g[15]=0,L!=null&&L!==1/0?(g[10]=(L+S)*(j=1/(S-L)),g[14]=2*L*S*j):(g[10]=-1,g[14]=-2*S),g},s.aZ=function(g){var u=new W(16);return u[0]=g[0],u[1]=g[1],u[2]=g[2],u[3]=g[3],u[4]=g[4],u[5]=g[5],u[6]=g[6],u[7]=g[7],u[8]=g[8],u[9]=g[9],u[10]=g[10],u[11]=g[11],u[12]=g[12],u[13]=g[13],u[14]=g[14],u[15]=g[15],u},s.a_=function(g,u,m){var S=Math.sin(m),L=Math.cos(m),j=u[0],V=u[1],J=u[2],oe=u[3],de=u[4],be=u[5],Le=u[6],$e=u[7];return u!==g&&(g[8]=u[8],g[9]=u[9],g[10]=u[10],g[11]=u[11],g[12]=u[12],g[13]=u[13],g[14]=u[14],g[15]=u[15]),g[0]=j*L+de*S,g[1]=V*L+be*S,g[2]=J*L+Le*S,g[3]=oe*L+$e*S,g[4]=de*L-j*S,g[5]=be*L-V*S,g[6]=Le*L-J*S,g[7]=$e*L-oe*S,g},s.aa=function(g){const u={};if(g.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(m,S,L,j)=>{const V=L||j;return u[S]=!V||V.toLowerCase(),""}),u["max-age"]){const m=parseInt(u["max-age"],10);isNaN(m)?delete u["max-age"]:u["max-age"]=m}return u},s.ab=function(g){return Math.log(g)/Math.LN2},s.ac=function(g){var u=g[0],m=g[1];return u*u+m*m},s.ad=function(g){return g*Math.PI/180},s.ae=xe,s.af=function(g,u){const m=[];for(const S in g)S in u||m.push(S);return m},s.ag=function(g,u){let m=0,S=0;if(g.kind==="constant")S=g.layoutSize;else if(g.kind!=="source"){const{interpolationType:L,minZoom:j,maxZoom:V}=g,J=L?xe(Do.interpolationFactor(L,u,j,V),0,1):0;g.kind==="camera"?S=ns.number(g.minSize,g.maxSize,J):m=J}return{uSizeT:m,uSize:S}},s.ai=function(g,{uSize:u,uSizeT:m},{lowerSize:S,upperSize:L}){return g.kind==="source"?S/Lf:g.kind==="composite"?ns.number(S/Lf,L/Lf,m):u},s.aj=function(g,u){var m=u[0],S=u[1],L=u[2],j=u[3],V=u[4],J=u[5],oe=u[6],de=u[7],be=u[8],Le=u[9],$e=u[10],Je=u[11],tt=u[12],ct=u[13],Rt=u[14],Ht=u[15],fn=m*J-S*V,Kt=m*oe-L*V,Ke=m*de-j*V,Ct=S*oe-L*J,tn=S*de-j*J,jn=L*de-j*oe,Cr=be*ct-Le*tt,Xn=be*Rt-$e*tt,rr=be*Ht-Je*tt,Or=Le*Rt-$e*ct,Tr=Le*Ht-Je*ct,Ur=$e*Ht-Je*Rt,lr=fn*Ur-Kt*Tr+Ke*Or+Ct*rr-tn*Xn+jn*Cr;return lr?(g[0]=(J*Ur-oe*Tr+de*Or)*(lr=1/lr),g[1]=(L*Tr-S*Ur-j*Or)*lr,g[2]=(ct*jn-Rt*tn+Ht*Ct)*lr,g[3]=($e*tn-Le*jn-Je*Ct)*lr,g[4]=(oe*rr-V*Ur-de*Xn)*lr,g[5]=(m*Ur-L*rr+j*Xn)*lr,g[6]=(Rt*Ke-tt*jn-Ht*Kt)*lr,g[7]=(be*jn-$e*Ke+Je*Kt)*lr,g[8]=(V*Tr-J*rr+de*Cr)*lr,g[9]=(S*rr-m*Tr-j*Cr)*lr,g[10]=(tt*tn-ct*Ke+Ht*fn)*lr,g[11]=(Le*Ke-be*tn-Je*fn)*lr,g[12]=(J*Xn-V*Or-oe*Cr)*lr,g[13]=(m*Or-S*Xn+L*Cr)*lr,g[14]=(ct*Kt-tt*Ct-Rt*fn)*lr,g[15]=(be*Ct-Le*Kt+$e*fn)*lr,g):null},s.ak=ae,s.al=function(g){return Math.hypot(g[0],g[1])},s.am=function(g){return g[0]=0,g[1]=0,g},s.an=function(g,u,m){return g[0]=u[0]*m,g[1]=u[1]*m,g},s.ao=a_,s.ap=Q,s.aq=function(g,u,m,S){const L=u.y-g.y,j=u.x-g.x,V=S.y-m.y,J=S.x-m.x,oe=V*j-J*L;if(oe===0)return null;const de=(J*(g.y-m.y)-V*(g.x-m.x))/oe;return new E(g.x+de*j,g.y+de*L)},s.ar=Bg,s.as=Sg,s.at=K,s.au=function(g){let u=1/0,m=1/0,S=-1/0,L=-1/0;for(const j of g)u=Math.min(u,j.x),m=Math.min(m,j.y),S=Math.max(S,j.x),L=Math.max(L,j.y);return[u,m,S,L]},s.av=js,s.aw=Se,s.ax=function(g,u,m,S,L=!1){if(!m[0]&&!m[1])return[0,0];const j=L?S==="map"?-g.bearingInRadians:0:S==="viewport"?g.bearingInRadians:0;if(j){const V=Math.sin(j),J=Math.cos(j);m=[m[0]*J-m[1]*V,m[0]*V+m[1]*J]}return[L?m[0]:Se(u,m[0],g.zoom),L?m[1]:Se(u,m[1],g.zoom)]},s.az=r_,s.b=yt,s.b$=g=>g.type==="symbol",s.b0=function(){const g=new Float32Array(16);return K(g),g},s.b1=function(){const g=new Float64Array(16);return K(g),g},s.b2=function(){return new Float64Array(16)},s.b3=function(g,u,m){const S=new Float64Array(4);return function(L,j,V,J){var oe=.5*Math.PI/180;j*=oe,V*=oe,J*=oe;var de=Math.sin(j),be=Math.cos(j),Le=Math.sin(V),$e=Math.cos(V),Je=Math.sin(J),tt=Math.cos(J);L[0]=de*$e*tt-be*Le*Je,L[1]=be*Le*tt+de*$e*Je,L[2]=be*$e*Je-de*Le*tt,L[3]=be*$e*tt+de*Le*Je}(S,g,u-90,m),S},s.b4=function(g,u,m,S){var L,j,V,J,oe,de=u[0],be=u[1],Le=u[2],$e=u[3],Je=m[0],tt=m[1],ct=m[2],Rt=m[3];return(j=de*Je+be*tt+Le*ct+$e*Rt)<0&&(j=-j,Je=-Je,tt=-tt,ct=-ct,Rt=-Rt),1-j>G?(L=Math.acos(j),V=Math.sin(L),J=Math.sin((1-S)*L)/V,oe=Math.sin(S*L)/V):(J=1-S,oe=S),g[0]=J*de+oe*Je,g[1]=J*be+oe*tt,g[2]=J*Le+oe*ct,g[3]=J*$e+oe*Rt,g},s.b5=function(g){const u=new Float64Array(9);var m,S,L,j,V,J,oe,de,be,Le,$e,Je,tt,ct,Rt,Ht,fn,Kt;Le=(L=(S=g)[0])*(oe=L+L),$e=(j=S[1])*oe,tt=(V=S[2])*oe,ct=V*(de=j+j),Ht=(J=S[3])*oe,fn=J*de,Kt=J*(be=V+V),(m=u)[0]=1-(Je=j*de)-(Rt=V*be),m[3]=$e-Kt,m[6]=tt+fn,m[1]=$e+Kt,m[4]=1-Le-Rt,m[7]=ct-Ht,m[2]=tt-fn,m[5]=ct+Ht,m[8]=1-Le-Je;const Ke=Ye(-Math.asin(xe(u[2],-1,1)));let Ct,tn;return Math.hypot(u[5],u[8])<.001?(Ct=0,tn=-Ye(Math.atan2(u[3],u[4]))):(Ct=Ye(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),tn=Ye(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:Ct,pitch:Ke+90,bearing:tn}},s.b6=function(g,u){return g.roll==u.roll&&g.pitch==u.pitch&&g.bearing==u.bearing},s.b7=et,s.b8=Zu,s.b9=Rg,s.bA=function(g,u){if(!g)return[{command:"setStyle",args:[u]}];let m=[];try{if(!it(g.version,u.version))return[{command:"setStyle",args:[u]}];it(g.center,u.center)||m.push({command:"setCenter",args:[u.center]}),it(g.centerAltitude,u.centerAltitude)||m.push({command:"setCenterAltitude",args:[u.centerAltitude]}),it(g.zoom,u.zoom)||m.push({command:"setZoom",args:[u.zoom]}),it(g.bearing,u.bearing)||m.push({command:"setBearing",args:[u.bearing]}),it(g.pitch,u.pitch)||m.push({command:"setPitch",args:[u.pitch]}),it(g.roll,u.roll)||m.push({command:"setRoll",args:[u.roll]}),it(g.sprite,u.sprite)||m.push({command:"setSprite",args:[u.sprite]}),it(g.glyphs,u.glyphs)||m.push({command:"setGlyphs",args:[u.glyphs]}),it(g.transition,u.transition)||m.push({command:"setTransition",args:[u.transition]}),it(g.light,u.light)||m.push({command:"setLight",args:[u.light]}),it(g.terrain,u.terrain)||m.push({command:"setTerrain",args:[u.terrain]}),it(g.sky,u.sky)||m.push({command:"setSky",args:[u.sky]}),it(g.projection,u.projection)||m.push({command:"setProjection",args:[u.projection]});const S={},L=[];(function(V,J,oe,de){let be;for(be in J=J||{},V=V||{})Object.prototype.hasOwnProperty.call(V,be)&&(Object.prototype.hasOwnProperty.call(J,be)||kt(be,oe,de));for(be in J)Object.prototype.hasOwnProperty.call(J,be)&&(Object.prototype.hasOwnProperty.call(V,be)?it(V[be],J[be])||(V[be].type==="geojson"&&J[be].type==="geojson"&&rn(V,J,be)?xt(oe,{command:"setGeoJSONSourceData",args:[be,J[be].data]}):Jt(be,J,oe,de)):Tt(be,J,oe))})(g.sources,u.sources,L,S);const j=[];g.layers&&g.layers.forEach(V=>{"source"in V&&S[V.source]?m.push({command:"removeLayer",args:[V.id]}):j.push(V)}),m=m.concat(L),function(V,J,oe){J=J||[];const de=(V=V||[]).map(Qn),be=J.map(Qn),Le=V.reduce(An,{}),$e=J.reduce(An,{}),Je=de.slice(),tt=Object.create(null);let ct,Rt,Ht,fn,Kt;for(let Ke=0,Ct=0;Ke<de.length;Ke++)ct=de[Ke],Object.prototype.hasOwnProperty.call($e,ct)?Ct++:(xt(oe,{command:"removeLayer",args:[ct]}),Je.splice(Je.indexOf(ct,Ct),1));for(let Ke=0,Ct=0;Ke<be.length;Ke++)ct=be[be.length-1-Ke],Je[Je.length-1-Ke]!==ct&&(Object.prototype.hasOwnProperty.call(Le,ct)?(xt(oe,{command:"removeLayer",args:[ct]}),Je.splice(Je.lastIndexOf(ct,Je.length-Ct),1)):Ct++,fn=Je[Je.length-Ke],xt(oe,{command:"addLayer",args:[$e[ct],fn]}),Je.splice(Je.length-Ke,0,ct),tt[ct]=!0);for(let Ke=0;Ke<be.length;Ke++)if(ct=be[Ke],Rt=Le[ct],Ht=$e[ct],!tt[ct]&&!it(Rt,Ht))if(it(Rt.source,Ht.source)&&it(Rt["source-layer"],Ht["source-layer"])&&it(Rt.type,Ht.type)){for(Kt in Yt(Rt.layout,Ht.layout,oe,ct,null,"setLayoutProperty"),Yt(Rt.paint,Ht.paint,oe,ct,null,"setPaintProperty"),it(Rt.filter,Ht.filter)||xt(oe,{command:"setFilter",args:[ct,Ht.filter]}),it(Rt.minzoom,Ht.minzoom)&&it(Rt.maxzoom,Ht.maxzoom)||xt(oe,{command:"setLayerZoomRange",args:[ct,Ht.minzoom,Ht.maxzoom]}),Rt)Object.prototype.hasOwnProperty.call(Rt,Kt)&&Kt!=="layout"&&Kt!=="paint"&&Kt!=="filter"&&Kt!=="metadata"&&Kt!=="minzoom"&&Kt!=="maxzoom"&&(Kt.indexOf("paint.")===0?Yt(Rt[Kt],Ht[Kt],oe,ct,Kt.slice(6),"setPaintProperty"):it(Rt[Kt],Ht[Kt])||xt(oe,{command:"setLayerProperty",args:[ct,Kt,Ht[Kt]]}));for(Kt in Ht)Object.prototype.hasOwnProperty.call(Ht,Kt)&&!Object.prototype.hasOwnProperty.call(Rt,Kt)&&Kt!=="layout"&&Kt!=="paint"&&Kt!=="filter"&&Kt!=="metadata"&&Kt!=="minzoom"&&Kt!=="maxzoom"&&(Kt.indexOf("paint.")===0?Yt(Rt[Kt],Ht[Kt],oe,ct,Kt.slice(6),"setPaintProperty"):it(Rt[Kt],Ht[Kt])||xt(oe,{command:"setLayerProperty",args:[ct,Kt,Ht[Kt]]}))}else xt(oe,{command:"removeLayer",args:[ct]}),fn=Je[Je.lastIndexOf(ct)+1],xt(oe,{command:"addLayer",args:[Ht,fn]})}(j,u.layers,m)}catch(S){console.warn("Unable to compute style diff:",S),m=[{command:"setStyle",args:[u]}]}return m},s.bB=function(g){const u=[],m=g.id;return m===void 0&&u.push({message:`layers.${m}: missing required property "id"`}),g.render===void 0&&u.push({message:`layers.${m}: missing required method "render"`}),g.renderingMode&&g.renderingMode!=="2d"&&g.renderingMode!=="3d"&&u.push({message:`layers.${m}: property "renderingMode" must be either "2d" or "3d"`}),u},s.bC=function g(u,m){if(Array.isArray(u)){if(!Array.isArray(m)||u.length!==m.length)return!1;for(let S=0;S<u.length;S++)if(!g(u[S],m[S]))return!1;return!0}if(typeof u=="object"&&u!==null&&m!==null){if(typeof m!="object"||Object.keys(u).length!==Object.keys(m).length)return!1;for(const S in u)if(!g(u[S],m[S]))return!1;return!0}return u===m},s.bD=We,s.bE=Ae,s.bF=class extends Iu{constructor(g,u){super(g,u),this.current=0}set(g){this.current!==g&&(this.current=g,this.gl.uniform1i(this.location,g))}},s.bG=th,s.bH=class extends Iu{constructor(g,u){super(g,u),this.current=Rh}set(g){if(g[12]!==this.current[12]||g[0]!==this.current[0])return this.current=g,void this.gl.uniformMatrix4fv(this.location,!1,g);for(let u=1;u<16;u++)if(g[u]!==this.current[u]){this.current=g,this.gl.uniformMatrix4fv(this.location,!1,g);break}}},s.bI=cu,s.bJ=class extends Iu{constructor(g,u){super(g,u),this.current=[0,0,0]}set(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]||(this.current=g,this.gl.uniform3f(this.location,g[0],g[1],g[2]))}},s.bK=class extends Iu{constructor(g,u){super(g,u),this.current=[0,0]}set(g){g[0]===this.current[0]&&g[1]===this.current[1]||(this.current=g,this.gl.uniform2f(this.location,g[0],g[1]))}},s.bL=X,s.bM=function(g,u){var m=Math.sin(u),S=Math.cos(u);return g[0]=S,g[1]=m,g[2]=0,g[3]=-m,g[4]=S,g[5]=0,g[6]=0,g[7]=0,g[8]=1,g},s.bN=function(g,u,m){var S=u[0],L=u[1],j=u[2];return g[0]=S*m[0]+L*m[3]+j*m[6],g[1]=S*m[1]+L*m[4]+j*m[7],g[2]=S*m[2]+L*m[5]+j*m[8],g},s.bO=function(g,u,m,S,L,j,V){var J=1/(u-m),oe=1/(S-L),de=1/(j-V);return g[0]=-2*J,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*oe,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*de,g[11]=0,g[12]=(u+m)*J,g[13]=(L+S)*oe,g[14]=(V+j)*de,g[15]=1,g},s.bP=class extends eh{},s.bQ=El,s.bR=class extends Ah{},s.bS=fu,s.bT=function(g){return g<=1?1:Math.pow(2,Math.ceil(Math.log(g)/Math.LN2))},s.bU=hu,s.bV=function(g,u,m){var S=u[0],L=u[1],j=u[2],V=m[3]*S+m[7]*L+m[11]*j+m[15];return g[0]=(m[0]*S+m[4]*L+m[8]*j+m[12])/(V=V||1),g[1]=(m[1]*S+m[5]*L+m[9]*j+m[13])/V,g[2]=(m[2]*S+m[6]*L+m[10]*j+m[14])/V,g},s.bW=class extends As{},s.bX=class extends U{},s.bY=function(g,u){return g[0]===u[0]&&g[1]===u[1]&&g[2]===u[2]&&g[3]===u[3]&&g[4]===u[4]&&g[5]===u[5]&&g[6]===u[6]&&g[7]===u[7]&&g[8]===u[8]&&g[9]===u[9]&&g[10]===u[10]&&g[11]===u[11]&&g[12]===u[12]&&g[13]===u[13]&&g[14]===u[14]&&g[15]===u[15]},s.bZ=function(g,u){var m=g[0],S=g[1],L=g[2],j=g[3],V=g[4],J=g[5],oe=g[6],de=g[7],be=g[8],Le=g[9],$e=g[10],Je=g[11],tt=g[12],ct=g[13],Rt=g[14],Ht=g[15],fn=u[0],Kt=u[1],Ke=u[2],Ct=u[3],tn=u[4],jn=u[5],Cr=u[6],Xn=u[7],rr=u[8],Or=u[9],Tr=u[10],Ur=u[11],lr=u[12],li=u[13],Bi=u[14],Li=u[15];return Math.abs(m-fn)<=G*Math.max(1,Math.abs(m),Math.abs(fn))&&Math.abs(S-Kt)<=G*Math.max(1,Math.abs(S),Math.abs(Kt))&&Math.abs(L-Ke)<=G*Math.max(1,Math.abs(L),Math.abs(Ke))&&Math.abs(j-Ct)<=G*Math.max(1,Math.abs(j),Math.abs(Ct))&&Math.abs(V-tn)<=G*Math.max(1,Math.abs(V),Math.abs(tn))&&Math.abs(J-jn)<=G*Math.max(1,Math.abs(J),Math.abs(jn))&&Math.abs(oe-Cr)<=G*Math.max(1,Math.abs(oe),Math.abs(Cr))&&Math.abs(de-Xn)<=G*Math.max(1,Math.abs(de),Math.abs(Xn))&&Math.abs(be-rr)<=G*Math.max(1,Math.abs(be),Math.abs(rr))&&Math.abs(Le-Or)<=G*Math.max(1,Math.abs(Le),Math.abs(Or))&&Math.abs($e-Tr)<=G*Math.max(1,Math.abs($e),Math.abs(Tr))&&Math.abs(Je-Ur)<=G*Math.max(1,Math.abs(Je),Math.abs(Ur))&&Math.abs(tt-lr)<=G*Math.max(1,Math.abs(tt),Math.abs(lr))&&Math.abs(ct-li)<=G*Math.max(1,Math.abs(ct),Math.abs(li))&&Math.abs(Rt-Bi)<=G*Math.max(1,Math.abs(Rt),Math.abs(Bi))&&Math.abs(Ht-Li)<=G*Math.max(1,Math.abs(Ht),Math.abs(Li))},s.b_=function(g,u){return g[0]=u[0],g[1]=u[1],g[2]=u[2],g[3]=u[3],g[4]=u[4],g[5]=u[5],g[6]=u[6],g[7]=u[7],g[8]=u[8],g[9]=u[9],g[10]=u[10],g[11]=u[11],g[12]=u[12],g[13]=u[13],g[14]=u[14],g[15]=u[15],g},s.ba=Gd,s.bb=Dh,s.bc=Te,s.bd=pe,s.be=Wr,s.bf=function(g,u,m,S,L){return Te(S,L,xe((g-u)/(m-u),0,1))},s.bg=ye,s.bh=function(){return new Float64Array(4)},s.bi=function(){return new Float64Array(3)},s.bj=function(g,u,m,S){var L=[],j=[];return L[0]=u[0]-m[0],L[1]=u[1]-m[1],L[2]=u[2]-m[2],j[0]=L[0]*Math.cos(S)-L[1]*Math.sin(S),j[1]=L[0]*Math.sin(S)+L[1]*Math.cos(S),j[2]=L[2],g[0]=j[0]+m[0],g[1]=j[1]+m[1],g[2]=j[2]+m[2],g},s.bk=function(g,u,m,S){var L=[],j=[];return L[0]=u[0]-m[0],L[1]=u[1]-m[1],L[2]=u[2]-m[2],j[0]=L[0],j[1]=L[1]*Math.cos(S)-L[2]*Math.sin(S),j[2]=L[1]*Math.sin(S)+L[2]*Math.cos(S),g[0]=j[0]+m[0],g[1]=j[1]+m[1],g[2]=j[2]+m[2],g},s.bl=function(g,u,m,S){var L=[],j=[];return L[0]=u[0]-m[0],L[1]=u[1]-m[1],L[2]=u[2]-m[2],j[0]=L[2]*Math.sin(S)+L[0]*Math.cos(S),j[1]=L[1],j[2]=L[2]*Math.cos(S)-L[0]*Math.sin(S),g[0]=j[0]+m[0],g[1]=j[1]+m[1],g[2]=j[2]+m[2],g},s.bm=function(g,u,m){var S=Math.sin(m),L=Math.cos(m),j=u[0],V=u[1],J=u[2],oe=u[3],de=u[8],be=u[9],Le=u[10],$e=u[11];return u!==g&&(g[4]=u[4],g[5]=u[5],g[6]=u[6],g[7]=u[7],g[12]=u[12],g[13]=u[13],g[14]=u[14],g[15]=u[15]),g[0]=j*L-de*S,g[1]=V*L-be*S,g[2]=J*L-Le*S,g[3]=oe*L-$e*S,g[8]=j*S+de*L,g[9]=V*S+be*L,g[10]=J*S+Le*L,g[11]=oe*S+$e*L,g},s.bn=function(g,u){const m=ye(g,360),S=ye(u,360),L=S-m,j=S>m?L-360:L+360;return Math.abs(L)<Math.abs(j)?L:j},s.bo=function(g){return g[0]=0,g[1]=0,g[2]=0,g},s.bp=function(g,u,m,S){const L=Math.sqrt(g*g+u*u),j=Math.sqrt(m*m+S*S);g/=L,u/=L,m/=j,S/=j;const V=Math.acos(g*m+u*S);return-u*m+g*S>0?V:-V},s.bq=function(g,u){return g[0]*u[0]+g[1]*u[1]+g[2]*u[2]+g[3]},s.br=l_,s.bs=function(g,u){const m=ye(g,2*Math.PI),S=ye(u,2*Math.PI);return Math.min(Math.abs(m-S),Math.abs(m-S+2*Math.PI),Math.abs(m-S-2*Math.PI))},s.bt=function(g){return Math.hypot(g[0],g[1],g[2])},s.bu=function(){const g={},u=Fe.$version;for(const m in Fe.$root){const S=Fe.$root[m];if(S.required){let L=null;L=m==="version"?u:S.type==="array"?[]:{},L!=null&&(g[m]=L)}}return g},s.bv=Lp,s.bw=$t,s.bx=function(g){g=g.slice();const u=Object.create(null);for(let m=0;m<g.length;m++)u[g[m].id]=g[m];for(let m=0;m<g.length;m++)"ref"in g[m]&&(g[m]=mt(g[m],u[g[m].ref]));return g},s.by=function(g){if(g.type==="custom")return new PA(g);switch(g.type){case"background":return new Sb(g);case"circle":return new uS(g);case"fill":return new sb(g);case"fill-extrusion":return new Nm(g);case"heatmap":return new hS(g);case"hillshade":return new dS(g);case"line":return new Ko(g);case"raster":return new u0(g);case"symbol":return new Xd(g)}},s.bz=ut,s.c=At,s.c0=g=>g.type==="circle",s.c1=g=>g.type==="heatmap",s.c2=g=>g.type==="line",s.c3=g=>g.type==="fill",s.c4=g=>g.type==="fill-extrusion",s.c5=g=>g.type==="hillshade",s.c6=g=>g.type==="raster",s.c7=g=>g.type==="background",s.c8=g=>g.type==="custom",s.c9=Ie,s.cA=class{constructor(g){this._marks={start:[g.url,"start"].join("#"),end:[g.url,"end"].join("#"),measure:g.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let g=performance.getEntriesByName(this._marks.measure);return g.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),g=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),g}},s.cB=function(g,u,m,S,L){return a(this,void 0,void 0,function*(){if(N())try{return yield wt(g,u,m,S,L)}catch{}return function(j,V,J,oe,de){const be=j.width,Le=j.height;Ut&&ht||(Ut=new OffscreenCanvas(be,Le),ht=Ut.getContext("2d",{willReadFrequently:!0})),Ut.width=be,Ut.height=Le,ht.drawImage(j,0,0,be,Le);const $e=ht.getImageData(V,J,oe,de);return ht.clearRect(0,0,be,Le),$e.data}(g,u,m,S,L)})},s.cC=h_,s.cD=c,s.cE=v,s.cF=ef,s.cG=Qy,s.cH=So,s.cI=Rn,s.ca=function(g,u,m){const S=ce(u.x-m.x,u.y-m.y),L=ce(g.x-m.x,g.y-m.y);var j,V;return Ye(Math.atan2(S[0]*L[1]-S[1]*L[0],(j=S)[0]*(V=L)[0]+j[1]*V[1]))},s.cb=me,s.cc=function(g,u){return Pt[u]&&(g instanceof MouseEvent||g instanceof WheelEvent)},s.cd=function(g,u){return Re[u]&&"touches"in g},s.ce=function(g){return Re[g]||Pt[g]},s.cf=function(g,u,m){var S=u[0],L=u[1];return g[0]=m[0]*S+m[4]*L+m[12],g[1]=m[1]*S+m[5]*L+m[13],g},s.cg=function(g,u){const{x:m,y:S}=h0.fromLngLat(u);return!(g<0||g>25||S<0||S>=1||m<0||m>=1)},s.ch=function(g,u){return g[0]=u[0],g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=u[1],g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=u[2],g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g},s.ci=class extends No{},s.cj=$S,s.cl=function(g){return g.message===Dt},s.cm=cn,s.cn=function(g,u){Bt.REGISTERED_PROTOCOLS[g]=u},s.co=function(g){delete Bt.REGISTERED_PROTOCOLS[g]},s.cp=function(g,u){const m={};for(let L=0;L<g.length;L++){const j=u&&u[g[L].id]||Th(g[L]);u&&(u[g[L].id]=j);let V=m[j];V||(V=m[j]=[]),V.push(g[L])}const S=[];for(const L in m)S.push(m[L]);return S},s.cq=ei,s.cr=f0,s.cs=Cb,s.ct=mb,s.cu=function(g){g.bucket.createArrays(),g.bucket.tilePixelRatio=se/(512*g.bucket.overscaling),g.bucket.compareText={},g.bucket.iconsNeedLinear=!1;const u=g.bucket.layers[0],m=u.layout,S=u._unevaluatedLayout._values,L={layoutIconSize:S["icon-size"].possiblyEvaluate(new ar(g.bucket.zoom+1),g.canonical),layoutTextSize:S["text-size"].possiblyEvaluate(new ar(g.bucket.zoom+1),g.canonical),textMaxSize:S["text-size"].possiblyEvaluate(new ar(18))};if(g.bucket.textSizeData.kind==="composite"){const{minZoom:de,maxZoom:be}=g.bucket.textSizeData;L.compositeTextSizes=[S["text-size"].possiblyEvaluate(new ar(de),g.canonical),S["text-size"].possiblyEvaluate(new ar(be),g.canonical)]}if(g.bucket.iconSizeData.kind==="composite"){const{minZoom:de,maxZoom:be}=g.bucket.iconSizeData;L.compositeIconSizes=[S["icon-size"].possiblyEvaluate(new ar(de),g.canonical),S["icon-size"].possiblyEvaluate(new ar(be),g.canonical)]}const j=m.get("text-line-height")*js,V=m.get("text-rotation-alignment")!=="viewport"&&m.get("symbol-placement")!=="point",J=m.get("text-keep-upright"),oe=m.get("text-size");for(const de of g.bucket.features){const be=m.get("text-font").evaluate(de,{},g.canonical).join(","),Le=oe.evaluate(de,{},g.canonical),$e=L.layoutTextSize.evaluate(de,{},g.canonical),Je=L.layoutIconSize.evaluate(de,{},g.canonical),tt={horizontal:{},vertical:void 0},ct=de.text;let Rt,Ht=[0,0];if(ct){const Ke=ct.toString(),Ct=m.get("text-letter-spacing").evaluate(de,{},g.canonical)*js,tn=_e(Ke)?Ct:0,jn=m.get("text-anchor").evaluate(de,{},g.canonical),Cr=Jd(u,de,g.canonical);if(!Cr){const Tr=m.get("text-radial-offset").evaluate(de,{},g.canonical);Ht=Tr?GS(jn,[Tr*js,Ib]):m.get("text-offset").evaluate(de,{},g.canonical).map(Ur=>Ur*js)}let Xn=V?"center":m.get("text-justify").evaluate(de,{},g.canonical);const rr=m.get("symbol-placement")==="point"?m.get("text-max-width").evaluate(de,{},g.canonical)*js:1/0,Or=()=>{g.bucket.allowVerticalPlacement&&te(Ke)&&(tt.vertical=dc(ct,g.glyphMap,g.glyphPositions,g.imagePositions,be,rr,j,jn,"left",tn,Ht,s.ah.vertical,!0,$e,Le))};if(!V&&Cr){const Tr=new Set;if(Xn==="auto")for(let lr=0;lr<Cr.values.length;lr+=2)Tr.add(y_(Cr.values[lr]));else Tr.add(Xn);let Ur=!1;for(const lr of Tr)if(!tt.horizontal[lr])if(Ur)tt.horizontal[lr]=tt.horizontal[0];else{const li=dc(ct,g.glyphMap,g.glyphPositions,g.imagePositions,be,rr,j,"center",lr,tn,Ht,s.ah.horizontal,!1,$e,Le);li&&(tt.horizontal[lr]=li,Ur=li.positionedLines.length===1)}Or()}else{Xn==="auto"&&(Xn=y_(jn));const Tr=dc(ct,g.glyphMap,g.glyphPositions,g.imagePositions,be,rr,j,jn,Xn,tn,Ht,s.ah.horizontal,!1,$e,Le);Tr&&(tt.horizontal[Xn]=Tr),Or(),te(Ke)&&V&&J&&(tt.vertical=dc(ct,g.glyphMap,g.glyphPositions,g.imagePositions,be,rr,j,jn,Xn,tn,Ht,s.ah.vertical,!1,$e,Le))}}let fn=!1;if(de.icon&&de.icon.name){const Ke=g.imageMap[de.icon.name];Ke&&(Rt=RS(g.imagePositions[de.icon.name],m.get("icon-offset").evaluate(de,{},g.canonical),m.get("icon-anchor").evaluate(de,{},g.canonical)),fn=!!Ke.sdf,g.bucket.sdfIcons===void 0?g.bucket.sdfIcons=fn:g.bucket.sdfIcons!==fn&&st("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ke.pixelRatio!==g.bucket.pixelRatio||m.get("icon-rotate").constantOr(1)!==0)&&(g.bucket.iconsNeedLinear=!0))}const Kt=HS(tt.horizontal)||tt.vertical;g.bucket.iconsInText=!!Kt&&Kt.iconsInText,(Kt||Rt)&&Db(g.bucket,de,tt,Rt,g.imageMap,L,$e,Je,Ht,fn,g.canonical,g.subdivisionGranularity)}g.showCollisionBoxes&&g.bucket.generateCollisionDebugBuffers()},s.cv=db,s.cw=Dm,s.cx=Hd,s.cy=Lm,s.cz=Bm,s.d=qn,s.e=Ee,s.f=g=>a(void 0,void 0,void 0,function*(){if(g.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(g)],{type:"image/png"});try{return createImageBitmap(u)}catch(m){throw new Error(`Could not load image because of ${m.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),s.g=gn,s.h=g=>new Promise((u,m)=>{const S=new Image;S.onload=()=>{u(S),URL.revokeObjectURL(S.src),S.onload=null,window.requestAnimationFrame(()=>{S.src=Ze})},S.onerror=()=>m(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const L=new Blob([new Uint8Array(g)],{type:"image/png"});S.src=g.byteLength?URL.createObjectURL(L):Ze}),s.i=It,s.j=(g,u)=>Et(Ee(g,{type:"json"}),u),s.k=ze,s.l=rt,s.m=Et,s.n=(g,u)=>Et(Ee(g,{type:"arrayBuffer"}),u),s.o=function(g){return new Bm(g).readFields(Gp,[])},s.p=Dg,s.q=Kv,s.r=$i,s.s=qt,s.t=id,s.u=q,s.v=Fe,s.w=st,s.x=as,s.y=Au,s.z=function([g,u,m]){return u+=90,u*=Math.PI/180,m*=Math.PI/180,{x:g*Math.cos(u)*Math.sin(m),y:g*Math.sin(u)*Math.sin(m),z:g*Math.cos(m)}}}),i("worker",["./shared"],function(s){class a{constructor(ze){this.keyCache={},ze&&this.replace(ze)}replace(ze){this._layerConfigs={},this._layers={},this.update(ze,[])}update(ze,Xe){for(const He of ze){this._layerConfigs[He.id]=He;const mt=this._layers[He.id]=s.by(He);mt._featureFilter=s.a7(mt.filter),this.keyCache[He.id]&&delete this.keyCache[He.id]}for(const He of Xe)delete this.keyCache[He],delete this._layerConfigs[He],delete this._layers[He];this.familiesBySource={};const Fe=s.cp(Object.values(this._layerConfigs),this.keyCache);for(const He of Fe){const mt=He.map(rn=>this._layers[rn.id]),it=mt[0];if(it.visibility==="none")continue;const xt=it.source||"";let Tt=this.familiesBySource[xt];Tt||(Tt=this.familiesBySource[xt]={});const kt=it.sourceLayer||"_geojsonTileLayer";let Jt=Tt[kt];Jt||(Jt=Tt[kt]=[]),Jt.push(mt)}}}class c{constructor(ze){const Xe={},Fe=[];for(const xt in ze){const Tt=ze[xt],kt=Xe[xt]={};for(const Jt in Tt){const rn=Tt[+Jt];if(!rn||rn.bitmap.width===0||rn.bitmap.height===0)continue;const Yt={x:0,y:0,w:rn.bitmap.width+2,h:rn.bitmap.height+2};Fe.push(Yt),kt[Jt]={rect:Yt,metrics:rn.metrics}}}const{w:He,h:mt}=s.p(Fe),it=new s.q({width:He||1,height:mt||1});for(const xt in ze){const Tt=ze[xt];for(const kt in Tt){const Jt=Tt[+kt];if(!Jt||Jt.bitmap.width===0||Jt.bitmap.height===0)continue;const rn=Xe[xt][kt].rect;s.q.copy(Jt.bitmap,it,{x:0,y:0},{x:rn.x+1,y:rn.y+1},Jt.bitmap)}}this.image=it,this.positions=Xe}}s.cq("GlyphAtlas",c);class h{constructor(ze){this.tileID=new s.Y(ze.tileID.overscaledZ,ze.tileID.wrap,ze.tileID.canonical.z,ze.tileID.canonical.x,ze.tileID.canonical.y),this.uid=ze.uid,this.zoom=ze.zoom,this.pixelRatio=ze.pixelRatio,this.tileSize=ze.tileSize,this.source=ze.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ze.showCollisionBoxes,this.collectResourceTiming=!!ze.collectResourceTiming,this.returnDependencies=!!ze.returnDependencies,this.promoteId=ze.promoteId,this.inFlightDependencies=[]}parse(ze,Xe,Fe,He,mt){return s._(this,void 0,void 0,function*(){this.status="parsing",this.data=ze,this.collisionBoxArray=new s.a5;const it=new s.cr(Object.keys(ze.layers).sort()),xt=new s.cs(this.tileID,this.promoteId);xt.bucketLayerIDs=[];const Tt={},kt={featureIndex:xt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Fe,subdivisionGranularity:mt},Jt=Xe.familiesBySource[this.source];for(const Wn in Jt){const kr=ze.layers[Wn];if(!kr)continue;kr.version===1&&s.w(`Vector tile source "${this.source}" layer "${Wn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Qr=it.encode(Wn),vi=[];for(let zr=0;zr<kr.length;zr++){const zn=kr.feature(zr),En=xt.getId(zn,Wn);vi.push({feature:zn,id:En,index:zr,sourceLayerIndex:Qr})}for(const zr of Jt[Wn]){const zn=zr[0];zn.source!==this.source&&s.w(`layer.source = ${zn.source} does not equal this.source = ${this.source}`),zn.minzoom&&this.zoom<Math.floor(zn.minzoom)||zn.maxzoom&&this.zoom>=zn.maxzoom||zn.visibility!=="none"&&(d(zr,this.zoom,Fe),(Tt[zn.id]=zn.createBucket({index:xt.bucketLayerIDs.length,layers:zr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Qr,sourceID:this.source})).populate(vi,kt,this.tileID.canonical),xt.bucketLayerIDs.push(zr.map(En=>En.id)))}}const rn=s.bD(kt.glyphDependencies,Wn=>Object.keys(Wn).map(Number));this.inFlightDependencies.forEach(Wn=>Wn==null?void 0:Wn.abort()),this.inFlightDependencies=[];let Yt=Promise.resolve({});if(Object.keys(rn).length){const Wn=new AbortController;this.inFlightDependencies.push(Wn),Yt=He.sendAsync({type:"GG",data:{stacks:rn,source:this.source,tileID:this.tileID,type:"glyphs"}},Wn)}const Qn=Object.keys(kt.iconDependencies);let An=Promise.resolve({});if(Qn.length){const Wn=new AbortController;this.inFlightDependencies.push(Wn),An=He.sendAsync({type:"GI",data:{icons:Qn,source:this.source,tileID:this.tileID,type:"icons"}},Wn)}const jt=Object.keys(kt.patternDependencies);let Pe=Promise.resolve({});if(jt.length){const Wn=new AbortController;this.inFlightDependencies.push(Wn),Pe=He.sendAsync({type:"GI",data:{icons:jt,source:this.source,tileID:this.tileID,type:"patterns"}},Wn)}const[je,_t,Qt]=yield Promise.all([Yt,An,Pe]),en=new c(je),Fn=new s.ct(_t,Qt);for(const Wn in Tt){const kr=Tt[Wn];kr instanceof s.a6?(d(kr.layers,this.zoom,Fe),s.cu({bucket:kr,glyphMap:je,glyphPositions:en.positions,imageMap:_t,imagePositions:Fn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:kt.subdivisionGranularity})):kr.hasPattern&&(kr instanceof s.cv||kr instanceof s.cw||kr instanceof s.cx)&&(d(kr.layers,this.zoom,Fe),kr.addFeatures(kt,this.tileID.canonical,Fn.patternPositions))}return this.status="done",{buckets:Object.values(Tt).filter(Wn=>!Wn.isEmpty()),featureIndex:xt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:en.image,imageAtlas:Fn,glyphMap:this.returnDependencies?je:null,iconMap:this.returnDependencies?_t:null,glyphPositions:this.returnDependencies?en.positions:null}})}}function d(rt,ze,Xe){const Fe=new s.C(ze);for(const He of rt)He.recalculate(Fe,Xe)}class v{constructor(ze,Xe,Fe){this.actor=ze,this.layerIndex=Xe,this.availableImages=Fe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ze,Xe){return s._(this,void 0,void 0,function*(){const Fe=yield s.n(ze.request,Xe);try{return{vectorTile:new s.cy.VectorTile(new s.cz(Fe.data)),rawData:Fe.data,cacheControl:Fe.cacheControl,expires:Fe.expires}}catch(He){const mt=new Uint8Array(Fe.data);let it=`Unable to parse the tile at ${ze.request.url}, `;throw it+=mt[0]===31&&mt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${He.message}`,new Error(it)}})}loadTile(ze){return s._(this,void 0,void 0,function*(){const Xe=ze.uid,Fe=!!(ze&&ze.request&&ze.request.collectResourceTiming)&&new s.cA(ze.request),He=new h(ze);this.loading[Xe]=He;const mt=new AbortController;He.abort=mt;try{const it=yield this.loadVectorTile(ze,mt);if(delete this.loading[Xe],!it)return null;const xt=it.rawData,Tt={};it.expires&&(Tt.expires=it.expires),it.cacheControl&&(Tt.cacheControl=it.cacheControl);const kt={};if(Fe){const rn=Fe.finish();rn&&(kt.resourceTiming=JSON.parse(JSON.stringify(rn)))}He.vectorTile=it.vectorTile;const Jt=He.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor,ze.subdivisionGranularity);this.loaded[Xe]=He,this.fetching[Xe]={rawTileData:xt,cacheControl:Tt,resourceTiming:kt};try{const rn=yield Jt;return s.e({rawTileData:xt.slice(0)},rn,Tt,kt)}finally{delete this.fetching[Xe]}}catch(it){throw delete this.loading[Xe],He.status="done",this.loaded[Xe]=He,it}})}reloadTile(ze){return s._(this,void 0,void 0,function*(){const Xe=ze.uid;if(!this.loaded||!this.loaded[Xe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Fe=this.loaded[Xe];if(Fe.showCollisionBoxes=ze.showCollisionBoxes,Fe.status==="parsing"){const He=yield Fe.parse(Fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ze.subdivisionGranularity);let mt;if(this.fetching[Xe]){const{rawTileData:it,cacheControl:xt,resourceTiming:Tt}=this.fetching[Xe];delete this.fetching[Xe],mt=s.e({rawTileData:it.slice(0)},He,xt,Tt)}else mt=He;return mt}if(Fe.status==="done"&&Fe.vectorTile)return Fe.parse(Fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ze.subdivisionGranularity)})}abortTile(ze){return s._(this,void 0,void 0,function*(){const Xe=this.loading,Fe=ze.uid;Xe&&Xe[Fe]&&Xe[Fe].abort&&(Xe[Fe].abort.abort(),delete Xe[Fe])})}removeTile(ze){return s._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ze.uid]&&delete this.loaded[ze.uid]})}}class w{constructor(){this.loaded={}}loadTile(ze){return s._(this,void 0,void 0,function*(){const{uid:Xe,encoding:Fe,rawImageData:He,redFactor:mt,greenFactor:it,blueFactor:xt,baseShift:Tt}=ze,kt=He.width+2,Jt=He.height+2,rn=s.b(He)?new s.R({width:kt,height:Jt},yield s.cB(He,-1,-1,kt,Jt)):He,Yt=new s.cC(Xe,rn,Fe,mt,it,xt,Tt);return this.loaded=this.loaded||{},this.loaded[Xe]=Yt,Yt})}removeTile(ze){const Xe=this.loaded,Fe=ze.uid;Xe&&Xe[Fe]&&delete Xe[Fe]}}var _,E,M=function(){if(E)return _;function rt(Xe,Fe){if(Xe.length!==0){ze(Xe[0],Fe);for(var He=1;He<Xe.length;He++)ze(Xe[He],!Fe)}}function ze(Xe,Fe){for(var He=0,mt=0,it=0,xt=Xe.length,Tt=xt-1;it<xt;Tt=it++){var kt=(Xe[it][0]-Xe[Tt][0])*(Xe[Tt][1]+Xe[it][1]),Jt=He+kt;mt+=Math.abs(He)>=Math.abs(kt)?He-Jt+kt:kt-Jt+He,He=Jt}He+mt>=0!=!!Fe&&Xe.reverse()}return E=1,_=function Xe(Fe,He){var mt,it=Fe&&Fe.type;if(it==="FeatureCollection")for(mt=0;mt<Fe.features.length;mt++)Xe(Fe.features[mt],He);else if(it==="GeometryCollection")for(mt=0;mt<Fe.geometries.length;mt++)Xe(Fe.geometries[mt],He);else if(it==="Feature")Xe(Fe.geometry,He);else if(it==="Polygon")rt(Fe.coordinates,He);else if(it==="MultiPolygon")for(mt=0;mt<Fe.coordinates.length;mt++)rt(Fe.coordinates[mt],He);return Fe}}(),D=s.cD(M);const A=s.cy.VectorTileFeature.prototype.toGeoJSON;class F{constructor(ze){this._feature=ze,this.extent=s.Z,this.type=ze.type,this.properties=ze.tags,"id"in ze&&!isNaN(ze.id)&&(this.id=parseInt(ze.id,10))}loadGeometry(){if(this._feature.type===1){const ze=[];for(const Xe of this._feature.geometry)ze.push([new s.P(Xe[0],Xe[1])]);return ze}{const ze=[];for(const Xe of this._feature.geometry){const Fe=[];for(const He of Xe)Fe.push(new s.P(He[0],He[1]));ze.push(Fe)}return ze}}toGeoJSON(ze,Xe,Fe){return A.call(this,ze,Xe,Fe)}}class O{constructor(ze){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.Z,this.length=ze.length,this._features=ze}feature(ze){return new F(this._features[ze])}}var N,H,G,W={exports:{}},X=function(){if(G)return W.exports;G=1;var rt=s.cG(),ze=function(){if(H)return N;H=1;var Jt=s.cE(),rn=s.cF().VectorTileFeature;function Yt(An,jt){this.options=jt||{},this.features=An,this.length=An.length}function Qn(An,jt){this.id=typeof An.id=="number"?An.id:void 0,this.type=An.type,this.rawGeometry=An.type===1?[An.geometry]:An.geometry,this.properties=An.tags,this.extent=jt||4096}return N=Yt,Yt.prototype.feature=function(An){return new Qn(this.features[An],this.options.extent)},Qn.prototype.loadGeometry=function(){var An=this.rawGeometry;this.geometry=[];for(var jt=0;jt<An.length;jt++){for(var Pe=An[jt],je=[],_t=0;_t<Pe.length;_t++)je.push(new Jt(Pe[_t][0],Pe[_t][1]));this.geometry.push(je)}return this.geometry},Qn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var An=this.geometry,jt=1/0,Pe=-1/0,je=1/0,_t=-1/0,Qt=0;Qt<An.length;Qt++)for(var en=An[Qt],Fn=0;Fn<en.length;Fn++){var Wn=en[Fn];jt=Math.min(jt,Wn.x),Pe=Math.max(Pe,Wn.x),je=Math.min(je,Wn.y),_t=Math.max(_t,Wn.y)}return[jt,je,Pe,_t]},Qn.prototype.toGeoJSON=rn.prototype.toGeoJSON,N}();function Xe(Jt){var rn=new rt;return function(Yt,Qn){for(var An in Yt.layers)Qn.writeMessage(3,Fe,Yt.layers[An])}(Jt,rn),rn.finish()}function Fe(Jt,rn){var Yt;rn.writeVarintField(15,Jt.version||1),rn.writeStringField(1,Jt.name||""),rn.writeVarintField(5,Jt.extent||4096);var Qn={keys:[],values:[],keycache:{},valuecache:{}};for(Yt=0;Yt<Jt.length;Yt++)Qn.feature=Jt.feature(Yt),rn.writeMessage(2,He,Qn);var An=Qn.keys;for(Yt=0;Yt<An.length;Yt++)rn.writeStringField(3,An[Yt]);var jt=Qn.values;for(Yt=0;Yt<jt.length;Yt++)rn.writeMessage(4,kt,jt[Yt])}function He(Jt,rn){var Yt=Jt.feature;Yt.id!==void 0&&rn.writeVarintField(1,Yt.id),rn.writeMessage(2,mt,Jt),rn.writeVarintField(3,Yt.type),rn.writeMessage(4,Tt,Yt)}function mt(Jt,rn){var Yt=Jt.feature,Qn=Jt.keys,An=Jt.values,jt=Jt.keycache,Pe=Jt.valuecache;for(var je in Yt.properties){var _t=Yt.properties[je],Qt=jt[je];if(_t!==null){Qt===void 0&&(Qn.push(je),jt[je]=Qt=Qn.length-1),rn.writeVarint(Qt);var en=typeof _t;en!=="string"&&en!=="boolean"&&en!=="number"&&(_t=JSON.stringify(_t));var Fn=en+":"+_t,Wn=Pe[Fn];Wn===void 0&&(An.push(_t),Pe[Fn]=Wn=An.length-1),rn.writeVarint(Wn)}}}function it(Jt,rn){return(rn<<3)+(7&Jt)}function xt(Jt){return Jt<<1^Jt>>31}function Tt(Jt,rn){for(var Yt=Jt.loadGeometry(),Qn=Jt.type,An=0,jt=0,Pe=Yt.length,je=0;je<Pe;je++){var _t=Yt[je],Qt=1;Qn===1&&(Qt=_t.length),rn.writeVarint(it(1,Qt));for(var en=Qn===3?_t.length-1:_t.length,Fn=0;Fn<en;Fn++){Fn===1&&Qn!==1&&rn.writeVarint(it(2,en-1));var Wn=_t[Fn].x-An,kr=_t[Fn].y-jt;rn.writeVarint(xt(Wn)),rn.writeVarint(xt(kr)),An+=Wn,jt+=kr}Qn===3&&rn.writeVarint(it(7,1))}}function kt(Jt,rn){var Yt=typeof Jt;Yt==="string"?rn.writeStringField(1,Jt):Yt==="boolean"?rn.writeBooleanField(7,Jt):Yt==="number"&&(Jt%1!=0?rn.writeDoubleField(3,Jt):Jt<0?rn.writeSVarintField(6,Jt):rn.writeVarintField(5,Jt))}return W.exports=Xe,W.exports.fromVectorTileJs=Xe,W.exports.fromGeojsonVt=function(Jt,rn){rn=rn||{};var Yt={};for(var Qn in Jt)Yt[Qn]=new ze(Jt[Qn].features,rn),Yt[Qn].name=Qn,Yt[Qn].version=rn.version,Yt[Qn].extent=rn.extent;return Xe({layers:Yt})},W.exports.GeoJSONWrapper=ze,W.exports}(),K=s.cD(X);const k={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:rt=>rt},$=Math.fround||(Q=new Float32Array(1),rt=>(Q[0]=+rt,Q[0]));var Q;const ie=3,ae=5,ce=6;class se{constructor(ze){this.options=Object.assign(Object.create(k),ze),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ze){const{log:Xe,minZoom:Fe,maxZoom:He}=this.options;Xe&&console.time("total time");const mt=`prepare ${ze.length} points`;Xe&&console.time(mt),this.points=ze;const it=[];for(let Tt=0;Tt<ze.length;Tt++){const kt=ze[Tt];if(!kt.geometry)continue;const[Jt,rn]=kt.geometry.coordinates,Yt=$(Te(Jt)),Qn=$(pe(rn));it.push(Yt,Qn,1/0,Tt,-1,1),this.options.reduce&&it.push(0)}let xt=this.trees[He+1]=this._createTree(it);Xe&&console.timeEnd(mt);for(let Tt=He;Tt>=Fe;Tt--){const kt=+Date.now();xt=this.trees[Tt]=this._createTree(this._cluster(xt,Tt)),Xe&&console.log("z%d: %d clusters in %dms",Tt,xt.numItems,+Date.now()-kt)}return Xe&&console.timeEnd("total time"),this}getClusters(ze,Xe){let Fe=((ze[0]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,ze[1]));let mt=ze[2]===180?180:((ze[2]+180)%360+360)%360-180;const it=Math.max(-90,Math.min(90,ze[3]));if(ze[2]-ze[0]>=360)Fe=-180,mt=180;else if(Fe>mt){const rn=this.getClusters([Fe,He,180,it],Xe),Yt=this.getClusters([-180,He,mt,it],Xe);return rn.concat(Yt)}const xt=this.trees[this._limitZoom(Xe)],Tt=xt.range(Te(Fe),pe(it),Te(mt),pe(He)),kt=xt.data,Jt=[];for(const rn of Tt){const Yt=this.stride*rn;Jt.push(kt[Yt+ae]>1?Se(kt,Yt,this.clusterProps):this.points[kt[Yt+ie]])}return Jt}getChildren(ze){const Xe=this._getOriginId(ze),Fe=this._getOriginZoom(ze),He="No cluster with the specified id.",mt=this.trees[Fe];if(!mt)throw new Error(He);const it=mt.data;if(Xe*this.stride>=it.length)throw new Error(He);const xt=this.options.radius/(this.options.extent*Math.pow(2,Fe-1)),Tt=mt.within(it[Xe*this.stride],it[Xe*this.stride+1],xt),kt=[];for(const Jt of Tt){const rn=Jt*this.stride;it[rn+4]===ze&&kt.push(it[rn+ae]>1?Se(it,rn,this.clusterProps):this.points[it[rn+ie]])}if(kt.length===0)throw new Error(He);return kt}getLeaves(ze,Xe,Fe){const He=[];return this._appendLeaves(He,ze,Xe=Xe||10,Fe=Fe||0,0),He}getTile(ze,Xe,Fe){const He=this.trees[this._limitZoom(ze)],mt=Math.pow(2,ze),{extent:it,radius:xt}=this.options,Tt=xt/it,kt=(Fe-Tt)/mt,Jt=(Fe+1+Tt)/mt,rn={features:[]};return this._addTileFeatures(He.range((Xe-Tt)/mt,kt,(Xe+1+Tt)/mt,Jt),He.data,Xe,Fe,mt,rn),Xe===0&&this._addTileFeatures(He.range(1-Tt/mt,kt,1,Jt),He.data,mt,Fe,mt,rn),Xe===mt-1&&this._addTileFeatures(He.range(0,kt,Tt/mt,Jt),He.data,-1,Fe,mt,rn),rn.features.length?rn:null}getClusterExpansionZoom(ze){let Xe=this._getOriginZoom(ze)-1;for(;Xe<=this.options.maxZoom;){const Fe=this.getChildren(ze);if(Xe++,Fe.length!==1)break;ze=Fe[0].properties.cluster_id}return Xe}_appendLeaves(ze,Xe,Fe,He,mt){const it=this.getChildren(Xe);for(const xt of it){const Tt=xt.properties;if(Tt&&Tt.cluster?mt+Tt.point_count<=He?mt+=Tt.point_count:mt=this._appendLeaves(ze,Tt.cluster_id,Fe,He,mt):mt<He?mt++:ze.push(xt),ze.length===Fe)break}return mt}_createTree(ze){const Xe=new s.aC(ze.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Fe=0;Fe<ze.length;Fe+=this.stride)Xe.add(ze[Fe],ze[Fe+1]);return Xe.finish(),Xe.data=ze,Xe}_addTileFeatures(ze,Xe,Fe,He,mt,it){for(const xt of ze){const Tt=xt*this.stride,kt=Xe[Tt+ae]>1;let Jt,rn,Yt;if(kt)Jt=ye(Xe,Tt,this.clusterProps),rn=Xe[Tt],Yt=Xe[Tt+1];else{const jt=this.points[Xe[Tt+ie]];Jt=jt.properties;const[Pe,je]=jt.geometry.coordinates;rn=Te(Pe),Yt=pe(je)}const Qn={type:1,geometry:[[Math.round(this.options.extent*(rn*mt-Fe)),Math.round(this.options.extent*(Yt*mt-He))]],tags:Jt};let An;An=kt||this.options.generateId?Xe[Tt+ie]:this.points[Xe[Tt+ie]].id,An!==void 0&&(Qn.id=An),it.features.push(Qn)}}_limitZoom(ze){return Math.max(this.options.minZoom,Math.min(Math.floor(+ze),this.options.maxZoom+1))}_cluster(ze,Xe){const{radius:Fe,extent:He,reduce:mt,minPoints:it}=this.options,xt=Fe/(He*Math.pow(2,Xe)),Tt=ze.data,kt=[],Jt=this.stride;for(let rn=0;rn<Tt.length;rn+=Jt){if(Tt[rn+2]<=Xe)continue;Tt[rn+2]=Xe;const Yt=Tt[rn],Qn=Tt[rn+1],An=ze.within(Tt[rn],Tt[rn+1],xt),jt=Tt[rn+ae];let Pe=jt;for(const je of An){const _t=je*Jt;Tt[_t+2]>Xe&&(Pe+=Tt[_t+ae])}if(Pe>jt&&Pe>=it){let je,_t=Yt*jt,Qt=Qn*jt,en=-1;const Fn=((rn/Jt|0)<<5)+(Xe+1)+this.points.length;for(const Wn of An){const kr=Wn*Jt;if(Tt[kr+2]<=Xe)continue;Tt[kr+2]=Xe;const Qr=Tt[kr+ae];_t+=Tt[kr]*Qr,Qt+=Tt[kr+1]*Qr,Tt[kr+4]=Fn,mt&&(je||(je=this._map(Tt,rn,!0),en=this.clusterProps.length,this.clusterProps.push(je)),mt(je,this._map(Tt,kr)))}Tt[rn+4]=Fn,kt.push(_t/Pe,Qt/Pe,1/0,Fn,-1,Pe),mt&&kt.push(en)}else{for(let je=0;je<Jt;je++)kt.push(Tt[rn+je]);if(Pe>1)for(const je of An){const _t=je*Jt;if(!(Tt[_t+2]<=Xe)){Tt[_t+2]=Xe;for(let Qt=0;Qt<Jt;Qt++)kt.push(Tt[_t+Qt])}}}}return kt}_getOriginId(ze){return ze-this.points.length>>5}_getOriginZoom(ze){return(ze-this.points.length)%32}_map(ze,Xe,Fe){if(ze[Xe+ae]>1){const it=this.clusterProps[ze[Xe+ce]];return Fe?Object.assign({},it):it}const He=this.points[ze[Xe+ie]].properties,mt=this.options.map(He);return Fe&&mt===He?Object.assign({},mt):mt}}function Se(rt,ze,Xe){return{type:"Feature",id:rt[ze+ie],properties:ye(rt,ze,Xe),geometry:{type:"Point",coordinates:[(Fe=rt[ze],360*(Fe-.5)),Ie(rt[ze+1])]}};var Fe}function ye(rt,ze,Xe){const Fe=rt[ze+ae],He=Fe>=1e4?`${Math.round(Fe/1e3)}k`:Fe>=1e3?Math.round(Fe/100)/10+"k":Fe,mt=rt[ze+ce],it=mt===-1?{}:Object.assign({},Xe[mt]);return Object.assign(it,{cluster:!0,cluster_id:rt[ze+ie],point_count:Fe,point_count_abbreviated:He})}function Te(rt){return rt/360+.5}function pe(rt){const ze=Math.sin(rt*Math.PI/180),Xe=.5-.25*Math.log((1+ze)/(1-ze))/Math.PI;return Xe<0?0:Xe>1?1:Xe}function Ie(rt){const ze=(180-360*rt)*Math.PI/180;return 360*Math.atan(Math.exp(ze))/Math.PI-90}function me(rt,ze,Xe,Fe){let He=Fe;const mt=ze+(Xe-ze>>1);let it,xt=Xe-ze;const Tt=rt[ze],kt=rt[ze+1],Jt=rt[Xe],rn=rt[Xe+1];for(let Yt=ze+3;Yt<Xe;Yt+=3){const Qn=xe(rt[Yt],rt[Yt+1],Tt,kt,Jt,rn);if(Qn>He)it=Yt,He=Qn;else if(Qn===He){const An=Math.abs(Yt-mt);An<xt&&(it=Yt,xt=An)}}He>Fe&&(it-ze>3&&me(rt,ze,it,Fe),rt[it+2]=He,Xe-it>3&&me(rt,it,Xe,Fe))}function xe(rt,ze,Xe,Fe,He,mt){let it=He-Xe,xt=mt-Fe;if(it!==0||xt!==0){const Tt=((rt-Xe)*it+(ze-Fe)*xt)/(it*it+xt*xt);Tt>1?(Xe=He,Fe=mt):Tt>0&&(Xe+=it*Tt,Fe+=xt*Tt)}return it=rt-Xe,xt=ze-Fe,it*it+xt*xt}function ve(rt,ze,Xe,Fe){const He={id:rt??null,type:ze,geometry:Xe,tags:Fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")Ee(He,Xe);else if(ze==="Polygon")Ee(He,Xe[0]);else if(ze==="MultiLineString")for(const mt of Xe)Ee(He,mt);else if(ze==="MultiPolygon")for(const mt of Xe)Ee(He,mt[0]);return He}function Ee(rt,ze){for(let Xe=0;Xe<ze.length;Xe+=3)rt.minX=Math.min(rt.minX,ze[Xe]),rt.minY=Math.min(rt.minY,ze[Xe+1]),rt.maxX=Math.max(rt.maxX,ze[Xe]),rt.maxY=Math.max(rt.maxY,ze[Xe+1])}function De(rt,ze,Xe,Fe){if(!ze.geometry)return;const He=ze.geometry.coordinates;if(He&&He.length===0)return;const mt=ze.geometry.type,it=Math.pow(Xe.tolerance/((1<<Xe.maxZoom)*Xe.extent),2);let xt=[],Tt=ze.id;if(Xe.promoteId?Tt=ze.properties[Xe.promoteId]:Xe.generateId&&(Tt=Fe||0),mt==="Point")We(He,xt);else if(mt==="MultiPoint")for(const kt of He)We(kt,xt);else if(mt==="LineString")Ae(He,xt,it,!1);else if(mt==="MultiLineString"){if(Xe.lineMetrics){for(const kt of He)xt=[],Ae(kt,xt,it,!1),rt.push(ve(Tt,"LineString",xt,ze.properties));return}ut(He,xt,it,!1)}else if(mt==="Polygon")ut(He,xt,it,!0);else{if(mt!=="MultiPolygon"){if(mt==="GeometryCollection"){for(const kt of ze.geometry.geometries)De(rt,{id:Tt,geometry:kt,properties:ze.properties},Xe,Fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const kt of He){const Jt=[];ut(kt,Jt,it,!0),xt.push(Jt)}}rt.push(ve(Tt,mt,xt,ze.properties))}function We(rt,ze){ze.push(pt(rt[0]),st(rt[1]),0)}function Ae(rt,ze,Xe,Fe){let He,mt,it=0;for(let Tt=0;Tt<rt.length;Tt++){const kt=pt(rt[Tt][0]),Jt=st(rt[Tt][1]);ze.push(kt,Jt,0),Tt>0&&(it+=Fe?(He*Jt-kt*mt)/2:Math.sqrt(Math.pow(kt-He,2)+Math.pow(Jt-mt,2))),He=kt,mt=Jt}const xt=ze.length-3;ze[2]=1,me(ze,0,xt,Xe),ze[xt+2]=1,ze.size=Math.abs(it),ze.start=0,ze.end=ze.size}function ut(rt,ze,Xe,Fe){for(let He=0;He<rt.length;He++){const mt=[];Ae(rt[He],mt,Xe,Fe),ze.push(mt)}}function pt(rt){return rt/360+.5}function st(rt){const ze=Math.sin(rt*Math.PI/180),Xe=.5-.25*Math.log((1+ze)/(1-ze))/Math.PI;return Xe<0?0:Xe>1?1:Xe}function Ce(rt,ze,Xe,Fe,He,mt,it,xt){if(Fe/=ze,mt>=(Xe/=ze)&&it<Fe)return rt;if(it<Xe||mt>=Fe)return null;const Tt=[];for(const kt of rt){const Jt=kt.geometry;let rn=kt.type;const Yt=He===0?kt.minX:kt.minY,Qn=He===0?kt.maxX:kt.maxY;if(Yt>=Xe&&Qn<Fe){Tt.push(kt);continue}if(Qn<Xe||Yt>=Fe)continue;let An=[];if(rn==="Point"||rn==="MultiPoint")It(Jt,An,Xe,Fe,He);else if(rn==="LineString")Ve(Jt,An,Xe,Fe,He,!1,xt.lineMetrics);else if(rn==="MultiLineString")Ze(Jt,An,Xe,Fe,He,!1);else if(rn==="Polygon")Ze(Jt,An,Xe,Fe,He,!0);else if(rn==="MultiPolygon")for(const jt of Jt){const Pe=[];Ze(jt,Pe,Xe,Fe,He,!0),Pe.length&&An.push(Pe)}if(An.length){if(xt.lineMetrics&&rn==="LineString"){for(const jt of An)Tt.push(ve(kt.id,rn,jt,kt.tags));continue}rn!=="LineString"&&rn!=="MultiLineString"||(An.length===1?(rn="LineString",An=An[0]):rn="MultiLineString"),rn!=="Point"&&rn!=="MultiPoint"||(rn=An.length===3?"Point":"MultiPoint"),Tt.push(ve(kt.id,rn,An,kt.tags))}}return Tt.length?Tt:null}function It(rt,ze,Xe,Fe,He){for(let mt=0;mt<rt.length;mt+=3){const it=rt[mt+He];it>=Xe&&it<=Fe&&wt(ze,rt[mt],rt[mt+1],rt[mt+2])}}function Ve(rt,ze,Xe,Fe,He,mt,it){let xt=yt(rt);const Tt=He===0?Ut:ht;let kt,Jt,rn=rt.start;for(let Pe=0;Pe<rt.length-3;Pe+=3){const je=rt[Pe],_t=rt[Pe+1],Qt=rt[Pe+2],en=rt[Pe+3],Fn=rt[Pe+4],Wn=He===0?je:_t,kr=He===0?en:Fn;let Qr=!1;it&&(kt=Math.sqrt(Math.pow(je-en,2)+Math.pow(_t-Fn,2))),Wn<Xe?kr>Xe&&(Jt=Tt(xt,je,_t,en,Fn,Xe),it&&(xt.start=rn+kt*Jt)):Wn>Fe?kr<Fe&&(Jt=Tt(xt,je,_t,en,Fn,Fe),it&&(xt.start=rn+kt*Jt)):wt(xt,je,_t,Qt),kr<Xe&&Wn>=Xe&&(Jt=Tt(xt,je,_t,en,Fn,Xe),Qr=!0),kr>Fe&&Wn<=Fe&&(Jt=Tt(xt,je,_t,en,Fn,Fe),Qr=!0),!mt&&Qr&&(it&&(xt.end=rn+kt*Jt),ze.push(xt),xt=yt(rt)),it&&(rn+=kt)}let Yt=rt.length-3;const Qn=rt[Yt],An=rt[Yt+1],jt=He===0?Qn:An;jt>=Xe&&jt<=Fe&&wt(xt,Qn,An,rt[Yt+2]),Yt=xt.length-3,mt&&Yt>=3&&(xt[Yt]!==xt[0]||xt[Yt+1]!==xt[1])&&wt(xt,xt[0],xt[1],xt[2]),xt.length&&ze.push(xt)}function yt(rt){const ze=[];return ze.size=rt.size,ze.start=rt.start,ze.end=rt.end,ze}function Ze(rt,ze,Xe,Fe,He,mt){for(const it of rt)Ve(it,ze,Xe,Fe,He,mt,!1)}function wt(rt,ze,Xe,Fe){rt.push(ze,Xe,Fe)}function Ut(rt,ze,Xe,Fe,He,mt){const it=(mt-ze)/(Fe-ze);return wt(rt,mt,Xe+(He-Xe)*it,1),it}function ht(rt,ze,Xe,Fe,He,mt){const it=(mt-Xe)/(He-Xe);return wt(rt,ze+(Fe-ze)*it,mt,1),it}function qt(rt,ze){const Xe=[];for(let Fe=0;Fe<rt.length;Fe++){const He=rt[Fe],mt=He.type;let it;if(mt==="Point"||mt==="MultiPoint"||mt==="LineString")it=Ye(He.geometry,ze);else if(mt==="MultiLineString"||mt==="Polygon"){it=[];for(const xt of He.geometry)it.push(Ye(xt,ze))}else if(mt==="MultiPolygon"){it=[];for(const xt of He.geometry){const Tt=[];for(const kt of xt)Tt.push(Ye(kt,ze));it.push(Tt)}}Xe.push(ve(He.id,mt,it,He.tags))}return Xe}function Ye(rt,ze){const Xe=[];Xe.size=rt.size,rt.start!==void 0&&(Xe.start=rt.start,Xe.end=rt.end);for(let Fe=0;Fe<rt.length;Fe+=3)Xe.push(rt[Fe]+ze,rt[Fe+1],rt[Fe+2]);return Xe}function Re(rt,ze){if(rt.transformed)return rt;const Xe=1<<rt.z,Fe=rt.x,He=rt.y;for(const mt of rt.features){const it=mt.geometry,xt=mt.type;if(mt.geometry=[],xt===1)for(let Tt=0;Tt<it.length;Tt+=2)mt.geometry.push(Pt(it[Tt],it[Tt+1],ze,Xe,Fe,He));else for(let Tt=0;Tt<it.length;Tt++){const kt=[];for(let Jt=0;Jt<it[Tt].length;Jt+=2)kt.push(Pt(it[Tt][Jt],it[Tt][Jt+1],ze,Xe,Fe,He));mt.geometry.push(kt)}}return rt.transformed=!0,rt}function Pt(rt,ze,Xe,Fe,He,mt){return[Math.round(Xe*(rt*Fe-He)),Math.round(Xe*(ze*Fe-mt))]}function Dt(rt,ze,Xe,Fe,He){const mt=ze===He.maxZoom?0:He.tolerance/((1<<ze)*He.extent),it={features:[],numPoints:0,numSimplified:0,numFeatures:rt.length,source:null,x:Xe,y:Fe,z:ze,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const xt of rt)At(it,xt,mt,He);return it}function At(rt,ze,Xe,Fe){const He=ze.geometry,mt=ze.type,it=[];if(rt.minX=Math.min(rt.minX,ze.minX),rt.minY=Math.min(rt.minY,ze.minY),rt.maxX=Math.max(rt.maxX,ze.maxX),rt.maxY=Math.max(rt.maxY,ze.maxY),mt==="Point"||mt==="MultiPoint")for(let xt=0;xt<He.length;xt+=3)it.push(He[xt],He[xt+1]),rt.numPoints++,rt.numSimplified++;else if(mt==="LineString")Bt(it,He,rt,Xe,!1,!1);else if(mt==="MultiLineString"||mt==="Polygon")for(let xt=0;xt<He.length;xt++)Bt(it,He[xt],rt,Xe,mt==="Polygon",xt===0);else if(mt==="MultiPolygon")for(let xt=0;xt<He.length;xt++){const Tt=He[xt];for(let kt=0;kt<Tt.length;kt++)Bt(it,Tt[kt],rt,Xe,!0,kt===0)}if(it.length){let xt=ze.tags||null;if(mt==="LineString"&&Fe.lineMetrics){xt={};for(const kt in ze.tags)xt[kt]=ze.tags[kt];xt.mapbox_clip_start=He.start/He.size,xt.mapbox_clip_end=He.end/He.size}const Tt={geometry:it,type:mt==="Polygon"||mt==="MultiPolygon"?3:mt==="LineString"||mt==="MultiLineString"?2:1,tags:xt};ze.id!==null&&(Tt.id=ze.id),rt.features.push(Tt)}}function Bt(rt,ze,Xe,Fe,He,mt){const it=Fe*Fe;if(Fe>0&&ze.size<(He?it:Fe))return void(Xe.numPoints+=ze.length/3);const xt=[];for(let Tt=0;Tt<ze.length;Tt+=3)(Fe===0||ze[Tt+2]>it)&&(Xe.numSimplified++,xt.push(ze[Tt],ze[Tt+1])),Xe.numPoints++;He&&function(Tt,kt){let Jt=0;for(let rn=0,Yt=Tt.length,Qn=Yt-2;rn<Yt;Qn=rn,rn+=2)Jt+=(Tt[rn]-Tt[Qn])*(Tt[rn+1]+Tt[Qn+1]);if(Jt>0===kt)for(let rn=0,Yt=Tt.length;rn<Yt/2;rn+=2){const Qn=Tt[rn],An=Tt[rn+1];Tt[rn]=Tt[Yt-2-rn],Tt[rn+1]=Tt[Yt-1-rn],Tt[Yt-2-rn]=Qn,Tt[Yt-1-rn]=An}}(xt,mt),rt.push(xt)}const gn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Zt{constructor(ze,Xe){const Fe=(Xe=this.options=function(mt,it){for(const xt in it)mt[xt]=it[xt];return mt}(Object.create(gn),Xe)).debug;if(Fe&&console.time("preprocess data"),Xe.maxZoom<0||Xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Xe.promoteId&&Xe.generateId)throw new Error("promoteId and generateId cannot be used together.");let He=function(mt,it){const xt=[];if(mt.type==="FeatureCollection")for(let Tt=0;Tt<mt.features.length;Tt++)De(xt,mt.features[Tt],it,Tt);else De(xt,mt.type==="Feature"?mt:{geometry:mt},it);return xt}(ze,Xe);this.tiles={},this.tileCoords=[],Fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Xe.indexMaxZoom,Xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),He=function(mt,it){const xt=it.buffer/it.extent;let Tt=mt;const kt=Ce(mt,1,-1-xt,xt,0,-1,2,it),Jt=Ce(mt,1,1-xt,2+xt,0,-1,2,it);return(kt||Jt)&&(Tt=Ce(mt,1,-xt,1+xt,0,-1,2,it)||[],kt&&(Tt=qt(kt,1).concat(Tt)),Jt&&(Tt=Tt.concat(qt(Jt,-1)))),Tt}(He,Xe),He.length&&this.splitTile(He,0,0,0),Fe&&(He.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ze,Xe,Fe,He,mt,it,xt){const Tt=[ze,Xe,Fe,He],kt=this.options,Jt=kt.debug;for(;Tt.length;){He=Tt.pop(),Fe=Tt.pop(),Xe=Tt.pop(),ze=Tt.pop();const rn=1<<Xe,Yt=cn(Xe,Fe,He);let Qn=this.tiles[Yt];if(!Qn&&(Jt>1&&console.time("creation"),Qn=this.tiles[Yt]=Dt(ze,Xe,Fe,He,kt),this.tileCoords.push({z:Xe,x:Fe,y:He}),Jt)){Jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Xe,Fe,He,Qn.numFeatures,Qn.numPoints,Qn.numSimplified),console.timeEnd("creation"));const Qr=`z${Xe}`;this.stats[Qr]=(this.stats[Qr]||0)+1,this.total++}if(Qn.source=ze,mt==null){if(Xe===kt.indexMaxZoom||Qn.numPoints<=kt.indexMaxPoints)continue}else{if(Xe===kt.maxZoom||Xe===mt)continue;if(mt!=null){const Qr=mt-Xe;if(Fe!==it>>Qr||He!==xt>>Qr)continue}}if(Qn.source=null,ze.length===0)continue;Jt>1&&console.time("clipping");const An=.5*kt.buffer/kt.extent,jt=.5-An,Pe=.5+An,je=1+An;let _t=null,Qt=null,en=null,Fn=null,Wn=Ce(ze,rn,Fe-An,Fe+Pe,0,Qn.minX,Qn.maxX,kt),kr=Ce(ze,rn,Fe+jt,Fe+je,0,Qn.minX,Qn.maxX,kt);ze=null,Wn&&(_t=Ce(Wn,rn,He-An,He+Pe,1,Qn.minY,Qn.maxY,kt),Qt=Ce(Wn,rn,He+jt,He+je,1,Qn.minY,Qn.maxY,kt),Wn=null),kr&&(en=Ce(kr,rn,He-An,He+Pe,1,Qn.minY,Qn.maxY,kt),Fn=Ce(kr,rn,He+jt,He+je,1,Qn.minY,Qn.maxY,kt),kr=null),Jt>1&&console.timeEnd("clipping"),Tt.push(_t||[],Xe+1,2*Fe,2*He),Tt.push(Qt||[],Xe+1,2*Fe,2*He+1),Tt.push(en||[],Xe+1,2*Fe+1,2*He),Tt.push(Fn||[],Xe+1,2*Fe+1,2*He+1)}}getTile(ze,Xe,Fe){ze=+ze,Xe=+Xe,Fe=+Fe;const He=this.options,{extent:mt,debug:it}=He;if(ze<0||ze>24)return null;const xt=1<<ze,Tt=cn(ze,Xe=Xe+xt&xt-1,Fe);if(this.tiles[Tt])return Re(this.tiles[Tt],mt);it>1&&console.log("drilling down to z%d-%d-%d",ze,Xe,Fe);let kt,Jt=ze,rn=Xe,Yt=Fe;for(;!kt&&Jt>0;)Jt--,rn>>=1,Yt>>=1,kt=this.tiles[cn(Jt,rn,Yt)];return kt&&kt.source?(it>1&&(console.log("found parent tile z%d-%d-%d",Jt,rn,Yt),console.time("drilling down")),this.splitTile(kt.source,Jt,rn,Yt,ze,Xe,Fe),it>1&&console.timeEnd("drilling down"),this.tiles[Tt]?Re(this.tiles[Tt],mt):null):null}}function cn(rt,ze,Xe){return 32*((1<<rt)*Xe+ze)+rt}function $t(rt,ze){return ze?rt.properties[ze]:rt.id}function Et(rt,ze){if(rt==null)return!0;if(rt.type==="Feature")return $t(rt,ze)!=null;if(rt.type==="FeatureCollection"){const Xe=new Set;for(const Fe of rt.features){const He=$t(Fe,ze);if(He==null||Xe.has(He))return!1;Xe.add(He)}return!0}return!1}function qn(rt,ze){const Xe=new Map;if(rt!=null)if(rt.type==="Feature")Xe.set($t(rt,ze),rt);else for(const Fe of rt.features)Xe.set($t(Fe,ze),Fe);return Xe}class Dn extends v{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ze,Xe){return s._(this,void 0,void 0,function*(){const Fe=ze.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const He=this._geoJSONIndex.getTile(Fe.z,Fe.x,Fe.y);if(!He)return null;const mt=new O(He.features);let it=K(mt);return it.byteOffset===0&&it.byteLength===it.buffer.byteLength||(it=new Uint8Array(it)),{vectorTile:mt,rawData:it.buffer}})}loadData(ze){return s._(this,void 0,void 0,function*(){var Xe;(Xe=this._pendingRequest)===null||Xe===void 0||Xe.abort();const Fe=!!(ze&&ze.request&&ze.request.collectResourceTiming)&&new s.cA(ze.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ze,this._pendingRequest),this._geoJSONIndex=ze.cluster?new se(function({superclusterOptions:it,clusterProperties:xt}){if(!xt||!it)return it;const Tt={},kt={},Jt={accumulated:null,zoom:0},rn={properties:null},Yt=Object.keys(xt);for(const Qn of Yt){const[An,jt]=xt[Qn],Pe=s.cH(jt),je=s.cH(typeof An=="string"?[An,["accumulated"],["get",Qn]]:An);Tt[Qn]=Pe.value,kt[Qn]=je.value}return it.map=Qn=>{rn.properties=Qn;const An={};for(const jt of Yt)An[jt]=Tt[jt].evaluate(Jt,rn);return An},it.reduce=(Qn,An)=>{rn.properties=An;for(const jt of Yt)Jt.accumulated=Qn[jt],Qn[jt]=kt[jt].evaluate(Jt,rn)},it}(ze)).load((yield this._pendingData).features):(He=yield this._pendingData,new Zt(He,ze.geojsonVtOptions)),this.loaded={};const mt={};if(Fe){const it=Fe.finish();it&&(mt.resourceTiming={},mt.resourceTiming[ze.source]=JSON.parse(JSON.stringify(it)))}return mt}catch(mt){if(delete this._pendingRequest,s.cl(mt))return{abandoned:!0};throw mt}var He})}getData(){return s._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ze){const Xe=this.loaded;return Xe&&Xe[ze.uid]?super.reloadTile(ze):this.loadTile(ze)}loadAndProcessGeoJSON(ze,Xe){return s._(this,void 0,void 0,function*(){let Fe=yield this.loadGeoJSON(ze,Xe);if(delete this._pendingRequest,typeof Fe!="object")throw new Error(`Input data given to '${ze.source}' is not a valid GeoJSON object.`);if(D(Fe,!0),ze.filter){const He=s.cH(ze.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(He.result==="error")throw new Error(He.value.map(it=>`${it.key}: ${it.message}`).join(", "));Fe={type:"FeatureCollection",features:Fe.features.filter(it=>He.value.evaluate({zoom:0},it))}}return Fe})}loadGeoJSON(ze,Xe){return s._(this,void 0,void 0,function*(){const{promoteId:Fe}=ze;if(ze.request){const He=yield s.j(ze.request,Xe);return this._dataUpdateable=Et(He.data,Fe)?qn(He.data,Fe):void 0,He.data}if(typeof ze.data=="string")try{const He=JSON.parse(ze.data);return this._dataUpdateable=Et(He,Fe)?qn(He,Fe):void 0,He}catch{throw new Error(`Input data given to '${ze.source}' is not a valid GeoJSON object.`)}if(!ze.dataDiff)throw new Error(`Input data given to '${ze.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ze.source}`);return function(He,mt,it){var xt,Tt,kt,Jt;if(mt.removeAll&&He.clear(),mt.remove)for(const rn of mt.remove)He.delete(rn);if(mt.add)for(const rn of mt.add){const Yt=$t(rn,it);Yt!=null&&He.set(Yt,rn)}if(mt.update)for(const rn of mt.update){let Yt=He.get(rn.id);if(Yt==null)continue;const Qn=!rn.removeAllProperties&&(((xt=rn.removeProperties)===null||xt===void 0?void 0:xt.length)>0||((Tt=rn.addOrUpdateProperties)===null||Tt===void 0?void 0:Tt.length)>0);if((rn.newGeometry||rn.removeAllProperties||Qn)&&(Yt=Object.assign({},Yt),He.set(rn.id,Yt),Qn&&(Yt.properties=Object.assign({},Yt.properties))),rn.newGeometry&&(Yt.geometry=rn.newGeometry),rn.removeAllProperties)Yt.properties={};else if(((kt=rn.removeProperties)===null||kt===void 0?void 0:kt.length)>0)for(const An of rn.removeProperties)Object.prototype.hasOwnProperty.call(Yt.properties,An)&&delete Yt.properties[An];if(((Jt=rn.addOrUpdateProperties)===null||Jt===void 0?void 0:Jt.length)>0)for(const{key:An,value:jt}of rn.addOrUpdateProperties)Yt.properties[An]=jt}}(this._dataUpdateable,ze.dataDiff,Fe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ze){return s._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ze){return this._geoJSONIndex.getClusterExpansionZoom(ze.clusterId)}getClusterChildren(ze){return this._geoJSONIndex.getChildren(ze.clusterId)}getClusterLeaves(ze){return this._geoJSONIndex.getLeaves(ze.clusterId,ze.limit,ze.offset)}}class sr{constructor(ze){this.self=ze,this.actor=new s.H(ze),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(Xe,Fe)=>{if(this.externalWorkerSourceTypes[Xe])throw new Error(`Worker source with name "${Xe}" already registered.`);this.externalWorkerSourceTypes[Xe]=Fe},this.self.addProtocol=s.cn,this.self.removeProtocol=s.co,this.self.registerRTLTextPlugin=Xe=>{s.cI.setMethods(Xe)},this.actor.registerMessageHandler("LDT",(Xe,Fe)=>this._getDEMWorkerSource(Xe,Fe.source).loadTile(Fe)),this.actor.registerMessageHandler("RDT",(Xe,Fe)=>s._(this,void 0,void 0,function*(){this._getDEMWorkerSource(Xe,Fe.source).removeTile(Fe)})),this.actor.registerMessageHandler("GCEZ",(Xe,Fe)=>s._(this,void 0,void 0,function*(){return this._getWorkerSource(Xe,Fe.type,Fe.source).getClusterExpansionZoom(Fe)})),this.actor.registerMessageHandler("GCC",(Xe,Fe)=>s._(this,void 0,void 0,function*(){return this._getWorkerSource(Xe,Fe.type,Fe.source).getClusterChildren(Fe)})),this.actor.registerMessageHandler("GCL",(Xe,Fe)=>s._(this,void 0,void 0,function*(){return this._getWorkerSource(Xe,Fe.type,Fe.source).getClusterLeaves(Fe)})),this.actor.registerMessageHandler("LD",(Xe,Fe)=>this._getWorkerSource(Xe,Fe.type,Fe.source).loadData(Fe)),this.actor.registerMessageHandler("GD",(Xe,Fe)=>this._getWorkerSource(Xe,Fe.type,Fe.source).getData()),this.actor.registerMessageHandler("LT",(Xe,Fe)=>this._getWorkerSource(Xe,Fe.type,Fe.source).loadTile(Fe)),this.actor.registerMessageHandler("RT",(Xe,Fe)=>this._getWorkerSource(Xe,Fe.type,Fe.source).reloadTile(Fe)),this.actor.registerMessageHandler("AT",(Xe,Fe)=>this._getWorkerSource(Xe,Fe.type,Fe.source).abortTile(Fe)),this.actor.registerMessageHandler("RMT",(Xe,Fe)=>this._getWorkerSource(Xe,Fe.type,Fe.source).removeTile(Fe)),this.actor.registerMessageHandler("RS",(Xe,Fe)=>s._(this,void 0,void 0,function*(){if(!this.workerSources[Xe]||!this.workerSources[Xe][Fe.type]||!this.workerSources[Xe][Fe.type][Fe.source])return;const He=this.workerSources[Xe][Fe.type][Fe.source];delete this.workerSources[Xe][Fe.type][Fe.source],He.removeSource!==void 0&&He.removeSource(Fe)})),this.actor.registerMessageHandler("RM",Xe=>s._(this,void 0,void 0,function*(){delete this.layerIndexes[Xe],delete this.availableImages[Xe],delete this.workerSources[Xe],delete this.demWorkerSources[Xe]})),this.actor.registerMessageHandler("SR",(Xe,Fe)=>s._(this,void 0,void 0,function*(){this.referrer=Fe})),this.actor.registerMessageHandler("SRPS",(Xe,Fe)=>this._syncRTLPluginState(Xe,Fe)),this.actor.registerMessageHandler("IS",(Xe,Fe)=>s._(this,void 0,void 0,function*(){this.self.importScripts(Fe)})),this.actor.registerMessageHandler("SI",(Xe,Fe)=>this._setImages(Xe,Fe)),this.actor.registerMessageHandler("UL",(Xe,Fe)=>s._(this,void 0,void 0,function*(){this._getLayerIndex(Xe).update(Fe.layers,Fe.removedIds)})),this.actor.registerMessageHandler("SL",(Xe,Fe)=>s._(this,void 0,void 0,function*(){this._getLayerIndex(Xe).replace(Fe)}))}_setImages(ze,Xe){return s._(this,void 0,void 0,function*(){this.availableImages[ze]=Xe;for(const Fe in this.workerSources[ze]){const He=this.workerSources[ze][Fe];for(const mt in He)He[mt].availableImages=Xe}})}_syncRTLPluginState(ze,Xe){return s._(this,void 0,void 0,function*(){return yield s.cI.syncState(Xe,this.self.importScripts)})}_getAvailableImages(ze){let Xe=this.availableImages[ze];return Xe||(Xe=[]),Xe}_getLayerIndex(ze){let Xe=this.layerIndexes[ze];return Xe||(Xe=this.layerIndexes[ze]=new a),Xe}_getWorkerSource(ze,Xe,Fe){if(this.workerSources[ze]||(this.workerSources[ze]={}),this.workerSources[ze][Xe]||(this.workerSources[ze][Xe]={}),!this.workerSources[ze][Xe][Fe]){const He={sendAsync:(mt,it)=>(mt.targetMapId=ze,this.actor.sendAsync(mt,it))};switch(Xe){case"vector":this.workerSources[ze][Xe][Fe]=new v(He,this._getLayerIndex(ze),this._getAvailableImages(ze));break;case"geojson":this.workerSources[ze][Xe][Fe]=new Dn(He,this._getLayerIndex(ze),this._getAvailableImages(ze));break;default:this.workerSources[ze][Xe][Fe]=new this.externalWorkerSourceTypes[Xe](He,this._getLayerIndex(ze),this._getAvailableImages(ze))}}return this.workerSources[ze][Xe][Fe]}_getDEMWorkerSource(ze,Xe){return this.demWorkerSources[ze]||(this.demWorkerSources[ze]={}),this.demWorkerSources[ze][Xe]||(this.demWorkerSources[ze][Xe]=new w),this.demWorkerSources[ze][Xe]}}return s.i(self)&&(self.worker=new sr(self)),sr}),i("index",["exports","./shared"],function(s,a){var c="5.3.0";function h(){var B=new a.A(4);return a.A!=Float32Array&&(B[1]=0,B[2]=0),B[0]=1,B[3]=1,B}let d,v;const w={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(B,l,p){const T=requestAnimationFrame(U=>{P(),l(U)}),{unsubscribe:P}=a.s(B.signal,"abort",()=>{P(),cancelAnimationFrame(T),p(a.c())},!1)},frameAsync(B){return new Promise((l,p)=>{this.frame(B,l,p)})},getImageData(B,l=0){return this.getImageCanvasContext(B).getImageData(-l,-l,B.width+2*l,B.height+2*l)},getImageCanvasContext(B){const l=window.document.createElement("canvas"),p=l.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return l.width=B.width,l.height=B.height,p.drawImage(B,0,0,B.width,B.height),p},resolveURL:B=>(d||(d=document.createElement("a")),d.href=B,d.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};class _{static testProp(l){if(!_.docStyle)return l[0];for(let p=0;p<l.length;p++)if(l[p]in _.docStyle)return l[p];return l[0]}static create(l,p,T){const P=window.document.createElement(l);return p!==void 0&&(P.className=p),T&&T.appendChild(P),P}static createNS(l,p){return window.document.createElementNS(l,p)}static disableDrag(){_.docStyle&&_.selectProp&&(_.userSelect=_.docStyle[_.selectProp],_.docStyle[_.selectProp]="none")}static enableDrag(){_.docStyle&&_.selectProp&&(_.docStyle[_.selectProp]=_.userSelect)}static setTransform(l,p){l.style[_.transformProp]=p}static addEventListener(l,p,T,P={}){l.addEventListener(p,T,"passive"in P?P:P.capture)}static removeEventListener(l,p,T,P={}){l.removeEventListener(p,T,"passive"in P?P:P.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",_.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",_.suppressClickInternal,!0)},0)}static getScale(l){const p=l.getBoundingClientRect();return{x:p.width/l.offsetWidth||1,y:p.height/l.offsetHeight||1,boundingClientRect:p}}static getPoint(l,p,T){const P=p.boundingClientRect;return new a.P((T.clientX-P.left)/p.x-l.clientLeft,(T.clientY-P.top)/p.y-l.clientTop)}static mousePos(l,p){const T=_.getScale(l);return _.getPoint(l,T,p)}static touchPos(l,p){const T=[],P=_.getScale(l);for(let U=0;U<p.length;U++)T.push(_.getPoint(l,P,p[U]));return T}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const p=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),T=p.querySelectorAll("script");for(const P of T)P.remove();return _.clean(p),p.innerHTML}static isPossiblyDangerous(l,p){const T=p.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!T.includes("javascript:")&&!T.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const p=l.children;for(const T of p)_.removeAttributes(T),_.clean(T)}static removeAttributes(l){for(const{name:p,value:T}of l.attributes)_.isPossiblyDangerous(p,T)&&l.removeAttribute(p)}}_.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_.selectProp=_.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_.transformProp=_.testProp(["transform","WebkitTransform"]);const E={supported:!1,testSupport:function(B){!A&&D&&(F?O(B):M=B)}};let M,D,A=!1,F=!1;function O(B){const l=B.createTexture();B.bindTexture(B.TEXTURE_2D,l);try{if(B.texImage2D(B.TEXTURE_2D,0,B.RGBA,B.RGBA,B.UNSIGNED_BYTE,D),B.isContextLost())return;E.supported=!0}catch{}B.deleteTexture(l),A=!0}var N;typeof document<"u"&&(D=document.createElement("img"),D.onload=()=>{M&&O(M),M=null,F=!0},D.onerror=()=>{A=!0,M=null},D.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(B){let l,p,T,P;B.resetRequestQueue=()=>{l=[],p=0,T=0,P={}},B.addThrottleControl=ue=>{const ge=T++;return P[ge]=ue,ge},B.removeThrottleControl=ue=>{delete P[ue],Y()},B.getImage=(ue,ge,Ne=!0)=>new Promise((qe,Ge)=>{E.supported&&(ue.headers||(ue.headers={}),ue.headers.accept="image/webp,*/*"),a.e(ue,{type:"image"}),l.push({abortController:ge,requestParameters:ue,supportImageRefresh:Ne,state:"queued",onError:ot=>{Ge(ot)},onSuccess:ot=>{qe(ot)}}),Y()});const U=ue=>a._(this,void 0,void 0,function*(){ue.state="running";const{requestParameters:ge,supportImageRefresh:Ne,onError:qe,onSuccess:Ge,abortController:ot}=ue,ft=Ne===!1&&!a.i(self)&&!a.g(ge.url)&&(!ge.headers||Object.keys(ge.headers).reduce((Ft,Xt)=>Ft&&Xt==="accept",!0));p++;const Ot=ft?re(ge,ot):a.m(ge,ot);try{const Ft=yield Ot;delete ue.abortController,ue.state="completed",Ft.data instanceof HTMLImageElement||a.b(Ft.data)?Ge(Ft):Ft.data&&Ge({data:yield(Lt=Ft.data,typeof createImageBitmap=="function"?a.f(Lt):a.h(Lt)),cacheControl:Ft.cacheControl,expires:Ft.expires})}catch(Ft){delete ue.abortController,qe(Ft)}finally{p--,Y()}var Lt}),Y=()=>{const ue=(()=>{for(const ge of Object.keys(P))if(P[ge]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ge=p;ge<ue&&l.length>0;ge++){const Ne=l.shift();Ne.abortController.signal.aborted?ge--:U(Ne)}},re=(ue,ge)=>new Promise((Ne,qe)=>{const Ge=new Image,ot=ue.url,ft=ue.credentials;ft&&ft==="include"?Ge.crossOrigin="use-credentials":(ft&&ft==="same-origin"||!a.d(ot))&&(Ge.crossOrigin="anonymous"),ge.signal.addEventListener("abort",()=>{Ge.src="",qe(a.c())}),Ge.fetchPriority="high",Ge.onload=()=>{Ge.onerror=Ge.onload=null,Ne({data:Ge})},Ge.onerror=()=>{Ge.onerror=Ge.onload=null,ge.signal.aborted||qe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Ge.src=ot})}(N||(N={})),N.resetRequestQueue();class H{constructor(l){this._transformRequestFn=l}transformRequest(l,p){return this._transformRequestFn&&this._transformRequestFn(l,p)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function G(B){const l=[];if(typeof B=="string")l.push({id:"default",url:B});else if(B&&B.length>0){const p=[];for(const{id:T,url:P}of B){const U=`${T}${P}`;p.indexOf(U)===-1&&(p.push(U),l.push({id:T,url:P}))}}return l}function W(B,l,p){try{const T=new URL(B);return T.pathname+=`${l}${p}`,T.toString()}catch{throw new Error(`Invalid sprite URL "${B}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class X{constructor(l,p,T,P){this.context=l,this.format=T,this.texture=l.gl.createTexture(),this.update(p,P)}update(l,p,T){const{width:P,height:U}=l,Y=!(this.size&&this.size[0]===P&&this.size[1]===U||T),{context:re}=this,{gl:ue}=re;if(this.useMipmap=!!(p&&p.useMipmap),ue.bindTexture(ue.TEXTURE_2D,this.texture),re.pixelStoreUnpackFlipY.set(!1),re.pixelStoreUnpack.set(1),re.pixelStoreUnpackPremultiplyAlpha.set(this.format===ue.RGBA&&(!p||p.premultiply!==!1)),Y)this.size=[P,U],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.b(l)?ue.texImage2D(ue.TEXTURE_2D,0,this.format,this.format,ue.UNSIGNED_BYTE,l):ue.texImage2D(ue.TEXTURE_2D,0,this.format,P,U,0,this.format,ue.UNSIGNED_BYTE,l.data);else{const{x:ge,y:Ne}=T||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.b(l)?ue.texSubImage2D(ue.TEXTURE_2D,0,ge,Ne,ue.RGBA,ue.UNSIGNED_BYTE,l):ue.texSubImage2D(ue.TEXTURE_2D,0,ge,Ne,P,U,ue.RGBA,ue.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ue.generateMipmap(ue.TEXTURE_2D)}bind(l,p,T){const{context:P}=this,{gl:U}=P;U.bindTexture(U.TEXTURE_2D,this.texture),T!==U.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(T=U.LINEAR),l!==this.filter&&(U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,l),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,T||l),this.filter=l),p!==this.wrap&&(U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,p),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function K(B){const{userImage:l}=B;return!!(l&&l.render&&l.render())&&(B.data.replace(new Uint8Array(l.data.buffer)),!0)}class k extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:p,promiseResolve:T}of this.requestors)T(this._getImagesForIds(p));this.requestors=[]}}getImage(l){const p=this.images[l];if(p&&!p.data&&p.spriteData){const T=p.spriteData;p.data=new a.R({width:T.width,height:T.height},T.context.getImageData(T.x,T.y,T.width,T.height).data),p.spriteData=null}return p}addImage(l,p){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,p)&&(this.images[l]=p)}_validate(l,p){let T=!0;const P=p.data||p.spriteData;return this._validateStretch(p.stretchX,P&&P.width)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchX" value`))),T=!1),this._validateStretch(p.stretchY,P&&P.height)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchY" value`))),T=!1),this._validateContent(p.content,p)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "content" value`))),T=!1),T}_validateStretch(l,p){if(!l)return!0;let T=0;for(const P of l){if(P[0]<T||P[1]<P[0]||p<P[1])return!1;T=P[1]}return!0}_validateContent(l,p){if(!l)return!0;if(l.length!==4)return!1;const T=p.spriteData,P=T&&T.width||p.data.width,U=T&&T.height||p.data.height;return!(l[0]<0||P<l[0]||l[1]<0||U<l[1]||l[2]<0||P<l[2]||l[3]<0||U<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,p,T=!0){const P=this.getImage(l);if(T&&(P.data.width!==p.data.width||P.data.height!==p.data.height))throw new Error(`size mismatch between old image (${P.data.width}x${P.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=P.version+1,this.images[l]=p,this.updatedImages[l]=!0}removeImage(l){const p=this.images[l];delete this.images[l],delete this.patterns[l],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise((p,T)=>{let P=!0;if(!this.isLoaded())for(const U of l)this.images[U]||(P=!1);this.isLoaded()||P?p(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:p})})}_getImagesForIds(l){const p={};for(const T of l){let P=this.getImage(T);P||(this.fire(new a.l("styleimagemissing",{id:T})),P=this.getImage(T)),P?p[T]={data:P.data.clone(),pixelRatio:P.pixelRatio,sdf:P.sdf,version:P.version,stretchX:P.stretchX,stretchY:P.stretchY,content:P.content,textFitWidth:P.textFitWidth,textFitHeight:P.textFitHeight,hasRenderCallback:!!(P.userImage&&P.userImage.render)}:a.w(`Image "${T}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:l,height:p}=this.atlasImage;return{width:l,height:p}}getPattern(l){const p=this.patterns[l],T=this.getImage(l);if(!T)return null;if(p&&p.position.version===T.version)return p.position;if(p)p.position.version=T.version;else{const P={w:T.data.width+2,h:T.data.height+2,x:0,y:0},U=new a.I(P,T);this.patterns[l]={bin:P,position:U}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const p=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new X(l,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const U in this.patterns)l.push(this.patterns[U].bin);const{w:p,h:T}=a.p(l),P=this.atlasImage;P.resize({width:p||1,height:T||1});for(const U in this.patterns){const{bin:Y}=this.patterns[U],re=Y.x+1,ue=Y.y+1,ge=this.getImage(U).data,Ne=ge.width,qe=ge.height;a.R.copy(ge,P,{x:0,y:0},{x:re,y:ue},{width:Ne,height:qe}),a.R.copy(ge,P,{x:0,y:qe-1},{x:re,y:ue-1},{width:Ne,height:1}),a.R.copy(ge,P,{x:0,y:0},{x:re,y:ue+qe},{width:Ne,height:1}),a.R.copy(ge,P,{x:Ne-1,y:0},{x:re-1,y:ue},{width:1,height:qe}),a.R.copy(ge,P,{x:0,y:0},{x:re+Ne,y:ue},{width:1,height:qe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const p of l){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const T=this.getImage(p);T||a.w(`Image with ID: "${p}" was not found`),K(T)&&this.updateImage(p,T)}}}const $=1e20;function Q(B,l,p,T,P,U,Y,re,ue){for(let ge=l;ge<l+T;ge++)ie(B,p*U+ge,U,P,Y,re,ue);for(let ge=p;ge<p+P;ge++)ie(B,ge*U+l,1,T,Y,re,ue)}function ie(B,l,p,T,P,U,Y){U[0]=0,Y[0]=-1e20,Y[1]=$,P[0]=B[l];for(let re=1,ue=0,ge=0;re<T;re++){P[re]=B[l+re*p];const Ne=re*re;do{const qe=U[ue];ge=(P[re]-P[qe]+Ne-qe*qe)/(re-qe)/2}while(ge<=Y[ue]&&--ue>-1);ue++,U[ue]=re,Y[ue]=ge,Y[ue+1]=$}for(let re=0,ue=0;re<T;re++){for(;Y[ue+1]<re;)ue++;const ge=U[ue],Ne=re-ge;B[l+re*p]=P[ge]+Ne*Ne}}class ae{constructor(l,p){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={}}setURL(l){this.url=l}getGlyphs(l){return a._(this,void 0,void 0,function*(){const p=[];for(const U in l)for(const Y of l[U])p.push(this._getAndCacheGlyphsPromise(U,Y));const T=yield Promise.all(p),P={};for(const{stack:U,id:Y,glyph:re}of T)P[U]||(P[U]={}),P[U][Y]=re&&{id:re.id,bitmap:re.bitmap.clone(),metrics:re.metrics};return P})}_getAndCacheGlyphsPromise(l,p){return a._(this,void 0,void 0,function*(){let T=this.entries[l];T||(T=this.entries[l]={glyphs:{},requests:{},ranges:{}});let P=T.glyphs[p];if(P!==void 0)return{stack:l,id:p,glyph:P};if(P=this._tinySDF(T,l,p),P)return T.glyphs[p]=P,{stack:l,id:p,glyph:P};const U=Math.floor(p/256);if(256*U>65535)throw new Error("glyphs > 65535 not supported");if(T.ranges[U])return{stack:l,id:p,glyph:P};if(!this.url)throw new Error("glyphsUrl is not set");if(!T.requests[U]){const re=ae.loadGlyphRange(l,U,this.url,this.requestManager);T.requests[U]=re}const Y=yield T.requests[U];for(const re in Y)this._doesCharSupportLocalGlyph(+re)||(T.glyphs[+re]=Y[+re]);return T.ranges[U]=!0,{stack:l,id:p,glyph:Y[p]||null}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))||a.u["CJK Unified Ideographs"](l)||a.u["Hangul Syllables"](l)||a.u.Hiragana(l)||a.u.Katakana(l)||a.u["CJK Symbols and Punctuation"](l)||a.u["Halfwidth and Fullwidth Forms"](l))}_tinySDF(l,p,T){const P=this.localIdeographFontFamily;if(!P||!this._doesCharSupportLocalGlyph(T))return;let U=l.tinySDF;if(!U){let re="400";/bold/i.test(p)?re="900":/medium/i.test(p)?re="500":/light/i.test(p)&&(re="200"),U=l.tinySDF=new ae.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:P,fontWeight:re})}const Y=U.draw(String.fromCharCode(T));return{id:T,bitmap:new a.q({width:Y.width||60,height:Y.height||60},Y.data),metrics:{width:Y.glyphWidth/2||24,height:Y.glyphHeight/2||24,left:Y.glyphLeft/2+.5||0,top:Y.glyphTop/2-27.5||-8,advance:Y.glyphAdvance/2||24,isDoubleResolution:!0}}}}ae.loadGlyphRange=function(B,l,p,T){return a._(this,void 0,void 0,function*(){const P=256*l,U=P+255,Y=T.transformRequest(p.replace("{fontstack}",B).replace("{range}",`${P}-${U}`),"Glyphs"),re=yield a.n(Y,new AbortController);if(!re||!re.data)throw new Error(`Could not load glyph range. range: ${l}, ${P}-${U}`);const ue={};for(const ge of a.o(re.data))ue[ge.id]=ge;return ue})},ae.TinySDF=class{constructor({fontSize:B=24,buffer:l=3,radius:p=8,cutoff:T=.25,fontFamily:P="sans-serif",fontWeight:U="normal",fontStyle:Y="normal"}={}){this.buffer=l,this.cutoff=T,this.radius=p;const re=this.size=B+4*l,ue=this._createCanvas(re),ge=this.ctx=ue.getContext("2d",{willReadFrequently:!0});ge.font=`${Y} ${U} ${B}px ${P}`,ge.textBaseline="alphabetic",ge.textAlign="left",ge.fillStyle="black",this.gridOuter=new Float64Array(re*re),this.gridInner=new Float64Array(re*re),this.f=new Float64Array(re),this.z=new Float64Array(re+1),this.v=new Uint16Array(re)}_createCanvas(B){const l=document.createElement("canvas");return l.width=l.height=B,l}draw(B){const{width:l,actualBoundingBoxAscent:p,actualBoundingBoxDescent:T,actualBoundingBoxLeft:P,actualBoundingBoxRight:U}=this.ctx.measureText(B),Y=Math.ceil(p),re=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(U-P))),ue=Math.min(this.size-this.buffer,Y+Math.ceil(T)),ge=re+2*this.buffer,Ne=ue+2*this.buffer,qe=Math.max(ge*Ne,0),Ge=new Uint8ClampedArray(qe),ot={data:Ge,width:ge,height:Ne,glyphWidth:re,glyphHeight:ue,glyphTop:Y,glyphLeft:0,glyphAdvance:l};if(re===0||ue===0)return ot;const{ctx:ft,buffer:Ot,gridInner:Lt,gridOuter:Ft}=this;ft.clearRect(Ot,Ot,re,ue),ft.fillText(B,Ot,Ot+Y);const Xt=ft.getImageData(Ot,Ot,re,ue);Ft.fill($,0,qe),Lt.fill(0,0,qe);for(let nn=0;nn<ue;nn++)for(let an=0;an<re;an++){const sn=Xt.data[4*(nn*re+an)+3]/255;if(sn===0)continue;const pn=(nn+Ot)*ge+an+Ot;if(sn===1)Ft[pn]=0,Lt[pn]=$;else{const hn=.5-sn;Ft[pn]=hn>0?hn*hn:0,Lt[pn]=hn<0?hn*hn:0}}Q(Ft,0,0,ge,Ne,ge,this.f,this.v,this.z),Q(Lt,Ot,Ot,re,ue,ge,this.f,this.v,this.z);for(let nn=0;nn<qe;nn++){const an=Math.sqrt(Ft[nn])-Math.sqrt(Lt[nn]);Ge[nn]=Math.round(255-255*(an/this.radius+this.cutoff))}return ot}};class ce{constructor(){this.specification=a.v.light.position}possiblyEvaluate(l,p){return a.z(l.expression.evaluate(p))}interpolate(l,p,T){return{x:a.B.number(l.x,p.x,T),y:a.B.number(l.y,p.y,T),z:a.B.number(l.z,p.z,T)}}}let se;class Se extends a.E{constructor(l){super(),se=se||new a.r({anchor:new a.D(a.v.light.anchor),position:new ce,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(se),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,p={}){if(!this._validate(a.t,l,p))for(const T in l){const P=l[T];T.endsWith("-transition")?this._transitionable.setTransition(T.slice(0,-11),P):this._transitionable.setValue(T,P)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,T){return(!T||T.validate!==!1)&&a.x(this,l.call(a.y,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const ye=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Te extends a.E{constructor(l){super(),this._transitionable=new a.T(ye),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.C(0))}setSky(l,p={}){if(!this._validate(a.F,l,p)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const T in l){const P=l[T];T.endsWith("-transition")?this._transitionable.setTransition(T.slice(0,-11),P):this._transitionable.setValue(T,P)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,T={}){return(T==null?void 0:T.validate)!==!1&&a.x(this,l.call(a.y,a.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class pe{constructor(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,p){const T=l.join(",")+String(p);return this.dashEntry[T]||(this.dashEntry[T]=this.addDash(l,p)),this.dashEntry[T]}getDashRanges(l,p,T){const P=[];let U=l.length%2==1?-l[l.length-1]*T:0,Y=l[0]*T,re=!0;P.push({left:U,right:Y,isDash:re,zeroLength:l[0]===0});let ue=l[0];for(let ge=1;ge<l.length;ge++){re=!re;const Ne=l[ge];U=ue*T,ue+=Ne,Y=ue*T,P.push({left:U,right:Y,isDash:re,zeroLength:Ne===0})}return P}addRoundDash(l,p,T){const P=p/2;for(let U=-T;U<=T;U++){const Y=this.width*(this.nextRow+T+U);let re=0,ue=l[re];for(let ge=0;ge<this.width;ge++){ge/ue.right>1&&(ue=l[++re]);const Ne=Math.abs(ge-ue.left),qe=Math.abs(ge-ue.right),Ge=Math.min(Ne,qe);let ot;const ft=U/T*(P+1);if(ue.isDash){const Ot=P-Math.abs(ft);ot=Math.sqrt(Ge*Ge+Ot*Ot)}else ot=P-Math.sqrt(Ge*Ge+ft*ft);this.data[Y+ge]=Math.max(0,Math.min(255,ot+128))}}}addRegularDash(l){for(let re=l.length-1;re>=0;--re){const ue=l[re],ge=l[re+1];ue.zeroLength?l.splice(re,1):ge&&ge.isDash===ue.isDash&&(ge.left=ue.left,l.splice(re,1))}const p=l[0],T=l[l.length-1];p.isDash===T.isDash&&(p.left=T.left-this.width,T.right=p.right+this.width);const P=this.width*this.nextRow;let U=0,Y=l[U];for(let re=0;re<this.width;re++){re/Y.right>1&&(Y=l[++U]);const ue=Math.abs(re-Y.left),ge=Math.abs(re-Y.right),Ne=Math.min(ue,ge);this.data[P+re]=Math.max(0,Math.min(255,(Y.isDash?Ne:-Ne)+128))}}addDash(l,p){const T=p?7:0,P=2*T+1;if(this.nextRow+P>this.height)return a.w("LineAtlas out of space"),null;let U=0;for(let re=0;re<l.length;re++)U+=l[re];if(U!==0){const re=this.width/U,ue=this.getDashRanges(l,this.width,re);p?this.addRoundDash(ue,re,T):this.addRegularDash(ue)}const Y={y:(this.nextRow+T+.5)/this.height,height:2*T/this.height,width:U};return this.nextRow+=P,this.dirty=!0,Y}bind(l){const p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const Ie="maplibre_preloaded_worker_pool";class me{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<me.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ie]}numActive(){return Object.keys(this.active).length}}const xe=Math.floor(w.hardwareConcurrency/2);let ve,Ee;function De(){return ve||(ve=new me),ve}me.workerCount=a.G(globalThis)?Math.max(Math.min(xe,3),1):1;class We{constructor(l,p){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=p;const T=this.workerPool.acquire(p);for(let P=0;P<T.length;P++){const U=new a.H(T[P],p);U.name=`Worker ${P}`,this.actors.push(U)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,p){const T=[];for(const P of this.actors)T.push(P.sendAsync({type:l,data:p}));return Promise.all(T)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,p){for(const T of this.actors)T.registerMessageHandler(l,p)}}function Ae(){return Ee||(Ee=new We(De(),a.J),Ee.registerMessageHandler("GR",(B,l,p)=>a.m(l,p))),Ee}function ut(B,l){const p=a.K();return a.L(p,p,[1,1,0]),a.M(p,p,[.5*B.width,.5*B.height,1]),B.calculatePosMatrix?a.N(p,p,B.calculatePosMatrix(l.toUnwrapped())):p}function pt(B,l,p,T,P,U,Y){var re;const ue=function(Ge,ot,ft){if(Ge)for(const Ot of Ge){const Lt=ot[Ot];if(Lt&&Lt.source===ft&&Lt.type==="fill-extrusion")return!0}else for(const Ot in ot){const Lt=ot[Ot];if(Lt.source===ft&&Lt.type==="fill-extrusion")return!0}return!1}((re=P==null?void 0:P.layers)!==null&&re!==void 0?re:null,l,B.id),ge=U.maxPitchScaleFactor(),Ne=B.tilesIn(T,ge,ue);Ne.sort(st);const qe=[];for(const Ge of Ne)qe.push({wrappedTileID:Ge.tileID.wrapped().key,queryResults:Ge.tile.queryRenderedFeatures(l,p,B._state,Ge.queryGeometry,Ge.cameraQueryGeometry,Ge.scale,P,U,ge,ut(B.transform,Ge.tileID),Y?(ot,ft)=>Y(Ge.tileID,ot,ft):void 0)});return function(Ge,ot){for(const ft in Ge)for(const Ot of Ge[ft])Ce(Ot,ot);return Ge}(function(Ge){const ot={},ft={};for(const Ot of Ge){const Lt=Ot.queryResults,Ft=Ot.wrappedTileID,Xt=ft[Ft]=ft[Ft]||{};for(const nn in Lt){const an=Lt[nn],sn=Xt[nn]=Xt[nn]||{},pn=ot[nn]=ot[nn]||[];for(const hn of an)sn[hn.featureIndex]||(sn[hn.featureIndex]=!0,pn.push(hn))}}return ot}(qe),B)}function st(B,l){const p=B.tileID,T=l.tileID;return p.overscaledZ-T.overscaledZ||p.canonical.y-T.canonical.y||p.wrap-T.wrap||p.canonical.x-T.canonical.x}function Ce(B,l){const p=B.feature,T=l.getFeatureState(p.layer["source-layer"],p.id);p.source=p.layer.source,p.layer["source-layer"]&&(p.sourceLayer=p.layer["source-layer"]),p.state=T}function It(B,l,p){return a._(this,void 0,void 0,function*(){let T=B;if(B.url?T=(yield a.j(l.transformRequest(B.url,"Source"),p)).data:yield w.frameAsync(p),!T)return null;const P=a.O(a.e(T,B),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in T&&T.vector_layers&&(P.vectorLayerIds=T.vector_layers.map(U=>U.id)),P})}class Ve{constructor(l,p){l&&(p?this.setSouthWest(l).setNorthEast(p):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.Q?new a.Q(l.lng,l.lat):a.Q.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.Q?new a.Q(l.lng,l.lat):a.Q.convert(l),this}extend(l){const p=this._sw,T=this._ne;let P,U;if(l instanceof a.Q)P=l,U=l;else{if(!(l instanceof Ve))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Ve.convert(l)):this.extend(a.Q.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.Q.convert(l)):this;if(P=l._sw,U=l._ne,!P||!U)return this}return p||T?(p.lng=Math.min(P.lng,p.lng),p.lat=Math.min(P.lat,p.lat),T.lng=Math.max(U.lng,T.lng),T.lat=Math.max(U.lat,T.lat)):(this._sw=new a.Q(P.lng,P.lat),this._ne=new a.Q(U.lng,U.lat)),this}getCenter(){return new a.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.Q(this.getWest(),this.getNorth())}getSouthEast(){return new a.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:p,lat:T}=a.Q.convert(l);let P=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=T&&T<=this._ne.lat&&P}static convert(l){return l instanceof Ve?l:l&&new Ve(l)}static fromLngLat(l,p=0){const T=360*p/40075017,P=T/Math.cos(Math.PI/180*l.lat);return new Ve(new a.Q(l.lng-P,l.lat-T),new a.Q(l.lng+P,l.lat+T))}adjustAntiMeridian(){const l=new a.Q(this._sw.lng,this._sw.lat),p=new a.Q(this._ne.lng,this._ne.lat);return new Ve(l,l.lng>p.lng?new a.Q(p.lng+360,p.lat):p)}}class yt{constructor(l,p,T){this.bounds=Ve.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=T||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const p=Math.pow(2,l.z),T=Math.floor(a.U(this.bounds.getWest())*p),P=Math.floor(a.S(this.bounds.getNorth())*p),U=Math.ceil(a.U(this.bounds.getEast())*p),Y=Math.ceil(a.S(this.bounds.getSouth())*p);return l.x>=T&&l.x<U&&l.y>=P&&l.y<Y}}class Ze extends a.E{constructor(l,p,T,P){if(super(),this.id=l,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.O(p,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield It(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(a.e(this,l),l.bounds&&(this.tileBounds=new yt(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new a.k(l))}})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(l){return a._(this,void 0,void 0,function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),T={request:this.map._requestManager.transformRequest(p,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};T.request.collectResourceTiming=this._collectResourceTiming;let P="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise((U,Y)=>{l.reloadPromise={resolve:U,reject:Y}})}else l.actor=this.dispatcher.getActor(),P="LT";l.abortController=new AbortController;try{const U=yield l.actor.sendAsync({type:P,data:T},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,U)}catch(U){if(delete l.abortController,l.aborted)return;if(U&&U.status!==404)throw U;this._afterTileLoadWorkerResponse(l,null)}})}_afterTileLoadWorkerResponse(l,p){if(p&&p.resourceTiming&&(l.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&l.setExpiryData(p),l.loadVectorData(p,this.map.painter),l.reloadPromise){const T=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(T.resolve).catch(T.reject)}}abortTile(l){return a._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))})}unloadTile(l){return a._(this,void 0,void 0,function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class wt extends a.E{constructor(l,p,T,P){super(),this.id=l,this.dispatcher=T,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.O(p,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(l=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const p=yield It(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,p&&(a.e(this,p),p.bounds&&(this.tileBounds=new yt(p.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(p){this._tileJSONRequest=null,this.fire(new a.k(p))}})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return a._(this,void 0,void 0,function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const T=yield N.getImage(this.map._requestManager.transformRequest(p,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(T&&T.data){this.map._refreshExpiredTiles&&T.cacheControl&&T.expires&&l.setExpiryData({cacheControl:T.cacheControl,expires:T.expires});const P=this.map.painter.context,U=P.gl,Y=T.data;l.texture=this.map.painter.getTileTexture(Y.width),l.texture?l.texture.update(Y,{useMipmap:!0}):(l.texture=new X(P,Y,U.RGBA,{useMipmap:!0}),l.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(T){if(delete l.abortController,l.aborted)l.state="unloaded";else if(T)throw l.state="errored",T}})}abortTile(l){return a._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)})}unloadTile(l){return a._(this,void 0,void 0,function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)})}hasTransition(){return!1}}class Ut extends wt{constructor(l,p,T,P){super(l,p,T,P),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(l){return a._(this,void 0,void 0,function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),T=this.map._requestManager.transformRequest(p,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const P=yield N.getImage(T,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(P&&P.data){const U=P.data;this.map._refreshExpiredTiles&&P.cacheControl&&P.expires&&l.setExpiryData({cacheControl:P.cacheControl,expires:P.expires});const Y=a.b(U)&&a.V()?U:yield this.readImageNow(U),re={type:this.type,uid:l.uid,source:this.id,rawImageData:Y,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const ue=yield l.actor.sendAsync({type:"LDT",data:re});l.dem=ue,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(P){if(delete l.abortController,l.aborted)l.state="unloaded";else if(P)throw l.state="errored",P}})}readImageNow(l){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.W()){const p=l.width+2,T=l.height+2;try{return new a.R({width:p,height:T},yield a.X(l,-1,-1,p,T))}catch{}}return w.getImageData(l,1)})}_getNeighboringTiles(l){const p=l.canonical,T=Math.pow(2,p.z),P=(p.x-1+T)%T,U=p.x===0?l.wrap-1:l.wrap,Y=(p.x+1+T)%T,re=p.x+1===T?l.wrap+1:l.wrap,ue={};return ue[new a.Y(l.overscaledZ,U,p.z,P,p.y).key]={backfilled:!1},ue[new a.Y(l.overscaledZ,re,p.z,Y,p.y).key]={backfilled:!1},p.y>0&&(ue[new a.Y(l.overscaledZ,U,p.z,P,p.y-1).key]={backfilled:!1},ue[new a.Y(l.overscaledZ,l.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},ue[new a.Y(l.overscaledZ,re,p.z,Y,p.y-1).key]={backfilled:!1}),p.y+1<T&&(ue[new a.Y(l.overscaledZ,U,p.z,P,p.y+1).key]={backfilled:!1},ue[new a.Y(l.overscaledZ,l.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},ue[new a.Y(l.overscaledZ,re,p.z,Y,p.y+1).key]={backfilled:!1}),ue}unloadTile(l){return a._(this,void 0,void 0,function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))})}}class ht extends a.E{constructor(l,p,T,P){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=T.getActor(),this.setEventedParent(P),this._data=p.data,this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId,p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(p.buffer!==void 0?p.buffer:128),tolerance:this._pixelsToTileUnits(p.tolerance!==void 0?p.tolerance:.375),extent:a.Z,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.Z,radius:this._pixelsToTileUnits(p.clusterRadius||50),log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(l){return l*(a.Z/this.tileSize)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}getData(){return a._(this,void 0,void 0,function*(){const l=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})})}getCoordinatesFromGeometry(l){return l.type==="GeometryCollection"?l.geometries.map(p=>p.coordinates).flat(1/0):l.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){const l=new Ve,p=yield this.getData();let T;switch(p.type){case"FeatureCollection":T=p.features.map(P=>this.getCoordinatesFromGeometry(P.geometry)).flat(1/0);break;case"Feature":T=this.getCoordinatesFromGeometry(p.geometry);break;default:T=this.getCoordinatesFromGeometry(p)}if(T.length==0)return l;for(let P=0;P<T.length-1;P+=2)l.extend([T[P],T[P+1]]);return l})}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,p,T){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:p,offset:T}})}_updateWorkerData(l){return a._(this,void 0,void 0,function*(){const p=a.e({type:this.type},this.workerOptions);l?p.dataDiff=l:typeof this._data=="string"?(p.request=this.map._requestManager.transformRequest(w.resolveURL(this._data),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{const T=yield this.actor.sendAsync({type:"LD",data:p});if(this._pendingLoads--,this._removed||T.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let P=null;T.resourceTiming&&T.resourceTiming[this.id]&&(P=T.resourceTiming[this.id].slice(0));const U={dataType:"source"};this._collectResourceTiming&&P&&P.length>0&&a.e(U,{resourceTiming:P}),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"content"})))}catch(T){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(T))}})}loaded(){return this._pendingLoads===0}loadTile(l){return a._(this,void 0,void 0,function*(){const p=l.actor?"RT":"LT";l.actor=this.actor;const T={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const P=yield this.actor.sendAsync({type:p,data:T},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(P,this.map.painter,p==="RT")})}abortTile(l){return a._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0})}unloadTile(l){return a._(this,void 0,void 0,function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class qt extends a.E{constructor(l,p,T,P){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=T,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=p}load(l){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield N.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,l&&(this.coordinates=l),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new a.k(p))}})}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const p=l.map(a.$.fromLngLat);var T;return this.tileID=function(P){let U=1/0,Y=1/0,re=-1/0,ue=-1/0;for(const Ge of P)U=Math.min(U,Ge.x),Y=Math.min(Y,Ge.y),re=Math.max(re,Ge.x),ue=Math.max(ue,Ge.y);const ge=Math.max(re-U,ue-Y),Ne=Math.max(0,Math.floor(-Math.log(ge)/Math.LN2)),qe=Math.pow(2,Ne);return new a.a1(Ne,Math.floor((U+re)/2*qe),Math.floor((Y+ue)/2*qe))}(p),this.terrainTileRanges=this._getOverlappingTileRanges(p),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=p.map(P=>this.tileID.getTilePoint(P)._round()),this.flippedWindingOrder=((T=this.tileCoords)[1].x-T[0].x)*(T[2].y-T[0].y)-(T[1].y-T[0].y)*(T[2].x-T[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,p=l.gl;this.texture||(this.texture=new X(l,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let T=!1;for(const P in this.tiles){const U=this.tiles[P];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,T=!0)}T&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(l){let p=1/0,T=1/0,P=-1/0,U=-1/0;for(const re of l)p=Math.min(p,re.x),T=Math.min(T,re.y),P=Math.max(P,re.x),U=Math.max(U,re.y);const Y={};for(let re=0;re<=a.a0;re++){const ue=Math.pow(2,re),ge=Math.floor(p*ue),Ne=Math.floor(T*ue),qe=Math.floor(P*ue),Ge=Math.floor(U*ue);Y[re]={minTileX:ge,minTileY:Ne,maxTileX:qe,maxTileY:Ge}}return Y}}class Ye extends qt{constructor(l,p,T,P){super(l,p,T,P),this.roundZoom=!0,this.type="video",this.options=p}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const p of l.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield a.a2(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new a.k(p))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const p=this.video.seekable;l<p.start(0)||l>p.end(0)?this.fire(new a.k(new a.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,p=l.gl;this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new X(l,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let T=!1;for(const P in this.tiles){const U=this.tiles[P];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,T=!0)}T&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Re extends qt{constructor(l,p,T,P){super(l,p,T,P),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(U=>!Array.isArray(U)||U.length!==2||U.some(Y=>typeof Y!="number"))||this.fire(new a.k(new a.a3(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a3(`sources.${l}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.k(new a.a3(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a3(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a3(`sources.${l}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,T=p.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new X(p,this.canvas,T.RGBA,{premultiply:!0});let P=!1;for(const U in this.tiles){const Y=this.tiles[U];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture,P=!0)}P&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Pt={},Dt=B=>{switch(B){case"geojson":return ht;case"image":return qt;case"raster":return wt;case"raster-dem":return Ut;case"vector":return Ze;case"video":return Ye;case"canvas":return Re}return Pt[B]},At="RTLPluginLoaded";class Bt extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ae()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch(p=>{throw this.status="error",p})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return a._(this,arguments,void 0,function*(p,T=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=w.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!T)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(At))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let gn=null;function Zt(){return gn||(gn=new Bt),gn}class cn{constructor(l,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=a.a4(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const p=l+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,p,T){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(P,U){const Y={};if(!U)return Y;for(const re of P){const ue=re.layerIds.map(ge=>U.getLayer(ge)).filter(Boolean);if(ue.length!==0){re.layers=ue,re.stateDependentLayerIds&&(re.stateDependentLayers=re.stateDependentLayerIds.map(ge=>ue.filter(Ne=>Ne.id===ge)[0]));for(const ge of ue)Y[ge.id]=re}}return Y}(l.buckets,p==null?void 0:p.style),this.hasSymbolBuckets=!1;for(const P in this.buckets){const U=this.buckets[P];if(U instanceof a.a6){if(this.hasSymbolBuckets=!0,!T)break;U.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const P in this.buckets){const U=this.buckets[P];if(U instanceof a.a6&&U.hasRTLText){this.hasRTLText=!0,Zt().lazyLoad();break}}this.queryPadding=0;for(const P in this.buckets){const U=this.buckets[P];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(P).queryRadius(U))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const T in this.buckets){const P=this.buckets[T];P.uploadPending()&&P.upload(l)}const p=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new X(l,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new X(l,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,p,T,P,U,Y,re,ue,ge,Ne,qe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:P,cameraQueryGeometry:U,scale:Y,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:ue,params:re,queryPadding:this.queryPadding*ge,getElevation:qe},l,p,T):{}}querySourceFeatures(l,p){const T=this.latestFeatureIndex;if(!T||!T.rawTileData)return;const P=T.loadVTLayers(),U=p&&p.sourceLayer?p.sourceLayer:"",Y=P._geojsonTileLayer||P[U];if(!Y)return;const re=a.a7(p&&p.filter),{z:ue,x:ge,y:Ne}=this.tileID.canonical,qe={z:ue,x:ge,y:Ne};for(let Ge=0;Ge<Y.length;Ge++){const ot=Y.feature(Ge);if(re.needGeometry){const Lt=a.a8(ot,!0);if(!re.filter(new a.C(this.tileID.overscaledZ),Lt,this.tileID.canonical))continue}else if(!re.filter(new a.C(this.tileID.overscaledZ),ot))continue;const ft=T.getId(ot,U),Ot=new a.a9(ot,ue,ge,Ne,ft);Ot.tile=qe,l.push(Ot)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const p=this.expirationTime;if(l.cacheControl){const T=a.aa(l.cacheControl);T["max-age"]&&(this.expirationTime=Date.now()+1e3*T["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const T=Date.now();let P=!1;if(this.expirationTime>T)P=!1;else if(p)if(this.expirationTime<p)P=!0;else{const U=this.expirationTime-p;U?this.expirationTime=T+Math.max(U,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const T=this.latestFeatureIndex.loadVTLayers();for(const P in this.buckets){if(!p.style.hasLayer(P))continue;const U=this.buckets[P],Y=U.layers[0].sourceLayer||"_geojsonTileLayer",re=T[Y],ue=l[Y];if(!re||!ue||Object.keys(ue).length===0)continue;U.update(ue,re,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ge=p&&p.style&&p.style.getLayer(P);ge&&(this.queryPadding=Math.max(this.queryPadding,ge.queryRadius(U)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<w.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=w.now()+l}setDependencies(l,p){const T={};for(const P of p)T[P]=!0;this.dependencies[l]=T}hasDependency(l,p){for(const T of l){const P=this.dependencies[T];if(P){for(const U of p)if(P[U])return!0}}return!1}}class $t{constructor(l,p){this.max=l,this.onRemove=p,this.reset()}reset(){for(const l in this.data)for(const p of this.data[l])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(l,p,T){const P=l.wrapped().key;this.data[P]===void 0&&(this.data[P]=[]);const U={value:p,timeout:void 0};if(T!==void 0&&(U.timeout=setTimeout(()=>{this.remove(l,U)},T)),this.data[P].push(U),this.order.push(P),this.order.length>this.max){const Y=this._getAndRemoveByKey(this.order[0]);Y&&this.onRemove(Y)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value}getByKey(l){const p=this.data[l];return p?p[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,p){if(!this.has(l))return this;const T=l.wrapped().key,P=p===void 0?0:this.data[T].indexOf(p),U=this.data[T][P];return this.data[T].splice(P,1),U.timeout&&clearTimeout(U.timeout),this.data[T].length===0&&delete this.data[T],this.onRemove(U.value),this.order.splice(this.order.indexOf(T),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(l){const p=[];for(const T in this.data)for(const P of this.data[T])l(P.value)||p.push(P);for(const T of p)this.remove(T.value.tileID,T)}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,p,T){const P=String(p);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][P]=this.stateChanges[l][P]||{},a.e(this.stateChanges[l][P],T),this.deletedStates[l]===null){this.deletedStates[l]={};for(const U in this.state[l])U!==P&&(this.deletedStates[l][U]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][P]===null){this.deletedStates[l][P]={};for(const U in this.state[l][P])T[U]||(this.deletedStates[l][P][U]=null)}else for(const U in T)this.deletedStates[l]&&this.deletedStates[l][P]&&this.deletedStates[l][P][U]===null&&delete this.deletedStates[l][P][U]}removeFeatureState(l,p,T){if(this.deletedStates[l]===null)return;const P=String(p);if(this.deletedStates[l]=this.deletedStates[l]||{},T&&p!==void 0)this.deletedStates[l][P]!==null&&(this.deletedStates[l][P]=this.deletedStates[l][P]||{},this.deletedStates[l][P][T]=null);else if(p!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][P])for(T in this.deletedStates[l][P]={},this.stateChanges[l][P])this.deletedStates[l][P][T]=null;else this.deletedStates[l][P]=null;else this.deletedStates[l]=null}getState(l,p){const T=String(p),P=a.e({},(this.state[l]||{})[T],(this.stateChanges[l]||{})[T]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const U=this.deletedStates[l][p];if(U===null)return{};for(const Y in U)delete P[Y]}return P}initializeTileState(l,p){l.setFeatureState(this.state,p)}coalesceChanges(l,p){const T={};for(const P in this.stateChanges){this.state[P]=this.state[P]||{};const U={};for(const Y in this.stateChanges[P])this.state[P][Y]||(this.state[P][Y]={}),a.e(this.state[P][Y],this.stateChanges[P][Y]),U[Y]=this.state[P][Y];T[P]=U}for(const P in this.deletedStates){this.state[P]=this.state[P]||{};const U={};if(this.deletedStates[P]===null)for(const Y in this.state[P])U[Y]={},this.state[P][Y]={};else for(const Y in this.deletedStates[P]){if(this.deletedStates[P][Y]===null)this.state[P][Y]={};else for(const re of Object.keys(this.deletedStates[P][Y]))delete this.state[P][Y][re];U[Y]=this.state[P][Y]}T[P]=T[P]||{},a.e(T[P],U)}if(this.stateChanges={},this.deletedStates={},Object.keys(T).length!==0)for(const P in l)l[P].setFeatureState(T,p)}}function qn(B,l,p){const T=l.intersectsFrustum(B);if(!p)return T;const P=l.intersectsPlane(p);return T===0||P===0?0:T===2&&P===2?2:1}function Dn(B,l,p,T,P){let U=B;const Y=Math.atan(l/p),re=Math.hypot(l,p);return U=B+a.ab(T/re/Math.max(.5,Math.cos(a.ad(P/2)))),U+=1*a.ab(Math.cos(Y))/2,U+=a.ae(B-U,-0,0),U}function sr(B,l){const p=(l.roundZoom?Math.round:Math.floor)(B.zoom+a.ab(B.tileSize/l.tileSize));return Math.max(0,p)}function rt(B,l){const p=B.getCameraFrustum(),T=B.getClippingPlane(),P=B.screenPointToMercatorCoordinate(B.getCameraPoint()),U=a.$.fromLngLat(B.center,B.elevation);P.z=U.z+Math.cos(B.pitchInRadians)*B.cameraToCenterDistance/B.worldSize;const Y=B.getCoveringTilesDetailsProvider(),re=Y.allowVariableZoom(B,l),ue=sr(B,l),ge=l.minzoom||0,Ne=l.maxzoom!==void 0?l.maxzoom:B.maxZoom,qe=Math.min(Math.max(0,ue),Ne),Ge=Math.pow(2,qe),ot=[Ge*P.x,Ge*P.y,0],ft=[Ge*U.x,Ge*U.y,0],Ot=Math.hypot(U.x-P.x,U.y-P.y),Lt=Math.abs(U.z-P.z),Ft=Math.hypot(Ot,Lt),Xt=sn=>({zoom:0,x:0,y:0,wrap:sn,fullyVisible:!1}),nn=[],an=[];if(B.renderWorldCopies&&Y.allowWorldCopies())for(let sn=1;sn<=3;sn++)nn.push(Xt(-sn)),nn.push(Xt(sn));for(nn.push(Xt(0));nn.length>0;){const sn=nn.pop(),pn=sn.x,hn=sn.y;let Un=sn.fullyVisible;const On={x:pn,y:hn,z:sn.zoom},nr=Y.getTileAABB(On,sn.wrap,B.elevation,l);if(!Un){const Br=qn(p,nr,T);if(Br===0)continue;Un=Br===2}const ir=Y.distanceToTile2d(P.x,P.y,On,nr);let tr=ue;re&&(tr=(l.calculateTileZoom||Dn)(B.zoom+a.ab(B.tileSize/l.tileSize),ir,Lt,Ft,B.fov)),tr=(l.roundZoom?Math.round:Math.floor)(tr),tr=Math.max(0,tr);const Hr=Math.min(tr,Ne);if(sn.wrap=Y.getWrap(U,On,sn.wrap),sn.zoom>=Hr){if(sn.zoom<ge)continue;const Br=qe-sn.zoom,pr=ot[0]-.5-(pn<<Br),di=ot[1]-.5-(hn<<Br),Gi=l.reparseOverscaled?Math.max(sn.zoom,tr):sn.zoom;an.push({tileID:new a.Y(sn.zoom===Ne?Gi:sn.zoom,sn.wrap,sn.zoom,pn,hn),distanceSq:a.ac([ft[0]-.5-pn,ft[1]-.5-hn]),tileDistanceToCamera:Math.sqrt(pr*pr+di*di)})}else for(let Br=0;Br<4;Br++)nn.push({zoom:sn.zoom+1,x:(pn<<1)+Br%2,y:(hn<<1)+(Br>>1),wrap:sn.wrap,fullyVisible:Un})}return an.sort((sn,pn)=>sn.distanceSq-pn.distanceSq).map(sn=>sn.tileID)}class ze extends a.E{constructor(l,p,T){super(),this.id=l,this.dispatcher=T,this.on("data",P=>this._dataHandler(P)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((P,U,Y,re)=>{const ue=new(Dt(U.type))(P,U,Y,re);if(ue.id!==P)throw new Error(`Expected Source id to be ${P} instead of ${ue.id}`);return ue})(l,p,T,this),this._tiles={},this._cache=new $t(0,P=>this._unloadTile(P)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Et,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const p=this._tiles[l];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,p,T){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,p,T)}catch(P){l.state="errored",P.status!==404?this._source.fire(new a.k(P,{tile:l})):this.update(this.transform,this.terrain)}})}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new a.l("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const T=this._tiles[p];T.upload(l),T.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(Xe).map(l=>l.key)}getRenderableIds(l){const p=[];for(const T in this._tiles)this._isIdRenderable(T,l)&&p.push(this._tiles[T]);return l?p.sort((T,P)=>{const U=T.tileID,Y=P.tileID,re=new a.P(U.canonical.x,U.canonical.y)._rotate(-this.transform.bearingInRadians),ue=new a.P(Y.canonical.x,Y.canonical.y)._rotate(-this.transform.bearingInRadians);return U.overscaledZ-Y.overscaledZ||ue.y-re.y||ue.x-re.x}).map(T=>T.tileID.key):p.map(T=>T.tileID).sort(Xe).map(T=>T.key)}hasRenderableParent(l){const p=this.findLoadedParent(l,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(l,p){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(p||!this._tiles[l].holdingForFade())}reload(l){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const p in this._tiles)(l||this._tiles[p].state!=="errored")&&this._reloadTile(p,"reloading")}}_reloadTile(l,p){return a._(this,void 0,void 0,function*(){const T=this._tiles[l];T&&(T.state!=="loading"&&(T.state=p),yield this._loadTile(T,l,p))})}_tileLoaded(l,p,T){l.timeAdded=w.now(),T==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(p,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const p=this.getRenderableIds();for(let P=0;P<p.length;P++){const U=p[P];if(l.neighboringTiles&&l.neighboringTiles[U]){const Y=this.getTileByID(U);T(l,Y),T(Y,l)}}function T(P,U){P.needsHillshadePrepare=!0,P.needsTerrainPrepare=!0;let Y=U.tileID.canonical.x-P.tileID.canonical.x;const re=U.tileID.canonical.y-P.tileID.canonical.y,ue=Math.pow(2,P.tileID.canonical.z),ge=U.tileID.key;Y===0&&re===0||Math.abs(re)>1||(Math.abs(Y)>1&&(Math.abs(Y+ue)===1?Y+=ue:Math.abs(Y-ue)===1&&(Y-=ue)),U.dem&&P.dem&&(P.dem.backfillBorder(U.dem,Y,re),P.neighboringTiles&&P.neighboringTiles[ge]&&(P.neighboringTiles[ge].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,p,T,P){for(const U in this._tiles){let Y=this._tiles[U];if(P[U]||!Y.hasData()||Y.tileID.overscaledZ<=p||Y.tileID.overscaledZ>T)continue;let re=Y.tileID;for(;Y&&Y.tileID.overscaledZ>p+1;){const ge=Y.tileID.scaledTo(Y.tileID.overscaledZ-1);Y=this._tiles[ge.key],Y&&Y.hasData()&&(re=ge)}let ue=re;for(;ue.overscaledZ>p;)if(ue=ue.scaledTo(ue.overscaledZ-1),l[ue.key]||l[ue.canonical.key]){P[re.key]=re;break}}}findLoadedParent(l,p){if(l.key in this._loadedParentTiles){const T=this._loadedParentTiles[l.key];return T&&T.tileID.overscaledZ>=p?T:null}for(let T=l.overscaledZ-1;T>=p;T--){const P=l.scaledTo(T),U=this._getLoadedTile(P);if(U)return U}}findLoadedSibling(l){return this._getLoadedTile(l)}_getLoadedTile(l){const p=this._tiles[l.key];return p&&p.hasData()?p:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const p=Math.ceil(l.width/this._source.tileSize)+1,T=Math.ceil(l.height/this._source.tileSize)+1,P=Math.floor(p*T*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),U=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,P):P;this._cache.setMaxSize(U)}handleWrapJump(l){const p=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,p){const T={};for(const P in this._tiles){const U=this._tiles[P];U.tileID=U.tileID.unwrapTo(U.tileID.wrap+p),T[U.tileID.key]=U}this._tiles=T;for(const P in this._timers)clearTimeout(this._timers[P]),delete this._timers[P];for(const P in this._tiles)this._setTileReloadTimer(P,this._tiles[P])}}_updateCoveredAndRetainedTiles(l,p,T,P,U,Y){const re={},ue={},ge=Object.keys(l),Ne=w.now();for(const qe of ge){const Ge=l[qe],ot=this._tiles[qe];if(!ot||ot.fadeEndTime!==0&&ot.fadeEndTime<=Ne)continue;const ft=this.findLoadedParent(Ge,p),Ot=this.findLoadedSibling(Ge),Lt=ft||Ot||null;Lt&&(this._addTile(Lt.tileID),re[Lt.tileID.key]=Lt.tileID),ue[qe]=Ge}this._retainLoadedChildren(ue,P,T,l);for(const qe in re)l[qe]||(this._coveredTiles[qe]=!0,l[qe]=re[qe]);if(Y){const qe={},Ge={};for(const ot of U)this._tiles[ot.key].hasData()?qe[ot.key]=ot:Ge[ot.key]=ot;for(const ot in Ge){const ft=Ge[ot].children(this._source.maxzoom);this._tiles[ft[0].key]&&this._tiles[ft[1].key]&&this._tiles[ft[2].key]&&this._tiles[ft[3].key]&&(qe[ft[0].key]=l[ft[0].key]=ft[0],qe[ft[1].key]=l[ft[1].key]=ft[1],qe[ft[2].key]=l[ft[2].key]=ft[2],qe[ft[3].key]=l[ft[3].key]=ft[3],delete Ge[ot])}for(const ot in Ge){const ft=Ge[ot],Ot=this.findLoadedParent(ft,this._source.minzoom),Lt=this.findLoadedSibling(ft),Ft=Ot||Lt||null;if(Ft){qe[Ft.tileID.key]=l[Ft.tileID.key]=Ft.tileID;for(const Xt in qe)qe[Xt].isChildOf(Ft.tileID)&&delete qe[Xt]}}for(const ot in this._tiles)qe[ot]||(this._coveredTiles[ot]=!0)}}update(l,p){if(!this._sourceLoaded||this._paused)return;let T;this.transform=l,this.terrain=p,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?T=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ne=>new a.Y(Ne.canonical.z,Ne.wrap,Ne.canonical.z,Ne.canonical.x,Ne.canonical.y)):(T=rt(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(T=T.filter(Ne=>this._source.hasTile(Ne)))):T=[];const P=sr(l,this._source),U=Math.max(P-ze.maxOverzooming,this._source.minzoom),Y=Math.max(P+ze.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Ne={};for(const qe of T)if(qe.canonical.z>this._source.minzoom){const Ge=qe.scaledTo(qe.canonical.z-1);Ne[Ge.key]=Ge;const ot=qe.scaledTo(Math.max(this._source.minzoom,Math.min(qe.canonical.z,5)));Ne[ot.key]=ot}T=T.concat(Object.values(Ne))}const re=T.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,re&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const ue=this._updateRetainedTiles(T,P);Fe(this._source.type)&&this._updateCoveredAndRetainedTiles(ue,U,Y,P,T,p);for(const Ne in ue)this._tiles[Ne].clearFadeHold();const ge=a.af(this._tiles,ue);for(const Ne of ge){const qe=this._tiles[Ne];qe.hasSymbolBuckets&&!qe.holdingForFade()?qe.setHoldDuration(this.map._fadeDuration):qe.hasSymbolBuckets&&!qe.symbolFadeFinished()||this._removeTile(Ne)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,p){var T;const P={},U={},Y=Math.max(p-ze.maxOverzooming,this._source.minzoom),re=Math.max(p+ze.maxUnderzooming,this._source.minzoom),ue={};for(const ge of l){const Ne=this._addTile(ge);P[ge.key]=ge,Ne.hasData()||p<this._source.maxzoom&&(ue[ge.key]=ge)}this._retainLoadedChildren(ue,p,re,P);for(const ge of l){let Ne=this._tiles[ge.key];if(Ne.hasData())continue;if(p+1>this._source.maxzoom){const Ge=ge.children(this._source.maxzoom)[0],ot=this.getTile(Ge);if(ot&&ot.hasData()){P[Ge.key]=Ge;continue}}else{const Ge=ge.children(this._source.maxzoom);if(P[Ge[0].key]&&P[Ge[1].key]&&P[Ge[2].key]&&P[Ge[3].key])continue}let qe=Ne.wasRequested();for(let Ge=ge.overscaledZ-1;Ge>=Y;--Ge){const ot=ge.scaledTo(Ge);if(U[ot.key])break;if(U[ot.key]=!0,Ne=this.getTile(ot),!Ne&&qe&&(Ne=this._addTile(ot)),Ne){const ft=Ne.hasData();if((ft||!(!((T=this.map)===null||T===void 0)&&T.cancelPendingTileRequestsWhileZooming)||qe)&&(P[ot.key]=ot),qe=Ne.wasRequested(),ft)break}}}return P}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const p=[];let T,P=this._tiles[l].tileID;for(;P.overscaledZ>0;){if(P.key in this._loadedParentTiles){T=this._loadedParentTiles[P.key];break}p.push(P.key);const U=P.scaledTo(P.overscaledZ-1);if(T=this._getLoadedTile(U),T)break;P=U}for(const U of p)this._loadedParentTiles[U]=T}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const l in this._tiles){const p=this._tiles[l].tileID,T=this._getLoadedTile(p);this._loadedSiblingTiles[p.key]=T}}_addTile(l){let p=this._tiles[l.key];if(p)return p;p=this._cache.getAndRemove(l),p&&(this._setTileReloadTimer(l.key,p),p.tileID=l,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,p)));const T=p;return p||(p=new cn(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(p,l.key,p.state)),p.uses++,this._tiles[l.key]=p,T||this._source.fire(new a.l("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(l,p){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const T=p.getExpiryTimeout();T&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},T))}_removeTile(l){const p=this._tiles[l];p&&(p.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(l){const p=l.sourceDataType;l.dataType==="source"&&p==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&p==="content"&&(this.reload(l.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,p,T){const P=[],U=this.transform;if(!U)return P;const Y=T?U.getCameraQueryGeometry(l):l,re=l.map(ft=>U.screenPointToMercatorCoordinate(ft,this.terrain)),ue=Y.map(ft=>U.screenPointToMercatorCoordinate(ft,this.terrain)),ge=this.getIds();let Ne=1/0,qe=1/0,Ge=-1/0,ot=-1/0;for(const ft of ue)Ne=Math.min(Ne,ft.x),qe=Math.min(qe,ft.y),Ge=Math.max(Ge,ft.x),ot=Math.max(ot,ft.y);for(let ft=0;ft<ge.length;ft++){const Ot=this._tiles[ge[ft]];if(Ot.holdingForFade())continue;const Lt=Ot.tileID,Ft=Math.pow(2,U.zoom-Ot.tileID.overscaledZ),Xt=p*Ot.queryPadding*a.Z/Ot.tileSize/Ft,nn=[Lt.getTilePoint(new a.$(Ne,qe)),Lt.getTilePoint(new a.$(Ge,ot))];if(nn[0].x-Xt<a.Z&&nn[0].y-Xt<a.Z&&nn[1].x+Xt>=0&&nn[1].y+Xt>=0){const an=re.map(pn=>Lt.getTilePoint(pn)),sn=ue.map(pn=>Lt.getTilePoint(pn));P.push({tile:Ot,tileID:Lt,queryGeometry:an,cameraQueryGeometry:sn,scale:Ft})}}return P}getVisibleCoordinates(l){const p=this.getRenderableIds(l).map(T=>this._tiles[T].tileID);return this.transform&&this.transform.populateCache(p),p}hasTransition(){if(this._source.hasTransition())return!0;if(Fe(this._source.type)){const l=w.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=l)return!0}return!1}setFeatureState(l,p,T){this._state.updateState(l=l||"_geojsonTileLayer",p,T)}removeFeatureState(l,p,T){this._state.removeFeatureState(l=l||"_geojsonTileLayer",p,T)}getFeatureState(l,p){return this._state.getState(l=l||"_geojsonTileLayer",p)}setDependencies(l,p,T){const P=this._tiles[l];P&&P.setDependencies(p,T)}reloadTilesForDependencies(l,p){for(const T in this._tiles)this._tiles[T].hasDependency(l,p)&&this._reloadTile(T,"reloading");this._cache.filter(T=>!T.hasDependency(l,p))}}function Xe(B,l){const p=Math.abs(2*B.wrap)-+(B.wrap<0),T=Math.abs(2*l.wrap)-+(l.wrap<0);return B.overscaledZ-l.overscaledZ||T-p||l.canonical.y-B.canonical.y||l.canonical.x-B.canonical.x}function Fe(B){return B==="raster"||B==="image"||B==="video"}ze.maxOverzooming=10,ze.maxUnderzooming=3;class He{constructor(l,p){this.reset(l,p)}reset(l,p){this.points=l||[],this._distances=[0];for(let T=1;T<this.points.length;T++)this._distances[T]=this._distances[T-1]+this.points[T].dist(this.points[T-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.ae(l,0,1);let p=1,T=this._distances[p];const P=l*this.paddedLength+this.padding;for(;T<P&&p<this._distances.length;)T=this._distances[++p];const U=p-1,Y=this._distances[U],re=T-Y,ue=re>0?(P-Y)/re:0;return this.points[U].mult(1-ue).add(this.points[p].mult(ue))}}function mt(B,l){let p=!0;return B==="always"||B!=="never"&&l!=="never"||(p=!1),p}class it{constructor(l,p,T){const P=this.boxCells=[],U=this.circleCells=[];this.xCellCount=Math.ceil(l/T),this.yCellCount=Math.ceil(p/T);for(let Y=0;Y<this.xCellCount*this.yCellCount;Y++)P.push([]),U.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,p,T,P,U){this._forEachCell(p,T,P,U,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(T),this.bboxes.push(P),this.bboxes.push(U)}insertCircle(l,p,T,P){this._forEachCell(p-P,T-P,p+P,T+P,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(T),this.circles.push(P)}_insertBoxCell(l,p,T,P,U,Y){this.boxCells[U].push(Y)}_insertCircleCell(l,p,T,P,U,Y){this.circleCells[U].push(Y)}_query(l,p,T,P,U,Y,re){if(T<0||l>this.width||P<0||p>this.height)return[];const ue=[];if(l<=0&&p<=0&&this.width<=T&&this.height<=P){if(U)return[{key:null,x1:l,y1:p,x2:T,y2:P}];for(let ge=0;ge<this.boxKeys.length;ge++)ue.push({key:this.boxKeys[ge],x1:this.bboxes[4*ge],y1:this.bboxes[4*ge+1],x2:this.bboxes[4*ge+2],y2:this.bboxes[4*ge+3]});for(let ge=0;ge<this.circleKeys.length;ge++){const Ne=this.circles[3*ge],qe=this.circles[3*ge+1],Ge=this.circles[3*ge+2];ue.push({key:this.circleKeys[ge],x1:Ne-Ge,y1:qe-Ge,x2:Ne+Ge,y2:qe+Ge})}}else this._forEachCell(l,p,T,P,this._queryCell,ue,{hitTest:U,overlapMode:Y,seenUids:{box:{},circle:{}}},re);return ue}query(l,p,T,P){return this._query(l,p,T,P,!1,null)}hitTest(l,p,T,P,U,Y){return this._query(l,p,T,P,!0,U,Y).length>0}hitTestCircle(l,p,T,P,U){const Y=l-T,re=l+T,ue=p-T,ge=p+T;if(re<0||Y>this.width||ge<0||ue>this.height)return!1;const Ne=[];return this._forEachCell(Y,ue,re,ge,this._queryCellCircle,Ne,{hitTest:!0,overlapMode:P,circle:{x:l,y:p,radius:T},seenUids:{box:{},circle:{}}},U),Ne.length>0}_queryCell(l,p,T,P,U,Y,re,ue){const{seenUids:ge,hitTest:Ne,overlapMode:qe}=re,Ge=this.boxCells[U];if(Ge!==null){const ft=this.bboxes;for(const Ot of Ge)if(!ge.box[Ot]){ge.box[Ot]=!0;const Lt=4*Ot,Ft=this.boxKeys[Ot];if(l<=ft[Lt+2]&&p<=ft[Lt+3]&&T>=ft[Lt+0]&&P>=ft[Lt+1]&&(!ue||ue(Ft))&&(!Ne||!mt(qe,Ft.overlapMode))&&(Y.push({key:Ft,x1:ft[Lt],y1:ft[Lt+1],x2:ft[Lt+2],y2:ft[Lt+3]}),Ne))return!0}}const ot=this.circleCells[U];if(ot!==null){const ft=this.circles;for(const Ot of ot)if(!ge.circle[Ot]){ge.circle[Ot]=!0;const Lt=3*Ot,Ft=this.circleKeys[Ot];if(this._circleAndRectCollide(ft[Lt],ft[Lt+1],ft[Lt+2],l,p,T,P)&&(!ue||ue(Ft))&&(!Ne||!mt(qe,Ft.overlapMode))){const Xt=ft[Lt],nn=ft[Lt+1],an=ft[Lt+2];if(Y.push({key:Ft,x1:Xt-an,y1:nn-an,x2:Xt+an,y2:nn+an}),Ne)return!0}}}return!1}_queryCellCircle(l,p,T,P,U,Y,re,ue){const{circle:ge,seenUids:Ne,overlapMode:qe}=re,Ge=this.boxCells[U];if(Ge!==null){const ft=this.bboxes;for(const Ot of Ge)if(!Ne.box[Ot]){Ne.box[Ot]=!0;const Lt=4*Ot,Ft=this.boxKeys[Ot];if(this._circleAndRectCollide(ge.x,ge.y,ge.radius,ft[Lt+0],ft[Lt+1],ft[Lt+2],ft[Lt+3])&&(!ue||ue(Ft))&&!mt(qe,Ft.overlapMode))return Y.push(!0),!0}}const ot=this.circleCells[U];if(ot!==null){const ft=this.circles;for(const Ot of ot)if(!Ne.circle[Ot]){Ne.circle[Ot]=!0;const Lt=3*Ot,Ft=this.circleKeys[Ot];if(this._circlesCollide(ft[Lt],ft[Lt+1],ft[Lt+2],ge.x,ge.y,ge.radius)&&(!ue||ue(Ft))&&!mt(qe,Ft.overlapMode))return Y.push(!0),!0}}}_forEachCell(l,p,T,P,U,Y,re,ue){const ge=this._convertToXCellCoord(l),Ne=this._convertToYCellCoord(p),qe=this._convertToXCellCoord(T),Ge=this._convertToYCellCoord(P);for(let ot=ge;ot<=qe;ot++)for(let ft=Ne;ft<=Ge;ft++)if(U.call(this,l,p,T,P,this.xCellCount*ft+ot,Y,re,ue))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,p,T,P,U,Y){const re=P-l,ue=U-p,ge=T+Y;return ge*ge>re*re+ue*ue}_circleAndRectCollide(l,p,T,P,U,Y,re){const ue=(Y-P)/2,ge=Math.abs(l-(P+ue));if(ge>ue+T)return!1;const Ne=(re-U)/2,qe=Math.abs(p-(U+Ne));if(qe>Ne+T)return!1;if(ge<=ue||qe<=Ne)return!0;const Ge=ge-ue,ot=qe-Ne;return Ge*Ge+ot*ot<=T*T}}function xt(B,l,p){const T=a.K();if(!B){const{vecSouth:qe,vecEast:Ge}=kt(l),ot=h();ot[0]=Ge[0],ot[1]=Ge[1],ot[2]=qe[0],ot[3]=qe[1],P=ot,(Ne=(Y=(U=ot)[0])*(ge=U[3])-(ue=U[2])*(re=U[1]))&&(P[0]=ge*(Ne=1/Ne),P[1]=-re*Ne,P[2]=-ue*Ne,P[3]=Y*Ne),T[0]=ot[0],T[1]=ot[1],T[4]=ot[2],T[5]=ot[3]}var P,U,Y,re,ue,ge,Ne;return a.M(T,T,[1/p,1/p,1]),T}function Tt(B,l,p,T){if(B){const P=a.K();if(!l){const{vecSouth:U,vecEast:Y}=kt(p);P[0]=Y[0],P[1]=Y[1],P[4]=U[0],P[5]=U[1]}return a.M(P,P,[T,T,1]),P}return p.pixelsToClipSpaceMatrix}function kt(B){const l=Math.cos(B.rollInRadians),p=Math.sin(B.rollInRadians),T=Math.cos(B.pitchInRadians),P=Math.cos(B.bearingInRadians),U=Math.sin(B.bearingInRadians),Y=a.ak();Y[0]=-P*T*p-U*l,Y[1]=-U*T*p+P*l;const re=a.al(Y);re<1e-9?a.am(Y):a.an(Y,Y,1/re);const ue=a.ak();ue[0]=P*T*l-U*p,ue[1]=U*T*l+P*p;const ge=a.al(ue);return ge<1e-9?a.am(ue):a.an(ue,ue,1/ge),{vecEast:ue,vecSouth:Y}}function Jt(B,l,p,T){let P;T?(P=[B,l,T(B,l),1],a.ap(P,P,p)):(P=[B,l,0,1],zn(P,P,p));const U=P[3];return{point:new a.P(P[0]/U,P[1]/U),signedDistanceFromCamera:U,isOccluded:!1}}function rn(B,l){return .5+B/l*.5}function Yt(B,l){return B.x>=-l[0]&&B.x<=l[0]&&B.y>=-l[1]&&B.y<=l[1]}function Qn(B,l,p,T,P,U,Y,re,ue,ge,Ne,qe,Ge){const ot=p?B.textSizeData:B.iconSizeData,ft=a.ag(ot,l.transform.zoom),Ot=[256/l.width*2+1,256/l.height*2+1],Lt=p?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Lt.clear();const Ft=B.lineVertexArray,Xt=p?B.text.placedSymbolArray:B.icon.placedSymbolArray,nn=l.transform.width/l.transform.height;let an=!1;for(let sn=0;sn<Xt.length;sn++){const pn=Xt.get(sn);if(pn.hidden||pn.writingMode===a.ah.vertical&&!an){zr(pn.numGlyphs,Lt);continue}an=!1;const hn=new a.P(pn.anchorX,pn.anchorY),Un={getElevation:Ge,pitchedLabelPlaneMatrix:T,lineVertexArray:Ft,pitchWithMap:U,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:hn,unwrappedTileID:ue,width:ge,height:Ne,translation:qe},On=Fn(pn.anchorX,pn.anchorY,Un);if(!Yt(On.point,Ot)){zr(pn.numGlyphs,Lt);continue}const nr=rn(l.transform.cameraToCenterDistance,On.signedDistanceFromCamera),ir=a.ai(ot,ft,pn),tr=U?ir*l.transform.getPitchedTextCorrection(pn.anchorX,pn.anchorY,ue)/nr:ir*nr,Hr=Pe({projectionContext:Un,pitchedLabelPlaneMatrixInverse:P,symbol:pn,fontSize:tr,flip:!1,keepUpright:Y,glyphOffsetArray:B.glyphOffsetArray,dynamicLayoutVertexArray:Lt,aspectRatio:nn,rotateToLine:re});an=Hr.useVertical,(Hr.notEnoughRoom||an||Hr.needsFlipping&&Pe({projectionContext:Un,pitchedLabelPlaneMatrixInverse:P,symbol:pn,fontSize:tr,flip:!0,keepUpright:Y,glyphOffsetArray:B.glyphOffsetArray,dynamicLayoutVertexArray:Lt,aspectRatio:nn,rotateToLine:re}).notEnoughRoom)&&zr(pn.numGlyphs,Lt)}p?B.text.dynamicLayoutVertexBuffer.updateData(Lt):B.icon.dynamicLayoutVertexBuffer.updateData(Lt)}function An(B,l,p,T,P,U,Y,re){const ue=U.glyphStartIndex+U.numGlyphs,ge=U.lineStartIndex,Ne=U.lineStartIndex+U.lineLength,qe=l.getoffsetX(U.glyphStartIndex),Ge=l.getoffsetX(ue-1),ot=Qr(B*qe,p,T,P,U.segment,ge,Ne,re,Y);if(!ot)return null;const ft=Qr(B*Ge,p,T,P,U.segment,ge,Ne,re,Y);return ft?re.projectionCache.anyProjectionOccluded?null:{first:ot,last:ft}:null}function jt(B,l,p,T){return B===a.ah.horizontal&&Math.abs(p.y-l.y)>Math.abs(p.x-l.x)*T?{useVertical:!0}:(B===a.ah.vertical?l.y<p.y:l.x>p.x)?{needsFlipping:!0}:null}function Pe(B){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:p,symbol:T,fontSize:P,flip:U,keepUpright:Y,glyphOffsetArray:re,dynamicLayoutVertexArray:ue,aspectRatio:ge,rotateToLine:Ne}=B,qe=P/24,Ge=T.lineOffsetX*qe,ot=T.lineOffsetY*qe;let ft;if(T.numGlyphs>1){const Ot=T.glyphStartIndex+T.numGlyphs,Lt=T.lineStartIndex,Ft=T.lineStartIndex+T.lineLength,Xt=An(qe,re,Ge,ot,U,T,Ne,l);if(!Xt)return{notEnoughRoom:!0};const nn=en(Xt.first.point.x,Xt.first.point.y,l,p),an=en(Xt.last.point.x,Xt.last.point.y,l,p);if(Y&&!U){const sn=jt(T.writingMode,nn,an,ge);if(sn)return sn}ft=[Xt.first];for(let sn=T.glyphStartIndex+1;sn<Ot-1;sn++)ft.push(Qr(qe*re.getoffsetX(sn),Ge,ot,U,T.segment,Lt,Ft,l,Ne));ft.push(Xt.last)}else{if(Y&&!U){const Lt=Qt(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,Ft=T.lineStartIndex+T.segment+1,Xt=new a.P(l.lineVertexArray.getx(Ft),l.lineVertexArray.gety(Ft)),nn=Qt(Xt.x,Xt.y,l),an=nn.signedDistanceFromCamera>0?nn.point:je(l.tileAnchorPoint,Xt,Lt,1,l),sn=en(Lt.x,Lt.y,l,p),pn=en(an.x,an.y,l,p),hn=jt(T.writingMode,sn,pn,ge);if(hn)return hn}const Ot=Qr(qe*re.getoffsetX(T.glyphStartIndex),Ge,ot,U,T.segment,T.lineStartIndex,T.lineStartIndex+T.lineLength,l,Ne);if(!Ot||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ft=[Ot]}for(const Ot of ft)a.ao(ue,Ot.point,Ot.angle);return{}}function je(B,l,p,T,P){const U=B.add(B.sub(l)._unit()),Y=Qt(U.x,U.y,P).point,re=p.sub(Y);return p.add(re._mult(T/re.mag()))}function _t(B,l,p){const T=l.projectionCache;if(T.projections[B])return T.projections[B];const P=new a.P(l.lineVertexArray.getx(B),l.lineVertexArray.gety(B)),U=Qt(P.x,P.y,l);if(U.signedDistanceFromCamera>0)return T.projections[B]=U.point,T.anyProjectionOccluded=T.anyProjectionOccluded||U.isOccluded,U.point;const Y=B-p.direction;return je(p.distanceFromAnchor===0?l.tileAnchorPoint:new a.P(l.lineVertexArray.getx(Y),l.lineVertexArray.gety(Y)),P,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,l)}function Qt(B,l,p){const T=B+p.translation[0],P=l+p.translation[1];let U;return p.pitchWithMap?(U=Jt(T,P,p.pitchedLabelPlaneMatrix,p.getElevation),U.isOccluded=!1):(U=p.transform.projectTileCoordinates(T,P,p.unwrappedTileID,p.getElevation),U.point.x=(.5*U.point.x+.5)*p.width,U.point.y=(.5*-U.point.y+.5)*p.height),U}function en(B,l,p,T){if(p.pitchWithMap){const P=[B,l,0,1];return a.ap(P,P,T),p.transform.projectTileCoordinates(P[0]/P[3],P[1]/P[3],p.unwrappedTileID,p.getElevation).point}return{x:B/p.width*2-1,y:l/p.height*2-1}}function Fn(B,l,p){return p.transform.projectTileCoordinates(B,l,p.unwrappedTileID,p.getElevation)}function Wn(B,l,p){return B._unit()._perp()._mult(l*p)}function kr(B,l,p,T,P,U,Y,re,ue){if(re.projectionCache.offsets[B])return re.projectionCache.offsets[B];const ge=p.add(l);if(B+ue.direction<T||B+ue.direction>=P)return re.projectionCache.offsets[B]=ge,ge;const Ne=_t(B+ue.direction,re,ue),qe=Wn(Ne.sub(p),Y,ue.direction),Ge=p.add(qe),ot=Ne.add(qe);return re.projectionCache.offsets[B]=a.aq(U,ge,Ge,ot)||ge,re.projectionCache.offsets[B]}function Qr(B,l,p,T,P,U,Y,re,ue){const ge=T?B-l:B+l;let Ne=ge>0?1:-1,qe=0;T&&(Ne*=-1,qe=Math.PI),Ne<0&&(qe+=Math.PI);let Ge,ot=Ne>0?U+P:U+P+1;re.projectionCache.cachedAnchorPoint?Ge=re.projectionCache.cachedAnchorPoint:(Ge=Qt(re.tileAnchorPoint.x,re.tileAnchorPoint.y,re).point,re.projectionCache.cachedAnchorPoint=Ge);let ft,Ot,Lt=Ge,Ft=Ge,Xt=0,nn=0;const an=Math.abs(ge),sn=[];let pn;for(;Xt+nn<=an;){if(ot+=Ne,ot<U||ot>=Y)return null;Xt+=nn,Ft=Lt,Ot=ft;const On={absOffsetX:an,direction:Ne,distanceFromAnchor:Xt,previousVertex:Ft};if(Lt=_t(ot,re,On),p===0)sn.push(Ft),pn=Lt.sub(Ft);else{let nr;const ir=Lt.sub(Ft);nr=ir.mag()===0?Wn(_t(ot+Ne,re,On).sub(Lt),p,Ne):Wn(ir,p,Ne),Ot||(Ot=Ft.add(nr)),ft=kr(ot,nr,Lt,U,Y,Ot,p,re,On),sn.push(Ot),pn=ft.sub(Ot)}nn=pn.mag()}const hn=pn._mult((an-Xt)/nn)._add(Ot||Ft),Un=qe+Math.atan2(Lt.y-Ft.y,Lt.x-Ft.x);return sn.push(hn),{point:hn,angle:ue?Un:0,path:sn}}const vi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zr(B,l){for(let p=0;p<B;p++){const T=l.length;l.resize(T+4),l.float32.set(vi,3*T)}}function zn(B,l,p){const T=l[0],P=l[1];return B[0]=p[0]*T+p[4]*P+p[12],B[1]=p[1]*T+p[5]*P+p[13],B[3]=p[3]*T+p[7]*P+p[15],B}const En=100;class mr{constructor(l,p=new it(l.width+200,l.height+200,25),T=new it(l.width+200,l.height+200,25)){this.transform=l,this.grid=p,this.ignoredGrid=T,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+En,this.screenBottomBoundary=l.height+En,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,p,T,P,U,Y,re,ue,ge,Ne,qe,Ge){const ot=this.projectAndGetPerspectiveRatio(l.anchorPointX+ue[0],l.anchorPointY+ue[1],U,Ne,Ge),ft=T*ot.perspectiveRatio;let Ot;if(Y||re)Ot=this._projectCollisionBox(l,ft,P,U,Y,re,ue,ot,Ne,qe,Ge);else{const pn=ot.x+(qe?qe.x*ft:0),hn=ot.y+(qe?qe.y*ft:0);Ot={allPointsOccluded:!1,box:[pn+l.x1*ft,hn+l.y1*ft,pn+l.x2*ft,hn+l.y2*ft]}}const[Lt,Ft,Xt,nn]=Ot.box,an=Y?Ot.allPointsOccluded:ot.isOccluded;let sn=an;return sn||(sn=ot.perspectiveRatio<this.perspectiveRatioCutoff),sn||(sn=!this.isInsideGrid(Lt,Ft,Xt,nn)),sn||p!=="always"&&this.grid.hitTest(Lt,Ft,Xt,nn,p,ge)?{box:[Lt,Ft,Xt,nn],placeable:!1,offscreen:!1,occluded:an}:{box:[Lt,Ft,Xt,nn],placeable:!0,offscreen:this.isOffscreen(Lt,Ft,Xt,nn),occluded:an}}placeCollisionCircles(l,p,T,P,U,Y,re,ue,ge,Ne,qe,Ge,ot,ft){const Ot=[],Lt=new a.P(p.anchorX,p.anchorY),Ft=this.getPerspectiveRatio(Lt.x,Lt.y,Y,ft),Xt=(ge?U*this.transform.getPitchedTextCorrection(p.anchorX,p.anchorY,Y)/Ft:U*Ft)/a.av,nn={getElevation:ft,pitchedLabelPlaneMatrix:re,lineVertexArray:T,pitchWithMap:ge,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Lt,unwrappedTileID:Y,width:this.transform.width,height:this.transform.height,translation:ot},an=An(Xt,P,p.lineOffsetX*Xt,p.lineOffsetY*Xt,!1,p,!1,nn);let sn=!1,pn=!1,hn=!0;if(an){const Un=.5*qe*Ft+Ge,On=new a.P(-100,-100),nr=new a.P(this.screenRightBoundary,this.screenBottomBoundary),ir=new He,tr=an.first,Hr=an.last;let Br=[];for(let Gi=tr.path.length-1;Gi>=1;Gi--)Br.push(tr.path[Gi]);for(let Gi=1;Gi<Hr.path.length;Gi++)Br.push(Hr.path[Gi]);const pr=2.5*Un;if(ge){const Gi=this.projectPathToScreenSpace(Br,nn);Br=Gi.some(Ia=>Ia.signedDistanceFromCamera<=0)?[]:Gi.map(Ia=>Ia.point)}let di=[];if(Br.length>0){const Gi=Br[0].clone(),Ia=Br[0].clone();for(let fa=1;fa<Br.length;fa++)Gi.x=Math.min(Gi.x,Br[fa].x),Gi.y=Math.min(Gi.y,Br[fa].y),Ia.x=Math.max(Ia.x,Br[fa].x),Ia.y=Math.max(Ia.y,Br[fa].y);di=Gi.x>=On.x&&Ia.x<=nr.x&&Gi.y>=On.y&&Ia.y<=nr.y?[Br]:Ia.x<On.x||Gi.x>nr.x||Ia.y<On.y||Gi.y>nr.y?[]:a.ar([Br],On.x,On.y,nr.x,nr.y)}for(const Gi of di){ir.reset(Gi,.25*Un);let Ia=0;Ia=ir.length<=.5*Un?1:Math.ceil(ir.paddedLength/pr)+1;for(let fa=0;fa<Ia;fa++){const yo=fa/Math.max(Ia-1,1),To=ir.lerp(yo),so=To.x+En,fo=To.y+En;Ot.push(so,fo,Un,0);const po=so-Un,gs=fo-Un,zs=so+Un,pl=fo+Un;if(hn=hn&&this.isOffscreen(po,gs,zs,pl),pn=pn||this.isInsideGrid(po,gs,zs,pl),l!=="always"&&this.grid.hitTestCircle(so,fo,Un,l,Ne)&&(sn=!0,!ue))return{circles:[],offscreen:!1,collisionDetected:sn}}}}return{circles:!ue&&sn||!pn||Ft<this.perspectiveRatioCutoff?[]:Ot,offscreen:hn,collisionDetected:sn}}projectPathToScreenSpace(l,p){const T=function(P,U){const Y=a.K();return a.aj(Y,U.pitchedLabelPlaneMatrix),P.map(re=>{const ue=Jt(re.x,re.y,Y,U.getElevation),ge=U.transform.projectTileCoordinates(ue.point.x,ue.point.y,U.unwrappedTileID,U.getElevation);return ge.point.x=(.5*ge.point.x+.5)*U.width,ge.point.y=(.5*-ge.point.y+.5)*U.height,ge})}(l,p);return function(P){let U=0,Y=0,re=0,ue=0;for(let ge=0;ge<P.length;ge++)P[ge].isOccluded?(re=ge+1,ue=0):(ue++,ue>Y&&(Y=ue,U=re));return P.slice(U,U+Y)}(T)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let T=1/0,P=1/0,U=-1/0,Y=-1/0;for(const Ne of l){const qe=new a.P(Ne.x+En,Ne.y+En);T=Math.min(T,qe.x),P=Math.min(P,qe.y),U=Math.max(U,qe.x),Y=Math.max(Y,qe.y),p.push(qe)}const re=this.grid.query(T,P,U,Y).concat(this.ignoredGrid.query(T,P,U,Y)),ue={},ge={};for(const Ne of re){const qe=Ne.key;if(ue[qe.bucketInstanceId]===void 0&&(ue[qe.bucketInstanceId]={}),ue[qe.bucketInstanceId][qe.featureIndex])continue;const Ge=[new a.P(Ne.x1,Ne.y1),new a.P(Ne.x2,Ne.y1),new a.P(Ne.x2,Ne.y2),new a.P(Ne.x1,Ne.y2)];a.as(p,Ge)&&(ue[qe.bucketInstanceId][qe.featureIndex]=!0,ge[qe.bucketInstanceId]===void 0&&(ge[qe.bucketInstanceId]=[]),ge[qe.bucketInstanceId].push(qe.featureIndex))}return ge}insertCollisionBox(l,p,T,P,U,Y){(T?this.ignoredGrid:this.grid).insert({bucketInstanceId:P,featureIndex:U,collisionGroupID:Y,overlapMode:p},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,p,T,P,U,Y){const re=T?this.ignoredGrid:this.grid,ue={bucketInstanceId:P,featureIndex:U,collisionGroupID:Y,overlapMode:p};for(let ge=0;ge<l.length;ge+=4)re.insertCircle(ue,l[ge],l[ge+1],l[ge+2])}projectAndGetPerspectiveRatio(l,p,T,P,U){if(U){let Y;P?(Y=[l,p,P(l,p),1],a.ap(Y,Y,U)):(Y=[l,p,0,1],zn(Y,Y,U));const re=Y[3];return{x:(Y[0]/re+1)/2*this.transform.width+En,y:(-Y[1]/re+1)/2*this.transform.height+En,perspectiveRatio:.5+this.transform.cameraToCenterDistance/re*.5,isOccluded:!1,signedDistanceFromCamera:re}}{const Y=this.transform.projectTileCoordinates(l,p,T,P);return{x:(Y.point.x+1)/2*this.transform.width+En,y:(1-Y.point.y)/2*this.transform.height+En,perspectiveRatio:.5+this.transform.cameraToCenterDistance/Y.signedDistanceFromCamera*.5,isOccluded:Y.isOccluded,signedDistanceFromCamera:Y.signedDistanceFromCamera}}}getPerspectiveRatio(l,p,T,P){const U=this.transform.projectTileCoordinates(l,p,T,P);return .5+this.transform.cameraToCenterDistance/U.signedDistanceFromCamera*.5}isOffscreen(l,p,T,P){return T<En||l>=this.screenRightBoundary||P<En||p>this.screenBottomBoundary}isInsideGrid(l,p,T,P){return T>=0&&l<this.gridRightBoundary&&P>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const l=a.at([]);return a.L(l,l,[-100,-100,0]),l}_projectCollisionBox(l,p,T,P,U,Y,re,ue,ge,Ne,qe){let Ge=1,ot=0,ft=0,Ot=1;const Lt=l.anchorPointX+re[0],Ft=l.anchorPointY+re[1];if(Y&&!U){const Br=this.projectAndGetPerspectiveRatio(Lt+1,Ft,P,ge,qe),pr=Br.x-ue.x,di=Math.atan((Br.y-ue.y)/pr)+(pr<0?Math.PI:0),Gi=Math.sin(di),Ia=Math.cos(di);Ge=Ia,ot=Gi,ft=-Gi,Ot=Ia}else if(!Y&&U){const Br=kt(this.transform);Ge=Br.vecEast[0],ot=Br.vecEast[1],ft=Br.vecSouth[0],Ot=Br.vecSouth[1]}let Xt=ue.x,nn=ue.y,an=p;U&&(Xt=Lt,nn=Ft,an=Math.pow(2,-(this.transform.zoom-T.overscaledZ)),an*=this.transform.getPitchedTextCorrection(Lt,Ft,P),Ne||(an*=a.ae(.5+ue.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),Ne&&(Xt+=Ge*Ne.x*an+ft*Ne.y*an,nn+=ot*Ne.x*an+Ot*Ne.y*an);const sn=l.x1*an,pn=l.x2*an,hn=(sn+pn)/2,Un=l.y1*an,On=l.y2*an,nr=(Un+On)/2,ir=[{offsetX:sn,offsetY:Un},{offsetX:hn,offsetY:Un},{offsetX:pn,offsetY:Un},{offsetX:pn,offsetY:nr},{offsetX:pn,offsetY:On},{offsetX:hn,offsetY:On},{offsetX:sn,offsetY:On},{offsetX:sn,offsetY:nr}];let tr=[];for(const{offsetX:Br,offsetY:pr}of ir)tr.push(new a.P(Xt+Ge*Br+ft*pr,nn+ot*Br+Ot*pr));let Hr=!1;if(U){const Br=tr.map(pr=>this.projectAndGetPerspectiveRatio(pr.x,pr.y,P,ge,qe));Hr=Br.some(pr=>!pr.isOccluded),tr=Br.map(pr=>new a.P(pr.x,pr.y))}else Hr=!0;return{box:a.au(tr),allPointsOccluded:!Hr}}}class yi{constructor(l,p,T,P){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):P&&T?1:0,this.placed=T}isHidden(){return this.opacity===0&&!this.placed}}class _i{constructor(l,p,T,P,U){this.text=new yi(l?l.text:null,p,T,U),this.icon=new yi(l?l.icon:null,p,P,U)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gi{constructor(l,p,T){this.text=l,this.icon=p,this.skipFade=T}}class lt{constructor(l,p,T,P,U){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=T,this.bucketIndex=P,this.tileID=U}}class yn{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:T=>T.collisionGroupID===p}}return this.collisionGroups[l]}}function Ln(B,l,p,T,P){const{horizontalAlign:U,verticalAlign:Y}=a.aB(B);return new a.P(-(U-.5)*l+T[0]*P,-(Y-.5)*p+T[1]*P)}class Vn{constructor(l,p,T,P,U){this.transform=l.clone(),this.terrain=p,this.collisionIndex=new mr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=T,this.retainedQueryData={},this.collisionGroups=new yn(P),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=U,U&&(U.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const p=this.terrain;return p?(T,P)=>p.getElevation(l,T,P):null}getBucketParts(l,p,T,P){const U=T.getBucket(p),Y=T.latestFeatureIndex;if(!U||!Y||p.id!==U.layerIds[0])return;const re=T.collisionBoxArray,ue=U.layers[0].layout,ge=U.layers[0].paint,Ne=Math.pow(2,this.transform.zoom-T.tileID.overscaledZ),qe=T.tileSize/a.Z,Ge=T.tileID.toUnwrapped(),ot=ue.get("text-rotation-alignment")==="map",ft=a.aw(T,1,this.transform.zoom),Ot=a.ax(this.collisionIndex.transform,T,ge.get("text-translate"),ge.get("text-translate-anchor")),Lt=a.ax(this.collisionIndex.transform,T,ge.get("icon-translate"),ge.get("icon-translate-anchor")),Ft=xt(ot,this.transform,ft);this.retainedQueryData[U.bucketInstanceId]=new lt(U.bucketInstanceId,Y,U.sourceLayerIndex,U.index,T.tileID);const Xt={bucket:U,layout:ue,translationText:Ot,translationIcon:Lt,unwrappedTileID:Ge,pitchedLabelPlaneMatrix:Ft,scale:Ne,textPixelRatio:qe,holdingForFade:T.holdingForFade(),collisionBoxArray:re,partiallyEvaluatedTextSize:a.ag(U.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(U.sourceID)};if(P)for(const nn of U.sortKeyRanges){const{sortKey:an,symbolInstanceStart:sn,symbolInstanceEnd:pn}=nn;l.push({sortKey:an,symbolInstanceStart:sn,symbolInstanceEnd:pn,parameters:Xt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:U.symbolInstances.length,parameters:Xt})}attemptAnchorPlacement(l,p,T,P,U,Y,re,ue,ge,Ne,qe,Ge,ot,ft,Ot,Lt,Ft,Xt,nn,an){const sn=a.ay[l.textAnchor],pn=[l.textOffset0,l.textOffset1],hn=Ln(sn,T,P,pn,U),Un=this.collisionIndex.placeCollisionBox(p,Ge,ue,ge,Ne,re,Y,Lt,qe.predicate,nn,hn,an);if((!Xt||this.collisionIndex.placeCollisionBox(Xt,Ge,ue,ge,Ne,re,Y,Ft,qe.predicate,nn,hn,an).placeable)&&Un.placeable){let On;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ot.crossTileID]&&this.prevPlacement.placements[ot.crossTileID]&&this.prevPlacement.placements[ot.crossTileID].text&&(On=this.prevPlacement.variableOffsets[ot.crossTileID].anchor),ot.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ot.crossTileID]={textOffset:pn,width:T,height:P,anchor:sn,textBoxScale:U,prevAnchor:On},this.markUsedJustification(ft,sn,ot,Ot),ft.allowVerticalPlacement&&(this.markUsedOrientation(ft,Ot,ot),this.placedOrientations[ot.crossTileID]=Ot),{shift:hn,placedGlyphBoxes:Un}}}placeLayerBucketPart(l,p,T){const{bucket:P,layout:U,translationText:Y,translationIcon:re,unwrappedTileID:ue,pitchedLabelPlaneMatrix:ge,textPixelRatio:Ne,holdingForFade:qe,collisionBoxArray:Ge,partiallyEvaluatedTextSize:ot,collisionGroup:ft}=l.parameters,Ot=U.get("text-optional"),Lt=U.get("icon-optional"),Ft=a.az(U,"text-overlap","text-allow-overlap"),Xt=Ft==="always",nn=a.az(U,"icon-overlap","icon-allow-overlap"),an=nn==="always",sn=U.get("text-rotation-alignment")==="map",pn=U.get("text-pitch-alignment")==="map",hn=U.get("icon-text-fit")!=="none",Un=U.get("symbol-z-order")==="viewport-y",On=Xt&&(an||!P.hasIconData()||Lt),nr=an&&(Xt||!P.hasTextData()||Ot);!P.collisionArrays&&Ge&&P.deserializeCollisionBoxes(Ge);const ir=this.retainedQueryData[P.bucketInstanceId].tileID,tr=this._getTerrainElevationFunc(ir),Hr=this.transform.getFastPathSimpleProjectionMatrix(ir),Br=(pr,di,Gi)=>{var Ia,fa;if(p[pr.crossTileID])return;if(qe)return void(this.placements[pr.crossTileID]=new gi(!1,!1,!1));let yo=!1,To=!1,so=!0,fo=null,po={box:null,placeable:!1,offscreen:null,occluded:!1},gs={placeable:!1},zs=null,pl=null,el=null,hc=0,Pu=0,Kl=0;di.textFeatureIndex?hc=di.textFeatureIndex:pr.useRuntimeCollisionCircles&&(hc=pr.featureIndex),di.verticalTextFeatureIndex&&(Pu=di.verticalTextFeatureIndex);const Bl=di.textBox;if(Bl){const cu=Rs=>{let Zo=a.ah.horizontal;if(P.allowVerticalPlacement&&!Rs&&this.prevPlacement){const tl=this.prevPlacement.placedOrientations[pr.crossTileID];tl&&(this.placedOrientations[pr.crossTileID]=tl,Zo=tl,this.markUsedOrientation(P,Zo,pr))}return Zo},th=(Rs,Zo)=>{if(P.allowVerticalPlacement&&pr.numVerticalGlyphVertices>0&&di.verticalTextBox){for(const tl of P.writingModes)if(tl===a.ah.vertical?(po=Zo(),gs=po):po=Rs(),po&&po.placeable)break}else po=Rs()},Rh=pr.textAnchorOffsetStartIndex,Ph=pr.textAnchorOffsetEndIndex;if(Ph===Rh){const Rs=(Zo,tl)=>{const Co=this.collisionIndex.placeCollisionBox(Zo,Ft,Ne,ir,ue,pn,sn,Y,ft.predicate,tr,void 0,Hr);return Co&&Co.placeable&&(this.markUsedOrientation(P,tl,pr),this.placedOrientations[pr.crossTileID]=tl),Co};th(()=>Rs(Bl,a.ah.horizontal),()=>{const Zo=di.verticalTextBox;return P.allowVerticalPlacement&&pr.numVerticalGlyphVertices>0&&Zo?Rs(Zo,a.ah.vertical):{box:null,offscreen:null}}),cu(po&&po.placeable)}else{let Rs=a.ay[(fa=(Ia=this.prevPlacement)===null||Ia===void 0?void 0:Ia.variableOffsets[pr.crossTileID])===null||fa===void 0?void 0:fa.anchor];const Zo=(Co,Rf,qv)=>{const Kh=Co.x2-Co.x1,Fy=Co.y2-Co.y1,$v=pr.textBoxScale,Wv=hn&&nn==="never"?Rf:null;let Ic=null,nh=Ft==="never"?1:2,Ih="never";Rs&&nh++;for(let Ud=0;Ud<nh;Ud++){for(let Np=Rh;Np<Ph;Np++){const wg=P.textAnchorOffsets.get(Np);if(Rs&&wg.textAnchor!==Rs)continue;const Sg=this.attemptAnchorPlacement(wg,Co,Kh,Fy,$v,sn,pn,Ne,ir,ue,ft,Ih,pr,P,qv,Y,re,Wv,tr);if(Sg&&(Ic=Sg.placedGlyphBoxes,Ic&&Ic.placeable))return yo=!0,fo=Sg.shift,Ic}Rs?Rs=null:Ih=Ft}return T&&!Ic&&(Ic={box:this.collisionIndex.placeCollisionBox(Bl,"always",Ne,ir,ue,pn,sn,Y,ft.predicate,tr,void 0,Hr).box,offscreen:!1,placeable:!1,occluded:!1}),Ic};th(()=>Zo(Bl,di.iconBox,a.ah.horizontal),()=>{const Co=di.verticalTextBox;return P.allowVerticalPlacement&&(!po||!po.placeable)&&pr.numVerticalGlyphVertices>0&&Co?Zo(Co,di.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}}),po&&(yo=po.placeable,so=po.offscreen);const tl=cu(po&&po.placeable);if(!yo&&this.prevPlacement){const Co=this.prevPlacement.variableOffsets[pr.crossTileID];Co&&(this.variableOffsets[pr.crossTileID]=Co,this.markUsedJustification(P,Co.anchor,pr,tl))}}}if(zs=po,yo=zs&&zs.placeable,so=zs&&zs.offscreen,pr.useRuntimeCollisionCircles){const cu=P.text.placedSymbolArray.get(pr.centerJustifiedTextSymbolIndex),th=a.ai(P.textSizeData,ot,cu),Rh=U.get("text-padding");pl=this.collisionIndex.placeCollisionCircles(Ft,cu,P.lineVertexArray,P.glyphOffsetArray,th,ue,ge,T,pn,ft.predicate,pr.collisionCircleDiameter,Rh,Y,tr),pl.circles.length&&pl.collisionDetected&&!T&&a.w("Collisions detected, but collision boxes are not shown"),yo=Xt||pl.circles.length>0&&!pl.collisionDetected,so=so&&pl.offscreen}if(di.iconFeatureIndex&&(Kl=di.iconFeatureIndex),di.iconBox){const cu=th=>this.collisionIndex.placeCollisionBox(th,nn,Ne,ir,ue,pn,sn,re,ft.predicate,tr,hn&&fo?fo:void 0,Hr);gs&&gs.placeable&&di.verticalIconBox?(el=cu(di.verticalIconBox),To=el.placeable):(el=cu(di.iconBox),To=el.placeable),so=so&&el.offscreen}const uu=Ot||pr.numHorizontalGlyphVertices===0&&pr.numVerticalGlyphVertices===0,Iu=Lt||pr.numIconVertices===0;uu||Iu?Iu?uu||(To=To&&yo):yo=To&&yo:To=yo=To&&yo;const Zu=To&&el.placeable;if(yo&&zs.placeable&&this.collisionIndex.insertCollisionBox(zs.box,Ft,U.get("text-ignore-placement"),P.bucketInstanceId,gs&&gs.placeable&&Pu?Pu:hc,ft.ID),Zu&&this.collisionIndex.insertCollisionBox(el.box,nn,U.get("icon-ignore-placement"),P.bucketInstanceId,Kl,ft.ID),pl&&yo&&this.collisionIndex.insertCollisionCircles(pl.circles,Ft,U.get("text-ignore-placement"),P.bucketInstanceId,hc,ft.ID),T&&this.storeCollisionData(P.bucketInstanceId,Gi,di,zs,el,pl),pr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(P.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[pr.crossTileID]=new gi((yo||On)&&!(zs!=null&&zs.occluded),(To||nr)&&!(el!=null&&el.occluded),so||P.justReloaded),p[pr.crossTileID]=!0};if(Un){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const pr=P.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let di=pr.length-1;di>=0;--di){const Gi=pr[di];Br(P.symbolInstances.get(Gi),P.collisionArrays[Gi],Gi)}}else for(let pr=l.symbolInstanceStart;pr<l.symbolInstanceEnd;pr++)Br(P.symbolInstances.get(pr),P.collisionArrays[pr],pr);P.justReloaded=!1}storeCollisionData(l,p,T,P,U,Y){if(T.textBox||T.iconBox){let re,ue;this.collisionBoxArrays.has(l)?re=this.collisionBoxArrays.get(l):(re=new Map,this.collisionBoxArrays.set(l,re)),re.has(p)?ue=re.get(p):(ue={text:null,icon:null},re.set(p,ue)),T.textBox&&(ue.text=P.box),T.iconBox&&(ue.icon=U.box)}if(Y){let re=this.collisionCircleArrays[l];re===void 0&&(re=this.collisionCircleArrays[l]=[]);for(let ue=0;ue<Y.circles.length;ue+=4)re.push(Y.circles[ue+0]-En),re.push(Y.circles[ue+1]-En),re.push(Y.circles[ue+2]),re.push(Y.collisionDetected?1:0)}}markUsedJustification(l,p,T,P){let U;U=P===a.ah.vertical?T.verticalPlacedTextSymbolIndex:{left:T.leftJustifiedTextSymbolIndex,center:T.centerJustifiedTextSymbolIndex,right:T.rightJustifiedTextSymbolIndex}[a.aA(p)];const Y=[T.leftJustifiedTextSymbolIndex,T.centerJustifiedTextSymbolIndex,T.rightJustifiedTextSymbolIndex,T.verticalPlacedTextSymbolIndex];for(const re of Y)re>=0&&(l.text.placedSymbolArray.get(re).crossTileID=U>=0&&re!==U?0:T.crossTileID)}markUsedOrientation(l,p,T){const P=p===a.ah.horizontal||p===a.ah.horizontalOnly?p:0,U=p===a.ah.vertical?p:0,Y=[T.leftJustifiedTextSymbolIndex,T.centerJustifiedTextSymbolIndex,T.rightJustifiedTextSymbolIndex];for(const re of Y)l.text.placedSymbolArray.get(re).placedOrientation=P;T.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(T.verticalPlacedTextSymbolIndex).placedOrientation=U)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let T=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const P=p?p.symbolFadeChange(l):1,U=p?p.opacities:{},Y=p?p.variableOffsets:{},re=p?p.placedOrientations:{};for(const ue in this.placements){const ge=this.placements[ue],Ne=U[ue];Ne?(this.opacities[ue]=new _i(Ne,P,ge.text,ge.icon),T=T||ge.text!==Ne.text.placed||ge.icon!==Ne.icon.placed):(this.opacities[ue]=new _i(null,P,ge.text,ge.icon,ge.skipFade),T=T||ge.text||ge.icon)}for(const ue in U){const ge=U[ue];if(!this.opacities[ue]){const Ne=new _i(ge,P,!1,!1);Ne.isHidden()||(this.opacities[ue]=Ne,T=T||ge.text.placed||ge.icon.placed)}}for(const ue in Y)this.variableOffsets[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.variableOffsets[ue]=Y[ue]);for(const ue in re)this.placedOrientations[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.placedOrientations[ue]=re[ue]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");T?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)}updateLayerOpacities(l,p){const T={};for(const P of p){const U=P.getBucket(l);U&&P.latestFeatureIndex&&l.id===U.layerIds[0]&&this.updateBucketOpacities(U,P.tileID,T,P.collisionBoxArray)}}updateBucketOpacities(l,p,T,P){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const U=l.layers[0],Y=U.layout,re=new _i(null,0,!1,!1,!0),ue=Y.get("text-allow-overlap"),ge=Y.get("icon-allow-overlap"),Ne=U._unevaluatedLayout.hasValue("text-variable-anchor")||U._unevaluatedLayout.hasValue("text-variable-anchor-offset"),qe=Y.get("text-rotation-alignment")==="map",Ge=Y.get("text-pitch-alignment")==="map",ot=Y.get("icon-text-fit")!=="none",ft=new _i(null,0,ue&&(ge||!l.hasIconData()||Y.get("icon-optional")),ge&&(ue||!l.hasTextData()||Y.get("text-optional")),!0);!l.collisionArrays&&P&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(P);const Ot=(Ft,Xt,nn)=>{for(let an=0;an<Xt/4;an++)Ft.opacityVertexArray.emplaceBack(nn);Ft.hasVisibleVertices=Ft.hasVisibleVertices||nn!==Yi},Lt=this.collisionBoxArrays.get(l.bucketInstanceId);for(let Ft=0;Ft<l.symbolInstances.length;Ft++){const Xt=l.symbolInstances.get(Ft),{numHorizontalGlyphVertices:nn,numVerticalGlyphVertices:an,crossTileID:sn}=Xt;let pn=this.opacities[sn];T[sn]?pn=re:pn||(pn=ft,this.opacities[sn]=pn),T[sn]=!0;const hn=Xt.numIconVertices>0,Un=this.placedOrientations[Xt.crossTileID],On=Un===a.ah.vertical,nr=Un===a.ah.horizontal||Un===a.ah.horizontalOnly;if(nn>0||an>0){const tr=Ni(pn.text);Ot(l.text,nn,On?Yi:tr),Ot(l.text,an,nr?Yi:tr);const Hr=pn.text.isHidden();[Xt.rightJustifiedTextSymbolIndex,Xt.centerJustifiedTextSymbolIndex,Xt.leftJustifiedTextSymbolIndex].forEach(di=>{di>=0&&(l.text.placedSymbolArray.get(di).hidden=Hr||On?1:0)}),Xt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Xt.verticalPlacedTextSymbolIndex).hidden=Hr||nr?1:0);const Br=this.variableOffsets[Xt.crossTileID];Br&&this.markUsedJustification(l,Br.anchor,Xt,Un);const pr=this.placedOrientations[Xt.crossTileID];pr&&(this.markUsedJustification(l,"left",Xt,pr),this.markUsedOrientation(l,pr,Xt))}if(hn){const tr=Ni(pn.icon),Hr=!(ot&&Xt.verticalPlacedIconSymbolIndex&&On);Xt.placedIconSymbolIndex>=0&&(Ot(l.icon,Xt.numIconVertices,Hr?tr:Yi),l.icon.placedSymbolArray.get(Xt.placedIconSymbolIndex).hidden=pn.icon.isHidden()),Xt.verticalPlacedIconSymbolIndex>=0&&(Ot(l.icon,Xt.numVerticalIconVertices,Hr?Yi:tr),l.icon.placedSymbolArray.get(Xt.verticalPlacedIconSymbolIndex).hidden=pn.icon.isHidden())}const ir=Lt&&Lt.has(Ft)?Lt.get(Ft):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const tr=l.collisionArrays[Ft];if(tr){let Hr=new a.P(0,0);if(tr.textBox||tr.verticalTextBox){let Br=!0;if(Ne){const pr=this.variableOffsets[sn];pr?(Hr=Ln(pr.anchor,pr.width,pr.height,pr.textOffset,pr.textBoxScale),qe&&Hr._rotate(Ge?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Br=!1}if(tr.textBox||tr.verticalTextBox){let pr;tr.textBox&&(pr=On),tr.verticalTextBox&&(pr=nr),bn(l.textCollisionBox.collisionVertexArray,pn.text.placed,!Br||pr,ir.text,Hr.x,Hr.y)}}if(tr.iconBox||tr.verticalIconBox){const Br=!!(!nr&&tr.verticalIconBox);let pr;tr.iconBox&&(pr=Br),tr.verticalIconBox&&(pr=!Br),bn(l.iconCollisionBox.collisionVertexArray,pn.icon.placed,pr,ir.icon,ot?Hr.x:0,ot?Hr.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,p){const T=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*T>l}setStale(){this.stale=!0}}function bn(B,l,p,T,P,U){T&&T.length!==0||(T=[0,0,0,0]);const Y=T[0]-En,re=T[1]-En,ue=T[2]-En,ge=T[3]-En;B.emplaceBack(l?1:0,p?1:0,P||0,U||0,Y,re),B.emplaceBack(l?1:0,p?1:0,P||0,U||0,ue,re),B.emplaceBack(l?1:0,p?1:0,P||0,U||0,ue,ge),B.emplaceBack(l?1:0,p?1:0,P||0,U||0,Y,ge)}const wr=Math.pow(2,25),Lr=Math.pow(2,24),Mr=Math.pow(2,17),Xr=Math.pow(2,16),Yr=Math.pow(2,9),ni=Math.pow(2,8),bi=Math.pow(2,1);function Ni(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;const l=B.placed?1:0,p=Math.floor(127*B.opacity);return p*wr+l*Lr+p*Mr+l*Xr+p*Yr+l*ni+p*bi+l}const Yi=0;class Qi{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,p,T,P,U){const Y=this._bucketParts;for(;this._currentTileIndex<l.length;)if(p.getBucketParts(Y,P,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,U())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Y.sort((re,ue)=>re.sortKey-ue.sortKey));this._currentPartIndex<Y.length;)if(p.placeLayerBucketPart(Y[this._currentPartIndex],this._seenCrossTileIDs,T),this._currentPartIndex++,U())return!0;return!1}}class _a{constructor(l,p,T,P,U,Y,re,ue){this.placement=new Vn(l,p,Y,re,ue),this._currentPlacementIndex=T.length-1,this._forceFullPlacement=P,this._showCollisionBoxes=U,this._done=!1}isDone(){return this._done}continuePlacement(l,p,T){const P=w.now(),U=()=>!this._forceFullPlacement&&w.now()-P>2;for(;this._currentPlacementIndex>=0;){const Y=p[l[this._currentPlacementIndex]],re=this.placement.collisionIndex.transform.zoom;if(Y.type==="symbol"&&(!Y.minzoom||Y.minzoom<=re)&&(!Y.maxzoom||Y.maxzoom>re)){if(this._inProgressLayer||(this._inProgressLayer=new Qi(Y)),this._inProgressLayer.continuePlacement(T[Y.source],this.placement,this._showCollisionBoxes,Y,U))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const ra=512/a.Z/2;class Ai{constructor(l,p,T){this.tileID=l,this.bucketInstanceId=T,this._symbolsByKey={};const P=new Map;for(let U=0;U<p.length;U++){const Y=p.get(U),re=Y.key,ue=P.get(re);ue?ue.push(Y):P.set(re,[Y])}for(const[U,Y]of P){const re={positions:Y.map(ue=>({x:Math.floor(ue.anchorX*ra),y:Math.floor(ue.anchorY*ra)})),crossTileIDs:Y.map(ue=>ue.crossTileID)};if(re.positions.length>128){const ue=new a.aC(re.positions.length,16,Uint16Array);for(const{x:ge,y:Ne}of re.positions)ue.add(ge,Ne);ue.finish(),delete re.positions,re.index=ue}this._symbolsByKey[U]=re}}getScaledCoordinates(l,p){const{x:T,y:P,z:U}=this.tileID.canonical,{x:Y,y:re,z:ue}=p.canonical,ge=ra/Math.pow(2,ue-U),Ne=(re*a.Z+l.anchorY)*ge,qe=P*a.Z*ra;return{x:Math.floor((Y*a.Z+l.anchorX)*ge-T*a.Z*ra),y:Math.floor(Ne-qe)}}findMatches(l,p,T){const P=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let U=0;U<l.length;U++){const Y=l.get(U);if(Y.crossTileID)continue;const re=this._symbolsByKey[Y.key];if(!re)continue;const ue=this.getScaledCoordinates(Y,p);if(re.index){const ge=re.index.range(ue.x-P,ue.y-P,ue.x+P,ue.y+P).sort();for(const Ne of ge){const qe=re.crossTileIDs[Ne];if(!T[qe]){T[qe]=!0,Y.crossTileID=qe;break}}}else if(re.positions)for(let ge=0;ge<re.positions.length;ge++){const Ne=re.positions[ge],qe=re.crossTileIDs[ge];if(Math.abs(Ne.x-ue.x)<=P&&Math.abs(Ne.y-ue.y)<=P&&!T[qe]){T[qe]=!0,Y.crossTileID=qe;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:l})=>l)}}class Ka{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class la{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const p=Math.round((l-this.lng)/360);if(p!==0)for(const T in this.indexes){const P=this.indexes[T],U={};for(const Y in P){const re=P[Y];re.tileID=re.tileID.unwrapTo(re.tileID.wrap+p),U[re.tileID.key]=re}this.indexes[T]=U}this.lng=l}addBucket(l,p,T){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let U=0;U<p.symbolInstances.length;U++)p.symbolInstances.get(U).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const P=this.usedCrossTileIDs[l.overscaledZ];for(const U in this.indexes){const Y=this.indexes[U];if(Number(U)>l.overscaledZ)for(const re in Y){const ue=Y[re];ue.tileID.isChildOf(l)&&ue.findMatches(p.symbolInstances,l,P)}else{const re=Y[l.scaledTo(Number(U)).key];re&&re.findMatches(p.symbolInstances,l,P)}}for(let U=0;U<p.symbolInstances.length;U++){const Y=p.symbolInstances.get(U);Y.crossTileID||(Y.crossTileID=T.generate(),P[Y.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Ai(l,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(l,p){for(const T of p.getCrossTileIDsLists())for(const P of T)delete this.usedCrossTileIDs[l][P]}removeStaleBuckets(l){let p=!1;for(const T in this.indexes){const P=this.indexes[T];for(const U in P)l[P[U].bucketInstanceId]||(this.removeBucketCrossTileIDs(T,P[U]),delete P[U],p=!0)}return p}}class Sa{constructor(){this.layerIndexes={},this.crossTileIDs=new Ka,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,p,T){let P=this.layerIndexes[l.id];P===void 0&&(P=this.layerIndexes[l.id]=new la);let U=!1;const Y={};P.handleWrapJump(T);for(const re of p){const ue=re.getBucket(l);ue&&l.id===ue.layerIds[0]&&(ue.bucketInstanceId||(ue.bucketInstanceId=++this.maxBucketInstanceId),P.addBucket(re.tileID,ue,this.crossTileIDs)&&(U=!0),Y[ue.bucketInstanceId]=!0)}return P.removeStaleBuckets(Y)&&(U=!0),U}pruneUnusedLayers(l){const p={};l.forEach(T=>{p[T]=!0});for(const T in this.layerIndexes)p[T]||delete this.layerIndexes[T]}}var _o="void main() {fragColor=vec4(1.0);}";const Ui={prelude:Pi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Pi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Pi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Pi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Pi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Pi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Pi(_o,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Pi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Pi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Pi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Pi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Pi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Pi(_o,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Pi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Pi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Pi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Pi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Pi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Pi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Pi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Pi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Pi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Pi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Pi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Pi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Pi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Pi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Pi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Pi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Pi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Pi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Pi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Pi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Pi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Pi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Pi(B,l){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,T=l.match(/in ([\w]+) ([\w]+)/g),P=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),U=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Y=U?U.concat(P):P,re={};return{fragmentSource:B=B.replace(p,(ue,ge,Ne,qe,Ge)=>(re[Ge]=!0,ge==="define"?`
#ifndef HAS_UNIFORM_u_${Ge}
in ${Ne} ${qe} ${Ge};
#else
uniform ${Ne} ${qe} u_${Ge};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ge}
    ${Ne} ${qe} ${Ge} = u_${Ge};
#endif
`)),vertexSource:l=l.replace(p,(ue,ge,Ne,qe,Ge)=>{const ot=qe==="float"?"vec2":"vec4",ft=Ge.match(/color/)?"color":ot;return re[Ge]?ge==="define"?`
#ifndef HAS_UNIFORM_u_${Ge}
uniform lowp float u_${Ge}_t;
in ${Ne} ${ot} a_${Ge};
out ${Ne} ${qe} ${Ge};
#else
uniform ${Ne} ${qe} u_${Ge};
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ge}
    ${Ge} = a_${Ge};
#else
    ${Ne} ${qe} ${Ge} = u_${Ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ge}
    ${Ge} = unpack_mix_${ft}(a_${Ge}, u_${Ge}_t);
#else
    ${Ne} ${qe} ${Ge} = u_${Ge};
#endif
`:ge==="define"?`
#ifndef HAS_UNIFORM_u_${Ge}
uniform lowp float u_${Ge}_t;
in ${Ne} ${ot} a_${Ge};
#else
uniform ${Ne} ${qe} u_${Ge};
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ge}
    ${Ne} ${qe} ${Ge} = a_${Ge};
#else
    ${Ne} ${qe} ${Ge} = u_${Ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ge}
    ${Ne} ${qe} ${Ge} = unpack_mix_${ft}(a_${Ge}, u_${Ge}_t);
#else
    ${Ne} ${qe} ${Ge} = u_${Ge};
#endif
`}),staticAttributes:T,staticUniforms:Y}}class Ta{constructor(l,p,T){this.vertexBuffer=l,this.indexBuffer=p,this.segments=T}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var to=a.aD([{name:"a_pos",type:"Int16",components:2}]);const ne="#define PROJECTION_MERCATOR",we="mercator";class et{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return we}get shaderDefine(){return ne}get shaderPreludeCode(){return Ui.projectionMercator}get vertexShaderPreludeCode(){return Ui.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aE.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,p,T,P,U){if(this._cachedMesh)return this._cachedMesh;const Y=new a.aF;Y.emplaceBack(0,0),Y.emplaceBack(a.Z,0),Y.emplaceBack(0,a.Z),Y.emplaceBack(a.Z,a.Z);const re=l.createVertexBuffer(Y,to.members),ue=a.aG.simpleSegment(0,0,4,2),ge=new a.aH;ge.emplaceBack(1,0,2),ge.emplaceBack(1,2,3);const Ne=l.createIndexBuffer(ge);return this._cachedMesh=new Ta(re,Ne,ue),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}function Gt(B,l){const p=a.ae(l.lat,-85.051129,a.aJ);return new a.P(a.U(l.lng)*B,a.S(p)*B)}function on(B,l){return new a.$(l.x/B,l.y/B).toLngLat()}function dn(B){return B.cameraToCenterDistance*Math.min(.85*Math.tan(a.ad(90-B.pitch)),Math.tan(a.ad(89.25-B.pitch)))}function xn(B,l){const p=B.canonical,T=l/a.aI(p.z),P=p.x+Math.pow(2,p.z)*B.wrap,U=a.at(new Float64Array(16));return a.L(U,U,[P*T,p.y*T,0]),a.M(U,U,[T/a.Z,T/a.Z,1]),U}function cr(B,l,p,T,P){const U=a.$.fromLngLat(B,l),Y=P*a.aK(1,B.lat),re=Y*Math.cos(a.ad(p)),ue=Math.sqrt(Y*Y-re*re),ge=ue*Math.sin(a.ad(-T)),Ne=ue*Math.cos(a.ad(-T));return new a.$(U.x+ge,U.y+Ne,U.z+re)}class ur{constructor(l=0,p=0,T=0,P=0){if(isNaN(l)||l<0||isNaN(p)||p<0||isNaN(T)||T<0||isNaN(P)||P<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=T,this.right=P}interpolate(l,p,T){return p.top!=null&&l.top!=null&&(this.top=a.B.number(l.top,p.top,T)),p.bottom!=null&&l.bottom!=null&&(this.bottom=a.B.number(l.bottom,p.bottom,T)),p.left!=null&&l.left!=null&&(this.left=a.B.number(l.left,p.left,T)),p.right!=null&&l.right!=null&&(this.right=a.B.number(l.right,p.right,T)),this}getCenter(l,p){const T=a.ae((this.left+l-this.right)/2,0,l),P=a.ae((this.top+p-this.bottom)/2,0,p);return new a.P(T,P)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new ur(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Rr(B,l){if(!B.renderWorldCopies||B.lngRange)return;const p=l.lng-B.center.lng;l.lng+=p>180?-360:p<-180?360:0}function Ir(B){return Math.max(0,Math.floor(B))}class Nr{constructor(l,p,T,P,U,Y){this._callbacks=l,this._tileSize=512,this._renderWorldCopies=Y===void 0||!!Y,this._minZoom=p||0,this._maxZoom=T||22,this._minPitch=P??0,this._maxPitch=U??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ir(this._zoom),this._scale=a.aI(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new ur,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,p,T){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=Ir(this._zoom),this._scale=a.aI(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new ur(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!T&&l.autoCalculateNearFarZ,p&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const p=a.aL(l,-180,180)*Math.PI/180;var T,P,U,Y,re,ue,ge,Ne,qe;this._bearingInRadians!==p&&(this._unmodified=!1,this._bearingInRadians=p,this._calcMatrices(),this._rotationMatrix=h(),T=this._rotationMatrix,U=-this._bearingInRadians,Y=(P=this._rotationMatrix)[0],re=P[1],ue=P[2],ge=P[3],Ne=Math.sin(U),qe=Math.cos(U),T[0]=Y*qe+ue*Ne,T[1]=re*qe+ge*Ne,T[2]=Y*-Ne+ue*qe,T[3]=re*-Ne+ge*qe)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const p=a.ae(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==p&&(this._unmodified=!1,this._pitchInRadians=p,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const p=l/180*Math.PI;this._rollInRadians!==p&&(this._unmodified=!1,this._rollInRadians=p,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aM(this._fovInRadians)}setFov(l){l=a.ae(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=a.ad(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const p=this.getConstrained(this._center,l).zoom;this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this._tileZoom=Math.max(0,Math.floor(p)),this._scale=a.aI(p),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,p){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=p,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,p,T){this._unmodified=!1,this._edgeInsets.interpolate(l,p,T),this._constrain(),this._calcMatrices()}resize(l,p,T=!0){this._width=l,this._height=p,T&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ve([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,a.aJ])}getConstrained(l,p){return this._callbacks.getConstrained(l,p)}getCameraQueryGeometry(l,p){if(p.length===1)return[p[0],l];{let T=l.x,P=l.y,U=l.x,Y=l.y;for(const re of p)T=Math.min(T,re.x),P=Math.min(P,re.y),U=Math.max(U,re.x),Y=Math.max(Y,re.y);return[new a.P(T,P),new a.P(U,P),new a.P(U,Y),new a.P(T,Y),new a.P(T,P)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:p,zoom:T}=this.getConstrained(this.center,this.zoom);this.setCenter(p),this.setZoom(T),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=a.at(new Float64Array(16));a.M(l,l,[this._width/2,-this._height/2,1]),a.L(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=a.at(new Float64Array(16)),a.M(l,l,[1,-1,1]),a.L(l,l,[-1,-1,0]),a.M(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,p,T,P){const U=T!==void 0?T:this.bearing,Y=P=P!==void 0?P:this.pitch,re=a.$.fromLngLat(l,p),ue=-Math.cos(a.ad(Y)),ge=Math.sin(a.ad(Y)),Ne=ge*Math.sin(a.ad(U)),qe=-ge*Math.cos(a.ad(U));let Ge=this.elevation;const ot=p-Ge;let ft;ue*ot>=0||Math.abs(ue)<.1?(ft=1e4,Ge=p+ft*ue):ft=-ot/ue;let Ot,Lt,Ft=a.aN(1,re.y),Xt=0;do{if(Xt+=1,Xt>10)break;Lt=ft/Ft,Ot=new a.$(re.x+Ne*Lt,re.y+qe*Lt),Ft=1/Ot.meterInMercatorCoordinateUnits()}while(Math.abs(ft-Lt*Ft)>1e-12);return{center:Ot.toLngLat(),elevation:Ge,zoom:a.ab(this.height/2/Math.tan(this.fovInRadians/2)/Lt/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const p=a.aK(1,this.center.lat)*this.worldSize,T=this.cameraToCenterDistance/p,P=a.$.fromLngLat(this.center,this.elevation),U=cr(this.center,this.elevation,this.pitch,this.bearing,T);this._elevation=l;const Y=this.calculateCenterFromCameraLngLatAlt(U.toLngLat(),a.aN(U.z,P.y),this.bearing,this.pitch);this._elevation=Y.elevation,this._center=Y.center,this.setZoom(Y.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=a.aK(1,this.center.lat)*this.worldSize;return cr(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const p=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/p,l.canonical.y/p,1/p/a.Z,1/p/a.Z]}}class Wr{constructor(l,p){this.min=l,this.max=p,this.center=a.aO([],a.aP([],this.min,this.max),.5)}quadrant(l){const p=[l%2==0,l<2],T=a.aQ(this.min),P=a.aQ(this.max);for(let U=0;U<p.length;U++)T[U]=p[U]?this.min[U]:this.center[U],P[U]=p[U]?this.center[U]:this.max[U];return P[2]=this.max[2],new Wr(T,P)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let p=!0;for(let T=0;T<l.planes.length;T++){const P=this.intersectsPlane(l.planes[T]);if(P===0)return 0;P===1&&(p=!1)}return p?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let p=l[3],T=l[3];for(let P=0;P<3;P++)l[P]>0?(p+=l[P]*this.min[P],T+=l[P]*this.max[P]):(T+=l[P]*this.min[P],p+=l[P]*this.max[P]);return p>=0?2:T<0?0:1}}class ua{distanceToTile2d(l,p,T,P){const U=P.distanceX([l,p]),Y=P.distanceY([l,p]);return Math.hypot(U,Y)}getWrap(l,p,T){return T}getTileAABB(l,p,T,P){var U,Y;let re=T,ue=T;if(P.terrain){const Ne=new a.Y(l.z,p,l.z,l.x,l.y),qe=P.terrain.getMinMaxElevation(Ne);re=(U=qe.minElevation)!==null&&U!==void 0?U:T,ue=(Y=qe.maxElevation)!==null&&Y!==void 0?Y:T}const ge=1<<l.z;return new Wr([p+l.x/ge,l.y/ge,re],[p+(l.x+1)/ge,(l.y+1)/ge,ue])}allowVariableZoom(l,p){const T=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,P=a.ae(78.5-T/2,0,60);return!!p.terrain||l.pitch>P}allowWorldCopies(){return!0}recalculateCache(){}}class ui{constructor(l,p,T){this.points=l,this.planes=p,this.aabb=T}static fromInvProjectionMatrix(l,p=1,T=0){const P=Math.pow(2,T),U=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ge=>{const Ne=1/(ge=a.ap([],ge,l))[3]/p*P;return a.aR(ge,ge,[Ne,Ne,1/ge[3],Ne])}),Y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ge=>{const Ne=a.aS([],U[ge[0]],U[ge[1]]),qe=a.aS([],U[ge[2]],U[ge[1]]),Ge=a.aT([],a.aU([],Ne,qe)),ot=-a.aV(Ge,U[ge[1]]);return Ge.concat(ot)}),re=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ue=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ge of U)for(let Ne=0;Ne<3;Ne++)re[Ne]=Math.min(re[Ne],ge[Ne]),ue[Ne]=Math.max(ue[Ne],ge[Ne]);return new ui(U,Y,new Wr(re,ue))}}class Vr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,T){return this._helper.interpolatePadding(l,p,T)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,T=!0){this._helper.resize(l,p,T)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,p){}constructor(l,p,T,P,U){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Nr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(Y,re)=>this.getConstrained(Y,re)},l,p,T,P,U),this._coveringTilesDetailsProvider=new ua}clone(){const l=new Vr;return l.apply(this),l}apply(l,p,T){this._helper.apply(l,p,T)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const p=[new a.aW(0,l)];if(this._helper._renderWorldCopies){const T=this.screenPointToMercatorCoordinate(new a.P(0,0)),P=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),U=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),Y=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),re=Math.floor(Math.min(T.x,P.x,U.x,Y.x)),ue=Math.floor(Math.max(T.x,P.x,U.x,Y.x)),ge=1;for(let Ne=re-ge;Ne<=ue+ge;Ne++)Ne!==0&&p.push(new a.aW(Ne,l))}return p}getCameraFrustum(){return ui.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const p=this.screenPointToLocation(this.centerPoint,l),T=l?l.getElevationForLngLatZoom(p,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(T)}setLocationAtPoint(l,p){const T=a.aK(this.elevation,this.center.lat),P=this.screenPointToMercatorCoordinateAtZ(p,T),U=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,T),Y=a.$.fromLngLat(l),re=new a.$(Y.x-(P.x-U.x),Y.y-(P.y-U.y));this.setCenter(re==null?void 0:re.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,p){return p?this.coordinatePoint(a.$.fromLngLat(l),p.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.$.fromLngLat(l))}screenPointToLocation(l,p){var T;return(T=this.screenPointToMercatorCoordinate(l,p))===null||T===void 0?void 0:T.toLngLat()}screenPointToMercatorCoordinate(l,p){if(p){const T=p.pointCoordinate(l);if(T!=null)return T}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,p){const T=p||0,P=[l.x,l.y,0,1],U=[l.x,l.y,1,1];a.ap(P,P,this._pixelMatrixInverse),a.ap(U,U,this._pixelMatrixInverse);const Y=P[3],re=U[3],ue=P[1]/Y,ge=U[1]/re,Ne=P[2]/Y,qe=U[2]/re,Ge=Ne===qe?0:(T-Ne)/(qe-Ne);return new a.$(a.B.number(P[0]/Y,U[0]/re,Ge)/this.worldSize,a.B.number(ue,ge,Ge)/this.worldSize,T)}coordinatePoint(l,p=0,T=this._pixelMatrix){const P=[l.x*this.worldSize,l.y*this.worldSize,p,1];return a.ap(P,P,T),new a.P(P[0]/P[3],P[1]/P[3])}getBounds(){const l=Math.max(0,this._helper._height/2-dn(this));return new Ve().extend(this.screenPointToLocation(new a.P(0,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(l,p){return p?p.pointCoordinate(l)!=null:l.y>this.height/2-dn(this)}calculatePosMatrix(l,p=!1,T){var P;const U=(P=l.key)!==null&&P!==void 0?P:a.aX(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),Y=p?this._alignedPosMatrixCache:this._posMatrixCache;if(Y.has(U)){const ge=Y.get(U);return T?ge.f32:ge.f64}const re=xn(l,this.worldSize);a.N(re,p?this._alignedProjMatrix:this._viewProjMatrix,re);const ue={f64:re,f32:new Float32Array(re)};return Y.set(U,ue),T?ue.f32:ue.f64}calculateFogMatrix(l){const p=l.key,T=this._fogMatrixCacheF32;if(T.has(p))return T.get(p);const P=xn(l,this.worldSize);return a.N(P,this._fogMatrix,P),T.set(p,new Float32Array(P)),T.get(p)}getConstrained(l,p){p=a.ae(+p,this.minZoom,this.maxZoom);const T={center:new a.Q(l.lng,l.lat),zoom:p};let P=this._helper._lngRange;this._helper._renderWorldCopies||P!==null||(P=[-179.9999999999,180-1e-10]);const U=this.tileSize*a.aI(T.zoom);let Y=0,re=U,ue=0,ge=U,Ne=0,qe=0;const{x:Ge,y:ot}=this.size;if(this._helper._latRange){const nn=this._helper._latRange;Y=a.S(nn[1])*U,re=a.S(nn[0])*U,re-Y<ot&&(Ne=ot/(re-Y))}P&&(ue=a.aL(a.U(P[0])*U,0,U),ge=a.aL(a.U(P[1])*U,0,U),ge<ue&&(ge+=U),ge-ue<Ge&&(qe=Ge/(ge-ue)));const{x:ft,y:Ot}=Gt(U,l);let Lt,Ft;const Xt=Math.max(qe||0,Ne||0);if(Xt){const nn=new a.P(qe?(ge+ue)/2:ft,Ne?(re+Y)/2:Ot);return T.center=on(U,nn).wrap(),T.zoom+=a.ab(Xt),T}if(this._helper._latRange){const nn=ot/2;Ot-nn<Y&&(Ft=Y+nn),Ot+nn>re&&(Ft=re-nn)}if(P){const nn=(ue+ge)/2;let an=ft;this._helper._renderWorldCopies&&(an=a.aL(ft,nn-U/2,nn+U/2));const sn=Ge/2;an-sn<ue&&(Lt=ue+sn),an+sn>ge&&(Lt=ge-sn)}if(Lt!==void 0||Ft!==void 0){const nn=new a.P(Lt??ft,Ft??Ot);T.center=on(U,nn).wrap()}return T}calculateCenterFromCameraLngLatAlt(l,p,T,P){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,T,P)}_calculateNearFarZIfNeeded(l,p,T){if(!this._helper.autoCalculateNearFarZ)return;const P=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),U=l-P*this._helper._pixelPerMeter/Math.cos(p),Y=P<0?U:l,re=Math.PI/2+this.pitchInRadians,ue=a.ad(this.fov)*(Math.abs(Math.cos(a.ad(this.roll)))*this.height+Math.abs(Math.sin(a.ad(this.roll)))*this.width)/this.height*(.5+T.y/this.height),ge=Math.sin(ue)*Y/Math.sin(a.ae(Math.PI-re-ue,.01,Math.PI-.01)),Ne=dn(this),qe=Math.atan(Ne/this._helper.cameraToCenterDistance),Ge=a.ad(.75),ot=qe>Ge?2*qe*(.5+T.y/(2*Ne)):Ge,ft=Math.sin(ot)*Y/Math.sin(a.ae(Math.PI-re-ot,.01,Math.PI-.01)),Ot=Math.min(ge,ft);this._helper._farZ=1.01*(Math.cos(Math.PI/2-p)*Ot+Y),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,p=Gt(this.worldSize,this.center),T=p.x,P=p.y;this._helper._pixelPerMeter=a.aK(1,this.center.lat)*this.worldSize;const U=a.ad(Math.min(this.pitch,89.25)),Y=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(U));let re;this._calculateNearFarZIfNeeded(Y,U,l),re=new Float64Array(16),a.aY(re,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aj(this._invProjMatrix,re),re[8]=2*-l.x/this._helper._width,re[9]=2*l.y/this._helper._height,this._projectionMatrix=a.aZ(re),a.M(re,re,[1,-1,1]),a.L(re,re,[0,0,-this._helper.cameraToCenterDistance]),a.a_(re,re,-this.rollInRadians),a.a$(re,re,this.pitchInRadians),a.a_(re,re,-this.bearingInRadians),a.L(re,re,[-T,-P,0]),this._mercatorMatrix=a.M([],re,[this.worldSize,this.worldSize,this.worldSize]),a.M(re,re,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,re),a.L(re,re,[0,0,-this.elevation]),this._viewProjMatrix=re,this._invViewProjMatrix=a.aj([],re);const ue=[0,0,-1,1];a.ap(ue,ue,this._invViewProjMatrix),this._cameraPosition=[ue[0]/ue[3],ue[1]/ue[3],ue[2]/ue[3]],this._fogMatrix=new Float64Array(16),a.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,Y,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,a.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.L(this._fogMatrix,this._fogMatrix,[-T,-P,0]),a.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,re);const ge=this._helper._width%2/2,Ne=this._helper._height%2/2,qe=Math.cos(this.bearingInRadians),Ge=Math.sin(-this.bearingInRadians),ot=T-Math.round(T)+qe*ge+Ge*Ne,ft=P-Math.round(P)+qe*Ne+Ge*ge,Ot=new Float64Array(re);if(a.L(Ot,Ot,[ot>.5?ot-1:ot,ft>.5?ft-1:ft,0]),this._alignedProjMatrix=Ot,re=a.aj(new Float64Array(16),this._pixelMatrix),!re)throw new Error("failed to invert matrix");this._pixelMatrixInverse=re,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.ap(p,p,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=a.aK(1,this.center.lat)*this.worldSize;return cr(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,p){const T=a.$.fromLngLat(l),P=[T.x*this.worldSize,T.y*this.worldSize,p,1];return a.ap(P,P,this._viewProjMatrix),P[2]/P[3]}getProjectionData(l){const{overscaledTileID:p,aligned:T,applyTerrainMatrix:P}=l,U=this._helper.getMercatorTileCoordinates(p),Y=p?this.calculatePosMatrix(p,T,!0):null;let re;return re=p&&p.terrainRttPosMatrix32f&&P?p.terrainRttPosMatrix32f:Y||a.b0(),{mainMatrix:re,tileMercatorCoords:U,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:re}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,p,T){return 1}transformLightDirection(l){return a.aQ(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,p,T,P){const U=this.calculatePosMatrix(T);let Y;P?(Y=[l,p,P(l,p),1],a.ap(Y,Y,U)):(Y=[l,p,0,1],zn(Y,Y,U));const re=Y[3];return{point:new a.P(Y[0]/re,Y[1]/re),signedDistanceFromCamera:re,isOccluded:!1}}populateCache(l){for(const p of l)this.calculatePosMatrix(p)}getMatrixForModel(l,p){const T=a.$.fromLngLat(l,p),P=T.meterInMercatorCoordinateUnits(),U=a.b1();return a.L(U,U,[T.x,T.y,T.z]),a.a_(U,U,Math.PI),a.a$(U,U,Math.PI/2),a.M(U,U,[-P,P,P]),U}getProjectionDataForCustomLayer(l=!0){const p=new a.Y(0,0,0,0,0),T=this.getProjectionData({overscaledTileID:p,applyGlobeMatrix:l}),P=xn(p,this.worldSize);a.N(P,this._viewProjMatrix,P),T.tileMercatorCoords=[0,0,1,1];const U=[a.Z,a.Z,this.worldSize/this._helper.pixelsPerMeter],Y=a.b2();return a.M(Y,P,U),T.fallbackMatrix=Y,T.mainMatrix=Y,T}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function hr(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ii(B){if(B.useSlerp)if(B.k<1){const l=a.b3(B.startEulerAngles.roll,B.startEulerAngles.pitch,B.startEulerAngles.bearing),p=a.b3(B.endEulerAngles.roll,B.endEulerAngles.pitch,B.endEulerAngles.bearing),T=new Float64Array(4);a.b4(T,l,p,B.k);const P=a.b5(T);B.tr.setRoll(P.roll),B.tr.setPitch(P.pitch),B.tr.setBearing(P.bearing)}else B.tr.setRoll(B.endEulerAngles.roll),B.tr.setPitch(B.endEulerAngles.pitch),B.tr.setBearing(B.endEulerAngles.bearing);else B.tr.setRoll(a.B.number(B.startEulerAngles.roll,B.endEulerAngles.roll,B.k)),B.tr.setPitch(a.B.number(B.startEulerAngles.pitch,B.endEulerAngles.pitch,B.k)),B.tr.setBearing(a.B.number(B.startEulerAngles.bearing,B.endEulerAngles.bearing,B.k))}function Wi(B,l,p,T,P){const U=P.padding,Y=Gt(P.worldSize,p.getNorthWest()),re=Gt(P.worldSize,p.getNorthEast()),ue=Gt(P.worldSize,p.getSouthEast()),ge=Gt(P.worldSize,p.getSouthWest()),Ne=a.ad(-T),qe=Y.rotate(Ne),Ge=re.rotate(Ne),ot=ue.rotate(Ne),ft=ge.rotate(Ne),Ot=new a.P(Math.max(qe.x,Ge.x,ft.x,ot.x),Math.max(qe.y,Ge.y,ft.y,ot.y)),Lt=new a.P(Math.min(qe.x,Ge.x,ft.x,ot.x),Math.min(qe.y,Ge.y,ft.y,ot.y)),Ft=Ot.sub(Lt),Xt=(P.width-(U.left+U.right+l.left+l.right))/Ft.x,nn=(P.height-(U.top+U.bottom+l.top+l.bottom))/Ft.y;if(nn<0||Xt<0)return void hr();const an=Math.min(a.ab(P.scale*Math.min(Xt,nn)),B.maxZoom),sn=a.P.convert(B.offset),pn=new a.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(a.ad(T)),hn=sn.add(pn).mult(P.scale/a.aI(an));return{center:on(P.worldSize,Y.add(ue).div(2).sub(hn)),zoom:an,bearing:T}}class ea{get useGlobeControls(){return!1}handlePanInertia(l,p){return{easingOffset:l,easingCenter:p.center}}handleMapControlsRollPitchBearingZoom(l,p){l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta),l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta)}handleMapControlsPan(l,p,T){l.around.distSqr(p.centerPoint)<.01||p.setLocationAtPoint(T,l.around)}cameraForBoxAndBearing(l,p,T,P,U){return Wi(l,p,T,P,U)}handleJumpToCenterZoom(l,p){l.zoom!==(p.zoom!==void 0?+p.zoom:l.zoom)&&l.setZoom(+p.zoom),p.center!==void 0&&l.setCenter(a.Q.convert(p.center))}handleEaseTo(l,p){const T=l.zoom,P=l.padding,U={roll:l.roll,pitch:l.pitch,bearing:l.bearing},Y={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},re=p.zoom!==void 0,ue=!l.isPaddingEqual(p.padding);let ge=!1;const Ne=re?+p.zoom:l.zoom;let qe=l.centerPoint.add(p.offsetAsPoint);const Ge=l.screenPointToLocation(qe),{center:ot,zoom:ft}=l.getConstrained(a.Q.convert(p.center||Ge),Ne??T);Rr(l,ot);const Ot=Gt(l.worldSize,Ge),Lt=Gt(l.worldSize,ot).sub(Ot),Ft=a.aI(ft-T);return ge=ft!==T,{easeFunc:Xt=>{if(ge&&l.setZoom(a.B.number(T,ft,Xt)),a.b6(U,Y)||ii({startEulerAngles:U,endEulerAngles:Y,tr:l,k:Xt,useSlerp:U.roll!=Y.roll}),ue&&(l.interpolatePadding(P,p.padding,Xt),qe=l.centerPoint.add(p.offsetAsPoint)),p.around)l.setLocationAtPoint(p.around,p.aroundPoint);else{const nn=a.aI(l.zoom-T),an=ft>T?Math.min(2,Ft):Math.max(.5,Ft),sn=Math.pow(an,1-Xt),pn=on(l.worldSize,Ot.add(Lt.mult(Xt*sn)).mult(nn));l.setLocationAtPoint(l.renderWorldCopies?pn.wrap():pn,qe)}},isZooming:ge,elevationCenter:ot}}handleFlyTo(l,p){const T=p.zoom!==void 0,P=l.zoom,U=l.getConstrained(a.Q.convert(p.center||p.locationAtOffset),T?+p.zoom:P),Y=U.center,re=U.zoom;Rr(l,Y);const ue=Gt(l.worldSize,p.locationAtOffset),ge=Gt(l.worldSize,Y).sub(ue),Ne=ge.mag(),qe=a.aI(re-P);let Ge;if(p.minZoom!==void 0){const ot=Math.min(+p.minZoom,P,re),ft=l.getConstrained(Y,ot).zoom;Ge=a.aI(ft-P)}return{easeFunc:(ot,ft,Ot,Lt)=>{l.setZoom(ot===1?re:P+a.ab(ft));const Ft=ot===1?Y:on(l.worldSize,ue.add(ge.mult(Ot)).mult(ft));l.setLocationAtPoint(l.renderWorldCopies?Ft.wrap():Ft,Lt)},scaleOfZoom:qe,targetCenter:Y,scaleOfMinZoom:Ge,pixelPathLength:Ne}}}class ji{constructor(l,p,T){this.blendFunction=l,this.blendColor=p,this.mask=T}}ji.Replace=[1,0],ji.disabled=new ji(ji.Replace,a.b7.transparent,[!1,!1,!1,!1]),ji.unblended=new ji(ji.Replace,a.b7.transparent,[!0,!0,!0,!0]),ji.alphaBlended=new ji([1,771],a.b7.transparent,[!0,!0,!0,!0]);const Oo=2305;class ri{constructor(l,p,T){this.enable=l,this.mode=p,this.frontFace=T}}ri.disabled=new ri(!1,1029,Oo),ri.backCCW=new ri(!0,1029,Oo),ri.frontCCW=new ri(!0,1028,Oo);class Jr{constructor(l,p,T){this.func=l,this.mask=p,this.range=T}}Jr.ReadOnly=!1,Jr.ReadWrite=!0,Jr.disabled=new Jr(519,Jr.ReadOnly,[0,1]);const _l=7680;class ha{constructor(l,p,T,P,U,Y){this.test=l,this.ref=p,this.mask=T,this.fail=P,this.depthFail=U,this.pass=Y}}ha.disabled=new ha({func:519,mask:0},0,0,_l,_l,_l);const xo=new WeakMap;function Fo(B){var l;if(xo.has(B))return xo.get(B);{const p=(l=B.getParameter(B.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return xo.set(B,p),p}}class no{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const p=l.context,T=p.gl;this._texFormat=T.RGBA,this._texType=T.UNSIGNED_BYTE;const P=new a.aF;P.emplaceBack(-1,-1),P.emplaceBack(2,-1),P.emplaceBack(-1,2);const U=new a.aH;U.emplaceBack(0,1,2),this._fullscreenTriangle=new Ta(p.createVertexBuffer(P,to.members),p.createIndexBuffer(U),a.aG.simpleSegment(0,0,P.length,U.length)),this._resultBuffer=new Uint8Array(4),p.activeTexture.set(T.TEXTURE1);const Y=T.createTexture();T.bindTexture(T.TEXTURE_2D,Y),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.NEAREST),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.NEAREST),T.texImage2D(T.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=p.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(Y),Fo(T)&&(this._pbo=T.createBuffer(),T.bindBuffer(T.PIXEL_PACK_BUFFER,this._pbo),T.bufferData(T.PIXEL_PACK_BUFFER,4,T.STREAM_READ),T.bindBuffer(T.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,p){const T=this._updateCount;return this._readbackQueue?T>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():T>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,p),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,p=l.gl;l.activeTexture.set(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,p){const T=this._cachedRenderContext.context,P=T.gl;if(this._bindFramebuffer(),T.viewport.set([0,0,this._texWidth,this._texHeight]),T.clear({color:a.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(T,P.TRIANGLES,Jr.disabled,ha.disabled,ji.unblended,ri.disabled,((U,Y)=>({u_input:U,u_output_expected:Y}))(l,p),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Fo(P)){P.bindBuffer(P.PIXEL_PACK_BUFFER,this._pbo),P.readBuffer(P.COLOR_ATTACHMENT0),P.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),P.bindBuffer(P.PIXEL_PACK_BUFFER,null);const U=P.fenceSync(P.SYNC_GPU_COMMANDS_COMPLETE,0);P.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:U}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Fo(l)){const p=l.clientWaitSync(this._readbackQueue.sync,0,0);if(p===l.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(p===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=no._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let p=0;return p+=l[0]/256,p+=l[1]/65536,p+=l[2]/16777216,l[3]<127&&(p=-p),p/128}}const Bo=a.Z/128;function ts(B,l){const p=B.granularity!==void 0?Math.max(B.granularity,1):1,T=p+(B.generateBorders?2:0),P=p+(B.extendToNorthPole||B.generateBorders?1:0)+(B.extendToSouthPole||B.generateBorders?1:0),U=T+1,Y=P+1,re=B.generateBorders?-1:0,ue=B.generateBorders||B.extendToNorthPole?-1:0,ge=p+(B.generateBorders?1:0),Ne=p+(B.generateBorders||B.extendToSouthPole?1:0),qe=U*Y,Ge=T*P*6,ot=U*Y>65536;if(ot&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ft=ot||l==="32bit",Ot=new Int16Array(2*qe);let Lt=0;for(let nn=ue;nn<=Ne;nn++)for(let an=re;an<=ge;an++){let sn=an/p*a.Z;an===-1&&(sn=-64),an===p+1&&(sn=a.Z+Bo);let pn=nn/p*a.Z;nn===-1&&(pn=B.extendToNorthPole?a.b9:-64),nn===p+1&&(pn=B.extendToSouthPole?a.ba:a.Z+Bo),Ot[Lt++]=sn,Ot[Lt++]=pn}const Ft=ft?new Uint32Array(Ge):new Uint16Array(Ge);let Xt=0;for(let nn=0;nn<P;nn++)for(let an=0;an<T;an++){const sn=an+1+nn*U,pn=an+(nn+1)*U,hn=an+1+(nn+1)*U;Ft[Xt++]=an+nn*U,Ft[Xt++]=pn,Ft[Xt++]=sn,Ft[Xt++]=sn,Ft[Xt++]=pn,Ft[Xt++]=hn}return{vertices:Ot.buffer.slice(0),indices:Ft.buffer.slice(0),uses32bitIndices:ft}}const xl=new a.aE({fill:new a.bb(128,2),line:new a.bb(512,0),tile:new a.bb(128,32),stencil:new a.bb(128,1),circle:3});class Ws{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ui.projectionGlobe}get vertexShaderPreludeCode(){return Ui.projectionMercator.vertexSource}get subdivisionGranularity(){return xl}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new no(l));const p=a.S(this._errorQueryLatitudeDegrees),T=2*Math.atan(Math.exp(Math.PI-p*Math.PI*2))-.5*Math.PI,P=this._errorMeasurement.updateErrorLoop(p,T),U=w.now();P!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=P,this._errorMeasurementLastChangeTime=U);const Y=Math.min(Math.max((U-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bd(Y))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,p,T,P,U){const Y=(U==="stencil"?xl.stencil:xl.tile).getGranularityForZoomLevel(p.z);return this._getMesh(l,{granularity:Y,generateBorders:T,extendToNorthPole:p.y===0&&P,extendToSouthPole:p.y===(1<<p.z)-1&&P})}_getMesh(l,p){const T=this._getMeshKey(p);if(T in this._tileMeshCache)return this._tileMeshCache[T];const P=function(U,Y){const re=ts(Y,"16bit"),ue=a.aF.deserialize({arrayBuffer:re.vertices,length:re.vertices.byteLength/2/2}),ge=a.aH.deserialize({arrayBuffer:re.indices,length:re.indices.byteLength/2/3});return new Ta(U.createVertexBuffer(ue,to.members),U.createIndexBuffer(ge),a.aG.simpleSegment(0,0,ue.length,ge.length))}(l,p);return this._tileMeshCache[T]=P,P}recalculate(l){}hasTransition(){const l=w.now();let p=!1;return p=p||(l-this._errorMeasurementLastChangeTime)/1e3<.7,p=p||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,p}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const wc=new a.r({type:new a.D(a.v.projection.type)});class $l extends a.E{constructor(l){super(),this._transitionable=new a.T(wc),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.C(0)),this._mercatorProjection=new et,this._verticalPerspectiveProjection=new Ws}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof a.be){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,p,T,P,U){return this.currentProjection.getMeshFromTileID(l,p,T,P,U)}setProjection(l){this._transitionable.setValue("type",(l==null?void 0:l.type)||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function sl(B){const l=bo(B.worldSize,B.center.lat);return 2*Math.PI*l}function ws(B,l,p,T,P){const U=1/(1<<P),Y=l/a.Z*U+T*U,re=a.bg((B/a.Z*U+p*U)*Math.PI*2+Math.PI,2*Math.PI),ue=2*Math.atan(Math.exp(Math.PI-Y*Math.PI*2))-.5*Math.PI,ge=Math.cos(ue),Ne=new Float64Array(3);return Ne[0]=Math.sin(re)*ge,Ne[1]=Math.sin(ue),Ne[2]=Math.cos(re)*ge,Ne}function Wa(B){return function(l,p){const T=Math.cos(p),P=new Float64Array(3);return P[0]=Math.sin(l)*T,P[1]=Math.sin(p),P[2]=Math.cos(l)*T,P}(B.lng*Math.PI/180,B.lat*Math.PI/180)}function bo(B,l){return B/(2*Math.PI)/Math.cos(l*Math.PI/180)}function Bu(B){const l=Math.asin(B[1])/Math.PI*180,p=Math.sqrt(B[0]*B[0]+B[2]*B[2]);if(p>1e-6){const T=B[0]/p,P=Math.acos(B[2]/p),U=(T>0?P:-P)/Math.PI*180;return new a.Q(a.aL(U,-180,180),l)}return new a.Q(0,l)}function Do(B){return Math.cos(B*Math.PI/180)}function Ea(B,l){const p=Do(B),T=Do(l);return a.ab(T/p)}function ns(B,l){const p=B.rotate(l.bearingInRadians),T=l.zoom+Ea(l.center.lat,0),P=a.bc(1/Do(l.center.lat),1/Do(Math.min(Math.abs(l.center.lat),60)),a.bf(T,7,3,0,1)),U=360/sl({worldSize:l.worldSize,center:{lat:l.center.lat}});return new a.Q(l.center.lng-p.x*U*P,a.ae(l.center.lat+p.y*U,-85.051129,a.aJ))}function Ss(B){const l=.5*B,p=Math.sin(l),T=Math.cos(l);return Math.log(p+T)-Math.log(T-p)}function bl(B,l,p,T){const P=B.lat+p*T;if(Math.abs(p)>1){const U=(Math.sign(B.lat+p)!==Math.sign(B.lat)?-Math.abs(B.lat):Math.abs(B.lat))*Math.PI/180,Y=Math.abs(B.lat+p)*Math.PI/180,re=Ss(U+T*(Y-U)),ue=Ss(U),ge=Ss(Y);return new a.Q(B.lng+l*((re-ue)/(ge-ue)),P)}return new a.Q(B.lng+l*T,P)}class Fs{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=l}recalculateCache(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(l,p,T,P){const U=`${l.z}_${l.x}_${l.y}`,Y=this._cache.get(U);if(Y)return Y;const re=this._cachePrevious.get(U);if(re)return this._cache.set(U,re),re;const ue=this._aabbFactory(l,p,T,P);return this._cache.set(U,ue),this._hadAnyChanges=!0,ue}}function Dl(B,l,p){const T=B-l;return T<0?-T:Math.max(0,T-p)}function Sc(B,l,p,T,P){const U=B-p;let Y;return Y=U<0?Math.min(-U,1+U-P):U>1?Math.min(Math.max(U-P,0),1-U):0,Math.max(Y,Dl(l,T,P))}class Ec{constructor(){this._aabbCache=new Fs(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(l,p,T,P){const U=1<<T.z,Y=1/U,re=T.x/U,ue=T.y/U;let ge=2;return ge=Math.min(ge,Sc(l,p,re,ue,Y)),ge=Math.min(ge,Sc(l,p,re+.5,-ue-Y,Y)),ge=Math.min(ge,Sc(l,p,re+.5,2-ue-Y,Y)),ge}getWrap(l,p,T){const P=1<<p.z,U=1/P,Y=p.x/P,re=Dl(l.x,Y,U),ue=Dl(l.x,Y-1,U),ge=Dl(l.x,Y+1,U),Ne=Math.min(re,ue,ge);return Ne===ge?1:Ne===ue?-1:0}allowVariableZoom(l,p){return sr(l,p)>4}allowWorldCopies(){return!1}getTileAABB(l,p,T,P){return this._aabbCache.getTileAABB(l,p,T,P)}_computeTileAABB(l,p,T,P){if(l.z<=0)return new Wr([-1,-1,-1],[1,1,1]);if(l.z===1)return new Wr([l.x===0?-1:0,l.y===0?0:-1,-1],[l.x===0?0:1,l.y===0?1:0,1]);{const U=[ws(0,0,l.x,l.y,l.z),ws(a.Z,0,l.x,l.y,l.z),ws(a.Z,a.Z,l.x,l.y,l.z),ws(0,a.Z,l.x,l.y,l.z)],Y=[1,1,1],re=[-1,-1,-1];for(const ue of U)for(let ge=0;ge<3;ge++)Y[ge]=Math.min(Y[ge],ue[ge]),re[ge]=Math.max(re[ge],ue[ge]);if(l.y===0||l.y===(1<<l.z)-1){const ue=[0,l.y===0?1:-1,0];for(let ge=0;ge<3;ge++)Y[ge]=Math.min(Y[ge],ue[ge]),re[ge]=Math.max(re[ge],ue[ge])}return new Wr(Y,re)}}}class Eu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,T){return this._helper.interpolatePadding(l,p,T)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p){this._helper.resize(l,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(){this._cachedClippingPlane=a.bh(),this._projectionMatrix=a.b1(),this._globeViewProjMatrix32f=a.b0(),this._globeViewProjMatrixNoCorrection=a.b1(),this._globeViewProjMatrixNoCorrectionInverted=a.b1(),this._globeProjMatrixInverted=a.b1(),this._cameraPosition=a.bi(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Nr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,p)=>this.getConstrained(l,p)}),this._coveringTilesDetailsProvider=new Ec}clone(){const l=new Eu;return l.apply(this),l}apply(l,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=a.bi();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:p,applyGlobeMatrix:T}=l,P=this._helper.getMercatorTileCoordinates(p);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:P,clippingPlane:this._cachedClippingPlane,projectionTransition:T?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const p=this.pitchInRadians,T=this.cameraToCenterDistance/l,P=Math.sin(p)*T,U=Math.cos(p)*T+1,Y=1/Math.sqrt(P*P+U*U)*1;let re=-P,ue=U;const ge=Math.sqrt(re*re+ue*ue);re/=ge,ue/=ge;const Ne=[0,re,ue];return a.bj(Ne,Ne,[0,0,0],-this.bearingInRadians),a.bk(Ne,Ne,[0,0,0],-1*this.center.lat*Math.PI/180),a.bl(Ne,Ne,[0,0,0],this.center.lng*Math.PI/180),a.aO(Ne,Ne,.25),[...Ne,.25*-Y]}isLocationOccluded(l){return!this.isSurfacePointVisible(Wa(l))}transformLightDirection(l){const p=this._helper._center.lng*Math.PI/180,T=this._helper._center.lat*Math.PI/180,P=Math.cos(T),U=[Math.sin(p)*P,Math.sin(T),Math.cos(p)*P],Y=[U[2],0,-U[0]],re=[0,0,0];a.aU(re,Y,U),a.aT(Y,Y),a.aT(re,re);const ue=[0,0,0];return a.aT(ue,[Y[0]*l[0]+re[0]*l[1]+U[0]*l[2],Y[1]*l[0]+re[1]*l[1]+U[1]*l[2],Y[2]*l[0]+re[2]*l[1]+U[2]*l[2]]),ue}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,p,T){const P=function(re,ue,ge){const Ne=1/(1<<ge.z);return new a.$(re/a.Z*Ne+ge.x*Ne,ue/a.Z*Ne+ge.y*Ne)}(l,p,T.canonical),U=(Y=P.y,[a.bg(P.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-Y*Math.PI*2))-.5*Math.PI]);var Y;return this.getCircleRadiusCorrection()/Math.cos(U[1])}projectTileCoordinates(l,p,T,P){const U=T.canonical,Y=ws(l,p,U.x,U.y,U.z),re=1+(P?P(l,p):0)/a.br,ue=[Y[0]*re,Y[1]*re,Y[2]*re,1];a.ap(ue,ue,this._globeViewProjMatrixNoCorrection);const ge=this._cachedClippingPlane,Ne=ge[0]*Y[0]+ge[1]*Y[1]+ge[2]*Y[2]+ge[3]<0;return{point:new a.P(ue[0]/ue[3],ue[1]/ue[3]),signedDistanceFromCamera:ue[3],isOccluded:Ne}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=bo(this.worldSize,this.center.lat),p=a.b2(),T=a.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),a.aY(p,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const P=this.centerOffset;p[8]=2*-P.x/this._helper._width,p[9]=2*P.y/this._helper._height,this._projectionMatrix=a.aZ(p),this._globeProjMatrixInverted=a.b2(),a.aj(this._globeProjMatrixInverted,p),a.L(p,p,[0,0,-this.cameraToCenterDistance]),a.a_(p,p,this.rollInRadians),a.a$(p,p,-this.pitchInRadians),a.a_(p,p,this.bearingInRadians),a.L(p,p,[0,0,-l]);const U=a.bi();U[0]=l,U[1]=l,U[2]=l,a.a$(T,p,this.center.lat*Math.PI/180),a.bm(T,T,-this.center.lng*Math.PI/180),a.M(T,T,U),this._globeViewProjMatrixNoCorrection=T,a.a$(p,p,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bm(p,p,-this.center.lng*Math.PI/180),a.M(p,p,U),this._globeViewProjMatrix32f=new Float32Array(p),this._globeViewProjMatrixNoCorrectionInverted=a.b2(),a.aj(this._globeViewProjMatrixNoCorrectionInverted,T);const Y=a.bi();this._cameraPosition=a.bi(),this._cameraPosition[2]=this.cameraToCenterDistance/l,a.bj(this._cameraPosition,this._cameraPosition,Y,-this.rollInRadians),a.bk(this._cameraPosition,this._cameraPosition,Y,this.pitchInRadians),a.bj(this._cameraPosition,this._cameraPosition,Y,-this.bearingInRadians),a.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bk(this._cameraPosition,this._cameraPosition,Y,-this.center.lat*Math.PI/180),a.bl(this._cameraPosition,this._cameraPosition,Y,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const re=a.aZ(this._globeViewProjMatrixNoCorrectionInverted);a.M(re,re,[1,1,-1]),this._cachedFrustum=ui.fromInvProjectionMatrix(re)}calculateFogMatrix(l){a.w("calculateFogMatrix is not supported on globe projection.");const p=a.b2();return a.at(p),p}getVisibleUnwrappedCoordinates(l){return[new a.aW(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){if(!this._globeViewProjMatrixNoCorrection)return 1;const T=Wa(l);a.aO(T,T,1+p/a.br);const P=a.bh();return a.ap(P,[T[0],T[1],T[2],1],this._globeViewProjMatrixNoCorrection),P[2]/P[3]}populateCache(l){}getBounds(){const l=.5*this.width,p=.5*this.height,T=[new a.P(0,0),new a.P(l,0),new a.P(this.width,0),new a.P(this.width,p),new a.P(this.width,this.height),new a.P(l,this.height),new a.P(0,this.height),new a.P(0,p)],P=[];for(const qe of T)P.push(this.unprojectScreenPoint(qe));let U=0,Y=0,re=0,ue=0;const ge=this.center;for(const qe of P){const Ge=a.bn(ge.lng,qe.lng),ot=a.bn(ge.lat,qe.lat);Ge<Y&&(Y=Ge),Ge>U&&(U=Ge),ot<ue&&(ue=ot),ot>re&&(re=ot)}const Ne=[ge.lng+Y,ge.lat+ue,ge.lng+U,ge.lat+re];return this.isSurfacePointOnScreen([0,1,0])&&(Ne[3]=90,Ne[0]=-180,Ne[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(Ne[1]=-90,Ne[0]=-180,Ne[2]=180),new Ve(Ne)}getConstrained(l,p){const T=a.ae(l.lat,-85.051129,a.aJ),P=a.ae(+p,this.minZoom+Ea(0,T),this.maxZoom);return{center:new a.Q(l.lng,T),zoom:P}}calculateCenterFromCameraLngLatAlt(l,p,T,P){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,T,P)}setLocationAtPoint(l,p){const T=Wa(this.unprojectScreenPoint(p)),P=Wa(l),U=a.bi();a.bo(U);const Y=a.bi();a.bl(Y,T,U,-this.center.lng*Math.PI/180),a.bk(Y,Y,U,this.center.lat*Math.PI/180);const re=P[0]*P[0]+P[2]*P[2],ue=Y[0]*Y[0];if(re<ue)return;const ge=Math.sqrt(re-ue),Ne=-ge,qe=a.bp(P[0],P[2],Y[0],ge),Ge=a.bp(P[0],P[2],Y[0],Ne),ot=a.bi();a.bl(ot,P,U,-qe);const ft=a.bp(ot[1],ot[2],Y[1],Y[2]),Ot=a.bi();a.bl(Ot,P,U,-Ge);const Lt=a.bp(Ot[1],Ot[2],Y[1],Y[2]),Ft=.5*Math.PI,Xt=ft>=-Ft&&ft<=Ft,nn=Lt>=-Ft&&Lt<=Ft;let an,sn;if(Xt&&nn){const On=this.center.lng*Math.PI/180,nr=this.center.lat*Math.PI/180;a.bs(qe,On)+a.bs(ft,nr)<a.bs(Ge,On)+a.bs(Lt,nr)?(an=qe,sn=ft):(an=Ge,sn=Lt)}else if(Xt)an=qe,sn=ft;else{if(!nn)return;an=Ge,sn=Lt}const pn=an/Math.PI*180,hn=sn/Math.PI*180,Un=this.center.lat;this.setCenter(new a.Q(pn,a.ae(hn,-90,90))),this.setZoom(this.zoom+Ea(Un,this.center.lat))}locationToScreenPoint(l,p){const T=Wa(l);if(p){const P=p.getElevationForLngLatZoom(l,this._helper._tileZoom);a.aO(T,T,1+P/a.br)}return this._projectSurfacePointToScreen(T)}_projectSurfacePointToScreen(l){const p=a.bh();return a.ap(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],new a.P((.5*p[0]+.5)*this.width,(.5*-p[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,p){if(p){const T=p.pointCoordinate(l);if(T)return T}return a.$.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,p){var T;return(T=this.screenPointToMercatorCoordinate(l,p))===null||T===void 0?void 0:T.toLngLat()}isPointOnMapSurface(l,p){const T=this._cameraPosition,P=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(T,P)}getRayDirectionFromPixel(l){const p=a.bh();p[0]=l.x/this.width*2-1,p[1]=-1*(l.y/this.height*2-1),p[2]=1,p[3]=1,a.ap(p,p,this._globeViewProjMatrixNoCorrectionInverted),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3];const T=a.bi();T[0]=p[0]-this._cameraPosition[0],T[1]=p[1]-this._cameraPosition[1],T[2]=p[2]-this._cameraPosition[2];const P=a.bi();return a.aT(P,T),P}isSurfacePointVisible(l){const p=this._cachedClippingPlane;return p[0]*l[0]+p[1]*l[1]+p[2]*l[2]+p[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const p=a.bh();return a.ap(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[0]>-1&&p[0]<1&&p[1]>-1&&p[1]<1&&p[2]>-1&&p[2]<1}rayPlanetIntersection(l,p){const T=a.aV(l,p),P=a.bi(),U=a.bi();a.aO(U,p,T),a.aS(P,l,U);const Y=1-a.aV(P,P);if(Y<0)return null;const re=a.aV(l,l)-1,ue=-T+(T<0?1:-1)*Math.sqrt(Y),ge=re/ue,Ne=ue;return{tMin:Math.min(ge,Ne),tMax:Math.max(ge,Ne)}}unprojectScreenPoint(l){const p=this._cameraPosition,T=this.getRayDirectionFromPixel(l),P=this.rayPlanetIntersection(p,T);if(P){const ge=a.bi();a.aP(ge,p,[T[0]*P.tMin,T[1]*P.tMin,T[2]*P.tMin]);const Ne=a.bi();return a.aT(Ne,ge),Bu(Ne)}const U=this._cachedClippingPlane[0]*T[0]+this._cachedClippingPlane[1]*T[1]+this._cachedClippingPlane[2]*T[2],Y=-a.bq(this._cachedClippingPlane,p)/U,re=a.bi();if(Y>0)a.aP(re,p,[T[0]*Y,T[1]*Y,T[2]*Y]);else{const ge=a.bi();a.aP(ge,p,[2*T[0],2*T[1],2*T[2]]);const Ne=a.bq(this._cachedClippingPlane,ge);a.aS(re,ge,[this._cachedClippingPlane[0]*Ne,this._cachedClippingPlane[1]*Ne,this._cachedClippingPlane[2]*Ne])}const ue=a.bi();return a.aT(ue,re),Bu(ue)}getMatrixForModel(l,p){const T=a.Q.convert(l),P=1/a.br,U=a.b1();return a.bm(U,U,T.lng/180*Math.PI),a.a$(U,U,-T.lat/180*Math.PI),a.L(U,U,[0,0,1+p/a.br]),a.a$(U,U,.5*Math.PI),a.M(U,U,[P,P,P]),U}getProjectionDataForCustomLayer(l=!0){const p=this.getProjectionData({overscaledTileID:new a.Y(0,0,0,0,0),applyGlobeMatrix:l});return p.tileMercatorCoords=[0,0,1,1],p}getFastPathSimpleProjectionMatrix(l){}}class Tu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,T){return this._helper.interpolatePadding(l,p,T)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,T=!0){this._helper.resize(l,p,T)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,p){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=p,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Nr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,p)=>this.getConstrained(l,p)}),this._globeness=1,this._mercatorTransform=new Vr,this._verticalPerspectiveTransform=new Eu}clone(){const l=new Tu;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const p=this._mercatorTransform.getProjectionData(l),T=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?T.mainMatrix:p.mainMatrix,clippingPlane:T.clippingPlane,tileMercatorCoords:T.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:p.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return a.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,p,T){const P=this._mercatorTransform.getPitchedTextCorrection(l,p,T),U=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,p,T);return a.bc(P,U,this._globeness)}projectTileCoordinates(l,p,T,P){return this.currentTransform.projectTileCoordinates(l,p,T,P)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){return this.currentTransform.lngLatToCameraDepth(l,p)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}getConstrained(l,p){return this.currentTransform.getConstrained(l,p)}calculateCenterFromCameraLngLatAlt(l,p,T,P){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,T,P)}setLocationAtPoint(l,p){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,p),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,p),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,p){return this.currentTransform.locationToScreenPoint(l,p)}screenPointToMercatorCoordinate(l,p){return this.currentTransform.screenPointToMercatorCoordinate(l,p)}screenPointToLocation(l,p){return this.currentTransform.screenPointToLocation(l,p)}isPointOnMapSurface(l,p){return this.currentTransform.isPointOnMapSurface(l,p)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,p){return this.currentTransform.getMatrixForModel(l,p)}getProjectionDataForCustomLayer(l=!0){const p=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return p;const T=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return T.fallbackMatrix=p.mainMatrix,T}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class Xs{get useGlobeControls(){return!0}handlePanInertia(l,p){const T=ns(l,p);return Math.abs(T.lng-p.center.lng)>180&&(T.lng=p.center.lng+179.5*Math.sign(T.lng-p.center.lng)),{easingCenter:T,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,p){const T=l.around,P=p.screenPointToLocation(T);l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta);const U=p.zoom;l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta);const Y=p.zoom-U;if(Y===0)return;const re=a.bn(p.center.lng,P.lng),ue=re/(Math.abs(re/180)+1),ge=a.bn(p.center.lat,P.lat),Ne=p.getRayDirectionFromPixel(T),qe=p.cameraPosition,Ge=-1*a.aV(qe,Ne),ot=a.bi();a.aP(ot,qe,[Ne[0]*Ge,Ne[1]*Ge,Ne[2]*Ge]);const ft=a.bt(ot)-1,Ot=Math.exp(.5*-Math.max(ft-.3,0)),Lt=bo(p.worldSize,p.center.lat)/Math.min(p.width,p.height),Ft=a.bf(Lt,.9,.5,1,.25),Xt=(1-a.aI(-Y))*Math.min(Ot,Ft),nn=p.center.lat,an=p.zoom,sn=new a.Q(p.center.lng+ue*Xt,a.ae(p.center.lat+ge*Xt,-85.051129,a.aJ));p.setLocationAtPoint(P,T);const pn=p.center,hn=a.bf(Math.abs(re),45,85,0,1),Un=a.bf(Lt,.75,.35,0,1),On=Math.pow(Math.max(hn,Un),.25),nr=a.bn(pn.lng,sn.lng),ir=a.bn(pn.lat,sn.lat);p.setCenter(new a.Q(pn.lng+nr*On,pn.lat+ir*On).wrap()),p.setZoom(an+Ea(nn,p.center.lat))}handleMapControlsPan(l,p,T){if(!l.panDelta)return;const P=p.center.lat,U=p.zoom;p.setCenter(ns(l.panDelta,p).wrap()),p.setZoom(U+Ea(P,p.center.lat))}cameraForBoxAndBearing(l,p,T,P,U){const Y=Wi(l,p,T,P,U),re=p.left/U.width*2-1,ue=(U.width-p.right)/U.width*2-1,ge=p.top/U.height*-2+1,Ne=(U.height-p.bottom)/U.height*-2+1,qe=a.bn(T.getWest(),T.getEast())<0,Ge=qe?T.getEast():T.getWest(),ot=qe?T.getWest():T.getEast(),ft=Math.max(T.getNorth(),T.getSouth()),Ot=Math.min(T.getNorth(),T.getSouth()),Lt=Ge+.5*a.bn(Ge,ot),Ft=ft+.5*a.bn(ft,Ot),Xt=U.clone();Xt.setCenter(Y.center),Xt.setBearing(Y.bearing),Xt.setPitch(0),Xt.setRoll(0),Xt.setZoom(Y.zoom);const nn=Xt.modelViewProjectionMatrix,an=[Wa(T.getNorthWest()),Wa(T.getNorthEast()),Wa(T.getSouthWest()),Wa(T.getSouthEast()),Wa(new a.Q(ot,Ft)),Wa(new a.Q(Ge,Ft)),Wa(new a.Q(Lt,ft)),Wa(new a.Q(Lt,Ot))],sn=Wa(Y.center);let pn=Number.POSITIVE_INFINITY;for(const hn of an)re<0&&(pn=Xs.getLesserNonNegativeNonNull(pn,Xs.solveVectorScale(hn,sn,nn,"x",re))),ue>0&&(pn=Xs.getLesserNonNegativeNonNull(pn,Xs.solveVectorScale(hn,sn,nn,"x",ue))),ge>0&&(pn=Xs.getLesserNonNegativeNonNull(pn,Xs.solveVectorScale(hn,sn,nn,"y",ge))),Ne<0&&(pn=Xs.getLesserNonNegativeNonNull(pn,Xs.solveVectorScale(hn,sn,nn,"y",Ne)));if(Number.isFinite(pn)&&pn!==0)return Y.zoom=Xt.zoom+a.ab(pn),Y;hr()}handleJumpToCenterZoom(l,p){const T=l.center.lat,P=l.getConstrained(p.center?a.Q.convert(p.center):l.center,l.zoom).center;l.setCenter(P.wrap());const U=p.zoom!==void 0?+p.zoom:l.zoom+Ea(T,P.lat);l.zoom!==U&&l.setZoom(U)}handleEaseTo(l,p){const T=l.zoom,P=l.center,U=l.padding,Y={roll:l.roll,pitch:l.pitch,bearing:l.bearing},re={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},ue=p.zoom!==void 0,ge=!l.isPaddingEqual(p.padding);let Ne=!1;const qe=p.center?a.Q.convert(p.center):P,Ge=l.getConstrained(qe,T).center;Rr(l,Ge);const ot=l.clone();ot.setCenter(Ge),ot.setZoom(ue?+p.zoom:T+Ea(P.lat,qe.lat)),ot.setBearing(p.bearing);const ft=new a.P(a.ae(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ae(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));ot.setLocationAtPoint(Ge,ft);const Ot=(p.offset&&p.offsetAsPoint.mag())>0?ot.center:Ge,Lt=ue?+p.zoom:T+Ea(P.lat,Ot.lat),Ft=T+Ea(P.lat,0),Xt=Lt+Ea(Ot.lat,0),nn=a.bn(P.lng,Ot.lng),an=a.bn(P.lat,Ot.lat),sn=a.aI(Xt-Ft);return Ne=Lt!==T,{easeFunc:pn=>{if(a.b6(Y,re)||ii({startEulerAngles:Y,endEulerAngles:re,tr:l,k:pn,useSlerp:Y.roll!=re.roll}),ge&&l.interpolatePadding(U,p.padding,pn),p.around)a.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(p.around,p.aroundPoint);else{const hn=Xt>Ft?Math.min(2,sn):Math.max(.5,sn),Un=Math.pow(hn,1-pn),On=bl(P,nn,an,pn*Un);l.setCenter(On.wrap())}if(Ne){const hn=a.B.number(Ft,Xt,pn)+Ea(0,l.center.lat);l.setZoom(hn)}},isZooming:Ne,elevationCenter:Ot}}handleFlyTo(l,p){const T=p.zoom!==void 0,P=l.center,U=l.zoom,Y=l.padding,re=!l.isPaddingEqual(p.padding),ue=l.getConstrained(a.Q.convert(p.center||p.locationAtOffset),U).center,ge=T?+p.zoom:l.zoom+Ea(l.center.lat,ue.lat),Ne=l.clone();Ne.setCenter(ue),Ne.setZoom(ge),Ne.setBearing(p.bearing);const qe=new a.P(a.ae(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ae(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));Ne.setLocationAtPoint(ue,qe);const Ge=Ne.center;Rr(l,Ge);const ot=function(an,sn,pn){const hn=Wa(sn),Un=Wa(pn),On=a.aV(hn,Un),nr=Math.acos(On),ir=sl(an);return nr/(2*Math.PI)*ir}(l,P,Ge),ft=U+Ea(P.lat,0),Ot=ge+Ea(Ge.lat,0),Lt=a.aI(Ot-ft);let Ft;if(typeof p.minZoom=="number"){const an=+p.minZoom+Ea(Ge.lat,0),sn=Math.min(an,ft,Ot)+Ea(0,Ge.lat),pn=l.getConstrained(Ge,sn).zoom+Ea(Ge.lat,0);Ft=a.aI(pn-ft)}const Xt=a.bn(P.lng,Ge.lng),nn=a.bn(P.lat,Ge.lat);return{easeFunc:(an,sn,pn,hn)=>{const Un=bl(P,Xt,nn,pn);re&&l.interpolatePadding(Y,p.padding,an);const On=an===1?Ge:Un;l.setCenter(On.wrap());const nr=ft+a.ab(sn);l.setZoom(an===1?ge:nr+Ea(0,On.lat))},scaleOfZoom:Lt,targetCenter:Ge,scaleOfMinZoom:Ft,pixelPathLength:ot}}static solveVectorScale(l,p,T,P,U){const Y=P==="x"?[T[0],T[4],T[8],T[12]]:[T[1],T[5],T[9],T[13]],re=[T[3],T[7],T[11],T[15]],ue=l[0]*Y[0]+l[1]*Y[1]+l[2]*Y[2],ge=l[0]*re[0]+l[1]*re[1]+l[2]*re[2],Ne=p[0]*Y[0]+p[1]*Y[1]+p[2]*Y[2],qe=p[0]*re[0]+p[1]*re[1]+p[2]*re[2];return Ne+U*ge===ue+U*qe||re[3]*(ue-Ne)+Y[3]*(qe-ge)+ue*qe==Ne*ge?null:(Ne+Y[3]-U*qe-U*re[3])/(Ne-ue-U*qe+U*ge)}static getLesserNonNegativeNonNull(l,p){return p!==null&&p>=0&&p<l?p:l}}class $c{constructor(l){this._globe=l,this._mercatorCameraHelper=new ea,this._verticalPerspectiveCameraHelper=new Xs}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,p){return this.currentHelper.handlePanInertia(l,p)}handleMapControlsRollPitchBearingZoom(l,p){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,p)}handleMapControlsPan(l,p,T){this.currentHelper.handleMapControlsPan(l,p,T)}cameraForBoxAndBearing(l,p,T,P,U){return this.currentHelper.cameraForBoxAndBearing(l,p,T,P,U)}handleJumpToCenterZoom(l,p){this.currentHelper.handleJumpToCenterZoom(l,p)}handleEaseTo(l,p){return this.currentHelper.handleEaseTo(l,p)}handleFlyTo(l,p){return this.currentHelper.handleFlyTo(l,p)}}const Es=(B,l)=>a.x(B,l&&l.filter(p=>p.identifier!=="source.canvas")),Wl=a.bu();class Lo extends a.E{constructor(l,p={}){super(),this._rtlPluginLoaded=()=>{for(const T in this.sourceCaches){const P=this.sourceCaches[T].getSource().type;P!=="vector"&&P!=="geojson"||this.sourceCaches[T].reload()}},this.map=l,this.dispatcher=new We(De(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",(T,P)=>this.getGlyphs(T,P)),this.dispatcher.registerMessageHandler("GI",(T,P)=>this.getImages(T,P)),this.imageManager=new k,this.imageManager.setEventedParent(this),this.glyphManager=new ae(l._requestManager,p.localIdeographFontFamily),this.lineAtlas=new pe(256,512),this.crossTileSymbolIndex=new Sa,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bv,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.bw()),Zt().on(At,this._rtlPluginLoaded),this.on("data",T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const P=this.sourceCaches[T.sourceId];if(!P)return;const U=P.getSource();if(U&&U.vectorLayerIds)for(const Y in this._layers){const re=this._layers[Y];re.source===U.id&&this._validateLayer(re)}})}loadURL(l,p={},T){this.fire(new a.l("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const P=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const U=this._loadStyleRequest;a.j(P,this._loadStyleRequest).then(Y=>{this._loadStyleRequest=null,this._load(Y.data,p,T)}).catch(Y=>{this._loadStyleRequest=null,Y&&!U.signal.aborted&&this.fire(new a.k(Y))})}loadJSON(l,p={},T){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(l,p,T)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Wl,{validate:!1})}_load(l,p,T){var P,U;const Y=p.transformStyle?p.transformStyle(T,l):l;if(!p.validate||!Es(this,a.y(Y))){this._loaded=!0,this.stylesheet=Y;for(const re in Y.sources)this.addSource(re,Y.sources[re],{validate:!1});Y.sprite?this._loadSprite(Y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(Y.glyphs),this._createLayers(),this.light=new Se(this.stylesheet.light),this._setProjectionInternal(((P=this.stylesheet.projection)===null||P===void 0?void 0:P.type)||"mercator"),this.sky=new Te(this.stylesheet.sky),this.map.setTerrain((U=this.stylesheet.terrain)!==null&&U!==void 0?U:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){const l=a.bx(this.stylesheet.layers);this.dispatcher.broadcast("SL",l),this._order=l.map(p=>p.id),this._layers={},this._serializedLayers=null;for(const p of l){const T=a.by(p);T.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=T}}_loadSprite(l,p=!1,T=void 0){let P;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(U,Y,re,ue){return a._(this,void 0,void 0,function*(){const ge=G(U),Ne=re>1?"@2x":"",qe={},Ge={};for(const{id:ot,url:ft}of ge){const Ot=Y.transformRequest(W(ft,Ne,".json"),"SpriteJSON");qe[ot]=a.j(Ot,ue);const Lt=Y.transformRequest(W(ft,Ne,".png"),"SpriteImage");Ge[ot]=N.getImage(Lt,ue)}return yield Promise.all([...Object.values(qe),...Object.values(Ge)]),function(ot,ft){return a._(this,void 0,void 0,function*(){const Ot={};for(const Lt in ot){Ot[Lt]={};const Ft=w.getImageCanvasContext((yield ft[Lt]).data),Xt=(yield ot[Lt]).data;for(const nn in Xt){const{width:an,height:sn,x:pn,y:hn,sdf:Un,pixelRatio:On,stretchX:nr,stretchY:ir,content:tr,textFitWidth:Hr,textFitHeight:Br}=Xt[nn];Ot[Lt][nn]={data:null,pixelRatio:On,sdf:Un,stretchX:nr,stretchY:ir,content:tr,textFitWidth:Hr,textFitHeight:Br,spriteData:{width:an,height:sn,x:pn,y:hn,context:Ft}}}}return Ot})}(qe,Ge)})}(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(U=>{if(this._spriteRequest=null,U)for(const Y in U){this._spritesImagesIds[Y]=[];const re=this._spritesImagesIds[Y]?this._spritesImagesIds[Y].filter(ue=>!(ue in U)):[];for(const ue of re)this.imageManager.removeImage(ue),this._changedImages[ue]=!0;for(const ue in U[Y]){const ge=Y==="default"?ue:`${Y}:${ue}`;this._spritesImagesIds[Y].push(ge),ge in this.imageManager.images?this.imageManager.updateImage(ge,U[Y][ue],!1):this.imageManager.addImage(ge,U[Y][ue]),p&&(this._changedImages[ge]=!0)}}}).catch(U=>{this._spriteRequest=null,P=U,this.fire(new a.k(P))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),T&&T(P)})}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(l){const p=this.sourceCaches[l.source];if(!p)return;const T=l.sourceLayer;if(!T)return;const P=p.getSource();(P.type==="geojson"||P.vectorLayerIds&&P.vectorLayerIds.indexOf(T)===-1)&&this.fire(new a.k(new Error(`Source layer "${T}" does not exist on source "${P.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,p=!1){const T=this._serializedAllLayers();if(!l||l.length===0)return Object.values(p?a.bz(T):T);const P=[];for(const U of l)if(T[U]){const Y=p?a.bz(T[U]):T[U];P.push(Y)}return P}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const p=Object.keys(this._layers);for(const T of p){const P=this._layers[T];P.type!=="custom"&&(l[T]=P.serialize())}return l}hasTransitions(){var l,p,T;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((p=this.sky)===null||p===void 0)&&p.hasTransition()||!((T=this.projection)===null||T===void 0)&&T.hasTransition())return!0;for(const P in this.sourceCaches)if(this.sourceCaches[P].hasTransition())return!0;for(const P in this._layers)if(this._layers[P].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const p=this._changed;if(p){const P=Object.keys(this._updatedLayers),U=Object.keys(this._removedLayers);(P.length||U.length)&&this._updateWorkerLayers(P,U);for(const Y in this._updatedSources){const re=this._updatedSources[Y];if(re==="reload")this._reloadSource(Y);else{if(re!=="clear")throw new Error(`Invalid action ${re}`);this._clearSource(Y)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const Y in this._updatedPaintProps)this._layers[Y].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const T={};for(const P in this.sourceCaches){const U=this.sourceCaches[P];T[P]=U.used,U.used=!1}for(const P of this._order){const U=this._layers[P];U.recalculate(l,this._availableImages),!U.isHidden(l.zoom)&&U.source&&(this.sourceCaches[U.source].used=!0)}for(const P in T){const U=this.sourceCaches[P];!!T[P]!=!!U.used&&U.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:P}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,p&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,p={}){var T;this._checkLoaded();const P=this.serialize();if(l=p.transformStyle?p.transformStyle(P,l):l,((T=p.validate)===null||T===void 0||T)&&Es(this,a.y(l)))return!1;(l=a.bz(l)).layers=a.bx(l.layers);const U=a.bA(P,l),Y=this._getOperationsToPerform(U);if(Y.unimplemented.length>0)throw new Error(`Unimplemented: ${Y.unimplemented.join(", ")}.`);if(Y.operations.length===0)return!1;for(const re of Y.operations)re();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const p=[],T=[];for(const P of l)switch(P.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":p.push(()=>this.addLayer.apply(this,P.args));break;case"removeLayer":p.push(()=>this.removeLayer.apply(this,P.args));break;case"setPaintProperty":p.push(()=>this.setPaintProperty.apply(this,P.args));break;case"setLayoutProperty":p.push(()=>this.setLayoutProperty.apply(this,P.args));break;case"setFilter":p.push(()=>this.setFilter.apply(this,P.args));break;case"addSource":p.push(()=>this.addSource.apply(this,P.args));break;case"removeSource":p.push(()=>this.removeSource.apply(this,P.args));break;case"setLayerZoomRange":p.push(()=>this.setLayerZoomRange.apply(this,P.args));break;case"setLight":p.push(()=>this.setLight.apply(this,P.args));break;case"setGeoJSONSourceData":p.push(()=>this.setGeoJSONSourceData.apply(this,P.args));break;case"setGlyphs":p.push(()=>this.setGlyphs.apply(this,P.args));break;case"setSprite":p.push(()=>this.setSprite.apply(this,P.args));break;case"setTerrain":p.push(()=>this.map.setTerrain.apply(this,P.args));break;case"setSky":p.push(()=>this.setSky.apply(this,P.args));break;case"setProjection":this.setProjection.apply(this,P.args);break;case"setTransition":p.push(()=>{});break;default:T.push(P.command)}return{operations:p,unimplemented:T}}addImage(l,p){if(this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,p),this._afterImageUpdated(l)}updateImage(l,p){this.imageManager.updateImage(l,p)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,p,T={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.y.source,`sources.${l}`,p,null,T))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const P=this.sourceCaches[l]=new ze(l,p,this.dispatcher);P.style=this,P.setEventedParent(this,()=>({isSourceLoaded:P.loaded(),source:P.serialize(),sourceId:l})),P.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===l)return this.fire(new a.k(new Error(`Source "${l}" cannot be removed while layer "${T}" is using it.`)));const p=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],p.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,p){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const T=this.sourceCaches[l].getSource();if(T.type!=="geojson")throw new Error(`geojsonSource.type is ${T.type}, which is !== 'geojson`);T.setData(p),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,p,T={}){this._checkLoaded();const P=l.id;if(this.getLayer(P))return void this.fire(new a.k(new Error(`Layer "${P}" already exists on this map.`)));let U;if(l.type==="custom"){if(Es(this,a.bB(l)))return;U=a.by(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(P,l.source),l=a.bz(l),l=a.e(l,{source:P})),this._validate(a.y.layer,`layers.${P}`,l,{arrayIndex:-1},T))return;U=a.by(l),this._validateLayer(U),U.setEventedParent(this,{layer:{id:P}})}const Y=p?this._order.indexOf(p):this._order.length;if(p&&Y===-1)this.fire(new a.k(new Error(`Cannot add layer "${P}" before non-existing layer "${p}".`)));else{if(this._order.splice(Y,0,P),this._layerOrderChanged=!0,this._layers[P]=U,this._removedLayers[P]&&U.source&&U.type!=="custom"){const re=this._removedLayers[P];delete this._removedLayers[P],re.type!==U.type?this._updatedSources[U.source]="clear":(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause())}this._updateLayer(U),U.onAdd&&U.onAdd(this.map)}}moveLayer(l,p){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.k(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===p)return;const T=this._order.indexOf(l);this._order.splice(T,1);const P=p?this._order.indexOf(p):this._order.length;p&&P===-1?this.fire(new a.k(new Error(`Cannot move layer "${l}" before non-existing layer "${p}".`))):(this._order.splice(P,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const p=this._layers[l];if(!p)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${l}".`)));p.setEventedParent(null);const T=this._order.indexOf(l);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=p,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],p.onRemove&&p.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,p,T){this._checkLoaded();const P=this.getLayer(l);P?P.minzoom===p&&P.maxzoom===T||(p!=null&&(P.minzoom=p),T!=null&&(P.maxzoom=T),this._updateLayer(P)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,p,T={}){this._checkLoaded();const P=this.getLayer(l);if(P){if(!a.bC(P.filter,p))return p==null?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(a.y.filter,`layers.${P.id}.filter`,p,null,T)||(P.filter=a.bz(p),this._updateLayer(P)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.bz(this.getLayer(l).filter)}setLayoutProperty(l,p,T,P={}){this._checkLoaded();const U=this.getLayer(l);U?a.bC(U.getLayoutProperty(p),T)||(U.setLayoutProperty(p,T,P),this._updateLayer(U)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,p){const T=this.getLayer(l);if(T)return T.getLayoutProperty(p);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,p,T,P={}){this._checkLoaded();const U=this.getLayer(l);U?a.bC(U.getPaintProperty(p),T)||(U.setPaintProperty(p,T,P)&&this._updateLayer(U),this._changed=!0,this._updatedPaintProps[l]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,p){return this.getLayer(l).getPaintProperty(p)}setFeatureState(l,p){this._checkLoaded();const T=l.source,P=l.sourceLayer,U=this.sourceCaches[T];if(U===void 0)return void this.fire(new a.k(new Error(`The source '${T}' does not exist in the map's style.`)));const Y=U.getSource().type;Y==="geojson"&&P?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Y!=="vector"||P?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),U.setFeatureState(P,l.id,p)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,p){this._checkLoaded();const T=l.source,P=this.sourceCaches[T];if(P===void 0)return void this.fire(new a.k(new Error(`The source '${T}' does not exist in the map's style.`)));const U=P.getSource().type,Y=U==="vector"?l.sourceLayer:void 0;U!=="vector"||Y?p&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):P.removeFeatureState(Y,l.id,p):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const p=l.source,T=l.sourceLayer,P=this.sourceCaches[p];if(P!==void 0)return P.getSource().type!=="vector"||T?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),P.getFeatureState(T,l.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.bD(this.sourceCaches,U=>U.serialize()),p=this._serializeByIds(this._order,!0),T=this.map.getTerrain()||void 0,P=this.stylesheet;return a.bE({version:P.version,name:P.name,metadata:P.metadata,light:P.light,sky:P.sky,center:P.center,zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,sprite:P.sprite,glyphs:P.glyphs,transition:P.transition,projection:P.projection,sources:l,layers:p,terrain:T},U=>U!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const p=Y=>this._layers[Y].type==="fill-extrusion",T={},P=[];for(let Y=this._order.length-1;Y>=0;Y--){const re=this._order[Y];if(p(re)){T[re]=Y;for(const ue of l){const ge=ue[re];if(ge)for(const Ne of ge)P.push(Ne)}}}P.sort((Y,re)=>re.intersectionZ-Y.intersectionZ);const U=[];for(let Y=this._order.length-1;Y>=0;Y--){const re=this._order[Y];if(p(re))for(let ue=P.length-1;ue>=0;ue--){const ge=P[ue].feature;if(T[ge.layer.id]<Y)break;U.push(ge),P.pop()}else for(const ue of l){const ge=ue[re];if(ge)for(const Ne of ge)U.push(Ne.feature)}}return U}queryRenderedFeatures(l,p,T){p&&p.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",p.filter,null,p);const P={};if(p&&p.layers){if(!(Array.isArray(p.layers)||p.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ge of p.layers){const Ne=this._layers[ge];if(!Ne)return this.fire(new a.k(new Error(`The layer '${ge}' does not exist in the map's style and cannot be queried for features.`))),[];P[Ne.source]=!0}}const U=[];p.availableImages=this._availableImages;const Y=this._serializedAllLayers(),re=p.layers instanceof Set?p.layers:Array.isArray(p.layers)?new Set(p.layers):null,ue=Object.assign(Object.assign({},p),{layers:re});for(const ge in this.sourceCaches)p.layers&&!P[ge]||U.push(pt(this.sourceCaches[ge],this._layers,Y,l,ue,T,this.map.terrain?(Ne,qe,Ge)=>this.map.terrain.getElevation(Ne,qe,Ge):void 0));return this.placement&&U.push(function(ge,Ne,qe,Ge,ot,ft,Ot){const Lt={},Ft=ft.queryRenderedSymbols(Ge),Xt=[];for(const nn of Object.keys(Ft).map(Number))Xt.push(Ot[nn]);Xt.sort(st);for(const nn of Xt){const an=nn.featureIndex.lookupSymbolFeatures(Ft[nn.bucketInstanceId],Ne,nn.bucketIndex,nn.sourceLayerIndex,ot.filter,ot.layers,ot.availableImages,ge);for(const sn in an){const pn=Lt[sn]=Lt[sn]||[],hn=an[sn];hn.sort((Un,On)=>{const nr=nn.featureSortOrder;if(nr){const ir=nr.indexOf(Un.featureIndex);return nr.indexOf(On.featureIndex)-ir}return On.featureIndex-Un.featureIndex});for(const Un of hn)pn.push(Un)}}return function(nn,an,sn){for(const pn in nn)for(const hn of nn[pn])Ce(hn,sn[an[pn].source]);return nn}(Lt,ge,qe)}(this._layers,Y,this.sourceCaches,l,ue,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(U)}querySourceFeatures(l,p){p&&p.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",p.filter,null,p);const T=this.sourceCaches[l];return T?function(P,U){const Y=P.getRenderableIds().map(ge=>P.getTileByID(ge)),re=[],ue={};for(let ge=0;ge<Y.length;ge++){const Ne=Y[ge],qe=Ne.tileID.canonical.key;ue[qe]||(ue[qe]=!0,Ne.querySourceFeatures(re,U))}return re}(T,p):[]}getLight(){return this.light.getLight()}setLight(l,p={}){this._checkLoaded();const T=this.light.getLight();let P=!1;for(const Y in l)if(!a.bC(l[Y],T[Y])){P=!0;break}if(!P)return;const U={now:w.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,p),this.light.updateTransitions(U)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,p={}){this._checkLoaded();const T=this.getSky();let P=!1;if(!l&&!T)return;if(l&&!T)P=!0;else if(!l&&T)P=!0;else for(const Y in l)if(!a.bC(l[Y],T[Y])){P=!0;break}if(!P)return;const U={now:w.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,p),this.sky.updateTransitions(U)}_setProjectionInternal(l){const p=function(T){if(Array.isArray(T)){const P=new $l({type:T});return{projection:P,transform:new Tu,cameraHelper:new $c(P)}}switch(T){case"mercator":return{projection:new et,transform:new Vr,cameraHelper:new ea};case"globe":{const P=new $l({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:P,transform:new Tu,cameraHelper:new $c(P)}}case"vertical-perspective":return{projection:new Ws,transform:new Eu,cameraHelper:new Xs};default:return a.w(`Unknown projection name: ${T}. Falling back to mercator projection.`),{projection:new et,transform:new Vr,cameraHelper:new ea}}}(l);this.projection=p.projection,this.map.migrateProjection(p.transform,p.cameraHelper);for(const T in this.sourceCaches)this.sourceCaches[T].reload()}_validate(l,p,T,P,U={}){return(!U||U.validate!==!1)&&Es(this,l.call(a.y,a.e({key:p,style:this.serialize(),value:T,styleSpec:a.v},P)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Zt().off(At,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const T=this.sourceCaches[p];T.setEventedParent(null),T.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const p in this.sourceCaches)this.sourceCaches[p].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,p,T,P,U=!1){let Y=!1,re=!1;const ue={};for(const ge of this._order){const Ne=this._layers[ge];if(Ne.type!=="symbol")continue;if(!ue[Ne.source]){const Ge=this.sourceCaches[Ne.source];ue[Ne.source]=Ge.getRenderableIds(!0).map(ot=>Ge.getTileByID(ot)).sort((ot,ft)=>ft.tileID.overscaledZ-ot.tileID.overscaledZ||(ot.tileID.isLessThan(ft.tileID)?-1:1))}const qe=this.crossTileSymbolIndex.addLayer(Ne,ue[Ne.source],l.center.lng);Y=Y||qe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((U=U||this._layerOrderChanged||T===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.now(),l.zoom))&&(this.pauseablePlacement=new _a(l,this.map.terrain,this._order,U,p,T,P,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ue),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.now()),re=!0),Y&&this.pauseablePlacement.placement.setStale()),re||Y)for(const ge of this._order){const Ne=this._layers[ge];Ne.type==="symbol"&&this.placement.updateLayerOpacities(Ne,ue[Ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,p){return a._(this,void 0,void 0,function*(){const T=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const P=this.sourceCaches[p.source];return P&&P.setDependencies(p.tileID.key,p.type,p.icons),T})}getGlyphs(l,p){return a._(this,void 0,void 0,function*(){const T=yield this.glyphManager.getGlyphs(p.stacks),P=this.sourceCaches[p.source];return P&&P.setDependencies(p.tileID.key,p.type,[""]),T})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,p={}){this._checkLoaded(),l&&this._validate(a.y.glyphs,"glyphs",l,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,p,T={},P){this._checkLoaded();const U=[{id:l,url:p}],Y=[...G(this.stylesheet.sprite),...U];this._validate(a.y.sprite,"sprite",Y,null,T)||(this.stylesheet.sprite=Y,this._loadSprite(U,!0,P))}removeSprite(l){this._checkLoaded();const p=G(this.stylesheet.sprite);if(p.find(T=>T.id===l)){if(this._spritesImagesIds[l])for(const T of this._spritesImagesIds[l])this.imageManager.removeImage(T),this._changedImages[T]=!0;p.splice(p.findIndex(T=>T.id===l),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return G(this.stylesheet.sprite)}setSprite(l,p={},T){this._checkLoaded(),l&&this._validate(a.y.sprite,"sprite",l,null,p)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,T):(this._unloadSprite(),T&&T(null)))}}var zu=a.aD([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class au{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,p,T,P,U,Y,re,ue,ge){this.context=l;let Ne=this.boundPaintVertexBuffers.length!==P.length;for(let qe=0;!Ne&&qe<P.length;qe++)this.boundPaintVertexBuffers[qe]!==P[qe]&&(Ne=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==T||Ne||this.boundIndexBuffer!==U||this.boundVertexOffset!==Y||this.boundDynamicVertexBuffer!==re||this.boundDynamicVertexBuffer2!==ue||this.boundDynamicVertexBuffer3!==ge?this.freshBind(p,T,P,U,Y,re,ue,ge):(l.bindVertexArray.set(this.vao),re&&re.bind(),U&&U.dynamicDraw&&U.bind(),ue&&ue.bind(),ge&&ge.bind())}freshBind(l,p,T,P,U,Y,re,ue){const ge=l.numAttributes,Ne=this.context,qe=Ne.gl;this.vao&&this.destroy(),this.vao=Ne.createVertexArray(),Ne.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=T,this.boundIndexBuffer=P,this.boundVertexOffset=U,this.boundDynamicVertexBuffer=Y,this.boundDynamicVertexBuffer2=re,this.boundDynamicVertexBuffer3=ue,p.enableAttributes(qe,l);for(const Ge of T)Ge.enableAttributes(qe,l);Y&&Y.enableAttributes(qe,l),re&&re.enableAttributes(qe,l),ue&&ue.enableAttributes(qe,l),p.bind(),p.setVertexAttribPointers(qe,l,U);for(const Ge of T)Ge.bind(),Ge.setVertexAttribPointers(qe,l,U);Y&&(Y.bind(),Y.setVertexAttribPointers(qe,l,U)),P&&P.bind(),re&&(re.bind(),re.setVertexAttribPointers(qe,l,U)),ue&&(ue.bind(),ue.setVertexAttribPointers(qe,l,U)),Ne.currentNumAttributes=ge}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Xo=(B,l,p,T,P)=>({u_texture:0,u_ele_delta:B,u_fog_matrix:l,u_fog_color:p?p.properties.get("fog-color"):a.b7.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:P?0:p?p.calculateFogBlendOpacity(T):0,u_horizon_color:p?p.properties.get("horizon-color"):a.b7.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1,u_is_globe_mode:P?1:0}),Uu={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function fe(B){const l=[];for(let p=0;p<B.length;p++){if(B[p]===null)continue;const T=B[p].split(" ");l.push(T.pop())}return l}class nt{constructor(l,p,T,P,U,Y,re,ue){const ge=l.gl;this.program=ge.createProgram();const Ne=fe(p.staticAttributes),qe=T?T.getBinderAttributes():[],Ge=Ne.concat(qe),ot=Ui.prelude.staticUniforms?fe(Ui.prelude.staticUniforms):[],ft=re.staticUniforms?fe(re.staticUniforms):[],Ot=p.staticUniforms?fe(p.staticUniforms):[],Lt=T?T.getBinderUniforms():[],Ft=ot.concat(ft).concat(Ot).concat(Lt),Xt=[];for(const On of Ft)Xt.indexOf(On)<0&&Xt.push(On);const nn=T?T.defines():[];Fo(ge)&&nn.unshift("#version 300 es"),U&&nn.push("#define OVERDRAW_INSPECTOR;"),Y&&nn.push("#define TERRAIN3D;"),ue&&nn.push(ue);let an=nn.concat(Ui.prelude.fragmentSource,re.fragmentSource,p.fragmentSource).join(`
`),sn=nn.concat(Ui.prelude.vertexSource,re.vertexSource,p.vertexSource).join(`
`);Fo(ge)||(an=function(On){return On.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(an),sn=function(On){return On.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(sn));const pn=ge.createShader(ge.FRAGMENT_SHADER);if(ge.isContextLost())return void(this.failedToCreate=!0);if(ge.shaderSource(pn,an),ge.compileShader(pn),!ge.getShaderParameter(pn,ge.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ge.getShaderInfoLog(pn)}`);ge.attachShader(this.program,pn);const hn=ge.createShader(ge.VERTEX_SHADER);if(ge.isContextLost())return void(this.failedToCreate=!0);if(ge.shaderSource(hn,sn),ge.compileShader(hn),!ge.getShaderParameter(hn,ge.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ge.getShaderInfoLog(hn)}`);ge.attachShader(this.program,hn),this.attributes={};const Un={};this.numAttributes=Ge.length;for(let On=0;On<this.numAttributes;On++)Ge[On]&&(ge.bindAttribLocation(this.program,On,Ge[On]),this.attributes[Ge[On]]=On);if(ge.linkProgram(this.program),!ge.getProgramParameter(this.program,ge.LINK_STATUS))throw new Error(`Program failed to link: ${ge.getProgramInfoLog(this.program)}`);ge.deleteShader(hn),ge.deleteShader(pn);for(let On=0;On<Xt.length;On++){const nr=Xt[On];if(nr&&!Un[nr]){const ir=ge.getUniformLocation(this.program,nr);ir&&(Un[nr]=ir)}}this.fixedUniforms=P(l,Un),this.terrainUniforms=((On,nr)=>({u_depth:new a.bF(On,nr.u_depth),u_terrain:new a.bF(On,nr.u_terrain),u_terrain_dim:new a.b8(On,nr.u_terrain_dim),u_terrain_matrix:new a.bH(On,nr.u_terrain_matrix),u_terrain_unpack:new a.bI(On,nr.u_terrain_unpack),u_terrain_exaggeration:new a.b8(On,nr.u_terrain_exaggeration)}))(l,Un),this.projectionUniforms=((On,nr)=>({u_projection_matrix:new a.bH(On,nr.u_projection_matrix),u_projection_tile_mercator_coords:new a.bI(On,nr.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bI(On,nr.u_projection_clipping_plane),u_projection_transition:new a.b8(On,nr.u_projection_transition),u_projection_fallback_matrix:new a.bH(On,nr.u_projection_fallback_matrix)}))(l,Un),this.binderUniforms=T?T.getUniforms(l,Un):[]}draw(l,p,T,P,U,Y,re,ue,ge,Ne,qe,Ge,ot,ft,Ot,Lt,Ft,Xt,nn){const an=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(T),l.setStencilMode(P),l.setColorMode(U),l.setCullFace(Y),ue){l.activeTexture.set(an.TEXTURE2),an.bindTexture(an.TEXTURE_2D,ue.depthTexture),l.activeTexture.set(an.TEXTURE3),an.bindTexture(an.TEXTURE_2D,ue.texture);for(const pn in this.terrainUniforms)this.terrainUniforms[pn].set(ue[pn])}if(ge)for(const pn in ge)this.projectionUniforms[Uu[pn]].set(ge[pn]);if(re)for(const pn in this.fixedUniforms)this.fixedUniforms[pn].set(re[pn]);Lt&&Lt.setUniforms(l,this.binderUniforms,ft,{zoom:Ot});let sn=0;switch(p){case an.LINES:sn=2;break;case an.TRIANGLES:sn=3;break;case an.LINE_STRIP:sn=1}for(const pn of ot.get()){const hn=pn.vaos||(pn.vaos={});(hn[Ne]||(hn[Ne]=new au)).bind(l,this,qe,Lt?Lt.getPaintVertexBuffers():[],Ge,pn.vertexOffset,Ft,Xt,nn),an.drawElements(p,pn.primitiveLength*sn,an.UNSIGNED_SHORT,pn.primitiveOffset*sn*2)}}}function Wt(B,l,p){const T=1/a.aw(p,1,l.transform.tileZoom),P=Math.pow(2,p.tileID.overscaledZ),U=p.tileSize*Math.pow(2,l.transform.tileZoom)/P,Y=U*(p.tileID.canonical.x+p.tileID.wrap*P),re=U*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[T,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[Y>>16,re>>16],u_pixel_coord_lower:[65535&Y,65535&re]}}const un=(B,l,p,T)=>{const P=B.style.light,U=P.properties.get("position"),Y=[U.x,U.y,U.z],re=a.bL();P.properties.get("anchor")==="viewport"&&a.bM(re,B.transform.bearingInRadians),a.bN(Y,Y,re);const ue=B.transform.transformLightDirection(Y),ge=P.properties.get("color");return{u_lightpos:Y,u_lightpos_globe:ue,u_lightintensity:P.properties.get("intensity"),u_lightcolor:[ge.r,ge.g,ge.b],u_vertical_gradient:+l,u_opacity:p,u_fill_translate:T}},kn=(B,l,p,T,P,U,Y)=>a.e(un(B,l,p,T),Wt(U,B,Y),{u_height_factor:-Math.pow(2,P.overscaledZ)/Y.tileSize/8}),Kn=(B,l,p,T)=>a.e(Wt(l,B,p),{u_fill_translate:T}),Pr=(B,l)=>({u_world:B,u_fill_translate:l}),oi=(B,l,p,T,P)=>a.e(Kn(B,l,p,P),{u_world:T}),Ci=(B,l,p,T,P)=>{const U=B.transform;let Y,re,ue=0;if(p.paint.get("circle-pitch-alignment")==="map"){const ge=a.aw(l,1,U.zoom);Y=!0,re=[ge,ge],ue=ge/(a.Z*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*P}else Y=!1,re=U.pixelsToGLUnits;return{u_camera_to_center_distance:U.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+Y,u_device_pixel_ratio:B.pixelRatio,u_extrude_scale:re,u_globe_extrude_scale:ue,u_translate:T}},Zi=B=>({u_pixel_extrude_scale:[1/B.width,1/B.height]}),Oi=B=>({u_viewport_size:[B.width,B.height]}),qi=(B,l=1)=>({u_color:B,u_overlay:0,u_overlay_scale:l}),za=(B,l,p,T)=>{const P=a.aw(B,1,l)/(a.Z*Math.pow(2,B.tileID.overscaledZ))*2*Math.PI*T;return{u_extrude_scale:a.aw(B,1,l),u_intensity:p,u_globe_extrude_scale:P}},ro=(B,l,p,T)=>{const P=a.K();a.bO(P,0,B.width,B.height,0,0,1);const U=B.context.gl;return{u_matrix:P,u_world:[U.drawingBufferWidth,U.drawingBufferHeight],u_image:p,u_color_ramp:T,u_opacity:l.paint.get("heatmap-opacity")}},Ja=(B,l,p)=>{const T=p.paint.get("hillshade-shadow-color"),P=p.paint.get("hillshade-highlight-color"),U=p.paint.get("hillshade-accent-color");let Y=p.paint.get("hillshade-illumination-direction")*(Math.PI/180);return p.paint.get("hillshade-illumination-anchor")==="viewport"&&(Y+=B.transform.bearingInRadians),{u_image:0,u_latrange:co(0,l.tileID),u_light:[p.paint.get("hillshade-exaggeration"),Y],u_shadow:T,u_highlight:P,u_accent:U}},zo=(B,l)=>{const p=l.stride,T=a.K();return a.bO(T,0,a.Z,-8192,0,0,1),a.L(T,T,[0,-8192,0]),{u_matrix:T,u_image:1,u_dimension:[p,p],u_zoom:B.overscaledZ,u_unpack:l.getUnpackVector()}};function co(B,l){const p=Math.pow(2,l.canonical.z),T=l.canonical.y;return[new a.$(0,T/p).toLngLat().lat,new a.$(0,(T+1)/p).toLngLat().lat]}const Ts=(B,l,p,T)=>{const P=B.transform;return{u_translation:Xl(B,l,p),u_ratio:T/a.aw(l,1,P.zoom),u_device_pixel_ratio:B.pixelRatio,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},ll=(B,l,p,T,P)=>a.e(Ts(B,l,p,T),{u_image:0,u_image_height:P}),Ys=(B,l,p,T,P)=>{const U=B.transform,Y=Ll(l,U);return{u_translation:Xl(B,l,p),u_texsize:l.imageAtlasTexture.size,u_ratio:T/a.aw(l,1,U.zoom),u_device_pixel_ratio:B.pixelRatio,u_image:0,u_scale:[Y,P.fromScale,P.toScale],u_fade:P.t,u_units_to_pixels:[1/U.pixelsToGLUnits[0],1/U.pixelsToGLUnits[1]]}},Wc=(B,l,p,T,P,U)=>{const Y=B.lineAtlas,re=Ll(l,B.transform),ue=p.layout.get("line-cap")==="round",ge=Y.getDash(P.from,ue),Ne=Y.getDash(P.to,ue),qe=ge.width*U.fromScale,Ge=Ne.width*U.toScale;return a.e(Ts(B,l,p,T),{u_patternscale_a:[re/qe,-ge.height/2],u_patternscale_b:[re/Ge,-Ne.height/2],u_sdfgamma:Y.width/(256*Math.min(qe,Ge)*B.pixelRatio)/2,u_image:0,u_tex_y_a:ge.y,u_tex_y_b:Ne.y,u_mix:U.t})};function Ll(B,l){return 1/a.aw(B,1,l.tileZoom)}function Xl(B,l,p){return a.ax(B.transform,l,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const Tc=(B,l,p,T,P)=>{return{u_tl_parent:B,u_scale_parent:l,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*T.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:T.paint.get("raster-brightness-min"),u_brightness_high:T.paint.get("raster-brightness-max"),u_saturation_factor:(Y=T.paint.get("raster-saturation"),Y>0?1-1/(1.001-Y):-Y),u_contrast_factor:(U=T.paint.get("raster-contrast"),U>0?1/(1-U):1+U),u_spin_weights:Yl(T.paint.get("raster-hue-rotate")),u_coords_top:[P[0].x,P[0].y,P[1].x,P[1].y],u_coords_bottom:[P[3].x,P[3].y,P[2].x,P[2].y]};var U,Y};function Yl(B){B*=Math.PI/180;const l=Math.sin(B),p=Math.cos(B);return[(2*p+1)/3,(-Math.sqrt(3)*l-p+1)/3,(Math.sqrt(3)*l-p+1)/3]}const Nl=(B,l,p,T,P,U,Y,re,ue,ge,Ne,qe,Ge)=>{const ot=Y.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:ot.cameraToCenterDistance,u_pitch:ot.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:ot.width/ot.height,u_fade_change:Y.options.fadeDuration?Y.symbolFadeChange:1,u_label_plane_matrix:re,u_coord_matrix:ue,u_is_text:+Ne,u_pitch_with_map:+T,u_is_along_line:P,u_is_variable_anchor:U,u_texsize:qe,u_texture:0,u_translation:ge,u_pitched_scale:Ge}},ju=(B,l,p,T,P,U,Y,re,ue,ge,Ne,qe,Ge,ot)=>{const ft=Y.transform;return a.e(Nl(B,l,p,T,P,U,Y,re,ue,ge,Ne,qe,ot),{u_gamma_scale:T?Math.cos(ft.pitch*Math.PI/180)*ft.cameraToCenterDistance:1,u_device_pixel_ratio:Y.pixelRatio,u_is_halo:1})},io=(B,l,p,T,P,U,Y,re,ue,ge,Ne,qe,Ge)=>a.e(ju(B,l,p,T,P,U,Y,re,ue,ge,!0,Ne,0,Ge),{u_texsize_icon:qe,u_texture_icon:1}),Gu=(B,l)=>({u_opacity:B,u_color:l}),Zs=(B,l,p,T,P)=>a.e(function(U,Y,re,ue){const ge=re.imageManager.getPattern(U.from.toString()),Ne=re.imageManager.getPattern(U.to.toString()),{width:qe,height:Ge}=re.imageManager.getPixelSize(),ot=Math.pow(2,ue.tileID.overscaledZ),ft=ue.tileSize*Math.pow(2,re.transform.tileZoom)/ot,Ot=ft*(ue.tileID.canonical.x+ue.tileID.wrap*ot),Lt=ft*ue.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ge.tl,u_pattern_br_a:ge.br,u_pattern_tl_b:Ne.tl,u_pattern_br_b:Ne.br,u_texsize:[qe,Ge],u_mix:Y.t,u_pattern_size_a:ge.displaySize,u_pattern_size_b:Ne.displaySize,u_scale_a:Y.fromScale,u_scale_b:Y.toScale,u_tile_units_to_pixels:1/a.aw(ue,1,re.transform.tileZoom),u_pixel_coord_upper:[Ot>>16,Lt>>16],u_pixel_coord_lower:[65535&Ot,65535&Lt]}}(p,P,l,T),{u_opacity:B}),Cs=(B,l)=>{},Vu={fillExtrusion:(B,l)=>({u_lightpos:new a.bJ(B,l.u_lightpos),u_lightpos_globe:new a.bJ(B,l.u_lightpos_globe),u_lightintensity:new a.b8(B,l.u_lightintensity),u_lightcolor:new a.bJ(B,l.u_lightcolor),u_vertical_gradient:new a.b8(B,l.u_vertical_gradient),u_opacity:new a.b8(B,l.u_opacity),u_fill_translate:new a.bK(B,l.u_fill_translate)}),fillExtrusionPattern:(B,l)=>({u_lightpos:new a.bJ(B,l.u_lightpos),u_lightpos_globe:new a.bJ(B,l.u_lightpos_globe),u_lightintensity:new a.b8(B,l.u_lightintensity),u_lightcolor:new a.bJ(B,l.u_lightcolor),u_vertical_gradient:new a.b8(B,l.u_vertical_gradient),u_height_factor:new a.b8(B,l.u_height_factor),u_opacity:new a.b8(B,l.u_opacity),u_fill_translate:new a.bK(B,l.u_fill_translate),u_image:new a.bF(B,l.u_image),u_texsize:new a.bK(B,l.u_texsize),u_pixel_coord_upper:new a.bK(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bK(B,l.u_pixel_coord_lower),u_scale:new a.bJ(B,l.u_scale),u_fade:new a.b8(B,l.u_fade)}),fill:(B,l)=>({u_fill_translate:new a.bK(B,l.u_fill_translate)}),fillPattern:(B,l)=>({u_image:new a.bF(B,l.u_image),u_texsize:new a.bK(B,l.u_texsize),u_pixel_coord_upper:new a.bK(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bK(B,l.u_pixel_coord_lower),u_scale:new a.bJ(B,l.u_scale),u_fade:new a.b8(B,l.u_fade),u_fill_translate:new a.bK(B,l.u_fill_translate)}),fillOutline:(B,l)=>({u_world:new a.bK(B,l.u_world),u_fill_translate:new a.bK(B,l.u_fill_translate)}),fillOutlinePattern:(B,l)=>({u_world:new a.bK(B,l.u_world),u_image:new a.bF(B,l.u_image),u_texsize:new a.bK(B,l.u_texsize),u_pixel_coord_upper:new a.bK(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bK(B,l.u_pixel_coord_lower),u_scale:new a.bJ(B,l.u_scale),u_fade:new a.b8(B,l.u_fade),u_fill_translate:new a.bK(B,l.u_fill_translate)}),circle:(B,l)=>({u_camera_to_center_distance:new a.b8(B,l.u_camera_to_center_distance),u_scale_with_map:new a.bF(B,l.u_scale_with_map),u_pitch_with_map:new a.bF(B,l.u_pitch_with_map),u_extrude_scale:new a.bK(B,l.u_extrude_scale),u_device_pixel_ratio:new a.b8(B,l.u_device_pixel_ratio),u_globe_extrude_scale:new a.b8(B,l.u_globe_extrude_scale),u_translate:new a.bK(B,l.u_translate)}),collisionBox:(B,l)=>({u_pixel_extrude_scale:new a.bK(B,l.u_pixel_extrude_scale)}),collisionCircle:(B,l)=>({u_viewport_size:new a.bK(B,l.u_viewport_size)}),debug:(B,l)=>({u_color:new a.bG(B,l.u_color),u_overlay:new a.bF(B,l.u_overlay),u_overlay_scale:new a.b8(B,l.u_overlay_scale)}),depth:Cs,clippingMask:Cs,heatmap:(B,l)=>({u_extrude_scale:new a.b8(B,l.u_extrude_scale),u_intensity:new a.b8(B,l.u_intensity),u_globe_extrude_scale:new a.b8(B,l.u_globe_extrude_scale)}),heatmapTexture:(B,l)=>({u_matrix:new a.bH(B,l.u_matrix),u_world:new a.bK(B,l.u_world),u_image:new a.bF(B,l.u_image),u_color_ramp:new a.bF(B,l.u_color_ramp),u_opacity:new a.b8(B,l.u_opacity)}),hillshade:(B,l)=>({u_image:new a.bF(B,l.u_image),u_latrange:new a.bK(B,l.u_latrange),u_light:new a.bK(B,l.u_light),u_shadow:new a.bG(B,l.u_shadow),u_highlight:new a.bG(B,l.u_highlight),u_accent:new a.bG(B,l.u_accent)}),hillshadePrepare:(B,l)=>({u_matrix:new a.bH(B,l.u_matrix),u_image:new a.bF(B,l.u_image),u_dimension:new a.bK(B,l.u_dimension),u_zoom:new a.b8(B,l.u_zoom),u_unpack:new a.bI(B,l.u_unpack)}),line:(B,l)=>({u_translation:new a.bK(B,l.u_translation),u_ratio:new a.b8(B,l.u_ratio),u_device_pixel_ratio:new a.b8(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bK(B,l.u_units_to_pixels)}),lineGradient:(B,l)=>({u_translation:new a.bK(B,l.u_translation),u_ratio:new a.b8(B,l.u_ratio),u_device_pixel_ratio:new a.b8(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bK(B,l.u_units_to_pixels),u_image:new a.bF(B,l.u_image),u_image_height:new a.b8(B,l.u_image_height)}),linePattern:(B,l)=>({u_translation:new a.bK(B,l.u_translation),u_texsize:new a.bK(B,l.u_texsize),u_ratio:new a.b8(B,l.u_ratio),u_device_pixel_ratio:new a.b8(B,l.u_device_pixel_ratio),u_image:new a.bF(B,l.u_image),u_units_to_pixels:new a.bK(B,l.u_units_to_pixels),u_scale:new a.bJ(B,l.u_scale),u_fade:new a.b8(B,l.u_fade)}),lineSDF:(B,l)=>({u_translation:new a.bK(B,l.u_translation),u_ratio:new a.b8(B,l.u_ratio),u_device_pixel_ratio:new a.b8(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bK(B,l.u_units_to_pixels),u_patternscale_a:new a.bK(B,l.u_patternscale_a),u_patternscale_b:new a.bK(B,l.u_patternscale_b),u_sdfgamma:new a.b8(B,l.u_sdfgamma),u_image:new a.bF(B,l.u_image),u_tex_y_a:new a.b8(B,l.u_tex_y_a),u_tex_y_b:new a.b8(B,l.u_tex_y_b),u_mix:new a.b8(B,l.u_mix)}),raster:(B,l)=>({u_tl_parent:new a.bK(B,l.u_tl_parent),u_scale_parent:new a.b8(B,l.u_scale_parent),u_buffer_scale:new a.b8(B,l.u_buffer_scale),u_fade_t:new a.b8(B,l.u_fade_t),u_opacity:new a.b8(B,l.u_opacity),u_image0:new a.bF(B,l.u_image0),u_image1:new a.bF(B,l.u_image1),u_brightness_low:new a.b8(B,l.u_brightness_low),u_brightness_high:new a.b8(B,l.u_brightness_high),u_saturation_factor:new a.b8(B,l.u_saturation_factor),u_contrast_factor:new a.b8(B,l.u_contrast_factor),u_spin_weights:new a.bJ(B,l.u_spin_weights),u_coords_top:new a.bI(B,l.u_coords_top),u_coords_bottom:new a.bI(B,l.u_coords_bottom)}),symbolIcon:(B,l)=>({u_is_size_zoom_constant:new a.bF(B,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bF(B,l.u_is_size_feature_constant),u_size_t:new a.b8(B,l.u_size_t),u_size:new a.b8(B,l.u_size),u_camera_to_center_distance:new a.b8(B,l.u_camera_to_center_distance),u_pitch:new a.b8(B,l.u_pitch),u_rotate_symbol:new a.bF(B,l.u_rotate_symbol),u_aspect_ratio:new a.b8(B,l.u_aspect_ratio),u_fade_change:new a.b8(B,l.u_fade_change),u_label_plane_matrix:new a.bH(B,l.u_label_plane_matrix),u_coord_matrix:new a.bH(B,l.u_coord_matrix),u_is_text:new a.bF(B,l.u_is_text),u_pitch_with_map:new a.bF(B,l.u_pitch_with_map),u_is_along_line:new a.bF(B,l.u_is_along_line),u_is_variable_anchor:new a.bF(B,l.u_is_variable_anchor),u_texsize:new a.bK(B,l.u_texsize),u_texture:new a.bF(B,l.u_texture),u_translation:new a.bK(B,l.u_translation),u_pitched_scale:new a.b8(B,l.u_pitched_scale)}),symbolSDF:(B,l)=>({u_is_size_zoom_constant:new a.bF(B,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bF(B,l.u_is_size_feature_constant),u_size_t:new a.b8(B,l.u_size_t),u_size:new a.b8(B,l.u_size),u_camera_to_center_distance:new a.b8(B,l.u_camera_to_center_distance),u_pitch:new a.b8(B,l.u_pitch),u_rotate_symbol:new a.bF(B,l.u_rotate_symbol),u_aspect_ratio:new a.b8(B,l.u_aspect_ratio),u_fade_change:new a.b8(B,l.u_fade_change),u_label_plane_matrix:new a.bH(B,l.u_label_plane_matrix),u_coord_matrix:new a.bH(B,l.u_coord_matrix),u_is_text:new a.bF(B,l.u_is_text),u_pitch_with_map:new a.bF(B,l.u_pitch_with_map),u_is_along_line:new a.bF(B,l.u_is_along_line),u_is_variable_anchor:new a.bF(B,l.u_is_variable_anchor),u_texsize:new a.bK(B,l.u_texsize),u_texture:new a.bF(B,l.u_texture),u_gamma_scale:new a.b8(B,l.u_gamma_scale),u_device_pixel_ratio:new a.b8(B,l.u_device_pixel_ratio),u_is_halo:new a.bF(B,l.u_is_halo),u_translation:new a.bK(B,l.u_translation),u_pitched_scale:new a.b8(B,l.u_pitched_scale)}),symbolTextAndIcon:(B,l)=>({u_is_size_zoom_constant:new a.bF(B,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bF(B,l.u_is_size_feature_constant),u_size_t:new a.b8(B,l.u_size_t),u_size:new a.b8(B,l.u_size),u_camera_to_center_distance:new a.b8(B,l.u_camera_to_center_distance),u_pitch:new a.b8(B,l.u_pitch),u_rotate_symbol:new a.bF(B,l.u_rotate_symbol),u_aspect_ratio:new a.b8(B,l.u_aspect_ratio),u_fade_change:new a.b8(B,l.u_fade_change),u_label_plane_matrix:new a.bH(B,l.u_label_plane_matrix),u_coord_matrix:new a.bH(B,l.u_coord_matrix),u_is_text:new a.bF(B,l.u_is_text),u_pitch_with_map:new a.bF(B,l.u_pitch_with_map),u_is_along_line:new a.bF(B,l.u_is_along_line),u_is_variable_anchor:new a.bF(B,l.u_is_variable_anchor),u_texsize:new a.bK(B,l.u_texsize),u_texsize_icon:new a.bK(B,l.u_texsize_icon),u_texture:new a.bF(B,l.u_texture),u_texture_icon:new a.bF(B,l.u_texture_icon),u_gamma_scale:new a.b8(B,l.u_gamma_scale),u_device_pixel_ratio:new a.b8(B,l.u_device_pixel_ratio),u_is_halo:new a.bF(B,l.u_is_halo),u_translation:new a.bK(B,l.u_translation),u_pitched_scale:new a.b8(B,l.u_pitched_scale)}),background:(B,l)=>({u_opacity:new a.b8(B,l.u_opacity),u_color:new a.bG(B,l.u_color)}),backgroundPattern:(B,l)=>({u_opacity:new a.b8(B,l.u_opacity),u_image:new a.bF(B,l.u_image),u_pattern_tl_a:new a.bK(B,l.u_pattern_tl_a),u_pattern_br_a:new a.bK(B,l.u_pattern_br_a),u_pattern_tl_b:new a.bK(B,l.u_pattern_tl_b),u_pattern_br_b:new a.bK(B,l.u_pattern_br_b),u_texsize:new a.bK(B,l.u_texsize),u_mix:new a.b8(B,l.u_mix),u_pattern_size_a:new a.bK(B,l.u_pattern_size_a),u_pattern_size_b:new a.bK(B,l.u_pattern_size_b),u_scale_a:new a.b8(B,l.u_scale_a),u_scale_b:new a.b8(B,l.u_scale_b),u_pixel_coord_upper:new a.bK(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bK(B,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.b8(B,l.u_tile_units_to_pixels)}),terrain:(B,l)=>({u_texture:new a.bF(B,l.u_texture),u_ele_delta:new a.b8(B,l.u_ele_delta),u_fog_matrix:new a.bH(B,l.u_fog_matrix),u_fog_color:new a.bG(B,l.u_fog_color),u_fog_ground_blend:new a.b8(B,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.b8(B,l.u_fog_ground_blend_opacity),u_horizon_color:new a.bG(B,l.u_horizon_color),u_horizon_fog_blend:new a.b8(B,l.u_horizon_fog_blend),u_is_globe_mode:new a.b8(B,l.u_is_globe_mode)}),terrainDepth:(B,l)=>({u_ele_delta:new a.b8(B,l.u_ele_delta)}),terrainCoords:(B,l)=>({u_texture:new a.bF(B,l.u_texture),u_terrain_coords_id:new a.b8(B,l.u_terrain_coords_id),u_ele_delta:new a.b8(B,l.u_ele_delta)}),projectionErrorMeasurement:(B,l)=>({u_input:new a.b8(B,l.u_input),u_output_expected:new a.b8(B,l.u_output_expected)}),atmosphere:(B,l)=>({u_sun_pos:new a.bJ(B,l.u_sun_pos),u_atmosphere_blend:new a.b8(B,l.u_atmosphere_blend),u_globe_position:new a.bJ(B,l.u_globe_position),u_globe_radius:new a.b8(B,l.u_globe_radius),u_inv_proj_matrix:new a.bH(B,l.u_inv_proj_matrix)}),sky:(B,l)=>({u_sky_color:new a.bG(B,l.u_sky_color),u_horizon_color:new a.bG(B,l.u_horizon_color),u_horizon:new a.bK(B,l.u_horizon),u_horizon_normal:new a.bK(B,l.u_horizon_normal),u_sky_horizon_blend:new a.b8(B,l.u_sky_horizon_blend),u_sky_blend:new a.b8(B,l.u_sky_blend)})};class rs{constructor(l,p,T){this.context=l;const P=l.gl;this.buffer=P.createBuffer(),this.dynamicDraw=!!T,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),P.bufferData(P.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Cc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class sc{constructor(l,p,T,P){this.length=p.length,this.attributes=T,this.itemSize=p.bytesPerElement,this.dynamicDraw=P,this.context=l;const U=l.gl;this.buffer=U.createBuffer(),l.bindVertexBuffer.set(this.buffer),U.bufferData(U.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?U.DYNAMIC_DRAW:U.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,p){for(let T=0;T<this.attributes.length;T++){const P=p.attributes[this.attributes[T].name];P!==void 0&&l.enableVertexAttribArray(P)}}setVertexAttribPointers(l,p,T){for(let P=0;P<this.attributes.length;P++){const U=this.attributes[P],Y=p.attributes[U.name];Y!==void 0&&l.vertexAttribPointer(Y,U.components,l[Cc[U.type]],!1,this.itemSize,U.offset+this.itemSize*(T||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class pa{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ds extends pa{getDefault(){return a.b7.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class wo extends pa{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Cu extends pa{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class wh extends pa{getDefault(){return[!0,!0,!0,!0]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Mn extends pa{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Yn extends pa{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class jr extends pa{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const p=this.current;(l.func!==p.func||l.ref!==p.ref||l.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class ai extends pa{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class ia extends pa{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=l,this.dirty=!1}}class Mi extends pa{getDefault(){return[0,1]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class I extends pa{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=l,this.dirty=!1}}class y extends pa{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class b extends pa{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.BLEND):p.disable(p.BLEND),this.current=l,this.dirty=!1}}class R extends pa{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Z extends pa{getDefault(){return a.b7.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class le extends pa{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Me extends pa{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=l,this.dirty=!1}}class Ue extends pa{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class dt extends pa{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class Nt extends pa{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class wn extends pa{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Nn extends pa{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class dr extends pa{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class $r extends pa{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class mi extends pa{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class xi extends pa{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class si extends pa{getDefault(){return null}set(l){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ci extends pa{getDefault(){return null}set(l){var p;if(l===this.current&&!this.dirty)return;const T=this.gl;Fo(T)?T.bindVertexArray(l):(p=T.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class Fi extends pa{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class hi extends pa{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Ii extends pa{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Di extends pa{constructor(l,p){super(l),this.context=l,this.parent=p}getDefault(){return null}}class xa extends Di{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class ka extends Di{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Bs extends Di{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const kl="Framebuffer is not complete";class ul{constructor(l,p,T,P,U){this.context=l,this.width=p,this.height=T;const Y=l.gl,re=this.framebuffer=Y.createFramebuffer();if(this.colorAttachment=new xa(l,re),P)this.depthAttachment=U?new Bs(l,re):new ka(l,re);else if(U)throw new Error("Stencil cannot be set without depth");if(Y.checkFramebufferStatus(Y.FRAMEBUFFER)!==Y.FRAMEBUFFER_COMPLETE)throw new Error(kl)}destroy(){const l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){const T=this.depthAttachment.get();T&&l.deleteRenderbuffer(T)}l.deleteFramebuffer(this.framebuffer)}}class Ks{constructor(l){var p,T;if(this.gl=l,this.clearColor=new ds(this),this.clearDepth=new wo(this),this.clearStencil=new Cu(this),this.colorMask=new wh(this),this.depthMask=new Mn(this),this.stencilMask=new Yn(this),this.stencilFunc=new jr(this),this.stencilOp=new ai(this),this.stencilTest=new ia(this),this.depthRange=new Mi(this),this.depthTest=new I(this),this.depthFunc=new y(this),this.blend=new b(this),this.blendFunc=new R(this),this.blendColor=new Z(this),this.blendEquation=new le(this),this.cullFace=new Me(this),this.cullFaceSide=new Ue(this),this.frontFace=new dt(this),this.program=new Nt(this),this.activeTexture=new wn(this),this.viewport=new Nn(this),this.bindFramebuffer=new dr(this),this.bindRenderbuffer=new $r(this),this.bindTexture=new mi(this),this.bindVertexBuffer=new xi(this),this.bindElementBuffer=new si(this),this.bindVertexArray=new ci(this),this.pixelStoreUnpack=new Fi(this),this.pixelStoreUnpackPremultiplyAlpha=new hi(this),this.pixelStoreUnpackFlipY=new Ii(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Fo(l)){this.HALF_FLOAT=l.HALF_FLOAT;const P=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=l.RGBA16F)!==null&&p!==void 0?p:P==null?void 0:P.RGBA16F_EXT,this.RGB16F=(T=l.RGB16F)!==null&&T!==void 0?T:P==null?void 0:P.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const P=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=P==null?void 0:P.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,p){return new rs(this,l,p)}createVertexBuffer(l,p,T){return new sc(this,l,p,T)}createRenderbuffer(l,p,T){const P=this.gl,U=P.createRenderbuffer();return this.bindRenderbuffer.set(U),P.renderbufferStorage(P.RENDERBUFFER,l,p,T),this.bindRenderbuffer.set(null),U}createFramebuffer(l,p,T,P){return new ul(this,l,p,T,P)}clear({color:l,depth:p,stencil:T}){const P=this.gl;let U=0;l&&(U|=P.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(U|=P.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),T!==void 0&&(U|=P.STENCIL_BUFFER_BIT,this.clearStencil.set(T),this.stencilMask.set(255)),P.clear(U)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.bC(l.blendFunction,ji.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Fo(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var p;return Fo(this.gl)?this.gl.deleteVertexArray(l):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let ou;function Js(B,l,p,T,P){const U=B.context,Y=B.transform,re=U.gl,ue=B.useProgram("collisionBox"),ge=[];let Ne=0,qe=0;for(let Ft=0;Ft<T.length;Ft++){const Xt=T[Ft],nn=l.getTile(Xt).getBucket(p);if(!nn)continue;const an=P?nn.textCollisionBox:nn.iconCollisionBox,sn=nn.collisionCircleArray;sn.length>0&&(ge.push({circleArray:sn,circleOffset:qe,coord:Xt}),Ne+=sn.length/4,qe=Ne),an&&ue.draw(U,re.LINES,Jr.disabled,ha.disabled,B.colorModeForRenderPass(),ri.disabled,Zi(B.transform),B.style.map.terrain&&B.style.map.terrain.getTerrainData(Xt),Y.getProjectionData({overscaledTileID:Xt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),p.id,an.layoutVertexBuffer,an.indexBuffer,an.segments,null,B.transform.zoom,null,null,an.collisionVertexBuffer)}if(!P||!ge.length)return;const Ge=B.useProgram("collisionCircle"),ot=new a.bP;ot.resize(4*Ne),ot._trim();let ft=0;for(const Ft of ge)for(let Xt=0;Xt<Ft.circleArray.length/4;Xt++){const nn=4*Xt,an=Ft.circleArray[nn+0],sn=Ft.circleArray[nn+1],pn=Ft.circleArray[nn+2],hn=Ft.circleArray[nn+3];ot.emplace(ft++,an,sn,pn,hn,0),ot.emplace(ft++,an,sn,pn,hn,1),ot.emplace(ft++,an,sn,pn,hn,2),ot.emplace(ft++,an,sn,pn,hn,3)}(!ou||ou.length<2*Ne)&&(ou=function(Ft){const Xt=2*Ft,nn=new a.bR;nn.resize(Xt),nn._trim();for(let an=0;an<Xt;an++){const sn=6*an;nn.uint16[sn+0]=4*an+0,nn.uint16[sn+1]=4*an+1,nn.uint16[sn+2]=4*an+2,nn.uint16[sn+3]=4*an+2,nn.uint16[sn+4]=4*an+3,nn.uint16[sn+5]=4*an+0}return nn}(Ne));const Ot=U.createIndexBuffer(ou,!0),Lt=U.createVertexBuffer(ot,a.bQ.members,!0);for(const Ft of ge){const Xt=Oi(B.transform);Ge.draw(U,re.TRIANGLES,Jr.disabled,ha.disabled,B.colorModeForRenderPass(),ri.disabled,Xt,B.style.map.terrain&&B.style.map.terrain.getTerrainData(Ft.coord),null,p.id,Lt,Ot,a.aG.simpleSegment(0,2*Ft.circleOffset,Ft.circleArray.length,Ft.circleArray.length/2),null,B.transform.zoom,null,null,null)}Lt.destroy(),Ot.destroy()}const So=a.at(new Float32Array(16));function cl(B,l,p,T,P,U){const{horizontalAlign:Y,verticalAlign:re}=a.aB(B);return new a.P((-(Y-.5)*l/P+T[0])*U,(-(re-.5)*p/P+T[1])*U)}function ps(B,l,p,T,P,U){const Y=l.tileAnchorPoint.add(new a.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let re=T.mult(U);p||(re=re.rotate(-P));const ue=Y.add(re);return Jt(ue.x,ue.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(p){const re=Qt(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(B),ue=Math.atan(re.y/re.x)+(re.x<0?Math.PI:0);return B.add(T.rotate(ue))}return B.add(T)}function Xc(B,l,p,T,P,U,Y,re,ue,ge,Ne,qe){const Ge=B.text.placedSymbolArray,ot=B.text.dynamicLayoutVertexArray,ft=B.icon.dynamicLayoutVertexArray,Ot={};ot.clear();for(let Lt=0;Lt<Ge.length;Lt++){const Ft=Ge.get(Lt),Xt=Ft.hidden||!Ft.crossTileID||B.allowVerticalPlacement&&!Ft.placedOrientation?null:T[Ft.crossTileID];if(Xt){const nn=new a.P(Ft.anchorX,Ft.anchorY),an={getElevation:qe,width:P.width,height:P.height,pitchedLabelPlaneMatrix:U,pitchWithMap:p,transform:P,tileAnchorPoint:nn,translation:ge,unwrappedTileID:Ne},sn=p?Fn(nn.x,nn.y,an):Qt(nn.x,nn.y,an),pn=rn(P.cameraToCenterDistance,sn.signedDistanceFromCamera);let hn=a.ai(B.textSizeData,re,Ft)*pn/a.av;p&&(hn*=B.tilePixelRatio/Y);const{width:Un,height:On,anchor:nr,textOffset:ir,textBoxScale:tr}=Xt,Hr=cl(nr,Un,On,ir,tr,hn),Br=P.getPitchedTextCorrection(nn.x+ge[0],nn.y+ge[1],Ne),pr=ps(sn.point,an,l,Hr,-P.bearingInRadians,Br),di=B.allowVerticalPlacement&&Ft.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let Gi=0;Gi<Ft.numGlyphs;Gi++)a.ao(ot,pr,di);ue&&Ft.associatedIconIndex>=0&&(Ot[Ft.associatedIconIndex]={shiftedAnchor:pr,angle:di})}else zr(Ft.numGlyphs,ot)}if(ue){ft.clear();const Lt=B.icon.placedSymbolArray;for(let Ft=0;Ft<Lt.length;Ft++){const Xt=Lt.get(Ft);if(Xt.hidden)zr(Xt.numGlyphs,ft);else{const nn=Ot[Ft];if(nn)for(let an=0;an<Xt.numGlyphs;an++)a.ao(ft,nn.shiftedAnchor,nn.angle);else zr(Xt.numGlyphs,ft)}}B.icon.dynamicLayoutVertexBuffer.updateData(ft)}B.text.dynamicLayoutVertexBuffer.updateData(ot)}function wl(B,l,p){return p.iconsInText&&l?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function Mu(B,l,p,T,P,U,Y,re,ue,ge,Ne,qe,Ge){const ot=B.context,ft=ot.gl,Ot=B.transform,Lt=re==="map",Ft=ue==="map",Xt=re!=="viewport"&&p.layout.get("symbol-placement")!=="point",nn=Lt&&!Ft&&!Xt,an=!p.layout.get("symbol-sort-key").isConstant();let sn=!1;const pn=B.getDepthModeForSublayer(0,Jr.ReadOnly),hn=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Un=[],On=Ot.getCircleRadiusCorrection();for(const nr of T){const ir=l.getTile(nr),tr=ir.getBucket(p);if(!tr)continue;const Hr=P?tr.text:tr.icon;if(!Hr||!Hr.segments.get().length||!Hr.hasVisibleVertices)continue;const Br=Hr.programConfigurations.get(p.id),pr=P||tr.sdfIcons,di=P?tr.textSizeData:tr.iconSizeData,Gi=Ft||Ot.pitch!==0,Ia=B.useProgram(wl(pr,P,tr),Br),fa=a.ag(di,Ot.zoom),yo=B.style.map.terrain&&B.style.map.terrain.getTerrainData(nr);let To,so,fo,po,gs=[0,0],zs=null;if(P)so=ir.glyphAtlasTexture,fo=ft.LINEAR,To=ir.glyphAtlasTexture.size,tr.iconsInText&&(gs=ir.imageAtlasTexture.size,zs=ir.imageAtlasTexture,po=Gi||B.options.rotating||B.options.zooming||di.kind==="composite"||di.kind==="camera"?ft.LINEAR:ft.NEAREST);else{const Rs=p.layout.get("icon-size").constantOr(0)!==1||tr.iconsNeedLinear;so=ir.imageAtlasTexture,fo=pr||B.options.rotating||B.options.zooming||Rs||Gi?ft.LINEAR:ft.NEAREST,To=ir.imageAtlasTexture.size}const pl=a.aw(ir,1,B.transform.zoom),el=xt(Lt,B.transform,pl),hc=a.K();a.aj(hc,el);const Pu=Tt(Ft,Lt,B.transform,pl),Kl=a.ax(Ot,ir,U,Y),Bl=Ot.getProjectionData({overscaledTileID:nr,applyGlobeMatrix:!Ge,applyTerrainMatrix:!0}),uu=hn&&tr.hasTextData(),Iu=p.layout.get("icon-text-fit")!=="none"&&uu&&tr.hasIconData();if(Xt){const Rs=B.style.map.terrain?(tl,Co)=>B.style.map.terrain.getElevation(nr,tl,Co):null,Zo=p.layout.get("text-rotation-alignment")==="map";Qn(tr,B,P,el,hc,Ft,ge,Zo,nr.toUnwrapped(),Ot.width,Ot.height,Kl,Rs)}const Zu=P&&hn||Iu,cu=Xt||Zu?So:Ft?el:B.transform.clipSpaceToPixelsMatrix,th=pr&&p.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Rh;Rh=pr?tr.iconsInText?io(di.kind,fa,nn,Ft,Xt,Zu,B,cu,Pu,Kl,To,gs,On):ju(di.kind,fa,nn,Ft,Xt,Zu,B,cu,Pu,Kl,P,To,0,On):Nl(di.kind,fa,nn,Ft,Xt,Zu,B,cu,Pu,Kl,P,To,On);const Ph={program:Ia,buffers:Hr,uniformValues:Rh,projectionData:Bl,atlasTexture:so,atlasTextureIcon:zs,atlasInterpolation:fo,atlasInterpolationIcon:po,isSDF:pr,hasHalo:th};if(an&&tr.canOverlap){sn=!0;const Rs=Hr.segments.get();for(const Zo of Rs)Un.push({segments:new a.aG([Zo]),sortKey:Zo.sortKey,state:Ph,terrainData:yo})}else Un.push({segments:Hr.segments,sortKey:0,state:Ph,terrainData:yo})}sn&&Un.sort((nr,ir)=>nr.sortKey-ir.sortKey);for(const nr of Un){const ir=nr.state;if(ot.activeTexture.set(ft.TEXTURE0),ir.atlasTexture.bind(ir.atlasInterpolation,ft.CLAMP_TO_EDGE),ir.atlasTextureIcon&&(ot.activeTexture.set(ft.TEXTURE1),ir.atlasTextureIcon&&ir.atlasTextureIcon.bind(ir.atlasInterpolationIcon,ft.CLAMP_TO_EDGE)),ir.isSDF){const tr=ir.uniformValues;ir.hasHalo&&(tr.u_is_halo=1,Yc(ir.buffers,nr.segments,p,B,ir.program,pn,Ne,qe,tr,ir.projectionData,nr.terrainData)),tr.u_is_halo=0}Yc(ir.buffers,nr.segments,p,B,ir.program,pn,Ne,qe,ir.uniformValues,ir.projectionData,nr.terrainData)}}function Yc(B,l,p,T,P,U,Y,re,ue,ge,Ne){const qe=T.context;P.draw(qe,qe.gl.TRIANGLES,U,Y,re,ri.backCCW,ue,Ne,ge,p.id,B.layoutVertexBuffer,B.indexBuffer,l,p.paint,T.transform.zoom,B.programConfigurations.get(p.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function Sh(B,l,p,T,P){const U=B.context,Y=U.gl,re=ha.disabled,ue=new ji([Y.ONE,Y.ONE],a.b7.transparent,[!0,!0,!0,!0]),ge=l.getBucket(p);if(!ge)return;const Ne=T.key;let qe=p.heatmapFbos.get(Ne);qe||(qe=rd(U,l.tileSize,l.tileSize),p.heatmapFbos.set(Ne,qe)),U.bindFramebuffer.set(qe.framebuffer),U.viewport.set([0,0,l.tileSize,l.tileSize]),U.clear({color:a.b7.transparent});const Ge=ge.programConfigurations.get(p.id),ot=B.useProgram("heatmap",Ge,!P),ft=B.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ot=B.style.map.terrain.getTerrainData(T);ot.draw(U,Y.TRIANGLES,Jr.disabled,re,ue,ri.disabled,za(l,B.transform.zoom,p.paint.get("heatmap-intensity"),1),Ot,ft,p.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,p.paint,B.transform.zoom,Ge)}function nd(B,l,p,T,P){const U=B.context,Y=U.gl,re=B.transform;U.setColorMode(B.colorModeForRenderPass());const ue=Zc(U,l),ge=p.key,Ne=l.heatmapFbos.get(ge);if(!Ne)return;U.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,Ne.colorAttachment.get()),U.activeTexture.set(Y.TEXTURE1),ue.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const qe=re.getProjectionData({overscaledTileID:p,applyTerrainMatrix:P,applyGlobeMatrix:!T});B.useProgram("heatmapTexture").draw(U,Y.TRIANGLES,Jr.disabled,ha.disabled,B.colorModeForRenderPass(),ri.disabled,ro(B,l,0,1),null,qe,l.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments,l.paint,re.zoom),Ne.destroy(),l.heatmapFbos.delete(ge)}function rd(B,l,p){var T,P;const U=B.gl,Y=U.createTexture();U.bindTexture(U.TEXTURE_2D,Y),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,U.CLAMP_TO_EDGE),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,U.CLAMP_TO_EDGE),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.LINEAR),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.LINEAR);const re=(T=B.HALF_FLOAT)!==null&&T!==void 0?T:U.UNSIGNED_BYTE,ue=(P=B.RGBA16F)!==null&&P!==void 0?P:U.RGBA;U.texImage2D(U.TEXTURE_2D,0,ue,l,p,0,U.RGBA,re,null);const ge=B.createFramebuffer(l,p,!1,!1);return ge.colorAttachment.set(Y),ge}function Zc(B,l){return l.colorRampTexture||(l.colorRampTexture=new X(B,l.colorRamp,B.gl.RGBA)),l.colorRampTexture}function Hu(B,l,p,T,P){if(!p||!T||!T.imageAtlas)return;const U=T.imageAtlas.patternPositions;let Y=U[p.to.toString()],re=U[p.from.toString()];if(!Y&&re&&(Y=re),!re&&Y&&(re=Y),!Y||!re){const ue=P.getPaintProperty(l);Y=U[ue],re=U[ue]}Y&&re&&B.setConstantPatternPositions(Y,re)}function Eh(B,l,p,T,P,U,Y,re){const ue=B.context.gl,ge="fill-pattern",Ne=p.paint.get(ge),qe=Ne&&Ne.constantOr(1),Ge=p.getCrossfadeParameters();let ot,ft,Ot,Lt,Ft;const Xt=B.transform,nn=p.paint.get("fill-translate"),an=p.paint.get("fill-translate-anchor");Y?(ft=qe&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ot=ue.LINES):(ft=qe?"fillPattern":"fill",ot=ue.TRIANGLES);const sn=Ne.constantOr(null);for(const pn of T){const hn=l.getTile(pn);if(qe&&!hn.patternsLoaded())continue;const Un=hn.getBucket(p);if(!Un)continue;const On=Un.programConfigurations.get(p.id),nr=B.useProgram(ft,On),ir=B.style.map.terrain&&B.style.map.terrain.getTerrainData(pn);qe&&(B.context.activeTexture.set(ue.TEXTURE0),hn.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),On.updatePaintBuffers(Ge)),Hu(On,ge,sn,hn,p);const tr=Xt.getProjectionData({overscaledTileID:pn,applyGlobeMatrix:!re,applyTerrainMatrix:!0}),Hr=a.ax(Xt,hn,nn,an);if(Y){Lt=Un.indexBuffer2,Ft=Un.segments2;const pr=[ue.drawingBufferWidth,ue.drawingBufferHeight];Ot=ft==="fillOutlinePattern"&&qe?oi(B,Ge,hn,pr,Hr):Pr(pr,Hr)}else Lt=Un.indexBuffer,Ft=Un.segments,Ot=qe?Kn(B,Ge,hn,Hr):{u_fill_translate:Hr};let Br;if(B.renderPass==="translucent"&&re){const[pr]=B.getStencilConfigForOverlapAndUpdateStencilID(T);Br=pr[pn.overscaledZ]}else Br=B.stencilModeForClipping(pn);nr.draw(B.context,ot,P,Br,U,ri.backCCW,Ot,ir,tr,p.id,Un.layoutVertexBuffer,Lt,Ft,p.paint,B.transform.zoom,On)}}function Ef(B,l,p,T,P,U,Y,re){const ue=B.context,ge=ue.gl,Ne="fill-extrusion-pattern",qe=p.paint.get(Ne),Ge=qe.constantOr(1),ot=p.getCrossfadeParameters(),ft=p.paint.get("fill-extrusion-opacity"),Ot=qe.constantOr(null),Lt=B.transform;for(const Ft of T){const Xt=l.getTile(Ft),nn=Xt.getBucket(p);if(!nn)continue;const an=B.style.map.terrain&&B.style.map.terrain.getTerrainData(Ft),sn=nn.programConfigurations.get(p.id),pn=B.useProgram(Ge?"fillExtrusionPattern":"fillExtrusion",sn);Ge&&(B.context.activeTexture.set(ge.TEXTURE0),Xt.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),sn.updatePaintBuffers(ot));const hn=Lt.getProjectionData({overscaledTileID:Ft,applyGlobeMatrix:!re,applyTerrainMatrix:!0});Hu(sn,Ne,Ot,Xt,p);const Un=a.ax(Lt,Xt,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),On=p.paint.get("fill-extrusion-vertical-gradient"),nr=Ge?kn(B,On,ft,Un,Ft,ot,Xt):un(B,On,ft,Un);pn.draw(ue,ue.gl.TRIANGLES,P,U,Y,ri.backCCW,nr,an,hn,p.id,nn.layoutVertexBuffer,nn.indexBuffer,nn.segments,p.paint,B.transform.zoom,sn,B.style.map.terrain&&nn.centroidVertexBuffer)}}function su(B,l,p,T,P,U,Y,re,ue){var ge;const Ne=B.style.projection,qe=B.context,Ge=B.transform,ot=qe.gl,ft=B.useProgram("hillshade"),Ot=!B.options.moving;for(const Lt of T){const Ft=l.getTile(Lt),Xt=Ft.fbo;if(!Xt)continue;const nn=Ne.getMeshFromTileID(qe,Lt.canonical,re,!0,"raster"),an=(ge=B.style.map.terrain)===null||ge===void 0?void 0:ge.getTerrainData(Lt);qe.activeTexture.set(ot.TEXTURE0),ot.bindTexture(ot.TEXTURE_2D,Xt.colorAttachment.get());const sn=Ge.getProjectionData({overscaledTileID:Lt,aligned:Ot,applyGlobeMatrix:!ue,applyTerrainMatrix:!0});ft.draw(qe,ot.TRIANGLES,U,P[Lt.overscaledZ],Y,ri.backCCW,Ja(B,Ft,p),an,sn,p.id,nn.vertexBuffer,nn.indexBuffer,nn.segments)}}const Sl=[new a.P(0,0),new a.P(a.Z,0),new a.P(a.Z,a.Z),new a.P(0,a.Z)];function lc(B,l,p,T,P,U,Y,re,ue=!1,ge=!1){const Ne=T[T.length-1].overscaledZ,qe=B.context,Ge=qe.gl,ot=B.useProgram("raster"),ft=B.transform,Ot=B.style.projection,Lt=B.colorModeForRenderPass(),Ft=!B.options.moving;for(const Xt of T){const nn=B.getDepthModeForSublayer(Xt.overscaledZ-Ne,p.paint.get("raster-opacity")===1?Jr.ReadWrite:Jr.ReadOnly,Ge.LESS),an=l.getTile(Xt);an.registerFadeDuration(p.paint.get("raster-fade-duration"));const sn=l.findLoadedParent(Xt,0),pn=l.findLoadedSibling(Xt),hn=Th(an,sn||pn||null,l,p,B.transform,B.style.map.terrain);let Un,On;const nr=p.paint.get("raster-resampling")==="nearest"?Ge.NEAREST:Ge.LINEAR;qe.activeTexture.set(Ge.TEXTURE0),an.texture.bind(nr,Ge.CLAMP_TO_EDGE,Ge.LINEAR_MIPMAP_NEAREST),qe.activeTexture.set(Ge.TEXTURE1),sn?(sn.texture.bind(nr,Ge.CLAMP_TO_EDGE,Ge.LINEAR_MIPMAP_NEAREST),Un=Math.pow(2,sn.tileID.overscaledZ-an.tileID.overscaledZ),On=[an.tileID.canonical.x*Un%1,an.tileID.canonical.y*Un%1]):an.texture.bind(nr,Ge.CLAMP_TO_EDGE,Ge.LINEAR_MIPMAP_NEAREST),an.texture.useMipmap&&qe.extTextureFilterAnisotropic&&B.transform.pitch>20&&Ge.texParameterf(Ge.TEXTURE_2D,qe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,qe.extTextureFilterAnisotropicMax);const ir=B.style.map.terrain&&B.style.map.terrain.getTerrainData(Xt),tr=ft.getProjectionData({overscaledTileID:Xt,aligned:Ft,applyGlobeMatrix:!ge,applyTerrainMatrix:!0}),Hr=Tc(On||[0,0],Un||1,hn,p,re),Br=Ot.getMeshFromTileID(qe,Xt.canonical,U,Y,"raster");ot.draw(qe,Ge.TRIANGLES,nn,P?P[Xt.overscaledZ]:ha.disabled,Lt,ue?ri.frontCCW:ri.backCCW,Hr,ir,tr,p.id,Br.vertexBuffer,Br.indexBuffer,Br.segments)}}function Th(B,l,p,T,P,U){const Y=T.paint.get("raster-fade-duration");if(!U&&Y>0){const re=w.now(),ue=(re-B.timeAdded)/Y,ge=l?(re-l.timeAdded)/Y:-1,Ne=p.getSource(),qe=sr(P,{tileSize:Ne.tileSize,roundZoom:Ne.roundZoom}),Ge=!l||Math.abs(l.tileID.overscaledZ-qe)>Math.abs(B.tileID.overscaledZ-qe),ot=Ge&&B.refreshedUponExpiration?1:a.ae(Ge?ue:1-ge,0,1);return B.refreshedUponExpiration&&ue>=1&&(B.refreshedUponExpiration=!1),l?{opacity:1,mix:1-ot}:{opacity:ot,mix:0}}return{opacity:1,mix:0}}const Kc=new a.b7(1,0,0,1),Ro=new a.b7(0,1,0,1),Yh=new a.b7(0,0,1,1),Zl=new a.b7(1,0,1,1),Tf=new a.b7(0,1,1,1);function Ms(B,l,p,T){Ra(B,0,l+p/2,B.transform.width,p,T)}function is(B,l,p,T){Ra(B,l-p/2,0,p,B.transform.height,T)}function Ra(B,l,p,T,P,U){const Y=B.context,re=Y.gl;re.enable(re.SCISSOR_TEST),re.scissor(l*B.pixelRatio,p*B.pixelRatio,T*B.pixelRatio,P*B.pixelRatio),Y.clear({color:U}),re.disable(re.SCISSOR_TEST)}function uc(B,l,p){const T=B.context,P=T.gl,U=B.useProgram("debug"),Y=Jr.disabled,re=ha.disabled,ue=B.colorModeForRenderPass(),ge="$debug",Ne=B.style.map.terrain&&B.style.map.terrain.getTerrainData(p);T.activeTexture.set(P.TEXTURE0);const qe=l.getTileByID(p.key).latestRawTileData,Ge=Math.floor((qe&&qe.byteLength||0)/1024),ot=l.getTile(p).tileSize,ft=512/Math.min(ot,512)*(p.overscaledZ/B.transform.zoom)*.5;let Ot=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Ot+=` => ${p.overscaledZ}`),function(Ft,Xt){Ft.initDebugOverlayCanvas();const nn=Ft.debugOverlayCanvas,an=Ft.context.gl,sn=Ft.debugOverlayCanvas.getContext("2d");sn.clearRect(0,0,nn.width,nn.height),sn.shadowColor="white",sn.shadowBlur=2,sn.lineWidth=1.5,sn.strokeStyle="white",sn.textBaseline="top",sn.font="bold 36px Open Sans, sans-serif",sn.fillText(Xt,5,5),sn.strokeText(Xt,5,5),Ft.debugOverlayTexture.update(nn),Ft.debugOverlayTexture.bind(an.LINEAR,an.CLAMP_TO_EDGE)}(B,`${Ot} ${Ge}kB`);const Lt=B.transform.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0});U.draw(T,P.TRIANGLES,Y,re,ji.alphaBlended,ri.disabled,qi(a.b7.transparent,ft),null,Lt,ge,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments),U.draw(T,P.LINE_STRIP,Y,re,ue,ri.disabled,qi(a.b7.red),Ne,Lt,ge,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments)}function qu(B,l,p,T){const{isRenderingGlobe:P}=T,U=B.context,Y=U.gl,re=B.transform,ue=B.colorModeForRenderPass(),ge=B.getDepthModeFor3D(),Ne=B.useProgram("terrain");U.bindFramebuffer.set(null),U.viewport.set([0,0,B.width,B.height]);for(const qe of p){const Ge=l.getTerrainMesh(qe.tileID),ot=B.renderToTexture.getTexture(qe),ft=l.getTerrainData(qe.tileID);U.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,ot.texture);const Ot=l.getMeshFrameDelta(re.zoom),Lt=re.calculateFogMatrix(qe.tileID.toUnwrapped()),Ft=Xo(Ot,Lt,B.style.sky,re.pitch,P),Xt=re.getProjectionData({overscaledTileID:qe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ne.draw(U,Y.TRIANGLES,ge,ha.disabled,ue,ri.backCCW,Ft,ft,Xt,"terrain",Ge.vertexBuffer,Ge.indexBuffer,Ge.segments)}}function zd(B,l){if(!l.mesh){const p=new a.aF;p.emplaceBack(-1,-1),p.emplaceBack(1,-1),p.emplaceBack(1,1),p.emplaceBack(-1,1);const T=new a.aH;T.emplaceBack(0,1,2),T.emplaceBack(0,2,3),l.mesh=new Ta(B.createVertexBuffer(p,to.members),B.createIndexBuffer(T),a.aG.simpleSegment(0,0,p.length,T.length))}return l.mesh}class Zh{constructor(l,p){this.context=new Ks(l),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.at(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ze.maxUnderzooming+ze.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Sa}resize(l,p,T){if(this.width=Math.floor(l*T),this.height=Math.floor(p*T),this.pixelRatio=T,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const P of this.style._order)this.style._layers[P].resize()}setup(){const l=this.context,p=new a.aF;p.emplaceBack(0,0),p.emplaceBack(a.Z,0),p.emplaceBack(0,a.Z),p.emplaceBack(a.Z,a.Z),this.tileExtentBuffer=l.createVertexBuffer(p,to.members),this.tileExtentSegments=a.aG.simpleSegment(0,0,4,2);const T=new a.aF;T.emplaceBack(0,0),T.emplaceBack(a.Z,0),T.emplaceBack(0,a.Z),T.emplaceBack(a.Z,a.Z),this.debugBuffer=l.createVertexBuffer(T,to.members),this.debugSegments=a.aG.simpleSegment(0,0,4,5);const P=new a.bW;P.emplaceBack(0,0,0,0),P.emplaceBack(a.Z,0,a.Z,0),P.emplaceBack(0,a.Z,0,a.Z),P.emplaceBack(a.Z,a.Z,a.Z,a.Z),this.rasterBoundsBuffer=l.createVertexBuffer(P,zu.members),this.rasterBoundsSegments=a.aG.simpleSegment(0,0,4,2);const U=new a.aF;U.emplaceBack(0,0),U.emplaceBack(a.Z,0),U.emplaceBack(0,a.Z),U.emplaceBack(a.Z,a.Z),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(U,to.members),this.rasterBoundsSegmentsPosOnly=a.aG.simpleSegment(0,0,4,5);const Y=new a.aF;Y.emplaceBack(0,0),Y.emplaceBack(1,0),Y.emplaceBack(0,1),Y.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(Y,to.members),this.viewportSegments=a.aG.simpleSegment(0,0,4,2);const re=new a.bX;re.emplaceBack(0),re.emplaceBack(1),re.emplaceBack(3),re.emplaceBack(2),re.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(re);const ue=new a.aH;ue.emplaceBack(1,0,2),ue.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(ue);const ge=this.context.gl;this.stencilClearMode=new ha({func:ge.ALWAYS,mask:0},0,255,ge.ZERO,ge.ZERO,ge.ZERO),this.tileExtentMesh=new Ta(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const T=a.K();a.bO(T,0,this.width,this.height,0,0,1),a.M(T,T,[p.drawingBufferWidth,p.drawingBufferHeight,0]);const P={mainMatrix:T,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:T};this.useProgram("clippingMask",null,!0).draw(l,p.TRIANGLES,Jr.disabled,this.stencilClearMode,ji.disabled,ri.disabled,null,null,P,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,p,T){if(this.currentStencilSource===l.source||!l.isTileClipped()||!p||!p.length)return;this.currentStencilSource=l.source,this.nextStencilID+p.length>256&&this.clearStencil();const P=this.context;P.setColorMode(ji.disabled),P.setDepthMode(Jr.disabled);const U={};for(const Y of p)U[Y.key]=this.nextStencilID++;this._renderTileMasks(U,p,T,!0),this._renderTileMasks(U,p,T,!1),this._tileClippingMaskIDs=U}_renderTileMasks(l,p,T,P){const U=this.context,Y=U.gl,re=this.style.projection,ue=this.transform,ge=this.useProgram("clippingMask");for(const Ne of p){const qe=l[Ne.key],Ge=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Ne),ot=re.getMeshFromTileID(this.context,Ne.canonical,P,!0,"stencil"),ft=ue.getProjectionData({overscaledTileID:Ne,applyGlobeMatrix:!0,applyTerrainMatrix:!0});ge.draw(U,Y.TRIANGLES,Jr.disabled,new ha({func:Y.ALWAYS,mask:0},qe,255,Y.KEEP,Y.KEEP,Y.REPLACE),ji.disabled,T?ri.disabled:ri.backCCW,null,Ge,ft,"$clipping",ot.vertexBuffer,ot.indexBuffer,ot.segments)}}_renderTilesDepthBuffer(){const l=this.context,p=l.gl,T=this.style.projection,P=this.transform,U=this.useProgram("depth"),Y=this.getDepthModeFor3D(),re=rt(P,{tileSize:P.tileSize});for(const ue of re){const ge=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ue),Ne=T.getMeshFromTileID(this.context,ue.canonical,!0,!0,"raster"),qe=P.getProjectionData({overscaledTileID:ue,applyGlobeMatrix:!0,applyTerrainMatrix:!0});U.draw(l,p.TRIANGLES,Y,ha.disabled,ji.disabled,ri.backCCW,null,ge,qe,"$clipping",Ne.vertexBuffer,Ne.indexBuffer,Ne.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,p=this.context.gl;return new ha({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(l){const p=this.context.gl;return new ha({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const p=this.context.gl,T=l.sort((Y,re)=>re.overscaledZ-Y.overscaledZ),P=T[T.length-1].overscaledZ,U=T[0].overscaledZ-P+1;if(U>1){this.currentStencilSource=void 0,this.nextStencilID+U>256&&this.clearStencil();const Y={};for(let re=0;re<U;re++)Y[re+P]=new ha({func:p.GEQUAL,mask:255},re+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=U,[Y,T]}return[{[P]:ha.disabled},T]}stencilConfigForOverlapTwoPass(l){const p=this.context.gl,T=l.sort((Y,re)=>re.overscaledZ-Y.overscaledZ),P=T[T.length-1].overscaledZ,U=T[0].overscaledZ-P+1;if(this.clearStencil(),U>1){const Y={},re={};for(let ue=0;ue<U;ue++)Y[ue+P]=new ha({func:p.GREATER,mask:255},U+1+ue,255,p.KEEP,p.KEEP,p.REPLACE),re[ue+P]=new ha({func:p.GREATER,mask:255},1+ue,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID=2*U+1,[Y,re,T]}return this.nextStencilID=3,[{[P]:new ha({func:p.GREATER,mask:255},2,255,p.KEEP,p.KEEP,p.REPLACE)},{[P]:new ha({func:p.GREATER,mask:255},1,255,p.KEEP,p.KEEP,p.REPLACE)},T]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new ji([l.CONSTANT_COLOR,l.ONE],new a.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ji.unblended:ji.alphaBlended}getDepthModeForSublayer(l,p,T){if(!this.opaquePassEnabledForLayer())return Jr.disabled;const P=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Jr(T||this.context.gl.LEQUAL,p,[P,P])}getDepthModeFor3D(){return new Jr(this.context.gl.LEQUAL,Jr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,p){var T,P;this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(w.now()),this.imageManager.beginFrame();const U=this.style._order,Y=this.style.sourceCaches,re={},ue={},ge={},Ne={isRenderingToTexture:!1,isRenderingGlobe:((T=l.projection)===null||T===void 0?void 0:T.transitionState)>0};for(const Ge in Y){const ot=Y[Ge];ot.used&&ot.prepare(this.context),re[Ge]=ot.getVisibleCoordinates(!1),ue[Ge]=re[Ge].slice().reverse(),ge[Ge]=ot.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ge=0;Ge<U.length;Ge++)if(this.style._layers[U[Ge]].is3D()){this.opaquePassCutoff=Ge;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Ge of U){const ot=this.style._layers[Ge];if(!ot.hasOffscreenPass()||ot.isHidden(this.transform.zoom))continue;const ft=ue[ot.source];(ot.type==="custom"||ft.length)&&this.renderLayer(this,Y[ot.source],ot,ft,Ne)}if((P=this.style.projection)===null||P===void 0||P.updateGPUdependent({context:this.context,useProgram:Ge=>this.useProgram(Ge)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.b7.black:a.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Ge,ot){const ft=Ge.context,Ot=ft.gl,Lt=((pn,hn,Un)=>{const On=Math.cos(hn.rollInRadians),nr=Math.sin(hn.rollInRadians),ir=dn(hn),tr=hn.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:pn.properties.get("sky-color"),u_horizon_color:pn.properties.get("horizon-color"),u_horizon:[(hn.width/2-ir*nr)*Un,(hn.height/2+ir*On)*Un],u_horizon_normal:[-nr,On],u_sky_horizon_blend:pn.properties.get("sky-horizon-blend")*hn.height/2*Un,u_sky_blend:tr}})(ot,Ge.style.map.transform,Ge.pixelRatio),Ft=new Jr(Ot.LEQUAL,Jr.ReadWrite,[0,1]),Xt=ha.disabled,nn=Ge.colorModeForRenderPass(),an=Ge.useProgram("sky"),sn=zd(ft,ot);an.draw(ft,Ot.TRIANGLES,Ft,Xt,nn,ri.disabled,Lt,null,void 0,"sky",sn.vertexBuffer,sn.indexBuffer,sn.segments)}(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=U.length-1;this.currentLayer>=0;this.currentLayer--){const Ge=this.style._layers[U[this.currentLayer]],ot=Y[Ge.source],ft=re[Ge.source];this._renderTileClippingMasks(Ge,ft,!1),this.renderLayer(this,ot,Ge,ft,Ne)}this.renderPass="translucent";let qe=!1;for(this.currentLayer=0;this.currentLayer<U.length;this.currentLayer++){const Ge=this.style._layers[U[this.currentLayer]],ot=Y[Ge.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Ge,Ne))continue;this.opaquePassEnabledForLayer()||qe||(qe=!0,Ne.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ft=(Ge.type==="symbol"?ge:ue)[Ge.source];this._renderTileClippingMasks(Ge,re[Ge.source],!1),this.renderLayer(this,ot,Ge,ft,Ne)}if(Ne.isRenderingGlobe&&function(Ge,ot,ft){const Ot=Ge.context,Lt=Ot.gl,Ft=Ge.useProgram("atmosphere"),Xt=new Jr(Lt.LEQUAL,Jr.ReadOnly,[0,1]),nn=Ge.transform,an=function(tr,Hr){const Br=tr.properties.get("position"),pr=[-Br.x,-Br.y,-Br.z],di=a.at(new Float64Array(16));return tr.properties.get("anchor")==="map"&&(a.a_(di,di,Hr.rollInRadians),a.a$(di,di,-Hr.pitchInRadians),a.a_(di,di,Hr.bearingInRadians),a.a$(di,di,Hr.center.lat*Math.PI/180),a.bm(di,di,-Hr.center.lng*Math.PI/180)),a.bV(pr,pr,di),pr}(ft,Ge.transform),sn=nn.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),pn=ot.properties.get("atmosphere-blend")*sn.projectionTransition;if(pn===0)return;const hn=bo(nn.worldSize,nn.center.lat),Un=nn.inverseProjectionMatrix,On=new Float64Array(4);On[3]=1,a.ap(On,On,nn.modelViewProjectionMatrix),On[0]/=On[3],On[1]/=On[3],On[2]/=On[3],On[3]=1,a.ap(On,On,Un),On[0]/=On[3],On[1]/=On[3],On[2]/=On[3],On[3]=1;const nr=((tr,Hr,Br,pr,di)=>({u_sun_pos:tr,u_atmosphere_blend:Hr,u_globe_position:Br,u_globe_radius:pr,u_inv_proj_matrix:di}))(an,pn,[On[0],On[1],On[2]],hn,Un),ir=zd(Ot,ot);Ft.draw(Ot,Lt.TRIANGLES,Xt,ha.disabled,ji.alphaBlended,ri.disabled,nr,null,null,"atmosphere",ir.vertexBuffer,ir.indexBuffer,ir.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Ge=function(ot,ft){let Ot=null;const Lt=Object.values(ot._layers).flatMap(an=>an.source&&!an.isHidden(ft)?[ot.sourceCaches[an.source]]:[]),Ft=Lt.filter(an=>an.getSource().type==="vector"),Xt=Lt.filter(an=>an.getSource().type!=="vector"),nn=an=>{(!Ot||Ot.getSource().maxzoom<an.getSource().maxzoom)&&(Ot=an)};return Ft.forEach(an=>nn(an)),Ot||Xt.forEach(an=>nn(an)),Ot}(this.style,this.transform.zoom);Ge&&function(ot,ft,Ot){for(let Lt=0;Lt<Ot.length;Lt++)uc(ot,ft,Ot[Lt])}(this,Ge,Ge.getVisibleCoordinates())}this.options.showPadding&&function(Ge){const ot=Ge.transform.padding;Ms(Ge,Ge.transform.height-(ot.top||0),3,Kc),Ms(Ge,ot.bottom||0,3,Ro),is(Ge,ot.left||0,3,Yh),is(Ge,Ge.transform.width-(ot.right||0),3,Zl);const ft=Ge.transform.centerPoint;(function(Ot,Lt,Ft,Xt){Ra(Ot,Lt-1,Ft-10,2,20,Xt),Ra(Ot,Lt-10,Ft-1,20,2,Xt)})(Ge,ft.x,Ge.transform.height-ft.y,Tf)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,T=this.transform.modelViewProjectionMatrix;let P=this.terrainFacilitator.dirty;P||(P=l?!a.bY(p,T):!a.bZ(p,T)),P||(P=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),P&&(a.b_(p,T),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(U,Y){const re=U.context,ue=re.gl,ge=U.transform,Ne=ji.unblended,qe=new Jr(ue.LEQUAL,Jr.ReadWrite,[0,1]),Ge=Y.sourceCache.getRenderableTiles(),ot=U.useProgram("terrainDepth");re.bindFramebuffer.set(Y.getFramebuffer("depth").framebuffer),re.viewport.set([0,0,U.width/devicePixelRatio,U.height/devicePixelRatio]),re.clear({color:a.b7.transparent,depth:1});for(const ft of Ge){const Ot=Y.getTerrainMesh(ft.tileID),Lt=Y.getTerrainData(ft.tileID),Ft=ge.getProjectionData({overscaledTileID:ft.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Xt={u_ele_delta:Y.getMeshFrameDelta(ge.zoom)};ot.draw(re,ue.TRIANGLES,qe,ha.disabled,Ne,ri.backCCW,Xt,Lt,Ft,"terrain",Ot.vertexBuffer,Ot.indexBuffer,Ot.segments)}re.bindFramebuffer.set(null),re.viewport.set([0,0,U.width,U.height])}(this,this.style.map.terrain),function(U,Y){const re=U.context,ue=re.gl,ge=U.transform,Ne=ji.unblended,qe=new Jr(ue.LEQUAL,Jr.ReadWrite,[0,1]),Ge=Y.getCoordsTexture(),ot=Y.sourceCache.getRenderableTiles(),ft=U.useProgram("terrainCoords");re.bindFramebuffer.set(Y.getFramebuffer("coords").framebuffer),re.viewport.set([0,0,U.width/devicePixelRatio,U.height/devicePixelRatio]),re.clear({color:a.b7.transparent,depth:1}),Y.coordsIndex=[];for(const Ot of ot){const Lt=Y.getTerrainMesh(Ot.tileID),Ft=Y.getTerrainData(Ot.tileID);re.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,Ge.texture);const Xt={u_terrain_coords_id:(255-Y.coordsIndex.length)/255,u_texture:0,u_ele_delta:Y.getMeshFrameDelta(ge.zoom)},nn=ge.getProjectionData({overscaledTileID:Ot.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ft.draw(re,ue.TRIANGLES,qe,ha.disabled,Ne,ri.backCCW,Xt,Ft,nn,"terrain",Lt.vertexBuffer,Lt.indexBuffer,Lt.segments),Y.coordsIndex.push(Ot.tileID.key)}re.bindFramebuffer.set(null),re.viewport.set([0,0,U.width,U.height])}(this,this.style.map.terrain))}renderLayer(l,p,T,P,U){T.isHidden(this.transform.zoom)||(T.type==="background"||T.type==="custom"||(P||[]).length)&&(this.id=T.id,a.b$(T)?function(Y,re,ue,ge,Ne,qe){if(Y.renderPass!=="translucent")return;const{isRenderingToTexture:Ge}=qe,ot=ha.disabled,ft=Y.colorModeForRenderPass();(ue._unevaluatedLayout.hasValue("text-variable-anchor")||ue._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Ot,Lt,Ft,Xt,nn,an,sn,pn,hn){const Un=Lt.transform,On=Lt.style.map.terrain,nr=nn==="map",ir=an==="map";for(const tr of Ot){const Hr=Xt.getTile(tr),Br=Hr.getBucket(Ft);if(!Br||!Br.text||!Br.text.segments.get().length)continue;const pr=a.ag(Br.textSizeData,Un.zoom),di=a.aw(Hr,1,Lt.transform.zoom),Gi=xt(nr,Lt.transform,di),Ia=Ft.layout.get("icon-text-fit")!=="none"&&Br.hasIconData();if(pr){const fa=Math.pow(2,Un.zoom-Hr.tileID.overscaledZ),yo=On?(To,so)=>On.getElevation(tr,To,so):null;Xc(Br,nr,ir,hn,Un,Gi,fa,pr,Ia,a.ax(Un,Hr,sn,pn),tr.toUnwrapped(),yo)}}}(ge,Y,ue,re,ue.layout.get("text-rotation-alignment"),ue.layout.get("text-pitch-alignment"),ue.paint.get("text-translate"),ue.paint.get("text-translate-anchor"),Ne),ue.paint.get("icon-opacity").constantOr(1)!==0&&Mu(Y,re,ue,ge,!1,ue.paint.get("icon-translate"),ue.paint.get("icon-translate-anchor"),ue.layout.get("icon-rotation-alignment"),ue.layout.get("icon-pitch-alignment"),ue.layout.get("icon-keep-upright"),ot,ft,Ge),ue.paint.get("text-opacity").constantOr(1)!==0&&Mu(Y,re,ue,ge,!0,ue.paint.get("text-translate"),ue.paint.get("text-translate-anchor"),ue.layout.get("text-rotation-alignment"),ue.layout.get("text-pitch-alignment"),ue.layout.get("text-keep-upright"),ot,ft,Ge),re.map.showCollisionBoxes&&(Js(Y,re,ue,ge,!0),Js(Y,re,ue,ge,!1))}(l,p,T,P,this.style.placement.variableOffsets,U):a.c0(T)?function(Y,re,ue,ge,Ne){if(Y.renderPass!=="translucent")return;const{isRenderingToTexture:qe}=Ne,Ge=ue.paint.get("circle-opacity"),ot=ue.paint.get("circle-stroke-width"),ft=ue.paint.get("circle-stroke-opacity"),Ot=!ue.layout.get("circle-sort-key").isConstant();if(Ge.constantOr(1)===0&&(ot.constantOr(1)===0||ft.constantOr(1)===0))return;const Lt=Y.context,Ft=Lt.gl,Xt=Y.transform,nn=Y.getDepthModeForSublayer(0,Jr.ReadOnly),an=ha.disabled,sn=Y.colorModeForRenderPass(),pn=[],hn=Xt.getCircleRadiusCorrection();for(let Un=0;Un<ge.length;Un++){const On=ge[Un],nr=re.getTile(On),ir=nr.getBucket(ue);if(!ir)continue;const tr=ue.paint.get("circle-translate"),Hr=ue.paint.get("circle-translate-anchor"),Br=a.ax(Xt,nr,tr,Hr),pr=ir.programConfigurations.get(ue.id),di=Y.useProgram("circle",pr),Gi=ir.layoutVertexBuffer,Ia=ir.indexBuffer,fa=Y.style.map.terrain&&Y.style.map.terrain.getTerrainData(On),yo={programConfiguration:pr,program:di,layoutVertexBuffer:Gi,indexBuffer:Ia,uniformValues:Ci(Y,nr,ue,Br,hn),terrainData:fa,projectionData:Xt.getProjectionData({overscaledTileID:On,applyGlobeMatrix:!qe,applyTerrainMatrix:!0})};if(Ot){const To=ir.segments.get();for(const so of To)pn.push({segments:new a.aG([so]),sortKey:so.sortKey,state:yo})}else pn.push({segments:ir.segments,sortKey:0,state:yo})}Ot&&pn.sort((Un,On)=>Un.sortKey-On.sortKey);for(const Un of pn){const{programConfiguration:On,program:nr,layoutVertexBuffer:ir,indexBuffer:tr,uniformValues:Hr,terrainData:Br,projectionData:pr}=Un.state;nr.draw(Lt,Ft.TRIANGLES,nn,an,sn,ri.backCCW,Hr,Br,pr,ue.id,ir,tr,Un.segments,ue.paint,Y.transform.zoom,On)}}(l,p,T,P,U):a.c1(T)?function(Y,re,ue,ge,Ne){if(ue.paint.get("heatmap-opacity")===0)return;const qe=Y.context,{isRenderingToTexture:Ge,isRenderingGlobe:ot}=Ne;if(Y.style.map.terrain){for(const ft of ge){const Ot=re.getTile(ft);re.hasRenderableParent(ft)||(Y.renderPass==="offscreen"?Sh(Y,Ot,ue,ft,ot):Y.renderPass==="translucent"&&nd(Y,ue,ft,Ge,ot))}qe.viewport.set([0,0,Y.width,Y.height])}else Y.renderPass==="offscreen"?function(ft,Ot,Lt,Ft){const Xt=ft.context,nn=Xt.gl,an=ft.transform,sn=ha.disabled,pn=new ji([nn.ONE,nn.ONE],a.b7.transparent,[!0,!0,!0,!0]);(function(hn,Un,On){const nr=hn.gl;hn.activeTexture.set(nr.TEXTURE1),hn.viewport.set([0,0,Un.width/4,Un.height/4]);let ir=On.heatmapFbos.get(a.bS);ir?(nr.bindTexture(nr.TEXTURE_2D,ir.colorAttachment.get()),hn.bindFramebuffer.set(ir.framebuffer)):(ir=rd(hn,Un.width/4,Un.height/4),On.heatmapFbos.set(a.bS,ir))})(Xt,ft,Lt),Xt.clear({color:a.b7.transparent});for(let hn=0;hn<Ft.length;hn++){const Un=Ft[hn];if(Ot.hasRenderableParent(Un))continue;const On=Ot.getTile(Un),nr=On.getBucket(Lt);if(!nr)continue;const ir=nr.programConfigurations.get(Lt.id),tr=ft.useProgram("heatmap",ir),Hr=an.getProjectionData({overscaledTileID:Un,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Br=an.getCircleRadiusCorrection();tr.draw(Xt,nn.TRIANGLES,Jr.disabled,sn,pn,ri.backCCW,za(On,an.zoom,Lt.paint.get("heatmap-intensity"),Br),null,Hr,Lt.id,nr.layoutVertexBuffer,nr.indexBuffer,nr.segments,Lt.paint,an.zoom,ir)}Xt.viewport.set([0,0,ft.width,ft.height])}(Y,re,ue,ge):Y.renderPass==="translucent"&&function(ft,Ot){const Lt=ft.context,Ft=Lt.gl;Lt.setColorMode(ft.colorModeForRenderPass());const Xt=Ot.heatmapFbos.get(a.bS);Xt&&(Lt.activeTexture.set(Ft.TEXTURE0),Ft.bindTexture(Ft.TEXTURE_2D,Xt.colorAttachment.get()),Lt.activeTexture.set(Ft.TEXTURE1),Zc(Lt,Ot).bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE),ft.useProgram("heatmapTexture").draw(Lt,Ft.TRIANGLES,Jr.disabled,ha.disabled,ft.colorModeForRenderPass(),ri.disabled,ro(ft,Ot,0,1),null,null,Ot.id,ft.viewportBuffer,ft.quadTriangleIndexBuffer,ft.viewportSegments,Ot.paint,ft.transform.zoom))}(Y,ue)}(l,p,T,P,U):a.c2(T)?function(Y,re,ue,ge,Ne){if(Y.renderPass!=="translucent")return;const{isRenderingToTexture:qe}=Ne,Ge=ue.paint.get("line-opacity"),ot=ue.paint.get("line-width");if(Ge.constantOr(1)===0||ot.constantOr(1)===0)return;const ft=Y.getDepthModeForSublayer(0,Jr.ReadOnly),Ot=Y.colorModeForRenderPass(),Lt=ue.paint.get("line-dasharray"),Ft=ue.paint.get("line-pattern"),Xt=Ft.constantOr(1),nn=ue.paint.get("line-gradient"),an=ue.getCrossfadeParameters(),sn=Xt?"linePattern":Lt?"lineSDF":nn?"lineGradient":"line",pn=Y.context,hn=pn.gl,Un=Y.transform;let On=!0;for(const nr of ge){const ir=re.getTile(nr);if(Xt&&!ir.patternsLoaded())continue;const tr=ir.getBucket(ue);if(!tr)continue;const Hr=tr.programConfigurations.get(ue.id),Br=Y.context.program.get(),pr=Y.useProgram(sn,Hr),di=On||pr.program!==Br,Gi=Y.style.map.terrain&&Y.style.map.terrain.getTerrainData(nr),Ia=Ft.constantOr(null);if(Ia&&ir.imageAtlas){const fo=ir.imageAtlas,po=fo.patternPositions[Ia.to.toString()],gs=fo.patternPositions[Ia.from.toString()];po&&gs&&Hr.setConstantPatternPositions(po,gs)}const fa=Un.getProjectionData({overscaledTileID:nr,applyGlobeMatrix:!qe,applyTerrainMatrix:!0}),yo=Un.getPixelScale(),To=Xt?Ys(Y,ir,ue,yo,an):Lt?Wc(Y,ir,ue,yo,Lt,an):nn?ll(Y,ir,ue,yo,tr.lineClipsArray.length):Ts(Y,ir,ue,yo);if(Xt)pn.activeTexture.set(hn.TEXTURE0),ir.imageAtlasTexture.bind(hn.LINEAR,hn.CLAMP_TO_EDGE),Hr.updatePaintBuffers(an);else if(Lt&&(di||Y.lineAtlas.dirty))pn.activeTexture.set(hn.TEXTURE0),Y.lineAtlas.bind(pn);else if(nn){const fo=tr.gradients[ue.id];let po=fo.texture;if(ue.gradientVersion!==fo.version){let gs=256;if(ue.stepInterpolant){const zs=re.getSource().maxzoom,pl=nr.canonical.z===zs?Math.ceil(1<<Y.transform.maxZoom-nr.canonical.z):1;gs=a.ae(a.bT(tr.maxLineLength/a.Z*1024*pl),256,pn.maxTextureSize)}fo.gradient=a.bU({expression:ue.gradientExpression(),evaluationKey:"lineProgress",resolution:gs,image:fo.gradient||void 0,clips:tr.lineClipsArray}),fo.texture?fo.texture.update(fo.gradient):fo.texture=new X(pn,fo.gradient,hn.RGBA),fo.version=ue.gradientVersion,po=fo.texture}pn.activeTexture.set(hn.TEXTURE0),po.bind(ue.stepInterpolant?hn.NEAREST:hn.LINEAR,hn.CLAMP_TO_EDGE)}let so;if(qe){const[fo]=Y.getStencilConfigForOverlapAndUpdateStencilID(ge);so=fo[nr.overscaledZ]}else so=Y.stencilModeForClipping(nr);pr.draw(pn,hn.TRIANGLES,ft,so,Ot,ri.disabled,To,Gi,fa,ue.id,tr.layoutVertexBuffer,tr.indexBuffer,tr.segments,ue.paint,Y.transform.zoom,Hr,tr.layoutVertexBuffer2),On=!1}}(l,p,T,P,U):a.c3(T)?function(Y,re,ue,ge,Ne){const qe=ue.paint.get("fill-color"),Ge=ue.paint.get("fill-opacity");if(Ge.constantOr(1)===0)return;const{isRenderingToTexture:ot}=Ne,ft=Y.colorModeForRenderPass(),Ot=ue.paint.get("fill-pattern"),Lt=Y.opaquePassEnabledForLayer()&&!Ot.constantOr(1)&&qe.constantOr(a.b7.transparent).a===1&&Ge.constantOr(0)===1?"opaque":"translucent";if(Y.renderPass===Lt){const Ft=Y.getDepthModeForSublayer(1,Y.renderPass==="opaque"?Jr.ReadWrite:Jr.ReadOnly);Eh(Y,re,ue,ge,Ft,ft,!1,ot)}if(Y.renderPass==="translucent"&&ue.paint.get("fill-antialias")){const Ft=Y.getDepthModeForSublayer(ue.getPaintProperty("fill-outline-color")?2:0,Jr.ReadOnly);Eh(Y,re,ue,ge,Ft,ft,!0,ot)}}(l,p,T,P,U):a.c4(T)?function(Y,re,ue,ge,Ne){const qe=ue.paint.get("fill-extrusion-opacity");if(qe===0)return;const{isRenderingToTexture:Ge}=Ne;if(Y.renderPass==="translucent"){const ot=new Jr(Y.context.gl.LEQUAL,Jr.ReadWrite,Y.depthRangeFor3D);if(qe!==1||ue.paint.get("fill-extrusion-pattern").constantOr(1))Ef(Y,re,ue,ge,ot,ha.disabled,ji.disabled,Ge),Ef(Y,re,ue,ge,ot,Y.stencilModeFor3D(),Y.colorModeForRenderPass(),Ge);else{const ft=Y.colorModeForRenderPass();Ef(Y,re,ue,ge,ot,ha.disabled,ft,Ge)}}}(l,p,T,P,U):a.c5(T)?function(Y,re,ue,ge,Ne){if(Y.renderPass!=="offscreen"&&Y.renderPass!=="translucent")return;const{isRenderingToTexture:qe}=Ne,Ge=Y.context,ot=Y.style.projection.useSubdivision,ft=Y.getDepthModeForSublayer(0,Jr.ReadOnly),Ot=Y.colorModeForRenderPass();if(Y.renderPass==="offscreen")(function(Lt,Ft,Xt,nn,an,sn,pn){const hn=Lt.context,Un=hn.gl;for(const On of Xt){const nr=Ft.getTile(On),ir=nr.dem;if(!ir||!ir.data||!nr.needsHillshadePrepare)continue;const tr=ir.dim,Hr=ir.stride,Br=ir.getPixels();if(hn.activeTexture.set(Un.TEXTURE1),hn.pixelStoreUnpackPremultiplyAlpha.set(!1),nr.demTexture=nr.demTexture||Lt.getTileTexture(Hr),nr.demTexture){const di=nr.demTexture;di.update(Br,{premultiply:!1}),di.bind(Un.NEAREST,Un.CLAMP_TO_EDGE)}else nr.demTexture=new X(hn,Br,Un.RGBA,{premultiply:!1}),nr.demTexture.bind(Un.NEAREST,Un.CLAMP_TO_EDGE);hn.activeTexture.set(Un.TEXTURE0);let pr=nr.fbo;if(!pr){const di=new X(hn,{width:tr,height:tr,data:null},Un.RGBA);di.bind(Un.LINEAR,Un.CLAMP_TO_EDGE),pr=nr.fbo=hn.createFramebuffer(tr,tr,!0,!1),pr.colorAttachment.set(di.texture)}hn.bindFramebuffer.set(pr.framebuffer),hn.viewport.set([0,0,tr,tr]),Lt.useProgram("hillshadePrepare").draw(hn,Un.TRIANGLES,an,sn,pn,ri.disabled,zo(nr.tileID,ir),null,null,nn.id,Lt.rasterBoundsBuffer,Lt.quadTriangleIndexBuffer,Lt.rasterBoundsSegments),nr.needsHillshadePrepare=!1}})(Y,re,ge,ue,ft,ha.disabled,Ot),Ge.viewport.set([0,0,Y.width,Y.height]);else if(Y.renderPass==="translucent")if(ot){const[Lt,Ft,Xt]=Y.stencilConfigForOverlapTwoPass(ge);su(Y,re,ue,Xt,Lt,ft,Ot,!1,qe),su(Y,re,ue,Xt,Ft,ft,Ot,!0,qe)}else{const[Lt,Ft]=Y.getStencilConfigForOverlapAndUpdateStencilID(ge);su(Y,re,ue,Ft,Lt,ft,Ot,!1,qe)}}(l,p,T,P,U):a.c6(T)?function(Y,re,ue,ge,Ne){if(Y.renderPass!=="translucent"||ue.paint.get("raster-opacity")===0||!ge.length)return;const{isRenderingToTexture:qe}=Ne,Ge=re.getSource(),ot=Y.style.projection.useSubdivision;if(Ge instanceof qt)lc(Y,re,ue,ge,null,!1,!1,Ge.tileCoords,Ge.flippedWindingOrder,qe);else if(ot){const[ft,Ot,Lt]=Y.stencilConfigForOverlapTwoPass(ge);lc(Y,re,ue,Lt,ft,!1,!0,Sl,!1,qe),lc(Y,re,ue,Lt,Ot,!0,!0,Sl,!1,qe)}else{const[ft,Ot]=Y.getStencilConfigForOverlapAndUpdateStencilID(ge);lc(Y,re,ue,Ot,ft,!1,!0,Sl,!1,qe)}}(l,p,T,P,U):a.c7(T)?function(Y,re,ue,ge,Ne){const qe=ue.paint.get("background-color"),Ge=ue.paint.get("background-opacity");if(Ge===0)return;const{isRenderingToTexture:ot}=Ne,ft=Y.context,Ot=ft.gl,Lt=Y.style.projection,Ft=Y.transform,Xt=Ft.tileSize,nn=ue.paint.get("background-pattern");if(Y.isPatternMissing(nn))return;const an=!nn&&qe.a===1&&Ge===1&&Y.opaquePassEnabledForLayer()?"opaque":"translucent";if(Y.renderPass!==an)return;const sn=ha.disabled,pn=Y.getDepthModeForSublayer(0,an==="opaque"?Jr.ReadWrite:Jr.ReadOnly),hn=Y.colorModeForRenderPass(),Un=Y.useProgram(nn?"backgroundPattern":"background"),On=ge||rt(Ft,{tileSize:Xt,terrain:Y.style.map.terrain});nn&&(ft.activeTexture.set(Ot.TEXTURE0),Y.imageManager.bind(Y.context));const nr=ue.getCrossfadeParameters();for(const ir of On){const tr=Ft.getProjectionData({overscaledTileID:ir,applyGlobeMatrix:!ot,applyTerrainMatrix:!0}),Hr=nn?Zs(Ge,Y,nn,{tileID:ir,tileSize:Xt},nr):Gu(Ge,qe),Br=Y.style.map.terrain&&Y.style.map.terrain.getTerrainData(ir),pr=Lt.getMeshFromTileID(ft,ir.canonical,!1,!0,"raster");Un.draw(ft,Ot.TRIANGLES,pn,sn,hn,ri.backCCW,Hr,Br,tr,ue.id,pr.vertexBuffer,pr.indexBuffer,pr.segments)}}(l,0,T,P,U):a.c8(T)&&function(Y,re,ue,ge){const{isRenderingGlobe:Ne}=ge,qe=Y.context,Ge=ue.implementation,ot=Y.style.projection,ft=Y.transform,Ot=ft.getProjectionDataForCustomLayer(Ne),Lt={farZ:ft.farZ,nearZ:ft.nearZ,fov:ft.fov*Math.PI/180,modelViewProjectionMatrix:ft.modelViewProjectionMatrix,projectionMatrix:ft.projectionMatrix,shaderData:{variantName:ot.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ot.shaderPreludeCode.vertexSource}`,define:ot.shaderDefine},defaultProjectionData:Ot},Ft=Ge.renderingMode?Ge.renderingMode:"2d";if(Y.renderPass==="offscreen"){const Xt=Ge.prerender;Xt&&(Y.setCustomLayerDefaults(),qe.setColorMode(Y.colorModeForRenderPass()),Xt.call(Ge,qe.gl,Lt),qe.setDirty(),Y.setBaseState())}else if(Y.renderPass==="translucent"){Y.setCustomLayerDefaults(),qe.setColorMode(Y.colorModeForRenderPass()),qe.setStencilMode(ha.disabled);const Xt=Ft==="3d"?Y.getDepthModeFor3D():Y.getDepthModeForSublayer(0,Jr.ReadOnly);qe.setDepthMode(Xt),Ge.render(qe.gl,Lt),qe.setDirty(),Y.setBaseState(),qe.bindFramebuffer.set(null)}}(l,0,T,U))}saveTileTexture(l){const p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const p=this._tileTextures[l];return p&&p.length>0?p.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const p=this.imageManager.getPattern(l.from.toString()),T=this.imageManager.getPattern(l.to.toString());return!p||!T}useProgram(l,p,T=!1){this.cache=this.cache||{};const P=!!this.style.map.terrain,U=this.style.projection,Y=l+(p?p.cacheKey:"")+`/${T?we:U.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(P?"/terrain":"");return this.cache[Y]||(this.cache[Y]=new nt(this.context,Ui[l],p,Vu[l],this._showOverdrawInspector,P,T?Ui.projectionMercator:U.shaderPreludeCode,T?ne:U.shaderDefine)),this.cache[Y]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new X(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:p}=this.context.gl;return this.width!==l||this.height!==p}}function Pp(B,l){let p,T=!1,P=null,U=null;const Y=()=>{P=null,T&&(B.apply(U,p),P=setTimeout(Y,l),T=!1)};return(...re)=>(T=!0,U=this,p=re,P||Y(),P)}class Mc{constructor(l){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let T;return p.split("&").map(P=>P.split("=")).forEach(P=>{P[0]===this._hashName&&(T=P)}),(T&&T[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(!this._isValidHash(p))return!1;const T=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:T,pitch:+(p[4]||0)}),!0},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const T=p.join("/");let P=T;P.split("&").length>0&&(P=P.split("&")[0]),this._hashName&&(P=`${this._hashName}=${T}`);let U=window.location.hash.replace(P,"");U.startsWith("#&")?U=U.slice(0,1)+U.slice(2):U==="#"&&(U="");let Y=window.location.href.replace(/(#.+)?$/,U);Y=Y.replace("&&","&"),window.history.replaceState(window.history.state,null,Y)},this._updateHash=Pp(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const p=this._map.getCenter(),T=Math.round(100*this._map.getZoom())/100,P=Math.ceil((T*Math.LN2+Math.log(512/360/.5))/Math.LN10),U=Math.pow(10,P),Y=Math.round(p.lng*U)/U,re=Math.round(p.lat*U)/U,ue=this._map.getBearing(),ge=this._map.getPitch();let Ne="";if(Ne+=l?`/${Y}/${re}/${T}`:`${T}/${re}/${Y}`,(ue||ge)&&(Ne+="/"+Math.round(10*ue)/10),ge&&(Ne+=`/${Math.round(ge)}`),this._hashName){const qe=this._hashName;let Ge=!1;const ot=window.location.hash.slice(1).split("&").map(ft=>{const Ot=ft.split("=")[0];return Ot===qe?(Ge=!0,`${Ot}=${Ne}`):ft}).filter(ft=>ft);return Ge||ot.push(`${qe}=${Ne}`),`#${ot.join("&")}`}return`#${Ne}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new a.Q(+l[2],+l[1])}catch{return!1}const p=+l[0],T=+(l[3]||0),P=+(l[4]||0);return p>=this._map.getMinZoom()&&p<=this._map.getMaxZoom()&&T>=-180&&T<=180&&P>=this._map.getMinPitch()&&P<=this._map.getMaxPitch()}}const Qs={linearity:.3,easing:a.c9(0,0,.3,1)},hl=a.e({deceleration:2500,maxSpeed:1400},Qs),bg=a.e({deceleration:20,maxSpeed:1400},Qs),Cf=a.e({deceleration:1e3,maxSpeed:360},Qs),Ac=a.e({deceleration:1e3,maxSpeed:90},Qs),fl=a.e({deceleration:1e3,maxSpeed:360},Qs);class Jc{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,p=w.now();for(;l.length>0&&p-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:U}of this._inertiaBuffer)p.zoom+=U.zoomDelta||0,p.bearing+=U.bearingDelta||0,p.pitch+=U.pitchDelta||0,p.roll+=U.rollDelta||0,U.panDelta&&p.pan._add(U.panDelta),U.around&&(p.around=U.around),U.pinchAround&&(p.pinchAround=U.pinchAround);const T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,P={};if(p.pan.mag()){const U=lu(p.pan.mag(),T,a.e({},hl,l||{})),Y=p.pan.mult(U.amount/p.pan.mag()),re=this._map.cameraHelper.handlePanInertia(Y,this._map.transform);P.center=re.easingCenter,P.offset=re.easingOffset,$u(P,U)}if(p.zoom){const U=lu(p.zoom,T,bg);P.zoom=this._map.transform.zoom+U.amount,$u(P,U)}if(p.bearing){const U=lu(p.bearing,T,Cf);P.bearing=this._map.transform.bearing+a.ae(U.amount,-179,179),$u(P,U)}if(p.pitch){const U=lu(p.pitch,T,Ac);P.pitch=this._map.transform.pitch+U.amount,$u(P,U)}if(p.roll){const U=lu(p.roll,T,fl);P.roll=this._map.transform.roll+a.ae(U.amount,-179,179),$u(P,U)}if(P.zoom||P.bearing){const U=p.pinchAround===void 0?p.around:p.pinchAround;P.around=U?this._map.unproject(U):this._map.getCenter()}return this.clear(),a.e(P,{noMoveStart:!0})}}function $u(B,l){(!B.duration||B.duration<l.duration)&&(B.duration=l.duration,B.easing=l.easing)}function lu(B,l,p){const{maxSpeed:T,linearity:P,deceleration:U}=p,Y=a.ae(B*P/(l/1e3),-T,T),re=Math.abs(Y)/(U*P);return{easing:p.easing,duration:1e3*re,amount:Y*(re/2)}}class dl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,T,P={}){T=T instanceof MouseEvent?T:new MouseEvent(l,T);const U=_.mousePos(p.getCanvas(),T),Y=p.unproject(U);super(l,a.e({point:U,lngLat:Y,originalEvent:T},P)),this._defaultPrevented=!1,this.target=p}}class Ch extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,T){const P=l==="touchend"?T.changedTouches:T.touches,U=_.touchPos(p.getCanvasContainer(),P),Y=U.map(ue=>p.unproject(ue)),re=U.reduce((ue,ge,Ne,qe)=>ue.add(ge.div(qe.length)),new a.P(0,0));super(l,{points:U,point:re,lngLats:Y,lngLat:p.unproject(re),originalEvent:T}),this._defaultPrevented=!1}}class Ol extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,T){super(l,{originalEvent:T}),this._defaultPrevented=!1}}class Wu{constructor(l,p){this._map=l,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Ol(l.type,this._map,l))}mousedown(l,p){return this._mousedownPos=p,this._firePreventable(new dl(l.type,this._map,l))}mouseup(l){this._map.fire(new dl(l.type,this._map,l))}click(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new dl(l.type,this._map,l))}dblclick(l){return this._firePreventable(new dl(l.type,this._map,l))}mouseover(l){this._map.fire(new dl(l.type,this._map,l))}mouseout(l){this._map.fire(new dl(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Ch(l.type,this._map,l))}touchmove(l){this._map.fire(new Ch(l.type,this._map,l))}touchend(l){this._map.fire(new Ch(l.type,this._map,l))}touchcancel(l){this._map.fire(new Ch(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rc{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new dl(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new dl("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new dl(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ao{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(a.P.convert(l),this._map.terrain)}}class Au{constructor(l,p){this._map=l,this._tr=new ao(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(_.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(l,p){if(!this._active)return;const T=p;if(this._lastPos.equals(T)||!this._box&&T.dist(this._startPos)<this._clickTolerance)return;const P=this._startPos;this._lastPos=T,this._box||(this._box=_.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const U=Math.min(P.x,T.x),Y=Math.max(P.x,T.x),re=Math.min(P.y,T.y),ue=Math.max(P.y,T.y);_.setTransform(this._box,`translate(${U}px,${re}px)`),this._box.style.width=Y-U+"px",this._box.style.height=ue-re+"px"}mouseupWindow(l,p){if(!this._active||l.button!==0)return;const T=this._startPos,P=p;if(this.reset(),_.suppressClick(),T.x!==P.x||T.y!==P.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:l})),{cameraAnimation:U=>U.fitScreenCoordinates(T,P,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,p){return this._map.fire(new a.l(l,{originalEvent:p}))}}function id(B,l){if(B.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${B.length}, points ${l.length}`);const p={};for(let T=0;T<B.length;T++)p[B[T].identifier]=l[T];return p}class Vv{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,p,T){(this.centroid||T.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),T.length===this.numTouches&&(this.centroid=function(P){const U=new a.P(0,0);for(const Y of P)U._add(Y);return U.div(P.length)}(p),this.touches=id(T,p)))}touchmove(l,p,T){if(this.aborted||!this.centroid)return;const P=id(T,p);for(const U in this.touches){const Y=P[U];(!Y||Y.dist(this.touches[U])>30)&&(this.aborted=!0)}}touchend(l,p,T){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),T.length===0){const P=!this.aborted&&this.centroid;if(this.reset(),P)return P}}}class Ip{constructor(l){this.singleTap=new Vv(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,p,T){this.singleTap.touchstart(l,p,T)}touchmove(l,p,T){this.singleTap.touchmove(l,p,T)}touchend(l,p,T){const P=this.singleTap.touchend(l,p,T);if(P){const U=l.timeStamp-this.lastTime<500,Y=!this.lastTap||this.lastTap.dist(P)<30;if(U&&Y||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=P,this.count===this.numTaps)return this.reset(),P}}}class Hv{constructor(l){this._tr=new ao(l),this._zoomIn=new Ip({numTouches:1,numTaps:2}),this._zoomOut=new Ip({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,p,T){this._zoomIn.touchstart(l,p,T),this._zoomOut.touchstart(l,p,T)}touchmove(l,p,T){this._zoomIn.touchmove(l,p,T),this._zoomOut.touchmove(l,p,T)}touchend(l,p,T){const P=this._zoomIn.touchend(l,p,T),U=this._zoomOut.touchend(l,p,T),Y=this._tr;return P?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:re=>re.easeTo({duration:300,zoom:Y.zoom+1,around:Y.unproject(P)},{originalEvent:l})}):U?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:re=>re.easeTo({duration:300,zoom:Y.zoom-1,around:Y.unproject(U)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class as{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const p=this._moveFunction(...l);if(p.bearingDelta||p.pitchDelta||p.rollDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(l,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(p)?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,p){if(!this.isEnabled())return;const T=this._lastPoint;if(!T)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const P=Array.isArray(p)?p[0]:p;return!this._moved&&P.dist(T)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=P,this._move(T,P))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&_.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Mf={0:1,2:2};class Fl{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const p=_.mouseButton(l);this._eventButton=p}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!function(p,T){const P=Mf[T];return p.buttons===void 0||(p.buttons&P)!==P}(l,this._eventButton)}isValidEndEvent(l){return _.mouseButton(l)===this._eventButton}}class ei{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class Dp{constructor(l=new Fl({checkCorrectEvent:()=>!0}),p=new ei){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=p}_executeRelevantHandler(l,p,T){return l instanceof MouseEvent?p(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?T(l):void 0}startMove(l){this._executeRelevantHandler(l,p=>this.mouseMoveStateManager.startMove(p),p=>this.oneFingerTouchMoveStateManager.startMove(p))}endMove(l){this._executeRelevantHandler(l,p=>this.mouseMoveStateManager.endMove(p),p=>this.oneFingerTouchMoveStateManager.endMove(p))}isValidStartEvent(l){return this._executeRelevantHandler(l,p=>this.mouseMoveStateManager.isValidStartEvent(p),p=>this.oneFingerTouchMoveStateManager.isValidStartEvent(p))}isValidMoveEvent(l){return this._executeRelevantHandler(l,p=>this.mouseMoveStateManager.isValidMoveEvent(p),p=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(p))}isValidEndEvent(l){return this._executeRelevantHandler(l,p=>this.mouseMoveStateManager.isValidEndEvent(p),p=>this.oneFingerTouchMoveStateManager.isValidEndEvent(p))}}const cc=B=>{B.mousedown=B.dragStart,B.mousemoveWindow=B.dragMove,B.mouseup=B.dragEnd,B.contextmenu=l=>{l.preventDefault()}};class Qc{constructor(l,p){this._clickTolerance=l.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,p,T){return this._calculateTransform(l,p,T)}touchmove(l,p,T){if(this._active){if(!this._shouldBePrevented(T.length))return l.preventDefault(),this._calculateTransform(l,p,T);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,p,T){this._calculateTransform(l,p,T),this._active&&this._shouldBePrevented(T.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,p,T){T.length>0&&(this._active=!0);const P=id(T,p),U=new a.P(0,0),Y=new a.P(0,0);let re=0;for(const ge in P){const Ne=P[ge],qe=this._touches[ge];qe&&(U._add(Ne),Y._add(Ne.sub(qe)),re++,P[ge]=Ne)}if(this._touches=P,this._shouldBePrevented(re)||!Y.mag())return;const ue=Y.div(re);return this._sum._add(ue),this._sum.mag()<this._clickTolerance?void 0:{around:U.div(re),panDelta:ue}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Af{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,p,T){this._firstTwoTouches||T.length<2||(this._firstTwoTouches=[T[0].identifier,T[1].identifier],this._start([p[0],p[1]]))}touchmove(l,p,T){if(!this._firstTwoTouches)return;l.preventDefault();const[P,U]=this._firstTwoTouches,Y=Mh(T,p,P),re=Mh(T,p,U);if(!Y||!re)return;const ue=this._aroundCenter?null:Y.add(re).div(2);return this._move([Y,re],ue,l)}touchend(l,p,T){if(!this._firstTwoTouches)return;const[P,U]=this._firstTwoTouches,Y=Mh(T,p,P),re=Mh(T,p,U);Y&&re||(this._active&&_.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Mh(B,l,p){for(let T=0;T<B.length;T++)if(B[T].identifier===p)return l[T]}function Lp(B,l){return Math.log(B/l)/Math.LN2}class q extends Af{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,p){const T=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Lp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Lp(this._distance,T),pinchAround:p}}}function te(B,l){return 180*B.angleWith(l)/Math.PI}class _e extends Af{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,p,T){const P=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:te(this._vector,P),pinchAround:p}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const p=25/(Math.PI*this._minDiameter)*360,T=te(l,this._startVector);return Math.abs(T)<p}}function Oe(B){return Math.abs(B.y)>Math.abs(B.x)}class at extends Af{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,p,T){super.touchstart(l,p,T),this._currentTouchCount=T.length}_start(l){this._lastPoints=l,Oe(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,p,T){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const P=l[0].sub(this._lastPoints[0]),U=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(P,U,T.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(P.y+U.y)/2*-.5}):void 0}gestureBeginsVertically(l,p,T){if(this._valid!==void 0)return this._valid;const P=l.mag()>=2,U=p.mag()>=2;if(!P&&!U)return;if(!P||!U)return this._firstMove===void 0&&(this._firstMove=T),T-this._firstMove<100&&void 0;const Y=l.y>0==p.y>0;return Oe(l)&&Oe(p)&&Y}}const gt={panStep:100,bearingStep:15,pitchStep:10};class vt{constructor(l){this._tr=new ao(l);const p=gt;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let p=0,T=0,P=0,U=0,Y=0;switch(l.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:l.shiftKey?T=-1:(l.preventDefault(),U=-1);break;case 39:l.shiftKey?T=1:(l.preventDefault(),U=1);break;case 38:l.shiftKey?P=1:(l.preventDefault(),Y=-1);break;case 40:l.shiftKey?P=-1:(l.preventDefault(),Y=1);break;default:return}return this._rotationDisabled&&(T=0,P=0),{cameraAnimation:re=>{const ue=this._tr;re.easeTo({duration:300,easeId:"keyboardHandler",easing:bt,zoom:p?Math.round(ue.zoom)+p*(l.shiftKey?2:1):ue.zoom,bearing:ue.bearing+T*this._bearingStep,pitch:ue.pitch+P*this._pitchStep,offset:[-U*this._panStep,-Y*this._panStep],center:ue.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function bt(B){return B*(2-B)}const Mt=4.000244140625;class Vt{constructor(l,p){this._onTimeout=T=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(T)},this._map=l,this._tr=new ao(l),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let p=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const T=w.now(),P=T-(this._lastWheelEventTime||0);this._lastWheelEventTime=T,p!==0&&p%Mt==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":P>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(P*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=_.mousePos(this._map.getCanvas(),l),T=this._tr;this._aroundPoint=this._aroundCenter?T.transform.locationToScreenPoint(a.Q.convert(T.center)):p,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const re=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=re),typeof this._targetZoom=="number"&&(this._targetZoom+=re)}if(this._delta!==0){const re=this._type==="wheel"&&Math.abs(this._delta)>Mt?this._wheelZoomRate:this._defaultZoomRate;let ue=2/(1+Math.exp(-Math.abs(this._delta*re)));this._delta<0&&ue!==0&&(ue=1/ue);const ge=typeof this._targetZoom!="number"?l.scale:a.aI(this._targetZoom);this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,a.ab(ge*ue))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,T=this._startZoom,P=this._easing;let U,Y=!1;if(this._type==="wheel"&&T&&P){const re=w.now()-this._lastWheelEventTime,ue=Math.min((re+5)/200,1),ge=P(ue);U=a.B.number(T,p,ge),ue<1?this._frameId||(this._frameId=!0):Y=!0}else U=p,Y=!0;return this._active=!0,Y&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=U,{noInertia:!0,needsRenderFrame:!Y,zoomDelta:U-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let p=a.cb;if(this._prevEase){const T=this._prevEase,P=(w.now()-T.start)/T.duration,U=T.easing(P+.01)-T.easing(P),Y=.27/Math.sqrt(U*U+1e-4)*.01,re=Math.sqrt(.0729-Y*Y);p=a.c9(Y,re,.25,1)}return this._prevEase={start:w.now(),duration:l,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class vn{constructor(l,p){this._clickZoom=l,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Hn{constructor(l){this._tr=new ao(l),this.reset()}reset(){this._active=!1}dblclick(l,p){return l.preventDefault(),{cameraAnimation:T=>{T.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gn{constructor(){this._tap=new Ip({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,p,T){if(!this._swipePoint)if(this._tapTime){const P=p[0],U=l.timeStamp-this._tapTime<500,Y=this._tapPoint.dist(P)<30;U&&Y?T.length>0&&(this._swipePoint=P,this._swipeTouch=T[0].identifier):this.reset()}else this._tap.touchstart(l,p,T)}touchmove(l,p,T){if(this._tapTime){if(this._swipePoint){if(T[0].identifier!==this._swipeTouch)return;const P=p[0],U=P.y-this._swipePoint.y;return this._swipePoint=P,l.preventDefault(),this._active=!0,{zoomDelta:U/128}}}else this._tap.touchmove(l,p,T)}touchend(l,p,T){if(this._tapTime)this._swipePoint&&T.length===0&&this.reset();else{const P=this._tap.touchend(l,p,T);P&&(this._tapTime=l.timeStamp,this._tapPoint=P)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rn{constructor(l,p,T){this._el=l,this._mousePan=p,this._touchPan=T}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ar{constructor(l,p,T,P){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=p,this._mousePitch=T,this._mouseRoll=P}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Jn{constructor(l,p,T,P){this._el=l,this._touchZoom=p,this._touchRotate=T,this._tapDragZoom=P,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class _n{constructor(l,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=_.create("div","maplibregl-cooperative-gesture-screen",l);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const T=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),P=document.createElement("div");P.className="maplibregl-desktop-message",P.textContent=p,this._container.appendChild(P);const U=document.createElement("div");U.className="maplibregl-mobile-message",U.textContent=T,this._container.appendChild(U),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(_.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,p){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:l,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Cn=B=>B.zoom||B.drag||B.roll||B.pitch||B.rotate;class gr extends a.l{}function Ar(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta||B.rollDelta}class Er{constructor(l,p){this.handleWindowEvent=P=>{this.handleEvent(P,`${P.type}Window`)},this.handleEvent=(P,U)=>{if(P.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const Y=P.type==="renderFrame"?void 0:P,re={needsRenderFrame:!1},ue={},ge={};for(const{handlerName:Ge,handler:ot,allowed:ft}of this._handlers){if(!ot.isEnabled())continue;let Ot;if(this._blockedByActive(ge,ft,Ge))ot.reset();else if(ot[U||P.type]){if(a.cc(P,U||P.type)){const Lt=_.mousePos(this._map.getCanvas(),P);Ot=ot[U||P.type](P,Lt)}else if(a.cd(P,U||P.type)){const Lt=this._getMapTouches(P.touches),Ft=_.touchPos(this._map.getCanvas(),Lt);Ot=ot[U||P.type](P,Ft,Lt)}else a.ce(U||P.type)||(Ot=ot[U||P.type](P));this.mergeHandlerResult(re,ue,Ot,Ge,Y),Ot&&Ot.needsRenderFrame&&this._triggerRenderFrame()}(Ot||ot.isActive())&&(ge[Ge]=ot)}const Ne={};for(const Ge in this._previousActiveHandlers)ge[Ge]||(Ne[Ge]=Y);this._previousActiveHandlers=ge,(Object.keys(Ne).length||Ar(re))&&(this._changes.push([re,ue,Ne]),this._triggerRenderFrame()),(Object.keys(ge).length||Ar(re))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:qe}=re;qe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],qe(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jc(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const T=this._el;this._listeners=[[T,"touchstart",{passive:!0}],[T,"touchmove",{passive:!1}],[T,"touchend",void 0],[T,"touchcancel",void 0],[T,"mousedown",void 0],[T,"mousemove",void 0],[T,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[T,"mouseover",void 0],[T,"mouseout",void 0],[T,"dblclick",void 0],[T,"click",void 0],[T,"keydown",{capture:!1}],[T,"keyup",void 0],[T,"wheel",{passive:!1}],[T,"contextmenu",void 0],[window,"blur",void 0]];for(const[P,U,Y]of this._listeners)_.addEventListener(P,U,P===document?this.handleWindowEvent:this.handleEvent,Y)}destroy(){for(const[l,p,T]of this._listeners)_.removeEventListener(l,p,l===document?this.handleWindowEvent:this.handleEvent,T)}_addDefaultHandlers(l){const p=this._map,T=p.getCanvasContainer();this._add("mapEvent",new Wu(p,l));const P=p.boxZoom=new Au(p,l);this._add("boxZoom",P),l.interactive&&l.boxZoom&&P.enable();const U=p.cooperativeGestures=new _n(p,l.cooperativeGestures);this._add("cooperativeGestures",U),l.cooperativeGestures&&U.enable();const Y=new Hv(p),re=new Hn(p);p.doubleClickZoom=new vn(re,Y),this._add("tapZoom",Y),this._add("clickZoom",re),l.interactive&&l.doubleClickZoom&&p.doubleClickZoom.enable();const ue=new Gn;this._add("tapDragZoom",ue);const ge=p.touchPitch=new at(p);this._add("touchPitch",ge),l.interactive&&l.touchPitch&&p.touchPitch.enable(l.touchPitch);const Ne=()=>p.project(p.getCenter()),qe=function({enable:an,clickTolerance:sn,aroundCenter:pn=!0,minPixelCenterThreshold:hn=100,rotateDegreesPerPixelMoved:Un=.8},On){const nr=new Fl({checkCorrectEvent:ir=>_.mouseButton(ir)===0&&ir.ctrlKey||_.mouseButton(ir)===2&&!ir.ctrlKey});return new as({clickTolerance:sn,move:(ir,tr)=>{const Hr=On();if(pn&&Math.abs(Hr.y-ir.y)>hn)return{bearingDelta:a.ca(new a.P(ir.x,tr.y),tr,Hr)};let Br=(tr.x-ir.x)*Un;return pn&&tr.y<Hr.y&&(Br=-Br),{bearingDelta:Br}},moveStateManager:nr,enable:an,assignEvents:cc})}(l,Ne),Ge=function({enable:an,clickTolerance:sn,pitchDegreesPerPixelMoved:pn=-.5}){const hn=new Fl({checkCorrectEvent:Un=>_.mouseButton(Un)===0&&Un.ctrlKey||_.mouseButton(Un)===2});return new as({clickTolerance:sn,move:(Un,On)=>({pitchDelta:(On.y-Un.y)*pn}),moveStateManager:hn,enable:an,assignEvents:cc})}(l),ot=function({enable:an,clickTolerance:sn,rollDegreesPerPixelMoved:pn=.3},hn){const Un=new Fl({checkCorrectEvent:On=>_.mouseButton(On)===2&&On.ctrlKey});return new as({clickTolerance:sn,move:(On,nr)=>{const ir=hn();let tr=(nr.x-On.x)*pn;return nr.y<ir.y&&(tr=-tr),{rollDelta:tr}},moveStateManager:Un,enable:an,assignEvents:cc})}(l,Ne);p.dragRotate=new ar(l,qe,Ge,ot),this._add("mouseRotate",qe,["mousePitch"]),this._add("mousePitch",Ge,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ot,["mousePitch"]),l.interactive&&l.dragRotate&&p.dragRotate.enable();const ft=function({enable:an,clickTolerance:sn}){const pn=new Fl({checkCorrectEvent:hn=>_.mouseButton(hn)===0&&!hn.ctrlKey});return new as({clickTolerance:sn,move:(hn,Un)=>({around:Un,panDelta:Un.sub(hn)}),activateOnStart:!0,moveStateManager:pn,enable:an,assignEvents:cc})}(l),Ot=new Qc(l,p);p.dragPan=new Rn(T,ft,Ot),this._add("mousePan",ft),this._add("touchPan",Ot,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&p.dragPan.enable(l.dragPan);const Lt=new _e,Ft=new q;p.touchZoomRotate=new Jn(T,Ft,Lt,ue),this._add("touchRotate",Lt,["touchPan","touchZoom"]),this._add("touchZoom",Ft,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&p.touchZoomRotate.enable(l.touchZoomRotate);const Xt=p.scrollZoom=new Vt(p,()=>this._triggerRenderFrame());this._add("scrollZoom",Xt,["mousePan"]),l.interactive&&l.scrollZoom&&p.scrollZoom.enable(l.scrollZoom);const nn=p.keyboard=new vt(p);this._add("keyboard",nn),l.interactive&&l.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new Rc(p))}_add(l,p,T){this._handlers.push({handlerName:l,handler:p,allowed:T}),this._handlersById[l]=p}stop(l){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Cn(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,p,T){for(const P in l)if(P!==T&&(!p||p.indexOf(P)<0))return!0;return!1}_getMapTouches(l){const p=[];for(const T of l)this._el.contains(T.target)&&p.push(T);return p}mergeHandlerResult(l,p,T,P,U){if(!T)return;a.e(l,T);const Y={handlerName:P,originalEvent:T.originalEvent||U};T.zoomDelta!==void 0&&(p.zoom=Y),T.panDelta!==void 0&&(p.drag=Y),T.rollDelta!==void 0&&(p.roll=Y),T.pitchDelta!==void 0&&(p.pitch=Y),T.bearingDelta!==void 0&&(p.rotate=Y)}_applyChanges(){const l={},p={},T={};for(const[P,U,Y]of this._changes)P.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(P.panDelta)),P.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+P.zoomDelta),P.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+P.bearingDelta),P.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+P.pitchDelta),P.rollDelta&&(l.rollDelta=(l.rollDelta||0)+P.rollDelta),P.around!==void 0&&(l.around=P.around),P.pinchAround!==void 0&&(l.pinchAround=P.pinchAround),P.noInertia&&(l.noInertia=P.noInertia),a.e(p,U),a.e(T,Y);this._updateMapTransform(l,p,T),this._changes=[]}_updateMapTransform(l,p,T){const P=this._map,U=P._getTransformForUpdate(),Y=P.terrain;if(!(Ar(l)||Y&&this._terrainMovement))return this._fireEvents(p,T,!0);P._stop(!0);let{panDelta:re,zoomDelta:ue,bearingDelta:ge,pitchDelta:Ne,rollDelta:qe,around:Ge,pinchAround:ot}=l;ot!==void 0&&(Ge=ot),Ge=Ge||P.transform.centerPoint,Y&&!U.isPointOnMapSurface(Ge)&&(Ge=U.centerPoint);const ft={panDelta:re,zoomDelta:ue,rollDelta:qe,pitchDelta:Ne,bearingDelta:ge,around:Ge};this._map.cameraHelper.useGlobeControls&&!U.isPointOnMapSurface(Ge)&&(Ge=U.centerPoint);const Ot=Ge.distSqr(U.centerPoint)<.01?U.center:U.screenPointToLocation(re?Ge.sub(re):Ge);Y?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ft,U),this._terrainMovement||!p.drag&&!p.zoom?p.drag&&this._terrainMovement?U.setCenter(U.screenPointToLocation(U.centerPoint.sub(re))):this._map.cameraHelper.handleMapControlsPan(ft,U,Ot):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ft,U,Ot))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ft,U),this._map.cameraHelper.handleMapControlsPan(ft,U,Ot)),P._applyUpdatedTransform(U),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,T,!0)}_fireEvents(l,p,T){const P=Cn(this._eventsInProgress),U=Cn(l),Y={};for(const qe in l){const{originalEvent:Ge}=l[qe];this._eventsInProgress[qe]||(Y[`${qe}start`]=Ge),this._eventsInProgress[qe]=l[qe]}!P&&U&&this._fireEvent("movestart",U.originalEvent);for(const qe in Y)this._fireEvent(qe,Y[qe]);U&&this._fireEvent("move",U.originalEvent);for(const qe in l){const{originalEvent:Ge}=l[qe];this._fireEvent(qe,Ge)}const re={};let ue;for(const qe in this._eventsInProgress){const{handlerName:Ge,originalEvent:ot}=this._eventsInProgress[qe];this._handlersById[Ge].isActive()||(delete this._eventsInProgress[qe],ue=p[Ge]||ot,re[`${qe}end`]=ue)}for(const qe in re)this._fireEvent(qe,re[qe]);const ge=Cn(this._eventsInProgress),Ne=(P||U)&&!ge;if(Ne&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const qe=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&qe.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(qe)}if(T&&Ne){this._updatingCamera=!0;const qe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ge=ot=>ot!==0&&-this._bearingSnap<ot&&ot<this._bearingSnap;!qe||!qe.essential&&w.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:ue})),Ge(this._map.getBearing())&&this._map.resetNorth()):(Ge(qe.bearing||this._map.getBearing())&&(qe.bearing=0),qe.freezeElevation=!0,this._map.easeTo(qe,{originalEvent:ue})),this._updatingCamera=!1}}_fireEvent(l,p){this._map.fire(new a.l(l,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new gr("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ti extends a.E{constructor(l,p,T){super(),this._renderFrameCallback=()=>{const P=Math.min((w.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(P)),P<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=T.bearingSnap,this.cameraHelper=p,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(l,p){l.apply(this.transform),this.transform=l,this.cameraHelper=p}getCenter(){return new a.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(l,p){return this.jumpTo({center:l},p)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,p){return this.jumpTo({elevation:l},p),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,p,T){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},p),T)}panTo(l,p,T){return this.easeTo(a.e({center:l},p),T)}getZoom(){return this.transform.zoom}setZoom(l,p){return this.jumpTo({zoom:l},p),this}zoomTo(l,p,T){return this.easeTo(a.e({zoom:l},p),T)}zoomIn(l,p){return this.zoomTo(this.getZoom()+1,l,p),this}zoomOut(l,p){return this.zoomTo(this.getZoom()-1,l,p),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,p){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)).fire(new a.l("moveend",p))),this}getBearing(){return this.transform.bearing}setBearing(l,p){return this.jumpTo({bearing:l},p),this}getPadding(){return this.transform.padding}setPadding(l,p){return this.jumpTo({padding:l},p),this}rotateTo(l,p,T){return this.easeTo(a.e({bearing:l},p),T)}resetNorth(l,p){return this.rotateTo(0,a.e({duration:1e3},l),p),this}resetNorthPitch(l,p){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},l),p),this}snapToNorth(l,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,p):this}getPitch(){return this.transform.pitch}setPitch(l,p){return this.jumpTo({pitch:l},p),this}getRoll(){return this.transform.roll}setRoll(l,p){return this.jumpTo({roll:l},p),this}cameraForBounds(l,p){l=Ve.convert(l).adjustAntiMeridian();const T=p&&p.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),T,p)}_cameraForBoxAndBearing(l,p,T,P){const U={top:0,bottom:0,right:0,left:0};if(typeof(P=a.e({padding:U,offset:[0,0],maxZoom:this.transform.maxZoom},P)).padding=="number"){const ge=P.padding;P.padding={top:ge,bottom:ge,right:ge,left:ge}}const Y=a.e(U,P.padding);P.padding=Y;const re=this.transform,ue=new Ve(l,p);return this.cameraHelper.cameraForBoxAndBearing(P,Y,ue,T,re)}fitBounds(l,p,T){return this._fitInternal(this.cameraForBounds(l,p),p,T)}fitScreenCoordinates(l,p,T,P,U){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(l)),this.transform.screenPointToLocation(a.P.convert(p)),T,P),P,U)}_fitInternal(l,p,T){return l?(delete(p=a.e(l,p)).padding,p.linear?this.easeTo(p,T):this.flyTo(p,T)):this}jumpTo(l,p){this.stop();const T=this._getTransformForUpdate();let P=!1,U=!1,Y=!1;const re=T.zoom;this.cameraHelper.handleJumpToCenterZoom(T,l);const ue=T.zoom!==re;return"elevation"in l&&T.elevation!==+l.elevation&&T.setElevation(+l.elevation),"bearing"in l&&T.bearing!==+l.bearing&&(P=!0,T.setBearing(+l.bearing)),"pitch"in l&&T.pitch!==+l.pitch&&(U=!0,T.setPitch(+l.pitch)),"roll"in l&&T.roll!==+l.roll&&(Y=!0,T.setRoll(+l.roll)),l.padding==null||T.isPaddingEqual(l.padding)||T.setPadding(l.padding),this._applyUpdatedTransform(T),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)),ue&&this.fire(new a.l("zoomstart",p)).fire(new a.l("zoom",p)).fire(new a.l("zoomend",p)),P&&this.fire(new a.l("rotatestart",p)).fire(new a.l("rotate",p)).fire(new a.l("rotateend",p)),U&&this.fire(new a.l("pitchstart",p)).fire(new a.l("pitch",p)).fire(new a.l("pitchend",p)),Y&&this.fire(new a.l("rollstart",p)).fire(new a.l("roll",p)).fire(new a.l("rollend",p)),this.fire(new a.l("moveend",p))}calculateCameraOptionsFromTo(l,p,T,P=0){const U=a.$.fromLngLat(l,p),Y=a.$.fromLngLat(T,P),re=Y.x-U.x,ue=Y.y-U.y,ge=Y.z-U.z,Ne=Math.hypot(re,ue,ge);if(Ne===0)throw new Error("Can't calculate camera options with same From and To");const qe=Math.hypot(re,ue),Ge=a.ab(this.transform.cameraToCenterDistance/Ne/this.transform.tileSize),ot=180*Math.atan2(re,-ue)/Math.PI;let ft=180*Math.acos(qe/Ne)/Math.PI;return ft=ge<0?90-ft:90+ft,{center:Y.toLngLat(),elevation:P,zoom:Ge,pitch:ft,bearing:ot}}calculateCameraOptionsFromCameraLngLatAltRotation(l,p,T,P,U){const Y=this.transform.calculateCenterFromCameraLngLatAlt(l,p,T,P);return{center:Y.center,elevation:Y.elevation,zoom:Y.zoom,bearing:T,pitch:P,roll:U}}easeTo(l,p){this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.cb},l)).animate===!1||!l.essential&&w.prefersReducedMotion)&&(l.duration=0);const T=this._getTransformForUpdate(),P=this.getBearing(),U=T.pitch,Y=T.roll,re="bearing"in l?this._normalizeBearing(l.bearing,P):P,ue="pitch"in l?+l.pitch:U,ge="roll"in l?this._normalizeBearing(l.roll,Y):Y,Ne="padding"in l?l.padding:T.padding,qe=a.P.convert(l.offset);let Ge,ot;l.around&&(Ge=a.Q.convert(l.around),ot=T.locationToScreenPoint(Ge));const ft={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ot=this.cameraHelper.handleEaseTo(T,{bearing:re,pitch:ue,roll:ge,padding:Ne,around:Ge,aroundPoint:ot,offsetAsPoint:qe,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||P!==re,this._pitching=this._pitching||ue!==U,this._rolling=this._rolling||ge!==Y,this._padding=!T.isPaddingEqual(Ne),this._zooming=this._zooming||Ot.isZooming,this._easeId=l.easeId,this._prepareEase(p,l.noMoveStart,ft),this.terrain&&this._prepareElevation(Ot.elevationCenter),this._ease(Lt=>{Ot.easeFunc(Lt),this.terrain&&!l.freezeElevation&&this._updateElevation(Lt),this._applyUpdatedTransform(T),this._fireMoveEvents(p)},Lt=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p,Lt)},l),this}_prepareEase(l,p,T={}){this._moving=!0,p||T.moving||this.fire(new a.l("movestart",l)),this._zooming&&!T.zooming&&this.fire(new a.l("zoomstart",l)),this._rotating&&!T.rotating&&this.fire(new a.l("rotatestart",l)),this._pitching&&!T.pitching&&this.fire(new a.l("pitchstart",l)),this._rolling&&!T.rolling&&this.fire(new a.l("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&p!==this._elevationTarget){const T=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(T-(p-(T*l+this._elevationStart))/(1-l)),this._elevationTarget=p}this.transform.setElevation(a.B.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const p=l.getCameraLngLat(),T=l.getCameraAltitude(),P=this.terrain?this.terrain.getElevationForLngLatZoom(p,l.zoom):0;if(T<P){const U=this.calculateCameraOptionsFromTo(p,P,l.center,l.elevation);return{pitch:U.pitch,zoom:U.zoom}}return{}}_applyUpdatedTransform(l){const p=[];if(p.push(P=>this._elevateCameraIfInsideTerrain(P)),this.transformCameraUpdate&&p.push(P=>this.transformCameraUpdate(P)),!p.length)return;const T=l.clone();for(const P of p){const U=T.clone(),{center:Y,zoom:re,roll:ue,pitch:ge,bearing:Ne,elevation:qe}=P(U);Y&&U.setCenter(Y),qe!==void 0&&U.setElevation(qe),re!==void 0&&U.setZoom(re),ue!==void 0&&U.setRoll(ue),ge!==void 0&&U.setPitch(ge),Ne!==void 0&&U.setBearing(Ne),T.apply(U)}this.transform.apply(T)}_fireMoveEvents(l){this.fire(new a.l("move",l)),this._zooming&&this.fire(new a.l("zoom",l)),this._rotating&&this.fire(new a.l("rotate",l)),this._pitching&&this.fire(new a.l("pitch",l)),this._rolling&&this.fire(new a.l("roll",l))}_afterEase(l,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const T=this._zooming,P=this._rotating,U=this._pitching,Y=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,T&&this.fire(new a.l("zoomend",l)),P&&this.fire(new a.l("rotateend",l)),U&&this.fire(new a.l("pitchend",l)),Y&&this.fire(new a.l("rollend",l)),this.fire(new a.l("moveend",l))}flyTo(l,p){if(!l.essential&&w.prefersReducedMotion){const tr=a.O(l,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(tr,p)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cb},l);const T=this._getTransformForUpdate(),P=T.bearing,U=T.pitch,Y=T.roll,re=T.padding,ue="bearing"in l?this._normalizeBearing(l.bearing,P):P,ge="pitch"in l?+l.pitch:U,Ne="roll"in l?this._normalizeBearing(l.roll,Y):Y,qe="padding"in l?l.padding:T.padding,Ge=a.P.convert(l.offset);let ot=T.centerPoint.add(Ge);const ft=T.screenPointToLocation(ot),Ot=this.cameraHelper.handleFlyTo(T,{bearing:ue,pitch:ge,roll:Ne,padding:qe,locationAtOffset:ft,offsetAsPoint:Ge,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let Lt=l.curve;const Ft=Math.max(T.width,T.height),Xt=Ft/Ot.scaleOfZoom,nn=Ot.pixelPathLength;typeof Ot.scaleOfMinZoom=="number"&&(Lt=Math.sqrt(Ft/Ot.scaleOfMinZoom/nn*2));const an=Lt*Lt;function sn(tr){const Hr=(Xt*Xt-Ft*Ft+(tr?-1:1)*an*an*nn*nn)/(2*(tr?Xt:Ft)*an*nn);return Math.log(Math.sqrt(Hr*Hr+1)-Hr)}function pn(tr){return(Math.exp(tr)-Math.exp(-tr))/2}function hn(tr){return(Math.exp(tr)+Math.exp(-tr))/2}const Un=sn(!1);let On=function(tr){return hn(Un)/hn(Un+Lt*tr)},nr=function(tr){return Ft*((hn(Un)*(pn(Hr=Un+Lt*tr)/hn(Hr))-pn(Un))/an)/nn;var Hr},ir=(sn(!0)-Un)/Lt;if(Math.abs(nn)<2e-6||!isFinite(ir)){if(Math.abs(Ft-Xt)<1e-6)return this.easeTo(l,p);const tr=Xt<Ft?-1:1;ir=Math.abs(Math.log(Xt/Ft))/Lt,nr=()=>0,On=Hr=>Math.exp(tr*Lt*Hr)}return l.duration="duration"in l?+l.duration:1e3*ir/("screenSpeed"in l?+l.screenSpeed/Lt:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=P!==ue,this._pitching=ge!==U,this._rolling=Ne!==Y,this._padding=!T.isPaddingEqual(qe),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Ot.targetCenter),this._ease(tr=>{const Hr=tr*ir,Br=1/On(Hr),pr=nr(Hr);this._rotating&&T.setBearing(a.B.number(P,ue,tr)),this._pitching&&T.setPitch(a.B.number(U,ge,tr)),this._rolling&&T.setRoll(a.B.number(Y,Ne,tr)),this._padding&&(T.interpolatePadding(re,qe,tr),ot=T.centerPoint.add(Ge)),Ot.easeFunc(tr,Br,pr,ot),this.terrain&&!l.freezeElevation&&this._updateElevation(tr),this._applyUpdatedTransform(T),this._fireMoveEvents(p)},()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p)},l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,p){var T;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const P=this._onEaseEnd;delete this._onEaseEnd,P.call(this,p)}return l||(T=this.handlers)===null||T===void 0||T.stop(!1),this}_ease(l,p,T){T.animate===!1||T.duration===0?(l(1),p()):(this._easeStart=w.now(),this._easeOptions=T,this._onEaseFrame=l,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,p){l=a.aL(l,-180,180);const T=Math.abs(l-p);return Math.abs(l-360-p)<T&&(l-=360),Math.abs(l+360-p)<T&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.Q.convert(l),this.transform.tileZoom):null}}const Zr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class yr{constructor(l=Zr){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=_.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=_.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,p){const T=this._map._getUIString(`AttributionControl.${p}`);l.title=T,l.setAttribute("aria-label",T)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(P=>typeof P!="string"?"":P)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const P=this._map.style.stylesheet;this.styleOwner=P.owner,this.styleId=P.id}const p=this._map.style.sourceCaches;for(const P in p){const U=p[P];if(U.used||U.usedForTerrain){const Y=U.getSource();Y.attribution&&l.indexOf(Y.attribution)<0&&l.push(Y.attribution)}}l=l.filter(P=>String(P).trim()),l.sort((P,U)=>P.length-U.length),l=l.filter((P,U)=>{for(let Y=U+1;Y<l.length;Y++)if(l[Y].indexOf(P)>=0)return!1;return!0});const T=l.join(" | ");T!==this._attribHTML&&(this._attribHTML=T,l.length?(this._innerContainer.innerHTML=_.sanitize(T),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class or{constructor(l={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const T=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&T.classList.add("maplibregl-compact"):T.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=_.create("div","maplibregl-ctrl");const p=_.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ga{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p}remove(l){const p=this._currentlyRunning,T=p?this._queue.concat(p):this._queue;for(const P of T)if(P.id===l)return void(P.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const T of p)if(!T.cancelled&&(T.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var oo=a.aD([{name:"a_pos3d",type:"Int16",components:3}]);class Ca extends a.E{constructor(l){super(),this._lastTilesetChange=w.now(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,p){this.sourceCache.update(l,p),this._renderableTilesKeys=[];const T={};for(const P of rt(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))T[P.key]=!0,this._renderableTilesKeys.push(P.key),this._tiles[P.key]||(P.terrainRttPosMatrix32f=new Float64Array(16),a.bO(P.terrainRttPosMatrix32f,0,a.Z,a.Z,0,0,1),this._tiles[P.key]=new cn(P,this.tileSize),this._lastTilesetChange=w.now());for(const P in this._tiles)T[P]||delete this._tiles[P]}freeRtt(l){for(const p in this._tiles){const T=this._tiles[p];(!l||T.tileID.equals(l)||T.tileID.isChildOf(l)||l.isChildOf(T.tileID))&&(T.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l,p){return p?this._getTerrainCoordsForTileRanges(l,p):this._getTerrainCoordsForRegularTile(l)}_getTerrainCoordsForRegularTile(l){const p={};for(const T of this._renderableTilesKeys){const P=this._tiles[T].tileID,U=l.clone(),Y=a.b2();if(P.canonical.equals(l.canonical))a.bO(Y,0,a.Z,a.Z,0,0,1);else if(P.canonical.isChildOf(l.canonical)){const re=P.canonical.z-l.canonical.z,ue=P.canonical.x-(P.canonical.x>>re<<re),ge=P.canonical.y-(P.canonical.y>>re<<re),Ne=a.Z>>re;a.bO(Y,0,Ne,Ne,0,0,1),a.L(Y,Y,[-ue*Ne,-ge*Ne,0])}else{if(!l.canonical.isChildOf(P.canonical))continue;{const re=l.canonical.z-P.canonical.z,ue=l.canonical.x-(l.canonical.x>>re<<re),ge=l.canonical.y-(l.canonical.y>>re<<re),Ne=a.Z>>re;a.bO(Y,0,a.Z,a.Z,0,0,1),a.L(Y,Y,[ue*Ne,ge*Ne,0]),a.M(Y,Y,[1/2**re,1/2**re,0])}}U.terrainRttPosMatrix32f=new Float32Array(Y),p[T]=U}return p}_getTerrainCoordsForTileRanges(l,p){const T={};for(const P of this._renderableTilesKeys){const U=this._tiles[P].tileID;if(!this._isWithinTileRanges(U,p))continue;const Y=l.clone(),re=a.b2();if(U.canonical.z===l.canonical.z){const ue=l.canonical.x-U.canonical.x,ge=l.canonical.y-U.canonical.y;a.bO(re,0,a.Z,a.Z,0,0,1),a.L(re,re,[ue*a.Z,ge*a.Z,0])}else if(U.canonical.z>l.canonical.z){const ue=U.canonical.z-l.canonical.z,ge=U.canonical.x-(U.canonical.x>>ue<<ue),Ne=U.canonical.y-(U.canonical.y>>ue<<ue),qe=l.canonical.x-(U.canonical.x>>ue),Ge=l.canonical.y-(U.canonical.y>>ue),ot=a.Z>>ue;a.bO(re,0,ot,ot,0,0,1),a.L(re,re,[-ge*ot+qe*a.Z,-Ne*ot+Ge*a.Z,0])}else{const ue=l.canonical.z-U.canonical.z,ge=l.canonical.x-(l.canonical.x>>ue<<ue),Ne=l.canonical.y-(l.canonical.y>>ue<<ue),qe=(l.canonical.x>>ue)-U.canonical.x,Ge=(l.canonical.y>>ue)-U.canonical.y,ot=a.Z<<ue;a.bO(re,0,ot,ot,0,0,1),a.L(re,re,[ge*a.Z+qe*ot,Ne*a.Z+Ge*ot,0])}Y.terrainRttPosMatrix32f=new Float32Array(re),T[P]=Y}return T}getSourceTile(l,p){const T=this.sourceCache._source;let P=l.overscaledZ-this.deltaZoom;if(P>T.maxzoom&&(P=T.maxzoom),P<T.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(P).key);let U=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!U||!U.dem)&&p)for(;P>=T.minzoom&&(!U||!U.dem);)U=this.sourceCache.getTileByID(l.scaledTo(P--).key);return U}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}_isWithinTileRanges(l,p){return p[l.canonical.z]&&l.canonical.x>=p[l.canonical.z].minTileX&&l.canonical.x<=p[l.canonical.z].maxTileX&&l.canonical.y>=p[l.canonical.z].minTileY&&l.canonical.y<=p[l.canonical.z].maxTileY}}class $i{constructor(l,p,T){this._meshCache={},this.painter=l,this.sourceCache=new Ca(p),this.options=T,this.exaggeration=typeof T.exaggeration=="number"?T.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,p,T,P=a.Z){var U;if(!(p>=0&&p<P&&T>=0&&T<P))return 0;const Y=this.getTerrainData(l),re=(U=Y.tile)===null||U===void 0?void 0:U.dem;if(!re)return 0;const ue=a.cf([],[p/P*a.Z,T/P*a.Z],Y.u_terrain_matrix),ge=[ue[0]*re.dim,ue[1]*re.dim],Ne=Math.floor(ge[0]),qe=Math.floor(ge[1]),Ge=ge[0]-Ne,ot=ge[1]-qe;return re.get(Ne,qe)*(1-Ge)*(1-ot)+re.get(Ne+1,qe)*Ge*(1-ot)+re.get(Ne,qe+1)*(1-Ge)*ot+re.get(Ne+1,qe+1)*Ge*ot}getElevationForLngLatZoom(l,p){if(!a.cg(p,l.wrap()))return 0;const{tileID:T,mercatorX:P,mercatorY:U}=this._getOverscaledTileIDFromLngLatZoom(l,p);return this.getElevation(T,P%a.Z,U%a.Z,a.Z)}getElevation(l,p,T,P=a.Z){return this.getDEMElevation(l,p,T,P)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const P=this.painter.context,U=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new X(P,U,P.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new X(P,new a.R({width:1,height:1}),P.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(P.gl.NEAREST,P.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.at([])}const p=this.sourceCache.getSourceTile(l,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const P=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new X(P,p.dem.getPixels(),P.gl.RGBA,{premultiply:!1}),p.demTexture.bind(P.gl.NEAREST,P.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const T=p&&p+p.tileID.key+l.key;if(T&&!this._demMatrixCache[T]){const P=this.sourceCache.sourceCache._source.maxzoom;let U=l.canonical.z-p.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=P?U=l.canonical.z-P:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const Y=l.canonical.x-(l.canonical.x>>U<<U),re=l.canonical.y-(l.canonical.y>>U<<U),ue=a.ch(new Float64Array(16),[1/(a.Z<<U),1/(a.Z<<U),0]);a.L(ue,ue,[Y*a.Z,re*a.Z,0]),this._demMatrixCache[l.key]={matrix:ue,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:T?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(l){const p=this.painter,T=p.width/devicePixelRatio,P=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===T&&this._fbo.height===P||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new X(p.context,{width:T,height:P,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new X(p.context,{width:T,height:P,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(T,P,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,T,P))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let U=0,Y=0;U<this._coordsTextureSize;U++)for(let re=0;re<this._coordsTextureSize;re++,Y+=4)p[Y+0]=255&re,p[Y+1]=255&U,p[Y+2]=re>>8<<4|U>>8,p[Y+3]=0;const T=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),P=new X(l,T,l.gl.RGBA,{premultiply:!1});return P.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=P,P}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),T=this.painter.context,P=T.gl,U=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),Y=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),re=Math.round(this.painter.height/devicePixelRatio);T.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),P.readPixels(U,re-Y-1,1,1,P.RGBA,P.UNSIGNED_BYTE,p),T.bindFramebuffer.set(null);const ue=p[0]+(p[2]>>4<<8),ge=p[1]+((15&p[2])<<8),Ne=this.coordsIndex[255-p[3]],qe=Ne&&this.sourceCache.getTileByID(Ne);if(!qe)return null;const Ge=this._coordsTextureSize,ot=(1<<qe.tileID.canonical.z)*Ge;return new a.$((qe.tileID.canonical.x*Ge+ue)/ot+qe.tileID.wrap,(qe.tileID.canonical.y*Ge+ge)/ot,this.getElevation(qe.tileID,ue,ge,Ge))}depthAtPoint(l){const p=new Uint8Array(4),T=this.painter.context,P=T.gl;return T.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),P.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,P.RGBA,P.UNSIGNED_BYTE,p),T.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(l){var p;const T=((p=this.painter.style.projection)===null||p===void 0?void 0:p.transitionState)>0,P=T&&l.canonical.y===0,U=T&&l.canonical.y===(1<<l.canonical.z)-1,Y=`m_${P?"n":""}_${U?"s":""}`;if(this._meshCache[Y])return this._meshCache[Y];const re=this.painter.context,ue=new a.ci,ge=new a.aH,Ne=this.meshSize,qe=a.Z/Ne,Ge=Ne*Ne;for(let hn=0;hn<=Ne;hn++)for(let Un=0;Un<=Ne;Un++)ue.emplaceBack(Un*qe,hn*qe,0);for(let hn=0;hn<Ge;hn+=Ne+1)for(let Un=0;Un<Ne;Un++)ge.emplaceBack(Un+hn,Ne+Un+hn+1,Ne+Un+hn+2),ge.emplaceBack(Un+hn,Ne+Un+hn+2,Un+hn+1);const ot=ue.length,ft=ot+(Ne+1),Ot=(Ne+1)*Ne,Lt=P?a.b9:0,Ft=P?0:1,Xt=U?a.ba:a.Z,nn=U?0:1;for(let hn=0;hn<=Ne;hn++)ue.emplaceBack(hn*qe,Lt,Ft);for(let hn=0;hn<=Ne;hn++)ue.emplaceBack(hn*qe,Xt,nn);for(let hn=0;hn<Ne;hn++)ge.emplaceBack(Ot+hn,ft+hn,ft+hn+1),ge.emplaceBack(Ot+hn,ft+hn+1,Ot+hn+1),ge.emplaceBack(0+hn,ot+hn+1,ot+hn),ge.emplaceBack(0+hn,0+hn+1,ot+hn+1);const an=ue.length,sn=an+2*(Ne+1);for(const hn of[0,1])for(let Un=0;Un<=Ne;Un++)for(const On of[0,1])ue.emplaceBack(hn*a.Z,Un*qe,On);for(let hn=0;hn<2*Ne;hn+=2)ge.emplaceBack(an+hn,an+hn+1,an+hn+3),ge.emplaceBack(an+hn,an+hn+3,an+hn+2),ge.emplaceBack(sn+hn,sn+hn+3,sn+hn+1),ge.emplaceBack(sn+hn,sn+hn+2,sn+hn+3);const pn=new Ta(re.createVertexBuffer(ue,oo.members),re.createIndexBuffer(ge),a.aG.simpleSegment(0,0,ue.length,ge.length));return this._meshCache[Y]=pn,pn}getMeshFrameDelta(l){return 2*Math.PI*a.br/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,p){var T;const{tileID:P}=this._getOverscaledTileIDFromLngLatZoom(l,p);return(T=this.getMinMaxElevation(P).minElevation)!==null&&T!==void 0?T:0}getMinMaxElevation(l){const p=this.getTerrainData(l).tile,T={minElevation:null,maxElevation:null};return p&&p.dem&&(T.minElevation=p.dem.min*this.exaggeration,T.maxElevation=p.dem.max*this.exaggeration),T}_getOverscaledTileIDFromLngLatZoom(l,p){const T=a.$.fromLngLat(l.wrap()),P=(1<<p)*a.Z,U=T.x*P,Y=T.y*P,re=Math.floor(U/a.Z),ue=Math.floor(Y/a.Z);return{tileID:new a.Y(p,0,p,re,ue),mercatorX:U,mercatorY:Y}}}class Eo{constructor(l,p,T){this._context=l,this._size=p,this._tileSize=T,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),T=new X(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return T.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(T.texture),{id:l,fbo:p,texture:T,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>l.id!==p),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(l=>!l.inUse)===!1}}const ga={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ma{constructor(l,p){this.painter=l,this.terrain=p,this.pool=new Eo(l.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter(T=>!l._layers[T].isHidden(p)),this._coordsAscending={};for(const T in l.sourceCaches){this._coordsAscending[T]={};const P=l.sourceCaches[T].getVisibleCoordinates(),U=l.sourceCaches[T].getSource(),Y=U instanceof qt?U.terrainTileRanges:null;for(const re of P){const ue=this.terrain.sourceCache.getTerrainCoords(re,Y);for(const ge in ue)this._coordsAscending[T][ge]||(this._coordsAscending[T][ge]=[]),this._coordsAscending[T][ge].push(ue[ge])}}this._coordsAscendingStr={};for(const T of l._order){const P=l._layers[T],U=P.source;if(ga[P.type]&&!this._coordsAscendingStr[U]){this._coordsAscendingStr[U]={};for(const Y in this._coordsAscending[U])this._coordsAscendingStr[U][Y]=this._coordsAscending[U][Y].map(re=>re.key).sort().join()}}for(const T of this._renderableTiles)for(const P in this._coordsAscendingStr){const U=this._coordsAscendingStr[P][T.tileID.key];U&&U!==T.rttCoords[P]&&(T.rtt=[])}}renderLayer(l,p){if(l.isHidden(this.painter.transform.zoom))return!1;const T=Object.assign(Object.assign({},p),{isRenderingToTexture:!0}),P=l.type,U=this.painter,Y=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(ga[P]&&(this._prevType&&ga[this._prevType]||this._stacks.push([]),this._prevType=P,this._stacks[this._stacks.length-1].push(l.id),!Y))return!0;if(ga[this._prevType]||ga[P]&&Y){this._prevType=P;const re=this._stacks.length-1,ue=this._stacks[re]||[];for(const ge of this._renderableTiles){if(this.pool.isFull()&&(qu(this.painter,this.terrain,this._rttTiles,T),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ge),ge.rtt[re]){const qe=this.pool.getObjectForId(ge.rtt[re].id);if(qe.stamp===ge.rtt[re].stamp){this.pool.useObject(qe);continue}}const Ne=this.pool.getOrCreateFreeObject();this.pool.useObject(Ne),this.pool.stampObject(Ne),ge.rtt[re]={id:Ne.id,stamp:Ne.stamp},U.context.bindFramebuffer.set(Ne.fbo.framebuffer),U.context.clear({color:a.b7.transparent,stencil:0}),U.currentStencilSource=void 0;for(let qe=0;qe<ue.length;qe++){const Ge=U.style._layers[ue[qe]],ot=Ge.source?this._coordsAscending[Ge.source][ge.tileID.key]:[ge.tileID];U.context.viewport.set([0,0,Ne.fbo.width,Ne.fbo.height]),U._renderTileClippingMasks(Ge,ot,!0),U.renderLayer(U,U.style.sourceCaches[Ge.source],Ge,ot,T),Ge.source&&(ge.rttCoords[Ge.source]=this._coordsAscendingStr[Ge.source][ge.tileID.key])}}return qu(this.painter,this.terrain,this._rttTiles,T),this._rttTiles=[],this.pool.freeAllObjects(),ga[P]}return!1}}const ho={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},fi=c,Ei={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Zr,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Xa={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ua{constructor(l,p,T=!1){this.mousedown=U=>{this.startMove(U,_.mousePos(this.element,U)),_.addEventListener(window,"mousemove",this.mousemove),_.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=U=>{this.move(U,_.mousePos(this.element,U))},this.mouseup=U=>{this._rotatePitchHanlder.dragEnd(U),this.offTemp()},this.touchstart=U=>{U.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,U.targetTouches)[0],this.startMove(U,this._startPos),_.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.addEventListener(window,"touchend",this.touchend))},this.touchmove=U=>{U.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,U.targetTouches)[0],this.move(U,this._lastPos))},this.touchend=U=>{U.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=p;const P=new Dp;this._rotatePitchHanlder=new as({clickTolerance:3,move:(U,Y)=>{const re=p.getBoundingClientRect(),ue=new a.P((re.bottom-re.top)/2,(re.right-re.left)/2);return{bearingDelta:a.ca(new a.P(U.x,Y.y),Y,ue),pitchDelta:T?-.5*(Y.y-U.y):void 0}},moveStateManager:P,enable:!0,assignEvents:()=>{}}),this.map=l,_.addEventListener(p,"mousedown",this.mousedown),_.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(p,"touchcancel",this.reset)}startMove(l,p){this._rotatePitchHanlder.dragStart(l,p),_.disableDrag()}move(l,p){const T=this.map,{bearingDelta:P,pitchDelta:U}=this._rotatePitchHanlder.dragMove(l,p)||{};P&&T.setBearing(T.getBearing()+P),U&&T.setPitch(T.getPitch()+U)}off(){const l=this.element;_.removeEventListener(l,"mousedown",this.mousedown),_.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend),_.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){_.enableDrag(),_.removeEventListener(window,"mousemove",this.mousemove),_.removeEventListener(window,"mouseup",this.mouseup),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend)}}let No;function As(B,l,p){const T=new a.Q(B.lng,B.lat);if(B=new a.Q(B.lng,B.lat),l){const P=new a.Q(B.lng-360,B.lat),U=new a.Q(B.lng+360,B.lat),Y=p.locationToScreenPoint(B).distSqr(l);p.locationToScreenPoint(P).distSqr(l)<Y?B=P:p.locationToScreenPoint(U).distSqr(l)<Y&&(B=U)}for(;Math.abs(B.lng-p.center.lng)>180;){const P=p.locationToScreenPoint(B);if(P.x>=0&&P.y>=0&&P.x<=p.width&&P.y<=p.height)break;B.lng>p.center.lng?B.lng-=360:B.lng+=360}return B.lng!==T.lng&&p.isPointOnMapSurface(p.locationToScreenPoint(B))?B:T}const Yo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function os(B,l,p){const T=B.classList;for(const P in Yo)T.remove(`maplibregl-${p}-anchor-${P}`);T.add(`maplibregl-${p}-anchor-${l}`)}class Uo extends a.E{constructor(l){if(super(),this._onKeyPress=p=>{const T=p.code,P=p.charCode||p.keyCode;T!=="Space"&&T!=="Enter"&&P!==32&&P!==13||this.togglePopup()},this._onMapClick=p=>{const T=p.originalEvent.target,P=this._element;this._popup&&(T===P||P.contains(T))&&this.togglePopup()},this._update=p=>{var T;if(!this._map)return;const P=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!P)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?As(this._lngLat,this._flatPos,this._map.transform):(T=this._lngLat)===null||T===void 0?void 0:T.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let U="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?U=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(U=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let Y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Y="rotateX(0deg)":this._pitchAlignment==="map"&&(Y=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,`${Yo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${Y} ${U}`),w.frameAsync(new AbortController).then(()=>{this._updateOpacity(p&&p.type==="moveend")}).catch(()=>{})},this._onMove=p=>{if(!this._isDragging){const T=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=T}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(l==null?void 0:l.opacity,l==null?void 0:l.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div");const p=_.createNS("http://www.w3.org/2000/svg","svg"),T=41,P=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${T}px`),p.setAttributeNS(null,"width",`${P}px`),p.setAttributeNS(null,"viewBox",`0 0 ${P} ${T}`);const U=_.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"stroke","none"),U.setAttributeNS(null,"stroke-width","1"),U.setAttributeNS(null,"fill","none"),U.setAttributeNS(null,"fill-rule","evenodd");const Y=_.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"fill-rule","nonzero");const re=_.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(3.0, 29.0)"),re.setAttributeNS(null,"fill","#000000");const ue=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ft of ue){const Xt=_.createNS("http://www.w3.org/2000/svg","ellipse");Xt.setAttributeNS(null,"opacity","0.04"),Xt.setAttributeNS(null,"cx","10.5"),Xt.setAttributeNS(null,"cy","5.80029008"),Xt.setAttributeNS(null,"rx",Ft.rx),Xt.setAttributeNS(null,"ry",Ft.ry),re.appendChild(Xt)}const ge=_.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"fill",this._color);const Ne=_.createNS("http://www.w3.org/2000/svg","path");Ne.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ge.appendChild(Ne);const qe=_.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"opacity","0.25"),qe.setAttributeNS(null,"fill","#000000");const Ge=_.createNS("http://www.w3.org/2000/svg","path");Ge.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),qe.appendChild(Ge);const ot=_.createNS("http://www.w3.org/2000/svg","g");ot.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ot.setAttributeNS(null,"fill","#FFFFFF");const ft=_.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ot=_.createNS("http://www.w3.org/2000/svg","circle");Ot.setAttributeNS(null,"fill","#000000"),Ot.setAttributeNS(null,"opacity","0.25"),Ot.setAttributeNS(null,"cx","5.5"),Ot.setAttributeNS(null,"cy","5.5"),Ot.setAttributeNS(null,"r","5.4999962");const Lt=_.createNS("http://www.w3.org/2000/svg","circle");Lt.setAttributeNS(null,"fill","#FFFFFF"),Lt.setAttributeNS(null,"cx","5.5"),Lt.setAttributeNS(null,"cy","5.5"),Lt.setAttributeNS(null,"r","5.4999962"),ft.appendChild(Ot),ft.appendChild(Lt),Y.appendChild(re),Y.appendChild(ge),Y.appendChild(qe),Y.appendChild(ot),Y.appendChild(ft),p.appendChild(Y),p.setAttributeNS(null,"height",T*this._scale+"px"),p.setAttributeNS(null,"width",P*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),os(this._element,this._anchor,"marker"),l&&l.className)for(const p of l.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.Q.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const P=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[P,-1*(38.1-13.5+P)],"bottom-right":[-P,-1*(38.1-13.5+P)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var p,T;if(!(!((p=this._map)===null||p===void 0)&&p.terrain)){const qe=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==qe&&(this._element.style.opacity=qe))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const P=this._map,U=P.terrain.depthAtPoint(this._pos),Y=P.terrain.getElevationForLngLatZoom(this._lngLat,P.transform.tileZoom);if(P.transform.lngLatToCameraDepth(this._lngLat,Y)-U<.006)return void(this._element.style.opacity=this._opacity);const re=-this._offset.y/P.transform.pixelsPerMeter,ue=Math.sin(P.getPitch()*Math.PI/180)*re,ge=P.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),Ne=P.transform.lngLatToCameraDepth(this._lngLat,Y+ue)-ge>.006;!((T=this._popup)===null||T===void 0)&&T.isOpen()&&Ne&&this._popup.remove(),this._element.style.opacity=Ne?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,p){return(this._opacity===void 0||l===void 0&&p===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const Ru={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Va=0,jo=!1;const Xu={maxWidth:100,unit:"metric"};function Pc(B,l,p){const T=p&&p.maxWidth||100,P=B._container.clientHeight/2,U=B._container.clientWidth/2,Y=B.unproject([U-T/2,P]),re=B.unproject([U+T/2,P]),ue=Math.round(B.project(re).x-B.project(Y).x),ge=Math.min(T,ue,B._container.clientWidth),Ne=Y.distanceTo(re);if(p&&p.unit==="imperial"){const qe=3.2808*Ne;qe>5280?Yu(l,ge,qe/5280,B._getUIString("ScaleControl.Miles")):Yu(l,ge,qe,B._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?Yu(l,ge,Ne/1852,B._getUIString("ScaleControl.NauticalMiles")):Ne>=1e3?Yu(l,ge,Ne/1e3,B._getUIString("ScaleControl.Kilometers")):Yu(l,ge,Ne,B._getUIString("ScaleControl.Meters"))}function Yu(B,l,p,T){const P=function(U){const Y=Math.pow(10,`${Math.floor(U)}`.length-1);let re=U/Y;return re=re>=10?10:re>=5?5:re>=3?3:re>=2?2:re>=1?1:function(ue){const ge=Math.pow(10,Math.ceil(-Math.log(ue)/Math.LN10));return Math.round(ue*ge)/ge}(re),Y*re}(p);B.style.width=l*(P/p)+"px",B.innerHTML=`${P}&nbsp;${T}`}const eh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Go=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ah(B){if(B){if(typeof B=="number"){const l=Math.round(Math.abs(B)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,B),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-B),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(B,0),right:new a.P(-B,0)}}if(B instanceof a.P||Array.isArray(B)){const l=a.P.convert(B);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(B.center||[0,0]),top:a.P.convert(B.top||[0,0]),"top-left":a.P.convert(B["top-left"]||[0,0]),"top-right":a.P.convert(B["top-right"]||[0,0]),bottom:a.P.convert(B.bottom||[0,0]),"bottom-left":a.P.convert(B["bottom-left"]||[0,0]),"bottom-right":a.P.convert(B["bottom-right"]||[0,0]),left:a.P.convert(B.left||[0,0]),right:a.P.convert(B.right||[0,0])}}return Ah(new a.P(0,0))}const ad=c;s.AJAXError=a.cm,s.Event=a.l,s.Evented=a.E,s.LngLat=a.Q,s.MercatorCoordinate=a.$,s.Point=a.P,s.addProtocol=a.cn,s.config=a.a,s.removeProtocol=a.co,s.AttributionControl=yr,s.BoxZoomHandler=Au,s.CanvasSource=Re,s.CooperativeGesturesHandler=_n,s.DoubleClickZoomHandler=vn,s.DragPanHandler=Rn,s.DragRotateHandler=ar,s.EdgeInsets=ur,s.FullscreenControl=class extends a.E{constructor(B={}){super(),this._onFullscreenChange=()=>{var l;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=p==null?void 0:p.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,B&&B.container&&(B.container instanceof HTMLElement?this._container=B.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){_.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const B=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon",B).setAttribute("aria-hidden","true"),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=ht,s.GeolocateControl=class extends a.E{constructor(B){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",l)),this._finish()}},this._updateCamera=l=>{const p=new a.Q(l.coords.longitude,l.coords.latitude),T=l.coords.accuracy,P=this._map.getBearing(),U=a.e({bearing:P},this.options.fitBoundsOptions),Y=Ve.fromLngLat(p,T);this._map.fitBounds(Y,U,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const p=new a.Q(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&jo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Uo({element:this._dotElement}),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Uo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p.originalEvent&&p.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},Ru,B)}onAdd(B){return this._map=B,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(l=!1){if(No!==void 0&&!l)return No;if(window.navigator.permissions===void 0)return No=!!window.navigator.geolocation,No;try{No=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{No=!!window.navigator.geolocation}return No})}().then(l=>this._finishSetupUI(l)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Va=0,jo=!1}_isOutOfMapMaxBounds(B){const l=this._map.getMaxBounds(),p=B.coords;return l&&(p.longitude<l.getWest()||p.longitude>l.getEast()||p.latitude<l.getSouth()||p.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const B=this._map.getBounds(),l=B.getSouthEast(),p=B.getNorthEast(),T=l.distanceTo(p),P=Math.ceil(this._accuracy/(T/this._map._container.clientHeight)*2);this._circleElement.style.width=`${P}px`,this._circleElement.style.height=`${P}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Va--,jo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let B;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Va++,Va>1?(B={maximumAge:6e5,timeout:0},jo=!0):(B=this.options.positionOptions,jo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,B)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.GlobeControl=class{constructor(){this._toggleProjection=()=>{var B;const l=(B=this._map.getProjection())===null||B===void 0?void 0:B.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var B;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((B=this._map.getProjection())===null||B===void 0?void 0:B.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(B){return this._map=B,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=_.create("button","maplibregl-ctrl-globe",this._container),_.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},s.Hash=Mc,s.ImageSource=qt,s.KeyboardHandler=vt,s.LngLatBounds=Ve,s.LogoControl=or,s.Map=class extends ti{constructor(B){var l,p;a.cj.mark(a.ck.create);const T=Object.assign(Object.assign(Object.assign({},Ei),B),{canvasContextAttributes:Object.assign(Object.assign({},Ei.canvasContextAttributes),B.canvasContextAttributes)});if(T.minZoom!=null&&T.maxZoom!=null&&T.minZoom>T.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(T.minPitch!=null&&T.maxPitch!=null&&T.minPitch>T.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(T.minPitch!=null&&T.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(T.maxPitch!=null&&T.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const P=new Vr,U=new ea;if(T.minZoom!==void 0&&P.setMinZoom(T.minZoom),T.maxZoom!==void 0&&P.setMaxZoom(T.maxZoom),T.minPitch!==void 0&&P.setMinPitch(T.minPitch),T.maxPitch!==void 0&&P.setMaxPitch(T.maxPitch),T.renderWorldCopies!==void 0&&P.setRenderWorldCopies(T.renderWorldCopies),super(P,U,{bearingSnap:T.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ga,this._controls=[],this._mapId=a.a4(),this._contextLost=re=>{re.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:re}))},this._contextRestored=re=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:re}))},this._onMapScroll=re=>{if(re.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=T.interactive,this._maxTileCacheSize=T.maxTileCacheSize,this._maxTileCacheZoomLevels=T.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},T.canvasContextAttributes),this._trackResize=T.trackResize===!0,this._bearingSnap=T.bearingSnap,this._centerClampedToGround=T.centerClampedToGround,this._refreshExpiredTiles=T.refreshExpiredTiles===!0,this._fadeDuration=T.fadeDuration,this._crossSourceCollisions=T.crossSourceCollisions===!0,this._collectResourceTiming=T.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ho),T.locale),this._clickTolerance=T.clickTolerance,this._overridePixelRatio=T.pixelRatio,this._maxCanvasSize=T.maxCanvasSize,this.transformCameraUpdate=T.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=T.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=N.addThrottleControl(()=>this.isMoving()),this._requestManager=new H(T.transformRequest),typeof T.container=="string"){if(this._container=document.getElementById(T.container),!this._container)throw new Error(`Container '${T.container}' not found.`)}else{if(!(T.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=T.container}if(T.maxBounds&&this.setMaxBounds(T.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let re=!1;const ue=Pp(ge=>{this._trackResize&&!this._removed&&(this.resize(ge),this.redraw())},50);this._resizeObserver=new ResizeObserver(ge=>{re?ue(ge):re=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Er(this,T),this._hash=T.hash&&new Mc(typeof T.hash=="string"&&T.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:T.bearing,pitch:T.pitch,roll:T.roll}),T.bounds&&(this.resize(),this.fitBounds(T.bounds,a.e({},T.fitBoundsOptions,{duration:0}))));const Y=typeof T.style=="string"||((p=(l=T.style)===null||l===void 0?void 0:l.projection)===null||p===void 0?void 0:p.type)!=="globe";this.resize(null,Y),this._localIdeographFontFamily=T.localIdeographFontFamily,this._validateStyle=T.validateStyle,T.style&&this.setStyle(T.style,{localIdeographFontFamily:T.localIdeographFontFamily}),T.attributionControl&&this.addControl(new yr(typeof T.attributionControl=="boolean"?void 0:T.attributionControl)),T.maplibreLogo&&this.addControl(new or,T.logoPosition),this.on("style.load",()=>{if(Y||this._resizeTransform(),this.transform.unmodified){const re=a.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(re)}}),this.on("data",re=>{this._update(re.dataType==="style"),this.fire(new a.l(`${re.dataType}data`,re))}),this.on("dataloading",re=>{this.fire(new a.l(`${re.dataType}dataloading`,re))}),this.on("dataabort",re=>{this.fire(new a.l("sourcedataabort",re))})}_getMapId(){return this._mapId}addControl(B,l){if(l===void 0&&(l=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=B.onAdd(this);this._controls.push(B);const T=this._controlPositions[l];return l.indexOf("bottom")!==-1?T.insertBefore(p,T.firstChild):T.appendChild(p),this}removeControl(B){if(!B||!B.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(B);return l>-1&&this._controls.splice(l,1),B.onRemove(this),this}hasControl(B){return this._controls.indexOf(B)>-1}calculateCameraOptionsFromTo(B,l,p,T){return T==null&&this.terrain&&(T=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(B,l,p,T)}resize(B,l=!0){const[p,T]=this._containerDimensions(),P=this._getClampedPixelRatio(p,T);if(this._resizeCanvas(p,T,P),this.painter.resize(p,T,P),this.painter.overLimit()){const Y=this.painter.context.gl;this._maxCanvasSize=[Y.drawingBufferWidth,Y.drawingBufferHeight];const re=this._getClampedPixelRatio(p,T);this._resizeCanvas(p,T,re),this.painter.resize(p,T,re)}this._resizeTransform(l);const U=!this._moving;return U&&(this.stop(),this.fire(new a.l("movestart",B)).fire(new a.l("move",B))),this.fire(new a.l("resize",B)),U&&this.fire(new a.l("moveend",B)),this}_resizeTransform(B=!0){var l;const[p,T]=this._containerDimensions();this.transform.resize(p,T,B),(l=this._requestedCameraState)===null||l===void 0||l.resize(p,T,B)}_getClampedPixelRatio(B,l){const{0:p,1:T}=this._maxCanvasSize,P=this.getPixelRatio(),U=B*P,Y=l*P;return Math.min(U>p?p/U:1,Y>T?T/Y:1)*P}getPixelRatio(){var B;return(B=this._overridePixelRatio)!==null&&B!==void 0?B:devicePixelRatio}setPixelRatio(B){this._overridePixelRatio=B,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(B){return this.transform.setMaxBounds(Ve.convert(B)),this._update()}setMinZoom(B){if((B=B??-2)>=-2&&B<=this.transform.maxZoom)return this.transform.setMinZoom(B),this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(B){if((B=B??22)>=this.transform.minZoom)return this.transform.setMaxZoom(B),this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(B){if((B=B??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.setMinPitch(B),this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(B){if((B=B??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(B>=this.transform.minPitch)return this.transform.setMaxPitch(B),this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(B){return this.transform.setRenderWorldCopies(B),this._update()}project(B){return this.transform.locationToScreenPoint(a.Q.convert(B),this.style&&this.terrain)}unproject(B){return this.transform.screenPointToLocation(a.P.convert(B),this.terrain)}isMoving(){var B;return this._moving||((B=this.handlers)===null||B===void 0?void 0:B.isMoving())}isZooming(){var B;return this._zooming||((B=this.handlers)===null||B===void 0?void 0:B.isZooming())}isRotating(){var B;return this._rotating||((B=this.handlers)===null||B===void 0?void 0:B.isRotating())}_createDelegatedListener(B,l,p){if(B==="mouseenter"||B==="mouseover"){let T=!1;return{layers:l,listener:p,delegates:{mousemove:U=>{const Y=l.filter(ue=>this.getLayer(ue)),re=Y.length!==0?this.queryRenderedFeatures(U.point,{layers:Y}):[];re.length?T||(T=!0,p.call(this,new dl(B,this,U.originalEvent,{features:re}))):T=!1},mouseout:()=>{T=!1}}}}if(B==="mouseleave"||B==="mouseout"){let T=!1;return{layers:l,listener:p,delegates:{mousemove:Y=>{const re=l.filter(ue=>this.getLayer(ue));(re.length!==0?this.queryRenderedFeatures(Y.point,{layers:re}):[]).length?T=!0:T&&(T=!1,p.call(this,new dl(B,this,Y.originalEvent)))},mouseout:Y=>{T&&(T=!1,p.call(this,new dl(B,this,Y.originalEvent)))}}}}{const T=P=>{const U=l.filter(re=>this.getLayer(re)),Y=U.length!==0?this.queryRenderedFeatures(P.point,{layers:U}):[];Y.length&&(P.features=Y,p.call(this,P),delete P.features)};return{layers:l,listener:p,delegates:{[B]:T}}}}_saveDelegatedListener(B,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(l)}_removeDelegatedListener(B,l,p){if(!this._delegatedListeners||!this._delegatedListeners[B])return;const T=this._delegatedListeners[B];for(let P=0;P<T.length;P++){const U=T[P];if(U.listener===p&&U.layers.length===l.length&&U.layers.every(Y=>l.includes(Y))){for(const Y in U.delegates)this.off(Y,U.delegates[Y]);return void T.splice(P,1)}}}on(B,l,p){if(p===void 0)return super.on(B,l);const T=typeof l=="string"?[l]:l,P=this._createDelegatedListener(B,T,p);this._saveDelegatedListener(B,P);for(const U in P.delegates)this.on(U,P.delegates[U]);return{unsubscribe:()=>{this._removeDelegatedListener(B,T,p)}}}once(B,l,p){if(p===void 0)return super.once(B,l);const T=typeof l=="string"?[l]:l,P=this._createDelegatedListener(B,T,p);for(const U in P.delegates){const Y=P.delegates[U];P.delegates[U]=(...re)=>{this._removeDelegatedListener(B,T,p),Y(...re)}}this._saveDelegatedListener(B,P);for(const U in P.delegates)this.once(U,P.delegates[U]);return this}off(B,l,p){return p===void 0?super.off(B,l):(this._removeDelegatedListener(B,typeof l=="string"?[l]:l,p),this)}queryRenderedFeatures(B,l){if(!this.style)return[];let p;const T=B instanceof a.P||Array.isArray(B),P=T?B:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(T?{}:B)||{},P instanceof a.P||typeof P[0]=="number")p=[a.P.convert(P)];else{const U=a.P.convert(P[0]),Y=a.P.convert(P[1]);p=[U,new a.P(Y.x,U.y),Y,new a.P(U.x,Y.y),U]}return this.style.queryRenderedFeatures(p,l,this.transform)}querySourceFeatures(B,l){return this.style.querySourceFeatures(B,l)}setStyle(B,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(B,l))}setTransformRequest(B){return this._requestManager.setTransformRequest(B),this}_getUIString(B){const l=this._locale[B];if(l==null)throw new Error(`Missing UI string '${B}'`);return l}_updateStyle(B,l){var p,T;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(B,l));const P=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!B)),B?(this.style=new Lo(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B,l,P):this.style.loadJSON(B,l,P),this):((T=(p=this.style)===null||p===void 0?void 0:p.projection)===null||T===void 0||T.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Lo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(B,l){if(typeof B=="string"){const p=this._requestManager.transformRequest(B,"Style");a.j(p,new AbortController).then(T=>{this._updateDiff(T.data,l)}).catch(T=>{T&&this.fire(new a.k(T))})}else typeof B=="object"&&this._updateDiff(B,l)}_updateDiff(B,l){try{this.style.setState(B,l)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(B,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(B,l){return this._lazyInitEmptyStyle(),this.style.addSource(B,l),this._update(!0)}isSourceLoaded(B){const l=this.style&&this.style.sourceCaches[B];if(l!==void 0)return l.loaded();this.fire(new a.k(new Error(`There is no source with ID '${B}'`)))}setTerrain(B){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),B){const l=this.style.sourceCaches[B.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${B.source}`);this.terrain===null&&l.reload();for(const p in this.style._layers){const T=this.style._layers[p];T.type==="hillshade"&&T.source===B.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new $i(this.painter,l,B),this.painter.renderToTexture=new ma(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=p=>{var T;p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==B.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((T=p.source)===null||T===void 0?void 0:T.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:B})),this}getTerrain(){var B,l;return(l=(B=this.terrain)===null||B===void 0?void 0:B.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const B=this.style&&this.style.sourceCaches;for(const l in B){const p=B[l]._tiles;for(const T in p){const P=p[T];if(P.state!=="loaded"&&P.state!=="errored")return!1}}return!0}removeSource(B){return this.style.removeSource(B),this._update(!0)}getSource(B){return this.style.getSource(B)}addImage(B,l,p={}){const{pixelRatio:T=1,sdf:P=!1,stretchX:U,stretchY:Y,content:re,textFitWidth:ue,textFitHeight:ge}=p;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Ne,height:qe,data:Ge}=l,ot=l;return this.style.addImage(B,{data:new a.R({width:Ne,height:qe},new Uint8Array(Ge)),pixelRatio:T,stretchX:U,stretchY:Y,content:re,textFitWidth:ue,textFitHeight:ge,sdf:P,version:0,userImage:ot}),ot.onAdd&&ot.onAdd(this,B),this}}{const{width:Ne,height:qe,data:Ge}=w.getImageData(l);this.style.addImage(B,{data:new a.R({width:Ne,height:qe},Ge),pixelRatio:T,stretchX:U,stretchY:Y,content:re,textFitWidth:ue,textFitHeight:ge,sdf:P,version:0})}}updateImage(B,l){const p=this.style.getImage(B);if(!p)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=l instanceof HTMLImageElement||a.b(l)?w.getImageData(l):l,{width:P,height:U,data:Y}=T;if(P===void 0||U===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(P!==p.data.width||U!==p.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const re=!(l instanceof HTMLImageElement||a.b(l));return p.data.replace(Y,re),this.style.updateImage(B,p),this}getImage(B){return this.style.getImage(B)}hasImage(B){return B?!!this.style.getImage(B):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(B){this.style.removeImage(B)}loadImage(B){return N.getImage(this._requestManager.transformRequest(B,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(B,l){return this._lazyInitEmptyStyle(),this.style.addLayer(B,l),this._update(!0)}moveLayer(B,l){return this.style.moveLayer(B,l),this._update(!0)}removeLayer(B){return this.style.removeLayer(B),this._update(!0)}getLayer(B){return this.style.getLayer(B)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(B,l,p){return this.style.setLayerZoomRange(B,l,p),this._update(!0)}setFilter(B,l,p={}){return this.style.setFilter(B,l,p),this._update(!0)}getFilter(B){return this.style.getFilter(B)}setPaintProperty(B,l,p,T={}){return this.style.setPaintProperty(B,l,p,T),this._update(!0)}getPaintProperty(B,l){return this.style.getPaintProperty(B,l)}setLayoutProperty(B,l,p,T={}){return this.style.setLayoutProperty(B,l,p,T),this._update(!0)}getLayoutProperty(B,l){return this.style.getLayoutProperty(B,l)}setGlyphs(B,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(B,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(B,l,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(B,l,p,T=>{T||this._update(!0)}),this}removeSprite(B){return this._lazyInitEmptyStyle(),this.style.removeSprite(B),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(B,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(B,l,p=>{p||this._update(!0)}),this}setLight(B,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(B,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(B,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(B,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(B,l){return this.style.setFeatureState(B,l),this._update()}removeFeatureState(B,l){return this.style.removeFeatureState(B,l),this._update()}getFeatureState(B){return this.style.getFeatureState(B)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let B=0,l=0;return this._container&&(B=this._container.clientWidth||400,l=this._container.clientHeight||300),[B,l]}_setupContainer(){const B=this._container;B.classList.add("maplibregl-map");const l=this._canvasContainer=_.create("div","maplibregl-canvas-container",B);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),T=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],T);const P=this._controlContainer=_.create("div","maplibregl-control-container",B),U=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(Y=>{U[Y]=_.create("div",`maplibregl-ctrl-${Y} `,P)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(B,l,p){this._canvas.width=Math.floor(p*B),this._canvas.height=Math.floor(p*l),this._canvas.style.width=`${B}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const B=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",T=>{l={requestedAttributes:B},T&&(l.statusMessage=T.statusMessage,l.type=T.type)},{once:!0});let p=null;if(p=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,B):this._canvas.getContext("webgl2",B)||this._canvas.getContext("webgl",B),!p){const T="Failed to initialize WebGL";throw l?(l.message=T,new Error(JSON.stringify(l))):new Error(T)}this.painter=new Zh(p,this.transform),E.testSupport(p)}migrateProjection(B,l){super.migrateProjection(B,l),this.painter.transform=B,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(B){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(B){return this._update(),this._renderTaskQueue.add(B)}_cancelRenderFrame(B){this._renderTaskQueue.remove(B)}_render(B){var l,p,T,P,U;const Y=this._idleTriggered?this._fadeDuration:0,re=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),this._removed)return;let ue=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const qe=this.transform.zoom,Ge=w.now();this.style.zoomHistory.update(qe,Ge);const ot=new a.C(qe,{now:Ge,fadeDuration:Y,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ft=ot.crossFadingFactor();ft===1&&ft===this._crossFadingFactor||(ue=!0,this._crossFadingFactor=ft),this.style.update(ot)}const ge=((p=this.style.projection)===null||p===void 0?void 0:p.transitionState)>0!==re;(T=this.style.projection)===null||T===void 0||T.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((P=this.style.projection)===null||P===void 0?void 0:P.transitionState,(U=this.style.projection)===null||U===void 0?void 0:U.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ge)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,Y,this._crossSourceCollisions,ge),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:Y,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cj.mark(a.ck.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||ue)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const Ne=this._sourcesDirty||this._styleDirty||this._placementDirty;return Ne||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||Ne||(this._fullyLoaded=!0,a.cj.mark(a.ck.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var B;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),N.removeThrottleControl(this._imageQueueHandle),(B=this._resizeObserver)===null||B===void 0||B.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l!=null&&l.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_.remove(this._canvasContainer),_.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cj.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,w.frame(this._frameRequest,B=>{a.cj.frame(B),this._frameRequest=null;try{this._render(B)}catch(l){if(!a.cl(l)&&!function(p){return p.message===kl}(l))throw l}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())}get showPadding(){return!!this._showPadding}set showPadding(B){this._showPadding!==B&&(this._showPadding=B,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())}get repaint(){return!!this._repaint}set repaint(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(B){this._vertices=B,this._update()}get version(){return fi}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(B){return this._lazyInitEmptyStyle(),this.style.setProjection(B),this._update(!0)}},s.MapMouseEvent=dl,s.MapTouchEvent=Ch,s.MapWheelEvent=Ol,s.Marker=Uo,s.NavigationControl=class{constructor(B){this._updateZoomButtons=()=>{const l=this._map.getZoom(),p=l===this._map.getMaxZoom(),T=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=T,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",T.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,p)=>{const T=this._map._getUIString(`NavigationControl.${p}`);l.title=T,l.setAttribute("aria-label",T)},this.options=a.e({},Xa,B),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),_.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),_.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=_.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ua(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(B,l){const p=_.create("button",B,this._container);return p.type="button",p.addEventListener("click",l),p}},s.Popup=class extends a.E{constructor(B){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._closeButton&&this._closeButton.removeEventListener("click",this._onClose),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{var p;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=_.create("div","maplibregl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const re of this.options.className.split(" "))this._container.classList.add(re);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?As(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._trackPointer&&!l)return;const T=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let P=this.options.anchor;const U=Ah(this.options.offset);if(!P){const re=this._container.offsetWidth,ue=this._container.offsetHeight;let ge;ge=T.y+U.bottom.y<ue?["top"]:T.y>this._map.transform.height-ue?["bottom"]:[],T.x<re/2?ge.push("left"):T.x>this._map.transform.width-re/2&&ge.push("right"),P=ge.length===0?"bottom":ge.join("-")}let Y=T.add(U[P]);this.options.subpixelPositioning||(Y=Y.round()),_.setTransform(this._container,`${Yo[P]} translate(${Y.x}px,${Y.y}px)`),os(this._container,P,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(eh),B)}addTo(B){return this._map&&this.remove(),this._map=B,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(B){return this._lngLat=a.Q.convert(B),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(B){return this.setDOMContent(document.createTextNode(B))}setHTML(B){const l=document.createDocumentFragment(),p=document.createElement("body");let T;for(p.innerHTML=B;T=p.firstChild,T;)l.appendChild(T);return this.setDOMContent(l)}getMaxWidth(){var B;return(B=this._container)===null||B===void 0?void 0:B.style.maxWidth}setMaxWidth(B){return this.options.maxWidth=B,this._update(),this}setDOMContent(B){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(B),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(B){return this._container&&this._container.classList.add(B),this}removeClassName(B){return this._container&&this._container.classList.remove(B),this}setOffset(B){return this.options.offset=B,this._update(),this}toggleClassName(B){if(this._container)return this._container.classList.toggle(B)}setSubpixelPositioning(B){this.options.subpixelPositioning=B}_createCloseButton(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const B=this._container.querySelector(Go);B&&B.focus()}},s.RasterDEMTileSource=Ut,s.RasterTileSource=wt,s.ScaleControl=class{constructor(B){this._onMove=()=>{Pc(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,Pc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Xu),B)}getDefaultPosition(){return"bottom-left"}onAdd(B){return this._map=B,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=Vt,s.Style=Lo,s.TerrainControl=class{constructor(B){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=B}onAdd(B){return this._map=B,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=_.create("button","maplibregl-ctrl-terrain",this._container),_.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=at,s.TwoFingersTouchRotateHandler=_e,s.TwoFingersTouchZoomHandler=q,s.TwoFingersTouchZoomRotateHandler=Jn,s.VectorTileSource=Ze,s.VideoSource=Ye,s.addSourceType=(B,l)=>a._(void 0,void 0,void 0,function*(){if(Dt(B))throw new Error(`A source type called "${B}" already exists.`);((p,T)=>{Pt[p]=T})(B,l)}),s.clearPrewarmedResources=function(){const B=ve;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(Ie),ve=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.createTileMesh=ts,s.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return Zt().getRTLTextPluginStatus()},s.getVersion=function(){return ad},s.getWorkerCount=function(){return me.workerCount},s.getWorkerUrl=function(){return a.a.WORKER_URL},s.importScriptInWorkers=function(B){return Ae().broadcast("IS",B)},s.prewarm=function(){De().acquire(Ie)},s.setMaxParallelImageRequests=function(B){a.a.MAX_PARALLEL_IMAGE_REQUESTS=B},s.setRTLTextPlugin=function(B,l){return Zt().setRTLTextPlugin(B,l)},s.setWorkerCount=function(B){me.workerCount=B},s.setWorkerUrl=function(B){a.a.WORKER_URL=B}});var o=n;return o})}(AT)),AT.exports}var dse=fse();function ty(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const cm="$$material";function pse(t){return t==null||Object.keys(t).length===0}function gse(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(pse(i)?n:i):e;return ke.jsx(YG,{styles:r})}function nH(t,e){return tC(t,e)}function mse(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const x6=[];function b6(t){return x6[0]=t,Ax(x6)}function tg(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function rH(t){if(Be.isValidElement(t)||oM.isValidElementType(t)||!tg(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=rH(t[n])}),e}function qf(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return tg(t)&&tg(e)&&Object.keys(e).forEach(i=>{Be.isValidElement(e[i])||oM.isValidElementType(e[i])?r[i]=e[i]:tg(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&tg(t[i])?r[i]=qf(t[i],e[i],n):n.clone?r[i]=tg(e[i])?rH(e[i]):e[i]:r[i]=e[i]}),r}const vse=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function yse(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,o=vse(e),s=Object.keys(o);function a(w){return`@media (min-width:${typeof e[w]=="number"?e[w]:w}${n})`}function c(w){return`@media (max-width:${(typeof e[w]=="number"?e[w]:w)-r/100}${n})`}function h(w,_){const E=s.indexOf(_);return`@media (min-width:${typeof e[w]=="number"?e[w]:w}${n}) and (max-width:${(E!==-1&&typeof e[s[E]]=="number"?e[s[E]]:_)-r/100}${n})`}function d(w){return s.indexOf(w)+1<s.length?h(w,s[s.indexOf(w)+1]):a(w)}function v(w){const _=s.indexOf(w);return _===0?a(s[1]):_===s.length-1?c(s[_]):h(w,s[s.indexOf(w)+1]).replace("@media","@media not all and")}return{keys:s,values:o,up:a,down:c,between:h,only:d,not:v,unit:n,...i}}function _se(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var s,a;const o=/min-width:\s*([0-9.]+)/;return+(((s=r.match(o))==null?void 0:s[1])||0)-+(((a=i.match(o))==null?void 0:a[1])||0)});return n.length?n.reduce((r,i)=>{const o=e[i];return delete r[i],r[i]=o,r},{...e}):e}function xse(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function bse(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(o)}function wse(t){const e=(o,s)=>o.replace("@media",s?`@container ${s}`:"@container");function n(o,s){o.up=(...a)=>e(t.breakpoints.up(...a),s),o.down=(...a)=>e(t.breakpoints.down(...a),s),o.between=(...a)=>e(t.breakpoints.between(...a),s),o.only=(...a)=>e(t.breakpoints.only(...a),s),o.not=(...a)=>{const c=e(t.breakpoints.not(...a),s);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const r={},i=o=>(n(r,o),r);return n(i),{...t,containerQueries:i}}const Sse={borderRadius:4};function G2(t,e){return e?qf(t,e,{clone:!1}):t}const EM={xs:0,sm:600,md:900,lg:1200,xl:1536},w6={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${EM[t]}px)`},Ese={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:EM[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function vm(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||w6;return e.reduce((s,a,c)=>(s[o.up(o.keys[c])]=n(e[c]),s),{})}if(typeof e=="object"){const o=r.breakpoints||w6;return Object.keys(e).reduce((s,a)=>{if(xse(o.keys,a)){const c=bse(r.containerQueries?r:Ese,a);c&&(s[c]=n(e[a],a))}else if(Object.keys(o.values||EM).includes(a)){const c=o.up(a);s[c]=n(e[a],a)}else{const c=a;s[c]=e[c]}return s},{})}return n(e)}function Tse(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function Cse(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function _u(t){if(typeof t!="string")throw new Error(ty(7));return t.charAt(0).toUpperCase()+t.slice(1)}function TM(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function lC(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=TM(t,n)||r,e&&(i=e(i,r,t)),i}function Su(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=s=>{if(s[e]==null)return null;const a=s[e],c=s.theme,h=TM(c,r)||{};return vm(s,a,v=>{let w=lC(h,i,v);return v===w&&typeof v=="string"&&(w=lC(h,i,`${e}${v==="default"?"":_u(v)}`,v)),n===!1?w:{[n]:w}})};return o.propTypes={},o.filterProps=[e],o}function Mse(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Ase={m:"margin",p:"padding"},Rse={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},S6={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Pse=Mse(t=>{if(t.length>2)if(S6[t])t=S6[t];else return[t];const[e,n]=t.split(""),r=Ase[e],i=Rse[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),tk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],nk=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...tk,...nk];function Ww(t,e,n,r){const i=TM(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?i.startsWith("var(")&&o===0?0:i.startsWith("var(")&&o===1?i:`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const s=Math.abs(o),a=i[s];return o>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof i=="function"?i:()=>{}}function rk(t){return Ww(t,"spacing",8)}function Xw(t,e){return typeof e=="string"||e==null?e:t(e)}function Ise(t,e){return n=>t.reduce((r,i)=>(r[i]=Xw(e,n),r),{})}function Dse(t,e,n,r){if(!e.includes(n))return null;const i=Pse(n),o=Ise(i,r),s=t[n];return vm(t,s,o)}function iH(t,e){const n=rk(t.theme);return Object.keys(t).map(r=>Dse(t,e,r,n)).reduce(G2,{})}function tu(t){return iH(t,tk)}tu.propTypes={};tu.filterProps=tk;function nu(t){return iH(t,nk)}nu.propTypes={};nu.filterProps=nk;function aH(t=8,e=rk({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const s=e(o);return typeof s=="number"?`${s}px`:s}).join(" ");return n.mui=!0,n}function CM(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?G2(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function bd(t){return typeof t!="number"?t:`${t}px solid`}function Fd(t,e){return Su({prop:t,themeKey:"borders",transform:e})}const Lse=Fd("border",bd),Nse=Fd("borderTop",bd),kse=Fd("borderRight",bd),Ose=Fd("borderBottom",bd),Fse=Fd("borderLeft",bd),Bse=Fd("borderColor"),zse=Fd("borderTopColor"),Use=Fd("borderRightColor"),jse=Fd("borderBottomColor"),Gse=Fd("borderLeftColor"),Vse=Fd("outline",bd),Hse=Fd("outlineColor"),MM=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Ww(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Xw(e,r)});return vm(t,t.borderRadius,n)}return null};MM.propTypes={};MM.filterProps=["borderRadius"];CM(Lse,Nse,kse,Ose,Fse,Bse,zse,Use,jse,Gse,MM,Vse,Hse);const AM=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Ww(t.theme,"spacing",8),n=r=>({gap:Xw(e,r)});return vm(t,t.gap,n)}return null};AM.propTypes={};AM.filterProps=["gap"];const RM=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Ww(t.theme,"spacing",8),n=r=>({columnGap:Xw(e,r)});return vm(t,t.columnGap,n)}return null};RM.propTypes={};RM.filterProps=["columnGap"];const PM=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Ww(t.theme,"spacing",8),n=r=>({rowGap:Xw(e,r)});return vm(t,t.rowGap,n)}return null};PM.propTypes={};PM.filterProps=["rowGap"];const qse=Su({prop:"gridColumn"}),$se=Su({prop:"gridRow"}),Wse=Su({prop:"gridAutoFlow"}),Xse=Su({prop:"gridAutoColumns"}),Yse=Su({prop:"gridAutoRows"}),Zse=Su({prop:"gridTemplateColumns"}),Kse=Su({prop:"gridTemplateRows"}),Jse=Su({prop:"gridTemplateAreas"}),Qse=Su({prop:"gridArea"});CM(AM,RM,PM,qse,$se,Wse,Xse,Yse,Zse,Kse,Jse,Qse);function G1(t,e){return e==="grey"?e:t}const ele=Su({prop:"color",themeKey:"palette",transform:G1}),tle=Su({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:G1}),nle=Su({prop:"backgroundColor",themeKey:"palette",transform:G1});CM(ele,tle,nle);function jf(t){return t<=1&&t!==0?`${t*100}%`:t}const rle=Su({prop:"width",transform:jf}),ik=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,o,s,a,c;const r=((s=(o=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:o.values)==null?void 0:s[n])||EM[n];return r?((c=(a=t.theme)==null?void 0:a.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:jf(n)}};return vm(t,t.maxWidth,e)}return null};ik.filterProps=["maxWidth"];const ile=Su({prop:"minWidth",transform:jf}),ale=Su({prop:"height",transform:jf}),ole=Su({prop:"maxHeight",transform:jf}),sle=Su({prop:"minHeight",transform:jf});Su({prop:"size",cssProperty:"width",transform:jf});Su({prop:"size",cssProperty:"height",transform:jf});const lle=Su({prop:"boxSizing"});CM(rle,ik,ile,ale,ole,sle,lle);const Yw={border:{themeKey:"borders",transform:bd},borderTop:{themeKey:"borders",transform:bd},borderRight:{themeKey:"borders",transform:bd},borderBottom:{themeKey:"borders",transform:bd},borderLeft:{themeKey:"borders",transform:bd},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:bd},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:MM},color:{themeKey:"palette",transform:G1},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:G1},backgroundColor:{themeKey:"palette",transform:G1},p:{style:nu},pt:{style:nu},pr:{style:nu},pb:{style:nu},pl:{style:nu},px:{style:nu},py:{style:nu},padding:{style:nu},paddingTop:{style:nu},paddingRight:{style:nu},paddingBottom:{style:nu},paddingLeft:{style:nu},paddingX:{style:nu},paddingY:{style:nu},paddingInline:{style:nu},paddingInlineStart:{style:nu},paddingInlineEnd:{style:nu},paddingBlock:{style:nu},paddingBlockStart:{style:nu},paddingBlockEnd:{style:nu},m:{style:tu},mt:{style:tu},mr:{style:tu},mb:{style:tu},ml:{style:tu},mx:{style:tu},my:{style:tu},margin:{style:tu},marginTop:{style:tu},marginRight:{style:tu},marginBottom:{style:tu},marginLeft:{style:tu},marginX:{style:tu},marginY:{style:tu},marginInline:{style:tu},marginInlineStart:{style:tu},marginInlineEnd:{style:tu},marginBlock:{style:tu},marginBlockStart:{style:tu},marginBlockEnd:{style:tu},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:AM},rowGap:{style:PM},columnGap:{style:RM},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:jf},maxWidth:{style:ik},minWidth:{transform:jf},height:{transform:jf},maxHeight:{transform:jf},minHeight:{transform:jf},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function ule(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function cle(t,e){return typeof t=="function"?t(e):t}function hle(){function t(n,r,i,o){const s={[n]:r,theme:i},a=o[n];if(!a)return{[n]:r};const{cssProperty:c=n,themeKey:h,transform:d,style:v}=a;if(r==null)return null;if(h==="typography"&&r==="inherit")return{[n]:r};const w=TM(i,h)||{};return v?v(s):vm(s,r,E=>{let M=lC(w,d,E);return E===M&&typeof E=="string"&&(M=lC(w,d,`${n}${E==="default"?"":_u(E)}`,E)),c===!1?M:{[c]:M}})}function e(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??Yw;function s(a){let c=a;if(typeof a=="function")c=a(i);else if(typeof a!="object")return a;if(!c)return null;const h=Tse(i.breakpoints),d=Object.keys(h);let v=h;return Object.keys(c).forEach(w=>{const _=cle(c[w],i);if(_!=null)if(typeof _=="object")if(o[w])v=G2(v,t(w,_,i,o));else{const E=vm({theme:i},_,M=>({[w]:M}));ule(E,_)?v[w]=e({sx:_,theme:i}):v=G2(v,E)}else v=G2(v,t(w,_,i,o))}),_se(i,Cse(d,v))}return Array.isArray(r)?r.map(s):s(r)}return e}const Cv=hle();Cv.filterProps=["sx"];function fle(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function ak(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={},...s}=t,a=yse(n),c=aH(i);let h=qf({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:c,shape:{...Sse,...o}},s);return h=wse(h),h.applyStyles=fle,h=e.reduce((d,v)=>qf(d,v),h),h.unstable_sxConfig={...Yw,...s==null?void 0:s.unstable_sxConfig},h.unstable_sx=function(v){return Cv({sx:v,theme:this})},h}function dle(t){return Object.keys(t).length===0}function oH(t=null){const e=Be.useContext(Rx);return!e||dle(e)?t:e}const ple=ak();function sH(t=ple){return oH(t)}const gle=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??Yw;return Object.keys(t).forEach(i=>{n[i]?e.systemProps[i]=t[i]:e.otherProps[i]=t[i]}),e};function mle(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=gle(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...s)=>{const a=e(...s);return tg(a)?{...r,...a}:r}:o={...r,...e},{...i,sx:o}}const E6=t=>t,vle=()=>{let t=E6;return{configure(e){t=e},generate(e){return t(e)},reset(){t=E6}}},ok=vle();function lH(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=nH("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Cv);return Be.forwardRef(function(c,h){const d=sH(n),{className:v,component:w="div",..._}=mle(c);return ke.jsx(o,{as:w,ref:h,className:Fr(v,i?i(r):r),theme:e&&d[e]||d,..._})})}const yle={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Bd(t,e,n="Mui"){const r=yle[e];return r?`${n}-${r}`:`${ok.generate(t)}-${e}`}function Xh(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Bd(t,i,n)}),r}const _le=Xh("MuiBox",["root"]),xle=lH({defaultClassName:_le.root,generateClassName:ok.generate});function uH(t){const{variants:e,...n}=t,r={variants:e,style:b6(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=b6(i.style))}),r}const ble=ak();function n5(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function wle(t){return t?(e,n)=>n[t]:null}function Sle(t,e,n){t.theme=Tle(t.theme)?n:t.theme[e]||t.theme}function RT(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>RT(t,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:i,...o}=n;r=o}return cH(t,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function cH(t,e,n=[]){var i;let r;e:for(let o=0;o<e.length;o+=1){const s=e[o];if(typeof s.props=="function"){if(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),!s.props(r))continue}else for(const a in s.props)if(t[a]!==s.props[a]&&((i=t.ownerState)==null?void 0:i[a])!==s.props[a])continue e;typeof s.style=="function"?(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),n.push(s.style(r))):n.push(s.style)}return n}function hH(t={}){const{themeId:e,defaultTheme:n=ble,rootShouldForwardProp:r=n5,slotShouldForwardProp:i=n5}=t;function o(a){Sle(a,e,n)}return(a,c={})=>{mse(a,H=>H.filter(G=>G!==Cv));const{name:h,slot:d,skipVariantsResolver:v,skipSx:w,overridesResolver:_=wle(Mle(d)),...E}=c,M=v!==void 0?v:d&&d!=="Root"&&d!=="root"||!1,D=w||!1;let A=n5;d==="Root"||d==="root"?A=r:d?A=i:Cle(a)&&(A=void 0);const F=nH(a,{shouldForwardProp:A,label:Ele(),...E}),O=H=>{if(typeof H=="function"&&H.__emotion_real!==H)return function(W){return RT(W,H)};if(tg(H)){const G=uH(H);return G.variants?function(X){return RT(X,G)}:G.style}return H},N=(...H)=>{const G=[],W=H.map(O),X=[];if(G.push(o),h&&_&&X.push(function(Q){var se,Se;const ae=(Se=(se=Q.theme.components)==null?void 0:se[h])==null?void 0:Se.styleOverrides;if(!ae)return null;const ce={};for(const ye in ae)ce[ye]=RT(Q,ae[ye]);return _(Q,ce)}),h&&!M&&X.push(function(Q){var ce,se;const ie=Q.theme,ae=(se=(ce=ie==null?void 0:ie.components)==null?void 0:ce[h])==null?void 0:se.variants;return ae?cH(Q,ae):null}),D||X.push(Cv),Array.isArray(W[0])){const $=W.shift(),Q=new Array(G.length).fill(""),ie=new Array(X.length).fill("");let ae;ae=[...Q,...$,...ie],ae.raw=[...Q,...$.raw,...ie],G.unshift(ae)}const K=[...G,...W,...X],k=F(...K);return a.muiName&&(k.muiName=a.muiName),k};return F.withConfig&&(N.withConfig=F.withConfig),N}}function Ele(t,e){return void 0}function Tle(t){for(const e in t)return!1;return!0}function Cle(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Mle(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const Dx=hH();function tD(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=r;if(i==="components"||i==="slots")n[i]={...t[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const o=t[i],s=e[i];if(!s)n[i]=o||{};else if(!o)n[i]=s;else{n[i]={...s};for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)){const c=a;n[i][c]=tD(o[c],s[c])}}}else n[i]===void 0&&(n[i]=t[i])}return n}const fH=typeof window<"u"?Be.useLayoutEffect:Be.useEffect;function Ale(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function sk(t,e=0,n=1){return Ale(t,e,n)}function Rle(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Mv(t){if(t.type)return t;if(t.charAt(0)==="#")return Mv(Rle(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(ty(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(ty(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const Ple=t=>{const e=Mv(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},p2=(t,e)=>{try{return Ple(t)}catch{return t}};function IM(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function dH(t){t=Mv(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),s=(h,d=(h+n/30)%12)=>i-o*Math.max(Math.min(d-3,9-d,1),-1);let a="rgb";const c=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return t.type==="hsla"&&(a+="a",c.push(e[3])),IM({type:a,values:c})}function nD(t){t=Mv(t);let e=t.type==="hsl"||t.type==="hsla"?Mv(dH(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Ile(t,e){const n=nD(t),r=nD(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function ny(t,e){return t=Mv(t),e=sk(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,IM(t)}function lE(t,e,n){try{return ny(t,e)}catch{return t}}function lk(t,e){if(t=Mv(t),e=sk(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return IM(t)}function Hs(t,e,n){try{return lk(t,e)}catch{return t}}function uk(t,e){if(t=Mv(t),e=sk(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return IM(t)}function qs(t,e,n){try{return uk(t,e)}catch{return t}}function Dle(t,e=.15){return nD(t)>.5?lk(t,e):uk(t,e)}function uE(t,e,n){try{return Dle(t,e)}catch{return t}}function Lle(t,e){var n,r,i;return Be.isValidElement(t)&&e.indexOf(t.type.muiName??((i=(r=(n=t.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:i.muiName))!==-1}function Nle(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let T6=0;function kle(t){const[e,n]=Be.useState(t),r=t||e;return Be.useEffect(()=>{e==null&&(T6+=1,n(`mui-${T6}`))},[e]),r}const Ole={...rw},C6=Ole.useId;function Fle(t){if(C6!==void 0){const e=C6();return t??e}return kle(t)}function Ble({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=Be.useRef(t!==void 0),[o,s]=Be.useState(e),a=i?t:o,c=Be.useCallback(h=>{i||s(h)},[]);return[a,c]}function PT(t){const e=Be.useRef(t);return fH(()=>{e.current=t}),Be.useRef((...n)=>(0,e.current)(...n)).current}function uC(...t){return Be.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{Nle(n,e)})},t)}const M6={};function pH(t,e){const n=Be.useRef(M6);return n.current===M6&&(n.current=t(e)),n}const zle=[];function Ule(t){Be.useEffect(t,zle)}class ck{constructor(){Vg(this,"currentId",null);Vg(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Vg(this,"disposeEffect",()=>this.clear)}static create(){return new ck}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function jle(){const t=pH(ck.create).current;return Ule(t.disposeEffect),t}function A6(t){try{return t.matches(":focus-visible")}catch{}return!1}function Sp(t,e,n=void 0){const r={};for(const i in t){const o=t[i];let s="",a=!0;for(let c=0;c<o.length;c+=1){const h=o[c];h&&(s+=(a===!0?"":" ")+e(h),a=!1,n&&n[h]&&(s+=" "+n[h]))}r[i]=s}return r}function Gle(t){return typeof t=="string"}function Vle(t,e,n){return t===void 0||Gle(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function Hle(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function R6(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function qle(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const _=Fr(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),E={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},M={...n,...i,...r};return _.length>0&&(M.className=_),Object.keys(E).length>0&&(M.style=E),{props:M,internalRef:void 0}}const s=Hle({...i,...r}),a=R6(r),c=R6(i),h=e(s),d=Fr(h==null?void 0:h.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),v={...h==null?void 0:h.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},w={...h,...n,...c,...a};return d.length>0&&(w.className=d),Object.keys(v).length>0&&(w.style=v),{props:w,internalRef:h.ref}}function $le(t,e,n){return typeof t=="function"?t(e,n):t}const gH=Be.createContext(null);function hk(){return Be.useContext(gH)}const Wle=typeof Symbol=="function"&&Symbol.for,Xle=Wle?Symbol.for("mui.nested"):"__THEME_NESTED__";function Yle(t,e){return typeof e=="function"?e(t):{...t,...e}}function Zle(t){const{children:e,theme:n}=t,r=hk(),i=Be.useMemo(()=>{const o=r===null?{...n}:Yle(r,n);return o!=null&&(o[Xle]=r!==null),o},[n,r]);return ke.jsx(gH.Provider,{value:i,children:e})}const Kle=Be.createContext();function Jle({value:t,...e}){return ke.jsx(Kle.Provider,{value:t??!0,...e})}const mH=Be.createContext(void 0);function Qle({value:t,children:e}){return ke.jsx(mH.Provider,{value:t,children:e})}function eue(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?tD(i.defaultProps,r):!i.styleOverrides&&!i.variants?tD(i,r):r}function tue({props:t,name:e}){const n=Be.useContext(mH);return eue({props:t,name:e,theme:{components:n}})}const P6={};function I6(t,e,n,r=!1){return Be.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const o=n(i),s=t?{...e,[t]:o}:o;return r?()=>s:s}return t?{...e,[t]:n}:{...e,...n}},[t,e,n,r])}function vH(t){const{children:e,theme:n,themeId:r}=t,i=oH(P6),o=hk()||P6,s=I6(r,i,n),a=I6(r,o,n,!0),c=(r?s[r]:s).direction==="rtl";return ke.jsx(Zle,{theme:a,children:ke.jsx(Rx.Provider,{value:s,children:ke.jsx(Jle,{value:c,children:ke.jsx(Qle,{value:r?s[r].components:s.components,children:e})})})})}const D6={theme:void 0};function nue(t){let e,n;return function(i){let o=e;return(o===void 0||i.theme!==n)&&(D6.theme=i.theme,o=uH(t(D6)),e=o,n=i.theme),o}}const fk="mode",dk="color-scheme",rue="data-color-scheme";function iue(t){const{defaultMode:e="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=fk,colorSchemeStorageKey:o=dk,attribute:s=rue,colorSchemeNode:a="document.documentElement",nonce:c}=t||{};let h="",d=s;if(s==="class"&&(d=".%s"),s==="data"&&(d="[data-%s]"),d.startsWith(".")){const w=d.substring(1);h+=`${a}.classList.remove('${w}'.replace('%s', light), '${w}'.replace('%s', dark));
      ${a}.classList.add('${w}'.replace('%s', colorScheme));`}const v=d.match(/\[([^\]]+)\]/);if(v){const[w,_]=v[1].split("=");_||(h+=`${a}.removeAttribute('${w}'.replace('%s', light));
      ${a}.removeAttribute('${w}'.replace('%s', dark));`),h+=`
      ${a}.setAttribute('${w}'.replace('%s', colorScheme), ${_?`${_}.replace('%s', colorScheme)`:'""'});`}else h+=`${a}.setAttribute('${d}', colorScheme);`;return ke.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${e}';
  const dark = localStorage.getItem('${o}-dark') || '${r}';
  const light = localStorage.getItem('${o}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${h}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function aue(){}const oue=({key:t,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(n){if(typeof window>"u")return;if(!e)return n;let r;try{r=e.localStorage.getItem(t)}catch{}return r||n},set:n=>{if(e)try{e.localStorage.setItem(t,n)}catch{}},subscribe:n=>{if(!e)return aue;const r=i=>{const o=i.newValue;i.key===t&&n(o)};return e.addEventListener("storage",r),()=>{e.removeEventListener("storage",r)}}});function r5(){}function L6(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function yH(t,e){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return e("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return e("dark")}function sue(t){return yH(t,e=>{if(e==="light")return t.lightColorScheme;if(e==="dark")return t.darkColorScheme})}function lue(t){const{defaultMode:e="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:o=fk,colorSchemeStorageKey:s=dk,storageWindow:a=typeof window>"u"?void 0:window,storageManager:c=oue,noSsr:h=!1}=t,d=i.join(","),v=i.length>1,w=Be.useMemo(()=>c==null?void 0:c({key:o,storageWindow:a}),[c,o,a]),_=Be.useMemo(()=>c==null?void 0:c({key:`${s}-light`,storageWindow:a}),[c,s,a]),E=Be.useMemo(()=>c==null?void 0:c({key:`${s}-dark`,storageWindow:a}),[c,s,a]),[M,D]=Be.useState(()=>{const X=(w==null?void 0:w.get(e))||e,K=(_==null?void 0:_.get(n))||n,k=(E==null?void 0:E.get(r))||r;return{mode:X,systemMode:L6(X),lightColorScheme:K,darkColorScheme:k}}),[A,F]=Be.useState(h||!v);Be.useEffect(()=>{F(!0)},[]);const O=sue(M),N=Be.useCallback(X=>{D(K=>{if(X===K.mode)return K;const k=X??e;return w==null||w.set(k),{...K,mode:k,systemMode:L6(k)}})},[w,e]),H=Be.useCallback(X=>{X?typeof X=="string"?X&&!d.includes(X)?console.error(`\`${X}\` does not exist in \`theme.colorSchemes\`.`):D(K=>{const k={...K};return yH(K,$=>{$==="light"&&(_==null||_.set(X),k.lightColorScheme=X),$==="dark"&&(E==null||E.set(X),k.darkColorScheme=X)}),k}):D(K=>{const k={...K},$=X.light===null?n:X.light,Q=X.dark===null?r:X.dark;return $&&(d.includes($)?(k.lightColorScheme=$,_==null||_.set($)):console.error(`\`${$}\` does not exist in \`theme.colorSchemes\`.`)),Q&&(d.includes(Q)?(k.darkColorScheme=Q,E==null||E.set(Q)):console.error(`\`${Q}\` does not exist in \`theme.colorSchemes\`.`)),k}):D(K=>(_==null||_.set(n),E==null||E.set(r),{...K,lightColorScheme:n,darkColorScheme:r}))},[d,_,E,n,r]),G=Be.useCallback(X=>{M.mode==="system"&&D(K=>{const k=X!=null&&X.matches?"dark":"light";return K.systemMode===k?K:{...K,systemMode:k}})},[M.mode]),W=Be.useRef(G);return W.current=G,Be.useEffect(()=>{if(typeof window.matchMedia!="function"||!v)return;const X=(...k)=>W.current(...k),K=window.matchMedia("(prefers-color-scheme: dark)");return K.addListener(X),X(K),()=>{K.removeListener(X)}},[v]),Be.useEffect(()=>{if(v){const X=(w==null?void 0:w.subscribe($=>{(!$||["light","dark","system"].includes($))&&N($||e)}))||r5,K=(_==null?void 0:_.subscribe($=>{(!$||d.match($))&&H({light:$})}))||r5,k=(E==null?void 0:E.subscribe($=>{(!$||d.match($))&&H({dark:$})}))||r5;return()=>{X(),K(),k()}}},[H,N,d,e,a,v,w,_,E]),{...M,mode:A?M.mode:void 0,systemMode:A?M.systemMode:void 0,colorScheme:A?O:void 0,setMode:N,setColorScheme:H}}const uue="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function cue(t){const{themeId:e,theme:n={},modeStorageKey:r=fk,colorSchemeStorageKey:i=dk,disableTransitionOnChange:o=!1,defaultColorScheme:s,resolveTheme:a}=t,c={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},h=Be.createContext(void 0),d=()=>Be.useContext(h)||c,v={},w={};function _(A){var Bt,gn,Zt,cn;const{children:F,theme:O,modeStorageKey:N=r,colorSchemeStorageKey:H=i,disableTransitionOnChange:G=o,storageManager:W,storageWindow:X=typeof window>"u"?void 0:window,documentNode:K=typeof document>"u"?void 0:document,colorSchemeNode:k=typeof document>"u"?void 0:document.documentElement,disableNestedContext:$=!1,disableStyleSheetGeneration:Q=!1,defaultMode:ie="system",forceThemeRerender:ae=!1,noSsr:ce}=A,se=Be.useRef(!1),Se=hk(),ye=Be.useContext(h),Te=!!ye&&!$,pe=Be.useMemo(()=>O||(typeof n=="function"?n():n),[O]),Ie=pe[e],me=Ie||pe,{colorSchemes:xe=v,components:ve=w,cssVarPrefix:Ee}=me,De=Object.keys(xe).filter($t=>!!xe[$t]).join(","),We=Be.useMemo(()=>De.split(","),[De]),Ae=typeof s=="string"?s:s.light,ut=typeof s=="string"?s:s.dark,pt=xe[Ae]&&xe[ut]?ie:((gn=(Bt=xe[me.defaultColorScheme])==null?void 0:Bt.palette)==null?void 0:gn.mode)||((Zt=me.palette)==null?void 0:Zt.mode),{mode:st,setMode:Ce,systemMode:It,lightColorScheme:Ve,darkColorScheme:yt,colorScheme:Ze,setColorScheme:wt}=lue({supportedColorSchemes:We,defaultLightColorScheme:Ae,defaultDarkColorScheme:ut,modeStorageKey:N,colorSchemeStorageKey:H,defaultMode:pt,storageManager:W,storageWindow:X,noSsr:ce});let Ut=st,ht=Ze;Te&&(Ut=ye.mode,ht=ye.colorScheme);let qt=ht||me.defaultColorScheme;me.vars&&!ae&&(qt=me.defaultColorScheme);const Ye=Be.useMemo(()=>{var qn;const $t=((qn=me.generateThemeVars)==null?void 0:qn.call(me))||me.vars,Et={...me,components:ve,colorSchemes:xe,cssVarPrefix:Ee,vars:$t};if(typeof Et.generateSpacing=="function"&&(Et.spacing=Et.generateSpacing()),qt){const Dn=xe[qt];Dn&&typeof Dn=="object"&&Object.keys(Dn).forEach(sr=>{Dn[sr]&&typeof Dn[sr]=="object"?Et[sr]={...Et[sr],...Dn[sr]}:Et[sr]=Dn[sr]})}return a?a(Et):Et},[me,qt,ve,xe,Ee]),Re=me.colorSchemeSelector;fH(()=>{if(ht&&k&&Re&&Re!=="media"){const $t=Re;let Et=Re;if($t==="class"&&(Et=".%s"),$t==="data"&&(Et="[data-%s]"),$t!=null&&$t.startsWith("data-")&&!$t.includes("%s")&&(Et=`[${$t}="%s"]`),Et.startsWith("."))k.classList.remove(...We.map(qn=>Et.substring(1).replace("%s",qn))),k.classList.add(Et.substring(1).replace("%s",ht));else{const qn=Et.replace("%s",ht).match(/\[([^\]]+)\]/);if(qn){const[Dn,sr]=qn[1].split("=");sr||We.forEach(rt=>{k.removeAttribute(Dn.replace(ht,rt))}),k.setAttribute(Dn,sr?sr.replace(/"|'/g,""):"")}else k.setAttribute(Et,ht)}}},[ht,Re,k,We]),Be.useEffect(()=>{let $t;if(G&&se.current&&K){const Et=K.createElement("style");Et.appendChild(K.createTextNode(uue)),K.head.appendChild(Et),window.getComputedStyle(K.body),$t=setTimeout(()=>{K.head.removeChild(Et)},1)}return()=>{clearTimeout($t)}},[ht,G,K]),Be.useEffect(()=>(se.current=!0,()=>{se.current=!1}),[]);const Pt=Be.useMemo(()=>({allColorSchemes:We,colorScheme:ht,darkColorScheme:yt,lightColorScheme:Ve,mode:Ut,setColorScheme:wt,setMode:Ce,systemMode:It}),[We,ht,yt,Ve,Ut,wt,Ce,It,Ye.colorSchemeSelector]);let Dt=!0;(Q||me.cssVariables===!1||Te&&(Se==null?void 0:Se.cssVarPrefix)===Ee)&&(Dt=!1);const At=ke.jsxs(Be.Fragment,{children:[ke.jsx(vH,{themeId:Ie?e:void 0,theme:Ye,children:F}),Dt&&ke.jsx(gse,{styles:((cn=Ye.generateStyleSheets)==null?void 0:cn.call(Ye))||[]})]});return Te?At:ke.jsx(h.Provider,{value:Pt,children:At})}const E=typeof s=="string"?s:s.light,M=typeof s=="string"?s:s.dark;return{CssVarsProvider:_,useColorScheme:d,getInitColorSchemeScript:A=>iue({colorSchemeStorageKey:i,defaultLightColorScheme:E,defaultDarkColorScheme:M,modeStorageKey:r,...A})}}function hue(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const N6=(t,e,n,r=[])=>{let i=t;e.forEach((o,s)=>{s===e.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},fue=(t,e,n)=>{function r(i,o=[],s=[]){Object.entries(i).forEach(([a,c])=>{(!n||n&&!n([...o,a]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?r(c,[...o,a],Array.isArray(c)?[...s,a]:s):e([...o,a],c,s))})}r(t)},due=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function i5(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},o={},s={};return fue(t,(a,c,h)=>{if((typeof c=="string"||typeof c=="number")&&(!r||!r(a,c))){const d=`--${n?`${n}-`:""}${a.join("-")}`,v=due(a,c);Object.assign(i,{[d]:v}),N6(o,a,`var(${d})`,h),N6(s,a,`var(${d}, ${v})`,h)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:s}}function pue(t,e={}){const{getSelector:n=D,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:o={},components:s,defaultColorScheme:a="light",...c}=t,{vars:h,css:d,varsWithDefaults:v}=i5(c,e);let w=v;const _={},{[a]:E,...M}=o;if(Object.entries(M||{}).forEach(([O,N])=>{const{vars:H,css:G,varsWithDefaults:W}=i5(N,e);w=qf(w,W),_[O]={css:G,vars:H}}),E){const{css:O,vars:N,varsWithDefaults:H}=i5(E,e);w=qf(w,H),_[a]={css:O,vars:N}}function D(O,N){var G,W;let H=i;if(i==="class"&&(H=".%s"),i==="data"&&(H="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(H=`[${i}="%s"]`),O){if(H==="media")return t.defaultColorScheme===O?":root":{[`@media (prefers-color-scheme: ${((W=(G=o[O])==null?void 0:G.palette)==null?void 0:W.mode)||O})`]:{":root":N}};if(H)return t.defaultColorScheme===O?`:root, ${H.replace("%s",String(O))}`:H.replace("%s",String(O))}return":root"}return{vars:w,generateThemeVars:()=>{let O={...h};return Object.entries(_).forEach(([,{vars:N}])=>{O=qf(O,N)}),O},generateStyleSheets:()=>{var X,K;const O=[],N=t.defaultColorScheme||"light";function H(k,$){Object.keys($).length&&O.push(typeof k=="string"?{[k]:{...$}}:k)}H(n(void 0,{...d}),d);const{[N]:G,...W}=_;if(G){const{css:k}=G,$=(K=(X=o[N])==null?void 0:X.palette)==null?void 0:K.mode,Q=!r&&$?{colorScheme:$,...k}:{...k};H(n(N,{...Q}),Q)}return Object.entries(W).forEach(([k,{css:$}])=>{var ae,ce;const Q=(ce=(ae=o[k])==null?void 0:ae.palette)==null?void 0:ce.mode,ie=!r&&Q?{colorScheme:Q,...$}:{...$};H(n(k,{...ie}),ie)}),O}}}function gue(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const pw={black:"#000",white:"#fff"},mue={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},R_={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},P_={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Xb={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},I_={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},D_={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},L_={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function _H(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:pw.white,default:pw.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const vue=_H();function xH(){return{text:{primary:pw.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:pw.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const k6=xH();function O6(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=uk(t.main,i):e==="dark"&&(t.dark=lk(t.main,o)))}function yue(t="light"){return t==="dark"?{main:I_[200],light:I_[50],dark:I_[400]}:{main:I_[700],light:I_[400],dark:I_[800]}}function _ue(t="light"){return t==="dark"?{main:R_[200],light:R_[50],dark:R_[400]}:{main:R_[500],light:R_[300],dark:R_[700]}}function xue(t="light"){return t==="dark"?{main:P_[500],light:P_[300],dark:P_[700]}:{main:P_[700],light:P_[400],dark:P_[800]}}function bue(t="light"){return t==="dark"?{main:D_[400],light:D_[300],dark:D_[700]}:{main:D_[700],light:D_[500],dark:D_[900]}}function wue(t="light"){return t==="dark"?{main:L_[400],light:L_[300],dark:L_[700]}:{main:L_[800],light:L_[500],dark:L_[900]}}function Sue(t="light"){return t==="dark"?{main:Xb[400],light:Xb[300],dark:Xb[700]}:{main:"#ed6c02",light:Xb[500],dark:Xb[900]}}function pk(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,o=t.primary||yue(e),s=t.secondary||_ue(e),a=t.error||xue(e),c=t.info||bue(e),h=t.success||wue(e),d=t.warning||Sue(e);function v(M){return Ile(M,k6.text.primary)>=n?k6.text.primary:vue.text.primary}const w=({color:M,name:D,mainShade:A=500,lightShade:F=300,darkShade:O=700})=>{if(M={...M},!M.main&&M[A]&&(M.main=M[A]),!M.hasOwnProperty("main"))throw new Error(ty(11,D?` (${D})`:"",A));if(typeof M.main!="string")throw new Error(ty(12,D?` (${D})`:"",JSON.stringify(M.main)));return O6(M,"light",F,r),O6(M,"dark",O,r),M.contrastText||(M.contrastText=v(M.main)),M};let _;return e==="light"?_=_H():e==="dark"&&(_=xH()),qf({common:{...pw},mode:e,primary:w({color:o,name:"primary"}),secondary:w({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:w({color:a,name:"error"}),warning:w({color:d,name:"warning"}),info:w({color:c,name:"info"}),success:w({color:h,name:"success"}),grey:mue,contrastThreshold:n,getContrastText:v,augmentColor:w,tonalOffset:r,..._},i)}function Eue(t){const e={};return Object.entries(t).forEach(r=>{const[i,o]=r;typeof o=="object"&&(e[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function Tue(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function Cue(t){return Math.round(t*1e5)/1e5}const F6={textTransform:"uppercase"},B6='"Roboto", "Helvetica", "Arial", sans-serif';function bH(t,e){const{fontFamily:n=B6,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:s=500,fontWeightBold:a=700,htmlFontSize:c=16,allVariants:h,pxToRem:d,...v}=typeof e=="function"?e(t):e,w=r/14,_=d||(D=>`${D/c*w}rem`),E=(D,A,F,O,N)=>({fontFamily:n,fontWeight:D,fontSize:_(A),lineHeight:F,...n===B6?{letterSpacing:`${Cue(O/A)}em`}:{},...N,...h}),M={h1:E(i,96,1.167,-1.5),h2:E(i,60,1.2,-.5),h3:E(o,48,1.167,0),h4:E(o,34,1.235,.25),h5:E(o,24,1.334,0),h6:E(s,20,1.6,.15),subtitle1:E(o,16,1.75,.15),subtitle2:E(s,14,1.57,.1),body1:E(o,16,1.5,.15),body2:E(o,14,1.43,.15),button:E(s,14,1.75,.4,F6),caption:E(o,12,1.66,.4),overline:E(o,12,2.66,1,F6),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return qf({htmlFontSize:c,pxToRem:_,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:s,fontWeightBold:a,...M},v,{clone:!1})}const Mue=.2,Aue=.14,Rue=.12;function Rl(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Mue})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Aue})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Rue})`].join(",")}const Pue=["none",Rl(0,2,1,-1,0,1,1,0,0,1,3,0),Rl(0,3,1,-2,0,2,2,0,0,1,5,0),Rl(0,3,3,-2,0,3,4,0,0,1,8,0),Rl(0,2,4,-1,0,4,5,0,0,1,10,0),Rl(0,3,5,-1,0,5,8,0,0,1,14,0),Rl(0,3,5,-1,0,6,10,0,0,1,18,0),Rl(0,4,5,-2,0,7,10,1,0,2,16,1),Rl(0,5,5,-3,0,8,10,1,0,3,14,2),Rl(0,5,6,-3,0,9,12,1,0,3,16,2),Rl(0,6,6,-3,0,10,14,1,0,4,18,3),Rl(0,6,7,-4,0,11,15,1,0,4,20,3),Rl(0,7,8,-4,0,12,17,2,0,5,22,4),Rl(0,7,8,-4,0,13,19,2,0,5,24,4),Rl(0,7,9,-4,0,14,21,2,0,5,26,4),Rl(0,8,9,-5,0,15,22,2,0,6,28,5),Rl(0,8,10,-5,0,16,24,2,0,6,30,5),Rl(0,8,11,-5,0,17,26,2,0,6,32,5),Rl(0,9,11,-5,0,18,28,2,0,7,34,6),Rl(0,9,12,-6,0,19,29,2,0,7,36,6),Rl(0,10,13,-6,0,20,31,3,0,8,38,7),Rl(0,10,13,-6,0,21,33,3,0,8,40,7),Rl(0,10,14,-6,0,22,35,3,0,8,42,7),Rl(0,11,14,-7,0,23,36,3,0,9,44,8),Rl(0,11,15,-7,0,24,38,3,0,9,46,8)],Iue={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Due={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function z6(t){return`${Math.round(t)}ms`}function Lue(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function Nue(t){const e={...Iue,...t.easing},n={...Due,...t.duration};return{getAutoHeightDuration:Lue,create:(i=["all"],o={})=>{const{duration:s=n.standard,easing:a=e.easeInOut,delay:c=0,...h}=o;return(Array.isArray(i)?i:[i]).map(d=>`${d} ${typeof s=="string"?s:z6(s)} ${a} ${typeof c=="string"?c:z6(c)}`).join(",")},...t,easing:e,duration:n}}const kue={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Oue(t){return tg(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function wH(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let o=0;o<i.length;o++){const[s,a]=i[o];!Oue(a)||s.startsWith("unstable_")?delete r[s]:tg(a)&&(r[s]={...a},n(r[s]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function rD(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:o={},transitions:s={},typography:a={},shape:c,...h}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(ty(20));const d=pk(o),v=ak(t);let w=qf(v,{mixins:Tue(v.breakpoints,r),palette:d,shadows:Pue.slice(),typography:bH(d,a),transitions:Nue(s),zIndex:{...kue}});return w=qf(w,h),w=e.reduce((_,E)=>qf(_,E),w),w.unstable_sxConfig={...Yw,...h==null?void 0:h.unstable_sxConfig},w.unstable_sx=function(E){return Cv({sx:E,theme:this})},w.toRuntimeSource=wH,w}function iD(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const Fue=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=iD(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function SH(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function EH(t){return t==="dark"?Fue:[]}function Bue(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,o=pk(e);return{palette:o,opacity:{...SH(o.mode),...n},overlays:r||EH(o.mode),...i}}function zue(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const Uue=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],jue=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const s={};return Uue(t.cssVarPrefix).forEach(a=>{s[a]=n[a],delete n[a]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:s}}:o?{[o.replace("%s",e)]:s,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...s}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function Gue(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function br(t,e,n){!t[e]&&n&&(t[e]=n)}function g2(t){return typeof t!="string"||!t.startsWith("hsl")?t:dH(t)}function $g(t,e){`${e}Channel`in t||(t[`${e}Channel`]=p2(g2(t[e])))}function Vue(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Xp=t=>{try{return t()}catch{}},Hue=(t="mui")=>hue(t);function a5(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=Bue({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:o,...s}=rD({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:o,opacity:{...SH(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||EH(i)},s}function que(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:s=zue,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:c=":root",...h}=t,d=Object.keys(n)[0],v=r||(n.light&&d!=="light"?"light":d),w=Hue(o),{[v]:_,light:E,dark:M,...D}=n,A={...D};let F=_;if((v==="dark"&&!("dark"in n)||v==="light"&&!("light"in n))&&(F=!0),!F)throw new Error(ty(21,v));const O=a5(A,F,h,v);E&&!A.light&&a5(A,E,void 0,"light"),M&&!A.dark&&a5(A,M,void 0,"dark");let N={defaultColorScheme:v,...O,cssVarPrefix:o,colorSchemeSelector:a,rootSelector:c,getCssVar:w,colorSchemes:A,font:{...Eue(O.typography),...O.font},spacing:Vue(h.spacing)};Object.keys(N.colorSchemes).forEach(K=>{const k=N.colorSchemes[K].palette,$=Q=>{const ie=Q.split("-"),ae=ie[1],ce=ie[2];return w(Q,k[ae][ce])};if(k.mode==="light"&&(br(k.common,"background","#fff"),br(k.common,"onBackground","#000")),k.mode==="dark"&&(br(k.common,"background","#000"),br(k.common,"onBackground","#fff")),Gue(k,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),k.mode==="light"){br(k.Alert,"errorColor",Hs(k.error.light,.6)),br(k.Alert,"infoColor",Hs(k.info.light,.6)),br(k.Alert,"successColor",Hs(k.success.light,.6)),br(k.Alert,"warningColor",Hs(k.warning.light,.6)),br(k.Alert,"errorFilledBg",$("palette-error-main")),br(k.Alert,"infoFilledBg",$("palette-info-main")),br(k.Alert,"successFilledBg",$("palette-success-main")),br(k.Alert,"warningFilledBg",$("palette-warning-main")),br(k.Alert,"errorFilledColor",Xp(()=>k.getContrastText(k.error.main))),br(k.Alert,"infoFilledColor",Xp(()=>k.getContrastText(k.info.main))),br(k.Alert,"successFilledColor",Xp(()=>k.getContrastText(k.success.main))),br(k.Alert,"warningFilledColor",Xp(()=>k.getContrastText(k.warning.main))),br(k.Alert,"errorStandardBg",qs(k.error.light,.9)),br(k.Alert,"infoStandardBg",qs(k.info.light,.9)),br(k.Alert,"successStandardBg",qs(k.success.light,.9)),br(k.Alert,"warningStandardBg",qs(k.warning.light,.9)),br(k.Alert,"errorIconColor",$("palette-error-main")),br(k.Alert,"infoIconColor",$("palette-info-main")),br(k.Alert,"successIconColor",$("palette-success-main")),br(k.Alert,"warningIconColor",$("palette-warning-main")),br(k.AppBar,"defaultBg",$("palette-grey-100")),br(k.Avatar,"defaultBg",$("palette-grey-400")),br(k.Button,"inheritContainedBg",$("palette-grey-300")),br(k.Button,"inheritContainedHoverBg",$("palette-grey-A100")),br(k.Chip,"defaultBorder",$("palette-grey-400")),br(k.Chip,"defaultAvatarColor",$("palette-grey-700")),br(k.Chip,"defaultIconColor",$("palette-grey-700")),br(k.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),br(k.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),br(k.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),br(k.LinearProgress,"primaryBg",qs(k.primary.main,.62)),br(k.LinearProgress,"secondaryBg",qs(k.secondary.main,.62)),br(k.LinearProgress,"errorBg",qs(k.error.main,.62)),br(k.LinearProgress,"infoBg",qs(k.info.main,.62)),br(k.LinearProgress,"successBg",qs(k.success.main,.62)),br(k.LinearProgress,"warningBg",qs(k.warning.main,.62)),br(k.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.11)`),br(k.Slider,"primaryTrack",qs(k.primary.main,.62)),br(k.Slider,"secondaryTrack",qs(k.secondary.main,.62)),br(k.Slider,"errorTrack",qs(k.error.main,.62)),br(k.Slider,"infoTrack",qs(k.info.main,.62)),br(k.Slider,"successTrack",qs(k.success.main,.62)),br(k.Slider,"warningTrack",qs(k.warning.main,.62));const Q=uE(k.background.default,.8);br(k.SnackbarContent,"bg",Q),br(k.SnackbarContent,"color",Xp(()=>k.getContrastText(Q))),br(k.SpeedDialAction,"fabHoverBg",uE(k.background.paper,.15)),br(k.StepConnector,"border",$("palette-grey-400")),br(k.StepContent,"border",$("palette-grey-400")),br(k.Switch,"defaultColor",$("palette-common-white")),br(k.Switch,"defaultDisabledColor",$("palette-grey-100")),br(k.Switch,"primaryDisabledColor",qs(k.primary.main,.62)),br(k.Switch,"secondaryDisabledColor",qs(k.secondary.main,.62)),br(k.Switch,"errorDisabledColor",qs(k.error.main,.62)),br(k.Switch,"infoDisabledColor",qs(k.info.main,.62)),br(k.Switch,"successDisabledColor",qs(k.success.main,.62)),br(k.Switch,"warningDisabledColor",qs(k.warning.main,.62)),br(k.TableCell,"border",qs(lE(k.divider,1),.88)),br(k.Tooltip,"bg",lE(k.grey[700],.92))}if(k.mode==="dark"){br(k.Alert,"errorColor",qs(k.error.light,.6)),br(k.Alert,"infoColor",qs(k.info.light,.6)),br(k.Alert,"successColor",qs(k.success.light,.6)),br(k.Alert,"warningColor",qs(k.warning.light,.6)),br(k.Alert,"errorFilledBg",$("palette-error-dark")),br(k.Alert,"infoFilledBg",$("palette-info-dark")),br(k.Alert,"successFilledBg",$("palette-success-dark")),br(k.Alert,"warningFilledBg",$("palette-warning-dark")),br(k.Alert,"errorFilledColor",Xp(()=>k.getContrastText(k.error.dark))),br(k.Alert,"infoFilledColor",Xp(()=>k.getContrastText(k.info.dark))),br(k.Alert,"successFilledColor",Xp(()=>k.getContrastText(k.success.dark))),br(k.Alert,"warningFilledColor",Xp(()=>k.getContrastText(k.warning.dark))),br(k.Alert,"errorStandardBg",Hs(k.error.light,.9)),br(k.Alert,"infoStandardBg",Hs(k.info.light,.9)),br(k.Alert,"successStandardBg",Hs(k.success.light,.9)),br(k.Alert,"warningStandardBg",Hs(k.warning.light,.9)),br(k.Alert,"errorIconColor",$("palette-error-main")),br(k.Alert,"infoIconColor",$("palette-info-main")),br(k.Alert,"successIconColor",$("palette-success-main")),br(k.Alert,"warningIconColor",$("palette-warning-main")),br(k.AppBar,"defaultBg",$("palette-grey-900")),br(k.AppBar,"darkBg",$("palette-background-paper")),br(k.AppBar,"darkColor",$("palette-text-primary")),br(k.Avatar,"defaultBg",$("palette-grey-600")),br(k.Button,"inheritContainedBg",$("palette-grey-800")),br(k.Button,"inheritContainedHoverBg",$("palette-grey-700")),br(k.Chip,"defaultBorder",$("palette-grey-700")),br(k.Chip,"defaultAvatarColor",$("palette-grey-300")),br(k.Chip,"defaultIconColor",$("palette-grey-300")),br(k.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),br(k.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),br(k.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),br(k.LinearProgress,"primaryBg",Hs(k.primary.main,.5)),br(k.LinearProgress,"secondaryBg",Hs(k.secondary.main,.5)),br(k.LinearProgress,"errorBg",Hs(k.error.main,.5)),br(k.LinearProgress,"infoBg",Hs(k.info.main,.5)),br(k.LinearProgress,"successBg",Hs(k.success.main,.5)),br(k.LinearProgress,"warningBg",Hs(k.warning.main,.5)),br(k.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.13)`),br(k.Slider,"primaryTrack",Hs(k.primary.main,.5)),br(k.Slider,"secondaryTrack",Hs(k.secondary.main,.5)),br(k.Slider,"errorTrack",Hs(k.error.main,.5)),br(k.Slider,"infoTrack",Hs(k.info.main,.5)),br(k.Slider,"successTrack",Hs(k.success.main,.5)),br(k.Slider,"warningTrack",Hs(k.warning.main,.5));const Q=uE(k.background.default,.98);br(k.SnackbarContent,"bg",Q),br(k.SnackbarContent,"color",Xp(()=>k.getContrastText(Q))),br(k.SpeedDialAction,"fabHoverBg",uE(k.background.paper,.15)),br(k.StepConnector,"border",$("palette-grey-600")),br(k.StepContent,"border",$("palette-grey-600")),br(k.Switch,"defaultColor",$("palette-grey-300")),br(k.Switch,"defaultDisabledColor",$("palette-grey-600")),br(k.Switch,"primaryDisabledColor",Hs(k.primary.main,.55)),br(k.Switch,"secondaryDisabledColor",Hs(k.secondary.main,.55)),br(k.Switch,"errorDisabledColor",Hs(k.error.main,.55)),br(k.Switch,"infoDisabledColor",Hs(k.info.main,.55)),br(k.Switch,"successDisabledColor",Hs(k.success.main,.55)),br(k.Switch,"warningDisabledColor",Hs(k.warning.main,.55)),br(k.TableCell,"border",Hs(lE(k.divider,1),.68)),br(k.Tooltip,"bg",lE(k.grey[700],.92))}$g(k.background,"default"),$g(k.background,"paper"),$g(k.common,"background"),$g(k.common,"onBackground"),$g(k,"divider"),Object.keys(k).forEach(Q=>{const ie=k[Q];Q!=="tonalOffset"&&ie&&typeof ie=="object"&&(ie.main&&br(k[Q],"mainChannel",p2(g2(ie.main))),ie.light&&br(k[Q],"lightChannel",p2(g2(ie.light))),ie.dark&&br(k[Q],"darkChannel",p2(g2(ie.dark))),ie.contrastText&&br(k[Q],"contrastTextChannel",p2(g2(ie.contrastText))),Q==="text"&&($g(k[Q],"primary"),$g(k[Q],"secondary")),Q==="action"&&(ie.active&&$g(k[Q],"active"),ie.selected&&$g(k[Q],"selected")))})}),N=e.reduce((K,k)=>qf(K,k),N);const H={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:s,getSelector:jue(N)},{vars:G,generateThemeVars:W,generateStyleSheets:X}=pue(N,H);return N.vars=G,Object.entries(N.colorSchemes[N.defaultColorScheme]).forEach(([K,k])=>{N[K]=k}),N.generateThemeVars=W,N.generateStyleSheets=X,N.generateSpacing=function(){return aH(h.spacing,rk(this))},N.getColorSchemeSelector=gue(a),N.spacing=N.generateSpacing(),N.shouldSkipGeneratingVar=s,N.unstable_sxConfig={...Yw,...h==null?void 0:h.unstable_sxConfig},N.unstable_sx=function(k){return Cv({sx:k,theme:this})},N.toRuntimeSource=wH,N}function U6(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:pk({...n===!0?{}:n.palette,mode:e})})}function Lx(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...s}=t,a=o||"light",c=i==null?void 0:i[a],h={...i,...n?{[a]:{...typeof c!="boolean"&&c,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return rD(t,...e);let d=n;"palette"in t||h[a]&&(h[a]!==!0?d=h[a].palette:a==="dark"&&(d={mode:"dark"}));const v=rD({...t,palette:d},...e);return v.defaultColorScheme=a,v.colorSchemes=h,v.palette.mode==="light"&&(v.colorSchemes.light={...h.light!==!0&&h.light,palette:v.palette},U6(v,"dark",h.dark)),v.palette.mode==="dark"&&(v.colorSchemes.dark={...h.dark!==!0&&h.dark,palette:v.palette},U6(v,"light",h.light)),v}return!n&&!("light"in h)&&a==="light"&&(h.light=!0),que({...s,colorSchemes:h,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const TH=Lx();function $ue(){const t=sH(TH);return t[cm]||t}function Wue(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const gk=t=>Wue(t)&&t!=="classes",Ba=hH({themeId:cm,defaultTheme:TH,rootShouldForwardProp:gk});function o5({theme:t,...e}){const n=cm in t?t[cm]:void 0;return ke.jsx(vH,{...e,themeId:n?cm:void 0,theme:n||t})}const cE={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:Xue}=cue({themeId:cm,theme:()=>Lx({cssVariables:!0}),colorSchemeStorageKey:cE.colorSchemeStorageKey,modeStorageKey:cE.modeStorageKey,defaultColorScheme:{light:cE.defaultLightColorScheme,dark:cE.defaultDarkColorScheme},resolveTheme:t=>{const e={...t,typography:bH(t.palette,t.typography)};return e.unstable_sx=function(r){return Cv({sx:r,theme:this})},e}}),Yue=Xue;function Zue({theme:t,...e}){if(typeof t=="function")return ke.jsx(o5,{theme:t,...e});const n=cm in t?t[cm]:t;return"colorSchemes"in n?ke.jsx(Yue,{theme:t,...e}):"vars"in n?ke.jsx(o5,{theme:t,...e}):ke.jsx(o5,{theme:{...t,vars:null},...e})}const Oc=[];for(let t=0;t<256;++t)Oc.push((t+256).toString(16).slice(1));function Kue(t,e=0){return(Oc[t[e+0]]+Oc[t[e+1]]+Oc[t[e+2]]+Oc[t[e+3]]+"-"+Oc[t[e+4]]+Oc[t[e+5]]+"-"+Oc[t[e+6]]+Oc[t[e+7]]+"-"+Oc[t[e+8]]+Oc[t[e+9]]+"-"+Oc[t[e+10]]+Oc[t[e+11]]+Oc[t[e+12]]+Oc[t[e+13]]+Oc[t[e+14]]+Oc[t[e+15]]).toLowerCase()}let s5;const Jue=new Uint8Array(16);function Que(){if(!s5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s5=crypto.getRandomValues.bind(crypto)}return s5(Jue)}const ece=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),j6={randomUUID:ece};function mk(t,e,n){var i;if(j6.randomUUID&&!t)return j6.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??Que();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Kue(r)}const ym=nue;function Ep(t){return tue(t)}function tce(t){return Bd("MuiSvgIcon",t)}Xh("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const nce=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${_u(e)}`,`fontSize${_u(n)}`]};return Sp(i,tce,r)},rce=Ba("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${_u(n.color)}`],e[`fontSize${_u(n.fontSize)}`]]}})(ym(({theme:t})=>{var e,n,r,i,o,s,a,c,h,d,v,w,_,E;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=t.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:M=>!M.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((s=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:s.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(a=t.typography)==null?void 0:a.pxToRem)==null?void 0:c.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((d=(h=t.typography)==null?void 0:h.pxToRem)==null?void 0:d.call(h,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,M])=>M&&M.main).map(([M])=>{var D,A;return{props:{color:M},style:{color:(A=(D=(t.vars??t).palette)==null?void 0:D[M])==null?void 0:A.main}}}),{props:{color:"action"},style:{color:(w=(v=(t.vars??t).palette)==null?void 0:v.action)==null?void 0:w.active}},{props:{color:"disabled"},style:{color:(E=(_=(t.vars??t).palette)==null?void 0:_.action)==null?void 0:E.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),aD=Be.forwardRef(function(e,n){const r=Ep({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:c="medium",htmlColor:h,inheritViewBox:d=!1,titleAccess:v,viewBox:w="0 0 24 24",..._}=r,E=Be.isValidElement(i)&&i.type==="svg",M={...r,color:s,component:a,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:w,hasSvgAsChild:E},D={};d||(D.viewBox=w);const A=nce(M);return ke.jsxs(rce,{as:a,className:Fr(A.root,o),focusable:"false",color:h,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:n,...D,..._,...E&&i.props,ownerState:M,children:[E?i.props.children:i,v?ke.jsx("title",{children:v}):null]})});aD.muiName="SvgIcon";function gg(t,e){function n(r,i){return ke.jsx(aD,{"data-testid":void 0,ref:i,...r,children:t})}return n.muiName=aD.muiName,Be.memo(Be.forwardRef(n))}function ice(t,e){const n=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&n>=65&&n<=90&&typeof e=="function"}function ace(t,e){if(!t)return e;function n(s,a){const c={};return Object.keys(a).forEach(h=>{ice(h,a[h])&&typeof s[h]=="function"&&(c[h]=(...d)=>{s[h](...d),a[h](...d)})}),c}if(typeof t=="function"||typeof e=="function")return s=>{const a=typeof e=="function"?e(s):e,c=typeof t=="function"?t({...s,...a}):t,h=Fr(s==null?void 0:s.className,a==null?void 0:a.className,c==null?void 0:c.className),d=n(c,a);return{...a,...c,...d,...!!h&&{className:h},...(a==null?void 0:a.style)&&(c==null?void 0:c.style)&&{style:{...a.style,...c.style}},...(a==null?void 0:a.sx)&&(c==null?void 0:c.sx)&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const r=e,i=n(t,r),o=Fr(r==null?void 0:r.className,t==null?void 0:t.className);return{...e,...t,...i,...!!o&&{className:o},...(r==null?void 0:r.style)&&(t==null?void 0:t.style)&&{style:{...r.style,...t.style}},...(r==null?void 0:r.sx)&&(t==null?void 0:t.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function oce(t){return Bd("MuiPaper",t)}Xh("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const sce=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Sp(o,oce,i)},lce=Ba("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(ym(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),CH=Be.forwardRef(function(e,n){var _;const r=Ep({props:e,name:"MuiPaper"}),i=$ue(),{className:o,component:s="div",elevation:a=1,square:c=!1,variant:h="elevation",...d}=r,v={...r,component:s,elevation:a,square:c,variant:h},w=sce(v);return ke.jsx(lce,{as:s,ownerState:v,className:Fr(w.root,o),ref:n,...d,style:{...h==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":(_=i.vars.overlays)==null?void 0:_[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${ny("#fff",iD(a))}, ${ny("#fff",iD(a))})`}},...d.style}})});function oD(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,internalForwardedProps:s,shouldForwardComponentProp:a=!1,...c}=e,{component:h,slots:d={[t]:void 0},slotProps:v={[t]:void 0},...w}=o,_=d[t]||r,E=$le(v[t],i),{props:{component:M,...D},internalRef:A}=qle({className:n,...c,externalForwardedProps:t==="root"?w:void 0,externalSlotProps:E}),F=uC(A,E==null?void 0:E.ref,e.ref),O=t==="root"?M||h:M,N=Vle(_,{...t==="root"&&!h&&!d[t]&&s,...t!=="root"&&!d[t]&&s,...D,...O&&!a&&{as:O},...O&&a&&{component:O},ref:F},i);return[_,N]}class cC{constructor(){Vg(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new cC}static use(){const e=pH(cC.create).current,[n,r]=Be.useState(!1);return e.shouldMount=n,e.setShouldMount=r,Be.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=cce(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function uce(){return cC.use()}function cce(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function hce(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:a,onExited:c,timeout:h}=t,[d,v]=Be.useState(!1),w=Fr(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),_={width:s,height:s,top:-(s/2)+o,left:-(s/2)+i},E=Fr(n.child,d&&n.childLeaving,r&&n.childPulsate);return!a&&!d&&v(!0),Be.useEffect(()=>{if(!a&&c!=null){const M=setTimeout(c,h);return()=>{clearTimeout(M)}}},[c,a,h]),ke.jsx("span",{className:w,style:_,children:ke.jsx("span",{className:E})})}const _d=Xh("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),sD=550,fce=80,dce=Wh`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,pce=Wh`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,gce=Wh`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,mce=Ba("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),vce=Ba(hce,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${_d.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${dce};
    animation-duration: ${sD}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${_d.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${_d.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${_d.childLeaving} {
    opacity: 0;
    animation-name: ${pce};
    animation-duration: ${sD}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${_d.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${gce};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,yce=Be.forwardRef(function(e,n){const r=Ep({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s,...a}=r,[c,h]=Be.useState([]),d=Be.useRef(0),v=Be.useRef(null);Be.useEffect(()=>{v.current&&(v.current(),v.current=null)},[c]);const w=Be.useRef(!1),_=jle(),E=Be.useRef(null),M=Be.useRef(null),D=Be.useCallback(N=>{const{pulsate:H,rippleX:G,rippleY:W,rippleSize:X,cb:K}=N;h(k=>[...k,ke.jsx(vce,{classes:{ripple:Fr(o.ripple,_d.ripple),rippleVisible:Fr(o.rippleVisible,_d.rippleVisible),ripplePulsate:Fr(o.ripplePulsate,_d.ripplePulsate),child:Fr(o.child,_d.child),childLeaving:Fr(o.childLeaving,_d.childLeaving),childPulsate:Fr(o.childPulsate,_d.childPulsate)},timeout:sD,pulsate:H,rippleX:G,rippleY:W,rippleSize:X},d.current)]),d.current+=1,v.current=K},[o]),A=Be.useCallback((N={},H={},G=()=>{})=>{const{pulsate:W=!1,center:X=i||H.pulsate,fakeElement:K=!1}=H;if((N==null?void 0:N.type)==="mousedown"&&w.current){w.current=!1;return}(N==null?void 0:N.type)==="touchstart"&&(w.current=!0);const k=K?null:M.current,$=k?k.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Q,ie,ae;if(X||N===void 0||N.clientX===0&&N.clientY===0||!N.clientX&&!N.touches)Q=Math.round($.width/2),ie=Math.round($.height/2);else{const{clientX:ce,clientY:se}=N.touches&&N.touches.length>0?N.touches[0]:N;Q=Math.round(ce-$.left),ie=Math.round(se-$.top)}if(X)ae=Math.sqrt((2*$.width**2+$.height**2)/3),ae%2===0&&(ae+=1);else{const ce=Math.max(Math.abs((k?k.clientWidth:0)-Q),Q)*2+2,se=Math.max(Math.abs((k?k.clientHeight:0)-ie),ie)*2+2;ae=Math.sqrt(ce**2+se**2)}N!=null&&N.touches?E.current===null&&(E.current=()=>{D({pulsate:W,rippleX:Q,rippleY:ie,rippleSize:ae,cb:G})},_.start(fce,()=>{E.current&&(E.current(),E.current=null)})):D({pulsate:W,rippleX:Q,rippleY:ie,rippleSize:ae,cb:G})},[i,D,_]),F=Be.useCallback(()=>{A({},{pulsate:!0})},[A]),O=Be.useCallback((N,H)=>{if(_.clear(),(N==null?void 0:N.type)==="touchend"&&E.current){E.current(),E.current=null,_.start(0,()=>{O(N,H)});return}E.current=null,h(G=>G.length>0?G.slice(1):G),v.current=H},[_]);return Be.useImperativeHandle(n,()=>({pulsate:F,start:A,stop:O}),[F,A,O]),ke.jsx(mce,{className:Fr(_d.root,o.root,s),ref:M,...a,children:ke.jsx(mM,{component:null,exit:!0,children:c})})});function _ce(t){return Bd("MuiButtonBase",t)}const xce=Xh("MuiButtonBase",["root","disabled","focusVisible"]),bce=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,s=Sp({root:["root",e&&"disabled",n&&"focusVisible"]},_ce,i);return n&&r&&(s.root+=` ${r}`),s},wce=Ba("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${xce.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),MH=Be.forwardRef(function(e,n){const r=Ep({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:c="button",disabled:h=!1,disableRipple:d=!1,disableTouchRipple:v=!1,focusRipple:w=!1,focusVisibleClassName:_,LinkComponent:E="a",onBlur:M,onClick:D,onContextMenu:A,onDragLeave:F,onFocus:O,onFocusVisible:N,onKeyDown:H,onKeyUp:G,onMouseDown:W,onMouseLeave:X,onMouseUp:K,onTouchEnd:k,onTouchMove:$,onTouchStart:Q,tabIndex:ie=0,TouchRippleProps:ae,touchRippleRef:ce,type:se,...Se}=r,ye=Be.useRef(null),Te=uce(),pe=uC(Te.ref,ce),[Ie,me]=Be.useState(!1);h&&Ie&&me(!1),Be.useImperativeHandle(i,()=>({focusVisible:()=>{me(!0),ye.current.focus()}}),[]);const xe=Te.shouldMount&&!d&&!h;Be.useEffect(()=>{Ie&&w&&!d&&Te.pulsate()},[d,w,Ie,Te]);const ve=Wg(Te,"start",W,v),Ee=Wg(Te,"stop",A,v),De=Wg(Te,"stop",F,v),We=Wg(Te,"stop",K,v),Ae=Wg(Te,"stop",Re=>{Ie&&Re.preventDefault(),X&&X(Re)},v),ut=Wg(Te,"start",Q,v),pt=Wg(Te,"stop",k,v),st=Wg(Te,"stop",$,v),Ce=Wg(Te,"stop",Re=>{A6(Re.target)||me(!1),M&&M(Re)},!1),It=PT(Re=>{ye.current||(ye.current=Re.currentTarget),A6(Re.target)&&(me(!0),N&&N(Re)),O&&O(Re)}),Ve=()=>{const Re=ye.current;return c&&c!=="button"&&!(Re.tagName==="A"&&Re.href)},yt=PT(Re=>{w&&!Re.repeat&&Ie&&Re.key===" "&&Te.stop(Re,()=>{Te.start(Re)}),Re.target===Re.currentTarget&&Ve()&&Re.key===" "&&Re.preventDefault(),H&&H(Re),Re.target===Re.currentTarget&&Ve()&&Re.key==="Enter"&&!h&&(Re.preventDefault(),D&&D(Re))}),Ze=PT(Re=>{w&&Re.key===" "&&Ie&&!Re.defaultPrevented&&Te.stop(Re,()=>{Te.pulsate(Re)}),G&&G(Re),D&&Re.target===Re.currentTarget&&Ve()&&Re.key===" "&&!Re.defaultPrevented&&D(Re)});let wt=c;wt==="button"&&(Se.href||Se.to)&&(wt=E);const Ut={};wt==="button"?(Ut.type=se===void 0?"button":se,Ut.disabled=h):(!Se.href&&!Se.to&&(Ut.role="button"),h&&(Ut["aria-disabled"]=h));const ht=uC(n,ye),qt={...r,centerRipple:o,component:c,disabled:h,disableRipple:d,disableTouchRipple:v,focusRipple:w,tabIndex:ie,focusVisible:Ie},Ye=bce(qt);return ke.jsxs(wce,{as:wt,className:Fr(Ye.root,a),ownerState:qt,onBlur:Ce,onClick:D,onContextMenu:Ee,onFocus:It,onKeyDown:yt,onKeyUp:Ze,onMouseDown:ve,onMouseLeave:Ae,onMouseUp:We,onDragLeave:De,onTouchEnd:pt,onTouchMove:st,onTouchStart:ut,ref:ht,tabIndex:h?-1:ie,type:se,...Ut,...Se,children:[s,xe?ke.jsx(yce,{ref:pe,center:o,...ae}):null]})});function Wg(t,e,n,r=!1){return PT(i=>(n&&n(i),r||t[e](i),!0))}function Sce(t){return typeof t.main=="string"}function Ece(t,e=[]){if(!Sce(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function gw(t=[]){return([,e])=>e&&Ece(e,t)}function Tce(t){return Bd("MuiCircularProgress",t)}Xh("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Zm=44,lD=Wh`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,uD=Wh`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Cce=typeof lD!="string"?Fv`
        animation: ${lD} 1.4s linear infinite;
      `:null,Mce=typeof uD!="string"?Fv`
        animation: ${uD} 1.4s ease-in-out infinite;
      `:null,Ace=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,o={root:["root",n,`color${_u(r)}`],svg:["svg"],circle:["circle",`circle${_u(n)}`,i&&"circleDisableShrink"]};return Sp(o,Tce,e)},Rce=Ba("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${_u(n.color)}`]]}})(ym(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Cce||{animation:`${lD} 1.4s linear infinite`}},...Object.entries(t.palette).filter(gw()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),Pce=Ba("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),Ice=Ba("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${_u(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(ym(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:Mce||{animation:`${uD} 1.4s ease-in-out infinite`}}]}))),Dce=Be.forwardRef(function(e,n){const r=Ep({props:e,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:s=!1,size:a=40,style:c,thickness:h=3.6,value:d=0,variant:v="indeterminate",...w}=r,_={...r,color:o,disableShrink:s,size:a,thickness:h,value:d,variant:v},E=Ace(_),M={},D={},A={};if(v==="determinate"){const F=2*Math.PI*((Zm-h)/2);M.strokeDasharray=F.toFixed(3),A["aria-valuenow"]=Math.round(d),M.strokeDashoffset=`${((100-d)/100*F).toFixed(3)}px`,D.transform="rotate(-90deg)"}return ke.jsx(Rce,{className:Fr(E.root,i),style:{width:a,height:a,...D,...c},ownerState:_,ref:n,role:"progressbar",...A,...w,children:ke.jsx(Pce,{className:E.svg,ownerState:_,viewBox:`${Zm/2} ${Zm/2} ${Zm} ${Zm}`,children:ke.jsx(Ice,{className:E.circle,style:M,ownerState:_,cx:Zm,cy:Zm,r:(Zm-h)/2,fill:"none",strokeWidth:h})})})});function Lce(t){return Bd("MuiIconButton",t)}const G6=Xh("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Nce=t=>{const{classes:e,disabled:n,color:r,edge:i,size:o,loading:s}=t,a={root:["root",s&&"loading",n&&"disabled",r!=="default"&&`color${_u(r)}`,i&&`edge${_u(i)}`,`size${_u(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Sp(a,Lce,e)},kce=Ba(MH,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${_u(n.color)}`],n.edge&&e[`edge${_u(n.edge)}`],e[`size${_u(n.size)}`]]}})(ym(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:ny(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),ym(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(gw()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(gw()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.vars?`rgba(${(t.vars||t).palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:ny((t.vars||t).palette[e].main,t.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${G6.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${G6.loading}`]:{color:"transparent"}}))),Oce=Ba("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(t,e)=>e.loadingIndicator})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),zv=Be.forwardRef(function(e,n){const r=Ep({props:e,name:"MuiIconButton"}),{edge:i=!1,children:o,className:s,color:a="default",disabled:c=!1,disableFocusRipple:h=!1,size:d="medium",id:v,loading:w=null,loadingIndicator:_,...E}=r,M=Fle(v),D=_??ke.jsx(Dce,{"aria-labelledby":M,color:"inherit",size:16}),A={...r,edge:i,color:a,disabled:c,disableFocusRipple:h,loading:w,loadingIndicator:D,size:d},F=Nce(A);return ke.jsxs(kce,{id:w?M:v,className:Fr(F.root,s),centerRipple:!0,focusRipple:!h,disabled:c||w,ref:n,...E,ownerState:A,children:[typeof w=="boolean"&&ke.jsx("span",{className:F.loadingWrapper,style:{display:"contents"},children:ke.jsx(Oce,{className:F.loadingIndicator,ownerState:A,children:w&&D})}),o]})});function V6(t){return typeof t=="string"}const Fce=Be.createContext(void 0);function Bce(){return Be.useContext(Fce)}const zce=Xh("MuiBox",["root"]),Uce=Lx(),by=lH({themeId:cm,defaultTheme:Uce,defaultClassName:zce.root,generateClassName:ok.generate});function jce(t){return Bd("PrivateSwitchBase",t)}Xh("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Gce=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${_u(i)}`],input:["input"]};return Sp(o,jce,e)},Vce=Ba(MH)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:e})=>t==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:e})=>t==="end"&&e.size!=="small",style:{marginRight:-12}}]}),Hce=Ba("input",{shouldForwardProp:gk})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),qce=Be.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:o,defaultChecked:s,disabled:a,disableFocusRipple:c=!1,edge:h=!1,icon:d,id:v,inputProps:w,inputRef:_,name:E,onBlur:M,onChange:D,onFocus:A,readOnly:F,required:O=!1,tabIndex:N,type:H,value:G,slots:W={},slotProps:X={},...K}=e,[k,$]=Ble({controlled:i,default:!!s,name:"SwitchBase",state:"checked"}),Q=Bce(),ie=Ee=>{A&&A(Ee),Q&&Q.onFocus&&Q.onFocus(Ee)},ae=Ee=>{M&&M(Ee),Q&&Q.onBlur&&Q.onBlur(Ee)},ce=Ee=>{if(Ee.nativeEvent.defaultPrevented)return;const De=Ee.target.checked;$(De),D&&D(Ee,De)};let se=a;Q&&typeof se>"u"&&(se=Q.disabled);const Se=H==="checkbox"||H==="radio",ye={...e,checked:k,disabled:se,disableFocusRipple:c,edge:h},Te=Gce(ye),pe={slots:W,slotProps:{input:w,...X}},[Ie,me]=oD("root",{ref:n,elementType:Vce,className:Te.root,shouldForwardComponentProp:!0,externalForwardedProps:{...pe,component:"span",...K},getSlotProps:Ee=>({...Ee,onFocus:De=>{var We;(We=Ee.onFocus)==null||We.call(Ee,De),ie(De)},onBlur:De=>{var We;(We=Ee.onBlur)==null||We.call(Ee,De),ae(De)}}),ownerState:ye,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:se,role:void 0,tabIndex:null}}),[xe,ve]=oD("input",{ref:_,elementType:Hce,className:Te.input,externalForwardedProps:pe,getSlotProps:Ee=>({...Ee,onChange:De=>{var We;(We=Ee.onChange)==null||We.call(Ee,De),ce(De)}}),ownerState:ye,additionalProps:{autoFocus:r,checked:i,defaultChecked:s,disabled:se,id:Se?v:void 0,name:E,readOnly:F,required:O,tabIndex:N,type:H,...H==="checkbox"&&G===void 0?{}:{value:G}}});return ke.jsxs(Ie,{...me,children:[ke.jsx(xe,{...ve}),k?o:d]})}),$ce=gg(ke.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Wce=gg(ke.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Xce=gg(ke.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Yce(t){return Bd("MuiCheckbox",t)}const l5=Xh("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Zce=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,o={root:["root",n&&"indeterminate",`color${_u(r)}`,`size${_u(i)}`]},s=Sp(o,Yce,e);return{...e,...s}},Kce=Ba(qce,{shouldForwardProp:t=>gk(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${_u(n.size)}`],n.color!=="default"&&e[`color${_u(n.color)}`]]}})(ym(({theme:t})=>({color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:ny(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(gw()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:ny(t.palette[e].main,t.palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(gw()).map(([e])=>({props:{color:e},style:{[`&.${l5.checked}, &.${l5.indeterminate}`]:{color:(t.vars||t).palette[e].main},[`&.${l5.disabled}`]:{color:(t.vars||t).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Jce=ke.jsx(Wce,{}),Qce=ke.jsx($ce,{}),ehe=ke.jsx(Xce,{}),AH=Be.forwardRef(function(e,n){const r=Ep({props:e,name:"MuiCheckbox"}),{checkedIcon:i=Jce,color:o="primary",icon:s=Qce,indeterminate:a=!1,indeterminateIcon:c=ehe,inputProps:h,size:d="medium",disableRipple:v=!1,className:w,slots:_={},slotProps:E={},...M}=r,D=a?c:s,A=a?c:i,F={...r,disableRipple:v,color:o,indeterminate:a,size:d},O=Zce(F),N=E.input??h,[H,G]=oD("root",{ref:n,elementType:Kce,className:Fr(O.root,w),shouldForwardComponentProp:!0,externalForwardedProps:{slots:_,slotProps:E,...M},ownerState:F,additionalProps:{type:"checkbox",icon:Be.cloneElement(D,{fontSize:D.props.fontSize??d}),checkedIcon:Be.cloneElement(A,{fontSize:A.props.fontSize??d}),disableRipple:v,slots:_,slotProps:{input:ace(typeof N=="function"?N(F):N,{"data-indeterminate":a})}}});return ke.jsx(H,{...G,classes:O})}),V1=Be.createContext({});function the(t){return Bd("MuiList",t)}Xh("MuiList",["root","padding","dense","subheader"]);const nhe=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Sp({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},the,e)},rhe=Ba("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),DM=Be.forwardRef(function(e,n){const r=Ep({props:e,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:c=!1,subheader:h,...d}=r,v=Be.useMemo(()=>({dense:a}),[a]),w={...r,component:s,dense:a,disablePadding:c},_=nhe(w);return ke.jsx(V1.Provider,{value:v,children:ke.jsxs(rhe,{as:s,className:Fr(_.root,o),ref:n,ownerState:w,...d,children:[h,i]})})});function ihe(t){return Bd("MuiListItem",t)}Xh("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const ahe=Xh("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function ohe(t){return Bd("MuiListItemSecondaryAction",t)}Xh("MuiListItemSecondaryAction",["root","disableGutters"]);const she=t=>{const{disableGutters:e,classes:n}=t;return Sp({root:["root",e&&"disableGutters"]},ohe,n)},lhe=Ba("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),RH=Be.forwardRef(function(e,n){const r=Ep({props:e,name:"MuiListItemSecondaryAction"}),{className:i,...o}=r,s=Be.useContext(V1),a={...r,disableGutters:s.disableGutters},c=she(a);return ke.jsx(lhe,{className:Fr(c.root,i),ownerState:a,ref:n,...o})});RH.muiName="ListItemSecondaryAction";const uhe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.hasSecondaryAction&&e.secondaryAction]},che=t=>{const{alignItems:e,classes:n,dense:r,disableGutters:i,disablePadding:o,divider:s,hasSecondaryAction:a}=t;return Sp({root:["root",r&&"dense",!i&&"gutters",!o&&"padding",s&&"divider",e==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},ihe,n)},hhe=Ba("div",{name:"MuiListItem",slot:"Root",overridesResolver:uhe})(ym(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${ahe.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),fhe=Ba("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),vk=Be.forwardRef(function(e,n){const r=Ep({props:e,name:"MuiListItem"}),{alignItems:i="center",children:o,className:s,component:a,components:c={},componentsProps:h={},ContainerComponent:d="li",ContainerProps:{className:v,...w}={},dense:_=!1,disableGutters:E=!1,disablePadding:M=!1,divider:D=!1,secondaryAction:A,slotProps:F={},slots:O={},...N}=r,H=Be.useContext(V1),G=Be.useMemo(()=>({dense:_||H.dense||!1,alignItems:i,disableGutters:E}),[i,H.dense,_,E]),W=Be.useRef(null),X=Be.Children.toArray(o),K=X.length&&Lle(X[X.length-1],["ListItemSecondaryAction"]),k={...r,alignItems:i,dense:G.dense,disableGutters:E,disablePadding:M,divider:D,hasSecondaryAction:K},$=che(k),Q=uC(W,n),ie=O.root||c.Root||hhe,ae=F.root||h.root||{},ce={className:Fr($.root,ae.className,s),...N};let se=a||"li";return K?(se=!ce.component&&!a?"div":se,d==="li"&&(se==="li"?se="div":ce.component==="li"&&(ce.component="div")),ke.jsx(V1.Provider,{value:G,children:ke.jsxs(fhe,{as:d,className:Fr($.container,v),ref:Q,ownerState:k,...w,children:[ke.jsx(ie,{...ae,...!V6(ie)&&{as:se,ownerState:{...k,...ae.ownerState}},...ce,children:X}),X.pop()]})})):ke.jsx(V1.Provider,{value:G,children:ke.jsxs(ie,{...ae,as:se,ref:Q,...!V6(ie)&&{ownerState:{...k,...ae.ownerState}},...ce,children:[X,A&&ke.jsx(RH,{children:A})]})})});function dhe(t){return Bd("MuiListItemIcon",t)}Xh("MuiListItemIcon",["root","alignItemsFlexStart"]);const phe=t=>{const{alignItems:e,classes:n}=t;return Sp({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},dhe,n)},ghe=Ba("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(ym(({theme:t})=>({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),yk=Be.forwardRef(function(e,n){const r=Ep({props:e,name:"MuiListItemIcon"}),{className:i,...o}=r,s=Be.useContext(V1),a={...r,alignItems:s.alignItems},c=phe(a);return ke.jsx(ghe,{className:Fr(c.root,i),ownerState:a,ref:n,...o})}),mhe="modulepreload",vhe=function(t,e){return new URL(t,e).href},H6={},cD=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(h=>{if(h=vhe(h,r),h in H6)return;H6[h]=!0;const d=h.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(!!r)for(let E=s.length-1;E>=0;E--){const M=s[E];if(M.href===h&&(!d||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${v}`))return;const _=document.createElement("link");if(_.rel=d?"stylesheet":mhe,d||(_.as="script"),_.crossOrigin="",_.href=h,c&&_.setAttribute("nonce",c),document.head.appendChild(_),d)return new Promise((E,M)=>{_.addEventListener("load",E),_.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};function bs(t){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bs(t)}var yh=Uint8Array,Gf=Uint16Array,_k=Int32Array,LM=new yh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),NM=new yh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hD=new yh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),PH=function(t,e){for(var n=new Gf(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new _k(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},IH=PH(LM,2),DH=IH.b,fD=IH.r;DH[28]=258,fD[258]=28;var LH=PH(NM,0),yhe=LH.b,q6=LH.r,dD=new Gf(32768);for(var yl=0;yl<32768;++yl){var Km=(yl&43690)>>1|(yl&21845)<<1;Km=(Km&52428)>>2|(Km&13107)<<2,Km=(Km&61680)>>4|(Km&3855)<<4,dD[yl]=((Km&65280)>>8|(Km&255)<<8)>>1}var sg=function(t,e,n){for(var r=t.length,i=0,o=new Gf(e);i<r;++i)t[i]&&++o[t[i]-1];var s=new Gf(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(n){a=new Gf(1<<e);var c=15-e;for(i=0;i<r;++i)if(t[i])for(var h=i<<4|t[i],d=e-t[i],v=s[t[i]-1]++<<d,w=v|(1<<d)-1;v<=w;++v)a[dD[v]>>c]=h}else for(a=new Gf(r),i=0;i<r;++i)t[i]&&(a[i]=dD[s[t[i]-1]++]>>15-t[i]);return a},Av=new yh(288);for(var yl=0;yl<144;++yl)Av[yl]=8;for(var yl=144;yl<256;++yl)Av[yl]=9;for(var yl=256;yl<280;++yl)Av[yl]=7;for(var yl=280;yl<288;++yl)Av[yl]=8;var mw=new yh(32);for(var yl=0;yl<32;++yl)mw[yl]=5;var _he=sg(Av,9,0),xhe=sg(Av,9,1),bhe=sg(mw,5,0),whe=sg(mw,5,1),u5=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},np=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},c5=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},xk=function(t){return(t+7)/8|0},NH=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new yh(t.subarray(e,n))},She=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],up=function(t,e,n){var r=new Error(e||She[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,up),!n)throw r;return r},Ehe=function(t,e,n,r){var i=t.length,o=0;if(!i||e.f&&!e.l)return n||new yh(0);var s=!n,a=s||e.i!=2,c=e.i;s&&(n=new yh(i*3));var h=function(st){var Ce=n.length;if(st>Ce){var It=new yh(Math.max(Ce*2,st));It.set(n),n=It}},d=e.f||0,v=e.p||0,w=e.b||0,_=e.l,E=e.d,M=e.m,D=e.n,A=i*8;do{if(!_){d=np(t,v,1);var F=np(t,v+1,3);if(v+=3,F)if(F==1)_=xhe,E=whe,M=9,D=5;else if(F==2){var G=np(t,v,31)+257,W=np(t,v+10,15)+4,X=G+np(t,v+5,31)+1;v+=14;for(var K=new yh(X),k=new yh(19),$=0;$<W;++$)k[hD[$]]=np(t,v+$*3,7);v+=W*3;for(var Q=u5(k),ie=(1<<Q)-1,ae=sg(k,Q,1),$=0;$<X;){var ce=ae[np(t,v,ie)];v+=ce&15;var O=ce>>4;if(O<16)K[$++]=O;else{var se=0,Se=0;for(O==16?(Se=3+np(t,v,3),v+=2,se=K[$-1]):O==17?(Se=3+np(t,v,7),v+=3):O==18&&(Se=11+np(t,v,127),v+=7);Se--;)K[$++]=se}}var ye=K.subarray(0,G),Te=K.subarray(G);M=u5(ye),D=u5(Te),_=sg(ye,M,1),E=sg(Te,D,1)}else up(1);else{var O=xk(v)+4,N=t[O-4]|t[O-3]<<8,H=O+N;if(H>i){c&&up(0);break}a&&h(w+N),n.set(t.subarray(O,H),w),e.b=w+=N,e.p=v=H*8,e.f=d;continue}if(v>A){c&&up(0);break}}a&&h(w+131072);for(var pe=(1<<M)-1,Ie=(1<<D)-1,me=v;;me=v){var se=_[c5(t,v)&pe],xe=se>>4;if(v+=se&15,v>A){c&&up(0);break}if(se||up(2),xe<256)n[w++]=xe;else if(xe==256){me=v,_=null;break}else{var ve=xe-254;if(xe>264){var $=xe-257,Ee=LM[$];ve=np(t,v,(1<<Ee)-1)+DH[$],v+=Ee}var De=E[c5(t,v)&Ie],We=De>>4;De||up(3),v+=De&15;var Te=yhe[We];if(We>3){var Ee=NM[We];Te+=c5(t,v)&(1<<Ee)-1,v+=Ee}if(v>A){c&&up(0);break}a&&h(w+131072);var Ae=w+ve;if(w<Te){var ut=o-Te,pt=Math.min(Te,Ae);for(ut+w<0&&up(3);w<pt;++w)n[w]=r[ut+w]}for(;w<Ae;++w)n[w]=n[w-Te]}}e.l=_,e.p=me,e.b=w,e.f=d,_&&(d=1,e.m=M,e.d=E,e.n=D)}while(!d);return w!=n.length&&s?NH(n,0,w):n.subarray(0,w)},Xg=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Yb=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},h5=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return{t:OH,l:0};if(i==1){var s=new yh(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(H,G){return H.f-G.f}),n.push({s:-1,f:25001});var a=n[0],c=n[1],h=0,d=1,v=2;for(n[0]={s:-1,f:a.f+c.f,l:a,r:c};d!=i-1;)a=n[n[h].f<n[v].f?h++:v++],c=n[h!=d&&n[h].f<n[v].f?h++:v++],n[d++]={s:-1,f:a.f+c.f,l:a,r:c};for(var w=o[0].s,r=1;r<i;++r)o[r].s>w&&(w=o[r].s);var _=new Gf(w+1),E=pD(n[d-1],_,0);if(E>e){var r=0,M=0,D=E-e,A=1<<D;for(o.sort(function(G,W){return _[W.s]-_[G.s]||G.f-W.f});r<i;++r){var F=o[r].s;if(_[F]>e)M+=A-(1<<E-_[F]),_[F]=e;else break}for(M>>=D;M>0;){var O=o[r].s;_[O]<e?M-=1<<e-_[O]++-1:++r}for(;r>=0&&M;--r){var N=o[r].s;_[N]==e&&(--_[N],++M)}E=e}return{t:new yh(_),l:E}},pD=function(t,e,n){return t.s==-1?Math.max(pD(t.l,e,n+1),pD(t.r,e,n+1)):e[t.s]=n},$6=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Gf(++e),r=0,i=t[0],o=1,s=function(c){n[r++]=c},a=1;a<=e;++a)if(t[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Zb=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},kH=function(t,e,n){var r=n.length,i=xk(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var o=0;o<r;++o)t[i+o+4]=n[o];return(i+4+r)*8},W6=function(t,e,n,r,i,o,s,a,c,h,d){Xg(e,d++,n),++i[256];for(var v=h5(i,15),w=v.t,_=v.l,E=h5(o,15),M=E.t,D=E.l,A=$6(w),F=A.c,O=A.n,N=$6(M),H=N.c,G=N.n,W=new Gf(19),X=0;X<F.length;++X)++W[F[X]&31];for(var X=0;X<H.length;++X)++W[H[X]&31];for(var K=h5(W,7),k=K.t,$=K.l,Q=19;Q>4&&!k[hD[Q-1]];--Q);var ie=h+5<<3,ae=Zb(i,Av)+Zb(o,mw)+s,ce=Zb(i,w)+Zb(o,M)+s+14+3*Q+Zb(W,k)+2*W[16]+3*W[17]+7*W[18];if(c>=0&&ie<=ae&&ie<=ce)return kH(e,d,t.subarray(c,c+h));var se,Se,ye,Te;if(Xg(e,d,1+(ce<ae)),d+=2,ce<ae){se=sg(w,_,0),Se=w,ye=sg(M,D,0),Te=M;var pe=sg(k,$,0);Xg(e,d,O-257),Xg(e,d+5,G-1),Xg(e,d+10,Q-4),d+=14;for(var X=0;X<Q;++X)Xg(e,d+3*X,k[hD[X]]);d+=3*Q;for(var Ie=[F,H],me=0;me<2;++me)for(var xe=Ie[me],X=0;X<xe.length;++X){var ve=xe[X]&31;Xg(e,d,pe[ve]),d+=k[ve],ve>15&&(Xg(e,d,xe[X]>>5&127),d+=xe[X]>>12)}}else se=_he,Se=Av,ye=bhe,Te=mw;for(var X=0;X<a;++X){var Ee=r[X];if(Ee>255){var ve=Ee>>18&31;Yb(e,d,se[ve+257]),d+=Se[ve+257],ve>7&&(Xg(e,d,Ee>>23&31),d+=LM[ve]);var De=Ee&31;Yb(e,d,ye[De]),d+=Te[De],De>3&&(Yb(e,d,Ee>>5&8191),d+=NM[De])}else Yb(e,d,se[Ee]),d+=Se[Ee]}return Yb(e,d,se[256]),d+Se[256]},The=new _k([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),OH=new yh(0),Che=function(t,e,n,r,i,o){var s=o.z||t.length,a=new yh(r+s+5*(1+Math.ceil(s/7e3))+i),c=a.subarray(r,a.length-i),h=o.l,d=(o.r||0)&7;if(e){d&&(c[0]=o.r>>3);for(var v=The[e-1],w=v>>13,_=v&8191,E=(1<<n)-1,M=o.p||new Gf(32768),D=o.h||new Gf(E+1),A=Math.ceil(n/3),F=2*A,O=function(Ve){return(t[Ve]^t[Ve+1]<<A^t[Ve+2]<<F)&E},N=new _k(25e3),H=new Gf(288),G=new Gf(32),W=0,X=0,K=o.i||0,k=0,$=o.w||0,Q=0;K+2<s;++K){var ie=O(K),ae=K&32767,ce=D[ie];if(M[ae]=ce,D[ie]=ae,$<=K){var se=s-K;if((W>7e3||k>24576)&&(se>423||!h)){d=W6(t,c,0,N,H,G,X,k,Q,K-Q,d),k=W=X=0,Q=K;for(var Se=0;Se<286;++Se)H[Se]=0;for(var Se=0;Se<30;++Se)G[Se]=0}var ye=2,Te=0,pe=_,Ie=ae-ce&32767;if(se>2&&ie==O(K-Ie))for(var me=Math.min(w,se)-1,xe=Math.min(32767,K),ve=Math.min(258,se);Ie<=xe&&--pe&&ae!=ce;){if(t[K+ye]==t[K+ye-Ie]){for(var Ee=0;Ee<ve&&t[K+Ee]==t[K+Ee-Ie];++Ee);if(Ee>ye){if(ye=Ee,Te=Ie,Ee>me)break;for(var De=Math.min(Ie,Ee-2),We=0,Se=0;Se<De;++Se){var Ae=K-Ie+Se&32767,ut=M[Ae],pt=Ae-ut&32767;pt>We&&(We=pt,ce=Ae)}}}ae=ce,ce=M[ae],Ie+=ae-ce&32767}if(Te){N[k++]=268435456|fD[ye]<<18|q6[Te];var st=fD[ye]&31,Ce=q6[Te]&31;X+=LM[st]+NM[Ce],++H[257+st],++G[Ce],$=K+ye,++W}else N[k++]=t[K],++H[t[K]]}}for(K=Math.max(K,$);K<s;++K)N[k++]=t[K],++H[t[K]];d=W6(t,c,h,N,H,G,X,k,Q,K-Q,d),h||(o.r=d&7|c[d/8|0]<<3,d-=7,o.h=D,o.p=M,o.i=K,o.w=$)}else{for(var K=o.w||0;K<s+h;K+=65535){var It=K+65535;It>=s&&(c[d/8|0]=h,It=s),d=kH(c,d+1,t.subarray(K,It))}o.i=s}return NH(a,0,r+xk(d)+i)},FH=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=n[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Mhe=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new yh(o.length+t.length);s.set(o),s.set(t,o.length),t=s,i.w=o.length}return Che(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},BH=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Ahe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=FH();i.p(e.dictionary),BH(t,2,i.d())}},Rhe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&up(6,"invalid zlib data"),(t[1]>>5&1)==1&&up(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function gD(t,e){e||(e={});var n=FH();n.p(t);var r=Mhe(t,e,e.dictionary?6:2,4);return Ahe(r,e),BH(r,r.length-4,n.d()),r}function Phe(t,e){return Ehe(t.subarray(Rhe(t),-4),{i:2},e,e)}var Ihe=typeof TextDecoder<"u"&&new TextDecoder,Dhe=0;try{Ihe.decode(OH,{stream:!0}),Dhe=1}catch{}var wa=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function f5(){wa.console&&typeof wa.console.log=="function"&&wa.console.log.apply(wa.console,arguments)}var $s={log:f5,warn:function(t){wa.console&&(typeof wa.console.warn=="function"?wa.console.warn.apply(wa.console,arguments):f5.call(null,arguments))},error:function(t){wa.console&&(typeof wa.console.error=="function"?wa.console.error.apply(wa.console,arguments):f5(t))}};function d5(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){R0(r.response,e,n)},r.onerror=function(){$s.error("could not download file")},r.send()}function X6(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function hE(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var V2,mD,R0=wa.saveAs||((typeof window>"u"?"undefined":bs(window))!=="object"||window!==wa?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=wa.URL||wa.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?X6(i.href)?d5(t,e,n):hE(i,i.target="_blank"):hE(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){hE(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(X6(t))d5(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){hE(r)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:bs(o)!=="object"&&($s.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return d5(t,e,n);var i=t.type==="application/octet-stream",o=/constructor/i.test(wa.HTMLElement)||wa.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":bs(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(t)}else{var c=wa.URL||wa.webkitURL,h=c.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function zH(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,s=i.exec(t);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),h=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),"#"+a+c+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function p5(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n=ch(n,r,i,o,e[0],7,-680876936),o=ch(o,n,r,i,e[1],12,-389564586),i=ch(i,o,n,r,e[2],17,606105819),r=ch(r,i,o,n,e[3],22,-1044525330),n=ch(n,r,i,o,e[4],7,-176418897),o=ch(o,n,r,i,e[5],12,1200080426),i=ch(i,o,n,r,e[6],17,-1473231341),r=ch(r,i,o,n,e[7],22,-45705983),n=ch(n,r,i,o,e[8],7,1770035416),o=ch(o,n,r,i,e[9],12,-1958414417),i=ch(i,o,n,r,e[10],17,-42063),r=ch(r,i,o,n,e[11],22,-1990404162),n=ch(n,r,i,o,e[12],7,1804603682),o=ch(o,n,r,i,e[13],12,-40341101),i=ch(i,o,n,r,e[14],17,-1502002290),n=hh(n,r=ch(r,i,o,n,e[15],22,1236535329),i,o,e[1],5,-165796510),o=hh(o,n,r,i,e[6],9,-1069501632),i=hh(i,o,n,r,e[11],14,643717713),r=hh(r,i,o,n,e[0],20,-373897302),n=hh(n,r,i,o,e[5],5,-701558691),o=hh(o,n,r,i,e[10],9,38016083),i=hh(i,o,n,r,e[15],14,-660478335),r=hh(r,i,o,n,e[4],20,-405537848),n=hh(n,r,i,o,e[9],5,568446438),o=hh(o,n,r,i,e[14],9,-1019803690),i=hh(i,o,n,r,e[3],14,-187363961),r=hh(r,i,o,n,e[8],20,1163531501),n=hh(n,r,i,o,e[13],5,-1444681467),o=hh(o,n,r,i,e[2],9,-51403784),i=hh(i,o,n,r,e[7],14,1735328473),n=fh(n,r=hh(r,i,o,n,e[12],20,-1926607734),i,o,e[5],4,-378558),o=fh(o,n,r,i,e[8],11,-2022574463),i=fh(i,o,n,r,e[11],16,1839030562),r=fh(r,i,o,n,e[14],23,-35309556),n=fh(n,r,i,o,e[1],4,-1530992060),o=fh(o,n,r,i,e[4],11,1272893353),i=fh(i,o,n,r,e[7],16,-155497632),r=fh(r,i,o,n,e[10],23,-1094730640),n=fh(n,r,i,o,e[13],4,681279174),o=fh(o,n,r,i,e[0],11,-358537222),i=fh(i,o,n,r,e[3],16,-722521979),r=fh(r,i,o,n,e[6],23,76029189),n=fh(n,r,i,o,e[9],4,-640364487),o=fh(o,n,r,i,e[12],11,-421815835),i=fh(i,o,n,r,e[15],16,530742520),n=dh(n,r=fh(r,i,o,n,e[2],23,-995338651),i,o,e[0],6,-198630844),o=dh(o,n,r,i,e[7],10,1126891415),i=dh(i,o,n,r,e[14],15,-1416354905),r=dh(r,i,o,n,e[5],21,-57434055),n=dh(n,r,i,o,e[12],6,1700485571),o=dh(o,n,r,i,e[3],10,-1894986606),i=dh(i,o,n,r,e[10],15,-1051523),r=dh(r,i,o,n,e[1],21,-2054922799),n=dh(n,r,i,o,e[8],6,1873313359),o=dh(o,n,r,i,e[15],10,-30611744),i=dh(i,o,n,r,e[6],15,-1560198380),r=dh(r,i,o,n,e[13],21,1309151649),n=dh(n,r,i,o,e[4],6,-145523070),o=dh(o,n,r,i,e[11],10,-1120210379),i=dh(i,o,n,r,e[2],15,718787259),r=dh(r,i,o,n,e[9],21,-343485551),t[0]=pv(n,t[0]),t[1]=pv(r,t[1]),t[2]=pv(i,t[2]),t[3]=pv(o,t[3])}function kM(t,e,n,r,i,o){return e=pv(pv(e,t),pv(r,o)),pv(e<<i|e>>>32-i,n)}function ch(t,e,n,r,i,o,s){return kM(e&n|~e&r,t,e,i,o,s)}function hh(t,e,n,r,i,o,s){return kM(e&r|n&~r,t,e,i,o,s)}function fh(t,e,n,r,i,o,s){return kM(e^n^r,t,e,i,o,s)}function dh(t,e,n,r,i,o,s){return kM(n^(e|~r),t,e,i,o,s)}function UH(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)p5(r,Lhe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(p5(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,p5(r,i),r}function Lhe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}V2=wa.atob.bind(wa),mD=wa.btoa.bind(wa);var Y6="0123456789abcdef".split("");function Nhe(t){for(var e="",n=0;n<4;n++)e+=Y6[t>>8*n+4&15]+Y6[t>>8*n&15];return e}function khe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function vD(t){return UH(t).map(khe).join("")}var Ohe=function(t){for(var e=0;e<t.length;e++)t[e]=Nhe(t[e]);return t.join("")}(UH("hello"))!="5d41402abc4b2a76b9719d911017c592";function pv(t,e){if(Ohe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function yD(t,e){var n,r,i,o;if(t!==n){for(var s=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var h=0;for(c=0;c<256;c++){var d=a[c];h=(h+d+s.charCodeAt(c))%256,a[c]=a[h],a[h]=d}n=t,r=a}else a=r;var v=e.length,w=0,_=0,E="";for(c=0;c<v;c++)_=(_+(d=a[w=(w+1)%256]))%256,a[w]=a[_],a[_]=d,s=a[(a[w]+a[_])%256],E+=String.fromCharCode(e.charCodeAt(c)^s);return E}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Z6={print:4,modify:8,copy:16,"annot-forms":32};function s1(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(Z6.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Z6[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=vD(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=yD(this.encryptionKey,this.padding)}function l1(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function K6(t){if(bs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[r,!!i],o},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[n]){var s=e[n][o];try{s[0].apply(t,r)}catch(a){wa.console&&$s.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function hC(t){if(!(this instanceof hC))return new hC(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function jH(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function L0(t,e,n,r,i){if(!(this instanceof L0))return new L0(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,jH.call(this,r,i)}function R1(t,e,n,r,i){if(!(this instanceof R1))return new R1(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,jH.call(this,r,i)}function ba(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,c=16,h="S",d=null;bs(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,o=t.compress||t.compressPdf||o,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),h=t.defaultPathOperation||"S"),s=t.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var v=t.putOnlyUsedFonts||!1,w={},_={internal:{},__private__:{}};_.__private__.PubSub=K6;var E="1.3",M=_.__private__.getPdfVersion=function(){return E};_.__private__.setPdfVersion=function(fe){E=fe};var D={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return D};var A=_.__private__.getPageFormat=function(fe){return D[fe]};i=i||"a4";var F={COMPAT:"compat",ADVANCED:"advanced"},O=F.COMPAT;function N(){this.saveGraphicsState(),Ze(new jt(Et,0,0,-Et,0,Xo()*Et).toString()+" cm"),this.setFontSize(this.getFontSize()/Et),h="n",O=F.ADVANCED}function H(){this.restoreGraphicsState(),h="S",O=F.COMPAT}var G=_.__private__.combineFontStyleAndFontWeight=function(fe,nt){if(fe=="bold"&&nt=="normal"||fe=="bold"&&nt==400||fe=="normal"&&nt=="italic"||fe=="bold"&&nt=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return nt&&(fe=nt==400||nt==="normal"?fe==="italic"?"italic":"normal":nt!=700&&nt!=="bold"||fe!=="normal"?(nt==700?"bold":nt)+""+fe:"bold"),fe};_.advancedAPI=function(fe){var nt=O===F.COMPAT;return nt&&N.call(this),typeof fe!="function"||(fe(this),nt&&H.call(this)),this},_.compatAPI=function(fe){var nt=O===F.ADVANCED;return nt&&H.call(this),typeof fe!="function"||(fe(this),nt&&N.call(this)),this},_.isAdvancedAPI=function(){return O===F.ADVANCED};var W,X=function(fe){if(O!==F.ADVANCED)throw new Error(fe+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},K=_.roundToPrecision=_.__private__.roundToPrecision=function(fe,nt){var Wt=e||nt;if(isNaN(fe)||isNaN(Wt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return fe.toFixed(Wt).replace(/0+$/,"")};W=_.hpf=_.__private__.hpf=typeof c=="number"?function(fe){if(isNaN(fe))throw new Error("Invalid argument passed to jsPDF.hpf");return K(fe,c)}:c==="smart"?function(fe){if(isNaN(fe))throw new Error("Invalid argument passed to jsPDF.hpf");return K(fe,fe>-1&&fe<1?16:5)}:function(fe){if(isNaN(fe))throw new Error("Invalid argument passed to jsPDF.hpf");return K(fe,16)};var k=_.f2=_.__private__.f2=function(fe){if(isNaN(fe))throw new Error("Invalid argument passed to jsPDF.f2");return K(fe,2)},$=_.__private__.f3=function(fe){if(isNaN(fe))throw new Error("Invalid argument passed to jsPDF.f3");return K(fe,3)},Q=_.scale=_.__private__.scale=function(fe){if(isNaN(fe))throw new Error("Invalid argument passed to jsPDF.scale");return O===F.COMPAT?fe*Et:O===F.ADVANCED?fe:void 0},ie=function(fe){return O===F.COMPAT?Xo()-fe:O===F.ADVANCED?fe:void 0},ae=function(fe){return Q(ie(fe))};_.__private__.setPrecision=_.setPrecision=function(fe){typeof parseInt(fe,10)=="number"&&(e=parseInt(fe,10))};var ce,se="00000000000000000000000000000000",Se=_.__private__.getFileId=function(){return se},ye=_.__private__.setFileId=function(fe){return se=fe!==void 0&&/^[a-fA-F0-9]{32}$/.test(fe)?fe.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Wr=new s1(d.userPermissions,d.userPassword,d.ownerPassword,se)),se};_.setFileId=function(fe){return ye(fe),this},_.getFileId=function(){return Se()};var Te=_.__private__.convertDateToPDFDate=function(fe){var nt=fe.getTimezoneOffset(),Wt=nt<0?"+":"-",un=Math.floor(Math.abs(nt/60)),kn=Math.abs(nt%60),Kn=[Wt,ve(un),"'",ve(kn),"'"].join("");return["D:",fe.getFullYear(),ve(fe.getMonth()+1),ve(fe.getDate()),ve(fe.getHours()),ve(fe.getMinutes()),ve(fe.getSeconds()),Kn].join("")},pe=_.__private__.convertPDFDateToDate=function(fe){var nt=parseInt(fe.substr(2,4),10),Wt=parseInt(fe.substr(6,2),10)-1,un=parseInt(fe.substr(8,2),10),kn=parseInt(fe.substr(10,2),10),Kn=parseInt(fe.substr(12,2),10),Pr=parseInt(fe.substr(14,2),10);return new Date(nt,Wt,un,kn,Kn,Pr,0)},Ie=_.__private__.setCreationDate=function(fe){var nt;if(fe===void 0&&(fe=new Date),fe instanceof Date)nt=Te(fe);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(fe))throw new Error("Invalid argument passed to jsPDF.setCreationDate");nt=fe}return ce=nt},me=_.__private__.getCreationDate=function(fe){var nt=ce;return fe==="jsDate"&&(nt=pe(ce)),nt};_.setCreationDate=function(fe){return Ie(fe),this},_.getCreationDate=function(fe){return me(fe)};var xe,ve=_.__private__.padd2=function(fe){return("0"+parseInt(fe)).slice(-2)},Ee=_.__private__.padd2Hex=function(fe){return("00"+(fe=fe.toString())).substr(fe.length)},De=0,We=[],Ae=[],ut=0,pt=[],st=[],Ce=!1,It=Ae,Ve=function(){De=0,ut=0,Ae=[],We=[],pt=[],kr=en(),Qr=en()};_.__private__.setCustomOutputDestination=function(fe){Ce=!0,It=fe};var yt=function(fe){Ce||(It=fe)};_.__private__.resetCustomOutputDestination=function(){Ce=!1,It=Ae};var Ze=_.__private__.out=function(fe){return fe=fe.toString(),ut+=fe.length+1,It.push(fe),It},wt=_.__private__.write=function(fe){return Ze(arguments.length===1?fe.toString():Array.prototype.join.call(arguments," "))},Ut=_.__private__.getArrayBuffer=function(fe){for(var nt=fe.length,Wt=new ArrayBuffer(nt),un=new Uint8Array(Wt);nt--;)un[nt]=fe.charCodeAt(nt);return Wt},ht=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return ht};var qt=t.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(fe){return qt=O===F.ADVANCED?fe/Et:fe,this};var Ye,Re=_.__private__.getFontSize=_.getFontSize=function(){return O===F.COMPAT?qt:qt*Et},Pt=t.R2L||!1;_.__private__.setR2L=_.setR2L=function(fe){return Pt=fe,this},_.__private__.getR2L=_.getR2L=function(){return Pt};var Dt,At=_.__private__.setZoomMode=function(fe){var nt=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(fe))Ye=fe;else if(isNaN(fe)){if(nt.indexOf(fe)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+fe+'" is not recognized.');Ye=fe}else Ye=parseInt(fe,10)};_.__private__.getZoomMode=function(){return Ye};var Bt,gn=_.__private__.setPageMode=function(fe){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(fe)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+fe+'" is not recognized.');Dt=fe};_.__private__.getPageMode=function(){return Dt};var Zt=_.__private__.setLayoutMode=function(fe){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(fe)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+fe+'" is not recognized.');Bt=fe};_.__private__.getLayoutMode=function(){return Bt},_.__private__.setDisplayMode=_.setDisplayMode=function(fe,nt,Wt){return At(fe),Zt(nt),gn(Wt),this};var cn={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(fe){if(Object.keys(cn).indexOf(fe)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return cn[fe]},_.__private__.getDocumentProperties=function(){return cn},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(fe){for(var nt in cn)cn.hasOwnProperty(nt)&&fe[nt]&&(cn[nt]=fe[nt]);return this},_.__private__.setDocumentProperty=function(fe,nt){if(Object.keys(cn).indexOf(fe)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return cn[fe]=nt};var $t,Et,qn,Dn,sr,rt={},ze={},Xe=[],Fe={},He={},mt={},it={},xt=null,Tt=0,kt=[],Jt=new K6(_),rn=t.hotfixes||[],Yt={},Qn={},An=[],jt=function fe(nt,Wt,un,kn,Kn,Pr){if(!(this instanceof fe))return new fe(nt,Wt,un,kn,Kn,Pr);isNaN(nt)&&(nt=1),isNaN(Wt)&&(Wt=0),isNaN(un)&&(un=0),isNaN(kn)&&(kn=1),isNaN(Kn)&&(Kn=0),isNaN(Pr)&&(Pr=0),this._matrix=[nt,Wt,un,kn,Kn,Pr]};Object.defineProperty(jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(fe){this._matrix[0]=fe}}),Object.defineProperty(jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(fe){this._matrix[1]=fe}}),Object.defineProperty(jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(fe){this._matrix[2]=fe}}),Object.defineProperty(jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(fe){this._matrix[3]=fe}}),Object.defineProperty(jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(fe){this._matrix[4]=fe}}),Object.defineProperty(jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(fe){this._matrix[5]=fe}}),Object.defineProperty(jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(fe){this._matrix[0]=fe}}),Object.defineProperty(jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(fe){this._matrix[1]=fe}}),Object.defineProperty(jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(fe){this._matrix[2]=fe}}),Object.defineProperty(jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(fe){this._matrix[3]=fe}}),Object.defineProperty(jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(fe){this._matrix[4]=fe}}),Object.defineProperty(jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(fe){this._matrix[5]=fe}}),Object.defineProperty(jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),jt.prototype.join=function(fe){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(W).join(fe)},jt.prototype.multiply=function(fe){var nt=fe.sx*this.sx+fe.shy*this.shx,Wt=fe.sx*this.shy+fe.shy*this.sy,un=fe.shx*this.sx+fe.sy*this.shx,kn=fe.shx*this.shy+fe.sy*this.sy,Kn=fe.tx*this.sx+fe.ty*this.shx+this.tx,Pr=fe.tx*this.shy+fe.ty*this.sy+this.ty;return new jt(nt,Wt,un,kn,Kn,Pr)},jt.prototype.decompose=function(){var fe=this.sx,nt=this.shy,Wt=this.shx,un=this.sy,kn=this.tx,Kn=this.ty,Pr=Math.sqrt(fe*fe+nt*nt),oi=(fe/=Pr)*Wt+(nt/=Pr)*un;Wt-=fe*oi,un-=nt*oi;var Ci=Math.sqrt(Wt*Wt+un*un);return oi/=Ci,fe*(un/=Ci)<nt*(Wt/=Ci)&&(fe=-fe,nt=-nt,oi=-oi,Pr=-Pr),{scale:new jt(Pr,0,0,Ci,0,0),translate:new jt(1,0,0,1,kn,Kn),rotate:new jt(fe,nt,-nt,fe,0,0),skew:new jt(1,0,oi,1,0,0)}},jt.prototype.toString=function(fe){return this.join(" ")},jt.prototype.inversed=function(){var fe=this.sx,nt=this.shy,Wt=this.shx,un=this.sy,kn=this.tx,Kn=this.ty,Pr=1/(fe*un-nt*Wt),oi=un*Pr,Ci=-nt*Pr,Zi=-Wt*Pr,Oi=fe*Pr;return new jt(oi,Ci,Zi,Oi,-oi*kn-Zi*Kn,-Ci*kn-Oi*Kn)},jt.prototype.applyToPoint=function(fe){var nt=fe.x*this.sx+fe.y*this.shx+this.tx,Wt=fe.x*this.shy+fe.y*this.sy+this.ty;return new Tu(nt,Wt)},jt.prototype.applyToRectangle=function(fe){var nt=this.applyToPoint(fe),Wt=this.applyToPoint(new Tu(fe.x+fe.w,fe.y+fe.h));return new Xs(nt.x,nt.y,Wt.x-nt.x,Wt.y-nt.y)},jt.prototype.clone=function(){var fe=this.sx,nt=this.shy,Wt=this.shx,un=this.sy,kn=this.tx,Kn=this.ty;return new jt(fe,nt,Wt,un,kn,Kn)},_.Matrix=jt;var Pe=_.matrixMult=function(fe,nt){return nt.multiply(fe)},je=new jt(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=je;var _t=function(fe,nt){if(!He[fe]){var Wt=(nt instanceof L0?"Sh":"P")+(Object.keys(Fe).length+1).toString(10);nt.id=Wt,He[fe]=Wt,Fe[Wt]=nt,Jt.publish("addPattern",nt)}};_.ShadingPattern=L0,_.TilingPattern=R1,_.addShadingPattern=function(fe,nt){return X("addShadingPattern()"),_t(fe,nt),this},_.beginTilingPattern=function(fe){X("beginTilingPattern()"),Es(fe.boundingBox[0],fe.boundingBox[1],fe.boundingBox[2]-fe.boundingBox[0],fe.boundingBox[3]-fe.boundingBox[1],fe.matrix)},_.endTilingPattern=function(fe,nt){X("endTilingPattern()"),nt.stream=st[xe].join(`
`),_t(fe,nt),Jt.publish("endTilingPattern",nt),An.pop().restore()};var Qt=_.__private__.newObject=function(){var fe=en();return Fn(fe,!0),fe},en=_.__private__.newObjectDeferred=function(){return De++,We[De]=function(){return ut},De},Fn=function(fe,nt){return nt=typeof nt=="boolean"&&nt,We[fe]=ut,nt&&Ze(fe+" 0 obj"),fe},Wn=_.__private__.newAdditionalObject=function(){var fe={objId:en(),content:""};return pt.push(fe),fe},kr=en(),Qr=en(),vi=_.__private__.decodeColorString=function(fe){var nt=fe.split(" ");if(nt.length!==2||nt[1]!=="g"&&nt[1]!=="G")nt.length===5&&(nt[4]==="k"||nt[4]==="K")&&(nt=[(1-nt[0])*(1-nt[3]),(1-nt[1])*(1-nt[3]),(1-nt[2])*(1-nt[3]),"r"]);else{var Wt=parseFloat(nt[0]);nt=[Wt,Wt,Wt,"r"]}for(var un="#",kn=0;kn<3;kn++)un+=("0"+Math.floor(255*parseFloat(nt[kn])).toString(16)).slice(-2);return un},zr=_.__private__.encodeColorString=function(fe){var nt;typeof fe=="string"&&(fe={ch1:fe});var Wt=fe.ch1,un=fe.ch2,kn=fe.ch3,Kn=fe.ch4,Pr=fe.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Wt=="string"&&Wt.charAt(0)!=="#"){var oi=new zH(Wt);if(oi.ok)Wt=oi.toHex();else if(!/^\d*\.?\d*$/.test(Wt))throw new Error('Invalid color "'+Wt+'" passed to jsPDF.encodeColorString.')}if(typeof Wt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Wt)&&(Wt="#"+Wt[1]+Wt[1]+Wt[2]+Wt[2]+Wt[3]+Wt[3]),typeof Wt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Wt)){var Ci=parseInt(Wt.substr(1),16);Wt=Ci>>16&255,un=Ci>>8&255,kn=255&Ci}if(un===void 0||Kn===void 0&&Wt===un&&un===kn)if(typeof Wt=="string")nt=Wt+" "+Pr[0];else switch(fe.precision){case 2:nt=k(Wt/255)+" "+Pr[0];break;case 3:default:nt=$(Wt/255)+" "+Pr[0]}else if(Kn===void 0||bs(Kn)==="object"){if(Kn&&!isNaN(Kn.a)&&Kn.a===0)return nt=["1.","1.","1.",Pr[1]].join(" ");if(typeof Wt=="string")nt=[Wt,un,kn,Pr[1]].join(" ");else switch(fe.precision){case 2:nt=[k(Wt/255),k(un/255),k(kn/255),Pr[1]].join(" ");break;default:case 3:nt=[$(Wt/255),$(un/255),$(kn/255),Pr[1]].join(" ")}}else if(typeof Wt=="string")nt=[Wt,un,kn,Kn,Pr[2]].join(" ");else switch(fe.precision){case 2:nt=[k(Wt),k(un),k(kn),k(Kn),Pr[2]].join(" ");break;case 3:default:nt=[$(Wt),$(un),$(kn),$(Kn),Pr[2]].join(" ")}return nt},zn=_.__private__.getFilters=function(){return s},En=_.__private__.putStream=function(fe){var nt=(fe=fe||{}).data||"",Wt=fe.filters||zn(),un=fe.alreadyAppliedFilters||[],kn=fe.addLength1||!1,Kn=nt.length,Pr=fe.objectId,oi=function(zo){return zo};if(d!==null&&Pr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(oi=Wr.encryptor(Pr,0));var Ci={};Wt===!0&&(Wt=["FlateEncode"]);var Zi=fe.additionalKeyValues||[],Oi=(Ci=ba.API.processDataByFilters!==void 0?ba.API.processDataByFilters(nt,Wt):{data:nt,reverseChain:[]}).reverseChain+(Array.isArray(un)?un.join(" "):un.toString());if(Ci.data.length!==0&&(Zi.push({key:"Length",value:Ci.data.length}),kn===!0&&Zi.push({key:"Length1",value:Kn})),Oi.length!=0)if(Oi.split("/").length-1==1)Zi.push({key:"Filter",value:Oi});else{Zi.push({key:"Filter",value:"["+Oi+"]"});for(var qi=0;qi<Zi.length;qi+=1)if(Zi[qi].key==="DecodeParms"){for(var za=[],ro=0;ro<Ci.reverseChain.split("/").length-1;ro+=1)za.push("null");za.push(Zi[qi].value),Zi[qi].value="["+za.join(" ")+"]"}}Ze("<<");for(var Ja=0;Ja<Zi.length;Ja++)Ze("/"+Zi[Ja].key+" "+Zi[Ja].value);Ze(">>"),Ci.data.length!==0&&(Ze("stream"),Ze(oi(Ci.data)),Ze("endstream"))},mr=_.__private__.putPage=function(fe){var nt=fe.number,Wt=fe.data,un=fe.objId,kn=fe.contentsObjId;Fn(un,!0),Ze("<</Type /Page"),Ze("/Parent "+fe.rootDictionaryObjId+" 0 R"),Ze("/Resources "+fe.resourceDictionaryObjId+" 0 R"),Ze("/MediaBox ["+parseFloat(W(fe.mediaBox.bottomLeftX))+" "+parseFloat(W(fe.mediaBox.bottomLeftY))+" "+W(fe.mediaBox.topRightX)+" "+W(fe.mediaBox.topRightY)+"]"),fe.cropBox!==null&&Ze("/CropBox ["+W(fe.cropBox.bottomLeftX)+" "+W(fe.cropBox.bottomLeftY)+" "+W(fe.cropBox.topRightX)+" "+W(fe.cropBox.topRightY)+"]"),fe.bleedBox!==null&&Ze("/BleedBox ["+W(fe.bleedBox.bottomLeftX)+" "+W(fe.bleedBox.bottomLeftY)+" "+W(fe.bleedBox.topRightX)+" "+W(fe.bleedBox.topRightY)+"]"),fe.trimBox!==null&&Ze("/TrimBox ["+W(fe.trimBox.bottomLeftX)+" "+W(fe.trimBox.bottomLeftY)+" "+W(fe.trimBox.topRightX)+" "+W(fe.trimBox.topRightY)+"]"),fe.artBox!==null&&Ze("/ArtBox ["+W(fe.artBox.bottomLeftX)+" "+W(fe.artBox.bottomLeftY)+" "+W(fe.artBox.topRightX)+" "+W(fe.artBox.topRightY)+"]"),typeof fe.userUnit=="number"&&fe.userUnit!==1&&Ze("/UserUnit "+fe.userUnit),Jt.publish("putPage",{objId:un,pageContext:kt[nt],pageNumber:nt,page:Wt}),Ze("/Contents "+kn+" 0 R"),Ze(">>"),Ze("endobj");var Kn=Wt.join(`
`);return O===F.ADVANCED&&(Kn+=`
Q`),Fn(kn,!0),En({data:Kn,filters:zn(),objectId:kn}),Ze("endobj"),un},yi=_.__private__.putPages=function(){var fe,nt,Wt=[];for(fe=1;fe<=Tt;fe++)kt[fe].objId=en(),kt[fe].contentsObjId=en();for(fe=1;fe<=Tt;fe++)Wt.push(mr({number:fe,data:st[fe],objId:kt[fe].objId,contentsObjId:kt[fe].contentsObjId,mediaBox:kt[fe].mediaBox,cropBox:kt[fe].cropBox,bleedBox:kt[fe].bleedBox,trimBox:kt[fe].trimBox,artBox:kt[fe].artBox,userUnit:kt[fe].userUnit,rootDictionaryObjId:kr,resourceDictionaryObjId:Qr}));Fn(kr,!0),Ze("<</Type /Pages");var un="/Kids [";for(nt=0;nt<Tt;nt++)un+=Wt[nt]+" 0 R ";Ze(un+"]"),Ze("/Count "+Tt),Ze(">>"),Ze("endobj"),Jt.publish("postPutPages")},_i=function(fe){Jt.publish("putFont",{font:fe,out:Ze,newObject:Qt,putStream:En}),fe.isAlreadyPutted!==!0&&(fe.objectNumber=Qt(),Ze("<<"),Ze("/Type /Font"),Ze("/BaseFont /"+l1(fe.postScriptName)),Ze("/Subtype /Type1"),typeof fe.encoding=="string"&&Ze("/Encoding /"+fe.encoding),Ze("/FirstChar 32"),Ze("/LastChar 255"),Ze(">>"),Ze("endobj"))},gi=function(){for(var fe in rt)rt.hasOwnProperty(fe)&&(v===!1||v===!0&&w.hasOwnProperty(fe))&&_i(rt[fe])},lt=function(fe){fe.objectNumber=Qt();var nt=[];nt.push({key:"Type",value:"/XObject"}),nt.push({key:"Subtype",value:"/Form"}),nt.push({key:"BBox",value:"["+[W(fe.x),W(fe.y),W(fe.x+fe.width),W(fe.y+fe.height)].join(" ")+"]"}),nt.push({key:"Matrix",value:"["+fe.matrix.toString()+"]"});var Wt=fe.pages[1].join(`
`);En({data:Wt,additionalKeyValues:nt,objectId:fe.objectNumber}),Ze("endobj")},yn=function(){for(var fe in Yt)Yt.hasOwnProperty(fe)&&lt(Yt[fe])},Ln=function(fe,nt){var Wt,un=[],kn=1/(nt-1);for(Wt=0;Wt<1;Wt+=kn)un.push(Wt);if(un.push(1),fe[0].offset!=0){var Kn={offset:0,color:fe[0].color};fe.unshift(Kn)}if(fe[fe.length-1].offset!=1){var Pr={offset:1,color:fe[fe.length-1].color};fe.push(Pr)}for(var oi="",Ci=0,Zi=0;Zi<un.length;Zi++){for(Wt=un[Zi];Wt>fe[Ci+1].offset;)Ci++;var Oi=fe[Ci].offset,qi=(Wt-Oi)/(fe[Ci+1].offset-Oi),za=fe[Ci].color,ro=fe[Ci+1].color;oi+=Ee(Math.round((1-qi)*za[0]+qi*ro[0]).toString(16))+Ee(Math.round((1-qi)*za[1]+qi*ro[1]).toString(16))+Ee(Math.round((1-qi)*za[2]+qi*ro[2]).toString(16))}return oi.trim()},Vn=function(fe,nt){nt||(nt=21);var Wt=Qt(),un=Ln(fe.colors,nt),kn=[];kn.push({key:"FunctionType",value:"0"}),kn.push({key:"Domain",value:"[0.0 1.0]"}),kn.push({key:"Size",value:"["+nt+"]"}),kn.push({key:"BitsPerSample",value:"8"}),kn.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),kn.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),En({data:un,additionalKeyValues:kn,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Wt}),Ze("endobj"),fe.objectNumber=Qt(),Ze("<< /ShadingType "+fe.type),Ze("/ColorSpace /DeviceRGB");var Kn="/Coords ["+W(parseFloat(fe.coords[0]))+" "+W(parseFloat(fe.coords[1]))+" ";fe.type===2?Kn+=W(parseFloat(fe.coords[2]))+" "+W(parseFloat(fe.coords[3])):Kn+=W(parseFloat(fe.coords[2]))+" "+W(parseFloat(fe.coords[3]))+" "+W(parseFloat(fe.coords[4]))+" "+W(parseFloat(fe.coords[5])),Ze(Kn+="]"),fe.matrix&&Ze("/Matrix ["+fe.matrix.toString()+"]"),Ze("/Function "+Wt+" 0 R"),Ze("/Extend [true true]"),Ze(">>"),Ze("endobj")},bn=function(fe,nt){var Wt=en(),un=Qt();nt.push({resourcesOid:Wt,objectOid:un}),fe.objectNumber=un;var kn=[];kn.push({key:"Type",value:"/Pattern"}),kn.push({key:"PatternType",value:"1"}),kn.push({key:"PaintType",value:"1"}),kn.push({key:"TilingType",value:"1"}),kn.push({key:"BBox",value:"["+fe.boundingBox.map(W).join(" ")+"]"}),kn.push({key:"XStep",value:W(fe.xStep)}),kn.push({key:"YStep",value:W(fe.yStep)}),kn.push({key:"Resources",value:Wt+" 0 R"}),fe.matrix&&kn.push({key:"Matrix",value:"["+fe.matrix.toString()+"]"}),En({data:fe.stream,additionalKeyValues:kn,objectId:fe.objectNumber}),Ze("endobj")},wr=function(fe){var nt;for(nt in Fe)Fe.hasOwnProperty(nt)&&(Fe[nt]instanceof L0?Vn(Fe[nt]):Fe[nt]instanceof R1&&bn(Fe[nt],fe))},Lr=function(fe){for(var nt in fe.objectNumber=Qt(),Ze("<<"),fe)switch(nt){case"opacity":Ze("/ca "+k(fe[nt]));break;case"stroke-opacity":Ze("/CA "+k(fe[nt]))}Ze(">>"),Ze("endobj")},Mr=function(){var fe;for(fe in mt)mt.hasOwnProperty(fe)&&Lr(mt[fe])},Xr=function(){for(var fe in Ze("/XObject <<"),Yt)Yt.hasOwnProperty(fe)&&Yt[fe].objectNumber>=0&&Ze("/"+fe+" "+Yt[fe].objectNumber+" 0 R");Jt.publish("putXobjectDict"),Ze(">>")},Yr=function(){Wr.oid=Qt(),Ze("<<"),Ze("/Filter /Standard"),Ze("/V "+Wr.v),Ze("/R "+Wr.r),Ze("/U <"+Wr.toHexString(Wr.U)+">"),Ze("/O <"+Wr.toHexString(Wr.O)+">"),Ze("/P "+Wr.P),Ze(">>"),Ze("endobj")},ni=function(){for(var fe in Ze("/Font <<"),rt)rt.hasOwnProperty(fe)&&(v===!1||v===!0&&w.hasOwnProperty(fe))&&Ze("/"+fe+" "+rt[fe].objectNumber+" 0 R");Ze(">>")},bi=function(){if(Object.keys(Fe).length>0){for(var fe in Ze("/Shading <<"),Fe)Fe.hasOwnProperty(fe)&&Fe[fe]instanceof L0&&Fe[fe].objectNumber>=0&&Ze("/"+fe+" "+Fe[fe].objectNumber+" 0 R");Jt.publish("putShadingPatternDict"),Ze(">>")}},Ni=function(fe){if(Object.keys(Fe).length>0){for(var nt in Ze("/Pattern <<"),Fe)Fe.hasOwnProperty(nt)&&Fe[nt]instanceof _.TilingPattern&&Fe[nt].objectNumber>=0&&Fe[nt].objectNumber<fe&&Ze("/"+nt+" "+Fe[nt].objectNumber+" 0 R");Jt.publish("putTilingPatternDict"),Ze(">>")}},Yi=function(){if(Object.keys(mt).length>0){var fe;for(fe in Ze("/ExtGState <<"),mt)mt.hasOwnProperty(fe)&&mt[fe].objectNumber>=0&&Ze("/"+fe+" "+mt[fe].objectNumber+" 0 R");Jt.publish("putGStateDict"),Ze(">>")}},Qi=function(fe){Fn(fe.resourcesOid,!0),Ze("<<"),Ze("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ni(),bi(),Ni(fe.objectOid),Yi(),Xr(),Ze(">>"),Ze("endobj")},_a=function(){var fe=[];gi(),Mr(),yn(),wr(fe),Jt.publish("putResources"),fe.forEach(Qi),Qi({resourcesOid:Qr,objectOid:Number.MAX_SAFE_INTEGER}),Jt.publish("postPutResources")},ra=function(){Jt.publish("putAdditionalObjects");for(var fe=0;fe<pt.length;fe++){var nt=pt[fe];Fn(nt.objId,!0),Ze(nt.content),Ze("endobj")}Jt.publish("postPutAdditionalObjects")},Ai=function(fe){ze[fe.fontName]=ze[fe.fontName]||{},ze[fe.fontName][fe.fontStyle]=fe.id},Ka=function(fe,nt,Wt,un,kn){var Kn={id:"F"+(Object.keys(rt).length+1).toString(10),postScriptName:fe,fontName:nt,fontStyle:Wt,encoding:un,isStandardFont:kn||!1,metadata:{}};return Jt.publish("addFont",{font:Kn,instance:this}),rt[Kn.id]=Kn,Ai(Kn),Kn.id},la=function(fe){for(var nt=0,Wt=ht.length;nt<Wt;nt++){var un=Ka.call(this,fe[nt][0],fe[nt][1],fe[nt][2],ht[nt][3],!0);v===!1&&(w[un]=!0);var kn=fe[nt][0].split("-");Ai({id:un,fontName:kn[0],fontStyle:kn[1]||""})}Jt.publish("addFonts",{fonts:rt,dictionary:ze})},Sa=function(fe){return fe.foo=function(){try{return fe.apply(this,arguments)}catch(un){var nt=un.stack||"";~nt.indexOf(" at ")&&(nt=nt.split(" at ")[1]);var Wt="Error in function "+nt.split(`
`)[0].split("<")[0]+": "+un.message;if(!wa.console)throw new Error(Wt);wa.console.error(Wt,un),wa.alert&&alert(Wt)}},fe.foo.bar=fe,fe.foo},_o=function(fe,nt){var Wt,un,kn,Kn,Pr,oi,Ci,Zi,Oi;if(kn=(nt=nt||{}).sourceEncoding||"Unicode",Pr=nt.outputEncoding,(nt.autoencode||Pr)&&rt[$t].metadata&&rt[$t].metadata[kn]&&rt[$t].metadata[kn].encoding&&(Kn=rt[$t].metadata[kn].encoding,!Pr&&rt[$t].encoding&&(Pr=rt[$t].encoding),!Pr&&Kn.codePages&&(Pr=Kn.codePages[0]),typeof Pr=="string"&&(Pr=Kn[Pr]),Pr)){for(Ci=!1,oi=[],Wt=0,un=fe.length;Wt<un;Wt++)(Zi=Pr[fe.charCodeAt(Wt)])?oi.push(String.fromCharCode(Zi)):oi.push(fe[Wt]),oi[Wt].charCodeAt(0)>>8&&(Ci=!0);fe=oi.join("")}for(Wt=fe.length;Ci===void 0&&Wt!==0;)fe.charCodeAt(Wt-1)>>8&&(Ci=!0),Wt--;if(!Ci)return fe;for(oi=nt.noBOM?[]:[254,255],Wt=0,un=fe.length;Wt<un;Wt++){if((Oi=(Zi=fe.charCodeAt(Wt))>>8)>>8)throw new Error("Character at position "+Wt+" of string '"+fe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");oi.push(Oi),oi.push(Zi-(Oi<<8))}return String.fromCharCode.apply(void 0,oi)},Ui=_.__private__.pdfEscape=_.pdfEscape=function(fe,nt){return _o(fe,nt).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pi=_.__private__.beginPage=function(fe){st[++Tt]=[],kt[Tt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(fe[0]),topRightY:Number(fe[1])}},ne(Tt),yt(st[xe])},Ta=function(fe,nt){var Wt,un,kn;switch(n=nt||n,typeof fe=="string"&&(Wt=A(fe.toLowerCase()),Array.isArray(Wt)&&(un=Wt[0],kn=Wt[1])),Array.isArray(fe)&&(un=fe[0]*Et,kn=fe[1]*Et),isNaN(un)&&(un=i[0],kn=i[1]),(un>14400||kn>14400)&&($s.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),un=Math.min(14400,un),kn=Math.min(14400,kn)),i=[un,kn],n.substr(0,1)){case"l":kn>un&&(i=[kn,un]);break;case"p":un>kn&&(i=[kn,un])}Pi(i),wc(xl),Ze(Ea),Sc!==0&&Ze(Sc+" J"),Ec!==0&&Ze(Ec+" j"),Jt.publish("addPage",{pageNumber:Tt})},to=function(fe){fe>0&&fe<=Tt&&(st.splice(fe,1),kt.splice(fe,1),Tt--,xe>Tt&&(xe=Tt),this.setPage(xe))},ne=function(fe){fe>0&&fe<=Tt&&(xe=fe)},we=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return st.length-1},et=function(fe,nt,Wt){var un,kn=void 0;return Wt=Wt||{},fe=fe!==void 0?fe:rt[$t].fontName,nt=nt!==void 0?nt:rt[$t].fontStyle,un=fe.toLowerCase(),ze[un]!==void 0&&ze[un][nt]!==void 0?kn=ze[un][nt]:ze[fe]!==void 0&&ze[fe][nt]!==void 0?kn=ze[fe][nt]:Wt.disableWarning===!1&&$s.warn("Unable to look up font label for font '"+fe+"', '"+nt+"'. Refer to getFontList() for available fonts."),kn||Wt.noFallback||(kn=ze.times[nt])==null&&(kn=ze.times.normal),kn},Gt=_.__private__.putInfo=function(){var fe=Qt(),nt=function(un){return un};for(var Wt in d!==null&&(nt=Wr.encryptor(fe,0)),Ze("<<"),Ze("/Producer ("+Ui(nt("jsPDF "+ba.version))+")"),cn)cn.hasOwnProperty(Wt)&&cn[Wt]&&Ze("/"+Wt.substr(0,1).toUpperCase()+Wt.substr(1)+" ("+Ui(nt(cn[Wt]))+")");Ze("/CreationDate ("+Ui(nt(ce))+")"),Ze(">>"),Ze("endobj")},on=_.__private__.putCatalog=function(fe){var nt=(fe=fe||{}).rootDictionaryObjId||kr;switch(Qt(),Ze("<<"),Ze("/Type /Catalog"),Ze("/Pages "+nt+" 0 R"),Ye||(Ye="fullwidth"),Ye){case"fullwidth":Ze("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ze("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ze("/OpenAction [3 0 R /Fit]");break;case"original":Ze("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Wt=""+Ye;Wt.substr(Wt.length-1)==="%"&&(Ye=parseInt(Ye)/100),typeof Ye=="number"&&Ze("/OpenAction [3 0 R /XYZ null null "+k(Ye)+"]")}switch(Bt||(Bt="continuous"),Bt){case"continuous":Ze("/PageLayout /OneColumn");break;case"single":Ze("/PageLayout /SinglePage");break;case"two":case"twoleft":Ze("/PageLayout /TwoColumnLeft");break;case"tworight":Ze("/PageLayout /TwoColumnRight")}Dt&&Ze("/PageMode /"+Dt),Jt.publish("putCatalog"),Ze(">>"),Ze("endobj")},dn=_.__private__.putTrailer=function(){Ze("trailer"),Ze("<<"),Ze("/Size "+(De+1)),Ze("/Root "+De+" 0 R"),Ze("/Info "+(De-1)+" 0 R"),d!==null&&Ze("/Encrypt "+Wr.oid+" 0 R"),Ze("/ID [ <"+se+"> <"+se+"> ]"),Ze(">>")},xn=_.__private__.putHeader=function(){Ze("%PDF-"+E),Ze("%ºß¬à")},cr=_.__private__.putXRef=function(){var fe="0000000000";Ze("xref"),Ze("0 "+(De+1)),Ze("0000000000 65535 f ");for(var nt=1;nt<=De;nt++)typeof We[nt]=="function"?Ze((fe+We[nt]()).slice(-10)+" 00000 n "):We[nt]!==void 0?Ze((fe+We[nt]).slice(-10)+" 00000 n "):Ze("0000000000 00000 n ")},ur=_.__private__.buildDocument=function(){Ve(),yt(Ae),Jt.publish("buildDocument"),xn(),yi(),ra(),_a(),d!==null&&Yr(),Gt(),on();var fe=ut;return cr(),dn(),Ze("startxref"),Ze(""+fe),Ze("%%EOF"),yt(st[xe]),Ae.join(`
`)},Rr=_.__private__.getBlob=function(fe){return new Blob([Ut(fe)],{type:"application/pdf"})},Ir=_.output=_.__private__.output=Sa(function(fe,nt){switch(typeof(nt=nt||{})=="string"?nt={filename:nt}:nt.filename=nt.filename||"generated.pdf",fe){case void 0:return ur();case"save":_.save(nt.filename);break;case"arraybuffer":return Ut(ur());case"blob":return Rr(ur());case"bloburi":case"bloburl":if(wa.URL!==void 0&&typeof wa.URL.createObjectURL=="function")return wa.URL&&wa.URL.createObjectURL(Rr(ur()))||void 0;$s.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Wt="",un=ur();try{Wt=mD(un)}catch{Wt=mD(unescape(encodeURIComponent(un)))}return"data:application/pdf;filename="+nt.filename+";base64,"+Wt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(wa)==="[object Window]"){var kn="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Kn=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';nt.pdfObjectUrl&&(kn=nt.pdfObjectUrl,Kn="");var Pr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+kn+'"'+Kn+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(nt)+");<\/script></body></html>",oi=wa.open();return oi!==null&&oi.document.write(Pr),oi}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(wa)==="[object Window]"){var Ci='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(nt.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+nt.filename+'" width="500px" height="400px" /></body></html>',Zi=wa.open();if(Zi!==null){Zi.document.write(Ci);var Oi=this;Zi.document.documentElement.querySelector("#pdfViewer").onload=function(){Zi.document.title=nt.filename,Zi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Oi.output("bloburl"))}}return Zi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(wa)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var qi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",nt)+'"></iframe></body></html>',za=wa.open();if(za!==null&&(za.document.write(qi),za.document.title=nt.filename),za||typeof safari>"u")return za;break;case"datauri":case"dataurl":return wa.document.location.href=this.output("datauristring",nt);default:return null}}),Nr=function(fe){return Array.isArray(rn)===!0&&rn.indexOf(fe)>-1};switch(r){case"pt":Et=1;break;case"mm":Et=72/25.4;break;case"cm":Et=72/2.54;break;case"in":Et=72;break;case"px":Et=Nr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Et=12;break;case"ex":Et=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Et=r}var Wr=null;Ie(),ye();var ua=function(fe){return d!==null?Wr.encryptor(fe,0):function(nt){return nt}},ui=_.__private__.getPageInfo=_.getPageInfo=function(fe){if(isNaN(fe)||fe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kt[fe].objId,pageNumber:fe,pageContext:kt[fe]}},Vr=_.__private__.getPageInfoByObjId=function(fe){if(isNaN(fe)||fe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var nt in kt)if(kt[nt].objId===fe)break;return ui(nt)},hr=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:kt[xe].objId,pageNumber:xe,pageContext:kt[xe]}};_.addPage=function(){return Ta.apply(this,arguments),this},_.setPage=function(){return ne.apply(this,arguments),yt.call(this,st[xe]),this},_.insertPage=function(fe){return this.addPage(),this.movePage(xe,fe),this},_.movePage=function(fe,nt){var Wt,un;if(fe>nt){Wt=st[fe],un=kt[fe];for(var kn=fe;kn>nt;kn--)st[kn]=st[kn-1],kt[kn]=kt[kn-1];st[nt]=Wt,kt[nt]=un,this.setPage(nt)}else if(fe<nt){Wt=st[fe],un=kt[fe];for(var Kn=fe;Kn<nt;Kn++)st[Kn]=st[Kn+1],kt[Kn]=kt[Kn+1];st[nt]=Wt,kt[nt]=un,this.setPage(nt)}return this},_.deletePage=function(){return to.apply(this,arguments),this},_.__private__.text=_.text=function(fe,nt,Wt,un,kn){var Kn,Pr,oi,Ci,Zi,Oi,qi,za,ro,Ja=(un=un||{}).scope||this;if(typeof fe=="number"&&typeof nt=="number"&&(typeof Wt=="string"||Array.isArray(Wt))){var zo=Wt;Wt=nt,nt=fe,fe=zo}if(arguments[3]instanceof jt?(X("The transform parameter of text() with a Matrix value"),ro=kn):(oi=arguments[4],Ci=arguments[5],bs(qi=arguments[3])==="object"&&qi!==null||(typeof oi=="string"&&(Ci=oi,oi=null),typeof qi=="string"&&(Ci=qi,qi=null),typeof qi=="number"&&(oi=qi,qi=null),un={flags:qi,angle:oi,align:Ci})),isNaN(nt)||isNaN(Wt)||fe==null)throw new Error("Invalid arguments passed to jsPDF.text");if(fe.length===0)return Ja;var co="",Ts=!1,ll=typeof un.lineHeightFactor=="number"?un.lineHeightFactor:ts,Ys=Ja.internal.scaleFactor;function Wc(Ii){return Ii=Ii.split("	").join(Array(un.TabLen||9).join(" ")),Ui(Ii,qi)}function Ll(Ii){for(var Di,xa=Ii.concat(),ka=[],Bs=xa.length;Bs--;)typeof(Di=xa.shift())=="string"?ka.push(Di):Array.isArray(Ii)&&(Di.length===1||Di[1]===void 0&&Di[2]===void 0)?ka.push(Di[0]):ka.push([Di[0],Di[1],Di[2]]);return ka}function Xl(Ii,Di){var xa;if(typeof Ii=="string")xa=Di(Ii)[0];else if(Array.isArray(Ii)){for(var ka,Bs,kl=Ii.concat(),ul=[],Ks=kl.length;Ks--;)typeof(ka=kl.shift())=="string"?ul.push(Di(ka)[0]):Array.isArray(ka)&&typeof ka[0]=="string"&&(Bs=Di(ka[0],ka[1],ka[2]),ul.push([Bs[0],Bs[1],Bs[2]]));xa=ul}return xa}var Tc=!1,Yl=!0;if(typeof fe=="string")Tc=!0;else if(Array.isArray(fe)){var Nl=fe.concat();Pr=[];for(var ju,io=Nl.length;io--;)(typeof(ju=Nl.shift())!="string"||Array.isArray(ju)&&typeof ju[0]!="string")&&(Yl=!1);Tc=Yl}if(Tc===!1)throw new Error('Type of text must be string or Array. "'+fe+'" is not recognized.');typeof fe=="string"&&(fe=fe.match(/[\r?\n]/)?fe.split(/\r\n|\r|\n/g):[fe]);var Gu=qt/Ja.internal.scaleFactor,Zs=Gu*(ll-1);switch(un.baseline){case"bottom":Wt-=Zs;break;case"top":Wt+=Gu-Zs;break;case"hanging":Wt+=Gu-2*Zs;break;case"middle":Wt+=Gu/2-Zs}if((Oi=un.maxWidth||0)>0&&(typeof fe=="string"?fe=Ja.splitTextToSize(fe,Oi):Object.prototype.toString.call(fe)==="[object Array]"&&(fe=fe.reduce(function(Ii,Di){return Ii.concat(Ja.splitTextToSize(Di,Oi))},[]))),Kn={text:fe,x:nt,y:Wt,options:un,mutex:{pdfEscape:Ui,activeFontKey:$t,fonts:rt,activeFontSize:qt}},Jt.publish("preProcessText",Kn),fe=Kn.text,oi=(un=Kn.options).angle,!(ro instanceof jt)&&oi&&typeof oi=="number"){oi*=Math.PI/180,un.rotationDirection===0&&(oi=-oi),O===F.ADVANCED&&(oi=-oi);var Cs=Math.cos(oi),Vu=Math.sin(oi);ro=new jt(Cs,Vu,-Vu,Cs,0,0)}else oi&&oi instanceof jt&&(ro=oi);O!==F.ADVANCED||ro||(ro=je),(Zi=un.charSpace||Fs)!==void 0&&(co+=W(Q(Zi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(za=un.horizontalScale)!==void 0&&(co+=W(100*za)+` Tz
`),un.lang;var rs=-1,Cc=un.renderingMode!==void 0?un.renderingMode:un.stroke,sc=Ja.internal.getCurrentPageInfo().pageContext;switch(Cc){case 0:case!1:case"fill":rs=0;break;case 1:case!0:case"stroke":rs=1;break;case 2:case"fillThenStroke":rs=2;break;case 3:case"invisible":rs=3;break;case 4:case"fillAndAddForClipping":rs=4;break;case 5:case"strokeAndAddPathForClipping":rs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":rs=6;break;case 7:case"addToPathForClipping":rs=7}var pa=sc.usedRenderingMode!==void 0?sc.usedRenderingMode:-1;rs!==-1?co+=rs+` Tr
`:pa!==-1&&(co+=`0 Tr
`),rs!==-1&&(sc.usedRenderingMode=rs),Ci=un.align||"left";var ds,wo=qt*ll,Cu=Ja.internal.pageSize.getWidth(),wh=rt[$t];Zi=un.charSpace||Fs,Oi=un.maxWidth||0,qi=Object.assign({autoencode:!0,noBOM:!0},un.flags);var Mn=[],Yn=function(Ii){return Ja.getStringUnitWidth(Ii,{font:wh,charSpace:Zi,fontSize:qt,doKerning:!1})*qt/Ys};if(Object.prototype.toString.call(fe)==="[object Array]"){var jr;Pr=Ll(fe),Ci!=="left"&&(ds=Pr.map(Yn));var ai,ia=0;if(Ci==="right"){nt-=ds[0],fe=[],io=Pr.length;for(var Mi=0;Mi<io;Mi++)Mi===0?(ai=Wa(nt),jr=bo(Wt)):(ai=Q(ia-ds[Mi]),jr=-wo),fe.push([Pr[Mi],ai,jr]),ia=ds[Mi]}else if(Ci==="center"){nt-=ds[0]/2,fe=[],io=Pr.length;for(var I=0;I<io;I++)I===0?(ai=Wa(nt),jr=bo(Wt)):(ai=Q((ia-ds[I])/2),jr=-wo),fe.push([Pr[I],ai,jr]),ia=ds[I]}else if(Ci==="left"){fe=[],io=Pr.length;for(var y=0;y<io;y++)fe.push(Pr[y])}else if(Ci==="justify"&&wh.encoding==="Identity-H"){fe=[],io=Pr.length,Oi=Oi!==0?Oi:Cu;for(var b=0,R=0;R<io;R++)if(jr=R===0?bo(Wt):-wo,ai=R===0?Wa(nt):b,R<io-1){var Z=Q((Oi-ds[R])/(Pr[R].split(" ").length-1)),le=Pr[R].split(" ");fe.push([le[0]+" ",ai,jr]),b=0;for(var Me=1;Me<le.length;Me++){var Ue=(Yn(le[Me-1]+" "+le[Me])-Yn(le[Me]))*Ys+Z;Me==le.length-1?fe.push([le[Me],Ue,0]):fe.push([le[Me]+" ",Ue,0]),b-=Ue}}else fe.push([Pr[R],ai,jr]);fe.push(["",b,0])}else{if(Ci!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(fe=[],io=Pr.length,Oi=Oi!==0?Oi:Cu,R=0;R<io;R++)jr=R===0?bo(Wt):-wo,ai=R===0?Wa(nt):0,R<io-1?Mn.push(W(Q((Oi-ds[R])/(Pr[R].split(" ").length-1)))):Mn.push(0),fe.push([Pr[R],ai,jr])}}var dt=typeof un.R2L=="boolean"?un.R2L:Pt;dt===!0&&(fe=Xl(fe,function(Ii,Di,xa){return[Ii.split("").reverse().join(""),Di,xa]})),Kn={text:fe,x:nt,y:Wt,options:un,mutex:{pdfEscape:Ui,activeFontKey:$t,fonts:rt,activeFontSize:qt}},Jt.publish("postProcessText",Kn),fe=Kn.text,Ts=Kn.mutex.isHex||!1;var Nt=rt[$t].encoding;Nt!=="WinAnsiEncoding"&&Nt!=="StandardEncoding"||(fe=Xl(fe,function(Ii,Di,xa){return[Wc(Ii),Di,xa]})),Pr=Ll(fe),fe=[];for(var wn,Nn,dr,$r=0,mi=1,xi=Array.isArray(Pr[0])?mi:$r,si="",ci=function(Ii,Di,xa){var ka="";return xa instanceof jt?(xa=typeof un.angle=="number"?Pe(xa,new jt(1,0,0,1,Ii,Di)):Pe(new jt(1,0,0,1,Ii,Di),xa),O===F.ADVANCED&&(xa=Pe(new jt(1,0,0,-1,0,0),xa)),ka=xa.join(" ")+` Tm
`):ka=W(Ii)+" "+W(Di)+` Td
`,ka},Fi=0;Fi<Pr.length;Fi++){switch(si="",xi){case mi:dr=(Ts?"<":"(")+Pr[Fi][0]+(Ts?">":")"),wn=parseFloat(Pr[Fi][1]),Nn=parseFloat(Pr[Fi][2]);break;case $r:dr=(Ts?"<":"(")+Pr[Fi]+(Ts?">":")"),wn=Wa(nt),Nn=bo(Wt)}Mn!==void 0&&Mn[Fi]!==void 0&&(si=Mn[Fi]+` Tw
`),Fi===0?fe.push(si+ci(wn,Nn,ro)+dr):xi===$r?fe.push(si+dr):xi===mi&&fe.push(si+ci(wn,Nn,ro)+dr)}fe=xi===$r?fe.join(` Tj
T* `):fe.join(` Tj
`),fe+=` Tj
`;var hi=`BT
/`;return hi+=$t+" "+qt+` Tf
`,hi+=W(qt*ll)+` TL
`,hi+=Ss+`
`,hi+=co,hi+=fe,Ze(hi+="ET"),w[$t]=!0,Ja};var ii=_.__private__.clip=_.clip=function(fe){return Ze(fe==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return ii("evenodd")},_.__private__.discardPath=_.discardPath=function(){return Ze("n"),this};var Wi=_.__private__.isValidStyle=function(fe){var nt=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(fe)!==-1&&(nt=!0),nt};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(fe){return Wi(fe)&&(h=fe),this};var ea=_.__private__.getStyle=_.getStyle=function(fe){var nt=h;switch(fe){case"D":case"S":nt="S";break;case"F":nt="f";break;case"FD":case"DF":nt="B";break;case"f":case"f*":case"B":case"B*":nt=fe}return nt},ji=_.close=function(){return Ze("h"),this};_.stroke=function(){return Ze("S"),this},_.fill=function(fe){return Oo("f",fe),this},_.fillEvenOdd=function(fe){return Oo("f*",fe),this},_.fillStroke=function(fe){return Oo("B",fe),this},_.fillStrokeEvenOdd=function(fe){return Oo("B*",fe),this};var Oo=function(fe,nt){bs(nt)==="object"?_l(nt,fe):Ze(fe)},ri=function(fe){fe===null||O===F.ADVANCED&&fe===void 0||(fe=ea(fe),Ze(fe))};function Jr(fe,nt,Wt,un,kn){var Kn=new R1(nt||this.boundingBox,Wt||this.xStep,un||this.yStep,this.gState,kn||this.matrix);Kn.stream=this.stream;var Pr=fe+"$$"+this.cloneIndex+++"$$";return _t(Pr,Kn),Kn}var _l=function(fe,nt){var Wt=He[fe.key],un=Fe[Wt];if(un instanceof L0)Ze("q"),Ze(ha(nt)),un.gState&&_.setGState(un.gState),Ze(fe.matrix.toString()+" cm"),Ze("/"+Wt+" sh"),Ze("Q");else if(un instanceof R1){var kn=new jt(1,0,0,-1,0,Xo());fe.matrix&&(kn=kn.multiply(fe.matrix||je),Wt=Jr.call(un,fe.key,fe.boundingBox,fe.xStep,fe.yStep,kn).id),Ze("q"),Ze("/Pattern cs"),Ze("/"+Wt+" scn"),un.gState&&_.setGState(un.gState),Ze(nt),Ze("Q")}},ha=function(fe){switch(fe){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xo=_.moveTo=function(fe,nt){return Ze(W(Q(fe))+" "+W(ae(nt))+" m"),this},Fo=_.lineTo=function(fe,nt){return Ze(W(Q(fe))+" "+W(ae(nt))+" l"),this},no=_.curveTo=function(fe,nt,Wt,un,kn,Kn){return Ze([W(Q(fe)),W(ae(nt)),W(Q(Wt)),W(ae(un)),W(Q(kn)),W(ae(Kn)),"c"].join(" ")),this};_.__private__.line=_.line=function(fe,nt,Wt,un,kn){if(isNaN(fe)||isNaN(nt)||isNaN(Wt)||isNaN(un)||!Wi(kn))throw new Error("Invalid arguments passed to jsPDF.line");return O===F.COMPAT?this.lines([[Wt-fe,un-nt]],fe,nt,[1,1],kn||"S"):this.lines([[Wt-fe,un-nt]],fe,nt,[1,1]).stroke()},_.__private__.lines=_.lines=function(fe,nt,Wt,un,kn,Kn){var Pr,oi,Ci,Zi,Oi,qi,za,ro,Ja,zo,co,Ts;if(typeof fe=="number"&&(Ts=Wt,Wt=nt,nt=fe,fe=Ts),un=un||[1,1],Kn=Kn||!1,isNaN(nt)||isNaN(Wt)||!Array.isArray(fe)||!Array.isArray(un)||!Wi(kn)||typeof Kn!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xo(nt,Wt),Pr=un[0],oi=un[1],Zi=fe.length,zo=nt,co=Wt,Ci=0;Ci<Zi;Ci++)(Oi=fe[Ci]).length===2?(zo=Oi[0]*Pr+zo,co=Oi[1]*oi+co,Fo(zo,co)):(qi=Oi[0]*Pr+zo,za=Oi[1]*oi+co,ro=Oi[2]*Pr+zo,Ja=Oi[3]*oi+co,zo=Oi[4]*Pr+zo,co=Oi[5]*oi+co,no(qi,za,ro,Ja,zo,co));return Kn&&ji(),ri(kn),this},_.path=function(fe){for(var nt=0;nt<fe.length;nt++){var Wt=fe[nt],un=Wt.c;switch(Wt.op){case"m":xo(un[0],un[1]);break;case"l":Fo(un[0],un[1]);break;case"c":no.apply(this,un);break;case"h":ji()}}return this},_.__private__.rect=_.rect=function(fe,nt,Wt,un,kn){if(isNaN(fe)||isNaN(nt)||isNaN(Wt)||isNaN(un)||!Wi(kn))throw new Error("Invalid arguments passed to jsPDF.rect");return O===F.COMPAT&&(un=-un),Ze([W(Q(fe)),W(ae(nt)),W(Q(Wt)),W(Q(un)),"re"].join(" ")),ri(kn),this},_.__private__.triangle=_.triangle=function(fe,nt,Wt,un,kn,Kn,Pr){if(isNaN(fe)||isNaN(nt)||isNaN(Wt)||isNaN(un)||isNaN(kn)||isNaN(Kn)||!Wi(Pr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Wt-fe,un-nt],[kn-Wt,Kn-un],[fe-kn,nt-Kn]],fe,nt,[1,1],Pr,!0),this},_.__private__.roundedRect=_.roundedRect=function(fe,nt,Wt,un,kn,Kn,Pr){if(isNaN(fe)||isNaN(nt)||isNaN(Wt)||isNaN(un)||isNaN(kn)||isNaN(Kn)||!Wi(Pr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var oi=4/3*(Math.SQRT2-1);return kn=Math.min(kn,.5*Wt),Kn=Math.min(Kn,.5*un),this.lines([[Wt-2*kn,0],[kn*oi,0,kn,Kn-Kn*oi,kn,Kn],[0,un-2*Kn],[0,Kn*oi,-kn*oi,Kn,-kn,Kn],[2*kn-Wt,0],[-kn*oi,0,-kn,-Kn*oi,-kn,-Kn],[0,2*Kn-un],[0,-Kn*oi,kn*oi,-Kn,kn,-Kn]],fe+kn,nt,[1,1],Pr,!0),this},_.__private__.ellipse=_.ellipse=function(fe,nt,Wt,un,kn){if(isNaN(fe)||isNaN(nt)||isNaN(Wt)||isNaN(un)||!Wi(kn))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Kn=4/3*(Math.SQRT2-1)*Wt,Pr=4/3*(Math.SQRT2-1)*un;return xo(fe+Wt,nt),no(fe+Wt,nt-Pr,fe+Kn,nt-un,fe,nt-un),no(fe-Kn,nt-un,fe-Wt,nt-Pr,fe-Wt,nt),no(fe-Wt,nt+Pr,fe-Kn,nt+un,fe,nt+un),no(fe+Kn,nt+un,fe+Wt,nt+Pr,fe+Wt,nt),ri(kn),this},_.__private__.circle=_.circle=function(fe,nt,Wt,un){if(isNaN(fe)||isNaN(nt)||isNaN(Wt)||!Wi(un))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(fe,nt,Wt,Wt,un)},_.setFont=function(fe,nt,Wt){return Wt&&(nt=G(nt,Wt)),$t=et(fe,nt,{disableWarning:!1}),this};var Bo=_.__private__.getFont=_.getFont=function(){return rt[et.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var fe,nt,Wt={};for(fe in ze)if(ze.hasOwnProperty(fe))for(nt in Wt[fe]=[],ze[fe])ze[fe].hasOwnProperty(nt)&&Wt[fe].push(nt);return Wt},_.addFont=function(fe,nt,Wt,un,kn){var Kn=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Kn.indexOf(arguments[3])!==-1?kn=arguments[3]:arguments[3]&&Kn.indexOf(arguments[3])==-1&&(Wt=G(Wt,un)),kn=kn||"Identity-H",Ka.call(this,fe,nt,Wt,kn)};var ts,xl=t.lineWidth||.200025,Ws=_.__private__.getLineWidth=_.getLineWidth=function(){return xl},wc=_.__private__.setLineWidth=_.setLineWidth=function(fe){return xl=fe,Ze(W(Q(fe))+" w"),this};_.__private__.setLineDash=ba.API.setLineDash=ba.API.setLineDashPattern=function(fe,nt){if(fe=fe||[],nt=nt||0,isNaN(nt)||!Array.isArray(fe))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return fe=fe.map(function(Wt){return W(Q(Wt))}).join(" "),nt=W(Q(nt)),Ze("["+fe+"] "+nt+" d"),this};var $l=_.__private__.getLineHeight=_.getLineHeight=function(){return qt*ts};_.__private__.getLineHeight=_.getLineHeight=function(){return qt*ts};var sl=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(fe){return typeof(fe=fe||1.15)=="number"&&(ts=fe),this},ws=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return ts};sl(t.lineHeight);var Wa=_.__private__.getHorizontalCoordinate=function(fe){return Q(fe)},bo=_.__private__.getVerticalCoordinate=function(fe){return O===F.ADVANCED?fe:kt[xe].mediaBox.topRightY-kt[xe].mediaBox.bottomLeftY-Q(fe)},Bu=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(fe){return W(Wa(fe))},Do=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(fe){return W(bo(fe))},Ea=t.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return vi(Ea)},_.__private__.setStrokeColor=_.setDrawColor=function(fe,nt,Wt,un){return Ea=zr({ch1:fe,ch2:nt,ch3:Wt,ch4:un,pdfColorType:"draw",precision:2}),Ze(Ea),this};var ns=t.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return vi(ns)},_.__private__.setFillColor=_.setFillColor=function(fe,nt,Wt,un){return ns=zr({ch1:fe,ch2:nt,ch3:Wt,ch4:un,pdfColorType:"fill",precision:2}),Ze(ns),this};var Ss=t.textColor||"0 g",bl=_.__private__.getTextColor=_.getTextColor=function(){return vi(Ss)};_.__private__.setTextColor=_.setTextColor=function(fe,nt,Wt,un){return Ss=zr({ch1:fe,ch2:nt,ch3:Wt,ch4:un,pdfColorType:"text",precision:3}),this};var Fs=t.charSpace,Dl=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Fs||0)};_.__private__.setCharSpace=_.setCharSpace=function(fe){if(isNaN(fe))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fs=fe,this};var Sc=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(fe){var nt=_.CapJoinStyles[fe];if(nt===void 0)throw new Error("Line cap style of '"+fe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sc=nt,Ze(nt+" J"),this};var Ec=0;_.__private__.setLineJoin=_.setLineJoin=function(fe){var nt=_.CapJoinStyles[fe];if(nt===void 0)throw new Error("Line join style of '"+fe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ec=nt,Ze(nt+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(fe){if(fe=fe||0,isNaN(fe))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ze(W(Q(fe))+" M"),this},_.GState=hC,_.setGState=function(fe){(fe=typeof fe=="string"?mt[it[fe]]:Eu(null,fe)).equals(xt)||(Ze("/"+fe.id+" gs"),xt=fe)};var Eu=function(fe,nt){if(!fe||!it[fe]){var Wt=!1;for(var un in mt)if(mt.hasOwnProperty(un)&&mt[un].equals(nt)){Wt=!0;break}if(Wt)nt=mt[un];else{var kn="GS"+(Object.keys(mt).length+1).toString(10);mt[kn]=nt,nt.id=kn}return fe&&(it[fe]=nt.id),Jt.publish("addGState",nt),nt}};_.addGState=function(fe,nt){return Eu(fe,nt),this},_.saveGraphicsState=function(){return Ze("q"),Xe.push({key:$t,size:qt,color:Ss}),this},_.restoreGraphicsState=function(){Ze("Q");var fe=Xe.pop();return $t=fe.key,qt=fe.size,Ss=fe.color,xt=null,this},_.setCurrentTransformationMatrix=function(fe){return Ze(fe.toString()+" cm"),this},_.comment=function(fe){return Ze("#"+fe),this};var Tu=function(fe,nt){var Wt=fe||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Wt},set:function(Kn){isNaN(Kn)||(Wt=parseFloat(Kn))}});var un=nt||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return un},set:function(Kn){isNaN(Kn)||(un=parseFloat(Kn))}});var kn="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return kn},set:function(Kn){kn=Kn.toString()}}),this},Xs=function(fe,nt,Wt,un){Tu.call(this,fe,nt),this.type="rect";var kn=Wt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return kn},set:function(Pr){isNaN(Pr)||(kn=parseFloat(Pr))}});var Kn=un||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Kn},set:function(Pr){isNaN(Pr)||(Kn=parseFloat(Pr))}}),this},$c=function(){this.page=Tt,this.currentPage=xe,this.pages=st.slice(0),this.pagesContext=kt.slice(0),this.x=qn,this.y=Dn,this.matrix=sr,this.width=zu(xe),this.height=Xo(xe),this.outputDestination=It,this.id="",this.objectNumber=-1};$c.prototype.restore=function(){Tt=this.page,xe=this.currentPage,kt=this.pagesContext,st=this.pages,qn=this.x,Dn=this.y,sr=this.matrix,au(xe,this.width),Uu(xe,this.height),It=this.outputDestination};var Es=function(fe,nt,Wt,un,kn){An.push(new $c),Tt=xe=0,st=[],qn=fe,Dn=nt,sr=kn,Pi([Wt,un])},Wl=function(fe){if(Qn[fe])An.pop().restore();else{var nt=new $c,Wt="Xo"+(Object.keys(Yt).length+1).toString(10);nt.id=Wt,Qn[fe]=Wt,Yt[Wt]=nt,Jt.publish("addFormObject",nt),An.pop().restore()}};for(var Lo in _.beginFormObject=function(fe,nt,Wt,un,kn){return Es(fe,nt,Wt,un,kn),this},_.endFormObject=function(fe){return Wl(fe),this},_.doFormObject=function(fe,nt){var Wt=Yt[Qn[fe]];return Ze("q"),Ze(nt.toString()+" cm"),Ze("/"+Wt.id+" Do"),Ze("Q"),this},_.getFormObject=function(fe){var nt=Yt[Qn[fe]];return{x:nt.x,y:nt.y,width:nt.width,height:nt.height,matrix:nt.matrix}},_.save=function(fe,nt){return fe=fe||"generated.pdf",(nt=nt||{}).returnPromise=nt.returnPromise||!1,nt.returnPromise===!1?(R0(Rr(ur()),fe),typeof R0.unload=="function"&&wa.setTimeout&&setTimeout(R0.unload,911),this):new Promise(function(Wt,un){try{var kn=R0(Rr(ur()),fe);typeof R0.unload=="function"&&wa.setTimeout&&setTimeout(R0.unload,911),Wt(kn)}catch(Kn){un(Kn.message)}})},ba.API)ba.API.hasOwnProperty(Lo)&&(Lo==="events"&&ba.API.events.length?function(fe,nt){var Wt,un,kn;for(kn=nt.length-1;kn!==-1;kn--)Wt=nt[kn][0],un=nt[kn][1],fe.subscribe.apply(fe,[Wt].concat(typeof un=="function"?[un]:un))}(Jt,ba.API.events):_[Lo]=ba.API[Lo]);var zu=_.getPageWidth=function(fe){return(kt[fe=fe||xe].mediaBox.topRightX-kt[fe].mediaBox.bottomLeftX)/Et},au=_.setPageWidth=function(fe,nt){kt[fe].mediaBox.topRightX=nt*Et+kt[fe].mediaBox.bottomLeftX},Xo=_.getPageHeight=function(fe){return(kt[fe=fe||xe].mediaBox.topRightY-kt[fe].mediaBox.bottomLeftY)/Et},Uu=_.setPageHeight=function(fe,nt){kt[fe].mediaBox.topRightY=nt*Et+kt[fe].mediaBox.bottomLeftY};return _.internal={pdfEscape:Ui,getStyle:ea,getFont:Bo,getFontSize:Re,getCharSpace:Dl,getTextColor:bl,getLineHeight:$l,getLineHeightFactor:ws,getLineWidth:Ws,write:wt,getHorizontalCoordinate:Wa,getVerticalCoordinate:bo,getCoordinateString:Bu,getVerticalCoordinateString:Do,collections:{},newObject:Qt,newAdditionalObject:Wn,newObjectDeferred:en,newObjectDeferredBegin:Fn,getFilters:zn,putStream:En,events:Jt,scaleFactor:Et,pageSize:{getWidth:function(){return zu(xe)},setWidth:function(fe){au(xe,fe)},getHeight:function(){return Xo(xe)},setHeight:function(fe){Uu(xe,fe)}},encryptionOptions:d,encryption:Wr,getEncryptor:ua,output:Ir,getNumberOfPages:we,pages:st,out:Ze,f2:k,f3:$,getPageInfo:ui,getPageInfoByObjId:Vr,getCurrentPageInfo:hr,getPDFVersion:M,Point:Tu,Rectangle:Xs,Matrix:jt,hasHotfix:Nr},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return zu(xe)},set:function(fe){au(xe,fe)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return Xo(xe)},set:function(fe){Uu(xe,fe)},enumerable:!0,configurable:!0}),la.call(_,ht),$t="F1",Ta(i,n),Jt.publish("initialized"),_}s1.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},s1.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},s1.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},s1.prototype.processOwnerPassword=function(t,e){return yD(vD(e).substr(0,5),t)},s1.prototype.encryptor=function(t,e){var n=vD(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return yD(n,r)}},hC.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||bs(t)!==bs(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},ba.API={events:[]},ba.version="3.0.1";var ru=ba.API,bk=1,wy=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},N_=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Na=function(t){return t.toFixed(2)},Jm=function(t){return t.toFixed(5)};ru.__acroform__={};var bf=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},J6=function(t){return t*bk},Yp=function(t){var e=new VH,n=ki.internal.getHeight(t)||0,r=ki.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Na(r)),Number(Na(n))],e},Fhe=ru.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Bhe=ru.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},zhe=ru.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},mu=ru.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zhe(t,e-1)},vu=ru.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Fhe(t,e-1)},yu=ru.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Bhe(t,e-1)},Uhe=ru.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],o=t[1],s=t[2],a=t[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(o+a)||0,c.upperRight_X=n(i+s)||0,c.upperRight_Y=r(o)||0,[Number(Na(c.lowerLeft_X)),Number(Na(c.lowerLeft_Y)),Number(Na(c.upperRight_X)),Number(Na(c.upperRight_Y))]},jhe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=_D(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Na(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Yp(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},_D=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function($){return $.split(`
`)}):i.map(function($){return[$]});var o=n,s=ki.internal.getHeight(t)||0;s=s<0?-s:s;var a=ki.internal.getWidth(t)||0;a=a<0?-a:a;var c=function($,Q,ie){if($+1<i.length){var ae=Q+" "+i[$+1][0];return fE(ae,t,ie).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var h,d,v=fE("3",t,o).height,w=t.multiline?s-o:(s-v)/2,_=w+=2,E=0,M=0,D=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+fE(e,t,o=12).width+", FieldWidth:"+a+`
`;break}for(var A="",F=0,O=0;O<i.length;O++)if(i.hasOwnProperty(O)){var N=!1;if(i[O].length!==1&&D!==i[O].length-1){if((v+2)*(F+2)+2>s)continue e;A+=i[O][D],N=!0,M=O,O--}else{A=(A+=i[O][D]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var H=parseInt(O),G=c(H,A,o),W=O>=i.length-1;if(G&&!W){A+=" ",D=0;continue}if(G||W){if(W)M=H;else if(t.multiline&&(v+2)*(F+2)+2>s)continue e}else{if(!t.multiline||(v+2)*(F+2)+2>s)continue e;M=H}}for(var X="",K=E;K<=M;K++){var k=i[K];if(t.multiline){if(K===M){X+=k[D]+" ",D=(D+1)%k.length;continue}if(K===E){X+=k[k.length-1]+" ";continue}}X+=k[0]+" "}switch(X=X.substr(X.length-1)==" "?X.substr(0,X.length-1):X,d=fE(X,t,o).width,t.textAlign){case"right":h=a-d-2;break;case"center":h=(a-d)/2;break;case"left":default:h=2}e+=Na(h)+" "+Na(_)+` Td
`,e+="("+wy(X)+`) Tj
`,e+=-Na(h)+` 0 Td
`,_=-(o+2),d=0,E=N?M:M+1,F++,A=""}break}return r.text=e,r.fontSize=o,r},fE=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Ghe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Vhe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Hhe=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),bs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},qhe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Tp.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Ghe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");bk=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new HH,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Vhe(o,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],c=[],h=a.Rect;if(a.Rect&&(a.Rect=Uhe(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ki.createDefaultAppearanceStream(a),bs(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=h,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=jhe(a);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var v="";for(var w in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(w)){var _=a.appearanceStreamContent[w];if(v+="/"+w+" ",v+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var s in _)if(_.hasOwnProperty(s)){var E=_[s];typeof E=="function"&&(E=E.call(i,a)),v+="/"+s+" "+E+" ",i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E)}}else typeof(E=_)=="function"&&(E=E.call(i,a)),v+="/"+s+" "+E,i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E);v+=">>"}c.push({key:"AP",value:`<<
`+v+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}o&&Hhe(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},GH=ru.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(s){return s};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(o!==0&&(i+=" "),bs(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+wy(r(t[o].toString()))+")"):i+=t[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},g5=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+wy(r(t))+")"},ng=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ng.prototype.toString=function(){return this.objId+" 0 R"},ng.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ng.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:GH(i,this.objId,this.scope)}):i instanceof ng?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var VH=function(){ng.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};bf(VH,ng);var HH=function(){ng.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+wy(n(t))+")"}},set:function(n){t=n}})};bf(HH,ng);var Tp=function t(){ng.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!mu(e,3)},set:function(A){A?this.F=vu(e,3):this.F=yu(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');n=A}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(A){r=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(A){r[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(A){r[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(A){r[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(A){r[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof fC)return;o="FieldObject"+t.FieldNum++}var A=function(F){return F};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+wy(A(o))+")"},set:function(A){o=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(A){o=A}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(A){s=A}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(A){a=A}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(A){c=A}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/bk:h},set:function(A){h=A}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof fC||this instanceof $0))return g5(v,this.objId,this.scope)},set:function(A){A=A.toString(),v=A}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof yc?w:g5(w,this.objId,this.scope)},set:function(A){A=A.toString(),w=this instanceof yc?A:A.substr(0,1)==="("?N_(A.substr(1,A.length-2)):N_(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof yc?N_(w.substr(1,w.length-1)):w},set:function(A){A=A.toString(),w=this instanceof yc?"/"+A:A}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof yc?_:g5(_,this.objId,this.scope)},set:function(A){A=A.toString(),_=this instanceof yc?A:A.substr(0,1)==="("?N_(A.substr(1,A.length-2)):N_(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof yc?N_(_.substr(1,_.length-1)):_},set:function(A){A=A.toString(),_=this instanceof yc?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,M=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return M},set:function(A){A=!!A,M=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(A){E=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,1)},set:function(A){A?this.Ff=vu(this.Ff,1):this.Ff=yu(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,2)},set:function(A){A?this.Ff=vu(this.Ff,2):this.Ff=yu(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,3)},set:function(A){A?this.Ff=vu(this.Ff,3):this.Ff=yu(this.Ff,3)}});var D=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(D!==null)return D},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');D=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(D){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:D=2;break;case"center":case 1:D=1;break;case"left":case 0:default:D=0}}})};bf(Tp,ng);var H1=function(){Tp.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return GH(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(o,s,a){a||(a=1);for(var c,h=[];c=s.exec(o);)h.push(c[a]);return h}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,18)},set:function(n){n?this.Ff=vu(this.Ff,18):this.Ff=yu(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=vu(this.Ff,19):this.Ff=yu(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,20)},set:function(n){n?(this.Ff=vu(this.Ff,20),e.sort()):this.Ff=yu(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,22)},set:function(n){n?this.Ff=vu(this.Ff,22):this.Ff=yu(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,23)},set:function(n){n?this.Ff=vu(this.Ff,23):this.Ff=yu(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,27)},set:function(n){n?this.Ff=vu(this.Ff,27):this.Ff=yu(this.Ff,27)}}),this.hasAppearanceStream=!1};bf(H1,Tp);var q1=function(){H1.call(this),this.fontName="helvetica",this.combo=!1};bf(q1,H1);var $1=function(){q1.call(this),this.combo=!0};bf($1,q1);var IT=function(){$1.call(this),this.edit=!0};bf(IT,$1);var yc=function(){Tp.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,15)},set:function(n){n?this.Ff=vu(this.Ff,15):this.Ff=yu(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,16)},set:function(n){n?this.Ff=vu(this.Ff,16):this.Ff=yu(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,17)},set:function(n){n?this.Ff=vu(this.Ff,17):this.Ff=yu(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,26)},set:function(n){n?this.Ff=vu(this.Ff,26):this.Ff=yu(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+wy(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){bs(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};bf(yc,Tp);var DT=function(){yc.call(this),this.pushButton=!0};bf(DT,yc);var W1=function(){yc.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};bf(W1,yc);var fC=function(){var t,e;Tp.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+wy(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){bs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ki.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bf(fC,Tp),W1.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},W1.prototype.createOption=function(t){var e=new fC;return e.Parent=this,e.optionName=t,this.Kids.push(e),$he.call(this.scope,e),e};var LT=function(){yc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ki.CheckBox.createAppearanceStream()};bf(LT,yc);var $0=function(){Tp.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,13)},set:function(e){e?this.Ff=vu(this.Ff,13):this.Ff=yu(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,21)},set:function(e){e?this.Ff=vu(this.Ff,21):this.Ff=yu(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,23)},set:function(e){e?this.Ff=vu(this.Ff,23):this.Ff=yu(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,24)},set:function(e){e?this.Ff=vu(this.Ff,24):this.Ff=yu(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,25)},set:function(e){e?this.Ff=vu(this.Ff,25):this.Ff=yu(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,26)},set:function(e){e?this.Ff=vu(this.Ff,26):this.Ff=yu(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bf($0,Tp);var NT=function(){$0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!mu(this.Ff,14)},set:function(t){t?this.Ff=vu(this.Ff,14):this.Ff=yu(this.Ff,14)}}),this.password=!0};bf(NT,$0);var ki={CheckBox:{createAppearanceStream:function(){return{N:{On:ki.CheckBox.YesNormal},D:{On:ki.CheckBox.YesPushDown,Off:ki.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Yp(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=_D(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Na(ki.internal.getWidth(t))+" "+Na(ki.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Na(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Yp(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],o=ki.internal.getHeight(t),s=ki.internal.getWidth(t),a=_D(t,t.caption);return i.push("1 g"),i.push("0 0 "+Na(s)+" "+Na(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Na(s-1)+" "+Na(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Na(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Yp(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Na(ki.internal.getWidth(t))+" "+Na(ki.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ki.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ki.RadioButton.Circle.YesNormal,e.D[t]=ki.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Yp(t);e.scope=t.scope;var n=[],r=ki.internal.getWidth(t)<=ki.internal.getHeight(t)?ki.internal.getWidth(t)/4:ki.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=ki.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Jm(ki.internal.getWidth(t)/2)+" "+Jm(ki.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Yp(t);e.scope=t.scope;var n=[],r=ki.internal.getWidth(t)<=ki.internal.getHeight(t)?ki.internal.getWidth(t)/4:ki.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*ki.internal.Bezier_C).toFixed(5)),s=Number((r*ki.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Jm(ki.internal.getWidth(t)/2)+" "+Jm(ki.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Jm(ki.internal.getWidth(t)/2)+" "+Jm(ki.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Yp(t);e.scope=t.scope;var n=[],r=ki.internal.getWidth(t)<=ki.internal.getHeight(t)?ki.internal.getWidth(t)/4:ki.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*ki.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Jm(ki.internal.getWidth(t)/2)+" "+Jm(ki.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ki.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ki.RadioButton.Cross.YesNormal,e.D[t]=ki.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Yp(t);e.scope=t.scope;var n=[],r=ki.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Na(ki.internal.getWidth(t)-2)+" "+Na(ki.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Na(r.x1.x)+" "+Na(r.x1.y)+" m"),n.push(Na(r.x2.x)+" "+Na(r.x2.y)+" l"),n.push(Na(r.x4.x)+" "+Na(r.x4.y)+" m"),n.push(Na(r.x3.x)+" "+Na(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Yp(t);e.scope=t.scope;var n=ki.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Na(ki.internal.getWidth(t))+" "+Na(ki.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Na(ki.internal.getWidth(t)-2)+" "+Na(ki.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Na(n.x1.x)+" "+Na(n.x1.y)+" m"),r.push(Na(n.x2.x)+" "+Na(n.x2.y)+" l"),r.push(Na(n.x4.x)+" "+Na(n.x4.y)+" m"),r.push(Na(n.x3.x)+" "+Na(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Yp(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Na(ki.internal.getWidth(t))+" "+Na(ki.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ki.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ki.internal.getWidth(t),n=ki.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},ki.internal.getWidth=function(t){var e=0;return bs(t)==="object"&&(e=J6(t.Rect[2])),e},ki.internal.getHeight=function(t){var e=0;return bs(t)==="object"&&(e=J6(t.Rect[3])),e};var $he=ru.addField=function(t){if(qhe(this,t),!(t instanceof Tp))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ru.AcroFormChoiceField=H1,ru.AcroFormListBox=q1,ru.AcroFormComboBox=$1,ru.AcroFormEditBox=IT,ru.AcroFormButton=yc,ru.AcroFormPushButton=DT,ru.AcroFormRadioButton=W1,ru.AcroFormCheckBox=LT,ru.AcroFormTextField=$0,ru.AcroFormPasswordField=NT,ru.AcroFormAppearance=ki,ru.AcroForm={ChoiceField:H1,ListBox:q1,ComboBox:$1,EditBox:IT,Button:yc,PushButton:DT,RadioButton:W1,CheckBox:LT,TextField:$0,PasswordField:NT,Appearance:ki},ba.AcroForm={ChoiceField:H1,ListBox:q1,ComboBox:$1,EditBox:IT,Button:yc,PushButton:DT,RadioButton:W1,CheckBox:LT,TextField:$0,PasswordField:NT,Appearance:ki};ba.AcroForm;function qH(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function($,Q){var ie,ae,ce,se,Se,ye=e;if((Q=Q||e)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(G($))for(Se in n)for(ce=n[Se],ie=0;ie<ce.length;ie+=1){for(se=!0,ae=0;ae<ce[ie].length;ae+=1)if(ce[ie][ae]!==void 0&&ce[ie][ae]!==$[ae]){se=!1;break}if(se===!0){ye=Se;break}}else for(Se in n)for(ce=n[Se],ie=0;ie<ce.length;ie+=1){for(se=!0,ae=0;ae<ce[ie].length;ae+=1)if(ce[ie][ae]!==void 0&&ce[ie][ae]!==$.charCodeAt(ae)){se=!1;break}if(se===!0){ye=Se;break}}return ye===e&&Q!==e&&(ye=Q),ye},i=function $(Q){for(var ie=this.internal.write,ae=this.internal.putStream,ce=(0,this.internal.getFilters)();ce.indexOf("FlateEncode")!==-1;)ce.splice(ce.indexOf("FlateEncode"),1);Q.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:Q.width}),se.push({key:"Height",value:Q.height}),Q.colorSpace===D.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Q.palette.length/3-1)+" "+("sMask"in Q&&Q.sMask!==void 0?Q.objectId+2:Q.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+Q.colorSpace}),Q.colorSpace===D.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:Q.bitsPerComponent}),"decodeParameters"in Q&&Q.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+Q.decodeParameters+">>"}),"transparency"in Q&&Array.isArray(Q.transparency)){for(var Se="",ye=0,Te=Q.transparency.length;ye<Te;ye++)Se+=Q.transparency[ye]+" "+Q.transparency[ye]+" ";se.push({key:"Mask",value:"["+Se+"]"})}Q.sMask!==void 0&&se.push({key:"SMask",value:Q.objectId+1+" 0 R"});var pe=Q.filter!==void 0?["/"+Q.filter]:void 0;if(ae({data:Q.data,additionalKeyValues:se,alreadyAppliedFilters:pe,objectId:Q.objectId}),ie("endobj"),"sMask"in Q&&Q.sMask!==void 0){var Ie="/Predictor "+Q.predictor+" /Colors 1 /BitsPerComponent "+Q.bitsPerComponent+" /Columns "+Q.width,me={width:Q.width,height:Q.height,colorSpace:"DeviceGray",bitsPerComponent:Q.bitsPerComponent,decodeParameters:Ie,data:Q.sMask};"filter"in Q&&(me.filter=Q.filter),$.call(this,me)}if(Q.colorSpace===D.INDEXED){var xe=this.internal.newObject();ae({data:X(new Uint8Array(Q.palette)),objectId:xe}),ie("endobj")}},o=function(){var $=this.internal.collections.addImage_images;for(var Q in $)i.call(this,$[Q])},s=function(){var $,Q=this.internal.collections.addImage_images,ie=this.internal.write;for(var ae in Q)ie("/I"+($=Q[ae]).index,$.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},c=function(){var $=this.internal.collections.addImage_images;return a.call(this),$},h=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function($){return typeof t["process"+$.toUpperCase()]=="function"},v=function($){return bs($)==="object"&&$.nodeType===1},w=function($,Q){if($.nodeName==="IMG"&&$.hasAttribute("src")){var ie=""+$.getAttribute("src");if(ie.indexOf("data:image/")===0)return V2(unescape(ie).split("base64,").pop());var ae=t.loadFile(ie,!0);if(ae!==void 0)return ae}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var ce;switch(Q){case"PNG":ce="image/png";break;case"WEBP":ce="image/webp";break;case"JPEG":case"JPG":default:ce="image/jpeg"}return V2($.toDataURL(ce,1).split("base64,").pop())}},_=function($){var Q=this.internal.collections.addImage_images;if(Q){for(var ie in Q)if($===Q[ie].alias)return Q[ie]}},E=function($,Q,ie){return $||Q||($=-96,Q=-96),$<0&&($=-1*ie.width*72/$/this.internal.scaleFactor),Q<0&&(Q=-1*ie.height*72/Q/this.internal.scaleFactor),$===0&&($=Q*ie.width/ie.height),Q===0&&(Q=$*ie.height/ie.width),[$,Q]},M=function($,Q,ie,ae,ce,se){var Se=E.call(this,ie,ae,ce),ye=this.internal.getCoordinateString,Te=this.internal.getVerticalCoordinateString,pe=c.call(this);if(ie=Se[0],ae=Se[1],pe[ce.index]=ce,se){se*=Math.PI/180;var Ie=Math.cos(se),me=Math.sin(se),xe=function(Ee){return Ee.toFixed(4)},ve=[xe(Ie),xe(me),xe(-1*me),xe(Ie),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,ye($),Te(Q+ae),"cm"].join(" ")),this.internal.write(ve.join(" ")),this.internal.write([ye(ie),"0","0",ye(ae),"0","0","cm"].join(" "))):this.internal.write([ye(ie),"0","0",ye(ae),ye($),Te(Q+ae),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ce.index+" Do"),this.internal.write("Q")},D=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=t.__addimage__.sHashCode=function($){var Q,ie,ae=0;if(typeof $=="string")for(ie=$.length,Q=0;Q<ie;Q++)ae=(ae<<5)-ae+$.charCodeAt(Q),ae|=0;else if(G($))for(ie=$.byteLength/2,Q=0;Q<ie;Q++)ae=(ae<<5)-ae+$[Q],ae|=0;return ae},O=t.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var Q=!0;return $.length===0&&(Q=!1),$.length%4!=0&&(Q=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(Q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(Q=!1),Q},N=t.__addimage__.extractImageFromDataUrl=function($){if($==null||!($=$.trim()).startsWith("data:"))return null;var Q=$.indexOf(",");return Q<0?null:$.substring(0,Q).trim().endsWith("base64")?$.substring(Q+1):null},H=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function($){return H()&&$ instanceof ArrayBuffer};var G=t.__addimage__.isArrayBufferView=function($){return H()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},W=t.__addimage__.binaryStringToUint8Array=function($){for(var Q=$.length,ie=new Uint8Array(Q),ae=0;ae<Q;ae++)ie[ae]=$.charCodeAt(ae);return ie},X=t.__addimage__.arrayBufferToBinaryString=function($){for(var Q="",ie=G($)?$:new Uint8Array($),ae=0;ae<ie.length;ae+=8192)Q+=String.fromCharCode.apply(null,ie.subarray(ae,ae+8192));return Q};t.addImage=function(){var $,Q,ie,ae,ce,se,Se,ye,Te;if(typeof arguments[1]=="number"?(Q=e,ie=arguments[1],ae=arguments[2],ce=arguments[3],se=arguments[4],Se=arguments[5],ye=arguments[6],Te=arguments[7]):(Q=arguments[1],ie=arguments[2],ae=arguments[3],ce=arguments[4],se=arguments[5],Se=arguments[6],ye=arguments[7],Te=arguments[8]),bs($=arguments[0])==="object"&&!v($)&&"imageData"in $){var pe=$;$=pe.imageData,Q=pe.format||Q||e,ie=pe.x||ie||0,ae=pe.y||ae||0,ce=pe.w||pe.width||ce,se=pe.h||pe.height||se,Se=pe.alias||Se,ye=pe.compression||ye,Te=pe.rotation||pe.angle||Te}var Ie=this.internal.getFilters();if(ye===void 0&&Ie.indexOf("FlateEncode")!==-1&&(ye="SLOW"),isNaN(ie)||isNaN(ae))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var me=K.call(this,$,Q,Se,ye);return M.call(this,ie,ae,ce,se,me,Te),this};var K=function($,Q,ie,ae){var ce,se,Se;if(typeof $=="string"&&r($)===e){$=unescape($);var ye=k($,!1);(ye!==""||(ye=t.loadFile($,!0))!==void 0)&&($=ye)}if(v($)&&($=w($,Q)),Q=r($,Q),!d(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(((Se=ie)==null||Se.length===0)&&(ie=function(Te){return typeof Te=="string"||G(Te)?F(Te):G(Te.data)?F(Te.data):null}($)),(ce=_.call(this,ie))||(H()&&($ instanceof Uint8Array||Q==="RGBA"||(se=$,$=W($))),ce=this["process"+Q.toUpperCase()]($,h.call(this),ie,function(Te){return Te&&typeof Te=="string"&&(Te=Te.toUpperCase()),Te in t.image_compression?Te:A.NONE}(ae),se)),!ce)throw new Error("An unknown error occurred whilst processing the image.");return ce},k=t.__addimage__.convertBase64ToBinaryString=function($,Q){Q=typeof Q!="boolean"||Q;var ie,ae="";if(typeof $=="string"){var ce;ie=(ce=N($))!==null&&ce!==void 0?ce:$;try{ae=V2(ie)}catch(se){if(Q)throw O(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ae};t.getImageProperties=function($){var Q,ie,ae="";if(v($)&&($=w($)),typeof $=="string"&&r($)===e&&((ae=k($,!1))===""&&(ae=t.loadFile($)||""),$=ae),ie=r($),!d(ie))throw new Error("addImage does not support files of type '"+ie+"', please ensure that a plugin for '"+ie+"' support is added.");if(!H()||$ instanceof Uint8Array||($=W($)),!(Q=this["process"+ie.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return Q.fileType=ie,Q}})(ba.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};ba.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,d=!1,v=0;v<h.length&&!d;v++)switch((r=h[v]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var w=0;w<h.length;w++){r=h[w];var _=this.internal.pdfEscape,E=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var M=this.internal.newAdditionalObject(),D=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(M.objId),F=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+_(A(r.contents))+")",o+=" /Popup "+D.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+_(A(F))+") >>",M.content=o;var O=M.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+O,r.open&&(o+=" /Open true"),o+=" >>",D.content=o,this.internal.write(M.objId,"0 R",D.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+_(E(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var H=this.annotations._nameMap[r.options.name];r.options.pageNumber=H.page,r.options.top=H.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+_(E(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var G=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+G+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,o,s){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(n),y:h(r),w:c(n+i),h:h(r+o)},options:s,type:"link"})},t.textWithLink=function(n,r,i,o){var s,a,c=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var d=this.splitTextToSize(n,a).length;s=Math.ceil(h*d)}else a=c,s=h;return this.text(n,r,i,o),i+=.2*h,o.align==="center"&&(r-=c/2),o.align==="right"&&(r-=c),this.link(r,i-h,a,s,o),c},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(ba.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(M){return e[M.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(M){return typeof M=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(M)},a=t.__arabicParser__.isArabicEndLetter=function(M){return s(M)&&o(M)&&e[M.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(M){return s(M)&&i.indexOf(M.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(M){return s(M)&&o(M)&&e[M.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(M){return s(M)&&o(M)&&e[M.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(M){return s(M)&&o(M)&&e[M.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(M){return s(M)&&o(M)&&e[M.charCodeAt(0)].length==4},v=t.__arabicParser__.resolveLigatures=function(M){var D=0,A=n,F="",O=0;for(D=0;D<M.length;D+=1)A[M.charCodeAt(D)]!==void 0?(O++,typeof(A=A[M.charCodeAt(D)])=="number"&&(F+=String.fromCharCode(A),A=n,O=0),D===M.length-1&&(A=n,F+=M.charAt(D-(O-1)),D-=O-1,O=0)):(A=n,F+=M.charAt(D-O),D-=O,O=0);return F};t.__arabicParser__.isArabicDiacritic=function(M){return M!==void 0&&r[M.charCodeAt(0)]!==void 0};var w=t.__arabicParser__.getCorrectForm=function(M,D,A){return s(M)?o(M)===!1?-1:!h(M)||!s(D)&&!s(A)||!s(A)&&a(D)||a(M)&&!s(D)||a(M)&&c(D)||a(M)&&a(D)?0:d(M)&&s(D)&&!a(D)&&s(A)&&h(A)?3:a(M)||!s(A)?1:2:-1},_=function(M){var D=0,A=0,F=0,O="",N="",H="",G=(M=M||"").split("\\s+"),W=[];for(D=0;D<G.length;D+=1){for(W.push(""),A=0;A<G[D].length;A+=1)O=G[D][A],N=G[D][A-1],H=G[D][A+1],s(O)?(F=w(O,N,H),W[D]+=F!==-1?String.fromCharCode(e[O.charCodeAt(0)][F]):O):W[D]+=O;W[D]=v(W[D])}return W.join(" ")},E=t.__arabicParser__.processArabic=t.processArabic=function(){var M,D=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(D)){var F=0;for(A=[],F=0;F<D.length;F+=1)Array.isArray(D[F])?A.push([_(D[F][0]),D[F][1],D[F][2]]):A.push([_(D[F])]);M=A}else M=_(D);return typeof arguments[0]=="string"?M:(arguments[0].text=M,arguments[0])};t.events.push(["preProcessText",E])}(ba.API),ba.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ba.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(M){c=M}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(M){h=M}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(M){d=M}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(M){v=M}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(M){w=M}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(M){_=M}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(M){E=M}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,h){r.call(this);var d=(h=h||{}).fontSize||this.getFontSize(),v=h.font||this.getFont(),w=h.scaleFactor||this.internal.scaleFactor,_=0,E=0,M=0,D=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var A=h.maxWidth;A>0?typeof c=="string"?c=this.splitTextToSize(c,A):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(O,N){return O.concat(D.splitTextToSize(N,A))},[])):c=Array.isArray(c)?c:[c];for(var F=0;F<c.length;F++)_<(M=this.getStringUnitWidth(c[F],{font:v})*d)&&(_=M);return _!==0&&(E=c.length),{w:_/=w,h:Math.max((E*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/w,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var h=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,v=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===c.lineNumber?(c.x=(h.x||0)+(h.width||0),c.y=h.y||0):h.y+h.height+c.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=v.top,_&&w&&(this.printHeaderRow(c.lineNumber,!0),c.y+=w[0].height)):c.y=h.y+h.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,h,d,v,w){if(r.call(this),!d)throw new Error("No data for PDF table.");var _,E,M,D,A=[],F=[],O=[],N={},H={},G=[],W=[],X=(w=w||{}).autoSize||!1,K=w.printHeaders!==!1,k=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,$=w.margins||Object.assign({width:this.getPageWidth()},e),Q=typeof w.padding=="number"?w.padding:3,ie=w.headerBackgroundColor||"#c8c8c8",ae=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=K,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=Q,this.internal.__cell__.headerBackgroundColor=ie,this.internal.__cell__.headerTextColor=ae,this.setFontSize(k),v==null)F=A=Object.keys(d[0]),O=A.map(function(){return"left"});else if(Array.isArray(v)&&bs(v[0])==="object")for(A=v.map(function(pe){return pe.name}),F=v.map(function(pe){return pe.prompt||pe.name||""}),O=v.map(function(pe){return pe.align||"left"}),_=0;_<v.length;_+=1)H[v[_].name]=v[_].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(F=A=v,O=A.map(function(){return"left"}));if(X||Array.isArray(v)&&typeof v[0]=="string")for(_=0;_<A.length;_+=1){for(N[D=A[_]]=d.map(function(pe){return pe[D]}),this.setFont(void 0,"bold"),G.push(this.getTextDimensions(F[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=N[D],this.setFont(void 0,"normal"),M=0;M<E.length;M+=1)G.push(this.getTextDimensions(E[M],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);H[D]=Math.max.apply(null,G)+Q+Q,G=[]}if(K){var ce={};for(_=0;_<A.length;_+=1)ce[A[_]]={},ce[A[_]].text=F[_],ce[A[_]].align=O[_];var se=a.call(this,ce,H);W=A.map(function(pe){return new o(c,h,H[pe],se,ce[pe].text,void 0,ce[pe].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var Se=v.reduce(function(pe,Ie){return pe[Ie.name]=Ie.align,pe},{});for(_=0;_<d.length;_+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:_,data:d[_]},this);var ye=a.call(this,d[_],H);for(M=0;M<A.length;M+=1){var Te=d[_][A[M]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:_,col:M,data:Te},this),s.call(this,new o(c,h,H[A[M]],ye,Te,_+2,Se[A[M]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=h,this};var a=function(c,h){var d=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(c).map(function(_){var E=c[_];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,h[_]-d-d)},this).map(function(_){return this.getLineHeightFactor()*_.length*v/w+d+d},this).reduce(function(_,E){return Math.max(_,E)},0)};t.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){d=this.internal.__cell__.tableHeaderRow[_].clone(),h&&(d.y=this.internal.__cell__.margins.top||0,w.push(d)),d.lineNumber=c;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(E)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}}(ba.API);var $H={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},WH=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xD=qH(WH),XH=[100,200,300,400,500,600,700,800,900],Whe=qH(XH);function bD(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(o){return $H[o=o||"normal"]?o:"normal"}(t.style),r=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(o){return typeof xD[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Q6(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Xhe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},eB={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function tB(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Yhe(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Xhe,n.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(i[(o=bD(e[a])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){s=t[o.family];break}if(!(s=s||t[r]))throw new Error("Could not find a font-family for the rule '"+tB(o)+"' and default family '"+r+"'.");if(s=function(c,h){if(h[c])return h[c];var d=xD[c],v=d<=xD.normal?-1:1,w=Q6(h,WH,d,v);if(!w)throw new Error("Could not find a matching font-stretch value for "+c);return w}(o.stretch,s),s=function(c,h){if(h[c])return h[c];for(var d=$H[c],v=0;v<d.length;++v)if(h[d[v]])return h[d[v]];throw new Error("Could not find a matching font-style for "+c)}(o.style,s),!(s=function(c,h){if(h[c])return h[c];if(c===400&&h[500])return h[500];if(c===500&&h[400])return h[400];var d=Whe[c],v=Q6(h,XH,d,c<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+c);return v}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+tB(o)+"'.");return s}function nB(t){return t.trimLeft()}function Zhe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Khe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var dE,rB,iB,m5=["times"];(function(t){var e,n,r,i,o,s,a,c,h,d=function(me){return me=me||{},this.isStrokeTransparent=me.isStrokeTransparent||!1,this.strokeOpacity=me.strokeOpacity||1,this.strokeStyle=me.strokeStyle||"#000000",this.fillStyle=me.fillStyle||"#000000",this.isFillTransparent=me.isFillTransparent||!1,this.fillOpacity=me.fillOpacity||1,this.font=me.font||"10px sans-serif",this.textBaseline=me.textBaseline||"alphabetic",this.textAlign=me.textAlign||"left",this.lineWidth=me.lineWidth||1,this.lineJoin=me.lineJoin||"miter",this.lineCap=me.lineCap||"butt",this.path=me.path||[],this.transform=me.transform!==void 0?me.transform.clone():new c,this.globalCompositeOperation=me.globalCompositeOperation||"normal",this.globalAlpha=me.globalAlpha||1,this.clip_path=me.clip_path||[],this.currentPoint=me.currentPoint||new s,this.miterLimit=me.miterLimit||10,this.lastPoint=me.lastPoint||new s,this.lineDashOffset=me.lineDashOffset||0,this.lineDash=me.lineDash||[],this.margin=me.margin||[0,0,0,0],this.prevPageLastElemOffset=me.prevPageLastElemOffset||0,this.ignoreClearRect=typeof me.ignoreClearRect!="boolean"||me.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new v(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,h=new d}]);var v=function(me){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var xe=me;Object.defineProperty(this,"pdf",{get:function(){return xe}});var ve=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ve},set:function(yt){ve=!!yt}});var Ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ee},set:function(yt){Ee=!!yt}});var De=0;Object.defineProperty(this,"posX",{get:function(){return De},set:function(yt){isNaN(yt)||(De=yt)}});var We=0;Object.defineProperty(this,"posY",{get:function(){return We},set:function(yt){isNaN(yt)||(We=yt)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(yt){var Ze;typeof yt=="number"?Ze=[yt,yt,yt,yt]:((Ze=new Array(4))[0]=yt[0],Ze[1]=yt.length>=2?yt[1]:Ze[0],Ze[2]=yt.length>=3?yt[2]:Ze[0],Ze[3]=yt.length>=4?yt[3]:Ze[1]),h.margin=Ze}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(yt){Ae=yt}});var ut=0;Object.defineProperty(this,"lastBreak",{get:function(){return ut},set:function(yt){ut=yt}});var pt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pt},set:function(yt){pt=yt}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(yt){yt instanceof d&&(h=yt)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(yt){h.path=yt}});var st=[];Object.defineProperty(this,"ctxStack",{get:function(){return st},set:function(yt){st=yt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(yt){var Ze;Ze=w(yt),this.ctx.fillStyle=Ze.style,this.ctx.isFillTransparent=Ze.a===0,this.ctx.fillOpacity=Ze.a,this.pdf.setFillColor(Ze.r,Ze.g,Ze.b,{a:Ze.a}),this.pdf.setTextColor(Ze.r,Ze.g,Ze.b,{a:Ze.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(yt){var Ze=w(yt);this.ctx.strokeStyle=Ze.style,this.ctx.isStrokeTransparent=Ze.a===0,this.ctx.strokeOpacity=Ze.a,Ze.a===0?this.pdf.setDrawColor(255,255,255):(Ze.a,this.pdf.setDrawColor(Ze.r,Ze.g,Ze.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(yt){["butt","round","square"].indexOf(yt)!==-1&&(this.ctx.lineCap=yt,this.pdf.setLineCap(yt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(yt){isNaN(yt)||(this.ctx.lineWidth=yt,this.pdf.setLineWidth(yt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(yt){["bevel","round","miter"].indexOf(yt)!==-1&&(this.ctx.lineJoin=yt,this.pdf.setLineJoin(yt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(yt){isNaN(yt)||(this.ctx.miterLimit=yt,this.pdf.setMiterLimit(yt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(yt){this.ctx.textBaseline=yt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(yt){["right","end","center","left","start"].indexOf(yt)!==-1&&(this.ctx.textAlign=yt)}});var Ce=null;function It(yt,Ze){if(Ce===null){var wt=function(Ut){var ht=[];return Object.keys(Ut).forEach(function(qt){Ut[qt].forEach(function(Ye){var Re=null;switch(Ye){case"bold":Re={family:qt,weight:"bold"};break;case"italic":Re={family:qt,style:"italic"};break;case"bolditalic":Re={family:qt,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:qt}}Re!==null&&(Re.ref={name:qt,style:Ye},ht.push(Re))})}),ht}(yt.getFontList());Ce=function(Ut){for(var ht={},qt=0;qt<Ut.length;++qt){var Ye=bD(Ut[qt]),Re=Ye.family,Pt=Ye.stretch,Dt=Ye.style,At=Ye.weight;ht[Re]=ht[Re]||{},ht[Re][Pt]=ht[Re][Pt]||{},ht[Re][Pt][Dt]=ht[Re][Pt][Dt]||{},ht[Re][Pt][Dt][At]=Ye}return ht}(wt.concat(Ze))}return Ce}var Ve=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ve},set:function(yt){Ce=null,Ve=yt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(yt){var Ze;if(this.ctx.font=yt,(Ze=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(yt))!==null){var wt=Ze[1];Ze[2];var Ut=Ze[3],ht=Ze[4];Ze[5];var qt=Ze[6],Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ht)[2];ht=Math.floor(Ye==="px"?parseFloat(ht)*this.pdf.internal.scaleFactor:Ye==="em"?parseFloat(ht)*this.pdf.getFontSize():parseFloat(ht)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ht);var Re=function(cn){var $t,Et,qn=[],Dn=cn.trim();if(Dn==="")return m5;if(Dn in eB)return[eB[Dn]];for(;Dn!=="";){switch(Et=null,$t=(Dn=nB(Dn)).charAt(0)){case'"':case"'":Et=Zhe(Dn.substring(1),$t);break;default:Et=Khe(Dn)}if(Et===null||(qn.push(Et[0]),(Dn=nB(Et[1]))!==""&&Dn.charAt(0)!==","))return m5;Dn=Dn.replace(/^,/,"")}return qn}(qt);if(this.fontFaces){var Pt=Yhe(It(this.pdf,this.fontFaces),Re.map(function(cn){return{family:cn,stretch:"normal",weight:Ut,style:wt}}));this.pdf.setFont(Pt.ref.name,Pt.ref.style)}else{var Dt="";(Ut==="bold"||parseInt(Ut,10)>=700||wt==="bold")&&(Dt="bold"),wt==="italic"&&(Dt+="italic"),Dt.length===0&&(Dt="normal");for(var At="",Bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gn=0;gn<Re.length;gn++){if(this.pdf.internal.getFont(Re[gn],Dt,{noFallback:!0,disableWarning:!0})!==void 0){At=Re[gn];break}if(Dt==="bolditalic"&&this.pdf.internal.getFont(Re[gn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=Re[gn],Dt="bold";else if(this.pdf.internal.getFont(Re[gn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=Re[gn],Dt="normal";break}}if(At===""){for(var Zt=0;Zt<Re.length;Zt++)if(Bt[Re[Zt]]){At=Bt[Re[Zt]];break}}At=At===""?"Times":At,this.pdf.setFont(At,Dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(yt){this.ctx.globalCompositeOperation=yt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(yt){this.ctx.globalAlpha=yt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(yt){this.ctx.lineDashOffset=yt,Ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(yt){this.ctx.lineDash=yt,Ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(yt){this.ctx.ignoreClearRect=!!yt}})};v.prototype.setLineDash=function(me){this.lineDash=me},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){N.call(this,"fill",!1)},v.prototype.stroke=function(){N.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(me,xe){if(isNaN(me)||isNaN(xe))throw $s.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ve=this.ctx.transform.applyToPoint(new s(me,xe));this.path.push({type:"mt",x:ve.x,y:ve.y}),this.ctx.lastPoint=new s(me,xe)},v.prototype.closePath=function(){var me=new s(0,0),xe=0;for(xe=this.path.length-1;xe!==-1;xe--)if(this.path[xe].type==="begin"&&bs(this.path[xe+1])==="object"&&typeof this.path[xe+1].x=="number"){me=new s(this.path[xe+1].x,this.path[xe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(me.x,me.y)},v.prototype.lineTo=function(me,xe){if(isNaN(me)||isNaN(xe))throw $s.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ve=this.ctx.transform.applyToPoint(new s(me,xe));this.path.push({type:"lt",x:ve.x,y:ve.y}),this.ctx.lastPoint=new s(ve.x,ve.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},v.prototype.quadraticCurveTo=function(me,xe,ve,Ee){if(isNaN(ve)||isNaN(Ee)||isNaN(me)||isNaN(xe))throw $s.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var De=this.ctx.transform.applyToPoint(new s(ve,Ee)),We=this.ctx.transform.applyToPoint(new s(me,xe));this.path.push({type:"qct",x1:We.x,y1:We.y,x:De.x,y:De.y}),this.ctx.lastPoint=new s(De.x,De.y)},v.prototype.bezierCurveTo=function(me,xe,ve,Ee,De,We){if(isNaN(De)||isNaN(We)||isNaN(me)||isNaN(xe)||isNaN(ve)||isNaN(Ee))throw $s.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new s(De,We)),ut=this.ctx.transform.applyToPoint(new s(me,xe)),pt=this.ctx.transform.applyToPoint(new s(ve,Ee));this.path.push({type:"bct",x1:ut.x,y1:ut.y,x2:pt.x,y2:pt.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new s(Ae.x,Ae.y)},v.prototype.arc=function(me,xe,ve,Ee,De,We){if(isNaN(me)||isNaN(xe)||isNaN(ve)||isNaN(Ee)||isNaN(De))throw $s.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(We=!!We,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new s(me,xe));me=Ae.x,xe=Ae.y;var ut=this.ctx.transform.applyToPoint(new s(0,ve)),pt=this.ctx.transform.applyToPoint(new s(0,0));ve=Math.sqrt(Math.pow(ut.x-pt.x,2)+Math.pow(ut.y-pt.y,2))}Math.abs(De-Ee)>=2*Math.PI&&(Ee=0,De=2*Math.PI),this.path.push({type:"arc",x:me,y:xe,radius:ve,startAngle:Ee,endAngle:De,counterclockwise:We})},v.prototype.arcTo=function(me,xe,ve,Ee,De){throw new Error("arcTo not implemented.")},v.prototype.rect=function(me,xe,ve,Ee){if(isNaN(me)||isNaN(xe)||isNaN(ve)||isNaN(Ee))throw $s.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(me,xe),this.lineTo(me+ve,xe),this.lineTo(me+ve,xe+Ee),this.lineTo(me,xe+Ee),this.lineTo(me,xe),this.lineTo(me+ve,xe),this.lineTo(me,xe)},v.prototype.fillRect=function(me,xe,ve,Ee){if(isNaN(me)||isNaN(xe)||isNaN(ve)||isNaN(Ee))throw $s.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var De={};this.lineCap!=="butt"&&(De.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(De.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(me,xe,ve,Ee),this.fill(),De.hasOwnProperty("lineCap")&&(this.lineCap=De.lineCap),De.hasOwnProperty("lineJoin")&&(this.lineJoin=De.lineJoin)}},v.prototype.strokeRect=function(me,xe,ve,Ee){if(isNaN(me)||isNaN(xe)||isNaN(ve)||isNaN(Ee))throw $s.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(me,xe,ve,Ee),this.stroke())},v.prototype.clearRect=function(me,xe,ve,Ee){if(isNaN(me)||isNaN(xe)||isNaN(ve)||isNaN(Ee))throw $s.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(me,xe,ve,Ee))},v.prototype.save=function(me){me=typeof me!="boolean"||me;for(var xe=this.pdf.internal.getCurrentPageInfo().pageNumber,ve=0;ve<this.pdf.internal.getNumberOfPages();ve++)this.pdf.setPage(ve+1),this.pdf.internal.out("q");if(this.pdf.setPage(xe),me){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ee=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ee}},v.prototype.restore=function(me){me=typeof me!="boolean"||me;for(var xe=this.pdf.internal.getCurrentPageInfo().pageNumber,ve=0;ve<this.pdf.internal.getNumberOfPages();ve++)this.pdf.setPage(ve+1),this.pdf.internal.out("Q");this.pdf.setPage(xe),me&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(me){var xe,ve,Ee,De;if(me.isCanvasGradient===!0&&(me=me.getColor()),!me)return{r:0,g:0,b:0,a:0,style:me};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(me))xe=0,ve=0,Ee=0,De=0;else{var We=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(me);if(We!==null)xe=parseInt(We[1]),ve=parseInt(We[2]),Ee=parseInt(We[3]),De=1;else if((We=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(me))!==null)xe=parseInt(We[1]),ve=parseInt(We[2]),Ee=parseInt(We[3]),De=parseFloat(We[4]);else{if(De=1,typeof me=="string"&&me.charAt(0)!=="#"){var Ae=new zH(me);me=Ae.ok?Ae.toHex():"#000000"}me.length===4?(xe=me.substring(1,2),xe+=xe,ve=me.substring(2,3),ve+=ve,Ee=me.substring(3,4),Ee+=Ee):(xe=me.substring(1,3),ve=me.substring(3,5),Ee=me.substring(5,7)),xe=parseInt(xe,16),ve=parseInt(ve,16),Ee=parseInt(Ee,16)}}return{r:xe,g:ve,b:Ee,a:De,style:me}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(me,xe,ve,Ee){if(isNaN(xe)||isNaN(ve)||typeof me!="string")throw $s.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ee=isNaN(Ee)?void 0:Ee,!_.call(this)){var De=ye(this.ctx.transform.rotation),We=this.ctx.transform.scaleX;Q.call(this,{text:me,x:xe,y:ve,scale:We,angle:De,align:this.textAlign,maxWidth:Ee})}},v.prototype.strokeText=function(me,xe,ve,Ee){if(isNaN(xe)||isNaN(ve)||typeof me!="string")throw $s.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){Ee=isNaN(Ee)?void 0:Ee;var De=ye(this.ctx.transform.rotation),We=this.ctx.transform.scaleX;Q.call(this,{text:me,x:xe,y:ve,scale:We,renderingMode:"stroke",angle:De,align:this.textAlign,maxWidth:Ee})}},v.prototype.measureText=function(me){if(typeof me!="string")throw $s.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var xe=this.pdf,ve=this.pdf.internal.scaleFactor,Ee=xe.internal.getFontSize(),De=xe.getStringUnitWidth(me)*Ee/xe.internal.scaleFactor,We=function(Ae){var ut=(Ae=Ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ut}}),this};return new We({width:De*=Math.round(96*ve/72*1e4)/1e4})},v.prototype.scale=function(me,xe){if(isNaN(me)||isNaN(xe))throw $s.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ve=new c(me,0,0,xe,0,0);this.ctx.transform=this.ctx.transform.multiply(ve)},v.prototype.rotate=function(me){if(isNaN(me))throw $s.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var xe=new c(Math.cos(me),Math.sin(me),-Math.sin(me),Math.cos(me),0,0);this.ctx.transform=this.ctx.transform.multiply(xe)},v.prototype.translate=function(me,xe){if(isNaN(me)||isNaN(xe))throw $s.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ve=new c(1,0,0,1,me,xe);this.ctx.transform=this.ctx.transform.multiply(ve)},v.prototype.transform=function(me,xe,ve,Ee,De,We){if(isNaN(me)||isNaN(xe)||isNaN(ve)||isNaN(Ee)||isNaN(De)||isNaN(We))throw $s.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new c(me,xe,ve,Ee,De,We);this.ctx.transform=this.ctx.transform.multiply(Ae)},v.prototype.setTransform=function(me,xe,ve,Ee,De,We){me=isNaN(me)?1:me,xe=isNaN(xe)?0:xe,ve=isNaN(ve)?0:ve,Ee=isNaN(Ee)?1:Ee,De=isNaN(De)?0:De,We=isNaN(We)?0:We,this.ctx.transform=new c(me,xe,ve,Ee,De,We)};var M=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(me,xe,ve,Ee,De,We,Ae,ut,pt){var st=this.pdf.getImageProperties(me),Ce=1,It=1,Ve=1,yt=1;Ee!==void 0&&ut!==void 0&&(Ve=ut/Ee,yt=pt/De,Ce=st.width/Ee*ut/Ee,It=st.height/De*pt/De),We===void 0&&(We=xe,Ae=ve,xe=0,ve=0),Ee!==void 0&&ut===void 0&&(ut=Ee,pt=De),Ee===void 0&&ut===void 0&&(ut=st.width,pt=st.height);for(var Ze,wt=this.ctx.transform.decompose(),Ut=ye(wt.rotate.shx),ht=new c,qt=(ht=(ht=(ht=ht.multiply(wt.translate)).multiply(wt.skew)).multiply(wt.scale)).applyToRectangle(new a(We-xe*Ve,Ae-ve*yt,Ee*Ce,De*It)),Ye=D.call(this,qt),Re=[],Pt=0;Pt<Ye.length;Pt+=1)Re.indexOf(Ye[Pt])===-1&&Re.push(Ye[Pt]);if(O(Re),this.autoPaging)for(var Dt=Re[0],At=Re[Re.length-1],Bt=Dt;Bt<At+1;Bt++){this.pdf.setPage(Bt);var gn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Zt=Bt===1?this.posY+this.margin[0]:this.margin[0],cn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Et=Bt===1?0:cn+(Bt-2)*$t;if(this.ctx.clip_path.length!==0){var qn=this.path;Ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Ze,this.posX+this.margin[3],-Et+Zt+this.ctx.prevPageLastElemOffset),H.call(this,"fill",!0),this.path=qn}var Dn=JSON.parse(JSON.stringify(qt));Dn=F([Dn],this.posX+this.margin[3],-Et+Zt+this.ctx.prevPageLastElemOffset)[0];var sr=(Bt>Dt||Bt<At)&&M.call(this);sr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gn,$t,null).clip().discardPath()),this.pdf.addImage(me,"JPEG",Dn.x,Dn.y,Dn.w,Dn.h,null,null,Ut),sr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(me,"JPEG",qt.x,qt.y,qt.w,qt.h,null,null,Ut)};var D=function(me,xe,ve){var Ee=[];xe=xe||this.pdf.internal.pageSize.width,ve=ve||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var De=this.posY+this.ctx.prevPageLastElemOffset;switch(me.type){default:case"mt":case"lt":Ee.push(Math.floor((me.y+De)/ve)+1);break;case"arc":Ee.push(Math.floor((me.y+De-me.radius)/ve)+1),Ee.push(Math.floor((me.y+De+me.radius)/ve)+1);break;case"qct":var We=Te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,me.x1,me.y1,me.x,me.y);Ee.push(Math.floor((We.y+De)/ve)+1),Ee.push(Math.floor((We.y+We.h+De)/ve)+1);break;case"bct":var Ae=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,me.x1,me.y1,me.x2,me.y2,me.x,me.y);Ee.push(Math.floor((Ae.y+De)/ve)+1),Ee.push(Math.floor((Ae.y+Ae.h+De)/ve)+1);break;case"rect":Ee.push(Math.floor((me.y+De)/ve)+1),Ee.push(Math.floor((me.y+me.h+De)/ve)+1)}for(var ut=0;ut<Ee.length;ut+=1)for(;this.pdf.internal.getNumberOfPages()<Ee[ut];)A.call(this);return Ee},A=function(){var me=this.fillStyle,xe=this.strokeStyle,ve=this.font,Ee=this.lineCap,De=this.lineWidth,We=this.lineJoin;this.pdf.addPage(),this.fillStyle=me,this.strokeStyle=xe,this.font=ve,this.lineCap=Ee,this.lineWidth=De,this.lineJoin=We},F=function(me,xe,ve){for(var Ee=0;Ee<me.length;Ee++)switch(me[Ee].type){case"bct":me[Ee].x2+=xe,me[Ee].y2+=ve;case"qct":me[Ee].x1+=xe,me[Ee].y1+=ve;case"mt":case"lt":case"arc":default:me[Ee].x+=xe,me[Ee].y+=ve}return me},O=function(me){return me.sort(function(xe,ve){return xe-ve})},N=function(me,xe){for(var ve,Ee,De=this.fillStyle,We=this.strokeStyle,Ae=this.lineCap,ut=this.lineWidth,pt=Math.abs(ut*this.ctx.transform.scaleX),st=this.lineJoin,Ce=JSON.parse(JSON.stringify(this.path)),It=JSON.parse(JSON.stringify(this.path)),Ve=[],yt=0;yt<It.length;yt++)if(It[yt].x!==void 0)for(var Ze=D.call(this,It[yt]),wt=0;wt<Ze.length;wt+=1)Ve.indexOf(Ze[wt])===-1&&Ve.push(Ze[wt]);for(var Ut=0;Ut<Ve.length;Ut++)for(;this.pdf.internal.getNumberOfPages()<Ve[Ut];)A.call(this);if(O(Ve),this.autoPaging)for(var ht=Ve[0],qt=Ve[Ve.length-1],Ye=ht;Ye<qt+1;Ye++){this.pdf.setPage(Ye),this.fillStyle=De,this.strokeStyle=We,this.lineCap=Ae,this.lineWidth=pt,this.lineJoin=st;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pt=Ye===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Bt=Ye===1?0:Dt+(Ye-2)*At;if(this.ctx.clip_path.length!==0){var gn=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(ve,this.posX+this.margin[3],-Bt+Pt+this.ctx.prevPageLastElemOffset),H.call(this,me,!0),this.path=gn}if(Ee=JSON.parse(JSON.stringify(Ce)),this.path=F(Ee,this.posX+this.margin[3],-Bt+Pt+this.ctx.prevPageLastElemOffset),xe===!1||Ye===0){var Zt=(Ye>ht||Ye<qt)&&M.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,At,null).clip().discardPath()),H.call(this,me,xe),Zt&&this.pdf.restoreGraphicsState()}this.lineWidth=ut}else this.lineWidth=pt,H.call(this,me,xe),this.lineWidth=ut;this.path=Ce},H=function(me,xe){if((me!=="stroke"||xe||!E.call(this))&&(me==="stroke"||xe||!_.call(this))){for(var ve,Ee,De=[],We=this.path,Ae=0;Ae<We.length;Ae++){var ut=We[Ae];switch(ut.type){case"begin":De.push({begin:!0});break;case"close":De.push({close:!0});break;case"mt":De.push({start:ut,deltas:[],abs:[]});break;case"lt":var pt=De.length;if(We[Ae-1]&&!isNaN(We[Ae-1].x)&&(ve=[ut.x-We[Ae-1].x,ut.y-We[Ae-1].y],pt>0)){for(;pt>=0;pt--)if(De[pt-1].close!==!0&&De[pt-1].begin!==!0){De[pt-1].deltas.push(ve),De[pt-1].abs.push(ut);break}}break;case"bct":ve=[ut.x1-We[Ae-1].x,ut.y1-We[Ae-1].y,ut.x2-We[Ae-1].x,ut.y2-We[Ae-1].y,ut.x-We[Ae-1].x,ut.y-We[Ae-1].y],De[De.length-1].deltas.push(ve);break;case"qct":var st=We[Ae-1].x+2/3*(ut.x1-We[Ae-1].x),Ce=We[Ae-1].y+2/3*(ut.y1-We[Ae-1].y),It=ut.x+2/3*(ut.x1-ut.x),Ve=ut.y+2/3*(ut.y1-ut.y),yt=ut.x,Ze=ut.y;ve=[st-We[Ae-1].x,Ce-We[Ae-1].y,It-We[Ae-1].x,Ve-We[Ae-1].y,yt-We[Ae-1].x,Ze-We[Ae-1].y],De[De.length-1].deltas.push(ve);break;case"arc":De.push({deltas:[],abs:[],arc:!0}),Array.isArray(De[De.length-1].abs)&&De[De.length-1].abs.push(ut)}}Ee=xe?null:me==="stroke"?"stroke":"fill";for(var wt=!1,Ut=0;Ut<De.length;Ut++)if(De[Ut].arc)for(var ht=De[Ut].abs,qt=0;qt<ht.length;qt++){var Ye=ht[qt];Ye.type==="arc"?X.call(this,Ye.x,Ye.y,Ye.radius,Ye.startAngle,Ye.endAngle,Ye.counterclockwise,void 0,xe,!wt):ie.call(this,Ye.x,Ye.y),wt=!0}else if(De[Ut].close===!0)this.pdf.internal.out("h"),wt=!1;else if(De[Ut].begin!==!0){var Re=De[Ut].start.x,Pt=De[Ut].start.y;ae.call(this,De[Ut].deltas,Re,Pt),wt=!0}Ee&&K.call(this,Ee),xe&&k.call(this)}},G=function(me){var xe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ve=xe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return me-ve;case"top":return me+xe-ve;case"hanging":return me+xe-2*ve;case"middle":return me+xe/2-ve;case"ideographic":return me;case"alphabetic":default:return me}},W=function(me){return me+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var me=function(){};return me.colorStops=[],me.addColorStop=function(xe,ve){this.colorStops.push([xe,ve])},me.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},me.isCanvasGradient=!0,me},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var X=function(me,xe,ve,Ee,De,We,Ae,ut,pt){for(var st=se.call(this,ve,Ee,De,We),Ce=0;Ce<st.length;Ce++){var It=st[Ce];Ce===0&&(pt?$.call(this,It.x1+me,It.y1+xe):ie.call(this,It.x1+me,It.y1+xe)),ce.call(this,me,xe,It.x2,It.y2,It.x3,It.y3,It.x4,It.y4)}ut?k.call(this):K.call(this,Ae)},K=function(me){switch(me){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(me,xe){this.pdf.internal.out(n(me)+" "+r(xe)+" m")},Q=function(me){var xe;switch(me.align){case"right":case"end":xe="right";break;case"center":xe="center";break;case"left":case"start":default:xe="left"}var ve=this.pdf.getTextDimensions(me.text),Ee=G.call(this,me.y),De=W.call(this,Ee)-ve.h,We=this.ctx.transform.applyToPoint(new s(me.x,Ee)),Ae=this.ctx.transform.decompose(),ut=new c;ut=(ut=(ut=ut.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale);for(var pt,st,Ce,It=this.ctx.transform.applyToRectangle(new a(me.x,Ee,ve.w,ve.h)),Ve=ut.applyToRectangle(new a(me.x,De,ve.w,ve.h)),yt=D.call(this,Ve),Ze=[],wt=0;wt<yt.length;wt+=1)Ze.indexOf(yt[wt])===-1&&Ze.push(yt[wt]);if(O(Ze),this.autoPaging)for(var Ut=Ze[0],ht=Ze[Ze.length-1],qt=Ut;qt<ht+1;qt++){this.pdf.setPage(qt);var Ye=qt===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[2],Dt=Pt-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],Bt=At-this.margin[3],gn=qt===1?0:Re+(qt-2)*Dt;if(this.ctx.clip_path.length!==0){var Zt=this.path;pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(pt,this.posX+this.margin[3],-1*gn+Ye),H.call(this,"fill",!0),this.path=Zt}var cn=F([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-gn+Ye+this.ctx.prevPageLastElemOffset)[0];me.scale>=.01&&(st=this.pdf.internal.getFontSize(),this.pdf.setFontSize(st*me.scale),Ce=this.lineWidth,this.lineWidth=Ce*me.scale);var $t=this.autoPaging!=="text";if($t||cn.y+cn.h<=Pt){if($t||cn.y>=Ye&&cn.x<=At){var Et=$t?me.text:this.pdf.splitTextToSize(me.text,me.maxWidth||At-cn.x)[0],qn=F([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-gn+Ye+this.ctx.prevPageLastElemOffset)[0],Dn=$t&&(qt>Ut||qt<ht)&&M.call(this);Dn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,Dt,null).clip().discardPath()),this.pdf.text(Et,qn.x,qn.y,{angle:me.angle,align:xe,renderingMode:me.renderingMode}),Dn&&this.pdf.restoreGraphicsState()}}else cn.y<Pt&&(this.ctx.prevPageLastElemOffset+=Pt-cn.y);me.scale>=.01&&(this.pdf.setFontSize(st),this.lineWidth=Ce)}else me.scale>=.01&&(st=this.pdf.internal.getFontSize(),this.pdf.setFontSize(st*me.scale),Ce=this.lineWidth,this.lineWidth=Ce*me.scale),this.pdf.text(me.text,We.x+this.posX,We.y+this.posY,{angle:me.angle,align:xe,renderingMode:me.renderingMode,maxWidth:me.maxWidth}),me.scale>=.01&&(this.pdf.setFontSize(st),this.lineWidth=Ce)},ie=function(me,xe,ve,Ee){ve=ve||0,Ee=Ee||0,this.pdf.internal.out(n(me+ve)+" "+r(xe+Ee)+" l")},ae=function(me,xe,ve){return this.pdf.lines(me,xe,ve,null,null)},ce=function(me,xe,ve,Ee,De,We,Ae,ut){this.pdf.internal.out([e(i(ve+me)),e(o(Ee+xe)),e(i(De+me)),e(o(We+xe)),e(i(Ae+me)),e(o(ut+xe)),"c"].join(" "))},se=function(me,xe,ve,Ee){for(var De=2*Math.PI,We=Math.PI/2;xe>ve;)xe-=De;var Ae=Math.abs(ve-xe);Ae<De&&Ee&&(Ae=De-Ae);for(var ut=[],pt=Ee?-1:1,st=xe;Ae>1e-5;){var Ce=st+pt*Math.min(Ae,We);ut.push(Se.call(this,me,st,Ce)),Ae-=Math.abs(Ce-st),st=Ce}return ut},Se=function(me,xe,ve){var Ee=(ve-xe)/2,De=me*Math.cos(Ee),We=me*Math.sin(Ee),Ae=De,ut=-We,pt=Ae*Ae+ut*ut,st=pt+Ae*De+ut*We,Ce=4/3*(Math.sqrt(2*pt*st)-st)/(Ae*We-ut*De),It=Ae-Ce*ut,Ve=ut+Ce*Ae,yt=It,Ze=-Ve,wt=Ee+xe,Ut=Math.cos(wt),ht=Math.sin(wt);return{x1:me*Math.cos(xe),y1:me*Math.sin(xe),x2:It*Ut-Ve*ht,y2:It*ht+Ve*Ut,x3:yt*Ut-Ze*ht,y3:yt*ht+Ze*Ut,x4:me*Math.cos(ve),y4:me*Math.sin(ve)}},ye=function(me){return 180*me/Math.PI},Te=function(me,xe,ve,Ee,De,We){var Ae=me+.5*(ve-me),ut=xe+.5*(Ee-xe),pt=De+.5*(ve-De),st=We+.5*(Ee-We),Ce=Math.min(me,De,Ae,pt),It=Math.max(me,De,Ae,pt),Ve=Math.min(xe,We,ut,st),yt=Math.max(xe,We,ut,st);return new a(Ce,Ve,It-Ce,yt-Ve)},pe=function(me,xe,ve,Ee,De,We,Ae,ut){var pt,st,Ce,It,Ve,yt,Ze,wt,Ut,ht,qt,Ye,Re,Pt,Dt=ve-me,At=Ee-xe,Bt=De-ve,gn=We-Ee,Zt=Ae-De,cn=ut-We;for(st=0;st<41;st++)Ut=(Ze=(Ce=me+(pt=st/40)*Dt)+pt*((Ve=ve+pt*Bt)-Ce))+pt*(Ve+pt*(De+pt*Zt-Ve)-Ze),ht=(wt=(It=xe+pt*At)+pt*((yt=Ee+pt*gn)-It))+pt*(yt+pt*(We+pt*cn-yt)-wt),st==0?(qt=Ut,Ye=ht,Re=Ut,Pt=ht):(qt=Math.min(qt,Ut),Ye=Math.min(Ye,ht),Re=Math.max(Re,Ut),Pt=Math.max(Pt,ht));return new a(Math.round(qt),Math.round(Ye),Math.round(Re-qt),Math.round(Pt-Ye))},Ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var me,xe,ve=(me=this.ctx.lineDash,xe=this.ctx.lineDashOffset,JSON.stringify({lineDash:me,lineDashOffset:xe}));this.prevLineDash!==ve&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ve)}}})(ba.API),function(t){var e=function(o){var s,a,c,h,d,v,w,_,E,M;for(a=[],c=0,h=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;h>c;c+=4)(d=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))!==0?(v=(d=((d=((d=((d=(d-(M=d%85))/85)-(E=d%85))/85)-(_=d%85))/85)-(w=d%85))/85)%85,a.push(v+33,w+33,_+33,E+33,M+33)):a.push(122);return function(D,A){for(var F=A;F>0;F--)D.pop()}(a,s.length),String.fromCharCode.apply(String,a)+"~>"},n=function(o){var s,a,c,h,d,v=String,w="length",_=255,E="charCodeAt",M="slice",D="replace";for(o[M](-2),o=o[M](0,-2)[D](/\s/g,"")[D]("z","!!!!!"),c=[],h=0,d=(o+=s="uuuuu"[M](o[w]%5||5))[w];d>h;h+=5)a=52200625*(o[E](h)-33)+614125*(o[E](h+1)-33)+7225*(o[E](h+2)-33)+85*(o[E](h+3)-33)+(o[E](h+4)-33),c.push(_&a>>24,_&a>>16,_&a>>8,_&a);return function(A,F){for(var O=F;O>0;O--)A.pop()}(c,s[w]),v.fromCharCode.apply(v,c)},r=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var a="",c=0;c<o.length;c+=2)a+=String.fromCharCode("0x"+(o[c]+o[c+1]));return a},i=function(o){for(var s=new Uint8Array(o.length),a=o.length;a--;)s[a]=o.charCodeAt(a);return o=(s=gD(s)).reduce(function(c,h){return c+String.fromCharCode(h)},"")};t.processDataByFilters=function(o,s){var a=0,c=o||"",h=[];for(typeof(s=s||[])=="string"&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:c,reverseChain:h.reverse().join(" ")}}}(ba.API),function(t){t.loadFile=function(e,n,r){return function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=function(c,h,d){var v=new XMLHttpRequest,w=0,_=function(E){var M=E.length,D=[],A=String.fromCharCode;for(w=0;w<M;w+=1)D.push(A(255&E.charCodeAt(w)));return D.join("")};if(v.open("GET",c,!h),v.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(v.onload=function(){v.status===200?d(_(this.responseText)):d(void 0)}),v.send(null),h&&v.status===200)return _(v.responseText)}(i,o,s)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(ba.API),function(t){function e(){return(wa.html2canvas?Promise.resolve(wa.html2canvas):cD(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function n(){return(wa.DOMPurify?Promise.resolve(wa.DOMPurify):cD(()=>import("./purify.es-Ci5xwkH_.js"),[],import.meta.url)).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var a=bs(s);return a==="undefined"?"undefined":a==="string"||s instanceof String?"string":a==="number"||s instanceof Number?"number":a==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(s,a){var c=document.createElement(s);for(var h in a.className&&(c.className=a.className),a.innerHTML&&a.dompurify&&(c.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)c.style[h]=a.style[h];return c},o=function s(a){var c=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),h=s.convert(Promise.resolve(),c);return h=(h=h.setProgress(1,s,1,[s])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,a){return s.__proto__=a||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,a){return this.then(function(){switch(a=a||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:s,dompurify:c})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function c(h,d){for(var v=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),w=h.firstChild;w;w=w.nextSibling)d!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||v.appendChild(c(w,d));return h.nodeType===1&&(h.nodeName==="CANVAS"?(v.width=h.width,v.height=h.height,v.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(v.value=h.value),v.addEventListener("load",function(){v.scrollTop=h.scrollTop,v.scrollLeft=h.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,a(this.prop.container,c)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var c=this.opt.jsPDF,h=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=h,h)for(var w=0;w<h.length;++w){var _=h[w],E=_.src.find(function(M){return M.format==="truetype"});E&&c.addFont(E.url,_.ref.name,_.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,c.context2d.save(!0),a(this.prop.container,v)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,a,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(s,a):this.outputPdf(s,a)},o.prototype.outputPdf=function(s,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,a)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(r(s)!=="object")return this;var a=Object.keys(s||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=s[c]};switch(c){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[c]=s[c]}}},this);return this.then(function(){return this.thenList(a)})},o.prototype.get=function(s,a){return this.then(function(){var c=s in o.template.prop?this.prop[s]:this.opt[s];return a?a(c):c})},o.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function a(c,h){return Math.floor(c*h/72*96)}return this.then(function(){(s=s||ba.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:a(s.inner.width,s.k),height:a(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,a,c,h){return s!=null&&(this.progress.val=s),a!=null&&(this.progress.state=a),c!=null&&(this.progress.n=c),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,a,c,h){return this.setProgress(s?this.progress.val+s:null,a||null,c?this.progress.n+c:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(s,a){var c=this;return this.thenCore(s,a,function(h,d){return c.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(v){return c.updateProgress(null,h),v}).then(h,d).then(function(v){return c.updateProgress(1),v})})},o.prototype.thenCore=function(s,a,c){c=c||Promise.prototype.then,s&&(s=s.bind(this)),a&&(a=a.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),d=c.call(h,s,a);return o.convert(d,this.__proto__)},o.prototype.thenExternal=function(s,a){return Promise.prototype.then.call(this,s,a)},o.prototype.thenList=function(s){var a=this;return s.forEach(function(c){a=a.thenCore(c)}),a},o.prototype.catch=function(s){s&&(s=s.bind(this));var a=Promise.prototype.catch.call(this,s);return o.convert(a,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,ba.getPageSize=function(s,a,c){if(bs(s)==="object"){var h=s;s=h.orientation,a=h.unit||a,c=h.format||c}a=a||"mm",c=c||"a4",s=(""+(s||"P")).toLowerCase();var d,v=(""+c).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var _,E=0,M=0;if(w.hasOwnProperty(v))E=w[v][1]/d,M=w[v][0]/d;else try{E=c[1],M=c[0]}catch{throw new Error("Invalid format: "+c)}if(s==="p"||s==="portrait")s="p",M>E&&(_=M,M=E,E=_);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",E>M&&(_=M,M=E,E=_)}return{width:M,height:E,unit:a,k:d,orientation:s}},t.html=function(s,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(bD):null;var c=new o(a);return a.worker?c:c.from(s).doCallback()}}(ba.API),ba.API.addJS=function(t){return iB=t,this.internal.events.subscribe("postPutResources",function(){dE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(dE+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),rB=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+iB+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){dE!==void 0&&rB!==void 0&&this.internal.out("/Names <</JavaScript "+dE+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var c=a[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,d=[];for(o=0;o<h;o++){var v=n.internal.newObject();d.push(v);var w=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var _=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<d.length;o++)n.internal.write("(page_"+(o+1)+")"+d[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+_+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var c=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])}(ba.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,o,s,a){var c,h=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(v){for(var w,_=256*v.charCodeAt(4)+v.charCodeAt(5),E=v.length,M={width:0,height:0,numcomponents:1},D=4;D<E;D+=2){if(D+=_,e.indexOf(v.charCodeAt(D+1))!==-1){w=256*v.charCodeAt(D+5)+v.charCodeAt(D+6),M={width:256*v.charCodeAt(D+7)+v.charCodeAt(D+8),height:w,numcomponents:v.charCodeAt(D+9)};break}_=256*v.charCodeAt(D+2)+v.charCodeAt(D+3)}return M}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:h,index:r,alias:i}}return d}}(ba.API);var k_,pE,aB,oB,sB,Jhe=function(){var t,e,n;function r(o){var s,a,c,h,d,v,w,_,E,M,D,A,F,O;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(s=this.readUInt32(),E=(function(){var N,H;for(H=[],N=0;N<4;++N)H.push(String.fromCharCode(this.data[this.pos++]));return H}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),h=this.readUInt16()||100,v.delay=1e3*d/h,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(E==="fdAT"&&(this.pos+=4,s-=4),o=(v!=null?v.data:void 0)||this.imgData,A=0;0<=s?A<s:A>s;0<=s?++A:--A)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((M=c-this.transparency.indexed.length)>0)for(F=0;0<=M?F<M:F>M;0<=M?++F:--F)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":w=(D=this.read(s)).indexOf(0),_=String.fromCharCode.apply(String,D.slice(0,w)),this.text[_]=String.fromCharCode.apply(String,D.slice(w+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(O=this.colorType)===4||O===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var s,a;for(a=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*s),c=0,h=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function d(v,w,_,E){var M,D,A,F,O,N,H,G,W,X,K,k,$,Q,ie,ae,ce,se,Se,ye,Te,pe=Math.ceil((h.width-v)/_),Ie=Math.ceil((h.height-w)/E),me=h.width==pe&&h.height==Ie;for(Q=s*pe,k=me?a:new Uint8Array(Q*Ie),N=o.length,$=0,D=0;$<Ie&&c<N;){switch(o[c++]){case 0:for(F=ce=0;ce<Q;F=ce+=1)k[D++]=o[c++];break;case 1:for(F=se=0;se<Q;F=se+=1)M=o[c++],O=F<s?0:k[D-s],k[D++]=(M+O)%256;break;case 2:for(F=Se=0;Se<Q;F=Se+=1)M=o[c++],A=(F-F%s)/s,ie=$&&k[($-1)*Q+A*s+F%s],k[D++]=(ie+M)%256;break;case 3:for(F=ye=0;ye<Q;F=ye+=1)M=o[c++],A=(F-F%s)/s,O=F<s?0:k[D-s],ie=$&&k[($-1)*Q+A*s+F%s],k[D++]=(M+Math.floor((O+ie)/2))%256;break;case 4:for(F=Te=0;Te<Q;F=Te+=1)M=o[c++],A=(F-F%s)/s,O=F<s?0:k[D-s],$===0?ie=ae=0:(ie=k[($-1)*Q+A*s+F%s],ae=A&&k[($-1)*Q+(A-1)*s+F%s]),H=O+ie-ae,G=Math.abs(H-O),X=Math.abs(H-ie),K=Math.abs(H-ae),W=G<=X&&G<=K?O:X<=K?ie:ae,k[D++]=(M+W)%256;break;default:throw new Error("Invalid filter algorithm: "+o[c-1])}if(!me){var xe=((w+$*E)*h.width+v)*s,ve=$*Q;for(F=0;F<pe;F+=1){for(var Ee=0;Ee<s;Ee+=1)a[xe++]=k[ve++];xe+=(_-1)*s}}$++}}return o=Phe(o),h.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var o,s,a,c,h,d,v,w,_;for(a=this.palette,d=this.transparency.indexed||[],h=new Uint8Array((d.length||0)+a.length),c=0,o=0,s=v=0,w=a.length;v<w;s=v+=3)h[c++]=a[s],h[c++]=a[s+1],h[c++]=a[s+2],h[c++]=(_=d[o++])!=null?_:255;return h},r.prototype.copyToImageData=function(o,s){var a,c,h,d,v,w,_,E,M,D,A;if(c=this.colors,M=null,a=this.hasAlphaChannel,this.palette.length&&(M=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),c=4,a=!0),E=(h=o.data||o).length,v=M||s,d=w=0,c===1)for(;d<E;)_=M?4*s[d/4]:w,D=v[_++],h[d++]=D,h[d++]=D,h[d++]=D,h[d++]=a?v[_++]:255,w=_;else for(;d<E;)_=M?4*s[d/4]:w,h[d++]=v[_++],h[d++]=v[_++],h[d++]=v[_++],h[d++]=a?v[_++]:255,w=_},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(wa)==="[object Window]"){try{e=wa.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(o){var s;if(i()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var s,a,c,h,d,v,w,_;if(this.animation){for(_=[],a=d=0,v=(w=this.animation.frames).length;d<v;a=++d)s=w[a],c=o.createImageData(s.width,s.height),h=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(c,h),s.imageData=c,_.push(s.image=t(c));return _}},r.prototype.renderFrame=function(o,s){var a,c,h;return a=(c=this.animation.frames)[s],h=c[s-1],s===0&&o.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?o.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&o.putImageData(h.imageData,h.xOffset,h.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(o){var s,a,c,h,d,v,w=this;return a=0,v=this.animation,h=v.numFrames,c=v.frames,d=v.numPlays,(s=function(){var _,E;if(_=a++%h,E=c[_],w.renderFrame(o,_),h>1&&a/h<d)return w.animation._timeout=setTimeout(s,E.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var s,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(a=s.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),s.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Qhe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,s=1<<(7&i)+1;t[e++],t[e++];var a=null,c=null;o&&(a=e,c=s,e+=3*s);var h=!0,d=[],v=0,w=null,_=0,E=null;for(this.width=n,this.height=r;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,E=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var M=t[e++];v=t[e++]|t[e++]<<8,w=t[e++],(1&M)==0&&(w=null),_=M>>2&7,e++;break;case 254:for(;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var D=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,O=t[e++]|t[e++]<<8,N=t[e++],H=N>>6&1,G=1<<(7&N)+1,W=a,X=c,K=!1;N>>7&&(K=!0,W=e,X=G,e+=3*G);var k=e;for(e++;;){var $;if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}d.push({x:D,y:A,width:F,height:O,has_local_palette:K,palette_offset:W,palette_size:X,data_offset:k,data_length:e-k,transparent_index:w,interlaced:!!H,delay:v,disposal:_});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return E},this.frameInfo=function(Q){if(Q<0||Q>=d.length)throw new Error("Frame index out of range.");return d[Q]},this.decodeAndBlitFrameBGRA=function(Q,ie){var ae=this.frameInfo(Q),ce=ae.width*ae.height,se=new Uint8Array(ce);lB(t,ae.data_offset,se,ce);var Se=ae.palette_offset,ye=ae.transparent_index;ye===null&&(ye=256);var Te=ae.width,pe=n-Te,Ie=Te,me=4*(ae.y*n+ae.x),xe=4*((ae.y+ae.height)*n+ae.x),ve=me,Ee=4*pe;ae.interlaced===!0&&(Ee+=4*n*7);for(var De=8,We=0,Ae=se.length;We<Ae;++We){var ut=se[We];if(Ie===0&&(Ie=Te,(ve+=Ee)>=xe&&(Ee=4*pe+4*n*(De-1),ve=me+(Te+pe)*(De<<1),De>>=1)),ut===ye)ve+=4;else{var pt=t[Se+3*ut],st=t[Se+3*ut+1],Ce=t[Se+3*ut+2];ie[ve++]=Ce,ie[ve++]=st,ie[ve++]=pt,ie[ve++]=255}--Ie}},this.decodeAndBlitFrameRGBA=function(Q,ie){var ae=this.frameInfo(Q),ce=ae.width*ae.height,se=new Uint8Array(ce);lB(t,ae.data_offset,se,ce);var Se=ae.palette_offset,ye=ae.transparent_index;ye===null&&(ye=256);var Te=ae.width,pe=n-Te,Ie=Te,me=4*(ae.y*n+ae.x),xe=4*((ae.y+ae.height)*n+ae.x),ve=me,Ee=4*pe;ae.interlaced===!0&&(Ee+=4*n*7);for(var De=8,We=0,Ae=se.length;We<Ae;++We){var ut=se[We];if(Ie===0&&(Ie=Te,(ve+=Ee)>=xe&&(Ee=4*pe+4*n*(De-1),ve=me+(Te+pe)*(De<<1),De>>=1)),ut===ye)ve+=4;else{var pt=t[Se+3*ut],st=t[Se+3*ut+1],Ce=t[Se+3*ut+2];ie[ve++]=pt,ie[ve++]=st,ie[ve++]=Ce,ie[ve++]=255}--Ie}}}function lB(t,e,n,r){for(var i=t[e++],o=1<<i,s=o+1,a=s+1,c=i+1,h=(1<<c)-1,d=0,v=0,w=0,_=t[e++],E=new Int32Array(4096),M=null;;){for(;d<16&&_!==0;)v|=t[e++]<<d,d+=8,_===1?_=t[e++]:--_;if(d<c)break;var D=v&h;if(v>>=c,d-=c,D!==o){if(D===s)break;for(var A=D<a?D:M,F=0,O=A;O>o;)O=E[O]>>8,++F;var N=O;if(w+F+(A!==D?1:0)>r)return void $s.log("Warning, gif stream longer than expected.");n[w++]=N;var H=w+=F;for(A!==D&&(n[w++]=N),O=A;F--;)O=E[O],n[--H]=255&O,O>>=8;M!==null&&a<4096&&(E[a++]=M<<8|N,a>=h+1&&c<12&&(++c,h=h<<1|1)),M=D}else a=s+1,h=(1<<(c=i+1))-1,M=null}return w!==r&&$s.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function v5(t){var e,n,r,i,o,s=Math.floor,a=new Array(64),c=new Array(64),h=new Array(64),d=new Array(64),v=new Array(65535),w=new Array(65535),_=new Array(64),E=new Array(64),M=[],D=0,A=7,F=new Array(64),O=new Array(64),N=new Array(64),H=new Array(256),G=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],X=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ie=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(me,xe){for(var ve=0,Ee=0,De=new Array,We=1;We<=16;We++){for(var Ae=1;Ae<=me[We];Ae++)De[xe[Ee]]=[],De[xe[Ee]][0]=ve,De[xe[Ee]][1]=We,Ee++,ve++;ve*=2}return De}function Se(me){for(var xe=me[0],ve=me[1]-1;ve>=0;)xe&1<<ve&&(D|=1<<A),ve--,--A<0&&(D==255?(ye(255),ye(0)):ye(D),A=7,D=0)}function ye(me){M.push(me)}function Te(me){ye(me>>8&255),ye(255&me)}function pe(me,xe,ve,Ee,De){for(var We,Ae=De[0],ut=De[240],pt=function(ht,qt){var Ye,Re,Pt,Dt,At,Bt,gn,Zt,cn,$t,Et=0;for(cn=0;cn<8;++cn){Ye=ht[Et],Re=ht[Et+1],Pt=ht[Et+2],Dt=ht[Et+3],At=ht[Et+4],Bt=ht[Et+5],gn=ht[Et+6];var qn=Ye+(Zt=ht[Et+7]),Dn=Ye-Zt,sr=Re+gn,rt=Re-gn,ze=Pt+Bt,Xe=Pt-Bt,Fe=Dt+At,He=Dt-At,mt=qn+Fe,it=qn-Fe,xt=sr+ze,Tt=sr-ze;ht[Et]=mt+xt,ht[Et+4]=mt-xt;var kt=.707106781*(Tt+it);ht[Et+2]=it+kt,ht[Et+6]=it-kt;var Jt=.382683433*((mt=He+Xe)-(Tt=rt+Dn)),rn=.5411961*mt+Jt,Yt=1.306562965*Tt+Jt,Qn=.707106781*(xt=Xe+rt),An=Dn+Qn,jt=Dn-Qn;ht[Et+5]=jt+rn,ht[Et+3]=jt-rn,ht[Et+1]=An+Yt,ht[Et+7]=An-Yt,Et+=8}for(Et=0,cn=0;cn<8;++cn){Ye=ht[Et],Re=ht[Et+8],Pt=ht[Et+16],Dt=ht[Et+24],At=ht[Et+32],Bt=ht[Et+40],gn=ht[Et+48];var Pe=Ye+(Zt=ht[Et+56]),je=Ye-Zt,_t=Re+gn,Qt=Re-gn,en=Pt+Bt,Fn=Pt-Bt,Wn=Dt+At,kr=Dt-At,Qr=Pe+Wn,vi=Pe-Wn,zr=_t+en,zn=_t-en;ht[Et]=Qr+zr,ht[Et+32]=Qr-zr;var En=.707106781*(zn+vi);ht[Et+16]=vi+En,ht[Et+48]=vi-En;var mr=.382683433*((Qr=kr+Fn)-(zn=Qt+je)),yi=.5411961*Qr+mr,_i=1.306562965*zn+mr,gi=.707106781*(zr=Fn+Qt),lt=je+gi,yn=je-gi;ht[Et+40]=yn+yi,ht[Et+24]=yn-yi,ht[Et+8]=lt+_i,ht[Et+56]=lt-_i,Et++}for(cn=0;cn<64;++cn)$t=ht[cn]*qt[cn],_[cn]=$t>0?$t+.5|0:$t-.5|0;return _}(me,xe),st=0;st<64;++st)E[W[st]]=pt[st];var Ce=E[0]-ve;ve=E[0],Ce==0?Se(Ee[0]):(Se(Ee[w[We=32767+Ce]]),Se(v[We]));for(var It=63;It>0&&E[It]==0;)It--;if(It==0)return Se(Ae),ve;for(var Ve,yt=1;yt<=It;){for(var Ze=yt;E[yt]==0&&yt<=It;)++yt;var wt=yt-Ze;if(wt>=16){Ve=wt>>4;for(var Ut=1;Ut<=Ve;++Ut)Se(ut);wt&=15}We=32767+E[yt],Se(De[(wt<<4)+w[We]]),Se(v[We]),yt++}return It!=63&&Se(Ae),ve}function Ie(me){me=Math.min(Math.max(me,1),100),o!=me&&(function(xe){for(var ve=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ee=0;Ee<64;Ee++){var De=s((ve[Ee]*xe+50)/100);De=Math.min(Math.max(De,1),255),a[W[Ee]]=De}for(var We=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var ut=s((We[Ae]*xe+50)/100);ut=Math.min(Math.max(ut,1),255),c[W[Ae]]=ut}for(var pt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],st=0,Ce=0;Ce<8;Ce++)for(var It=0;It<8;It++)h[st]=1/(a[W[st]]*pt[Ce]*pt[It]*8),d[st]=1/(c[W[st]]*pt[Ce]*pt[It]*8),st++}(me<50?Math.floor(5e3/me):Math.floor(200-2*me)),o=me)}this.encode=function(me,xe){xe&&Ie(xe),M=new Array,D=0,A=7,Te(65496),Te(65504),Te(16),ye(74),ye(70),ye(73),ye(70),ye(0),ye(1),ye(1),ye(0),Te(1),Te(1),ye(0),ye(0),function(){Te(65499),Te(132),ye(0);for(var Re=0;Re<64;Re++)ye(a[Re]);ye(1);for(var Pt=0;Pt<64;Pt++)ye(c[Pt])}(),function(Re,Pt){Te(65472),Te(17),ye(8),Te(Pt),Te(Re),ye(3),ye(1),ye(17),ye(0),ye(2),ye(17),ye(1),ye(3),ye(17),ye(1)}(me.width,me.height),function(){Te(65476),Te(418),ye(0);for(var Re=0;Re<16;Re++)ye(X[Re+1]);for(var Pt=0;Pt<=11;Pt++)ye(K[Pt]);ye(16);for(var Dt=0;Dt<16;Dt++)ye(k[Dt+1]);for(var At=0;At<=161;At++)ye($[At]);ye(1);for(var Bt=0;Bt<16;Bt++)ye(Q[Bt+1]);for(var gn=0;gn<=11;gn++)ye(ie[gn]);ye(17);for(var Zt=0;Zt<16;Zt++)ye(ae[Zt+1]);for(var cn=0;cn<=161;cn++)ye(ce[cn])}(),Te(65498),Te(12),ye(3),ye(1),ye(0),ye(2),ye(17),ye(3),ye(17),ye(0),ye(63),ye(0);var ve=0,Ee=0,De=0;D=0,A=7,this.encode.displayName="_encode_";for(var We,Ae,ut,pt,st,Ce,It,Ve,yt,Ze=me.data,wt=me.width,Ut=me.height,ht=4*wt,qt=0;qt<Ut;){for(We=0;We<ht;){for(st=ht*qt+We,It=-1,Ve=0,yt=0;yt<64;yt++)Ce=st+(Ve=yt>>3)*ht+(It=4*(7&yt)),qt+Ve>=Ut&&(Ce-=ht*(qt+1+Ve-Ut)),We+It>=ht&&(Ce-=We+It-ht+4),Ae=Ze[Ce++],ut=Ze[Ce++],pt=Ze[Ce++],F[yt]=(G[Ae]+G[ut+256>>0]+G[pt+512>>0]>>16)-128,O[yt]=(G[Ae+768>>0]+G[ut+1024>>0]+G[pt+1280>>0]>>16)-128,N[yt]=(G[Ae+1280>>0]+G[ut+1536>>0]+G[pt+1792>>0]>>16)-128;ve=pe(F,h,ve,e,r),Ee=pe(O,d,Ee,n,i),De=pe(N,d,De,n,i),We+=32}qt+=8}if(A>=0){var Ye=[];Ye[1]=A+1,Ye[0]=(1<<A+1)-1,Se(Ye)}return Te(65497),new Uint8Array(M)},t=t||50,function(){for(var me=String.fromCharCode,xe=0;xe<256;xe++)H[xe]=me(xe)}(),e=se(X,K),n=se(Q,ie),r=se(k,$),i=se(ae,ce),function(){for(var me=1,xe=2,ve=1;ve<=15;ve++){for(var Ee=me;Ee<xe;Ee++)w[32767+Ee]=ve,v[32767+Ee]=[],v[32767+Ee][1]=ve,v[32767+Ee][0]=Ee;for(var De=-(xe-1);De<=-me;De++)w[32767+De]=ve,v[32767+De]=[],v[32767+De][1]=ve,v[32767+De][0]=xe-1+De;me<<=1,xe<<=1}}(),function(){for(var me=0;me<256;me++)G[me]=19595*me,G[me+256>>0]=38470*me,G[me+512>>0]=7471*me+32768,G[me+768>>0]=-11059*me,G[me+1024>>0]=-21709*me,G[me+1280>>0]=32768*me+8421375,G[me+1536>>0]=-27439*me,G[me+1792>>0]=-5329*me}(),Ie(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function rp(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function uB(t){function e(X){if(!X)throw Error("assert :P")}function n(X,K,k){for(var $=0;4>$;$++)if(X[K+$]!=k.charCodeAt($))return!0;return!1}function r(X,K,k,$,Q){for(var ie=0;ie<Q;ie++)X[K+ie]=k[$+ie]}function i(X,K,k,$){for(var Q=0;Q<$;Q++)X[K+Q]=k}function o(X){return new Int32Array(X)}function s(X,K){for(var k=[],$=0;$<X;$++)k.push(new K);return k}function a(X,K){var k=[];return function $(Q,ie,ae){for(var ce=ae[ie],se=0;se<ce&&(Q.push(ae.length>ie+1?[]:new K),!(ae.length<ie+1));se++)$(Q[se],ie+1,ae)}(k,0,X),k}var c=function(){var X=this;function K(q,te){for(var _e=1<<te-1>>>0;q&_e;)_e>>>=1;return _e?(q&_e-1)+_e:q}function k(q,te,_e,Oe,at){e(!(Oe%_e));do q[te+(Oe-=_e)]=at;while(0<Oe)}function $(q,te,_e,Oe,at){if(e(2328>=at),512>=at)var gt=o(512);else if((gt=o(at))==null)return 0;return function(vt,bt,Mt,Vt,vn,Hn){var Gn,Rn,ar=bt,Jn=1<<Mt,_n=o(16),Cn=o(16);for(e(vn!=0),e(Vt!=null),e(vt!=null),e(0<Mt),Rn=0;Rn<vn;++Rn){if(15<Vt[Rn])return 0;++_n[Vt[Rn]]}if(_n[0]==vn)return 0;for(Cn[1]=0,Gn=1;15>Gn;++Gn){if(_n[Gn]>1<<Gn)return 0;Cn[Gn+1]=Cn[Gn]+_n[Gn]}for(Rn=0;Rn<vn;++Rn)Gn=Vt[Rn],0<Vt[Rn]&&(Hn[Cn[Gn]++]=Rn);if(Cn[15]==1)return(Vt=new Q).g=0,Vt.value=Hn[0],k(vt,ar,1,Jn,Vt),Jn;var gr,Ar=-1,Er=Jn-1,ti=0,Zr=1,yr=1,or=1<<Mt;for(Rn=0,Gn=1,vn=2;Gn<=Mt;++Gn,vn<<=1){if(Zr+=yr<<=1,0>(yr-=_n[Gn]))return 0;for(;0<_n[Gn];--_n[Gn])(Vt=new Q).g=Gn,Vt.value=Hn[Rn++],k(vt,ar+ti,vn,or,Vt),ti=K(ti,Gn)}for(Gn=Mt+1,vn=2;15>=Gn;++Gn,vn<<=1){if(Zr+=yr<<=1,0>(yr-=_n[Gn]))return 0;for(;0<_n[Gn];--_n[Gn]){if(Vt=new Q,(ti&Er)!=Ar){for(ar+=or,gr=1<<(Ar=Gn)-Mt;15>Ar&&!(0>=(gr-=_n[Ar]));)++Ar,gr<<=1;Jn+=or=1<<(gr=Ar-Mt),vt[bt+(Ar=ti&Er)].g=gr+Mt,vt[bt+Ar].value=ar-bt-Ar}Vt.g=Gn-Mt,Vt.value=Hn[Rn++],k(vt,ar+(ti>>Mt),vn,or,Vt),ti=K(ti,Gn)}}return Zr!=2*Cn[15]-1?0:Jn}(q,te,_e,Oe,at,gt)}function Q(){this.value=this.g=0}function ie(){this.value=this.g=0}function ae(){this.G=s(5,Q),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(io,ie)}function ce(q,te,_e,Oe){e(q!=null),e(te!=null),e(2147483648>Oe),q.Ca=254,q.I=0,q.b=-8,q.Ka=0,q.oa=te,q.pa=_e,q.Jd=te,q.Yc=_e+Oe,q.Zc=4<=Oe?_e+Oe-4+1:_e,We(q)}function se(q,te){for(var _e=0;0<te--;)_e|=ut(q,128)<<te;return _e}function Se(q,te){var _e=se(q,te);return Ae(q)?-_e:_e}function ye(q,te,_e,Oe){var at,gt=0;for(e(q!=null),e(te!=null),e(4294967288>Oe),q.Sb=Oe,q.Ra=0,q.u=0,q.h=0,4<Oe&&(Oe=4),at=0;at<Oe;++at)gt+=te[_e+at]<<8*at;q.Ra=gt,q.bb=Oe,q.oa=te,q.pa=_e}function Te(q){for(;8<=q.u&&q.bb<q.Sb;)q.Ra>>>=8,q.Ra+=q.oa[q.pa+q.bb]<<Cs-8>>>0,++q.bb,q.u-=8;ve(q)&&(q.h=1,q.u=0)}function pe(q,te){if(e(0<=te),!q.h&&te<=Zs){var _e=xe(q)&Gu[te];return q.u+=te,Te(q),_e}return q.h=1,q.u=0}function Ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function me(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function xe(q){return q.Ra>>>(q.u&Cs-1)>>>0}function ve(q){return e(q.bb<=q.Sb),q.h||q.bb==q.Sb&&q.u>Cs}function Ee(q,te){q.u=te,q.h=ve(q)}function De(q){q.u>=Vu&&(e(q.u>=Vu),Te(q))}function We(q){e(q!=null&&q.oa!=null),q.pa<q.Zc?(q.I=(q.oa[q.pa++]|q.I<<8)>>>0,q.b+=8):(e(q!=null&&q.oa!=null),q.pa<q.Yc?(q.b+=8,q.I=q.oa[q.pa++]|q.I<<8):q.Ka?q.b=0:(q.I<<=8,q.b+=8,q.Ka=1))}function Ae(q){return se(q,1)}function ut(q,te){var _e=q.Ca;0>q.b&&We(q);var Oe=q.b,at=_e*te>>>8,gt=(q.I>>>Oe>at)+0;for(gt?(_e-=at,q.I-=at+1<<Oe>>>0):_e=at+1,Oe=_e,at=0;256<=Oe;)at+=8,Oe>>=8;return Oe=7^at+rs[Oe],q.b-=Oe,q.Ca=(_e<<Oe)-1,gt}function pt(q,te,_e){q[te+0]=_e>>24&255,q[te+1]=_e>>16&255,q[te+2]=_e>>8&255,q[te+3]=_e>>0&255}function st(q,te){return q[te+0]<<0|q[te+1]<<8}function Ce(q,te){return st(q,te)|q[te+2]<<16}function It(q,te){return st(q,te)|st(q,te+2)<<16}function Ve(q,te){var _e=1<<te;return e(q!=null),e(0<te),q.X=o(_e),q.X==null?0:(q.Mb=32-te,q.Xa=te,1)}function yt(q,te){e(q!=null),e(te!=null),e(q.Xa==te.Xa),r(te.X,0,q.X,0,1<<te.Xa)}function Ze(){this.X=[],this.Xa=this.Mb=0}function wt(q,te,_e,Oe){e(_e!=null),e(Oe!=null);var at=_e[0],gt=Oe[0];return at==0&&(at=(q*gt+te/2)/te),gt==0&&(gt=(te*at+q/2)/q),0>=at||0>=gt?0:(_e[0]=at,Oe[0]=gt,1)}function Ut(q,te){return q+(1<<te)-1>>>te}function ht(q,te){return((4278255360&q)+(4278255360&te)>>>0&4278255360)+((16711935&q)+(16711935&te)>>>0&16711935)>>>0}function qt(q,te){X[te]=function(_e,Oe,at,gt,vt,bt,Mt){var Vt;for(Vt=0;Vt<vt;++Vt){var vn=X[q](bt[Mt+Vt-1],at,gt+Vt);bt[Mt+Vt]=ht(_e[Oe+Vt],vn)}}}function Ye(){this.ud=this.hd=this.jd=0}function Re(q,te){return((4278124286&(q^te))>>>1)+(q&te)>>>0}function Pt(q){return 0<=q&&256>q?q:0>q?0:255<q?255:void 0}function Dt(q,te){return Pt(q+(q-te+.5>>1))}function At(q,te,_e){return Math.abs(te-_e)-Math.abs(q-_e)}function Bt(q,te,_e,Oe,at,gt,vt){for(Oe=gt[vt-1],_e=0;_e<at;++_e)gt[vt+_e]=Oe=ht(q[te+_e],Oe)}function gn(q,te,_e,Oe,at){var gt;for(gt=0;gt<_e;++gt){var vt=q[te+gt],bt=vt>>8&255,Mt=16711935&(Mt=(Mt=16711935&vt)+((bt<<16)+bt));Oe[at+gt]=(4278255360&vt)+Mt>>>0}}function Zt(q,te){te.jd=q>>0&255,te.hd=q>>8&255,te.ud=q>>16&255}function cn(q,te,_e,Oe,at,gt){var vt;for(vt=0;vt<Oe;++vt){var bt=te[_e+vt],Mt=bt>>>8,Vt=bt,vn=255&(vn=(vn=bt>>>16)+((q.jd<<24>>24)*(Mt<<24>>24)>>>5));Vt=255&(Vt=(Vt=Vt+((q.hd<<24>>24)*(Mt<<24>>24)>>>5))+((q.ud<<24>>24)*(vn<<24>>24)>>>5)),at[gt+vt]=(4278255360&bt)+(vn<<16)+Vt}}function $t(q,te,_e,Oe,at){X[te]=function(gt,vt,bt,Mt,Vt,vn,Hn,Gn,Rn){for(Mt=Hn;Mt<Gn;++Mt)for(Hn=0;Hn<Rn;++Hn)Vt[vn++]=at(bt[Oe(gt[vt++])])},X[q]=function(gt,vt,bt,Mt,Vt,vn,Hn){var Gn=8>>gt.b,Rn=gt.Ea,ar=gt.K[0],Jn=gt.w;if(8>Gn)for(gt=(1<<gt.b)-1,Jn=(1<<Gn)-1;vt<bt;++vt){var _n,Cn=0;for(_n=0;_n<Rn;++_n)_n&gt||(Cn=Oe(Mt[Vt++])),vn[Hn++]=at(ar[Cn&Jn]),Cn>>=Gn}else X["VP8LMapColor"+_e](Mt,Vt,ar,Jn,vn,Hn,vt,bt,Rn)}}function Et(q,te,_e,Oe,at){for(_e=te+_e;te<_e;){var gt=q[te++];Oe[at++]=gt>>16&255,Oe[at++]=gt>>8&255,Oe[at++]=gt>>0&255}}function qn(q,te,_e,Oe,at){for(_e=te+_e;te<_e;){var gt=q[te++];Oe[at++]=gt>>16&255,Oe[at++]=gt>>8&255,Oe[at++]=gt>>0&255,Oe[at++]=gt>>24&255}}function Dn(q,te,_e,Oe,at){for(_e=te+_e;te<_e;){var gt=(vt=q[te++])>>16&240|vt>>12&15,vt=vt>>0&240|vt>>28&15;Oe[at++]=gt,Oe[at++]=vt}}function sr(q,te,_e,Oe,at){for(_e=te+_e;te<_e;){var gt=(vt=q[te++])>>16&248|vt>>13&7,vt=vt>>5&224|vt>>3&31;Oe[at++]=gt,Oe[at++]=vt}}function rt(q,te,_e,Oe,at){for(_e=te+_e;te<_e;){var gt=q[te++];Oe[at++]=gt>>0&255,Oe[at++]=gt>>8&255,Oe[at++]=gt>>16&255}}function ze(q,te,_e,Oe,at,gt){if(gt==0)for(_e=te+_e;te<_e;)pt(Oe,((gt=q[te++])[0]>>24|gt[1]>>8&65280|gt[2]<<8&16711680|gt[3]<<24)>>>0),at+=32;else r(Oe,at,q,te,_e)}function Xe(q,te){X[te][0]=X[q+"0"],X[te][1]=X[q+"1"],X[te][2]=X[q+"2"],X[te][3]=X[q+"3"],X[te][4]=X[q+"4"],X[te][5]=X[q+"5"],X[te][6]=X[q+"6"],X[te][7]=X[q+"7"],X[te][8]=X[q+"8"],X[te][9]=X[q+"9"],X[te][10]=X[q+"10"],X[te][11]=X[q+"11"],X[te][12]=X[q+"12"],X[te][13]=X[q+"13"],X[te][14]=X[q+"0"],X[te][15]=X[q+"0"]}function Fe(q){return q==rd||q==Zc||q==Hu||q==Eh}function He(){this.eb=[],this.size=this.A=this.fb=0}function mt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function it(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new He,this.f.kb=new mt,this.sd=null}function xt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Tt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function kt(q){return alert("todo:WebPSamplerProcessPlane"),q.T}function Jt(q,te){var _e=q.T,Oe=te.ba.f.RGBA,at=Oe.eb,gt=Oe.fb+q.ka*Oe.A,vt=fl[te.ba.S],bt=q.y,Mt=q.O,Vt=q.f,vn=q.N,Hn=q.ea,Gn=q.W,Rn=te.cc,ar=te.dc,Jn=te.Mc,_n=te.Nc,Cn=q.ka,gr=q.ka+q.T,Ar=q.U,Er=Ar+1>>1;for(Cn==0?vt(bt,Mt,null,null,Vt,vn,Hn,Gn,Vt,vn,Hn,Gn,at,gt,null,null,Ar):(vt(te.ec,te.fc,bt,Mt,Rn,ar,Jn,_n,Vt,vn,Hn,Gn,at,gt-Oe.A,at,gt,Ar),++_e);Cn+2<gr;Cn+=2)Rn=Vt,ar=vn,Jn=Hn,_n=Gn,vn+=q.Rc,Gn+=q.Rc,gt+=2*Oe.A,vt(bt,(Mt+=2*q.fa)-q.fa,bt,Mt,Rn,ar,Jn,_n,Vt,vn,Hn,Gn,at,gt-Oe.A,at,gt,Ar);return Mt+=q.fa,q.j+gr<q.o?(r(te.ec,te.fc,bt,Mt,Ar),r(te.cc,te.dc,Vt,vn,Er),r(te.Mc,te.Nc,Hn,Gn,Er),_e--):1&gr||vt(bt,Mt,null,null,Vt,vn,Hn,Gn,Vt,vn,Hn,Gn,at,gt+Oe.A,null,null,Ar),_e}function rn(q,te,_e){var Oe=q.F,at=[q.J];if(Oe!=null){var gt=q.U,vt=te.ba.S,bt=vt==Yc||vt==Hu;te=te.ba.f.RGBA;var Mt=[0],Vt=q.ka;Mt[0]=q.T,q.Kb&&(Vt==0?--Mt[0]:(--Vt,at[0]-=q.width),q.j+q.ka+q.T==q.o&&(Mt[0]=q.o-q.j-Vt));var vn=te.eb;Vt=te.fb+Vt*te.A,q=Di(Oe,at[0],q.width,gt,Mt,vn,Vt+(bt?0:3),te.A),e(_e==Mt),q&&Fe(vt)&&hi(vn,Vt,bt,gt,Mt,te.A)}return 0}function Yt(q){var te=q.ma,_e=te.ba.S,Oe=11>_e,at=_e==Xc||_e==Mu||_e==Yc||_e==Sh||_e==12||Fe(_e);if(te.memory=null,te.Ib=null,te.Jb=null,te.Nd=null,!Yl(te.Oa,q,at?11:12))return 0;if(at&&Fe(_e)&&Pr(),q.da)alert("todo:use_scaling");else{if(Oe){if(te.Ib=kt,q.Kb){if(_e=q.U+1>>1,te.memory=o(q.U+2*_e),te.memory==null)return 0;te.ec=te.memory,te.fc=0,te.cc=te.ec,te.dc=te.fc+q.U,te.Mc=te.cc,te.Nc=te.dc+_e,te.Ib=Jt,Pr()}}else alert("todo:EmitYUV");at&&(te.Jb=rn,Oe&&kn())}if(Oe&&!Ip){for(q=0;256>q;++q)Hv[q]=89858*(q-128)+ao>>Rc,Fl[q]=-22014*(q-128)+ao,Mf[q]=-45773*(q-128),as[q]=113618*(q-128)+ao>>Rc;for(q=Au;q<id;++q)te=76283*(q-16)+ao>>Rc,ei[q-Au]=ll(te,255),Dp[q-Au]=ll(te+8>>4,15);Ip=1}return 1}function Qn(q){var te=q.ma,_e=q.U,Oe=q.T;return e(!(1&q.ka)),0>=_e||0>=Oe?0:(_e=te.Ib(q,te),te.Jb!=null&&te.Jb(q,te,_e),te.Dc+=_e,1)}function An(q){q.ma.memory=null}function jt(q,te,_e,Oe){return pe(q,8)!=47?0:(te[0]=pe(q,14)+1,_e[0]=pe(q,14)+1,Oe[0]=pe(q,1),pe(q,3)!=0?0:!q.h)}function Pe(q,te){if(4>q)return q+1;var _e=q-2>>1;return(2+(1&q)<<_e)+pe(te,_e)+1}function je(q,te){return 120<te?te-120:1<=(_e=((_e=Kc[te-1])>>4)*q+(8-(15&_e)))?_e:1;var _e}function _t(q,te,_e){var Oe=xe(_e),at=q[te+=255&Oe].g-8;return 0<at&&(Ee(_e,_e.u+8),Oe=xe(_e),te+=q[te].value,te+=Oe&(1<<at)-1),Ee(_e,_e.u+q[te].g),q[te].value}function Qt(q,te,_e){return _e.g+=q.g,_e.value+=q.value<<te>>>0,e(8>=_e.g),q.g}function en(q,te,_e){var Oe=q.xc;return e((te=Oe==0?0:q.vc[q.md*(_e>>Oe)+(te>>Oe)])<q.Wb),q.Ya[te]}function Fn(q,te,_e,Oe){var at=q.ab,gt=q.c*te,vt=q.C;te=vt+te;var bt=_e,Mt=Oe;for(Oe=q.Ta,_e=q.Ua;0<at--;){var Vt=q.gc[at],vn=vt,Hn=te,Gn=bt,Rn=Mt,ar=(Mt=Oe,bt=_e,Vt.Ea);switch(e(vn<Hn),e(Hn<=Vt.nc),Vt.hc){case 2:pa(Gn,Rn,(Hn-vn)*ar,Mt,bt);break;case 0:var Jn=vn,_n=Hn,Cn=Mt,gr=bt,Ar=(or=Vt).Ea;Jn==0&&(Cc(Gn,Rn,null,null,1,Cn,gr),Bt(Gn,Rn+1,0,0,Ar-1,Cn,gr+1),Rn+=Ar,gr+=Ar,++Jn);for(var Er=1<<or.b,ti=Er-1,Zr=Ut(Ar,or.b),yr=or.K,or=or.w+(Jn>>or.b)*Zr;Jn<_n;){var Ga=yr,oo=or,Ca=1;for(sc(Gn,Rn,Cn,gr-Ar,1,Cn,gr);Ca<Ar;){var $i=(Ca&~ti)+Er;$i>Ar&&($i=Ar),(0,Mn[Ga[oo++]>>8&15])(Gn,Rn+ +Ca,Cn,gr+Ca-Ar,$i-Ca,Cn,gr+Ca),Ca=$i}Rn+=Ar,gr+=Ar,++Jn&ti||(or+=Zr)}Hn!=Vt.nc&&r(Mt,bt-ar,Mt,bt+(Hn-vn-1)*ar,ar);break;case 1:for(ar=Gn,_n=Rn,Ar=(Gn=Vt.Ea)-(gr=Gn&~(Cn=(Rn=1<<Vt.b)-1)),Jn=Ut(Gn,Vt.b),Er=Vt.K,Vt=Vt.w+(vn>>Vt.b)*Jn;vn<Hn;){for(ti=Er,Zr=Vt,yr=new Ye,or=_n+gr,Ga=_n+Gn;_n<or;)Zt(ti[Zr++],yr),Yn(yr,ar,_n,Rn,Mt,bt),_n+=Rn,bt+=Rn;_n<Ga&&(Zt(ti[Zr++],yr),Yn(yr,ar,_n,Ar,Mt,bt),_n+=Ar,bt+=Ar),++vn&Cn||(Vt+=Jn)}break;case 3:if(Gn==Mt&&Rn==bt&&0<Vt.b){for(_n=Mt,Gn=ar=bt+(Hn-vn)*ar-(gr=(Hn-vn)*Ut(Vt.Ea,Vt.b)),Rn=Mt,Cn=bt,Jn=[],gr=(Ar=gr)-1;0<=gr;--gr)Jn[gr]=Rn[Cn+gr];for(gr=Ar-1;0<=gr;--gr)_n[Gn+gr]=Jn[gr];ds(Vt,vn,Hn,Mt,ar,Mt,bt)}else ds(Vt,vn,Hn,Gn,Rn,Mt,bt)}bt=Oe,Mt=_e}Mt!=_e&&r(Oe,_e,bt,Mt,gt)}function Wn(q,te){var _e=q.V,Oe=q.Ba+q.c*q.C,at=te-q.C;if(e(te<=q.l.o),e(16>=at),0<at){var gt=q.l,vt=q.Ta,bt=q.Ua,Mt=gt.width;if(Fn(q,at,_e,Oe),at=bt=[bt],e((_e=q.C)<(Oe=te)),e(gt.v<gt.va),Oe>gt.o&&(Oe=gt.o),_e<gt.j){var Vt=gt.j-_e;_e=gt.j,at[0]+=Vt*Mt}if(_e>=Oe?_e=0:(at[0]+=4*gt.v,gt.ka=_e-gt.j,gt.U=gt.va-gt.v,gt.T=Oe-_e,_e=1),_e){if(bt=bt[0],11>(_e=q.ca).S){var vn=_e.f.RGBA,Hn=(Oe=_e.S,at=gt.U,gt=gt.T,Vt=vn.eb,vn.A),Gn=gt;for(vn=vn.fb+q.Ma*vn.A;0<Gn--;){var Rn=vt,ar=bt,Jn=at,_n=Vt,Cn=vn;switch(Oe){case ps:jr(Rn,ar,Jn,_n,Cn);break;case Xc:ai(Rn,ar,Jn,_n,Cn);break;case rd:ai(Rn,ar,Jn,_n,Cn),hi(_n,Cn,0,Jn,1,0);break;case wl:I(Rn,ar,Jn,_n,Cn);break;case Mu:ze(Rn,ar,Jn,_n,Cn,1);break;case Zc:ze(Rn,ar,Jn,_n,Cn,1),hi(_n,Cn,0,Jn,1,0);break;case Yc:ze(Rn,ar,Jn,_n,Cn,0);break;case Hu:ze(Rn,ar,Jn,_n,Cn,0),hi(_n,Cn,1,Jn,1,0);break;case Sh:ia(Rn,ar,Jn,_n,Cn);break;case Eh:ia(Rn,ar,Jn,_n,Cn),Ii(_n,Cn,Jn,1,0);break;case nd:Mi(Rn,ar,Jn,_n,Cn);break;default:e(0)}bt+=Mt,vn+=Hn}q.Ma+=gt}else alert("todo:EmitRescaledRowsYUVA");e(q.Ma<=_e.height)}}q.C=te,e(q.C<=q.i)}function kr(q){var te;if(0<q.ua)return 0;for(te=0;te<q.Wb;++te){var _e=q.Ya[te].G,Oe=q.Ya[te].H;if(0<_e[1][Oe[1]+0].g||0<_e[2][Oe[2]+0].g||0<_e[3][Oe[3]+0].g)return 0}return 1}function Qr(q,te,_e,Oe,at,gt){if(q.Z!=0){var vt=q.qd,bt=q.rd;for(e(Ac[q.Z]!=null);te<_e;++te)Ac[q.Z](vt,bt,Oe,at,Oe,at,gt),vt=Oe,bt=at,at+=gt;q.qd=vt,q.rd=bt}}function vi(q,te){var _e=q.l.ma,Oe=_e.Z==0||_e.Z==1?q.l.j:q.C;if(Oe=q.C<Oe?Oe:q.C,e(te<=q.l.o),te>Oe){var at=q.l.width,gt=_e.ca,vt=_e.tb+at*Oe,bt=q.V,Mt=q.Ba+q.c*Oe,Vt=q.gc;e(q.ab==1),e(Vt[0].hc==3),Cu(Vt[0],Oe,te,bt,Mt,gt,vt),Qr(_e,Oe,te,gt,vt,at)}q.C=q.Ma=te}function zr(q,te,_e,Oe,at,gt,vt){var bt=q.$/Oe,Mt=q.$%Oe,Vt=q.m,vn=q.s,Hn=_e+q.$,Gn=Hn;at=_e+Oe*at;var Rn=_e+Oe*gt,ar=280+vn.ua,Jn=q.Pb?bt:16777216,_n=0<vn.ua?vn.Wa:null,Cn=vn.wc,gr=Hn<Rn?en(vn,Mt,bt):null;e(q.C<gt),e(Rn<=at);var Ar=!1;e:for(;;){for(;Ar||Hn<Rn;){var Er=0;if(bt>=Jn){var ti=Hn-_e;e((Jn=q).Pb),Jn.wd=Jn.m,Jn.xd=ti,0<Jn.s.ua&&yt(Jn.s.Wa,Jn.s.vb),Jn=bt+Yh}if(Mt&Cn||(gr=en(vn,Mt,bt)),e(gr!=null),gr.Qb&&(te[Hn]=gr.qb,Ar=!0),!Ar)if(De(Vt),gr.jc){Er=Vt,ti=te;var Zr=Hn,yr=gr.pd[xe(Er)&io-1];e(gr.jc),256>yr.g?(Ee(Er,Er.u+yr.g),ti[Zr]=yr.value,Er=0):(Ee(Er,Er.u+yr.g-256),e(256<=yr.value),Er=yr.value),Er==0&&(Ar=!0)}else Er=_t(gr.G[0],gr.H[0],Vt);if(Vt.h)break;if(Ar||256>Er){if(!Ar)if(gr.nd)te[Hn]=(gr.qb|Er<<8)>>>0;else{if(De(Vt),Ar=_t(gr.G[1],gr.H[1],Vt),De(Vt),ti=_t(gr.G[2],gr.H[2],Vt),Zr=_t(gr.G[3],gr.H[3],Vt),Vt.h)break;te[Hn]=(Zr<<24|Ar<<16|Er<<8|ti)>>>0}if(Ar=!1,++Hn,++Mt>=Oe&&(Mt=0,++bt,vt!=null&&bt<=gt&&!(bt%16)&&vt(q,bt),_n!=null))for(;Gn<Hn;)Er=te[Gn++],_n.X[(506832829*Er&4294967295)>>>_n.Mb]=Er}else if(280>Er){if(Er=Pe(Er-256,Vt),ti=_t(gr.G[4],gr.H[4],Vt),De(Vt),ti=je(Oe,ti=Pe(ti,Vt)),Vt.h)break;if(Hn-_e<ti||at-Hn<Er)break e;for(Zr=0;Zr<Er;++Zr)te[Hn+Zr]=te[Hn+Zr-ti];for(Hn+=Er,Mt+=Er;Mt>=Oe;)Mt-=Oe,++bt,vt!=null&&bt<=gt&&!(bt%16)&&vt(q,bt);if(e(Hn<=at),Mt&Cn&&(gr=en(vn,Mt,bt)),_n!=null)for(;Gn<Hn;)Er=te[Gn++],_n.X[(506832829*Er&4294967295)>>>_n.Mb]=Er}else{if(!(Er<ar))break e;for(Ar=Er-280,e(_n!=null);Gn<Hn;)Er=te[Gn++],_n.X[(506832829*Er&4294967295)>>>_n.Mb]=Er;Er=Hn,e(!(Ar>>>(ti=_n).Xa)),te[Er]=ti.X[Ar],Ar=!0}Ar||e(Vt.h==ve(Vt))}if(q.Pb&&Vt.h&&Hn<at)e(q.m.h),q.a=5,q.m=q.wd,q.$=q.xd,0<q.s.ua&&yt(q.s.vb,q.s.Wa);else{if(Vt.h)break e;vt!=null&&vt(q,bt>gt?gt:bt),q.a=0,q.$=Hn-_e}return 1}return q.a=3,0}function zn(q){e(q!=null),q.vc=null,q.yc=null,q.Ya=null;var te=q.Wa;te!=null&&(te.X=null),q.vb=null,e(q!=null)}function En(){var q=new Wl;return q==null?null:(q.a=0,q.xb=Cf,Xe("Predictor","VP8LPredictors"),Xe("Predictor","VP8LPredictors_C"),Xe("PredictorAdd","VP8LPredictorsAdd"),Xe("PredictorAdd","VP8LPredictorsAdd_C"),pa=gn,Yn=cn,jr=Et,ai=qn,ia=Dn,Mi=sr,I=rt,X.VP8LMapColor32b=wo,X.VP8LMapColor8b=wh,q)}function mr(q,te,_e,Oe,at){var gt=1,vt=[q],bt=[te],Mt=Oe.m,Vt=Oe.s,vn=null,Hn=0;e:for(;;){if(_e)for(;gt&&pe(Mt,1);){var Gn=vt,Rn=bt,ar=Oe,Jn=1,_n=ar.m,Cn=ar.gc[ar.ab],gr=pe(_n,2);if(ar.Oc&1<<gr)gt=0;else{switch(ar.Oc|=1<<gr,Cn.hc=gr,Cn.Ea=Gn[0],Cn.nc=Rn[0],Cn.K=[null],++ar.ab,e(4>=ar.ab),gr){case 0:case 1:Cn.b=pe(_n,3)+2,Jn=mr(Ut(Cn.Ea,Cn.b),Ut(Cn.nc,Cn.b),0,ar,Cn.K),Cn.K=Cn.K[0];break;case 3:var Ar,Er=pe(_n,8)+1,ti=16<Er?0:4<Er?1:2<Er?2:3;if(Gn[0]=Ut(Cn.Ea,ti),Cn.b=ti,Ar=Jn=mr(Er,1,0,ar,Cn.K)){var Zr,yr=Er,or=Cn,Ga=1<<(8>>or.b),oo=o(Ga);if(oo==null)Ar=0;else{var Ca=or.K[0],$i=or.w;for(oo[0]=or.K[0][0],Zr=1;Zr<1*yr;++Zr)oo[Zr]=ht(Ca[$i+Zr],oo[Zr-1]);for(;Zr<4*Ga;++Zr)oo[Zr]=0;or.K[0]=null,or.K[0]=oo,Ar=1}}Jn=Ar;break;case 2:break;default:e(0)}gt=Jn}}if(vt=vt[0],bt=bt[0],gt&&pe(Mt,1)&&!(gt=1<=(Hn=pe(Mt,4))&&11>=Hn)){Oe.a=3;break e}var Eo;if(Eo=gt)t:{var ga,ma,ho,fi=Oe,Ei=vt,Xa=bt,Ua=Hn,No=_e,As=fi.m,Yo=fi.s,os=[null],Uo=1,Ru=0,Va=Ro[Ua];n:for(;;){if(No&&pe(As,1)){var jo=pe(As,3)+2,Xu=Ut(Ei,jo),Pc=Ut(Xa,jo),Yu=Xu*Pc;if(!mr(Xu,Pc,0,fi,os))break n;for(os=os[0],Yo.xc=jo,ga=0;ga<Yu;++ga){var eh=os[ga]>>8&65535;os[ga]=eh,eh>=Uo&&(Uo=eh+1)}}if(As.h)break n;for(ma=0;5>ma;++ma){var Go=Sl[ma];!ma&&0<Ua&&(Go+=1<<Ua),Ru<Go&&(Ru=Go)}var Ah=s(Uo*Va,Q),ad=Uo,B=s(ad,ae);if(B==null)var l=null;else e(65536>=ad),l=B;var p=o(Ru);if(l==null||p==null||Ah==null){fi.a=1;break n}var T=Ah;for(ga=ho=0;ga<Uo;++ga){var P=l[ga],U=P.G,Y=P.H,re=0,ue=1,ge=0;for(ma=0;5>ma;++ma){Go=Sl[ma],U[ma]=T,Y[ma]=ho,!ma&&0<Ua&&(Go+=1<<Ua);i:{var Ne,qe=Go,Ge=fi,ot=p,ft=T,Ot=ho,Lt=0,Ft=Ge.m,Xt=pe(Ft,1);if(i(ot,0,0,qe),Xt){var nn=pe(Ft,1)+1,an=pe(Ft,1),sn=pe(Ft,an==0?1:8);ot[sn]=1,nn==2&&(ot[sn=pe(Ft,8)]=1);var pn=1}else{var hn=o(19),Un=pe(Ft,4)+4;if(19<Un){Ge.a=3;var On=0;break i}for(Ne=0;Ne<Un;++Ne)hn[Th[Ne]]=pe(Ft,3);var nr=void 0,ir=void 0,tr=Ge,Hr=hn,Br=qe,pr=ot,di=0,Gi=tr.m,Ia=8,fa=s(128,Q);r:for(;$(fa,0,7,Hr,19);){if(pe(Gi,1)){var yo=2+2*pe(Gi,3);if((nr=2+pe(Gi,yo))>Br)break r}else nr=Br;for(ir=0;ir<Br&&nr--;){De(Gi);var To=fa[0+(127&xe(Gi))];Ee(Gi,Gi.u+To.g);var so=To.value;if(16>so)pr[ir++]=so,so!=0&&(Ia=so);else{var fo=so==16,po=so-16,gs=su[po],zs=pe(Gi,Ef[po])+gs;if(ir+zs>Br)break r;for(var pl=fo?Ia:0;0<zs--;)pr[ir++]=pl}}di=1;break r}di||(tr.a=3),pn=di}(pn=pn&&!Ft.h)&&(Lt=$(ft,Ot,8,ot,qe)),pn&&Lt!=0?On=Lt:(Ge.a=3,On=0)}if(On==0)break n;if(ue&&lc[ma]==1&&(ue=T[ho].g==0),re+=T[ho].g,ho+=On,3>=ma){var el,hc=p[0];for(el=1;el<Go;++el)p[el]>hc&&(hc=p[el]);ge+=hc}}if(P.nd=ue,P.Qb=0,ue&&(P.qb=(U[3][Y[3]+0].value<<24|U[1][Y[1]+0].value<<16|U[2][Y[2]+0].value)>>>0,re==0&&256>U[0][Y[0]+0].value&&(P.Qb=1,P.qb+=U[0][Y[0]+0].value<<8)),P.jc=!P.Qb&&6>ge,P.jc){var Pu,Kl=P;for(Pu=0;Pu<io;++Pu){var Bl=Pu,uu=Kl.pd[Bl],Iu=Kl.G[0][Kl.H[0]+Bl];256<=Iu.value?(uu.g=Iu.g+256,uu.value=Iu.value):(uu.g=0,uu.value=0,Bl>>=Qt(Iu,8,uu),Bl>>=Qt(Kl.G[1][Kl.H[1]+Bl],16,uu),Bl>>=Qt(Kl.G[2][Kl.H[2]+Bl],0,uu),Qt(Kl.G[3][Kl.H[3]+Bl],24,uu))}}}Yo.vc=os,Yo.Wb=Uo,Yo.Ya=l,Yo.yc=Ah,Eo=1;break t}Eo=0}if(!(gt=Eo)){Oe.a=3;break e}if(0<Hn){if(Vt.ua=1<<Hn,!Ve(Vt.Wa,Hn)){Oe.a=1,gt=0;break e}}else Vt.ua=0;var Zu=Oe,cu=vt,th=bt,Rh=Zu.s,Ph=Rh.xc;if(Zu.c=cu,Zu.i=th,Rh.md=Ut(cu,Ph),Rh.wc=Ph==0?-1:(1<<Ph)-1,_e){Oe.xb=bg;break e}if((vn=o(vt*bt))==null){Oe.a=1,gt=0;break e}gt=(gt=zr(Oe,vn,0,vt,bt,bt,null))&&!Mt.h;break e}return gt?(at!=null?at[0]=vn:(e(vn==null),e(_e)),Oe.$=0,_e||zn(Vt)):zn(Vt),gt}function yi(q,te){var _e=q.c*q.i,Oe=_e+te+16*te;return e(q.c<=te),q.V=o(Oe),q.V==null?(q.Ta=null,q.Ua=0,q.a=1,0):(q.Ta=q.V,q.Ua=q.Ba+_e+te,1)}function _i(q,te){var _e=q.C,Oe=te-_e,at=q.V,gt=q.Ba+q.c*_e;for(e(te<=q.l.o);0<Oe;){var vt=16<Oe?16:Oe,bt=q.l.ma,Mt=q.l.width,Vt=Mt*vt,vn=bt.ca,Hn=bt.tb+Mt*_e,Gn=q.Ta,Rn=q.Ua;Fn(q,vt,at,gt),xa(Gn,Rn,vn,Hn,Vt),Qr(bt,_e,_e+vt,vn,Hn,Mt),Oe-=vt,at+=vt*q.c,_e+=vt}e(_e==te),q.C=q.Ma=te}function gi(){this.ub=this.yd=this.td=this.Rb=0}function lt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function yn(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Ln(){this.Yb=function(){var q=[];return function te(_e,Oe,at){for(var gt=at[Oe],vt=0;vt<gt&&(_e.push(at.length>Oe+1?[]:0),!(at.length<Oe+1));vt++)te(_e[vt],Oe+1,at)}(q,0,[3,11]),q}()}function Vn(){this.jb=o(3),this.Wc=a([4,8],Ln),this.Xc=a([4,17],Ln)}function bn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function wr(){this.ld=this.La=this.dd=this.tc=0}function Lr(){this.Na=this.la=0}function Mr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Xr(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Yr(){this.uc=this.M=this.Nb=0,this.wa=Array(new wr),this.Y=0,this.ya=Array(new Xr),this.aa=0,this.l=new Ni}function ni(){this.y=o(16),this.f=o(8),this.ea=o(8)}function bi(){this.cb=this.a=0,this.sc="",this.m=new Ie,this.Od=new gi,this.Kc=new lt,this.ed=new bn,this.Qa=new yn,this.Ic=this.$c=this.Aa=0,this.D=new Yr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,Ie),this.ia=0,this.pb=s(4,Mr),this.Pa=new Vn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ni),this.Hd=0,this.rb=Array(new Lr),this.sb=0,this.wa=Array(new wr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Xr),this.L=this.aa=0,this.gd=a([4,2],wr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ni(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Yi(){var q=new bi;return q!=null&&(q.a=0,q.sc="OK",q.cb=0,q.Xb=0,Ms||(Ms=Ai)),q}function Qi(q,te,_e){return q.a==0&&(q.a=te,q.sc=_e,q.cb=0),0}function _a(q,te,_e){return 3<=_e&&q[te+0]==157&&q[te+1]==1&&q[te+2]==42}function ra(q,te){if(q==null)return 0;if(q.a=0,q.sc="OK",te==null)return Qi(q,2,"null VP8Io passed to VP8GetHeaders()");var _e=te.data,Oe=te.w,at=te.ha;if(4>at)return Qi(q,7,"Truncated header.");var gt=_e[Oe+0]|_e[Oe+1]<<8|_e[Oe+2]<<16,vt=q.Od;if(vt.Rb=!(1&gt),vt.td=gt>>1&7,vt.yd=gt>>4&1,vt.ub=gt>>5,3<vt.td)return Qi(q,3,"Incorrect keyframe parameters.");if(!vt.yd)return Qi(q,4,"Frame not displayable.");Oe+=3,at-=3;var bt=q.Kc;if(vt.Rb){if(7>at)return Qi(q,7,"cannot parse picture header");if(!_a(_e,Oe,at))return Qi(q,3,"Bad code word");bt.c=16383&(_e[Oe+4]<<8|_e[Oe+3]),bt.Td=_e[Oe+4]>>6,bt.i=16383&(_e[Oe+6]<<8|_e[Oe+5]),bt.Ud=_e[Oe+6]>>6,Oe+=7,at-=7,q.za=bt.c+15>>4,q.Ub=bt.i+15>>4,te.width=bt.c,te.height=bt.i,te.Da=0,te.j=0,te.v=0,te.va=te.width,te.o=te.height,te.da=0,te.ib=te.width,te.hb=te.height,te.U=te.width,te.T=te.height,i((gt=q.Pa).jb,0,255,gt.jb.length),e((gt=q.Qa)!=null),gt.Cb=0,gt.Bb=0,gt.Fb=1,i(gt.Zb,0,0,gt.Zb.length),i(gt.Lb,0,0,gt.Lb)}if(vt.ub>at)return Qi(q,7,"bad partition length");ce(gt=q.m,_e,Oe,vt.ub),Oe+=vt.ub,at-=vt.ub,vt.Rb&&(bt.Ld=Ae(gt),bt.Kd=Ae(gt)),bt=q.Qa;var Mt,Vt=q.Pa;if(e(gt!=null),e(bt!=null),bt.Cb=Ae(gt),bt.Cb){if(bt.Bb=Ae(gt),Ae(gt)){for(bt.Fb=Ae(gt),Mt=0;4>Mt;++Mt)bt.Zb[Mt]=Ae(gt)?Se(gt,7):0;for(Mt=0;4>Mt;++Mt)bt.Lb[Mt]=Ae(gt)?Se(gt,6):0}if(bt.Bb)for(Mt=0;3>Mt;++Mt)Vt.jb[Mt]=Ae(gt)?se(gt,8):255}else bt.Bb=0;if(gt.Ka)return Qi(q,3,"cannot parse segment header");if((bt=q.ed).zd=Ae(gt),bt.Tb=se(gt,6),bt.wb=se(gt,3),bt.Pc=Ae(gt),bt.Pc&&Ae(gt)){for(Vt=0;4>Vt;++Vt)Ae(gt)&&(bt.vd[Vt]=Se(gt,6));for(Vt=0;4>Vt;++Vt)Ae(gt)&&(bt.od[Vt]=Se(gt,6))}if(q.L=bt.Tb==0?0:bt.zd?1:2,gt.Ka)return Qi(q,3,"cannot parse filter header");var vn=at;if(at=Mt=Oe,Oe=Mt+vn,bt=vn,q.Xb=(1<<se(q.m,2))-1,vn<3*(Vt=q.Xb))_e=7;else{for(Mt+=3*Vt,bt-=3*Vt,vn=0;vn<Vt;++vn){var Hn=_e[at+0]|_e[at+1]<<8|_e[at+2]<<16;Hn>bt&&(Hn=bt),ce(q.Jc[+vn],_e,Mt,Hn),Mt+=Hn,bt-=Hn,at+=3}ce(q.Jc[+Vt],_e,Mt,bt),_e=Mt<Oe?0:5}if(_e!=0)return Qi(q,_e,"cannot parse partitions");for(_e=se(Mt=q.m,7),at=Ae(Mt)?Se(Mt,4):0,Oe=Ae(Mt)?Se(Mt,4):0,bt=Ae(Mt)?Se(Mt,4):0,Vt=Ae(Mt)?Se(Mt,4):0,Mt=Ae(Mt)?Se(Mt,4):0,vn=q.Qa,Hn=0;4>Hn;++Hn){if(vn.Cb){var Gn=vn.Zb[Hn];vn.Fb||(Gn+=_e)}else{if(0<Hn){q.pb[Hn]=q.pb[0];continue}Gn=_e}var Rn=q.pb[Hn];Rn.Sc[0]=Zl[ll(Gn+at,127)],Rn.Sc[1]=Tf[ll(Gn+0,127)],Rn.Eb[0]=2*Zl[ll(Gn+Oe,127)],Rn.Eb[1]=101581*Tf[ll(Gn+bt,127)]>>16,8>Rn.Eb[1]&&(Rn.Eb[1]=8),Rn.Qc[0]=Zl[ll(Gn+Vt,117)],Rn.Qc[1]=Tf[ll(Gn+Mt,127)],Rn.lc=Gn+Mt}if(!vt.Rb)return Qi(q,4,"Not a key frame.");for(Ae(gt),vt=q.Pa,_e=0;4>_e;++_e){for(at=0;8>at;++at)for(Oe=0;3>Oe;++Oe)for(bt=0;11>bt;++bt)Vt=ut(gt,Zh[_e][at][Oe][bt])?se(gt,8):qu[_e][at][Oe][bt],vt.Wc[_e][at].Yb[Oe][bt]=Vt;for(at=0;17>at;++at)vt.Xc[_e][at]=vt.Wc[_e][Pp[at]]}return q.kc=Ae(gt),q.kc&&(q.Bd=se(gt,8)),q.cb=1}function Ai(q,te,_e,Oe,at,gt,vt){var bt=te[at].Yb[_e];for(_e=0;16>at;++at){if(!ut(q,bt[_e+0]))return at;for(;!ut(q,bt[_e+1]);)if(bt=te[++at].Yb[0],_e=0,at==16)return 16;var Mt=te[at+1].Yb;if(ut(q,bt[_e+2])){var Vt=q,vn=0;if(ut(Vt,(Gn=bt)[(Hn=_e)+3]))if(ut(Vt,Gn[Hn+6])){for(bt=0,Hn=2*(vn=ut(Vt,Gn[Hn+8]))+(Gn=ut(Vt,Gn[Hn+9+vn])),vn=0,Gn=is[Hn];Gn[bt];++bt)vn+=vn+ut(Vt,Gn[bt]);vn+=3+(8<<Hn)}else ut(Vt,Gn[Hn+7])?(vn=7+2*ut(Vt,165),vn+=ut(Vt,145)):vn=5+ut(Vt,159);else vn=ut(Vt,Gn[Hn+4])?3+ut(Vt,Gn[Hn+5]):2;bt=Mt[2]}else vn=1,bt=Mt[1];Mt=vt+Ra[at],0>(Vt=q).b&&We(Vt);var Hn,Gn=Vt.b,Rn=(Hn=Vt.Ca>>1)-(Vt.I>>Gn)>>31;--Vt.b,Vt.Ca+=Rn,Vt.Ca|=1,Vt.I-=(Hn+1&Rn)<<Gn,gt[Mt]=((vn^Rn)-Rn)*Oe[(0<at)+0]}return 16}function Ka(q){var te=q.rb[q.sb-1];te.la=0,te.Na=0,i(q.zc,0,0,q.zc.length),q.ja=0}function la(q,te){if(q==null)return 0;if(te==null)return Qi(q,2,"NULL VP8Io parameter in VP8Decode().");if(!q.cb&&!ra(q,te))return 0;if(e(q.cb),te.ac==null||te.ac(te)){te.ob&&(q.L=0);var _e=Qc[q.L];if(q.L==2?(q.yb=0,q.zb=0):(q.yb=te.v-_e>>4,q.zb=te.j-_e>>4,0>q.yb&&(q.yb=0),0>q.zb&&(q.zb=0)),q.Va=te.o+15+_e>>4,q.Hb=te.va+15+_e>>4,q.Hb>q.za&&(q.Hb=q.za),q.Va>q.Ub&&(q.Va=q.Ub),0<q.L){var Oe=q.ed;for(_e=0;4>_e;++_e){var at;if(q.Qa.Cb){var gt=q.Qa.Lb[_e];q.Qa.Fb||(gt+=Oe.Tb)}else gt=Oe.Tb;for(at=0;1>=at;++at){var vt=q.gd[_e][at],bt=gt;if(Oe.Pc&&(bt+=Oe.vd[0],at&&(bt+=Oe.od[0])),0<(bt=0>bt?0:63<bt?63:bt)){var Mt=bt;0<Oe.wb&&(Mt=4<Oe.wb?Mt>>2:Mt>>1)>9-Oe.wb&&(Mt=9-Oe.wb),1>Mt&&(Mt=1),vt.dd=Mt,vt.tc=2*bt+Mt,vt.ld=40<=bt?2:15<=bt?1:0}else vt.tc=0;vt.La=at}}}_e=0}else Qi(q,6,"Frame setup failed"),_e=q.a;if(_e=_e==0){if(_e){q.$c=0,0<q.Aa||(q.Ic=Mh);e:{_e=q.Ic,Oe=4*(Mt=q.za);var Vt=32*Mt,vn=Mt+1,Hn=0<q.L?Mt*(0<q.Aa?2:1):0,Gn=(q.Aa==2?2:1)*Mt;if((vt=Oe+832+(at=3*(16*_e+Qc[q.L])/2*Vt)+(gt=q.Fa!=null&&0<q.Fa.length?q.Kc.c*q.Kc.i:0))!=vt)_e=0;else{if(vt>q.Vb){if(q.Vb=0,q.Ec=o(vt),q.Fc=0,q.Ec==null){_e=Qi(q,1,"no memory during frame initialization.");break e}q.Vb=vt}vt=q.Ec,bt=q.Fc,q.Ac=vt,q.Bc=bt,bt+=Oe,q.Gd=s(Vt,ni),q.Hd=0,q.rb=s(vn+1,Lr),q.sb=1,q.wa=Hn?s(Hn,wr):null,q.Y=0,q.D.Nb=0,q.D.wa=q.wa,q.D.Y=q.Y,0<q.Aa&&(q.D.Y+=Mt),e(!0),q.oc=vt,q.pc=bt,bt+=832,q.ya=s(Gn,Xr),q.aa=0,q.D.ya=q.ya,q.D.aa=q.aa,q.Aa==2&&(q.D.aa+=Mt),q.R=16*Mt,q.B=8*Mt,Mt=(Vt=Qc[q.L])*q.R,Vt=Vt/2*q.B,q.sa=vt,q.ta=bt+Mt,q.qa=q.sa,q.ra=q.ta+16*_e*q.R+Vt,q.Ha=q.qa,q.Ia=q.ra+8*_e*q.B+Vt,q.$c=0,bt+=at,q.mb=gt?vt:null,q.nb=gt?bt:null,e(bt+gt<=q.Fc+q.Vb),Ka(q),i(q.Ac,q.Bc,0,Oe),_e=1}}if(_e){if(te.ka=0,te.y=q.sa,te.O=q.ta,te.f=q.qa,te.N=q.ra,te.ea=q.Ha,te.Vd=q.Ia,te.fa=q.R,te.Rc=q.B,te.F=null,te.J=0,!Ks){for(_e=-255;255>=_e;++_e)ka[255+_e]=0>_e?-_e:_e;for(_e=-1020;1020>=_e;++_e)Bs[1020+_e]=-128>_e?-128:127<_e?127:_e;for(_e=-112;112>=_e;++_e)kl[112+_e]=-16>_e?-16:15<_e?15:_e;for(_e=-255;510>=_e;++_e)ul[255+_e]=0>_e?0:255<_e?255:_e;Ks=1}y=Gt,b=to,Z=ne,le=we,Me=et,R=Ta,Ue=ns,dt=Ss,Nt=Dl,wn=Sc,Nn=bl,dr=Fs,$r=Ec,mi=Eu,xi=ws,si=Wa,ci=bo,Fi=Bu,Qs[0]=Wi,Qs[1]=dn,Qs[2]=hr,Qs[3]=ii,Qs[4]=ea,Qs[5]=Oo,Qs[6]=ji,Qs[7]=ri,Qs[8]=_l,Qs[9]=Jr,Mc[0]=Nr,Mc[1]=cr,Mc[2]=ur,Mc[3]=Rr,Mc[4]=Wr,Mc[5]=ua,Mc[6]=ui,hl[0]=no,hl[1]=xn,hl[2]=ha,hl[3]=xo,hl[4]=ts,hl[5]=Bo,hl[6]=xl,_e=1}else _e=0}_e&&(_e=function(Rn,ar){for(Rn.M=0;Rn.M<Rn.Va;++Rn.M){var Jn,_n=Rn.Jc[Rn.M&Rn.Xb],Cn=Rn.m,gr=Rn;for(Jn=0;Jn<gr.za;++Jn){var Ar=Cn,Er=gr,ti=Er.Ac,Zr=Er.Bc+4*Jn,yr=Er.zc,or=Er.ya[Er.aa+Jn];if(Er.Qa.Bb?or.$b=ut(Ar,Er.Pa.jb[0])?2+ut(Ar,Er.Pa.jb[2]):ut(Ar,Er.Pa.jb[1]):or.$b=0,Er.kc&&(or.Ad=ut(Ar,Er.Bd)),or.Za=!ut(Ar,145)+0,or.Za){var Ga=or.Ob,oo=0;for(Er=0;4>Er;++Er){var Ca,$i=yr[0+Er];for(Ca=0;4>Ca;++Ca){$i=zd[ti[Zr+Ca]][$i];for(var Eo=uc[ut(Ar,$i[0])];0<Eo;)Eo=uc[2*Eo+ut(Ar,$i[Eo])];$i=-Eo,ti[Zr+Ca]=$i}r(Ga,oo,ti,Zr,4),oo+=4,yr[0+Er]=$i}}else $i=ut(Ar,156)?ut(Ar,128)?1:3:ut(Ar,163)?2:0,or.Ob[0]=$i,i(ti,Zr,$i,4),i(yr,0,$i,4);or.Dd=ut(Ar,142)?ut(Ar,114)?ut(Ar,183)?1:3:2:0}if(gr.m.Ka)return Qi(Rn,7,"Premature end-of-partition0 encountered.");for(;Rn.ja<Rn.za;++Rn.ja){if(gr=_n,Ar=(Cn=Rn).rb[Cn.sb-1],ti=Cn.rb[Cn.sb+Cn.ja],Jn=Cn.ya[Cn.aa+Cn.ja],Zr=Cn.kc?Jn.Ad:0)Ar.la=ti.la=0,Jn.Za||(Ar.Na=ti.Na=0),Jn.Hc=0,Jn.Gc=0,Jn.ia=0;else{var ga,ma;if(Ar=ti,ti=gr,Zr=Cn.Pa.Xc,yr=Cn.ya[Cn.aa+Cn.ja],or=Cn.pb[yr.$b],Er=yr.ad,Ga=0,oo=Cn.rb[Cn.sb-1],$i=Ca=0,i(Er,Ga,0,384),yr.Za)var ho=0,fi=Zr[3];else{Eo=o(16);var Ei=Ar.Na+oo.Na;if(Ei=Ms(ti,Zr[1],Ei,or.Eb,0,Eo,0),Ar.Na=oo.Na=(0<Ei)+0,1<Ei)y(Eo,0,Er,Ga);else{var Xa=Eo[0]+3>>3;for(Eo=0;256>Eo;Eo+=16)Er[Ga+Eo]=Xa}ho=1,fi=Zr[0]}var Ua=15&Ar.la,No=15&oo.la;for(Eo=0;4>Eo;++Eo){var As=1&No;for(Xa=ma=0;4>Xa;++Xa)Ua=Ua>>1|(As=(Ei=Ms(ti,fi,Ei=As+(1&Ua),or.Sc,ho,Er,Ga))>ho)<<7,ma=ma<<2|(3<Ei?3:1<Ei?2:Er[Ga+0]!=0),Ga+=16;Ua>>=4,No=No>>1|As<<7,Ca=(Ca<<8|ma)>>>0}for(fi=Ua,ho=No>>4,ga=0;4>ga;ga+=2){for(ma=0,Ua=Ar.la>>4+ga,No=oo.la>>4+ga,Eo=0;2>Eo;++Eo){for(As=1&No,Xa=0;2>Xa;++Xa)Ei=As+(1&Ua),Ua=Ua>>1|(As=0<(Ei=Ms(ti,Zr[2],Ei,or.Qc,0,Er,Ga)))<<3,ma=ma<<2|(3<Ei?3:1<Ei?2:Er[Ga+0]!=0),Ga+=16;Ua>>=2,No=No>>1|As<<5}$i|=ma<<4*ga,fi|=Ua<<4<<ga,ho|=(240&No)<<ga}Ar.la=fi,oo.la=ho,yr.Hc=Ca,yr.Gc=$i,yr.ia=43690&$i?0:or.ia,Zr=!(Ca|$i)}if(0<Cn.L&&(Cn.wa[Cn.Y+Cn.ja]=Cn.gd[Jn.$b][Jn.Za],Cn.wa[Cn.Y+Cn.ja].La|=!Zr),gr.Ka)return Qi(Rn,7,"Premature end-of-file encountered.")}if(Ka(Rn),Cn=ar,gr=1,Jn=(_n=Rn).D,Ar=0<_n.L&&_n.M>=_n.zb&&_n.M<=_n.Va,_n.Aa==0)e:{if(Jn.M=_n.M,Jn.uc=Ar,Xl(_n,Jn),gr=1,Jn=(ma=_n.D).Nb,Ar=($i=Qc[_n.L])*_n.R,ti=$i/2*_n.B,Eo=16*Jn*_n.R,Xa=8*Jn*_n.B,Zr=_n.sa,yr=_n.ta-Ar+Eo,or=_n.qa,Er=_n.ra-ti+Xa,Ga=_n.Ha,oo=_n.Ia-ti+Xa,No=(Ua=ma.M)==0,Ca=Ua>=_n.Va-1,_n.Aa==2&&Xl(_n,ma),ma.uc)for(As=(Ei=_n).D.M,e(Ei.D.uc),ma=Ei.yb;ma<Ei.Hb;++ma){ho=ma,fi=As;var Yo=(os=(Go=Ei).D).Nb;ga=Go.R;var os=os.wa[os.Y+ho],Uo=Go.sa,Ru=Go.ta+16*Yo*ga+16*ho,Va=os.dd,jo=os.tc;if(jo!=0)if(e(3<=jo),Go.L==1)0<ho&&si(Uo,Ru,ga,jo+4),os.La&&Fi(Uo,Ru,ga,jo),0<fi&&xi(Uo,Ru,ga,jo+4),os.La&&ci(Uo,Ru,ga,jo);else{var Xu=Go.B,Pc=Go.qa,Yu=Go.ra+8*Yo*Xu+8*ho,eh=Go.Ha,Go=Go.Ia+8*Yo*Xu+8*ho;Yo=os.ld,0<ho&&(dt(Uo,Ru,ga,jo+4,Va,Yo),wn(Pc,Yu,eh,Go,Xu,jo+4,Va,Yo)),os.La&&(dr(Uo,Ru,ga,jo,Va,Yo),mi(Pc,Yu,eh,Go,Xu,jo,Va,Yo)),0<fi&&(Ue(Uo,Ru,ga,jo+4,Va,Yo),Nt(Pc,Yu,eh,Go,Xu,jo+4,Va,Yo)),os.La&&(Nn(Uo,Ru,ga,jo,Va,Yo),$r(Pc,Yu,eh,Go,Xu,jo,Va,Yo))}}if(_n.ia&&alert("todo:DitherRow"),Cn.put!=null){if(ma=16*Ua,Ua=16*(Ua+1),No?(Cn.y=_n.sa,Cn.O=_n.ta+Eo,Cn.f=_n.qa,Cn.N=_n.ra+Xa,Cn.ea=_n.Ha,Cn.W=_n.Ia+Xa):(ma-=$i,Cn.y=Zr,Cn.O=yr,Cn.f=or,Cn.N=Er,Cn.ea=Ga,Cn.W=oo),Ca||(Ua-=$i),Ua>Cn.o&&(Ua=Cn.o),Cn.F=null,Cn.J=null,_n.Fa!=null&&0<_n.Fa.length&&ma<Ua&&(Cn.J=Uu(_n,Cn,ma,Ua-ma),Cn.F=_n.mb,Cn.F==null&&Cn.F.length==0)){gr=Qi(_n,3,"Could not decode alpha data.");break e}ma<Cn.j&&($i=Cn.j-ma,ma=Cn.j,e(!(1&$i)),Cn.O+=_n.R*$i,Cn.N+=_n.B*($i>>1),Cn.W+=_n.B*($i>>1),Cn.F!=null&&(Cn.J+=Cn.width*$i)),ma<Ua&&(Cn.O+=Cn.v,Cn.N+=Cn.v>>1,Cn.W+=Cn.v>>1,Cn.F!=null&&(Cn.J+=Cn.v),Cn.ka=ma-Cn.j,Cn.U=Cn.va-Cn.v,Cn.T=Ua-ma,gr=Cn.put(Cn))}Jn+1!=_n.Ic||Ca||(r(_n.sa,_n.ta-Ar,Zr,yr+16*_n.R,Ar),r(_n.qa,_n.ra-ti,or,Er+8*_n.B,ti),r(_n.Ha,_n.Ia-ti,Ga,oo+8*_n.B,ti))}if(!gr)return Qi(Rn,6,"Output aborted.")}return 1}(q,te)),te.bc!=null&&te.bc(te),_e&=1}return _e?(q.cb=0,_e):0}function Sa(q,te,_e,Oe,at){at=q[te+_e+32*Oe]+(at>>3),q[te+_e+32*Oe]=-256&at?0>at?0:255:at}function _o(q,te,_e,Oe,at,gt){Sa(q,te,0,_e,Oe+at),Sa(q,te,1,_e,Oe+gt),Sa(q,te,2,_e,Oe-gt),Sa(q,te,3,_e,Oe-at)}function Ui(q){return(20091*q>>16)+q}function Pi(q,te,_e,Oe){var at,gt=0,vt=o(16);for(at=0;4>at;++at){var bt=q[te+0]+q[te+8],Mt=q[te+0]-q[te+8],Vt=(35468*q[te+4]>>16)-Ui(q[te+12]),vn=Ui(q[te+4])+(35468*q[te+12]>>16);vt[gt+0]=bt+vn,vt[gt+1]=Mt+Vt,vt[gt+2]=Mt-Vt,vt[gt+3]=bt-vn,gt+=4,te++}for(at=gt=0;4>at;++at)bt=(q=vt[gt+0]+4)+vt[gt+8],Mt=q-vt[gt+8],Vt=(35468*vt[gt+4]>>16)-Ui(vt[gt+12]),Sa(_e,Oe,0,0,bt+(vn=Ui(vt[gt+4])+(35468*vt[gt+12]>>16))),Sa(_e,Oe,1,0,Mt+Vt),Sa(_e,Oe,2,0,Mt-Vt),Sa(_e,Oe,3,0,bt-vn),gt++,Oe+=32}function Ta(q,te,_e,Oe){var at=q[te+0]+4,gt=35468*q[te+4]>>16,vt=Ui(q[te+4]),bt=35468*q[te+1]>>16;_o(_e,Oe,0,at+vt,q=Ui(q[te+1]),bt),_o(_e,Oe,1,at+gt,q,bt),_o(_e,Oe,2,at-gt,q,bt),_o(_e,Oe,3,at-vt,q,bt)}function to(q,te,_e,Oe,at){Pi(q,te,_e,Oe),at&&Pi(q,te+16,_e,Oe+4)}function ne(q,te,_e,Oe){b(q,te+0,_e,Oe,1),b(q,te+32,_e,Oe+128,1)}function we(q,te,_e,Oe){var at;for(q=q[te+0]+4,at=0;4>at;++at)for(te=0;4>te;++te)Sa(_e,Oe,te,at,q)}function et(q,te,_e,Oe){q[te+0]&&le(q,te+0,_e,Oe),q[te+16]&&le(q,te+16,_e,Oe+4),q[te+32]&&le(q,te+32,_e,Oe+128),q[te+48]&&le(q,te+48,_e,Oe+128+4)}function Gt(q,te,_e,Oe){var at,gt=o(16);for(at=0;4>at;++at){var vt=q[te+0+at]+q[te+12+at],bt=q[te+4+at]+q[te+8+at],Mt=q[te+4+at]-q[te+8+at],Vt=q[te+0+at]-q[te+12+at];gt[0+at]=vt+bt,gt[8+at]=vt-bt,gt[4+at]=Vt+Mt,gt[12+at]=Vt-Mt}for(at=0;4>at;++at)vt=(q=gt[0+4*at]+3)+gt[3+4*at],bt=gt[1+4*at]+gt[2+4*at],Mt=gt[1+4*at]-gt[2+4*at],Vt=q-gt[3+4*at],_e[Oe+0]=vt+bt>>3,_e[Oe+16]=Vt+Mt>>3,_e[Oe+32]=vt-bt>>3,_e[Oe+48]=Vt-Mt>>3,Oe+=64}function on(q,te,_e){var Oe,at=te-32,gt=So,vt=255-q[at-1];for(Oe=0;Oe<_e;++Oe){var bt,Mt=gt,Vt=vt+q[te-1];for(bt=0;bt<_e;++bt)q[te+bt]=Mt[Vt+q[at+bt]];te+=32}}function dn(q,te){on(q,te,4)}function xn(q,te){on(q,te,8)}function cr(q,te){on(q,te,16)}function ur(q,te){var _e;for(_e=0;16>_e;++_e)r(q,te+32*_e,q,te-32,16)}function Rr(q,te){var _e;for(_e=16;0<_e;--_e)i(q,te,q[te-1],16),te+=32}function Ir(q,te,_e){var Oe;for(Oe=0;16>Oe;++Oe)i(te,_e+32*Oe,q,16)}function Nr(q,te){var _e,Oe=16;for(_e=0;16>_e;++_e)Oe+=q[te-1+32*_e]+q[te+_e-32];Ir(Oe>>5,q,te)}function Wr(q,te){var _e,Oe=8;for(_e=0;16>_e;++_e)Oe+=q[te-1+32*_e];Ir(Oe>>4,q,te)}function ua(q,te){var _e,Oe=8;for(_e=0;16>_e;++_e)Oe+=q[te+_e-32];Ir(Oe>>4,q,te)}function ui(q,te){Ir(128,q,te)}function Vr(q,te,_e){return q+2*te+_e+2>>2}function hr(q,te){var _e,Oe=te-32;for(Oe=new Uint8Array([Vr(q[Oe-1],q[Oe+0],q[Oe+1]),Vr(q[Oe+0],q[Oe+1],q[Oe+2]),Vr(q[Oe+1],q[Oe+2],q[Oe+3]),Vr(q[Oe+2],q[Oe+3],q[Oe+4])]),_e=0;4>_e;++_e)r(q,te+32*_e,Oe,0,Oe.length)}function ii(q,te){var _e=q[te-1],Oe=q[te-1+32],at=q[te-1+64],gt=q[te-1+96];pt(q,te+0,16843009*Vr(q[te-1-32],_e,Oe)),pt(q,te+32,16843009*Vr(_e,Oe,at)),pt(q,te+64,16843009*Vr(Oe,at,gt)),pt(q,te+96,16843009*Vr(at,gt,gt))}function Wi(q,te){var _e,Oe=4;for(_e=0;4>_e;++_e)Oe+=q[te+_e-32]+q[te-1+32*_e];for(Oe>>=3,_e=0;4>_e;++_e)i(q,te+32*_e,Oe,4)}function ea(q,te){var _e=q[te-1+0],Oe=q[te-1+32],at=q[te-1+64],gt=q[te-1-32],vt=q[te+0-32],bt=q[te+1-32],Mt=q[te+2-32],Vt=q[te+3-32];q[te+0+96]=Vr(Oe,at,q[te-1+96]),q[te+1+96]=q[te+0+64]=Vr(_e,Oe,at),q[te+2+96]=q[te+1+64]=q[te+0+32]=Vr(gt,_e,Oe),q[te+3+96]=q[te+2+64]=q[te+1+32]=q[te+0+0]=Vr(vt,gt,_e),q[te+3+64]=q[te+2+32]=q[te+1+0]=Vr(bt,vt,gt),q[te+3+32]=q[te+2+0]=Vr(Mt,bt,vt),q[te+3+0]=Vr(Vt,Mt,bt)}function ji(q,te){var _e=q[te+1-32],Oe=q[te+2-32],at=q[te+3-32],gt=q[te+4-32],vt=q[te+5-32],bt=q[te+6-32],Mt=q[te+7-32];q[te+0+0]=Vr(q[te+0-32],_e,Oe),q[te+1+0]=q[te+0+32]=Vr(_e,Oe,at),q[te+2+0]=q[te+1+32]=q[te+0+64]=Vr(Oe,at,gt),q[te+3+0]=q[te+2+32]=q[te+1+64]=q[te+0+96]=Vr(at,gt,vt),q[te+3+32]=q[te+2+64]=q[te+1+96]=Vr(gt,vt,bt),q[te+3+64]=q[te+2+96]=Vr(vt,bt,Mt),q[te+3+96]=Vr(bt,Mt,Mt)}function Oo(q,te){var _e=q[te-1+0],Oe=q[te-1+32],at=q[te-1+64],gt=q[te-1-32],vt=q[te+0-32],bt=q[te+1-32],Mt=q[te+2-32],Vt=q[te+3-32];q[te+0+0]=q[te+1+64]=gt+vt+1>>1,q[te+1+0]=q[te+2+64]=vt+bt+1>>1,q[te+2+0]=q[te+3+64]=bt+Mt+1>>1,q[te+3+0]=Mt+Vt+1>>1,q[te+0+96]=Vr(at,Oe,_e),q[te+0+64]=Vr(Oe,_e,gt),q[te+0+32]=q[te+1+96]=Vr(_e,gt,vt),q[te+1+32]=q[te+2+96]=Vr(gt,vt,bt),q[te+2+32]=q[te+3+96]=Vr(vt,bt,Mt),q[te+3+32]=Vr(bt,Mt,Vt)}function ri(q,te){var _e=q[te+0-32],Oe=q[te+1-32],at=q[te+2-32],gt=q[te+3-32],vt=q[te+4-32],bt=q[te+5-32],Mt=q[te+6-32],Vt=q[te+7-32];q[te+0+0]=_e+Oe+1>>1,q[te+1+0]=q[te+0+64]=Oe+at+1>>1,q[te+2+0]=q[te+1+64]=at+gt+1>>1,q[te+3+0]=q[te+2+64]=gt+vt+1>>1,q[te+0+32]=Vr(_e,Oe,at),q[te+1+32]=q[te+0+96]=Vr(Oe,at,gt),q[te+2+32]=q[te+1+96]=Vr(at,gt,vt),q[te+3+32]=q[te+2+96]=Vr(gt,vt,bt),q[te+3+64]=Vr(vt,bt,Mt),q[te+3+96]=Vr(bt,Mt,Vt)}function Jr(q,te){var _e=q[te-1+0],Oe=q[te-1+32],at=q[te-1+64],gt=q[te-1+96];q[te+0+0]=_e+Oe+1>>1,q[te+2+0]=q[te+0+32]=Oe+at+1>>1,q[te+2+32]=q[te+0+64]=at+gt+1>>1,q[te+1+0]=Vr(_e,Oe,at),q[te+3+0]=q[te+1+32]=Vr(Oe,at,gt),q[te+3+32]=q[te+1+64]=Vr(at,gt,gt),q[te+3+64]=q[te+2+64]=q[te+0+96]=q[te+1+96]=q[te+2+96]=q[te+3+96]=gt}function _l(q,te){var _e=q[te-1+0],Oe=q[te-1+32],at=q[te-1+64],gt=q[te-1+96],vt=q[te-1-32],bt=q[te+0-32],Mt=q[te+1-32],Vt=q[te+2-32];q[te+0+0]=q[te+2+32]=_e+vt+1>>1,q[te+0+32]=q[te+2+64]=Oe+_e+1>>1,q[te+0+64]=q[te+2+96]=at+Oe+1>>1,q[te+0+96]=gt+at+1>>1,q[te+3+0]=Vr(bt,Mt,Vt),q[te+2+0]=Vr(vt,bt,Mt),q[te+1+0]=q[te+3+32]=Vr(_e,vt,bt),q[te+1+32]=q[te+3+64]=Vr(Oe,_e,vt),q[te+1+64]=q[te+3+96]=Vr(at,Oe,_e),q[te+1+96]=Vr(gt,at,Oe)}function ha(q,te){var _e;for(_e=0;8>_e;++_e)r(q,te+32*_e,q,te-32,8)}function xo(q,te){var _e;for(_e=0;8>_e;++_e)i(q,te,q[te-1],8),te+=32}function Fo(q,te,_e){var Oe;for(Oe=0;8>Oe;++Oe)i(te,_e+32*Oe,q,8)}function no(q,te){var _e,Oe=8;for(_e=0;8>_e;++_e)Oe+=q[te+_e-32]+q[te-1+32*_e];Fo(Oe>>4,q,te)}function Bo(q,te){var _e,Oe=4;for(_e=0;8>_e;++_e)Oe+=q[te+_e-32];Fo(Oe>>3,q,te)}function ts(q,te){var _e,Oe=4;for(_e=0;8>_e;++_e)Oe+=q[te-1+32*_e];Fo(Oe>>3,q,te)}function xl(q,te){Fo(128,q,te)}function Ws(q,te,_e){var Oe=q[te-_e],at=q[te+0],gt=3*(at-Oe)+ou[1020+q[te-2*_e]-q[te+_e]],vt=Js[112+(gt+4>>3)];q[te-_e]=So[255+Oe+Js[112+(gt+3>>3)]],q[te+0]=So[255+at-vt]}function wc(q,te,_e,Oe){var at=q[te+0],gt=q[te+_e];return cl[255+q[te-2*_e]-q[te-_e]]>Oe||cl[255+gt-at]>Oe}function $l(q,te,_e,Oe){return 4*cl[255+q[te-_e]-q[te+0]]+cl[255+q[te-2*_e]-q[te+_e]]<=Oe}function sl(q,te,_e,Oe,at){var gt=q[te-3*_e],vt=q[te-2*_e],bt=q[te-_e],Mt=q[te+0],Vt=q[te+_e],vn=q[te+2*_e],Hn=q[te+3*_e];return 4*cl[255+bt-Mt]+cl[255+vt-Vt]>Oe?0:cl[255+q[te-4*_e]-gt]<=at&&cl[255+gt-vt]<=at&&cl[255+vt-bt]<=at&&cl[255+Hn-vn]<=at&&cl[255+vn-Vt]<=at&&cl[255+Vt-Mt]<=at}function ws(q,te,_e,Oe){var at=2*Oe+1;for(Oe=0;16>Oe;++Oe)$l(q,te+Oe,_e,at)&&Ws(q,te+Oe,_e)}function Wa(q,te,_e,Oe){var at=2*Oe+1;for(Oe=0;16>Oe;++Oe)$l(q,te+Oe*_e,1,at)&&Ws(q,te+Oe*_e,1)}function bo(q,te,_e,Oe){var at;for(at=3;0<at;--at)ws(q,te+=4*_e,_e,Oe)}function Bu(q,te,_e,Oe){var at;for(at=3;0<at;--at)Wa(q,te+=4,_e,Oe)}function Do(q,te,_e,Oe,at,gt,vt,bt){for(gt=2*gt+1;0<at--;){if(sl(q,te,_e,gt,vt))if(wc(q,te,_e,bt))Ws(q,te,_e);else{var Mt=q,Vt=te,vn=_e,Hn=Mt[Vt-2*vn],Gn=Mt[Vt-vn],Rn=Mt[Vt+0],ar=Mt[Vt+vn],Jn=Mt[Vt+2*vn],_n=27*(gr=ou[1020+3*(Rn-Gn)+ou[1020+Hn-ar]])+63>>7,Cn=18*gr+63>>7,gr=9*gr+63>>7;Mt[Vt-3*vn]=So[255+Mt[Vt-3*vn]+gr],Mt[Vt-2*vn]=So[255+Hn+Cn],Mt[Vt-vn]=So[255+Gn+_n],Mt[Vt+0]=So[255+Rn-_n],Mt[Vt+vn]=So[255+ar-Cn],Mt[Vt+2*vn]=So[255+Jn-gr]}te+=Oe}}function Ea(q,te,_e,Oe,at,gt,vt,bt){for(gt=2*gt+1;0<at--;){if(sl(q,te,_e,gt,vt))if(wc(q,te,_e,bt))Ws(q,te,_e);else{var Mt=q,Vt=te,vn=_e,Hn=Mt[Vt-vn],Gn=Mt[Vt+0],Rn=Mt[Vt+vn],ar=Js[112+((Jn=3*(Gn-Hn))+4>>3)],Jn=Js[112+(Jn+3>>3)],_n=ar+1>>1;Mt[Vt-2*vn]=So[255+Mt[Vt-2*vn]+_n],Mt[Vt-vn]=So[255+Hn+Jn],Mt[Vt+0]=So[255+Gn-ar],Mt[Vt+vn]=So[255+Rn-_n]}te+=Oe}}function ns(q,te,_e,Oe,at,gt){Do(q,te,_e,1,16,Oe,at,gt)}function Ss(q,te,_e,Oe,at,gt){Do(q,te,1,_e,16,Oe,at,gt)}function bl(q,te,_e,Oe,at,gt){var vt;for(vt=3;0<vt;--vt)Ea(q,te+=4*_e,_e,1,16,Oe,at,gt)}function Fs(q,te,_e,Oe,at,gt){var vt;for(vt=3;0<vt;--vt)Ea(q,te+=4,1,_e,16,Oe,at,gt)}function Dl(q,te,_e,Oe,at,gt,vt,bt){Do(q,te,at,1,8,gt,vt,bt),Do(_e,Oe,at,1,8,gt,vt,bt)}function Sc(q,te,_e,Oe,at,gt,vt,bt){Do(q,te,1,at,8,gt,vt,bt),Do(_e,Oe,1,at,8,gt,vt,bt)}function Ec(q,te,_e,Oe,at,gt,vt,bt){Ea(q,te+4*at,at,1,8,gt,vt,bt),Ea(_e,Oe+4*at,at,1,8,gt,vt,bt)}function Eu(q,te,_e,Oe,at,gt,vt,bt){Ea(q,te+4,1,at,8,gt,vt,bt),Ea(_e,Oe+4,1,at,8,gt,vt,bt)}function Tu(){this.ba=new it,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Tt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function $c(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Es(){this.ua=0,this.Wa=new Ze,this.vb=new Ze,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ae,this.yc=new Q}function Wl(){this.xb=this.a=0,this.l=new Ni,this.ca=new it,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new me,this.Pb=0,this.wd=new me,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Es,this.ab=0,this.gc=s(4,$c),this.Oc=0}function Lo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ni,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function zu(q,te,_e,Oe,at,gt,vt){for(q=q==null?0:q[te+0],te=0;te<vt;++te)at[gt+te]=q+_e[Oe+te]&255,q=at[gt+te]}function au(q,te,_e,Oe,at,gt,vt){var bt;if(q==null)zu(null,null,_e,Oe,at,gt,vt);else for(bt=0;bt<vt;++bt)at[gt+bt]=q[te+bt]+_e[Oe+bt]&255}function Xo(q,te,_e,Oe,at,gt,vt){if(q==null)zu(null,null,_e,Oe,at,gt,vt);else{var bt,Mt=q[te+0],Vt=Mt,vn=Mt;for(bt=0;bt<vt;++bt)Vt=vn+(Mt=q[te+bt])-Vt,vn=_e[Oe+bt]+(-256&Vt?0>Vt?0:255:Vt)&255,Vt=Mt,at[gt+bt]=vn}}function Uu(q,te,_e,Oe){var at=te.width,gt=te.o;if(e(q!=null&&te!=null),0>_e||0>=Oe||_e+Oe>gt)return null;if(!q.Cc){if(q.ga==null){var vt;if(q.ga=new Lo,(vt=q.ga==null)||(vt=te.width*te.o,e(q.Gb.length==0),q.Gb=o(vt),q.Uc=0,q.Gb==null?vt=0:(q.mb=q.Gb,q.nb=q.Uc,q.rc=null,vt=1),vt=!vt),!vt){vt=q.ga;var bt=q.Fa,Mt=q.P,Vt=q.qc,vn=q.mb,Hn=q.nb,Gn=Mt+1,Rn=Vt-1,ar=vt.l;if(e(bt!=null&&vn!=null&&te!=null),Ac[0]=null,Ac[1]=zu,Ac[2]=au,Ac[3]=Xo,vt.ca=vn,vt.tb=Hn,vt.c=te.width,vt.i=te.height,e(0<vt.c&&0<vt.i),1>=Vt)te=0;else if(vt.$a=bt[Mt+0]>>0&3,vt.Z=bt[Mt+0]>>2&3,vt.Lc=bt[Mt+0]>>4&3,Mt=bt[Mt+0]>>6&3,0>vt.$a||1<vt.$a||4<=vt.Z||1<vt.Lc||Mt)te=0;else if(ar.put=Qn,ar.ac=Yt,ar.bc=An,ar.ma=vt,ar.width=te.width,ar.height=te.height,ar.Da=te.Da,ar.v=te.v,ar.va=te.va,ar.j=te.j,ar.o=te.o,vt.$a)e:{e(vt.$a==1),te=En();t:for(;;){if(te==null){te=0;break e}if(e(vt!=null),vt.mc=te,te.c=vt.c,te.i=vt.i,te.l=vt.l,te.l.ma=vt,te.l.width=vt.c,te.l.height=vt.i,te.a=0,ye(te.m,bt,Gn,Rn),!mr(vt.c,vt.i,1,te,null)||(te.ab==1&&te.gc[0].hc==3&&kr(te.s)?(vt.ic=1,bt=te.c*te.i,te.Ta=null,te.Ua=0,te.V=o(bt),te.Ba=0,te.V==null?(te.a=1,te=0):te=1):(vt.ic=0,te=yi(te,vt.c)),!te))break t;te=1;break e}vt.mc=null,te=0}else te=Rn>=vt.c*vt.i;vt=!te}if(vt)return null;q.ga.Lc!=1?q.Ga=0:Oe=gt-_e}e(q.ga!=null),e(_e+Oe<=gt);e:{if(te=(bt=q.ga).c,gt=bt.l.o,bt.$a==0){if(Gn=q.rc,Rn=q.Vc,ar=q.Fa,Mt=q.P+1+_e*te,Vt=q.mb,vn=q.nb+_e*te,e(Mt<=q.P+q.qc),bt.Z!=0)for(e(Ac[bt.Z]!=null),vt=0;vt<Oe;++vt)Ac[bt.Z](Gn,Rn,ar,Mt,Vt,vn,te),Gn=Vt,Rn=vn,vn+=te,Mt+=te;else for(vt=0;vt<Oe;++vt)r(Vt,vn,ar,Mt,te),Gn=Vt,Rn=vn,vn+=te,Mt+=te;q.rc=Gn,q.Vc=Rn}else{if(e(bt.mc!=null),te=_e+Oe,e((vt=bt.mc)!=null),e(te<=vt.i),vt.C>=te)te=1;else if(bt.ic||kn(),bt.ic){bt=vt.V,Gn=vt.Ba,Rn=vt.c;var Jn=vt.i,_n=(ar=1,Mt=vt.$/Rn,Vt=vt.$%Rn,vn=vt.m,Hn=vt.s,vt.$),Cn=Rn*Jn,gr=Rn*te,Ar=Hn.wc,Er=_n<gr?en(Hn,Vt,Mt):null;e(_n<=Cn),e(te<=Jn),e(kr(Hn));t:for(;;){for(;!vn.h&&_n<gr;){if(Vt&Ar||(Er=en(Hn,Vt,Mt)),e(Er!=null),De(vn),256>(Jn=_t(Er.G[0],Er.H[0],vn)))bt[Gn+_n]=Jn,++_n,++Vt>=Rn&&(Vt=0,++Mt<=te&&!(Mt%16)&&vi(vt,Mt));else{if(!(280>Jn)){ar=0;break t}Jn=Pe(Jn-256,vn);var ti,Zr=_t(Er.G[4],Er.H[4],vn);if(De(vn),!(_n>=(Zr=je(Rn,Zr=Pe(Zr,vn)))&&Cn-_n>=Jn)){ar=0;break t}for(ti=0;ti<Jn;++ti)bt[Gn+_n+ti]=bt[Gn+_n+ti-Zr];for(_n+=Jn,Vt+=Jn;Vt>=Rn;)Vt-=Rn,++Mt<=te&&!(Mt%16)&&vi(vt,Mt);_n<gr&&Vt&Ar&&(Er=en(Hn,Vt,Mt))}e(vn.h==ve(vn))}vi(vt,Mt>te?te:Mt);break t}!ar||vn.h&&_n<Cn?(ar=0,vt.a=vn.h?5:3):vt.$=_n,te=ar}else te=zr(vt,vt.V,vt.Ba,vt.c,vt.i,te,_i);if(!te){Oe=0;break e}}_e+Oe>=gt&&(q.Cc=1),Oe=1}if(!Oe)return null;if(q.Cc&&((Oe=q.ga)!=null&&(Oe.mc=null),q.ga=null,0<q.Ga))return alert("todo:WebPDequantizeLevels"),null}return q.nb+_e*at}function fe(q,te,_e,Oe,at,gt){for(;0<at--;){var vt,bt=q,Mt=te+(_e?1:0),Vt=q,vn=te+(_e?0:3);for(vt=0;vt<Oe;++vt){var Hn=Vt[vn+4*vt];Hn!=255&&(Hn*=32897,bt[Mt+4*vt+0]=bt[Mt+4*vt+0]*Hn>>23,bt[Mt+4*vt+1]=bt[Mt+4*vt+1]*Hn>>23,bt[Mt+4*vt+2]=bt[Mt+4*vt+2]*Hn>>23)}te+=gt}}function nt(q,te,_e,Oe,at){for(;0<Oe--;){var gt;for(gt=0;gt<_e;++gt){var vt=q[te+2*gt+0],bt=15&(Vt=q[te+2*gt+1]),Mt=4369*bt,Vt=(240&Vt|Vt>>4)*Mt>>16;q[te+2*gt+0]=(240&vt|vt>>4)*Mt>>16&240|(15&vt|vt<<4)*Mt>>16>>4&15,q[te+2*gt+1]=240&Vt|bt}te+=at}}function Wt(q,te,_e,Oe,at,gt,vt,bt){var Mt,Vt,vn=255;for(Vt=0;Vt<at;++Vt){for(Mt=0;Mt<Oe;++Mt){var Hn=q[te+Mt];gt[vt+4*Mt]=Hn,vn&=Hn}te+=_e,vt+=bt}return vn!=255}function un(q,te,_e,Oe,at){var gt;for(gt=0;gt<at;++gt)_e[Oe+gt]=q[te+gt]>>8}function kn(){hi=fe,Ii=nt,Di=Wt,xa=un}function Kn(q,te,_e){X[q]=function(Oe,at,gt,vt,bt,Mt,Vt,vn,Hn,Gn,Rn,ar,Jn,_n,Cn,gr,Ar){var Er,ti=Ar-1>>1,Zr=bt[Mt+0]|Vt[vn+0]<<16,yr=Hn[Gn+0]|Rn[ar+0]<<16;e(Oe!=null);var or=3*Zr+yr+131074>>2;for(te(Oe[at+0],255&or,or>>16,Jn,_n),gt!=null&&(or=3*yr+Zr+131074>>2,te(gt[vt+0],255&or,or>>16,Cn,gr)),Er=1;Er<=ti;++Er){var Ga=bt[Mt+Er]|Vt[vn+Er]<<16,oo=Hn[Gn+Er]|Rn[ar+Er]<<16,Ca=Zr+Ga+yr+oo+524296,$i=Ca+2*(Ga+yr)>>3;or=$i+Zr>>1,Zr=(Ca=Ca+2*(Zr+oo)>>3)+Ga>>1,te(Oe[at+2*Er-1],255&or,or>>16,Jn,_n+(2*Er-1)*_e),te(Oe[at+2*Er-0],255&Zr,Zr>>16,Jn,_n+(2*Er-0)*_e),gt!=null&&(or=Ca+yr>>1,Zr=$i+oo>>1,te(gt[vt+2*Er-1],255&or,or>>16,Cn,gr+(2*Er-1)*_e),te(gt[vt+2*Er+0],255&Zr,Zr>>16,Cn,gr+(2*Er+0)*_e)),Zr=Ga,yr=oo}1&Ar||(or=3*Zr+yr+131074>>2,te(Oe[at+Ar-1],255&or,or>>16,Jn,_n+(Ar-1)*_e),gt!=null&&(or=3*yr+Zr+131074>>2,te(gt[vt+Ar-1],255&or,or>>16,Cn,gr+(Ar-1)*_e)))}}function Pr(){fl[ps]=Jc,fl[Xc]=lu,fl[wl]=$u,fl[Mu]=dl,fl[Yc]=Ch,fl[Sh]=Ol,fl[nd]=Wu,fl[rd]=lu,fl[Zc]=dl,fl[Hu]=Ch,fl[Eh]=Ol}function oi(q){return q&-16384?0>q?0:255:q>>Vv}function Ci(q,te){return oi((19077*q>>8)+(26149*te>>8)-14234)}function Zi(q,te,_e){return oi((19077*q>>8)-(6419*te>>8)-(13320*_e>>8)+8708)}function Oi(q,te){return oi((19077*q>>8)+(33050*te>>8)-17685)}function qi(q,te,_e,Oe,at){Oe[at+0]=Ci(q,_e),Oe[at+1]=Zi(q,te,_e),Oe[at+2]=Oi(q,te)}function za(q,te,_e,Oe,at){Oe[at+0]=Oi(q,te),Oe[at+1]=Zi(q,te,_e),Oe[at+2]=Ci(q,_e)}function ro(q,te,_e,Oe,at){var gt=Zi(q,te,_e);te=gt<<3&224|Oi(q,te)>>3,Oe[at+0]=248&Ci(q,_e)|gt>>5,Oe[at+1]=te}function Ja(q,te,_e,Oe,at){var gt=240&Oi(q,te)|15;Oe[at+0]=240&Ci(q,_e)|Zi(q,te,_e)>>4,Oe[at+1]=gt}function zo(q,te,_e,Oe,at){Oe[at+0]=255,qi(q,te,_e,Oe,at+1)}function co(q,te,_e,Oe,at){za(q,te,_e,Oe,at),Oe[at+3]=255}function Ts(q,te,_e,Oe,at){qi(q,te,_e,Oe,at),Oe[at+3]=255}function ll(q,te){return 0>q?0:q>te?te:q}function Ys(q,te,_e){X[q]=function(Oe,at,gt,vt,bt,Mt,Vt,vn,Hn){for(var Gn=vn+(-2&Hn)*_e;vn!=Gn;)te(Oe[at+0],gt[vt+0],bt[Mt+0],Vt,vn),te(Oe[at+1],gt[vt+0],bt[Mt+0],Vt,vn+_e),at+=2,++vt,++Mt,vn+=2*_e;1&Hn&&te(Oe[at+0],gt[vt+0],bt[Mt+0],Vt,vn)}}function Wc(q,te,_e){return _e==0?q==0?te==0?6:5:te==0?4:0:_e}function Ll(q,te,_e,Oe,at){switch(q>>>30){case 3:b(te,_e,Oe,at,0);break;case 2:R(te,_e,Oe,at);break;case 1:le(te,_e,Oe,at)}}function Xl(q,te){var _e,Oe,at=te.M,gt=te.Nb,vt=q.oc,bt=q.pc+40,Mt=q.oc,Vt=q.pc+584,vn=q.oc,Hn=q.pc+600;for(_e=0;16>_e;++_e)vt[bt+32*_e-1]=129;for(_e=0;8>_e;++_e)Mt[Vt+32*_e-1]=129,vn[Hn+32*_e-1]=129;for(0<at?vt[bt-1-32]=Mt[Vt-1-32]=vn[Hn-1-32]=129:(i(vt,bt-32-1,127,21),i(Mt,Vt-32-1,127,9),i(vn,Hn-32-1,127,9)),Oe=0;Oe<q.za;++Oe){var Gn=te.ya[te.aa+Oe];if(0<Oe){for(_e=-1;16>_e;++_e)r(vt,bt+32*_e-4,vt,bt+32*_e+12,4);for(_e=-1;8>_e;++_e)r(Mt,Vt+32*_e-4,Mt,Vt+32*_e+4,4),r(vn,Hn+32*_e-4,vn,Hn+32*_e+4,4)}var Rn=q.Gd,ar=q.Hd+Oe,Jn=Gn.ad,_n=Gn.Hc;if(0<at&&(r(vt,bt-32,Rn[ar].y,0,16),r(Mt,Vt-32,Rn[ar].f,0,8),r(vn,Hn-32,Rn[ar].ea,0,8)),Gn.Za){var Cn=vt,gr=bt-32+16;for(0<at&&(Oe>=q.za-1?i(Cn,gr,Rn[ar].y[15],4):r(Cn,gr,Rn[ar+1].y,0,4)),_e=0;4>_e;_e++)Cn[gr+128+_e]=Cn[gr+256+_e]=Cn[gr+384+_e]=Cn[gr+0+_e];for(_e=0;16>_e;++_e,_n<<=2)Cn=vt,gr=bt+cc[_e],Qs[Gn.Ob[_e]](Cn,gr),Ll(_n,Jn,16*+_e,Cn,gr)}else if(Cn=Wc(Oe,at,Gn.Ob[0]),Mc[Cn](vt,bt),_n!=0)for(_e=0;16>_e;++_e,_n<<=2)Ll(_n,Jn,16*+_e,vt,bt+cc[_e]);for(_e=Gn.Gc,Cn=Wc(Oe,at,Gn.Dd),hl[Cn](Mt,Vt),hl[Cn](vn,Hn),_n=Jn,Cn=Mt,gr=Vt,255&(Gn=_e>>0)&&(170&Gn?Z(_n,256,Cn,gr):Me(_n,256,Cn,gr)),Gn=vn,_n=Hn,255&(_e>>=8)&&(170&_e?Z(Jn,320,Gn,_n):Me(Jn,320,Gn,_n)),at<q.Ub-1&&(r(Rn[ar].y,0,vt,bt+480,16),r(Rn[ar].f,0,Mt,Vt+224,8),r(Rn[ar].ea,0,vn,Hn+224,8)),_e=8*gt*q.B,Rn=q.sa,ar=q.ta+16*Oe+16*gt*q.R,Jn=q.qa,Gn=q.ra+8*Oe+_e,_n=q.Ha,Cn=q.Ia+8*Oe+_e,_e=0;16>_e;++_e)r(Rn,ar+_e*q.R,vt,bt+32*_e,16);for(_e=0;8>_e;++_e)r(Jn,Gn+_e*q.B,Mt,Vt+32*_e,8),r(_n,Cn+_e*q.B,vn,Hn+32*_e,8)}}function Tc(q,te,_e,Oe,at,gt,vt,bt,Mt){var Vt=[0],vn=[0],Hn=0,Gn=Mt!=null?Mt.kd:0,Rn=Mt??new Xs;if(q==null||12>_e)return 7;Rn.data=q,Rn.w=te,Rn.ha=_e,te=[te],_e=[_e],Rn.gb=[Rn.gb];e:{var ar=te,Jn=_e,_n=Rn.gb;if(e(q!=null),e(Jn!=null),e(_n!=null),_n[0]=0,12<=Jn[0]&&!n(q,ar[0],"RIFF")){if(n(q,ar[0]+8,"WEBP")){_n=3;break e}var Cn=It(q,ar[0]+4);if(12>Cn||4294967286<Cn){_n=3;break e}if(Gn&&Cn>Jn[0]-8){_n=7;break e}_n[0]=Cn,ar[0]+=12,Jn[0]-=12}_n=0}if(_n!=0)return _n;for(Cn=0<Rn.gb[0],_e=_e[0];;){e:{var gr=q;Jn=te,_n=_e;var Ar=Vt,Er=vn,ti=ar=[0];if((or=Hn=[Hn])[0]=0,8>_n[0])_n=7;else{if(!n(gr,Jn[0],"VP8X")){if(It(gr,Jn[0]+4)!=10){_n=3;break e}if(18>_n[0]){_n=7;break e}var Zr=It(gr,Jn[0]+8),yr=1+Ce(gr,Jn[0]+12);if(2147483648<=yr*(gr=1+Ce(gr,Jn[0]+15))){_n=3;break e}ti!=null&&(ti[0]=Zr),Ar!=null&&(Ar[0]=yr),Er!=null&&(Er[0]=gr),Jn[0]+=18,_n[0]-=18,or[0]=1}_n=0}}if(Hn=Hn[0],ar=ar[0],_n!=0)return _n;if(Jn=!!(2&ar),!Cn&&Hn)return 3;if(gt!=null&&(gt[0]=!!(16&ar)),vt!=null&&(vt[0]=Jn),bt!=null&&(bt[0]=0),vt=Vt[0],ar=vn[0],Hn&&Jn&&Mt==null){_n=0;break}if(4>_e){_n=7;break}if(Cn&&Hn||!Cn&&!Hn&&!n(q,te[0],"ALPH")){_e=[_e],Rn.na=[Rn.na],Rn.P=[Rn.P],Rn.Sa=[Rn.Sa];e:{Zr=q,_n=te,Cn=_e;var or=Rn.gb;Ar=Rn.na,Er=Rn.P,ti=Rn.Sa,yr=22,e(Zr!=null),e(Cn!=null),gr=_n[0];var Ga=Cn[0];for(e(Ar!=null),e(ti!=null),Ar[0]=null,Er[0]=null,ti[0]=0;;){if(_n[0]=gr,Cn[0]=Ga,8>Ga){_n=7;break e}var oo=It(Zr,gr+4);if(4294967286<oo){_n=3;break e}var Ca=8+oo+1&-2;if(yr+=Ca,0<or&&yr>or){_n=3;break e}if(!n(Zr,gr,"VP8 ")||!n(Zr,gr,"VP8L")){_n=0;break e}if(Ga[0]<Ca){_n=7;break e}n(Zr,gr,"ALPH")||(Ar[0]=Zr,Er[0]=gr+8,ti[0]=oo),gr+=Ca,Ga-=Ca}}if(_e=_e[0],Rn.na=Rn.na[0],Rn.P=Rn.P[0],Rn.Sa=Rn.Sa[0],_n!=0)break}_e=[_e],Rn.Ja=[Rn.Ja],Rn.xa=[Rn.xa];e:if(or=q,_n=te,Cn=_e,Ar=Rn.gb[0],Er=Rn.Ja,ti=Rn.xa,Zr=_n[0],gr=!n(or,Zr,"VP8 "),yr=!n(or,Zr,"VP8L"),e(or!=null),e(Cn!=null),e(Er!=null),e(ti!=null),8>Cn[0])_n=7;else{if(gr||yr){if(or=It(or,Zr+4),12<=Ar&&or>Ar-12){_n=3;break e}if(Gn&&or>Cn[0]-8){_n=7;break e}Er[0]=or,_n[0]+=8,Cn[0]-=8,ti[0]=yr}else ti[0]=5<=Cn[0]&&or[Zr+0]==47&&!(or[Zr+4]>>5),Er[0]=Cn[0];_n=0}if(_e=_e[0],Rn.Ja=Rn.Ja[0],Rn.xa=Rn.xa[0],te=te[0],_n!=0)break;if(4294967286<Rn.Ja)return 3;if(bt==null||Jn||(bt[0]=Rn.xa?2:1),vt=[vt],ar=[ar],Rn.xa){if(5>_e){_n=7;break}bt=vt,Gn=ar,Jn=gt,q==null||5>_e?q=0:5<=_e&&q[te+0]==47&&!(q[te+4]>>5)?(Cn=[0],or=[0],Ar=[0],ye(Er=new me,q,te,_e),jt(Er,Cn,or,Ar)?(bt!=null&&(bt[0]=Cn[0]),Gn!=null&&(Gn[0]=or[0]),Jn!=null&&(Jn[0]=Ar[0]),q=1):q=0):q=0}else{if(10>_e){_n=7;break}bt=ar,q==null||10>_e||!_a(q,te+3,_e-3)?q=0:(Gn=q[te+0]|q[te+1]<<8|q[te+2]<<16,Jn=16383&(q[te+7]<<8|q[te+6]),q=16383&(q[te+9]<<8|q[te+8]),1&Gn||3<(Gn>>1&7)||!(Gn>>4&1)||Gn>>5>=Rn.Ja||!Jn||!q?q=0:(vt&&(vt[0]=Jn),bt&&(bt[0]=q),q=1))}if(!q||(vt=vt[0],ar=ar[0],Hn&&(Vt[0]!=vt||vn[0]!=ar)))return 3;Mt!=null&&(Mt[0]=Rn,Mt.offset=te-Mt.w,e(4294967286>te-Mt.w),e(Mt.offset==Mt.ha-_e));break}return _n==0||_n==7&&Hn&&Mt==null?(gt!=null&&(gt[0]|=Rn.na!=null&&0<Rn.na.length),Oe!=null&&(Oe[0]=vt),at!=null&&(at[0]=ar),0):_n}function Yl(q,te,_e){var Oe=te.width,at=te.height,gt=0,vt=0,bt=Oe,Mt=at;if(te.Da=q!=null&&0<q.Da,te.Da&&(bt=q.cd,Mt=q.bd,gt=q.v,vt=q.j,11>_e||(gt&=-2,vt&=-2),0>gt||0>vt||0>=bt||0>=Mt||gt+bt>Oe||vt+Mt>at))return 0;if(te.v=gt,te.j=vt,te.va=gt+bt,te.o=vt+Mt,te.U=bt,te.T=Mt,te.da=q!=null&&0<q.da,te.da){if(!wt(bt,Mt,_e=[q.ib],gt=[q.hb]))return 0;te.ib=_e[0],te.hb=gt[0]}return te.ob=q!=null&&q.ob,te.Kb=q==null||!q.Sd,te.da&&(te.ob=te.ib<3*Oe/4&&te.hb<3*at/4,te.Kb=0),1}function Nl(q){if(q==null)return 2;if(11>q.S){var te=q.f.RGBA;te.fb+=(q.height-1)*te.A,te.A=-te.A}else te=q.f.kb,q=q.height,te.O+=(q-1)*te.fa,te.fa=-te.fa,te.N+=(q-1>>1)*te.Ab,te.Ab=-te.Ab,te.W+=(q-1>>1)*te.Db,te.Db=-te.Db,te.F!=null&&(te.J+=(q-1)*te.lb,te.lb=-te.lb);return 0}function ju(q,te,_e,Oe){if(Oe==null||0>=q||0>=te)return 2;if(_e!=null){if(_e.Da){var at=_e.cd,gt=_e.bd,vt=-2&_e.v,bt=-2&_e.j;if(0>vt||0>bt||0>=at||0>=gt||vt+at>q||bt+gt>te)return 2;q=at,te=gt}if(_e.da){if(!wt(q,te,at=[_e.ib],gt=[_e.hb]))return 2;q=at[0],te=gt[0]}}Oe.width=q,Oe.height=te;e:{var Mt=Oe.width,Vt=Oe.height;if(q=Oe.S,0>=Mt||0>=Vt||!(q>=ps&&13>q))q=2;else{if(0>=Oe.Rd&&Oe.sd==null){vt=gt=at=te=0;var vn=(bt=Mt*Lp[q])*Vt;if(11>q||(gt=(Vt+1)/2*(te=(Mt+1)/2),q==12&&(vt=(at=Mt)*Vt)),(Vt=o(vn+2*gt+vt))==null){q=1;break e}Oe.sd=Vt,11>q?((Mt=Oe.f.RGBA).eb=Vt,Mt.fb=0,Mt.A=bt,Mt.size=vn):((Mt=Oe.f.kb).y=Vt,Mt.O=0,Mt.fa=bt,Mt.Fd=vn,Mt.f=Vt,Mt.N=0+vn,Mt.Ab=te,Mt.Cd=gt,Mt.ea=Vt,Mt.W=0+vn+gt,Mt.Db=te,Mt.Ed=gt,q==12&&(Mt.F=Vt,Mt.J=0+vn+2*gt),Mt.Tc=vt,Mt.lb=at)}if(te=1,at=Oe.S,gt=Oe.width,vt=Oe.height,at>=ps&&13>at)if(11>at)q=Oe.f.RGBA,te&=(bt=Math.abs(q.A))*(vt-1)+gt<=q.size,te&=bt>=gt*Lp[at],te&=q.eb!=null;else{q=Oe.f.kb,bt=(gt+1)/2,vn=(vt+1)/2,Mt=Math.abs(q.fa),Vt=Math.abs(q.Ab);var Hn=Math.abs(q.Db),Gn=Math.abs(q.lb),Rn=Gn*(vt-1)+gt;te&=Mt*(vt-1)+gt<=q.Fd,te&=Vt*(vn-1)+bt<=q.Cd,te=(te&=Hn*(vn-1)+bt<=q.Ed)&Mt>=gt&Vt>=bt&Hn>=bt,te&=q.y!=null,te&=q.f!=null,te&=q.ea!=null,at==12&&(te&=Gn>=gt,te&=Rn<=q.Tc,te&=q.F!=null)}else te=0;q=te?0:2}}return q!=0||_e!=null&&_e.fd&&(q=Nl(Oe)),q}var io=64,Gu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Zs=24,Cs=32,Vu=8,rs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];qt("Predictor0","PredictorAdd0"),X.Predictor0=function(){return 4278190080},X.Predictor1=function(q){return q},X.Predictor2=function(q,te,_e){return te[_e+0]},X.Predictor3=function(q,te,_e){return te[_e+1]},X.Predictor4=function(q,te,_e){return te[_e-1]},X.Predictor5=function(q,te,_e){return Re(Re(q,te[_e+1]),te[_e+0])},X.Predictor6=function(q,te,_e){return Re(q,te[_e-1])},X.Predictor7=function(q,te,_e){return Re(q,te[_e+0])},X.Predictor8=function(q,te,_e){return Re(te[_e-1],te[_e+0])},X.Predictor9=function(q,te,_e){return Re(te[_e+0],te[_e+1])},X.Predictor10=function(q,te,_e){return Re(Re(q,te[_e-1]),Re(te[_e+0],te[_e+1]))},X.Predictor11=function(q,te,_e){var Oe=te[_e+0];return 0>=At(Oe>>24&255,q>>24&255,(te=te[_e-1])>>24&255)+At(Oe>>16&255,q>>16&255,te>>16&255)+At(Oe>>8&255,q>>8&255,te>>8&255)+At(255&Oe,255&q,255&te)?Oe:q},X.Predictor12=function(q,te,_e){var Oe=te[_e+0];return(Pt((q>>24&255)+(Oe>>24&255)-((te=te[_e-1])>>24&255))<<24|Pt((q>>16&255)+(Oe>>16&255)-(te>>16&255))<<16|Pt((q>>8&255)+(Oe>>8&255)-(te>>8&255))<<8|Pt((255&q)+(255&Oe)-(255&te)))>>>0},X.Predictor13=function(q,te,_e){var Oe=te[_e-1];return(Dt((q=Re(q,te[_e+0]))>>24&255,Oe>>24&255)<<24|Dt(q>>16&255,Oe>>16&255)<<16|Dt(q>>8&255,Oe>>8&255)<<8|Dt(q>>0&255,Oe>>0&255))>>>0};var Cc=X.PredictorAdd0;X.PredictorAdd1=Bt,qt("Predictor2","PredictorAdd2"),qt("Predictor3","PredictorAdd3"),qt("Predictor4","PredictorAdd4"),qt("Predictor5","PredictorAdd5"),qt("Predictor6","PredictorAdd6"),qt("Predictor7","PredictorAdd7"),qt("Predictor8","PredictorAdd8"),qt("Predictor9","PredictorAdd9"),qt("Predictor10","PredictorAdd10"),qt("Predictor11","PredictorAdd11"),qt("Predictor12","PredictorAdd12"),qt("Predictor13","PredictorAdd13");var sc=X.PredictorAdd2;$t("ColorIndexInverseTransform","MapARGB","32b",function(q){return q>>8&255},function(q){return q}),$t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(q){return q},function(q){return q>>8&255});var pa,ds=X.ColorIndexInverseTransform,wo=X.MapARGB,Cu=X.VP8LColorIndexInverseTransformAlpha,wh=X.MapAlpha,Mn=X.VP8LPredictorsAdd=[];Mn.length=16,(X.VP8LPredictors=[]).length=16,(X.VP8LPredictorsAdd_C=[]).length=16,(X.VP8LPredictors_C=[]).length=16;var Yn,jr,ai,ia,Mi,I,y,b,R,Z,le,Me,Ue,dt,Nt,wn,Nn,dr,$r,mi,xi,si,ci,Fi,hi,Ii,Di,xa,ka=o(511),Bs=o(2041),kl=o(225),ul=o(767),Ks=0,ou=Bs,Js=kl,So=ul,cl=ka,ps=0,Xc=1,wl=2,Mu=3,Yc=4,Sh=5,nd=6,rd=7,Zc=8,Hu=9,Eh=10,Ef=[2,3,7],su=[3,3,11],Sl=[280,256,256,256,40],lc=[0,1,1,1,0],Th=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Kc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ro=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Yh=8,Zl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Tf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ms=null,is=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ra=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],uc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],qu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],zd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Zh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Pp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Mc=[],Qs=[],hl=[],bg=1,Cf=2,Ac=[],fl=[];Kn("UpsampleRgbLinePair",qi,3),Kn("UpsampleBgrLinePair",za,3),Kn("UpsampleRgbaLinePair",Ts,4),Kn("UpsampleBgraLinePair",co,4),Kn("UpsampleArgbLinePair",zo,4),Kn("UpsampleRgba4444LinePair",Ja,2),Kn("UpsampleRgb565LinePair",ro,2);var Jc=X.UpsampleRgbLinePair,$u=X.UpsampleBgrLinePair,lu=X.UpsampleRgbaLinePair,dl=X.UpsampleBgraLinePair,Ch=X.UpsampleArgbLinePair,Ol=X.UpsampleRgba4444LinePair,Wu=X.UpsampleRgb565LinePair,Rc=16,ao=1<<Rc-1,Au=-227,id=482,Vv=6,Ip=0,Hv=o(256),as=o(256),Mf=o(256),Fl=o(256),ei=o(id-Au),Dp=o(id-Au);Ys("YuvToRgbRow",qi,3),Ys("YuvToBgrRow",za,3),Ys("YuvToRgbaRow",Ts,4),Ys("YuvToBgraRow",co,4),Ys("YuvToArgbRow",zo,4),Ys("YuvToRgba4444Row",Ja,2),Ys("YuvToRgb565Row",ro,2);var cc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Qc=[0,2,8],Af=[8,7,6,4,4,2,2,2,1,1,1,1],Mh=1;this.WebPDecodeRGBA=function(q,te,_e,Oe,at){var gt=Xc,vt=new Tu,bt=new it;vt.ba=bt,bt.S=gt,bt.width=[bt.width],bt.height=[bt.height];var Mt=bt.width,Vt=bt.height,vn=new xt;if(vn==null||q==null)var Hn=2;else e(vn!=null),Hn=Tc(q,te,_e,vn.width,vn.height,vn.Pd,vn.Qd,vn.format,null);if(Hn!=0?Mt=0:(Mt!=null&&(Mt[0]=vn.width[0]),Vt!=null&&(Vt[0]=vn.height[0]),Mt=1),Mt){bt.width=bt.width[0],bt.height=bt.height[0],Oe!=null&&(Oe[0]=bt.width),at!=null&&(at[0]=bt.height);e:{if(Oe=new Ni,(at=new Xs).data=q,at.w=te,at.ha=_e,at.kd=1,te=[0],e(at!=null),((q=Tc(at.data,at.w,at.ha,null,null,null,te,null,at))==0||q==7)&&te[0]&&(q=4),(te=q)==0){if(e(vt!=null),Oe.data=at.data,Oe.w=at.w+at.offset,Oe.ha=at.ha-at.offset,Oe.put=Qn,Oe.ac=Yt,Oe.bc=An,Oe.ma=vt,at.xa){if((q=En())==null){vt=1;break e}if(function(Gn,Rn){var ar=[0],Jn=[0],_n=[0];t:for(;;){if(Gn==null)return 0;if(Rn==null)return Gn.a=2,0;if(Gn.l=Rn,Gn.a=0,ye(Gn.m,Rn.data,Rn.w,Rn.ha),!jt(Gn.m,ar,Jn,_n)){Gn.a=3;break t}if(Gn.xb=Cf,Rn.width=ar[0],Rn.height=Jn[0],!mr(ar[0],Jn[0],1,Gn,null))break t;return 1}return e(Gn.a!=0),0}(q,Oe)){if(Oe=(te=ju(Oe.width,Oe.height,vt.Oa,vt.ba))==0){t:{Oe=q;n:for(;;){if(Oe==null){Oe=0;break t}if(e(Oe.s.yc!=null),e(Oe.s.Ya!=null),e(0<Oe.s.Wb),e((_e=Oe.l)!=null),e((at=_e.ma)!=null),Oe.xb!=0){if(Oe.ca=at.ba,Oe.tb=at.tb,e(Oe.ca!=null),!Yl(at.Oa,_e,Mu)){Oe.a=2;break n}if(!yi(Oe,_e.width)||_e.da)break n;if((_e.da||Fe(Oe.ca.S))&&kn(),11>Oe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Oe.ca.f.kb.F!=null&&kn()),Oe.Pb&&0<Oe.s.ua&&Oe.s.vb.X==null&&!Ve(Oe.s.vb,Oe.s.Wa.Xa)){Oe.a=1;break n}Oe.xb=0}if(!zr(Oe,Oe.V,Oe.Ba,Oe.c,Oe.i,_e.o,Wn))break n;at.Dc=Oe.Ma,Oe=1;break t}e(Oe.a!=0),Oe=0}Oe=!Oe}Oe&&(te=q.a)}else te=q.a}else{if((q=new Yi)==null){vt=1;break e}if(q.Fa=at.na,q.P=at.P,q.qc=at.Sa,ra(q,Oe)){if((te=ju(Oe.width,Oe.height,vt.Oa,vt.ba))==0){if(q.Aa=0,_e=vt.Oa,e((at=q)!=null),_e!=null){if(0<(Mt=0>(Mt=_e.Md)?0:100<Mt?255:255*Mt/100)){for(Vt=vn=0;4>Vt;++Vt)12>(Hn=at.pb[Vt]).lc&&(Hn.ia=Mt*Af[0>Hn.lc?0:Hn.lc]>>3),vn|=Hn.ia;vn&&(alert("todo:VP8InitRandom"),at.ia=1)}at.Ga=_e.Id,100<at.Ga?at.Ga=100:0>at.Ga&&(at.Ga=0)}la(q,Oe)||(te=q.a)}}else te=q.a}te==0&&vt.Oa!=null&&vt.Oa.fd&&(te=Nl(vt.ba))}vt=te}gt=vt!=0?null:11>gt?bt.f.RGBA.eb:bt.f.kb.y}else gt=null;return gt};var Lp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(X,K){for(var k="",$=0;$<4;$++)k+=String.fromCharCode(X[K++]);return k}function d(X,K){return(X[K+0]<<0|X[K+1]<<8|X[K+2]<<16)>>>0}function v(X,K){return(X[K+0]<<0|X[K+1]<<8|X[K+2]<<16|X[K+3]<<24)>>>0}new c;var w=[0],_=[0],E=[],M=new c,D=t,A=function(X,K){var k={},$=0,Q=!1,ie=0,ae=0;if(k.frames=[],!function(xe,ve,Ee,De){for(var We=0;We<De;We++)if(xe[ve+We]!=Ee.charCodeAt(We))return!0;return!1}(X,K,"RIFF",4)){for(v(X,K+=4),K+=8;K<X.length;){var ce=h(X,K),se=v(X,K+=4);K+=4;var Se=se+(1&se);switch(ce){case"VP8 ":case"VP8L":k.frames[$]===void 0&&(k.frames[$]={}),(pe=k.frames[$]).src_off=Q?ae:K-8,pe.src_size=ie+se+8,$++,Q&&(Q=!1,ie=0,ae=0);break;case"VP8X":(pe=k.header={}).feature_flags=X[K];var ye=K+4;pe.canvas_width=1+d(X,ye),ye+=3,pe.canvas_height=1+d(X,ye),ye+=3;break;case"ALPH":Q=!0,ie=Se+8,ae=K-8;break;case"ANIM":(pe=k.header).bgcolor=v(X,K),ye=K+4,pe.loop_count=(Ie=X)[(me=ye)+0]<<0|Ie[me+1]<<8,ye+=2;break;case"ANMF":var Te,pe;(pe=k.frames[$]={}).offset_x=2*d(X,K),K+=3,pe.offset_y=2*d(X,K),K+=3,pe.width=1+d(X,K),K+=3,pe.height=1+d(X,K),K+=3,pe.duration=d(X,K),K+=3,Te=X[K++],pe.dispose=1&Te,pe.blend=Te>>1&1}ce!="ANMF"&&(K+=Se)}var Ie,me;return k}}(D,0);A.response=D,A.rgbaoutput=!0,A.dataurl=!1;var F=A.header?A.header:null,O=A.frames?A.frames:null;if(F){F.loop_counter=F.loop_count,w=[F.canvas_height],_=[F.canvas_width];for(var N=0;N<O.length&&O[N].blend!=0;N++);}var H=O[0],G=M.WebPDecodeRGBA(D,H.src_off,H.src_size,_,w);H.rgba=G,H.imgwidth=_[0],H.imgheight=w[0];for(var W=0;W<_[0]*w[0]*4;W++)E[W]=G[W];return this.width=_,this.height=w,this.data=E,this}(function(t){var e=function(){return typeof gD=="function"},n=function(w,_,E,M){var D=4,A=s;switch(M){case t.image_compression.FAST:D=1,A=o;break;case t.image_compression.MEDIUM:D=6,A=a;break;case t.image_compression.SLOW:D=9,A=c}w=r(w,_,E,A);var F=gD(w,{level:D});return t.__addimage__.arrayBufferToBinaryString(F)},r=function(w,_,E,M){for(var D,A,F,O=w.length/_,N=new Uint8Array(w.length+O),H=d(),G=0;G<O;G+=1){if(F=G*_,D=w.subarray(F,F+_),M)N.set(M(D,E,A),F+G);else{for(var W,X=H.length,K=[];W<X;W+=1)K[W]=H[W](D,E,A);var k=v(K.concat());N.set(K[k],F+G)}A=D}return N},i=function(w){var _=Array.apply([],w);return _.unshift(0),_},o=function(w,_){var E,M=[],D=w.length;M[0]=1;for(var A=0;A<D;A+=1)E=w[A-_]||0,M[A+1]=w[A]-E+256&255;return M},s=function(w,_,E){var M,D=[],A=w.length;D[0]=2;for(var F=0;F<A;F+=1)M=E&&E[F]||0,D[F+1]=w[F]-M+256&255;return D},a=function(w,_,E){var M,D,A=[],F=w.length;A[0]=3;for(var O=0;O<F;O+=1)M=w[O-_]||0,D=E&&E[O]||0,A[O+1]=w[O]+256-(M+D>>>1)&255;return A},c=function(w,_,E){var M,D,A,F,O=[],N=w.length;O[0]=4;for(var H=0;H<N;H+=1)M=w[H-_]||0,D=E&&E[H]||0,A=E&&E[H-_]||0,F=h(M,D,A),O[H+1]=w[H]-F+256&255;return O},h=function(w,_,E){if(w===_&&_===E)return w;var M=Math.abs(_-E),D=Math.abs(w-E),A=Math.abs(w+_-E-E);return M<=D&&M<=A?w:D<=A?_:E},d=function(){return[i,o,s,a,c]},v=function(w){var _=w.map(function(E){return E.reduce(function(M,D){return M+Math.abs(D)},0)});return _.indexOf(Math.min.apply(null,_))};t.processPNG=function(w,_,E,M){var D,A,F,O,N,H,G,W,X,K,k,$,Q,ie,ae,ce=this.decode.FLATE_DECODE,se="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(F=new Jhe(w)).imgData,A=F.bits,D=F.colorSpace,N=F.colors,[4,6].indexOf(F.colorType)!==-1){if(F.bits===8){X=(W=F.pixelBitlength==32?new Uint32Array(F.decodePixels().buffer):F.pixelBitlength==16?new Uint16Array(F.decodePixels().buffer):new Uint8Array(F.decodePixels().buffer)).length,k=new Uint8Array(X*F.colors),K=new Uint8Array(X);var Se,ye=F.pixelBitlength-F.bits;for(ie=0,ae=0;ie<X;ie++){for(Q=W[ie],Se=0;Se<ye;)k[ae++]=Q>>>Se&255,Se+=F.bits;K[ie]=Q>>>Se&255}}if(F.bits===16){X=(W=new Uint32Array(F.decodePixels().buffer)).length,k=new Uint8Array(X*(32/F.pixelBitlength)*F.colors),K=new Uint8Array(X*(32/F.pixelBitlength)),$=F.colors>1,ie=0,ae=0;for(var Te=0;ie<X;)Q=W[ie++],k[ae++]=Q>>>0&255,$&&(k[ae++]=Q>>>16&255,Q=W[ie++],k[ae++]=Q>>>0&255),K[Te++]=Q>>>16&255;A=8}M!==t.image_compression.NONE&&e()?(w=n(k,F.width*F.colors,F.colors,M),G=n(K,F.width,1,M)):(w=k,G=K,ce=void 0)}if(F.colorType===3&&(D=this.color_spaces.INDEXED,H=F.palette,F.transparency.indexed)){var pe=F.transparency.indexed,Ie=0;for(ie=0,X=pe.length;ie<X;++ie)Ie+=pe[ie];if((Ie/=255)===X-1&&pe.indexOf(0)!==-1)O=[pe.indexOf(0)];else if(Ie!==X){for(W=F.decodePixels(),K=new Uint8Array(W.length),ie=0,X=W.length;ie<X;ie++)K[ie]=pe[W[ie]];G=n(K,F.width,1)}}var me=function(xe){var ve;switch(xe){case t.image_compression.FAST:ve=11;break;case t.image_compression.MEDIUM:ve=13;break;case t.image_compression.SLOW:ve=14;break;default:ve=12}return ve}(M);return ce===this.decode.FLATE_DECODE&&(se="/Predictor "+me+" "),se+="/Colors "+N+" /BitsPerComponent "+A+" /Columns "+F.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(G&&this.__addimage__.isArrayBuffer(G)||this.__addimage__.isArrayBufferView(G))&&(G=this.__addimage__.arrayBufferToBinaryString(G)),{alias:E,data:w,index:_,filter:ce,decodeParameters:se,transparency:O,palette:H,sMask:G,predictor:me,width:F.width,height:F.height,bitsPerComponent:A,colorSpace:D}}}})(ba.API),function(t){t.processGIF89A=function(e,n,r,i){var o=new Qhe(e),s=o.width,a=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var h={data:c,width:s,height:a},d=new v5(100).encode(h,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(ba.API),rp.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},rp.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){$s.log("bit decode error:"+n)}},rp.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[o>>7-a&1];this.data[s+4*a]=c.blue,this.data[s+4*a+1]=c.green,this.data[s+4*a+2]=c.red,this.data[s+4*a+3]=255}n!==0&&(this.pos+=4-n)}},rp.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,c=15&o,h=this.palette[a];if(this.data[s]=h.blue,this.data[s+1]=h.green,this.data[s+2]=h.red,this.data[s+3]=255,2*i+1>=this.width)break;h=this.palette[c],this.data[s+4]=h.blue,this.data[s+4+1]=h.green,this.data[s+4+2]=h.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},rp.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},rp.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,c=(o>>10&e)/e*255|0,h=o>>15?255:0,d=r*this.width*4+4*i;this.data[d]=c,this.data[d+1]=a,this.data[d+2]=s,this.data[d+3]=h}this.pos+=t}},rp.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&n)/n*255|0,h=(s>>11)/e*255|0,d=i*this.width*4+4*o;this.data[d]=h,this.data[d+1]=c,this.data[d+2]=a,this.data[d+3]=255}this.pos+=t}},rp.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},rp.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},rp.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var o=new rp(e,!1),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},h=new v5(100).encode(c,100);return t.processJPEG.call(this,h,n,r,i)}}(ba.API),uB.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var o=new uB(e),s=o.width,a=o.height,c={data:o.getData(),width:s,height:a},h=new v5(100).encode(c,100);return t.processJPEG.call(this,h,n,r,i)}}(ba.API),ba.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,c=0,h=0;h<i;h+=4){var d=r[h],v=r[h+1],w=r[h+2],_=r[h+3];o[a++]=d,o[a++]=v,o[a++]=w,s[c++]=_}var E=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:E,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ba.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},k_=ba.API,pE=k_.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,h=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=h.fof?h.fof:1,v=e.doKerning!==!1,w=0,_=t.length,E=0,M=a[0]||c,D=[];for(n=0;n<_;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?D.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(w=v&&bs(h[r])==="object"&&!isNaN(parseInt(h[r][E],10))?h[r][E]/d:0,D.push((a[r]||M)/c+w)),E=r;return D},aB=k_.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return k_.processArabic&&(t=k_.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:pE.apply(this,arguments).reduce(function(o,s){return o+s},0)},oB=function(t,e,n,r){for(var i=[],o=0,s=t.length,a=0;o!==s&&a+e[o]<n;)a+=e[o],o++;i.push(t.slice(0,o));var c=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(t.slice(c,o)),a=0,c=o),a+=e[o],o++;return c!==o&&i.push(t.slice(c,o)),i},sB=function(t,e,n){n||(n={});var r,i,o,s,a,c,h,d=[],v=[d],w=n.textIndent||0,_=0,E=0,M=t.split(" "),D=pE.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?M[0].length+2:n.lineIndent||0){var A=Array(c).join(" "),F=[];M.map(function(N){(N=N.split(/\s*\n/)).length>1?F=F.concat(N.map(function(H,G){return(G&&H.length?`
`:"")+H})):F.push(N[0])}),M=F,c=aB.apply(this,[A,n])}for(o=0,s=M.length;o<s;o++){var O=0;if(r=M[o],c&&r[0]==`
`&&(r=r.substr(1),O=1),w+_+(E=(i=pE.apply(this,[r,n])).reduce(function(N,H){return N+H},0))>e||O){if(E>e){for(a=oB.apply(this,[r,i,e-(w+_),e]),d.push(a.shift()),d=[a.pop()];a.length;)v.push([a.shift()]);E=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(N,H){return N+H},0)}else d=[r];v.push(d),w=E+c,_=D}else d.push(r),w+=_+E,_=D}return h=c?function(N,H){return(H?A:"")+N.join(" ")}:function(N){return N.join(" ")},v.map(h)},k_.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var v=this.internal.getFont(d.fontName,d.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var a,c,h=[];for(a=0,c=r.length;a<c;a++)h=h.concat(sB.apply(this,[r[a],s,o]));return h},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(v){return"0x"+parseInt(v,10).toString(16)},s=t.__fontmetrics__.compress=function(v){var w,_,E,M,D=["{"];for(var A in v){if(w=v[A],isNaN(parseInt(A,10))?_="'"+A+"'":(A=parseInt(A,10),_=(_=o(A).slice(2)).slice(0,-1)+r[_.slice(-1)]),typeof w=="number")w<0?(E=o(w).slice(3),M="-"):(E=o(w).slice(2),M=""),E=M+E.slice(0,-1)+r[E.slice(-1)];else{if(bs(w)!=="object")throw new Error("Don't know what to do with value type "+bs(w)+".");E=s(w)}D.push(_+E)}return D.push("}"),D.join("")},a=t.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,_,E,M,D={},A=1,F=D,O=[],N="",H="",G=v.length-1,W=1;W<G;W+=1)(M=v[W])=="'"?w?(E=w.join(""),w=void 0):w=[]:w?w.push(M):M=="{"?(O.push([F,E]),F={},E=void 0):M=="}"?((_=O.pop())[0][_[1]]=F,E=void 0,F=_[0]):M=="-"?A=-1:E===void 0?n.hasOwnProperty(M)?(N+=n[M],E=parseInt(N,16)*A,A=1,N=""):N+=M:n.hasOwnProperty(M)?(H+=n[M],F[E]=parseInt(H,16)*A,A=1,E=void 0,H=""):H+=M;return D},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(v){var w=v.font,_=d.Unicode[w.postScriptName];_&&(w.metadata.Unicode={},w.metadata.Unicode.widths=_.widths,w.metadata.Unicode.kerning=_.kerning);var E=h.Unicode[w.postScriptName];E&&(w.metadata.Unicode.encoding=E,w.encoding=E.codePages[0])}])}(ba.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(V2(a)),s.metadata=t.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])}(ba),function(t){function e(){return(wa.canvg?Promise.resolve(wa.canvg):cD(()=>import("./index.es-BrtHgQuZ.js"),[],import.meta.url)).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}ba.API.addSvgAsImage=function(n,r,i,o,s,a,c,h){if(isNaN(r)||isNaN(i))throw $s.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw $s.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=o,d.height=s;var v=d.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,d.width,d.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return e().then(function(E){return E.fromString(v,n,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(E){return E.render(w)}).then(function(){_.addImage(d.toDataURL("image/jpeg",1),r,i,o,s,c,h)})}}(),ba.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},ba.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),c=[],h=0,d=0,v=0;function w(E,M){var D,A=!1;for(D=0;D<E.length;D+=1)E[D]===M&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var _=a.length;for(v=0;v<_;v+=1)n[a[v]].value=n[a[v]].defaultValue,n[a[v]].explicitSet=!1}if(bs(t)==="object"){for(i in t)if(o=t[i],w(a,i)&&o!==void 0){if(n[i].type==="boolean"&&typeof o=="boolean")n[i].value=o;else if(n[i].type==="name"&&w(n[i].valueSet,o))n[i].value=o;else if(n[i].type==="integer"&&Number.isInteger(o))n[i].value=o;else if(n[i].type==="array"){for(h=0;h<o.length;h+=1)if(r=!0,o[h].length===1&&typeof o[h][0]=="number")c.push(String(o[h]-1));else if(o[h].length>1){for(d=0;d<o[h].length;d+=1)typeof o[h][d]!="number"&&(r=!1);r===!0&&c.push([o[h][0]-1,o[h][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,M=[];for(E in n)n[E].explicitSet===!0&&(n[E].type==="name"?M.push("/"+E+" /"+n[E].value):M.push("/"+E+" "+n[E].value));M.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+M.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),h=o.length+s.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(ba.API),function(t){var e=t.API,n=e.pdfEscape16=function(o,s){for(var a,c=s.metadata.Unicode.widths,h=["","0","00","000","0000"],d=[""],v=0,w=o.length;v<w;++v){if(a=s.metadata.characterToGlyph(o.charCodeAt(v)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(v),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(h[4-a.length],a)}return d.join("")},r=function(o){var s,a,c,h,d,v,w;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],v=0,w=(a=Object.keys(o).sort(function(_,E){return _-E})).length;v<w;v++)s=a[v],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(h=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+h+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,h=s.newObject,d=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var v=a.metadata.Unicode.widths,w=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),_="",E=0;E<w.length;E++)_+=String.fromCharCode(w[E]);var M=h();d({data:_,addLength1:!0,objectId:M}),c("endobj");var D=h();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:D}),c("endobj");var A=h();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+l1(a.fontName)),c("/FontFile2 "+M+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var F=h();c("<<"),c("/Type /Font"),c("/BaseFont /"+l1(a.fontName)),c("/FontDescriptor "+A+" 0 R"),c("/W "+t.API.PDFObject.convert(v)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=h(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+D+" 0 R"),c("/BaseFont /"+l1(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+F+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,c=s.out,h=s.newObject,d=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var v=a.metadata.rawData,w="",_=0;_<v.length;_++)w+=String.fromCharCode(v[_]);var E=h();d({data:w,addLength1:!0,objectId:E}),c("endobj");var M=h();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:M}),c("endobj");var D=h();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+E+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+l1(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=h();for(var A=0;A<a.metadata.hmtx.widths.length;A++)a.metadata.hmtx.widths[A]=parseInt(a.metadata.hmtx.widths[A]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+M+" 0 R/BaseFont/"+l1(a.fontName)+"/FontDescriptor "+D+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",c=o.x,h=o.y,d=o.options||{},v=o.mutex||{},w=v.pdfEscape,_=v.activeFontKey,E=v.fonts,M=_,D="",A=0,F="",O=E[M].encoding;if(E[M].encoding!=="Identity-H")return{text:a,x:c,y:h,options:d,mutex:v};for(F=a,M=_,Array.isArray(a)&&(F=a[0]),A=0;A<F.length;A+=1)E[M].metadata.hasOwnProperty("cmap")&&(s=E[M].metadata.cmap.unicode.codeMap[F[A].charCodeAt(0)]),s||F[A].charCodeAt(0)<256&&E[M].metadata.hasOwnProperty("Unicode")?D+=F[A]:D+="";var N="";return parseInt(M.slice(1))<14||O==="WinAnsiEncoding"?N=w(D,M).split("").map(function(H){return H.charCodeAt(0).toString(16)}).join(""):O==="Identity-H"&&(N=n(D,E[M])),v.isHex=!0,{text:N,x:c,y:h,options:d,mutex:v}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],c={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var h=0;for(h=0;h<s.length;h+=1)Array.isArray(s[h])&&s[h].length===3?a.push([i(Object.assign({},c,{text:s[h][0]})).text,s[h][1],s[h][2]]):a.push(i(Object.assign({},c,{text:s[h]})).text);o.text=a}else o.text=i(Object.assign({},c,{text:s})).text}])}(ba),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ba.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,o,s,a,c,h,d,v=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},M={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},D=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,O=0;this.__bidiEngine__={};var N=function($){var Q=$.charCodeAt(),ie=Q>>8,ae=M[ie];return ae!==void 0?v[256*ae+(255&Q)]:ie===252||ie===253?"AL":A.test(ie)?"L":ie===8?"R":"N"},H=function($){for(var Q,ie=0;ie<$.length;ie++){if((Q=N($.charAt(ie)))==="L")return!1;if(Q==="R")return!0}return!1},G=function($,Q,ie,ae){var ce,se,Se,ye,Te=Q[ae];switch(Te){case"L":case"R":F=!1;break;case"N":case"AN":break;case"EN":F&&(Te="AN");break;case"AL":F=!0,Te="R";break;case"WS":Te="N";break;case"CS":ae<1||ae+1>=Q.length||(ce=ie[ae-1])!=="EN"&&ce!=="AN"||(se=Q[ae+1])!=="EN"&&se!=="AN"?Te="N":F&&(se="AN"),Te=se===ce?se:"N";break;case"ES":Te=(ce=ae>0?ie[ae-1]:"B")==="EN"&&ae+1<Q.length&&Q[ae+1]==="EN"?"EN":"N";break;case"ET":if(ae>0&&ie[ae-1]==="EN"){Te="EN";break}if(F){Te="N";break}for(Se=ae+1,ye=Q.length;Se<ye&&Q[Se]==="ET";)Se++;Te=Se<ye&&Q[Se]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(ye=Q.length,Se=ae+1;Se<ye&&Q[Se]==="NSM";)Se++;if(Se<ye){var pe=$[ae],Ie=pe>=1425&&pe<=2303||pe===64286;if(ce=Q[Se],Ie&&(ce==="R"||ce==="AL")){Te="R";break}}}Te=ae<1||(ce=Q[ae-1])==="B"?"N":ie[ae-1];break;case"B":F=!1,i=!0,Te=O;break;case"S":o=!0,Te="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"BN":Te="N"}return Te},W=function($,Q,ie){var ae=$.split("");return ie&&X(ae,ie,{hiLevel:O}),ae.reverse(),Q&&Q.reverse(),ae.join("")},X=function($,Q,ie){var ae,ce,se,Se,ye,Te=-1,pe=$.length,Ie=0,me=[],xe=O?_:w,ve=[];for(F=!1,i=!1,o=!1,ce=0;ce<pe;ce++)ve[ce]=N($[ce]);for(se=0;se<pe;se++){if(ye=Ie,me[se]=G($,ve,me,se),ae=240&(Ie=xe[ye][E[me[se]]]),Ie&=15,Q[se]=Se=xe[Ie][5],ae>0)if(ae===16){for(ce=Te;ce<se;ce++)Q[ce]=1;Te=-1}else Te=-1;if(xe[Ie][6])Te===-1&&(Te=se);else if(Te>-1){for(ce=Te;ce<se;ce++)Q[ce]=Se;Te=-1}ve[se]==="B"&&(Q[se]=0),ie.hiLevel|=Se}o&&function(Ee,De,We){for(var Ae=0;Ae<We;Ae++)if(Ee[Ae]==="S"){De[Ae]=O;for(var ut=Ae-1;ut>=0&&Ee[ut]==="WS";ut--)De[ut]=O}}(ve,Q,pe)},K=function($,Q,ie,ae,ce){if(!(ce.hiLevel<$)){if($===1&&O===1&&!i)return Q.reverse(),void(ie&&ie.reverse());for(var se,Se,ye,Te,pe=Q.length,Ie=0;Ie<pe;){if(ae[Ie]>=$){for(ye=Ie+1;ye<pe&&ae[ye]>=$;)ye++;for(Te=Ie,Se=ye-1;Te<Se;Te++,Se--)se=Q[Te],Q[Te]=Q[Se],Q[Se]=se,ie&&(se=ie[Te],ie[Te]=ie[Se],ie[Se]=se);Ie=ye}Ie++}}},k=function($,Q,ie){var ae=$.split(""),ce={hiLevel:O};return ie||(ie=[]),X(ae,ie,ce),function(se,Se,ye){if(ye.hiLevel!==0&&d)for(var Te,pe=0;pe<se.length;pe++)Se[pe]===1&&(Te=D.indexOf(se[pe]))>=0&&(se[pe]=D[Te+1])}(ae,ie,ce),K(2,ae,Q,ie,ce),K(1,ae,Q,ie,ce),ae.join("")};return this.__bidiEngine__.doBidiReorder=function($,Q,ie){if(function(ce,se){if(se)for(var Se=0;Se<ce.length;Se++)se[Se]=Se;a===void 0&&(a=H(ce)),h===void 0&&(h=H(ce))}($,Q),s||!c||h)if(s&&c&&a^h)O=a?1:0,$=W($,Q,ie);else if(!s&&c&&h)O=a?1:0,$=k($,Q,ie),$=W($,Q);else if(!s||a||c||h){if(s&&!c&&a^h)$=W($,Q),a?(O=0,$=k($,Q,ie)):(O=1,$=k($,Q,ie),$=W($,Q));else if(s&&a&&!c&&h)O=1,$=k($,Q,ie),$=W($,Q);else if(!s&&!c&&a^h){var ae=d;a?(O=1,$=k($,Q,ie),O=0,d=!1,$=k($,Q,ie),d=ae):(O=0,$=k($,Q,ie),$=W($,Q),O=1,d=!1,$=k($,Q,ie),d=ae,$=W($,Q))}}else O=0,$=k($,Q,ie);else O=a?1:0,$=k($,Q,ie);return $},this.__bidiEngine__.setOptions=function($){$&&(s=$.isInputVisual,c=$.isOutputVisual,a=$.isInputRtl,h=$.isOutputRtl,d=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([n.doBidiReorder(i[a])]);r.text=s}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(ba),ba.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Rv(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new pfe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new efe(this.contents),this.head=new nfe(this),this.name=new sfe(this),this.cmap=new YH(this),this.toUnicode={},this.hhea=new rfe(this),this.maxp=new lfe(this),this.hmtx=new ufe(this),this.post=new afe(this),this.os2=new ife(this),this.loca=new dfe(this),this.glyf=new cfe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,c,h;for(h=[],s=0,a=(c=this.bbox).length;s<a;s++)e=c[s],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(n=i>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return s*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Cp,Rv=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,o,s,a,c;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+c},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],o.push(this.writeByte(n));return o},t}(),efe=function(){var t;function e(n){var r,i,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,o,s,a,c,h,d,v,w,_,E,M;for(M in _=Object.keys(n).length,c=Math.log(2),v=16*Math.floor(Math.log(_)/c),s=Math.floor(v/c),d=16*_-v,(i=new Rv).writeInt(this.scalarType),i.writeShort(_),i.writeShort(v),i.writeShort(s),i.writeShort(d),o=16*_,h=i.pos+o,a=null,E=[],n)for(w=n[M],i.writeString(M),i.writeInt(t(w)),i.writeInt(h),i.writeInt(w.length),E=E.concat(w),M==="head"&&(a=h),h+=w.length;h%4;)E.push(0),h++;return i.write(E),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,o,s;for(n=ZH.call(n);n.length%4;)n.push(0);for(o=new Rv(n),i=0,r=0,s=n.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e}(),tfe={}.hasOwnProperty,mg=function(t,e){for(var n in e)tfe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Cp=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var nfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mg(e,Cp),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Rv).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),cB=function(){function t(e,n){var r,i,o,s,a,c,h,d,v,w,_,E,M,D,A,F,O;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),v=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(_=e.readUInt16(),w=_/2,e.pos+=6,o=function(){var N,H;for(H=[],c=N=0;0<=w?N<w:N>w;c=0<=w?++N:--N)H.push(e.readUInt16());return H}(),e.pos+=2,M=function(){var N,H;for(H=[],c=N=0;0<=w?N<w:N>w;c=0<=w?++N:--N)H.push(e.readUInt16());return H}(),h=function(){var N,H;for(H=[],c=N=0;0<=w?N<w:N>w;c=0<=w?++N:--N)H.push(e.readUInt16());return H}(),d=function(){var N,H;for(H=[],c=N=0;0<=w?N<w:N>w;c=0<=w?++N:--N)H.push(e.readUInt16());return H}(),i=(this.length-e.pos+this.offset)/2,a=function(){var N,H;for(H=[],c=N=0;0<=i?N<i:N>i;c=0<=i?++N:--N)H.push(e.readUInt16());return H}(),c=A=0,O=o.length;A<O;c=++A)for(D=o[c],r=F=E=M[c];E<=D?F<=D:F>=D;r=E<=D?++F:--F)d[c]===0?s=r+h[c]:(s=a[d[c]/2+(r-E)-(w-c)]||0)!==0&&(s+=h[c]),this.codeMap[r]=65535&s}e.pos=v}return t.encode=function(e,n){var r,i,o,s,a,c,h,d,v,w,_,E,M,D,A,F,O,N,H,G,W,X,K,k,$,Q,ie,ae,ce,se,Se,ye,Te,pe,Ie,me,xe,ve,Ee,De,We,Ae,ut,pt,st,Ce;switch(ae=new Rv,s=Object.keys(e).sort(function(It,Ve){return It-Ve}),n){case"macroman":for(M=0,D=function(){var It=[];for(E=0;E<256;++E)It.push(0);return It}(),F={0:0},o={},ce=0,Te=s.length;ce<Te;ce++)F[ut=e[i=s[ce]]]==null&&(F[ut]=++M),o[i]={old:e[i],new:F[e[i]]},D[i]=F[e[i]];return ae.writeUInt16(1),ae.writeUInt16(0),ae.writeUInt32(12),ae.writeUInt16(0),ae.writeUInt16(262),ae.writeUInt16(0),ae.write(D),{charMap:o,subtable:ae.data,maxGlyphID:M+1};case"unicode":for(Q=[],v=[],O=0,F={},r={},A=h=null,se=0,pe=s.length;se<pe;se++)F[H=e[i=s[se]]]==null&&(F[H]=++O),r[i]={old:H,new:F[H]},a=F[H]-i,A!=null&&a===h||(A&&v.push(A),Q.push(i),h=a),A=i;for(A&&v.push(A),v.push(65535),Q.push(65535),k=2*(K=Q.length),X=2*Math.pow(Math.log(K)/Math.LN2,2),w=Math.log(X/2)/Math.LN2,W=2*K-X,c=[],G=[],_=[],E=Se=0,Ie=Q.length;Se<Ie;E=++Se){if($=Q[E],d=v[E],$===65535){c.push(0),G.push(0);break}if($-(ie=r[$].new)>=32768)for(c.push(0),G.push(2*(_.length+K-E)),i=ye=$;$<=d?ye<=d:ye>=d;i=$<=d?++ye:--ye)_.push(r[i].new);else c.push(ie-$),G.push(0)}for(ae.writeUInt16(3),ae.writeUInt16(1),ae.writeUInt32(12),ae.writeUInt16(4),ae.writeUInt16(16+8*K+2*_.length),ae.writeUInt16(0),ae.writeUInt16(k),ae.writeUInt16(X),ae.writeUInt16(w),ae.writeUInt16(W),We=0,me=v.length;We<me;We++)i=v[We],ae.writeUInt16(i);for(ae.writeUInt16(0),Ae=0,xe=Q.length;Ae<xe;Ae++)i=Q[Ae],ae.writeUInt16(i);for(pt=0,ve=c.length;pt<ve;pt++)a=c[pt],ae.writeUInt16(a);for(st=0,Ee=G.length;st<Ee;st++)N=G[st],ae.writeUInt16(N);for(Ce=0,De=_.length;Ce<De;Ce++)M=_[Ce],ae.writeUInt16(M);return{charMap:r,subtable:ae.data,maxGlyphID:O+1}}},t}(),YH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mg(e,Cp),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new cB(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,o;return r==null&&(r="macroman"),i=cB.encode(n,r),(o=new Rv).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e}(),rfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mg(e,Cp),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),ife=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mg(e,Cp),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),afe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mg(e,Cp),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var s;for(i=n.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,c,h;for(h=[],s=a=0,c=this.file.maxp.numGlyphs;0<=c?a<c:a>c;s=0<=c?++a:--a)h.push(n.readUInt32());return h}).call(this)}},e}(),ofe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},sfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mg(e,Cp),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,o,s,a,c,h,d,v,w,_;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),i=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(h={},s=v=0,w=i.length;v<w;s=++v)o=i[s],n.pos=o.offset,d=n.readString(o.length),a=new ofe(d,o),h[_=o.nameID]==null&&(h[_]=[]),h[o.nameID].push(a);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e}(),lfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mg(e,Cp),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),ufe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mg(e,Cp),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,o,s,a,c,h;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,v;for(v=[],r=d=0;0<=o?d<o:d>o;r=0<=o?++d:--d)v.push(n.readInt16());return v}(),this.widths=(function(){var d,v,w,_;for(_=[],d=0,v=(w=this.metrics).length;d<v;d++)s=w[d],_.push(s.advance);return _}).call(this),i=this.widths[this.widths.length-1],h=[],r=a=0;0<=o?a<o:a>o;r=0<=o?++a:--a)h.push(this.widths.push(i));return h},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),ZH=[].slice,cfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mg(e,Cp),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,o,s,a,c,h,d,v,w;return n in this.cache?this.cache[n]:(s=this.file.loca,r=this.file.contents,i=s.indexOf(n),(o=s.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(c=new Rv(r.read(o))).readShort(),d=c.readShort(),w=c.readShort(),h=c.readShort(),v=c.readShort(),this.cache[n]=a===-1?new ffe(c,d,w,h,v):new hfe(c,a,d,w,h,v),this.cache[n]))},e.prototype.encode=function(n,r,i){var o,s,a,c,h;for(a=[],s=[],c=0,h=r.length;c<h;c++)o=n[r[c]],s.push(a.length),o&&(a=a.concat(o.encode(i)));return s.push(a.length),{table:a,offsets:s}},e}(),hfe=function(){function t(e,n,r,i,o,s){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),ffe=function(){function t(e,n,r,i,o){var s,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Rv(ZH.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),dfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return mg(e,Cp),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=2)s.push(2*n.readUInt16());return s}).call(this):(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=4)s.push(n.readUInt32());return s}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),o=0,s=0,a=0;a<i.length;++a)if(i[a]=o,s<r.length&&r[s]==a){++s,i[a]=o;var c=this.offsets[a],h=this.offsets[a+1]-c;h>0&&(o+=h)}for(var d=new Array(4*i.length),v=0;v<i.length;++v)d[4*v+3]=255&i[v],d[4*v+2]=(65280&i[v])>>8,d[4*v+1]=(16711680&i[v])>>16,d[4*v]=(4278190080&i[v])>>24;return d},e}(),pfe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,o;for(n in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,o,s,a,c;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in n=[],i)(r=i[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in c=this.glyphsFor(n))r=c[o],i[o]=r;return i},t.prototype.encode=function(e,n){var r,i,o,s,a,c,h,d,v,w,_,E,M,D,A;for(i in r=YH.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),_={0:0},A=r.charMap)_[(c=A[i]).old]=c.new;for(E in w=r.maxGlyphID,s)E in _||(_[E]=w++);return d=function(F){var O,N;for(O in N={},F)N[F[O]]=O;return N}(_),v=Object.keys(d).sort(function(F,O){return F-O}),M=function(){var F,O,N;for(N=[],F=0,O=v.length;F<O;F++)a=v[F],N.push(d[a]);return N}(),o=this.font.glyf.encode(s,M,_),h=this.font.loca.encode(o.offsets,M),D={cmap:this.font.cmap.raw(),glyf:o.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(D["OS/2"]=this.font.os2.raw()),this.font.directory.encode(D)},t}();ba.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,o,s;if(Array.isArray(n))return"["+function(){var a,c,h;for(h=[],a=0,c=n.length;a<c;a++)r=n[a],h.push(e.convert(r));return h}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in o=["<<"],n)s=n[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+n},e}();function wk(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function KH(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function JH(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Sk(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function gfe(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function mfe(t,e){var n=Sk("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function wD(t){return t.replace(/_/g,".")}function m2(t,e){var n=null,r="-1";return wk(t,function(i){var o=Sk("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!o||i.brand?!1:(n=i,r=o[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=mfe(i.versionTest.toLowerCase(),e)||r),r=wD(r),!0)}),{preset:n,version:r}}function gE(t,e){var n={brand:"",version:"-1"};return wk(t,function(r){var i=QH(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function QH(t,e){return KH(t,function(n){var r=n.brand;return Sk(""+e.test,r.toLowerCase())})}var eq=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],tq=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],SD=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],nq=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],rq=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function iq(t){return!!m2(nq,t).preset}function vfe(t){var e=JH(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:iq(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=m2(eq,e),s=o.preset,a=o.version,c=m2(rq,e),h=c.preset,d=c.version,v=m2(tq,e);if(r.chromium=!!v.preset,r.chromiumVersion=v.version,!r.chromium){var w=m2(SD,e);r.webkit=!!w.preset,r.webkitVersion=w.version}return h&&(i.name=h.id,i.version=d,i.majorVersion=parseInt(d,10)),s&&(r.name=s.id,r.version=a,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function yfe(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],o=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!gE(nq,n).brand||iq(JH())},a={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&wk(SD,function(w){return QH(n,w)});var c=gE(tq,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var h=gE(SD,n);s.webkit=!!h.brand,s.webkitVersion=h.version||"-1"}var d=KH(rq,function(w){return new RegExp(""+w.test,"g").exec(o)});a.name=d?d.id:"";{var v=gE(eq,n);s.name=v.brand||s.name,s.version=v.brand&&t?t.uaFullVersion:v.version}return s.webkit&&(a.name=r?"ios":"mac"),a.name==="ios"&&s.webview&&(s.version="-1"),a.version=wD(a.version),s.version=wD(s.version),a.majorVersion=parseInt(a.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:a,isMobile:r,isHints:!0}}function _fe(t){return gfe()?yfe():vfe(t)}function xfe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function bfe(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function W0(t,e){return function(n){n&&(t[e]=n)}}function aq(t,e,n){return function(r){r&&(t[e][n]=r)}}function wfe(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var o=e[i]||i;o in n||(n[o]=function(){for(var s,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var h=(s=this[r])[i].apply(s,a);return h===this[r]?this:h})})}}var Sfe="function",Efe="object",Tfe="string",Cfe="number",Ek="undefined",oq=typeof window!==Ek,Mfe=typeof document!==Ek&&document,Afe=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Fu=1e-7,mE={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Rfe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function dC(t,e,n,r){return(t*r+e*n)/(n+r)}function Tk(t){return typeof t===Ek}function _p(t){return t&&typeof t===Efe}function bc(t){return Array.isArray(t)}function Tm(t){return typeof t===Tfe}function vw(t){return typeof t===Cfe}function Ck(t){return typeof t===Sfe}function Pfe(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function sq(t,e,n,r,i){var o=Mk(t,e,n);return o?n:Ife(t,e,n+1,r,i)}function Mk(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Ife(t,e,n,r,i){for(var o=function(h){var d=e[h].trim();if(d===t.close&&!Mk(t,e,h))return{value:h};var v=h,w=Zf(i,function(_){var E=_.open;return E===d});if(w&&(v=sq(w,e,h,r,i)),v===-1)return s=h,"break";h=v,s=h},s,a=n;a<r;++a){var c=o(a);if(a=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function Ak(t,e){var n=Tm(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,o=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,a=n.isSeparateOpenClose,c=a===void 0?s:a,h=n.openCloseCharacters,d=h===void 0?Afe:h,v=d.map(function(W){var X=W.open,K=W.close;return X===K?X:X+"|"+K}).join("|"),w="(\\s*"+i+"\\s*|"+v+"|\\s+)",_=new RegExp(w,"g"),E=t.split(_).filter(function(W){return W&&W!=="undefined"}),M=E.length,D=[],A=[];function F(){return A.length?(D.push(A.join("")),A=[],!0):!1}for(var O=function(W){var X=E[W].trim(),K=W,k=Zf(d,function(ie){var ae=ie.open;return ae===X}),$=Zf(d,function(ie){var ae=ie.close;return ae===X});if(k){if(K=sq(k,E,W,M,d),K!==-1&&c)return F()&&o||(D.push(E.slice(W,K+1).join("")),W=K,o)?(N=W,"break"):(N=W,"continue")}else if($&&!Mk($,E,W)){var Q=Rfe(d);return Q.splice(d.indexOf($),1),{value:Ak(t,{separator:i,isSeparateFirst:o,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:Q})}}else if(Pfe(X,i)&&!s)return F(),o?(N=W,"break"):(N=W,"continue");K===-1&&(K=M-1),A.push(E.slice(W,K+1).join("")),W=K,N=W},N,H=0;H<M;++H){var G=O(H);if(H=N,typeof G=="object")return G.value;if(G==="break")break}return A.length&&D.push(A.join("")),D}function Pv(t){return Ak(t,"")}function U0(t){return Ak(t,",")}function lq(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Zw(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function Dfe(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function yw(){return Date.now?Date.now():new Date().getTime()}function _m(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Zf(t,e,n){var r=_m(t,e);return r>-1?t[r]:n}var uq=function(){var t=yw(),e=oq&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=yw(),i=setTimeout(function(){n(r-t)},1e3/60);return i}}(),Lfe=function(){var t=oq&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function Nx(t){return Object.keys(t)}function Ls(t,e){var n=Zw(t),r=n.value,i=n.unit;if(_p(e)){var o=e[i];if(o){if(Ck(o))return o(r);if(mE[i])return mE[i](r,o)}}else if(i==="%")return r*e/100;return mE[i]?mE[i](r):r}function ED(t,e,n){return Math.max(e,Math.min(t,n))}function hB(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[Pa(e[0],Fu),Pa(e[0]/r,Fu)],[Pa(e[1]*r,Fu),Pa(e[1],Fu)]].filter(function(i){return i.every(function(o,s){var a=e[s],c=Pa(a,Fu);return n?o<=a||o<=c:o>=a||o>=c})})[0]||t}function cq(t,e,n,r){if(!r)return t.map(function(_,E){return ED(_,e[E],n[E])});var i=t[0],o=t[1],s=r===!0?i/o:r,a=hB(t,e,!1,s),c=a[0],h=a[1],d=hB(t,n,!0,s),v=d[0],w=d[1];return i<c||o<h?(i=c,o=h):(i>v||o>w)&&(i=v,o=w),[i,o]}function Nfe(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function TD(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function bu(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function kfe(t){return[0,1].map(function(e){return TD(t.map(function(n){return n[e]}))})}function fB(t){var e=kfe(t),n=bu(e,t[0]),r=bu(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function hm(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Pa(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function dB(t,e){return t.forEach(function(n,r){t[r]=Pa(t[r],e)}),t}function Ofe(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function Ffe(t){return t.reduce(function(e,n){return e.concat(n)},[])}function nc(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function hq(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function fq(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function ph(t,e,n,r){t.addEventListener(e,n,r)}function kc(t,e,n,r){t.removeEventListener(e,n,r)}function Rk(t){return(t==null?void 0:t.ownerDocument)||Mfe}function Pk(t){return Rk(t).documentElement}function Uv(t){return Rk(t).body}function bv(t){var e;return((e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function dq(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Ik(t){return _p(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}function Bfe(t,e,n,r,i,o){for(var s=0;s<i;++s){var a=n+s*i,c=r+s*i;t[a]+=t[c]*o,e[a]+=e[c]*o}}function zfe(t,e,n,r,i){for(var o=0;o<i;++o){var s=n+o*i,a=r+o*i,c=t[s],h=e[s];t[s]=t[a],t[a]=c,e[s]=e[a],e[a]=h}}function Ufe(t,e,n,r,i){for(var o=0;o<r;++o){var s=n+o*r;t[s]/=i,e[s]/=i}}function pq(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function fg(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=vl(e),i=0;i<e;++i){var o=e*i+i;if(!Pa(n[o],Fu)){for(var s=i+1;s<e;++s)if(n[e*i+s]){zfe(n,r,i,s,e);break}}if(!Pa(n[o],Fu))return[];Ufe(n,r,i,e,n[o]);for(var s=0;s<e;++s){var a=s,c=s+i*e,h=n[c];!Pa(h,Fu)||i===s||Bfe(n,r,a,i,e,-h)}}return r}function jfe(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function gq(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function Gfe(t,e){for(var n=vl(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function ry(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function xp(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=vl(n),i=Math.min(e,n),o=0;o<i-1;++o){for(var s=0;s<i-1;++s)r[o*n+s]=t[o*e+s];r[(o+1)*n-1]=t[(o+1)*e-1],r[(n-1)*n+o]=t[(e-1)*e+o]}return r[n*n-1]=t[e*e-1],r}function pC(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=vl(t);return e.forEach(function(i){r=ks(r,i,t)}),r}function ks(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,o=e.length/i;if(i){if(!o)return t}else return e;for(var s=0;s<n;++s)for(var a=0;a<o;++a){r[a*n+s]=0;for(var c=0;c<i;++c)r[a*n+s]+=t[c*n+s]*e[a*i+c]}return r}function ko(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function ta(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function Vfe(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function mq(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function bh(t,e,n){n===void 0&&(n=e.length);var r=ks(t,e,n),i=r[n-1];return r.map(function(o){return o/i})}function Hfe(t,e){return ks(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function qfe(t,e){return ks(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function $fe(t,e){return ks(t,Jw(e,4))}function vE(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],o=i===void 0?1:i,s=e[2],a=s===void 0?1:s;return ks(t,[r,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1],4)}function Kw(t,e){return bh(Jw(e,3),ry(t,3))}function y5(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],o=i===void 0?0:i,s=e[2],a=s===void 0?0:s;return ks(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,a,1],4)}function pB(t,e){return ks(t,e,4)}function Jw(t,e){var n=Math.cos(t),r=Math.sin(t),i=vl(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function vl(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Dk(t,e){for(var n=vl(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function iy(t,e){for(var n=vl(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function Lk(t,e,n,r,i,o,s,a){var c=t[0],h=t[1],d=e[0],v=e[1],w=n[0],_=n[1],E=r[0],M=r[1],D=i[0],A=i[1],F=o[0],O=o[1],N=s[0],H=s[1],G=a[0],W=a[1],X=[c,0,d,0,w,0,E,0,h,0,v,0,_,0,M,0,1,0,1,0,1,0,1,0,0,c,0,d,0,w,0,E,0,h,0,v,0,_,0,M,0,1,0,1,0,1,0,1,-D*c,-A*c,-F*d,-O*d,-N*w,-H*w,-G*E,-W*E,-D*h,-A*h,-F*v,-O*v,-N*_,-H*_,-G*M,-W*M],K=fg(X,8);if(!K.length)return[];var k=ks(K,[D,A,F,O,N,H,G,W],8);return k[8]=1,xp(jfe(k),3,4)}var H2=function(){return H2=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},H2.apply(this,arguments)};function Wfe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function _w(t,e){return e===void 0&&(e=0),u1(sx(t,e))}function Xfe(t,e){var n=bh(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function u1(t){var e=Wfe();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function sx(t,e){e===void 0&&(e=0);var n=bc(t)?t:Pv(t);return n.map(function(r){var i=lq(r),o=i.prefix,s=i.value,a=null,c=o,h="";if(o==="translate"||o==="translateX"||o==="translate3d"){var d=_p(e)?H2(H2({},e),{"o%":e["%"]}):{"%":e,"o%":e},v=U0(s).map(function(ie,ae){return ae===0&&"x%"in d?d["%"]=e["x%"]:ae===1&&"y%"in d?d["%"]=e["y%"]:d["%"]=e["o%"],Ls(ie,d)}),w=v[0],_=v[1],E=_===void 0?0:_,M=v[2],D=M===void 0?0:M;a=y5,h=[w,E,D]}else if(o==="translateY"){var A=_p(e)?H2({"%":e["y%"]},e):{"%":e},E=Ls(s,A);a=y5,h=[0,E,0]}else if(o==="translateZ"){var D=parseFloat(s);a=y5,h=[0,0,D]}else if(o==="scale"||o==="scale3d"){var F=U0(s).map(function(ie){return parseFloat(ie)}),O=F[0],N=F[1],H=N===void 0?O:N,G=F[2],W=G===void 0?1:G;a=vE,h=[O,H,W]}else if(o==="scaleX"){var O=parseFloat(s);a=vE,h=[O,1,1]}else if(o==="scaleY"){var H=parseFloat(s);a=vE,h=[1,H,1]}else if(o==="scaleZ"){var W=parseFloat(s);a=vE,h=[1,1,W]}else if(o==="rotate"||o==="rotateZ"||o==="rotateX"||o==="rotateY"){var X=Zw(s),K=X.unit,k=X.value,$=K==="rad"?k:k*Math.PI/180;o==="rotate"||o==="rotateZ"?(c="rotateZ",a=$fe):o==="rotateX"?a=Hfe:o==="rotateY"&&(a=qfe),h=$}else if(o==="matrix3d")a=pB,h=U0(s).map(function(ie){return parseFloat(ie)});else if(o==="matrix"){var Q=U0(s).map(function(ie){return parseFloat(ie)});a=pB,h=[Q[0],Q[1],0,0,Q[2],Q[3],0,0,0,0,1,0,Q[4],Q[5],0,1]}else c="";return{name:o,functionName:c,value:s,matrixFunction:a,functionValue:h}})}var Yfe=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,o=this.values,s=i.indexOf(n),a=s===-1?i.length:s;i[a]=n,o[a]=r},t}(),Zfe=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),Kfe=typeof Map=="function",Jfe=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function Qfe(t,e){var n=[],r=[];return t.forEach(function(i){var o=i[0],s=i[1],a=new Jfe;n[o]=a,r[s]=a}),n.forEach(function(i,o){i.connect(n[o-1])}),t.filter(function(i,o){return!e[o]}).map(function(i,o){var s=i[0],a=i[1];if(s===a)return[0,0];var c=n[s],h=r[a-1],d=c.getIndex();c.disconnect(),h?c.connect(h,h.next):c.connect(void 0,n[0]);var v=c.getIndex();return[d,v]})}var ede=function(){function t(n,r,i,o,s,a,c,h){this.prevList=n,this.list=r,this.added=i,this.removed=o,this.changed=s,this.maintained=a,this.changedBeforeAdded=c,this.fixed=h}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=Qfe(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(o,s){var a=o[0],c=o[1],h=r[s],d=h[0],v=h[1];if(a!==c)return i.push([d,v]),!0}),this.cachePureChanged=i},t}();function Nk(t,e,n){var r=Kfe?Map:n?Zfe:Yfe,i=n||function(F){return F},o=[],s=[],a=[],c=t.map(i),h=e.map(i),d=new r,v=new r,w=[],_=[],E={},M=[],D=0,A=0;return c.forEach(function(F,O){d.set(F,O)}),h.forEach(function(F,O){v.set(F,O)}),c.forEach(function(F,O){var N=v.get(F);typeof N>"u"?(++A,s.push(O)):E[N]=A}),h.forEach(function(F,O){var N=d.get(F);typeof N>"u"?(o.push(O),++D):(a.push([N,O]),A=E[O]||0,w.push([N-A,O-D]),_.push(O===N),N!==O&&M.push([N,O]))}),s.reverse(),new ede(t,e,o,s,M,a,w,_)}var tde=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=Nk(this.list,r,this.findKeyCallback);return this.list=r,i},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var CD=function(t,e){return CD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},CD(t,e)};function nde(t,e){CD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var vq=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),yq=function(t){nde(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,vq)||this}return e}(tde);function rde(t,e){return Nk(t,e,vq)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var MD=function(){return MD=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},MD.apply(this,arguments)};function ide(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var kk=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(_p(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(_p(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var o=this._events[n];if(o){var s=_m(o,function(a){return a.listener===r});s>-1&&o.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(o){i._addEvent(n,o,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var o=this._events[n];if(!n||!o)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,ide(o).forEach(function(a){a.listener(r),a.once&&i.off(n,a.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var o=this._events;o[n]=o[n]||[];var s=o[n];s.push(MD({listener:r},i))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var AD=function(t,e){return AD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},AD(t,e)};function ade(t,e){AD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var P1=function(){return P1=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},P1.apply(this,arguments)};function ode(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function gB(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function yE(t){if(t){if(Tm(t))return document.querySelector(t)}else return null;if(Ck(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var sde=function(t){ade(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(o){r.checkScroll({container:i.container,inputEvent:o})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var o=yE(i.container);if(!o){this._flag=!1;return}var s=0,a=0,c=0,h=0;if(o===document.body)c=window.innerWidth,h=window.innerHeight;else{var d=o.getBoundingClientRect();s=d.top,a=d.left,c=d.width,h=d.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:a,width:c,height:h},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var o=r.clientX,s=r.clientY,a=i.threshold,c=a===void 0?0:a,h=this,d=h._startRect,v=h._startPos;this._currentOptions=i;var w=[0,0];return d.top>s-c?(v[1]>d.top||s<v[1])&&(w[1]=-1):d.top+d.height<s+c&&(v[1]<d.top+d.height||s>v[1])&&(w[1]=1),d.left>o-c?(v[0]>d.left||o<v[0])&&(w[0]=-1):d.left+d.width<o+c&&(v[0]<d.left+d.width||o>v[0])&&(w[0]=1),!w[0]&&!w[1]?!1:this._continueDrag(P1(P1({},i),{direction:w,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var o=r.prevScrollPos,s=o===void 0?this._prevScrollPos:o,a=r.direction,c=r.throttleTime,h=c===void 0?0:c,d=r.inputEvent,v=r.isDrag,w=this._getScrollPosition(a||[0,0],r),_=w[0]-s[0],E=w[1]-s[1],M=a||[_?Math.abs(_)/_:0,E?Math.abs(E)/E:0];return this._prevScrollPos=w,this._lock=!1,!_&&!E?!1:(this.emit("move",{offsetX:M[0]?_:0,offsetY:M[1]?E:0,inputEvent:d}),h&&v&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},h)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var o=i.container,s=i.getScrollPosition,a=s===void 0?ode:s;return a({container:yE(o),direction:r})},n._continueDrag=function(r){var i=this,o,s=r.container,a=r.direction,c=r.throttleTime,h=r.useScroll,d=r.isDrag,v=r.inputEvent;if(!(!this._flag||d&&this._isWait)){var w=yw(),_=Math.max(c+this._prevTime-w,0);if(_>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},_),!1;this._prevTime=w;var E=this._getScrollPosition(a,r);this._prevScrollPos=E,d&&(this._isWait=!0),h||(this._lock=!0);var M={container:yE(s),direction:a,inputEvent:v};return(o=r.requestScroll)===null||o===void 0||o.call(r,M),this.emit("scroll",M),this._isWait=!1,h||this.checkScroll(P1(P1({},r),{prevScrollPos:E,direction:a,inputEvent:v}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var o=i===!0?gB:i,s=yE(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=gB(window,this._onScroll):this._unregister=o(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(kk);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function lde(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function cf(t){return Pa(t,Fu)}function ude(t,e){return t.every(function(n,r){return cf(n-e[r])===0})}function cde(t,e){return!cf(t[0]-e[0])&&!cf(t[1]-e[1])}function _q(t){return t.length<3?0:Math.abs(Nfe(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function mB(t,e){var n=e.width,r=e.height,i=e.left,o=e.top,s=ay(t),a=s.minX,c=s.minY,h=s.maxX,d=s.maxY,v=n/(h-a),w=r/(d-c);return t.map(function(_){return[i+(_[0]-a)*v,o+(_[1]-c)*w]})}function ay(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function RD(t,e,n){var r=t[0],i=t[1],o=ay(e),s=o.minX,a=o.maxX,c=[[s,i],[a,i]],h=gC(c[0],c[1]),d=PD(e),v=[];if(d.forEach(function(E){var M=gC(E[0],E[1]),D=E[0];if(ude(h,M))v.push({pos:t,line:E,type:"line"});else{var A=xq(Ok(h,M),[c,E]);A.forEach(function(F){E.some(function(O){return cde(O,F)})?v.push({pos:F,line:E,type:"point"}):cf(D[1]-i)!==0&&v.push({pos:F,line:E,type:"intersection"})})}}),Zf(v,function(E){return E[0]===r}))return!0;var w=0,_={};return v.forEach(function(E){var M=E.pos,D=E.type,A=E.line;if(!(M[0]>r))if(D==="intersection")++w;else{if(D==="line")return;if(D==="point"){var F=Zf(A,function(H){return H[1]!==i}),O=_[M[0]],N=F[1]>i?1:-1;O?O!==N&&++w:_[M[0]]=N}}}),w%2===1}function gC(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=i-n,a=o-r;Math.abs(s)<Fu&&(s=0),Math.abs(a)<Fu&&(a=0);var c=0,h=0,d=0;return s?a?(c=-a/s,h=1,d=-c*n-r):(h=1,d=-r):a&&(c=-1,d=n),[c,h,d]}function Ok(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],c=n===0&&o===0,h=r===0&&s===0,d=[];if(c&&h)return[];if(c){var v=-i/r,w=-a/s;return v!==w?[]:[[-1/0,v],[1/0,v]]}else if(h){var _=-i/n,E=-a/o;return _!==E?[]:[[_,-1/0],[_,1/0]]}else if(n===0){var M=-i/r,D=-(s*M+a)/o;d=[[D,M]]}else if(o===0){var M=-a/s,D=-(r*M+i)/n;d=[[D,M]]}else if(r===0){var D=-i/n,M=-(o*D+a)/s;d=[[D,M]]}else if(s===0){var D=-a/o,M=-(n*D+i)/r;d=[[D,M]]}else{var D=(r*a-s*i)/(s*n-r*o),M=-(n*D+i)/r;d=[[D,M]]}return d.map(function(A){return[A[0],A[1]]})}function xq(t,e){var n=e.map(function(v){return[0,1].map(function(w){return[Math.min(v[0][w],v[1][w]),Math.max(v[0][w],v[1][w])]})}),r=[];if(t.length===2){var i=t[0],o=i[0],s=i[1];if(cf(o-t[1][0])){if(!cf(s-t[1][1])){var h=Math.max.apply(Math,n.map(function(v){return v[0][0]})),d=Math.min.apply(Math,n.map(function(v){return v[0][1]}));if(cf(h-d)>0)return[];r=[[h,s],[d,s]]}}else{var a=Math.max.apply(Math,n.map(function(v){return v[1][0]})),c=Math.min.apply(Math,n.map(function(v){return v[1][1]}));if(cf(a-c)>0)return[];r=[[o,a],[o,c]]}}return r.length||(r=t.filter(function(v){var w=v[0],_=v[1];return n.every(function(E){return 0<=cf(w-E[0][0])&&0<=cf(E[0][1]-w)&&0<=cf(_-E[1][0])&&0<=cf(E[1][1]-_)})})),r.map(function(v){return[cf(v[0]),cf(v[1])]})}function PD(t){return lde(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function hde(t,e){var n=t.slice(),r=e.slice();fB(n)===-1&&n.reverse(),fB(r)===-1&&r.reverse();var i=PD(n),o=PD(r),s=i.map(function(d){return gC(d[0],d[1])}),a=o.map(function(d){return gC(d[0],d[1])}),c=[];s.forEach(function(d,v){var w=i[v],_=[];a.forEach(function(E,M){var D=Ok(d,E),A=xq(D,[w,o[M]]);_.push.apply(_,A.map(function(F){return{index1:v,index2:M,pos:F,type:"intersection"}}))}),_.sort(function(E,M){return hm(w[0],E.pos)-hm(w[0],M.pos)}),c.push.apply(c,_),RD(w[1],r)&&c.push({index1:v,index2:-1,pos:w[1],type:"inside"})}),o.forEach(function(d,v){if(RD(d[1],n)){var w=!1,_=_m(c,function(E){var M=E.index2;return M===v?(w=!0,!1):!!w});_===-1&&(w=!1,_=_m(c,function(E){var M=E.index1,D=E.index2;return M===-1&&D+1===v?(w=!0,!1):!!w})),_===-1?c.push({index1:-1,index2:v,pos:d[1],type:"inside"}):c.splice(_,0,{index1:-1,index2:v,pos:d[1],type:"inside"})}});var h={};return c.filter(function(d){var v=d.pos,w=v[0]+"x"+v[1];return h[w]?!1:(h[w]=!0,!0)})}function fde(t,e){var n=hde(t,e);return n.map(function(r){var i=r.pos;return i})}function dde(t,e){var n=fde(t,e);return _q(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ID=function(t,e){return ID=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ID(t,e)};function pde(t,e){ID(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ku=function(){return ku=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ku.apply(this,arguments)};function gde(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function _5(t){return gde([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function mde(t){return t.touches&&t.touches.length>=2}function _E(t){return t?t.touches?yde(t.touches):[bq(t)]:[]}function vde(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function vB(t,e,n){var r=n.length,i=q2(t,r),o=i.clientX,s=i.clientY,a=i.originalClientX,c=i.originalClientY,h=q2(e,r),d=h.clientX,v=h.clientY,w=q2(n,r),_=w.clientX,E=w.clientY,M=o-d,D=s-v,A=o-_,F=s-E;return{clientX:a,clientY:c,deltaX:M,deltaY:D,distX:A,distY:F}}function x5(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function yde(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(bq(t[r]));return n}function bq(t){return{clientX:t.clientX,clientY:t.clientY}}function q2(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var o=t[i];n.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,n.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,n.clientX+=o.clientX,n.clientY+=o.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var b5=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),_5(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),_5(e)-_5(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=vB(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,o=r.deltaY;return this.movement+=Math.sqrt(i*i+o*o),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),o=[],s=0;s<i;++s)o[s]=vB([e[s]],[n[s]],[r[s]]);return o},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=q2(e,this.length),i=q2(this.prevClients,this.length),o=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(o*o+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),x5(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),x5(e)/x5(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),yB=["textarea","input"],_de=function(t){pde(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(w,_){if(_===void 0&&(_=!0),!(!i.flag&&w.cancelable===!1)){var E=w.type.indexOf("drag")>=-1;if(!(i.flag&&E)){i._isDragAPI=!0;var M=i.options,D=M.container,A=M.pinchOutside,F=M.preventWheelClick,O=M.preventRightClick,N=M.preventDefault,H=M.checkInput,G=M.dragFocusedInput,W=M.preventClickEventOnDragStart,X=M.preventClickEventOnDrag,K=M.preventClickEventByCondition,k=i._useTouch,$=!i.flag;if(i._isSecondaryButton=w.which===3||w.button===2,F&&(w.which===2||w.button===1)||O&&(w.which===3||w.button===2))return i.stop(),!1;if($){var Q=i._window.document.activeElement,ie=w.target;if(ie){var ae=ie.tagName.toLowerCase(),ce=yB.indexOf(ae)>-1,se=ie.isContentEditable;if(ce||se){if(H||!G&&Q===ie)return!1;if(Q&&(Q===ie||se&&Q.isContentEditable&&Q.contains(ie)))if(G)ie.blur();else return!1}else if((N||w.type==="touchstart")&&Q){var Se=Q.tagName.toLowerCase();(Q.isContentEditable||yB.indexOf(Se)>-1)&&Q.blur()}(W||X||K)&&ph(i._window,"click",i._onClick,!0)}i.clientStores=[new b5(_E(w))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=_,i._dragFlag=!0,i._prevInputEvent=w,i.data={},i.doubleFlag=yw()-i.prevTime<200,i._isMouseEvent=vde(w),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var ye=i._preventMouseEvent||i.emit("dragStart",ku(ku({data:i.data,datas:i.data,inputEvent:w,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:_,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){w.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));ye===!1&&i.stop(),i._isMouseEvent&&i.flag&&N&&w.preventDefault()}if(!i.flag)return!1;var Te=0;if($?(i._attchDragEvent(),k&&A&&(Te=setTimeout(function(){ph(D,"touchstart",i.onDragStart,{passive:!1})}))):k&&A&&kc(D,"touchstart",i.onDragStart),i.flag&&mde(w)){if(clearTimeout(Te),$&&w.touches.length!==w.changedTouches.length)return;i.pinchFlag||i.onPinchStart(w)}}}},i.onDrag=function(w,_){if(i.flag){var E=i.options.preventDefault;!i._isMouseEvent&&E&&w.preventDefault(),i._prevInputEvent=w;var M=_E(w),D=i.moveClients(M,w,!1);if(i._dragFlag){if(i.pinchFlag||D.deltaX||D.deltaY){var A=i._preventMouseEvent||i.emit("drag",ku(ku({},D),{isScroll:!!_,inputEvent:w}));if(A===!1){i.stop();return}}i.pinchFlag&&i.onPinch(w,M)}i.getCurrentStore().getPosition(M,!0)}},i.onDragEnd=function(w){if(i.flag){var _=i.options,E=_.pinchOutside,M=_.container,D=_.preventClickEventOnDrag,A=_.preventClickEventOnDragStart,F=_.preventClickEventByCondition,O=i.isDrag;(D||A||F)&&requestAnimationFrame(function(){i._allowClickEvent()}),!F&&!A&&D&&!O&&i._allowClickEvent(),i._useTouch&&E&&kc(M,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(w);var N=w!=null&&w.touches?_E(w):[],H=N.length;H===0||!i.options.keepDragging?i.flag=!1:i._addStore(new b5(N));var G=i._getPosition(),W=yw(),X=!O&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=O||X?0:W,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",ku({data:i.data,datas:i.data,isDouble:X,isDrag:O,isClick:!O,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:w,isTrusted:i._isTrusted},G)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){kc(i._window,"click",i._onClick,!0)},i._onClick=function(w){i._allowClickEvent(),i._allowMouseEvent();var _=i.options.preventClickEventByCondition;_!=null&&_(w)||(w.stopPropagation(),w.preventDefault())},i._onContextMenu=function(w){var _=i.options;_.preventRightClick?i.onDragEnd(w):w.preventDefault()},i._passCallback=function(){};var o=[].concat(n),s=o[0];i._window=dq(s)?s:bv(s),i.options=ku({checkInput:!1,container:s&&!("document"in s)?bv(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var a=i.options,c=a.container,h=a.events,d=a.checkWindowBlur;if(i._useDrag=h.indexOf("drag")>-1,i._useTouch=h.indexOf("touch")>-1,i._useMouse=h.indexOf("mouse")>-1,i.targets=o,i._useDrag&&o.forEach(function(w){ph(w,"dragstart",i.onDragStart)}),i._useMouse&&(o.forEach(function(w){ph(w,"mousedown",i.onDragStart),ph(w,"mousemove",i._passCallback)}),ph(c,"contextmenu",i._onContextMenu)),d&&ph(bv(),"blur",i.onBlur),i._useTouch){var v={passive:!1};o.forEach(function(w){ph(w,"touchstart",i.onDragStart,v),ph(w,"touchmove",i._passCallback,v)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(n,r),o&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],o=n[1],s=this.getCurrentStore(),a=s.prevClients;return this.moveClients(a.map(function(c){var h=c.clientX,d=c.clientY;return{clientX:h+i,clientY:d+o,originalClientX:h,originalClientY:d}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),ku(ku({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),kc(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(o){kc(o,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(o){kc(o,"mousedown",n.onDragStart)}),kc(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(o){kc(o,"touchstart",n.onDragStart)}),kc(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var o=new b5(_E(n));this.pinchFlag=!0,this._addStore(o);var s=this.emit("pinchStart",ku(ku({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",ku(ku({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",ku(ku({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var o=this._getPosition(n,i),s=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!s&&this.isDrag&&(a=!0),ku(ku({data:this.data,datas:this.data},o),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:a})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),o=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(h,d){var v=d.getPosition();return h.distX+=v.distX,h.distY+=v.distY,h},o),a=s.distX,c=s.distY;return ku(ku({},o),{distX:a,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(ph(r,"dragover",this.onDrag,i),ph(n,"dragend",this.onDragEnd)),this._useMouse&&(ph(r,"mousemove",this.onDrag),ph(n,"mouseup",this.onDragEnd)),this._useTouch&&(ph(r,"touchmove",this.onDrag,i),ph(n,"touchend",this.onDragEnd,i),ph(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(kc(r,"dragover",this.onDrag),kc(n,"dragend",this.onDragEnd)),this._useMouse&&(kc(r,"mousemove",this.onDrag),kc(n,"mouseup",this.onDragEnd)),this._useTouch&&(kc(r,"touchstart",this.onDragStart),kc(r,"touchmove",this.onDrag),kc(n,"touchend",this.onDragEnd),kc(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(kk);function xde(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var bde=xde;function wde(t){return bde(t).toString(36)}function Sde(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Ede(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var o=i.trim();return(o?U0(o):[""]).map(function(s){var a=s.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(t))):a?".".concat(t," ").concat(a):".".concat(t)}).join(", ")+" {"})}function Tde(t,e,n,r,i){var o=Rk(r),s=o.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=Ede(t,e,n),(i||o.head||o.body).appendChild(s),s}function Cde(t){var e="rCS"+wde(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=Sde(n),o=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!o)o=Tde(e,t,r,n,i);else{var s=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var a,c=parseFloat(o.getAttribute("data-styled-count"))||0;c<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(c-1))}}}}}var DD=function(){return DD=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},DD.apply(this,arguments)};function Mde(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function wq(t,e){var n=Cde(e),r=n.className;return Be.forwardRef(function(i,o){var s=i.className,a=s===void 0?"":s;i.cspNonce;var c=Mde(i,["className","cspNonce"]),h=Be.useRef();return Be.useImperativeHandle(o,function(){return h.current},[]),Be.useEffect(function(){var d=n.inject(h.current,{nonce:i.cspNonce});return function(){d.destroy()}},[]),Be.createElement(t,DD({ref:h,"data-styled-id":r,className:"".concat(a," ").concat(r)},c))})}var LD=function(t,e){return LD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},LD(t,e)};function Qw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");LD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mn=function(){return mn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},mn.apply(this,arguments)};function Ade(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Rde(t,e,n,r){var i=arguments.length,o=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(e,n,o):s(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function Pde(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tn(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Kr(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function eS(t,e){return mn({events:[],props:[],name:t},e)}var Ide=["n","w","s","e"],Fk=["n","w","s","e","nw","ne","sw","se"];function Dde(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function Lde(t){var e=Dde(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var kx=_fe(),Sq=kx.browser.webkit,Eq=Sq&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),Tq=kx.browser.name,Cq=parseInt(kx.browser.version,10),Nde=Tq==="chrome",kde=kx.browser.chromium,Ode=parseInt(kx.browser.chromiumVersion,10)||0,Fde=Nde&&Cq>=109||kde&&Ode>=109,Bde=Tq==="firefox",zde=parseInt(kx.browser.webkitVersion,10)>=612||Cq>=15,Bk="moveable-",Ude=Fk.map(function(t){var e="",n="",r="center",i="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(o,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(o,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),jde=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Ude,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(Lde(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Eq?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Gde=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],ND=1e-4,$h=1e-7,xE=1e-9,kD=Math.pow(10,10),_B=-kD,Vde={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},zk={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Mq={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Hde=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function tS(t,e,n,r,i,o){var s,a;o===void 0&&(o="draggable");var c=(a=(s=e.gestos[o])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&a!==void 0?a:{},h=c.originalDatas||c.datas,d=h[o]||(h[o]={});return mn(mn({},c),{isPinch:!!r,parentEvent:!0,datas:d,originalDatas:t.originalDatas})}var lx=function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),mn(mn({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,o=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(o=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:o,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function X1(t,e,n,r){var i=t.length===16,o=i?4:3,s=Ey(t,n,r,o),a=Tn(s,4),c=Tn(a[0],2),h=c[0],d=c[1],v=Tn(a[1],2),w=v[0],_=v[1],E=Tn(a[2],2),M=E[0],D=E[1],A=Tn(a[3],2),F=A[0],O=A[1],N=Tn(Gl(t,e,o),2),H=N[0],G=N[1],W=Math.min(h,w,M,F),X=Math.min(d,_,D,O),K=Math.max(h,w,M,F),k=Math.max(d,_,D,O);h=h-W||0,w=w-W||0,M=M-W||0,F=F-W||0,d=d-X||0,_=_-X||0,D=D-X||0,O=O-X||0,H=H-W||0,G=G-X||0;var $=t[0],Q=t[o+1],ie=jh($*Q);return{left:W,top:X,right:K,bottom:k,origin:[H,G],pos1:[h,d],pos2:[w,_],pos3:[M,D],pos4:[F,O],direction:ie}}function Aq(t,e){var n=e.clientX,r=e.clientY,i=e.datas,o=t.state,s=o.moveableClientRect,a=o.rootMatrix,c=o.is3d,h=o.pos1,d=s.left,v=s.top,w=c?4:3,_=Tn(ta(hx(a,[n-d,r-v],w),h),2),E=_[0],M=_[1],D=Tn(vg({datas:i,distX:E,distY:M}),2),A=D[0],F=D[1];return[A,F]}function Sy(t,e){var n=e.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,s=r.is3d,a=r.left,c=r.top,h=r.origin,d=r.offsetMatrix,v=r.targetMatrix,w=r.transformOrigin,_=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=v,n.beforeMatrix=o,n.offsetMatrix=d,n.transformOrigin=w,n.inverseMatrix=fg(i,_),n.inverseBeforeMatrix=fg(o,_),n.absoluteOrigin=ry(ko([a,c],h),_),n.startDragBeforeDist=bh(n.inverseBeforeMatrix,n.absoluteOrigin,_),n.startDragDist=bh(n.inverseMatrix,n.absoluteOrigin,_)}function qde(t){return X1(t.datas.beforeTransform,[50,50],100,100).direction}function OM(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,o=r.transformIndex,s=i.nextTransforms,a=s.length,c=i.nextTransformAppendedIndexes,h=-1;o===-1?(n==="translate"?h=0:n==="rotate"&&(h=_m(s,function(_){return _.match(/scale\(/g)})),h===-1&&(h=s.length),r.transformIndex=h):Zf(c,function(_){return _.index===o&&_.functionName===n})?h=o:h=o+c.filter(function(_){return _.index<o}).length;var d=vge(s,t.state,h),v=d.targetFunction,w=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=d.beforeFunctionTexts,r.afterFunctionTexts=d.afterFunctionTexts,r.beforeTransform=d.beforeFunctionMatrix,r.beforeTransform2=d.beforeFunctionMatrix2,r.targetTansform=d.targetFunctionMatrix,r.afterTransform=d.afterFunctionMatrix,r.afterTransform2=d.afterFunctionMatrix2,r.targetAllTransform=d.allFunctionMatrix,v.functionName===w?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):a>h&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Kr(Kr([],Tn(c),!1),[{functionName:n,index:h,isAppend:!0}],!1))}function FM(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function $de(t){var e=t.datas,n=t.distX,r=t.distY,i=Tn(Pq({datas:e,distX:n,distY:r}),2),o=i[0],s=i[1],a=Rq(e,Gfe([o,s],4));return bh(a,ry([0,0,0],4),4)}function Rq(t,e,n){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,s=t.afterTransform2,a=t.targetAllTransform,c=n?ks(a,e,4):ks(e,a,4),h=ks(fg(n?o:r,4),c,4),d=ks(h,fg(n?s:i,4),4);return d}function Pq(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,o=e.is3d,s=e.startDragBeforeDist,a=e.absoluteOrigin,c=o?4:3;return ta(bh(i,ko(a,[n,r]),c),s)}function vg(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.inverseBeforeMatrix,s=n.inverseMatrix,a=n.is3d,c=n.startDragBeforeDist,h=n.startDragDist,d=n.absoluteOrigin,v=a?4:3;return ta(bh(e?o:s,ko(d,[r,i]),v),e?c:h)}function Wde(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var o=n.matrix,s=n.is3d;n.startDragBeforeDist;var a=n.startDragDist,c=n.absoluteOrigin,h=s?4:3;return ta(bh(o,ko(a,[r,i]),h),c)}function Xde(t,e,n,r,i,o){return r===void 0&&(r=e),i===void 0&&(i=n),o===void 0&&(o=[0,0]),t?t.map(function(s,a){var c=Zw(s),h=c.value,d=c.unit,v=a?i:r,w=a?n:e;if(s==="%"||isNaN(h)){var _=v?o[a]/v:0;return w*_}else if(d!=="%")return h;return w*h/100}):o}function Iq(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Yde(t,e){return Iq(e).map(function(n){return t[n]})}function w5(t,e){var n=(e+1)/2;return[dC(t[0][0],t[1][0],n,1-n),dC(t[0][1],t[1][1],n,1-n)]}function rc(t,e){var n=w5([t[0],t[1]],e[0]),r=w5([t[2],t[3]],e[0]);return w5([n,r],e[1])}function Zde(t,e,n,r,i,o){var s=Ey(e,n,r,i),a=rc(s,o),c=t[0]-a[0],h=t[1]-a[1];return[c,h]}function nS(t,e,n,r){return ks(t,W2(e,r,n),r)}function Kde(t,e,n,r){var i=t.transformOrigin,o=t.offsetMatrix,s=t.is3d,a=s?4:3,c;if(Tm(n)){var h=e.beforeTransform,d=e.afterTransform;r?c=xp(_w(n),4,a):c=xp(ks(ks(h,_w([n]),4),d,4),4,a)}else c=n;return nS(o,c,i,a)}function Jde(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,o=t.targetMatrix,s=t.targetAllTransform,a=i?4:3;return nS(r,ks(s||o,Dk(e,a),a),n,a)}function BM(t,e){var n=Ox(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=bc(r)?r:Pv(r),OD(t,e,i)},setTransformIndex:function(r){OD(t,e,r)}}}function zM(t,e,n){var r=Ox(e),i=r.startTransforms;OD(t,e,_m(i,function(o){return o.indexOf("".concat(n,"("))===0}))}function OD(t,e,n){var r=Ox(e),i=e.datas;if(i.transformIndex=n,n!==-1){var o=r.startTransforms[n];if(o){var s=t.state,a=sx([o],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=a[0].functionValue}}}function Uk(t,e){var n=Ox(t);n.nextTransforms=Pv(e)}function Ox(t){return t.originalDatas.beforeRenderable}function mC(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function bE(t){return(mC(t)||[]).join(" ")}function wE(t){return Ox(t).nextStyle}function Dq(t,e,n,r,i){Uk(i,e);var o=Uh.drag(t,tS(i,t.state,n,r)),s=o?o.transform:e;return mn(mn({transform:e,drag:o},Hh({transform:s},i)),{afterTransform:s})}function jk(t,e,n,r,i,o){var s=Kde(t.state,i,e,o),a=tpe(t,n,r,s);return a}function Lq(t,e,n,r,i,o,s){var a=jk(t,e,n,i,o,s),c=t.state,h=c.left,d=c.top,v=t.props.groupable,w=v?h:0,_=v?d:0,E=ta(r,a);return ta(E,[w,_])}function Qde(t,e,n,r,i,o,s){var a=Lq(t,e,n,r,i,o,s);return a}function epe(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function tpe(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,o=i.width,s=i.height,a=i.is3d,c=a?4:3,h=[o/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return Gl(r,h,c)}function npe(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,o=n.fixedOffset;return Lq(t,"rotate(".concat(e,"deg)"),r,i,o,n)}function rpe(t,e,n,r,i,o){var s=t.props.groupable,a=t.state,c=a.transformOrigin,h=a.offsetMatrix,d=a.is3d,v=a.width,w=a.height,_=a.left,E=a.top,M=o.fixedDirection,D=o.nextTargetMatrix||a.targetMatrix,A=d?4:3,F=Xde(i,e,n,v,w,c),O=s?_:0,N=s?E:0,H=nS(h,D,F,A),G=Zde(r,H,e,n,A,M);return ta(G,[O,N])}function ipe(t,e){return rc(Ld(t.state),e)}function ape(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n!=null&&n.isFlag()&&(i=n.getEventData()[e]),!i&&(r!=null&&r.isFlag())&&(i=r.getEventData()[e]),i||{}}function ope(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function spe(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function Nq(t,e,n){for(var r=t,i=[],o=Pk(t)||Uv(t),s=!n&&t===e||t===o,a=s,c=!1,h=3,d,v,w,_=!1,E=bw(e,e,!0).offsetParent,M=1;r&&!a;){a=s;var D=_f(r),A=D("position"),F=i$(r),O=A==="fixed",N=spe(D),H=Vfe(ige(F)),G=void 0,W=!1,X=!1,K=0,k=0,$=0,Q=0,ie={hasTransform:!1,fixedContainer:null};O&&(_=!0,ie=uge(r),E=ie.fixedContainer);var ae=H.length;!c&&(ae===16||N.length)&&(c=!0,h=4,GD(i),w&&(w=xp(w,3,4))),c&&ae===9&&(H=xp(H,3,4));var ce=lge(r,t),se=ce.tagName,Se=ce.hasOffset,ye=ce.isSVG,Te=ce.origin,pe=ce.targetOrigin,Ie=ce.offset,me=Tn(Ie,2),xe=me[0],ve=me[1];se==="svg"&&!r.ownerSVGElement&&w&&(i.push({type:"target",target:r,matrix:cge(r,h)}),i.push({type:"offset",target:r,matrix:vl(h)}));var Ee=parseFloat(D("zoom"))||1;if(O)G=ie.fixedContainer,W=!0;else{var De=bw(r,e,!1,!0,D),We=De.offsetZoom;if(G=De.offsetParent,W=De.isEnd,X=De.isStatic,M*=We,(De.isCustomElement||We!==1)&&X)xe-=G.offsetLeft,ve-=G.offsetTop;else if(Bde||Fde){var Ae=De.parentSlotElement;if(Ae){for(var ut=G,pt=0,st=0;ut&&ope(ut);)pt+=ut.offsetLeft,st+=ut.offsetTop,ut=ut.offsetParent;xe-=pt,ve-=st}}}if(Sq&&!zde&&Se&&!ye&&X&&(A==="relative"||A==="static")&&(xe-=G.offsetLeft,ve-=G.offsetTop,s=s||W),O)Se&&ie.hasTransform&&($=G.clientLeft,Q=G.clientTop);else if(Se&&E!==G&&(K=G.clientLeft,k=G.clientTop),Se&&G===o){var Ce=a$(r,!1);xe+=Ce[0],ve+=Ce[1]}if(i.push({type:"target",target:r,matrix:W2(H,h,Te)}),N.length&&(i.push({type:"offset",target:r,matrix:vl(h)}),i.push({type:"target",target:r,matrix:W2(_w(N),h,Te)})),Se){var It=r===t,Ve=It?0:r.scrollLeft,yt=It?0:r.scrollTop;i.push({type:"offset",target:r,matrix:iy([xe-Ve+K-$,ve-yt+k-Q],h)})}else i.push({type:"offset",target:r,origin:Te});if(Ee!==1&&i.push({type:"zoom",target:r,matrix:W2(Dk([Ee,Ee],h),h,[0,0])}),w||(w=H),d||(d=Te),v||(v=pe),a||O)break;r=G,s=W,(!n||r===o)&&(a=s)}return w||(w=vl(h)),d||(d=[0,0]),v||(v=[0,0]),{zoom:M,offsetContainer:E,matrixes:i,targetMatrix:w,transformOrigin:d,targetOrigin:v,is3d:c,hasFixed:_}}var N0=null,k0=null,I1=null;function ux(t){t?(window.Map&&(N0=new Map,k0=new Map),I1=[]):(N0=null,I1=null,k0=null)}function lpe(t){var e=k0==null?void 0:k0.get(t);if(e)return e;var n=X2(t,!0);return k0&&k0.set(t,n),n}function upe(t,e){if(I1){var n=Zf(I1,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=Nq(t,e,!0);return I1&&I1.push([[t,e],r]),r}function _f(t){var e=N0==null?void 0:N0.get(t);if(!e){var n=bv(t).getComputedStyle(t);if(!N0)return function(o){return n[o]};e={style:n,cached:{}},N0.set(t,e)}var r=e.cached,i=e.style;return function(o){return o in r||(r[o]=i[o]),r[o]}}function vp(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(s,a){return o[a]=o[a]||{},o[a][e]=o[a][e]||{},mn(mn({},n),{isRequestChild:!0,datas:o[a][e],originalDatas:o[a]})})}function S5(t,e,n,r,i,o,s){var a=!!n.match(/Start$/g),c=!!n.match(/End$/g),h=i.isPinch,d=i.datas,v=vp(t,e.name,i),w=t.moveables,_=[],E=v.map(function(M,D){var A=w[D],F=A.state,O=F.gestos,N=M;if(a)N=new lx(s).dragStart(r,M),_.push(N);else{if(O[s]||(O[s]=d.childGestos[D]),!O[s])return;N=tS(M,F,r,h,o,s),_.push(N)}var H=e[n](A,mn(mn({},N),{parentFlag:!0}));return c&&(O[s]=null),H});return a&&(d.childGestos=w.map(function(M){return M.state.gestos[s]})),{eventParams:E,childEvents:_}}function fm(t,e,n,r,i,o){i===void 0&&(i=function(d,v){return v});var s=!!n.match(/End$/g),a=vp(t,e.name,r),c=t.moveables,h=a.map(function(d,v){var w=c[v],_=d;_=i(w,d);var E=e[n](w,mn(mn({},_),{parentFlag:!0}));return s&&(w.state.gestos={}),E});return h}function vC(t,e,n,r){var i=n.fixedDirection,o=n.fixedPosition,s=r.datas.startPositions||Ld(e.state),a=rc(s,i),c=Tn(bh(Jw(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),h=c[0],d=c[1];return r.datas.originalX=h,r.datas.originalY=d,r}function kq(t,e,n,r){var i=t.getState(),o=i.renderPoses,s=i.rotation,a=i.direction,c=oy(t.props,e).zoom,h=$2(s/Math.PI*180),d={},v=t.renderState;v.renderDirectionMap||(v.renderDirectionMap={});var w=v.renderDirectionMap;n.forEach(function(E){var M=E.dir;d[M]=!0});var _=jh(a);return n.map(function(E){var M=E.data,D=E.classNames,A=E.dir,F=zk[A];if(!F||!d[A])return null;w[A]=!0;var O=(Pa(h,15)+_*Mq[A]+720)%180,N={};return Nx(M).forEach(function(H){N["data-".concat(H)]=M[H]}),r.createElement("div",mn({className:Ki.apply(void 0,Kr(["control","direction",A,e],Tn(D),!1)),"data-rotation":O,"data-direction":A},N,{key:"direction-".concat(A),style:bC.apply(void 0,Kr([s,c],Tn(F.map(function(H){return o[H]})),!1))}))})}function Oq(t,e,n,r){var i=oy(t.props,n),o=i.renderDirections,s=o===void 0?e:o,a=i.displayAroundControls;if(!s)return[];var c=s===!0?Fk:s;return Kr(Kr([],Tn(a?Uq(t,r,n,c):[]),!1),Tn(kq(t,n,c.map(function(h){return{data:{},classNames:[],dir:h}}),r)),!1)}function xw(t,e,n,r,i,o){for(var s=[],a=6;a<arguments.length;a++)s[a-6]=arguments[a];var c=bu(n,r),h=e?Pa(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(o),className:Ki.apply(void 0,Kr(["line","direction",e?"edge":"",e],Tn(s),!1)),"data-rotation":h,"data-line-key":o,"data-direction":e,style:y2(n,r,i,c)})}function Fq(t,e,n,r,i){var o=n===!0?Ide:n;return o.map(function(s,a){var c=Tn(zk[s],2),h=c[0],d=c[1];if(d!=null)return xw(t,s,r[h],r[d],i,"".concat(e,"Edge").concat(a),e)}).filter(Boolean)}function Bq(t){return function(e,n){var r=oy(e.props,t).edge;return r&&(r===!0||r.length)?Kr(Kr([],Tn(Fq(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),Tn(cpe(e,t,n)),!1):zq(e,t,n)}}function zq(t,e,n){return Oq(t,Fk,e,n)}function cpe(t,e,n){return Oq(t,["nw","ne","sw","se"],e,n)}function Uq(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var o=t.getState(),s=o.renderPoses,a=o.rotation,c=o.direction,h=i.renderDirectionMap,d=t.props.zoom,v=jh(c),w=a/Math.PI*180;return(r||Nx(h)).map(function(_){var E=zk[_];if(!E)return null;var M=(Pa(w,15)+v*Mq[_]+720)%180,D=["around-control"];return n&&D.push("direction",n),e.createElement("div",{className:Ki.apply(void 0,Kr([],Tn(D),!1)),"data-rotation":M,"data-direction":_,key:"direction-around-".concat(_),style:bC.apply(void 0,Kr([a,d],Tn(E.map(function(A){return s[A]})),!1))})})}function Gk(t,e,n){var r=t||{},i=r.position,o=i===void 0?"client":i,s=r.left,a=s===void 0?-1/0:s,c=r.top,h=c===void 0?-1/0:c,d=r.right,v=d===void 0?1/0:d,w=r.bottom,_=w===void 0?1/0:w,E={position:o,left:a,top:h,right:v,bottom:_};return{vertical:xB(E,e,!0),horizontal:xB(E,n,!1)}}function UM(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,o=r.clientWidth,s=r.clientLeft,a=r.clientTop,c=n.snapOffset,h=c.left,d=c.top,v=c.right,w=c.bottom,_=e||t.props.bounds||{},E=_.position||"client",M=E==="css",D=_.left,A=D===void 0?-1/0:D,F=_.top,O=F===void 0?-1/0:F,N=_.right,H=N===void 0?M?-1/0:1/0:N,G=_.bottom,W=G===void 0?M?-1/0:1/0:G;return M&&(H=o+v-h-H,W=i+w-d-W),{left:A+h-s,right:H+h-s,top:O+d-a,bottom:W+d-a}}function hpe(t,e,n){var r=UM(t),i=r.left,o=r.top,s=r.right,a=r.bottom,c=Tn(n,2),h=c[0],d=c[1],v=Tn(ta(n,e),2),w=v[0],_=v[1];Gr(w)<$h&&(w=0),Gr(_)<$h&&(_=0);var E=_>0,M=w>0,D={isBound:!1,offset:0,pos:0},A={isBound:!1,offset:0,pos:0};if(w===0&&_===0)return{vertical:D,horizontal:A};if(w===0)E?a<d&&(A.pos=a,A.offset=d-a):o>d&&(A.pos=o,A.offset=d-o);else if(_===0)M?s<h&&(D.pos=s,D.offset=h-s):i>h&&(D.pos=i,D.offset=h-i);else{var F=_/w,O=n[1]-F*h,N=0,H=0,G=!1;M&&s<=h?(N=F*s+O,H=s,G=!0):!M&&h<=i&&(N=F*i+O,H=i,G=!0),G&&(N<o||N>a)&&(G=!1),G||(E&&a<=d?(N=a,H=(N-O)/F,G=!0):!E&&d<=o&&(N=o,H=(N-O)/F,G=!0)),G&&(D.isBound=!0,D.pos=H,D.offset=h-H,A.isBound=!0,A.pos=N,A.offset=d-N)}return{vertical:D,horizontal:A}}function xB(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],o=Math.min.apply(Math,Kr([],Tn(e),!1)),s=Math.max.apply(Math,Kr([],Tn(e),!1)),a=[];return r+1>o&&a.push({direction:"start",isBound:!0,offset:o-r,pos:r}),i-1<s&&a.push({direction:"end",isBound:!0,offset:s-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(c,h){return Gr(h.offset)-Gr(c.offset)})}function bB(t,e,n){var r=n?t.map(function(i){return Kw(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Gr(i[0]-e.left)>.1||i[0]>e.right&&Gr(i[0]-e.right)>.1||i[1]<e.top&&Gr(i[1]-e.top)>.1||i[1]>e.bottom&&Gr(i[1]-e.bottom)>.1})}function fpe(t,e,n){var r=Dd(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(o,s){return Gr(o-t[n?0:1])-Gr(s-t[n?0:1])}).map(function(o){return bu([0,0],n?[o,e]:[e,o])})}function dpe(t,e,n,r,i){if(!t.props.bounds)return[];var o=i*Math.PI/180,s=UM(t),a=s.left,c=s.top,h=s.right,d=s.bottom,v=a-r[0],w=h-r[0],_=c-r[1],E=d-r[1],M={left:v,top:_,right:w,bottom:E};if(!bB(n,M,0))return[];var D=[];return[[v,0],[w,0],[_,1],[E,1]].forEach(function(A){var F=Tn(A,2),O=F[0],N=F[1];n.forEach(function(H){var G=bu([0,0],H);D.push.apply(D,Kr([],Tn(fpe(H,O,N).map(function(W){return o+W-G}).filter(function(W){return!bB(e,M,W)}).map(function(W){return Pa(W*180/Math.PI,$h)})),!1))})}),D}var ppe=["left","right","center"],gpe=["top","bottom","middle"],wB={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Iv={start:"left",end:"right",center:"center"},Dv={start:"top",end:"bottom",center:"middle"};function D1(){return{left:!1,top:!1,right:!1,bottom:!1}}function Fx(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.innerBounds,s=n.verticalGuidelines,a=n.horizontalGuidelines,c=n.snapGridWidth,h=n.snapGridHeight,d=t.state,v=d.guidelines,w=d.enableSnap;return!r||!w||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||h||i||o||v&&v.length||s&&s.length||a&&a.length)}function Vk(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function mpe(t,e){var n=Vk(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function Hk(t,e){var n=mpe(t,e),r=gpe.filter(function(o){return o in n}),i=ppe.filter(function(o){return o in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(o){return n[o]}),vertical:i.map(function(o){return n[o]})}}function vpe(t,e,n){var r=Gl(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function ype(t){var e=Tn(t,2),n=e[0],r=e[1],i=r[0]-n[0],o=r[1]-n[1];Math.abs(i)<Fu&&(i=0),Math.abs(o)<Fu&&(o=0);var s=0,a=0,c=0;return i?o?(s=-o/i,a=1,c=s*n[0]-n[1]):(a=1,c=-n[1]):(s=-1,c=n[0]),[s,a,c].map(function(h){return Pa(h,Fu)})}var jq="snapRotationThreshold",Gq="snapRotationDegrees",Vq="snapHorizontalThreshold",Hq="snapVerticalThreshold";function jM(t,e,n,r,i,o,s){var a;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,h=((a=t.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],d=FB(s,c[Vq],5),v=FB(o,c[Hq],5);return qq(t.state.guidelines,e,n,r,i,d,v,h)}function qq(t,e,n,r,i,o,s,a){return{vertical:EB(t,"vertical",e,s*a[0],r),horizontal:EB(t,"horizontal",n,o*a[1],i)}}function _pe(t,e,n){var r=Tn(n,2),i=r[0],o=r[1],s=Tn(e,2),a=s[0],c=s[1],h=Tn(ta(n,e),2),d=h[0],v=h[1],w=v>0,_=d>0;d=wC(d),v=wC(v);var E={isSnap:!1,offset:0,pos:0},M={isSnap:!1,offset:0,pos:0};if(d===0&&v===0)return{vertical:E,horizontal:M};var D=jM(t,d?[i]:[],v?[o]:[],[],[],void 0,void 0),A=D.vertical,F=D.horizontal;A.posInfos.filter(function(se){var Se=se.pos;return _?Se>=a:Se<=a}),F.posInfos.filter(function(se){var Se=se.pos;return w?Se>=c:Se<=c}),A.isSnap=A.posInfos.length>0,F.isSnap=F.posInfos.length>0;var O=FD(A),N=O.isSnap,H=O.guideline,G=FD(F),W=G.isSnap,X=G.guideline,K=W?X.pos[1]:0,k=N?H.pos[0]:0;if(d===0)W&&(M.isSnap=!0,M.pos=X.pos[1],M.offset=o-M.pos);else if(v===0)N&&(E.isSnap=!0,E.pos=k,E.offset=i-k);else{var $=v/d,Q=n[1]-$*i,ie=0,ae=0,ce=!1;N?(ae=k,ie=$*ae+Q,ce=!0):W&&(ie=K,ae=(ie-Q)/$,ce=!0),ce&&(E.isSnap=!0,E.pos=ae,E.offset=i-ae,M.isSnap=!0,M.pos=ie,M.offset=o-ie)}return{vertical:E,horizontal:M}}function gv(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function SB(t,e,n,r){var i=Hk(t.props.snapDirections,e),o=jM(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return gv(c)}),i.horizontalNames.map(function(c){return gv(c)}),n,r),s=gv(i.horizontalNames[o.horizontal.index]),a=gv(i.verticalNames[o.vertical.index]);return{vertical:mn(mn({},o.vertical),{direction:a}),horizontal:mn(mn({},o.horizontal),{direction:s})}}function FD(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,o=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:o,pos:n.pos,guideline:s}}function EB(t,e,n,r,i){var o,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=e==="vertical",c=a?0:1,h=n.map(function(v,w){var _=i[w]||"",E=t.map(function(M){var D=M.pos,A=v-D[c];return{offset:A,dist:Gr(A),guideline:M,direction:_}}).filter(function(M){var D=M.guideline,A=M.dist,F=D.type;return!(F!==e||A>r)}).sort(function(M,D){return M.dist-D.dist});return{pos:v,index:w,guidelineInfos:E,direction:_}}).filter(function(v){return v.guidelineInfos.length>0}).sort(function(v,w){return v.guidelineInfos[0].dist-w.guidelineInfos[0].dist}),d=h.length>0;return{isSnap:d,index:d?h[0].index:-1,direction:(s=(o=h[0])===null||o===void 0?void 0:o.direction)!==null&&s!==void 0?s:"",posInfos:h}}function xpe(t,e,n,r,i){var o=[];n[0]&&n[1]?o=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(w,_,E){var M=E[_+1]||E[0];o.push(w),o.push([(w[0]+M[0])/2,(w[1]+M[1])/2])}):t.props.keepRatio?o.push([-1,-1],[-1,1],[1,-1],[1,1],n):(o.push.apply(o,Kr([],Tn(Yde([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),o.length>1&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]));var s=o.map(function(w){return rc(e,w)}),a=s.map(function(w){return w[0]}),c=s.map(function(w){return w[1]}),h=jM(t,a,c,o.map(function(w){return gv(w[0])}),o.map(function(w){return gv(w[1])}),r,i),d=gv(o.map(function(w){return w[0]})[h.vertical.index]),v=gv(o.map(function(w){return w[1]})[h.horizontal.index]);return{vertical:mn(mn({},h.vertical),{direction:d}),horizontal:mn(mn({},h.horizontal),{direction:v})}}function $q(t,e){var n=Gr(t.offset),r=Gr(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<$h?1:r<$h?-1:n-r}function yC(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],o=r.sign[e],s=n.offset[e],a=r.offset[e];if(i){if(!o)return-1}else return 1;return $q({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:a})})[0]}function bpe(t,e,n){var r=[];if(n)Gr(e[0])!==1||Gr(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(a){var c=[s*i[0],a*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var o=Gr(e[0])===1?[1]:[1,-1];o.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var o=Gr(e[1])===1?[1]:[1,-1];o.forEach(function(a){r.push([[-1,e[1]],[-1,a*t[1]]],[[0,e[1]],[0,a*t[1]]],[[1,e[1]],[1,a*t[1]]])})}return r}function Wq(t,e){var n=TD([e[0][0],e[1][0]]),r=TD([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function qk(t,e){var n=Tn(e,2),r=n[0],i=n[1],o=i[0]-r[0],s=i[1]-r[1];Gr(o)<$h&&(o=0),Gr(s)<$h&&(s=0);var a,c;if(!o)a=r[0],c=t[0];else if(!s)a=r[1],c=t[1];else{var h=s/o;a=h*(t[0]-r[0])+r[1],c=t[1]}return a-c}function Xq(t,e,n,r){return r===void 0&&(r=$h),t.every(function(i){var o=qk(i,e),s=o<=0;return s===n||Gr(o)<=r})}function TB(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function wpe(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,o=e.horizontalSign,s=e.lineConstants,a=t.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=a.left,h=a.top,d=a.width,v=a.height,w=[[c,h],[c,h+v]],_=[[c,h],[c+d,h]],E=[[c+d,h],[c+d,h+v]],M=[[c,h+v],[c+d,h+v]];if(Xq([[c,h],[c+d,h],[c,h+v],[c+d,h+v]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var D=mv(n,s,_,i),A=mv(n,s,M,i),F=mv(n,s,w,o),O=mv(n,s,E,o),N=D.isBound&&A.isBound,H=D.isBound||A.isBound,G=F.isBound&&O.isBound,W=F.isBound||O.isBound,X=cx(D.offset,A.offset),K=cx(F.offset,O.offset),k=[0,0],$=!1,Q=!1;return Gr(K)<Gr(X)?(k=[X,0],$=H,Q=N):(k=[0,K],$=W,Q=G),{isAllBound:Q,isVerticalBound:H,isHorizontalBound:W,isBound:$,offset:k}}function mv(t,e,n,r,i,o){var s=Tn(e,2),a=s[0],c=s[1],h=t[0],d=n[0],v=n[1],w=wC(v[1]-d[1]),_=wC(v[0]-d[0]),E=c,M=a,D=-a/c;if(_){if(!w){if(o&&!E)return{isBound:!1,offset:0};if(M){var N=(d[1]-h[1])/D+h[0];return TB(N,d[0],v[0],r,i)}else{var F=d[1]-h[1],O=Gr(F)<=(i||0);return{isBound:O,offset:O?F:0}}}}else{if(o&&!M)return{isBound:!1,offset:0};if(E){var A=D*(d[0]-h[0])+h[1];return TB(A,d[1],v[1],r,i)}else{var F=d[0]-h[0],O=Gr(F)<=(i||0);return{isBound:O,offset:O?F:0}}}return{isBound:!1,offset:0}}function Yq(t,e,n){return e.map(function(r){var i=wpe(t,r),o=i.isBound,s=i.offset,a=i.isVerticalBound,c=i.isHorizontalBound,h=r.multiple,d=vg({datas:n,distX:s[0],distY:s[1]}).map(function(v,w){return v*(h[w]?2/h[w]:0)});return{sign:h,isBound:o,isVerticalBound:a,isHorizontalBound:c,isSnap:!1,offset:d}})}function Spe(t,e,n){var r,i=$k(t,e,[0,0],!1).map(function(w){return mn(mn({},w),{multiple:w.multiple.map(function(_){return Gr(_)*2})})}),o=Yq(t,i,n),s=yC(o,0),a=yC(o,1),c=0,h=0,d=s.isVerticalBound||a.isVerticalBound,v=s.isHorizontalBound||a.isHorizontalBound;return(d||v)&&(r=Tn(Wde({datas:n,distX:-s.offset[0],distY:-a.offset[1]}),2),c=r[0],h=r[1]),{vertical:{isBound:d,offset:c},horizontal:{isBound:v,offset:h}}}function Epe(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function $k(t,e,n,r){var i=t.state,o=i.allMatrix,s=i.is3d,a=Ey(o,100,100,s?4:3),c=rc(a,[0,0]);return Epe(n,r).map(function(h){var d=Tn(h,3),v=d[0],w=d[1],_=d[2],E=[rc(a,w),rc(a,_)],M=ype(E),D=Wq(c,E),A=D.vertical,F=D.horizontal,O=qk(c,E)<=0;return{multiple:v,centerSign:O,verticalSign:A,horizontalSign:F,lineConstants:M,line:[rc(e,w),rc(e,_)]}})}function CB(t,e,n,r){var i=r?t.map(function(o){return Kw(o,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(o){var s=qk(n,o)<=0;return!Xq(e,o,s)})}function Tpe(t){var e=Tn(t,2),n=e[0],r=e[1],i=r[0]-n[0],o=r[1]-n[1];if(!i)return Gr(n[0]);if(!o)return Gr(n[1]);var s=o/i;return Gr((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function Cpe(t){var e=Tn(t,2),n=e[0],r=e[1],i=r[0]-n[0],o=r[1]-n[1];if(!i)return[n[0],0];if(!o)return[0,n[1]];var s=o/i,a=-s*n[0]+n[1];return[-a/(s+1/s),a/(s*s+1)]}function Mpe(t,e,n,r,i){var o=t.props.innerBounds,s=i*Math.PI/180;if(!o)return[];var a=o.left,c=o.top,h=o.width,d=o.height,v=a-r[0],w=a+h-r[0],_=c-r[1],E=c+d-r[1],M=[[v,_],[w,_],[v,E],[w,E]],D=rc(n,[0,0]);if(!CB(n,M,D,0))return[];var A=[],F=M.map(function(O){return[Dd(O),bu([0,0],O)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(O){var N=bu([0,0],Cpe(O)),H=Tpe(O);A.push.apply(A,Kr([],Tn(F.filter(function(G){var W=Tn(G,1),X=W[0];return X&&H<=X}).map(function(G){var W=Tn(G,2),X=W[0],K=W[1],k=Math.acos(X?H/X:0),$=K+k,Q=K-k;return[s+$-N,s+Q-N]}).reduce(function(G,W){return G.push.apply(G,Kr([],Tn(W),!1)),G},[]).filter(function(G){return!CB(e,M,D,G)}).map(function(G){return Pa(G*180/Math.PI,$h)})),!1))}),A}function Ape(t){var e=t.props.innerBounds,n=D1();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,o=r.pos2,s=r.pos3,a=r.pos4,c=[i,o,s,a],h=rc(c,[0,0]),d=e.left,v=e.top,w=e.width,_=e.height,E=[[d,v],[d,v+_]],M=[[d,v],[d+w,v]],D=[[d+w,v],[d+w,v+_]],A=[[d,v+_],[d+w,v+_]],F=$k(t,c,[0,0],!1),O=[],N=[];return F.forEach(function(H){var G=H.line,W=H.lineConstants,X=Wq(h,G),K=X.horizontal,k=X.vertical,$=mv(G,W,M,k,1,!0),Q=mv(G,W,A,k,1,!0),ie=mv(G,W,E,K,1,!0),ae=mv(G,W,D,K,1,!0);$.isBound&&!n.top&&(O.push(v),n.top=!0),Q.isBound&&!n.bottom&&(O.push(v+_),n.bottom=!0),ie.isBound&&!n.left&&(N.push(d),n.left=!0),ae.isBound&&!n.right&&(N.push(d+w),n.right=!0)}),{boundMap:n,horizontal:O,vertical:N}}function Rpe(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];if(Gr(i)<Fu&&(i=0),Gr(o)<Fu&&(o=0),!i)return r?[0,0]:[0,n];if(!o)return r?[n,0]:[0,0];var s=o/i,a=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+a;return[n,c-e[1]]}else{var h=(e[1]+n-a)/s;return[h-e[0],n]}}function BD(t,e,n,r,i){var o=Rpe(t,e,n,r);if(!o)return{isOutside:!1,offset:[0,0]};var s=hm(t,e),a=hm(o,t),c=hm(o,e),h=a>s||c>s,d=Tn(vg({datas:i,distX:o[0],distY:o[1]}),2),v=d[0],w=d[1];return{offset:[v,w],isOutside:h}}function _C(t,e){return t.isBound?t.offset:e.isSnap?FD(e).offset:0}function Ppe(t,e,n,r,i){var o=Tn(e,2),s=o[0],a=o[1],c=Tn(n,2),h=c[0],d=c[1],v=Tn(r,2),w=v[0],_=v[1],E=Tn(i,2),M=E[0],D=E[1],A=-M,F=-D;if(t&&s&&a){A=0,F=0;var O=[];if(h&&d?O.push([0,D],[M,0]):h?O.push([M,0]):d?O.push([0,D]):w&&_?O.push([0,D],[M,0]):w?O.push([M,0]):_&&O.push([0,D]),O.length){O.sort(function(W,X){return Dd(ta([s,a],W))-Dd(ta([s,a],X))});var N=O[0];if(N[0]&&Gr(s)>Fu)A=-N[0],F=a*Gr(s+A)/Gr(s)-a;else if(N[1]&&Gr(a)>Fu){var H=a;F=-N[1],A=s*Gr(a+F)/Gr(H)-s}if(t&&d&&h)if(Gr(A)>Fu&&Gr(A)<Gr(M)){var G=Gr(M)/Gr(A);A*=G,F*=G}else if(Gr(F)>Fu&&Gr(F)<Gr(D)){var G=Gr(D)/Gr(F);A*=G,F*=G}else A=cx(-M,A),F=cx(-D,F)}}else A=s||h?-M:0,F=a||d?-D:0;return[A,F]}function Ipe(t,e,n,r,i,o){if(!Fx(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=Yk(o.absolutePoses,[e,n]),a=Md(s),c=a.left,h=a.right,d=a.top,v=a.bottom,w={horizontal:s.map(function(ae){return ae[1]}),vertical:s.map(function(ae){return ae[0]})},_=Vk(t.props.snapDirections),E=Hk(_,{left:c,right:h,top:d,bottom:v,center:(c+h)/2,middle:(d+v)/2}),M=GM(t,i,E,w),D=M.vertical,A=M.horizontal,F=Spe(t,s,o),O=F.vertical,N=F.horizontal,H=D.isSnap,G=A.isSnap,W=D.isBound||O.isBound,X=A.isBound||N.isBound,K=cx(D.offset,O.offset),k=cx(A.offset,N.offset),$=Tn(Ppe(r,[e,n],[W,X],[H,G],[K,k]),2),Q=$[0],ie=$[1];return[{isBound:W,isSnap:H,offset:Q},{isBound:X,isSnap:G,offset:ie}]}function GM(t,e,n,r){r===void 0&&(r=n);var i=Gk(UM(t),r.vertical,r.horizontal),o=i.horizontal,s=i.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:jM(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=a.horizontal,h=a.vertical,d=_C(o[0],c),v=_C(s[0],h),w=Gr(d),_=Gr(v);return{horizontal:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:w,bounds:o,snap:c},vertical:{isBound:s[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:v,dist:_,bounds:s,snap:h}}}function MB(t,e,n,r,i,o,s){s===void 0&&(s=[1,1]);var a=Gk(e,n,r),c=a.horizontal,h=a.vertical,d=qq(t,n,r,[],[],i,o,s),v=d.horizontal,w=d.vertical,_=_C(c[0],v),E=_C(h[0],w),M=Gr(_),D=Gr(E);return{horizontal:{isBound:c[0].isBound,isSnap:v.isSnap,snapIndex:v.index,offset:_,dist:M,bounds:c,snap:v},vertical:{isBound:h[0].isBound,isSnap:w.isSnap,snapIndex:w.index,offset:E,dist:D,bounds:h,snap:w}}}function Dpe(t,e,n,r){var i=bu(t,e)/Math.PI*180,o=n.vertical,s=o.isBound,a=o.isSnap,c=o.dist,h=n.horizontal,d=h.isBound,v=h.isSnap,w=h.dist,_=i%180,E=_<3||_>177,M=_>87&&_<93;return w<c&&(s||a&&!M&&(!r||!E))?"vertical":d||v&&!E&&(!r||!M)?"horizontal":""}function Lpe(t,e,n,r,i,o){return n.map(function(s){var a=Tn(s,2),c=a[0],h=a[1],d=rc(e,c),v=rc(e,h),w=r?Npe(t,d,v,i):GM(t,i,{vertical:[v[0]],horizontal:[v[1]]}),_=w.horizontal,E=_.offset,M=_.isBound,D=_.isSnap,A=w.vertical,F=A.offset,O=A.isBound,N=A.isSnap,H=ta(h,c);if(!F&&!E)return{isBound:O||M,isSnap:N||D,sign:H,offset:[0,0]};var G=Dpe(d,v,w,r);if(!G)return{sign:H,isBound:!1,isSnap:!1,offset:[0,0]};var W=G==="vertical",X=[0,0];return!r&&Gr(h[0])===1&&Gr(h[1])===1&&c[0]!==h[0]&&c[1]!==h[1]?X=vg({datas:o,distX:-F,distY:-E}):X=BD(d,v,-(W?F:E),W,o).offset,X=X.map(function(K,k){return K*(H[k]?2/H[k]:0)}),{sign:H,isBound:W?O:M,isSnap:W?N:D,offset:X}})}function AB(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Npe(t,e,n,r){var i=hpe(t,e,n),o=i.horizontal,s=i.vertical,a=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:_pe(t,e,n),c=a.horizontal,h=a.vertical,d=AB(o,c),v=AB(s,h),w=Gr(d),_=Gr(v);return{horizontal:{isBound:o.isBound,isSnap:c.isSnap,offset:d,dist:w},vertical:{isBound:s.isBound,isSnap:h.isSnap,offset:v,dist:_}}}function kpe(t,e,n,r,i){var o=[-n[0],-n[1]],s=t.state,a=s.width,c=s.height,h=t.props.bounds,d=1/0,v=1/0;if(h){var w=[[n[0],-n[1]],[-n[0],n[1]]],_=h.left,E=_===void 0?-1/0:_,M=h.top,D=M===void 0?-1/0:M,A=h.right,F=A===void 0?1/0:A,O=h.bottom,N=O===void 0?1/0:O;w.forEach(function(H){var G=H[0]!==o[0],W=H[1]!==o[1],X=rc(e,H),K=bu(r,X)*360/Math.PI;if(W){var k=X.slice();(Gr(K-360)<2||Gr(K-180)<2)&&(k[1]=r[1]);var $=BD(r,k,(r[1]<X[1]?N:D)-X[1],!1,i),Q=Tn($.offset,2),ie=Q[1],ae=$.isOutside;isNaN(ie)||(v=c+(ae?1:-1)*Gr(ie))}if(G){var k=X.slice();(Gr(K-90)<2||Gr(K-270)<2)&&(k[0]=r[0]);var ce=BD(r,k,(r[0]<X[0]?F:E)-X[0],!0,i),se=Tn(ce.offset,1),Se=se[0],ye=ce.isOutside;isNaN(Se)||(d=a+(ye?1:-1)*Gr(Se))}})}return{maxWidth:d,maxHeight:v}}var Uh={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,o=n.zoom,s=t.getState(),a=s.dragInfo,c=s.beforeOrigin;if(r||!i||!a)return[];var h=a.dist;if(!h[0]&&!h[1])return[];var d=Dd(h),v=bu(h,[0,0]);return[e.createElement("div",{className:Ki("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(d,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(v,"rad) scaleY(").concat(o,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,o=t.state,s=o.gestos,a=o.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(a.left||"")||0,n.top=parseFloat(a.top||"")||0,n.bottom=parseFloat(a.bottom||"")||0,n.right=parseFloat(a.right||"")||0,n.startValue=[0,0],Sy(t,e),zM(t,e,"translate"),ege(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=ja(t,e,mn({set:function(d){n.startValue=d}},BM(t,e))),h=r||Ri(t,"onDragStart",c);return h!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){OM(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,s=e.deltaOffset,a=e.useSnap,c=e.isRequest,h=e.isGroup,d=e.parentThrottleDrag,v=e.distX,w=e.distY,_=n.isDrag,E=n.prevDist,M=n.prevBeforeDist,D=n.startValue;if(_){s&&(v+=s[0],w+=s[1]);var A=t.props,F=A.parentMoveable,O=h?0:A.throttleDrag||d||0,N=r?0:A.throttleDragRotate||0,H=0,G=!1,W=!1,X=!1,K=!1;if(!r&&N>0&&(v||w)){var k=A.startDragRotate||0,$=Pa(k+bu([0,0],[v,w])*180/Math.PI,N)-k,Q=w*Math.abs(Math.cos(($-90)/180*Math.PI)),ie=v*Math.abs(Math.cos($/180*Math.PI)),ae=Dd([ie,Q]);H=$*Math.PI/180,v=ae*Math.cos(H),w=ae*Math.sin(H)}if(!o&&!r&&!i){var ce=Tn(Ipe(t,v,w,N,!a&&c||s,n),2),se=ce[0],Se=ce[1];G=se.isSnap,W=se.isBound,X=Se.isSnap,K=Se.isBound;var ye=se.offset,Te=Se.offset;v+=ye,w+=Te}var pe=ko(Pq({datas:n,distX:v,distY:w}),D),Ie=ko($de({datas:n,distX:v,distY:w}),D);dB(Ie,$h),dB(pe,$h),N||(!G&&!W&&(Ie[0]=Pa(Ie[0],O),pe[0]=Pa(pe[0],O)),!X&&!K&&(Ie[1]=Pa(Ie[1],O),pe[1]=Pa(pe[1],O)));var me=ta(pe,D),xe=ta(Ie,D),ve=ta(xe,E),Ee=ta(me,M);n.prevDist=xe,n.prevBeforeDist=me,n.passDelta=ve,n.passDist=xe;var De=n.left+me[0],We=n.top+me[1],Ae=n.right-me[0],ut=n.bottom-me[1],pt=FM(n,"translate(".concat(Ie[0],"px, ").concat(Ie[1],"px)"),"translate(".concat(xe[0],"px, ").concat(xe[1],"px)"));if(Uk(e,pt),t.state.dragInfo.dist=r?[0,0]:xe,!(!r&&!F&&ve.every(function(yt){return!yt})&&Ee.some(function(yt){return!yt}))){var st=t.state,Ce=st.width,It=st.height,Ve=ja(t,e,mn({transform:pt,dist:xe,delta:ve,translate:Ie,beforeDist:me,beforeDelta:Ee,beforeTranslate:pe,left:De,top:We,right:Ae,bottom:ut,width:Ce,height:It,isPinch:o},Hh({transform:pt},e)));return!r&&Ri(t,"onDrag",Ve),Ve}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,mn(mn({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=Kf(t,e,{});return!n&&Ri(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,o=e.clientX,s=e.clientY,a=this.dragStart(t,e);if(!a)return!1;var c=S5(t,this,"dragStart",[o||0,s||0],e,!1,"draggable"),h=c.childEvents,d=c.eventParams,v=mn(mn({},a),{targets:t.props.targets,events:d}),w=Ri(t,"onDragGroupStart",v);i.isDrag=w!==!1;var _=(r=(n=h[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[_[0]%1,_[1]%1],i.isDrag?a:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,mn(mn({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,o=S5(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=mn({targets:t.props.targets,events:o},r);return Ri(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=S5(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Ri(t,"onDragGroupEnd",Kf(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=!1;return{isControl:!1,requestStart:function(s){return o=s.useSnap,{datas:e,useSnap:o}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:o}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:o}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function Zq(t,e){var n=rc(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function Ope(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,o=t.height,s=r?4:3,a=[i/2*(1+e[0]),o/2*(1+e[1])],c=Gl(n,a,s),h=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:h}}function Kq(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,o=t.height,s=r?4:3,a=epe(e,i,o),c=Gl(n,e,s),h=[i?0:e[0],o?0:e[1]];return{fixedPosition:c,fixedDirection:a,fixedOffset:h}}var RB=Jk("resizable"),zD={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:Bq("resizable"),dragControlCondition:RB,viewClassName:Kk("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,o=e.isGroup,s=e.parentDirection,a=e.parentGesto,c=e.datas,h=e.parentFixedDirection,d=e.parentEvent,v=c$(s,i,r,c),w=t.state,_=w.target,E=w.width,M=w.height,D=w.gestos;if(!v||!_||D.resizable)return!1;D.resizable=a||t.controlGesto,!i&&Sy(t,e),c.datas={},c.direction=v,c.startOffsetWidth=E,c.startOffsetHeight=M,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=w.inlineCSSWidth||w.cssWidth,c.startHeight=w.inlineCSSHeight||w.cssHeight,c.maxSize=[1/0,1/0],o||(c.minSize=[w.minOffsetWidth,w.minOffsetHeight],c.maxSize=[w.maxOffsetWidth,w.maxOffsetHeight]);var A=t.props.transformOrigin||"% %";c.transformOrigin=Tm(A)?A.split(" "):A,c.startOffsetMatrix=w.offsetMatrix,c.startTransformOrigin=w.transformOrigin,c.isWidth=(n=e==null?void 0:e.parentIsWidth)!==null&&n!==void 0?n:!v[0]&&!v[1]||v[0]||!v[1];function F(K){c.ratio=K&&isFinite(K)?K:0}c.startPositions=Ld(t.state);function O(K){var k=Zq(c.startPositions,K);c.fixedDirection=k.fixedDirection,c.fixedPosition=k.fixedPosition,c.fixedOffset=k.fixedOffset}function N(K){var k=Kq(t.state,K);c.fixedDirection=k.fixedDirection,c.fixedPosition=k.fixedPosition,c.fixedOffset=k.fixedOffset}function H(K){c.minSize=[Ls("".concat(K[0]),0)||0,Ls("".concat(K[1]),0)||0]}function G(K){var k=[K[0]||1/0,K[1]||1/0];(!vw(k[0])||isFinite(k[0]))&&(k[0]=Ls("".concat(k[0]),0)||1/0),(!vw(k[1])||isFinite(k[1]))&&(k[1]=Ls("".concat(k[1]),0)||1/0),c.maxSize=k}F(E/M),O(h||[-v[0],-v[1]]),c.setFixedDirection=O,c.setFixedPosition=N,c.setMin=H,c.setMax=G;var W=ja(t,e,{direction:v,startRatio:c.ratio,set:function(K){var k=Tn(K,2),$=k[0],Q=k[1];c.startWidth=$,c.startHeight=Q},setMin:H,setMax:G,setRatio:F,setFixedDirection:O,setFixedPosition:N,setOrigin:function(K){c.transformOrigin=K},dragStart:Uh.dragStart(t,new lx().dragStart([0,0],e))}),X=d||Ri(t,"onResizeStart",W);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,X!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:v}),c.isResize?W:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,o=e.isPinch,s=e.parentKeepRatio,a=e.dragClient,c=e.parentDist,h=e.useSnap,d=e.isRequest,v=e.isGroup,w=e.parentEvent,_=e.resolveMatrix,E=r.isResize,M=r.transformOrigin,D=r.startWidth,A=r.startHeight,F=r.prevWidth,O=r.prevHeight,N=r.minSize,H=r.maxSize,G=r.ratio,W=r.startOffsetWidth,X=r.startOffsetHeight,K=r.isWidth;if(!E)return;if(_){var k=t.state.is3d,$=r.startOffsetMatrix,Q=r.startTransformOrigin,ie=k?4:3,ae=_w(mC(e)),ce=Math.sqrt(ae.length);ie!==ce&&(ae=xp(ae,ce,ie));var se=nS($,ae,Q,ie),Se=Ey(se,W,X,ie);r.startPositions=Se,r.nextTargetMatrix=ae,r.nextAllMatrix=se}var ye=oy(t.props,"resizable"),Te=ye.resizeFormat,pe=ye.throttleResize,Ie=pe===void 0?i?0:1:pe,me=ye.parentMoveable,xe=ye.keepRatioFinally,ve=r.direction,Ee=ve,De=0,We=0;!ve[0]&&!ve[1]&&(Ee=[1,1]);var Ae=G&&(s??ye.keepRatio)||!1;function ut(){var Dt=r.fixedDirection,At=m$(Ee,Ae,r,e);De=At.distWidth,We=At.distHeight;var Bt=Ee[0]-Dt[0]||Ae?Math.max(W+De,$h):W,gn=Ee[1]-Dt[1]||Ae?Math.max(X+We,$h):X;return Ae&&W&&X&&(K?gn=Bt/G:Bt=gn*G),[Bt,gn]}var pt=Tn(ut(),2),st=pt[0],Ce=pt[1];w||(r.setFixedDirection(r.fixedDirection),Ri(t,"onBeforeResize",ja(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(Dt){var At;return r.setFixedDirection(Dt),At=Tn(ut(),2),st=At[0],Ce=At[1],[st,Ce]},setFixedPosition:function(Dt){var At;return r.setFixedPosition(Dt),At=Tn(ut(),2),st=At[0],Ce=At[1],[st,Ce]},boundingWidth:st,boundingHeight:Ce,setSize:function(Dt){var At;At=Tn(Dt,2),st=At[0],Ce=At[1]}},!0)));var It=a;a||(!i&&o?It=ipe(t,[0,0]):It=r.fixedPosition);var Ve=[0,0];o||(Ve=Jpe(t,st,Ce,ve,It,!h&&d,r)),c&&(!c[0]&&(Ve[0]=0),!c[1]&&(Ve[1]=0));function yt(){var Dt;Te&&(Dt=Tn(Te([st,Ce]),2),st=Dt[0],Ce=Dt[1]),st=Pa(st,Ie),Ce=Pa(Ce,Ie)}if(Ae){Ee[0]&&Ee[1]&&Ve[0]&&Ve[1]&&(Gr(Ve[0])>Gr(Ve[1])?Ve[1]=0:Ve[0]=0);var Ze=!Ve[0]&&!Ve[1];Ze&&yt(),Ee[0]&&!Ee[1]||Ve[0]&&!Ve[1]||Ze&&K?(st+=Ve[0],Ce=st/G):(!Ee[0]&&Ee[1]||!Ve[0]&&Ve[1]||Ze&&!K)&&(Ce+=Ve[1],st=Ce*G)}else st+=Ve[0],Ce+=Ve[1],st=Math.max(0,st),Ce=Math.max(0,Ce);n=Tn(cq([st,Ce],N,H,Ae?G:!1),2),st=n[0],Ce=n[1],yt(),Ae&&(v||xe)&&(K?Ce=st/G:st=Ce*G),De=st-W,We=Ce-X;var wt=[De-F,We-O];r.prevWidth=De,r.prevHeight=We;var Ut=rpe(t,st,Ce,It,M,r);if(!(!me&&wt.every(function(Dt){return!Dt})&&Ut.every(function(Dt){return!Dt}))){var ht=Uh.drag(t,tS(e,t.state,Ut,!!o,!1,"draggable")),qt=ht.transform,Ye=D+De,Re=A+We,Pt=ja(t,e,mn({width:Ye,height:Re,offsetWidth:Math.round(st),offsetHeight:Math.round(Ce),startRatio:G,boundingWidth:st,boundingHeight:Ce,direction:ve,dist:[De,We],delta:wt,isPinch:!!o,drag:ht},f$({style:{width:"".concat(Ye,"px"),height:"".concat(Re,"px")},transform:qt},ht,e)));return!w&&Ri(t,"onResize",Pt),Pt}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,s=n.prevWidth,a=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,h=c.width,d=c.height,v=h-(i+s),w=d-(o+a),_=Gr(v)>3,E=Gr(w)>3;if(_&&(n.startWidth+=v,n.startOffsetWidth+=v,n.prevWidth+=v),E&&(n.startHeight+=w,n.startOffsetHeight+=w,n.prevHeight+=w),_||E)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=Kf(t,e,{});return!r&&Ri(t,"onResizeEnd",i),i}},dragGroupControlCondition:RB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,mn(mn({},e),{isGroup:!0}));if(!r)return!1;var i=vp(t,"resizable",e),o=n.startOffsetWidth,s=n.startOffsetHeight;function a(){var _=n.minSize;i.forEach(function(E){var M=E.datas,D=M.minSize,A=M.startOffsetWidth,F=M.startOffsetHeight,O=o*(A?D[0]/A:0),N=s*(F?D[1]/F:0);_[0]=Math.max(_[0],O),_[1]=Math.max(_[1],N)})}function c(){var _=n.maxSize;i.forEach(function(E){var M=E.datas,D=M.maxSize,A=M.startOffsetWidth,F=M.startOffsetHeight,O=o*(A?D[0]/A:0),N=s*(F?D[1]/F:0);_[0]=Math.min(_[0],O),_[1]=Math.min(_[1],N)})}var h=fm(t,this,"dragControlStart",e,function(_,E){return vC(t,_,n,E)});a(),c();var d=function(_){r.setFixedDirection(_),h.forEach(function(E,M){E.setFixedDirection(_),vC(t,E.moveable,n,i[M])})};n.setFixedDirection=d;var v=mn(mn({},r),{targets:t.props.targets,events:h.map(function(_){return mn(mn({},_),{setMin:function(E){_.setMin(E),a()},setMax:function(E){_.setMax(E),c()}})}),setFixedDirection:d,setMin:function(_){r.setMin(_),a()},setMax:function(_){r.setMax(_),c()}}),w=Ri(t,"onResizeGroupStart",v);return n.isResize=w!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=oy(t.props,"resizable");HM(t,"onBeforeResize",function(_){Ri(t,"onBeforeResizeGroup",ja(t,e,mn(mn({},_),{targets:r.targets}),!0))});var i=this.dragControl(t,mn(mn({},e),{isGroup:!0}));if(i){var o=i.boundingWidth,s=i.boundingHeight,a=i.dist,c=r.keepRatio,h=[o/(o-a[0]),s/(s-a[1])],d=n.fixedPosition,v=fm(t,this,"dragControl",e,function(_,E){var M=Tn(bh(Jw(t.rotation/180*Math.PI,3),[E.datas.originalX*h[0],E.datas.originalY*h[1],1],3),2),D=M[0],A=M[1];return mn(mn({},E),{parentDist:null,parentScale:h,dragClient:ko(d,[D,A]),parentKeepRatio:c})}),w=mn({targets:r.targets,events:v},i);return Ri(t,"onResizeGroup",w),w}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=fm(t,this,"dragControlEnd",e),o=Kf(t,e,{targets:t.props.targets,events:i});return Ri(t,"onResizeGroupEnd",o),n}},request:function(t){var e={},n=0,r=0,i=!1,o=t.getRect();return{isControl:!0,requestStart:function(s){var a;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(a=s==null?void 0:s.horizontal)!==null&&a!==void 0?a:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-o.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-o.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function E5(t,e,n,r,i){var o=t.props.groupable,s=t.state,a=s.is3d?4:3,c=e.origin,h=Gl(t.state.rootMatrix,ta([c[0],c[1]],o?[0,0]:[s.left,s.top]),a),d=ko([i.left,i.top],h);e.startAbsoluteOrigin=d,e.prevDeg=bu(d,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=hm(d,[n,r])}function kT(t,e,n){var r=n.defaultDeg,i=n.prevDeg,o=i%360,s=Math.floor(i/360);o<0&&(o+=360),o>t&&o>270&&t<90?++s:o<t&&o<90&&t>270&&--s;var a=e*(s*360+t-r);return n.prevDeg=r+a,a}function T5(t,e,n,r){return kT(bu(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function C5(t,e,n,r,i,o){var s=t.props.throttleRotate,a=s===void 0?0:s,c=n.prevSnapDeg,h=0,d=!1;if(o){var v=Kpe(t,e,r,i+r);d=v.isSnap,h=i+v.dist}d||(h=Pa(i+r,a));var w=h-i;return n.prevSnapDeg=w,[w-c,w,h]}function Jq(t,e,n){var r=Tn(e,4),i=r[0],o=r[1],s=r[2],a=r[3];if(t==="none")return[];if(bc(t))return t.map(function(D){return Jq(D,[i,o,s,a],n)[0]});var c=Tn((t||"top").split("-"),2),h=c[0],d=c[1],v=[i,o];h==="left"?v=[s,i]:h==="right"?v=[o,a]:h==="bottom"&&(v=[a,s]);var w=[(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2],_=l$(v,n);if(d){var E=d==="top"||d==="left",M=h==="bottom"||h==="left";w=v[E&&!M||!E&&M?0:1]}return[[w,_]]}function UD(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(nc(n,Ki("rotation-control"))||t.props.rotateAroundControls&&nc(n,Ki("around-control"))||nc(n,Ki("control"))&&nc(n,Ki("rotatable")))return!0;var r=t.props.rotationTarget;return r?Qk(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var Fpe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Bpe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Fpe],viewClassName:function(t){return t.isDragging("rotatable")?Ki("view-rotation-dragging"):""},render:function(t,e){var n=oy(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,o=n.zoom,s=n.renderDirections,a=n.rotateAroundControls,c=n.resolveAblesWithRotatable,h=t.getState(),d=h.renderPoses,v=h.direction;if(!r)return null;var w=Jq(i,d,v),_=[];if(w.forEach(function(A,F){var O=Tn(A,2),N=O[0],H=O[1];_.push(e.createElement("div",{key:"rotation".concat(F),className:Ki("rotation"),style:{transform:"translate(-50%) translate(".concat(N[0],"px, ").concat(N[1],"px) rotate(").concat(H,"rad)")}},e.createElement("div",{className:Ki("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:Ki("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}),s){var E=Nx(c||{}),M={};E.forEach(function(A){c[A].forEach(function(F){M[F]=A})});var D=[];bc(s)&&(D=s.map(function(A){var F=M[A];return{data:F?{resolve:F}:{},classNames:F?["move"]:[],dir:A}})),_.push.apply(_,Kr([],Tn(kq(t,"rotatable",D,e)),!1))}return a&&_.push.apply(_,Kr([],Tn(Uq(t,e)),!1)),_},dragControlCondition:UD,dragControlStart:function(t,e){var n,r,i=e.datas,o=e.clientX,s=e.clientY,a=e.parentRotate,c=e.parentFlag,h=e.isPinch,d=e.isRequest,v=t.state,w=v.target,_=v.left,E=v.top,M=v.direction,D=v.beforeDirection,A=v.targetTransform,F=v.moveableClientRect,O=v.offsetMatrix,N=v.targetMatrix,H=v.allMatrix,G=v.width,W=v.height;if(!d&&!w)return!1;var X=t.getRect();i.rect=X,i.transform=A,i.left=_,i.top=E;var K=function(Ee){var De=Kq(t.state,Ee);i.fixedDirection=De.fixedDirection,i.fixedOffset=De.fixedOffset,i.fixedPosition=De.fixedPosition,Ie&&Ie.setFixedPosition(Ee)},k=function(Ee){var De=Ope(t.state,Ee);i.fixedDirection=De.fixedDirection,i.fixedOffset=De.fixedOffset,i.fixedPosition=De.fixedPosition,Ie&&Ie.setFixedDirection(Ee)},$=o,Q=s;if(d||h||c){var ie=a||0;i.beforeInfo={origin:X.beforeOrigin,prevDeg:ie,defaultDeg:ie,prevSnapDeg:0,startDist:0},i.afterInfo=mn(mn({},i.beforeInfo),{origin:X.origin}),i.absoluteInfo=mn(mn({},i.beforeInfo),{origin:X.origin,startValue:ie})}else{var ae=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(ae){var ce=ae.getAttribute("data-direction")||"",se=Vde[ce];if(se){i.isControl=!0,i.isAroundControl=nc(ae,Ki("around-control")),i.controlDirection=se;var Se=ae.getAttribute("data-resolve");Se&&(i.resolveAble=Se);var ye=dge(v.rootMatrix,v.renderPoses,F);n=Tn(rc(ye,se),2),$=n[0],Q=n[1]}}i.beforeInfo={origin:X.beforeOrigin},i.afterInfo={origin:X.origin},i.absoluteInfo={origin:X.origin,startValue:X.rotation};var Te=K;K=function(Ee){var De=v.is3d?4:3,We=Tn(ko(gq(N,De),Ee),2),Ae=We[0],ut=We[1],pt=bh(O,ry([Ae,ut],De)),st=bh(H,ry([Ee[0],Ee[1]],De));Te(Ee);var Ce=v.posDelta;i.beforeInfo.origin=ta(pt,Ce),i.afterInfo.origin=ta(st,Ce),i.absoluteInfo.origin=ta(st,Ce),E5(t,i.beforeInfo,$,Q,F),E5(t,i.afterInfo,$,Q,F),E5(t,i.absoluteInfo,$,Q,F)},k=function(Ee){var De=rc([[0,0],[G,0],[0,W],[G,W]],Ee);K(De)}}i.startClientX=$,i.startClientY=Q,i.direction=M,i.beforeDirection=D,i.startValue=0,i.datas={},zM(t,e,"rotate");var pe=!1,Ie=!1;if(i.isControl&&i.resolveAble){var me=i.resolveAble;me==="resizable"&&(Ie=zD.dragControlStart(t,mn(mn({},new lx("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}Ie||(pe=Uh.dragStart(t,new lx().dragStart([0,0],e))),K(pge(t));var xe=ja(t,e,mn(mn({set:function(Ee){i.startValue=Ee*Math.PI/180},setFixedDirection:k,setFixedPosition:K},BM(t,e)),{dragStart:pe,resizeStart:Ie})),ve=Ri(t,"onRotateStart",xe);return i.isRotate=ve!==!1,v.snapRenderInfo={request:e.isRequest},i.isRotate?xe:!1},dragControl:function(t,e){var n,r,i,o=e.datas,s=e.clientDistX,a=e.clientDistY,c=e.parentRotate,h=e.parentFlag,d=e.isPinch,v=e.groupDelta,w=e.resolveMatrix,_=o.beforeDirection,E=o.beforeInfo,M=o.afterInfo,D=o.absoluteInfo,A=o.isRotate,F=o.startValue,O=o.rect,N=o.startClientX,H=o.startClientY;if(A){OM(t,e,"rotate");var G=qde(e),W=_*G,X=t.props.parentMoveable,K=0,k,$,Q=0,ie,ae,ce=0,se,Se,ye=180/Math.PI*F,Te=D.startValue,pe=!1,Ie=N+s,me=H+a;if(!h&&"parentDist"in e){var xe=e.parentDist;k=xe,ie=xe,se=xe}else d||h?(k=kT(c,_,E),ie=kT(c,W,M),se=kT(c,W,D)):(k=T5(Ie,me,_,E),ie=T5(Ie,me,W,M),se=T5(Ie,me,W,D),pe=!0);if($=ye+k,ae=ye+ie,Se=Te+se,Ri(t,"onBeforeRotate",ja(t,e,{beforeRotation:$,rotation:ae,absoluteRotation:Se,setRotation:function(It){ie=It-ye,k=ie,se=ie}},!0)),n=Tn(C5(t,O,E,k,ye,pe),3),K=n[0],k=n[1],$=n[2],r=Tn(C5(t,O,M,ie,ye,pe),3),Q=r[0],ie=r[1],ae=r[2],i=Tn(C5(t,O,D,se,Te,pe),3),ce=i[0],se=i[1],Se=i[2],!(!ce&&!Q&&!K&&!X&&!w)){var ve=FM(o,"rotate(".concat(ae,"deg)"),"rotate(".concat(ie,"deg)"));w&&(o.fixedPosition=jk(t,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var Ee=npe(t,ie,o),De=ta(ko(v||[0,0],Ee),o.prevInverseDist||[0,0]);o.prevInverseDist=Ee,o.requestValue=null;var We=Dq(t,ve,De,d,e),Ae=We,ut=hm([Ie,me],D.startAbsoluteOrigin)-D.startDist,pt=void 0;if(o.resolveAble==="resizable"){var st=zD.dragControl(t,mn(mn({},tS(e,t.state,[e.deltaX,e.deltaY],!!d,!1,"resizable")),{resolveMatrix:!0,parentDistance:ut}));st&&(pt=st,Ae=f$(Ae,st,e))}var Ce=ja(t,e,mn(mn({delta:Q,dist:ie,rotate:ae,rotation:ae,beforeDist:k,beforeDelta:K,beforeRotate:$,beforeRotation:$,absoluteDist:se,absoluteDelta:ce,absoluteRotate:Se,absoluteRotation:Se,isPinch:!!d,resize:pt},We),Ae));return Ri(t,"onRotate",Ce),Ce}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=Kf(t,e,{});return Ri(t,"onRotateEnd",r),r}},dragGroupControlCondition:UD,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,o=r.top,s=r.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(n.beforeDirection*t.rotation);var c=fm(t,this,"dragControlStart",e,function(v,w){var _=v.state,E=_.left,M=_.top,D=_.beforeOrigin,A=ko(ta([E,M],[i,o]),ta(D,s));return w.datas.startGroupClient=A,w.datas.groupClient=A,mn(mn({},w),{parentRotate:0})}),h=mn(mn({},a),{targets:t.props.targets,events:c}),d=Ri(t,"onRotateGroupStart",h);return n.isRotate=d!==!1,n.isRotate?a:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){HM(t,"onBeforeRotate",function(h){Ri(t,"onBeforeRotateGroup",ja(t,e,mn(mn({},h),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,o=r.beforeDist,s=o/180*Math.PI,a=fm(t,this,"dragControl",e,function(h,d){var v=d.datas.startGroupClient,w=Tn(d.datas.groupClient,2),_=w[0],E=w[1],M=Tn(Kw(v,s*i),2),D=M[0],A=M[1],F=[D-_,A-E];return d.datas.groupClient=[D,A],mn(mn({},d),{parentRotate:o,groupDelta:F})});t.rotation=i*r.beforeRotation;var c=mn({targets:t.props.targets,events:a,set:function(h){t.rotation=h},setGroupRotation:function(h){t.rotation=h}},r);return Ri(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=fm(t,this,"dragControlEnd",e),o=Kf(t,e,{targets:t.props.targets,events:i});return Ri(t,"onRotateGroupEnd",o),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function zpe(t,e){var n,r=t.direction,i=t.classNames,o=t.size,s=t.pos,a=t.zoom,c=t.key,h=r==="horizontal",d=h?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[h?"width":"height"]="".concat(o),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(d,"(-50%) scale").concat(d,"(").concat(a,")"),n)})}function Wk(t,e){return zpe(mn(mn({},t),{classNames:Kr([Ki("line","guideline",t.direction)],Tn(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(Pa(n,.1),"px")})}),e)}function PB(t,e,n,r,i,o,s,a){var c=t.props.zoom;return n.map(function(h,d){var v=h.type,w=h.pos,_=[0,0];return _[s]=r,_[s?0:1]=-i+w,Wk({key:"".concat(e,"TargetGuideline").concat(d),classNames:[Ki("target","bold",v)],posValue:_,sizeValue:o,zoom:c,direction:e},a)})}function IB(t,e,n,r,i,o){var s=t.props,a=s.zoom,c=s.isDisplayInnerSnapDigit,h=e==="horizontal"?Iv:Dv,d=i[h.start],v=i[h.end];return n.filter(function(w){var _=w.hide,E=w.elementRect;if(_)return!1;if(c&&E){var M=E.rect;if(M[h.start]<=d&&v<=M[h.end])return!1}return!0}).map(function(w,_){var E=w.pos,M=w.size,D=w.element,A=w.className,F=[-r[0]+E[0],-r[1]+E[1]];return Wk({key:"".concat(e,"-default-guideline-").concat(_),classNames:D?[Ki("bold"),A]:[Ki("normal"),A],direction:e,posValue:F,sizeValue:M,zoom:a},o)})}function v2(t,e,n,r,i,o,s,a){var c,h=t.props,d=h.snapDigit,v=d===void 0?0:d,w=h.isDisplaySnapDigit,_=w===void 0?!0:w,E=h.snapDistFormat,M=E===void 0?function(H,G){return H}:E,D=h.zoom,A=e==="horizontal"?"X":"Y",F=e==="vertical"?"height":"width",O=Math.abs(i),N=_?parseFloat(O.toFixed(v)):0;return a.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Ki("guideline-group",e),style:(c={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},c[F]="".concat(O,"px"),c)},Wk({direction:e,classNames:[Ki(n),s],size:"100%",posValue:[0,0],sizeValue:O,zoom:D},a),a.createElement("div",{className:Ki("size-value","gap"),style:{transform:"translate".concat(A,"(-50%) scale(").concat(D,")")}},N>0?M(N,e):""))}function Upe(t,e,n,r){var i=t==="vertical"?0:1,o=t==="vertical"?1:0,s=i?Iv:Dv,a=n[s.start],c=n[s.end];return d$(e,function(h){return h.pos[i]}).map(function(h){var d=[],v=[],w=[];return h.forEach(function(_){var E,M,D=_.element,A=_.elementRect.rect;if(A[s.end]<a)d.push(_);else if(c<A[s.start])v.push(_);else if(A[s.start]<=a&&c<=A[s.end]&&r){var F=_.pos,O={element:D,rect:mn(mn({},A),(E={},E[s.end]=A[s.start],E))},N={element:D,rect:mn(mn({},A),(M={},M[s.start]=A[s.end],M))},H=[0,0],G=[0,0];H[i]=F[i],H[o]=F[o],G[i]=F[i],G[o]=F[o]+_.size,d.push({type:t,pos:H,size:0,elementRect:O,direction:"",elementDirection:"end"}),v.push({type:t,pos:G,size:0,elementRect:N,direction:"",elementDirection:"start"})}}),d.sort(function(_,E){return E.pos[o]-_.pos[o]}),v.sort(function(_,E){return _.pos[o]-E.pos[o]}),{total:h,start:d,end:v,inner:w}})}function jpe(t,e,n,r,i){var o=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(a){var c=e.filter(function(D){return D.type===a}),h=a==="vertical"?1:0,d=h?0:1,v=Upe(a,c,r,o),w=h?Dv:Iv,_=h?Iv:Dv,E=r[w.start],M=r[w.end];v.forEach(function(D){var A=D.total,F=D.start,O=D.end,N=D.inner,H=n[d]+A[0].pos[d]-r[_.start],G=r;F.forEach(function(W){var X=W.elementRect.rect,K=G[w.start]-X[w.end];if(K>0){var k=[0,0];k[h]=n[h]+G[w.start]-E-K,k[d]=H,s.push(v2(t,a,"dashed",s.length,K,k,W.className,i))}G=X}),G=r,O.forEach(function(W){var X=W.elementRect.rect,K=X[w.start]-G[w.end];if(K>0){var k=[0,0];k[h]=n[h]+G[w.end]-E,k[d]=H,s.push(v2(t,a,"dashed",s.length,K,k,W.className,i))}G=X}),N.forEach(function(W){var X=W.elementRect.rect,K=E-X[w.start],k=X[w.end]-M,$=[0,0],Q=[0,0];$[h]=n[h]-K,$[d]=H,Q[h]=n[h]+M-E,Q[d]=H,s.push(v2(t,a,"dashed",s.length,K,$,W.className,i)),s.push(v2(t,a,"dashed",s.length,k,Q,W.className,i))})})}),s}function Gpe(t,e,n,r,i){var o=[];return["horizontal","vertical"].forEach(function(s){var a=e.filter(function(D){return D.type===s}).slice(0,1),c=s==="vertical"?0:1,h=c?0:1,d=c?Dv:Iv,v=c?Iv:Dv,w=r[d.start],_=r[d.end],E=r[v.start],M=r[v.end];a.forEach(function(D){var A=D.gap,F=D.gapRects,O=Math.max.apply(Math,Kr([E],Tn(F.map(function(G){var W=G.rect;return W[v.start]})),!1)),N=Math.min.apply(Math,Kr([M],Tn(F.map(function(G){var W=G.rect;return W[v.end]})),!1)),H=(O+N)/2;O===N||H===(E+M)/2||F.forEach(function(G){var W=G.rect,X=G.className,K=[n[0],n[1]];if(W[d.end]<w)K[c]+=W[d.end]-w;else if(_<W[d.start])K[c]+=W[d.start]-w-A;else return;K[h]+=H-E,o.push(v2(t,c?"vertical":"horizontal","gap",o.length,A,K,X,i))})})}),o}function jD(t){var e,n,r=t.state,i=r.containerClientRect,o=r.hasFixed,s=i.overflow,a=i.scrollHeight,c=i.scrollWidth,h=i.clientHeight,d=i.clientWidth,v=i.clientLeft,w=i.clientTop,_=t.props,E=_.snapGap,M=E===void 0?!0:E,D=_.verticalGuidelines,A=_.horizontalGuidelines,F=_.snapThreshold,O=F===void 0?5:F,N=_.maxSnapElementGuidelineDistance,H=N===void 0?1/0:N,G=_.isDisplayGridGuidelines,W=Md(Ld(t.state)),X=W.top,K=W.left,k=W.bottom,$=W.right,Q={top:X,left:K,bottom:k,right:$,center:(K+$)/2,middle:(X+k)/2},ie=$pe(t),ae=Kr([],Tn(ie),!1),ce=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(Te){return Te*O});M&&ae.push.apply(ae,Kr([],Tn(Vpe(t,Q,ce)),!1));var se=mn({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(ae.push.apply(ae,Kr([],Tn(qpe(t,s?c:d,s?a:h,v,w,se,G)),!1)),o){var Se=i.left,ye=i.top;se.left+=Se,se.top+=ye,se.right+=Se,se.bottom+=ye}return ae.push.apply(ae,Kr([],Tn(e$(A||!1,D||!1,s?c:d,s?a:h,v,w,se)),!1)),ae=ae.filter(function(Te){var pe=Te.element,Ie=Te.elementRect,me=Te.type;if(!pe||!Ie)return!0;var xe=Ie.rect;return Qq(Q,xe,me,H)}),ae}function Vpe(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,o=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,a=s===void 0?1/0:s,c=t.state.elementRects,h=[];return[["vertical",Iv,Dv],["horizontal",Dv,Iv]].forEach(function(d){var v=Tn(d,3),w=v[0],_=v[1],E=v[2],M=e[_.start],D=e[_.end],A=e[_.center],F=e[E.start],O=e[E.end],N={left:n[0],top:n[1]};function H(X){var K=X.rect,k=N[_.start];return K[_.end]<M+k?M-K[_.end]:D-k<K[_.start]?K[_.start]-D:-1}var G=c.filter(function(X){var K=X.rect;return K[E.start]>O||K[E.end]<F?!1:H(X)>0}).sort(function(X,K){return H(X)-H(K)}),W=[];G.forEach(function(X){G.forEach(function(K){if(X!==K){var k=X.rect,$=K.rect,Q=k[E.start],ie=k[E.end],ae=$[E.start],ce=$[E.end];Q>ce||ae>ie||W.push([X,K])}})}),W.forEach(function(X){var K=Tn(X,2),k=K[0],$=K[1],Q=k.rect,ie=$.rect,ae=Q[_.start],ce=Q[_.end],se=ie[_.start],Se=ie[_.end],ye=N[_.start],Te=0,pe=0,Ie=!1,me=!1,xe=!1;if(ce<=M&&D<=se){if(me=!0,Te=(se-ce-(D-M))/2,pe=ce+Te+(D-M)/2,Gr(pe-A)>ye)return}else if(ce<se&&Se<M+ye){if(Ie=!0,Te=se-ce,pe=Se+Te,Gr(pe-M)>ye)return}else if(ce<se&&D-ye<ae){if(xe=!0,Te=se-ce,pe=ae-Te,Gr(pe-D)>ye)return}else return;Te&&Qq(e,ie,w,o)&&(Te>a||h.push({type:w,pos:w==="vertical"?[pe,0]:[0,pe],element:$.element,size:0,className:$.className,isStart:Ie,isCenter:me,isEnd:xe,gap:Te,hide:!0,gapRects:[k,$],direction:"",elementDirection:""}))})}),h}function Hpe(t,e,n,r){var i,o,s=t.props,a=t.state,c=s.snapGridAll,h=s.snapGridWidth,d=h===void 0?0:h,v=s.snapGridHeight,w=v===void 0?0:v,_=a.snapRenderInfo,E=_&&(((i=_.direction)===null||i===void 0?void 0:i[0])||((o=_.direction)===null||o===void 0?void 0:o[1])),M=t.moveables;if(c&&M&&E&&(d||w)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var D=t.getRect(),A=D.children,F=_.direction;if(A){var O=F.map(function(H,G){var W=G===0?{snapSize:d,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:w,posName:"top",sizeName:"height",clientOffset:r.top-n},X=W.snapSize,K=W.posName,k=W.sizeName,$=W.clientOffset;if(!X)return{dir:H,multiple:1,snapSize:X,snapOffset:0};var Q=D[k],ie=D[K],ae=Ffe(A.map(function(Ie){return[Ie[K]-ie,Ie[k],Q-Ie[k]-Ie[K]+ie]})).filter(function(Ie){return Ie}).sort(function(Ie,me){return Ie-me}),ce=ae[0],se=ae.map(function(Ie){return Pa(Ie/ce,.1)*X}),Se=1,ye=Pa(Q/ce,.1);for(Se=1;Se<=10&&!se.every(function(Ie){return Ie*Se%1===0});++Se);var Te=(-H+1)/2,pe=dC(ie-$,ie-$+Q,Te,1-Te);return{multiple:ye*Se,dir:H,snapSize:X,snapOffset:Math.round(pe/X)}}),N=O.map(function(H){return H.multiple||1});a.snapThresholdInfo.multiples=N,a.snapThresholdInfo.offset=O.map(function(H){return H.snapOffset}),O.forEach(function(H,G){H.snapSize})}}else a.snapThresholdInfo=null}function qpe(t,e,n,r,i,o,s){r===void 0&&(r=0),i===void 0&&(i=0);var a=t.props,c=t.state,h=a.snapGridWidth,d=h===void 0?0:h,v=a.snapGridHeight,w=v===void 0?0:v,_=[],E=o.left,M=o.top,D=[0,0];Hpe(t,r,i,o);var A=c.snapThresholdInfo,F=d,O=w;if(A&&(d*=A.multiples[0]||1,w*=A.multiples[1]||1,D=A.offset),w){for(var N=function(G){_.push({type:"horizontal",pos:[E,Pa(D[1]*O+G-i+M,.1)],className:Ki("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},H=0;H<=n*2;H+=w)N(H);for(var H=-w;H>=-n;H-=w)N(H)}if(d){for(var N=function(W){_.push({type:"vertical",pos:[Pa(D[0]*F+W-r+E,.1),M],className:Ki("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},H=0;H<=e*2;H+=d)N(H);for(var H=-d;H>=-e;H-=d)N(H)}return _}function Qq(t,e,n,r){return n==="horizontal"?Gr(t.right-e.left)<=r||Gr(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Gr(t.bottom-e.top)<=r||Gr(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function $pe(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(w){return!w.refresh}),o=r.map(function(w){return _p(w)&&"element"in w?mn(mn({},w),{element:lg(w.element,!0)}):{element:lg(w,!0)}}).filter(function(w){return w.element}),s=rde(i.map(function(w){return w.element}),o.map(function(w){return w.element})),a=s.maintained,c=s.added,h=[];a.forEach(function(w){var _=Tn(w,2),E=_[0],M=_[1];h[M]=i[E]}),Wpe(t,c.map(function(w){return o[w]})).map(function(w,_){h[c[_]]=w}),e.elementRects=h;var d=Vk(t.props.elementSnapDirections),v=[];return h.forEach(function(w){var _=w.element,E=w.top,M=E===void 0?d.top:E,D=w.left,A=D===void 0?d.left:D,F=w.right,O=F===void 0?d.right:F,N=w.bottom,H=N===void 0?d.bottom:N,G=w.center,W=G===void 0?d.center:G,X=w.middle,K=X===void 0?d.middle:X,k=w.className,$=w.rect,Q=Hk({top:M,right:O,left:A,bottom:H,center:W,middle:K},$),ie=Q.horizontal,ae=Q.vertical,ce=Q.horizontalNames,se=Q.verticalNames,Se=$.top,ye=$.left,Te=$.right-ye,pe=$.bottom-Se,Ie=[Te,pe];ae.forEach(function(me,xe){v.push({type:"vertical",element:_,pos:[Pa(me,.1),Se],size:pe,sizes:Ie,className:k,elementRect:w,elementDirection:wB[se[xe]]||se[xe],direction:""})}),ie.forEach(function(me,xe){v.push({type:"horizontal",element:_,pos:[ye,Pa(me,.1)],size:Te,sizes:Ie,className:k,elementRect:w,elementDirection:wB[ce[xe]]||ce[xe],direction:""})})}),v}function DB(t,e){return t?t.map(function(n){var r=_p(n)?n:{pos:n},i=r.pos;return vw(i)?r:mn(mn({},r),{pos:Ls(i,e)})}):[]}function e$(t,e,n,r,i,o,s){i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var a=[],c=s.left,h=s.top,d=s.bottom,v=s.right,w=n+v-c,_=r+d-h;return DB(t,_).forEach(function(E){a.push({type:"horizontal",pos:[c,Pa(E.pos-o+h,.1)],size:w,className:E.className,direction:""})}),DB(e,w).forEach(function(E){a.push({type:"vertical",pos:[Pa(E.pos-i+c,.1),h],size:_,className:E.className,direction:""})}),a}function Wpe(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,o=r.rootMatrix,s=r.is3d,a=r.offsetDelta,c=s?4:3,h=Tn(vpe(o,i,c),2),d=h[0],v=h[1],w=n?0:a[0],_=n?0:a[1];return e.map(function(E){var M=E.element.getBoundingClientRect(),D=M.left-d-w,A=M.top-v-_,F=A+M.height,O=D+M.width,N=Tn(hx(o,[D,A],c),2),H=N[0],G=N[1],W=Tn(hx(o,[O,F],c),2),X=W[0],K=W[1];return mn(mn({},E),{rect:{left:H,right:X,top:G,bottom:K,center:(H+X)/2,middle:(G+K)/2}})})}function SE(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(n!==r){var s=lg(r,!0);if(s){var a=X2(s),c=BB(e,[a.left-i.left,a.top-i.top]),h=BB(e,[a.right-i.right,a.bottom-i.bottom]);o.left=Pa(c[0],1e-5),o.top=Pa(c[1],1e-5),o.right=Pa(h[0],1e-5),o.bottom=Pa(h[1],1e-5)}}return e.snapContainer=r,e.snapOffset=o,e.guidelines=jD(t),e.enableSnap=!0,!0}function t$(t,e,n,r,i,o){var s=Ey(t,e,n,o?4:3),a=rc(s,r);return Yk(s,ta(i,a))}function LB(t){return t?t/Gr(t):0}function Xpe(t,e,n,r,i,o){var s=o.fixedDirection,a=bpe(n,s,r),c=$k(t,e,n,r),h=Kr(Kr([],Tn(Lpe(t,e,a,r,i,o)),!1),Tn(Yq(t,c,o)),!1),d=yC(h,0),v=yC(h,1);return{width:{isBound:d.isBound,offset:d.offset[0]},height:{isBound:v.isBound,offset:v.offset[1]}}}function Ype(t,e,n,r,i,o,s,a,c){var h=rc(e,s),d=GM(t,a,{vertical:[h[0]],horizontal:[h[1]]}),v=d.horizontal.offset,w=d.vertical.offset;if(Pa(w,ND)||Pa(v,ND)){var _=Tn(vg({datas:c,distX:-w,distY:-v}),2),E=_[0],M=_[1],D=Math.min(i||1/0,n+s[0]*E),A=Math.min(o||1/0,r+s[1]*M);return[D-n,A-r]}return[0,0]}function n$(t,e,n,r,i,o,s,a){for(var c=Ld(t.state),h=t.props.keepRatio,d=0,v=0,w=0;w<2;++w){var _=e(d,v),E=Xpe(t,_,i,h,s,a),M=E.width,D=E.height,A=M.isBound,F=D.isBound,O=M.offset,N=D.offset;if(w===1&&(A||(O=0),F||(N=0)),w===0&&s&&!A&&!F)return[0,0];if(h){var H=Gr(O)*(n?1/n:1),G=Gr(N)*(r?1/r:1),W=A&&F?H<G:F||!A&&H<G;W?O=n*N/r:N=r*O/n}d+=O,v+=N}if(!h&&i[0]&&i[1]){var X=kpe(t,c,i,o,a),K=X.maxWidth,k=X.maxHeight,$=Tn(Ype(t,e(d,v).map(function(ae){return ae.map(function(ce){return Pa(ce,ND)})}),n+d,r+v,K,k,i,s,a),2),O=$[0],N=$[1];d+=O,v+=N}return[d,v]}function $2(t){return t<0&&(t=t%360+360),t%=360,t}function Zpe(t,e){e=$2(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return Gr(t-r)<Gr(t-i)?r:i}function M5(t,e){t=$2(t),e=$2(e);var n=$2(t-e);return Math.min(n,360-n)}function Kpe(t,e,n,r){var i,o=t.props,s=(i=o[jq])!==null&&i!==void 0?i:5,a=o[Gq];if(Fx(t,"rotatable")){var c=e.pos1,h=e.pos2,d=e.pos3,v=e.pos4,w=e.origin,_=n*Math.PI/180,E=[c,h,d,v].map(function(N){return ta(N,w)}),M=E.map(function(N){return Kw(N,_)}),D=Kr(Kr([],Tn(dpe(t,E,M,w,n)),!1),Tn(Mpe(t,E,M,w,n)),!1);D.sort(function(N,H){return Gr(N-n)-Gr(H-n)});var A=D.length>0;if(A)return{isSnap:A,dist:A?D[0]:n}}if(a!=null&&a.length&&s){var F=a.slice().sort(function(N,H){return M5(N,r)-M5(H,r)}),O=F[0];if(M5(O,r)<=s)return{isSnap:!0,dist:n+Zpe(r,O)-r}}return{isSnap:!1,dist:n}}function Jpe(t,e,n,r,i,o,s){if(!Fx(t,"resizable"))return[0,0];var a=s.fixedDirection,c=s.nextAllMatrix,h=t.state,d=h.allMatrix,v=h.is3d;return n$(t,function(w,_){return t$(c||d,e+w,n+_,a,i,v)},e,n,r,i,o,s)}function Qpe(t,e,n,r,i){if(!Fx(t,"scalable"))return[0,0];var o=i.startOffsetWidth,s=i.startOffsetHeight,a=i.fixedPosition,c=i.fixedDirection,h=i.is3d,d=n$(t,function(v,w){return t$(Jde(i,ko(e,[v/o,w/s])),o,s,c,a,h)},o,s,n,a,r,i);return[d[0]/o,d[1]/s]}function ege(t,e){e.absolutePoses=Ld(t.state)}function NB(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Zf(e,function(o){return o.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return mn(mn({},r),{direction:i.direction})})}function kB(t,e,n,r,i,o){var s=Gk(UM(t,o),e,n),a=s.vertical,c=s.horizontal,h=D1();a.forEach(function(E){E.isBound&&(E.direction==="start"&&(h.left=!0),E.direction==="end"&&(h.right=!0),r.push({type:"bounds",pos:E.pos}))}),c.forEach(function(E){E.isBound&&(E.direction==="start"&&(h.top=!0),E.direction==="end"&&(h.bottom=!0),i.push({type:"bounds",pos:E.pos}))});var d=Ape(t),v=d.boundMap,w=d.vertical,_=d.horizontal;return w.forEach(function(E){_m(r,function(M){var D=M.type,A=M.pos;return D==="bounds"&&A===E})>=0||r.push({type:"bounds",pos:E})}),_.forEach(function(E){_m(i,function(M){var D=M.type,A=M.pos;return D==="bounds"&&A===E})>=0||i.push({type:"bounds",pos:E})}),{boundMap:h,innerBoundMap:v}}var tge=Jk("",["resizable","scalable"]),nge={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",jq,Gq,Vq,Hq,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,s=n.pos2,a=n.pos3,c=n.pos4,h=n.snapRenderInfo,d=t.props.snapRenderThreshold,v=d===void 0?1:d;if(!h||!h.render||!Fx(t,""))return N1(t,"boundMap",D1(),function(ve){return JSON.stringify(ve)}),N1(t,"innerBoundMap",D1(),function(ve){return JSON.stringify(ve)}),[];n.guidelines=jD(t);var w=Math.min(o[0],s[0],a[0],c[0]),_=Math.min(o[1],s[1],a[1],c[1]),E=h.externalPoses||[],M=Ld(t.state),D=[],A=[],F=[],O=[],N=[],H=Md(M),G=H.width,W=H.height,X=H.top,K=H.left,k=H.bottom,$=H.right,Q={left:K,right:$,top:X,bottom:k,center:(K+$)/2,middle:(X+k)/2},ie=E.length>0,ae=ie?Md(E):{};if(!h.request){if(h.direction&&N.push(xpe(t,M,h.direction,v,v)),h.snap){var ce=Md(M);h.center&&(ce.middle=(ce.top+ce.bottom)/2,ce.center=(ce.left+ce.right)/2),N.push(SB(t,ce,v,v))}ie&&(h.center&&(ae.middle=(ae.top+ae.bottom)/2,ae.center=(ae.left+ae.right)/2),N.push(SB(t,ae,v,v))),N.forEach(function(ve){var Ee=ve.vertical.posInfos,De=ve.horizontal.posInfos;D.push.apply(D,Kr([],Tn(Ee.filter(function(We){var Ae=We.guidelineInfos;return Ae.some(function(ut){var pt=ut.guideline;return!pt.hide})}).map(function(We){return{type:"snap",pos:We.pos}})),!1)),A.push.apply(A,Kr([],Tn(De.filter(function(We){var Ae=We.guidelineInfos;return Ae.some(function(ut){var pt=ut.guideline;return!pt.hide})}).map(function(We){return{type:"snap",pos:We.pos}})),!1)),F.push.apply(F,Kr([],Tn(NB(Ee)),!1)),O.push.apply(O,Kr([],Tn(NB(De)),!1))})}var se=kB(t,[K,$],[X,k],D,A),Se=se.boundMap,ye=se.innerBoundMap;ie&&kB(t,[ae.left,ae.right],[ae.top,ae.bottom],D,A,h.externalBounds);var Te=Kr(Kr([],Tn(F),!1),Tn(O),!1),pe=Te.filter(function(ve){return ve.element&&!ve.gapRects}),Ie=Te.filter(function(ve){return ve.gapRects}).sort(function(ve,Ee){return ve.gap-Ee.gap});Ri(t,"onSnap",{guidelines:Te.filter(function(ve){var Ee=ve.element;return!Ee}),elements:pe,gaps:Ie},!0);var me=N1(t,"boundMap",Se,function(ve){return JSON.stringify(ve)},D1()),xe=N1(t,"innerBoundMap",ye,function(ve){return JSON.stringify(ve)},D1());return(Se===me||ye===xe)&&Ri(t,"onBound",{bounds:Se,innerBounds:ye},!0),Kr(Kr(Kr(Kr(Kr(Kr([],Tn(jpe(t,pe,[w,_],Q,e)),!1),Tn(Gpe(t,Ie,[w,_],Q,e)),!1),Tn(IB(t,"horizontal",O,[i,r],Q,e)),!1),Tn(IB(t,"vertical",F,[i,r],Q,e)),!1),Tn(PB(t,"horizontal",A,w,r,G,0,e)),!1),Tn(PB(t,"vertical",D,_,i,W,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},SE(t)},drag:function(t){var e=t.state;SE(t)||(e.guidelines=jD(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(tge(t,e)||UD(t,e))return!0;if(!e.isRequest&&e.inputEvent)return nc(e.inputEvent.target,Ki("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,SE(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,SE(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function rge(t,e){return[t[0]*e[0],t[1]*e[1]]}function Ki(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xfe.apply(void 0,Kr([Bk],Tn(t),!1))}function r$(t){t()}function ige(t){return!t||t==="none"?[1,0,0,1,0,0]:_p(t)?t:_w(t)}function W2(t,e,n){return pC(e,iy(n,e),t,iy(n.map(function(r){return-r}),e))}function age(t,e,n){if(e==="%"){var r=Xk(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function oge(t){var e=sge(Zk(t,":before"));return e.map(function(n,r){var i=Zw(n),o=i.value,s=i.unit;return o*age(t,s,r===0)})}function xC(t){return t?t.split(" "):["0","0"]}function sge(t){return xC(t.transformOrigin)}function i$(t){var e=_f(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var o=i.length;if(!o)return"";for(var s=[],a=function(h){var d=i[h].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(v){return d[v]}).join(", "),")"))},c=0;c<o;++c)a(c);return s.join(" ")}return""}function bw(t,e,n,r,i){var o,s,a=Pk(t)||Uv(t),c=!1,h,d;if(!t||n)h=t;else{var v=(o=t==null?void 0:t.assignedSlot)===null||o===void 0?void 0:o.parentElement,w=t.parentElement;v?(c=!0,d=w,h=v):h=w}for(var _=!1,E=t===e||h===e,M="relative",D=1,A=parseFloat(i==null?void 0:i("zoom"))||1,F=i==null?void 0:i("position");h&&h!==a;){e===h&&(E=!0);var O=_f(h),N=h.tagName.toLowerCase(),H=i$(h),G=O("willChange"),W=parseFloat(O("zoom"))||1;if(M=O("position"),r&&W!==1){D=W;break}if(!n&&r&&A!==1&&F&&F!=="absolute"||N==="svg"||N==="foreignobject"||M!=="static"||H&&H!=="none"||G==="transform")break;var X=(s=t==null?void 0:t.assignedSlot)===null||s===void 0?void 0:s.parentNode,K=h.parentNode;X&&(c=!0,d=K);var k=K;if(k&&k.nodeType===11){h=k.host,_=!0,M=_f(h)("position");break}h=k,M="relative"}return{offsetZoom:D,hasSlot:c,parentSlotElement:d,isCustomElement:_,isStatic:M==="static",isEnd:E||!h||h===a,offsetParent:h||a}}function lge(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,o=t.offsetTop,s=_f(t),a=Tk(i),c=!a,h,d;return!c&&(r!=="svg"||t.ownerSVGElement)?(h=Eq?oge(t):xC(s("transformOrigin")).map(function(v){return parseFloat(v)}),d=h.slice(),c=!0,r==="svg"?(i=0,o=0):(n=Tn(hge(t,h,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],o=n[1],h[0]=n[2],h[1]=n[3])):(h=xC(s("transformOrigin")).map(function(v){return parseFloat(v)}),d=h.slice()),{tagName:r,isSVG:a,hasOffset:c,offset:[i||0,o||0],origin:h,targetOrigin:d}}function a$(t,e){var n=_f(t),r=_f(Uv(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var o=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(o=0)),[o,s]}function GD(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=xp(n,3,4))})}function uge(t){for(var e=t.parentElement,n=!1,r=Uv(t);e;){var i=Zk(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function VM(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(mq(t,!e).join(","),")")}function Xk(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function cge(t,e){var n,r=Xk(t),i=r.width,o=r.height,s=r.clientWidth,a=r.clientHeight,c=s/i,h=a/o,d=t.preserveAspectRatio.baseVal,v=d.align,w=d.meetOrSlice,_=[0,0],E=[c,h],M=[0,0];if(v!==1){var D=(v-2)%3,A=Math.floor((v-2)/3);_[0]=i*D/2,_[1]=o*A/2;var F=w===2?Math.max(h,c):Math.min(c,h);E[0]=F,E[1]=F,M[0]=(s-i)/2*D,M[1]=(a-o)/2*A}var O=Dk(E,e);return n=Tn(M,2),O[e*(e-1)]=n[0],O[e*(e-1)+1]=n[1],W2(O,e,_)}function hge(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=_f(t),o=i("transform-box")==="fill-box",s=t.getBBox(),a=Xk(t.ownerSVGElement),c=s.x,h=s.y;r==="foreignobject"&&!c&&!h&&(c=parseFloat(t.getAttribute("x"))||0,h=parseFloat(t.getAttribute("y"))||0);var d=c-a.x,v=h-a.y,w=o?e[0]:e[0]-d,_=o?e[1]:e[1]-v;return[d,v,w,_]}function Gl(t,e,n){return bh(t,ry(e,n),n)}function Ey(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Gl(t,i,r)})}function Md(t){var e=t.map(function(h){return h[0]}),n=t.map(function(h){return h[1]}),r=Math.min.apply(Math,Kr([],Tn(e),!1)),i=Math.min.apply(Math,Kr([],Tn(n),!1)),o=Math.max.apply(Math,Kr([],Tn(e),!1)),s=Math.max.apply(Math,Kr([],Tn(n),!1)),a=o-r,c=s-i;return{left:r,top:i,right:o,bottom:s,width:a,height:c}}function OB(t,e,n,r){var i=Ey(t,e,n,r);return Md(i)}function fge(t,e,n,r,i){var o,s=t.target,a=t.origin,c=e.matrix,h=s$(s),d=h.offsetWidth,v=h.offsetHeight,w=n.getBoundingClientRect(),_=[0,0];n===Uv(n)&&(_=a$(s,!0));for(var E=s.getBoundingClientRect(),M=E.left-w.left+n.scrollLeft-(n.clientLeft||0)+_[0],D=E.top-w.top+n.scrollTop-(n.clientTop||0)+_[1],A=E.width,F=E.height,O=pC(r,i,c),N=OB(O,d,v,r),H=N.left,G=N.top,W=N.width,X=N.height,K=Gl(O,a,r),k=ta(K,[H,G]),$=[M+k[0]*A/W,D+k[1]*F/X],Q=[0,0],ie=0;++ie<10;){var ae=fg(i,r);o=Tn(ta(Gl(ae,$,r),Gl(ae,K,r)),2),Q[0]=o[0],Q[1]=o[1];var ce=pC(r,i,iy(Q,r),c),se=OB(ce,d,v,r),Se=se.left,ye=se.top,Te=Se-M,pe=ye-D;if(Gr(Te)<2&&Gr(pe)<2)break;$[0]-=Te,$[1]-=pe}return Q.map(function(Ie){return Math.round(Ie)})}function dge(t,e,n){var r=t.length===16,i=r?4:3,o=e.map(function(c){return Gl(t,c,i)}),s=n.left,a=n.top;return o.map(function(c){return[c[0]+s,c[1]+a]})}function Dd(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function o$(t,e){return Dd([e[0]-t[0],e[1]-t[1]])}function y2(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=bu(t,e));var i=o$(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function bC(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,o=n.reduce(function(a,c){return a+c[0]},0)/i,s=n.reduce(function(a,c){return a+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function oy(t,e){var n=t[e];return _p(n)?mn(mn({},t),n):t}function s$(t){var e=t&&!Tk(t.offsetWidth),n=0,r=0,i=0,o=0,s=0,a=0,c=0,h=0,d=0,v=0,w=0,_=0,E=1/0,M=1/0,D=1/0,A=1/0,F=0,O=0,N=!1;if(t)if(!e&&t.ownerSVGElement){var H=t.getBBox();N=!0,n=H.width,r=H.height,s=n,a=r,c=n,h=r,i=n,o=r}else{var G=_f(t),W=t.style,X=G("boxSizing")==="border-box",K=parseFloat(G("borderLeftWidth"))||0,k=parseFloat(G("borderRightWidth"))||0,$=parseFloat(G("borderTopWidth"))||0,Q=parseFloat(G("borderBottomWidth"))||0,ie=parseFloat(G("paddingLeft"))||0,ae=parseFloat(G("paddingRight"))||0,ce=parseFloat(G("paddingTop"))||0,se=parseFloat(G("paddingBottom"))||0,Se=ie+ae,ye=ce+se,Te=K+k,pe=$+Q,Ie=Se+Te,me=ye+pe,xe=G("position"),ve=0,Ee=0;if("clientLeft"in t){var De=null;if(xe==="absolute"){var We=bw(t,Uv(t));De=We.offsetParent}else De=t.parentElement;if(De){var Ae=_f(De);ve=parseFloat(Ae("width")),Ee=parseFloat(Ae("height"))}}d=Math.max(Se,Ls(G("minWidth"),ve)||0),v=Math.max(ye,Ls(G("minHeight"),Ee)||0),E=Ls(G("maxWidth"),ve),M=Ls(G("maxHeight"),Ee),isNaN(E)&&(E=1/0),isNaN(M)&&(M=1/0),F=Ls(W.width,0)||0,O=Ls(W.height,0)||0,s=parseFloat(G("width"))||0,a=parseFloat(G("height"))||0,c=Gr(s-F)<1?ED(d,F||s,E):s,h=Gr(a-O)<1?ED(v,O||a,M):a,n=c,r=h,i=c,o=h,X?(D=E,A=M,w=d,_=v,c=n-Ie,h=r-me):(D=E+Ie,A=M+me,w=d+Ie,_=v+me,n=c+Ie,r=h+me),i=c+Se,o=h+ye}return{svg:N,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:o,contentWidth:c,contentHeight:h,inlineCSSWidth:F,inlineCSSHeight:O,cssWidth:s,cssHeight:a,minWidth:d,minHeight:v,maxWidth:E,maxHeight:M,minOffsetWidth:w,minOffsetHeight:_,maxOffsetWidth:D,maxOffsetHeight:A}}function l$(t,e){return bu(e>0?t[0]:t[1],e>0?t[1]:t[0])}function EE(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function u$(t,e){var n=t===Uv(t)||t===Pk(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=_f(t)("overflow")!=="visible",mn(mn({},e),r)}function A5(t,e,n,r){var i=t.left,o=t.right,s=t.top,a=t.bottom,c=e.top,h=e.left,d={left:h+i,top:c+s,right:h+o,bottom:c+a,width:o-i,height:a-s};return n&&r?u$(n,d):d}function X2(t,e){var n=0,r=0,i=0,o=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,o=s.height}var a={left:n,top:r,width:i,height:o,right:n+i,bottom:r+o};return t&&e?u$(t,a):a}function pge(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),o=i.offsetWidth,s=i.offsetHeight,a=i.svg,c=i.transformOrigin;return!n&&a&&r?e4(r,o,s):c}function c$(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var o=n.target;i=h$(o,r)}return i}function h$(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function Yk(t,e){return[ko(e,t[0]),ko(e,t[1]),ko(e,t[2]),ko(e,t[3])]}function Ld(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,o=t.pos3,s=t.pos4;return Yk([r,i,o,s],[e,n])}function VD(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function L1(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];(r==null?void 0:r.isIdle())===!1&&VD(t,e),r==null||r.unset(),t[n]=null}function Hh(t,e){if(e){var n=Ox(e);n.nextStyle=mn(mn({},n.nextStyle),t)}return{style:t,cssText:Nx(t).map(function(r){return"".concat(Dfe(r,"-"),": ").concat(t[r],";")}).join("")}}function f$(t,e,n){var r=e.afterTransform||e.transform;return mn(mn({},Hh(mn(mn(mn({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ja(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var o=mn(mn({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=o):i.isStartEvent=!0,o}function Kf(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),mn(mn({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function HM(t,e,n){t._emitter.on(e,n)}function Ri(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function Zk(t,e){return bv(t).getComputedStyle(t,e)}function TE(t,e,n){var r={},i={};return t.filter(function(o){var s=o.name;if(r[s]||!e.some(function(a){return o[a]}))return!1;if(!n&&o.ableGroup){if(i[o.ableGroup])return!1;i[o.ableGroup]=!0}return r[s]=!0,!0})}function HD(t,e){return t===e||t==null&&e==null}function FB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!Tk(i))return i}return t[n]}function d$(t,e){var n=[],r=[];return t.forEach(function(i,o){var s=e(i,o,t),a=r.indexOf(s),c=n[a]||[];a===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function gge(t,e){var n=[],r={};return t.forEach(function(i,o){var s=e(i,o,t),a=r[s];a||(a=[],r[s]=a,n.push(a)),a.push(i)}),n}function p$(t){return t.reduce(function(e,n){return e.concat(n)},[])}function cx(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Gr(r)-Gr(n)}),t[0]}function hx(t,e,n){return bh(fg(t,n),ry(e,n),n)}function mge(t,e){var n,r=t.is3d,i=t.rootMatrix,o=r?4:3;return n=Tn(hx(i,[e.distX,e.distY],o),2),e.distX=n[0],e.distY=n[1],e}function pd(t,e,n,r){if(!n[0]&&!n[1])return e;var i=Gl(t,[LB(n[0]||1),0],r),o=Gl(t,[0,LB(n[1]||1)],r),s=Gl(t,[n[0]/Dd(i),n[1]/Dd(o)],r);return ko(e,s)}function cp(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function wC(t){return Gr(t)<=$h?0:t}function Kk(t){return function(e){if(!e.isDragging(t))return"";var n=ape(e,t),r=n.deg;return r?Ki("view-control-rotation".concat(r)):""}}function Jk(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(o){return r.requestAble===o})?r.parentDirection:!1;var i=r.inputEvent.target;return nc(i,Ki("direction"))&&(!t||nc(i,Ki(t)))}}function vge(t,e,n){var r,i=sx(t,{"x%":function(H){return H/100*e.offsetWidth},"y%":function(H){return H/100*e.offsetHeight}}),o=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),a=t[n]||"",c=n<0?[]:t.slice(n),h=n<0?[]:t.slice(n+1),d=i.slice(0,n<0?void 0:n),v=i.slice(0,n<0?void 0:n+1),w=(r=i[n])!==null&&r!==void 0?r:sx([""])[0],_=n<0?[]:i.slice(n),E=n<0?[]:i.slice(n+1),M=w?[w]:[],D=u1(d),A=u1(v),F=u1(_),O=u1(E),N=ks(D,F,4);return{transforms:t,beforeFunctionMatrix:D,beforeFunctionMatrix2:A,targetFunctionMatrix:u1(M),afterFunctionMatrix:F,afterFunctionMatrix2:O,allFunctionMatrix:N,beforeFunctions:d,beforeFunctions2:v,targetFunction:M[0],afterFunctions:_,afterFunctions2:E,beforeFunctionTexts:o,beforeFunctionTexts2:s,targetFunctionText:a,afterFunctionTexts:c,afterFunctionTexts2:h}}function yge(t){return!t||!_p(t)||Ik(t)?!1:bc(t)||"length"in t}function lg(t,e){return t?Ik(t)?t:Tm(t)?e?document.querySelector(t):t:Ck(t)?t():dq(t)?t:"current"in t?t.current:t:null}function Qk(t,e){if(!t)return[];var n=yge(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Tm(i)&&e?Kr(Kr([],Tn(r),!1),Tn([].slice.call(document.querySelectorAll(i))),!1):(bc(i)?r.push(Qk(i,e)):r.push(lg(i,e)),r)},[])}function _ge(t,e,n){var r=bu(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function BB(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,o=fg(n,i);return r||(o=xp(o,3,4)),o[12]=0,o[13]=0,o[14]=0,Xfe(o,e)}function g$(t,e,n,r,i){var o=Tn(t,2),s=o[0],a=o[1],c=0,h=0;if(i&&s&&a){var d=bu([0,0],e),v=bu([0,0],r),w=Dd(e),_=Math.cos(d-v)*w;if(!r[0])h=_,c=h*n;else if(!r[1])c=_,h=c/n;else{var E=r[0]*s,M=r[1]*a,D=Math.atan2(E+e[0],M+e[1]),A=Math.atan2(E,M);D<0&&(D+=Math.PI*2),A<0&&(A+=Math.PI*2);var F=0;Gr(D-A)<Math.PI/2||Gr(D-A)>Math.PI/2*3||(A+=Math.PI),F=D-A,F>Math.PI*2?F-=Math.PI*2:F>Math.PI?F=2*Math.PI-F:F<-Math.PI&&(F=-2*Math.PI-F);var O=Dd([E+e[0],M+e[1]])*Math.cos(F);c=O*Math.sin(A)-E,h=O*Math.cos(A)-M,r[0]<0&&(c*=-1),r[1]<0&&(h*=-1)}}else c=r[0]*e[0],h=r[1]*e[1];return[c,h]}function m$(t,e,n,r){var i,o=n.ratio,s=n.startOffsetWidth,a=n.startOffsetHeight,c=0,h=0,d=r.distX,v=r.distY,w=r.pinchScale,_=r.parentDistance,E=r.parentDist,M=r.parentScale,D=n.fixedDirection,A=[0,1].map(function(W){return Gr(t[W]-D[W])}),F=[0,1].map(function(W){var X=A[W];return X!==0&&(X=2/X),X});if(E)c=E[0],h=E[1],e&&(c?h||(h=c/o):c=h*o);else if(vw(w))c=(w-1)*s,h=(w-1)*a;else if(M)c=(M[0]-1)*s,h=(M[1]-1)*a;else if(_){var O=s*A[0],N=a*A[1],H=Dd([O,N]);c=_/H*O*F[0],h=_/H*N*F[1]}else{var G=vg({datas:n,distX:d,distY:v});G=F.map(function(W,X){return G[X]*W}),i=Tn(g$([s,a],G,o,t,e),2),c=i[0],h=i[1]}return{distWidth:c,distHeight:h}}function qD(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=Tn(t.split(" "),2),r=n[0],i=n[1],o=qD(r||""),s=qD(i||""),a=mn(mn({},o),s),c={x:"50%",y:"50%"};return a.x&&(c.x=a.x),a.y&&(c.y=a.y),a.value&&(a.x&&!a.y&&(c.y=a.value),!a.x&&a.y&&(c.x=a.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function e4(t,e,n){var r=qD(t,!0),i=r.x,o=r.y;return[Ls(i,e)||0,Ls(o,n)||0]}function xge(t,e,n){var r=t.map(function(o){return ta(o,e)}),i=r.map(function(o){return Kw(o,n)});return{prev:r,next:i,result:i.map(function(o){return ko(o,e)})}}function v$(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],o=bc(n),s=bc(i);return o&&s?v$(n,i):!o&&!s?n===i:!1})}function N1(t,e,n,r,i){var o=t._store,s=o[e];if(!(e in o))if(i!=null)o[e]=i,s=i;else return o[e]=n,n;return s===n||r(s)===r(n)?s:(o[e]=n,n)}function jh(t){return t>=0?1:-1}function Gr(t){return Math.abs(t)}function R5(t,e){return Ofe(t).map(function(n){return e(n)})}function y$(t){return vw(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var bge=eS("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,o=e.originalDatas,s=t.props,a=s.pinchable,c=s.ables;if(!a)return!1;var h="onPinch".concat(r?"Group":"","Start"),d="drag".concat(r?"Group":"","ControlStart"),v=(a===!0?t.controlAbles:c.filter(function(M){return a.indexOf(M.name)>-1})).filter(function(M){return M.canPinch&&M[d]}),w=ja(t,e,{});r&&(w.targets=r);var _=Ri(t,h,w);n.isPinch=_!==!1,n.ables=v;var E=n.isPinch;return E?(v.forEach(function(M){if(o[M.name]=o[M.name]||{},!!M[d]){var D=mn(mn({},e),{datas:o[M.name],parentRotate:i,isPinch:!0});M[d](t,D)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},E):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,o=e.originalDatas,s=e.inputEvent,a=e.targets,c=e.angle;if(n.isPinch){var h=i*(1-1/r),d=ja(t,e,{});a&&(d.targets=a);var v="onPinch".concat(a?"Group":"");Ri(t,v,d);var w=n.ables,_="drag".concat(a?"Group":"","Control");return w.forEach(function(E){E[_]&&E[_](t,mn(mn({},e),{datas:o[E.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:h,parentRotate:c,isPinch:!0}))}),d}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.targets,s=e.originalDatas;if(n.isPinch){var a="onPinch".concat(o?"Group":"","End"),c=Kf(t,e,{isDrag:r});o&&(c.targets=o),Ri(t,a,c);var h=n.ables,d="drag".concat(o?"Group":"","ControlEnd");return h.forEach(function(v){v[d]&&v[d](t,mn(mn({},e),{isDrag:r,datas:s[v.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,mn(mn({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,mn(mn({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,mn(mn({},e),{targets:t.props.targets}))}}),zB=Jk("scalable"),wge={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:Bq("scalable"),dragControlCondition:zB,viewClassName:Kk("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.parentDirection,s=c$(o,r,i,n),a=t.state,c=a.width,h=a.height,d=a.targetTransform,v=a.target,w=a.pos1,_=a.pos2,E=a.pos4;if(!s||!v)return!1;r||Sy(t,e),n.datas={},n.transform=d,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=h,n.startValue=[1,1];var M=!s[0]&&!s[1]||s[0]||!s[1];zM(t,e,"scale"),n.isWidth=M;function D(G){n.ratio=G&&isFinite(G)?G:0}n.startPositions=Ld(t.state);function A(G){var W=Zq(n.startPositions,G);n.fixedDirection=W.fixedDirection,n.fixedPosition=W.fixedPosition,n.fixedOffset=W.fixedOffset}n.setFixedDirection=A,D(hm(w,_)/hm(_,E)),A([-s[0],-s[1]]);var F=function(G){n.minScaleSize=G},O=function(G){n.maxScaleSize=G};F([-1/0,-1/0]),O([1/0,1/0]);var N=ja(t,e,mn(mn({direction:s,set:function(G){n.startValue=G},setRatio:D,setFixedDirection:A,setMinScaleSize:F,setMaxScaleSize:O},BM(t,e)),{dragStart:Uh.dragStart(t,new lx().dragStart([0,0],e))})),H=Ri(t,"onScaleStart",N);return n.startFixedDirection=n.fixedDirection,H!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?N:!1},dragControl:function(t,e){OM(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,o=e.isPinch,s=e.dragClient,a=e.isRequest,c=e.useSnap,h=e.resolveMatrix,d=n.prevDist,v=n.direction,w=n.startOffsetWidth,_=n.startOffsetHeight,E=n.isScale,M=n.startValue,D=n.isWidth,A=n.ratio;if(!E)return!1;var F=t.props,O=F.throttleScale,N=F.parentMoveable,H=v;!v[0]&&!v[1]&&(H=[1,1]);var G=A&&(r??F.keepRatio)||!1,W=t.state,X=[M[0],M[1]];function K(){var st=m$(H,G,n,e),Ce=st.distWidth,It=st.distHeight,Ve=w?(w+Ce)/w:1,yt=_?(_+It)/_:1;M[0]||(X[0]=Ce/w),M[1]||(X[1]=It/_);var Ze=(H[0]||G?Ve:1)*X[0],wt=(H[1]||G?yt:1)*X[1];return Ze===0&&(Ze=jh(d[0])*xE),wt===0&&(wt=jh(d[1])*xE),[Ze,wt]}var k=K();if(!o&&t.props.groupable){var $=W.snapRenderInfo||{},Q=$.direction;bc(Q)&&(Q[0]||Q[1])&&(W.snapRenderInfo={direction:v,request:e.isRequest})}Ri(t,"onBeforeScale",ja(t,e,{scale:k,setFixedDirection:function(st){return n.setFixedDirection(st),k=K(),k},startFixedDirection:n.startFixedDirection,setScale:function(st){k=st}},!0));var ie=[k[0]/X[0],k[1]/X[1]],ae=s,ce=[0,0],se=jh(ie[0]*ie[1]),Se=!s&&!i&&o;if(Se||h?ae=jk(t,n.targetAllTransform,[0,0],[0,0],n):s||(ae=n.fixedPosition),o||(ce=Qpe(t,ie,v,!c&&a,n)),G){H[0]&&H[1]&&ce[0]&&ce[1]&&(Math.abs(ce[0]*w)>Math.abs(ce[1]*_)?ce[1]=0:ce[0]=0);var ye=!ce[0]&&!ce[1];if(ye&&(D?ie[0]=Pa(ie[0]*X[0],O)/X[0]:ie[1]=Pa(ie[1]*X[1],O)/X[1]),H[0]&&!H[1]||ce[0]&&!ce[1]||ye&&D){ie[0]+=ce[0];var Te=w*ie[0]*X[0]/A;ie[1]=jh(se*ie[0])*Gr(Te/_/X[1])}else if(!H[0]&&H[1]||!ce[0]&&ce[1]||ye&&!D){ie[1]+=ce[1];var pe=_*ie[1]*X[1]*A;ie[0]=jh(se*ie[1])*Gr(pe/w/X[0])}}else ie[0]+=ce[0],ie[1]+=ce[1],ce[0]||(ie[0]=Pa(ie[0]*X[0],O)/X[0]),ce[1]||(ie[1]=Pa(ie[1]*X[1],O)/X[1]);ie[0]===0&&(ie[0]=jh(d[0])*xE),ie[1]===0&&(ie[1]=jh(d[1])*xE),k=rge(ie,[X[0],X[1]]);var Ie=[w,_],me=[w*k[0],_*k[1]];me=cq(me,n.minScaleSize,n.maxScaleSize,G?A:!1),k=R5(2,function(st){return Ie[st]?me[st]/Ie[st]:me[st]}),ie=R5(2,function(st){return k[st]/X[st]});var xe=R5(2,function(st){return d[st]?ie[st]/d[st]:ie[st]}),ve="scale(".concat(ie.join(", "),")"),Ee="scale(".concat(k.join(", "),")"),De=FM(n,Ee,ve),We=!M[0]||!M[1],Ae=Qde(t,We?Ee:ve,n.fixedDirection,ae,n.fixedOffset,n,We),ut=Se?Ae:ta(Ae,n.prevInverseDist||[0,0]);if(n.prevDist=ie,n.prevInverseDist=Ae,k[0]===d[0]&&k[1]===d[1]&&ut.every(function(st){return!st})&&!N&&!Se)return!1;var pt=ja(t,e,mn({offsetWidth:w,offsetHeight:_,direction:v,scale:k,dist:ie,delta:xe,isPinch:!!o},Dq(t,De,ut,o,e)));return Ri(t,"onScale",pt),pt},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=Kf(t,e,{});return Ri(t,"onScaleEnd",r),r},dragGroupControlCondition:zB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=vp(t,"resizable",e);n.moveableScale=t.scale;var o=fm(t,this,"dragControlStart",e,function(h,d){return vC(t,h,n,d)}),s=function(h){r.setFixedDirection(h),o.forEach(function(d,v){d.setFixedDirection(h),vC(t,d.moveable,n,i[v])})};n.setFixedDirection=s;var a=mn(mn({},r),{targets:t.props.targets,events:o,setFixedDirection:s}),c=Ri(t,"onScaleGroupStart",a);return n.isScale=c!==!1,n.isScale?a:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){HM(t,"onBeforeScale",function(d){Ri(t,"onBeforeScaleGroup",ja(t,e,mn(mn({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,o=n.moveableScale;t.scale=[i[0]*o[0],i[1]*o[1]];var s=t.props.keepRatio,a=n.fixedPosition,c=fm(t,this,"dragControl",e,function(d,v){var w=Tn(bh(Jw(t.rotation/180*Math.PI,3),[v.datas.originalX*i[0],v.datas.originalY*i[1],1],3),2),_=w[0],E=w[1];return mn(mn({},v),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:ko(a,[_,E])})}),h=mn({targets:t.props.targets,events:c},r);return Ri(t,"onScaleGroup",h),h}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=fm(t,this,"dragControlEnd",e),o=Kf(t,e,{targets:t.props.targets,events:i});return Ri(t,"onScaleGroupEnd",o),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Qm(t,e){return t.map(function(n,r){return dC(n,e[r],1,2)})}function UB(t,e,n){var r=bu(t,e),i=bu(t,n),o=i-r;return o>=0?o:o+2*Math.PI}function Sge(t,e){var n=UB(t[0],t[1],t[2]),r=UB(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var Ege={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Kk("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable,s=n.zoom;if(r||i||!o)return[];var a=t.state,c=a.pos1,h=a.pos2,d=a.pos3,v=a.pos4,w=Qm(c,h),_=Qm(h,c),E=Qm(c,d),M=Qm(d,c),D=Qm(d,v),A=Qm(v,d),F=Qm(h,v),O=Qm(v,h);return Kr([e.createElement("div",{className:Ki("line"),key:"middeLine1",style:y2(w,D,s)}),e.createElement("div",{className:Ki("line"),key:"middeLine2",style:y2(_,A,s)}),e.createElement("div",{className:Ki("line"),key:"middeLine3",style:y2(E,F,s)}),e.createElement("div",{className:Ki("line"),key:"middeLine4",style:y2(M,O,s)})],Tn(zq(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return nc(n,Ki("direction"))&&nc(n,Ki("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,o=r.target,s=h$(o,n);if(!s||!i)return!1;var a=t.state,c=a.transformOrigin,h=a.is3d,d=a.targetTransform,v=a.targetMatrix,w=a.width,_=a.height,E=a.left,M=a.top;n.datas={},n.targetTransform=d,n.warpTargetMatrix=h?v:xp(v,3,4),n.targetInverseMatrix=pq(fg(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=E,n.top=M,n.poses=[[0,0],[w,0],[0,_],[w,_]].map(function(F){return ta(F,c)}),n.nextPoses=n.poses.map(function(F){var O=Tn(F,2),N=O[0],H=O[1];return bh(n.warpTargetMatrix,[N,H,0,1],4)}),n.startValue=vl(4),n.prevMatrix=vl(4),n.absolutePoses=Ld(a),n.posIndexes=Iq(s),Sy(t,e),zM(t,e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:s};var D=ja(t,e,mn({set:function(F){n.startValue=F}},BM(t,e))),A=Ri(t,"onWarpStart",D);return A!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,o=e.distY,s=n.targetInverseMatrix,a=n.prevMatrix,c=n.isWarp,h=n.startValue,d=n.poses,v=n.posIndexes,w=n.absolutePoses;if(!c)return!1;if(OM(t,e,"matrix3d"),Fx(t,"warpable")){var _=v.map(function(K){return w[K]});_.length>1&&_.push([(_[0][0]+_[1][0])/2,(_[0][1]+_[1][1])/2]);var E=GM(t,r,{horizontal:_.map(function(K){return K[1]+o}),vertical:_.map(function(K){return K[0]+i})}),M=E.horizontal,D=E.vertical;o-=M.offset,i-=D.offset}var A=vg({datas:n,distX:i,distY:o},!0),F=n.nextPoses.slice();if(v.forEach(function(K){F[K]=ko(F[K],A)}),!Gde.every(function(K){return Sge(K.map(function(k){return d[k]}),K.map(function(k){return F[k]}))}))return!1;var O=Lk(d[0],d[2],d[1],d[3],F[0],F[2],F[1],F[3]);if(!O.length)return!1;var N=ks(s,O,4),H=Rq(n,N,!0),G=ks(fg(a,4),H,4);n.prevMatrix=H;var W=ks(h,H,4),X=FM(n,"matrix3d(".concat(W.join(", "),")"),"matrix3d(".concat(H.join(", "),")"));return Uk(e,X),Ri(t,"onWarp",ja(t,e,mn({delta:G,matrix:W,dist:H,multiply:ks,transform:X},Hh({transform:X},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Ri(t,"onWarpEnd",Kf(t,e,{})),r):!1}},Tge=Ki("area-pieces"),CE=Ki("area-piece"),_$=Ki("avoid"),Cge=Ki("view-dragging");function P5(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;fq(e,_$),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function jB(t){return t.createElement("div",{key:"area_pieces",className:Tge},t.createElement("div",{className:CE}),t.createElement("div",{className:CE}),t.createElement("div",{className:CE}),t.createElement("div",{className:CE}))}var x$={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,s=n.passDragArea,a=t.getState(),c=a.width,h=a.height,d=a.renderPoses,v=s?Ki("area","pass"):Ki("area");if(o)return[e.createElement("div",{key:"area",ref:W0(t,"areaElement"),className:v}),jB(e)];if(!r||!i)return[];var w=Lk([0,0],[c,0],[0,h],[c,h],d[0],d[1],d[2],d[3]),_=w.length?VM(w,!0):"none";return[e.createElement("div",{key:"area",ref:W0(t,"areaElement"),className:v,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(h,"px"),transformOrigin:"0 0",transform:_}}),jB(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=e.inputEvent;if(!o)return!1;n.isDragArea=!1;var s=t.areaElement,a=t.state,c=a.moveableClientRect,h=a.renderPoses,d=a.rootMatrix,v=a.is3d,w=c.left,_=c.top,E=Md(h),M=E.left,D=E.top,A=E.width,F=E.height,O=v?4:3,N=Tn(hx(d,[r-w,i-_],O),2),H=N[0],G=N[1];H-=M,G-=D;var W=[{left:M,top:D,width:A,height:G-10},{left:M,top:D,width:H-10,height:F},{left:M,top:D+G+10,width:A,height:F-G-10},{left:M+H+10,top:D,width:A-H-10,height:F}],X=[].slice.call(s.nextElementSibling.children);W.forEach(function(K,k){X[k].style.cssText="left: ".concat(K.left,"px;top: ").concat(K.top,"px; width: ").concat(K.width,"px; height: ").concat(K.height,"px;")}),hq(s,_$),a.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,P5(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||P5(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){P5(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&uq(function(){e.disableNativeEvent=!1})}},Mge=eS("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,o=n.groupable,s=t.getState(),a=s.beforeOrigin,c=s.rotation,h=s.svg,d=s.allMatrix,v=s.is3d,w=s.left,_=s.top,E=s.offsetWidth,M=s.offsetHeight,D;if(!o&&h&&i){var A=Tn(e4(i,E,M),2),F=A[0],O=A[1],N=v?4:3,H=Gl(d,[F,O],N);D=bC(c,r,ta(H,[w,_]))}else D=bC(c,r,a);return[e.createElement("div",{className:Ki("control","origin"),style:D,key:"beforeOrigin"})]}});function Age(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Rge={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,o=n.scrollOptions,s=new sde,a=lg(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",h=e.targets;s.on("scroll",function(d){var v=d.container,w=d.direction,_=ja(t,e,{scrollContainer:v,direction:w}),E=h?"onScrollGroup":"onScroll";h&&(_.targets=h),Ri(t,E,_)}).on("move",function(d){var v=d.offsetX,w=d.offsetY,_=d.inputEvent;t[c].scrollBy(v,w,_.inputEvent,!1)}).on("scrollDrag",function(d){var v=d.next;v(t[c].getCurrentEvent())}),s.dragStart(e,mn({container:a},o))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,o=i===void 0?t.getContainer():i,s=r.scrollThreshold,a=s===void 0?0:s,c=r.scrollThrottleTime,h=c===void 0?0:c,d=r.getScrollPosition,v=d===void 0?Age:d,w=r.scrollOptions;return n.drag(e,mn({container:o,threshold:a,throttleTime:h,getScrollPosition:function(_){return v({scrollContainer:_.container,direction:_.direction})}},w)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,mn(mn({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,mn(mn({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,mn(mn({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,mn(mn({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,mn(mn({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,mn(mn({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,mn(mn({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},b$={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},Pge=eS("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=y$(n.padding||{}),i=r.left,o=r.top,s=r.right,a=r.bottom,c=t.getState(),h=c.renderPoses,d=c.pos1,v=c.pos2,w=c.pos3,_=c.pos4,E=[d,v,w,_],M=[];return i>0&&M.push([0,2]),o>0&&M.push([0,1]),s>0&&M.push([1,3]),a>0&&M.push([2,3]),M.map(function(D,A){var F=Tn(D,2),O=F[0],N=F[1],H=E[O],G=E[N],W=h[O],X=h[N],K=Lk([0,0],[100,0],[0,100],[100,100],H,G,W,X);if(K.length)return e.createElement("div",{key:"padding".concat(A),className:Ki("padding"),style:{transform:VM(K,!0)}})})}}),GB=["nw","ne","se","sw"];function ME(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var Ige=[1,2,5,6],Dge=[0,3,4,7],O0=[1,-1,-1,1],F0=[1,1,-1,-1];function t4(t,e,n,r,i,o,s,a){i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=n),a===void 0&&(a=r);var c=[],h=!1,d=t.filter(function(w){return!w.virtual}),v=d.map(function(w){var _=w.horizontal,E=w.vertical,M=w.pos;if(E&&!h&&(h=!0,c.push("/")),h){var D=Math.max(0,E===1?M[1]-o:a-M[1]);return c.push(cp(D,r,e)),D}else{var D=Math.max(0,_===1?M[0]-i:s-M[0]);return c.push(cp(D,n,e)),D}});return{radiusPoses:d,styles:c,raws:v}}function w$(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),o.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function S$(t,e,n,r,i,o,s){var a,c,h,d;o===void 0&&(o=[0,0]),s===void 0&&(s=!1);var v=t.indexOf("/"),w=(v>-1?t.slice(0,v):t).length,_=t.slice(0,w),E=t.slice(w+1),M=_.length,D=E.length,A=D>0,F=Tn(_,4),O=F[0],N=O===void 0?"0px":O,H=F[1],G=H===void 0?N:H,W=F[2],X=W===void 0?N:W,K=F[3],k=K===void 0?G:K,$=Tn(E,4),Q=$[0],ie=Q===void 0?N:Q,ae=$[1],ce=ae===void 0?A?ie:G:ae,se=$[2],Se=se===void 0?A?ie:X:se,ye=$[3],Te=ye===void 0?A?ce:k:ye,pe=[N,G,X,k].map(function(De){return Ls(De,e)}),Ie=[ie,ce,Se,Te].map(function(De){return Ls(De,n)}),me=pe.slice(),xe=Ie.slice();a=Tn(ME([me[0],me[1]],e),2),me[0]=a[0],me[1]=a[1],c=Tn(ME([me[3],me[2]],e),2),me[3]=c[0],me[2]=c[1],h=Tn(ME([xe[0],xe[3]],n),2),xe[0]=h[0],xe[3]=h[1],d=Tn(ME([xe[1],xe[2]],n),2),xe[1]=d[0],xe[2]=d[1];var ve=s?me:me.slice(0,Math.max(o[0],M)),Ee=s?xe:xe.slice(0,Math.max(o[1],D));return Kr(Kr([],Tn(ve.map(function(De,We){var Ae=GB[We];return{virtual:We>=M,horizontal:O0[We],vertical:0,pos:[r+De,i+(F0[We]===-1?n:0)],sub:!0,raw:pe[We],direction:Ae}})),!1),Tn(Ee.map(function(De,We){var Ae=GB[We];return{virtual:We>=D,horizontal:0,vertical:F0[We],pos:[r+(O0[We]===-1?e:0),i+De],sub:!0,raw:Ie[We],direction:Ae}})),!1)}function Lge(t,e,n,r,i){i===void 0&&(i=e.length);var o=w$(t.slice(r)),s=o.horizontalRange,a=o.verticalRange,c=n-r,h=0;if(c===0)h=i;else if(c>0&&c<s[1])h=s[1]-c;else if(c>=a[0])h=a[0]+a[1]-c;else return;t.splice(n,h),e.splice(n,h)}function Nge(t,e,n,r,i,o,s,a,c,h,d){h===void 0&&(h=0),d===void 0&&(d=0);var v=w$(t.slice(n)),w=v.horizontalRange,_=v.verticalRange;if(r>-1)for(var E=O0[r]===1?o-h:a-o,M=w[1];M<=r;++M){var D=F0[M]===1?d:c,A=0;if(r===M?A=o:M===0?A=h+E:O0[M]===-1&&(A=a-(e[n][0]-h)),t.splice(n+M,0,{horizontal:O0[M],vertical:0,pos:[A,D]}),e.splice(n+M,0,[A,D]),M===0)break}else if(i>-1){var F=F0[i]===1?s-d:c-s;if(w[1]===0&&_[1]===0){var O=[h+F,d];t.push({horizontal:O0[0],vertical:0,pos:O}),e.push(O)}for(var N=_[0],M=_[1];M<=i;++M){var A=O0[M]===1?h:a,D=0;if(i===M?D=s:M===0?D=d+F:F0[M]===1?D=e[n+N][1]:F0[M]===-1&&(D=c-(e[n+N][1]-d)),t.push({horizontal:0,vertical:F0[M],pos:[A,D]}),e.push([A,D]),M===0)break}}}function kge(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,o){return i.horizontal?e[o]:null}).filter(function(i){return i!=null}),r=t.map(function(i,o){return i.vertical?e[o]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var Oge=[[0,-1,"n"],[1,0,"e"]],Fge=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function n4(t,e,n){var r=t.props.clipRelative,i=t.state,o=i.width,s=i.height,a=e,c=a.type,h=a.poses,d=c==="rect",v=c==="circle";if(c==="polygon")return n.map(function(G){return"".concat(cp(G[0],o,r)," ").concat(cp(G[1],s,r))});if(d||c==="inset"){var w=n[1][1],_=n[3][0],E=n[7][0],M=n[5][1];if(d)return[w,_,M,E].map(function(G){return"".concat(G,"px")});var D=[w,o-_,s-M,E].map(function(G,W){return cp(G,W%2?o:s,r)});if(n.length>8){var A=Tn(ta(n[4],n[0]),2),F=A[0],O=A[1];D.push.apply(D,Kr(["round"],Tn(t4(h.slice(8).map(function(G,W){return mn(mn({},G),{pos:n[W]})}),r,F,O,E,w,_,M).styles),!1))}return D}else if(v||c==="ellipse"){var N=n[0],H=cp(Gr(n[1][1]-N[1]),v?Math.sqrt((o*o+s*s)/2):s,r),D=v?[H]:[cp(Gr(n[2][0]-N[0]),o,r),H];return D.push("at",cp(N[0],o,r),cp(N[1],s,r)),D}}function SC(t,e,n,r){var i=[r,(r+e)/2,e],o=[t,(t+n)/2,n];return Fge.map(function(s){var a=Tn(s,3),c=a[0],h=a[1],d=a[2],v=i[c+1],w=o[h+1];return{vertical:Gr(h),horizontal:Gr(c),direction:d,pos:[v,w]}})}function E$(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Gr(e[1]-e[0]),Gr(n[1]-n[0])]}function VB(t,e,n,r,i){var o,s,a,c,h,d,v,w,_;if(t){var E=i;if(!E){var M=_f(t),D=M("clipPath");E=D!=="none"?D:M("clip")}if(!((!E||E==="none"||E==="auto")&&(E=r,!E))){var A=lq(E),F=A.prefix,O=F===void 0?E:F,N=A.value,H=N===void 0?"":N,G=O==="circle",W=" ";if(O==="polygon"){var X=U0(H||"0% 0%, 100% 0%, 100% 100%, 0% 100%");W=",";var K=X.map(function(Ye){var Re=Tn(Ye.split(" "),2),Pt=Re[0],Dt=Re[1];return{vertical:1,horizontal:1,pos:[Ls(Pt,e),Ls(Dt,n)]}}),k=ay(K.map(function(Ye){return Ye.pos}));return{type:O,clipText:E,poses:K,splitter:W,left:k.minX,right:k.maxX,top:k.minY,bottom:k.maxY}}else if(G||O==="ellipse"){var $="",Q="",ie=0,ae=0,X=Pv(H);if(G){var ce="";o=Tn(X,4),s=o[0],ce=s===void 0?"50%":s,a=o[2],$=a===void 0?"50%":a,c=o[3],Q=c===void 0?"50%":c,ie=Ls(ce,Math.sqrt((e*e+n*n)/2)),ae=ie}else{var se="",Se="";h=Tn(X,5),d=h[0],se=d===void 0?"50%":d,v=h[1],Se=v===void 0?"50%":v,w=h[3],$=w===void 0?"50%":w,_=h[4],Q=_===void 0?"50%":_,ie=Ls(se,e),ae=Ls(Se,n)}var ye=[Ls($,e),Ls(Q,n)],K=Kr([{vertical:1,horizontal:1,pos:ye,direction:"nesw"}],Tn(Oge.slice(0,G?1:2).map(function(Pt){return{vertical:Gr(Pt[1]),horizontal:Pt[0],direction:Pt[2],sub:!0,pos:[ye[0]+Pt[0]*ie,ye[1]+Pt[1]*ae]}})),!1);return{type:O,clipText:E,radiusX:ie,radiusY:ae,left:ye[0]-ie,top:ye[1]-ae,right:ye[0]+ie,bottom:ye[1]+ae,poses:K,splitter:W}}else if(O==="inset"){var X=Pv(H||"0 0 0 0"),Te=X.indexOf("round"),pe=(Te>-1?X.slice(0,Te):X).length,Ie=X.slice(pe+1),me=Tn(X.slice(0,pe),4),xe=me[0],ve=me[1],Ee=ve===void 0?xe:ve,De=me[2],We=De===void 0?xe:De,Ae=me[3],ut=Ae===void 0?Ee:Ae,pt=Tn([xe,We].map(function(Pt){return Ls(Pt,n)}),2),st=pt[0],Ce=pt[1],It=Tn([ut,Ee].map(function(Pt){return Ls(Pt,e)}),2),Ve=It[0],yt=It[1],Ze=e-yt,wt=n-Ce,Ut=S$(Ie,Ze-Ve,wt-st,Ve,st),K=Kr(Kr([],Tn(SC(st,Ze,wt,Ve)),!1),Tn(Ut),!1);return{type:"inset",clipText:E,poses:K,top:st,left:Ve,right:Ze,bottom:wt,radius:Ie,splitter:W}}else if(O==="rect"){var X=U0(H||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));W=",";var ht=Tn(X.map(function(Bt){var gn=Zw(Bt).value;return gn}),4),qt=ht[0],yt=ht[1],Ce=ht[2],Ve=ht[3],K=SC(qt,yt,Ce,Ve);return{type:"rect",clipText:E,poses:K,top:qt,right:yt,bottom:Ce,left:Ve,values:X,splitter:W}}}}}function Bge(t,e,n,r,i){var o=t[e],s=o.direction,a=o.sub,c=t.map(function(){return[0,0]}),h=s?s.split(""):[];if(r&&e<8){var d=h.filter(function(ie){return ie==="w"||ie==="e"}),v=h.filter(function(ie){return ie==="n"||ie==="s"}),w=d[0],_=v[0];c[e]=n;var E=Tn(E$(t),2),M=E[0],D=E[1],A=M&&D?M/D:0;if(A&&i){var F=(e+4)%8,O=t[F].pos,N=[0,0];s.indexOf("w")>-1?N[0]=-1:s.indexOf("e")>-1&&(N[0]=1),s.indexOf("n")>-1?N[1]=-1:s.indexOf("s")>-1&&(N[1]=1);var H=g$([M,D],n,A,N,!0),G=M+H[0],W=D+H[1],X=O[1],K=O[1],k=O[0],$=O[0];N[0]===-1?k=$-G:N[0]===1?$=k+G:(k=k-G/2,$=$+G/2),N[1]===-1?X=K-W:(N[1]===1||(X=K-W/2),K=X+W);var Q=SC(X,$,K,k);t.forEach(function(ie,ae){c[ae][0]=Q[ae].pos[0]-ie.pos[0],c[ae][1]=Q[ae].pos[1]-ie.pos[1]})}else t.forEach(function(ie,ae){var ce=ie.direction;ce&&(ce.indexOf(w)>-1&&(c[ae][0]=n[0]),ce.indexOf(_)>-1&&(c[ae][1]=n[1]))}),w&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),_&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!a?h.forEach(function(ie){var ae=ie==="n"||ie==="s";t.forEach(function(ce,se){var Se=ce.direction,ye=ce.horizontal,Te=ce.vertical;!Se||Se.indexOf(ie)===-1||(c[se]=[ae||!ye?0:n[0],!ae||!Te?0:n[1]])})}):c[e]=n;return c}function zge(t,e){var n=Tn(Aq(t,e),2),r=n[0],i=n[1],o=e.datas,s=o.clipPath,a=o.clipIndex,c=s,h=c.type,d=c.poses,v=c.splitter,w=d.map(function(F){return F.pos});if(h==="polygon")w.splice(a,0,[r,i]);else if(h==="inset"){var _=Ige.indexOf(a),E=Dge.indexOf(a),M=d.length;if(Nge(d,w,8,_,E,r,i,w[4][0],w[4][1],w[0][0],w[0][1]),M===d.length)return}else return;var D=n4(t,s,w),A="".concat(h,"(").concat(D.join(v),")");Ri(t,"onClip",ja(t,e,mn({clipEventType:"added",clipType:h,poses:w,clipStyles:D,clipStyle:A,distX:0,distY:0},Hh({clipPath:A},e))))}function Uge(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,o=r,s=o.type,a=o.poses,c=o.splitter,h=a.map(function(_){return _.pos}),d=h.length;if(s==="polygon")a.splice(i,1),h.splice(i,1);else if(s==="inset"){if(i<8||(Lge(a,h,i,8,d),d===a.length))return}else return;var v=n4(t,r,h),w="".concat(s,"(").concat(v.join(c),")");Ri(t,"onClip",ja(t,e,mn({clipEventType:"removed",clipType:s,poses:h,clipStyles:v,clipStyle:w,distX:0,distY:0},Hh({clipPath:w},e))))}var jge={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,o=n.clipArea,s=n.zoom,a=n.groupable,c=t.getState(),h=c.target,d=c.width,v=c.height,w=c.allMatrix,_=c.is3d,E=c.left,M=c.top,D=c.pos1,A=c.pos2,F=c.pos3,O=c.pos4,N=c.clipPathState,H=c.snapBoundInfos,G=c.rotation;if(!h||a)return[];var W=VB(h,d,v,i||"inset",N||r);if(!W)return[];var X=_?4:3,K=W.type,k=W.poses,$=k.map(function(yt){var Ze=Gl(w,yt.pos,X);return[Ze[0]-E,Ze[1]-M]}),Q=[],ie=[],ae=K==="rect",ce=K==="inset",se=K==="polygon";if(ae||ce||se){var Se=ce?$.slice(0,8):$;ie=Se.map(function(yt,Ze){var wt=Ze===0?Se[Se.length-1]:Se[Ze-1],Ut=bu(wt,yt),ht=o$(wt,yt);return e.createElement("div",{key:"clipLine".concat(Ze),className:Ki("line","clip-line","snap-control"),"data-clip-index":Ze,style:{width:"".concat(ht,"px"),transform:"translate(".concat(wt[0],"px, ").concat(wt[1],"px) rotate(").concat(Ut,"rad) scaleY(").concat(s,")")}})})}if(Q=$.map(function(yt,Ze){return e.createElement("div",{key:"clipControl".concat(Ze),className:Ki("control","clip-control","snap-control"),"data-clip-index":Ze,style:{transform:"translate(".concat(yt[0],"px, ").concat(yt[1],"px) rotate(").concat(G,"rad) scale(").concat(s,")")}})}),ce&&Q.push.apply(Q,Kr([],Tn($.slice(8).map(function(yt,Ze){return e.createElement("div",{key:"clipRadiusControl".concat(Ze),className:Ki("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Ze,style:{transform:"translate(".concat(yt[0],"px, ").concat(yt[1],"px) rotate(").concat(G,"rad) scale(").concat(s,")")}})})),!1)),K==="circle"||K==="ellipse"){var ye=W.left,Te=W.top,pe=W.radiusX,Ie=W.radiusY,me=Tn(ta(Gl(w,[ye,Te],X),Gl(w,[0,0],X)),2),xe=me[0],ve=me[1],Ee="none";if(!o){for(var De=Math.max(10,pe/5,Ie/5),We=[],Ae=0;Ae<=De;++Ae){var ut=Math.PI*2/De*Ae;We.push([pe+(pe-s)*Math.cos(ut),Ie+(Ie-s)*Math.sin(ut)])}We.push([pe,-2]),We.push([-2,-2]),We.push([-2,Ie*2+2]),We.push([pe*2+2,Ie*2+2]),We.push([pe*2+2,-2]),We.push([pe,-2]),Ee="polygon(".concat(We.map(function(yt){return"".concat(yt[0],"px ").concat(yt[1],"px")}).join(", "),")")}Q.push(e.createElement("div",{key:"clipEllipse",className:Ki("clip-ellipse","snap-control"),style:{width:"".concat(pe*2,"px"),height:"".concat(Ie*2,"px"),clipPath:Ee,transform:"translate(".concat(-E+xe,"px, ").concat(-M+ve,"px) ").concat(VM(w))}}))}if(o){var pt=Md(Kr([D,A,F,O],Tn($),!1)),st=pt.width,Ce=pt.height,It=pt.left,Ve=pt.top;if(se||ae||ce){var We=ce?$.slice(0,8):$;Q.push(e.createElement("div",{key:"clipArea",className:Ki("clip-area","snap-control"),style:{width:"".concat(st,"px"),height:"".concat(Ce,"px"),transform:"translate(".concat(It,"px, ").concat(Ve,"px)"),clipPath:"polygon(".concat(We.map(function(Ze){return"".concat(Ze[0]-It,"px ").concat(Ze[1]-Ve,"px")}).join(", "),")")}}))}}return H&&["vertical","horizontal"].forEach(function(yt){var Ze=H[yt],wt=yt==="horizontal";Ze.isSnap&&ie.push.apply(ie,Kr([],Tn(Ze.snap.posInfos.map(function(Ut,ht){var qt=Ut.pos,Ye=ta(Gl(w,wt?[0,qt]:[qt,0],X),[E,M]),Re=ta(Gl(w,wt?[d,qt]:[qt,v],X),[E,M]);return xw(e,"",Ye,Re,s,"clip".concat(yt,"snap").concat(ht),"guideline")})),!1)),Ze.isBound&&ie.push.apply(ie,Kr([],Tn(Ze.bounds.map(function(Ut,ht){var qt=Ut.pos,Ye=ta(Gl(w,wt?[0,qt]:[qt,0],X),[E,M]),Re=ta(Gl(w,wt?[d,qt]:[qt,v],X),[E,M]);return xw(e,"",Ye,Re,s,"clip".concat(yt,"bounds").concat(ht),"guideline","bounds","bold")})),!1))}),Kr(Kr([],Tn(Q),!1),Tn(ie),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,mn(mn({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,s=n.target,a=n.width,c=n.height,h=e.inputEvent?e.inputEvent.target:null,d=h&&h.getAttribute("class")||"",v=e.datas,w=VB(s,a,c,i||"inset",o);if(!w)return!1;var _=w.clipText,E=w.type,M=w.poses,D=Ri(t,"onClipStart",ja(t,e,{clipType:E,clipStyle:_,poses:M.map(function(A){return A.pos})}));return D===!1?(v.isClipStart=!1,!1):(v.isControl=d&&d.indexOf("clip-control")>-1,v.isLine=d.indexOf("clip-line")>-1,v.isArea=d.indexOf("clip-area")>-1||d.indexOf("clip-ellipse")>-1,v.clipIndex=h?parseInt(h.getAttribute("data-clip-index"),10):-1,v.clipPath=w,v.isClipStart=!0,n.clipPathState=_,Sy(t,e),!0)},dragControl:function(t,e){var n,r,i,o=e.datas,s=e.originalDatas,a=e.isDragTarget;if(!o.isClipStart)return!1;var c=o,h=c.isControl,d=c.isLine,v=c.isArea,w=c.clipIndex,_=c.clipPath;if(!_)return!1;var E=oy(t.props,"clippable"),M=E.keepRatio,D=0,A=0,F=s.draggable,O=vg(e);a&&F?(n=Tn(F.prevBeforeDist,2),D=n[0],A=n[1]):(r=Tn(O,2),D=r[0],A=r[1]);var N=[D,A],H=t.state,G=H.width,W=H.height,X=!v&&!h&&!d,K=_.type,k=_.poses,$=_.splitter,Q=k.map(function(mt){return mt.pos});X&&(D=-D,A=-A);var ie=!h||k[w].direction==="nesw",ae=K==="inset"||K==="rect",ce=k.map(function(){return[0,0]});if(h&&!ie){var se=k[w],Se=se.horizontal,ye=se.vertical,Te=[D*Gr(Se),A*Gr(ye)];ce=Bge(k,w,Te,ae,M)}else ie&&(ce=Q.map(function(){return[D,A]}));var pe=Q.map(function(mt,it){return ko(mt,ce[it])}),Ie=Kr([],Tn(pe),!1);H.snapBoundInfos=null;var me=_.type==="circle",xe=_.type==="ellipse";if(me||xe){var ve=Md(pe),Ee=Gr(ve.bottom-ve.top),De=Gr(xe?ve.right-ve.left:Ee),We=pe[0][1]+Ee,Ae=pe[0][0]-De,ut=pe[0][0]+De;me&&(Ie.push([ut,ve.bottom]),ce.push([1,0])),Ie.push([ve.left,We]),ce.push([0,1]),Ie.push([Ae,ve.bottom]),ce.push([1,0])}var pt=e$((E.clipHorizontalGuidelines||[]).map(function(mt){return Ls("".concat(mt),W)}),(E.clipVerticalGuidelines||[]).map(function(mt){return Ls("".concat(mt),G)}),G,W),st=[],Ce=[];if(me||xe)st=[Ie[4][0],Ie[2][0]],Ce=[Ie[1][1],Ie[3][1]];else if(ae){var It=[Ie[0],Ie[2],Ie[4],Ie[6]],Ve=[ce[0],ce[2],ce[4],ce[6]];st=It.filter(function(mt,it){return Ve[it][0]}).map(function(mt){return mt[0]}),Ce=It.filter(function(mt,it){return Ve[it][1]}).map(function(mt){return mt[1]})}else st=Ie.filter(function(mt,it){return ce[it][0]}).map(function(mt){return mt[0]}),Ce=Ie.filter(function(mt,it){return ce[it][1]}).map(function(mt){return mt[1]});var yt=[0,0],Ze=MB(pt,E.clipTargetBounds&&{left:0,top:0,right:G,bottom:W},st,Ce,5,5),wt=Ze.horizontal,Ut=Ze.vertical,ht=wt.offset,qt=Ut.offset;if(wt.isBound&&(yt[1]+=ht),Ut.isBound&&(yt[0]+=qt),(xe||me)&&ce[0][0]===0&&ce[0][1]===0){var ve=Md(pe),Ye=ve.bottom-ve.top,Re=xe?ve.right-ve.left:Ye,Pt=Ut.isBound?Gr(qt):Ut.snapIndex===0?-qt:qt,Dt=wt.isBound?Gr(ht):wt.snapIndex===0?-ht:ht;Re-=Pt,Ye-=Dt,me&&(Ye=$q(Ut,wt)>0?Ye:Re,Re=Ye);var At=Ie[0];Ie[1][1]=At[1]-Ye,Ie[2][0]=At[0]+Re,Ie[3][1]=At[1]+Ye,Ie[4][0]=At[0]-Re}else if(ae&&M&&h){var Bt=Tn(E$(k),2),gn=Bt[0],Zt=Bt[1],cn=gn&&Zt?gn/Zt:0,$t=k[w],Et=$t.direction||"",qn=Ie[1][1],We=Ie[5][1],Ae=Ie[7][0],ut=Ie[3][0];Gr(ht)<=Gr(qt)?ht=jh(ht)*Gr(qt)/cn:qt=jh(qt)*Gr(ht)*cn,Et.indexOf("w")>-1?Ae-=qt:Et.indexOf("e")>-1?ut-=qt:(Ae+=qt/2,ut-=qt/2),Et.indexOf("n")>-1?qn-=ht:Et.indexOf("s")>-1?We-=ht:(qn+=ht/2,We-=ht/2);var Dn=SC(qn,ut,We,Ae);Ie.forEach(function(Tt,kt){var Jt;Jt=Tn(Dn[kt].pos,2),Tt[0]=Jt[0],Tt[1]=Jt[1]})}else Ie.forEach(function(mt,it){var xt=ce[it];xt[0]&&(mt[0]-=qt),xt[1]&&(mt[1]-=ht)});var sr=n4(t,_,pe),rt="".concat(K,"(").concat(sr.join($),")");if(H.clipPathState=rt,me||xe)st=[Ie[4][0],Ie[2][0]],Ce=[Ie[1][1],Ie[3][1]];else if(ae){var It=[Ie[0],Ie[2],Ie[4],Ie[6]];st=It.map(function(it){return it[0]}),Ce=It.map(function(it){return it[1]})}else st=Ie.map(function(mt){return mt[0]}),Ce=Ie.map(function(mt){return mt[1]});if(H.snapBoundInfos=MB(pt,E.clipTargetBounds&&{left:0,top:0,right:G,bottom:W},st,Ce,1,1),F){var ze=H.is3d,Xe=H.allMatrix,Fe=ze?4:3,He=yt;a&&(He=[N[0]+yt[0]-O[0],N[1]+yt[1]-O[1]]),F.deltaOffset=ks(Xe,[He[0],He[1],0,0],Fe)}return Ri(t,"onClip",ja(t,e,mn({clipEventType:"changed",clipType:K,poses:pe,clipStyle:rt,clipStyles:sr,distX:D,distY:A},Hh((i={},i[K==="rect"?"clip":"clipPath"]=rt,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,s=r.isClipStart,a=r.isControl;return s?(Ri(t,"onClipEnd",Kf(t,e,{})),i&&(a?Uge(t,e):o&&zge(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Gge={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":nc(e.inputEvent.target,Ki("origin"))},dragControlStart:function(t,e){var n=e.datas;Sy(t,e);var r=ja(t,e,{dragStart:Uh.dragStart(t,new lx().dragStart([0,0],e))}),i=Ri(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var o=Tn(vg(e),2),s=o[0],a=o[1],c=t.state,h=c.width,d=c.height,v=c.offsetMatrix,w=c.targetMatrix,_=c.is3d,E=t.props.originRelative,M=E===void 0?!0:E,D=_?4:3,A=[s,a];if(i){var F=e.distOrigin;(F[0]||F[1])&&(A=F)}var O=ko(n.startOrigin,A),N=ko(n.startTargetOrigin,A),H=ta(A,n.prevOrigin),G=nS(v,w,O,D),W=t.getRect(),X=Md(Ey(G,h,d,D)),K=[W.left-X.left,W.top-X.top];n.prevOrigin=A;var k=[cp(N[0],h,M),cp(N[1],d,M)].join(" "),$=Uh.drag(t,tS(e,t.state,K,!!r)),Q=ja(t,e,mn(mn({width:h,height:d,origin:O,dist:A,delta:H,transformOrigin:k,drag:$},Hh({transformOrigin:k,transform:$.transform},e)),{afterTransform:$.transform}));return Ri(t,"onDragOrigin",Q),Q},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Ri(t,"onDragOriginEnd",Kf(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaOrigin"in a?(s[0]+=a.deltaOrigin[0],s[1]+=a.deltaOrigin[1]):"origin"in a?(s[0]=a.origin[0]-o[0],s[1]=a.origin[1]-o[1]):("x"in a?r=a.x-n.left:"deltaX"in a&&(r+=a.deltaX),"y"in a?i=a.y-n.top:"deltaY"in a&&(i+=a.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Vge(t,e,n,r){var i=t.filter(function(c){var h=c.virtual,d=c.horizontal;return d&&!h}).length,o=t.filter(function(c){var h=c.virtual,d=c.vertical;return d&&!h}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(o===0?s=4:o<4&&(s=7)),e===1&&(o<=1?s=5:o<=2&&(s=6)),!(s===-1||!t[s].virtual)){var a=t[s];Hge(t,s),s<4?a.pos[0]=n:a.pos[1]=r}}function Hge(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function qge(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function HB(t,e,n,r,i){r===void 0&&(r=[0,0]);var o=[];return!t||t==="0px"?o=[]:o=Pv(t),S$(o,e,n,0,0,r,i)}function qB(t,e,n,r,i){var o=t.state,s=o.width,a=o.height,c=t4(i,t.props.roundRelative,s,a),h=c.raws,d=c.styles,v=c.radiusPoses,w=kge(v,h),_=w.horizontals,E=w.verticals,M=d.join(" ");o.borderRadiusState=M;var D=ja(t,e,mn({horizontals:_,verticals:E,borderRadius:M,width:s,height:a,delta:r,dist:n},Hh({borderRadius:M},e)));return Ri(t,"onRound",D),D}function $B(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var o=t.moveables[0],s=t.getTargets()[0];s&&((o==null?void 0:o.props.target)===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=Zk(s).borderRadius,r.borderRadius=i))}return i}var $ge={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Ki("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,o=n.height,s=n.allMatrix,a=n.is3d,c=n.left,h=n.top,d=n.borderRadiusState,v=t.props,w=v.minRoundControls,_=w===void 0?[0,0]:w,E=v.maxRoundControls,M=E===void 0?[4,4]:E,D=v.zoom,A=v.roundPadding,F=A===void 0?0:A,O=v.isDisplayShadowRoundControls,N=v.groupable;if(!r)return null;var H=d||$B(t),G=a?4:3,W=HB(H,i,o,_,!0);if(!W)return null;var X=0,K=0,k=N?[0,0]:[c,h];return W.map(function($,Q){var ie=$.horizontal,ae=$.vertical,ce=$.direction||"",se=Kr([],Tn($.pos),!1);K+=Math.abs(ie),X+=Math.abs(ae),ie&&ce.indexOf("n")>-1&&(se[1]-=F),ae&&ce.indexOf("w")>-1&&(se[0]-=F),ie&&ce.indexOf("s")>-1&&(se[1]+=F),ae&&ce.indexOf("e")>-1&&(se[0]+=F);var Se=ta(Gl(s,se,G),k),ye=O&&O!=="horizontal",Te=$.vertical?X<=M[1]&&(ye||!$.virtual):K<=M[0]&&(O||!$.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(Q),className:Ki("control","border-radius",$.vertical?"vertical":"",$.virtual?"virtual":""),"data-radius-index":Q,style:{display:Te?"block":"none",transform:"translate(".concat(Se[0],"px, ").concat(Se[1],"px) scale(").concat(D,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,o=i.getAttribute("class")||"",s=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,h=-1;if(a){var d=i.getAttribute("data-line-key")||"";d&&(h=parseInt(d.replace(/render-line-/g,""),10),isNaN(h)&&(h=-1))}if(!s&&!a)return!1;var v=ja(t,e,{}),w=Ri(t,"onRoundStart",v);if(w===!1)return!1;r.lineIndex=h,r.controlIndex=c,r.isControl=s,r.isLine=a,Sy(t,e);var _=t.props,E=_.roundRelative,M=_.minRoundControls,D=M===void 0?[0,0]:M,A=t.state,F=A.width,O=A.height;r.isRound=!0,r.prevDist=[0,0];var N=$B(t),H=HB(N||"",F,O,D,!0)||[];return r.controlPoses=H,A.borderRadiusState=t4(H,E,F,O).styles.join(" "),v},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,o=Tn(vg(e),2),s=o[0],a=o[1],c=[s,a],h=ta(c,n.prevDist),d=t.props.maxRoundControls,v=d===void 0?[4,4]:d,w=t.state,_=w.width,E=w.height,M=r[i],D=M.vertical,A=M.horizontal,F=r.map(function(N){var H=N.horizontal,G=N.vertical,W=[H*A*c[0],G*D*c[1]];if(H){if(v[0]===1)return W;if(v[0]<4&&H!==A)return W}else{if(v[1]===0)return W[1]=G*A*c[0]/_*E,W;if(D){if(v[1]===1)return W;if(v[1]<4&&G!==D)return W}}return[0,0]});F[i]=c;var O=r.map(function(N,H){return mn(mn({},N),{pos:ko(N.pos,F[H])})});return i<4?O.slice(0,i+1).forEach(function(N){N.virtual=!1}):O.slice(4,i+1).forEach(function(N){N.virtual=!1}),n.prevDist=[s,a],qB(t,e,c,h,O)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var o=r.isControl,s=r.controlIndex,a=r.isLine,c=r.lineIndex,h=r.controlPoses,d=h.filter(function(A){var F=A.virtual;return F}).length,v=t.props.roundClickable,w=v===void 0?!0:v;if(i&&w){if(o&&(w===!0||w==="control"))qge(h,s);else if(a&&(w===!0||w==="line")){var _=Tn(Aq(t,e),2),E=_[0],M=_[1];Vge(h,c,E,M)}d!==h.filter(function(A){var F=A.virtual;return F}).length&&qB(t,e,[0,0],[0,0],h)}var D=Kf(t,e,{});return Ri(t,"onRoundEnd",D),n.borderRadiusState="",D},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,o=vp(t,"roundable",e),s=mn({targets:t.props.targets,events:o.map(function(a,c){return mn(mn({},a),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Ri(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,o=vp(t,"roundable",e),s=mn({targets:t.props.targets,events:o.map(function(a,c){return mn(mn(mn({},a),{target:i[c],moveable:r[c],currentTarget:r[c]}),Hh({borderRadius:n.borderRadius},a))})},n);return Ri(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=vp(t,"roundable",e);HM(t,"onRound",function(a){var c=mn({targets:t.props.targets,events:i.map(function(h,d){return mn(mn(mn({},h),{target:r[d],moveable:n[d],currentTarget:n[d]}),Hh({borderRadius:a.borderRadius},h))})},a);Ri(t,"onRoundGroup",c)});var o=this.dragControlEnd(t,e);if(!o)return!1;var s=mn({targets:t.props.targets,events:i.map(function(a,c){var h;return mn(mn({},a),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(h=a.datas)===null||h===void 0?void 0:h.lastEvent})})},o);return Ri(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function Wge(t,e){var n=e?4:3,r=vl(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var T$={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,o=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(mq(i,!0),")"),a=!o||o==="none"?s:o;e.datas.startTransforms=Wge(a,r)?[]:Pv(a)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ja(t,e,{setTransform:function(n){e.datas.startTransforms=bc(n)?n:Pv(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ja(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Ri(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Ri(t,"onBeforeRender",ja(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Ri(t,"onBeforeRenderEnd",ja(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=vp(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(s,a){var c=i[a];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Ri(t,"onBeforeRenderGroupStart",ja(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=vp(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(s,a){var c=i[a];return n.resetStyle(s),n.fillDragParams(c,s)});Ri(t,"onBeforeRenderGroup",ja(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Ri(t,"onBeforeRenderGroupEnd",ja(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},C$={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Ri(t,"onRenderStart",ja(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Ri(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Ri(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Ri(t,"onRenderGroupStart",ja(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=vp(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(s,a){var c=i[a];return n.fillDragParams(c,s)});Ri(t,"onRenderGroup",ja(t,e,mn(mn({isPinch:!!e.isPinch,targets:t.props.targets,transform:bE(e),transformObject:{}},Hh(wE(e))),{events:o})))},dragGroupEnd:function(t,e){var n=this,r=vp(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(s,a){var c=i[a];return n.fillDragEndParams(c,s)});Ri(t,"onRenderGroupEnd",ja(t,e,mn({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o,transformObject:{},transform:bE(e)},Hh(wE(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return sx(mC(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ja(t,e,mn({isPinch:!!e.isPinch,transformObject:n,transform:bE(e)},Hh(wE(e))))},fillDragEndParams:function(t,e){var n={};return sx(mC(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ja(t,e,mn({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:bE(e)},Hh(wE(e))))}};function Y2(t,e,n,r,i,o,s){o.clientDistX=o.distX,o.clientDistY=o.distY;var a=i==="Start",c=i==="End",h=i==="After",d=t.state.target,v=o.isRequest,w=r.indexOf("Control")>-1;if(!d||a&&w&&!v&&t.areaElement===o.inputEvent.target)return!1;var _=Kr([],Tn(e),!1);if(v){var E=o.requestAble;_.some(function(Q){return Q.name===E})||_.push.apply(_,Kr([],Tn(t.props.ables.filter(function(Q){return Q.name===E})),!1))}if(!_.length||_.every(function(Q){return Q.dragRelation}))return!1;var M=o.inputEvent,D;c&&M&&(D=document.elementFromPoint(o.clientX,o.clientY)||M.target);var A=!1,F=function(){var Q;A=!0,(Q=o.stop)===null||Q===void 0||Q.call(o)},O=a&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());O&&t.updateRect(i,!0,!1);var N=o.datas,H=w?"controlGesto":"targetGesto",G=t[H],W=function(Q,ie,ae){if(!(ie in Q)||G!==t[H])return!1;var ce=Q.name,se=N[ce]||(N[ce]={});if(a&&(se.isEventStart=!ae||!Q[ae]||Q[ae](t,o)),!se.isEventStart)return!1;var Se=Q[ie](t,mn(mn({},o),{stop:F,datas:se,originalDatas:N,inputTarget:D}));return t._emitter.off(),a&&Se===!1&&(se.isEventStart=!1),Se};O&&_.forEach(function(Q){Q.unset&&Q.unset(t)}),W(T$,"drag".concat(r).concat(i));var X=0,K=0;n.forEach(function(Q){if(A)return!1;var ie="".concat(Q).concat(r).concat(i),ae="".concat(Q).concat(r,"Condition");i===""&&!v&&mge(t.state,o);var ce=_.filter(function(ye){return ye[ie]});ce=ce.filter(function(ye,Te){return ye.name&&ce.indexOf(ye)===Te});var se=ce.filter(function(ye){return W(ye,ie,ae)}),Se=se.length;A&&++X,Se&&++K,!A&&a&&ce.length&&!Se&&(X+=ce.filter(function(ye){var Te=ye.name,pe=N[Te];return pe.isEventStart?ye.dragRelation!=="strong":!1}).length?1:0)}),(!h||K)&&W(C$,"drag".concat(r).concat(i));var k=G!==t[H]||X===n.length;if((c||A||k)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(Q){Q.state.gestos={}}),_.forEach(function(Q){Q.unset&&Q.unset(t)})),a&&!k&&!v&&K&&t.props.preventDefault&&(o==null||o.preventDefault()),t.isUnmounted||k)return!1;if(!a&&K&&!s||c){var $=t.props.flushSync||r$;$(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!a&&!c&&!h&&K&&!s&&Y2(t,e,n,r,i+"After",o),!0}function r4(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var o=r,s=t.areaElement,a=t._dragTarget;return!a||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:o===a||a.contains(o)||o===s||!t.isMoveableElement(o)&&!t.controlBox.contains(o)||nc(o,"moveable-area")||nc(o,"moveable-padding")||nc(o,"moveable-edgeDraggable")}}function M$(t,e,n){var r=t.controlBox,i=[],o=t.props,s=o.dragArea,a=t.state.target,c=o.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&a&&e!==a&&o.dragTargetSelf&&i.push(a);var h=r4(t);return R$(t,i,"targetAbles",n,{dragStart:h,pinchStart:h})}function A$(t,e){var n=t.controlBox,r=[];r.push(n);var i=r4(t,!0),o=function(s,a){if(a===void 0&&(a=s.inputEvent.target),a===n)return!0;var c=i(s,a);return!c};return R$(t,r,"controlAbles",e,{dragStart:o,pinchStart:o})}function R$(t,e,n,r,i){i===void 0&&(i={});var o=n==="targetAbles",s=t.props,a=s.pinchOutside,c=s.pinchThreshold,h=s.preventClickEventOnDrag,d=s.preventClickDefault,v=s.checkInput,w=s.dragFocusedInput,_=s.preventDefault,E=_===void 0?!0:_,M=s.preventRightClick,D=M===void 0?!0:M,A=s.preventWheelClick,F=A===void 0?!0:A,O=s.dragContainer,N=lg(O,!0),H={preventDefault:E,preventRightClick:D,preventWheelClick:F,container:N||bv(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:a,preventClickEventOnDrag:o?h:!1,preventClickEventOnDragStart:o?d:!1,preventClickEventByCondition:o?null:function(X){return t.controlBox.contains(X.target)},checkInput:o?v:!1,dragFocusedInput:w},G=new _de(e,H),W=r==="Control";return["drag","pinch"].forEach(function(X){["Start","","End"].forEach(function(K){G.on("".concat(X).concat(K),function(k){var $,Q=k.eventType,ie=X==="drag"&&k.isPinch;if(i[Q]&&!i[Q](k)){k.stop();return}if(!ie){var ae=X==="drag"?[X]:["drag",X],ce=Kr([],Tn(t[n]),!1),se=Y2(t,ce,ae,r,K,k);se?(t.props.stopPropagation||K==="Start"&&W)&&(($=k==null?void 0:k.inputEvent)===null||$===void 0||$.stopPropagation()):k.stop()}})})}),G}var Xge=function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(o){var s=i.eventName,a=i.moveable;a.state.disableNativeEvent||i.ables.forEach(function(c){c[s](a,{inputEvent:o})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Yge(t,e,n,r){var i;n===void 0&&(n=e);var o=Nq(t,e),s=o.matrixes,a=o.is3d,c=o.targetMatrix,h=o.transformOrigin,d=o.targetOrigin,v=o.offsetContainer,w=o.hasFixed,_=o.zoom,E=upe(v,n),M=E.matrixes,D=E.is3d,A=E.offsetContainer,F=E.zoom,O=r,N=4,H=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,G=c,W=vl(N),X=vl(N),K=vl(N),k=vl(N),$=s.length,Q=M.map(function(Te){return mn(mn({},Te),{matrix:Te.matrix?Kr([],Tn(Te.matrix),!1):void 0})}).reverse();s.reverse(),!a&&O&&(G=xp(G,3,4),GD(s)),!D&&O&&GD(Q),Q.forEach(function(Te){X=ks(X,Te.matrix,N)});var ie=n||Uv(t),ae=((i=Q[0])===null||i===void 0?void 0:i.target)||bw(ie,ie,!0).offsetParent,ce=Q.slice(1).reduce(function(Te,pe){return ks(Te,pe.matrix,N)},vl(N));s.forEach(function(Te,pe){if($-2===pe&&(K=W.slice()),$-1===pe&&(k=W.slice()),!Te.matrix){var Ie=s[pe+1],me=fge(Te,Ie,ae,N,ks(ce,W,N));Te.matrix=iy(me,N)}W=ks(W,Te.matrix,N)});var se=!H&&a;G||(G=vl(se?4:3));var Se=VM(H&&G.length===16?xp(G,4,3):G,se),ye=X;return X=pq(X,N,N),{hasZoom:_!==1||F!==1,hasFixed:w,matrixes:s,rootMatrix:X,originalRootMatrix:ye,beforeMatrix:K,offsetMatrix:k,allMatrix:W,targetMatrix:G,targetTransform:Se,inlineTransform:t.style.transform,transformOrigin:h,targetOrigin:d,is3d:O,offsetContainer:v,offsetRootContainer:A}}function Zge(t,e,n,r){n===void 0&&(n=e);var i=0,o=0,s=0,a={},c=s$(t);if(t&&(i=c.offsetWidth,o=c.offsetHeight),t){var h=Yge(t,e,n,r),d=X1(h.allMatrix,h.transformOrigin,i,o);a=mn(mn({},h),d);var v=X1(h.allMatrix,[50,50],100,100);s=l$([v.pos1,v.pos2],v.direction)}var w=4;return mn(mn(mn({hasZoom:!1,width:i,height:o,rotation:s},c),{originalRootMatrix:vl(w),rootMatrix:vl(w),beforeMatrix:vl(w),offsetMatrix:vl(w),allMatrix:vl(w),targetMatrix:vl(w),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function $D(t,e,n,r,i,o){o===void 0&&(o=[]);var s=1,a=[0,0],c=EE(),h=EE(),d=EE(),v=EE(),w=[0,0],_={},E=Zge(e,n,i,!0);if(e){var M=_f(e);o.forEach(function(Q){_[Q]=M(Q)});var D=E.is3d?4:3,A=X1(E.offsetMatrix,ko(E.transformOrigin,gq(E.targetMatrix,D)),E.width,E.height);s=A.direction,a=ko(A.origin,[A.left-E.left,A.top-E.top]),v=X2(E.offsetRootContainer);var F=bw(r,r,!0).offsetParent||E.offsetRootContainer;if(E.hasZoom){var O=X1(ks(E.originalRootMatrix,E.allMatrix),E.transformOrigin,E.width,E.height),N=X1(E.originalRootMatrix,xC(_f(F)("transformOrigin")).map(function(Q){return parseFloat(Q)}),F.offsetWidth,F.offsetHeight);if(c=A5(O,v),d=A5(N,v,F,!0),t){var H=O.left,G=O.top;h=A5({left:H,top:G,bottom:G,right:G},v)}}else{c=X2(e),d=lpe(F),t&&(h=X2(t));var W=d.left,X=d.top,K=d.clientLeft,k=d.clientTop,$=[c.left-W,c.top-X];w=ta(hx(E.rootMatrix,$,4),[K+E.left,k+E.top])}}return mn({targetClientRect:c,containerClientRect:d,moveableClientRect:h,rootContainerClientRect:v,beforeDirection:s,beforeOrigin:a,originalBeforeOrigin:a,target:e,style:_,offsetDelta:w},E)}function WB(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var o=ay([e,n,r,i]),s=[o.minX,o.minY],a=ta(t.origin,s);return e=ta(e,s),n=ta(n,s),r=ta(r,s),i=ta(i,s),mn(mn({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:a,beforeOrigin:a,isPersisted:!0})}var fx=function(t){Qw(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=mn({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},$D(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new kk,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}Lfe(n._observerId),n._observerId=uq(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,o=n.className,s=n.target,a=n.zoom,c=n.cspNonce,h=n.translateZ,d=n.cssStyled,v=n.groupable,w=n.linePadding,_=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var E=Tn(i||[0,0],2),M=E[0],D=E[1],A=r.left,F=r.top,O=r.target,N=r.direction,H=r.hasFixed,G=r.offsetDelta,W=n.targets,X=this.isDragging(),K={};this.getEnabledAbles().forEach(function(ce){K["data-able-".concat(ce.name.toLowerCase())]=!0});var k=this._getAbleClassName(),$=W&&W.length&&(O||v)||s||!this._hasFirstTarget&&this.state.isPersisted,Q=this.controlBox||this.props.firstRenderState||this.props.persistData,ie=[A-M,F-D];!v&&n.useAccuratePosition&&(ie[0]+=G[0],ie[1]+=G[1]);var ae={position:H?"fixed":"absolute",display:$?"block":"none",visibility:Q?"visible":"hidden",transform:"translate3d(".concat(ie[0],"px, ").concat(ie[1],"px, ").concat(h,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return w&&(ae["--moveable-line-padding"]=w),_&&(ae["--moveable-control-padding"]=_),Be.createElement(d,mn({cspNonce:c,ref:W0(this,"controlBox"),className:"".concat(Ki("control-box",N===-1?"reverse":"",X?"dragging":"")," ").concat(k," ").concat(o)},K,{onClick:this._onPreventClick,style:ae}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),L1(this,!1),L1(this,!0);var o=this.events;for(var s in o){var a=o[s];a&&a.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Zf(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,o=n.container;return o||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(Bk)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,o=this.controlGesto;return i&&r4(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):o&&this.isMoveableElement(r)&&(o.isFlag()||o.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,o=r.pos1,s=r.pos2,a=r.pos3,c=r.pos4,h=r.targetClientRect;if(!i)return 0;var d;if(Ik(n)){var v=n.getBoundingClientRect();d={left:v.left,top:v.top,width:v.width,height:v.height}}else d=mn({width:0,height:0},n);var w=d.left,_=d.top,E=d.width,M=d.height,D=mB([o,s,c,a],h),A=dde(D,[[w,_],[w+E,_],[w+E,_+M],[w,_+M]]),F=_q(D);return!A||!F?0:Math.min(100,A/F*100)},e.prototype.isInside=function(n,r){var i=this.state,o=i.target,s=i.pos1,a=i.pos2,c=i.pos3,h=i.pos4,d=i.targetClientRect;return o?RD([n,r],mB([s,a,h,c],d)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var o=this.props,s=!o.parentPosition&&!o.wrapperMoveable;s&&ux(!0);var a=o.parentMoveable,c=this.state,h=c.target||o.target,d=this.getContainer(),v=a?a._rootContainer:this._rootContainer,w=$D(this.controlBox,h,d,d,v||d,this._getRequestStyles());if(!h&&this._hasFirstTarget&&o.persistData){var _=WB(o.persistData);for(var E in _)w[E]=_[E]}s&&ux(),this.updateState(w,a?!1:i)},e.prototype.isDragging=function(n){var r,i,o=this.targetGesto,s=this.controlGesto;if(o!=null&&o.isFlag()){if(!n)return!0;var a=o.getEventData();return!!(!((r=a[n])===null||r===void 0)&&r.isEventStart)}if(s!=null&&s.isFlag()){if(!n)return!0;var a=s.getEventData();return!!(!((i=a[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Ld(this.state),i=Tn(r,4),o=i[0],s=i[1],a=i[2],c=i[3],h=Md(r),d=n.width,v=n.height,w=h.width,_=h.height,E=h.left,M=h.top,D=[n.left,n.top],A=ko(D,n.origin),F=ko(D,n.beforeOrigin),O=n.transformOrigin;return{width:w,height:_,left:E,top:M,pos1:o,pos2:s,pos3:a,pos4:c,offsetWidth:d,offsetHeight:v,beforeOrigin:F,origin:A,transformOrigin:O,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;(r==null?void 0:r.isIdle())===!1&&VD(this,!1),r==null||r.stop()}if(!n||n==="control"){var r=this.controlGesto;(r==null?void 0:r.isIdle())===!1&&VD(this,!0),r==null||r.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,o=n.direction;return _ge(r,i,o)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var o=this,s=o.props,a=s.parentMoveable||s.wrapperMoveable||o,c=a.props.ables,h=s.groupable,d=Zf(c,function(A){return A.name===n});if(this.isDragging()||!d||!d.request)return{request:function(){return this},requestEnd:function(){return this}};var v=d.request(o),w=i||r.isInstant,_=v.isControl?"controlAbles":"targetAbles",E="".concat(h?"Group":"").concat(v.isControl?"Control":""),M=Kr([],Tn(a[_]),!1),D={request:function(A){return Y2(o,M,["drag"],E,"",mn(mn({},v.request(A)),{requestAble:n,isRequest:!0}),w),D},requestEnd:function(){return Y2(o,M,["drag"],E,"End",mn(mn({},v.requestEnd()),{requestAble:n,isRequest:!0}),w),D}};return Y2(o,M,["drag"],E,"Start",mn(mn({},v.requestStart(r)),{requestAble:n,isRequest:!0}),w),w?D.request(r).requestEnd():D},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,o=n.originalBeforeOrigin,s=n.transformOrigin,a=n.allMatrix,c=n.is3d,h=n.pos1,d=n.pos2,v=n.pos3,w=n.pos4,_=n.left,E=n.top,M=n.isPersisted,D=r.zoom||1;if(!i&&D<=1){n.renderPoses=[h,d,v,w],n.renderLines=[[h,d],[d,w],[w,v],[v,h]];return}var A=y$(i||{}),F=A.left,O=A.top,N=A.bottom,H=A.right,G=c?4:3,W=[];M?W=s:this.controlBox&&r.groupable?W=o:W=ko(o,[_,E]);var X=pC(G,iy(W.map(function(ae){return-ae}),G),a,iy(s,G)),K=pd(X,h,[-F,-O],G),k=pd(X,d,[H,-O],G),$=pd(X,v,[-F,N],G),Q=pd(X,w,[H,N],G);n.renderPoses=[K,k,$,Q],n.renderLines=[[K,k],[k,Q],[Q,$],[$,K]];{var ie=D/2;n.renderLines=[[pd(X,h,[-F-ie,-O],G),pd(X,d,[H+ie,-O],G)],[pd(X,d,[H,-O-ie],G),pd(X,w,[H,N+ie],G)],[pd(X,w,[H+ie,N],G),pd(X,v,[-F-ie,N],G)],[pd(X,v,[-F,N+ie],G),pd(X,h,[-F,-O-ie],G)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,o=n.parentMoveable,s=this.state,a=s.target,c=s.container;if(!(!a&&!r)){this.updateAbles();var h=!HD(a,r),d=h||!HD(c,i);if(d){var v=i||this.controlBox;v&&this.unsetAbles(),this.updateState({target:r,container:i}),!o&&v&&this.updateRect("End",!1,!1),this._isPropTargetChanged=h}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var o=i[n];return o&&o(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,o=n+r;return i[o]||(i[o]=wq(n,r)),i[o]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,o=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&o){var a=WB(o);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,o=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),a="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),h="drag".concat(r,"ControlStart"),d=TE(s,[a,c],o),v=TE(s,[h],o);this.enabledAbles=s,this.targetAbles=d,this.controlAbles=v},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var o in n)i[o]=n[o]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,o={createElement:Be.createElement};return this.renderState={},gge(p$(TE(this.getEnabledAbles(),["render"],i).map(function(s){var a=s.render;return a(n,o)||[]})).filter(function(s){return s}),function(s){var a=s.key;return a}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var o,s,a=(s=(o=i.requestStyle)===null||o===void 0?void 0:o.call(i))!==null&&s!==void 0?s:[];return Kr(Kr([],Tn(r),!1),Tn(a),!1)},Kr([],Tn(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,o=!n&&this.targetGesto||this._isTargetChanged(!0);o&&(L1(this,!1),this.updateState({gestos:{}})),r||L1(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=M$(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=A$(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=lg(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,o=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,a=r.parentMoveable;if(o||a&&s)return[];var c=this.getState(),h={createElement:Be.createElement};return c.renderLines.map(function(d,v){return xw(h,"",d[0],d[1],i,"render-line-".concat(v))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,o=this._prevOriginalDragTarget,s=this._prevDragArea,a=r.dragArea,c=!a&&o!==i,h=(n||a)&&s!==a;return c||h||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,o=this.events,s=Nx(o);if(this._isTargetChanged())for(var a in o){var c=o[a];c&&c.destroy(),o[a]=null}if(i){var h=this.enabledAbles;s.forEach(function(d){var v=TE(h,[d]),w=v.length>0,_=o[d];if(!w){_&&(_.destroy(),o[d]=null);return}_||(_=new Xge(i,n,d),o[d]=_),_.setAbles(v)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=lg(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=lg(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Kr(Kr([],Tn(this._getAbleViewClassNames()),!1),[this.isDragging()?Cge:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=d$(n.filter(Boolean),function(h){return h}).map(function(h){var d=Tn(h,1),v=d[0];return v}),o=this._viewClassNames,s=Nk(o,i),a=s.removed,c=s.added;a.forEach(function(h){fq(r,o[h])}),c.forEach(function(h){hq(r,i[h])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),o=this.targetGesto,s=this.controlGesto,a=o!=null&&o.isFlag()?o.getEventData():{},c=s!=null&&s.isFlag()?s.getEventData():{};return i.map(function(h){var d,v,w,_=h.name,E=((d=h.className)===null||d===void 0?void 0:d.call(h,r))||"";return(!((v=a[_])===null||v===void 0)&&v.isEventStart||!((w=c[_])===null||w===void 0)&&w.isEventStart)&&(E+=" ".concat(Ki("".concat(_).concat(n,"-dragging")))),E.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,o=i.target,s=bv(this.getControlBoxElement());if(!s.ResizeObserver||!o||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===o&&this._reiszeObserver)){var a=new s.ResizeObserver(this.checkUpdateRect);a.observe(o,{box:"border-box"}),this._reiszeObserver=a}},e.prototype._updateMutationObserver=function(n){var r=this,i,o=this.props,s=o.target,a=bv(this.getControlBoxElement());if(!a.MutationObserver||!s||!o.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new a.MutationObserver(function(h){var d,v;try{for(var w=Pde(h),_=w.next();!_.done;_=w.next()){var E=_.value;E.type==="attributes"&&E.attributeName==="style"&&r.checkUpdateRect()}}catch(M){d={error:M}}finally{try{_&&!_.done&&(v=w.return)&&v.call(w)}finally{if(d)throw d.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:r$,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(Be.PureComponent),i4={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],o=t.getState(),s=o.left,a=o.top,c=o.isPersisted,h=r.zoom||1,d=t.renderGroupRects,v=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=v.map(function(){return null}):v=[];var w=N1(t,"parentPosition",[s,a],function(E){return E.join(",")}),_=N1(t,"requestStyles",t.getRequestChildStyles(),function(E){return E.join(",")});return t.moveables=t.moveables.slice(0,i.length),Kr(Kr([],Tn(i.map(function(E,M){return e.createElement(fx,{key:"moveable"+M,ref:aq(t,"moveables",M),target:E,origin:!1,requestStyles:_,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,a],persistData:v[M],zoom:h})})),!1),Tn(p$(d.map(function(E,M){var D=E.pos1,A=E.pos2,F=E.pos3,O=E.pos4,N=[D,A,F,O];return[[0,1],[1,3],[3,2],[2,0]].map(function(H,G){var W=Tn(H,2),X=W[0],K=W[1];return xw(e,"",ta(N[X],w),ta(N[K],w),h,"group-rect-".concat(M,"-").concat(G))})}))),!1)}},Kge=eS("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,o=t.isMoveableElement(i),s=!o&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var a=n.contains(i);Ri(t,"onClick",ja(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,o=i.indexOf(r),s=o>-1,a=!1;o===-1&&(o=_m(i,function(c){return c.contains(r)}),a=o>-1),Ri(t,"onClickGroup",ja(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:o,isTarget:s,containsTarget:a,moveableTarget:i[o]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function O_(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),mn(mn({},t),{datas:e})}var Jge=eS("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?Fq(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&nc(i,Ki("direction"))&&nc(i,Ki("edge"))&&nc(i,Ki("edgeDraggable"))},dragStart:function(t,e){return Uh.dragStart(t,O_(e))},drag:function(t,e){return Uh.drag(t,O_(e))},dragEnd:function(t,e){return Uh.dragEnd(t,O_(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&nc(i,Ki("direction"))&&nc(i,Ki("line"))},dragGroupStart:function(t,e){return Uh.dragGroupStart(t,O_(e))},dragGroup:function(t,e){return Uh.dragGroup(t,O_(e))},dragGroupEnd:function(t,e){return Uh.dragGroupEnd(t,O_(e))},unset:function(t){return Uh.unset(t)}}),P$={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Qge=[T$,b$,nge,bge,Uh,Jge,zD,wge,Ege,Bpe,Rge,Pge,Mge,Gge,jge,$ge,i4,P$,Kge,x$,C$];function XB(t,e){var n=Tn(t,3),r=n[0],i=n[1],o=n[2];return(r*e[0]+i*e[1]+o)/Math.sqrt(r*r+i*i)}function AE(t,e){var n=Tn(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function YB(t,e){return Math.max.apply(Math,Kr([],Tn(t.map(function(n){var r=Tn(n,4),i=r[0],o=r[1],s=r[2],a=r[3];return Math.max(i[e],o[e],s[e],a[e])})),!1))}function ZB(t,e){return Math.min.apply(Math,Kr([],Tn(t.map(function(n){var r=Tn(n,4),i=r[0],o=r[1],s=r[2],a=r[3];return Math.min(i[e],o[e],s[e],a[e])})),!1))}function eme(t,e){var n,r,i,o=[0,0],s=[0,0],a=[0,0],c=[0,0],h=0,d=0;if(!t.length)return{pos1:o,pos2:s,pos3:a,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:h,height:d,rotation:e};var v=Pa(e,$h);if(v%90){var w=v/180*Math.PI,_=Math.tan(w),E=-1/_,M=[kD,_B],D=[[0,0],[0,0]],A=[kD,_B],F=[[0,0],[0,0]];t.forEach(function(xe){xe.forEach(function(ve){var Ee=XB([-_,1,0],ve),De=XB([-E,1,0],ve);M[0]>Ee&&(D[0]=ve,M[0]=Ee),M[1]<Ee&&(D[1]=ve,M[1]=Ee),A[0]>De&&(F[0]=ve,A[0]=De),A[1]<De&&(F[1]=ve,A[1]=De)})});var O=Tn(D,2),N=O[0],H=O[1],G=Tn(F,2),W=G[0],X=G[1],K=[-_,1,AE([-_,1],N)],k=[-_,1,AE([-_,1],H)],$=[-E,1,AE([-E,1],W)],Q=[-E,1,AE([-E,1],X)];n=Tn([[K,$],[K,Q],[k,$],[k,Q]].map(function(xe){var ve=Tn(xe,2),Ee=ve[0],De=ve[1];return Ok(Ee,De)[0]}),4),o=n[0],s=n[1],a=n[2],c=n[3],h=A[1]-A[0],d=M[1]-M[0]}else{var ie=ZB(t,0),ae=ZB(t,1),ce=YB(t,0),se=YB(t,1);if(o=[ie,ae],s=[ce,ae],a=[ie,se],c=[ce,se],h=ce-ie,d=se-ae,v%180){var Se=[a,o,c,s];r=Tn(Se,4),o=r[0],s=r[1],a=r[2],c=r[3],h=se-ae,d=ce-ie}}if(v%360>180){var Se=[c,a,s,o];i=Tn(Se,4),o=i[0],s=i[1],a=i[2],c=i[3]}var ye=ay([o,s,a,c]),Te=ye.minX,pe=ye.minY,Ie=ye.maxX,me=ye.maxY;return{pos1:o,pos2:s,pos3:a,pos4:c,width:h,height:d,minX:Te,minY:pe,maxX:Ie,maxY:me,rotation:e}}function I$(t,e){var n=e.map(function(r){if(bc(r)){var i=I$(t,r),o=i.length;return o>1?i:o===1?i[0]:null}else{var s=Zf(t,function(a){var c=a.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&bc(n[0])?n[0]:n}var tme=function(t){Qw(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new yq,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var o;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;ux(!0),this.moveables.forEach(function(Ae){Ae.updateRect(n,!1,!1)});var a=this.props,c=this.moveables,h=s.target||a.target,d=c.map(function(Ae){return{finded:!1,manager:Ae}}),v=this.props.targetGroups||[],w=I$(d,v),_=a.useDefaultGroupRotate;w.push.apply(w,Kr([],Tn(d.filter(function(Ae){var ut=Ae.finded;return!ut}).map(function(Ae){var ut=Ae.manager;return ut})),!1));var E=[],M=!r||n!==""&&a.updateGroup,D=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var A=(o=a.persistData)===null||o===void 0?void 0:o.rotation;A!=null&&(D=A)}function F(Ae,ut,pt){var st=Ae.map(function(Ut){if(bc(Ut)){var ht=F(Ut,ut),qt=[ht.pos1,ht.pos2,ht.pos3,ht.pos4];return E.push(ht),{poses:qt,rotation:ht.rotation}}else return{poses:Ld(Ut.state),rotation:Ut.getRotation()}}),Ce=st.map(function(Ut){var ht=Ut.rotation;return ht}),It=0,Ve=Ce[0],yt=Ce.every(function(Ut){return Math.abs(Ve-Ut)<.1});M?It=!_&&yt?Ve:D:It=!_&&!pt&&yt?Ve:ut;var Ze=st.map(function(Ut){var ht=Ut.poses;return ht}),wt=eme(Ze,It);return wt}var O=F(w,this.rotation,!0);M&&(this.rotation=O.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=v,this.renderGroupRects=E;var N=this.transformOrigin,H=this.rotation,G=this.scale,W=O.width,X=O.height,K=O.minX,k=O.minY,$=xge([[0,0],[W,0],[0,X],[W,X]],e4(N,W,X),this.rotation/180*Math.PI),Q=ay($.result),ie=Q.minX,ae=Q.minY,ce=" rotate(".concat(H,"deg)")+" scale(".concat(jh(G[0]),", ").concat(jh(G[1]),")"),se="translate(".concat(-ie,"px, ").concat(-ae,"px)").concat(ce);this.controlBox.style.transform="translate3d(".concat(K,"px, ").concat(k,"px, ").concat(this.props.translateZ||0,")"),h.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(N,";")+"width:".concat(W,"px;height:").concat(X,"px;")+"transform: ".concat(se),s.width=W,s.height=X;var Se=this.getContainer(),ye=$D(this.controlBox,h,this.controlBox,this.getContainer(),this._rootContainer||Se,[]),Te=[ye.left,ye.top],pe=Tn(Ld(ye),4),Ie=pe[0],me=pe[1],xe=pe[2],ve=pe[3],Ee=ay([Ie,me,xe,ve]),De=[Ee.minX,Ee.minY],We=jh(G[0]*G[1]);ye.pos1=ta(Ie,De),ye.pos2=ta(me,De),ye.pos3=ta(xe,De),ye.pos4=ta(ve,De),ye.left=K-ye.left+De[0],ye.top=k-ye.top+De[1],ye.origin=ta(ko(Te,ye.origin),De),ye.beforeOrigin=ta(ko(Te,ye.beforeOrigin),De),ye.originalBeforeOrigin=ko(Te,ye.originalBeforeOrigin),ye.transformOrigin=ta(ko(Te,ye.transformOrigin),De),h.style.transform="translate(".concat(-ie-De[0],"px, ").concat(-ae-De[1],"px)")+ce,ux(),this.updateState(mn(mn({},ye),{posDelta:De,direction:We,beforeDirection:We}),i)},e.prototype.getRect=function(){return mn(mn({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var o,s,a=(s=(o=i.requestChildStyle)===null||o===void 0?void 0:o.call(i))!==null&&s!==void 0?s:[];return Kr(Kr([],Tn(r),!1),Tn(a),!1)},[]);return n},e.prototype.getMoveables=function(){return Kr([],Tn(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Kr(Kr([],Tn(this.props.ables),!1),[i4],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=lg(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,o=r.dragTarget||this.areaElement,s=r.targets,a=this.differ.update(s),c=a.added,h=a.changed,d=a.removed,v=c.length||d.length;(v||this._prevOriginalDragTarget!==this._originalDragTarget)&&(L1(this,!1),L1(this,!0),this.updateState({gestos:{}})),i!==o&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=M$(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=A$(this,"GroupControl")));var w=!HD(n.container,r.container);w&&(n.container=r.container),(w||v||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||h.length||s.length&&!v$(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!v},e.prototype._updateObserver=function(){},e.defaultProps=mn(mn({},fx.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(fx),nme=function(t){Qw(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,o=i.cspNonce,s=i.cssStyled,a=i.persistData,c=i.targets||[],h=c.length,d=this.isUnmounted||!h,v=(r=a==null?void 0:a.children)!==null&&r!==void 0?r:[];return d&&!h&&v.length?c=v.map(function(){return null}):d||(v=[]),Be.createElement(s,{cspNonce:o,ref:W0(this,"controlBox"),className:Ki("control-box")},c.map(function(w,_){var E,M,D=(M=(E=i.individualGroupableProps)===null||E===void 0?void 0:E.call(i,w,_))!==null&&M!==void 0?M:{};return Be.createElement(fx,mn({key:"moveable"+_,ref:aq(n,"moveables",_)},i,D,{target:w,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:v[_]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),ux(!0),this.moveables.forEach(function(o){o.updateRect(n,r,i)}),ux()},e.prototype.getRect=function(){return mn(mn({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var o=this.moveables.map(function(c){return c.request(n,mn(mn({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,a={request:function(c){return o.forEach(function(h){return h.request(c)}),this},requestEnd:function(){return o.forEach(function(c){return c.requestEnd()}),this}};return s?a.request(r).requestEnd():a},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,o=Zf(this.moveables,function(s){var a=s.getTargets()[0],c=s.getControlBoxElement(),h=s.getDragElement();return!a||!h?!1:h===i||h.contains(i)||h!==a&&a===i||a.contains(i)||c===i||c.contains(i)});return o&&o.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Kr([],Tn(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(fx);function D$(t,e){var n=[];return t.forEach(function(r){if(r){if(Tm(r)){e[r]&&n.push.apply(n,Kr([],Tn(e[r]),!1));return}bc(r)?n.push.apply(n,Kr([],Tn(D$(r,e)),!1)):n.push(r)}}),n}function L$(t,e){var n=[];return t.forEach(function(r){if(r){if(Tm(r)){e[r]&&n.push.apply(n,Kr([],Tn(e[r]),!1));return}bc(r)?n.push(L$(r,e)):n.push(r)}}),n}function N$(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?bc(n)&&bc(i)?N$(n,i):!0:!1})}var rme=function(t){Qw(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new yq,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(o){var s=o.css;s&&s.forEach(function(a){n[a]=!0})});var i=Nx(n).join(`
`);this.defaultStyled=wq("div",bfe(Bk,jde+i))},e.getTotalAbles=function(){return Kr([b$,i4,P$,x$],Tn(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,o=i.ables,s=i.props,a=Ade(i,["ables","props"]),c=Tn(this._updateRefs(!0),2),h=c[0],d=c[1],v=D$(h,d),w=v.length>1,_=r.getTotalAbles(),E=Kr(Kr([],Tn(_),!1),Tn(o||[]),!1),M=mn(mn(mn({},a),s||{}),{ables:E,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=v;var D=null,A=this.moveable,F=a.persistData;if(F!=null&&F.children&&(w=!0),a.individualGroupable)return Be.createElement(nme,mn({key:"individual-group",ref:W0(this,"moveable")},M,{target:null,targets:v}));if(w){var O=L$(h,d);if(A&&!A.props.groupable&&!A.props.individualGroupable){var N=A.props.target;N&&v.indexOf(N)>-1&&(D=mn({},A.state))}return Be.createElement(tme,mn({key:"group",ref:W0(this,"moveable")},M,(n=a.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:v,targetGroups:O,firstRenderState:D}))}else{var H=v[0];if(A&&(A.props.groupable||A.props.individualGroupable)){var G=A.moveables||[],W=Zf(G,function(X){return X.props.target===H});W&&(D=mn({},W.state))}return Be.createElement(fx,mn({key:"single",ref:W0(this,"moveable")},M,{target:H,firstRenderState:D}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=Qk(this.props.target||this.props.targets),o=typeof document<"u",s=N$(r,i),a=this.selectorMap,c={};return this.refTargets.forEach(function h(d){if(Tm(d)){var v=a[d];v?c[d]=a[d]:o&&(s=!0,c[d]=[].slice.call(document.querySelectorAll(d)))}else bc(d)&&d.forEach(h)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var o=this._differ.update(this._elementTargets),s=o.added,a=o.removed,c=s.length||a.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var h=Tn(this._updateRefs(),3),d=h[0],v=h[1],w=h[2];this.refTargets=d,this.selectorMap=v,w&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,Rde([wfe(Hde)],e.prototype,"moveable",void 0),e}(Be.PureComponent),ime=function(t){Qw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=Qge,e}(rme),lf=63710088e-1,k$={centimeters:lf*100,centimetres:lf*100,degrees:360/(2*Math.PI),feet:lf*3.28084,inches:lf*39.37,kilometers:lf/1e3,kilometres:lf/1e3,meters:lf,metres:lf,miles:lf/1609.344,millimeters:lf*1e3,millimetres:lf*1e3,nauticalmiles:lf/1852,radians:1,yards:lf*1.0936};function a4(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function o4(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!JB(t[0])||!JB(t[1]))throw new Error("coordinates must contain numbers");return a4({type:"Point",coordinates:t},e,n)}function ame(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return a4({type:"LineString",coordinates:t},e,n)}function WD(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function ome(t,e="kilometers"){const n=k$[e];if(!n)throw new Error(e+" units is invalid");return t*n}function O$(t,e="kilometers"){const n=k$[e];if(!n)throw new Error(e+" units is invalid");return t/n}function KB(t){return t%(2*Math.PI)*180/Math.PI}function I5(t){return t%360*Math.PI/180}function JB(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function sme(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function lme(t,e,n,r={}){const i=sme(t),o=I5(i[0]),s=I5(i[1]),a=I5(n),c=O$(e,r.units),h=Math.asin(Math.sin(s)*Math.cos(c)+Math.cos(s)*Math.sin(c)*Math.cos(a)),d=o+Math.atan2(Math.sin(a)*Math.sin(c)*Math.cos(s),Math.cos(c)-Math.sin(s)*Math.sin(h)),v=KB(d),w=KB(h);return o4([v,w],r.properties)}function F$(t,e,n){if(t!==null)for(var r,i,o,s,a,c,h,d=0,v=0,w,_=t.type,E=_==="FeatureCollection",M=_==="Feature",D=E?t.features.length:1,A=0;A<D;A++){h=E?t.features[A].geometry:M?t.geometry:t,w=h?h.type==="GeometryCollection":!1,a=w?h.geometries.length:1;for(var F=0;F<a;F++){var O=0,N=0;if(s=w?h.geometries[F]:h,s!==null){c=s.coordinates;var H=s.type;switch(d=0,H){case null:break;case"Point":if(e(c,v,A,O,N)===!1)return!1;v++,O++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(e(c[r],v,A,O,N)===!1)return!1;v++,H==="MultiPoint"&&O++}H==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(i=0;i<c[r].length-d;i++){if(e(c[r][i],v,A,O,N)===!1)return!1;v++}H==="MultiLineString"&&O++,H==="Polygon"&&N++}H==="Polygon"&&O++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(N=0,i=0;i<c[r].length;i++){for(o=0;o<c[r][i].length-d;o++){if(e(c[r][i][o],v,A,O,N)===!1)return!1;v++}N++}O++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(F$(s.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function QB(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function B$(t,e){var n,r,i,o,s,a,c,h,d,v,w=0,_=t.type==="FeatureCollection",E=t.type==="Feature",M=_?t.features.length:1;for(n=0;n<M;n++){for(a=_?t.features[n].geometry:E?t.geometry:t,h=_?t.features[n].properties:E?t.properties:{},d=_?t.features[n].bbox:E?t.bbox:void 0,v=_?t.features[n].id:E?t.id:void 0,c=a?a.type==="GeometryCollection":!1,s=c?a.geometries.length:1,i=0;i<s;i++){if(o=c?a.geometries[i]:a,o===null){if(e(null,w,h,d,v)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,w,h,d,v)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(e(o.geometries[r],w,h,d,v)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}w++}}function ume(t,e={}){if(t.bbox!=null&&e.recompute!==!0)return t.bbox;const n=[1/0,1/0,-1/0,-1/0];return F$(t,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}function cme(t,e={}){const n=ume(t),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return o4([r,i],e.properties,e)}var OT={exports:{}},hme=OT.exports,ez;function fme(){return ez||(ez=1,function(t,e){(function(n,r){t.exports=r()})(hme,function(){function n(I,y){(y==null||y>I.length)&&(y=I.length);for(var b=0,R=Array(y);b<y;b++)R[b]=I[b];return R}function r(I,y,b){return y=d(y),function(R,Z){if(Z&&(typeof Z=="object"||typeof Z=="function"))return Z;if(Z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}(R)}(I,w()?Reflect.construct(y,b||[],d(I).constructor):y.apply(I,b))}function i(I,y){if(!(I instanceof y))throw new TypeError("Cannot call a class as a function")}function o(I,y,b){if(w())return Reflect.construct.apply(null,arguments);var R=[null];R.push.apply(R,y);var Z=new(I.bind.apply(I,R));return b&&_(Z,b.prototype),Z}function s(I,y){for(var b=0;b<y.length;b++){var R=y[b];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,D(R.key),R)}}function a(I,y,b){return y&&s(I.prototype,y),b&&s(I,b),Object.defineProperty(I,"prototype",{writable:!1}),I}function c(I,y){var b=typeof Symbol<"u"&&I[Symbol.iterator]||I["@@iterator"];if(!b){if(Array.isArray(I)||(b=A(I))||y){b&&(I=b);var R=0,Z=function(){};return{s:Z,n:function(){return R>=I.length?{done:!0}:{done:!1,value:I[R++]}},e:function(dt){throw dt},f:Z}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le,Me=!0,Ue=!1;return{s:function(){b=b.call(I)},n:function(){var dt=b.next();return Me=dt.done,dt},e:function(dt){Ue=!0,le=dt},f:function(){try{Me||b.return==null||b.return()}finally{if(Ue)throw le}}}}function h(){return h=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(I,y,b){var R=function(le,Me){for(;!{}.hasOwnProperty.call(le,Me)&&(le=d(le))!==null;);return le}(I,y);if(R){var Z=Object.getOwnPropertyDescriptor(R,y);return Z.get?Z.get.call(arguments.length<3?I:b):Z.value}},h.apply(null,arguments)}function d(I){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},d(I)}function v(I,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(y&&y.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),Object.defineProperty(I,"prototype",{writable:!1}),y&&_(I,y)}function w(){try{var I=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w=function(){return!!I})()}function _(I,y){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,R){return b.__proto__=R,b},_(I,y)}function E(I,y,b,R){var Z=h(d(1&R?I.prototype:I),y,b);return 2&R&&typeof Z=="function"?function(le){return Z.apply(b,le)}:Z}function M(I){return function(y){if(Array.isArray(y))return n(y)}(I)||function(y){if(typeof Symbol<"u"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}(I)||A(I)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function D(I){var y=function(b,R){if(typeof b!="object"||!b)return b;var Z=b[Symbol.toPrimitive];if(Z!==void 0){var le=Z.call(b,R);if(typeof le!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(I,"string");return typeof y=="symbol"?y:y+""}function A(I,y){if(I){if(typeof I=="string")return n(I,y);var b={}.toString.call(I).slice(8,-1);return b==="Object"&&I.constructor&&(b=I.constructor.name),b==="Map"||b==="Set"?Array.from(I):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?n(I,y):void 0}}function F(I){var y=typeof Map=="function"?new Map:void 0;return F=function(b){if(b===null||!function(Z){try{return Function.toString.call(Z).indexOf("[native code]")!==-1}catch{return typeof Z=="function"}}(b))return b;if(typeof b!="function")throw new TypeError("Super expression must either be null or a function");if(y!==void 0){if(y.has(b))return y.get(b);y.set(b,R)}function R(){return o(b,arguments,d(this).constructor)}return R.prototype=Object.create(b.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),_(R,b)},F(I)}var O=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(y){this._quadrantSegments=y,this._quadrantSegments===0&&(this._joinStyle=I.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=I.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),y<=0&&(this._quadrantSegments=1),this._joinStyle!==I.JOIN_ROUND&&(this._quadrantSegments=I.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(y){this._joinStyle=y}},{key:"setSimplifyFactor",value:function(y){this._simplifyFactor=y<0?0:y}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(y){this._endCapStyle=y}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(y){this._mitreLimit=y}},{key:"setSingleSided",value:function(y){this._isSingleSided=y}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=I.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=I.CAP_ROUND,this._joinStyle=I.JOIN_ROUND,this._mitreLimit=I.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=I.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var y=arguments[0];this.setQuadrantSegments(y)}else if(arguments.length===2){var b=arguments[0],R=arguments[1];this.setQuadrantSegments(b),this.setEndCapStyle(R)}else if(arguments.length===4){var Z=arguments[0],le=arguments[1],Me=arguments[2],Ue=arguments[3];this.setQuadrantSegments(Z),this.setEndCapStyle(le),this.setJoinStyle(Me),this.setMitreLimit(Ue)}}}},{key:"bufferDistanceError",value:function(y){var b=Math.PI/2/y;return 1-Math.cos(b/2)}}])}();O.CAP_ROUND=1,O.CAP_FLAT=2,O.CAP_SQUARE=3,O.JOIN_ROUND=1,O.JOIN_MITRE=2,O.JOIN_BEVEL=3,O.DEFAULT_QUADRANT_SEGMENTS=8,O.DEFAULT_MITRE_LIMIT=5,O.DEFAULT_SIMPLIFY_FACTOR=.01;var N=function(I){function y(b){var R;return i(this,y),(R=r(this,y,[b])).name=Object.keys({Exception:y})[0],R}return v(y,I),a(y,[{key:"toString",value:function(){return this.message}}])}(F(Error)),H=function(I){function y(b){var R;return i(this,y),(R=r(this,y,[b])).name=Object.keys({IllegalArgumentException:y})[0],R}return v(y,I),a(y)}(N),G=function(){return a(function I(){i(this,I)},[{key:"filter",value:function(I){}}])}();function W(){}function X(){}function K(){}var k,$,Q,ie,ae,ce,se,Se,ye=function(){return a(function I(){i(this,I)},null,[{key:"equalsWithTolerance",value:function(I,y,b){return Math.abs(I-y)<=b}}])}(),Te=function(){return a(function I(y,b){i(this,I),this.low=b||0,this.high=y||0},null,[{key:"toBinaryString",value:function(I){var y,b="";for(y=2147483648;y>0;y>>>=1)b+=(I.high&y)===y?"1":"0";for(y=2147483648;y>0;y>>>=1)b+=(I.low&y)===y?"1":"0";return b}}])}();function pe(){}function Ie(){}pe.NaN=NaN,pe.isNaN=function(I){return Number.isNaN(I)},pe.isInfinite=function(I){return!Number.isFinite(I)},pe.MAX_VALUE=Number.MAX_VALUE,pe.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,pe.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(ce=2146435072,se=new Float64Array(1),Se=new Int32Array(se.buffer),pe.doubleToLongBits=function(I){se[0]=I;var y=0|Se[0],b=0|Se[1];return(b&ce)===ce&&1048575&b&&y!==0&&(y=0,b=2146959360),new Te(b,y)},pe.longBitsToDouble=function(I){return Se[0]=I.low,Se[1]=I.high,se[0]}):(k=1023,$=Math.log2,Q=Math.floor,ie=Math.pow,ae=function(){for(var I=53;I>0;I--){var y=ie(2,I)-1;if(Q($(y))+1===I)return y}return 0}(),pe.doubleToLongBits=function(I){var y,b,R,Z,le,Me,Ue,dt,Nt;if(I<0||1/I===Number.NEGATIVE_INFINITY?(Me=1<<31,I=-I):Me=0,I===0)return new Te(dt=Me,Nt=0);if(I===1/0)return new Te(dt=2146435072|Me,Nt=0);if(I!=I)return new Te(dt=2146959360,Nt=0);if(Z=0,Nt=0,(y=Q(I))>1)if(y<=ae)(Z=Q($(y)))<=20?(Nt=0,dt=y<<20-Z&1048575):(Nt=y%(b=ie(2,R=Z-20))<<32-R,dt=y/b&1048575);else for(R=y,Nt=0;(R=Q(b=R/2))!==0;)Z++,Nt>>>=1,Nt|=(1&dt)<<31,dt>>>=1,b!==R&&(dt|=524288);if(Ue=Z+k,le=y===0,y=I-y,Z<52&&y!==0)for(R=0;;){if((b=2*y)>=1?(y=b-1,le?(Ue--,le=!1):(R<<=1,R|=1,Z++)):(y=b,le?--Ue==0&&(Z++,le=!1):(R<<=1,Z++)),Z===20)dt|=R,R=0;else if(Z===52){Nt|=R;break}if(b===1){Z<20?dt|=R<<20-Z:Z<52&&(Nt|=R<<52-Z);break}}return dt|=Ue<<20,new Te(dt|=Me,Nt)},pe.longBitsToDouble=function(I){var y,b,R,Z,le=I.high,Me=I.low,Ue=le&1<<31?-1:1;for(R=((2146435072&le)>>20)-k,Z=0,b=1<<19,y=1;y<=20;y++)le&b&&(Z+=ie(2,-y)),b>>>=1;for(b=1<<31,y=21;y<=52;y++)Me&b&&(Z+=ie(2,-y)),b>>>=1;if(R===-1023){if(Z===0)return 0*Ue;R=-1022}else{if(R===1024)return Z===0?Ue/0:NaN;Z+=1}return Ue*Z*ie(2,R)});var me=function(I){function y(b){var R;return i(this,y),(R=r(this,y,[b])).name=Object.keys({RuntimeException:y})[0],R}return v(y,I),a(y)}(N),xe=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,null,[{key:"constructor_",value:function(){if(arguments.length===0)me.constructor_.call(this);else if(arguments.length===1){var b=arguments[0];me.constructor_.call(this,b)}}}])}(me),ve=function(){function I(){i(this,I)}return a(I,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)I.shouldNeverReachHere(null);else if(arguments.length===1){var y=arguments[0];throw new xe("Should never reach here"+(y!==null?": "+y:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var y=arguments[0];I.isTrue(y,null)}else if(arguments.length===2){var b=arguments[1];if(!arguments[0])throw b===null?new xe:new xe(b)}}},{key:"equals",value:function(){if(arguments.length===2){var y=arguments[0],b=arguments[1];I.equals(y,b,null)}else if(arguments.length===3){var R=arguments[0],Z=arguments[1],le=arguments[2];if(!Z.equals(R))throw new xe("Expected "+R+" but encountered "+Z+(le!==null?": "+le:""))}}}])}(),Ee=new ArrayBuffer(8),De=new Float64Array(Ee),We=new Int32Array(Ee),Ae=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getM",value:function(){return pe.NaN}},{key:"setOrdinate",value:function(y,b){switch(y){case I.X:this.x=b;break;case I.Y:this.y=b;break;case I.Z:this.setZ(b);break;default:throw new H("Invalid ordinate index: "+y)}}},{key:"equals2D",value:function(){if(arguments.length===1){var y=arguments[0];return this.x===y.x&&this.y===y.y}if(arguments.length===2){var b=arguments[0],R=arguments[1];return!!ye.equalsWithTolerance(this.x,b.x,R)&&!!ye.equalsWithTolerance(this.y,b.y,R)}}},{key:"setM",value:function(y){throw new H("Invalid ordinate index: "+I.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(y){switch(y){case I.X:return this.x;case I.Y:return this.y;case I.Z:return this.getZ()}throw new H("Invalid ordinate index: "+y)}},{key:"equals3D",value:function(y){return this.x===y.x&&this.y===y.y&&(this.getZ()===y.getZ()||pe.isNaN(this.getZ())&&pe.isNaN(y.getZ()))}},{key:"equals",value:function(y){return y instanceof I&&this.equals2D(y)}},{key:"equalInZ",value:function(y,b){return ye.equalsWithTolerance(this.getZ(),y.getZ(),b)}},{key:"setX",value:function(y){this.x=y}},{key:"compareTo",value:function(y){var b=y;return this.x<b.x?-1:this.x>b.x?1:this.y<b.y?-1:this.y>b.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(y){this.z=y}},{key:"clone",value:function(){try{return null}catch(y){if(y instanceof CloneNotSupportedException)return ve.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw y}}},{key:"copy",value:function(){return new I(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(y){var b=this.x-y.x,R=this.y-y.y,Z=this.getZ()-y.getZ();return Math.sqrt(b*b+R*R+Z*Z)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(y){this.y=y}},{key:"distance",value:function(y){var b=this.x-y.x,R=this.y-y.y;return Math.sqrt(b*b+R*R)}},{key:"hashCode",value:function(){var y=17;return y=37*(y=37*y+I.hashCode(this.x))+I.hashCode(this.y)}},{key:"setCoordinate",value:function(y){this.x=y.x,this.y=y.y,this.z=y.getZ()}},{key:"interfaces_",get:function(){return[W,X,K]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)I.constructor_.call(this,0,0);else if(arguments.length===1){var y=arguments[0];I.constructor_.call(this,y.x,y.y,y.getZ())}else if(arguments.length===2){var b=arguments[0],R=arguments[1];I.constructor_.call(this,b,R,I.NULL_ORDINATE)}else if(arguments.length===3){var Z=arguments[0],le=arguments[1],Me=arguments[2];this.x=Z,this.y=le,this.z=Me}}},{key:"hashCode",value:function(y){return De[0]=y,We[0]^We[1]}}])}(),ut=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"compare",value:function(y,b){var R=I.compare(y.x,b.x);if(R!==0)return R;var Z=I.compare(y.y,b.y);return Z!==0?Z:this._dimensionsToTest<=2?0:I.compare(y.getZ(),b.getZ())}},{key:"interfaces_",get:function(){return[Ie]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)I.constructor_.call(this,2);else if(arguments.length===1){var y=arguments[0];if(y!==2&&y!==3)throw new H("only 2 or 3 dimensions may be specified");this._dimensionsToTest=y}}},{key:"compare",value:function(y,b){return y<b?-1:y>b?1:pe.isNaN(y)?pe.isNaN(b)?0:-1:pe.isNaN(b)?1:0}}])}();Ae.DimensionalComparator=ut,Ae.NULL_ORDINATE=pe.NaN,Ae.X=0,Ae.Y=1,Ae.Z=2,Ae.M=3;var pt=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(y){if(!(y instanceof I))return!1;var b=y;return this.isNull()?b.isNull():this._maxx===b.getMaxX()&&this._maxy===b.getMaxY()&&this._minx===b.getMinX()&&this._miny===b.getMinY()}},{key:"intersection",value:function(y){if(this.isNull()||y.isNull()||!this.intersects(y))return new I;var b=this._minx>y._minx?this._minx:y._minx,R=this._miny>y._miny?this._miny:y._miny;return new I(b,this._maxx<y._maxx?this._maxx:y._maxx,R,this._maxy<y._maxy?this._maxy:y._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof Ae){var y=arguments[0];return this.covers(y.x,y.y)}if(arguments[0]instanceof I){var b=arguments[0];return!this.isNull()&&!b.isNull()&&b.getMinX()>=this._minx&&b.getMaxX()<=this._maxx&&b.getMinY()>=this._miny&&b.getMaxY()<=this._maxy}}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];return!this.isNull()&&R>=this._minx&&R<=this._maxx&&Z>=this._miny&&Z<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof I){var y=arguments[0];return!this.isNull()&&!y.isNull()&&!(y._minx>this._maxx||y._maxx<this._minx||y._miny>this._maxy||y._maxy<this._miny)}if(arguments[0]instanceof Ae){var b=arguments[0];return this.intersects(b.x,b.y)}}else if(arguments.length===2){if(arguments[0]instanceof Ae&&arguments[1]instanceof Ae){var R=arguments[0],Z=arguments[1];return!this.isNull()&&!((R.x<Z.x?R.x:Z.x)>this._maxx)&&!((R.x>Z.x?R.x:Z.x)<this._minx)&&!((R.y<Z.y?R.y:Z.y)>this._maxy)&&!((R.y>Z.y?R.y:Z.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var le=arguments[0],Me=arguments[1];return!this.isNull()&&!(le>this._maxx||le<this._minx||Me>this._maxy||Me<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var y=this.getWidth(),b=this.getHeight();return Math.sqrt(y*y+b*b)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof Ae){var y=arguments[0];this.expandToInclude(y.x,y.y)}else if(arguments[0]instanceof I){var b=arguments[0];if(b.isNull())return null;this.isNull()?(this._minx=b.getMinX(),this._maxx=b.getMaxX(),this._miny=b.getMinY(),this._maxy=b.getMaxY()):(b._minx<this._minx&&(this._minx=b._minx),b._maxx>this._maxx&&(this._maxx=b._maxx),b._miny<this._miny&&(this._miny=b._miny),b._maxy>this._maxy&&(this._maxy=b._maxy))}}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];this.isNull()?(this._minx=R,this._maxx=R,this._miny=Z,this._maxy=Z):(R<this._minx&&(this._minx=R),R>this._maxx&&(this._maxx=R),Z<this._miny&&(this._miny=Z),Z>this._maxy&&(this._maxy=Z))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var y=this.getWidth(),b=this.getHeight();return y<b?y:b}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(y){var b=y;return this.isNull()?b.isNull()?0:-1:b.isNull()?1:this._minx<b._minx?-1:this._minx>b._minx?1:this._miny<b._miny?-1:this._miny>b._miny?1:this._maxx<b._maxx?-1:this._maxx>b._maxx?1:this._maxy<b._maxy?-1:this._maxy>b._maxy?1:0}},{key:"translate",value:function(y,b){if(this.isNull())return null;this.init(this.getMinX()+y,this.getMaxX()+y,this.getMinY()+b,this.getMaxY()+b)}},{key:"copy",value:function(){return new I(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(y){return!(!this.isNull()&&!y.isNull())||y._minx>this._maxx||y._maxx<this._minx||y._miny>this._maxy||y._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var y=this.getWidth(),b=this.getHeight();return y>b?y:b}},{key:"expandBy",value:function(){if(arguments.length===1){var y=arguments[0];this.expandBy(y,y)}else if(arguments.length===2){var b=arguments[0],R=arguments[1];if(this.isNull())return null;this._minx-=b,this._maxx+=b,this._miny-=R,this._maxy+=R,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof I){var y=arguments[0];return this.covers(y)}if(arguments[0]instanceof Ae){var b=arguments[0];return this.covers(b)}}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];return this.covers(R,Z)}}},{key:"centre",value:function(){return this.isNull()?null:new Ae((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Ae){var y=arguments[0];this.init(y.x,y.x,y.y,y.y)}else if(arguments[0]instanceof I){var b=arguments[0];this._minx=b._minx,this._maxx=b._maxx,this._miny=b._miny,this._maxy=b._maxy}}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];this.init(R.x,Z.x,R.y,Z.y)}else if(arguments.length===4){var le=arguments[0],Me=arguments[1],Ue=arguments[2],dt=arguments[3];le<Me?(this._minx=le,this._maxx=Me):(this._minx=Me,this._maxx=le),Ue<dt?(this._miny=Ue,this._maxy=dt):(this._miny=dt,this._maxy=Ue)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(y){if(this.intersects(y))return 0;var b=0;this._maxx<y._minx?b=y._minx-this._maxx:this._minx>y._maxx&&(b=this._minx-y._maxx);var R=0;return this._maxy<y._miny?R=y._miny-this._maxy:this._miny>y._maxy&&(R=this._miny-y._maxy),b===0?R:R===0?b:Math.sqrt(b*b+R*R)}},{key:"hashCode",value:function(){var y=17;return y=37*(y=37*(y=37*(y=37*y+Ae.hashCode(this._minx))+Ae.hashCode(this._maxx))+Ae.hashCode(this._miny))+Ae.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[W,K]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Ae){var y=arguments[0];this.init(y.x,y.x,y.y,y.y)}else if(arguments[0]instanceof I){var b=arguments[0];this.init(b)}}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];this.init(R.x,Z.x,R.y,Z.y)}else if(arguments.length===4){var le=arguments[0],Me=arguments[1],Ue=arguments[2],dt=arguments[3];this.init(le,Me,Ue,dt)}}},{key:"intersects",value:function(){if(arguments.length===3){var y=arguments[0],b=arguments[1],R=arguments[2];return R.x>=(y.x<b.x?y.x:b.x)&&R.x<=(y.x>b.x?y.x:b.x)&&R.y>=(y.y<b.y?y.y:b.y)&&R.y<=(y.y>b.y?y.y:b.y)}if(arguments.length===4){var Z=arguments[0],le=arguments[1],Me=arguments[2],Ue=arguments[3],dt=Math.min(Me.x,Ue.x),Nt=Math.max(Me.x,Ue.x),wn=Math.min(Z.x,le.x),Nn=Math.max(Z.x,le.x);return!(wn>Nt)&&!(Nn<dt)&&(dt=Math.min(Me.y,Ue.y),Nt=Math.max(Me.y,Ue.y),wn=Math.min(Z.y,le.y),Nn=Math.max(Z.y,le.y),!(wn>Nt)&&!(Nn<dt))}}}])}(),st=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===I.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(y){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(y){return this===y||this.equalsExact(y,0)}},{key:"geometryChanged",value:function(){this.apply(I.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(y){return y!==null&&this.norm().equalsExact(y.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var y;if(arguments.length===1){var b=arguments[0];return y=b,this.getTypeCode()!==y.getTypeCode()?this.getTypeCode()-y.getTypeCode():this.isEmpty()&&y.isEmpty()?0:this.isEmpty()?-1:y.isEmpty()?1:this.compareToSameClass(b)}if(arguments.length===2){var R=arguments[0],Z=arguments[1];return y=R,this.getTypeCode()!==y.getTypeCode()?this.getTypeCode()-y.getTypeCode():this.isEmpty()&&y.isEmpty()?0:this.isEmpty()?-1:y.isEmpty()?1:this.compareToSameClass(R,Z)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(y){if(y.getTypeCode()===I.TYPECODE_GEOMETRYCOLLECTION)throw new H("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(y,b,R){return R===0?y.equals(b):y.distance(b)<=R}},{key:"norm",value:function(){var y=this.copy();return y.normalize(),y}},{key:"reverse",value:function(){var y=this.reverseInternal();return this.envelope!=null&&(y.envelope=this.envelope.copy()),y.setSRID(this.getSRID()),y}},{key:"copy",value:function(){var y=this.copyInternal();return y.envelope=this._envelope==null?null:this._envelope.copy(),y._SRID=this._SRID,y._userData=this._userData,y}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new pt(this._envelope)}},{key:"setSRID",value:function(y){this._SRID=y}},{key:"setUserData",value:function(y){this._userData=y}},{key:"compare",value:function(y,b){for(var R=y.iterator(),Z=b.iterator();R.hasNext()&&Z.hasNext();){var le=R.next(),Me=Z.next(),Ue=le.compareTo(Me);if(Ue!==0)return Ue}return R.hasNext()?1:Z.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(y){return this.getClass()===y.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===I.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===I.TYPECODE_MULTIPOINT||this.getTypeCode()===I.TYPECODE_MULTILINESTRING||this.getTypeCode()===I.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[X,W,K]}},{key:"getClass",value:function(){return I}}],[{key:"hasNonEmptyElements",value:function(y){for(var b=0;b<y.length;b++)if(!y[b].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(y){for(var b=0;b<y.length;b++)if(y[b]===null)return!0;return!1}}])}();st.constructor_=function(I){I&&(this._envelope=null,this._userData=null,this._factory=I,this._SRID=I.getSRID())},st.TYPECODE_POINT=0,st.TYPECODE_MULTIPOINT=1,st.TYPECODE_LINESTRING=2,st.TYPECODE_LINEARRING=3,st.TYPECODE_MULTILINESTRING=4,st.TYPECODE_POLYGON=5,st.TYPECODE_MULTIPOLYGON=6,st.TYPECODE_GEOMETRYCOLLECTION=7,st.TYPENAME_POINT="Point",st.TYPENAME_MULTIPOINT="MultiPoint",st.TYPENAME_LINESTRING="LineString",st.TYPENAME_LINEARRING="LinearRing",st.TYPENAME_MULTILINESTRING="MultiLineString",st.TYPENAME_POLYGON="Polygon",st.TYPENAME_MULTIPOLYGON="MultiPolygon",st.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",st.geometryChangedFilter={get interfaces_(){return[G]},filter:function(I){I.geometryChangedAction()}};var Ce=function(){function I(){i(this,I)}return a(I,null,[{key:"toLocationSymbol",value:function(y){switch(y){case I.EXTERIOR:return"e";case I.BOUNDARY:return"b";case I.INTERIOR:return"i";case I.NONE:return"-"}throw new H("Unknown location value: "+y)}}])}();Ce.INTERIOR=0,Ce.BOUNDARY=1,Ce.EXTERIOR=2,Ce.NONE=-1;var It=function(){return a(function I(){i(this,I)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),Ve=function(I){function y(b){var R;return i(this,y),(R=r(this,y,[b])).name=Object.keys({NoSuchElementException:y})[0],R}return v(y,I),a(y)}(N),yt=function(I){function y(b){var R;return i(this,y),(R=r(this,y,[b])).name=Object.keys({UnsupportedOperationException:y})[0],R}return v(y,I),a(y)}(N),Ze=function(I){function y(){return i(this,y),r(this,y,arguments)}return v(y,I),a(y,[{key:"contains",value:function(){}}])}(It),wt=function(I){function y(b){var R;return i(this,y),(R=r(this,y)).map=new Map,b instanceof It&&R.addAll(b),R}return v(y,I),a(y,[{key:"contains",value:function(b){var R=b.hashCode?b.hashCode():b;return!!this.map.has(R)}},{key:"add",value:function(b){var R=b.hashCode?b.hashCode():b;return!this.map.has(R)&&!!this.map.set(R,b)}},{key:"addAll",value:function(b){var R,Z=c(b);try{for(Z.s();!(R=Z.n()).done;){var le=R.value;this.add(le)}}catch(Me){Z.e(Me)}finally{Z.f()}return!0}},{key:"remove",value:function(){throw new yt}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Ut(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(Ze),Ut=function(){return a(function I(y){i(this,I),this.iterator=y.values();var b=this.iterator.next(),R=b.done,Z=b.value;this.done=R,this.value=Z},[{key:"next",value:function(){if(this.done)throw new Ve;var I=this.value,y=this.iterator.next(),b=y.done,R=y.value;return this.done=b,this.value=R,I}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new yt}}])}(),ht=function(){function I(){i(this,I)}return a(I,null,[{key:"opposite",value:function(y){return y===I.LEFT?I.RIGHT:y===I.RIGHT?I.LEFT:y}}])}();ht.ON=0,ht.LEFT=1,ht.RIGHT=2;var qt=function(I){function y(b){var R;return i(this,y),(R=r(this,y,[b])).name=Object.keys({EmptyStackException:y})[0],R}return v(y,I),a(y)}(N),Ye=function(I){function y(b){var R;return i(this,y),(R=r(this,y,[b])).name=Object.keys({IndexOutOfBoundsException:y})[0],R}return v(y,I),a(y)}(N),Re=function(I){function y(){return i(this,y),r(this,y,arguments)}return v(y,I),a(y,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(It),Pt=function(I){function y(){var b;return i(this,y),(b=r(this,y)).array=[],b}return v(y,I),a(y,[{key:"add",value:function(b){return this.array.push(b),!0}},{key:"get",value:function(b){if(b<0||b>=this.size())throw new Ye;return this.array[b]}},{key:"push",value:function(b){return this.array.push(b),b}},{key:"pop",value:function(){if(this.array.length===0)throw new qt;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new qt;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(b){return this.array.indexOf(b)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(Re);function Dt(I,y){return I.interfaces_&&I.interfaces_.indexOf(y)>-1}var At=function(){return a(function I(y){i(this,I),this.str=y},[{key:"append",value:function(I){this.str+=I}},{key:"setCharAt",value:function(I,y){this.str=this.str.substr(0,I)+y+this.str.substr(I+1)}},{key:"toString",value:function(){return this.str}}])}(),Bt=function(){function I(y){i(this,I),this.value=y}return a(I,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(y){return this.value<y?-1:this.value>y?1:0}}],[{key:"compare",value:function(y,b){return y<b?-1:y>b?1:0}},{key:"isNan",value:function(y){return Number.isNaN(y)}},{key:"valueOf",value:function(y){return new I(y)}}])}(),gn=function(){return a(function I(){i(this,I)},null,[{key:"isWhitespace",value:function(I){return I<=32&&I>=0||I===127}},{key:"toUpperCase",value:function(I){return I.toUpperCase()}}])}(),Zt=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"le",value:function(y){return this._hi<y._hi||this._hi===y._hi&&this._lo<=y._lo}},{key:"extractSignificantDigits",value:function(y,b){var R=this.abs(),Z=I.magnitude(R._hi),le=I.TEN.pow(Z);(R=R.divide(le)).gt(I.TEN)?(R=R.divide(I.TEN),Z+=1):R.lt(I.ONE)&&(R=R.multiply(I.TEN),Z-=1);for(var Me=Z+1,Ue=new At,dt=I.MAX_PRINT_DIGITS-1,Nt=0;Nt<=dt;Nt++){y&&Nt===Me&&Ue.append(".");var wn=Math.trunc(R._hi);if(wn<0)break;var Nn=!1,dr=0;wn>9?(Nn=!0,dr="9"):dr="0"+wn,Ue.append(dr),R=R.subtract(I.valueOf(wn)).multiply(I.TEN),Nn&&R.selfAdd(I.TEN);var $r=!0,mi=I.magnitude(R._hi);if(mi<0&&Math.abs(mi)>=dt-Nt&&($r=!1),!$r)break}return b[0]=Z,Ue.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof I){var y=arguments[0];return this.add(y.negate())}if(typeof arguments[0]=="number"){var b=arguments[0];return this.add(-b)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof I){var y=arguments[0];return this._hi===y._hi&&this._lo===y._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof I){var y=arguments[0];return this.isNaN()?this:this.selfAdd(-y._hi,-y._lo)}if(typeof arguments[0]=="number"){var b=arguments[0];return this.isNaN()?this:this.selfAdd(-b,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(y){return this.le(y)?this:y}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof I){var y=arguments[0];return this.selfDivide(y._hi,y._lo)}if(typeof arguments[0]=="number"){var b=arguments[0];return this.selfDivide(b,0)}}else if(arguments.length===2){var R,Z,le,Me,Ue=arguments[0],dt=arguments[1],Nt=null,wn=null,Nn=null,dr=null;return le=this._hi/Ue,dr=(Nt=(Nn=I.SPLIT*le)-(Nt=Nn-le))*(wn=(dr=I.SPLIT*Ue)-(wn=dr-Ue))-(Me=le*Ue)+Nt*(Z=Ue-wn)+(R=le-Nt)*wn+R*Z,dr=le+(Nn=(this._hi-Me-dr+this._lo-le*dt)/Ue),this._hi=dr,this._lo=le-dr+Nn,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof I){var y,b,R,Z,le=arguments[0],Me=null,Ue=null,dt=null,Nt=null;return y=(R=this._hi/le._hi)-(Me=(dt=I.SPLIT*R)-(Me=dt-R)),Nt=Me*(Ue=(Nt=I.SPLIT*le._hi)-(Ue=Nt-le._hi))-(Z=R*le._hi)+Me*(b=le._hi-Ue)+y*Ue+y*b,new I(Nt=R+(dt=(this._hi-Z-Nt+this._lo-R*le._lo)/le._hi),R-Nt+dt)}if(typeof arguments[0]=="number"){var wn=arguments[0];return pe.isNaN(wn)?I.createNaN():I.copy(this).selfDivide(wn,0)}}},{key:"ge",value:function(y){return this._hi>y._hi||this._hi===y._hi&&this._lo>=y._lo}},{key:"pow",value:function(y){if(y===0)return I.valueOf(1);var b=new I(this),R=I.valueOf(1),Z=Math.abs(y);if(Z>1)for(;Z>0;)Z%2==1&&R.selfMultiply(b),(Z/=2)>0&&(b=b.sqr());else R=b;return y<0?R.reciprocal():R}},{key:"ceil",value:function(){if(this.isNaN())return I.NaN;var y=Math.ceil(this._hi),b=0;return y===this._hi&&(b=Math.ceil(this._lo)),new I(y,b)}},{key:"compareTo",value:function(y){var b=y;return this._hi<b._hi?-1:this._hi>b._hi?1:this._lo<b._lo?-1:this._lo>b._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof I){var y=arguments[0];return this.init(y),this}if(typeof arguments[0]=="number"){var b=arguments[0];return this.init(b),this}}},{key:"max",value:function(y){return this.ge(y)?this:y}},{key:"sqrt",value:function(){if(this.isZero())return I.valueOf(0);if(this.isNegative())return I.NaN;var y=1/Math.sqrt(this._hi),b=this._hi*y,R=I.valueOf(b),Z=this.subtract(R.sqr())._hi*(.5*y);return R.add(Z)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof I){var y=arguments[0];return this.selfAdd(y._hi,y._lo)}if(typeof arguments[0]=="number"){var b,R,Z,le,Me,Ue=arguments[0],dt=null;return dt=(Z=this._hi+Ue)-(le=Z-this._hi),R=(Me=(dt=Ue-le+(this._hi-dt))+this._lo)+(Z-(b=Z+Me)),this._hi=b+R,this._lo=R+(b-this._hi),this}}else if(arguments.length===2){var Nt,wn,Nn,dr,$r=arguments[0],mi=arguments[1],xi=null,si=null,ci=null;Nn=this._hi+$r,wn=this._lo+mi,si=Nn-(ci=Nn-this._hi),xi=wn-(dr=wn-this._lo);var Fi=(Nt=Nn+(ci=(si=$r-ci+(this._hi-si))+wn))+(ci=(xi=mi-dr+(this._lo-xi))+(ci+(Nn-Nt))),hi=ci+(Nt-Fi);return this._hi=Fi,this._lo=hi,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof I){var y=arguments[0];return this.selfMultiply(y._hi,y._lo)}if(typeof arguments[0]=="number"){var b=arguments[0];return this.selfMultiply(b,0)}}else if(arguments.length===2){var R,Z,le=arguments[0],Me=arguments[1],Ue=null,dt=null,Nt=null,wn=null;Ue=(Nt=I.SPLIT*this._hi)-this._hi,wn=I.SPLIT*le,Ue=Nt-Ue,R=this._hi-Ue,dt=wn-le;var Nn=(Nt=this._hi*le)+(wn=Ue*(dt=wn-dt)-Nt+Ue*(Z=le-dt)+R*dt+R*Z+(this._hi*Me+this._lo*le)),dr=wn+(Ue=Nt-Nn);return this._hi=Nn,this._lo=dr,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return I.NaN;var y=Math.floor(this._hi),b=0;return y===this._hi&&(b=Math.floor(this._lo)),new I(y,b)}},{key:"negate",value:function(){return this.isNaN()?this:new I(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(y){if(y instanceof CloneNotSupportedException)return null;throw y}}},{key:"multiply",value:function(){if(arguments[0]instanceof I){var y=arguments[0];return y.isNaN()?I.createNaN():I.copy(this).selfMultiply(y)}if(typeof arguments[0]=="number"){var b=arguments[0];return pe.isNaN(b)?I.createNaN():I.copy(this).selfMultiply(b,0)}}},{key:"isNaN",value:function(){return pe.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var y=I.magnitude(this._hi);return y>=-3&&y<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var y=this.getSpecialNumberString();if(y!==null)return y;var b=new Array(1).fill(null),R=this.extractSignificantDigits(!0,b),Z=b[0]+1,le=R;if(R.charAt(0)===".")le="0"+R;else if(Z<0)le="0."+I.stringOfChar("0",-Z)+R;else if(R.indexOf(".")===-1){var Me=Z-R.length;le=R+I.stringOfChar("0",Me)+".0"}return this.isNegative()?"-"+le:le}},{key:"reciprocal",value:function(){var y,b,R,Z,le=null,Me=null,Ue=null,dt=null;y=(R=1/this._hi)-(le=(Ue=I.SPLIT*R)-(le=Ue-R)),Me=(dt=I.SPLIT*this._hi)-this._hi;var Nt=R+(Ue=(1-(Z=R*this._hi)-(dt=le*(Me=dt-Me)-Z+le*(b=this._hi-Me)+y*Me+y*b)-R*this._lo)/this._hi);return new I(Nt,R-Nt+Ue)}},{key:"toSciNotation",value:function(){if(this.isZero())return I.SCI_NOT_ZERO;var y=this.getSpecialNumberString();if(y!==null)return y;var b=new Array(1).fill(null),R=this.extractSignificantDigits(!1,b),Z=I.SCI_NOT_EXPONENT_CHAR+b[0];if(R.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+R);var le="";R.length>1&&(le=R.substring(1));var Me=R.charAt(0)+"."+le;return this.isNegative()?"-"+Me+Z:Me+Z}},{key:"abs",value:function(){return this.isNaN()?I.NaN:this.isNegative()?this.negate():new I(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(y){return this._hi<y._hi||this._hi===y._hi&&this._lo<y._lo}},{key:"add",value:function(){if(arguments[0]instanceof I){var y=arguments[0];return I.copy(this).selfAdd(y)}if(typeof arguments[0]=="number"){var b=arguments[0];return I.copy(this).selfAdd(b)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var y=arguments[0];this._hi=y,this._lo=0}else if(arguments[0]instanceof I){var b=arguments[0];this._hi=b._hi,this._lo=b._lo}}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];this._hi=R,this._lo=Z}}},{key:"gt",value:function(y){return this._hi>y._hi||this._hi===y._hi&&this._lo>y._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?I.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[K,W,X]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var y=arguments[0];this.init(y)}else if(arguments[0]instanceof I){var b=arguments[0];this.init(b)}else if(typeof arguments[0]=="string"){var R=arguments[0];I.constructor_.call(this,I.parse(R))}}else if(arguments.length===2){var Z=arguments[0],le=arguments[1];this.init(Z,le)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var y=arguments[0],b=arguments[1],R=arguments[2],Z=arguments[3];return I.determinant(I.valueOf(y),I.valueOf(b),I.valueOf(R),I.valueOf(Z))}if(arguments[3]instanceof I&&arguments[2]instanceof I&&arguments[0]instanceof I&&arguments[1]instanceof I){var le=arguments[1],Me=arguments[2],Ue=arguments[3];return arguments[0].multiply(Ue).selfSubtract(le.multiply(Me))}}},{key:"sqr",value:function(y){return I.valueOf(y).selfMultiply(y)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var y=arguments[0];return I.parse(y)}if(typeof arguments[0]=="number")return new I(arguments[0])}},{key:"sqrt",value:function(y){return I.valueOf(y).sqrt()}},{key:"parse",value:function(y){for(var b=0,R=y.length;gn.isWhitespace(y.charAt(b));)b++;var Z=!1;if(b<R){var le=y.charAt(b);le!=="-"&&le!=="+"||(b++,le==="-"&&(Z=!0))}for(var Me=new I,Ue=0,dt=0,Nt=0,wn=!1;!(b>=R);){var Nn=y.charAt(b);if(b++,gn.isDigit(Nn)){var dr=Nn-"0";Me.selfMultiply(I.TEN),Me.selfAdd(dr),Ue++}else{if(Nn!=="."){if(Nn==="e"||Nn==="E"){var $r=y.substring(b);try{Nt=Bt.parseInt($r)}catch(Fi){throw Fi instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+$r+" in string "+y):Fi}break}throw new NumberFormatException("Unexpected character '"+Nn+"' at position "+b+" in string "+y)}dt=Ue,wn=!0}}var mi=Me;wn||(dt=Ue);var xi=Ue-dt-Nt;if(xi===0)mi=Me;else if(xi>0){var si=I.TEN.pow(xi);mi=Me.divide(si)}else if(xi<0){var ci=I.TEN.pow(-xi);mi=Me.multiply(ci)}return Z?mi.negate():mi}},{key:"createNaN",value:function(){return new I(pe.NaN,pe.NaN)}},{key:"copy",value:function(y){return new I(y)}},{key:"magnitude",value:function(y){var b=Math.abs(y),R=Math.log(b)/Math.log(10),Z=Math.trunc(Math.floor(R));return 10*Math.pow(10,Z)<=b&&(Z+=1),Z}},{key:"stringOfChar",value:function(y,b){for(var R=new At,Z=0;Z<b;Z++)R.append(y);return R.toString()}}])}();Zt.PI=new Zt(3.141592653589793,12246467991473532e-32),Zt.TWO_PI=new Zt(6.283185307179586,24492935982947064e-32),Zt.PI_2=new Zt(1.5707963267948966,6123233995736766e-32),Zt.E=new Zt(2.718281828459045,14456468917292502e-32),Zt.NaN=new Zt(pe.NaN,pe.NaN),Zt.EPS=123259516440783e-46,Zt.SPLIT=134217729,Zt.MAX_PRINT_DIGITS=32,Zt.TEN=Zt.valueOf(10),Zt.ONE=Zt.valueOf(1),Zt.SCI_NOT_EXPONENT_CHAR="E",Zt.SCI_NOT_ZERO="0.0E0";var cn=function(){function I(){i(this,I)}return a(I,null,[{key:"orientationIndex",value:function(y,b,R){var Z=I.orientationIndexFilter(y,b,R);if(Z<=1)return Z;var le=Zt.valueOf(b.x).selfAdd(-y.x),Me=Zt.valueOf(b.y).selfAdd(-y.y),Ue=Zt.valueOf(R.x).selfAdd(-b.x),dt=Zt.valueOf(R.y).selfAdd(-b.y);return le.selfMultiply(dt).selfSubtract(Me.selfMultiply(Ue)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof Zt&&arguments[2]instanceof Zt&&arguments[0]instanceof Zt&&arguments[1]instanceof Zt){var y=arguments[1],b=arguments[2],R=arguments[3];return arguments[0].multiply(R).selfSubtract(y.multiply(b)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var Z=arguments[0],le=arguments[1],Me=arguments[2],Ue=arguments[3],dt=Zt.valueOf(Z),Nt=Zt.valueOf(le),wn=Zt.valueOf(Me),Nn=Zt.valueOf(Ue);return dt.multiply(Nn).selfSubtract(Nt.multiply(wn)).signum()}}},{key:"intersection",value:function(y,b,R,Z){var le=new Zt(y.y).selfSubtract(b.y),Me=new Zt(b.x).selfSubtract(y.x),Ue=new Zt(y.x).selfMultiply(b.y).selfSubtract(new Zt(b.x).selfMultiply(y.y)),dt=new Zt(R.y).selfSubtract(Z.y),Nt=new Zt(Z.x).selfSubtract(R.x),wn=new Zt(R.x).selfMultiply(Z.y).selfSubtract(new Zt(Z.x).selfMultiply(R.y)),Nn=Me.multiply(wn).selfSubtract(Nt.multiply(Ue)),dr=dt.multiply(Ue).selfSubtract(le.multiply(wn)),$r=le.multiply(Nt).selfSubtract(dt.multiply(Me)),mi=Nn.selfDivide($r).doubleValue(),xi=dr.selfDivide($r).doubleValue();return pe.isNaN(mi)||pe.isInfinite(mi)||pe.isNaN(xi)||pe.isInfinite(xi)?null:new Ae(mi,xi)}},{key:"orientationIndexFilter",value:function(y,b,R){var Z=null,le=(y.x-R.x)*(b.y-R.y),Me=(y.y-R.y)*(b.x-R.x),Ue=le-Me;if(le>0){if(Me<=0)return I.signum(Ue);Z=le+Me}else{if(!(le<0)||Me>=0)return I.signum(Ue);Z=-le-Me}var dt=I.DP_SAFE_EPSILON*Z;return Ue>=dt||-Ue>=dt?I.signum(Ue):2}},{key:"signum",value:function(y){return y>0?1:y<0?-1:0}}])}();cn.DP_SAFE_EPSILON=1e-15;var $t=function(){return a(function I(){i(this,I)},[{key:"getM",value:function(I){if(this.hasM()){var y=this.getDimension()-this.getMeasures();return this.getOrdinate(I,y)}return pe.NaN}},{key:"setOrdinate",value:function(I,y,b){}},{key:"getZ",value:function(I){return this.hasZ()?this.getOrdinate(I,2):pe.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(I,y){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(I){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(I){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(I){}},{key:"copy",value:function(){}},{key:"getY",value:function(I){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[X]}}])}();$t.X=0,$t.Y=1,$t.Z=2,$t.M=3;var Et=function(){function I(){i(this,I)}return a(I,null,[{key:"index",value:function(y,b,R){return cn.orientationIndex(y,b,R)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var y=arguments[0],b=y.length-1;if(b<3)throw new H("Ring has fewer than 4 points, so orientation cannot be determined");for(var R=y[0],Z=0,le=1;le<=b;le++){var Me=y[le];Me.y>R.y&&(R=Me,Z=le)}var Ue=Z;do(Ue-=1)<0&&(Ue=b);while(y[Ue].equals2D(R)&&Ue!==Z);var dt=Z;do dt=(dt+1)%b;while(y[dt].equals2D(R)&&dt!==Z);var Nt=y[Ue],wn=y[dt];if(Nt.equals2D(R)||wn.equals2D(R)||Nt.equals2D(wn))return!1;var Nn=I.index(Nt,R,wn);return Nn===0?Nt.x>wn.x:Nn>0}if(Dt(arguments[0],$t)){var dr=arguments[0],$r=dr.size()-1;if($r<3)throw new H("Ring has fewer than 4 points, so orientation cannot be determined");for(var mi=dr.getCoordinate(0),xi=0,si=1;si<=$r;si++){var ci=dr.getCoordinate(si);ci.y>mi.y&&(mi=ci,xi=si)}var Fi=null,hi=xi;do(hi-=1)<0&&(hi=$r),Fi=dr.getCoordinate(hi);while(Fi.equals2D(mi)&&hi!==xi);var Ii=null,Di=xi;do Di=(Di+1)%$r,Ii=dr.getCoordinate(Di);while(Ii.equals2D(mi)&&Di!==xi);if(Fi.equals2D(mi)||Ii.equals2D(mi)||Fi.equals2D(Ii))return!1;var xa=I.index(Fi,mi,Ii);return xa===0?Fi.x>Ii.x:xa>0}}}])}();Et.CLOCKWISE=-1,Et.RIGHT=Et.CLOCKWISE,Et.COUNTERCLOCKWISE=1,Et.LEFT=Et.COUNTERCLOCKWISE,Et.COLLINEAR=0,Et.STRAIGHT=Et.COLLINEAR;var qn=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(I,y){var b=this.getRightmostSideOfSegment(I,y);return b<0&&(b=this.getRightmostSideOfSegment(I,y-1)),b<0&&(this._minCoord=null,this.checkForRightmostCoordinate(I)),b}},{key:"findRightmostEdgeAtVertex",value:function(){var I=this._minDe.getEdge().getCoordinates();ve.isTrue(this._minIndex>0&&this._minIndex<I.length,"rightmost point expected to be interior vertex of edge");var y=I[this._minIndex-1],b=I[this._minIndex+1],R=Et.index(this._minCoord,b,y),Z=!1;(y.y<this._minCoord.y&&b.y<this._minCoord.y&&R===Et.COUNTERCLOCKWISE||y.y>this._minCoord.y&&b.y>this._minCoord.y&&R===Et.CLOCKWISE)&&(Z=!0),Z&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(I,y){var b=I.getEdge().getCoordinates();if(y<0||y+1>=b.length||b[y].y===b[y+1].y)return-1;var R=ht.LEFT;return b[y].y<b[y+1].y&&(R=ht.RIGHT),R}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(I){for(var y=I.getEdge().getCoordinates(),b=0;b<y.length-1;b++)(this._minCoord===null||y[b].x>this._minCoord.x)&&(this._minDe=I,this._minIndex=b,this._minCoord=y[b])}},{key:"findRightmostEdgeAtNode",value:function(){var I=this._minDe.getNode().getEdges();this._minDe=I.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(I){for(var y=I.iterator();y.hasNext();){var b=y.next();b.isForward()&&this.checkForRightmostCoordinate(b)}ve.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ht.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),Dn=function(I){function y(b,R){var Z;return i(this,y),(Z=r(this,y,[R?b+" [ "+R+" ]":b])).pt=R?new Ae(R):void 0,Z.name=Object.keys({TopologyException:y})[0],Z}return v(y,I),a(y,[{key:"getCoordinate",value:function(){return this.pt}}])}(me),sr=function(){return a(function I(){i(this,I),this.array=[]},[{key:"addLast",value:function(I){this.array.push(I)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),rt=function(I){function y(b){var R;return i(this,y),(R=r(this,y)).array=[],b instanceof It&&R.addAll(b),R}return v(y,I),a(y,[{key:"interfaces_",get:function(){return[Re,It]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(b){return arguments.length===1?this.array.push(b):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(b){var R,Z=c(b);try{for(Z.s();!(R=Z.n()).done;){var le=R.value;this.array.push(le)}}catch(Me){Z.e(Me)}finally{Z.f()}}},{key:"set",value:function(b,R){var Z=this.array[b];return this.array[b]=R,Z}},{key:"iterator",value:function(){return new ze(this)}},{key:"get",value:function(b){if(b<0||b>=this.size())throw new Ye;return this.array[b]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(b){b?this.array.sort(function(R,Z){return b.compare(R,Z)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(b){for(var R=0,Z=this.array.length;R<Z;R++)if(this.array[R]===b)return!!this.array.splice(R,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(Re),ze=function(){return a(function I(y){i(this,I),this.arrayList=y,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Ve;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(I){return this.arrayList.set(this.position-1,I)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),Xe=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var I=this._dirEdgeList.iterator();I.hasNext();)I.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(I){for(var y=null,b=I.getEdges().iterator();b.hasNext();){var R=b.next();if(R.isVisited()||R.getSym().isVisited()){y=R;break}}if(y===null)throw new Dn("unable to find edge to compute depths at "+I.getCoordinate());I.getEdges().computeDepths(y);for(var Z=I.getEdges().iterator();Z.hasNext();){var le=Z.next();le.setVisited(!0),this.copySymDepths(le)}}},{key:"computeDepth",value:function(I){this.clearVisitedEdges();var y=this._finder.getEdge();y.getNode(),y.getLabel(),y.setEdgeDepths(ht.RIGHT,I),this.copySymDepths(y),this.computeDepths(y)}},{key:"create",value:function(I){this.addReachable(I),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var I=this._dirEdgeList.iterator();I.hasNext();){var y=I.next();y.getDepth(ht.RIGHT)>=1&&y.getDepth(ht.LEFT)<=0&&!y.isInteriorAreaEdge()&&y.setInResult(!0)}}},{key:"computeDepths",value:function(I){var y=new wt,b=new sr,R=I.getNode();for(b.addLast(R),y.add(R),I.setVisited(!0);!b.isEmpty();){var Z=b.removeFirst();y.add(Z),this.computeNodeDepth(Z);for(var le=Z.getEdges().iterator();le.hasNext();){var Me=le.next().getSym();if(!Me.isVisited()){var Ue=Me.getNode();y.contains(Ue)||(b.addLast(Ue),y.add(Ue))}}}}},{key:"compareTo",value:function(I){var y=I;return this._rightMostCoord.x<y._rightMostCoord.x?-1:this._rightMostCoord.x>y._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var I=new pt,y=this._dirEdgeList.iterator();y.hasNext();)for(var b=y.next().getEdge().getCoordinates(),R=0;R<b.length-1;R++)I.expandToInclude(b[R]);this._env=I}return this._env}},{key:"addReachable",value:function(I){var y=new Pt;for(y.add(I);!y.empty();){var b=y.pop();this.add(b,y)}}},{key:"copySymDepths",value:function(I){var y=I.getSym();y.setDepth(ht.LEFT,I.getDepth(ht.RIGHT)),y.setDepth(ht.RIGHT,I.getDepth(ht.LEFT))}},{key:"add",value:function(I,y){I.setVisited(!0),this._nodes.add(I);for(var b=I.getEdges().iterator();b.hasNext();){var R=b.next();this._dirEdgeList.add(R);var Z=R.getSym().getNode();Z.isVisited()||y.push(Z)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new rt,this._nodes=new rt,this._rightMostCoord=null,this._env=null,this._finder=new qn}}])}(),Fe=function(){return a(function I(){i(this,I)},null,[{key:"intersection",value:function(I,y,b,R){var Z=I.x<y.x?I.x:y.x,le=I.y<y.y?I.y:y.y,Me=I.x>y.x?I.x:y.x,Ue=I.y>y.y?I.y:y.y,dt=b.x<R.x?b.x:R.x,Nt=b.y<R.y?b.y:R.y,wn=b.x>R.x?b.x:R.x,Nn=b.y>R.y?b.y:R.y,dr=((Z>dt?Z:dt)+(Me<wn?Me:wn))/2,$r=((le>Nt?le:Nt)+(Ue<Nn?Ue:Nn))/2,mi=I.x-dr,xi=I.y-$r,si=y.x-dr,ci=y.y-$r,Fi=b.x-dr,hi=b.y-$r,Ii=R.x-dr,Di=R.y-$r,xa=xi-ci,ka=si-mi,Bs=mi*ci-si*xi,kl=hi-Di,ul=Ii-Fi,Ks=Fi*Di-Ii*hi,ou=xa*ul-kl*ka,Js=(ka*Ks-ul*Bs)/ou,So=(kl*Bs-xa*Ks)/ou;return pe.isNaN(Js)||pe.isInfinite(Js)||pe.isNaN(So)||pe.isInfinite(So)?null:new Ae(Js+dr,So+$r)}}])}(),He=function(){return a(function I(){i(this,I)},null,[{key:"arraycopy",value:function(I,y,b,R,Z){for(var le=0,Me=y;Me<y+Z;Me++)b[R+le]=I[Me],le++}},{key:"getProperty",value:function(I){return{"line.separator":`
`}[I]}}])}(),mt=function(){function I(){i(this,I)}return a(I,null,[{key:"log10",value:function(y){var b=Math.log(y);return pe.isInfinite(b)||pe.isNaN(b)?b:b/I.LOG_10}},{key:"min",value:function(y,b,R,Z){var le=y;return b<le&&(le=b),R<le&&(le=R),Z<le&&(le=Z),le}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var y=arguments[0],b=arguments[1],R=arguments[2];return y<b?b:y>R?R:y}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Z=arguments[0],le=arguments[1],Me=arguments[2];return Z<le?le:Z>Me?Me:Z}}},{key:"wrap",value:function(y,b){return y<0?b- -y%b:y%b}},{key:"max",value:function(){if(arguments.length===3){var y=arguments[1],b=arguments[2],R=arguments[0];return y>R&&(R=y),b>R&&(R=b),R}if(arguments.length===4){var Z=arguments[1],le=arguments[2],Me=arguments[3],Ue=arguments[0];return Z>Ue&&(Ue=Z),le>Ue&&(Ue=le),Me>Ue&&(Ue=Me),Ue}}},{key:"average",value:function(y,b){return(y+b)/2}}])}();mt.LOG_10=Math.log(10);var it=function(){function I(){i(this,I)}return a(I,null,[{key:"segmentToSegment",value:function(y,b,R,Z){if(y.equals(b))return I.pointToSegment(y,R,Z);if(R.equals(Z))return I.pointToSegment(Z,y,b);var le=!1;if(pt.intersects(y,b,R,Z)){var Me=(b.x-y.x)*(Z.y-R.y)-(b.y-y.y)*(Z.x-R.x);if(Me===0)le=!0;else{var Ue=(y.y-R.y)*(Z.x-R.x)-(y.x-R.x)*(Z.y-R.y),dt=((y.y-R.y)*(b.x-y.x)-(y.x-R.x)*(b.y-y.y))/Me,Nt=Ue/Me;(Nt<0||Nt>1||dt<0||dt>1)&&(le=!0)}}else le=!0;return le?mt.min(I.pointToSegment(y,R,Z),I.pointToSegment(b,R,Z),I.pointToSegment(R,y,b),I.pointToSegment(Z,y,b)):0}},{key:"pointToSegment",value:function(y,b,R){if(b.x===R.x&&b.y===R.y)return y.distance(b);var Z=(R.x-b.x)*(R.x-b.x)+(R.y-b.y)*(R.y-b.y),le=((y.x-b.x)*(R.x-b.x)+(y.y-b.y)*(R.y-b.y))/Z;if(le<=0)return y.distance(b);if(le>=1)return y.distance(R);var Me=((b.y-y.y)*(R.x-b.x)-(b.x-y.x)*(R.y-b.y))/Z;return Math.abs(Me)*Math.sqrt(Z)}},{key:"pointToLinePerpendicular",value:function(y,b,R){var Z=(R.x-b.x)*(R.x-b.x)+(R.y-b.y)*(R.y-b.y),le=((b.y-y.y)*(R.x-b.x)-(b.x-y.x)*(R.y-b.y))/Z;return Math.abs(le)*Math.sqrt(Z)}},{key:"pointToSegmentString",value:function(y,b){if(b.length===0)throw new H("Line array must contain at least one vertex");for(var R=y.distance(b[0]),Z=0;Z<b.length-1;Z++){var le=I.pointToSegment(y,b[Z],b[Z+1]);le<R&&(R=le)}return R}}])}(),xt=function(){return a(function I(){i(this,I)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Dt(arguments[0],$t);else if(arguments.length!==2){if(arguments.length===3){var I=arguments[0],y=arguments[1];return this.create(I,y)}}}}])}(),Tt=function(){return a(function I(){i(this,I)},[{key:"filter",value:function(I){}}])}(),kt=function(){return a(function I(){i(this,I)},null,[{key:"ofLine",value:function(I){var y=I.size();if(y<=1)return 0;var b=0,R=new Ae;I.getCoordinate(0,R);for(var Z=R.x,le=R.y,Me=1;Me<y;Me++){I.getCoordinate(Me,R);var Ue=R.x,dt=R.y,Nt=Ue-Z,wn=dt-le;b+=Math.sqrt(Nt*Nt+wn*wn),Z=Ue,le=dt}return b}}])}(),Jt=a(function I(){i(this,I)}),rn=function(){function I(){i(this,I)}return a(I,null,[{key:"copyCoord",value:function(y,b,R,Z){for(var le=Math.min(y.getDimension(),R.getDimension()),Me=0;Me<le;Me++)R.setOrdinate(Z,Me,y.getOrdinate(b,Me))}},{key:"isRing",value:function(y){var b=y.size();return b===0||!(b<=3)&&y.getOrdinate(0,$t.X)===y.getOrdinate(b-1,$t.X)&&y.getOrdinate(0,$t.Y)===y.getOrdinate(b-1,$t.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Dt(arguments[0],$t)&&Number.isInteger(arguments[1])){var y=arguments[0],b=arguments[1];I.scroll(y,b,I.isRing(y))}else if(Dt(arguments[0],$t)&&arguments[1]instanceof Ae){var R=arguments[0],Z=arguments[1],le=I.indexOf(Z,R);if(le<=0)return null;I.scroll(R,le)}}else if(arguments.length===3){var Me=arguments[0],Ue=arguments[1],dt=arguments[2];if(Ue<=0)return null;for(var Nt=Me.copy(),wn=dt?Me.size()-1:Me.size(),Nn=0;Nn<wn;Nn++)for(var dr=0;dr<Me.getDimension();dr++)Me.setOrdinate(Nn,dr,Nt.getOrdinate((Ue+Nn)%wn,dr));if(dt)for(var $r=0;$r<Me.getDimension();$r++)Me.setOrdinate(wn,$r,Me.getOrdinate(0,$r))}}},{key:"isEqual",value:function(y,b){var R=y.size();if(R!==b.size())return!1;for(var Z=Math.min(y.getDimension(),b.getDimension()),le=0;le<R;le++)for(var Me=0;Me<Z;Me++){var Ue=y.getOrdinate(le,Me),dt=b.getOrdinate(le,Me);if(y.getOrdinate(le,Me)!==b.getOrdinate(le,Me)&&(!pe.isNaN(Ue)||!pe.isNaN(dt)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var y=arguments[0];return I.minCoordinateIndex(y,0,y.size()-1)}if(arguments.length===3){for(var b=arguments[0],R=arguments[2],Z=-1,le=null,Me=arguments[1];Me<=R;Me++){var Ue=b.getCoordinate(Me);(le===null||le.compareTo(Ue)>0)&&(le=Ue,Z=Me)}return Z}}},{key:"extend",value:function(y,b,R){var Z=y.create(R,b.getDimension()),le=b.size();if(I.copy(b,0,Z,0,le),le>0)for(var Me=le;Me<R;Me++)I.copy(b,le-1,Z,Me,1);return Z}},{key:"reverse",value:function(y){for(var b=y.size()-1,R=Math.trunc(b/2),Z=0;Z<=R;Z++)I.swap(y,Z,b-Z)}},{key:"swap",value:function(y,b,R){if(b===R)return null;for(var Z=0;Z<y.getDimension();Z++){var le=y.getOrdinate(b,Z);y.setOrdinate(b,Z,y.getOrdinate(R,Z)),y.setOrdinate(R,Z,le)}}},{key:"copy",value:function(y,b,R,Z,le){for(var Me=0;Me<le;Me++)I.copyCoord(y,b+Me,R,Z+Me)}},{key:"ensureValidRing",value:function(y,b){var R=b.size();return R===0?b:R<=3?I.createClosedRing(y,b,4):b.getOrdinate(0,$t.X)===b.getOrdinate(R-1,$t.X)&&b.getOrdinate(0,$t.Y)===b.getOrdinate(R-1,$t.Y)?b:I.createClosedRing(y,b,R+1)}},{key:"indexOf",value:function(y,b){for(var R=0;R<b.size();R++)if(y.x===b.getOrdinate(R,$t.X)&&y.y===b.getOrdinate(R,$t.Y))return R;return-1}},{key:"createClosedRing",value:function(y,b,R){var Z=y.create(R,b.getDimension()),le=b.size();I.copy(b,0,Z,0,le);for(var Me=le;Me<R;Me++)I.copy(b,0,Z,Me,1);return Z}},{key:"minCoordinate",value:function(y){for(var b=null,R=0;R<y.size();R++){var Z=y.getCoordinate(R);(b===null||b.compareTo(Z)>0)&&(b=Z)}return b}}])}(),Yt=function(){function I(){i(this,I)}return a(I,null,[{key:"toDimensionSymbol",value:function(y){switch(y){case I.FALSE:return I.SYM_FALSE;case I.TRUE:return I.SYM_TRUE;case I.DONTCARE:return I.SYM_DONTCARE;case I.P:return I.SYM_P;case I.L:return I.SYM_L;case I.A:return I.SYM_A}throw new H("Unknown dimension value: "+y)}},{key:"toDimensionValue",value:function(y){switch(gn.toUpperCase(y)){case I.SYM_FALSE:return I.FALSE;case I.SYM_TRUE:return I.TRUE;case I.SYM_DONTCARE:return I.DONTCARE;case I.SYM_P:return I.P;case I.SYM_L:return I.L;case I.SYM_A:return I.A}throw new H("Unknown dimension symbol: "+y)}}])}();Yt.P=0,Yt.L=1,Yt.A=2,Yt.FALSE=-1,Yt.TRUE=-2,Yt.DONTCARE=-3,Yt.SYM_FALSE="F",Yt.SYM_TRUE="T",Yt.SYM_DONTCARE="*",Yt.SYM_P="0",Yt.SYM_L="1",Yt.SYM_A="2";var Qn=function(){return a(function I(){i(this,I)},[{key:"filter",value:function(I){}}])}(),An=function(){return a(function I(){i(this,I)},[{key:"filter",value:function(I,y){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),jt=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new pt:this._points.expandEnvelope(new pt)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new y(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var b=arguments[0],R=arguments[1];if(!this.isEquivalentClass(b))return!1;var Z=b;if(this._points.size()!==Z._points.size())return!1;for(var le=0;le<this._points.size();le++)if(!this.equal(this._points.getCoordinate(le),Z._points.getCoordinate(le),R))return!1;return!0}return E(y,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var b=0;b<Math.trunc(this._points.size()/2);b++){var R=this._points.size()-1-b;if(!this._points.getCoordinate(b).equals(this._points.getCoordinate(R))){if(this._points.getCoordinate(b).compareTo(this._points.getCoordinate(R))>0){var Z=this._points.copy();rn.reverse(Z),this._points=Z}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Yt.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var b=this._points.copy();return rn.reverse(b),this.getFactory().createLineString(b)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return st.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return kt.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var b=arguments[0],R=0,Z=0;R<this._points.size()&&Z<b._points.size();){var le=this._points.getCoordinate(R).compareTo(b._points.getCoordinate(Z));if(le!==0)return le;R++,Z++}return R<this._points.size()?1:Z<b._points.size()?-1:0}if(arguments.length===2){var Me=arguments[0];return arguments[1].compare(this._points,Me._points)}}},{key:"apply",value:function(){if(Dt(arguments[0],Tt))for(var b=arguments[0],R=0;R<this._points.size();R++)b.filter(this._points.getCoordinate(R));else if(Dt(arguments[0],An)){var Z=arguments[0];if(this._points.size()===0)return null;for(var le=0;le<this._points.size()&&(Z.filter(this._points,le),!Z.isDone());le++);Z.isGeometryChanged()&&this.geometryChanged()}else Dt(arguments[0],Qn)?arguments[0].filter(this):Dt(arguments[0],G)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new yt}},{key:"isEquivalentClass",value:function(b){return b instanceof y}},{key:"getCoordinateN",value:function(b){return this._points.getCoordinate(b)}},{key:"getGeometryType",value:function(){return st.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(b){if(b===null&&(b=this.getFactory().getCoordinateSequenceFactory().create([])),b.size()===1)throw new H("Invalid number of points in LineString (found "+b.size()+" - must be 0 or >= 2)");this._points=b}},{key:"isCoordinate",value:function(b){for(var R=0;R<this._points.size();R++)if(this._points.getCoordinate(R).equals(b))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(b){return this.getFactory().createPoint(this._points.getCoordinate(b))}},{key:"interfaces_",get:function(){return[Jt]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var b=arguments[0],R=arguments[1];st.constructor_.call(this,R),this.init(b)}}}}])}(st),Pe=a(function I(){i(this,I)}),je=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new pt;var b=new pt;return b.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),b}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new y(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var b=arguments[0],R=arguments[1];return!!this.isEquivalentClass(b)&&(!(!this.isEmpty()||!b.isEmpty())||this.isEmpty()===b.isEmpty()&&this.equal(b.getCoordinate(),this.getCoordinate(),R))}return E(y,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Yt.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return st.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var b=arguments[0];return this.getCoordinate().compareTo(b.getCoordinate())}if(arguments.length===2){var R=arguments[0];return arguments[1].compare(this._coordinates,R._coordinates)}}},{key:"apply",value:function(){if(Dt(arguments[0],Tt)){var b=arguments[0];if(this.isEmpty())return null;b.filter(this.getCoordinate())}else if(Dt(arguments[0],An)){var R=arguments[0];if(this.isEmpty())return null;R.filter(this._coordinates,0),R.isGeometryChanged()&&this.geometryChanged()}else Dt(arguments[0],Qn)?arguments[0].filter(this):Dt(arguments[0],G)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return st.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(b){b===null&&(b=this.getFactory().getCoordinateSequenceFactory().create([])),ve.isTrue(b.size()<=1),this._coordinates=b}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Pe]}}],[{key:"constructor_",value:function(){this._coordinates=null;var b=arguments[0],R=arguments[1];st.constructor_.call(this,R),this.init(b)}}])}(st),_t=function(){function I(){i(this,I)}return a(I,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var y=arguments[0];return Math.abs(I.ofRingSigned(y))}if(Dt(arguments[0],$t)){var b=arguments[0];return Math.abs(I.ofRingSigned(b))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var y=arguments[0];if(y.length<3)return 0;for(var b=0,R=y[0].x,Z=1;Z<y.length-1;Z++){var le=y[Z].x-R,Me=y[Z+1].y;b+=le*(y[Z-1].y-Me)}return b/2}if(Dt(arguments[0],$t)){var Ue=arguments[0],dt=Ue.size();if(dt<3)return 0;var Nt=new Ae,wn=new Ae,Nn=new Ae;Ue.getCoordinate(0,wn),Ue.getCoordinate(1,Nn);var dr=wn.x;Nn.x-=dr;for(var $r=0,mi=1;mi<dt-1;mi++)Nt.y=wn.y,wn.x=Nn.x,wn.y=Nn.y,Ue.getCoordinate(mi+1,Nn),Nn.x-=dr,$r+=wn.x*(Nt.y-Nn.y);return $r/2}}}])}(),Qt=function(){return a(function I(){i(this,I)},null,[{key:"sort",value:function(){var I=arguments,y=arguments[0];if(arguments.length===1)y.sort(function(dr,$r){return dr.compareTo($r)});else if(arguments.length===2)y.sort(function(dr,$r){return I[1].compare(dr,$r)});else if(arguments.length===3){var b=y.slice(arguments[1],arguments[2]);b.sort();var R=y.slice(0,arguments[1]).concat(b,y.slice(arguments[2],y.length));y.splice(0,y.length);var Z,le=c(R);try{for(le.s();!(Z=le.n()).done;){var Me=Z.value;y.push(Me)}}catch(dr){le.e(dr)}finally{le.f()}}else if(arguments.length===4){var Ue=y.slice(arguments[1],arguments[2]);Ue.sort(function(dr,$r){return I[3].compare(dr,$r)});var dt=y.slice(0,arguments[1]).concat(Ue,y.slice(arguments[2],y.length));y.splice(0,y.length);var Nt,wn=c(dt);try{for(wn.s();!(Nt=wn.n()).done;){var Nn=Nt.value;y.push(Nn)}}catch(dr){wn.e(dr)}finally{wn.f()}}}},{key:"asList",value:function(I){var y,b=new rt,R=c(I);try{for(R.s();!(y=R.n()).done;){var Z=y.value;b.add(Z)}}catch(le){R.e(le)}finally{R.f()}return b}},{key:"copyOf",value:function(I,y){return I.slice(0,y)}}])}(),en=a(function I(){i(this,I)}),Fn=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var b=new Array(this.getNumPoints()).fill(null),R=-1,Z=this._shell.getCoordinates(),le=0;le<Z.length;le++)b[++R]=Z[le];for(var Me=0;Me<this._holes.length;Me++)for(var Ue=this._holes[Me].getCoordinates(),dt=0;dt<Ue.length;dt++)b[++R]=Ue[dt];return b}},{key:"getArea",value:function(){var b=0;b+=_t.ofRing(this._shell.getCoordinateSequence());for(var R=0;R<this._holes.length;R++)b-=_t.ofRing(this._holes[R].getCoordinateSequence());return b}},{key:"copyInternal",value:function(){for(var b=this._shell.copy(),R=new Array(this._holes.length).fill(null),Z=0;Z<this._holes.length;Z++)R[Z]=this._holes[Z].copy();return new y(b,R,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var b=this._shell.getCoordinateSequence(),R=this.getEnvelopeInternal(),Z=0;Z<5;Z++){var le=b.getX(Z);if(le!==R.getMinX()&&le!==R.getMaxX())return!1;var Me=b.getY(Z);if(Me!==R.getMinY()&&Me!==R.getMaxY())return!1}for(var Ue=b.getX(0),dt=b.getY(0),Nt=1;Nt<=4;Nt++){var wn=b.getX(Nt),Nn=b.getY(Nt);if(wn!==Ue==(Nn!==dt))return!1;Ue=wn,dt=Nn}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var b=arguments[0],R=arguments[1];if(!this.isEquivalentClass(b))return!1;var Z=b,le=this._shell,Me=Z._shell;if(!le.equalsExact(Me,R)||this._holes.length!==Z._holes.length)return!1;for(var Ue=0;Ue<this._holes.length;Ue++)if(!this._holes[Ue].equalsExact(Z._holes[Ue],R))return!1;return!0}return E(y,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var b=0;b<this._holes.length;b++)this._holes[b]=this.normalized(this._holes[b],!1);Qt.sort(this._holes)}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];if(R.isEmpty())return null;var le=R.getCoordinateSequence(),Me=rn.minCoordinateIndex(le,0,le.size()-2);rn.scroll(le,Me,!0),Et.isCCW(le)===Z&&rn.reverse(le)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var b=this.getExteriorRing().reverse(),R=new Array(this.getNumInteriorRing()).fill(null),Z=0;Z<R.length;Z++)R[Z]=this.getInteriorRingN(Z).reverse();return this.getFactory().createPolygon(b,R)}},{key:"getTypeCode",value:function(){return st.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var b=0;b+=this._shell.getLength();for(var R=0;R<this._holes.length;R++)b+=this._holes[R].getLength();return b}},{key:"getNumPoints",value:function(){for(var b=this._shell.getNumPoints(),R=0;R<this._holes.length;R++)b+=this._holes[R].getNumPoints();return b}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(b,R){var Z=b.copy();return this.normalize(Z,R),Z}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var b=arguments[0],R=this._shell,Z=b._shell;return R.compareToSameClass(Z)}if(arguments.length===2){var le=arguments[1],Me=arguments[0],Ue=this._shell,dt=Me._shell,Nt=Ue.compareToSameClass(dt,le);if(Nt!==0)return Nt;for(var wn=this.getNumInteriorRing(),Nn=Me.getNumInteriorRing(),dr=0;dr<wn&&dr<Nn;){var $r=this.getInteriorRingN(dr),mi=Me.getInteriorRingN(dr),xi=$r.compareToSameClass(mi,le);if(xi!==0)return xi;dr++}return dr<wn?1:dr<Nn?-1:0}}},{key:"apply",value:function(){if(Dt(arguments[0],Tt)){var b=arguments[0];this._shell.apply(b);for(var R=0;R<this._holes.length;R++)this._holes[R].apply(b)}else if(Dt(arguments[0],An)){var Z=arguments[0];if(this._shell.apply(Z),!Z.isDone())for(var le=0;le<this._holes.length&&(this._holes[le].apply(Z),!Z.isDone());le++);Z.isGeometryChanged()&&this.geometryChanged()}else if(Dt(arguments[0],Qn))arguments[0].filter(this);else if(Dt(arguments[0],G)){var Me=arguments[0];Me.filter(this),this._shell.apply(Me);for(var Ue=0;Ue<this._holes.length;Ue++)this._holes[Ue].apply(Me)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var b=new Array(this._holes.length+1).fill(null);b[0]=this._shell;for(var R=0;R<this._holes.length;R++)b[R+1]=this._holes[R];return b.length<=1?this.getFactory().createLinearRing(b[0].getCoordinateSequence()):this.getFactory().createMultiLineString(b)}},{key:"getGeometryType",value:function(){return st.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(b){return this._holes[b]}},{key:"interfaces_",get:function(){return[en]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var b=arguments[0],R=arguments[1],Z=arguments[2];if(st.constructor_.call(this,Z),b===null&&(b=this.getFactory().createLinearRing()),R===null&&(R=[]),st.hasNullElements(R))throw new H("holes must not contain null elements");if(b.isEmpty()&&st.hasNonEmptyElements(R))throw new H("shell is empty but holes are not");this._shell=b,this._holes=R}}])}(st),Wn=function(I){function y(){return i(this,y),r(this,y,arguments)}return v(y,I),a(y)}(Ze),kr=function(I){function y(b){var R;return i(this,y),(R=r(this,y)).array=[],b instanceof It&&R.addAll(b),R}return v(y,I),a(y,[{key:"contains",value:function(b){var R,Z=c(this.array);try{for(Z.s();!(R=Z.n()).done;)if(R.value.compareTo(b)===0)return!0}catch(le){Z.e(le)}finally{Z.f()}return!1}},{key:"add",value:function(b){if(this.contains(b))return!1;for(var R=0,Z=this.array.length;R<Z;R++)if(this.array[R].compareTo(b)===1)return!!this.array.splice(R,0,b);return this.array.push(b),!0}},{key:"addAll",value:function(b){var R,Z=c(b);try{for(Z.s();!(R=Z.n()).done;){var le=R.value;this.add(le)}}catch(Me){Z.e(Me)}finally{Z.f()}return!0}},{key:"remove",value:function(){throw new yt}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Qr(this.array)}}])}(Wn),Qr=function(){return a(function I(y){i(this,I),this.array=y,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new Ve;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new yt}}])}(),vi=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"computeEnvelopeInternal",value:function(){for(var b=new pt,R=0;R<this._geometries.length;R++)b.expandToInclude(this._geometries[R].getEnvelopeInternal());return b}},{key:"getGeometryN",value:function(b){return this._geometries[b]}},{key:"getCoordinates",value:function(){for(var b=new Array(this.getNumPoints()).fill(null),R=-1,Z=0;Z<this._geometries.length;Z++)for(var le=this._geometries[Z].getCoordinates(),Me=0;Me<le.length;Me++)b[++R]=le[Me];return b}},{key:"getArea",value:function(){for(var b=0,R=0;R<this._geometries.length;R++)b+=this._geometries[R].getArea();return b}},{key:"copyInternal",value:function(){for(var b=new Array(this._geometries.length).fill(null),R=0;R<b.length;R++)b[R]=this._geometries[R].copy();return new y(b,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var b=arguments[0],R=arguments[1];if(!this.isEquivalentClass(b))return!1;var Z=b;if(this._geometries.length!==Z._geometries.length)return!1;for(var le=0;le<this._geometries.length;le++)if(!this._geometries[le].equalsExact(Z._geometries[le],R))return!1;return!0}return E(y,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var b=0;b<this._geometries.length;b++)this._geometries[b].normalize();Qt.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var b=Yt.FALSE,R=0;R<this._geometries.length;R++)b=Math.max(b,this._geometries[R].getBoundaryDimension());return b}},{key:"reverseInternal",value:function(){for(var b=this._geometries.length,R=new rt(b),Z=0;Z<b;Z++)R.add(this._geometries[Z].reverse());return this.getFactory().buildGeometry(R)}},{key:"getTypeCode",value:function(){return st.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var b=Yt.FALSE,R=0;R<this._geometries.length;R++)b=Math.max(b,this._geometries[R].getDimension());return b}},{key:"getLength",value:function(){for(var b=0,R=0;R<this._geometries.length;R++)b+=this._geometries[R].getLength();return b}},{key:"getNumPoints",value:function(){for(var b=0,R=0;R<this._geometries.length;R++)b+=this._geometries[R].getNumPoints();return b}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var b=arguments[0],R=new kr(Qt.asList(this._geometries)),Z=new kr(Qt.asList(b._geometries));return this.compare(R,Z)}if(arguments.length===2){for(var le=arguments[1],Me=arguments[0],Ue=this.getNumGeometries(),dt=Me.getNumGeometries(),Nt=0;Nt<Ue&&Nt<dt;){var wn=this.getGeometryN(Nt),Nn=Me.getGeometryN(Nt),dr=wn.compareToSameClass(Nn,le);if(dr!==0)return dr;Nt++}return Nt<Ue?1:Nt<dt?-1:0}}},{key:"apply",value:function(){if(Dt(arguments[0],Tt))for(var b=arguments[0],R=0;R<this._geometries.length;R++)this._geometries[R].apply(b);else if(Dt(arguments[0],An)){var Z=arguments[0];if(this._geometries.length===0)return null;for(var le=0;le<this._geometries.length&&(this._geometries[le].apply(Z),!Z.isDone());le++);Z.isGeometryChanged()&&this.geometryChanged()}else if(Dt(arguments[0],Qn)){var Me=arguments[0];Me.filter(this);for(var Ue=0;Ue<this._geometries.length;Ue++)this._geometries[Ue].apply(Me)}else if(Dt(arguments[0],G)){var dt=arguments[0];dt.filter(this);for(var Nt=0;Nt<this._geometries.length;Nt++)this._geometries[Nt].apply(dt)}}},{key:"getBoundary",value:function(){return st.checkNotGeometryCollection(this),ve.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return st.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var b=0;b<this._geometries.length;b++)if(!this._geometries[b].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var b=arguments[0],R=arguments[1];if(st.constructor_.call(this,R),b===null&&(b=[]),st.hasNullElements(b))throw new H("geometries must not contain null elements");this._geometries=b}}}}])}(st),zr=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"copyInternal",value:function(){for(var b=new Array(this._geometries.length).fill(null),R=0;R<b.length;R++)b[R]=this._geometries[R].copy();return new y(b,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var b=arguments[0],R=arguments[1];return!!this.isEquivalentClass(b)&&E(y,"equalsExact",this,1).call(this,b,R)}return E(y,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var b=arguments[0];return this._geometries[b].getCoordinate()}return E(y,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Yt.FALSE}},{key:"getTypeCode",value:function(){return st.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return st.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Pe]}}],[{key:"constructor_",value:function(){var b=arguments[0],R=arguments[1];vi.constructor_.call(this,b,R)}}])}(vi),zn=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"copyInternal",value:function(){return new y(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Yt.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||E(y,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var b=this._points.copy();return rn.reverse(b),this.getFactory().createLinearRing(b)}},{key:"getTypeCode",value:function(){return st.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!E(y,"isClosed",this,1).call(this))throw new H("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<y.MINIMUM_VALID_SIZE)throw new H("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return st.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var b=arguments[0],R=arguments[1];jt.constructor_.call(this,b,R),this.validateConstruction()}}])}(jt);zn.MINIMUM_VALID_SIZE=4;var En=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"setOrdinate",value:function(b,R){switch(b){case y.X:this.x=R;break;case y.Y:this.y=R;break;default:throw new H("Invalid ordinate index: "+b)}}},{key:"getZ",value:function(){return Ae.NULL_ORDINATE}},{key:"getOrdinate",value:function(b){switch(b){case y.X:return this.x;case y.Y:return this.y}throw new H("Invalid ordinate index: "+b)}},{key:"setZ",value:function(b){throw new H("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new y(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(b){this.x=b.x,this.y=b.y,this.z=b.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)Ae.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof y){var b=arguments[0];Ae.constructor_.call(this,b.x,b.y)}else if(arguments[0]instanceof Ae){var R=arguments[0];Ae.constructor_.call(this,R.x,R.y)}}else if(arguments.length===2){var Z=arguments[0],le=arguments[1];Ae.constructor_.call(this,Z,le,Ae.NULL_ORDINATE)}}}])}(Ae);En.X=0,En.Y=1,En.Z=-1,En.M=-1;var mr=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(b,R){switch(b){case y.X:this.x=R;break;case y.Y:this.y=R;break;case y.M:this._m=R;break;default:throw new H("Invalid ordinate index: "+b)}}},{key:"setM",value:function(b){this._m=b}},{key:"getZ",value:function(){return Ae.NULL_ORDINATE}},{key:"getOrdinate",value:function(b){switch(b){case y.X:return this.x;case y.Y:return this.y;case y.M:return this._m}throw new H("Invalid ordinate index: "+b)}},{key:"setZ",value:function(b){throw new H("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new y(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(b){this.x=b.x,this.y=b.y,this.z=b.getZ(),this._m=b.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Ae.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof y){var b=arguments[0];Ae.constructor_.call(this,b.x,b.y),this._m=b._m}else if(arguments[0]instanceof Ae){var R=arguments[0];Ae.constructor_.call(this,R.x,R.y),this._m=this.getM()}}else if(arguments.length===3){var Z=arguments[0],le=arguments[1],Me=arguments[2];Ae.constructor_.call(this,Z,le,Ae.NULL_ORDINATE),this._m=Me}}}])}(Ae);mr.X=0,mr.Y=1,mr.Z=-1,mr.M=2;var yi=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(b,R){switch(b){case Ae.X:this.x=R;break;case Ae.Y:this.y=R;break;case Ae.Z:this.z=R;break;case Ae.M:this._m=R;break;default:throw new H("Invalid ordinate index: "+b)}}},{key:"setM",value:function(b){this._m=b}},{key:"getOrdinate",value:function(b){switch(b){case Ae.X:return this.x;case Ae.Y:return this.y;case Ae.Z:return this.getZ();case Ae.M:return this.getM()}throw new H("Invalid ordinate index: "+b)}},{key:"copy",value:function(){return new y(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(b){this.x=b.x,this.y=b.y,this.z=b.getZ(),this._m=b.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Ae.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof y){var b=arguments[0];Ae.constructor_.call(this,b),this._m=b._m}else if(arguments[0]instanceof Ae){var R=arguments[0];Ae.constructor_.call(this,R),this._m=this.getM()}}else if(arguments.length===4){var Z=arguments[0],le=arguments[1],Me=arguments[2],Ue=arguments[3];Ae.constructor_.call(this,Z,le,Me),this._m=Ue}}}])}(Ae),_i=function(){function I(){i(this,I)}return a(I,null,[{key:"measures",value:function(y){return y instanceof En?0:y instanceof mr||y instanceof yi?1:0}},{key:"dimension",value:function(y){return y instanceof En?2:y instanceof mr?3:y instanceof yi?4:3}},{key:"create",value:function(){if(arguments.length===1){var y=arguments[0];return I.create(y,0)}if(arguments.length===2){var b=arguments[0],R=arguments[1];return b===2?new En:b===3&&R===0?new Ae:b===3&&R===1?new mr:b===4&&R===1?new yi:new Ae}}}])}(),gi=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"getCoordinate",value:function(b){return this.get(b)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Dt(arguments[0],It)){for(var b=arguments[1],R=!1,Z=arguments[0].iterator();Z.hasNext();)this.add(Z.next(),b),R=!0;return R}return E(y,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var b=E(y,"clone",this,1).call(this),R=0;R<this.size();R++)b.add(R,this.get(R).clone());return b}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(y.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(y.coordArrayType);for(var b=this.size(),R=new Array(b).fill(null),Z=0;Z<b;Z++)R[Z]=this.get(b-Z-1);return R}}},{key:"add",value:function(){if(arguments.length===1){var b=arguments[0];return E(y,"add",this,1).call(this,b)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var R=arguments[0],Z=arguments[1];return this.add(R,Z,!0),!0}if(arguments[0]instanceof Ae&&typeof arguments[1]=="boolean"){var le=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(le))return null;E(y,"add",this,1).call(this,le)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var Me=arguments[0],Ue=arguments[1];return this.add(Me,Ue),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var dt=arguments[0],Nt=arguments[1];if(arguments[2])for(var wn=0;wn<dt.length;wn++)this.add(dt[wn],Nt);else for(var Nn=dt.length-1;Nn>=0;Nn--)this.add(dt[Nn],Nt);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Ae){var dr=arguments[0],$r=arguments[1];if(!arguments[2]){var mi=this.size();if(mi>0&&(dr>0&&this.get(dr-1).equals2D($r)||dr<mi&&this.get(dr).equals2D($r)))return null}E(y,"add",this,1).call(this,dr,$r)}}else if(arguments.length===4){var xi=arguments[0],si=arguments[1],ci=arguments[2],Fi=arguments[3],hi=1;ci>Fi&&(hi=-1);for(var Ii=ci;Ii!==Fi;Ii+=hi)this.add(xi[Ii],si);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var b=this.get(0).copy();this.add(b,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var b=arguments[0];this.ensureCapacity(b.length),this.add(b,!0)}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];this.ensureCapacity(R.length),this.add(R,Z)}}}}])}(rt);gi.coordArrayType=new Array(0).fill(null);var lt=function(){function I(){i(this,I)}return a(I,null,[{key:"isRing",value:function(y){return!(y.length<4)&&!!y[0].equals2D(y[y.length-1])}},{key:"ptNotInList",value:function(y,b){for(var R=0;R<y.length;R++){var Z=y[R];if(I.indexOf(Z,b)<0)return Z}return null}},{key:"scroll",value:function(y,b){var R=I.indexOf(b,y);if(R<0)return null;var Z=new Array(y.length).fill(null);He.arraycopy(y,R,Z,0,y.length-R),He.arraycopy(y,0,Z,y.length-R,R),He.arraycopy(Z,0,y,0,y.length)}},{key:"equals",value:function(){if(arguments.length===2){var y=arguments[0],b=arguments[1];if(y===b)return!0;if(y===null||b===null||y.length!==b.length)return!1;for(var R=0;R<y.length;R++)if(!y[R].equals(b[R]))return!1;return!0}if(arguments.length===3){var Z=arguments[0],le=arguments[1],Me=arguments[2];if(Z===le)return!0;if(Z===null||le===null||Z.length!==le.length)return!1;for(var Ue=0;Ue<Z.length;Ue++)if(Me.compare(Z[Ue],le[Ue])!==0)return!1;return!0}}},{key:"intersection",value:function(y,b){for(var R=new gi,Z=0;Z<y.length;Z++)b.intersects(y[Z])&&R.add(y[Z],!0);return R.toCoordinateArray()}},{key:"measures",value:function(y){if(y===null||y.length===0)return 0;var b,R=0,Z=c(y);try{for(Z.s();!(b=Z.n()).done;){var le=b.value;R=Math.max(R,_i.measures(le))}}catch(Me){Z.e(Me)}finally{Z.f()}return R}},{key:"hasRepeatedPoints",value:function(y){for(var b=1;b<y.length;b++)if(y[b-1].equals(y[b]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(y){return I.hasRepeatedPoints(y)?new gi(y,!1).toCoordinateArray():y}},{key:"reverse",value:function(y){for(var b=y.length-1,R=Math.trunc(b/2),Z=0;Z<=R;Z++){var le=y[Z];y[Z]=y[b-Z],y[b-Z]=le}}},{key:"removeNull",value:function(y){for(var b=0,R=0;R<y.length;R++)y[R]!==null&&b++;var Z=new Array(b).fill(null);if(b===0)return Z;for(var le=0,Me=0;Me<y.length;Me++)y[Me]!==null&&(Z[le++]=y[Me]);return Z}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var y=arguments[0],b=new Array(y.length).fill(null),R=0;R<y.length;R++)b[R]=y[R].copy();return b}if(arguments.length===5)for(var Z=arguments[0],le=arguments[1],Me=arguments[2],Ue=arguments[3],dt=arguments[4],Nt=0;Nt<dt;Nt++)Me[Ue+Nt]=Z[le+Nt].copy()}},{key:"isEqualReversed",value:function(y,b){for(var R=0;R<y.length;R++){var Z=y[R],le=b[y.length-R-1];if(Z.compareTo(le)!==0)return!1}return!0}},{key:"envelope",value:function(y){for(var b=new pt,R=0;R<y.length;R++)b.expandToInclude(y[R]);return b}},{key:"toCoordinateArray",value:function(y){return y.toArray(I.coordArrayType)}},{key:"dimension",value:function(y){if(y===null||y.length===0)return 3;var b,R=0,Z=c(y);try{for(Z.s();!(b=Z.n()).done;){var le=b.value;R=Math.max(R,_i.dimension(le))}}catch(Me){Z.e(Me)}finally{Z.f()}return R}},{key:"atLeastNCoordinatesOrNothing",value:function(y,b){return b.length>=y?b:[]}},{key:"indexOf",value:function(y,b){for(var R=0;R<b.length;R++)if(y.equals(b[R]))return R;return-1}},{key:"increasingDirection",value:function(y){for(var b=0;b<Math.trunc(y.length/2);b++){var R=y.length-1-b,Z=y[b].compareTo(y[R]);if(Z!==0)return Z}return 1}},{key:"compare",value:function(y,b){for(var R=0;R<y.length&&R<b.length;){var Z=y[R].compareTo(b[R]);if(Z!==0)return Z;R++}return R<b.length?-1:R<y.length?1:0}},{key:"minCoordinate",value:function(y){for(var b=null,R=0;R<y.length;R++)(b===null||b.compareTo(y[R])>0)&&(b=y[R]);return b}},{key:"extract",value:function(y,b,R){b=mt.clamp(b,0,y.length);var Z=(R=mt.clamp(R,-1,y.length))-b+1;R<0&&(Z=0),b>=y.length&&(Z=0),R<b&&(Z=0);var le=new Array(Z).fill(null);if(Z===0)return le;for(var Me=0,Ue=b;Ue<=R;Ue++)le[Me++]=y[Ue];return le}}])}(),yn=function(){return a(function I(){i(this,I)},[{key:"compare",value:function(I,y){var b=I,R=y;return lt.compare(b,R)}},{key:"interfaces_",get:function(){return[Ie]}}])}(),Ln=function(){return a(function I(){i(this,I)},[{key:"compare",value:function(I,y){var b=I,R=y;if(b.length<R.length)return-1;if(b.length>R.length)return 1;if(b.length===0)return 0;var Z=lt.compare(b,R);return lt.isEqualReversed(b,R)?0:Z}},{key:"OLDcompare",value:function(I,y){var b=I,R=y;if(b.length<R.length)return-1;if(b.length>R.length)return 1;if(b.length===0)return 0;for(var Z=lt.increasingDirection(b),le=lt.increasingDirection(R),Me=Z>0?0:b.length-1,Ue=le>0?0:b.length-1,dt=0;dt<b.length;dt++){var Nt=b[Me].compareTo(R[Ue]);if(Nt!==0)return Nt;Me+=Z,Ue+=le}return 0}},{key:"interfaces_",get:function(){return[Ie]}}])}();lt.ForwardComparator=yn,lt.BidirectionalComparator=Ln,lt.coordArrayType=new Array(0).fill(null);var Vn=function(){return a(function I(y){i(this,I),this.str=y},[{key:"append",value:function(I){this.str+=I}},{key:"setCharAt",value:function(I,y){this.str=this.str.substr(0,I)+y+this.str.substr(I+1)}},{key:"toString",value:function(){return this.str}}])}(),bn=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getM",value:function(y){return this.hasM()?this._coordinates[y].getM():pe.NaN}},{key:"setOrdinate",value:function(y,b,R){switch(b){case $t.X:this._coordinates[y].x=R;break;case $t.Y:this._coordinates[y].y=R;break;default:this._coordinates[y].setOrdinate(b,R)}}},{key:"getZ",value:function(y){return this.hasZ()?this._coordinates[y].getZ():pe.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(y,b){switch(b){case $t.X:return this._coordinates[y].x;case $t.Y:return this._coordinates[y].y;default:return this._coordinates[y].getOrdinate(b)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var y=arguments[0];return this._coordinates[y]}if(arguments.length===2){var b=arguments[0];arguments[1].setCoordinate(this._coordinates[b])}}},{key:"getCoordinateCopy",value:function(y){var b=this.createCoordinate();return b.setCoordinate(this._coordinates[y]),b}},{key:"createCoordinate",value:function(){return _i.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(y){return this._coordinates[y].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(y){for(var b=0;b<this._coordinates.length;b++)y.expandToInclude(this._coordinates[b]);return y}},{key:"copy",value:function(){for(var y=new Array(this.size()).fill(null),b=0;b<this._coordinates.length;b++){var R=this.createCoordinate();R.setCoordinate(this._coordinates[b]),y[b]=R}return new I(y,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var y=new Vn(17*this._coordinates.length);y.append("("),y.append(this._coordinates[0]);for(var b=1;b<this._coordinates.length;b++)y.append(", "),y.append(this._coordinates[b]);return y.append(")"),y.toString()}return"()"}},{key:"getY",value:function(y){return this._coordinates[y].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[$t,K]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var y=arguments[0];I.constructor_.call(this,y,lt.dimension(y),lt.measures(y))}else if(Number.isInteger(arguments[0])){var b=arguments[0];this._coordinates=new Array(b).fill(null);for(var R=0;R<b;R++)this._coordinates[R]=new Ae}else if(Dt(arguments[0],$t)){var Z=arguments[0];if(Z===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=Z.getDimension(),this._measures=Z.getMeasures(),this._coordinates=new Array(Z.size()).fill(null);for(var le=0;le<this._coordinates.length;le++)this._coordinates[le]=Z.getCoordinateCopy(le)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Me=arguments[0],Ue=arguments[1];I.constructor_.call(this,Me,Ue,lt.measures(Me))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var dt=arguments[0],Nt=arguments[1];this._coordinates=new Array(dt).fill(null),this._dimension=Nt;for(var wn=0;wn<dt;wn++)this._coordinates[wn]=_i.create(Nt)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Nn=arguments[0],dr=arguments[1],$r=arguments[2];this._dimension=dr,this._measures=$r,this._coordinates=Nn===null?new Array(0).fill(null):Nn}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var mi=arguments[0],xi=arguments[1],si=arguments[2];this._coordinates=new Array(mi).fill(null),this._dimension=xi,this._measures=si;for(var ci=0;ci<mi;ci++)this._coordinates[ci]=this.createCoordinate()}}}}])}(),wr=function(){function I(){i(this,I)}return a(I,[{key:"readResolve",value:function(){return I.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new bn(arguments[0]);if(Dt(arguments[0],$t))return new bn(arguments[0])}else{if(arguments.length===2){var y=arguments[1];return y>3&&(y=3),y<2&&(y=2),new bn(arguments[0],y)}if(arguments.length===3){var b=arguments[2],R=arguments[1]-b;return b>1&&(b=1),R>3&&(R=3),R<2&&(R=2),new bn(arguments[0],R+b,b)}}}},{key:"interfaces_",get:function(){return[xt,K]}}],[{key:"instance",value:function(){return I.instanceObject}}])}();wr.instanceObject=new wr;var Lr=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"copyInternal",value:function(){for(var b=new Array(this._geometries.length).fill(null),R=0;R<b.length;R++)b[R]=this._geometries[R].copy();return new y(b,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var b=arguments[0],R=arguments[1];return!!this.isEquivalentClass(b)&&E(y,"equalsExact",this,1).call(this,b,R)}return E(y,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return st.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var b=new rt,R=0;R<this._geometries.length;R++)for(var Z=this._geometries[R].getBoundary(),le=0;le<Z.getNumGeometries();le++)b.add(Z.getGeometryN(le));var Me=new Array(b.size()).fill(null);return this.getFactory().createMultiLineString(b.toArray(Me))}},{key:"getGeometryType",value:function(){return st.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[en]}}],[{key:"constructor_",value:function(){var b=arguments[0],R=arguments[1];vi.constructor_.call(this,b,R)}}])}(vi),Mr=function(){return a(function I(){i(this,I)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),Xr=function(I){function y(){var b;return i(this,y),(b=r(this,y)).map=new Map,b}return v(y,I),a(y,[{key:"get",value:function(b){return this.map.get(b)||null}},{key:"put",value:function(b,R){return this.map.set(b,R),R}},{key:"values",value:function(){for(var b=new rt,R=this.map.values(),Z=R.next();!Z.done;)b.add(Z.value),Z=R.next();return b}},{key:"entrySet",value:function(){var b=new wt;return this.map.entries().forEach(function(R){return b.add(R)}),b}},{key:"size",value:function(){return this.map.size()}}])}(Mr),Yr=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"equals",value:function(y){if(!(y instanceof I))return!1;var b=y;return this._modelType===b._modelType&&this._scale===b._scale}},{key:"compareTo",value:function(y){var b=y,R=this.getMaximumSignificantDigits(),Z=b.getMaximumSignificantDigits();return Bt.compare(R,Z)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===I.FLOATING||this._modelType===I.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var y="UNKNOWN";return this._modelType===I.FLOATING?y="Floating":this._modelType===I.FLOATING_SINGLE?y="Floating-Single":this._modelType===I.FIXED&&(y="Fixed (Scale="+this.getScale()+")"),y}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var y=arguments[0];return pe.isNaN(y)||this._modelType===I.FLOATING_SINGLE?y:this._modelType===I.FIXED?Math.round(y*this._scale)/this._scale:y}if(arguments[0]instanceof Ae){var b=arguments[0];if(this._modelType===I.FLOATING)return null;b.x=this.makePrecise(b.x),b.y=this.makePrecise(b.y)}}},{key:"getMaximumSignificantDigits",value:function(){var y=16;return this._modelType===I.FLOATING?y=16:this._modelType===I.FLOATING_SINGLE?y=6:this._modelType===I.FIXED&&(y=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),y}},{key:"setScale",value:function(y){this._scale=Math.abs(y)}},{key:"interfaces_",get:function(){return[K,W]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=I.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof ni){var y=arguments[0];this._modelType=y,y===I.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var b=arguments[0];this._modelType=I.FIXED,this.setScale(b)}else if(arguments[0]instanceof I){var R=arguments[0];this._modelType=R._modelType,this._scale=R._scale}}}},{key:"mostPrecise",value:function(y,b){return y.compareTo(b)>=0?y:b}}])}(),ni=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"readResolve",value:function(){return I.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[K]}}],[{key:"constructor_",value:function(){this._name=null;var y=arguments[0];this._name=y,I.nameToTypeMap.put(y,this)}}])}();ni.nameToTypeMap=new Xr,Yr.Type=ni,Yr.FIXED=new ni("FIXED"),Yr.FLOATING=new ni("FLOATING"),Yr.FLOATING_SINGLE=new ni("FLOATING SINGLE"),Yr.maximumPreciseValue=9007199254740992;var bi=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"copyInternal",value:function(){for(var b=new Array(this._geometries.length).fill(null),R=0;R<b.length;R++)b[R]=this._geometries[R].copy();return new y(b,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var b=arguments[0],R=arguments[1];return!!this.isEquivalentClass(b)&&E(y,"equalsExact",this,1).call(this,b,R)}return E(y,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Yt.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var b=0;b<this._geometries.length;b++)if(!this._geometries[b].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return st.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new yt}},{key:"getGeometryType",value:function(){return st.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Jt]}}],[{key:"constructor_",value:function(){var b=arguments[0],R=arguments[1];vi.constructor_.call(this,b,R)}}])}(vi),Ni=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"createEmpty",value:function(y){switch(y){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new H("Invalid dimension: "+y)}}},{key:"toGeometry",value:function(y){return y.isNull()?this.createPoint():y.getMinX()===y.getMaxX()&&y.getMinY()===y.getMaxY()?this.createPoint(new Ae(y.getMinX(),y.getMinY())):y.getMinX()===y.getMaxX()||y.getMinY()===y.getMaxY()?this.createLineString([new Ae(y.getMinX(),y.getMinY()),new Ae(y.getMaxX(),y.getMaxY())]):this.createPolygon(this.createLinearRing([new Ae(y.getMinX(),y.getMinY()),new Ae(y.getMinX(),y.getMaxY()),new Ae(y.getMaxX(),y.getMaxY()),new Ae(y.getMaxX(),y.getMinY()),new Ae(y.getMinX(),y.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var y=arguments[0];return this.createLineString(y!==null?this.getCoordinateSequenceFactory().create(y):null)}if(Dt(arguments[0],$t))return new jt(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new bi(null,this):arguments.length===1?new bi(arguments[0],this):void 0}},{key:"buildGeometry",value:function(y){for(var b=null,R=!1,Z=!1,le=y.iterator();le.hasNext();){var Me=le.next(),Ue=Me.getTypeCode();b===null&&(b=Ue),Ue!==b&&(R=!0),Me instanceof vi&&(Z=!0)}if(b===null)return this.createGeometryCollection();if(R||Z)return this.createGeometryCollection(I.toGeometryArray(y));var dt=y.iterator().next();if(y.size()>1){if(dt instanceof Fn)return this.createMultiPolygon(I.toPolygonArray(y));if(dt instanceof jt)return this.createMultiLineString(I.toLineStringArray(y));if(dt instanceof je)return this.createMultiPoint(I.toPointArray(y));ve.shouldNeverReachHere("Unhandled geometry type: "+dt.getGeometryType())}return dt}},{key:"createMultiPointFromCoords",value:function(y){return this.createMultiPoint(y!==null?this.getCoordinateSequenceFactory().create(y):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Ae){var y=arguments[0];return this.createPoint(y!==null?this.getCoordinateSequenceFactory().create([y]):null)}if(Dt(arguments[0],$t))return new je(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Dt(arguments[0],$t)){var y=arguments[0];return this.createPolygon(this.createLinearRing(y))}if(arguments[0]instanceof Array){var b=arguments[0];return this.createPolygon(this.createLinearRing(b))}if(arguments[0]instanceof zn){var R=arguments[0];return this.createPolygon(R,null)}}else if(arguments.length===2)return new Fn(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new vi(null,this):arguments.length===1?new vi(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var y=arguments[0];return this.createLinearRing(y!==null?this.getCoordinateSequenceFactory().create(y):null)}if(Dt(arguments[0],$t))return new zn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new Lr(null,this):arguments.length===1?new Lr(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new zr(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new zr(arguments[0],this);if(Dt(arguments[0],$t)){var y=arguments[0];if(y===null)return this.createMultiPoint(new Array(0).fill(null));for(var b=new Array(y.size()).fill(null),R=0;R<y.size();R++){var Z=this.getCoordinateSequenceFactory().create(1,y.getDimension(),y.getMeasures());rn.copy(y,R,Z,0,1),b[R]=this.createPoint(Z)}return this.createMultiPoint(b)}}}},{key:"interfaces_",get:function(){return[K]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)I.constructor_.call(this,new Yr,0);else if(arguments.length===1){if(Dt(arguments[0],xt)){var y=arguments[0];I.constructor_.call(this,new Yr,0,y)}else if(arguments[0]instanceof Yr){var b=arguments[0];I.constructor_.call(this,b,0,I.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];I.constructor_.call(this,R,Z,I.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var le=arguments[0],Me=arguments[1],Ue=arguments[2];this._precisionModel=le,this._coordinateSequenceFactory=Ue,this._SRID=Me}}},{key:"toMultiPolygonArray",value:function(y){var b=new Array(y.size()).fill(null);return y.toArray(b)}},{key:"toGeometryArray",value:function(y){if(y===null)return null;var b=new Array(y.size()).fill(null);return y.toArray(b)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return wr.instance()}},{key:"toMultiLineStringArray",value:function(y){var b=new Array(y.size()).fill(null);return y.toArray(b)}},{key:"toLineStringArray",value:function(y){var b=new Array(y.size()).fill(null);return y.toArray(b)}},{key:"toMultiPointArray",value:function(y){var b=new Array(y.size()).fill(null);return y.toArray(b)}},{key:"toLinearRingArray",value:function(y){var b=new Array(y.size()).fill(null);return y.toArray(b)}},{key:"toPointArray",value:function(y){var b=new Array(y.size()).fill(null);return y.toArray(b)}},{key:"toPolygonArray",value:function(y){var b=new Array(y.size()).fill(null);return y.toArray(b)}},{key:"createPointFromInternalCoord",value:function(y,b){return b.getPrecisionModel().makePrecise(y),b.getFactory().createPoint(y)}}])}(),Yi="XY",Qi="XYZ",_a="XYM",ra="XYZM",Ai={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ka="EMPTY",la=1,Sa=2,_o=3,Ui=4,Pi=5,Ta=6;for(var to in Ai)Ai[to].toUpperCase();var ne=function(){return a(function I(y){i(this,I),this.wkt=y,this.index_=-1},[{key:"isAlpha_",value:function(I){return I>="a"&&I<="z"||I>="A"&&I<="Z"}},{key:"isNumeric_",value:function(I,y){return I>="0"&&I<="9"||I=="."&&!(y!==void 0&&y)}},{key:"isWhiteSpace_",value:function(I){return I==" "||I=="	"||I=="\r"||I==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var I,y=this.nextChar_(),b=this.index_,R=y;if(y=="(")I=Sa;else if(y==",")I=Pi;else if(y==")")I=_o;else if(this.isNumeric_(y)||y=="-")I=Ui,R=this.readNumber_();else if(this.isAlpha_(y))I=la,R=this.readText_();else{if(this.isWhiteSpace_(y))return this.nextToken();if(y!=="")throw new Error("Unexpected character: "+y);I=Ta}return{position:b,value:R,type:I}}},{key:"readNumber_",value:function(){var I,y=this.index_,b=!1,R=!1;do I=="."?b=!0:I!="e"&&I!="E"||(R=!0),I=this.nextChar_();while(this.isNumeric_(I,b)||!R&&(I=="e"||I=="E")||R&&(I=="-"||I=="+"));return parseFloat(this.wkt.substring(y,this.index_--))}},{key:"readText_",value:function(){var I,y=this.index_;do I=this.nextChar_();while(this.isAlpha_(I));return this.wkt.substring(y,this.index_--).toUpperCase()}}])}(),we=function(){return a(function I(y,b){i(this,I),this.lexer_=y,this.token_,this.layout_=Yi,this.factory=b},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(I){return this.token_.type==I}},{key:"match",value:function(I){var y=this.isTokenType(I);return y&&this.consume_(),y}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var I=Yi,y=this.token_;if(this.isTokenType(la)){var b=y.value;b==="Z"?I=Qi:b==="M"?I=_a:b==="ZM"&&(I=ra),I!==Yi&&this.consume_()}return I}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Sa)){var I=[];do I.push(this.parseGeometry_());while(this.match(Pi));if(this.match(_o))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Sa)){var I=this.parsePoint_();if(this.match(_o))return I}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Sa)){var I=this.parsePointList_();if(this.match(_o))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Sa)){var I=this.parseLineStringTextList_();if(this.match(_o))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var I;if(this.match(Sa)){if(I=this.token_.type==Sa?this.parsePointTextList_():this.parsePointList_(),this.match(_o))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Sa)){var I=this.parseLineStringTextList_();if(this.match(_o))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Sa)){var I=this.parsePolygonTextList_();if(this.match(_o))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var I=[],y=this.layout_.length,b=0;b<y;++b){var R=this.token_;if(!this.match(Ui))break;I.push(R.value)}if(I.length==y)return I;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var I=[this.parsePoint_()];this.match(Pi);)I.push(this.parsePoint_());return I}},{key:"parsePointTextList_",value:function(){for(var I=[this.parsePointText_()];this.match(Pi);)I.push(this.parsePointText_());return I}},{key:"parseLineStringTextList_",value:function(){for(var I=[this.parseLineStringText_()];this.match(Pi);)I.push(this.parseLineStringText_());return I}},{key:"parsePolygonTextList_",value:function(){for(var I=[this.parsePolygonText_()];this.match(Pi);)I.push(this.parsePolygonText_());return I}},{key:"isEmptyGeometry_",value:function(){var I=this.isTokenType(la)&&this.token_.value==Ka;return I&&this.consume_(),I}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var I=this.factory,y=function(xi){return o(Ae,M(xi))},b=function(xi){var si=xi.map(function(ci){return I.createLinearRing(ci.map(y))});return si.length>1?I.createPolygon(si[0],si.slice(1)):I.createPolygon(si[0])},R=this.token_;if(this.match(la)){var Z=R.value;if(this.layout_=this.parseGeometryLayout_(),Z=="GEOMETRYCOLLECTION"){var le=this.parseGeometryCollectionText_();return I.createGeometryCollection(le)}switch(Z){case"POINT":var Me=this.parsePointText_();return Me?I.createPoint(o(Ae,M(Me))):I.createPoint();case"LINESTRING":var Ue=this.parseLineStringText_().map(y);return I.createLineString(Ue);case"LINEARRING":var dt=this.parseLineStringText_().map(y);return I.createLinearRing(dt);case"POLYGON":var Nt=this.parsePolygonText_();return Nt&&Nt.length!==0?b(Nt):I.createPolygon();case"MULTIPOINT":var wn=this.parseMultiPointText_();if(!wn||wn.length===0)return I.createMultiPoint();var Nn=wn.map(y).map(function(xi){return I.createPoint(xi)});return I.createMultiPoint(Nn);case"MULTILINESTRING":var dr=this.parseMultiLineStringText_().map(function(xi){return I.createLineString(xi.map(y))});return I.createMultiLineString(dr);case"MULTIPOLYGON":var $r=this.parseMultiPolygonText_();if(!$r||$r.length===0)return I.createMultiPolygon();var mi=$r.map(b);return I.createMultiPolygon(mi);default:throw new Error("Invalid geometry type: "+Z)}}throw new Error(this.formatErrorMessage_())}}])}();function et(I){if(I.isEmpty())return"";var y=I.getCoordinate(),b=[y.x,y.y];return y.z===void 0||Number.isNaN(y.z)||b.push(y.z),y.m===void 0||Number.isNaN(y.m)||b.push(y.m),b.join(" ")}function Gt(I){for(var y=I.getCoordinates().map(function(le){var Me=[le.x,le.y];return le.z===void 0||Number.isNaN(le.z)||Me.push(le.z),le.m===void 0||Number.isNaN(le.m)||Me.push(le.m),Me}),b=[],R=0,Z=y.length;R<Z;++R)b.push(y[R].join(" "));return b.join(", ")}function on(I){var y=[];y.push("("+Gt(I.getExteriorRing())+")");for(var b=0,R=I.getNumInteriorRing();b<R;++b)y.push("("+Gt(I.getInteriorRingN(b))+")");return y.join(", ")}var dn={Point:et,LineString:Gt,LinearRing:Gt,Polygon:on,MultiPoint:function(I){for(var y=[],b=0,R=I.getNumGeometries();b<R;++b)y.push("("+et(I.getGeometryN(b))+")");return y.join(", ")},MultiLineString:function(I){for(var y=[],b=0,R=I.getNumGeometries();b<R;++b)y.push("("+Gt(I.getGeometryN(b))+")");return y.join(", ")},MultiPolygon:function(I){for(var y=[],b=0,R=I.getNumGeometries();b<R;++b)y.push("("+on(I.getGeometryN(b))+")");return y.join(", ")},GeometryCollection:function(I){for(var y=[],b=0,R=I.getNumGeometries();b<R;++b)y.push(xn(I.getGeometryN(b)));return y.join(", ")}};function xn(I){var y=I.getGeometryType(),b=dn[y];y=y.toUpperCase();var R=function(Z){var le="";if(Z.isEmpty())return le;var Me=Z.getCoordinate();return Me.z===void 0||Number.isNaN(Me.z)||(le+="Z"),Me.m===void 0||Number.isNaN(Me.m)||(le+="M"),le}(I);return R.length>0&&(y+=" "+R),I.isEmpty()?y+" "+Ka:y+" ("+b(I)+")"}var cr=function(){return a(function I(y){i(this,I),this.geometryFactory=y||new Ni,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(I){var y=new ne(I);return new we(y,this.geometryFactory).parse()}},{key:"write",value:function(I){return xn(I)}}])}(),ur=function(){return a(function I(y){i(this,I),this.parser=new cr(y)},[{key:"write",value:function(I){return this.parser.write(I)}}],[{key:"toLineString",value:function(I,y){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+I.x+" "+I.y+", "+y.x+" "+y.y+" )"}}])}(),Rr=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getIndexAlongSegment",value:function(y,b){return this.computeIntLineIndex(),this._intLineIndex[y][b]}},{key:"getTopologySummary",value:function(){var y=new Vn;return this.isEndPoint()&&y.append(" endpoint"),this._isProper&&y.append(" proper"),this.isCollinear()&&y.append(" collinear"),y.toString()}},{key:"computeIntersection",value:function(y,b,R,Z){this._inputLines[0][0]=y,this._inputLines[0][1]=b,this._inputLines[1][0]=R,this._inputLines[1][1]=Z,this._result=this.computeIntersect(y,b,R,Z)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var y=arguments[0];this.getEdgeDistance(y,0)>this.getEdgeDistance(y,1)?(this._intLineIndex[y][0]=0,this._intLineIndex[y][1]=1):(this._intLineIndex[y][0]=1,this._intLineIndex[y][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(y){this._precisionModel=y}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var y=arguments[0],b=0;b<this._result;b++)if(!this._intPt[b].equals2D(this._inputLines[y][0])&&!this._intPt[b].equals2D(this._inputLines[y][1]))return!0;return!1}}},{key:"getIntersection",value:function(y){return this._intPt[y]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==I.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(y,b){return I.computeEdgeDistance(this._intPt[b],this._inputLines[y][0],this._inputLines[y][1])}},{key:"isCollinear",value:function(){return this._result===I.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return ur.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+ur.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(y,b){return this._inputLines[y][b]}},{key:"isIntersection",value:function(y){for(var b=0;b<this._result;b++)if(this._intPt[b].equals2D(y))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(y,b){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[y][b]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Ae,this._intPt[1]=new Ae,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(y,b,R){var Z=Math.abs(R.x-b.x),le=Math.abs(R.y-b.y),Me=-1;if(y.equals(b))Me=0;else if(y.equals(R))Me=Z>le?Z:le;else{var Ue=Math.abs(y.x-b.x),dt=Math.abs(y.y-b.y);(Me=Z>le?Ue:dt)!==0||y.equals(b)||(Me=Math.max(Ue,dt))}return ve.isTrue(!(Me===0&&!y.equals(b)),"Bad distance calculation"),Me}},{key:"nonRobustComputeEdgeDistance",value:function(y,b,R){var Z=y.x-b.x,le=y.y-b.y,Me=Math.sqrt(Z*Z+le*le);return ve.isTrue(!(Me===0&&!y.equals(b)),"Invalid distance calculation"),Me}}])}();Rr.DONT_INTERSECT=0,Rr.DO_INTERSECT=1,Rr.COLLINEAR=2,Rr.NO_INTERSECTION=0,Rr.POINT_INTERSECTION=1,Rr.COLLINEAR_INTERSECTION=2;var Ir=function(I){function y(){return i(this,y),r(this,y)}return v(y,I),a(y,[{key:"isInSegmentEnvelopes",value:function(b){var R=new pt(this._inputLines[0][0],this._inputLines[0][1]),Z=new pt(this._inputLines[1][0],this._inputLines[1][1]);return R.contains(b)&&Z.contains(b)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return E(y,"computeIntersection",this,1).apply(this,arguments);var b=arguments[0],R=arguments[1],Z=arguments[2];if(this._isProper=!1,pt.intersects(R,Z,b)&&Et.index(R,Z,b)===0&&Et.index(Z,R,b)===0)return this._isProper=!0,(b.equals(R)||b.equals(Z))&&(this._isProper=!1),this._result=Rr.POINT_INTERSECTION,null;this._result=Rr.NO_INTERSECTION}},{key:"intersection",value:function(b,R,Z,le){var Me=this.intersectionSafe(b,R,Z,le);return this.isInSegmentEnvelopes(Me)||(Me=new Ae(y.nearestEndpoint(b,R,Z,le))),this._precisionModel!==null&&this._precisionModel.makePrecise(Me),Me}},{key:"checkDD",value:function(b,R,Z,le,Me){var Ue=cn.intersection(b,R,Z,le),dt=this.isInSegmentEnvelopes(Ue);He.out.println("DD in env = "+dt+"  --------------------- "+Ue),Me.distance(Ue)>1e-4&&He.out.println("Distance = "+Me.distance(Ue))}},{key:"intersectionSafe",value:function(b,R,Z,le){var Me=Fe.intersection(b,R,Z,le);return Me===null&&(Me=y.nearestEndpoint(b,R,Z,le)),Me}},{key:"computeCollinearIntersection",value:function(b,R,Z,le){var Me=pt.intersects(b,R,Z),Ue=pt.intersects(b,R,le),dt=pt.intersects(Z,le,b),Nt=pt.intersects(Z,le,R);return Me&&Ue?(this._intPt[0]=Z,this._intPt[1]=le,Rr.COLLINEAR_INTERSECTION):dt&&Nt?(this._intPt[0]=b,this._intPt[1]=R,Rr.COLLINEAR_INTERSECTION):Me&&dt?(this._intPt[0]=Z,this._intPt[1]=b,!Z.equals(b)||Ue||Nt?Rr.COLLINEAR_INTERSECTION:Rr.POINT_INTERSECTION):Me&&Nt?(this._intPt[0]=Z,this._intPt[1]=R,!Z.equals(R)||Ue||dt?Rr.COLLINEAR_INTERSECTION:Rr.POINT_INTERSECTION):Ue&&dt?(this._intPt[0]=le,this._intPt[1]=b,!le.equals(b)||Me||Nt?Rr.COLLINEAR_INTERSECTION:Rr.POINT_INTERSECTION):Ue&&Nt?(this._intPt[0]=le,this._intPt[1]=R,!le.equals(R)||Me||dt?Rr.COLLINEAR_INTERSECTION:Rr.POINT_INTERSECTION):Rr.NO_INTERSECTION}},{key:"computeIntersect",value:function(b,R,Z,le){if(this._isProper=!1,!pt.intersects(b,R,Z,le))return Rr.NO_INTERSECTION;var Me=Et.index(b,R,Z),Ue=Et.index(b,R,le);if(Me>0&&Ue>0||Me<0&&Ue<0)return Rr.NO_INTERSECTION;var dt=Et.index(Z,le,b),Nt=Et.index(Z,le,R);return dt>0&&Nt>0||dt<0&&Nt<0?Rr.NO_INTERSECTION:Me===0&&Ue===0&&dt===0&&Nt===0?this.computeCollinearIntersection(b,R,Z,le):(Me===0||Ue===0||dt===0||Nt===0?(this._isProper=!1,b.equals2D(Z)||b.equals2D(le)?this._intPt[0]=b:R.equals2D(Z)||R.equals2D(le)?this._intPt[0]=R:Me===0?this._intPt[0]=new Ae(Z):Ue===0?this._intPt[0]=new Ae(le):dt===0?this._intPt[0]=new Ae(b):Nt===0&&(this._intPt[0]=new Ae(R))):(this._isProper=!0,this._intPt[0]=this.intersection(b,R,Z,le)),Rr.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(b,R,Z,le){var Me=b,Ue=it.pointToSegment(b,Z,le),dt=it.pointToSegment(R,Z,le);return dt<Ue&&(Ue=dt,Me=R),(dt=it.pointToSegment(Z,b,R))<Ue&&(Ue=dt,Me=Z),(dt=it.pointToSegment(le,b,R))<Ue&&(Ue=dt,Me=le),Me}}])}(Rr),Nr=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"countSegment",value:function(y,b){if(y.x<this._p.x&&b.x<this._p.x)return null;if(this._p.x===b.x&&this._p.y===b.y)return this._isPointOnSegment=!0,null;if(y.y===this._p.y&&b.y===this._p.y){var R=y.x,Z=b.x;return R>Z&&(R=b.x,Z=y.x),this._p.x>=R&&this._p.x<=Z&&(this._isPointOnSegment=!0),null}if(y.y>this._p.y&&b.y<=this._p.y||b.y>this._p.y&&y.y<=this._p.y){var le=Et.index(y,b,this._p);if(le===Et.COLLINEAR)return this._isPointOnSegment=!0,null;b.y<y.y&&(le=-le),le===Et.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==Ce.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?Ce.BOUNDARY:this._crossingCount%2==1?Ce.INTERIOR:Ce.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var y=arguments[0];this._p=y}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof Ae&&Dt(arguments[1],$t)){for(var y=arguments[1],b=new I(arguments[0]),R=new Ae,Z=new Ae,le=1;le<y.size();le++)if(y.getCoordinate(le,R),y.getCoordinate(le-1,Z),b.countSegment(R,Z),b.isOnSegment())return b.getLocation();return b.getLocation()}if(arguments[0]instanceof Ae&&arguments[1]instanceof Array){for(var Me=arguments[1],Ue=new I(arguments[0]),dt=1;dt<Me.length;dt++){var Nt=Me[dt],wn=Me[dt-1];if(Ue.countSegment(Nt,wn),Ue.isOnSegment())return Ue.getLocation()}return Ue.getLocation()}}}])}(),Wr=function(){function I(){i(this,I)}return a(I,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof Ae&&Dt(arguments[1],$t)){for(var y=arguments[0],b=arguments[1],R=new Ir,Z=new Ae,le=new Ae,Me=b.size(),Ue=1;Ue<Me;Ue++)if(b.getCoordinate(Ue-1,Z),b.getCoordinate(Ue,le),R.computeIntersection(y,Z,le),R.hasIntersection())return!0;return!1}if(arguments[0]instanceof Ae&&arguments[1]instanceof Array){for(var dt=arguments[0],Nt=arguments[1],wn=new Ir,Nn=1;Nn<Nt.length;Nn++){var dr=Nt[Nn-1],$r=Nt[Nn];if(wn.computeIntersection(dt,dr,$r),wn.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(y,b){return Nr.locatePointInRing(y,b)}},{key:"isInRing",value:function(y,b){return I.locateInRing(y,b)!==Ce.EXTERIOR}}])}(),ua=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"setAllLocations",value:function(y){for(var b=0;b<this.location.length;b++)this.location[b]=y}},{key:"isNull",value:function(){for(var y=0;y<this.location.length;y++)if(this.location[y]!==Ce.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(y){for(var b=0;b<this.location.length;b++)this.location[b]===Ce.NONE&&(this.location[b]=y)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(y){if(y.location.length>this.location.length){var b=new Array(3).fill(null);b[ht.ON]=this.location[ht.ON],b[ht.LEFT]=Ce.NONE,b[ht.RIGHT]=Ce.NONE,this.location=b}for(var R=0;R<this.location.length;R++)this.location[R]===Ce.NONE&&R<y.location.length&&(this.location[R]=y.location[R])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var y=this.location[ht.LEFT];this.location[ht.LEFT]=this.location[ht.RIGHT],this.location[ht.RIGHT]=y}},{key:"toString",value:function(){var y=new At;return this.location.length>1&&y.append(Ce.toLocationSymbol(this.location[ht.LEFT])),y.append(Ce.toLocationSymbol(this.location[ht.ON])),this.location.length>1&&y.append(Ce.toLocationSymbol(this.location[ht.RIGHT])),y.toString()}},{key:"setLocations",value:function(y,b,R){this.location[ht.ON]=y,this.location[ht.LEFT]=b,this.location[ht.RIGHT]=R}},{key:"get",value:function(y){return y<this.location.length?this.location[y]:Ce.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var y=0;y<this.location.length;y++)if(this.location[y]===Ce.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var y=arguments[0];this.setLocation(ht.ON,y)}else if(arguments.length===2){var b=arguments[0],R=arguments[1];this.location[b]=R}}},{key:"init",value:function(y){this.location=new Array(y).fill(null),this.setAllLocations(Ce.NONE)}},{key:"isEqualOnSide",value:function(y,b){return this.location[b]===y.location[b]}},{key:"allPositionsEqual",value:function(y){for(var b=0;b<this.location.length;b++)if(this.location[b]!==y)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var y=arguments[0];this.init(y.length)}else if(Number.isInteger(arguments[0])){var b=arguments[0];this.init(1),this.location[ht.ON]=b}else if(arguments[0]instanceof I){var R=arguments[0];if(this.init(R.location.length),R!==null)for(var Z=0;Z<this.location.length;Z++)this.location[Z]=R.location[Z]}}else if(arguments.length===3){var le=arguments[0],Me=arguments[1],Ue=arguments[2];this.init(3),this.location[ht.ON]=le,this.location[ht.LEFT]=Me,this.location[ht.RIGHT]=Ue}}}])}(),ui=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getGeometryCount",value:function(){var y=0;return this.elt[0].isNull()||y++,this.elt[1].isNull()||y++,y}},{key:"setAllLocations",value:function(y,b){this.elt[y].setAllLocations(b)}},{key:"isNull",value:function(y){return this.elt[y].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var y=arguments[0];this.setAllLocationsIfNull(0,y),this.setAllLocationsIfNull(1,y)}else if(arguments.length===2){var b=arguments[0],R=arguments[1];this.elt[b].setAllLocationsIfNull(R)}}},{key:"isLine",value:function(y){return this.elt[y].isLine()}},{key:"merge",value:function(y){for(var b=0;b<2;b++)this.elt[b]===null&&y.elt[b]!==null?this.elt[b]=new ua(y.elt[b]):this.elt[b].merge(y.elt[b])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var y=arguments[0];return this.elt[y].get(ht.ON)}if(arguments.length===2){var b=arguments[0],R=arguments[1];return this.elt[b].get(R)}}},{key:"toString",value:function(){var y=new At;return this.elt[0]!==null&&(y.append("A:"),y.append(this.elt[0].toString())),this.elt[1]!==null&&(y.append(" B:"),y.append(this.elt[1].toString())),y.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var y=arguments[0];return this.elt[y].isArea()}}},{key:"isAnyNull",value:function(y){return this.elt[y].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var y=arguments[0],b=arguments[1];this.elt[y].setLocation(ht.ON,b)}else if(arguments.length===3){var R=arguments[0],Z=arguments[1],le=arguments[2];this.elt[R].setLocation(Z,le)}}},{key:"isEqualOnSide",value:function(y,b){return this.elt[0].isEqualOnSide(y.elt[0],b)&&this.elt[1].isEqualOnSide(y.elt[1],b)}},{key:"allPositionsEqual",value:function(y,b){return this.elt[y].allPositionsEqual(b)}},{key:"toLine",value:function(y){this.elt[y].isArea()&&(this.elt[y]=new ua(this.elt[y].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var y=arguments[0];this.elt[0]=new ua(y),this.elt[1]=new ua(y)}else if(arguments[0]instanceof I){var b=arguments[0];this.elt[0]=new ua(b.elt[0]),this.elt[1]=new ua(b.elt[1])}}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];this.elt[0]=new ua(Ce.NONE),this.elt[1]=new ua(Ce.NONE),this.elt[R].setLocation(Z)}else if(arguments.length===3){var le=arguments[0],Me=arguments[1],Ue=arguments[2];this.elt[0]=new ua(le,Me,Ue),this.elt[1]=new ua(le,Me,Ue)}else if(arguments.length===4){var dt=arguments[0],Nt=arguments[1],wn=arguments[2],Nn=arguments[3];this.elt[0]=new ua(Ce.NONE,Ce.NONE,Ce.NONE),this.elt[1]=new ua(Ce.NONE,Ce.NONE,Ce.NONE),this.elt[dt].setLocations(Nt,wn,Nn)}}},{key:"toLineLabel",value:function(y){for(var b=new I(Ce.NONE),R=0;R<2;R++)b.setLocation(R,y.getLocation(R));return b}}])}(),Vr=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var I=new Array(this._pts.size()).fill(null),y=0;y<this._pts.size();y++)I[y]=this._pts.get(y);this._ring=this._geometryFactory.createLinearRing(I),this._isHole=Et.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(I){this._startDe=I;var y=I,b=!0;do{if(y===null)throw new Dn("Found null DirectedEdge");if(y.getEdgeRing()===this)throw new Dn("Directed Edge visited twice during ring-building at "+y.getCoordinate());this._edges.add(y);var R=y.getLabel();ve.isTrue(R.isArea()),this.mergeLabel(R),this.addPoints(y.getEdge(),y.isForward(),b),b=!1,this.setEdgeRing(y,this),y=this.getNext(y)}while(y!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(I){return this._pts.get(I)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var I=this._startDe;do{var y=I.getNode().getEdges().getOutgoingDegree(this);y>this._maxNodeDegree&&(this._maxNodeDegree=y),I=this.getNext(I)}while(I!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(I,y,b){var R=I.getCoordinates();if(y){var Z=1;b&&(Z=0);for(var le=Z;le<R.length;le++)this._pts.add(R[le])}else{var Me=R.length-2;b&&(Me=R.length-1);for(var Ue=Me;Ue>=0;Ue--)this._pts.add(R[Ue])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var I=this._startDe;do I.getEdge().setInResult(!0),I=I.getNext();while(I!==this._startDe)}},{key:"containsPoint",value:function(I){var y=this.getLinearRing();if(!y.getEnvelopeInternal().contains(I)||!Wr.isInRing(I,y.getCoordinates()))return!1;for(var b=this._holes.iterator();b.hasNext();)if(b.next().containsPoint(I))return!1;return!0}},{key:"addHole",value:function(I){this._holes.add(I)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var I=arguments[0];this.mergeLabel(I,0),this.mergeLabel(I,1)}else if(arguments.length===2){var y=arguments[1],b=arguments[0].getLocation(y,ht.RIGHT);if(b===Ce.NONE)return null;if(this._label.getLocation(y)===Ce.NONE)return this._label.setLocation(y,b),null}}},{key:"setShell",value:function(I){this._shell=I,I!==null&&I.addHole(this)}},{key:"toPolygon",value:function(I){for(var y=new Array(this._holes.size()).fill(null),b=0;b<this._holes.size();b++)y[b]=this._holes.get(b).getLinearRing();return I.createPolygon(this.getLinearRing(),y)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new rt,this._pts=new rt,this._label=new ui(Ce.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new rt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var I=arguments[0],y=arguments[1];this._geometryFactory=y,this.computePoints(I),this.computeRing()}}}}])}(),hr=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"setEdgeRing",value:function(b,R){b.setMinEdgeRing(R)}},{key:"getNext",value:function(b){return b.getNextMin()}}],[{key:"constructor_",value:function(){var b=arguments[0],R=arguments[1];Vr.constructor_.call(this,b,R)}}])}(Vr),ii=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"buildMinimalRings",value:function(){var b=new rt,R=this._startDe;do{if(R.getMinEdgeRing()===null){var Z=new hr(R,this._geometryFactory);b.add(Z)}R=R.getNext()}while(R!==this._startDe);return b}},{key:"setEdgeRing",value:function(b,R){b.setEdgeRing(R)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var b=this._startDe;do b.getNode().getEdges().linkMinimalDirectedEdges(this),b=b.getNext();while(b!==this._startDe)}},{key:"getNext",value:function(b){return b.getNext()}}],[{key:"constructor_",value:function(){var b=arguments[0],R=arguments[1];Vr.constructor_.call(this,b,R)}}])}(Vr),Wi=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(I){this._isVisited=I}},{key:"setInResult",value:function(I){this._isInResult=I}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(I){this._label=I}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(I){this._isCovered=I,this._isCoveredSet=!0}},{key:"updateIM",value:function(I){ve.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(I)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var I=arguments[0];this._label=I}}}}])}(),ea=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"isIncidentEdgeInResult",value:function(){for(var b=this.getEdges().getEdges().iterator();b.hasNext();)if(b.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(b){b.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(b){}},{key:"computeMergedLocation",value:function(b,R){var Z=Ce.NONE;if(Z=this._label.getLocation(R),!b.isNull(R)){var le=b.getLocation(R);Z!==Ce.BOUNDARY&&(Z=le)}return Z}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return E(y,"setLabel",this,1).apply(this,arguments);var b=arguments[0],R=arguments[1];this._label===null?this._label=new ui(b,R):this._label.setLocation(b,R)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof y){var b=arguments[0];this.mergeLabel(b._label)}else if(arguments[0]instanceof ui)for(var R=arguments[0],Z=0;Z<2;Z++){var le=this.computeMergedLocation(R,Z);this._label.getLocation(Z)===Ce.NONE&&this._label.setLocation(Z,le)}}},{key:"add",value:function(b){this._edges.insert(b),b.setNode(this)}},{key:"setLabelBoundary",value:function(b){if(this._label===null)return null;var R=Ce.NONE;this._label!==null&&(R=this._label.getLocation(b));var Z=null;switch(R){case Ce.BOUNDARY:Z=Ce.INTERIOR;break;case Ce.INTERIOR:default:Z=Ce.BOUNDARY}this._label.setLocation(b,Z)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var b=arguments[0],R=arguments[1];this._coord=b,this._edges=R,this._label=new ui(0,Ce.NONE)}}])}(Wi),ji=function(I){function y(){return i(this,y),r(this,y,arguments)}return v(y,I),a(y)}(Mr);function Oo(I){return I==null?0:I.color}function ri(I){return I==null?null:I.parent}function Jr(I,y){I!==null&&(I.color=y)}function _l(I){return I==null?null:I.left}function ha(I){return I==null?null:I.right}var xo=function(I){function y(){var b;return i(this,y),(b=r(this,y)).root_=null,b.size_=0,b}return v(y,I),a(y,[{key:"get",value:function(b){for(var R=this.root_;R!==null;){var Z=b.compareTo(R.key);if(Z<0)R=R.left;else{if(!(Z>0))return R.value;R=R.right}}return null}},{key:"put",value:function(b,R){if(this.root_===null)return this.root_={key:b,value:R,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var Z,le,Me=this.root_;do if(Z=Me,(le=b.compareTo(Me.key))<0)Me=Me.left;else{if(!(le>0)){var Ue=Me.value;return Me.value=R,Ue}Me=Me.right}while(Me!==null);var dt={key:b,left:null,right:null,value:R,parent:Z,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return le<0?Z.left=dt:Z.right=dt,this.fixAfterInsertion(dt),this.size_++,null}},{key:"fixAfterInsertion",value:function(b){var R;for(b.color=1;b!=null&&b!==this.root_&&b.parent.color===1;)ri(b)===_l(ri(ri(b)))?Oo(R=ha(ri(ri(b))))===1?(Jr(ri(b),0),Jr(R,0),Jr(ri(ri(b)),1),b=ri(ri(b))):(b===ha(ri(b))&&(b=ri(b),this.rotateLeft(b)),Jr(ri(b),0),Jr(ri(ri(b)),1),this.rotateRight(ri(ri(b)))):Oo(R=_l(ri(ri(b))))===1?(Jr(ri(b),0),Jr(R,0),Jr(ri(ri(b)),1),b=ri(ri(b))):(b===_l(ri(b))&&(b=ri(b),this.rotateRight(b)),Jr(ri(b),0),Jr(ri(ri(b)),1),this.rotateLeft(ri(ri(b))));this.root_.color=0}},{key:"values",value:function(){var b=new rt,R=this.getFirstEntry();if(R!==null)for(b.add(R.value);(R=y.successor(R))!==null;)b.add(R.value);return b}},{key:"entrySet",value:function(){var b=new wt,R=this.getFirstEntry();if(R!==null)for(b.add(R);(R=y.successor(R))!==null;)b.add(R);return b}},{key:"rotateLeft",value:function(b){if(b!=null){var R=b.right;b.right=R.left,R.left!=null&&(R.left.parent=b),R.parent=b.parent,b.parent==null?this.root_=R:b.parent.left===b?b.parent.left=R:b.parent.right=R,R.left=b,b.parent=R}}},{key:"rotateRight",value:function(b){if(b!=null){var R=b.left;b.left=R.right,R.right!=null&&(R.right.parent=b),R.parent=b.parent,b.parent==null?this.root_=R:b.parent.right===b?b.parent.right=R:b.parent.left=R,R.right=b,b.parent=R}}},{key:"getFirstEntry",value:function(){var b=this.root_;if(b!=null)for(;b.left!=null;)b=b.left;return b}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(b){for(var R=this.root_;R!==null;){var Z=b.compareTo(R.key);if(Z<0)R=R.left;else{if(!(Z>0))return!0;R=R.right}}return!1}}],[{key:"successor",value:function(b){var R;if(b===null)return null;if(b.right!==null){for(R=b.right;R.left!==null;)R=R.left;return R}R=b.parent;for(var Z=b;R!==null&&Z===R.right;)Z=R,R=R.parent;return R}}])}(ji),Fo=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"find",value:function(I){return this.nodeMap.get(I)}},{key:"addNode",value:function(){if(arguments[0]instanceof Ae){var I=arguments[0],y=this.nodeMap.get(I);return y===null&&(y=this.nodeFact.createNode(I),this.nodeMap.put(I,y)),y}if(arguments[0]instanceof ea){var b=arguments[0],R=this.nodeMap.get(b.getCoordinate());return R===null?(this.nodeMap.put(b.getCoordinate(),b),b):(R.mergeLabel(b),R)}}},{key:"print",value:function(I){for(var y=this.iterator();y.hasNext();)y.next().print(I)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(I){for(var y=new rt,b=this.iterator();b.hasNext();){var R=b.next();R.getLabel().getLocation(I)===Ce.BOUNDARY&&y.add(R)}return y}},{key:"add",value:function(I){var y=I.getCoordinate();this.addNode(y).add(I)}}],[{key:"constructor_",value:function(){this.nodeMap=new xo,this.nodeFact=null;var I=arguments[0];this.nodeFact=I}}])}(),no=function(){function I(){i(this,I)}return a(I,null,[{key:"isNorthern",value:function(y){return y===I.NE||y===I.NW}},{key:"isOpposite",value:function(y,b){return y!==b&&(y-b+4)%4===2}},{key:"commonHalfPlane",value:function(y,b){if(y===b)return y;if((y-b+4)%4===2)return-1;var R=y<b?y:b;return R===0&&(y>b?y:b)===3?3:R}},{key:"isInHalfPlane",value:function(y,b){return b===I.SE?y===I.SE||y===I.SW:y===b||y===b+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var y=arguments[0],b=arguments[1];if(y===0&&b===0)throw new H("Cannot compute the quadrant for point ( "+y+", "+b+" )");return y>=0?b>=0?I.NE:I.SE:b>=0?I.NW:I.SW}if(arguments[0]instanceof Ae&&arguments[1]instanceof Ae){var R=arguments[0],Z=arguments[1];if(Z.x===R.x&&Z.y===R.y)throw new H("Cannot compute the quadrant for two identical points "+R);return Z.x>=R.x?Z.y>=R.y?I.NE:I.SE:Z.y>=R.y?I.NW:I.SW}}}])}();no.NE=0,no.NW=1,no.SW=2,no.SE=3;var Bo=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"compareDirection",value:function(y){return this._dx===y._dx&&this._dy===y._dy?0:this._quadrant>y._quadrant?1:this._quadrant<y._quadrant?-1:Et.index(y._p0,y._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(y){this._node=y}},{key:"print",value:function(y){var b=Math.atan2(this._dy,this._dx),R=this.getClass().getName(),Z=R.lastIndexOf("."),le=R.substring(Z+1);y.print("  "+le+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+b+"   "+this._label)}},{key:"compareTo",value:function(y){var b=y;return this.compareDirection(b)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var y=Math.atan2(this._dy,this._dx),b=this.getClass().getName(),R=b.lastIndexOf(".");return"  "+b.substring(R+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+y+"   "+this._label}},{key:"computeLabel",value:function(y){}},{key:"init",value:function(y,b){this._p0=y,this._p1=b,this._dx=b.x-y.x,this._dy=b.y-y.y,this._quadrant=no.quadrant(this._dx,this._dy),ve.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var y=arguments[0];this._edge=y}else if(arguments.length===3){var b=arguments[0],R=arguments[1],Z=arguments[2];I.constructor_.call(this,b,R,Z,null)}else if(arguments.length===4){var le=arguments[0],Me=arguments[1],Ue=arguments[2],dt=arguments[3];I.constructor_.call(this,le),this.init(Me,Ue),this._label=dt}}}])}(),ts=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(b){return this._depth[b]}},{key:"setVisited",value:function(b){this._isVisited=b}},{key:"computeDirectedLabel",value:function(){this._label=new ui(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(b,R){if(this._depth[b]!==-999&&this._depth[b]!==R)throw new Dn("assigned depths do not match",this.getCoordinate());this._depth[b]=R}},{key:"isInteriorAreaEdge",value:function(){for(var b=!0,R=0;R<2;R++)this._label.isArea(R)&&this._label.getLocation(R,ht.LEFT)===Ce.INTERIOR&&this._label.getLocation(R,ht.RIGHT)===Ce.INTERIOR||(b=!1);return b}},{key:"setNextMin",value:function(b){this._nextMin=b}},{key:"print",value:function(b){E(y,"print",this,1).call(this,b),b.print(" "+this._depth[ht.LEFT]+"/"+this._depth[ht.RIGHT]),b.print(" ("+this.getDepthDelta()+")"),this._isInResult&&b.print(" inResult")}},{key:"setMinEdgeRing",value:function(b){this._minEdgeRing=b}},{key:"isLineEdge",value:function(){var b=this._label.isLine(0)||this._label.isLine(1),R=!this._label.isArea(0)||this._label.allPositionsEqual(0,Ce.EXTERIOR),Z=!this._label.isArea(1)||this._label.allPositionsEqual(1,Ce.EXTERIOR);return b&&R&&Z}},{key:"setEdgeRing",value:function(b){this._edgeRing=b}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var b=this._edge.getDepthDelta();return this._isForward||(b=-b),b}},{key:"setInResult",value:function(b){this._isInResult=b}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(b){this.print(b),b.print(" "),this._isForward?this._edge.print(b):this._edge.printReverse(b)}},{key:"setSym",value:function(b){this._sym=b}},{key:"setVisitedEdge",value:function(b){this.setVisited(b),this._sym.setVisited(b)}},{key:"setEdgeDepths",value:function(b,R){var Z=this.getEdge().getDepthDelta();this._isForward||(Z=-Z);var le=1;b===ht.LEFT&&(le=-1);var Me=ht.opposite(b),Ue=R+Z*le;this.setDepth(b,R),this.setDepth(Me,Ue)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(b){this._next=b}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var b=arguments[0],R=arguments[1];if(Bo.constructor_.call(this,b),this._isForward=R,R)this.init(b.getCoordinate(0),b.getCoordinate(1));else{var Z=b.getNumPoints()-1;this.init(b.getCoordinate(Z),b.getCoordinate(Z-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(b,R){return b===Ce.EXTERIOR&&R===Ce.INTERIOR?1:b===Ce.INTERIOR&&R===Ce.EXTERIOR?-1:0}}])}(Bo),xl=function(){return a(function I(){i(this,I)},[{key:"createNode",value:function(I){return new ea(I,null)}}])}(),Ws=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(I){I.println("Edges:");for(var y=0;y<this._edges.size();y++){I.println("edge "+y+":");var b=this._edges.get(y);b.print(I),b.eiList.print(I)}}},{key:"find",value:function(I){return this._nodes.find(I)}},{key:"addNode",value:function(){if(arguments[0]instanceof ea){var I=arguments[0];return this._nodes.addNode(I)}if(arguments[0]instanceof Ae){var y=arguments[0];return this._nodes.addNode(y)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var I=this._nodes.iterator();I.hasNext();)I.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(I){He.out.println(I)}},{key:"isBoundaryNode",value:function(I,y){var b=this._nodes.find(y);if(b===null)return!1;var R=b.getLabel();return R!==null&&R.getLocation(I)===Ce.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var I=this._nodes.iterator();I.hasNext();)I.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(I,y,b,R){return!!I.equals(b)&&Et.index(I,y,R)===Et.COLLINEAR&&no.quadrant(I,y)===no.quadrant(b,R)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(I){He.out.print(I)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(I,y){for(var b=0;b<this._edges.size();b++){var R=this._edges.get(b),Z=R.getCoordinates();if(this.matchInSameDirection(I,y,Z[0],Z[1])||this.matchInSameDirection(I,y,Z[Z.length-1],Z[Z.length-2]))return R}return null}},{key:"insertEdge",value:function(I){this._edges.add(I)}},{key:"findEdgeEnd",value:function(I){for(var y=this.getEdgeEnds().iterator();y.hasNext();){var b=y.next();if(b.getEdge()===I)return b}return null}},{key:"addEdges",value:function(I){for(var y=I.iterator();y.hasNext();){var b=y.next();this._edges.add(b);var R=new ts(b,!0),Z=new ts(b,!1);R.setSym(Z),Z.setSym(R),this.add(R),this.add(Z)}}},{key:"add",value:function(I){this._nodes.add(I),this._edgeEndList.add(I)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(I,y){for(var b=0;b<this._edges.size();b++){var R=this._edges.get(b),Z=R.getCoordinates();if(I.equals(Z[0])&&y.equals(Z[1]))return R}return null}}],[{key:"constructor_",value:function(){if(this._edges=new rt,this._nodes=null,this._edgeEndList=new rt,arguments.length===0)this._nodes=new Fo(new xl);else if(arguments.length===1){var I=arguments[0];this._nodes=new Fo(I)}}},{key:"linkResultDirectedEdges",value:function(I){for(var y=I.iterator();y.hasNext();)y.next().getEdges().linkResultDirectedEdges()}}])}(),wc=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"sortShellsAndHoles",value:function(y,b,R){for(var Z=y.iterator();Z.hasNext();){var le=Z.next();le.isHole()?R.add(le):b.add(le)}}},{key:"computePolygons",value:function(y){for(var b=new rt,R=y.iterator();R.hasNext();){var Z=R.next().toPolygon(this._geometryFactory);b.add(Z)}return b}},{key:"placeFreeHoles",value:function(y,b){for(var R=b.iterator();R.hasNext();){var Z=R.next();if(Z.getShell()===null){var le=I.findEdgeRingContaining(Z,y);if(le===null)throw new Dn("unable to assign hole to a shell",Z.getCoordinate(0));Z.setShell(le)}}}},{key:"buildMinimalEdgeRings",value:function(y,b,R){for(var Z=new rt,le=y.iterator();le.hasNext();){var Me=le.next();if(Me.getMaxNodeDegree()>2){Me.linkDirectedEdgesForMinimalEdgeRings();var Ue=Me.buildMinimalRings(),dt=this.findShell(Ue);dt!==null?(this.placePolygonHoles(dt,Ue),b.add(dt)):R.addAll(Ue)}else Z.add(Me)}return Z}},{key:"buildMaximalEdgeRings",value:function(y){for(var b=new rt,R=y.iterator();R.hasNext();){var Z=R.next();if(Z.isInResult()&&Z.getLabel().isArea()&&Z.getEdgeRing()===null){var le=new ii(Z,this._geometryFactory);b.add(le),le.setInResult()}}return b}},{key:"placePolygonHoles",value:function(y,b){for(var R=b.iterator();R.hasNext();){var Z=R.next();Z.isHole()&&Z.setShell(y)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(y){for(var b=0,R=null,Z=y.iterator();Z.hasNext();){var le=Z.next();le.isHole()||(R=le,b++)}return ve.isTrue(b<=1,"found two shells in MinimalEdgeRing list"),R}},{key:"add",value:function(){if(arguments.length===1){var y=arguments[0];this.add(y.getEdgeEnds(),y.getNodes())}else if(arguments.length===2){var b=arguments[0],R=arguments[1];Ws.linkResultDirectedEdges(R);var Z=this.buildMaximalEdgeRings(b),le=new rt,Me=this.buildMinimalEdgeRings(Z,this._shellList,le);this.sortShellsAndHoles(Me,this._shellList,le),this.placeFreeHoles(this._shellList,le)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new rt;var y=arguments[0];this._geometryFactory=y}},{key:"findEdgeRingContaining",value:function(y,b){for(var R=y.getLinearRing(),Z=R.getEnvelopeInternal(),le=R.getCoordinateN(0),Me=null,Ue=null,dt=b.iterator();dt.hasNext();){var Nt=dt.next(),wn=Nt.getLinearRing(),Nn=wn.getEnvelopeInternal();if(!Nn.equals(Z)&&Nn.contains(Z)){le=lt.ptNotInList(R.getCoordinates(),wn.getCoordinates());var dr=!1;Wr.isInRing(le,wn.getCoordinates())&&(dr=!0),dr&&(Me===null||Ue.contains(Nn))&&(Ue=(Me=Nt).getLinearRing().getEnvelopeInternal())}}return Me}}])}(),$l=function(){return a(function I(){i(this,I)},[{key:"getBounds",value:function(){}}])}(),sl=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[$l,K]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var I=arguments[0],y=arguments[1];this._bounds=I,this._item=y}}])}(),ws=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var I=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),I}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(I){for(var y=null,b=this._items.get(I);2*I<=this._size&&((y=2*I)!==this._size&&this._items.get(y+1).compareTo(this._items.get(y))<0&&y++,this._items.get(y).compareTo(b)<0);I=y)this._items.set(I,this._items.get(y));this._items.set(I,b)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(I){this._items.add(null),this._size+=1;var y=this._size;for(this._items.set(0,I);I.compareTo(this._items.get(Math.trunc(y/2)))<0;y/=2)this._items.set(y,this._items.get(Math.trunc(y/2)));this._items.set(y,I)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new rt,this._items.add(null)}}])}(),Wa=function(){return a(function I(){i(this,I)},[{key:"insert",value:function(I,y){}},{key:"remove",value:function(I,y){}},{key:"query",value:function(){}}])}(),bo=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(I){ve.isTrue(this._bounds===null),this._childBoundables.add(I)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[$l,K]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new rt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var I=arguments[0];this._level=I}}}}])}(),Bu={reverseOrder:function(){return{compare:function(I,y){return y.compareTo(I)}}},min:function(I){return Bu.sort(I),I.get(0)},sort:function(I,y){var b=I.toArray();y?Qt.sort(b,y):Qt.sort(b);for(var R=I.iterator(),Z=0,le=b.length;Z<le;Z++)R.next(),R.set(b[Z])},singletonList:function(I){var y=new rt;return y.add(I),y}},Do=function(){function I(){i(this,I)}return a(I,null,[{key:"maxDistance",value:function(y,b,R,Z,le,Me,Ue,dt){var Nt=I.distance(y,b,le,Me);return Nt=Math.max(Nt,I.distance(y,b,Ue,dt)),Nt=Math.max(Nt,I.distance(R,Z,le,Me)),Nt=Math.max(Nt,I.distance(R,Z,Ue,dt))}},{key:"distance",value:function(y,b,R,Z){var le=R-y,Me=Z-b;return Math.sqrt(le*le+Me*Me)}},{key:"maximumDistance",value:function(y,b){var R=Math.min(y.getMinX(),b.getMinX()),Z=Math.min(y.getMinY(),b.getMinY()),le=Math.max(y.getMaxX(),b.getMaxX()),Me=Math.max(y.getMaxY(),b.getMaxY());return I.distance(R,Z,le,Me)}},{key:"minMaxDistance",value:function(y,b){var R=y.getMinX(),Z=y.getMinY(),le=y.getMaxX(),Me=y.getMaxY(),Ue=b.getMinX(),dt=b.getMinY(),Nt=b.getMaxX(),wn=b.getMaxY(),Nn=I.maxDistance(R,Z,R,Me,Ue,dt,Ue,wn);return Nn=Math.min(Nn,I.maxDistance(R,Z,R,Me,Ue,dt,Nt,dt)),Nn=Math.min(Nn,I.maxDistance(R,Z,R,Me,Nt,wn,Ue,wn)),Nn=Math.min(Nn,I.maxDistance(R,Z,R,Me,Nt,wn,Nt,dt)),Nn=Math.min(Nn,I.maxDistance(R,Z,le,Z,Ue,dt,Ue,wn)),Nn=Math.min(Nn,I.maxDistance(R,Z,le,Z,Ue,dt,Nt,dt)),Nn=Math.min(Nn,I.maxDistance(R,Z,le,Z,Nt,wn,Ue,wn)),Nn=Math.min(Nn,I.maxDistance(R,Z,le,Z,Nt,wn,Nt,dt)),Nn=Math.min(Nn,I.maxDistance(le,Me,R,Me,Ue,dt,Ue,wn)),Nn=Math.min(Nn,I.maxDistance(le,Me,R,Me,Ue,dt,Nt,dt)),Nn=Math.min(Nn,I.maxDistance(le,Me,R,Me,Nt,wn,Ue,wn)),Nn=Math.min(Nn,I.maxDistance(le,Me,R,Me,Nt,wn,Nt,dt)),Nn=Math.min(Nn,I.maxDistance(le,Me,le,Z,Ue,dt,Ue,wn)),Nn=Math.min(Nn,I.maxDistance(le,Me,le,Z,Ue,dt,Nt,dt)),Nn=Math.min(Nn,I.maxDistance(le,Me,le,Z,Nt,wn,Ue,wn)),Nn=Math.min(Nn,I.maxDistance(le,Me,le,Z,Nt,wn,Nt,dt))}}])}(),Ea=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"maximumDistance",value:function(){return Do.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(y,b){var R=I.isComposite(this._boundable1),Z=I.isComposite(this._boundable2);if(R&&Z)return I.area(this._boundable1)>I.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,y,b),null):(this.expand(this._boundable2,this._boundable1,!0,y,b),null);if(R)return this.expand(this._boundable1,this._boundable2,!1,y,b),null;if(Z)return this.expand(this._boundable2,this._boundable1,!0,y,b),null;throw new H("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(I.isComposite(this._boundable1)||I.isComposite(this._boundable2))}},{key:"compareTo",value:function(y){var b=y;return this._distance<b._distance?-1:this._distance>b._distance?1:0}},{key:"expand",value:function(y,b,R,Z,le){for(var Me=y.getChildBoundables().iterator();Me.hasNext();){var Ue=Me.next(),dt=null;(dt=R?new I(b,Ue,this._itemDistance):new I(Ue,b,this._itemDistance)).getDistance()<le&&Z.add(dt)}}},{key:"getBoundable",value:function(y){return y===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var y=arguments[0],b=arguments[1],R=arguments[2];this._boundable1=y,this._boundable2=b,this._itemDistance=R,this._distance=this.distance()}},{key:"area",value:function(y){return y.getBounds().getArea()}},{key:"isComposite",value:function(y){return y instanceof bo}}])}(),ns=function(){return a(function I(){i(this,I)},[{key:"visitItem",value:function(I){}}])}(),Ss=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"queryInternal",value:function(){if(Dt(arguments[2],ns)&&arguments[0]instanceof Object&&arguments[1]instanceof bo)for(var y=arguments[0],b=arguments[2],R=arguments[1].getChildBoundables(),Z=0;Z<R.size();Z++){var le=R.get(Z);this.getIntersectsOp().intersects(le.getBounds(),y)&&(le instanceof bo?this.queryInternal(y,le,b):le instanceof sl?b.visitItem(le.getItem()):ve.shouldNeverReachHere())}else if(Dt(arguments[2],Re)&&arguments[0]instanceof Object&&arguments[1]instanceof bo)for(var Me=arguments[0],Ue=arguments[2],dt=arguments[1].getChildBoundables(),Nt=0;Nt<dt.size();Nt++){var wn=dt.get(Nt);this.getIntersectsOp().intersects(wn.getBounds(),Me)&&(wn instanceof bo?this.queryInternal(Me,wn,Ue):wn instanceof sl?Ue.add(wn.getItem()):ve.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(y){return y.get(y.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var y=0,b=arguments[0].getChildBoundables().iterator();b.hasNext();){var R=b.next();R instanceof bo?y+=this.size(R):R instanceof sl&&(y+=1)}return y}}},{key:"removeItem",value:function(y,b){for(var R=null,Z=y.getChildBoundables().iterator();Z.hasNext();){var le=Z.next();le instanceof sl&&le.getItem()===b&&(R=le)}return R!==null&&(y.getChildBoundables().remove(R),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var y=this.itemsTree(this._root);return y===null?new rt:y}if(arguments.length===1){for(var b=arguments[0],R=new rt,Z=b.getChildBoundables().iterator();Z.hasNext();){var le=Z.next();if(le instanceof bo){var Me=this.itemsTree(le);Me!==null&&R.add(Me)}else le instanceof sl?R.add(le.getItem()):ve.shouldNeverReachHere()}return R.size()<=0?null:R}}},{key:"insert",value:function(y,b){ve.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new sl(y,b))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var y=arguments[0],b=new rt;return this.boundablesAtLevel(y,this._root,b),b}if(arguments.length===3){var R=arguments[0],Z=arguments[1],le=arguments[2];if(ve.isTrue(R>-2),Z.getLevel()===R)return le.add(Z),null;for(var Me=Z.getChildBoundables().iterator();Me.hasNext();){var Ue=Me.next();Ue instanceof bo?this.boundablesAtLevel(R,Ue,le):(ve.isTrue(Ue instanceof sl),R===-1&&le.add(Ue))}return null}}},{key:"query",value:function(){if(arguments.length===1){var y=arguments[0];this.build();var b=new rt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),y)&&this.queryInternal(y,this._root,b),b}if(arguments.length===2){var R=arguments[0],Z=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),R)&&this.queryInternal(R,this._root,Z)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var y=arguments[0],b=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),y)&&this.remove(y,this._root,b)}if(arguments.length===3){var R=arguments[0],Z=arguments[1],le=arguments[2],Me=this.removeItem(Z,le);if(Me)return!0;for(var Ue=null,dt=Z.getChildBoundables().iterator();dt.hasNext();){var Nt=dt.next();if(this.getIntersectsOp().intersects(Nt.getBounds(),R)&&Nt instanceof bo&&(Me=this.remove(R,Nt,le))){Ue=Nt;break}}return Ue!==null&&Ue.getChildBoundables().isEmpty()&&Z.getChildBoundables().remove(Ue),Me}}},{key:"createHigherLevels",value:function(y,b){ve.isTrue(!y.isEmpty());var R=this.createParentBoundables(y,b+1);return R.size()===1?R.get(0):this.createHigherLevels(R,b+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var y=0,b=arguments[0].getChildBoundables().iterator();b.hasNext();){var R=b.next();if(R instanceof bo){var Z=this.depth(R);Z>y&&(y=Z)}}return y+1}}},{key:"createParentBoundables",value:function(y,b){ve.isTrue(!y.isEmpty());var R=new rt;R.add(this.createNode(b));var Z=new rt(y);Bu.sort(Z,this.getComparator());for(var le=Z.iterator();le.hasNext();){var Me=le.next();this.lastNode(R).getChildBoundables().size()===this.getNodeCapacity()&&R.add(this.createNode(b)),this.lastNode(R).addChildBoundable(Me)}return R}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[K]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new rt,this._nodeCapacity=null,arguments.length===0)I.constructor_.call(this,I.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var y=arguments[0];ve.isTrue(y>1,"Node capacity must be greater than 1"),this._nodeCapacity=y}}},{key:"compareDoubles",value:function(y,b){return y>b?1:y<b?-1:0}}])}();Ss.IntersectsOp=function(){},Ss.DEFAULT_NODE_CAPACITY=10;var bl=function(){return a(function I(){i(this,I)},[{key:"distance",value:function(I,y){}}])}(),Fs=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"createParentBoundablesFromVerticalSlices",value:function(b,R){ve.isTrue(b.length>0);for(var Z=new rt,le=0;le<b.length;le++)Z.addAll(this.createParentBoundablesFromVerticalSlice(b[le],R));return Z}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var b=arguments[0],R=arguments[1];return this.nearestNeighbourK(b,pe.POSITIVE_INFINITY,R)}if(arguments.length===3){var Z=arguments[0],le=arguments[2],Me=arguments[1],Ue=new ws;Ue.add(Z);for(var dt=new ws;!Ue.isEmpty()&&Me>=0;){var Nt=Ue.poll(),wn=Nt.getDistance();if(wn>=Me)break;Nt.isLeaves()?dt.size()<le?dt.add(Nt):(dt.peek().getDistance()>wn&&(dt.poll(),dt.add(Nt)),Me=dt.peek().getDistance()):Nt.expandToQueue(Ue,Me)}return y.getItems(dt)}}},{key:"createNode",value:function(b){return new Dl(b)}},{key:"size",value:function(){return arguments.length===0?E(y,"size",this,1).call(this):E(y,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof pt))return E(y,"insert",this,1).apply(this,arguments);var b=arguments[0],R=arguments[1];if(b.isNull())return null;E(y,"insert",this,1).call(this,b,R)}},{key:"getIntersectsOp",value:function(){return y.intersectsOp}},{key:"verticalSlices",value:function(b,R){for(var Z=Math.trunc(Math.ceil(b.size()/R)),le=new Array(R).fill(null),Me=b.iterator(),Ue=0;Ue<R;Ue++){le[Ue]=new rt;for(var dt=0;Me.hasNext()&&dt<Z;){var Nt=Me.next();le[Ue].add(Nt),dt++}}return le}},{key:"query",value:function(){if(arguments.length===1){var b=arguments[0];return E(y,"query",this,1).call(this,b)}if(arguments.length===2){var R=arguments[0],Z=arguments[1];E(y,"query",this,1).call(this,R,Z)}}},{key:"getComparator",value:function(){return y.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(b,R){return E(y,"createParentBoundables",this,1).call(this,b,R)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof pt){var b=arguments[0],R=arguments[1];return E(y,"remove",this,1).call(this,b,R)}return E(y,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?E(y,"depth",this,1).call(this):E(y,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(b,R){ve.isTrue(!b.isEmpty());var Z=Math.trunc(Math.ceil(b.size()/this.getNodeCapacity())),le=new rt(b);Bu.sort(le,y.xComparator);var Me=this.verticalSlices(le,Math.trunc(Math.ceil(Math.sqrt(Z))));return this.createParentBoundablesFromVerticalSlices(Me,R)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Dt(arguments[0],bl)){var b=arguments[0];if(this.isEmpty())return null;var R=new Ea(this.getRoot(),this.getRoot(),b);return this.nearestNeighbour(R)}if(arguments[0]instanceof Ea){var Z=arguments[0],le=pe.POSITIVE_INFINITY,Me=null,Ue=new ws;for(Ue.add(Z);!Ue.isEmpty()&&le>0;){var dt=Ue.poll(),Nt=dt.getDistance();if(Nt>=le)break;dt.isLeaves()?(le=Nt,Me=dt):dt.expandToQueue(Ue,le)}return Me===null?null:[Me.getBoundable(0).getItem(),Me.getBoundable(1).getItem()]}}else{if(arguments.length===2){var wn=arguments[0],Nn=arguments[1];if(this.isEmpty()||wn.isEmpty())return null;var dr=new Ea(this.getRoot(),wn.getRoot(),Nn);return this.nearestNeighbour(dr)}if(arguments.length===3){var $r=arguments[2],mi=new sl(arguments[0],arguments[1]),xi=new Ea(this.getRoot(),mi,$r);return this.nearestNeighbour(xi)[0]}if(arguments.length===4){var si=arguments[2],ci=arguments[3],Fi=new sl(arguments[0],arguments[1]),hi=new Ea(this.getRoot(),Fi,si);return this.nearestNeighbourK(hi,ci)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var b=arguments[0],R=arguments[1],Z=pe.POSITIVE_INFINITY,le=new ws;for(le.add(b);!le.isEmpty();){var Me=le.poll(),Ue=Me.getDistance();if(Ue>R)return!1;if(Me.maximumDistance()<=R)return!0;if(Me.isLeaves()){if((Z=Ue)<=R)return!0}else Me.expandToQueue(le,Z)}return!1}if(arguments.length===3){var dt=arguments[0],Nt=arguments[1],wn=arguments[2],Nn=new Ea(this.getRoot(),dt.getRoot(),Nt);return this.isWithinDistance(Nn,wn)}}},{key:"interfaces_",get:function(){return[Wa,K]}}],[{key:"constructor_",value:function(){if(arguments.length===0)y.constructor_.call(this,y.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var b=arguments[0];Ss.constructor_.call(this,b)}}},{key:"centreX",value:function(b){return y.avg(b.getMinX(),b.getMaxX())}},{key:"avg",value:function(b,R){return(b+R)/2}},{key:"getItems",value:function(b){for(var R=new Array(b.size()).fill(null),Z=0;!b.isEmpty();){var le=b.poll();R[Z]=le.getBoundable(0).getItem(),Z++}return R}},{key:"centreY",value:function(b){return y.avg(b.getMinY(),b.getMaxY())}}])}(Ss),Dl=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"computeBounds",value:function(){for(var b=null,R=this.getChildBoundables().iterator();R.hasNext();){var Z=R.next();b===null?b=new pt(Z.getBounds()):b.expandToInclude(Z.getBounds())}return b}}],[{key:"constructor_",value:function(){var b=arguments[0];bo.constructor_.call(this,b)}}])}(bo);Fs.STRtreeNode=Dl,Fs.xComparator=new(function(){return a(function I(){i(this,I)},[{key:"interfaces_",get:function(){return[Ie]}},{key:"compare",value:function(I,y){return Ss.compareDoubles(Fs.centreX(I.getBounds()),Fs.centreX(y.getBounds()))}}])}()),Fs.yComparator=new(function(){return a(function I(){i(this,I)},[{key:"interfaces_",get:function(){return[Ie]}},{key:"compare",value:function(I,y){return Ss.compareDoubles(Fs.centreY(I.getBounds()),Fs.centreY(y.getBounds()))}}])}()),Fs.intersectsOp=new(function(){return a(function I(){i(this,I)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(I,y){return I.intersects(y)}}])}()),Fs.DEFAULT_NODE_CAPACITY=10;var Sc=function(){function I(){i(this,I)}return a(I,null,[{key:"relativeSign",value:function(y,b){return y<b?-1:y>b?1:0}},{key:"compare",value:function(y,b,R){if(b.equals2D(R))return 0;var Z=I.relativeSign(b.x,R.x),le=I.relativeSign(b.y,R.y);switch(y){case 0:return I.compareValue(Z,le);case 1:return I.compareValue(le,Z);case 2:return I.compareValue(le,-Z);case 3:return I.compareValue(-Z,le);case 4:return I.compareValue(-Z,-le);case 5:return I.compareValue(-le,-Z);case 6:return I.compareValue(-le,Z);case 7:return I.compareValue(Z,-le)}return ve.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(y,b){return y<0?-1:y>0?1:b<0?-1:b>0?1:0}}])}(),Ec=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(I){I.print(this.coord),I.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(I){var y=I;return this.segmentIndex<y.segmentIndex?-1:this.segmentIndex>y.segmentIndex?1:this.coord.equals2D(y.coord)?0:this._isInterior?y._isInterior?Sc.compare(this._segmentOctant,this.coord,y.coord):1:-1}},{key:"isEndPoint",value:function(I){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===I}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var I=arguments[0],y=arguments[1],b=arguments[2],R=arguments[3];this._segString=I,this.coord=new Ae(y),this.segmentIndex=b,this._segmentOctant=R,this._isInterior=!y.equals2D(I.getCoordinate(b))}}])}(),Eu=function(){return a(function I(){i(this,I)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),Tu=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var I=new gi;this.addEndpoints();for(var y=this.iterator(),b=y.next();y.hasNext();){var R=y.next();this.addEdgeCoordinates(b,R,I),b=R}return I.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var I=new rt;this.findCollapsesFromInsertedNodes(I),this.findCollapsesFromExistingVertices(I);for(var y=I.iterator();y.hasNext();){var b=y.next().intValue();this.add(this._edge.getCoordinate(b),b)}}},{key:"createSplitEdgePts",value:function(I,y){var b=y.segmentIndex-I.segmentIndex+2;if(b===2)return[new Ae(I.coord),new Ae(y.coord)];var R=this._edge.getCoordinate(y.segmentIndex),Z=y.isInterior()||!y.coord.equals2D(R);Z||b--;var le=new Array(b).fill(null),Me=0;le[Me++]=new Ae(I.coord);for(var Ue=I.segmentIndex+1;Ue<=y.segmentIndex;Ue++)le[Me++]=this._edge.getCoordinate(Ue);return Z&&(le[Me]=new Ae(y.coord)),le}},{key:"print",value:function(I){I.println("Intersections:");for(var y=this.iterator();y.hasNext();)y.next().print(I)}},{key:"findCollapsesFromExistingVertices",value:function(I){for(var y=0;y<this._edge.size()-2;y++){var b=this._edge.getCoordinate(y);this._edge.getCoordinate(y+1);var R=this._edge.getCoordinate(y+2);b.equals2D(R)&&I.add(Bt.valueOf(y+1))}}},{key:"addEdgeCoordinates",value:function(I,y,b){var R=this.createSplitEdgePts(I,y);b.add(R,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(I){this.addEndpoints(),this.addCollapsedNodes();for(var y=this.iterator(),b=y.next();y.hasNext();){var R=y.next(),Z=this.createSplitEdge(b,R);I.add(Z),b=R}}},{key:"findCollapseIndex",value:function(I,y,b){if(!I.coord.equals2D(y.coord))return!1;var R=y.segmentIndex-I.segmentIndex;return y.isInterior()||R--,R===1&&(b[0]=I.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(I){for(var y=new Array(1).fill(null),b=this.iterator(),R=b.next();b.hasNext();){var Z=b.next();this.findCollapseIndex(R,Z,y)&&I.add(Bt.valueOf(y[0])),R=Z}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var I=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(I),I)}},{key:"createSplitEdge",value:function(I,y){var b=this.createSplitEdgePts(I,y);return new Wl(b,this._edge.getData())}},{key:"add",value:function(I,y){var b=new Ec(this._edge,I,y,this._edge.getSegmentOctant(y)),R=this._nodeMap.get(b);return R!==null?(ve.isTrue(R.coord.equals2D(I),"Found equal nodes with different coordinates"),R):(this._nodeMap.put(b,b),b)}},{key:"checkSplitEdgesCorrectness",value:function(I){var y=this._edge.getCoordinates(),b=I.get(0).getCoordinate(0);if(!b.equals2D(y[0]))throw new me("bad split edge start point at "+b);var R=I.get(I.size()-1).getCoordinates(),Z=R[R.length-1];if(!Z.equals2D(y[y.length-1]))throw new me("bad split edge end point at "+Z)}}],[{key:"constructor_",value:function(){this._nodeMap=new xo,this._edge=null;var I=arguments[0];this._edge=I}}])}(),Xs=function(){function I(){i(this,I)}return a(I,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var y=arguments[0],b=arguments[1];if(y===0&&b===0)throw new H("Cannot compute the octant for point ( "+y+", "+b+" )");var R=Math.abs(y),Z=Math.abs(b);return y>=0?b>=0?R>=Z?0:1:R>=Z?7:6:b>=0?R>=Z?3:2:R>=Z?4:5}if(arguments[0]instanceof Ae&&arguments[1]instanceof Ae){var le=arguments[0],Me=arguments[1],Ue=Me.x-le.x,dt=Me.y-le.y;if(Ue===0&&dt===0)throw new H("Cannot compute the octant for two identical points "+le);return I.octant(Ue,dt)}}}])}(),$c=function(){return a(function I(){i(this,I)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(I){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(I){}},{key:"getData",value:function(){}}])}(),Es=function(){return a(function I(){i(this,I)},[{key:"addIntersection",value:function(I,y){}},{key:"interfaces_",get:function(){return[$c]}}])}(),Wl=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(y){return this._pts[y]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(y){return y===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(y),this.getCoordinate(y+1))}},{key:"setData",value:function(y){this._data=y}},{key:"safeOctant",value:function(y,b){return y.equals2D(b)?0:Xs.octant(y,b)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var y=arguments[0],b=arguments[1];this.addIntersectionNode(y,b)}else if(arguments.length===4){var R=arguments[1],Z=arguments[3],le=new Ae(arguments[0].getIntersection(Z));this.addIntersection(le,R)}}},{key:"toString",value:function(){return ur.toLineString(new bn(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(y,b){var R=b,Z=R+1;if(Z<this._pts.length){var le=this._pts[Z];y.equals2D(le)&&(R=Z)}return this._nodeList.add(y,R)}},{key:"addIntersections",value:function(y,b,R){for(var Z=0;Z<y.getIntersectionNum();Z++)this.addIntersection(y,b,R,Z)}},{key:"interfaces_",get:function(){return[Es]}}],[{key:"constructor_",value:function(){this._nodeList=new Tu(this),this._pts=null,this._data=null;var y=arguments[0],b=arguments[1];this._pts=y,this._data=b}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var y=arguments[0],b=new rt;return I.getNodedSubstrings(y,b),b}if(arguments.length===2)for(var R=arguments[1],Z=arguments[0].iterator();Z.hasNext();)Z.next().getNodeList().addSplitEdges(R)}}])}(),Lo=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof I){var y=arguments[0],b=Et.index(this.p0,this.p1,y.p0),R=Et.index(this.p0,this.p1,y.p1);return b>=0&&R>=0||b<=0&&R<=0?Math.max(b,R):0}if(arguments[0]instanceof Ae){var Z=arguments[0];return Et.index(this.p0,this.p1,Z)}}},{key:"toGeometry",value:function(y){return y.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(y){if(!(y instanceof I))return!1;var b=y;return this.p0.equals(b.p0)&&this.p1.equals(b.p1)}},{key:"intersection",value:function(y){var b=new Ir;return b.computeIntersection(this.p0,this.p1,y.p0,y.p1),b.hasIntersection()?b.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof Ae){var y=arguments[0];if(y.equals(this.p0)||y.equals(this.p1))return new Ae(y);var b=this.projectionFactor(y),R=new Ae;return R.x=this.p0.x+b*(this.p1.x-this.p0.x),R.y=this.p0.y+b*(this.p1.y-this.p0.y),R}if(arguments[0]instanceof I){var Z=arguments[0],le=this.projectionFactor(Z.p0),Me=this.projectionFactor(Z.p1);if(le>=1&&Me>=1||le<=0&&Me<=0)return null;var Ue=this.project(Z.p0);le<0&&(Ue=this.p0),le>1&&(Ue=this.p1);var dt=this.project(Z.p1);return Me<0&&(dt=this.p0),Me>1&&(dt=this.p1),new I(Ue,dt)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(y){return y===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(y){return it.pointToLinePerpendicular(y,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return I.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(y){if(y.equals(this.p0))return 0;if(y.equals(this.p1))return 1;var b=this.p1.x-this.p0.x,R=this.p1.y-this.p0.y,Z=b*b+R*R;return Z<=0?pe.NaN:((y.x-this.p0.x)*b+(y.y-this.p0.y)*R)/Z}},{key:"closestPoints",value:function(y){var b=this.intersection(y);if(b!==null)return[b,b];var R=new Array(2).fill(null),Z=pe.MAX_VALUE,le=null,Me=this.closestPoint(y.p0);Z=Me.distance(y.p0),R[0]=Me,R[1]=y.p0;var Ue=this.closestPoint(y.p1);(le=Ue.distance(y.p1))<Z&&(Z=le,R[0]=Ue,R[1]=y.p1);var dt=y.closestPoint(this.p0);(le=dt.distance(this.p0))<Z&&(Z=le,R[0]=this.p0,R[1]=dt);var Nt=y.closestPoint(this.p1);return(le=Nt.distance(this.p1))<Z&&(Z=le,R[0]=this.p1,R[1]=Nt),R}},{key:"closestPoint",value:function(y){var b=this.projectionFactor(y);return b>0&&b<1?this.project(y):this.p0.distance(y)<this.p1.distance(y)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(y){var b=y,R=this.p0.compareTo(b.p0);return R!==0?R:this.p1.compareTo(b.p1)}},{key:"reverse",value:function(){var y=this.p0;this.p0=this.p1,this.p1=y}},{key:"equalsTopo",value:function(y){return this.p0.equals(y.p0)&&this.p1.equals(y.p1)||this.p0.equals(y.p1)&&this.p1.equals(y.p0)}},{key:"lineIntersection",value:function(y){return Fe.intersection(this.p0,this.p1,y.p0,y.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(y,b){var R=this.p0.x+y*(this.p1.x-this.p0.x),Z=this.p0.y+y*(this.p1.y-this.p0.y),le=this.p1.x-this.p0.x,Me=this.p1.y-this.p0.y,Ue=Math.sqrt(le*le+Me*Me),dt=0,Nt=0;if(b!==0){if(Ue<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");dt=b*le/Ue,Nt=b*Me/Ue}return new Ae(R-Nt,Z+dt)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var y=arguments[0];this.setCoordinates(y.p0,y.p1)}else if(arguments.length===2){var b=arguments[0],R=arguments[1];this.p0.x=b.x,this.p0.y=b.y,this.p1.x=R.x,this.p1.y=R.y}}},{key:"segmentFraction",value:function(y){var b=this.projectionFactor(y);return b<0?b=0:(b>1||pe.isNaN(b))&&(b=1),b}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(y){var b=this.p1.getY()-this.p0.getY(),R=this.p0.getX()-this.p1.getX(),Z=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),le=b*b+R*R,Me=b*b-R*R,Ue=y.getX(),dt=y.getY();return new Ae((-Me*Ue-2*b*R*dt-2*b*Z)/le,(Me*dt-2*b*R*Ue-2*R*Z)/le)}},{key:"distance",value:function(){if(arguments[0]instanceof I){var y=arguments[0];return it.segmentToSegment(this.p0,this.p1,y.p0,y.p1)}if(arguments[0]instanceof Ae){var b=arguments[0];return it.pointToSegment(b,this.p0,this.p1)}}},{key:"pointAlong",value:function(y){var b=new Ae;return b.x=this.p0.x+y*(this.p1.x-this.p0.x),b.y=this.p0.y+y*(this.p1.y-this.p0.y),b}},{key:"hashCode",value:function(){var y=pe.doubleToLongBits(this.p0.x);y^=31*pe.doubleToLongBits(this.p0.y);var b=Math.trunc(y)^Math.trunc(y>>32),R=pe.doubleToLongBits(this.p1.x);return R^=31*pe.doubleToLongBits(this.p1.y),b^(Math.trunc(R)^Math.trunc(R>>32))}},{key:"interfaces_",get:function(){return[W,K]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)I.constructor_.call(this,new Ae,new Ae);else if(arguments.length===1){var y=arguments[0];I.constructor_.call(this,y.p0,y.p1)}else if(arguments.length===2){var b=arguments[0],R=arguments[1];this.p0=b,this.p1=R}else if(arguments.length===4){var Z=arguments[0],le=arguments[1],Me=arguments[2],Ue=arguments[3];I.constructor_.call(this,new Ae(Z,le),new Ae(Me,Ue))}}},{key:"midPoint",value:function(y,b){return new Ae((y.x+b.x)/2,(y.y+b.y)/2)}}])}(),zu=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var I=arguments[1],y=arguments[2],b=arguments[3];arguments[0].getLineSegment(I,this._overlapSeg1),y.getLineSegment(b,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Lo,this._overlapSeg2=new Lo}}])}(),au=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(I,y){y.p0=this._pts[I],y.p1=this._pts[I+1]}},{key:"computeSelect",value:function(I,y,b,R){var Z=this._pts[y],le=this._pts[b];if(b-y==1)return R.select(this,y),null;if(!I.intersects(Z,le))return null;var Me=Math.trunc((y+b)/2);y<Me&&this.computeSelect(I,y,Me,R),Me<b&&this.computeSelect(I,Me,b,R)}},{key:"getCoordinates",value:function(){for(var I=new Array(this._end-this._start+1).fill(null),y=0,b=this._start;b<=this._end;b++)I[y++]=this._pts[b];return I}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var I=arguments[0],y=arguments[1];this.computeOverlaps(this._start,this._end,I,I._start,I._end,y)}else if(arguments.length===6){var b=arguments[0],R=arguments[1],Z=arguments[2],le=arguments[3],Me=arguments[4],Ue=arguments[5];if(R-b==1&&Me-le==1)return Ue.overlap(this,b,Z,le),null;if(!this.overlaps(b,R,Z,le,Me))return null;var dt=Math.trunc((b+R)/2),Nt=Math.trunc((le+Me)/2);b<dt&&(le<Nt&&this.computeOverlaps(b,dt,Z,le,Nt,Ue),Nt<Me&&this.computeOverlaps(b,dt,Z,Nt,Me,Ue)),dt<R&&(le<Nt&&this.computeOverlaps(dt,R,Z,le,Nt,Ue),Nt<Me&&this.computeOverlaps(dt,R,Z,Nt,Me,Ue))}}},{key:"setId",value:function(I){this._id=I}},{key:"select",value:function(I,y){this.computeSelect(I,this._start,this._end,y)}},{key:"getEnvelope",value:function(){if(this._env===null){var I=this._pts[this._start],y=this._pts[this._end];this._env=new pt(I,y)}return this._env}},{key:"overlaps",value:function(I,y,b,R,Z){return pt.intersects(this._pts[I],this._pts[y],b._pts[R],b._pts[Z])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var I=arguments[0],y=arguments[1],b=arguments[2],R=arguments[3];this._pts=I,this._start=y,this._end=b,this._context=R}}])}(),Xo=function(){function I(){i(this,I)}return a(I,null,[{key:"findChainEnd",value:function(y,b){for(var R=b;R<y.length-1&&y[R].equals2D(y[R+1]);)R++;if(R>=y.length-1)return y.length-1;for(var Z=no.quadrant(y[R],y[R+1]),le=b+1;le<y.length&&!(!y[le-1].equals2D(y[le])&&no.quadrant(y[le-1],y[le])!==Z);)le++;return le-1}},{key:"getChains",value:function(){if(arguments.length===1){var y=arguments[0];return I.getChains(y,null)}if(arguments.length===2){var b=arguments[0],R=arguments[1],Z=new rt,le=0;do{var Me=I.findChainEnd(b,le),Ue=new au(b,le,Me,R);Z.add(Ue),le=Me}while(le<b.length-1);return Z}}}])}(),Uu=function(){return a(function I(){i(this,I)},[{key:"computeNodes",value:function(I){}},{key:"getNodedSubstrings",value:function(){}}])}(),fe=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(I){this._segInt=I}},{key:"interfaces_",get:function(){return[Uu]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var I=arguments[0];this.setSegmentIntersector(I)}}}}])}(),nt=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Wl.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(b){for(var R=Xo.getChains(b.getCoordinates(),b).iterator();R.hasNext();){var Z=R.next();Z.setId(this._idCounter++),this._index.insert(Z.getEnvelope(),Z),this._monoChains.add(Z)}}},{key:"computeNodes",value:function(b){this._nodedSegStrings=b;for(var R=b.iterator();R.hasNext();)this.add(R.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var b=new Wt(this._segInt),R=this._monoChains.iterator();R.hasNext();)for(var Z=R.next(),le=this._index.query(Z.getEnvelope()).iterator();le.hasNext();){var Me=le.next();if(Me.getId()>Z.getId()&&(Z.computeOverlaps(Me,b),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new rt,this._index=new Fs,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var b=arguments[0];fe.constructor_.call(this,b)}}}}])}(fe),Wt=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"overlap",value:function(){if(arguments.length!==4)return E(y,"overlap",this,1).apply(this,arguments);var b=arguments[1],R=arguments[2],Z=arguments[3],le=arguments[0].getContext(),Me=R.getContext();this._si.processIntersections(le,b,Me,Z)}}],[{key:"constructor_",value:function(){this._si=null;var b=arguments[0];this._si=b}}])}(zu);nt.SegmentOverlapAction=Wt;var un=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"isDeletable",value:function(y,b,R,Z){var le=this._inputLine[y],Me=this._inputLine[b],Ue=this._inputLine[R];return!!this.isConcave(le,Me,Ue)&&!!this.isShallow(le,Me,Ue,Z)&&this.isShallowSampled(le,Me,y,R,Z)}},{key:"deleteShallowConcavities",value:function(){for(var y=1,b=this.findNextNonDeletedIndex(y),R=this.findNextNonDeletedIndex(b),Z=!1;R<this._inputLine.length;){var le=!1;this.isDeletable(y,b,R,this._distanceTol)&&(this._isDeleted[b]=I.DELETE,le=!0,Z=!0),y=le?R:b,b=this.findNextNonDeletedIndex(y),R=this.findNextNonDeletedIndex(b)}return Z}},{key:"isShallowConcavity",value:function(y,b,R,Z){return Et.index(y,b,R)===this._angleOrientation&&it.pointToSegment(b,y,R)<Z}},{key:"isShallowSampled",value:function(y,b,R,Z,le){var Me=Math.trunc((Z-R)/I.NUM_PTS_TO_CHECK);Me<=0&&(Me=1);for(var Ue=R;Ue<Z;Ue+=Me)if(!this.isShallow(y,b,this._inputLine[Ue],le))return!1;return!0}},{key:"isConcave",value:function(y,b,R){var Z=Et.index(y,b,R)===this._angleOrientation;return Z}},{key:"simplify",value:function(y){this._distanceTol=Math.abs(y),y<0&&(this._angleOrientation=Et.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var b=!1;do b=this.deleteShallowConcavities();while(b);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(y){for(var b=y+1;b<this._inputLine.length&&this._isDeleted[b]===I.DELETE;)b++;return b}},{key:"isShallow",value:function(y,b,R,Z){return it.pointToSegment(b,y,R)<Z}},{key:"collapseLine",value:function(){for(var y=new gi,b=0;b<this._inputLine.length;b++)this._isDeleted[b]!==I.DELETE&&y.add(this._inputLine[b]);return y.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Et.COUNTERCLOCKWISE;var y=arguments[0];this._inputLine=y}},{key:"simplify",value:function(y,b){return new I(y).simplify(b)}}])}();un.INIT=0,un.DELETE=1,un.KEEP=1,un.NUM_PTS_TO_CHECK=10;var kn=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getCoordinates",value:function(){return this._ptList.toArray(I.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(y){this._precisionModel=y}},{key:"addPt",value:function(y){var b=new Ae(y);if(this._precisionModel.makePrecise(b),this.isRedundant(b))return null;this._ptList.add(b)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(y,b){if(b)for(var R=0;R<y.length;R++)this.addPt(y[R]);else for(var Z=y.length-1;Z>=0;Z--)this.addPt(y[Z])}},{key:"isRedundant",value:function(y){if(this._ptList.size()<1)return!1;var b=this._ptList.get(this._ptList.size()-1);return y.distance(b)<this._minimimVertexDistance}},{key:"toString",value:function(){return new Ni().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var y=new Ae(this._ptList.get(0)),b=this._ptList.get(this._ptList.size()-1);if(y.equals(b))return null;this._ptList.add(y)}},{key:"setMinimumVertexDistance",value:function(y){this._minimimVertexDistance=y}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new rt}}])}();kn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Kn=function(){function I(){i(this,I)}return a(I,null,[{key:"toDegrees",value:function(y){return 180*y/Math.PI}},{key:"normalize",value:function(y){for(;y>Math.PI;)y-=I.PI_TIMES_2;for(;y<=-Math.PI;)y+=I.PI_TIMES_2;return y}},{key:"angle",value:function(){if(arguments.length===1){var y=arguments[0];return Math.atan2(y.y,y.x)}if(arguments.length===2){var b=arguments[0],R=arguments[1],Z=R.x-b.x,le=R.y-b.y;return Math.atan2(le,Z)}}},{key:"isAcute",value:function(y,b,R){var Z=y.x-b.x,le=y.y-b.y;return Z*(R.x-b.x)+le*(R.y-b.y)>0}},{key:"isObtuse",value:function(y,b,R){var Z=y.x-b.x,le=y.y-b.y;return Z*(R.x-b.x)+le*(R.y-b.y)<0}},{key:"interiorAngle",value:function(y,b,R){var Z=I.angle(b,y),le=I.angle(b,R);return Math.abs(le-Z)}},{key:"normalizePositive",value:function(y){if(y<0){for(;y<0;)y+=I.PI_TIMES_2;y>=I.PI_TIMES_2&&(y=0)}else{for(;y>=I.PI_TIMES_2;)y-=I.PI_TIMES_2;y<0&&(y=0)}return y}},{key:"angleBetween",value:function(y,b,R){var Z=I.angle(b,y),le=I.angle(b,R);return I.diff(Z,le)}},{key:"diff",value:function(y,b){var R=null;return(R=y<b?b-y:y-b)>Math.PI&&(R=2*Math.PI-R),R}},{key:"toRadians",value:function(y){return y*Math.PI/180}},{key:"getTurn",value:function(y,b){var R=Math.sin(b-y);return R>0?I.COUNTERCLOCKWISE:R<0?I.CLOCKWISE:I.NONE}},{key:"angleBetweenOriented",value:function(y,b,R){var Z=I.angle(b,y),le=I.angle(b,R)-Z;return le<=-Math.PI?le+I.PI_TIMES_2:le>Math.PI?le-I.PI_TIMES_2:le}}])}();Kn.PI_TIMES_2=2*Math.PI,Kn.PI_OVER_2=Math.PI/2,Kn.PI_OVER_4=Math.PI/4,Kn.COUNTERCLOCKWISE=Et.COUNTERCLOCKWISE,Kn.CLOCKWISE=Et.CLOCKWISE,Kn.NONE=Et.COLLINEAR;var Pr=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"addNextSegment",value:function(y,b){if(this._s0=this._s1,this._s1=this._s2,this._s2=y,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var R=Et.index(this._s0,this._s1,this._s2),Z=R===Et.CLOCKWISE&&this._side===ht.LEFT||R===Et.COUNTERCLOCKWISE&&this._side===ht.RIGHT;R===0?this.addCollinear(b):Z?this.addOutsideTurn(R,b):this.addInsideTurn(R,b)}},{key:"addLineEndCap",value:function(y,b){var R=new Lo(y,b),Z=new Lo;this.computeOffsetSegment(R,ht.LEFT,this._distance,Z);var le=new Lo;this.computeOffsetSegment(R,ht.RIGHT,this._distance,le);var Me=b.x-y.x,Ue=b.y-y.y,dt=Math.atan2(Ue,Me);switch(this._bufParams.getEndCapStyle()){case O.CAP_ROUND:this._segList.addPt(Z.p1),this.addDirectedFillet(b,dt+Math.PI/2,dt-Math.PI/2,Et.CLOCKWISE,this._distance),this._segList.addPt(le.p1);break;case O.CAP_FLAT:this._segList.addPt(Z.p1),this._segList.addPt(le.p1);break;case O.CAP_SQUARE:var Nt=new Ae;Nt.x=Math.abs(this._distance)*Math.cos(dt),Nt.y=Math.abs(this._distance)*Math.sin(dt);var wn=new Ae(Z.p1.x+Nt.x,Z.p1.y+Nt.y),Nn=new Ae(le.p1.x+Nt.x,le.p1.y+Nt.y);this._segList.addPt(wn),this._segList.addPt(Nn)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(y,b,R,Z){var le=Fe.intersection(b.p0,b.p1,R.p0,R.p1);if(le!==null&&(Z<=0?1:le.distance(y)/Math.abs(Z))<=this._bufParams.getMitreLimit())return this._segList.addPt(le),null;this.addLimitedMitreJoin(b,R,Z,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(y,b){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*I.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===O.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===O.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(b&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,y,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(y){this._segList.addPt(new Ae(y.x+this._distance,y.y+this._distance)),this._segList.addPt(new Ae(y.x+this._distance,y.y-this._distance)),this._segList.addPt(new Ae(y.x-this._distance,y.y-this._distance)),this._segList.addPt(new Ae(y.x-this._distance,y.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(y,b){this._segList.addPts(y,b)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(y,b,R,Z,le){var Me=b.x-y.x,Ue=b.y-y.y,dt=Math.atan2(Ue,Me),Nt=R.x-y.x,wn=R.y-y.y,Nn=Math.atan2(wn,Nt);Z===Et.CLOCKWISE?dt<=Nn&&(dt+=2*Math.PI):dt>=Nn&&(dt-=2*Math.PI),this._segList.addPt(b),this.addDirectedFillet(y,dt,Nn,Z,le),this._segList.addPt(R)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(y,b,R){this._s1=y,this._s2=b,this._side=R,this._seg1.setCoordinates(y,b),this.computeOffsetSegment(this._seg1,R,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(y,b,R,Z){var le=this._seg0.p1,Me=Kn.angle(le,this._seg0.p0),Ue=Kn.angleBetweenOriented(this._seg0.p0,le,this._seg1.p1)/2,dt=Kn.normalize(Me+Ue),Nt=Kn.normalize(dt+Math.PI),wn=Z*R,Nn=R-wn*Math.abs(Math.sin(Ue)),dr=le.x+wn*Math.cos(Nt),$r=le.y+wn*Math.sin(Nt),mi=new Ae(dr,$r),xi=new Lo(le,mi),si=xi.pointAlongOffset(1,Nn),ci=xi.pointAlongOffset(1,-Nn);this._side===ht.LEFT?(this._segList.addPt(si),this._segList.addPt(ci)):(this._segList.addPt(ci),this._segList.addPt(si))}},{key:"addDirectedFillet",value:function(y,b,R,Z,le){var Me=Z===Et.CLOCKWISE?-1:1,Ue=Math.abs(b-R),dt=Math.trunc(Ue/this._filletAngleQuantum+.5);if(dt<1)return null;for(var Nt=Ue/dt,wn=new Ae,Nn=0;Nn<dt;Nn++){var dr=b+Me*Nn*Nt;wn.x=y.x+le*Math.cos(dr),wn.y=y.y+le*Math.sin(dr),this._segList.addPt(wn)}}},{key:"computeOffsetSegment",value:function(y,b,R,Z){var le=b===ht.LEFT?1:-1,Me=y.p1.x-y.p0.x,Ue=y.p1.y-y.p0.y,dt=Math.sqrt(Me*Me+Ue*Ue),Nt=le*R*Me/dt,wn=le*R*Ue/dt;Z.p0.x=y.p0.x-wn,Z.p0.y=y.p0.y+Nt,Z.p1.x=y.p1.x-wn,Z.p1.y=y.p1.y+Nt}},{key:"addInsideTurn",value:function(y,b){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*I.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var R=new Ae((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(R);var Z=new Ae((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(Z)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(y){var b=new Ae(y.x+this._distance,y.y);this._segList.addPt(b),this.addDirectedFillet(y,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(y,b){this._segList.addPt(y.p1),this._segList.addPt(b.p0)}},{key:"init",value:function(y){this._distance=y,this._maxCurveSegmentError=y*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new kn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(y*I.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(y){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===O.JOIN_BEVEL||this._bufParams.getJoinStyle()===O.JOIN_MITRE?(y&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Et.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Lo,this._seg1=new Lo,this._offset0=new Lo,this._offset1=new Lo,this._side=0,this._hasNarrowConcaveAngle=!1;var y=arguments[0],b=arguments[1],R=arguments[2];this._precisionModel=y,this._bufParams=b,this._li=new Ir,this._filletAngleQuantum=Math.PI/2/b.getQuadrantSegments(),b.getQuadrantSegments()>=8&&b.getJoinStyle()===O.JOIN_ROUND&&(this._closingSegLengthFactor=I.MAX_CLOSING_SEG_LEN_FACTOR),this.init(R)}}])}();Pr.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Pr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Pr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Pr.MAX_CLOSING_SEG_LEN_FACTOR=80;var oi=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getOffsetCurve",value:function(y,b){if(this._distance=b,b===0)return null;var R=b<0,Z=Math.abs(b),le=this.getSegGen(Z);y.length<=1?this.computePointCurve(y[0],le):this.computeOffsetCurve(y,R,le);var Me=le.getCoordinates();return R&&lt.reverse(Me),Me}},{key:"computeSingleSidedBufferCurve",value:function(y,b,R){var Z=this.simplifyTolerance(this._distance);if(b){R.addSegments(y,!0);var le=un.simplify(y,-Z),Me=le.length-1;R.initSideSegments(le[Me],le[Me-1],ht.LEFT),R.addFirstSegment();for(var Ue=Me-2;Ue>=0;Ue--)R.addNextSegment(le[Ue],!0)}else{R.addSegments(y,!1);var dt=un.simplify(y,Z),Nt=dt.length-1;R.initSideSegments(dt[0],dt[1],ht.LEFT),R.addFirstSegment();for(var wn=2;wn<=Nt;wn++)R.addNextSegment(dt[wn],!0)}R.addLastSegment(),R.closeRing()}},{key:"computeRingBufferCurve",value:function(y,b,R){var Z=this.simplifyTolerance(this._distance);b===ht.RIGHT&&(Z=-Z);var le=un.simplify(y,Z),Me=le.length-1;R.initSideSegments(le[Me-1],le[0],b);for(var Ue=1;Ue<=Me;Ue++){var dt=Ue!==1;R.addNextSegment(le[Ue],dt)}R.closeRing()}},{key:"computeLineBufferCurve",value:function(y,b){var R=this.simplifyTolerance(this._distance),Z=un.simplify(y,R),le=Z.length-1;b.initSideSegments(Z[0],Z[1],ht.LEFT);for(var Me=2;Me<=le;Me++)b.addNextSegment(Z[Me],!0);b.addLastSegment(),b.addLineEndCap(Z[le-1],Z[le]);var Ue=un.simplify(y,-R),dt=Ue.length-1;b.initSideSegments(Ue[dt],Ue[dt-1],ht.LEFT);for(var Nt=dt-2;Nt>=0;Nt--)b.addNextSegment(Ue[Nt],!0);b.addLastSegment(),b.addLineEndCap(Ue[1],Ue[0]),b.closeRing()}},{key:"computePointCurve",value:function(y,b){switch(this._bufParams.getEndCapStyle()){case O.CAP_ROUND:b.createCircle(y);break;case O.CAP_SQUARE:b.createSquare(y)}}},{key:"getLineCurve",value:function(y,b){if(this._distance=b,this.isLineOffsetEmpty(b))return null;var R=Math.abs(b),Z=this.getSegGen(R);if(y.length<=1)this.computePointCurve(y[0],Z);else if(this._bufParams.isSingleSided()){var le=b<0;this.computeSingleSidedBufferCurve(y,le,Z)}else this.computeLineBufferCurve(y,Z);return Z.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(y){return y*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(y,b,R){if(this._distance=R,y.length<=2)return this.getLineCurve(y,R);if(R===0)return I.copyCoordinates(y);var Z=this.getSegGen(R);return this.computeRingBufferCurve(y,b,Z),Z.getCoordinates()}},{key:"computeOffsetCurve",value:function(y,b,R){var Z=this.simplifyTolerance(this._distance);if(b){var le=un.simplify(y,-Z),Me=le.length-1;R.initSideSegments(le[Me],le[Me-1],ht.LEFT),R.addFirstSegment();for(var Ue=Me-2;Ue>=0;Ue--)R.addNextSegment(le[Ue],!0)}else{var dt=un.simplify(y,Z),Nt=dt.length-1;R.initSideSegments(dt[0],dt[1],ht.LEFT),R.addFirstSegment();for(var wn=2;wn<=Nt;wn++)R.addNextSegment(dt[wn],!0)}R.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(y){return y===0||y<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(y){return new Pr(this._precisionModel,this._bufParams,y)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var y=arguments[0],b=arguments[1];this._precisionModel=y,this._bufParams=b}},{key:"copyCoordinates",value:function(y){for(var b=new Array(y.length).fill(null),R=0;R<b.length;R++)b[R]=new Ae(y[R]);return b}}])}(),Ci=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var I=arguments[0],y=new rt,b=this._subgraphs.iterator();b.hasNext();){var R=b.next(),Z=R.getEnvelope();I.y<Z.getMinY()||I.y>Z.getMaxY()||this.findStabbedSegments(I,R.getDirectedEdges(),y)}return y}if(arguments.length===3){if(Dt(arguments[2],Re)&&arguments[0]instanceof Ae&&arguments[1]instanceof ts){for(var le=arguments[0],Me=arguments[1],Ue=arguments[2],dt=Me.getEdge().getCoordinates(),Nt=0;Nt<dt.length-1;Nt++)if(this._seg.p0=dt[Nt],this._seg.p1=dt[Nt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<le.x||this._seg.isHorizontal()||le.y<this._seg.p0.y||le.y>this._seg.p1.y||Et.index(this._seg.p0,this._seg.p1,le)===Et.RIGHT)){var wn=Me.getDepth(ht.LEFT);this._seg.p0.equals(dt[Nt])||(wn=Me.getDepth(ht.RIGHT));var Nn=new Zi(this._seg,wn);Ue.add(Nn)}}else if(Dt(arguments[2],Re)&&arguments[0]instanceof Ae&&Dt(arguments[1],Re))for(var dr=arguments[0],$r=arguments[2],mi=arguments[1].iterator();mi.hasNext();){var xi=mi.next();xi.isForward()&&this.findStabbedSegments(dr,xi,$r)}}}},{key:"getDepth",value:function(I){var y=this.findStabbedSegments(I);return y.size()===0?0:Bu.min(y)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Lo;var I=arguments[0];this._subgraphs=I}}])}(),Zi=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(I){var y=I;if(this._upwardSeg.minX()>=y._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=y._upwardSeg.minX())return-1;var b=this._upwardSeg.orientationIndex(y._upwardSeg);return b!==0||(b=-1*y._upwardSeg.orientationIndex(this._upwardSeg))!==0?b:this._upwardSeg.compareTo(y._upwardSeg)}},{key:"compareX",value:function(I,y){var b=I.p0.compareTo(y.p0);return b!==0?b:I.p1.compareTo(y.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var I=arguments[0],y=arguments[1];this._upwardSeg=new Lo(I),this._leftDepth=y}}])}();Ci.DepthSegment=Zi;var Oi=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,null,[{key:"constructor_",value:function(){N.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(N),qi=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getY",value:function(){var y=this.y/this.w;if(pe.isNaN(y)||pe.isInfinite(y))throw new Oi;return y}},{key:"getX",value:function(){var y=this.x/this.w;if(pe.isNaN(y)||pe.isInfinite(y))throw new Oi;return y}},{key:"getCoordinate",value:function(){var y=new Ae;return y.x=this.getX(),y.y=this.getY(),y}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var y=arguments[0];this.x=y.x,this.y=y.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var b=arguments[0],R=arguments[1];this.x=b,this.y=R,this.w=1}else if(arguments[0]instanceof I&&arguments[1]instanceof I){var Z=arguments[0],le=arguments[1];this.x=Z.y*le.w-le.y*Z.w,this.y=le.x*Z.w-Z.x*le.w,this.w=Z.x*le.y-le.x*Z.y}else if(arguments[0]instanceof Ae&&arguments[1]instanceof Ae){var Me=arguments[0],Ue=arguments[1];this.x=Me.y-Ue.y,this.y=Ue.x-Me.x,this.w=Me.x*Ue.y-Ue.x*Me.y}}else if(arguments.length===3){var dt=arguments[0],Nt=arguments[1],wn=arguments[2];this.x=dt,this.y=Nt,this.w=wn}else if(arguments.length===4){var Nn=arguments[0],dr=arguments[1],$r=arguments[2],mi=arguments[3],xi=Nn.y-dr.y,si=dr.x-Nn.x,ci=Nn.x*dr.y-dr.x*Nn.y,Fi=$r.y-mi.y,hi=mi.x-$r.x,Ii=$r.x*mi.y-mi.x*$r.y;this.x=si*Ii-hi*ci,this.y=Fi*ci-xi*Ii,this.w=xi*hi-Fi*si}}}])}(),za=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"area",value:function(){return I.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return I.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(y){if(y===null)throw new H("Supplied point is null.");return I.interpolateZ(y,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return I.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return I.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return I.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return I.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return I.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return I.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var y=arguments[0],b=arguments[1],R=arguments[2];this.p0=y,this.p1=b,this.p2=R}},{key:"area",value:function(y,b,R){return Math.abs(((R.x-y.x)*(b.y-y.y)-(b.x-y.x)*(R.y-y.y))/2)}},{key:"signedArea",value:function(y,b,R){return((R.x-y.x)*(b.y-y.y)-(b.x-y.x)*(R.y-y.y))/2}},{key:"det",value:function(y,b,R,Z){return y*Z-b*R}},{key:"interpolateZ",value:function(y,b,R,Z){var le=b.x,Me=b.y,Ue=R.x-le,dt=Z.x-le,Nt=R.y-Me,wn=Z.y-Me,Nn=Ue*wn-dt*Nt,dr=y.x-le,$r=y.y-Me,mi=(wn*dr-dt*$r)/Nn,xi=(-Nt*dr+Ue*$r)/Nn;return b.getZ()+mi*(R.getZ()-b.getZ())+xi*(Z.getZ()-b.getZ())}},{key:"longestSideLength",value:function(y,b,R){var Z=y.distance(b),le=b.distance(R),Me=R.distance(y),Ue=Z;return le>Ue&&(Ue=le),Me>Ue&&(Ue=Me),Ue}},{key:"circumcentreDD",value:function(y,b,R){var Z=Zt.valueOf(y.x).subtract(R.x),le=Zt.valueOf(y.y).subtract(R.y),Me=Zt.valueOf(b.x).subtract(R.x),Ue=Zt.valueOf(b.y).subtract(R.y),dt=Zt.determinant(Z,le,Me,Ue).multiply(2),Nt=Z.sqr().add(le.sqr()),wn=Me.sqr().add(Ue.sqr()),Nn=Zt.determinant(le,Nt,Ue,wn),dr=Zt.determinant(Z,Nt,Me,wn),$r=Zt.valueOf(R.x).subtract(Nn.divide(dt)).doubleValue(),mi=Zt.valueOf(R.y).add(dr.divide(dt)).doubleValue();return new Ae($r,mi)}},{key:"isAcute",value:function(y,b,R){return!!Kn.isAcute(y,b,R)&&!!Kn.isAcute(b,R,y)&&!!Kn.isAcute(R,y,b)}},{key:"circumcentre",value:function(y,b,R){var Z=R.x,le=R.y,Me=y.x-Z,Ue=y.y-le,dt=b.x-Z,Nt=b.y-le,wn=2*I.det(Me,Ue,dt,Nt),Nn=I.det(Ue,Me*Me+Ue*Ue,Nt,dt*dt+Nt*Nt),dr=I.det(Me,Me*Me+Ue*Ue,dt,dt*dt+Nt*Nt);return new Ae(Z-Nn/wn,le+dr/wn)}},{key:"perpendicularBisector",value:function(y,b){var R=b.x-y.x,Z=b.y-y.y,le=new qi(y.x+R/2,y.y+Z/2,1),Me=new qi(y.x-Z+R/2,y.y+R+Z/2,1);return new qi(le,Me)}},{key:"angleBisector",value:function(y,b,R){var Z=b.distance(y),le=Z/(Z+b.distance(R)),Me=R.x-y.x,Ue=R.y-y.y;return new Ae(y.x+le*Me,y.y+le*Ue)}},{key:"area3D",value:function(y,b,R){var Z=b.x-y.x,le=b.y-y.y,Me=b.getZ()-y.getZ(),Ue=R.x-y.x,dt=R.y-y.y,Nt=R.getZ()-y.getZ(),wn=le*Nt-Me*dt,Nn=Me*Ue-Z*Nt,dr=Z*dt-le*Ue,$r=wn*wn+Nn*Nn+dr*dr,mi=Math.sqrt($r)/2;return mi}},{key:"centroid",value:function(y,b,R){var Z=(y.x+b.x+R.x)/3,le=(y.y+b.y+R.y)/3;return new Ae(Z,le)}},{key:"inCentre",value:function(y,b,R){var Z=b.distance(R),le=y.distance(R),Me=y.distance(b),Ue=Z+le+Me,dt=(Z*y.x+le*b.x+Me*R.x)/Ue,Nt=(Z*y.y+le*b.y+Me*R.y)/Ue;return new Ae(dt,Nt)}}])}(),ro=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(I,y,b,R,Z){if(y===0&&I.length<zn.MINIMUM_VALID_SIZE)return null;var le=R,Me=Z;I.length>=zn.MINIMUM_VALID_SIZE&&Et.isCCW(I)&&(le=Z,Me=R,b=ht.opposite(b));var Ue=this._curveBuilder.getRingCurve(I,b,y);this.addCurve(Ue,le,Me)}},{key:"addRingBothSides",value:function(I,y){this.addRingSide(I,y,ht.LEFT,Ce.EXTERIOR,Ce.INTERIOR),this.addRingSide(I,y,ht.RIGHT,Ce.INTERIOR,Ce.EXTERIOR)}},{key:"addPoint",value:function(I){if(this._distance<=0)return null;var y=I.getCoordinates(),b=this._curveBuilder.getLineCurve(y,this._distance);this.addCurve(b,Ce.EXTERIOR,Ce.INTERIOR)}},{key:"addPolygon",value:function(I){var y=this._distance,b=ht.LEFT;this._distance<0&&(y=-this._distance,b=ht.RIGHT);var R=I.getExteriorRing(),Z=lt.removeRepeatedPoints(R.getCoordinates());if(this._distance<0&&this.isErodedCompletely(R,this._distance)||this._distance<=0&&Z.length<3)return null;this.addRingSide(Z,y,b,Ce.EXTERIOR,Ce.INTERIOR);for(var le=0;le<I.getNumInteriorRing();le++){var Me=I.getInteriorRingN(le),Ue=lt.removeRepeatedPoints(Me.getCoordinates());this._distance>0&&this.isErodedCompletely(Me,-this._distance)||this.addRingSide(Ue,y,ht.opposite(b),Ce.INTERIOR,Ce.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(I,y){var b=new za(I[0],I[1],I[2]),R=b.inCentre();return it.pointToSegment(R,b.p0,b.p1)<Math.abs(y)}},{key:"addLineString",value:function(I){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var y=lt.removeRepeatedPoints(I.getCoordinates());if(lt.isRing(y)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(y,this._distance);else{var b=this._curveBuilder.getLineCurve(y,this._distance);this.addCurve(b,Ce.EXTERIOR,Ce.INTERIOR)}}},{key:"addCurve",value:function(I,y,b){if(I===null||I.length<2)return null;var R=new Wl(I,new ui(0,Ce.BOUNDARY,y,b));this._curveList.add(R)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(I){if(I.isEmpty())return null;if(I instanceof Fn)this.addPolygon(I);else if(I instanceof jt)this.addLineString(I);else if(I instanceof je)this.addPoint(I);else if(I instanceof zr)this.addCollection(I);else if(I instanceof bi)this.addCollection(I);else if(I instanceof Lr)this.addCollection(I);else{if(!(I instanceof vi))throw new yt(I.getGeometryType());this.addCollection(I)}}},{key:"isErodedCompletely",value:function(I,y){var b=I.getCoordinates();if(b.length<4)return y<0;if(b.length===4)return this.isTriangleErodedCompletely(b,y);var R=I.getEnvelopeInternal(),Z=Math.min(R.getHeight(),R.getWidth());return y<0&&2*Math.abs(y)>Z}},{key:"addCollection",value:function(I){for(var y=0;y<I.getNumGeometries();y++){var b=I.getGeometryN(y);this.add(b)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new rt;var I=arguments[0],y=arguments[1],b=arguments[2];this._inputGeom=I,this._distance=y,this._curveBuilder=b}}])}(),Ja=function(){return a(function I(){i(this,I)},[{key:"locate",value:function(I){}}])}(),zo=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,I.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ve;var y=this._parent.getGeometryN(this._index++);return y instanceof vi?(this._subcollectionIterator=new I(y),this._subcollectionIterator.next()):y}},{key:"remove",value:function(){throw new yt(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[Eu]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var y=arguments[0];this._parent=y,this._atStart=!0,this._index=0,this._max=y.getNumGeometries()}},{key:"isAtomic",value:function(y){return!(y instanceof vi)}}])}(),co=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"locate",value:function(y){return I.locate(y,this._geom)}},{key:"interfaces_",get:function(){return[Ja]}}],[{key:"constructor_",value:function(){this._geom=null;var y=arguments[0];this._geom=y}},{key:"locatePointInPolygon",value:function(y,b){if(b.isEmpty())return Ce.EXTERIOR;var R=b.getExteriorRing(),Z=I.locatePointInRing(y,R);if(Z!==Ce.INTERIOR)return Z;for(var le=0;le<b.getNumInteriorRing();le++){var Me=b.getInteriorRingN(le),Ue=I.locatePointInRing(y,Me);if(Ue===Ce.BOUNDARY)return Ce.BOUNDARY;if(Ue===Ce.INTERIOR)return Ce.EXTERIOR}return Ce.INTERIOR}},{key:"locatePointInRing",value:function(y,b){return b.getEnvelopeInternal().intersects(y)?Wr.locateInRing(y,b.getCoordinates()):Ce.EXTERIOR}},{key:"containsPointInPolygon",value:function(y,b){return Ce.EXTERIOR!==I.locatePointInPolygon(y,b)}},{key:"locateInGeometry",value:function(y,b){if(b instanceof Fn)return I.locatePointInPolygon(y,b);if(b instanceof vi)for(var R=new zo(b);R.hasNext();){var Z=R.next();if(Z!==b){var le=I.locateInGeometry(y,Z);if(le!==Ce.EXTERIOR)return le}}return Ce.EXTERIOR}},{key:"isContained",value:function(y,b){return Ce.EXTERIOR!==I.locate(y,b)}},{key:"locate",value:function(y,b){return b.isEmpty()?Ce.EXTERIOR:b.getEnvelopeInternal().intersects(y)?I.locateInGeometry(y,b):Ce.EXTERIOR}}])}(),Ts=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(I){this.getEdges();var y=this._edgeList.indexOf(I),b=y-1;return y===0&&(b=this._edgeList.size()-1),this._edgeList.get(b)}},{key:"propagateSideLabels",value:function(I){for(var y=Ce.NONE,b=this.iterator();b.hasNext();){var R=b.next().getLabel();R.isArea(I)&&R.getLocation(I,ht.LEFT)!==Ce.NONE&&(y=R.getLocation(I,ht.LEFT))}if(y===Ce.NONE)return null;for(var Z=y,le=this.iterator();le.hasNext();){var Me=le.next(),Ue=Me.getLabel();if(Ue.getLocation(I,ht.ON)===Ce.NONE&&Ue.setLocation(I,ht.ON,Z),Ue.isArea(I)){var dt=Ue.getLocation(I,ht.LEFT),Nt=Ue.getLocation(I,ht.RIGHT);if(Nt!==Ce.NONE){if(Nt!==Z)throw new Dn("side location conflict",Me.getCoordinate());dt===Ce.NONE&&ve.shouldNeverReachHere("found single null side (at "+Me.getCoordinate()+")"),Z=dt}else ve.isTrue(Ue.getLocation(I,ht.LEFT)===Ce.NONE,"found single null side"),Ue.setLocation(I,ht.RIGHT,Z),Ue.setLocation(I,ht.LEFT,Z)}}}},{key:"getCoordinate",value:function(){var I=this.iterator();return I.hasNext()?I.next().getCoordinate():null}},{key:"print",value:function(I){He.out.println("EdgeEndStar:   "+this.getCoordinate());for(var y=this.iterator();y.hasNext();)y.next().print(I)}},{key:"isAreaLabelsConsistent",value:function(I){return this.computeEdgeEndLabels(I.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(I){var y=this.getEdges();if(y.size()<=0)return!0;var b=y.size()-1,R=y.get(b).getLabel().getLocation(I,ht.LEFT);ve.isTrue(R!==Ce.NONE,"Found unlabelled area edge");for(var Z=R,le=this.iterator();le.hasNext();){var Me=le.next().getLabel();ve.isTrue(Me.isArea(I),"Found non-area edge");var Ue=Me.getLocation(I,ht.LEFT),dt=Me.getLocation(I,ht.RIGHT);if(Ue===dt||dt!==Z)return!1;Z=Ue}return!0}},{key:"findIndex",value:function(I){this.iterator();for(var y=0;y<this._edgeList.size();y++)if(this._edgeList.get(y)===I)return y;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new rt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(I,y,b){return this._ptInAreaLocation[I]===Ce.NONE&&(this._ptInAreaLocation[I]=co.locate(y,b[I].getGeometry())),this._ptInAreaLocation[I]}},{key:"toString",value:function(){var I=new At;I.append("EdgeEndStar:   "+this.getCoordinate()),I.append(`
`);for(var y=this.iterator();y.hasNext();){var b=y.next();I.append(b),I.append(`
`)}return I.toString()}},{key:"computeEdgeEndLabels",value:function(I){for(var y=this.iterator();y.hasNext();)y.next().computeLabel(I)}},{key:"computeLabelling",value:function(I){this.computeEdgeEndLabels(I[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var y=[!1,!1],b=this.iterator();b.hasNext();)for(var R=b.next().getLabel(),Z=0;Z<2;Z++)R.isLine(Z)&&R.getLocation(Z)===Ce.BOUNDARY&&(y[Z]=!0);for(var le=this.iterator();le.hasNext();)for(var Me=le.next(),Ue=Me.getLabel(),dt=0;dt<2;dt++)if(Ue.isAnyNull(dt)){var Nt=Ce.NONE;if(y[dt])Nt=Ce.EXTERIOR;else{var wn=Me.getCoordinate();Nt=this.getLocation(dt,wn,I)}Ue.setAllLocationsIfNull(dt,Nt)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(I,y){this._edgeMap.put(I,y),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new xo,this._edgeList=null,this._ptInAreaLocation=[Ce.NONE,Ce.NONE]}}])}(),ll=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var b=null,R=null,Z=this._SCANNING_FOR_INCOMING,le=0;le<this._resultAreaEdgeList.size();le++){var Me=this._resultAreaEdgeList.get(le),Ue=Me.getSym();if(Me.getLabel().isArea())switch(b===null&&Me.isInResult()&&(b=Me),Z){case this._SCANNING_FOR_INCOMING:if(!Ue.isInResult())continue;R=Ue,Z=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!Me.isInResult())continue;R.setNext(Me),Z=this._SCANNING_FOR_INCOMING}}if(Z===this._LINKING_TO_OUTGOING){if(b===null)throw new Dn("no outgoing dirEdge found",this.getCoordinate());ve.isTrue(b.isInResult(),"unable to link last incoming dirEdge"),R.setNext(b)}}},{key:"insert",value:function(b){var R=b;this.insertEdgeEnd(R,R)}},{key:"getRightmostEdge",value:function(){var b=this.getEdges(),R=b.size();if(R<1)return null;var Z=b.get(0);if(R===1)return Z;var le=b.get(R-1),Me=Z.getQuadrant(),Ue=le.getQuadrant();return no.isNorthern(Me)&&no.isNorthern(Ue)?Z:no.isNorthern(Me)||no.isNorthern(Ue)?Z.getDy()!==0?Z:le.getDy()!==0?le:(ve.shouldNeverReachHere("found two horizontal edges incident on node"),null):le}},{key:"print",value:function(b){He.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var R=this.iterator();R.hasNext();){var Z=R.next();b.print("out "),Z.print(b),b.println(),b.print("in "),Z.getSym().print(b),b.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new rt;for(var b=this.iterator();b.hasNext();){var R=b.next();(R.isInResult()||R.getSym().isInResult())&&this._resultAreaEdgeList.add(R)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(b){for(var R=this.iterator();R.hasNext();){var Z=R.next().getLabel();Z.setAllLocationsIfNull(0,b.getLocation(0)),Z.setAllLocationsIfNull(1,b.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var b=null,R=null,Z=this._edgeList.size()-1;Z>=0;Z--){var le=this._edgeList.get(Z),Me=le.getSym();R===null&&(R=Me),b!==null&&Me.setNext(b),b=le}R.setNext(b)}},{key:"computeDepths",value:function(){if(arguments.length===1){var b=arguments[0],R=this.findIndex(b),Z=b.getDepth(ht.LEFT),le=b.getDepth(ht.RIGHT),Me=this.computeDepths(R+1,this._edgeList.size(),Z);if(this.computeDepths(0,R,Me)!==le)throw new Dn("depth mismatch at "+b.getCoordinate())}else if(arguments.length===3){for(var Ue=arguments[1],dt=arguments[2],Nt=arguments[0];Nt<Ue;Nt++){var wn=this._edgeList.get(Nt);wn.setEdgeDepths(ht.RIGHT,dt),dt=wn.getDepth(ht.LEFT)}return dt}}},{key:"mergeSymLabels",value:function(){for(var b=this.iterator();b.hasNext();){var R=b.next();R.getLabel().merge(R.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(b){for(var R=null,Z=null,le=this._SCANNING_FOR_INCOMING,Me=this._resultAreaEdgeList.size()-1;Me>=0;Me--){var Ue=this._resultAreaEdgeList.get(Me),dt=Ue.getSym();switch(R===null&&Ue.getEdgeRing()===b&&(R=Ue),le){case this._SCANNING_FOR_INCOMING:if(dt.getEdgeRing()!==b)continue;Z=dt,le=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(Ue.getEdgeRing()!==b)continue;Z.setNextMin(Ue),le=this._SCANNING_FOR_INCOMING}}le===this._LINKING_TO_OUTGOING&&(ve.isTrue(R!==null,"found null for first outgoing dirEdge"),ve.isTrue(R.getEdgeRing()===b,"unable to link last incoming dirEdge"),Z.setNextMin(R))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var b=0,R=this.iterator();R.hasNext();)R.next().isInResult()&&b++;return b}if(arguments.length===1){for(var Z=arguments[0],le=0,Me=this.iterator();Me.hasNext();)Me.next().getEdgeRing()===Z&&le++;return le}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var b=Ce.NONE,R=this.iterator();R.hasNext();){var Z=R.next(),le=Z.getSym();if(!Z.isLineEdge()){if(Z.isInResult()){b=Ce.INTERIOR;break}if(le.isInResult()){b=Ce.EXTERIOR;break}}}if(b===Ce.NONE)return null;for(var Me=b,Ue=this.iterator();Ue.hasNext();){var dt=Ue.next(),Nt=dt.getSym();dt.isLineEdge()?dt.getEdge().setCovered(Me===Ce.INTERIOR):(dt.isInResult()&&(Me=Ce.EXTERIOR),Nt.isInResult()&&(Me=Ce.INTERIOR))}}},{key:"computeLabelling",value:function(b){E(y,"computeLabelling",this,1).call(this,b),this._label=new ui(Ce.NONE);for(var R=this.iterator();R.hasNext();)for(var Z=R.next().getEdge().getLabel(),le=0;le<2;le++){var Me=Z.getLocation(le);Me!==Ce.INTERIOR&&Me!==Ce.BOUNDARY||this._label.setLocation(le,Ce.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(Ts),Ys=function(I){function y(){return i(this,y),r(this,y)}return v(y,I),a(y,[{key:"createNode",value:function(b){return new ea(b,new ll)}}])}(xl),Wc=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"compareTo",value:function(y){var b=y;return I.compareOriented(this._pts,this._orientation,b._pts,b._orientation)}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var y=arguments[0];this._pts=y,this._orientation=I.orientation(y)}},{key:"orientation",value:function(y){return lt.increasingDirection(y)===1}},{key:"compareOriented",value:function(y,b,R,Z){for(var le=b?1:-1,Me=Z?1:-1,Ue=b?y.length:-1,dt=Z?R.length:-1,Nt=b?0:y.length-1,wn=Z?0:R.length-1;;){var Nn=y[Nt].compareTo(R[wn]);if(Nn!==0)return Nn;var dr=(Nt+=le)===Ue,$r=(wn+=Me)===dt;if(dr&&!$r)return-1;if(!dr&&$r)return 1;if(dr&&$r)return 0}}}])}(),Ll=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"print",value:function(I){I.print("MULTILINESTRING ( ");for(var y=0;y<this._edges.size();y++){var b=this._edges.get(y);y>0&&I.print(","),I.print("(");for(var R=b.getCoordinates(),Z=0;Z<R.length;Z++)Z>0&&I.print(","),I.print(R[Z].x+" "+R[Z].y);I.println(")")}I.print(")  ")}},{key:"addAll",value:function(I){for(var y=I.iterator();y.hasNext();)this.add(y.next())}},{key:"findEdgeIndex",value:function(I){for(var y=0;y<this._edges.size();y++)if(this._edges.get(y).equals(I))return y;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(I){return this._edges.get(I)}},{key:"findEqualEdge",value:function(I){var y=new Wc(I.getCoordinates());return this._ocaMap.get(y)}},{key:"add",value:function(I){this._edges.add(I);var y=new Wc(I.getCoordinates());this._ocaMap.put(y,I)}}],[{key:"constructor_",value:function(){this._edges=new rt,this._ocaMap=new xo}}])}(),Xl=function(){return a(function I(){i(this,I)},[{key:"processIntersections",value:function(I,y,b,R){}},{key:"isDone",value:function(){}}])}(),Tc=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"isTrivialIntersection",value:function(y,b,R,Z){if(y===R&&this._li.getIntersectionNum()===1){if(I.isAdjacentSegments(b,Z))return!0;if(y.isClosed()){var le=y.size()-1;if(b===0&&Z===le||Z===0&&b===le)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(y,b,R,Z){if(y===R&&b===Z)return null;this.numTests++;var le=y.getCoordinates()[b],Me=y.getCoordinates()[b+1],Ue=R.getCoordinates()[Z],dt=R.getCoordinates()[Z+1];this._li.computeIntersection(le,Me,Ue,dt),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(y,b,R,Z)||(this._hasIntersection=!0,y.addIntersections(this._li,b,0),R.addIntersections(this._li,Z,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Xl]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var y=arguments[0];this._li=y}},{key:"isAdjacentSegments",value:function(y,b){return Math.abs(y-b)===1}}])}(),Yl=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(I){I.print(this.coord),I.print(" seg # = "+this.segmentIndex),I.println(" dist = "+this.dist)}},{key:"compareTo",value:function(I){var y=I;return this.compare(y.segmentIndex,y.dist)}},{key:"isEndPoint",value:function(I){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===I}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(I,y){return this.segmentIndex<I?-1:this.segmentIndex>I?1:this.dist<y?-1:this.dist>y?1:0}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var I=arguments[0],y=arguments[1],b=arguments[2];this.coord=new Ae(I),this.segmentIndex=y,this.dist=b}}])}(),Nl=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"print",value:function(I){I.println("Intersections:");for(var y=this.iterator();y.hasNext();)y.next().print(I)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(I){this.addEndpoints();for(var y=this.iterator(),b=y.next();y.hasNext();){var R=y.next(),Z=this.createSplitEdge(b,R);I.add(Z),b=R}}},{key:"addEndpoints",value:function(){var I=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[I],I,0)}},{key:"createSplitEdge",value:function(I,y){var b=y.segmentIndex-I.segmentIndex+2,R=this.edge.pts[y.segmentIndex],Z=y.dist>0||!y.coord.equals2D(R);Z||b--;var le=new Array(b).fill(null),Me=0;le[Me++]=new Ae(I.coord);for(var Ue=I.segmentIndex+1;Ue<=y.segmentIndex;Ue++)le[Me++]=this.edge.pts[Ue];return Z&&(le[Me]=y.coord),new Vu(le,new ui(this.edge._label))}},{key:"add",value:function(I,y,b){var R=new Yl(I,y,b),Z=this._nodeMap.get(R);return Z!==null?Z:(this._nodeMap.put(R,R),R)}},{key:"isIntersection",value:function(I){for(var y=this.iterator();y.hasNext();)if(y.next().coord.equals(I))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new xo,this.edge=null;var I=arguments[0];this.edge=I}}])}(),ju=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(I.isTrue(this._matrix[Ce.INTERIOR][Ce.INTERIOR])||I.isTrue(this._matrix[Ce.INTERIOR][Ce.BOUNDARY])||I.isTrue(this._matrix[Ce.BOUNDARY][Ce.INTERIOR])||I.isTrue(this._matrix[Ce.BOUNDARY][Ce.BOUNDARY]))&&this._matrix[Ce.EXTERIOR][Ce.INTERIOR]===Yt.FALSE&&this._matrix[Ce.EXTERIOR][Ce.BOUNDARY]===Yt.FALSE}},{key:"isCoveredBy",value:function(){return(I.isTrue(this._matrix[Ce.INTERIOR][Ce.INTERIOR])||I.isTrue(this._matrix[Ce.INTERIOR][Ce.BOUNDARY])||I.isTrue(this._matrix[Ce.BOUNDARY][Ce.INTERIOR])||I.isTrue(this._matrix[Ce.BOUNDARY][Ce.BOUNDARY]))&&this._matrix[Ce.INTERIOR][Ce.EXTERIOR]===Yt.FALSE&&this._matrix[Ce.BOUNDARY][Ce.EXTERIOR]===Yt.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var y=arguments[0],b=0;b<y.length;b++){var R=Math.trunc(b/3),Z=b%3;this._matrix[R][Z]=Yt.toDimensionValue(y.charAt(b))}else if(arguments.length===3){var le=arguments[0],Me=arguments[1],Ue=arguments[2];this._matrix[le][Me]=Ue}}},{key:"isContains",value:function(){return I.isTrue(this._matrix[Ce.INTERIOR][Ce.INTERIOR])&&this._matrix[Ce.EXTERIOR][Ce.INTERIOR]===Yt.FALSE&&this._matrix[Ce.EXTERIOR][Ce.BOUNDARY]===Yt.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var y=arguments[0],b=0;b<y.length;b++){var R=Math.trunc(b/3),Z=b%3;this.setAtLeast(R,Z,Yt.toDimensionValue(y.charAt(b)))}else if(arguments.length===3){var le=arguments[0],Me=arguments[1],Ue=arguments[2];this._matrix[le][Me]<Ue&&(this._matrix[le][Me]=Ue)}}},{key:"setAtLeastIfValid",value:function(y,b,R){y>=0&&b>=0&&this.setAtLeast(y,b,R)}},{key:"isWithin",value:function(){return I.isTrue(this._matrix[Ce.INTERIOR][Ce.INTERIOR])&&this._matrix[Ce.INTERIOR][Ce.EXTERIOR]===Yt.FALSE&&this._matrix[Ce.BOUNDARY][Ce.EXTERIOR]===Yt.FALSE}},{key:"isTouches",value:function(y,b){return y>b?this.isTouches(b,y):(y===Yt.A&&b===Yt.A||y===Yt.L&&b===Yt.L||y===Yt.L&&b===Yt.A||y===Yt.P&&b===Yt.A||y===Yt.P&&b===Yt.L)&&this._matrix[Ce.INTERIOR][Ce.INTERIOR]===Yt.FALSE&&(I.isTrue(this._matrix[Ce.INTERIOR][Ce.BOUNDARY])||I.isTrue(this._matrix[Ce.BOUNDARY][Ce.INTERIOR])||I.isTrue(this._matrix[Ce.BOUNDARY][Ce.BOUNDARY]))}},{key:"isOverlaps",value:function(y,b){return y===Yt.P&&b===Yt.P||y===Yt.A&&b===Yt.A?I.isTrue(this._matrix[Ce.INTERIOR][Ce.INTERIOR])&&I.isTrue(this._matrix[Ce.INTERIOR][Ce.EXTERIOR])&&I.isTrue(this._matrix[Ce.EXTERIOR][Ce.INTERIOR]):y===Yt.L&&b===Yt.L&&this._matrix[Ce.INTERIOR][Ce.INTERIOR]===1&&I.isTrue(this._matrix[Ce.INTERIOR][Ce.EXTERIOR])&&I.isTrue(this._matrix[Ce.EXTERIOR][Ce.INTERIOR])}},{key:"isEquals",value:function(y,b){return y===b&&I.isTrue(this._matrix[Ce.INTERIOR][Ce.INTERIOR])&&this._matrix[Ce.INTERIOR][Ce.EXTERIOR]===Yt.FALSE&&this._matrix[Ce.BOUNDARY][Ce.EXTERIOR]===Yt.FALSE&&this._matrix[Ce.EXTERIOR][Ce.INTERIOR]===Yt.FALSE&&this._matrix[Ce.EXTERIOR][Ce.BOUNDARY]===Yt.FALSE}},{key:"toString",value:function(){for(var y=new Vn("123456789"),b=0;b<3;b++)for(var R=0;R<3;R++)y.setCharAt(3*b+R,Yt.toDimensionSymbol(this._matrix[b][R]));return y.toString()}},{key:"setAll",value:function(y){for(var b=0;b<3;b++)for(var R=0;R<3;R++)this._matrix[b][R]=y}},{key:"get",value:function(y,b){return this._matrix[y][b]}},{key:"transpose",value:function(){var y=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=y,y=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=y,y=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=y,this}},{key:"matches",value:function(y){if(y.length!==9)throw new H("Should be length 9: "+y);for(var b=0;b<3;b++)for(var R=0;R<3;R++)if(!I.matches(this._matrix[b][R],y.charAt(3*b+R)))return!1;return!0}},{key:"add",value:function(y){for(var b=0;b<3;b++)for(var R=0;R<3;R++)this.setAtLeast(b,R,y.get(b,R))}},{key:"isDisjoint",value:function(){return this._matrix[Ce.INTERIOR][Ce.INTERIOR]===Yt.FALSE&&this._matrix[Ce.INTERIOR][Ce.BOUNDARY]===Yt.FALSE&&this._matrix[Ce.BOUNDARY][Ce.INTERIOR]===Yt.FALSE&&this._matrix[Ce.BOUNDARY][Ce.BOUNDARY]===Yt.FALSE}},{key:"isCrosses",value:function(y,b){return y===Yt.P&&b===Yt.L||y===Yt.P&&b===Yt.A||y===Yt.L&&b===Yt.A?I.isTrue(this._matrix[Ce.INTERIOR][Ce.INTERIOR])&&I.isTrue(this._matrix[Ce.INTERIOR][Ce.EXTERIOR]):y===Yt.L&&b===Yt.P||y===Yt.A&&b===Yt.P||y===Yt.A&&b===Yt.L?I.isTrue(this._matrix[Ce.INTERIOR][Ce.INTERIOR])&&I.isTrue(this._matrix[Ce.EXTERIOR][Ce.INTERIOR]):y===Yt.L&&b===Yt.L&&this._matrix[Ce.INTERIOR][Ce.INTERIOR]===0}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Yt.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var y=arguments[0];I.constructor_.call(this),this.set(y)}else if(arguments[0]instanceof I){var b=arguments[0];I.constructor_.call(this),this._matrix[Ce.INTERIOR][Ce.INTERIOR]=b._matrix[Ce.INTERIOR][Ce.INTERIOR],this._matrix[Ce.INTERIOR][Ce.BOUNDARY]=b._matrix[Ce.INTERIOR][Ce.BOUNDARY],this._matrix[Ce.INTERIOR][Ce.EXTERIOR]=b._matrix[Ce.INTERIOR][Ce.EXTERIOR],this._matrix[Ce.BOUNDARY][Ce.INTERIOR]=b._matrix[Ce.BOUNDARY][Ce.INTERIOR],this._matrix[Ce.BOUNDARY][Ce.BOUNDARY]=b._matrix[Ce.BOUNDARY][Ce.BOUNDARY],this._matrix[Ce.BOUNDARY][Ce.EXTERIOR]=b._matrix[Ce.BOUNDARY][Ce.EXTERIOR],this._matrix[Ce.EXTERIOR][Ce.INTERIOR]=b._matrix[Ce.EXTERIOR][Ce.INTERIOR],this._matrix[Ce.EXTERIOR][Ce.BOUNDARY]=b._matrix[Ce.EXTERIOR][Ce.BOUNDARY],this._matrix[Ce.EXTERIOR][Ce.EXTERIOR]=b._matrix[Ce.EXTERIOR][Ce.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var y=arguments[0],b=arguments[1];return b===Yt.SYM_DONTCARE||b===Yt.SYM_TRUE&&(y>=0||y===Yt.TRUE)||b===Yt.SYM_FALSE&&y===Yt.FALSE||b===Yt.SYM_P&&y===Yt.P||b===Yt.SYM_L&&y===Yt.L||b===Yt.SYM_A&&y===Yt.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var R=arguments[1];return new I(arguments[0]).matches(R)}}},{key:"isTrue",value:function(y){return y>=0||y===Yt.TRUE}}])}(),io=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(y){return y===null||y.length===0?null:(this.ensureCapacity(this._size+y.length),He.arraycopy(y,0,this._data,this._size,y.length),void(this._size+=y.length))}},{key:"ensureCapacity",value:function(y){if(y<=this._data.length)return null;var b=Math.max(y,2*this._data.length);this._data=Qt.copyOf(this._data,b)}},{key:"toArray",value:function(){var y=new Array(this._size).fill(null);return He.arraycopy(this._data,0,y,0,this._size),y}},{key:"add",value:function(y){this.ensureCapacity(this._size+1),this._data[this._size]=y,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)I.constructor_.call(this,10);else if(arguments.length===1){var y=arguments[0];this._data=new Array(y).fill(null)}}}])}(),Gu=function(){function I(){i(this,I)}return a(I,[{key:"getChainStartIndices",value:function(y){var b=0,R=new io(Math.trunc(y.length/2));R.add(b);do{var Z=this.findChainEnd(y,b);R.add(Z),b=Z}while(b<y.length-1);return R.toArray()}},{key:"findChainEnd",value:function(y,b){for(var R=no.quadrant(y[b],y[b+1]),Z=b+1;Z<y.length&&no.quadrant(y[Z-1],y[Z])===R;)Z++;return Z-1}},{key:"OLDgetChainStartIndices",value:function(y){var b=0,R=new rt;R.add(b);do{var Z=this.findChainEnd(y,b);R.add(Z),b=Z}while(b<y.length-1);return I.toIntArray(R)}}],[{key:"toIntArray",value:function(y){for(var b=new Array(y.size()).fill(null),R=0;R<b.length;R++)b[R]=y.get(R).intValue();return b}}])}(),Zs=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(I){var y=this.pts[this.startIndex[I]].x,b=this.pts[this.startIndex[I+1]].x;return y>b?y:b}},{key:"getMinX",value:function(I){var y=this.pts[this.startIndex[I]].x,b=this.pts[this.startIndex[I+1]].x;return y<b?y:b}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var I=arguments[0],y=arguments[1],b=arguments[2],R=arguments[3];this.computeIntersectsForChain(this.startIndex[I],this.startIndex[I+1],y,y.startIndex[b],y.startIndex[b+1],R)}else if(arguments.length===6){var Z=arguments[0],le=arguments[1],Me=arguments[2],Ue=arguments[3],dt=arguments[4],Nt=arguments[5];if(le-Z==1&&dt-Ue==1)return Nt.addIntersections(this.e,Z,Me.e,Ue),null;if(!this.overlaps(Z,le,Me,Ue,dt))return null;var wn=Math.trunc((Z+le)/2),Nn=Math.trunc((Ue+dt)/2);Z<wn&&(Ue<Nn&&this.computeIntersectsForChain(Z,wn,Me,Ue,Nn,Nt),Nn<dt&&this.computeIntersectsForChain(Z,wn,Me,Nn,dt,Nt)),wn<le&&(Ue<Nn&&this.computeIntersectsForChain(wn,le,Me,Ue,Nn,Nt),Nn<dt&&this.computeIntersectsForChain(wn,le,Me,Nn,dt,Nt))}}},{key:"overlaps",value:function(I,y,b,R,Z){return pt.intersects(this.pts[I],this.pts[y],b.pts[R],b.pts[Z])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(I,y){for(var b=0;b<this.startIndex.length-1;b++)for(var R=0;R<I.startIndex.length-1;R++)this.computeIntersectsForChain(b,I,R,y)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var I=arguments[0];this.e=I,this.pts=I.getCoordinates();var y=new Gu;this.startIndex=y.getChainStartIndices(this.pts)}}])}(),Cs=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"getDepth",value:function(y,b){return this._depth[y][b]}},{key:"setDepth",value:function(y,b,R){this._depth[y][b]=R}},{key:"isNull",value:function(){if(arguments.length===0){for(var y=0;y<2;y++)for(var b=0;b<3;b++)if(this._depth[y][b]!==I.NULL_VALUE)return!1;return!0}if(arguments.length===1){var R=arguments[0];return this._depth[R][1]===I.NULL_VALUE}if(arguments.length===2){var Z=arguments[0],le=arguments[1];return this._depth[Z][le]===I.NULL_VALUE}}},{key:"normalize",value:function(){for(var y=0;y<2;y++)if(!this.isNull(y)){var b=this._depth[y][1];this._depth[y][2]<b&&(b=this._depth[y][2]),b<0&&(b=0);for(var R=1;R<3;R++){var Z=0;this._depth[y][R]>b&&(Z=1),this._depth[y][R]=Z}}}},{key:"getDelta",value:function(y){return this._depth[y][ht.RIGHT]-this._depth[y][ht.LEFT]}},{key:"getLocation",value:function(y,b){return this._depth[y][b]<=0?Ce.EXTERIOR:Ce.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var y=arguments[0],b=0;b<2;b++)for(var R=1;R<3;R++){var Z=y.getLocation(b,R);Z!==Ce.EXTERIOR&&Z!==Ce.INTERIOR||(this.isNull(b,R)?this._depth[b][R]=I.depthAtLocation(Z):this._depth[b][R]+=I.depthAtLocation(Z))}else if(arguments.length===3){var le=arguments[0],Me=arguments[1];arguments[2]===Ce.INTERIOR&&this._depth[le][Me]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var y=0;y<2;y++)for(var b=0;b<3;b++)this._depth[y][b]=I.NULL_VALUE}},{key:"depthAtLocation",value:function(y){return y===Ce.EXTERIOR?0:y===Ce.INTERIOR?1:I.NULL_VALUE}}])}();Cs.NULL_VALUE=-1;var Vu=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var b=new Array(2).fill(null);return b[0]=this.pts[0],b[1]=this.pts[1],new y(b,ui.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(b){this._isIsolated=b}},{key:"setName",value:function(b){this._name=b}},{key:"equals",value:function(b){if(!(b instanceof y))return!1;var R=b;if(this.pts.length!==R.pts.length)return!1;for(var Z=!0,le=!0,Me=this.pts.length,Ue=0;Ue<this.pts.length;Ue++)if(this.pts[Ue].equals2D(R.pts[Ue])||(Z=!1),this.pts[Ue].equals2D(R.pts[--Me])||(le=!1),!Z&&!le)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var b=arguments[0];return this.pts[b]}}},{key:"print",value:function(b){b.print("edge "+this._name+": "),b.print("LINESTRING (");for(var R=0;R<this.pts.length;R++)R>0&&b.print(","),b.print(this.pts[R].x+" "+this.pts[R].y);b.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(b){y.updateIM(this._label,b)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(b){b.print("edge "+this._name+": ");for(var R=this.pts.length-1;R>=0;R--)b.print(this.pts[R]+" ");b.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Zs(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new pt;for(var b=0;b<this.pts.length;b++)this._env.expandToInclude(this.pts[b])}return this._env}},{key:"addIntersection",value:function(b,R,Z,le){var Me=new Ae(b.getIntersection(le)),Ue=R,dt=b.getEdgeDistance(Z,le),Nt=Ue+1;if(Nt<this.pts.length){var wn=this.pts[Nt];Me.equals2D(wn)&&(Ue=Nt,dt=0)}this.eiList.add(Me,Ue,dt)}},{key:"toString",value:function(){var b=new Vn;b.append("edge "+this._name+": "),b.append("LINESTRING (");for(var R=0;R<this.pts.length;R++)R>0&&b.append(","),b.append(this.pts[R].x+" "+this.pts[R].y);return b.append(")  "+this._label+" "+this._depthDelta),b.toString()}},{key:"isPointwiseEqual",value:function(b){if(this.pts.length!==b.pts.length)return!1;for(var R=0;R<this.pts.length;R++)if(!this.pts[R].equals2D(b.pts[R]))return!1;return!0}},{key:"setDepthDelta",value:function(b){this._depthDelta=b}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(b,R,Z){for(var le=0;le<b.getIntersectionNum();le++)this.addIntersection(b,R,Z,le)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Nl(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Cs,this._depthDelta=0,arguments.length===1){var b=arguments[0];y.constructor_.call(this,b,null)}else if(arguments.length===2){var R=arguments[0],Z=arguments[1];this.pts=R,this._label=Z}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof ju&&arguments[0]instanceof ui))return E(y,"updateIM",this).apply(this,arguments);var b=arguments[0],R=arguments[1];R.setAtLeastIfValid(b.getLocation(0,ht.ON),b.getLocation(1,ht.ON),1),b.isArea()&&(R.setAtLeastIfValid(b.getLocation(0,ht.LEFT),b.getLocation(1,ht.LEFT),2),R.setAtLeastIfValid(b.getLocation(0,ht.RIGHT),b.getLocation(1,ht.RIGHT),2))}}])}(Wi),rs=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"setWorkingPrecisionModel",value:function(y){this._workingPrecisionModel=y}},{key:"insertUniqueEdge",value:function(y){var b=this._edgeList.findEqualEdge(y);if(b!==null){var R=b.getLabel(),Z=y.getLabel();b.isPointwiseEqual(y)||(Z=new ui(y.getLabel())).flip(),R.merge(Z);var le=I.depthDelta(Z),Me=b.getDepthDelta()+le;b.setDepthDelta(Me)}else this._edgeList.add(y),y.setDepthDelta(I.depthDelta(y.getLabel()))}},{key:"buildSubgraphs",value:function(y,b){for(var R=new rt,Z=y.iterator();Z.hasNext();){var le=Z.next(),Me=le.getRightmostCoordinate(),Ue=new Ci(R).getDepth(Me);le.computeDepth(Ue),le.findResultEdges(),R.add(le),b.add(le.getDirectedEdges(),le.getNodes())}}},{key:"createSubgraphs",value:function(y){for(var b=new rt,R=y.getNodes().iterator();R.hasNext();){var Z=R.next();if(!Z.isVisited()){var le=new Xe;le.create(Z),b.add(le)}}return Bu.sort(b,Bu.reverseOrder()),b}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(y){if(this._workingNoder!==null)return this._workingNoder;var b=new nt,R=new Ir;return R.setPrecisionModel(y),b.setSegmentIntersector(new Tc(R)),b}},{key:"buffer",value:function(y,b){var R=this._workingPrecisionModel;R===null&&(R=y.getPrecisionModel()),this._geomFact=y.getFactory();var Z=new oi(R,this._bufParams),le=new ro(y,b,Z).getCurves();if(le.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(le,R),this._graph=new Ws(new Ys),this._graph.addEdges(this._edgeList.getEdges());var Me=this.createSubgraphs(this._graph),Ue=new wc(this._geomFact);this.buildSubgraphs(Me,Ue);var dt=Ue.getPolygons();return dt.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(dt)}},{key:"computeNodedEdges",value:function(y,b){var R=this.getNoder(b);R.computeNodes(y);for(var Z=R.getNodedSubstrings().iterator();Z.hasNext();){var le=Z.next(),Me=le.getCoordinates();if(Me.length!==2||!Me[0].equals2D(Me[1])){var Ue=le.getData(),dt=new Vu(le.getCoordinates(),new ui(Ue));this.insertUniqueEdge(dt)}}}},{key:"setNoder",value:function(y){this._workingNoder=y}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Ll;var y=arguments[0];this._bufParams=y}},{key:"depthDelta",value:function(y){var b=y.getLocation(0,ht.LEFT),R=y.getLocation(0,ht.RIGHT);return b===Ce.INTERIOR&&R===Ce.EXTERIOR?1:b===Ce.EXTERIOR&&R===Ce.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(y){for(var b=new Ni,R=new rt;y.hasNext();){var Z=y.next(),le=b.createLineString(Z.getCoordinates());R.add(le)}return b.buildGeometry(R)}}])}(),Cc=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"rescale",value:function(){if(Dt(arguments[0],It))for(var y=arguments[0].iterator();y.hasNext();){var b=y.next();this.rescale(b.getCoordinates())}else if(arguments[0]instanceof Array){for(var R=arguments[0],Z=0;Z<R.length;Z++)R[Z].x=R[Z].x/this._scaleFactor+this._offsetX,R[Z].y=R[Z].y/this._scaleFactor+this._offsetY;R.length===2&&R[0].equals2D(R[1])&&He.out.println(R)}}},{key:"scale",value:function(){if(Dt(arguments[0],It)){for(var y=arguments[0],b=new rt(y.size()),R=y.iterator();R.hasNext();){var Z=R.next();b.add(new Wl(this.scale(Z.getCoordinates()),Z.getData()))}return b}if(arguments[0]instanceof Array){for(var le=arguments[0],Me=new Array(le.length).fill(null),Ue=0;Ue<le.length;Ue++)Me[Ue]=new Ae(Math.round((le[Ue].x-this._offsetX)*this._scaleFactor),Math.round((le[Ue].y-this._offsetY)*this._scaleFactor),le[Ue].getZ());return lt.removeRepeatedPoints(Me)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var y=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(y),y}},{key:"computeNodes",value:function(y){var b=y;this._isScaled&&(b=this.scale(y)),this._noder.computeNodes(b)}},{key:"interfaces_",get:function(){return[Uu]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var y=arguments[0],b=arguments[1];I.constructor_.call(this,y,b,0,0)}else if(arguments.length===4){var R=arguments[0],Z=arguments[1];this._noder=R,this._scaleFactor=Z,this._isScaled=!this.isIntegerPrecision()}}}])}(),sc=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var y=this._segStrings.iterator();y.hasNext();){var b=y.next().getCoordinates();this.checkEndPtVertexIntersections(b[0],this._segStrings),this.checkEndPtVertexIntersections(b[b.length-1],this._segStrings)}else if(arguments.length===2){for(var R=arguments[0],Z=arguments[1].iterator();Z.hasNext();)for(var le=Z.next().getCoordinates(),Me=1;Me<le.length-1;Me++)if(le[Me].equals(R))throw new me("found endpt/interior pt intersection at index "+Me+" :pt "+R)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var y=this._segStrings.iterator();y.hasNext();)for(var b=y.next(),R=this._segStrings.iterator();R.hasNext();){var Z=R.next();this.checkInteriorIntersections(b,Z)}else if(arguments.length===2)for(var le=arguments[0],Me=arguments[1],Ue=le.getCoordinates(),dt=Me.getCoordinates(),Nt=0;Nt<Ue.length-1;Nt++)for(var wn=0;wn<dt.length-1;wn++)this.checkInteriorIntersections(le,Nt,Me,wn);else if(arguments.length===4){var Nn=arguments[0],dr=arguments[1],$r=arguments[2],mi=arguments[3];if(Nn===$r&&dr===mi)return null;var xi=Nn.getCoordinates()[dr],si=Nn.getCoordinates()[dr+1],ci=$r.getCoordinates()[mi],Fi=$r.getCoordinates()[mi+1];if(this._li.computeIntersection(xi,si,ci,Fi),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,xi,si)||this.hasInteriorIntersection(this._li,ci,Fi)))throw new me("found non-noded intersection at "+xi+"-"+si+" and "+ci+"-"+Fi)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var y=this._segStrings.iterator();y.hasNext();){var b=y.next();this.checkCollapses(b)}else if(arguments.length===1)for(var R=arguments[0].getCoordinates(),Z=0;Z<R.length-2;Z++)this.checkCollapse(R[Z],R[Z+1],R[Z+2])}},{key:"hasInteriorIntersection",value:function(y,b,R){for(var Z=0;Z<y.getIntersectionNum();Z++){var le=y.getIntersection(Z);if(!le.equals(b)&&!le.equals(R))return!0}return!1}},{key:"checkCollapse",value:function(y,b,R){if(y.equals(R))throw new me("found non-noded collapse at "+I.fact.createLineString([y,b,R]))}}],[{key:"constructor_",value:function(){this._li=new Ir,this._segStrings=null;var y=arguments[0];this._segStrings=y}}])}();sc.fact=new Ni;var pa=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"intersectsScaled",value:function(y,b){var R=Math.min(y.x,b.x),Z=Math.max(y.x,b.x),le=Math.min(y.y,b.y),Me=Math.max(y.y,b.y),Ue=this._maxx<R||this._minx>Z||this._maxy<le||this._miny>Me;if(Ue)return!1;var dt=this.intersectsToleranceSquare(y,b);return ve.isTrue(!(Ue&&dt),"Found bad envelope test"),dt}},{key:"initCorners",value:function(y){var b=.5;this._minx=y.x-b,this._maxx=y.x+b,this._miny=y.y-b,this._maxy=y.y+b,this._corner[0]=new Ae(this._maxx,this._maxy),this._corner[1]=new Ae(this._minx,this._maxy),this._corner[2]=new Ae(this._minx,this._miny),this._corner[3]=new Ae(this._maxx,this._miny)}},{key:"intersects",value:function(y,b){return this._scaleFactor===1?this.intersectsScaled(y,b):(this.copyScaled(y,this._p0Scaled),this.copyScaled(b,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(y){return Math.round(y*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(y,b){b.x=this.scale(y.x),b.y=this.scale(y.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var y=I.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new pt(this._originalPt.x-y,this._originalPt.x+y,this._originalPt.y-y,this._originalPt.y+y)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(y,b){return this._li.computeIntersection(y,b,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(y,b,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(y,b,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(y,b,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(y,b){var R=!1,Z=!1;return this._li.computeIntersection(y,b,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(y,b,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(R=!0),this._li.computeIntersection(y,b,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(Z=!0),this._li.computeIntersection(y,b,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!R||!Z)||!!y.equals(this._pt)||!!b.equals(this._pt))))}},{key:"addSnappedNode",value:function(y,b){var R=y.getCoordinate(b),Z=y.getCoordinate(b+1);return!!this.intersects(R,Z)&&(y.addIntersection(this.getCoordinate(),b),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var y=arguments[0],b=arguments[1],R=arguments[2];if(this._originalPt=y,this._pt=y,this._scaleFactor=b,this._li=R,b<=0)throw new H("Scale factor must be non-zero");b!==1&&(this._pt=new Ae(this.scale(y.x),this.scale(y.y)),this._p0Scaled=new Ae,this._p1Scaled=new Ae),this.initCorners(this._pt)}}])}();pa.SAFE_ENV_EXPANSION_FACTOR=.75;var ds=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var I=arguments[1];arguments[0].getLineSegment(I,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new Lo}}])}(),wo=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var I=arguments[0];return this.snap(I,null,-1)}if(arguments.length===3){var y=arguments[0],b=arguments[1],R=arguments[2],Z=y.getSafeEnvelope(),le=new Cu(y,b,R);return this._index.query(Z,new(function(){return a(function Me(){i(this,Me)},[{key:"interfaces_",get:function(){return[ns]}},{key:"visitItem",value:function(Me){Me.select(Z,le)}}])}())),le.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var I=arguments[0];this._index=I}}])}(),Cu=function(I){function y(){var b;return i(this,y),b=r(this,y),y.constructor_.apply(b,arguments),b}return v(y,I),a(y,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof au))return E(y,"select",this,1).apply(this,arguments);var b=arguments[1],R=arguments[0].getContext();if(this._parentEdge===R&&(b===this._hotPixelVertexIndex||b+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(R,b)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var b=arguments[0],R=arguments[1],Z=arguments[2];this._hotPixel=b,this._parentEdge=R,this._hotPixelVertexIndex=Z}}])}(ds);wo.HotPixelSnapAction=Cu;var wh=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(I,y,b,R){if(I===b&&y===R)return null;var Z=I.getCoordinates()[y],le=I.getCoordinates()[y+1],Me=b.getCoordinates()[R],Ue=b.getCoordinates()[R+1];if(this._li.computeIntersection(Z,le,Me,Ue),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var dt=0;dt<this._li.getIntersectionNum();dt++)this._interiorIntersections.add(this._li.getIntersection(dt));I.addIntersections(this._li,y,0),b.addIntersections(this._li,R,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Xl]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var I=arguments[0];this._li=I,this._interiorIntersections=new rt}}])}(),Mn=function(){return a(function I(){i(this,I),I.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(I){var y=Wl.getNodedSubstrings(I),b=new sc(y);try{b.checkValid()}catch(R){if(!(R instanceof N))throw R;R.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Wl.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(I,y){var b=this.findInteriorIntersections(I,y);this.computeIntersectionSnaps(b),this.computeVertexSnaps(I)}},{key:"findInteriorIntersections",value:function(I,y){var b=new wh(y);return this._noder.setSegmentIntersector(b),this._noder.computeNodes(I),b.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Dt(arguments[0],It))for(var I=arguments[0].iterator();I.hasNext();){var y=I.next();this.computeVertexSnaps(y)}else if(arguments[0]instanceof Wl)for(var b=arguments[0],R=b.getCoordinates(),Z=0;Z<R.length;Z++){var le=new pa(R[Z],this._scaleFactor,this._li);this._pointSnapper.snap(le,b,Z)&&b.addIntersection(R[Z],Z)}}},{key:"computeNodes",value:function(I){this._nodedSegStrings=I,this._noder=new nt,this._pointSnapper=new wo(this._noder.getIndex()),this.snapRound(I,this._li)}},{key:"computeIntersectionSnaps",value:function(I){for(var y=I.iterator();y.hasNext();){var b=y.next(),R=new pa(b,this._scaleFactor,this._li);this._pointSnapper.snap(R)}}},{key:"interfaces_",get:function(){return[Uu]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var I=arguments[0];this._pm=I,this._li=new Ir,this._li.setPrecisionModel(I),this._scaleFactor=I.getScale()}}])}(),Yn=function(){function I(){i(this,I),I.constructor_.apply(this,arguments)}return a(I,[{key:"bufferFixedPrecision",value:function(y){var b=new Cc(new Mn(new Yr(1)),y.getScale()),R=new rs(this._bufParams);R.setWorkingPrecisionModel(y),R.setNoder(b),this._resultGeometry=R.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var y=I.MAX_PRECISION_DIGITS;y>=0;y--){try{this.bufferReducedPrecision(y)}catch(le){if(!(le instanceof Dn))throw le;this._saveException=le}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var b=arguments[0],R=I.precisionScaleFactor(this._argGeom,this._distance,b),Z=new Yr(R);this.bufferFixedPrecision(Z)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var y=this._argGeom.getFactory().getPrecisionModel();y.getType()===Yr.FIXED?this.bufferFixedPrecision(y):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(y){this._bufParams.setQuadrantSegments(y)}},{key:"bufferOriginalPrecision",value:function(){try{var y=new rs(this._bufParams);this._resultGeometry=y.buffer(this._argGeom,this._distance)}catch(b){if(!(b instanceof me))throw b;this._saveException=b}}},{key:"getResultGeometry",value:function(y){return this._distance=y,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(y){this._bufParams.setEndCapStyle(y)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new O,this._resultGeometry=null,this._saveException=null,arguments.length===1){var y=arguments[0];this._argGeom=y}else if(arguments.length===2){var b=arguments[0],R=arguments[1];this._argGeom=b,this._bufParams=R}}},{key:"bufferOp",value:function(){if(arguments.length===2){var y=arguments[1];return new I(arguments[0]).getResultGeometry(y)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof st&&typeof arguments[1]=="number"){var b=arguments[1],R=arguments[2],Z=new I(arguments[0]);return Z.setQuadrantSegments(R),Z.getResultGeometry(b)}if(arguments[2]instanceof O&&arguments[0]instanceof st&&typeof arguments[1]=="number"){var le=arguments[1];return new I(arguments[0],arguments[2]).getResultGeometry(le)}}else if(arguments.length===4){var Me=arguments[1],Ue=arguments[2],dt=arguments[3],Nt=new I(arguments[0]);return Nt.setQuadrantSegments(Ue),Nt.setEndCapStyle(dt),Nt.getResultGeometry(Me)}}},{key:"precisionScaleFactor",value:function(y,b,R){var Z=y.getEnvelopeInternal(),le=mt.max(Math.abs(Z.getMaxX()),Math.abs(Z.getMaxY()),Math.abs(Z.getMinX()),Math.abs(Z.getMinY()))+2*(b>0?b:0),Me=R-Math.trunc(Math.log(le)/Math.log(10)+1);return Math.pow(10,Me)}}])}();Yn.CAP_ROUND=O.CAP_ROUND,Yn.CAP_BUTT=O.CAP_FLAT,Yn.CAP_FLAT=O.CAP_FLAT,Yn.CAP_SQUARE=O.CAP_SQUARE,Yn.MAX_PRECISION_DIGITS=12;var jr=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],ai=function(){return a(function I(y){i(this,I),this.geometryFactory=y||new Ni},[{key:"read",value:function(I){var y,b=(y=typeof I=="string"?JSON.parse(I):I).type;if(!ia[b])throw new Error("Unknown GeoJSON type: "+y.type);return jr.indexOf(b)!==-1?ia[b].call(this,y.coordinates):b==="GeometryCollection"?ia[b].call(this,y.geometries):ia[b].call(this,y)}},{key:"write",value:function(I){var y=I.getGeometryType();if(!Mi[y])throw new Error("Geometry is not supported");return Mi[y].call(this,I)}}])}(),ia={Feature:function(I){var y={};for(var b in I)y[b]=I[b];if(I.geometry){var R=I.geometry.type;if(!ia[R])throw new Error("Unknown GeoJSON type: "+I.type);y.geometry=this.read(I.geometry)}return I.bbox&&(y.bbox=ia.bbox.call(this,I.bbox)),y},FeatureCollection:function(I){var y={};if(I.features){y.features=[];for(var b=0;b<I.features.length;++b)y.features.push(this.read(I.features[b]))}return I.bbox&&(y.bbox=this.parse.bbox.call(this,I.bbox)),y},coordinates:function(I){for(var y=[],b=0;b<I.length;++b){var R=I[b];y.push(o(Ae,M(R)))}return y},bbox:function(I){return this.geometryFactory.createLinearRing([new Ae(I[0],I[1]),new Ae(I[2],I[1]),new Ae(I[2],I[3]),new Ae(I[0],I[3]),new Ae(I[0],I[1])])},Point:function(I){var y=o(Ae,M(I));return this.geometryFactory.createPoint(y)},MultiPoint:function(I){for(var y=[],b=0;b<I.length;++b)y.push(ia.Point.call(this,I[b]));return this.geometryFactory.createMultiPoint(y)},LineString:function(I){var y=ia.coordinates.call(this,I);return this.geometryFactory.createLineString(y)},MultiLineString:function(I){for(var y=[],b=0;b<I.length;++b)y.push(ia.LineString.call(this,I[b]));return this.geometryFactory.createMultiLineString(y)},Polygon:function(I){for(var y=ia.coordinates.call(this,I[0]),b=this.geometryFactory.createLinearRing(y),R=[],Z=1;Z<I.length;++Z){var le=I[Z],Me=ia.coordinates.call(this,le),Ue=this.geometryFactory.createLinearRing(Me);R.push(Ue)}return this.geometryFactory.createPolygon(b,R)},MultiPolygon:function(I){for(var y=[],b=0;b<I.length;++b){var R=I[b];y.push(ia.Polygon.call(this,R))}return this.geometryFactory.createMultiPolygon(y)},GeometryCollection:function(I){for(var y=[],b=0;b<I.length;++b){var R=I[b];y.push(this.read(R))}return this.geometryFactory.createGeometryCollection(y)}},Mi={coordinate:function(I){var y=[I.x,I.y];return I.z&&y.push(I.z),I.m&&y.push(I.m),y},Point:function(I){return{type:"Point",coordinates:Mi.coordinate.call(this,I.getCoordinate())}},MultiPoint:function(I){for(var y=[],b=0;b<I._geometries.length;++b){var R=I._geometries[b],Z=Mi.Point.call(this,R);y.push(Z.coordinates)}return{type:"MultiPoint",coordinates:y}},LineString:function(I){for(var y=[],b=I.getCoordinates(),R=0;R<b.length;++R){var Z=b[R];y.push(Mi.coordinate.call(this,Z))}return{type:"LineString",coordinates:y}},MultiLineString:function(I){for(var y=[],b=0;b<I._geometries.length;++b){var R=I._geometries[b],Z=Mi.LineString.call(this,R);y.push(Z.coordinates)}return{type:"MultiLineString",coordinates:y}},Polygon:function(I){var y=[],b=Mi.LineString.call(this,I._shell);y.push(b.coordinates);for(var R=0;R<I._holes.length;++R){var Z=I._holes[R],le=Mi.LineString.call(this,Z);y.push(le.coordinates)}return{type:"Polygon",coordinates:y}},MultiPolygon:function(I){for(var y=[],b=0;b<I._geometries.length;++b){var R=I._geometries[b],Z=Mi.Polygon.call(this,R);y.push(Z.coordinates)}return{type:"MultiPolygon",coordinates:y}},GeometryCollection:function(I){for(var y=[],b=0;b<I._geometries.length;++b){var R=I._geometries[b],Z=R.getGeometryType();y.push(Mi[Z].call(this,R))}return{type:"GeometryCollection",geometries:y}}};return{BufferOp:Yn,GeoJSONReader:function(){return a(function I(y){i(this,I),this.parser=new ai(y||new Ni)},[{key:"read",value:function(I){return this.parser.read(I)}}])}(),GeoJSONWriter:function(){return a(function I(){i(this,I),this.parser=new ai(this.geometryFactory)},[{key:"write",value:function(I){return this.parser.write(I)}}])}()}})}(OT)),OT.exports}var dme=fme();const pme=vy(dme);function jv(){return new EC}function EC(){this.reset()}EC.prototype={constructor:EC,reset:function(){this.s=this.t=0},add:function(t){tz(RE,t,this.t),tz(this,RE.s,this.s),this.s?this.t+=RE.t:this.s=RE.t},valueOf:function(){return this.s}};var RE=new EC;function tz(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Il=1e-6,$o=Math.PI,rg=$o/2,nz=$o/4,dg=$o*2,ev=180/$o,vd=$o/180,_c=Math.abs,gme=Math.atan,dx=Math.atan2,Vl=Math.cos,Hl=Math.sin,Bx=Math.sqrt;function z$(t){return t>1?0:t<-1?$o:Math.acos(t)}function sy(t){return t>1?rg:t<-1?-rg:Math.asin(t)}function _2(){}function TC(t,e){t&&iz.hasOwnProperty(t.type)&&iz[t.type](t,e)}var rz={Feature:function(t,e){TC(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)TC(n[r].geometry,e)}},iz={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){XD(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)XD(n[r],e,0)},Polygon:function(t,e){az(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)az(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)TC(n[r],e)}};function XD(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function az(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)XD(t[n],e,1);e.polygonEnd()}function mme(t,e){t&&rz.hasOwnProperty(t.type)?rz[t.type](t,e):TC(t,e)}jv();jv();function YD(t){return[dx(t[1],t[0]),sy(t[2])]}function px(t){var e=t[0],n=t[1],r=Vl(n);return[r*Vl(e),r*Hl(e),Hl(n)]}function PE(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function CC(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function D5(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function IE(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ZD(t){var e=Bx(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}jv();function U$(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function KD(t,e){return[t>$o?t-dg:t<-$o?t+dg:t,e]}KD.invert=KD;function vme(t,e,n){return(t%=dg)?e||n?U$(sz(t),lz(e,n)):sz(t):e||n?lz(e,n):KD}function oz(t){return function(e,n){return e+=t,[e>$o?e-dg:e<-$o?e+dg:e,n]}}function sz(t){var e=oz(t);return e.invert=oz(-t),e}function lz(t,e){var n=Vl(t),r=Hl(t),i=Vl(e),o=Hl(e);function s(a,c){var h=Vl(c),d=Vl(a)*h,v=Hl(a)*h,w=Hl(c),_=w*n+d*r;return[dx(v*i-_*o,d*n-w*r),sy(_*i+v*o)]}return s.invert=function(a,c){var h=Vl(c),d=Vl(a)*h,v=Hl(a)*h,w=Hl(c),_=w*i-v*o;return[dx(v*i+w*o,d*n+_*r),sy(_*n-d*r)]},s}function yme(t,e,n,r,i,o){if(n){var s=Vl(e),a=Hl(e),c=r*n;i==null?(i=e+r*dg,o=e-c/2):(i=uz(s,i),o=uz(s,o),(r>0?i<o:i>o)&&(i+=r*dg));for(var h,d=i;r>0?d>o:d<o;d-=c)h=YD([s,-a*Vl(d),-a*Hl(d)]),t.point(h[0],h[1])}}function uz(t,e){e=px(e),e[0]-=t,ZD(e);var n=z$(-e[1]);return((-e[2]<0?-n:n)+dg-Il)%dg}function j$(){var t=[],e;return{point:function(n,r){e.push([n,r])},lineStart:function(){t.push(e=[])},lineEnd:_2,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function _me(t,e,n,r,i,o){var s=t[0],a=t[1],c=e[0],h=e[1],d=0,v=1,w=c-s,_=h-a,E;if(E=n-s,!(!w&&E>0)){if(E/=w,w<0){if(E<d)return;E<v&&(v=E)}else if(w>0){if(E>v)return;E>d&&(d=E)}if(E=i-s,!(!w&&E<0)){if(E/=w,w<0){if(E>v)return;E>d&&(d=E)}else if(w>0){if(E<d)return;E<v&&(v=E)}if(E=r-a,!(!_&&E>0)){if(E/=_,_<0){if(E<d)return;E<v&&(v=E)}else if(_>0){if(E>v)return;E>d&&(d=E)}if(E=o-a,!(!_&&E<0)){if(E/=_,_<0){if(E>v)return;E>d&&(d=E)}else if(_>0){if(E<d)return;E<v&&(v=E)}return d>0&&(t[0]=s+d*w,t[1]=a+d*_),v<1&&(e[0]=s+v*w,e[1]=a+v*_),!0}}}}}function FT(t,e){return _c(t[0]-e[0])<Il&&_c(t[1]-e[1])<Il}function DE(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function G$(t,e,n,r,i){var o=[],s=[],a,c;if(t.forEach(function(E){if(!((M=E.length-1)<=0)){var M,D=E[0],A=E[M],F;if(FT(D,A)){for(i.lineStart(),a=0;a<M;++a)i.point((D=E[a])[0],D[1]);i.lineEnd();return}o.push(F=new DE(D,E,null,!0)),s.push(F.o=new DE(D,null,F,!1)),o.push(F=new DE(A,E,null,!1)),s.push(F.o=new DE(A,null,F,!0))}}),!!o.length){for(s.sort(e),cz(o),cz(s),a=0,c=s.length;a<c;++a)s[a].e=n=!n;for(var h=o[0],d,v;;){for(var w=h,_=!0;w.v;)if((w=w.n)===h)return;d=w.z,i.lineStart();do{if(w.v=w.o.v=!0,w.e){if(_)for(a=0,c=d.length;a<c;++a)i.point((v=d[a])[0],v[1]);else r(w.x,w.n.x,1,i);w=w.n}else{if(_)for(d=w.p.z,a=d.length-1;a>=0;--a)i.point((v=d[a])[0],v[1]);else r(w.x,w.p.x,-1,i);w=w.p}w=w.o,d=w.z,_=!_}while(!w.v);i.lineEnd()}}}function cz(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function V$(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function xme(t){return t.length===1&&(t=bme(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function bme(t){return function(e,n){return V$(t(e),n)}}xme(V$);function H$(t){for(var e=t.length,n,r=-1,i=0,o,s;++r<e;)i+=t[r].length;for(o=new Array(i);--e>=0;)for(s=t[e],n=s.length;--n>=0;)o[--i]=s[n];return o}var LE=1e9,NE=-1e9;function wme(t,e,n,r){function i(h,d){return t<=h&&h<=n&&e<=d&&d<=r}function o(h,d,v,w){var _=0,E=0;if(h==null||(_=s(h,v))!==(E=s(d,v))||c(h,d)<0^v>0)do w.point(_===0||_===3?t:n,_>1?r:e);while((_=(_+v+4)%4)!==E);else w.point(d[0],d[1])}function s(h,d){return _c(h[0]-t)<Il?d>0?0:3:_c(h[0]-n)<Il?d>0?2:1:_c(h[1]-e)<Il?d>0?1:0:d>0?3:2}function a(h,d){return c(h.x,d.x)}function c(h,d){var v=s(h,1),w=s(d,1);return v!==w?v-w:v===0?d[1]-h[1]:v===1?h[0]-d[0]:v===2?h[1]-d[1]:d[0]-h[0]}return function(h){var d=h,v=j$(),w,_,E,M,D,A,F,O,N,H,G,W={point:X,lineStart:Q,lineEnd:ie,polygonStart:k,polygonEnd:$};function X(ce,se){i(ce,se)&&d.point(ce,se)}function K(){for(var ce=0,se=0,Se=_.length;se<Se;++se)for(var ye=_[se],Te=1,pe=ye.length,Ie=ye[0],me,xe,ve=Ie[0],Ee=Ie[1];Te<pe;++Te)me=ve,xe=Ee,Ie=ye[Te],ve=Ie[0],Ee=Ie[1],xe<=r?Ee>r&&(ve-me)*(r-xe)>(Ee-xe)*(t-me)&&++ce:Ee<=r&&(ve-me)*(r-xe)<(Ee-xe)*(t-me)&&--ce;return ce}function k(){d=v,w=[],_=[],G=!0}function $(){var ce=K(),se=G&&ce,Se=(w=H$(w)).length;(se||Se)&&(h.polygonStart(),se&&(h.lineStart(),o(null,null,1,h),h.lineEnd()),Se&&G$(w,a,ce,o,h),h.polygonEnd()),d=h,w=_=E=null}function Q(){W.point=ae,_&&_.push(E=[]),H=!0,N=!1,F=O=NaN}function ie(){w&&(ae(M,D),A&&N&&v.rejoin(),w.push(v.result())),W.point=X,N&&d.lineEnd()}function ae(ce,se){var Se=i(ce,se);if(_&&E.push([ce,se]),H)M=ce,D=se,A=Se,H=!1,Se&&(d.lineStart(),d.point(ce,se));else if(Se&&N)d.point(ce,se);else{var ye=[F=Math.max(NE,Math.min(LE,F)),O=Math.max(NE,Math.min(LE,O))],Te=[ce=Math.max(NE,Math.min(LE,ce)),se=Math.max(NE,Math.min(LE,se))];_me(ye,Te,t,e,n,r)?(N||(d.lineStart(),d.point(ye[0],ye[1])),d.point(Te[0],Te[1]),Se||d.lineEnd(),G=!1):Se&&(d.lineStart(),d.point(ce,se),G=!1)}F=ce,O=se,N=Se}return W}}var L5=jv();function Sme(t,e){var n=e[0],r=e[1],i=[Hl(n),-Vl(n),0],o=0,s=0;L5.reset();for(var a=0,c=t.length;a<c;++a)if(d=(h=t[a]).length)for(var h,d,v=h[d-1],w=v[0],_=v[1]/2+nz,E=Hl(_),M=Vl(_),D=0;D<d;++D,w=F,E=N,M=H,v=A){var A=h[D],F=A[0],O=A[1]/2+nz,N=Hl(O),H=Vl(O),G=F-w,W=G>=0?1:-1,X=W*G,K=X>$o,k=E*N;if(L5.add(dx(k*W*Hl(X),M*H+k*Vl(X))),o+=K?G+W*dg:G,K^w>=n^F>=n){var $=CC(px(v),px(A));ZD($);var Q=CC(i,$);ZD(Q);var ie=(K^G>=0?-1:1)*sy(Q[2]);(r>ie||r===ie&&($[0]||$[1]))&&(s+=K^G>=0?1:-1)}}return(o<-1e-6||o<Il&&L5<-1e-6)^s&1}jv();function hz(t){return t}jv();jv();var gx=1/0,MC=gx,ww=-gx,AC=ww,fz={point:Eme,lineStart:_2,lineEnd:_2,polygonStart:_2,polygonEnd:_2,result:function(){var t=[[gx,MC],[ww,AC]];return ww=AC=-(MC=gx=1/0),t}};function Eme(t,e){t<gx&&(gx=t),t>ww&&(ww=t),e<MC&&(MC=e),e>AC&&(AC=e)}jv();function q$(t,e,n,r){return function(i,o){var s=e(o),a=i.invert(r[0],r[1]),c=j$(),h=e(c),d=!1,v,w,_,E={point:M,lineStart:A,lineEnd:F,polygonStart:function(){E.point=O,E.lineStart=N,E.lineEnd=H,w=[],v=[]},polygonEnd:function(){E.point=M,E.lineStart=A,E.lineEnd=F,w=H$(w);var G=Sme(v,a);w.length?(d||(o.polygonStart(),d=!0),G$(w,Cme,G,n,o)):G&&(d||(o.polygonStart(),d=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),w=v=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function M(G,W){var X=i(G,W);t(G=X[0],W=X[1])&&o.point(G,W)}function D(G,W){var X=i(G,W);s.point(X[0],X[1])}function A(){E.point=D,s.lineStart()}function F(){E.point=M,s.lineEnd()}function O(G,W){_.push([G,W]);var X=i(G,W);h.point(X[0],X[1])}function N(){h.lineStart(),_=[]}function H(){O(_[0][0],_[0][1]),h.lineEnd();var G=h.clean(),W=c.result(),X,K=W.length,k,$,Q;if(_.pop(),v.push(_),_=null,!!K){if(G&1){if($=W[0],(k=$.length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),X=0;X<k;++X)o.point((Q=$[X])[0],Q[1]);o.lineEnd()}return}K>1&&G&2&&W.push(W.pop().concat(W.shift())),w.push(W.filter(Tme))}}return E}}function Tme(t){return t.length>1}function Cme(t,e){return((t=t.x)[0]<0?t[1]-rg-Il:rg-t[1])-((e=e.x)[0]<0?e[1]-rg-Il:rg-e[1])}const dz=q$(function(){return!0},Mme,Rme,[-$o,-rg]);function Mme(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,s){var a=o>0?$o:-$o,c=_c(o-e);_c(c-$o)<Il?(t.point(e,n=(n+s)/2>0?rg:-rg),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(o,n),i=0):r!==a&&c>=$o&&(_c(e-r)<Il&&(e-=r*Il),_c(o-a)<Il&&(o-=a*Il),n=Ame(e,n,o,s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),i=0),t.point(e=o,n=s),r=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function Ame(t,e,n,r){var i,o,s=Hl(t-n);return _c(s)>Il?gme((Hl(e)*(o=Vl(r))*Hl(n)-Hl(r)*(i=Vl(e))*Hl(t))/(i*o*s)):(e+r)/2}function Rme(t,e,n,r){var i;if(t==null)i=n*rg,r.point(-$o,i),r.point(0,i),r.point($o,i),r.point($o,0),r.point($o,-i),r.point(0,-i),r.point(-$o,-i),r.point(-$o,0),r.point(-$o,i);else if(_c(t[0]-e[0])>Il){var o=t[0]<e[0]?$o:-$o;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Pme(t,e){var n=Vl(t),r=n>0,i=_c(n)>Il;function o(d,v,w,_){yme(_,t,e,w,d,v)}function s(d,v){return Vl(d)*Vl(v)>n}function a(d){var v,w,_,E,M;return{lineStart:function(){E=_=!1,M=1},point:function(D,A){var F=[D,A],O,N=s(D,A),H=r?N?0:h(D,A):N?h(D+(D<0?$o:-$o),A):0;if(!v&&(E=_=N)&&d.lineStart(),N!==_&&(O=c(v,F),(!O||FT(v,O)||FT(F,O))&&(F[0]+=Il,F[1]+=Il,N=s(F[0],F[1]))),N!==_)M=0,N?(d.lineStart(),O=c(F,v),d.point(O[0],O[1])):(O=c(v,F),d.point(O[0],O[1]),d.lineEnd()),v=O;else if(i&&v&&r^N){var G;!(H&w)&&(G=c(F,v,!0))&&(M=0,r?(d.lineStart(),d.point(G[0][0],G[0][1]),d.point(G[1][0],G[1][1]),d.lineEnd()):(d.point(G[1][0],G[1][1]),d.lineEnd(),d.lineStart(),d.point(G[0][0],G[0][1])))}N&&(!v||!FT(v,F))&&d.point(F[0],F[1]),v=F,_=N,w=H},lineEnd:function(){_&&d.lineEnd(),v=null},clean:function(){return M|(E&&_)<<1}}}function c(d,v,w){var _=px(d),E=px(v),M=[1,0,0],D=CC(_,E),A=PE(D,D),F=D[0],O=A-F*F;if(!O)return!w&&d;var N=n*A/O,H=-n*F/O,G=CC(M,D),W=IE(M,N),X=IE(D,H);D5(W,X);var K=G,k=PE(W,K),$=PE(K,K),Q=k*k-$*(PE(W,W)-1);if(!(Q<0)){var ie=Bx(Q),ae=IE(K,(-k-ie)/$);if(D5(ae,W),ae=YD(ae),!w)return ae;var ce=d[0],se=v[0],Se=d[1],ye=v[1],Te;se<ce&&(Te=ce,ce=se,se=Te);var pe=se-ce,Ie=_c(pe-$o)<Il,me=Ie||pe<Il;if(!Ie&&ye<Se&&(Te=Se,Se=ye,ye=Te),me?Ie?Se+ye>0^ae[1]<(_c(ae[0]-ce)<Il?Se:ye):Se<=ae[1]&&ae[1]<=ye:pe>$o^(ce<=ae[0]&&ae[0]<=se)){var xe=IE(K,(-k+ie)/$);return D5(xe,W),[ae,YD(xe)]}}}function h(d,v){var w=r?t:$o-t,_=0;return d<-w?_|=1:d>w&&(_|=2),v<-w?_|=4:v>w&&(_|=8),_}return q$(s,a,o,r?[0,-t]:[-$o,t-$o])}function $$(t){return function(e){var n=new JD;for(var r in t)n[r]=t[r];return n.stream=e,n}}function JD(){}JD.prototype={constructor:JD,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function W$(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),o!=null&&t.clipExtent(null),mme(n,t.stream(fz));var s=fz.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),c=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,h=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return o!=null&&t.clipExtent(o),t.scale(a*150).translate([c,h])}function Ime(t,e,n){return W$(t,[[0,0],e],n)}var pz=16,Dme=Vl(30*vd);function gz(t,e){return+e?Nme(t,e):Lme(t)}function Lme(t){return $$({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Nme(t,e){function n(r,i,o,s,a,c,h,d,v,w,_,E,M,D){var A=h-r,F=d-i,O=A*A+F*F;if(O>4*e&&M--){var N=s+w,H=a+_,G=c+E,W=Bx(N*N+H*H+G*G),X=sy(G/=W),K=_c(_c(G)-1)<Il||_c(o-v)<Il?(o+v)/2:dx(H,N),k=t(K,X),$=k[0],Q=k[1],ie=$-r,ae=Q-i,ce=F*ie-A*ae;(ce*ce/O>e||_c((A*ie+F*ae)/O-.5)>.3||s*w+a*_+c*E<Dme)&&(n(r,i,o,s,a,c,$,Q,K,N/=W,H/=W,G,M,D),D.point($,Q),n($,Q,K,N,H,G,h,d,v,w,_,E,M,D))}}return function(r){var i,o,s,a,c,h,d,v,w,_,E,M,D={point:A,lineStart:F,lineEnd:N,polygonStart:function(){r.polygonStart(),D.lineStart=H},polygonEnd:function(){r.polygonEnd(),D.lineStart=F}};function A(X,K){X=t(X,K),r.point(X[0],X[1])}function F(){v=NaN,D.point=O,r.lineStart()}function O(X,K){var k=px([X,K]),$=t(X,K);n(v,w,d,_,E,M,v=$[0],w=$[1],d=X,_=k[0],E=k[1],M=k[2],pz,r),r.point(v,w)}function N(){D.point=A,r.lineEnd()}function H(){F(),D.point=G,D.lineEnd=W}function G(X,K){O(i=X,K),o=v,s=w,a=_,c=E,h=M,D.point=O}function W(){n(v,w,d,_,E,M,o,s,i,a,c,h,pz,r),D.lineEnd=N,N()}return D}}var kme=$$({point:function(t,e){this.stream.point(t*vd,e*vd)}});function Ome(t){return Fme(function(){return t})()}function Fme(t){var e,n=150,r=480,i=250,o,s,a=0,c=0,h=0,d=0,v=0,w,_,E=null,M=dz,D=null,A,F,O,N=hz,H=.5,G=gz($,H),W,X;function K(ae){return ae=_(ae[0]*vd,ae[1]*vd),[ae[0]*n+o,s-ae[1]*n]}function k(ae){return ae=_.invert((ae[0]-o)/n,(s-ae[1])/n),ae&&[ae[0]*ev,ae[1]*ev]}function $(ae,ce){return ae=e(ae,ce),[ae[0]*n+o,s-ae[1]*n]}K.stream=function(ae){return W&&X===ae?W:W=kme(M(w,G(N(X=ae))))},K.clipAngle=function(ae){return arguments.length?(M=+ae?Pme(E=ae*vd,6*vd):(E=null,dz),ie()):E*ev},K.clipExtent=function(ae){return arguments.length?(N=ae==null?(D=A=F=O=null,hz):wme(D=+ae[0][0],A=+ae[0][1],F=+ae[1][0],O=+ae[1][1]),ie()):D==null?null:[[D,A],[F,O]]},K.scale=function(ae){return arguments.length?(n=+ae,Q()):n},K.translate=function(ae){return arguments.length?(r=+ae[0],i=+ae[1],Q()):[r,i]},K.center=function(ae){return arguments.length?(a=ae[0]%360*vd,c=ae[1]%360*vd,Q()):[a*ev,c*ev]},K.rotate=function(ae){return arguments.length?(h=ae[0]%360*vd,d=ae[1]%360*vd,v=ae.length>2?ae[2]%360*vd:0,Q()):[h*ev,d*ev,v*ev]},K.precision=function(ae){return arguments.length?(G=gz($,H=ae*ae),ie()):Bx(H)},K.fitExtent=function(ae,ce){return W$(K,ae,ce)},K.fitSize=function(ae,ce){return Ime(K,ae,ce)};function Q(){_=U$(w=vme(h,d,v),e);var ae=e(a,c);return o=r-ae[0]*n,s=i+ae[1]*n,ie()}function ie(){return W=X=null,K}return function(){return e=t.apply(this,arguments),K.invert=e.invert&&k,Q()}}function X$(t){return function(e,n){var r=Vl(e),i=Vl(n),o=t(r*i);return[o*i*Hl(e),o*Hl(n)]}}function Y$(t){return function(e,n){var r=Bx(e*e+n*n),i=t(r),o=Hl(i),s=Vl(i);return[dx(e*o,r*s),sy(r&&n*o/r)]}}var Bme=X$(function(t){return Bx(2/(1+t))});Bme.invert=Y$(function(t){return 2*sy(t/2)});var Z$=X$(function(t){return(t=z$(t))&&t/Hl(t)});Z$.invert=Y$(function(t){return t});function zme(){return Ome(Z$).scale(79.4188).clipAngle(180-.001)}function mz(t,e){return[t,e]}mz.invert=mz;var{BufferOp:Ume,GeoJSONReader:jme,GeoJSONWriter:Gme}=pme;function Vme(t,e,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return B$(t,function(s){var a=BT(s,e,r,i);a&&o.push(a)}),WD(o);case"FeatureCollection":return QB(t,function(s){var a=BT(s,e,r,i);a&&QB(a,function(c){c&&o.push(c)})}),WD(o)}return BT(t,e,r,i)}function BT(t,e,n,r){var i=t.properties||{},o=t.type==="Feature"?t.geometry:t;if(o.type==="GeometryCollection"){var s=[];return B$(t,function(M){var D=BT(M,e,n,r);D&&s.push(D)}),WD(s)}var a=Hme(o),c={type:o.type,coordinates:J$(o.coordinates,a)},h=new jme,d=h.read(c),v=ome(O$(e,n),"meters"),w=Ume.bufferOp(d,v,r),_=new Gme;if(w=_.write(w),!K$(w.coordinates)){var E={type:w.type,coordinates:Q$(w.coordinates,a)};return a4(E,i)}}function K$(t){return Array.isArray(t[0])?K$(t[0]):isNaN(t[0])}function J$(t,e){return typeof t[0]!="object"?e(t):t.map(function(n){return J$(n,e)})}function Q$(t,e){return typeof t[0]!="object"?e.invert(t):t.map(function(n){return Q$(n,e)})}function Hme(t){var e=cme(t).geometry.coordinates,n=[-e[0],-e[1]];return zme().rotate(n).scale(lf)}var zT={exports:{}},qme=zT.exports,vz;function $me(){return vz||(vz=1,function(t,e){(function(n,r){t.exports=r()})(qme,function(){var n=function(ne,we){var et={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},Gt={on:function(dn,xn,cr){if(et[dn]===void 0)throw new Error("Invalid event type: "+dn);et[dn].push({selector:xn,fn:cr})},render:function(dn){we.store.featureChanged(dn)}},on=function(dn,xn){for(var cr=et[dn],ur=cr.length;ur--;){var Rr=cr[ur];if(Rr.selector(xn)){Rr.fn.call(Gt,xn)||we.store.render(),we.ui.updateMapClasses();break}}};return ne.start.call(Gt),{render:ne.render,stop:function(){ne.stop&&ne.stop()},trash:function(){ne.trash&&(ne.trash(),we.store.render())},combineFeatures:function(){ne.combineFeatures&&ne.combineFeatures()},uncombineFeatures:function(){ne.uncombineFeatures&&ne.uncombineFeatures()},drag:function(dn){on("drag",dn)},click:function(dn){on("click",dn)},mousemove:function(dn){on("mousemove",dn)},mousedown:function(dn){on("mousedown",dn)},mouseup:function(dn){on("mouseup",dn)},mouseout:function(dn){on("mouseout",dn)},keydown:function(dn){on("keydown",dn)},keyup:function(dn){on("keyup",dn)},touchstart:function(dn){on("touchstart",dn)},touchmove:function(dn){on("touchmove",dn)},touchend:function(dn){on("touchend",dn)},tap:function(dn){on("tap",dn)}}};function r(ne){return ne&&ne.__esModule&&Object.prototype.hasOwnProperty.call(ne,"default")?ne.default:ne}function i(ne){if(ne.__esModule)return ne;var we=ne.default;if(typeof we=="function"){var et=function Gt(){if(this instanceof Gt){var on=[null];on.push.apply(on,arguments);var dn=Function.bind.apply(we,on);return new dn}return we.apply(this,arguments)};et.prototype=we.prototype}else et={};return Object.defineProperty(et,"__esModule",{value:!0}),Object.keys(ne).forEach(function(Gt){var on=Object.getOwnPropertyDescriptor(ne,Gt);Object.defineProperty(et,Gt,on.get?on:{enumerable:!0,get:function(){return ne[Gt]}})}),et}var o={},s={RADIUS:6378137},a=s;function c(ne){var we=0;if(ne&&ne.length>0){we+=Math.abs(h(ne[0]));for(var et=1;et<ne.length;et++)we-=Math.abs(h(ne[et]))}return we}function h(ne){var we,et,Gt,on,dn,xn,cr=0,ur=ne.length;if(ur>2){for(xn=0;xn<ur;xn++)xn===ur-2?(Gt=ur-2,on=ur-1,dn=0):xn===ur-1?(Gt=ur-1,on=0,dn=1):(Gt=xn,on=xn+1,dn=xn+2),we=ne[Gt],et=ne[on],cr+=(d(ne[dn][0])-d(we[0]))*Math.sin(d(et[1]));cr=cr*a.RADIUS*a.RADIUS/2}return cr}function d(ne){return ne*Math.PI/180}o.geometry=function ne(we){var et,Gt=0;switch(we.type){case"Polygon":return c(we.coordinates);case"MultiPolygon":for(et=0;et<we.coordinates.length;et++)Gt+=c(we.coordinates[et]);return Gt;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(et=0;et<we.geometries.length;et++)Gt+=ne(we.geometries[et]);return Gt}},o.ring=h;var v={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},w={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},_={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},E={POLYGON:"polygon",LINE:"line_string",POINT:"point"},M={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},D={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},A={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},F={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},O={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},N={ACTIVE:"true",INACTIVE:"false"},H=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],G=-85,W=Object.freeze({__proto__:null,classes:v,sources:w,cursors:_,types:E,geojsonTypes:M,modes:D,events:A,updateActions:F,meta:O,activeStates:N,interactions:H,LAT_MIN:-90,LAT_RENDERED_MIN:G,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),X={Point:0,LineString:1,MultiLineString:1,Polygon:2};function K(ne,we){var et=X[ne.geometry.type]-X[we.geometry.type];return et===0&&ne.geometry.type===M.POLYGON?ne.area-we.area:et}function k(ne){return ne.map(function(we){return we.geometry.type===M.POLYGON&&(we.area=o.geometry({type:M.FEATURE,property:{},geometry:we.geometry})),we}).sort(K).map(function(we){return delete we.area,we})}function $(ne,we){return we===void 0&&(we=0),[[ne.point.x-we,ne.point.y-we],[ne.point.x+we,ne.point.y+we]]}function Q(ne){if(this._items={},this._nums={},this._length=ne?ne.length:0,ne)for(var we=0,et=ne.length;we<et;we++)this.add(ne[we]),ne[we]!==void 0&&(typeof ne[we]=="string"?this._items[ne[we]]=we:this._nums[ne[we]]=we)}Q.prototype.add=function(ne){return this.has(ne)||(this._length++,typeof ne=="string"?this._items[ne]=this._length:this._nums[ne]=this._length),this},Q.prototype.delete=function(ne){return this.has(ne)===!1||(this._length--,delete this._items[ne],delete this._nums[ne]),this},Q.prototype.has=function(ne){return(typeof ne=="string"||typeof ne=="number")&&(this._items[ne]!==void 0||this._nums[ne]!==void 0)},Q.prototype.values=function(){var ne=this,we=[];return Object.keys(this._items).forEach(function(et){we.push({k:et,v:ne._items[et]})}),Object.keys(this._nums).forEach(function(et){we.push({k:JSON.parse(et),v:ne._nums[et]})}),we.sort(function(et,Gt){return et.v-Gt.v}).map(function(et){return et.k})},Q.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ie=[O.FEATURE,O.MIDPOINT,O.VERTEX],ae={click:function(ne,we,et){return ce(ne,we,et,et.options.clickBuffer)},touch:function(ne,we,et){return ce(ne,we,et,et.options.touchBuffer)}};function ce(ne,we,et,Gt){if(et.map===null)return[];var on=ne?$(ne,Gt):we,dn={};et.options.styles&&(dn.layers=et.options.styles.map(function(Rr){return Rr.id}).filter(function(Rr){return et.map.getLayer(Rr)!=null}));var xn=et.map.queryRenderedFeatures(on,dn).filter(function(Rr){return ie.indexOf(Rr.properties.meta)!==-1}),cr=new Q,ur=[];return xn.forEach(function(Rr){var Ir=Rr.properties.id;cr.has(Ir)||(cr.add(Ir),ur.push(Rr))}),k(ur)}function se(ne,we){var et=ae.click(ne,null,we),Gt={mouse:_.NONE};return et[0]&&(Gt.mouse=et[0].properties.active===N.ACTIVE?_.MOVE:_.POINTER,Gt.feature=et[0].properties.meta),we.events.currentModeName().indexOf("draw")!==-1&&(Gt.mouse=_.ADD),we.ui.queueMapClasses(Gt),we.ui.updateMapClasses(),et[0]}function Se(ne,we){var et=ne.x-we.x,Gt=ne.y-we.y;return Math.sqrt(et*et+Gt*Gt)}function ye(ne,we,et){et===void 0&&(et={});var Gt=et.fineTolerance!=null?et.fineTolerance:4,on=et.grossTolerance!=null?et.grossTolerance:12,dn=et.interval!=null?et.interval:500;ne.point=ne.point||we.point,ne.time=ne.time||we.time;var xn=Se(ne.point,we.point);return xn<Gt||xn<on&&we.time-ne.time<dn}function Te(ne,we,et){et===void 0&&(et={});var Gt=et.tolerance!=null?et.tolerance:25,on=et.interval!=null?et.interval:250;return ne.point=ne.point||we.point,ne.time=ne.time||we.time,Se(ne.point,we.point)<Gt&&we.time-ne.time<on}var pe={exports:{}},Ie=pe.exports=function(ne,we){if(we||(we=16),ne===void 0&&(ne=128),ne<=0)return"0";for(var et=Math.log(Math.pow(2,ne))/Math.log(we),Gt=2;et===1/0;Gt*=2)et=Math.log(Math.pow(2,ne/Gt))/Math.log(we)*Gt;var on=et-Math.floor(et),dn="";for(Gt=0;Gt<Math.floor(et);Gt++)dn=Math.floor(Math.random()*we).toString(we)+dn;if(on){var xn=Math.pow(we,on);dn=Math.floor(Math.random()*xn).toString(we)+dn}var cr=parseInt(dn,we);return cr!==1/0&&cr>=Math.pow(2,ne)?Ie(ne,we):dn};Ie.rack=function(ne,we,et){var Gt=function(dn){var xn=0;do{if(xn++>10){if(!et)throw new Error("too many ID collisions, use more bits");ne+=et}var cr=Ie(ne,we)}while(Object.hasOwnProperty.call(on,cr));return on[cr]=dn,cr},on=Gt.hats={};return Gt.get=function(dn){return Gt.hats[dn]},Gt.set=function(dn,xn){return Gt.hats[dn]=xn,Gt},Gt.bits=ne||128,Gt.base=we||16,Gt};var me=r(pe.exports),xe=function(ne,we){this.ctx=ne,this.properties=we.properties||{},this.coordinates=we.geometry.coordinates,this.id=we.id||me(),this.type=we.geometry.type};xe.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},xe.prototype.incomingCoords=function(ne){this.setCoordinates(ne)},xe.prototype.setCoordinates=function(ne){this.coordinates=ne,this.changed()},xe.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},xe.prototype.setProperty=function(ne,we){this.properties[ne]=we},xe.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:M.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},xe.prototype.internal=function(ne){var we={id:this.id,meta:O.FEATURE,"meta:type":this.type,active:N.INACTIVE,mode:ne};if(this.ctx.options.userProperties)for(var et in this.properties)we["user_"+et]=this.properties[et];return{type:M.FEATURE,properties:we,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var ve=function(ne,we){xe.call(this,ne,we)};(ve.prototype=Object.create(xe.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},ve.prototype.updateCoordinate=function(ne,we,et){this.coordinates=arguments.length===3?[we,et]:[ne,we],this.changed()},ve.prototype.getCoordinate=function(){return this.getCoordinates()};var Ee=function(ne,we){xe.call(this,ne,we)};(Ee.prototype=Object.create(xe.prototype)).isValid=function(){return this.coordinates.length>1},Ee.prototype.addCoordinate=function(ne,we,et){this.changed();var Gt=parseInt(ne,10);this.coordinates.splice(Gt,0,[we,et])},Ee.prototype.getCoordinate=function(ne){var we=parseInt(ne,10);return JSON.parse(JSON.stringify(this.coordinates[we]))},Ee.prototype.removeCoordinate=function(ne){this.changed(),this.coordinates.splice(parseInt(ne,10),1)},Ee.prototype.updateCoordinate=function(ne,we,et){var Gt=parseInt(ne,10);this.coordinates[Gt]=[we,et],this.changed()};var De=function(ne,we){xe.call(this,ne,we),this.coordinates=this.coordinates.map(function(et){return et.slice(0,-1)})};(De.prototype=Object.create(xe.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(ne){return ne.length>2})},De.prototype.incomingCoords=function(ne){this.coordinates=ne.map(function(we){return we.slice(0,-1)}),this.changed()},De.prototype.setCoordinates=function(ne){this.coordinates=ne,this.changed()},De.prototype.addCoordinate=function(ne,we,et){this.changed();var Gt=ne.split(".").map(function(on){return parseInt(on,10)});this.coordinates[Gt[0]].splice(Gt[1],0,[we,et])},De.prototype.removeCoordinate=function(ne){this.changed();var we=ne.split(".").map(function(Gt){return parseInt(Gt,10)}),et=this.coordinates[we[0]];et&&(et.splice(we[1],1),et.length<3&&this.coordinates.splice(we[0],1))},De.prototype.getCoordinate=function(ne){var we=ne.split(".").map(function(Gt){return parseInt(Gt,10)}),et=this.coordinates[we[0]];return JSON.parse(JSON.stringify(et[we[1]]))},De.prototype.getCoordinates=function(){return this.coordinates.map(function(ne){return ne.concat([ne[0]])})},De.prototype.updateCoordinate=function(ne,we,et){this.changed();var Gt=ne.split("."),on=parseInt(Gt[0],10),dn=parseInt(Gt[1],10);this.coordinates[on]===void 0&&(this.coordinates[on]=[]),this.coordinates[on][dn]=[we,et]};var We={MultiPoint:ve,MultiLineString:Ee,MultiPolygon:De},Ae=function(ne,we,et,Gt,on){var dn=et.split("."),xn=parseInt(dn[0],10),cr=dn[1]?dn.slice(1).join("."):null;return ne[xn][we](cr,Gt,on)},ut=function(ne,we){if(xe.call(this,ne,we),delete this.coordinates,this.model=We[we.geometry.type],this.model===void 0)throw new TypeError(we.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(we.geometry.coordinates)};function pt(ne){this.map=ne.map,this.drawConfig=JSON.parse(JSON.stringify(ne.options||{})),this._ctx=ne}(ut.prototype=Object.create(xe.prototype))._coordinatesToFeatures=function(ne){var we=this,et=this.model.bind(this);return ne.map(function(Gt){return new et(we.ctx,{id:me(),type:M.FEATURE,properties:{},geometry:{coordinates:Gt,type:we.type.replace("Multi","")}})})},ut.prototype.isValid=function(){return this.features.every(function(ne){return ne.isValid()})},ut.prototype.setCoordinates=function(ne){this.features=this._coordinatesToFeatures(ne),this.changed()},ut.prototype.getCoordinate=function(ne){return Ae(this.features,"getCoordinate",ne)},ut.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(ne){return ne.type===M.POLYGON?ne.getCoordinates():ne.coordinates})))},ut.prototype.updateCoordinate=function(ne,we,et){Ae(this.features,"updateCoordinate",ne,we,et),this.changed()},ut.prototype.addCoordinate=function(ne,we,et){Ae(this.features,"addCoordinate",ne,we,et),this.changed()},ut.prototype.removeCoordinate=function(ne){Ae(this.features,"removeCoordinate",ne),this.changed()},ut.prototype.getFeatures=function(){return this.features},pt.prototype.setSelected=function(ne){return this._ctx.store.setSelected(ne)},pt.prototype.setSelectedCoordinates=function(ne){var we=this;this._ctx.store.setSelectedCoordinates(ne),ne.reduce(function(et,Gt){return et[Gt.feature_id]===void 0&&(et[Gt.feature_id]=!0,we._ctx.store.get(Gt.feature_id).changed()),et},{})},pt.prototype.getSelected=function(){return this._ctx.store.getSelected()},pt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},pt.prototype.isSelected=function(ne){return this._ctx.store.isSelected(ne)},pt.prototype.getFeature=function(ne){return this._ctx.store.get(ne)},pt.prototype.select=function(ne){return this._ctx.store.select(ne)},pt.prototype.deselect=function(ne){return this._ctx.store.deselect(ne)},pt.prototype.deleteFeature=function(ne,we){return we===void 0&&(we={}),this._ctx.store.delete(ne,we)},pt.prototype.addFeature=function(ne){return this._ctx.store.add(ne)},pt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},pt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},pt.prototype.setActionableState=function(ne){ne===void 0&&(ne={});var we={trash:ne.trash||!1,combineFeatures:ne.combineFeatures||!1,uncombineFeatures:ne.uncombineFeatures||!1};return this._ctx.events.actionable(we)},pt.prototype.changeMode=function(ne,we,et){return we===void 0&&(we={}),et===void 0&&(et={}),this._ctx.events.changeMode(ne,we,et)},pt.prototype.updateUIClasses=function(ne){return this._ctx.ui.queueMapClasses(ne)},pt.prototype.activateUIButton=function(ne){return this._ctx.ui.setActiveButton(ne)},pt.prototype.featuresAt=function(ne,we,et){if(et===void 0&&(et="click"),et!=="click"&&et!=="touch")throw new Error("invalid buffer type");return ae[et](ne,we,this._ctx)},pt.prototype.newFeature=function(ne){var we=ne.geometry.type;return we===M.POINT?new ve(this._ctx,ne):we===M.LINE_STRING?new Ee(this._ctx,ne):we===M.POLYGON?new De(this._ctx,ne):new ut(this._ctx,ne)},pt.prototype.isInstanceOf=function(ne,we){if(ne===M.POINT)return we instanceof ve;if(ne===M.LINE_STRING)return we instanceof Ee;if(ne===M.POLYGON)return we instanceof De;if(ne==="MultiFeature")return we instanceof ut;throw new Error("Unknown feature class: "+ne)},pt.prototype.doRender=function(ne){return this._ctx.store.featureChanged(ne)},pt.prototype.onSetup=function(){},pt.prototype.onDrag=function(){},pt.prototype.onClick=function(){},pt.prototype.onMouseMove=function(){},pt.prototype.onMouseDown=function(){},pt.prototype.onMouseUp=function(){},pt.prototype.onMouseOut=function(){},pt.prototype.onKeyUp=function(){},pt.prototype.onKeyDown=function(){},pt.prototype.onTouchStart=function(){},pt.prototype.onTouchMove=function(){},pt.prototype.onTouchEnd=function(){},pt.prototype.onTap=function(){},pt.prototype.onStop=function(){},pt.prototype.onTrash=function(){},pt.prototype.onCombineFeature=function(){},pt.prototype.onUncombineFeature=function(){},pt.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var st={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Ce=Object.keys(st);function It(ne){var we=Object.keys(ne);return function(et,Gt){Gt===void 0&&(Gt={});var on={},dn=we.reduce(function(xn,cr){return xn[cr]=ne[cr],xn},new pt(et));return{start:function(){var xn=this;on=dn.onSetup(Gt),Ce.forEach(function(cr){var ur,Rr=st[cr],Ir=function(){return!1};ne[Rr]&&(Ir=function(){return!0}),xn.on(cr,Ir,(ur=Rr,function(Nr){return dn[ur](on,Nr)}))})},stop:function(){dn.onStop(on)},trash:function(){dn.onTrash(on)},combineFeatures:function(){dn.onCombineFeatures(on)},uncombineFeatures:function(){dn.onUncombineFeatures(on)},render:function(xn,cr){dn.toDisplayFeatures(on,xn,cr)}}}}function Ve(ne){return[].concat(ne).filter(function(we){return we!==void 0})}function yt(){var ne=this;if(!(ne.ctx.map&&ne.ctx.map.getSource(w.HOT)!==void 0))return ur();var we=ne.ctx.events.currentModeName();ne.ctx.ui.queueMapClasses({mode:we});var et=[],Gt=[];ne.isDirty?Gt=ne.getAllIds():(et=ne.getChangedIds().filter(function(Rr){return ne.get(Rr)!==void 0}),Gt=ne.sources.hot.filter(function(Rr){return Rr.properties.id&&et.indexOf(Rr.properties.id)===-1&&ne.get(Rr.properties.id)!==void 0}).map(function(Rr){return Rr.properties.id})),ne.sources.hot=[];var on=ne.sources.cold.length;ne.sources.cold=ne.isDirty?[]:ne.sources.cold.filter(function(Rr){var Ir=Rr.properties.id||Rr.properties.parent;return et.indexOf(Ir)===-1});var dn=on!==ne.sources.cold.length||Gt.length>0;function xn(Rr,Ir){var Nr=ne.get(Rr).internal(we);ne.ctx.events.currentModeRender(Nr,function(Wr){ne.sources[Ir].push(Wr)})}if(et.forEach(function(Rr){return xn(Rr,"hot")}),Gt.forEach(function(Rr){return xn(Rr,"cold")}),dn&&ne.ctx.map.getSource(w.COLD).setData({type:M.FEATURE_COLLECTION,features:ne.sources.cold}),ne.ctx.map.getSource(w.HOT).setData({type:M.FEATURE_COLLECTION,features:ne.sources.hot}),ne._emitSelectionChange&&(ne.ctx.map.fire(A.SELECTION_CHANGE,{features:ne.getSelected().map(function(Rr){return Rr.toGeoJSON()}),points:ne.getSelectedCoordinates().map(function(Rr){return{type:M.FEATURE,properties:{},geometry:{type:M.POINT,coordinates:Rr.coordinates}}})}),ne._emitSelectionChange=!1),ne._deletedFeaturesToEmit.length){var cr=ne._deletedFeaturesToEmit.map(function(Rr){return Rr.toGeoJSON()});ne._deletedFeaturesToEmit=[],ne.ctx.map.fire(A.DELETE,{features:cr})}function ur(){ne.isDirty=!1,ne.clearChangedIds()}ur(),ne.ctx.map.fire(A.RENDER,{})}function Ze(ne){var we,et=this;this._features={},this._featureIds=new Q,this._selectedFeatureIds=new Q,this._selectedCoordinates=[],this._changedFeatureIds=new Q,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=ne,this.sources={hot:[],cold:[]},this.render=function(){we||(we=requestAnimationFrame(function(){we=null,yt.call(et)}))},this.isDirty=!1}function wt(ne,we){var et=ne._selectedCoordinates.filter(function(Gt){return ne._selectedFeatureIds.has(Gt.feature_id)});ne._selectedCoordinates.length===et.length||we.silent||(ne._emitSelectionChange=!0),ne._selectedCoordinates=et}Ze.prototype.createRenderBatch=function(){var ne=this,we=this.render,et=0;return this.render=function(){et++},function(){ne.render=we,et>0&&ne.render()}},Ze.prototype.setDirty=function(){return this.isDirty=!0,this},Ze.prototype.featureChanged=function(ne){return this._changedFeatureIds.add(ne),this},Ze.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Ze.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Ze.prototype.getAllIds=function(){return this._featureIds.values()},Ze.prototype.add=function(ne){return this.featureChanged(ne.id),this._features[ne.id]=ne,this._featureIds.add(ne.id),this},Ze.prototype.delete=function(ne,we){var et=this;return we===void 0&&(we={}),Ve(ne).forEach(function(Gt){et._featureIds.has(Gt)&&(et._featureIds.delete(Gt),et._selectedFeatureIds.delete(Gt),we.silent||et._deletedFeaturesToEmit.indexOf(et._features[Gt])===-1&&et._deletedFeaturesToEmit.push(et._features[Gt]),delete et._features[Gt],et.isDirty=!0)}),wt(this,we),this},Ze.prototype.get=function(ne){return this._features[ne]},Ze.prototype.getAll=function(){var ne=this;return Object.keys(this._features).map(function(we){return ne._features[we]})},Ze.prototype.select=function(ne,we){var et=this;return we===void 0&&(we={}),Ve(ne).forEach(function(Gt){et._selectedFeatureIds.has(Gt)||(et._selectedFeatureIds.add(Gt),et._changedFeatureIds.add(Gt),we.silent||(et._emitSelectionChange=!0))}),this},Ze.prototype.deselect=function(ne,we){var et=this;return we===void 0&&(we={}),Ve(ne).forEach(function(Gt){et._selectedFeatureIds.has(Gt)&&(et._selectedFeatureIds.delete(Gt),et._changedFeatureIds.add(Gt),we.silent||(et._emitSelectionChange=!0))}),wt(this,we),this},Ze.prototype.clearSelected=function(ne){return ne===void 0&&(ne={}),this.deselect(this._selectedFeatureIds.values(),{silent:ne.silent}),this},Ze.prototype.setSelected=function(ne,we){var et=this;return we===void 0&&(we={}),ne=Ve(ne),this.deselect(this._selectedFeatureIds.values().filter(function(Gt){return ne.indexOf(Gt)===-1}),{silent:we.silent}),this.select(ne.filter(function(Gt){return!et._selectedFeatureIds.has(Gt)}),{silent:we.silent}),this},Ze.prototype.setSelectedCoordinates=function(ne){return this._selectedCoordinates=ne,this._emitSelectionChange=!0,this},Ze.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Ze.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Ze.prototype.getSelected=function(){var ne=this;return this._selectedFeatureIds.values().map(function(we){return ne.get(we)})},Ze.prototype.getSelectedCoordinates=function(){var ne=this;return this._selectedCoordinates.map(function(we){return{coordinates:ne.get(we.feature_id).getCoordinate(we.coord_path)}})},Ze.prototype.isSelected=function(ne){return this._selectedFeatureIds.has(ne)},Ze.prototype.setFeatureProperty=function(ne,we,et){this.get(ne).setProperty(we,et),this.featureChanged(ne)},Ze.prototype.storeMapConfig=function(){var ne=this;H.forEach(function(we){ne.ctx.map[we]&&(ne._mapInitialConfig[we]=ne.ctx.map[we].isEnabled())})},Ze.prototype.restoreMapConfig=function(){var ne=this;Object.keys(this._mapInitialConfig).forEach(function(we){ne._mapInitialConfig[we]?ne.ctx.map[we].enable():ne.ctx.map[we].disable()})},Ze.prototype.getInitialConfigValue=function(ne){return this._mapInitialConfig[ne]===void 0||this._mapInitialConfig[ne]};var Ut=function(){for(var ne=arguments,we={},et=0;et<arguments.length;et++){var Gt=ne[et];for(var on in Gt)ht.call(Gt,on)&&(we[on]=Gt[on])}return we},ht=Object.prototype.hasOwnProperty,qt=r(Ut),Ye=["mode","feature","mouse"];function Re(ne){var we=null,et=null,Gt={onRemove:function(){return ne.map.off("load",Gt.connect),clearInterval(et),Gt.removeLayers(),ne.store.restoreMapConfig(),ne.ui.removeButtons(),ne.events.removeEventListeners(),ne.ui.clearMapClasses(),ne.boxZoomInitial&&ne.map.boxZoom.enable(),ne.map=null,ne.container=null,ne.store=null,we&&we.parentNode&&we.parentNode.removeChild(we),we=null,this},connect:function(){ne.map.off("load",Gt.connect),clearInterval(et),Gt.addLayers(),ne.store.storeMapConfig(),ne.events.addEventListeners()},onAdd:function(on){var dn=on.fire;return on.fire=function(xn,cr){var ur=arguments;return dn.length===1&&arguments.length!==1&&(ur=[qt({},{type:xn},cr)]),dn.apply(on,ur)},ne.map=on,ne.events=function(xn){var cr=Object.keys(xn.options.modes).reduce(function(hr,ii){return hr[ii]=It(xn.options.modes[ii]),hr},{}),ur={},Rr={},Ir={},Nr=null,Wr=null;Ir.drag=function(hr,ii){ii({point:hr.point,time:new Date().getTime()})?(xn.ui.queueMapClasses({mouse:_.DRAG}),Wr.drag(hr)):hr.originalEvent.stopPropagation()},Ir.mousedrag=function(hr){Ir.drag(hr,function(ii){return!ye(ur,ii)})},Ir.touchdrag=function(hr){Ir.drag(hr,function(ii){return!Te(Rr,ii)})},Ir.mousemove=function(hr){if((hr.originalEvent.buttons!==void 0?hr.originalEvent.buttons:hr.originalEvent.which)===1)return Ir.mousedrag(hr);var ii=se(hr,xn);hr.featureTarget=ii,Wr.mousemove(hr)},Ir.mousedown=function(hr){ur={time:new Date().getTime(),point:hr.point};var ii=se(hr,xn);hr.featureTarget=ii,Wr.mousedown(hr)},Ir.mouseup=function(hr){var ii=se(hr,xn);hr.featureTarget=ii,ye(ur,{point:hr.point,time:new Date().getTime()})?Wr.click(hr):Wr.mouseup(hr)},Ir.mouseout=function(hr){Wr.mouseout(hr)},Ir.touchstart=function(hr){if(xn.options.touchEnabled){Rr={time:new Date().getTime(),point:hr.point};var ii=ae.touch(hr,null,xn)[0];hr.featureTarget=ii,Wr.touchstart(hr)}},Ir.touchmove=function(hr){if(xn.options.touchEnabled)return Wr.touchmove(hr),Ir.touchdrag(hr)},Ir.touchend=function(hr){if(hr.originalEvent.preventDefault(),xn.options.touchEnabled){var ii=ae.touch(hr,null,xn)[0];hr.featureTarget=ii,Te(Rr,{time:new Date().getTime(),point:hr.point})?Wr.tap(hr):Wr.touchend(hr)}};var ua=function(hr){return!(hr===8||hr===46||hr>=48&&hr<=57)};function ui(hr,ii,Wi){Wi===void 0&&(Wi={}),Wr.stop();var ea=cr[hr];if(ea===void 0)throw new Error(hr+" is not valid");Nr=hr;var ji=ea(xn,ii);Wr=n(ji,xn),Wi.silent||xn.map.fire(A.MODE_CHANGE,{mode:hr}),xn.store.setDirty(),xn.store.render()}Ir.keydown=function(hr){(hr.srcElement||hr.target).classList.contains("mapboxgl-canvas")&&(hr.keyCode!==8&&hr.keyCode!==46||!xn.options.controls.trash?ua(hr.keyCode)?Wr.keydown(hr):hr.keyCode===49&&xn.options.controls.point?ui(D.DRAW_POINT):hr.keyCode===50&&xn.options.controls.line_string?ui(D.DRAW_LINE_STRING):hr.keyCode===51&&xn.options.controls.polygon&&ui(D.DRAW_POLYGON):(hr.preventDefault(),Wr.trash()))},Ir.keyup=function(hr){ua(hr.keyCode)&&Wr.keyup(hr)},Ir.zoomend=function(){xn.store.changeZoom()},Ir.data=function(hr){if(hr.dataType==="style"){var ii=xn.setup,Wi=xn.map,ea=xn.options,ji=xn.store;ea.styles.some(function(Oo){return Wi.getLayer(Oo.id)})||(ii.addLayers(),ji.setDirty(),ji.render())}};var Vr={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Nr=xn.options.defaultMode,Wr=n(cr[Nr](xn),xn)},changeMode:ui,actionable:function(hr){var ii=!1;Object.keys(hr).forEach(function(Wi){if(Vr[Wi]===void 0)throw new Error("Invalid action type");Vr[Wi]!==hr[Wi]&&(ii=!0),Vr[Wi]=hr[Wi]}),ii&&xn.map.fire(A.ACTIONABLE,{actions:Vr})},currentModeName:function(){return Nr},currentModeRender:function(hr,ii){return Wr.render(hr,ii)},fire:function(hr,ii){Ir[hr]&&Ir[hr](ii)},addEventListeners:function(){xn.map.on("mousemove",Ir.mousemove),xn.map.on("mousedown",Ir.mousedown),xn.map.on("mouseup",Ir.mouseup),xn.map.on("data",Ir.data),xn.map.on("touchmove",Ir.touchmove),xn.map.on("touchstart",Ir.touchstart),xn.map.on("touchend",Ir.touchend),xn.container.addEventListener("mouseout",Ir.mouseout),xn.options.keybindings&&(xn.container.addEventListener("keydown",Ir.keydown),xn.container.addEventListener("keyup",Ir.keyup))},removeEventListeners:function(){xn.map.off("mousemove",Ir.mousemove),xn.map.off("mousedown",Ir.mousedown),xn.map.off("mouseup",Ir.mouseup),xn.map.off("data",Ir.data),xn.map.off("touchmove",Ir.touchmove),xn.map.off("touchstart",Ir.touchstart),xn.map.off("touchend",Ir.touchend),xn.container.removeEventListener("mouseout",Ir.mouseout),xn.options.keybindings&&(xn.container.removeEventListener("keydown",Ir.keydown),xn.container.removeEventListener("keyup",Ir.keyup))},trash:function(hr){Wr.trash(hr)},combineFeatures:function(){Wr.combineFeatures()},uncombineFeatures:function(){Wr.uncombineFeatures()},getMode:function(){return Nr}}}(ne),ne.ui=function(xn){var cr={},ur=null,Rr={mode:null,feature:null,mouse:null},Ir={mode:null,feature:null,mouse:null};function Nr(hr){Ir=qt(Ir,hr)}function Wr(){var hr,ii;if(xn.container){var Wi=[],ea=[];Ye.forEach(function(ji){Ir[ji]!==Rr[ji]&&(Wi.push(ji+"-"+Rr[ji]),Ir[ji]!==null&&ea.push(ji+"-"+Ir[ji]))}),Wi.length>0&&(hr=xn.container.classList).remove.apply(hr,Wi),ea.length>0&&(ii=xn.container.classList).add.apply(ii,ea),Rr=qt(Rr,Ir)}}function ua(hr,ii){ii===void 0&&(ii={});var Wi=document.createElement("button");return Wi.className=v.CONTROL_BUTTON+" "+ii.className,Wi.setAttribute("title",ii.title),ii.container.appendChild(Wi),Wi.addEventListener("click",function(ea){if(ea.preventDefault(),ea.stopPropagation(),ea.target===ur)return ui(),void ii.onDeactivate();Vr(hr),ii.onActivate()},!0),Wi}function ui(){ur&&(ur.classList.remove(v.ACTIVE_BUTTON),ur=null)}function Vr(hr){ui();var ii=cr[hr];ii&&ii&&hr!=="trash"&&(ii.classList.add(v.ACTIVE_BUTTON),ur=ii)}return{setActiveButton:Vr,queueMapClasses:Nr,updateMapClasses:Wr,clearMapClasses:function(){Nr({mode:null,feature:null,mouse:null}),Wr()},addButtons:function(){var hr=xn.options.controls,ii=document.createElement("div");return ii.className=v.CONTROL_GROUP+" "+v.CONTROL_BASE,hr&&(hr[E.LINE]&&(cr[E.LINE]=ua(E.LINE,{container:ii,className:v.CONTROL_BUTTON_LINE,title:"LineString tool "+(xn.options.keybindings?"(l)":""),onActivate:function(){return xn.events.changeMode(D.DRAW_LINE_STRING)},onDeactivate:function(){return xn.events.trash()}})),hr[E.POLYGON]&&(cr[E.POLYGON]=ua(E.POLYGON,{container:ii,className:v.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(xn.options.keybindings?"(p)":""),onActivate:function(){return xn.events.changeMode(D.DRAW_POLYGON)},onDeactivate:function(){return xn.events.trash()}})),hr[E.POINT]&&(cr[E.POINT]=ua(E.POINT,{container:ii,className:v.CONTROL_BUTTON_POINT,title:"Marker tool "+(xn.options.keybindings?"(m)":""),onActivate:function(){return xn.events.changeMode(D.DRAW_POINT)},onDeactivate:function(){return xn.events.trash()}})),hr.trash&&(cr.trash=ua("trash",{container:ii,className:v.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){xn.events.trash()}})),hr.combine_features&&(cr.combine_features=ua("combineFeatures",{container:ii,className:v.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){xn.events.combineFeatures()}})),hr.uncombine_features&&(cr.uncombine_features=ua("uncombineFeatures",{container:ii,className:v.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){xn.events.uncombineFeatures()}}))),ii},removeButtons:function(){Object.keys(cr).forEach(function(hr){var ii=cr[hr];ii.parentNode&&ii.parentNode.removeChild(ii),delete cr[hr]})}}}(ne),ne.container=on.getContainer(),ne.store=new Ze(ne),we=ne.ui.addButtons(),ne.options.boxSelect&&(ne.boxZoomInitial=on.boxZoom.isEnabled(),on.boxZoom.disable(),on.dragPan.disable(),on.dragPan.enable()),on.loaded()?Gt.connect():(on.on("load",Gt.connect),et=setInterval(function(){on.loaded()&&Gt.connect()},16)),ne.events.start(),we},addLayers:function(){ne.map.addSource(w.COLD,{data:{type:M.FEATURE_COLLECTION,features:[]},type:"geojson"}),ne.map.addSource(w.HOT,{data:{type:M.FEATURE_COLLECTION,features:[]},type:"geojson"}),ne.options.styles.forEach(function(on){ne.map.addLayer(on)}),ne.store.setDirty(!0),ne.store.render()},removeLayers:function(){ne.options.styles.forEach(function(on){ne.map.getLayer(on.id)&&ne.map.removeLayer(on.id)}),ne.map.getSource(w.COLD)&&ne.map.removeSource(w.COLD),ne.map.getSource(w.HOT)&&ne.map.removeSource(w.HOT)}};return ne.setup=Gt,Gt}var Pt=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Dt(ne){return function(we){var et=we.featureTarget;return!!et&&!!et.properties&&et.properties.meta===ne}}function At(ne){return!!ne.originalEvent&&!!ne.originalEvent.shiftKey&&ne.originalEvent.button===0}function Bt(ne){return!!ne.featureTarget&&!!ne.featureTarget.properties&&ne.featureTarget.properties.active===N.ACTIVE&&ne.featureTarget.properties.meta===O.FEATURE}function gn(ne){return!!ne.featureTarget&&!!ne.featureTarget.properties&&ne.featureTarget.properties.active===N.INACTIVE&&ne.featureTarget.properties.meta===O.FEATURE}function Zt(ne){return ne.featureTarget===void 0}function cn(ne){return!!ne.featureTarget&&!!ne.featureTarget.properties&&ne.featureTarget.properties.meta===O.FEATURE}function $t(ne){var we=ne.featureTarget;return!!we&&!!we.properties&&we.properties.meta===O.VERTEX}function Et(ne){return!!ne.originalEvent&&ne.originalEvent.shiftKey===!0}function qn(ne){return ne.keyCode===27}function Dn(ne){return ne.keyCode===13}var sr=Object.freeze({__proto__:null,isOfMetaType:Dt,isShiftMousedown:At,isActiveFeature:Bt,isInactiveFeature:gn,noTarget:Zt,isFeature:cn,isVertex:$t,isShiftDown:Et,isEscapeKey:qn,isEnterKey:Dn,isTrue:function(){return!0}}),rt=ze;function ze(ne,we){this.x=ne,this.y=we}ze.prototype={clone:function(){return new ze(this.x,this.y)},add:function(ne){return this.clone()._add(ne)},sub:function(ne){return this.clone()._sub(ne)},multByPoint:function(ne){return this.clone()._multByPoint(ne)},divByPoint:function(ne){return this.clone()._divByPoint(ne)},mult:function(ne){return this.clone()._mult(ne)},div:function(ne){return this.clone()._div(ne)},rotate:function(ne){return this.clone()._rotate(ne)},rotateAround:function(ne,we){return this.clone()._rotateAround(ne,we)},matMult:function(ne){return this.clone()._matMult(ne)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(ne){return this.x===ne.x&&this.y===ne.y},dist:function(ne){return Math.sqrt(this.distSqr(ne))},distSqr:function(ne){var we=ne.x-this.x,et=ne.y-this.y;return we*we+et*et},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(ne){return Math.atan2(this.y-ne.y,this.x-ne.x)},angleWith:function(ne){return this.angleWithSep(ne.x,ne.y)},angleWithSep:function(ne,we){return Math.atan2(this.x*we-this.y*ne,this.x*ne+this.y*we)},_matMult:function(ne){var we=ne[0]*this.x+ne[1]*this.y,et=ne[2]*this.x+ne[3]*this.y;return this.x=we,this.y=et,this},_add:function(ne){return this.x+=ne.x,this.y+=ne.y,this},_sub:function(ne){return this.x-=ne.x,this.y-=ne.y,this},_mult:function(ne){return this.x*=ne,this.y*=ne,this},_div:function(ne){return this.x/=ne,this.y/=ne,this},_multByPoint:function(ne){return this.x*=ne.x,this.y*=ne.y,this},_divByPoint:function(ne){return this.x/=ne.x,this.y/=ne.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var ne=this.y;return this.y=this.x,this.x=-ne,this},_rotate:function(ne){var we=Math.cos(ne),et=Math.sin(ne),Gt=we*this.x-et*this.y,on=et*this.x+we*this.y;return this.x=Gt,this.y=on,this},_rotateAround:function(ne,we){var et=Math.cos(ne),Gt=Math.sin(ne),on=we.x+et*(this.x-we.x)-Gt*(this.y-we.y),dn=we.y+Gt*(this.x-we.x)+et*(this.y-we.y);return this.x=on,this.y=dn,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ze.convert=function(ne){return ne instanceof ze?ne:Array.isArray(ne)?new ze(ne[0],ne[1]):ne};var Xe=r(rt);function Fe(ne,we){var et=we.getBoundingClientRect();return new Xe(ne.clientX-et.left-(we.clientLeft||0),ne.clientY-et.top-(we.clientTop||0))}function He(ne,we,et,Gt){return{type:M.FEATURE,properties:{meta:O.VERTEX,parent:ne,coord_path:et,active:Gt?N.ACTIVE:N.INACTIVE},geometry:{type:M.POINT,coordinates:we}}}function mt(ne,we,et){var Gt=we.geometry.coordinates,on=et.geometry.coordinates;if(Gt[1]>85||Gt[1]<G||on[1]>85||on[1]<G)return null;var dn={lng:(Gt[0]+on[0])/2,lat:(Gt[1]+on[1])/2};return{type:M.FEATURE,properties:{meta:O.MIDPOINT,parent:ne,lng:dn.lng,lat:dn.lat,coord_path:et.properties.coord_path},geometry:{type:M.POINT,coordinates:[dn.lng,dn.lat]}}}function it(ne,we,et){we===void 0&&(we={}),et===void 0&&(et=null);var Gt,on=ne.geometry,dn=on.type,xn=on.coordinates,cr=ne.properties&&ne.properties.id,ur=[];function Rr(Nr,Wr){var ua="",ui=null;Nr.forEach(function(Vr,hr){var ii=Wr!=null?Wr+"."+hr:String(hr),Wi=He(cr,Vr,ii,Ir(ii));if(we.midpoints&&ui){var ea=mt(cr,ui,Wi);ea&&ur.push(ea)}ui=Wi;var ji=JSON.stringify(Vr);ua!==ji&&ur.push(Wi),hr===0&&(ua=ji)})}function Ir(Nr){return!!we.selectedPaths&&we.selectedPaths.indexOf(Nr)!==-1}return dn===M.POINT?ur.push(He(cr,xn,et,Ir(et))):dn===M.POLYGON?xn.forEach(function(Nr,Wr){Rr(Nr,et!==null?et+"."+Wr:String(Wr))}):dn===M.LINE_STRING?Rr(xn,et):dn.indexOf(M.MULTI_PREFIX)===0&&(Gt=dn.replace(M.MULTI_PREFIX,""),xn.forEach(function(Nr,Wr){var ua={type:M.FEATURE,properties:ne.properties,geometry:{type:Gt,coordinates:Nr}};ur=ur.concat(it(ua,we,Wr))})),ur}var xt={enable:function(ne){setTimeout(function(){ne.map&&ne.map.doubleClickZoom&&ne._ctx&&ne._ctx.store&&ne._ctx.store.getInitialConfigValue&&ne._ctx.store.getInitialConfigValue("doubleClickZoom")&&ne.map.doubleClickZoom.enable()},0)},disable:function(ne){setTimeout(function(){ne.map&&ne.map.doubleClickZoom&&ne.map.doubleClickZoom.disable()},0)}},Tt={exports:{}},kt=function(ne){if(!ne||!ne.type)return null;var we=Jt[ne.type];if(!we)return null;if(we==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:ne}]};if(we==="feature")return{type:"FeatureCollection",features:[ne]};if(we==="featurecollection")return ne},Jt={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},rn=r(kt),Yt=Object.freeze({__proto__:null,default:function ne(we){switch(we&&we.type||null){case"FeatureCollection":return we.features=we.features.reduce(function(et,Gt){return et.concat(ne(Gt))},[]),we;case"Feature":return we.geometry?ne(we.geometry).map(function(et){var Gt={type:"Feature",properties:JSON.parse(JSON.stringify(we.properties)),geometry:et};return we.id!==void 0&&(Gt.id=we.id),Gt}):[we];case"MultiPoint":return we.coordinates.map(function(et){return{type:"Point",coordinates:et}});case"MultiPolygon":return we.coordinates.map(function(et){return{type:"Polygon",coordinates:et}});case"MultiLineString":return we.coordinates.map(function(et){return{type:"LineString",coordinates:et}});case"GeometryCollection":return we.geometries.map(ne).reduce(function(et,Gt){return et.concat(Gt)},[]);case"Point":case"Polygon":case"LineString":return[we]}}}),Qn=kt,An=i(Yt),jt=function(ne){return function we(et){return Array.isArray(et)&&et.length&&typeof et[0]=="number"?[et]:et.reduce(function(Gt,on){return Array.isArray(on)&&Array.isArray(on[0])?Gt.concat(we(on)):(Gt.push(on),Gt)},[])}(ne)};An instanceof Function||(An=An.default);var Pe={exports:{}},je=Pe.exports=function(ne){return new _t(ne)};function _t(ne){this.value=ne}function Qt(ne,we,et){var Gt=[],on=[],dn=!0;return function xn(cr){var ur=et?en(cr):cr,Rr={},Ir=!0,Nr={node:ur,node_:cr,path:[].concat(Gt),parent:on[on.length-1],parents:on,key:Gt.slice(-1)[0],isRoot:Gt.length===0,level:Gt.length,circular:null,update:function(ui,Vr){Nr.isRoot||(Nr.parent.node[Nr.key]=ui),Nr.node=ui,Vr&&(Ir=!1)},delete:function(ui){delete Nr.parent.node[Nr.key],ui&&(Ir=!1)},remove:function(ui){kr(Nr.parent.node)?Nr.parent.node.splice(Nr.key,1):delete Nr.parent.node[Nr.key],ui&&(Ir=!1)},keys:null,before:function(ui){Rr.before=ui},after:function(ui){Rr.after=ui},pre:function(ui){Rr.pre=ui},post:function(ui){Rr.post=ui},stop:function(){dn=!1},block:function(){Ir=!1}};if(!dn)return Nr;function Wr(){if(typeof Nr.node=="object"&&Nr.node!==null){Nr.keys&&Nr.node_===Nr.node||(Nr.keys=Fn(Nr.node)),Nr.isLeaf=Nr.keys.length==0;for(var ui=0;ui<on.length;ui++)if(on[ui].node_===cr){Nr.circular=on[ui];break}}else Nr.isLeaf=!0,Nr.keys=null;Nr.notLeaf=!Nr.isLeaf,Nr.notRoot=!Nr.isRoot}Wr();var ua=we.call(Nr,Nr.node);return ua!==void 0&&Nr.update&&Nr.update(ua),Rr.before&&Rr.before.call(Nr,Nr.node),Ir&&(typeof Nr.node!="object"||Nr.node===null||Nr.circular||(on.push(Nr),Wr(),Qr(Nr.keys,function(ui,Vr){Gt.push(ui),Rr.pre&&Rr.pre.call(Nr,Nr.node[ui],ui);var hr=xn(Nr.node[ui]);et&&vi.call(Nr.node,ui)&&(Nr.node[ui]=hr.node),hr.isLast=Vr==Nr.keys.length-1,hr.isFirst=Vr==0,Rr.post&&Rr.post.call(Nr,hr),Gt.pop()}),on.pop()),Rr.after&&Rr.after.call(Nr,Nr.node)),Nr}(ne).node}function en(ne){if(typeof ne=="object"&&ne!==null){var we;if(kr(ne))we=[];else if(Wn(ne)==="[object Date]")we=new Date(ne.getTime?ne.getTime():ne);else if(function(on){return Wn(on)==="[object RegExp]"}(ne))we=new RegExp(ne);else if(function(on){return Wn(on)==="[object Error]"}(ne))we={message:ne.message};else if(function(on){return Wn(on)==="[object Boolean]"}(ne))we=new Boolean(ne);else if(function(on){return Wn(on)==="[object Number]"}(ne))we=new Number(ne);else if(function(on){return Wn(on)==="[object String]"}(ne))we=new String(ne);else if(Object.create&&Object.getPrototypeOf)we=Object.create(Object.getPrototypeOf(ne));else if(ne.constructor===Object)we={};else{var et=ne.constructor&&ne.constructor.prototype||ne.__proto__||{},Gt=function(){};Gt.prototype=et,we=new Gt}return Qr(Fn(ne),function(on){we[on]=ne[on]}),we}return ne}_t.prototype.get=function(ne){for(var we=this.value,et=0;et<ne.length;et++){var Gt=ne[et];if(!we||!vi.call(we,Gt)){we=void 0;break}we=we[Gt]}return we},_t.prototype.has=function(ne){for(var we=this.value,et=0;et<ne.length;et++){var Gt=ne[et];if(!we||!vi.call(we,Gt))return!1;we=we[Gt]}return!0},_t.prototype.set=function(ne,we){for(var et=this.value,Gt=0;Gt<ne.length-1;Gt++){var on=ne[Gt];vi.call(et,on)||(et[on]={}),et=et[on]}return et[ne[Gt]]=we,we},_t.prototype.map=function(ne){return Qt(this.value,ne,!0)},_t.prototype.forEach=function(ne){return this.value=Qt(this.value,ne,!1),this.value},_t.prototype.reduce=function(ne,we){var et=arguments.length===1,Gt=et?this.value:we;return this.forEach(function(on){this.isRoot&&et||(Gt=ne.call(this,Gt,on))}),Gt},_t.prototype.paths=function(){var ne=[];return this.forEach(function(we){ne.push(this.path)}),ne},_t.prototype.nodes=function(){var ne=[];return this.forEach(function(we){ne.push(this.node)}),ne},_t.prototype.clone=function(){var ne=[],we=[];return function et(Gt){for(var on=0;on<ne.length;on++)if(ne[on]===Gt)return we[on];if(typeof Gt=="object"&&Gt!==null){var dn=en(Gt);return ne.push(Gt),we.push(dn),Qr(Fn(Gt),function(xn){dn[xn]=et(Gt[xn])}),ne.pop(),we.pop(),dn}return Gt}(this.value)};var Fn=Object.keys||function(ne){var we=[];for(var et in ne)we.push(et);return we};function Wn(ne){return Object.prototype.toString.call(ne)}var kr=Array.isArray||function(ne){return Object.prototype.toString.call(ne)==="[object Array]"},Qr=function(ne,we){if(ne.forEach)return ne.forEach(we);for(var et=0;et<ne.length;et++)we(ne[et],et,ne)};Qr(Fn(_t.prototype),function(ne){je[ne]=function(we){var et=[].slice.call(arguments,1),Gt=new _t(we);return Gt[ne].apply(Gt,et)}});var vi=Object.hasOwnProperty||function(ne,we){return we in ne},zr=Pe.exports,zn=En;function En(ne){if(!(this instanceof En))return new En(ne);this._bbox=ne||[1/0,1/0,-1/0,-1/0],this._valid=!!ne}En.prototype.include=function(ne){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],ne[0]),this._bbox[1]=Math.min(this._bbox[1],ne[1]),this._bbox[2]=Math.max(this._bbox[2],ne[0]),this._bbox[3]=Math.max(this._bbox[3],ne[1]),this},En.prototype.equals=function(ne){var we;return we=ne instanceof En?ne.bbox():ne,this._bbox[0]==we[0]&&this._bbox[1]==we[1]&&this._bbox[2]==we[2]&&this._bbox[3]==we[3]},En.prototype.center=function(ne){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},En.prototype.union=function(ne){var we;return this._valid=!0,we=ne instanceof En?ne.bbox():ne,this._bbox[0]=Math.min(this._bbox[0],we[0]),this._bbox[1]=Math.min(this._bbox[1],we[1]),this._bbox[2]=Math.max(this._bbox[2],we[2]),this._bbox[3]=Math.max(this._bbox[3],we[3]),this},En.prototype.bbox=function(){return this._valid?this._bbox:null},En.prototype.contains=function(ne){if(!ne)return this._fastContains();if(!this._valid)return null;var we=ne[0],et=ne[1];return this._bbox[0]<=we&&this._bbox[1]<=et&&this._bbox[2]>=we&&this._bbox[3]>=et},En.prototype.intersect=function(ne){return this._valid?(we=ne instanceof En?ne.bbox():ne,!(this._bbox[0]>we[2]||this._bbox[2]<we[0]||this._bbox[3]<we[1]||this._bbox[1]>we[3])):null;var we},En.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var ne="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",ne)},En.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var mr=function(ne){if(!ne)return[];var we=An(Qn(ne)),et=[];return we.features.forEach(function(Gt){Gt.geometry&&(et=et.concat(jt(Gt.geometry.coordinates)))}),et},yi=zr,_i=zn,gi={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},lt=Object.keys(gi);function yn(ne){for(var we=_i(),et=mr(ne),Gt=0;Gt<et.length;Gt++)we.include(et[Gt]);return we}Tt.exports=function(ne){return yn(ne).bbox()},Tt.exports.polygon=function(ne){return yn(ne).polygon()},Tt.exports.bboxify=function(ne){return yi(ne).map(function(we){we&&lt.some(function(et){return!!we[et]&&gi[et].indexOf(we.type)!==-1})&&(we.bbox=yn(we).bbox(),this.update(we))})};var Ln=r(Tt.exports),Vn=-90;function bn(ne,we){var et=Vn,Gt=90,on=Vn,dn=90,xn=270,cr=-270;ne.forEach(function(Rr){var Ir=Ln(Rr),Nr=Ir[1],Wr=Ir[3],ua=Ir[0],ui=Ir[2];Nr>et&&(et=Nr),Wr<Gt&&(Gt=Wr),Wr>on&&(on=Wr),Nr<dn&&(dn=Nr),ua<xn&&(xn=ua),ui>cr&&(cr=ui)});var ur=we;return et+ur.lat>85&&(ur.lat=85-et),on+ur.lat>90&&(ur.lat=90-on),Gt+ur.lat<-85&&(ur.lat=-85-Gt),dn+ur.lat<Vn&&(ur.lat=Vn-dn),xn+ur.lng<=-270&&(ur.lng+=360*Math.ceil(Math.abs(ur.lng)/360)),cr+ur.lng>=270&&(ur.lng-=360*Math.ceil(Math.abs(ur.lng)/360)),ur}function wr(ne,we){var et=bn(ne.map(function(Gt){return Gt.toGeoJSON()}),we);ne.forEach(function(Gt){var on,dn=Gt.getCoordinates(),xn=function(ur){var Rr={lng:ur[0]+et.lng,lat:ur[1]+et.lat};return[Rr.lng,Rr.lat]},cr=function(ur){return ur.map(function(Rr){return xn(Rr)})};Gt.type===M.POINT?on=xn(dn):Gt.type===M.LINE_STRING||Gt.type===M.MULTI_POINT?on=dn.map(xn):Gt.type===M.POLYGON||Gt.type===M.MULTI_LINE_STRING?on=dn.map(cr):Gt.type===M.MULTI_POLYGON&&(on=dn.map(function(ur){return ur.map(function(Rr){return cr(Rr)})})),Gt.incomingCoords(on)})}var Lr={onSetup:function(ne){var we=this,et={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:ne.featureIds||[]};return this.setSelected(et.initiallySelectedFeatureIds.filter(function(Gt){return we.getFeature(Gt)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),et},fireUpdate:function(){this.map.fire(A.UPDATE,{action:F.MOVE,features:this.getSelected().map(function(ne){return ne.toGeoJSON()})})},fireActionable:function(){var ne=this,we=this.getSelected(),et=we.filter(function(cr){return ne.isInstanceOf("MultiFeature",cr)}),Gt=!1;if(we.length>1){Gt=!0;var on=we[0].type.replace("Multi","");we.forEach(function(cr){cr.type.replace("Multi","")!==on&&(Gt=!1)})}var dn=et.length>0,xn=we.length>0;this.setActionableState({combineFeatures:Gt,uncombineFeatures:dn,trash:xn})},getUniqueIds:function(ne){return ne.length?ne.map(function(we){return we.properties.id}).filter(function(we){return we!==void 0}).reduce(function(we,et){return we.add(et),we},new Q).values():[]},stopExtendedInteractions:function(ne){ne.boxSelectElement&&(ne.boxSelectElement.parentNode&&ne.boxSelectElement.parentNode.removeChild(ne.boxSelectElement),ne.boxSelectElement=null),this.map.dragPan.enable(),ne.boxSelecting=!1,ne.canBoxSelect=!1,ne.dragMoving=!1,ne.canDragMove=!1},onStop:function(){xt.enable(this)},onMouseMove:function(ne,we){return cn(we)&&ne.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(ne),!0},onMouseOut:function(ne){return!ne.dragMoving||this.fireUpdate()}};Lr.onTap=Lr.onClick=function(ne,we){return Zt(we)?this.clickAnywhere(ne,we):Dt(O.VERTEX)(we)?this.clickOnVertex(ne,we):cn(we)?this.clickOnFeature(ne,we):void 0},Lr.clickAnywhere=function(ne){var we=this,et=this.getSelectedIds();et.length&&(this.clearSelectedFeatures(),et.forEach(function(Gt){return we.doRender(Gt)})),xt.enable(this),this.stopExtendedInteractions(ne)},Lr.clickOnVertex=function(ne,we){this.changeMode(D.DIRECT_SELECT,{featureId:we.featureTarget.properties.parent,coordPath:we.featureTarget.properties.coord_path,startPos:we.lngLat}),this.updateUIClasses({mouse:_.MOVE})},Lr.startOnActiveFeature=function(ne,we){this.stopExtendedInteractions(ne),this.map.dragPan.disable(),this.doRender(we.featureTarget.properties.id),ne.canDragMove=!0,ne.dragMoveLocation=we.lngLat},Lr.clickOnFeature=function(ne,we){var et=this;xt.disable(this),this.stopExtendedInteractions(ne);var Gt=Et(we),on=this.getSelectedIds(),dn=we.featureTarget.properties.id,xn=this.isSelected(dn);if(!Gt&&xn&&this.getFeature(dn).type!==M.POINT)return this.changeMode(D.DIRECT_SELECT,{featureId:dn});xn&&Gt?(this.deselect(dn),this.updateUIClasses({mouse:_.POINTER}),on.length===1&&xt.enable(this)):!xn&&Gt?(this.select(dn),this.updateUIClasses({mouse:_.MOVE})):xn||Gt||(on.forEach(function(cr){return et.doRender(cr)}),this.setSelected(dn),this.updateUIClasses({mouse:_.MOVE})),this.doRender(dn)},Lr.onMouseDown=function(ne,we){return Bt(we)?this.startOnActiveFeature(ne,we):this.drawConfig.boxSelect&&At(we)?this.startBoxSelect(ne,we):void 0},Lr.startBoxSelect=function(ne,we){this.stopExtendedInteractions(ne),this.map.dragPan.disable(),ne.boxSelectStartLocation=Fe(we.originalEvent,this.map.getContainer()),ne.canBoxSelect=!0},Lr.onTouchStart=function(ne,we){if(Bt(we))return this.startOnActiveFeature(ne,we)},Lr.onDrag=function(ne,we){return ne.canDragMove?this.dragMove(ne,we):this.drawConfig.boxSelect&&ne.canBoxSelect?this.whileBoxSelect(ne,we):void 0},Lr.whileBoxSelect=function(ne,we){ne.boxSelecting=!0,this.updateUIClasses({mouse:_.ADD}),ne.boxSelectElement||(ne.boxSelectElement=document.createElement("div"),ne.boxSelectElement.classList.add(v.BOX_SELECT),this.map.getContainer().appendChild(ne.boxSelectElement));var et=Fe(we.originalEvent,this.map.getContainer()),Gt=Math.min(ne.boxSelectStartLocation.x,et.x),on=Math.max(ne.boxSelectStartLocation.x,et.x),dn=Math.min(ne.boxSelectStartLocation.y,et.y),xn=Math.max(ne.boxSelectStartLocation.y,et.y),cr="translate("+Gt+"px, "+dn+"px)";ne.boxSelectElement.style.transform=cr,ne.boxSelectElement.style.WebkitTransform=cr,ne.boxSelectElement.style.width=on-Gt+"px",ne.boxSelectElement.style.height=xn-dn+"px"},Lr.dragMove=function(ne,we){ne.dragMoving=!0,we.originalEvent.stopPropagation();var et={lng:we.lngLat.lng-ne.dragMoveLocation.lng,lat:we.lngLat.lat-ne.dragMoveLocation.lat};wr(this.getSelected(),et),ne.dragMoveLocation=we.lngLat},Lr.onTouchEnd=Lr.onMouseUp=function(ne,we){var et=this;if(ne.dragMoving)this.fireUpdate();else if(ne.boxSelecting){var Gt=[ne.boxSelectStartLocation,Fe(we.originalEvent,this.map.getContainer())],on=this.featuresAt(null,Gt,"click"),dn=this.getUniqueIds(on).filter(function(xn){return!et.isSelected(xn)});dn.length&&(this.select(dn),dn.forEach(function(xn){return et.doRender(xn)}),this.updateUIClasses({mouse:_.MOVE}))}this.stopExtendedInteractions(ne)},Lr.toDisplayFeatures=function(ne,we,et){we.properties.active=this.isSelected(we.properties.id)?N.ACTIVE:N.INACTIVE,et(we),this.fireActionable(),we.properties.active===N.ACTIVE&&we.geometry.type!==M.POINT&&it(we).forEach(et)},Lr.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Lr.onCombineFeatures=function(){var ne=this.getSelected();if(!(ne.length===0||ne.length<2)){for(var we=[],et=[],Gt=ne[0].type.replace("Multi",""),on=0;on<ne.length;on++){var dn=ne[on];if(dn.type.replace("Multi","")!==Gt)return;dn.type.includes("Multi")?dn.getCoordinates().forEach(function(cr){we.push(cr)}):we.push(dn.getCoordinates()),et.push(dn.toGeoJSON())}if(et.length>1){var xn=this.newFeature({type:M.FEATURE,properties:et[0].properties,geometry:{type:"Multi"+Gt,coordinates:we}});this.addFeature(xn),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([xn.id]),this.map.fire(A.COMBINE_FEATURES,{createdFeatures:[xn.toGeoJSON()],deletedFeatures:et})}this.fireActionable()}},Lr.onUncombineFeatures=function(){var ne=this,we=this.getSelected();if(we.length!==0){for(var et=[],Gt=[],on=function(xn){var cr=we[xn];ne.isInstanceOf("MultiFeature",cr)&&(cr.getFeatures().forEach(function(ur){ne.addFeature(ur),ur.properties=cr.properties,et.push(ur.toGeoJSON()),ne.select([ur.id])}),ne.deleteFeature(cr.id,{silent:!0}),Gt.push(cr.toGeoJSON()))},dn=0;dn<we.length;dn++)on(dn);et.length>1&&this.map.fire(A.UNCOMBINE_FEATURES,{createdFeatures:et,deletedFeatures:Gt}),this.fireActionable()}};var Mr=Dt(O.VERTEX),Xr=Dt(O.MIDPOINT),Yr={fireUpdate:function(){this.map.fire(A.UPDATE,{action:F.CHANGE_COORDINATES,features:this.getSelected().map(function(ne){return ne.toGeoJSON()})})},fireActionable:function(ne){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:ne.selectedCoordPaths.length>0})},startDragging:function(ne,we){this.map.dragPan.disable(),ne.canDragMove=!0,ne.dragMoveLocation=we.lngLat},stopDragging:function(ne){this.map.dragPan.enable(),ne.dragMoving=!1,ne.canDragMove=!1,ne.dragMoveLocation=null},onVertex:function(ne,we){this.startDragging(ne,we);var et=we.featureTarget.properties,Gt=ne.selectedCoordPaths.indexOf(et.coord_path);Et(we)||Gt!==-1?Et(we)&&Gt===-1&&ne.selectedCoordPaths.push(et.coord_path):ne.selectedCoordPaths=[et.coord_path];var on=this.pathsToCoordinates(ne.featureId,ne.selectedCoordPaths);this.setSelectedCoordinates(on)},onMidpoint:function(ne,we){this.startDragging(ne,we);var et=we.featureTarget.properties;ne.feature.addCoordinate(et.coord_path,et.lng,et.lat),this.fireUpdate(),ne.selectedCoordPaths=[et.coord_path]},pathsToCoordinates:function(ne,we){return we.map(function(et){return{feature_id:ne,coord_path:et}})},onFeature:function(ne,we){ne.selectedCoordPaths.length===0?this.startDragging(ne,we):this.stopDragging(ne)},dragFeature:function(ne,we,et){wr(this.getSelected(),et),ne.dragMoveLocation=we.lngLat},dragVertex:function(ne,we,et){for(var Gt=ne.selectedCoordPaths.map(function(cr){return ne.feature.getCoordinate(cr)}),on=bn(Gt.map(function(cr){return{type:M.FEATURE,properties:{},geometry:{type:M.POINT,coordinates:cr}}}),et),dn=0;dn<Gt.length;dn++){var xn=Gt[dn];ne.feature.updateCoordinate(ne.selectedCoordPaths[dn],xn[0]+on.lng,xn[1]+on.lat)}},clickNoTarget:function(){this.changeMode(D.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(D.SIMPLE_SELECT)},clickActiveFeature:function(ne){ne.selectedCoordPaths=[],this.clearSelectedCoordinates(),ne.feature.changed()},onSetup:function(ne){var we=ne.featureId,et=this.getFeature(we);if(!et)throw new Error("You must provide a featureId to enter direct_select mode");if(et.type===M.POINT)throw new TypeError("direct_select mode doesn't handle point features");var Gt={featureId:we,feature:et,dragMoveLocation:ne.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:ne.coordPath?[ne.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(we,Gt.selectedCoordPaths)),this.setSelected(we),xt.disable(this),this.setActionableState({trash:!0}),Gt},onStop:function(){xt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(ne,we,et){ne.featureId===we.properties.id?(we.properties.active=N.ACTIVE,et(we),it(we,{map:this.map,midpoints:!0,selectedPaths:ne.selectedCoordPaths}).forEach(et)):(we.properties.active=N.INACTIVE,et(we)),this.fireActionable(ne)},onTrash:function(ne){ne.selectedCoordPaths.sort(function(we,et){return et.localeCompare(we,"en",{numeric:!0})}).forEach(function(we){return ne.feature.removeCoordinate(we)}),this.fireUpdate(),ne.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(ne),ne.feature.isValid()===!1&&(this.deleteFeature([ne.featureId]),this.changeMode(D.SIMPLE_SELECT,{}))},onMouseMove:function(ne,we){var et=Bt(we),Gt=Mr(we),on=Xr(we),dn=ne.selectedCoordPaths.length===0;return et&&dn||Gt&&!dn?this.updateUIClasses({mouse:_.MOVE}):this.updateUIClasses({mouse:_.NONE}),(Gt||et||on)&&ne.dragMoving&&this.fireUpdate(),this.stopDragging(ne),!0},onMouseOut:function(ne){return ne.dragMoving&&this.fireUpdate(),!0}};Yr.onTouchStart=Yr.onMouseDown=function(ne,we){return Mr(we)?this.onVertex(ne,we):Bt(we)?this.onFeature(ne,we):Xr(we)?this.onMidpoint(ne,we):void 0},Yr.onDrag=function(ne,we){if(ne.canDragMove===!0){ne.dragMoving=!0,we.originalEvent.stopPropagation();var et={lng:we.lngLat.lng-ne.dragMoveLocation.lng,lat:we.lngLat.lat-ne.dragMoveLocation.lat};ne.selectedCoordPaths.length>0?this.dragVertex(ne,we,et):this.dragFeature(ne,we,et),ne.dragMoveLocation=we.lngLat}},Yr.onClick=function(ne,we){return Zt(we)?this.clickNoTarget(ne,we):Bt(we)?this.clickActiveFeature(ne,we):gn(we)?this.clickInactive(ne,we):void this.stopDragging(ne)},Yr.onTap=function(ne,we){return Zt(we)?this.clickNoTarget(ne,we):Bt(we)?this.clickActiveFeature(ne,we):gn(we)?this.clickInactive(ne,we):void 0},Yr.onTouchEnd=Yr.onMouseUp=function(ne){ne.dragMoving&&this.fireUpdate(),this.stopDragging(ne)};var ni={};function bi(ne,we){return!!ne.lngLat&&ne.lngLat.lng===we[0]&&ne.lngLat.lat===we[1]}ni.onSetup=function(){var ne=this.newFeature({type:M.FEATURE,properties:{},geometry:{type:M.POINT,coordinates:[]}});return this.addFeature(ne),this.clearSelectedFeatures(),this.updateUIClasses({mouse:_.ADD}),this.activateUIButton(E.POINT),this.setActionableState({trash:!0}),{point:ne}},ni.stopDrawingAndRemove=function(ne){this.deleteFeature([ne.point.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT)},ni.onTap=ni.onClick=function(ne,we){this.updateUIClasses({mouse:_.MOVE}),ne.point.updateCoordinate("",we.lngLat.lng,we.lngLat.lat),this.map.fire(A.CREATE,{features:[ne.point.toGeoJSON()]}),this.changeMode(D.SIMPLE_SELECT,{featureIds:[ne.point.id]})},ni.onStop=function(ne){this.activateUIButton(),ne.point.getCoordinate().length||this.deleteFeature([ne.point.id],{silent:!0})},ni.toDisplayFeatures=function(ne,we,et){var Gt=we.properties.id===ne.point.id;if(we.properties.active=Gt?N.ACTIVE:N.INACTIVE,!Gt)return et(we)},ni.onTrash=ni.stopDrawingAndRemove,ni.onKeyUp=function(ne,we){if(qn(we)||Dn(we))return this.stopDrawingAndRemove(ne,we)};var Ni={onSetup:function(){var ne=this.newFeature({type:M.FEATURE,properties:{},geometry:{type:M.POLYGON,coordinates:[[]]}});return this.addFeature(ne),this.clearSelectedFeatures(),xt.disable(this),this.updateUIClasses({mouse:_.ADD}),this.activateUIButton(E.POLYGON),this.setActionableState({trash:!0}),{polygon:ne,currentVertexPosition:0}},clickAnywhere:function(ne,we){if(ne.currentVertexPosition>0&&bi(we,ne.polygon.coordinates[0][ne.currentVertexPosition-1]))return this.changeMode(D.SIMPLE_SELECT,{featureIds:[ne.polygon.id]});this.updateUIClasses({mouse:_.ADD}),ne.polygon.updateCoordinate("0."+ne.currentVertexPosition,we.lngLat.lng,we.lngLat.lat),ne.currentVertexPosition++,ne.polygon.updateCoordinate("0."+ne.currentVertexPosition,we.lngLat.lng,we.lngLat.lat)},clickOnVertex:function(ne){return this.changeMode(D.SIMPLE_SELECT,{featureIds:[ne.polygon.id]})},onMouseMove:function(ne,we){ne.polygon.updateCoordinate("0."+ne.currentVertexPosition,we.lngLat.lng,we.lngLat.lat),$t(we)&&this.updateUIClasses({mouse:_.POINTER})}};Ni.onTap=Ni.onClick=function(ne,we){return $t(we)?this.clickOnVertex(ne,we):this.clickAnywhere(ne,we)},Ni.onKeyUp=function(ne,we){qn(we)?(this.deleteFeature([ne.polygon.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT)):Dn(we)&&this.changeMode(D.SIMPLE_SELECT,{featureIds:[ne.polygon.id]})},Ni.onStop=function(ne){this.updateUIClasses({mouse:_.NONE}),xt.enable(this),this.activateUIButton(),this.getFeature(ne.polygon.id)!==void 0&&(ne.polygon.removeCoordinate("0."+ne.currentVertexPosition),ne.polygon.isValid()?this.map.fire(A.CREATE,{features:[ne.polygon.toGeoJSON()]}):(this.deleteFeature([ne.polygon.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT,{},{silent:!0})))},Ni.toDisplayFeatures=function(ne,we,et){var Gt=we.properties.id===ne.polygon.id;if(we.properties.active=Gt?N.ACTIVE:N.INACTIVE,!Gt)return et(we);if(we.geometry.coordinates.length!==0){var on=we.geometry.coordinates[0].length;if(!(on<3)){if(we.properties.meta=O.FEATURE,et(He(ne.polygon.id,we.geometry.coordinates[0][0],"0.0",!1)),on>3){var dn=we.geometry.coordinates[0].length-3;et(He(ne.polygon.id,we.geometry.coordinates[0][dn],"0."+dn,!1))}if(on<=4){var xn=[[we.geometry.coordinates[0][0][0],we.geometry.coordinates[0][0][1]],[we.geometry.coordinates[0][1][0],we.geometry.coordinates[0][1][1]]];if(et({type:M.FEATURE,properties:we.properties,geometry:{coordinates:xn,type:M.LINE_STRING}}),on===3)return}return et(we)}}},Ni.onTrash=function(ne){this.deleteFeature([ne.polygon.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT)};var Yi={onSetup:function(ne){var we,et,Gt=(ne=ne||{}).featureId,on="forward";if(Gt){if(!(we=this.getFeature(Gt)))throw new Error("Could not find a feature with the provided featureId");var dn=ne.from;if(dn&&dn.type==="Feature"&&dn.geometry&&dn.geometry.type==="Point"&&(dn=dn.geometry),dn&&dn.type==="Point"&&dn.coordinates&&dn.coordinates.length===2&&(dn=dn.coordinates),!dn||!Array.isArray(dn))throw new Error("Please use the `from` property to indicate which point to continue the line from");var xn=we.coordinates.length-1;if(we.coordinates[xn][0]===dn[0]&&we.coordinates[xn][1]===dn[1])et=xn+1,we.addCoordinate.apply(we,[et].concat(we.coordinates[xn]));else{if(we.coordinates[0][0]!==dn[0]||we.coordinates[0][1]!==dn[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");on="backwards",et=0,we.addCoordinate.apply(we,[et].concat(we.coordinates[0]))}}else we=this.newFeature({type:M.FEATURE,properties:{},geometry:{type:M.LINE_STRING,coordinates:[]}}),et=0,this.addFeature(we);return this.clearSelectedFeatures(),xt.disable(this),this.updateUIClasses({mouse:_.ADD}),this.activateUIButton(E.LINE),this.setActionableState({trash:!0}),{line:we,currentVertexPosition:et,direction:on}},clickAnywhere:function(ne,we){if(ne.currentVertexPosition>0&&bi(we,ne.line.coordinates[ne.currentVertexPosition-1])||ne.direction==="backwards"&&bi(we,ne.line.coordinates[ne.currentVertexPosition+1]))return this.changeMode(D.SIMPLE_SELECT,{featureIds:[ne.line.id]});this.updateUIClasses({mouse:_.ADD}),ne.line.updateCoordinate(ne.currentVertexPosition,we.lngLat.lng,we.lngLat.lat),ne.direction==="forward"?(ne.currentVertexPosition++,ne.line.updateCoordinate(ne.currentVertexPosition,we.lngLat.lng,we.lngLat.lat)):ne.line.addCoordinate(0,we.lngLat.lng,we.lngLat.lat)},clickOnVertex:function(ne){return this.changeMode(D.SIMPLE_SELECT,{featureIds:[ne.line.id]})},onMouseMove:function(ne,we){ne.line.updateCoordinate(ne.currentVertexPosition,we.lngLat.lng,we.lngLat.lat),$t(we)&&this.updateUIClasses({mouse:_.POINTER})}};Yi.onTap=Yi.onClick=function(ne,we){if($t(we))return this.clickOnVertex(ne,we);this.clickAnywhere(ne,we)},Yi.onKeyUp=function(ne,we){Dn(we)?this.changeMode(D.SIMPLE_SELECT,{featureIds:[ne.line.id]}):qn(we)&&(this.deleteFeature([ne.line.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT))},Yi.onStop=function(ne){xt.enable(this),this.activateUIButton(),this.getFeature(ne.line.id)!==void 0&&(ne.line.removeCoordinate(""+ne.currentVertexPosition),ne.line.isValid()?this.map.fire(A.CREATE,{features:[ne.line.toGeoJSON()]}):(this.deleteFeature([ne.line.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT,{},{silent:!0})))},Yi.onTrash=function(ne){this.deleteFeature([ne.line.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT)},Yi.toDisplayFeatures=function(ne,we,et){var Gt=we.properties.id===ne.line.id;if(we.properties.active=Gt?N.ACTIVE:N.INACTIVE,!Gt)return et(we);we.geometry.coordinates.length<2||(we.properties.meta=O.FEATURE,et(He(ne.line.id,we.geometry.coordinates[ne.direction==="forward"?we.geometry.coordinates.length-2:1],""+(ne.direction==="forward"?we.geometry.coordinates.length-2:1),!1)),et(we))};var Qi={simple_select:Lr,direct_select:Yr,draw_point:ni,draw_polygon:Ni,draw_line_string:Yi},_a={defaultMode:D.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Pt,modes:Qi,controls:{},userProperties:!1},ra={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Ai={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Ka(ne,we){return ne.map(function(et){return et.source?et:qt(et,{id:et.id+"."+we,source:we==="hot"?w.HOT:w.COLD})})}var la={exports:{}};(function(ne,we){var et="__lodash_hash_undefined__",Gt=9007199254740991,on="[object Arguments]",dn="[object Array]",xn="[object Boolean]",cr="[object Date]",ur="[object Error]",Rr="[object Function]",Ir="[object Map]",Nr="[object Number]",Wr="[object Object]",ua="[object Promise]",ui="[object RegExp]",Vr="[object Set]",hr="[object String]",ii="[object Symbol]",Wi="[object WeakMap]",ea="[object ArrayBuffer]",ji="[object DataView]",Oo=/^\[object .+?Constructor\]$/,ri=/^(?:0|[1-9]\d*)$/,Jr={};Jr["[object Float32Array]"]=Jr["[object Float64Array]"]=Jr["[object Int8Array]"]=Jr["[object Int16Array]"]=Jr["[object Int32Array]"]=Jr["[object Uint8Array]"]=Jr["[object Uint8ClampedArray]"]=Jr["[object Uint16Array]"]=Jr["[object Uint32Array]"]=!0,Jr[on]=Jr[dn]=Jr[ea]=Jr[xn]=Jr[ji]=Jr[cr]=Jr[ur]=Jr[Rr]=Jr[Ir]=Jr[Nr]=Jr[Wr]=Jr[ui]=Jr[Vr]=Jr[hr]=Jr[Wi]=!1;var _l=typeof fv=="object"&&fv&&fv.Object===Object&&fv,ha=typeof self=="object"&&self&&self.Object===Object&&self,xo=_l||ha||Function("return this")(),Fo=we&&!we.nodeType&&we,no=Fo&&ne&&!ne.nodeType&&ne,Bo=no&&no.exports===Fo,ts=Bo&&_l.process,xl=function(){try{return ts&&ts.binding&&ts.binding("util")}catch{}}(),Ws=xl&&xl.isTypedArray;function wc(Mn,Yn){for(var jr=-1,ai=Mn==null?0:Mn.length;++jr<ai;)if(Yn(Mn[jr],jr,Mn))return!0;return!1}function $l(Mn){var Yn=-1,jr=Array(Mn.size);return Mn.forEach(function(ai,ia){jr[++Yn]=[ia,ai]}),jr}function sl(Mn){var Yn=-1,jr=Array(Mn.size);return Mn.forEach(function(ai){jr[++Yn]=ai}),jr}var ws,Wa,bo,Bu=Array.prototype,Do=Function.prototype,Ea=Object.prototype,ns=xo["__core-js_shared__"],Ss=Do.toString,bl=Ea.hasOwnProperty,Fs=(ws=/[^.]+$/.exec(ns&&ns.keys&&ns.keys.IE_PROTO||""))?"Symbol(src)_1."+ws:"",Dl=Ea.toString,Sc=RegExp("^"+Ss.call(bl).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ec=Bo?xo.Buffer:void 0,Eu=xo.Symbol,Tu=xo.Uint8Array,Xs=Ea.propertyIsEnumerable,$c=Bu.splice,Es=Eu?Eu.toStringTag:void 0,Wl=Object.getOwnPropertySymbols,Lo=Ec?Ec.isBuffer:void 0,zu=(Wa=Object.keys,bo=Object,function(Mn){return Wa(bo(Mn))}),au=Nl(xo,"DataView"),Xo=Nl(xo,"Map"),Uu=Nl(xo,"Promise"),fe=Nl(xo,"Set"),nt=Nl(xo,"WeakMap"),Wt=Nl(Object,"create"),un=Zs(au),kn=Zs(Xo),Kn=Zs(Uu),Pr=Zs(fe),oi=Zs(nt),Ci=Eu?Eu.prototype:void 0,Zi=Ci?Ci.valueOf:void 0;function Oi(Mn){var Yn=-1,jr=Mn==null?0:Mn.length;for(this.clear();++Yn<jr;){var ai=Mn[Yn];this.set(ai[0],ai[1])}}function qi(Mn){var Yn=-1,jr=Mn==null?0:Mn.length;for(this.clear();++Yn<jr;){var ai=Mn[Yn];this.set(ai[0],ai[1])}}function za(Mn){var Yn=-1,jr=Mn==null?0:Mn.length;for(this.clear();++Yn<jr;){var ai=Mn[Yn];this.set(ai[0],ai[1])}}function ro(Mn){var Yn=-1,jr=Mn==null?0:Mn.length;for(this.__data__=new za;++Yn<jr;)this.add(Mn[Yn])}function Ja(Mn){var Yn=this.__data__=new qi(Mn);this.size=Yn.size}function zo(Mn,Yn){var jr=rs(Mn),ai=!jr&&Vu(Mn),ia=!jr&&!ai&&Cc(Mn),Mi=!jr&&!ai&&!ia&&Cu(Mn),I=jr||ai||ia||Mi,y=I?function(Z,le){for(var Me=-1,Ue=Array(Z);++Me<Z;)Ue[Me]=le(Me);return Ue}(Mn.length,String):[],b=y.length;for(var R in Mn)!bl.call(Mn,R)||I&&(R=="length"||ia&&(R=="offset"||R=="parent")||Mi&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||Gu(R,b))||y.push(R);return y}function co(Mn,Yn){for(var jr=Mn.length;jr--;)if(Cs(Mn[jr][0],Yn))return jr;return-1}function Ts(Mn){return Mn==null?Mn===void 0?"[object Undefined]":"[object Null]":Es&&Es in Object(Mn)?function(Yn){var jr=bl.call(Yn,Es),ai=Yn[Es];try{Yn[Es]=void 0;var ia=!0}catch{}var Mi=Dl.call(Yn);return ia&&(jr?Yn[Es]=ai:delete Yn[Es]),Mi}(Mn):function(Yn){return Dl.call(Yn)}(Mn)}function ll(Mn){return wo(Mn)&&Ts(Mn)==on}function Ys(Mn,Yn,jr,ai,ia){return Mn===Yn||(Mn==null||Yn==null||!wo(Mn)&&!wo(Yn)?Mn!=Mn&&Yn!=Yn:function(Mi,I,y,b,R,Z){var le=rs(Mi),Me=rs(I),Ue=le?dn:io(Mi),dt=Me?dn:io(I),Nt=(Ue=Ue==on?Wr:Ue)==Wr,wn=(dt=dt==on?Wr:dt)==Wr,Nn=Ue==dt;if(Nn&&Cc(Mi)){if(!Cc(I))return!1;le=!0,Nt=!1}if(Nn&&!Nt)return Z||(Z=new Ja),le||Cu(Mi)?Xl(Mi,I,y,b,R,Z):function(si,ci,Fi,hi,Ii,Di,xa){switch(Fi){case ji:if(si.byteLength!=ci.byteLength||si.byteOffset!=ci.byteOffset)return!1;si=si.buffer,ci=ci.buffer;case ea:return!(si.byteLength!=ci.byteLength||!Di(new Tu(si),new Tu(ci)));case xn:case cr:case Nr:return Cs(+si,+ci);case ur:return si.name==ci.name&&si.message==ci.message;case ui:case hr:return si==ci+"";case Ir:var ka=$l;case Vr:var Bs=1&hi;if(ka||(ka=sl),si.size!=ci.size&&!Bs)return!1;var kl=xa.get(si);if(kl)return kl==ci;hi|=2,xa.set(si,ci);var ul=Xl(ka(si),ka(ci),hi,Ii,Di,xa);return xa.delete(si),ul;case ii:if(Zi)return Zi.call(si)==Zi.call(ci)}return!1}(Mi,I,Ue,y,b,R,Z);if(!(1&y)){var dr=Nt&&bl.call(Mi,"__wrapped__"),$r=wn&&bl.call(I,"__wrapped__");if(dr||$r){var mi=dr?Mi.value():Mi,xi=$r?I.value():I;return Z||(Z=new Ja),R(mi,xi,y,b,Z)}}return Nn?(Z||(Z=new Ja),function(si,ci,Fi,hi,Ii,Di){var xa=1&Fi,ka=Tc(si),Bs=ka.length,kl=Tc(ci).length;if(Bs!=kl&&!xa)return!1;for(var ul=Bs;ul--;){var Ks=ka[ul];if(!(xa?Ks in ci:bl.call(ci,Ks)))return!1}var ou=Di.get(si);if(ou&&Di.get(ci))return ou==ci;var Js=!0;Di.set(si,ci),Di.set(ci,si);for(var So=xa;++ul<Bs;){var cl=si[Ks=ka[ul]],ps=ci[Ks];if(hi)var Xc=xa?hi(ps,cl,Ks,ci,si,Di):hi(cl,ps,Ks,si,ci,Di);if(!(Xc===void 0?cl===ps||Ii(cl,ps,Fi,hi,Di):Xc)){Js=!1;break}So||(So=Ks=="constructor")}if(Js&&!So){var wl=si.constructor,Mu=ci.constructor;wl==Mu||!("constructor"in si)||!("constructor"in ci)||typeof wl=="function"&&wl instanceof wl&&typeof Mu=="function"&&Mu instanceof Mu||(Js=!1)}return Di.delete(si),Di.delete(ci),Js}(Mi,I,y,b,R,Z)):!1}(Mn,Yn,jr,ai,Ys,ia))}function Wc(Mn){return!(!ds(Mn)||function(Yn){return!!Fs&&Fs in Yn}(Mn))&&(sc(Mn)?Sc:Oo).test(Zs(Mn))}function Ll(Mn){if(jr=(Yn=Mn)&&Yn.constructor,ai=typeof jr=="function"&&jr.prototype||Ea,Yn!==ai)return zu(Mn);var Yn,jr,ai,ia=[];for(var Mi in Object(Mn))bl.call(Mn,Mi)&&Mi!="constructor"&&ia.push(Mi);return ia}function Xl(Mn,Yn,jr,ai,ia,Mi){var I=1&jr,y=Mn.length,b=Yn.length;if(y!=b&&!(I&&b>y))return!1;var R=Mi.get(Mn);if(R&&Mi.get(Yn))return R==Yn;var Z=-1,le=!0,Me=2&jr?new ro:void 0;for(Mi.set(Mn,Yn),Mi.set(Yn,Mn);++Z<y;){var Ue=Mn[Z],dt=Yn[Z];if(ai)var Nt=I?ai(dt,Ue,Z,Yn,Mn,Mi):ai(Ue,dt,Z,Mn,Yn,Mi);if(Nt!==void 0){if(Nt)continue;le=!1;break}if(Me){if(!wc(Yn,function(wn,Nn){if(dr=Nn,!Me.has(dr)&&(Ue===wn||ia(Ue,wn,jr,ai,Mi)))return Me.push(Nn);var dr})){le=!1;break}}else if(Ue!==dt&&!ia(Ue,dt,jr,ai,Mi)){le=!1;break}}return Mi.delete(Mn),Mi.delete(Yn),le}function Tc(Mn){return function(Yn,jr,ai){var ia=jr(Yn);return rs(Yn)?ia:function(Mi,I){for(var y=-1,b=I.length,R=Mi.length;++y<b;)Mi[R+y]=I[y];return Mi}(ia,ai(Yn))}(Mn,wh,ju)}function Yl(Mn,Yn){var jr,ai,ia=Mn.__data__;return((ai=typeof(jr=Yn))=="string"||ai=="number"||ai=="symbol"||ai=="boolean"?jr!=="__proto__":jr===null)?ia[typeof Yn=="string"?"string":"hash"]:ia.map}function Nl(Mn,Yn){var jr=function(ai,ia){return ai==null?void 0:ai[ia]}(Mn,Yn);return Wc(jr)?jr:void 0}Oi.prototype.clear=function(){this.__data__=Wt?Wt(null):{},this.size=0},Oi.prototype.delete=function(Mn){var Yn=this.has(Mn)&&delete this.__data__[Mn];return this.size-=Yn?1:0,Yn},Oi.prototype.get=function(Mn){var Yn=this.__data__;if(Wt){var jr=Yn[Mn];return jr===et?void 0:jr}return bl.call(Yn,Mn)?Yn[Mn]:void 0},Oi.prototype.has=function(Mn){var Yn=this.__data__;return Wt?Yn[Mn]!==void 0:bl.call(Yn,Mn)},Oi.prototype.set=function(Mn,Yn){var jr=this.__data__;return this.size+=this.has(Mn)?0:1,jr[Mn]=Wt&&Yn===void 0?et:Yn,this},qi.prototype.clear=function(){this.__data__=[],this.size=0},qi.prototype.delete=function(Mn){var Yn=this.__data__,jr=co(Yn,Mn);return!(jr<0)&&(jr==Yn.length-1?Yn.pop():$c.call(Yn,jr,1),--this.size,!0)},qi.prototype.get=function(Mn){var Yn=this.__data__,jr=co(Yn,Mn);return jr<0?void 0:Yn[jr][1]},qi.prototype.has=function(Mn){return co(this.__data__,Mn)>-1},qi.prototype.set=function(Mn,Yn){var jr=this.__data__,ai=co(jr,Mn);return ai<0?(++this.size,jr.push([Mn,Yn])):jr[ai][1]=Yn,this},za.prototype.clear=function(){this.size=0,this.__data__={hash:new Oi,map:new(Xo||qi),string:new Oi}},za.prototype.delete=function(Mn){var Yn=Yl(this,Mn).delete(Mn);return this.size-=Yn?1:0,Yn},za.prototype.get=function(Mn){return Yl(this,Mn).get(Mn)},za.prototype.has=function(Mn){return Yl(this,Mn).has(Mn)},za.prototype.set=function(Mn,Yn){var jr=Yl(this,Mn),ai=jr.size;return jr.set(Mn,Yn),this.size+=jr.size==ai?0:1,this},ro.prototype.add=ro.prototype.push=function(Mn){return this.__data__.set(Mn,et),this},ro.prototype.has=function(Mn){return this.__data__.has(Mn)},Ja.prototype.clear=function(){this.__data__=new qi,this.size=0},Ja.prototype.delete=function(Mn){var Yn=this.__data__,jr=Yn.delete(Mn);return this.size=Yn.size,jr},Ja.prototype.get=function(Mn){return this.__data__.get(Mn)},Ja.prototype.has=function(Mn){return this.__data__.has(Mn)},Ja.prototype.set=function(Mn,Yn){var jr=this.__data__;if(jr instanceof qi){var ai=jr.__data__;if(!Xo||ai.length<199)return ai.push([Mn,Yn]),this.size=++jr.size,this;jr=this.__data__=new za(ai)}return jr.set(Mn,Yn),this.size=jr.size,this};var ju=Wl?function(Mn){return Mn==null?[]:(Mn=Object(Mn),function(Yn,jr){for(var ai=-1,ia=Yn==null?0:Yn.length,Mi=0,I=[];++ai<ia;){var y=Yn[ai];jr(y,ai,Yn)&&(I[Mi++]=y)}return I}(Wl(Mn),function(Yn){return Xs.call(Mn,Yn)}))}:function(){return[]},io=Ts;function Gu(Mn,Yn){return!!(Yn=Yn??Gt)&&(typeof Mn=="number"||ri.test(Mn))&&Mn>-1&&Mn%1==0&&Mn<Yn}function Zs(Mn){if(Mn!=null){try{return Ss.call(Mn)}catch{}try{return Mn+""}catch{}}return""}function Cs(Mn,Yn){return Mn===Yn||Mn!=Mn&&Yn!=Yn}(au&&io(new au(new ArrayBuffer(1)))!=ji||Xo&&io(new Xo)!=Ir||Uu&&io(Uu.resolve())!=ua||fe&&io(new fe)!=Vr||nt&&io(new nt)!=Wi)&&(io=function(Mn){var Yn=Ts(Mn),jr=Yn==Wr?Mn.constructor:void 0,ai=jr?Zs(jr):"";if(ai)switch(ai){case un:return ji;case kn:return Ir;case Kn:return ua;case Pr:return Vr;case oi:return Wi}return Yn});var Vu=ll(function(){return arguments}())?ll:function(Mn){return wo(Mn)&&bl.call(Mn,"callee")&&!Xs.call(Mn,"callee")},rs=Array.isArray,Cc=Lo||function(){return!1};function sc(Mn){if(!ds(Mn))return!1;var Yn=Ts(Mn);return Yn==Rr||Yn=="[object GeneratorFunction]"||Yn=="[object AsyncFunction]"||Yn=="[object Proxy]"}function pa(Mn){return typeof Mn=="number"&&Mn>-1&&Mn%1==0&&Mn<=Gt}function ds(Mn){var Yn=typeof Mn;return Mn!=null&&(Yn=="object"||Yn=="function")}function wo(Mn){return Mn!=null&&typeof Mn=="object"}var Cu=Ws?function(Mn){return function(Yn){return Mn(Yn)}}(Ws):function(Mn){return wo(Mn)&&pa(Mn.length)&&!!Jr[Ts(Mn)]};function wh(Mn){return(Yn=Mn)!=null&&pa(Yn.length)&&!sc(Yn)?zo(Mn):Ll(Mn);var Yn}ne.exports=function(Mn,Yn){return Ys(Mn,Yn)}})(la,la.exports);var Sa=r(la.exports);function _o(ne,we){return ne.length===we.length&&JSON.stringify(ne.map(function(et){return et}).sort())===JSON.stringify(we.map(function(et){return et}).sort())}var Ui={Polygon:De,LineString:Ee,Point:ve,MultiPolygon:ut,MultiLineString:ut,MultiPoint:ut},Pi=Object.freeze({__proto__:null,CommonSelectors:sr,constrainFeatureMovement:bn,createMidPoint:mt,createSupplementaryPoints:it,createVertex:He,doubleClickZoom:xt,euclideanDistance:Se,featuresAt:ae,getFeatureAtAndSetCursors:se,isClick:ye,isEventAtCoordinates:bi,isTap:Te,mapEventToBoundingBox:$,ModeHandler:n,moveFeatures:wr,sortFeatures:k,stringSetsAreEqual:_o,StringSet:Q,theme:Pt,toDenseArray:Ve}),Ta=function(ne,we){var et={options:ne=function(on){on===void 0&&(on={});var dn=qt(on);return on.controls||(dn.controls={}),on.displayControlsDefault===!1?dn.controls=qt(Ai,on.controls):dn.controls=qt(ra,on.controls),(dn=qt(_a,dn)).styles=Ka(dn.styles,"cold").concat(Ka(dn.styles,"hot")),dn}(ne)};we=function(on,dn){return dn.modes=D,dn.getFeatureIdsAt=function(xn){return ae.click({point:xn},null,on).map(function(cr){return cr.properties.id})},dn.getSelectedIds=function(){return on.store.getSelectedIds()},dn.getSelected=function(){return{type:M.FEATURE_COLLECTION,features:on.store.getSelectedIds().map(function(xn){return on.store.get(xn)}).map(function(xn){return xn.toGeoJSON()})}},dn.getSelectedPoints=function(){return{type:M.FEATURE_COLLECTION,features:on.store.getSelectedCoordinates().map(function(xn){return{type:M.FEATURE,properties:{},geometry:{type:M.POINT,coordinates:xn.coordinates}}})}},dn.set=function(xn){if(xn.type===void 0||xn.type!==M.FEATURE_COLLECTION||!Array.isArray(xn.features))throw new Error("Invalid FeatureCollection");var cr=on.store.createRenderBatch(),ur=on.store.getAllIds().slice(),Rr=dn.add(xn),Ir=new Q(Rr);return(ur=ur.filter(function(Nr){return!Ir.has(Nr)})).length&&dn.delete(ur),cr(),Rr},dn.add=function(xn){var cr=JSON.parse(JSON.stringify(rn(xn))).features.map(function(ur){if(ur.id=ur.id||me(),ur.geometry===null)throw new Error("Invalid geometry: null");if(on.store.get(ur.id)===void 0||on.store.get(ur.id).type!==ur.geometry.type){var Rr=Ui[ur.geometry.type];if(Rr===void 0)throw new Error("Invalid geometry type: "+ur.geometry.type+".");var Ir=new Rr(on,ur);on.store.add(Ir)}else{var Nr=on.store.get(ur.id);Nr.properties=ur.properties,Sa(Nr.properties,ur.properties)||on.store.featureChanged(Nr.id),Sa(Nr.getCoordinates(),ur.geometry.coordinates)||Nr.incomingCoords(ur.geometry.coordinates)}return ur.id});return on.store.render(),cr},dn.get=function(xn){var cr=on.store.get(xn);if(cr)return cr.toGeoJSON()},dn.getAll=function(){return{type:M.FEATURE_COLLECTION,features:on.store.getAll().map(function(xn){return xn.toGeoJSON()})}},dn.delete=function(xn){return on.store.delete(xn,{silent:!0}),dn.getMode()!==D.DIRECT_SELECT||on.store.getSelectedIds().length?on.store.render():on.events.changeMode(D.SIMPLE_SELECT,void 0,{silent:!0}),dn},dn.deleteAll=function(){return on.store.delete(on.store.getAllIds(),{silent:!0}),dn.getMode()===D.DIRECT_SELECT?on.events.changeMode(D.SIMPLE_SELECT,void 0,{silent:!0}):on.store.render(),dn},dn.changeMode=function(xn,cr){return cr===void 0&&(cr={}),xn===D.SIMPLE_SELECT&&dn.getMode()===D.SIMPLE_SELECT?(_o(cr.featureIds||[],on.store.getSelectedIds())||(on.store.setSelected(cr.featureIds,{silent:!0}),on.store.render()),dn):(xn===D.DIRECT_SELECT&&dn.getMode()===D.DIRECT_SELECT&&cr.featureId===on.store.getSelectedIds()[0]||on.events.changeMode(xn,cr,{silent:!0}),dn)},dn.getMode=function(){return on.events.getMode()},dn.trash=function(){return on.events.trash({silent:!0}),dn},dn.combineFeatures=function(){return on.events.combineFeatures({silent:!0}),dn},dn.uncombineFeatures=function(){return on.events.uncombineFeatures({silent:!0}),dn},dn.setFeatureProperty=function(xn,cr,ur){return on.store.setFeatureProperty(xn,cr,ur),dn},dn}(et,we),et.api=we;var Gt=Re(et);return we.onAdd=Gt.onAdd,we.onRemove=Gt.onRemove,we.types=E,we.options=ne,we};function to(ne){Ta(ne,this)}return to.modes=Qi,to.constants=W,to.lib=Pi,to})}(zT)),zT.exports}$me();const Wme=gg(ke.jsx("path",{d:"M15 16v1.26l-6-3v-3.17L11.7 8H16V2h-6v4.9L7.3 10H3v6h5l7 3.5V22h6v-6z"})),Xme=gg(ke.jsx("path",{d:"m2 9 4 12h12l4-12-10-7z"}));var of={},F_={},N5,yz;function eW(){if(yz)return N5;yz=1;var t=typeof fv=="object"&&fv&&fv.Object===Object&&fv;return N5=t,N5}var k5,_z;function yg(){if(_z)return k5;_z=1;var t=eW(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return k5=n,k5}var O5,xz;function rS(){if(xz)return O5;xz=1;var t=yg(),e=t.Symbol;return O5=e,O5}var F5,bz;function Yme(){if(bz)return F5;bz=1;var t=rS(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function o(s){var a=n.call(s,i),c=s[i];try{s[i]=void 0;var h=!0}catch{}var d=r.call(s);return h&&(a?s[i]=c:delete s[i]),d}return F5=o,F5}var B5,wz;function Zme(){if(wz)return B5;wz=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return B5=n,B5}var z5,Sz;function Ty(){if(Sz)return z5;Sz=1;var t=rS(),e=Yme(),n=Zme(),r="[object Null]",i="[object Undefined]",o=t?t.toStringTag:void 0;function s(a){return a==null?a===void 0?i:r:o&&o in Object(a)?e(a):n(a)}return z5=s,z5}var U5,Ez;function Mp(){if(Ez)return U5;Ez=1;var t=Array.isArray;return U5=t,U5}var j5,Tz;function Cm(){if(Tz)return j5;Tz=1;function t(e){return e!=null&&typeof e=="object"}return j5=t,j5}var G5,Cz;function Kme(){if(Cz)return G5;Cz=1;var t=Ty(),e=Mp(),n=Cm(),r="[object String]";function i(o){return typeof o=="string"||!e(o)&&n(o)&&t(o)==r}return G5=i,G5}var V5,Mz;function Jme(){if(Mz)return V5;Mz=1;function t(e){return function(n,r,i){for(var o=-1,s=Object(n),a=i(n),c=a.length;c--;){var h=a[e?c:++o];if(r(s[h],h,s)===!1)break}return n}}return V5=t,V5}var H5,Az;function Qme(){if(Az)return H5;Az=1;var t=Jme(),e=t();return H5=e,H5}var q5,Rz;function eve(){if(Rz)return q5;Rz=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return q5=t,q5}var $5,Pz;function tve(){if(Pz)return $5;Pz=1;var t=Ty(),e=Cm(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return $5=r,$5}var W5,Iz;function tW(){if(Iz)return W5;Iz=1;var t=tve(),e=Cm(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,o=t(function(){return arguments}())?t:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return W5=o,W5}var x2={exports:{}},X5,Dz;function nve(){if(Dz)return X5;Dz=1;function t(){return!1}return X5=t,X5}x2.exports;var Lz;function s4(){return Lz||(Lz=1,function(t,e){var n=yg(),r=nve(),i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,c=a?a.isBuffer:void 0,h=c||r;t.exports=h}(x2,x2.exports)),x2.exports}var Y5,Nz;function nW(){if(Nz)return Y5;Nz=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var o=typeof r;return i=i??t,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return Y5=n,Y5}var Z5,kz;function l4(){if(kz)return Z5;kz=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return Z5=e,Z5}var K5,Oz;function rve(){if(Oz)return K5;Oz=1;var t=Ty(),e=l4(),n=Cm(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",h="[object Map]",d="[object Number]",v="[object Object]",w="[object RegExp]",_="[object Set]",E="[object String]",M="[object WeakMap]",D="[object ArrayBuffer]",A="[object DataView]",F="[object Float32Array]",O="[object Float64Array]",N="[object Int8Array]",H="[object Int16Array]",G="[object Int32Array]",W="[object Uint8Array]",X="[object Uint8ClampedArray]",K="[object Uint16Array]",k="[object Uint32Array]",$={};$[F]=$[O]=$[N]=$[H]=$[G]=$[W]=$[X]=$[K]=$[k]=!0,$[r]=$[i]=$[D]=$[o]=$[A]=$[s]=$[a]=$[c]=$[h]=$[d]=$[v]=$[w]=$[_]=$[E]=$[M]=!1;function Q(ie){return n(ie)&&e(ie.length)&&!!$[t(ie)]}return K5=Q,K5}var J5,Fz;function u4(){if(Fz)return J5;Fz=1;function t(e){return function(n){return e(n)}}return J5=t,J5}var b2={exports:{}};b2.exports;var Bz;function c4(){return Bz||(Bz=1,function(t,e){var n=eW(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a}(b2,b2.exports)),b2.exports}var Q5,zz;function rW(){if(zz)return Q5;zz=1;var t=rve(),e=u4(),n=c4(),r=n&&n.isTypedArray,i=r?e(r):t;return Q5=i,Q5}var e3,Uz;function iW(){if(Uz)return e3;Uz=1;var t=eve(),e=tW(),n=Mp(),r=s4(),i=nW(),o=rW(),s=Object.prototype,a=s.hasOwnProperty;function c(h,d){var v=n(h),w=!v&&e(h),_=!v&&!w&&r(h),E=!v&&!w&&!_&&o(h),M=v||w||_||E,D=M?t(h.length,String):[],A=D.length;for(var F in h)(d||a.call(h,F))&&!(M&&(F=="length"||_&&(F=="offset"||F=="parent")||E&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||i(F,A)))&&D.push(F);return D}return e3=c,e3}var t3,jz;function h4(){if(jz)return t3;jz=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return t3=e,t3}var n3,Gz;function aW(){if(Gz)return n3;Gz=1;function t(e,n){return function(r){return e(n(r))}}return n3=t,n3}var r3,Vz;function ive(){if(Vz)return r3;Vz=1;var t=aW(),e=t(Object.keys,Object);return r3=e,r3}var i3,Hz;function ave(){if(Hz)return i3;Hz=1;var t=h4(),e=ive(),n=Object.prototype,r=n.hasOwnProperty;function i(o){if(!t(o))return e(o);var s=[];for(var a in Object(o))r.call(o,a)&&a!="constructor"&&s.push(a);return s}return i3=i,i3}var a3,qz;function zx(){if(qz)return a3;qz=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return a3=t,a3}var o3,$z;function oW(){if($z)return o3;$z=1;var t=Ty(),e=zx(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var c=t(a);return c==r||c==i||c==n||c==o}return o3=s,o3}var s3,Wz;function qM(){if(Wz)return s3;Wz=1;var t=oW(),e=l4();function n(r){return r!=null&&e(r.length)&&!t(r)}return s3=n,s3}var l3,Xz;function iS(){if(Xz)return l3;Xz=1;var t=iW(),e=ave(),n=qM();function r(i){return n(i)?t(i):e(i)}return l3=r,l3}var u3,Yz;function sW(){if(Yz)return u3;Yz=1;var t=Qme(),e=iS();function n(r,i){return r&&t(r,i,e)}return u3=n,u3}var c3,Zz;function lW(){if(Zz)return c3;Zz=1;function t(e){return e}return c3=t,c3}var h3,Kz;function ove(){if(Kz)return h3;Kz=1;var t=lW();function e(n){return typeof n=="function"?n:t}return h3=e,h3}var f3,Jz;function f4(){if(Jz)return f3;Jz=1;var t=sW(),e=ove();function n(r,i){return r&&t(r,e(i))}return f3=n,f3}var d3,Qz;function d4(){if(Qz)return d3;Qz=1;var t=aW(),e=t(Object.getPrototypeOf,Object);return d3=e,d3}var p3,e8;function sve(){if(e8)return p3;e8=1;var t=Ty(),e=d4(),n=Cm(),r="[object Object]",i=Function.prototype,o=Object.prototype,s=i.toString,a=o.hasOwnProperty,c=s.call(Object);function h(d){if(!n(d)||t(d)!=r)return!1;var v=e(d);if(v===null)return!0;var w=a.call(v,"constructor")&&v.constructor;return typeof w=="function"&&w instanceof w&&s.call(w)==c}return p3=h,p3}var g3,t8;function uW(){if(t8)return g3;t8=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o}return g3=t,g3}var m3,n8;function lve(){if(n8)return m3;n8=1;function t(){this.__data__=[],this.size=0}return m3=t,m3}var v3,r8;function p4(){if(r8)return v3;r8=1;function t(e,n){return e===n||e!==e&&n!==n}return v3=t,v3}var y3,i8;function $M(){if(i8)return y3;i8=1;var t=p4();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return y3=e,y3}var _3,a8;function uve(){if(a8)return _3;a8=1;var t=$M(),e=Array.prototype,n=e.splice;function r(i){var o=this.__data__,s=t(o,i);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():n.call(o,s,1),--this.size,!0}return _3=r,_3}var x3,o8;function cve(){if(o8)return x3;o8=1;var t=$M();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return x3=e,x3}var b3,s8;function hve(){if(s8)return b3;s8=1;var t=$M();function e(n){return t(this.__data__,n)>-1}return b3=e,b3}var w3,l8;function fve(){if(l8)return w3;l8=1;var t=$M();function e(n,r){var i=this.__data__,o=t(i,n);return o<0?(++this.size,i.push([n,r])):i[o][1]=r,this}return w3=e,w3}var S3,u8;function WM(){if(u8)return S3;u8=1;var t=lve(),e=uve(),n=cve(),r=hve(),i=fve();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,S3=o,S3}var E3,c8;function dve(){if(c8)return E3;c8=1;var t=WM();function e(){this.__data__=new t,this.size=0}return E3=e,E3}var T3,h8;function pve(){if(h8)return T3;h8=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return T3=t,T3}var C3,f8;function gve(){if(f8)return C3;f8=1;function t(e){return this.__data__.get(e)}return C3=t,C3}var M3,d8;function mve(){if(d8)return M3;d8=1;function t(e){return this.__data__.has(e)}return M3=t,M3}var A3,p8;function vve(){if(p8)return A3;p8=1;var t=yg(),e=t["__core-js_shared__"];return A3=e,A3}var R3,g8;function yve(){if(g8)return R3;g8=1;var t=vve(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return R3=n,R3}var P3,m8;function cW(){if(m8)return P3;m8=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return P3=n,P3}var I3,v8;function _ve(){if(v8)return I3;v8=1;var t=oW(),e=yve(),n=zx(),r=cW(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,c=s.toString,h=a.hasOwnProperty,d=RegExp("^"+c.call(h).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(w){if(!n(w)||e(w))return!1;var _=t(w)?d:o;return _.test(r(w))}return I3=v,I3}var D3,y8;function xve(){if(y8)return D3;y8=1;function t(e,n){return e==null?void 0:e[n]}return D3=t,D3}var L3,_8;function Cy(){if(_8)return L3;_8=1;var t=_ve(),e=xve();function n(r,i){var o=e(r,i);return t(o)?o:void 0}return L3=n,L3}var N3,x8;function g4(){if(x8)return N3;x8=1;var t=Cy(),e=yg(),n=t(e,"Map");return N3=n,N3}var k3,b8;function XM(){if(b8)return k3;b8=1;var t=Cy(),e=t(Object,"create");return k3=e,k3}var O3,w8;function bve(){if(w8)return O3;w8=1;var t=XM();function e(){this.__data__=t?t(null):{},this.size=0}return O3=e,O3}var F3,S8;function wve(){if(S8)return F3;S8=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return F3=t,F3}var B3,E8;function Sve(){if(E8)return B3;E8=1;var t=XM(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(o){var s=this.__data__;if(t){var a=s[o];return a===e?void 0:a}return r.call(s,o)?s[o]:void 0}return B3=i,B3}var z3,T8;function Eve(){if(T8)return z3;T8=1;var t=XM(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var o=this.__data__;return t?o[i]!==void 0:n.call(o,i)}return z3=r,z3}var U3,C8;function Tve(){if(C8)return U3;C8=1;var t=XM(),e="__lodash_hash_undefined__";function n(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=t&&i===void 0?e:i,this}return U3=n,U3}var j3,M8;function Cve(){if(M8)return j3;M8=1;var t=bve(),e=wve(),n=Sve(),r=Eve(),i=Tve();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,j3=o,j3}var G3,A8;function Mve(){if(A8)return G3;A8=1;var t=Cve(),e=WM(),n=g4();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return G3=r,G3}var V3,R8;function Ave(){if(R8)return V3;R8=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return V3=t,V3}var H3,P8;function YM(){if(P8)return H3;P8=1;var t=Ave();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return H3=e,H3}var q3,I8;function Rve(){if(I8)return q3;I8=1;var t=YM();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return q3=e,q3}var $3,D8;function Pve(){if(D8)return $3;D8=1;var t=YM();function e(n){return t(this,n).get(n)}return $3=e,$3}var W3,L8;function Ive(){if(L8)return W3;L8=1;var t=YM();function e(n){return t(this,n).has(n)}return W3=e,W3}var X3,N8;function Dve(){if(N8)return X3;N8=1;var t=YM();function e(n,r){var i=t(this,n),o=i.size;return i.set(n,r),this.size+=i.size==o?0:1,this}return X3=e,X3}var Y3,k8;function m4(){if(k8)return Y3;k8=1;var t=Mve(),e=Rve(),n=Pve(),r=Ive(),i=Dve();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,Y3=o,Y3}var Z3,O8;function Lve(){if(O8)return Z3;O8=1;var t=WM(),e=g4(),n=m4(),r=200;function i(o,s){var a=this.__data__;if(a instanceof t){var c=a.__data__;if(!e||c.length<r-1)return c.push([o,s]),this.size=++a.size,this;a=this.__data__=new n(c)}return a.set(o,s),this.size=a.size,this}return Z3=i,Z3}var K3,F8;function v4(){if(F8)return K3;F8=1;var t=WM(),e=dve(),n=pve(),r=gve(),i=mve(),o=Lve();function s(a){var c=this.__data__=new t(a);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=o,K3=s,K3}var J3,B8;function Nve(){if(B8)return J3;B8=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return J3=e,J3}var Q3,z8;function kve(){if(z8)return Q3;z8=1;function t(e){return this.__data__.has(e)}return Q3=t,Q3}var eR,U8;function Ove(){if(U8)return eR;U8=1;var t=m4(),e=Nve(),n=kve();function r(i){var o=-1,s=i==null?0:i.length;for(this.__data__=new t;++o<s;)this.add(i[o])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,eR=r,eR}var tR,j8;function Fve(){if(j8)return tR;j8=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return tR=t,tR}var nR,G8;function Bve(){if(G8)return nR;G8=1;function t(e,n){return e.has(n)}return nR=t,nR}var rR,V8;function hW(){if(V8)return rR;V8=1;var t=Ove(),e=Fve(),n=Bve(),r=1,i=2;function o(s,a,c,h,d,v){var w=c&r,_=s.length,E=a.length;if(_!=E&&!(w&&E>_))return!1;var M=v.get(s),D=v.get(a);if(M&&D)return M==a&&D==s;var A=-1,F=!0,O=c&i?new t:void 0;for(v.set(s,a),v.set(a,s);++A<_;){var N=s[A],H=a[A];if(h)var G=w?h(H,N,A,a,s,v):h(N,H,A,s,a,v);if(G!==void 0){if(G)continue;F=!1;break}if(O){if(!e(a,function(W,X){if(!n(O,X)&&(N===W||d(N,W,c,h,v)))return O.push(X)})){F=!1;break}}else if(!(N===H||d(N,H,c,h,v))){F=!1;break}}return v.delete(s),v.delete(a),F}return rR=o,rR}var iR,H8;function fW(){if(H8)return iR;H8=1;var t=yg(),e=t.Uint8Array;return iR=e,iR}var aR,q8;function zve(){if(q8)return aR;q8=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,o){r[++n]=[o,i]}),r}return aR=t,aR}var oR,$8;function Uve(){if($8)return oR;$8=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return oR=t,oR}var sR,W8;function jve(){if(W8)return sR;W8=1;var t=rS(),e=fW(),n=p4(),r=hW(),i=zve(),o=Uve(),s=1,a=2,c="[object Boolean]",h="[object Date]",d="[object Error]",v="[object Map]",w="[object Number]",_="[object RegExp]",E="[object Set]",M="[object String]",D="[object Symbol]",A="[object ArrayBuffer]",F="[object DataView]",O=t?t.prototype:void 0,N=O?O.valueOf:void 0;function H(G,W,X,K,k,$,Q){switch(X){case F:if(G.byteLength!=W.byteLength||G.byteOffset!=W.byteOffset)return!1;G=G.buffer,W=W.buffer;case A:return!(G.byteLength!=W.byteLength||!$(new e(G),new e(W)));case c:case h:case w:return n(+G,+W);case d:return G.name==W.name&&G.message==W.message;case _:case M:return G==W+"";case v:var ie=i;case E:var ae=K&s;if(ie||(ie=o),G.size!=W.size&&!ae)return!1;var ce=Q.get(G);if(ce)return ce==W;K|=a,Q.set(G,W);var se=r(ie(G),ie(W),K,k,$,Q);return Q.delete(G),se;case D:if(N)return N.call(G)==N.call(W)}return!1}return sR=H,sR}var lR,X8;function dW(){if(X8)return lR;X8=1;function t(e,n){for(var r=-1,i=n.length,o=e.length;++r<i;)e[o+r]=n[r];return e}return lR=t,lR}var uR,Y8;function pW(){if(Y8)return uR;Y8=1;var t=dW(),e=Mp();function n(r,i,o){var s=i(r);return e(r)?s:t(s,o(r))}return uR=n,uR}var cR,Z8;function Gve(){if(Z8)return cR;Z8=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=0,s=[];++r<i;){var a=e[r];n(a,r,e)&&(s[o++]=a)}return s}return cR=t,cR}var hR,K8;function gW(){if(K8)return hR;K8=1;function t(){return[]}return hR=t,hR}var fR,J8;function y4(){if(J8)return fR;J8=1;var t=Gve(),e=gW(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(a){return r.call(s,a)}))}:e;return fR=o,fR}var dR,Q8;function mW(){if(Q8)return dR;Q8=1;var t=pW(),e=y4(),n=iS();function r(i){return t(i,n,e)}return dR=r,dR}var pR,eU;function Vve(){if(eU)return pR;eU=1;var t=mW(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(o,s,a,c,h,d){var v=a&e,w=t(o),_=w.length,E=t(s),M=E.length;if(_!=M&&!v)return!1;for(var D=_;D--;){var A=w[D];if(!(v?A in s:r.call(s,A)))return!1}var F=d.get(o),O=d.get(s);if(F&&O)return F==s&&O==o;var N=!0;d.set(o,s),d.set(s,o);for(var H=v;++D<_;){A=w[D];var G=o[A],W=s[A];if(c)var X=v?c(W,G,A,s,o,d):c(G,W,A,o,s,d);if(!(X===void 0?G===W||h(G,W,a,c,d):X)){N=!1;break}H||(H=A=="constructor")}if(N&&!H){var K=o.constructor,k=s.constructor;K!=k&&"constructor"in o&&"constructor"in s&&!(typeof K=="function"&&K instanceof K&&typeof k=="function"&&k instanceof k)&&(N=!1)}return d.delete(o),d.delete(s),N}return pR=i,pR}var gR,tU;function Hve(){if(tU)return gR;tU=1;var t=Cy(),e=yg(),n=t(e,"DataView");return gR=n,gR}var mR,nU;function qve(){if(nU)return mR;nU=1;var t=Cy(),e=yg(),n=t(e,"Promise");return mR=n,mR}var vR,rU;function $ve(){if(rU)return vR;rU=1;var t=Cy(),e=yg(),n=t(e,"Set");return vR=n,vR}var yR,iU;function Wve(){if(iU)return yR;iU=1;var t=Cy(),e=yg(),n=t(e,"WeakMap");return yR=n,yR}var _R,aU;function ZM(){if(aU)return _R;aU=1;var t=Hve(),e=g4(),n=qve(),r=$ve(),i=Wve(),o=Ty(),s=cW(),a="[object Map]",c="[object Object]",h="[object Promise]",d="[object Set]",v="[object WeakMap]",w="[object DataView]",_=s(t),E=s(e),M=s(n),D=s(r),A=s(i),F=o;return(t&&F(new t(new ArrayBuffer(1)))!=w||e&&F(new e)!=a||n&&F(n.resolve())!=h||r&&F(new r)!=d||i&&F(new i)!=v)&&(F=function(O){var N=o(O),H=N==c?O.constructor:void 0,G=H?s(H):"";if(G)switch(G){case _:return w;case E:return a;case M:return h;case D:return d;case A:return v}return N}),_R=F,_R}var xR,oU;function Xve(){if(oU)return xR;oU=1;var t=v4(),e=hW(),n=jve(),r=Vve(),i=ZM(),o=Mp(),s=s4(),a=rW(),c=1,h="[object Arguments]",d="[object Array]",v="[object Object]",w=Object.prototype,_=w.hasOwnProperty;function E(M,D,A,F,O,N){var H=o(M),G=o(D),W=H?d:i(M),X=G?d:i(D);W=W==h?v:W,X=X==h?v:X;var K=W==v,k=X==v,$=W==X;if($&&s(M)){if(!s(D))return!1;H=!0,K=!1}if($&&!K)return N||(N=new t),H||a(M)?e(M,D,A,F,O,N):n(M,D,W,A,F,O,N);if(!(A&c)){var Q=K&&_.call(M,"__wrapped__"),ie=k&&_.call(D,"__wrapped__");if(Q||ie){var ae=Q?M.value():M,ce=ie?D.value():D;return N||(N=new t),O(ae,ce,A,F,N)}}return $?(N||(N=new t),r(M,D,A,F,O,N)):!1}return xR=E,xR}var bR,sU;function vW(){if(sU)return bR;sU=1;var t=Xve(),e=Cm();function n(r,i,o,s,a){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,o,s,n,a)}return bR=n,bR}var wR,lU;function Yve(){if(lU)return wR;lU=1;var t=v4(),e=vW(),n=1,r=2;function i(o,s,a,c){var h=a.length,d=h,v=!c;if(o==null)return!d;for(o=Object(o);h--;){var w=a[h];if(v&&w[2]?w[1]!==o[w[0]]:!(w[0]in o))return!1}for(;++h<d;){w=a[h];var _=w[0],E=o[_],M=w[1];if(v&&w[2]){if(E===void 0&&!(_ in o))return!1}else{var D=new t;if(c)var A=c(E,M,_,o,s,D);if(!(A===void 0?e(M,E,n|r,c,D):A))return!1}}return!0}return wR=i,wR}var SR,uU;function yW(){if(uU)return SR;uU=1;var t=zx();function e(n){return n===n&&!t(n)}return SR=e,SR}var ER,cU;function Zve(){if(cU)return ER;cU=1;var t=yW(),e=iS();function n(r){for(var i=e(r),o=i.length;o--;){var s=i[o],a=r[s];i[o]=[s,a,t(a)]}return i}return ER=n,ER}var TR,hU;function _W(){if(hU)return TR;hU=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return TR=t,TR}var CR,fU;function Kve(){if(fU)return CR;fU=1;var t=Yve(),e=Zve(),n=_W();function r(i){var o=e(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(s){return s===i||t(s,i,o)}}return CR=r,CR}var MR,dU;function _4(){if(dU)return MR;dU=1;var t=Ty(),e=Cm(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return MR=r,MR}var AR,pU;function x4(){if(pU)return AR;pU=1;var t=Mp(),e=_4(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){if(t(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:r.test(o)||!n.test(o)||s!=null&&o in Object(s)}return AR=i,AR}var RR,gU;function Jve(){if(gU)return RR;gU=1;var t=m4(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var s=arguments,a=i?i.apply(this,s):s[0],c=o.cache;if(c.has(a))return c.get(a);var h=r.apply(this,s);return o.cache=c.set(a,h)||c,h};return o.cache=new(n.Cache||t),o}return n.Cache=t,RR=n,RR}var PR,mU;function Qve(){if(mU)return PR;mU=1;var t=Jve(),e=500;function n(r){var i=t(r,function(s){return o.size===e&&o.clear(),s}),o=i.cache;return i}return PR=n,PR}var IR,vU;function e0e(){if(vU)return IR;vU=1;var t=Qve(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(s,a,c,h){o.push(c?h.replace(n,"$1"):a||s)}),o});return IR=r,IR}var DR,yU;function t0e(){if(yU)return DR;yU=1;var t=rS(),e=uW(),n=Mp(),r=_4(),i=t?t.prototype:void 0,o=i?i.toString:void 0;function s(a){if(typeof a=="string")return a;if(n(a))return e(a,s)+"";if(r(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return DR=s,DR}var LR,_U;function n0e(){if(_U)return LR;_U=1;var t=t0e();function e(n){return n==null?"":t(n)}return LR=e,LR}var NR,xU;function xW(){if(xU)return NR;xU=1;var t=Mp(),e=x4(),n=e0e(),r=n0e();function i(o,s){return t(o)?o:e(o,s)?[o]:n(r(o))}return NR=i,NR}var kR,bU;function KM(){if(bU)return kR;bU=1;var t=_4();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return kR=e,kR}var OR,wU;function bW(){if(wU)return OR;wU=1;var t=xW(),e=KM();function n(r,i){i=t(i,r);for(var o=0,s=i.length;r!=null&&o<s;)r=r[e(i[o++])];return o&&o==s?r:void 0}return OR=n,OR}var FR,SU;function r0e(){if(SU)return FR;SU=1;var t=bW();function e(n,r,i){var o=n==null?void 0:t(n,r);return o===void 0?i:o}return FR=e,FR}var BR,EU;function i0e(){if(EU)return BR;EU=1;function t(e,n){return e!=null&&n in Object(e)}return BR=t,BR}var zR,TU;function a0e(){if(TU)return zR;TU=1;var t=xW(),e=tW(),n=Mp(),r=nW(),i=l4(),o=KM();function s(a,c,h){c=t(c,a);for(var d=-1,v=c.length,w=!1;++d<v;){var _=o(c[d]);if(!(w=a!=null&&h(a,_)))break;a=a[_]}return w||++d!=v?w:(v=a==null?0:a.length,!!v&&i(v)&&r(_,v)&&(n(a)||e(a)))}return zR=s,zR}var UR,CU;function o0e(){if(CU)return UR;CU=1;var t=i0e(),e=a0e();function n(r,i){return r!=null&&e(r,i,t)}return UR=n,UR}var jR,MU;function s0e(){if(MU)return jR;MU=1;var t=vW(),e=r0e(),n=o0e(),r=x4(),i=yW(),o=_W(),s=KM(),a=1,c=2;function h(d,v){return r(d)&&i(v)?o(s(d),v):function(w){var _=e(w,d);return _===void 0&&_===v?n(w,d):t(v,_,a|c)}}return jR=h,jR}var GR,AU;function l0e(){if(AU)return GR;AU=1;function t(e){return function(n){return n==null?void 0:n[e]}}return GR=t,GR}var VR,RU;function u0e(){if(RU)return VR;RU=1;var t=bW();function e(n){return function(r){return t(r,n)}}return VR=e,VR}var HR,PU;function c0e(){if(PU)return HR;PU=1;var t=l0e(),e=u0e(),n=x4(),r=KM();function i(o){return n(o)?t(r(o)):e(o)}return HR=i,HR}var qR,IU;function h0e(){if(IU)return qR;IU=1;var t=Kve(),e=s0e(),n=lW(),r=Mp(),i=c0e();function o(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?e(s[0],s[1]):t(s):i(s)}return qR=o,qR}var $R,DU;function f0e(){if(DU)return $R;DU=1;var t=qM();function e(n,r){return function(i,o){if(i==null)return i;if(!t(i))return n(i,o);for(var s=i.length,a=r?s:-1,c=Object(i);(r?a--:++a<s)&&o(c[a],a,c)!==!1;);return i}}return $R=e,$R}var WR,LU;function d0e(){if(LU)return WR;LU=1;var t=sW(),e=f0e(),n=e(t);return WR=n,WR}var XR,NU;function p0e(){if(NU)return XR;NU=1;var t=d0e(),e=qM();function n(r,i){var o=-1,s=e(r)?Array(r.length):[];return t(r,function(a,c,h){s[++o]=i(a,c,h)}),s}return XR=n,XR}var YR,kU;function g0e(){if(kU)return YR;kU=1;var t=uW(),e=h0e(),n=p0e(),r=Mp();function i(o,s){var a=r(o)?t:n;return a(o,e(s,3))}return YR=i,YR}var OU;function m0e(){if(OU)return F_;OU=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.flattenNames=void 0;var t=Kme(),e=c(t),n=f4(),r=c(n),i=sve(),o=c(i),s=g0e(),a=c(s);function c(d){return d&&d.__esModule?d:{default:d}}var h=F_.flattenNames=function d(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=[];return(0,a.default)(v,function(_){Array.isArray(_)?d(_).map(function(E){return w.push(E)}):(0,o.default)(_)?(0,r.default)(_,function(E,M){E===!0&&w.push(M),w.push(M+"-"+E)}):(0,e.default)(_)&&w.push(_)}),w};return F_.default=h,F_}var B_={},ZR,FU;function v0e(){if(FU)return ZR;FU=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return ZR=t,ZR}var KR,BU;function y0e(){if(BU)return KR;BU=1;var t=Cy(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return KR=e,KR}var JR,zU;function wW(){if(zU)return JR;zU=1;var t=y0e();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return JR=e,JR}var QR,UU;function SW(){if(UU)return QR;UU=1;var t=wW(),e=p4(),n=Object.prototype,r=n.hasOwnProperty;function i(o,s,a){var c=o[s];(!(r.call(o,s)&&e(c,a))||a===void 0&&!(s in o))&&t(o,s,a)}return QR=i,QR}var eP,jU;function JM(){if(jU)return eP;jU=1;var t=SW(),e=wW();function n(r,i,o,s){var a=!o;o||(o={});for(var c=-1,h=i.length;++c<h;){var d=i[c],v=s?s(o[d],r[d],d,o,r):void 0;v===void 0&&(v=r[d]),a?e(o,d,v):t(o,d,v)}return o}return eP=n,eP}var tP,GU;function _0e(){if(GU)return tP;GU=1;var t=JM(),e=iS();function n(r,i){return r&&t(i,e(i),r)}return tP=n,tP}var nP,VU;function x0e(){if(VU)return nP;VU=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return nP=t,nP}var rP,HU;function b0e(){if(HU)return rP;HU=1;var t=zx(),e=h4(),n=x0e(),r=Object.prototype,i=r.hasOwnProperty;function o(s){if(!t(s))return n(s);var a=e(s),c=[];for(var h in s)h=="constructor"&&(a||!i.call(s,h))||c.push(h);return c}return rP=o,rP}var iP,qU;function b4(){if(qU)return iP;qU=1;var t=iW(),e=b0e(),n=qM();function r(i){return n(i)?t(i,!0):e(i)}return iP=r,iP}var aP,$U;function w0e(){if($U)return aP;$U=1;var t=JM(),e=b4();function n(r,i){return r&&t(i,e(i),r)}return aP=n,aP}var w2={exports:{}};w2.exports;var WU;function S0e(){return WU||(WU=1,function(t,e){var n=yg(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(h,d){if(d)return h.slice();var v=h.length,w=a?a(v):new h.constructor(v);return h.copy(w),w}t.exports=c}(w2,w2.exports)),w2.exports}var oP,XU;function E0e(){if(XU)return oP;XU=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return oP=t,oP}var sP,YU;function T0e(){if(YU)return sP;YU=1;var t=JM(),e=y4();function n(r,i){return t(r,e(r),i)}return sP=n,sP}var lP,ZU;function EW(){if(ZU)return lP;ZU=1;var t=dW(),e=d4(),n=y4(),r=gW(),i=Object.getOwnPropertySymbols,o=i?function(s){for(var a=[];s;)t(a,n(s)),s=e(s);return a}:r;return lP=o,lP}var uP,KU;function C0e(){if(KU)return uP;KU=1;var t=JM(),e=EW();function n(r,i){return t(r,e(r),i)}return uP=n,uP}var cP,JU;function M0e(){if(JU)return cP;JU=1;var t=pW(),e=EW(),n=b4();function r(i){return t(i,n,e)}return cP=r,cP}var hP,QU;function A0e(){if(QU)return hP;QU=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,o=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return hP=n,hP}var fP,e7;function w4(){if(e7)return fP;e7=1;var t=fW();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return fP=e,fP}var dP,t7;function R0e(){if(t7)return dP;t7=1;var t=w4();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return dP=e,dP}var pP,n7;function P0e(){if(n7)return pP;n7=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return pP=e,pP}var gP,r7;function I0e(){if(r7)return gP;r7=1;var t=rS(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return gP=r,gP}var mP,i7;function D0e(){if(i7)return mP;i7=1;var t=w4();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return mP=e,mP}var vP,a7;function L0e(){if(a7)return vP;a7=1;var t=w4(),e=R0e(),n=P0e(),r=I0e(),i=D0e(),o="[object Boolean]",s="[object Date]",a="[object Map]",c="[object Number]",h="[object RegExp]",d="[object Set]",v="[object String]",w="[object Symbol]",_="[object ArrayBuffer]",E="[object DataView]",M="[object Float32Array]",D="[object Float64Array]",A="[object Int8Array]",F="[object Int16Array]",O="[object Int32Array]",N="[object Uint8Array]",H="[object Uint8ClampedArray]",G="[object Uint16Array]",W="[object Uint32Array]";function X(K,k,$){var Q=K.constructor;switch(k){case _:return t(K);case o:case s:return new Q(+K);case E:return e(K,$);case M:case D:case A:case F:case O:case N:case H:case G:case W:return i(K,$);case a:return new Q;case c:case v:return new Q(K);case h:return n(K);case d:return new Q;case w:return r(K)}}return vP=X,vP}var yP,o7;function N0e(){if(o7)return yP;o7=1;var t=zx(),e=Object.create,n=function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var o=new r;return r.prototype=void 0,o}}();return yP=n,yP}var _P,s7;function k0e(){if(s7)return _P;s7=1;var t=N0e(),e=d4(),n=h4();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return _P=r,_P}var xP,l7;function O0e(){if(l7)return xP;l7=1;var t=ZM(),e=Cm(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return xP=r,xP}var bP,u7;function F0e(){if(u7)return bP;u7=1;var t=O0e(),e=u4(),n=c4(),r=n&&n.isMap,i=r?e(r):t;return bP=i,bP}var wP,c7;function B0e(){if(c7)return wP;c7=1;var t=ZM(),e=Cm(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return wP=r,wP}var SP,h7;function z0e(){if(h7)return SP;h7=1;var t=B0e(),e=u4(),n=c4(),r=n&&n.isSet,i=r?e(r):t;return SP=i,SP}var EP,f7;function U0e(){if(f7)return EP;f7=1;var t=v4(),e=v0e(),n=SW(),r=_0e(),i=w0e(),o=S0e(),s=E0e(),a=T0e(),c=C0e(),h=mW(),d=M0e(),v=ZM(),w=A0e(),_=L0e(),E=k0e(),M=Mp(),D=s4(),A=F0e(),F=zx(),O=z0e(),N=iS(),H=b4(),G=1,W=2,X=4,K="[object Arguments]",k="[object Array]",$="[object Boolean]",Q="[object Date]",ie="[object Error]",ae="[object Function]",ce="[object GeneratorFunction]",se="[object Map]",Se="[object Number]",ye="[object Object]",Te="[object RegExp]",pe="[object Set]",Ie="[object String]",me="[object Symbol]",xe="[object WeakMap]",ve="[object ArrayBuffer]",Ee="[object DataView]",De="[object Float32Array]",We="[object Float64Array]",Ae="[object Int8Array]",ut="[object Int16Array]",pt="[object Int32Array]",st="[object Uint8Array]",Ce="[object Uint8ClampedArray]",It="[object Uint16Array]",Ve="[object Uint32Array]",yt={};yt[K]=yt[k]=yt[ve]=yt[Ee]=yt[$]=yt[Q]=yt[De]=yt[We]=yt[Ae]=yt[ut]=yt[pt]=yt[se]=yt[Se]=yt[ye]=yt[Te]=yt[pe]=yt[Ie]=yt[me]=yt[st]=yt[Ce]=yt[It]=yt[Ve]=!0,yt[ie]=yt[ae]=yt[xe]=!1;function Ze(wt,Ut,ht,qt,Ye,Re){var Pt,Dt=Ut&G,At=Ut&W,Bt=Ut&X;if(ht&&(Pt=Ye?ht(wt,qt,Ye,Re):ht(wt)),Pt!==void 0)return Pt;if(!F(wt))return wt;var gn=M(wt);if(gn){if(Pt=w(wt),!Dt)return s(wt,Pt)}else{var Zt=v(wt),cn=Zt==ae||Zt==ce;if(D(wt))return o(wt,Dt);if(Zt==ye||Zt==K||cn&&!Ye){if(Pt=At||cn?{}:E(wt),!Dt)return At?c(wt,i(Pt,wt)):a(wt,r(Pt,wt))}else{if(!yt[Zt])return Ye?wt:{};Pt=_(wt,Zt,Dt)}}Re||(Re=new t);var $t=Re.get(wt);if($t)return $t;Re.set(wt,Pt),O(wt)?wt.forEach(function(Dn){Pt.add(Ze(Dn,Ut,ht,Dn,wt,Re))}):A(wt)&&wt.forEach(function(Dn,sr){Pt.set(sr,Ze(Dn,Ut,ht,sr,wt,Re))});var Et=Bt?At?d:h:At?H:N,qn=gn?void 0:Et(wt);return e(qn||wt,function(Dn,sr){qn&&(sr=Dn,Dn=wt[sr]),n(Pt,sr,Ze(Dn,Ut,ht,sr,wt,Re))}),Pt}return EP=Ze,EP}var TP,d7;function j0e(){if(d7)return TP;d7=1;var t=U0e(),e=1,n=4;function r(i){return t(i,e|n)}return TP=r,TP}var p7;function G0e(){if(p7)return B_;p7=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.mergeClasses=void 0;var t=f4(),e=o(t),n=j0e(),r=o(n),i=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(a[d]=h[d])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var s=B_.mergeClasses=function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],d=c.default&&(0,r.default)(c.default)||{};return h.map(function(v){var w=c[v];return w&&(0,e.default)(w,function(_,E){d[E]||(d[E]={}),d[E]=i({},d[E],w[E])}),v}),d};return B_.default=s,B_}var z_={},g7;function V0e(){if(g7)return z_;g7=1,Object.defineProperty(z_,"__esModule",{value:!0}),z_.autoprefix=void 0;var t=f4(),e=r(t),n=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s};function r(s){return s&&s.__esModule?s:{default:s}}var i={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var h=c[a];return h||{extend:a}}},o=z_.autoprefix=function(a){var c={};return(0,e.default)(a,function(h,d){var v={};(0,e.default)(h,function(w,_){var E=i[_];E?v=n({},v,E(w)):v[_]=w}),c[d]=v}),c};return z_.default=o,z_}var U_={},m7;function H0e(){if(m7)return U_;m7=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.hover=void 0;var t=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var d=arguments[h];for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(c[v]=d[v])}return c},e=yy(),n=r(e);function r(c){return c&&c.__esModule?c:{default:c}}function i(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=U_.hover=function(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(v){s(w,v);function w(){var _,E,M,D;i(this,w);for(var A=arguments.length,F=Array(A),O=0;O<A;O++)F[O]=arguments[O];return D=(E=(M=o(this,(_=w.__proto__||Object.getPrototypeOf(w)).call.apply(_,[this].concat(F))),M),M.state={hover:!1},M.handleMouseOver=function(){return M.setState({hover:!0})},M.handleMouseOut=function(){return M.setState({hover:!1})},M.render=function(){return n.default.createElement(d,{onMouseOver:M.handleMouseOver,onMouseOut:M.handleMouseOut},n.default.createElement(h,t({},M.props,M.state)))},E),o(M,D)}return w}(n.default.Component)};return U_.default=a,U_}var j_={},v7;function q0e(){if(v7)return j_;v7=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.active=void 0;var t=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var d=arguments[h];for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(c[v]=d[v])}return c},e=yy(),n=r(e);function r(c){return c&&c.__esModule?c:{default:c}}function i(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=j_.active=function(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(v){s(w,v);function w(){var _,E,M,D;i(this,w);for(var A=arguments.length,F=Array(A),O=0;O<A;O++)F[O]=arguments[O];return D=(E=(M=o(this,(_=w.__proto__||Object.getPrototypeOf(w)).call.apply(_,[this].concat(F))),M),M.state={active:!1},M.handleMouseDown=function(){return M.setState({active:!0})},M.handleMouseUp=function(){return M.setState({active:!1})},M.render=function(){return n.default.createElement(d,{onMouseDown:M.handleMouseDown,onMouseUp:M.handleMouseUp},n.default.createElement(h,t({},M.props,M.state)))},E),o(M,D)}return w}(n.default.Component)};return j_.default=a,j_}var kE={},y7;function $0e(){if(y7)return kE;y7=1,Object.defineProperty(kE,"__esModule",{value:!0});var t=function(n,r){var i={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[a]=c};return n===0&&o("first-child"),n===r-1&&o("last-child"),(n===0||n%2===0)&&o("even"),Math.abs(n%2)===1&&o("odd"),o("nth-child",n),i};return kE.default=t,kE}var _7;function W0e(){if(_7)return of;_7=1,Object.defineProperty(of,"__esModule",{value:!0}),of.ReactCSS=of.loop=of.handleActive=of.handleHover=of.hover=void 0;var t=m0e(),e=w(t),n=G0e(),r=w(n),i=V0e(),o=w(i),s=H0e(),a=w(s),c=q0e(),h=w(c),d=$0e(),v=w(d);function w(E){return E&&E.__esModule?E:{default:E}}of.hover=a.default,of.handleHover=a.default,of.handleActive=h.default,of.loop=v.default;var _=of.ReactCSS=function(M){for(var D=arguments.length,A=Array(D>1?D-1:0),F=1;F<D;F++)A[F-1]=arguments[F];var O=(0,e.default)(A),N=(0,r.default)(M,O);return(0,o.default)(N)};return of.default=_,of}var S4=W0e();const Aa=vy(S4);var X0e=function(e,n,r,i,o){var s=o.clientWidth,a=o.clientHeight,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,h=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,d=c-(o.getBoundingClientRect().left+window.pageXOffset),v=h-(o.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var w=void 0;if(v<0?w=0:v>a?w=1:w=Math.round(v*100/a)/100,n.a!==w)return{h:n.h,s:n.s,l:n.l,a:w,source:"rgb"}}else{var _=void 0;if(d<0?_=0:d>s?_=1:_=Math.round(d*100/s)/100,i!==_)return{h:n.h,s:n.s,l:n.l,a:_,source:"rgb"}}return null},CP={},Y0e=function(e,n,r,i){if(typeof document>"u"&&!i)return null;var o=i?new i:document.createElement("canvas");o.width=r*2,o.height=r*2;var s=o.getContext("2d");return s?(s.fillStyle=e,s.fillRect(0,0,o.width,o.height),s.fillStyle=n,s.fillRect(0,0,r,r),s.translate(r,r),s.fillRect(0,0,r,r),o.toDataURL()):null},Z0e=function(e,n,r,i){var o=e+"-"+n+"-"+r+(i?"-server":"");if(CP[o])return CP[o];var s=Y0e(e,n,r,i);return CP[o]=s,s},x7=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ux=function(e){var n=e.white,r=e.grey,i=e.size,o=e.renderers,s=e.borderRadius,a=e.boxShadow,c=e.children,h=Aa({default:{grid:{borderRadius:s,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+Z0e(n,r,i,o.canvas)+") center left"}}});return Be.isValidElement(c)?zt.cloneElement(c,x7({},c.props,{style:x7({},c.props.style,h.grid)})):zt.createElement("div",{style:h.grid})};Ux.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var K0e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J0e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Q0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function eye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var E4=function(t){eye(e,t);function e(){var n,r,i,o;Q0e(this,e);for(var s=arguments.length,a=Array(s),c=0;c<s;c++)a[c]=arguments[c];return o=(r=(i=b7(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),i),i.handleChange=function(h){var d=X0e(h,i.props.hsl,i.props.direction,i.props.a,i.container);d&&typeof i.props.onChange=="function"&&i.props.onChange(d,h)},i.handleMouseDown=function(h){i.handleChange(h),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),b7(i,o)}return J0e(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,o=Aa({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:K0e({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return zt.createElement("div",{style:o.alpha},zt.createElement("div",{style:o.checkboard},zt.createElement(Ux,{renderers:this.props.renderers})),zt.createElement("div",{style:o.gradient}),zt.createElement("div",{style:o.container,ref:function(a){return r.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},zt.createElement("div",{style:o.pointer},this.props.pointer?zt.createElement(this.props.pointer,this.props):zt.createElement("div",{style:o.slider}))))}}]),e}(Be.PureComponent||Be.Component),tye=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function nye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iye(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function aye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var oye=1,TW=38,sye=40,lye=[TW,sye],uye=function(e){return lye.indexOf(e)>-1},cye=function(e){return Number(String(e).replace(/%/g,""))},hye=1,Ao=function(t){aye(e,t);function e(n){rye(this,e);var r=iye(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var o=cye(i.target.value);if(!isNaN(o)&&uye(i.keyCode)){var s=r.getArrowOffset(),a=i.keyCode===TW?o+s:o-s;r.setUpdatedValue(a,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var o=Math.round(r.props.value+i.movementX);o>=0&&o<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(o),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},r.inputId="rc-editable-input-"+hye++,r}return tye(e,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return nye({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||oye}},{key:"setUpdatedValue",value:function(r,i){var o=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(o,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=Aa({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return zt.createElement("div",{style:i.wrap},zt.createElement("input",{id:this.inputId,style:i.input,ref:function(s){return r.input=s},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?zt.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(Be.PureComponent||Be.Component),fye=function(e,n,r,i){var o=i.clientWidth,s=i.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(i.getBoundingClientRect().left+window.pageXOffset),d=c-(i.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var v=void 0;if(d<0)v=359;else if(d>s)v=0;else{var w=-(d*100/s)+100;v=360*w/100}if(r.h!==v)return{h:v,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var _=void 0;if(h<0)_=0;else if(h>o)_=359;else{var E=h*100/o;_=360*E/100}if(r.h!==_)return{h:_,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},dye=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function pye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function gye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var jx=function(t){gye(e,t);function e(){var n,r,i,o;pye(this,e);for(var s=arguments.length,a=Array(s),c=0;c<s;c++)a[c]=arguments[c];return o=(r=(i=w7(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),i),i.handleChange=function(h){var d=fye(h,i.props.direction,i.props.hsl,i.container);d&&typeof i.props.onChange=="function"&&i.props.onChange(d,h)},i.handleMouseDown=function(h){i.handleChange(h),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),w7(i,o)}return dye(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,o=i===void 0?"horizontal":i,s=Aa({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:o==="vertical"});return zt.createElement("div",{style:s.hue},zt.createElement("div",{className:"hue-"+o,style:s.container,ref:function(c){return r.container=c},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},zt.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),zt.createElement("div",{style:s.pointer},this.props.pointer?zt.createElement(this.props.pointer,this.props):zt.createElement("div",{style:s.slider}))))}}]),e}(Be.PureComponent||Be.Component);function mye(){this.__data__=[],this.size=0}function aS(t,e){return t===e||t!==t&&e!==e}function QM(t,e){for(var n=t.length;n--;)if(aS(t[n][0],e))return n;return-1}var vye=Array.prototype,yye=vye.splice;function _ye(t){var e=this.__data__,n=QM(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():yye.call(e,n,1),--this.size,!0}function xye(t){var e=this.__data__,n=QM(e,t);return n<0?void 0:e[n][1]}function bye(t){return QM(this.__data__,t)>-1}function wye(t,e){var n=this.__data__,r=QM(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Mm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Mm.prototype.clear=mye;Mm.prototype.delete=_ye;Mm.prototype.get=xye;Mm.prototype.has=bye;Mm.prototype.set=wye;function Sye(){this.__data__=new Mm,this.size=0}function Eye(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Tye(t){return this.__data__.get(t)}function Cye(t){return this.__data__.has(t)}var CW=typeof global=="object"&&global&&global.Object===Object&&global,Mye=typeof self=="object"&&self&&self.Object===Object&&self,Ap=CW||Mye||Function("return this")(),Lv=Ap.Symbol,MW=Object.prototype,Aye=MW.hasOwnProperty,Rye=MW.toString,Kb=Lv?Lv.toStringTag:void 0;function Pye(t){var e=Aye.call(t,Kb),n=t[Kb];try{t[Kb]=void 0;var r=!0}catch{}var i=Rye.call(t);return r&&(e?t[Kb]=n:delete t[Kb]),i}var Iye=Object.prototype,Dye=Iye.toString;function Lye(t){return Dye.call(t)}var Nye="[object Null]",kye="[object Undefined]",S7=Lv?Lv.toStringTag:void 0;function My(t){return t==null?t===void 0?kye:Nye:S7&&S7 in Object(t)?Pye(t):Lye(t)}function Nd(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Oye="[object AsyncFunction]",Fye="[object Function]",Bye="[object GeneratorFunction]",zye="[object Proxy]";function T4(t){if(!Nd(t))return!1;var e=My(t);return e==Fye||e==Bye||e==Oye||e==zye}var MP=Ap["__core-js_shared__"],E7=function(){var t=/[^.]+$/.exec(MP&&MP.keys&&MP.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Uye(t){return!!E7&&E7 in t}var jye=Function.prototype,Gye=jye.toString;function Ay(t){if(t!=null){try{return Gye.call(t)}catch{}try{return t+""}catch{}}return""}var Vye=/[\\^$.*+?()[\]{}|]/g,Hye=/^\[object .+?Constructor\]$/,qye=Function.prototype,$ye=Object.prototype,Wye=qye.toString,Xye=$ye.hasOwnProperty,Yye=RegExp("^"+Wye.call(Xye).replace(Vye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Zye(t){if(!Nd(t)||Uye(t))return!1;var e=T4(t)?Yye:Hye;return e.test(Ay(t))}function Kye(t,e){return t==null?void 0:t[e]}function Ry(t,e){var n=Kye(t,e);return Zye(n)?n:void 0}var Sw=Ry(Ap,"Map"),Ew=Ry(Object,"create");function Jye(){this.__data__=Ew?Ew(null):{},this.size=0}function Qye(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var e_e="__lodash_hash_undefined__",t_e=Object.prototype,n_e=t_e.hasOwnProperty;function r_e(t){var e=this.__data__;if(Ew){var n=e[t];return n===e_e?void 0:n}return n_e.call(e,t)?e[t]:void 0}var i_e=Object.prototype,a_e=i_e.hasOwnProperty;function o_e(t){var e=this.__data__;return Ew?e[t]!==void 0:a_e.call(e,t)}var s_e="__lodash_hash_undefined__";function l_e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ew&&e===void 0?s_e:e,this}function ly(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ly.prototype.clear=Jye;ly.prototype.delete=Qye;ly.prototype.get=r_e;ly.prototype.has=o_e;ly.prototype.set=l_e;function u_e(){this.size=0,this.__data__={hash:new ly,map:new(Sw||Mm),string:new ly}}function c_e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function eA(t,e){var n=t.__data__;return c_e(e)?n[typeof e=="string"?"string":"hash"]:n.map}function h_e(t){var e=eA(this,t).delete(t);return this.size-=e?1:0,e}function f_e(t){return eA(this,t).get(t)}function d_e(t){return eA(this,t).has(t)}function p_e(t,e){var n=eA(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Am(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Am.prototype.clear=u_e;Am.prototype.delete=h_e;Am.prototype.get=f_e;Am.prototype.has=d_e;Am.prototype.set=p_e;var g_e=200;function m_e(t,e){var n=this.__data__;if(n instanceof Mm){var r=n.__data__;if(!Sw||r.length<g_e-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Am(r)}return n.set(t,e),this.size=n.size,this}function ug(t){var e=this.__data__=new Mm(t);this.size=e.size}ug.prototype.clear=Sye;ug.prototype.delete=Eye;ug.prototype.get=Tye;ug.prototype.has=Cye;ug.prototype.set=m_e;var RC=function(){try{var t=Ry(Object,"defineProperty");return t({},"",{}),t}catch{}}();function C4(t,e,n){e=="__proto__"&&RC?RC(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function QD(t,e,n){(n!==void 0&&!aS(t[e],n)||n===void 0&&!(e in t))&&C4(t,e,n)}function v_e(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var c=s[++i];if(n(o[c],c,o)===!1)break}return e}}var AW=v_e(),RW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,T7=RW&&typeof module=="object"&&module&&!module.nodeType&&module,y_e=T7&&T7.exports===RW,C7=y_e?Ap.Buffer:void 0;C7&&C7.allocUnsafe;function __e(t,e){return t.slice()}var PC=Ap.Uint8Array;function x_e(t){var e=new t.constructor(t.byteLength);return new PC(e).set(new PC(t)),e}function b_e(t,e){var n=x_e(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}function w_e(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var M7=Object.create,S_e=function(){function t(){}return function(e){if(!Nd(e))return{};if(M7)return M7(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function PW(t,e){return function(n){return t(e(n))}}var IW=PW(Object.getPrototypeOf,Object),E_e=Object.prototype;function M4(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||E_e;return t===n}function T_e(t){return typeof t.constructor=="function"&&!M4(t)?S_e(IW(t)):{}}function Nv(t){return t!=null&&typeof t=="object"}var C_e="[object Arguments]";function A7(t){return Nv(t)&&My(t)==C_e}var DW=Object.prototype,M_e=DW.hasOwnProperty,A_e=DW.propertyIsEnumerable,IC=A7(function(){return arguments}())?A7:function(t){return Nv(t)&&M_e.call(t,"callee")&&!A_e.call(t,"callee")},Jf=Array.isArray,R_e=9007199254740991;function A4(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=R_e}function Gx(t){return t!=null&&A4(t.length)&&!T4(t)}function P_e(t){return Nv(t)&&Gx(t)}function I_e(){return!1}var LW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,R7=LW&&typeof module=="object"&&module&&!module.nodeType&&module,D_e=R7&&R7.exports===LW,P7=D_e?Ap.Buffer:void 0,L_e=P7?P7.isBuffer:void 0,DC=L_e||I_e,N_e="[object Object]",k_e=Function.prototype,O_e=Object.prototype,NW=k_e.toString,F_e=O_e.hasOwnProperty,B_e=NW.call(Object);function z_e(t){if(!Nv(t)||My(t)!=N_e)return!1;var e=IW(t);if(e===null)return!0;var n=F_e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&NW.call(n)==B_e}var U_e="[object Arguments]",j_e="[object Array]",G_e="[object Boolean]",V_e="[object Date]",H_e="[object Error]",q_e="[object Function]",$_e="[object Map]",W_e="[object Number]",X_e="[object Object]",Y_e="[object RegExp]",Z_e="[object Set]",K_e="[object String]",J_e="[object WeakMap]",Q_e="[object ArrayBuffer]",e1e="[object DataView]",t1e="[object Float32Array]",n1e="[object Float64Array]",r1e="[object Int8Array]",i1e="[object Int16Array]",a1e="[object Int32Array]",o1e="[object Uint8Array]",s1e="[object Uint8ClampedArray]",l1e="[object Uint16Array]",u1e="[object Uint32Array]",ml={};ml[t1e]=ml[n1e]=ml[r1e]=ml[i1e]=ml[a1e]=ml[o1e]=ml[s1e]=ml[l1e]=ml[u1e]=!0;ml[U_e]=ml[j_e]=ml[Q_e]=ml[G_e]=ml[e1e]=ml[V_e]=ml[H_e]=ml[q_e]=ml[$_e]=ml[W_e]=ml[X_e]=ml[Y_e]=ml[Z_e]=ml[K_e]=ml[J_e]=!1;function c1e(t){return Nv(t)&&A4(t.length)&&!!ml[My(t)]}function h1e(t){return function(e){return t(e)}}var kW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Z2=kW&&typeof module=="object"&&module&&!module.nodeType&&module,f1e=Z2&&Z2.exports===kW,AP=f1e&&CW.process,I7=function(){try{var t=Z2&&Z2.require&&Z2.require("util").types;return t||AP&&AP.binding&&AP.binding("util")}catch{}}(),D7=I7&&I7.isTypedArray,R4=D7?h1e(D7):c1e;function eL(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var d1e=Object.prototype,p1e=d1e.hasOwnProperty;function g1e(t,e,n){var r=t[e];(!(p1e.call(t,e)&&aS(r,n))||n===void 0&&!(e in t))&&C4(t,e,n)}function m1e(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=void 0;c===void 0&&(c=t[a]),i?C4(n,a,c):g1e(n,a,c)}return n}function v1e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var y1e=9007199254740991,_1e=/^(?:0|[1-9]\d*)$/;function P4(t,e){var n=typeof t;return e=e??y1e,!!e&&(n=="number"||n!="symbol"&&_1e.test(t))&&t>-1&&t%1==0&&t<e}var x1e=Object.prototype,b1e=x1e.hasOwnProperty;function OW(t,e){var n=Jf(t),r=!n&&IC(t),i=!n&&!r&&DC(t),o=!n&&!r&&!i&&R4(t),s=n||r||i||o,a=s?v1e(t.length,String):[],c=a.length;for(var h in t)(e||b1e.call(t,h))&&!(s&&(h=="length"||i&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||P4(h,c)))&&a.push(h);return a}function w1e(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var S1e=Object.prototype,E1e=S1e.hasOwnProperty;function T1e(t){if(!Nd(t))return w1e(t);var e=M4(t),n=[];for(var r in t)r=="constructor"&&(e||!E1e.call(t,r))||n.push(r);return n}function FW(t){return Gx(t)?OW(t,!0):T1e(t)}function C1e(t){return m1e(t,FW(t))}function M1e(t,e,n,r,i,o,s){var a=eL(t,n),c=eL(e,n),h=s.get(c);if(h){QD(t,n,h);return}var d=o?o(a,c,n+"",t,e,s):void 0,v=d===void 0;if(v){var w=Jf(c),_=!w&&DC(c),E=!w&&!_&&R4(c);d=c,w||_||E?Jf(a)?d=a:P_e(a)?d=w_e(a):_?(v=!1,d=__e(c)):E?(v=!1,d=b_e(c)):d=[]:z_e(c)||IC(c)?(d=a,IC(a)?d=C1e(a):(!Nd(a)||T4(a))&&(d=T_e(c))):v=!1}v&&(s.set(c,d),i(d,c,r,o,s),s.delete(c)),QD(t,n,d)}function BW(t,e,n,r,i){t!==e&&AW(e,function(o,s){if(i||(i=new ug),Nd(o))M1e(t,e,s,n,BW,r,i);else{var a=r?r(eL(t,s),o,s+"",t,e,i):void 0;a===void 0&&(a=o),QD(t,s,a)}},FW)}function tA(t){return t}function A1e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var L7=Math.max;function R1e(t,e,n){return e=L7(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=L7(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),A1e(t,this,a)}}function P1e(t){return function(){return t}}var I1e=RC?function(t,e){return RC(t,"toString",{configurable:!0,enumerable:!1,value:P1e(e),writable:!0})}:tA,D1e=800,L1e=16,N1e=Date.now;function k1e(t){var e=0,n=0;return function(){var r=N1e(),i=L1e-(r-n);if(n=r,i>0){if(++e>=D1e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var O1e=k1e(I1e);function F1e(t,e){return O1e(R1e(t,e,tA),t+"")}function B1e(t,e,n){if(!Nd(n))return!1;var r=typeof e;return(r=="number"?Gx(n)&&P4(e,n.length):r=="string"&&e in n)?aS(n[e],t):!1}function z1e(t){return F1e(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,s&&B1e(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e})}var wf=z1e(function(t,e,n){BW(t,e,n)}),oS=function(e){var n=e.zDepth,r=e.radius,i=e.background,o=e.children,s=e.styles,a=s===void 0?{}:s,c=Aa(wf({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+n+"px "+n*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":n===1});return zt.createElement("div",{style:c.wrap},zt.createElement("div",{style:c.bg}),zt.createElement("div",{style:c.content},o))};oS.propTypes={background:pi.string,zDepth:pi.oneOf([0,1,2,3,4,5]),radius:pi.number,styles:pi.object};oS.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var RP=function(){return Ap.Date.now()},U1e=/\s/;function j1e(t){for(var e=t.length;e--&&U1e.test(t.charAt(e)););return e}var G1e=/^\s+/;function V1e(t){return t&&t.slice(0,j1e(t)+1).replace(G1e,"")}var H1e="[object Symbol]";function nA(t){return typeof t=="symbol"||Nv(t)&&My(t)==H1e}var N7=NaN,q1e=/^[-+]0x[0-9a-f]+$/i,$1e=/^0b[01]+$/i,W1e=/^0o[0-7]+$/i,X1e=parseInt;function k7(t){if(typeof t=="number")return t;if(nA(t))return N7;if(Nd(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Nd(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=V1e(t);var n=$1e.test(t);return n||W1e.test(t)?X1e(t.slice(2),n?2:8):q1e.test(t)?N7:+t}var Y1e="Expected a function",Z1e=Math.max,K1e=Math.min;function zW(t,e,n){var r,i,o,s,a,c,h=0,d=!1,v=!1,w=!0;if(typeof t!="function")throw new TypeError(Y1e);e=k7(e)||0,Nd(n)&&(d=!!n.leading,v="maxWait"in n,o=v?Z1e(k7(n.maxWait)||0,e):o,w="trailing"in n?!!n.trailing:w);function _(G){var W=r,X=i;return r=i=void 0,h=G,s=t.apply(X,W),s}function E(G){return h=G,a=setTimeout(A,e),d?_(G):s}function M(G){var W=G-c,X=G-h,K=e-W;return v?K1e(K,o-X):K}function D(G){var W=G-c,X=G-h;return c===void 0||W>=e||W<0||v&&X>=o}function A(){var G=RP();if(D(G))return F(G);a=setTimeout(A,M(G))}function F(G){return a=void 0,w&&r?_(G):(r=i=void 0,s)}function O(){a!==void 0&&clearTimeout(a),h=0,r=c=i=a=void 0}function N(){return a===void 0?s:F(RP())}function H(){var G=RP(),W=D(G);if(r=arguments,i=this,c=G,W){if(a===void 0)return E(c);if(v)return clearTimeout(a),a=setTimeout(A,e),_(c)}return a===void 0&&(a=setTimeout(A,e)),s}return H.cancel=O,H.flush=N,H}var J1e="Expected a function";function Q1e(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(J1e);return Nd(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),zW(t,e,{leading:r,maxWait:e,trailing:i})}var exe=function(e,n,r){var i=r.getBoundingClientRect(),o=i.width,s=i.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(r.getBoundingClientRect().left+window.pageXOffset),d=c-(r.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>o&&(h=o),d<0?d=0:d>s&&(d=s);var v=h/o,w=1-d/s;return{h:n.h,s:v,v:w,a:n.a,source:"hsv"}},txe=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function nxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rxe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ixe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var rA=function(t){ixe(e,t);function e(n){nxe(this,e);var r=rxe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,exe(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var o=r.getContainerRenderWindow();o.addEventListener("mousemove",r.handleChange),o.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=Q1e(function(i,o,s){i(o,s)},50),r}return txe(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},o=i.color,s=i.white,a=i.black,c=i.pointer,h=i.circle,d=Aa({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:o,white:s,black:a,pointer:c,circle:h}},{custom:!!this.props.style});return zt.createElement("div",{style:d.color,ref:function(w){return r.container=w},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},zt.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),zt.createElement("div",{style:d.white,className:"saturation-white"},zt.createElement("div",{style:d.black,className:"saturation-black"}),zt.createElement("div",{style:d.pointer},this.props.pointer?zt.createElement(this.props.pointer,this.props):zt.createElement("div",{style:d.circle}))))}}]),e}(Be.PureComponent||Be.Component);function axe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var oxe=PW(Object.keys,Object),sxe=Object.prototype,lxe=sxe.hasOwnProperty;function uxe(t){if(!M4(t))return oxe(t);var e=[];for(var n in Object(t))lxe.call(t,n)&&n!="constructor"&&e.push(n);return e}function I4(t){return Gx(t)?OW(t):uxe(t)}function cxe(t,e){return t&&AW(t,e,I4)}function hxe(t,e){return function(n,r){if(n==null)return n;if(!Gx(n))return t(n,r);for(var i=n.length,o=-1,s=Object(n);++o<i&&r(s[o],o,s)!==!1;);return n}}var UW=hxe(cxe);function fxe(t){return typeof t=="function"?t:tA}function dxe(t,e){var n=Jf(t)?axe:UW;return n(t,fxe(e))}function LC(t){"@babel/helpers - typeof";return LC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LC(t)}var pxe=/^\s+/,gxe=/\s+$/;function Hi(t,e){if(t=t||"",e=e||{},t instanceof Hi)return t;if(!(this instanceof Hi))return new Hi(t,e);var n=mxe(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Hi.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,i,o,s,a;return n=e.r/255,r=e.g/255,i=e.b/255,n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*s+.0722*a},setAlpha:function(e){return this._a=jW(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=F7(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=F7(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=O7(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=O7(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return B7(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return xxe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Pl(this._r,255)*100)+"%",g:Math.round(Pl(this._g,255)*100)+"%",b:Math.round(Pl(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Pl(this._r,255)*100)+"%, "+Math.round(Pl(this._g,255)*100)+"%, "+Math.round(Pl(this._b,255)*100)+"%)":"rgba("+Math.round(Pl(this._r,255)*100)+"%, "+Math.round(Pl(this._g,255)*100)+"%, "+Math.round(Pl(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Dxe[B7(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+z7(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(e){var o=Hi(e);r="#"+z7(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,o=!n&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Hi(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(Exe,arguments)},brighten:function(){return this._applyModification(Txe,arguments)},darken:function(){return this._applyModification(Cxe,arguments)},desaturate:function(){return this._applyModification(bxe,arguments)},saturate:function(){return this._applyModification(wxe,arguments)},greyscale:function(){return this._applyModification(Sxe,arguments)},spin:function(){return this._applyModification(Mxe,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(Pxe,arguments)},complement:function(){return this._applyCombination(Axe,arguments)},monochromatic:function(){return this._applyCombination(Ixe,arguments)},splitcomplement:function(){return this._applyCombination(Rxe,arguments)},triad:function(){return this._applyCombination(U7,[3])},tetrad:function(){return this._applyCombination(U7,[4])}};Hi.fromRatio=function(t,e){if(LC(t)=="object"){var n={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?n[r]=t[r]:n[r]=S2(t[r]));t=n}return Hi(t,e)};function mxe(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,s=!1,a=!1;return typeof t=="string"&&(t=Oxe(t)),LC(t)=="object"&&(Yg(t.r)&&Yg(t.g)&&Yg(t.b)?(e=vxe(t.r,t.g,t.b),s=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Yg(t.h)&&Yg(t.s)&&Yg(t.v)?(r=S2(t.s),i=S2(t.v),e=_xe(t.h,r,i),s=!0,a="hsv"):Yg(t.h)&&Yg(t.s)&&Yg(t.l)&&(r=S2(t.s),o=S2(t.l),e=yxe(t.h,r,o),s=!0,a="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=jW(n),{ok:s,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function vxe(t,e,n){return{r:Pl(t,255)*255,g:Pl(e,255)*255,b:Pl(n,255)*255}}function O7(t,e,n){t=Pl(t,255),e=Pl(e,255),n=Pl(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o,s,a=(r+i)/2;if(r==i)o=s=0;else{var c=r-i;switch(s=a>.5?c/(2-r-i):c/(r+i),r){case t:o=(e-n)/c+(e<n?6:0);break;case e:o=(n-t)/c+2;break;case n:o=(t-e)/c+4;break}o/=6}return{h:o,s,l:a}}function yxe(t,e,n){var r,i,o;t=Pl(t,360),e=Pl(e,100),n=Pl(n,100);function s(h,d,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?h+(d-h)*6*v:v<1/2?d:v<2/3?h+(d-h)*(2/3-v)*6:h}if(e===0)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;r=s(c,a,t+1/3),i=s(c,a,t),o=s(c,a,t-1/3)}return{r:r*255,g:i*255,b:o*255}}function F7(t,e,n){t=Pl(t,255),e=Pl(e,255),n=Pl(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o,s,a=r,c=r-i;if(s=r===0?0:c/r,r==i)o=0;else{switch(r){case t:o=(e-n)/c+(e<n?6:0);break;case e:o=(n-t)/c+2;break;case n:o=(t-e)/c+4;break}o/=6}return{h:o,s,v:a}}function _xe(t,e,n){t=Pl(t,360)*6,e=Pl(e,100),n=Pl(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),s=n*(1-i*e),a=n*(1-(1-i)*e),c=r%6,h=[n,s,o,o,a,n][c],d=[a,n,n,s,o,o][c],v=[o,o,a,n,n,s][c];return{r:h*255,g:d*255,b:v*255}}function B7(t,e,n,r){var i=[gp(Math.round(t).toString(16)),gp(Math.round(e).toString(16)),gp(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function xxe(t,e,n,r,i){var o=[gp(Math.round(t).toString(16)),gp(Math.round(e).toString(16)),gp(Math.round(n).toString(16)),gp(GW(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function z7(t,e,n,r){var i=[gp(GW(r)),gp(Math.round(t).toString(16)),gp(Math.round(e).toString(16)),gp(Math.round(n).toString(16))];return i.join("")}Hi.equals=function(t,e){return!t||!e?!1:Hi(t).toRgbString()==Hi(e).toRgbString()};Hi.random=function(){return Hi.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function bxe(t,e){e=e===0?0:e||10;var n=Hi(t).toHsl();return n.s-=e/100,n.s=iA(n.s),Hi(n)}function wxe(t,e){e=e===0?0:e||10;var n=Hi(t).toHsl();return n.s+=e/100,n.s=iA(n.s),Hi(n)}function Sxe(t){return Hi(t).desaturate(100)}function Exe(t,e){e=e===0?0:e||10;var n=Hi(t).toHsl();return n.l+=e/100,n.l=iA(n.l),Hi(n)}function Txe(t,e){e=e===0?0:e||10;var n=Hi(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),Hi(n)}function Cxe(t,e){e=e===0?0:e||10;var n=Hi(t).toHsl();return n.l-=e/100,n.l=iA(n.l),Hi(n)}function Mxe(t,e){var n=Hi(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,Hi(n)}function Axe(t){var e=Hi(t).toHsl();return e.h=(e.h+180)%360,Hi(e)}function U7(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Hi(t).toHsl(),r=[Hi(t)],i=360/e,o=1;o<e;o++)r.push(Hi({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function Rxe(t){var e=Hi(t).toHsl(),n=e.h;return[Hi(t),Hi({h:(n+72)%360,s:e.s,l:e.l}),Hi({h:(n+216)%360,s:e.s,l:e.l})]}function Pxe(t,e,n){e=e||6,n=n||30;var r=Hi(t).toHsl(),i=360/n,o=[Hi(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(Hi(r));return o}function Ixe(t,e){e=e||6;for(var n=Hi(t).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/e;e--;)s.push(Hi({h:r,s:i,v:o})),o=(o+a)%1;return s}Hi.mix=function(t,e,n){n=n===0?0:n||50;var r=Hi(t).toRgb(),i=Hi(e).toRgb(),o=n/100,s={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return Hi(s)};Hi.readability=function(t,e){var n=Hi(t),r=Hi(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};Hi.isReadable=function(t,e,n){var r=Hi.readability(t,e),i,o;switch(o=!1,i=Fxe(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break}return o};Hi.mostReadable=function(t,e,n){var r=null,i=0,o,s,a,c;n=n||{},s=n.includeFallbackColors,a=n.level,c=n.size;for(var h=0;h<e.length;h++)o=Hi.readability(t,e[h]),o>i&&(i=o,r=Hi(e[h]));return Hi.isReadable(t,r,{level:a,size:c})||!s?r:(n.includeFallbackColors=!1,Hi.mostReadable(t,["#fff","#000"],n))};var tL=Hi.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Dxe=Hi.hexNames=Lxe(tL);function Lxe(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function jW(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Pl(t,e){Nxe(t)&&(t="100%");var n=kxe(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function iA(t){return Math.min(1,Math.max(0,t))}function Ff(t){return parseInt(t,16)}function Nxe(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function kxe(t){return typeof t=="string"&&t.indexOf("%")!=-1}function gp(t){return t.length==1?"0"+t:""+t}function S2(t){return t<=1&&(t=t*100+"%"),t}function GW(t){return Math.round(parseFloat(t)*255).toString(16)}function j7(t){return Ff(t)/255}var lp=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Yg(t){return!!lp.CSS_UNIT.exec(t)}function Oxe(t){t=t.replace(pxe,"").replace(gxe,"").toLowerCase();var e=!1;if(tL[t])t=tL[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=lp.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=lp.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=lp.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=lp.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=lp.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=lp.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=lp.hex8.exec(t))?{r:Ff(n[1]),g:Ff(n[2]),b:Ff(n[3]),a:j7(n[4]),format:e?"name":"hex8"}:(n=lp.hex6.exec(t))?{r:Ff(n[1]),g:Ff(n[2]),b:Ff(n[3]),format:e?"name":"hex"}:(n=lp.hex4.exec(t))?{r:Ff(n[1]+""+n[1]),g:Ff(n[2]+""+n[2]),b:Ff(n[3]+""+n[3]),a:j7(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=lp.hex3.exec(t))?{r:Ff(n[1]+""+n[1]),g:Ff(n[2]+""+n[2]),b:Ff(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function Fxe(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}var G7=function(e){var n=["r","g","b","a","h","s","l","v"],r=0,i=0;return dxe(n,function(o){if(e[o]&&(r+=1,isNaN(e[o])||(i+=1),o==="s"||o==="l")){var s=/^\d+%$/;s.test(e[o])&&(i+=1)}}),r===i?e:!1},E2=function(e,n){var r=e.hex?Hi(e.hex):Hi(e),i=r.toHsl(),o=r.toHsv(),s=r.toRgb(),a=r.toHex();i.s===0&&(i.h=n||0,o.h=n||0);var c=a==="000000"&&s.a===0;return{hsl:i,hex:c?"transparent":"#"+a,rgb:s,hsv:o,oldHue:e.h||n||i.h,source:e.source}},Gv=function(e){if(e==="transparent")return!0;var n=String(e).charAt(0)==="#"?1:0;return e.length!==4+n&&e.length<7+n&&Hi(e).isValid()},D4=function(e){if(!e)return"#fff";var n=E2(e);if(n.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(n.rgb.r*299+n.rgb.g*587+n.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},PP=function(e,n){var r=e.replace("°","");return Hi(n+" ("+r+")")._ok},Jb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bxe=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function zxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uxe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function jxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Sf=function(e){var n=function(r){jxe(i,r);function i(o){zxe(this,i);var s=Uxe(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return s.handleChange=function(a,c){var h=G7(a);if(h){var d=E2(a,a.h||s.state.oldHue);s.setState(d),s.props.onChangeComplete&&s.debounce(s.props.onChangeComplete,d,c),s.props.onChange&&s.props.onChange(d,c)}},s.handleSwatchHover=function(a,c){var h=G7(a);if(h){var d=E2(a,a.h||s.state.oldHue);s.props.onSwatchHover&&s.props.onSwatchHover(d,c)}},s.state=Jb({},E2(o.color,0)),s.debounce=zW(function(a,c,h){a(c,h)},100),s}return Bxe(i,[{key:"render",value:function(){var s={};return this.props.onSwatchHover&&(s.onSwatchHover=this.handleSwatchHover),zt.createElement(e,Jb({},this.props,this.state,{onChange:this.handleChange},s))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return Jb({},E2(s.color,a.oldHue))}}]),i}(Be.PureComponent||Be.Component);return n.propTypes=Jb({},e.propTypes),n.defaultProps=Jb({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),n},Gxe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vxe=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Hxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function qxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var $xe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){qxe(i,r);function i(){var o,s,a,c;Hxe(this,i);for(var h=arguments.length,d=Array(h),v=0;v<h;v++)d[v]=arguments[v];return c=(s=(a=V7(this,(o=i.__proto__||Object.getPrototypeOf(i)).call.apply(o,[this].concat(d))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},s),V7(a,c)}return Vxe(i,[{key:"render",value:function(){return zt.createElement(n,{onFocus:this.handleFocus,onBlur:this.handleBlur},zt.createElement(e,Gxe({},this.props,this.state)))}}]),i}(zt.Component)},H7=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wxe=13,Xxe=function(e){var n=e.color,r=e.style,i=e.onClick,o=i===void 0?function(){}:i,s=e.onHover,a=e.title,c=a===void 0?n:a,h=e.children,d=e.focus,v=e.focusStyle,w=v===void 0?{}:v,_=n==="transparent",E=Aa({default:{swatch:H7({background:n,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,d?w:{})}}),M=function(N){return o(n,N)},D=function(N){return N.keyCode===Wxe&&o(n,N)},A=function(N){return s(n,N)},F={};return s&&(F.onMouseOver=A),zt.createElement("div",H7({style:E.swatch,onClick:M,title:c,tabIndex:0,onKeyDown:D},F),h,_&&zt.createElement(Ux,{borderRadius:E.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Py=$xe(Xxe);var Yxe=function(e){var n=e.direction,r=Aa({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return zt.createElement("div",{style:r.picker})},Zxe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VW=function(e){var n=e.rgb,r=e.hsl,i=e.width,o=e.height,s=e.onChange,a=e.direction,c=e.style,h=e.renderers,d=e.pointer,v=e.className,w=v===void 0?"":v,_=Aa({default:{picker:{position:"relative",width:i,height:o},alpha:{radius:"2px",style:c}}});return zt.createElement("div",{style:_.picker,className:"alpha-picker "+w},zt.createElement(E4,Zxe({},_.alpha,{rgb:n,hsl:r,pointer:d,renderers:h,onChange:s,direction:a})))};VW.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Yxe};Sf(VW);function HW(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Kxe="__lodash_hash_undefined__";function Jxe(t){return this.__data__.set(t,Kxe),this}function Qxe(t){return this.__data__.has(t)}function NC(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Am;++e<n;)this.add(t[e])}NC.prototype.add=NC.prototype.push=Jxe;NC.prototype.has=Qxe;function ebe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function tbe(t,e){return t.has(e)}var nbe=1,rbe=2;function qW(t,e,n,r,i,o){var s=n&nbe,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var v=-1,w=!0,_=n&rbe?new NC:void 0;for(o.set(t,e),o.set(e,t);++v<a;){var E=t[v],M=e[v];if(r)var D=s?r(M,E,v,e,t,o):r(E,M,v,t,e,o);if(D!==void 0){if(D)continue;w=!1;break}if(_){if(!ebe(e,function(A,F){if(!tbe(_,F)&&(E===A||i(E,A,n,r,o)))return _.push(F)})){w=!1;break}}else if(!(E===M||i(E,M,n,r,o))){w=!1;break}}return o.delete(t),o.delete(e),w}function ibe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function abe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var obe=1,sbe=2,lbe="[object Boolean]",ube="[object Date]",cbe="[object Error]",hbe="[object Map]",fbe="[object Number]",dbe="[object RegExp]",pbe="[object Set]",gbe="[object String]",mbe="[object Symbol]",vbe="[object ArrayBuffer]",ybe="[object DataView]",q7=Lv?Lv.prototype:void 0,IP=q7?q7.valueOf:void 0;function _be(t,e,n,r,i,o,s){switch(n){case ybe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case vbe:return!(t.byteLength!=e.byteLength||!o(new PC(t),new PC(e)));case lbe:case ube:case fbe:return aS(+t,+e);case cbe:return t.name==e.name&&t.message==e.message;case dbe:case gbe:return t==e+"";case hbe:var a=ibe;case pbe:var c=r&obe;if(a||(a=abe),t.size!=e.size&&!c)return!1;var h=s.get(t);if(h)return h==e;r|=sbe,s.set(t,e);var d=qW(a(t),a(e),r,i,o,s);return s.delete(t),d;case mbe:if(IP)return IP.call(t)==IP.call(e)}return!1}function xbe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function bbe(t,e,n){var r=e(t);return Jf(t)?r:xbe(r,n(t))}function wbe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Sbe(){return[]}var Ebe=Object.prototype,Tbe=Ebe.propertyIsEnumerable,$7=Object.getOwnPropertySymbols,Cbe=$7?function(t){return t==null?[]:(t=Object(t),wbe($7(t),function(e){return Tbe.call(t,e)}))}:Sbe;function W7(t){return bbe(t,I4,Cbe)}var Mbe=1,Abe=Object.prototype,Rbe=Abe.hasOwnProperty;function Pbe(t,e,n,r,i,o){var s=n&Mbe,a=W7(t),c=a.length,h=W7(e),d=h.length;if(c!=d&&!s)return!1;for(var v=c;v--;){var w=a[v];if(!(s?w in e:Rbe.call(e,w)))return!1}var _=o.get(t),E=o.get(e);if(_&&E)return _==e&&E==t;var M=!0;o.set(t,e),o.set(e,t);for(var D=s;++v<c;){w=a[v];var A=t[w],F=e[w];if(r)var O=s?r(F,A,w,e,t,o):r(A,F,w,t,e,o);if(!(O===void 0?A===F||i(A,F,n,r,o):O)){M=!1;break}D||(D=w=="constructor")}if(M&&!D){var N=t.constructor,H=e.constructor;N!=H&&"constructor"in t&&"constructor"in e&&!(typeof N=="function"&&N instanceof N&&typeof H=="function"&&H instanceof H)&&(M=!1)}return o.delete(t),o.delete(e),M}var nL=Ry(Ap,"DataView"),rL=Ry(Ap,"Promise"),iL=Ry(Ap,"Set"),aL=Ry(Ap,"WeakMap"),X7="[object Map]",Ibe="[object Object]",Y7="[object Promise]",Z7="[object Set]",K7="[object WeakMap]",J7="[object DataView]",Dbe=Ay(nL),Lbe=Ay(Sw),Nbe=Ay(rL),kbe=Ay(iL),Obe=Ay(aL),sv=My;(nL&&sv(new nL(new ArrayBuffer(1)))!=J7||Sw&&sv(new Sw)!=X7||rL&&sv(rL.resolve())!=Y7||iL&&sv(new iL)!=Z7||aL&&sv(new aL)!=K7)&&(sv=function(t){var e=My(t),n=e==Ibe?t.constructor:void 0,r=n?Ay(n):"";if(r)switch(r){case Dbe:return J7;case Lbe:return X7;case Nbe:return Y7;case kbe:return Z7;case Obe:return K7}return e});var Fbe=1,Q7="[object Arguments]",e9="[object Array]",OE="[object Object]",Bbe=Object.prototype,t9=Bbe.hasOwnProperty;function zbe(t,e,n,r,i,o){var s=Jf(t),a=Jf(e),c=s?e9:sv(t),h=a?e9:sv(e);c=c==Q7?OE:c,h=h==Q7?OE:h;var d=c==OE,v=h==OE,w=c==h;if(w&&DC(t)){if(!DC(e))return!1;s=!0,d=!1}if(w&&!d)return o||(o=new ug),s||R4(t)?qW(t,e,n,r,i,o):_be(t,e,c,n,r,i,o);if(!(n&Fbe)){var _=d&&t9.call(t,"__wrapped__"),E=v&&t9.call(e,"__wrapped__");if(_||E){var M=_?t.value():t,D=E?e.value():e;return o||(o=new ug),i(M,D,n,r,o)}}return w?(o||(o=new ug),Pbe(t,e,n,r,i,o)):!1}function L4(t,e,n,r,i){return t===e?!0:t==null||e==null||!Nv(t)&&!Nv(e)?t!==t&&e!==e:zbe(t,e,n,r,L4,i)}var Ube=1,jbe=2;function Gbe(t,e,n,r){var i=n.length,o=i;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var a=s[0],c=t[a],h=s[1];if(s[2]){if(c===void 0&&!(a in t))return!1}else{var d=new ug,v;if(!(v===void 0?L4(h,c,Ube|jbe,r,d):v))return!1}}return!0}function $W(t){return t===t&&!Nd(t)}function Vbe(t){for(var e=I4(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,$W(i)]}return e}function WW(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function Hbe(t){var e=Vbe(t);return e.length==1&&e[0][2]?WW(e[0][0],e[0][1]):function(n){return n===t||Gbe(n,t,e)}}var qbe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$be=/^\w*$/;function N4(t,e){if(Jf(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||nA(t)?!0:$be.test(t)||!qbe.test(t)||e!=null&&t in Object(e)}var Wbe="Expected a function";function k4(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Wbe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(k4.Cache||Am),n}k4.Cache=Am;var Xbe=500;function Ybe(t){var e=k4(t,function(r){return n.size===Xbe&&n.clear(),r}),n=e.cache;return e}var Zbe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kbe=/\\(\\)?/g,Jbe=Ybe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Zbe,function(n,r,i,o){e.push(i?o.replace(Kbe,"$1"):r||n)}),e}),n9=Lv?Lv.prototype:void 0,r9=n9?n9.toString:void 0;function XW(t){if(typeof t=="string")return t;if(Jf(t))return HW(t,XW)+"";if(nA(t))return r9?r9.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Qbe(t){return t==null?"":XW(t)}function YW(t,e){return Jf(t)?t:N4(t,e)?[t]:Jbe(Qbe(t))}function aA(t){if(typeof t=="string"||nA(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function ZW(t,e){e=YW(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[aA(e[n++])];return n&&n==r?t:void 0}function e2e(t,e,n){var r=t==null?void 0:ZW(t,e);return r===void 0?n:r}function t2e(t,e){return t!=null&&e in Object(t)}function n2e(t,e,n){e=YW(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=aA(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&A4(i)&&P4(s,i)&&(Jf(t)||IC(t)))}function r2e(t,e){return t!=null&&n2e(t,e,t2e)}var i2e=1,a2e=2;function o2e(t,e){return N4(t)&&$W(e)?WW(aA(t),e):function(n){var r=e2e(n,t);return r===void 0&&r===e?r2e(n,t):L4(e,r,i2e|a2e)}}function s2e(t){return function(e){return e==null?void 0:e[t]}}function l2e(t){return function(e){return ZW(e,t)}}function u2e(t){return N4(t)?s2e(aA(t)):l2e(t)}function c2e(t){return typeof t=="function"?t:t==null?tA:typeof t=="object"?Jf(t)?o2e(t[0],t[1]):Hbe(t):u2e(t)}function h2e(t,e){var n=-1,r=Gx(t)?Array(t.length):[];return UW(t,function(i,o,s){r[++n]=e(i,o,s)}),r}function Iy(t,e){var n=Jf(t)?HW:h2e;return n(t,c2e(e))}var f2e=function(e){var n=e.colors,r=e.onClick,i=e.onSwatchHover,o=Aa({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return zt.createElement("div",{style:o.swatches},Iy(n,function(s){return zt.createElement(Py,{key:s,color:s,style:o.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+s}})}),zt.createElement("div",{style:o.clear}))},O4=function(e){var n=e.onChange,r=e.onSwatchHover,i=e.hex,o=e.colors,s=e.width,a=e.triangle,c=e.styles,h=c===void 0?{}:c,d=e.className,v=d===void 0?"":d,w=i==="transparent",_=function(D,A){Gv(D)&&n({hex:D,source:"hex"},A)},E=Aa(wf({default:{card:{width:s,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:D4(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},h),{"hide-triangle":a==="hide"});return zt.createElement("div",{style:E.card,className:"block-picker "+v},zt.createElement("div",{style:E.triangle}),zt.createElement("div",{style:E.head},w&&zt.createElement(Ux,{borderRadius:"6px 6px 0 0"}),zt.createElement("div",{style:E.label},i)),zt.createElement("div",{style:E.body},zt.createElement(f2e,{colors:o,onClick:_,onSwatchHover:r}),zt.createElement(Ao,{style:{input:E.input},value:i,onChange:_})))};O4.propTypes={width:pi.oneOfType([pi.string,pi.number]),colors:pi.arrayOf(pi.string),triangle:pi.oneOf(["top","hide"]),styles:pi.object};O4.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Sf(O4);var c1={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},h1={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},f1={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},d1={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},p1={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},g1={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},m1={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},v1={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},y1={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},T2={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},_1={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},x1={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},b1={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},w1={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},S1={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},E1={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},T1={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},C1={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},KW=function(e){var n=e.color,r=e.onClick,i=e.onSwatchHover,o=e.hover,s=e.active,a=e.circleSize,c=e.circleSpacing,h=Aa({default:{swatch:{width:a,height:a,marginRight:c,marginBottom:c,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+n,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+n}}},{hover:o,active:s});return zt.createElement("div",{style:h.swatch},zt.createElement(Py,{style:h.Swatch,color:n,onClick:r,onHover:i,focusStyle:{boxShadow:h.Swatch.boxShadow+", 0 0 5px "+n}}))};KW.defaultProps={circleSize:28,circleSpacing:14};const d2e=S4.handleHover(KW);var F4=function(e){var n=e.width,r=e.onChange,i=e.onSwatchHover,o=e.colors,s=e.hex,a=e.circleSize,c=e.styles,h=c===void 0?{}:c,d=e.circleSpacing,v=e.className,w=v===void 0?"":v,_=Aa(wf({default:{card:{width:n,display:"flex",flexWrap:"wrap",marginRight:-d,marginBottom:-d}}},h)),E=function(D,A){return r({hex:D,source:"hex"},A)};return zt.createElement("div",{style:_.card,className:"circle-picker "+w},Iy(o,function(M){return zt.createElement(d2e,{key:M,color:M,onClick:E,onSwatchHover:i,active:s===M.toLowerCase(),circleSize:a,circleSpacing:d})}))};F4.propTypes={width:pi.oneOfType([pi.string,pi.number]),circleSize:pi.number,circleSpacing:pi.number,styles:pi.object};F4.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[c1[500],h1[500],f1[500],d1[500],p1[500],g1[500],m1[500],v1[500],y1[500],T2[500],_1[500],x1[500],b1[500],w1[500],S1[500],E1[500],T1[500],C1[500]],styles:{}};Sf(F4);function i9(t){return t===void 0}var FE={},a9;function p2e(){if(a9)return FE;a9=1,Object.defineProperty(FE,"__esModule",{value:!0});var t=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s},e=yy(),n=r(e);function r(s){return s&&s.__esModule?s:{default:s}}function i(s,a){var c={};for(var h in s)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(s,h)&&(c[h]=s[h]);return c}var o=24;return FE.default=function(s){var a=s.fill,c=a===void 0?"currentColor":a,h=s.width,d=h===void 0?o:h,v=s.height,w=v===void 0?o:v,_=s.style,E=_===void 0?{}:_,M=i(s,["fill","width","height","style"]);return n.default.createElement("svg",t({viewBox:"0 0 "+o+" "+o,style:t({fill:c,width:d,height:w},E)},M),n.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},FE}var g2e=p2e();const m2e=vy(g2e);var v2e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function y2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _2e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function x2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var JW=function(t){x2e(e,t);function e(n){y2e(this,e);var r=_2e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,o){i.hex?Gv(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},o):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},o):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},o)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(i9(i.s)?r.props.hsl.s:i.s),l:Number(i9(i.l)?r.props.hsl.l:i.l),source:"hsl"},o))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},n.hsl.a!==1&&n.view==="hex"?r.state={view:"rgb"}:r.state={view:n.view},r}return v2e(e,[{key:"render",value:function(){var r=this,i=Aa({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),o=void 0;return this.state.view==="hex"?o=zt.createElement("div",{style:i.fields,className:"flexbox-fix"},zt.createElement("div",{style:i.field},zt.createElement(Ao,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?o=zt.createElement("div",{style:i.fields,className:"flexbox-fix"},zt.createElement("div",{style:i.field},zt.createElement(Ao,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),zt.createElement("div",{style:i.field},zt.createElement(Ao,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),zt.createElement("div",{style:i.field},zt.createElement(Ao,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),zt.createElement("div",{style:i.alpha},zt.createElement(Ao,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(o=zt.createElement("div",{style:i.fields,className:"flexbox-fix"},zt.createElement("div",{style:i.field},zt.createElement(Ao,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),zt.createElement("div",{style:i.field},zt.createElement(Ao,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),zt.createElement("div",{style:i.field},zt.createElement(Ao,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),zt.createElement("div",{style:i.alpha},zt.createElement(Ao,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),zt.createElement("div",{style:i.wrap,className:"flexbox-fix"},o,zt.createElement("div",{style:i.toggle},zt.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return r.icon=a}},zt.createElement(m2e,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}(zt.Component);JW.defaultProps={view:"hex"};var o9=function(){var e=Aa({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return zt.createElement("div",{style:e.picker})},b2e=function(){var e=Aa({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return zt.createElement("div",{style:e.picker})},B4=function(e){var n=e.width,r=e.onChange,i=e.disableAlpha,o=e.rgb,s=e.hsl,a=e.hsv,c=e.hex,h=e.renderers,d=e.styles,v=d===void 0?{}:d,w=e.className,_=w===void 0?"":w,E=e.defaultView,M=Aa(wf({default:{picker:{width:n,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},v),{disableAlpha:i});return zt.createElement("div",{style:M.picker,className:"chrome-picker "+_},zt.createElement("div",{style:M.saturation},zt.createElement(rA,{style:M.Saturation,hsl:s,hsv:a,pointer:b2e,onChange:r})),zt.createElement("div",{style:M.body},zt.createElement("div",{style:M.controls,className:"flexbox-fix"},zt.createElement("div",{style:M.color},zt.createElement("div",{style:M.swatch},zt.createElement("div",{style:M.active}),zt.createElement(Ux,{renderers:h}))),zt.createElement("div",{style:M.toggles},zt.createElement("div",{style:M.hue},zt.createElement(jx,{style:M.Hue,hsl:s,pointer:o9,onChange:r})),zt.createElement("div",{style:M.alpha},zt.createElement(E4,{style:M.Alpha,rgb:o,hsl:s,pointer:o9,renderers:h,onChange:r})))),zt.createElement(JW,{rgb:o,hsl:s,hex:c,view:E,onChange:r,disableAlpha:i})))};B4.propTypes={width:pi.oneOfType([pi.string,pi.number]),disableAlpha:pi.bool,styles:pi.object,defaultView:pi.oneOf(["hex","rgb","hsl"])};B4.defaultProps={width:225,disableAlpha:!1,styles:{}};Sf(B4);var w2e=function(e){var n=e.color,r=e.onClick,i=r===void 0?function(){}:r,o=e.onSwatchHover,s=e.active,a=Aa({default:{color:{background:n,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:D4(n),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:s,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return zt.createElement(Py,{style:a.color,color:n,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+n}},zt.createElement("div",{style:a.dot}))},S2e=function(e){var n=e.hex,r=e.rgb,i=e.onChange,o=Aa({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:n},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),s=function(c,h){c.r||c.g||c.b?i({r:c.r||r.r,g:c.g||r.g,b:c.b||r.b,source:"rgb"},h):i({hex:c.hex,source:"hex"},h)};return zt.createElement("div",{style:o.fields,className:"flexbox-fix"},zt.createElement("div",{style:o.active}),zt.createElement(Ao,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:n,onChange:s}),zt.createElement(Ao,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:s}),zt.createElement(Ao,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:s}),zt.createElement(Ao,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:s}))},z4=function(e){var n=e.onChange,r=e.onSwatchHover,i=e.colors,o=e.hex,s=e.rgb,a=e.styles,c=a===void 0?{}:a,h=e.className,d=h===void 0?"":h,v=Aa(wf({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},c)),w=function(E,M){E.hex?Gv(E.hex)&&n({hex:E.hex,source:"hex"},M):n(E,M)};return zt.createElement(oS,{style:v.Compact,styles:c},zt.createElement("div",{style:v.compact,className:"compact-picker "+d},zt.createElement("div",null,Iy(i,function(_){return zt.createElement(w2e,{key:_,color:_,active:_.toLowerCase()===o,onClick:w,onSwatchHover:r})}),zt.createElement("div",{style:v.clear})),zt.createElement(S2e,{hex:o,rgb:s,onChange:w})))};z4.propTypes={colors:pi.arrayOf(pi.string),styles:pi.object};z4.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Sf(z4);var E2e=function(e){var n=e.hover,r=e.color,i=e.onClick,o=e.onSwatchHover,s={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=Aa({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:s}},{hover:n});return zt.createElement("div",{style:a.swatch},zt.createElement(Py,{color:r,onClick:i,onHover:o,focusStyle:s}))};const T2e=S4.handleHover(E2e);var U4=function(e){var n=e.width,r=e.colors,i=e.onChange,o=e.onSwatchHover,s=e.triangle,a=e.styles,c=a===void 0?{}:a,h=e.className,d=h===void 0?"":h,v=Aa(wf({default:{card:{width:n,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},c),{"hide-triangle":s==="hide","top-left-triangle":s==="top-left","top-right-triangle":s==="top-right","bottom-left-triangle":s==="bottom-left","bottom-right-triangle":s==="bottom-right"}),w=function(E,M){return i({hex:E,source:"hex"},M)};return zt.createElement("div",{style:v.card,className:"github-picker "+d},zt.createElement("div",{style:v.triangleShadow}),zt.createElement("div",{style:v.triangle}),Iy(r,function(_){return zt.createElement(T2e,{color:_,key:_,onClick:w,onSwatchHover:o})}))};U4.propTypes={width:pi.oneOfType([pi.string,pi.number]),colors:pi.arrayOf(pi.string),triangle:pi.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:pi.object};U4.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Sf(U4);var C2e=function(e){var n=e.direction,r=Aa({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return zt.createElement("div",{style:r.picker})},M2e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j4=function(e){var n=e.width,r=e.height,i=e.onChange,o=e.hsl,s=e.direction,a=e.pointer,c=e.styles,h=c===void 0?{}:c,d=e.className,v=d===void 0?"":d,w=Aa(wf({default:{picker:{position:"relative",width:n,height:r},hue:{radius:"2px"}}},h)),_=function(M){return i({a:1,h:M.h,l:.5,s:1})};return zt.createElement("div",{style:w.picker,className:"hue-picker "+v},zt.createElement(jx,M2e({},w.hue,{hsl:o,pointer:a,onChange:_,direction:s})))};j4.propTypes={styles:pi.object};j4.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:C2e,styles:{}};Sf(j4);var A2e=function(e){var n=e.onChange,r=e.hex,i=e.rgb,o=e.styles,s=o===void 0?{}:o,a=e.className,c=a===void 0?"":a,h=Aa(wf({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},s)),d=function(w,_){w.hex?Gv(w.hex)&&n({hex:w.hex,source:"hex"},_):(w.r||w.g||w.b)&&n({r:w.r||i.r,g:w.g||i.g,b:w.b||i.b,source:"rgb"},_)};return zt.createElement(oS,{styles:s},zt.createElement("div",{style:h.material,className:"material-picker "+c},zt.createElement(Ao,{style:{wrap:h.HEXwrap,input:h.HEXinput,label:h.HEXlabel},label:"hex",value:r,onChange:d}),zt.createElement("div",{style:h.split,className:"flexbox-fix"},zt.createElement("div",{style:h.third},zt.createElement(Ao,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"r",value:i.r,onChange:d})),zt.createElement("div",{style:h.third},zt.createElement(Ao,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"g",value:i.g,onChange:d})),zt.createElement("div",{style:h.third},zt.createElement(Ao,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"b",value:i.b,onChange:d})))))};Sf(A2e);var R2e=function(e){var n=e.onChange,r=e.rgb,i=e.hsv,o=e.hex,s=Aa({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(h,d){h["#"]?Gv(h["#"])&&n({hex:h["#"],source:"hex"},d):h.r||h.g||h.b?n({r:h.r||r.r,g:h.g||r.g,b:h.b||r.b,source:"rgb"},d):(h.h||h.s||h.v)&&n({h:h.h||i.h,s:h.s||i.s,v:h.v||i.v,source:"hsv"},d)};return zt.createElement("div",{style:s.fields},zt.createElement(Ao,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),zt.createElement(Ao,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),zt.createElement(Ao,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),zt.createElement("div",{style:s.divider}),zt.createElement(Ao,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:a}),zt.createElement(Ao,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:a}),zt.createElement(Ao,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:a}),zt.createElement("div",{style:s.divider}),zt.createElement(Ao,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"#",value:o.replace("#",""),onChange:a}),zt.createElement("div",{style:s.fieldSymbols},zt.createElement("div",{style:s.symbol},"°"),zt.createElement("div",{style:s.symbol},"%"),zt.createElement("div",{style:s.symbol},"%")))},P2e=function(e){var n=e.hsl,r=Aa({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":n.l>.5});return zt.createElement("div",{style:r.picker})},I2e=function(){var e=Aa({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return zt.createElement("div",{style:e.pointer},zt.createElement("div",{style:e.left},zt.createElement("div",{style:e.leftInside})),zt.createElement("div",{style:e.right},zt.createElement("div",{style:e.rightInside})))},s9=function(e){var n=e.onClick,r=e.label,i=e.children,o=e.active,s=Aa({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return zt.createElement("div",{style:s.button,onClick:n},r||i)},D2e=function(e){var n=e.rgb,r=e.currentColor,i=Aa({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+n.r+","+n.g+", "+n.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return zt.createElement("div",null,zt.createElement("div",{style:i.label},"new"),zt.createElement("div",{style:i.swatches},zt.createElement("div",{style:i.new}),zt.createElement("div",{style:i.current})),zt.createElement("div",{style:i.label},"current"))},L2e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function N2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k2e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function O2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var G4=function(t){O2e(e,t);function e(n){N2e(this,e);var r=k2e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.state={currentColor:n.hex},r}return L2e(e,[{key:"render",value:function(){var r=this.props,i=r.styles,o=i===void 0?{}:i,s=r.className,a=s===void 0?"":s,c=Aa(wf({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},o));return zt.createElement("div",{style:c.picker,className:"photoshop-picker "+a},zt.createElement("div",{style:c.head},this.props.header),zt.createElement("div",{style:c.body,className:"flexbox-fix"},zt.createElement("div",{style:c.saturation},zt.createElement(rA,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:P2e,onChange:this.props.onChange})),zt.createElement("div",{style:c.hue},zt.createElement(jx,{direction:"vertical",hsl:this.props.hsl,pointer:I2e,onChange:this.props.onChange})),zt.createElement("div",{style:c.controls},zt.createElement("div",{style:c.top,className:"flexbox-fix"},zt.createElement("div",{style:c.previews},zt.createElement(D2e,{rgb:this.props.rgb,currentColor:this.state.currentColor})),zt.createElement("div",{style:c.actions},zt.createElement(s9,{label:"OK",onClick:this.props.onAccept,active:!0}),zt.createElement(s9,{label:"Cancel",onClick:this.props.onCancel}),zt.createElement(R2e,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(zt.Component);G4.propTypes={header:pi.string,styles:pi.object};G4.defaultProps={header:"Color Picker",styles:{}};Sf(G4);var F2e=function(e){var n=e.onChange,r=e.rgb,i=e.hsl,o=e.hex,s=e.disableAlpha,a=Aa({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:s}),c=function(d,v){d.hex?Gv(d.hex)&&n({hex:d.hex,source:"hex"},v):d.r||d.g||d.b?n({r:d.r||r.r,g:d.g||r.g,b:d.b||r.b,a:r.a,source:"rgb"},v):d.a&&(d.a<0?d.a=0:d.a>100&&(d.a=100),d.a/=100,n({h:i.h,s:i.s,l:i.l,a:d.a,source:"rgb"},v))};return zt.createElement("div",{style:a.fields,className:"flexbox-fix"},zt.createElement("div",{style:a.double},zt.createElement(Ao,{style:{input:a.input,label:a.label},label:"hex",value:o.replace("#",""),onChange:c})),zt.createElement("div",{style:a.single},zt.createElement(Ao,{style:{input:a.input,label:a.label},label:"r",value:r.r,onChange:c,dragLabel:"true",dragMax:"255"})),zt.createElement("div",{style:a.single},zt.createElement(Ao,{style:{input:a.input,label:a.label},label:"g",value:r.g,onChange:c,dragLabel:"true",dragMax:"255"})),zt.createElement("div",{style:a.single},zt.createElement(Ao,{style:{input:a.input,label:a.label},label:"b",value:r.b,onChange:c,dragLabel:"true",dragMax:"255"})),zt.createElement("div",{style:a.alpha},zt.createElement(Ao,{style:{input:a.input,label:a.label},label:"a",value:Math.round(r.a*100),onChange:c,dragLabel:"true",dragMax:"100"})))},B2e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QW=function(e){var n=e.colors,r=e.onClick,i=r===void 0?function(){}:r,o=e.onSwatchHover,s=Aa({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!n||!n.length}),a=function(h,d){i({hex:h,source:"hex"},d)};return zt.createElement("div",{style:s.colors,className:"flexbox-fix"},n.map(function(c){var h=typeof c=="string"?{color:c}:c,d=""+h.color+(h.title||"");return zt.createElement("div",{key:d,style:s.swatchWrap},zt.createElement(Py,B2e({},h,{style:s.swatch,onClick:a,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+h.color}})))}))};QW.propTypes={colors:pi.arrayOf(pi.oneOfType([pi.string,pi.shape({color:pi.string,title:pi.string})])).isRequired};var z2e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V4=function(e){var n=e.width,r=e.rgb,i=e.hex,o=e.hsv,s=e.hsl,a=e.onChange,c=e.onSwatchHover,h=e.disableAlpha,d=e.presetColors,v=e.renderers,w=e.styles,_=w===void 0?{}:w,E=e.className,M=E===void 0?"":E,D=Aa(wf({default:z2e({picker:{width:n,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},_),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},_),{disableAlpha:h});return zt.createElement("div",{style:D.picker,className:"sketch-picker "+M},zt.createElement("div",{style:D.saturation},zt.createElement(rA,{style:D.Saturation,hsl:s,hsv:o,onChange:a})),zt.createElement("div",{style:D.controls,className:"flexbox-fix"},zt.createElement("div",{style:D.sliders},zt.createElement("div",{style:D.hue},zt.createElement(jx,{style:D.Hue,hsl:s,onChange:a})),zt.createElement("div",{style:D.alpha},zt.createElement(E4,{style:D.Alpha,rgb:r,hsl:s,renderers:v,onChange:a}))),zt.createElement("div",{style:D.color},zt.createElement(Ux,null),zt.createElement("div",{style:D.activeColor}))),zt.createElement(F2e,{rgb:r,hsl:s,hex:i,onChange:a,disableAlpha:h}),zt.createElement(QW,{colors:d,onClick:a,onSwatchHover:c}))};V4.propTypes={disableAlpha:pi.bool,width:pi.oneOfType([pi.string,pi.number]),styles:pi.object};V4.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};Sf(V4);var Qb=function(e){var n=e.hsl,r=e.offset,i=e.onClick,o=i===void 0?function(){}:i,s=e.active,a=e.first,c=e.last,h=Aa({default:{swatch:{height:"12px",background:"hsl("+n.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:s,first:a,last:c}),d=function(w){return o({h:n.h,s:.5,l:r,source:"hsl"},w)};return zt.createElement("div",{style:h.swatch,onClick:d})},U2e=function(e){var n=e.onClick,r=e.hsl,i=Aa({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return zt.createElement("div",{style:i.swatches},zt.createElement("div",{style:i.swatch},zt.createElement(Qb,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<o&&Math.abs(r.s-.5)<o,onClick:n,first:!0})),zt.createElement("div",{style:i.swatch},zt.createElement(Qb,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<o&&Math.abs(r.s-.5)<o,onClick:n})),zt.createElement("div",{style:i.swatch},zt.createElement(Qb,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<o&&Math.abs(r.s-.5)<o,onClick:n})),zt.createElement("div",{style:i.swatch},zt.createElement(Qb,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<o&&Math.abs(r.s-.5)<o,onClick:n})),zt.createElement("div",{style:i.swatch},zt.createElement(Qb,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<o&&Math.abs(r.s-.5)<o,onClick:n,last:!0})),zt.createElement("div",{style:i.clear}))},j2e=function(){var e=Aa({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return zt.createElement("div",{style:e.picker})},H4=function(e){var n=e.hsl,r=e.onChange,i=e.pointer,o=e.styles,s=o===void 0?{}:o,a=e.className,c=a===void 0?"":a,h=Aa(wf({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},s));return zt.createElement("div",{style:h.wrap||{},className:"slider-picker "+c},zt.createElement("div",{style:h.hue},zt.createElement(jx,{style:h.Hue,hsl:n,pointer:i,onChange:r})),zt.createElement("div",{style:h.swatches},zt.createElement(U2e,{hsl:n,onClick:r})))};H4.propTypes={styles:pi.object};H4.defaultProps={pointer:j2e,styles:{}};Sf(H4);var BE={},l9;function G2e(){if(l9)return BE;l9=1,Object.defineProperty(BE,"__esModule",{value:!0});var t=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s},e=yy(),n=r(e);function r(s){return s&&s.__esModule?s:{default:s}}function i(s,a){var c={};for(var h in s)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(s,h)&&(c[h]=s[h]);return c}var o=24;return BE.default=function(s){var a=s.fill,c=a===void 0?"currentColor":a,h=s.width,d=h===void 0?o:h,v=s.height,w=v===void 0?o:v,_=s.style,E=_===void 0?{}:_,M=i(s,["fill","width","height","style"]);return n.default.createElement("svg",t({viewBox:"0 0 "+o+" "+o,style:t({fill:c,width:d,height:w},E)},M),n.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},BE}var V2e=G2e();const H2e=vy(V2e);var q2e=function(e){var n=e.color,r=e.onClick,i=r===void 0?function(){}:r,o=e.onSwatchHover,s=e.first,a=e.last,c=e.active,h=Aa({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:n,marginBottom:"1px"},check:{color:D4(n),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:s,last:a,active:c,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return zt.createElement(Py,{color:n,style:h.color,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+n}},zt.createElement("div",{style:h.check},zt.createElement(H2e,null)))},$2e=function(e){var n=e.onClick,r=e.onSwatchHover,i=e.group,o=e.active,s=Aa({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return zt.createElement("div",{style:s.group},Iy(i,function(a,c){return zt.createElement(q2e,{key:a,color:a,active:a.toLowerCase()===o,first:c===0,last:c===i.length-1,onClick:n,onSwatchHover:r})}))},q4=function(e){var n=e.width,r=e.height,i=e.onChange,o=e.onSwatchHover,s=e.colors,a=e.hex,c=e.styles,h=c===void 0?{}:c,d=e.className,v=d===void 0?"":d,w=Aa(wf({default:{picker:{width:n,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},h)),_=function(M,D){return i({hex:M,source:"hex"},D)};return zt.createElement("div",{style:w.picker,className:"swatches-picker "+v},zt.createElement(oS,null,zt.createElement("div",{style:w.overflow},zt.createElement("div",{style:w.body},Iy(s,function(E){return zt.createElement($2e,{key:E.toString(),group:E,active:a,onClick:_,onSwatchHover:o})}),zt.createElement("div",{style:w.clear})))))};q4.propTypes={width:pi.oneOfType([pi.string,pi.number]),height:pi.oneOfType([pi.string,pi.number]),colors:pi.arrayOf(pi.arrayOf(pi.string)),styles:pi.object};q4.defaultProps={width:320,height:240,colors:[[c1[900],c1[700],c1[500],c1[300],c1[100]],[h1[900],h1[700],h1[500],h1[300],h1[100]],[f1[900],f1[700],f1[500],f1[300],f1[100]],[d1[900],d1[700],d1[500],d1[300],d1[100]],[p1[900],p1[700],p1[500],p1[300],p1[100]],[g1[900],g1[700],g1[500],g1[300],g1[100]],[m1[900],m1[700],m1[500],m1[300],m1[100]],[v1[900],v1[700],v1[500],v1[300],v1[100]],[y1[900],y1[700],y1[500],y1[300],y1[100]],["#194D33",T2[700],T2[500],T2[300],T2[100]],[_1[900],_1[700],_1[500],_1[300],_1[100]],[x1[900],x1[700],x1[500],x1[300],x1[100]],[b1[900],b1[700],b1[500],b1[300],b1[100]],[w1[900],w1[700],w1[500],w1[300],w1[100]],[S1[900],S1[700],S1[500],S1[300],S1[100]],[E1[900],E1[700],E1[500],E1[300],E1[100]],[T1[900],T1[700],T1[500],T1[300],T1[100]],[C1[900],C1[700],C1[500],C1[300],C1[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Sf(q4);var $4=function(e){var n=e.onChange,r=e.onSwatchHover,i=e.hex,o=e.colors,s=e.width,a=e.triangle,c=e.styles,h=c===void 0?{}:c,d=e.className,v=d===void 0?"":d,w=Aa(wf({default:{card:{width:s,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},h),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),_=function(M,D){Gv(M)&&n({hex:M,source:"hex"},D)};return zt.createElement("div",{style:w.card,className:"twitter-picker "+v},zt.createElement("div",{style:w.triangleShadow}),zt.createElement("div",{style:w.triangle}),zt.createElement("div",{style:w.body},Iy(o,function(E,M){return zt.createElement(Py,{key:M,color:E,hex:E,style:w.swatch,onClick:_,onHover:r,focusStyle:{boxShadow:"0 0 4px "+E}})}),zt.createElement("div",{style:w.hash},"#"),zt.createElement(Ao,{label:null,style:{input:w.input},value:i.replace("#",""),onChange:_}),zt.createElement("div",{style:w.clear})))};$4.propTypes={width:pi.oneOfType([pi.string,pi.number]),triangle:pi.oneOf(["hide","top-left","top-right"]),colors:pi.arrayOf(pi.string),styles:pi.object};$4.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Sf($4);var W4=function(e){var n=Aa({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return zt.createElement("div",{style:n.picker})};W4.propTypes={hsl:pi.shape({h:pi.number,s:pi.number,l:pi.number,a:pi.number})};W4.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var X4=function(e){var n=Aa({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return zt.createElement("div",{style:n.picker})};X4.propTypes={hsl:pi.shape({h:pi.number,s:pi.number,l:pi.number,a:pi.number})};X4.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var W2e=function(e){var n=e.onChange,r=e.rgb,i=e.hsl,o=e.hex,s=e.hsv,a=function(_,E){if(_.hex)Gv(_.hex)&&n({hex:_.hex,source:"hex"},E);else if(_.rgb){var M=_.rgb.split(",");PP(_.rgb,"rgb")&&n({r:M[0],g:M[1],b:M[2],a:1,source:"rgb"},E)}else if(_.hsv){var D=_.hsv.split(",");PP(_.hsv,"hsv")&&(D[2]=D[2].replace("%",""),D[1]=D[1].replace("%",""),D[0]=D[0].replace("°",""),D[1]==1?D[1]=.01:D[2]==1&&(D[2]=.01),n({h:Number(D[0]),s:Number(D[1]),v:Number(D[2]),source:"hsv"},E))}else if(_.hsl){var A=_.hsl.split(",");PP(_.hsl,"hsl")&&(A[2]=A[2].replace("%",""),A[1]=A[1].replace("%",""),A[0]=A[0].replace("°",""),v[1]==1?v[1]=.01:v[2]==1&&(v[2]=.01),n({h:Number(A[0]),s:Number(A[1]),v:Number(A[2]),source:"hsl"},E))}},c=Aa({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),h=r.r+", "+r.g+", "+r.b,d=Math.round(i.h)+"°, "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",v=Math.round(s.h)+"°, "+Math.round(s.s*100)+"%, "+Math.round(s.v*100)+"%";return zt.createElement("div",{style:c.wrap,className:"flexbox-fix"},zt.createElement("div",{style:c.fields},zt.createElement("div",{style:c.double},zt.createElement(Ao,{style:{input:c.input,label:c.label},label:"hex",value:o,onChange:a})),zt.createElement("div",{style:c.column},zt.createElement("div",{style:c.single},zt.createElement(Ao,{style:{input:c.input2,label:c.label2},label:"rgb",value:h,onChange:a})),zt.createElement("div",{style:c.single},zt.createElement(Ao,{style:{input:c.input2,label:c.label2},label:"hsv",value:v,onChange:a})),zt.createElement("div",{style:c.single},zt.createElement(Ao,{style:{input:c.input2,label:c.label2},label:"hsl",value:d,onChange:a})))))},Y4=function(e){var n=e.width,r=e.onChange,i=e.rgb,o=e.hsl,s=e.hsv,a=e.hex,c=e.header,h=e.styles,d=h===void 0?{}:h,v=e.className,w=v===void 0?"":v,_=Aa(wf({default:{picker:{width:n,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},d));return zt.createElement("div",{style:_.picker,className:"google-picker "+w},zt.createElement("div",{style:_.head},c),zt.createElement("div",{style:_.swatch}),zt.createElement("div",{style:_.saturation},zt.createElement(rA,{hsl:o,hsv:s,pointer:W4,onChange:r})),zt.createElement("div",{style:_.body},zt.createElement("div",{style:_.controls,className:"flexbox-fix"},zt.createElement("div",{style:_.hue},zt.createElement(jx,{style:_.Hue,hsl:o,radius:"4px",pointer:X4,onChange:r}))),zt.createElement(W2e,{rgb:i,hsl:o,hex:a,hsv:s,onChange:r})))};Y4.propTypes={width:pi.oneOfType([pi.string,pi.number]),styles:pi.object,header:pi.string};Y4.defaultProps={width:652,styles:{},header:"Color picker"};Sf(Y4);var u9;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(u9||(u9={}));const X2e=Object.freeze({x:0,y:0});var k1;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(k1||(k1={}));var c9;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(c9||(c9={}));var wd;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(wd||(wd={}));wd.Space,wd.Enter,wd.Esc,wd.Space,wd.Enter,wd.Tab;var h9;(function(t){t[t.RightClick=2]="RightClick"})(h9||(h9={}));var f9;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(f9||(f9={}));var d9;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(d9||(d9={}));k1.Backward+"",k1.Forward+"",k1.Backward+"",k1.Forward+"";var oL;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(oL||(oL={}));var sL;(function(t){t.Optimized="optimized"})(sL||(sL={}));oL.WhileDragging,sL.Optimized;({...X2e});var p9;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(p9||(p9={}));wd.Down,wd.Right,wd.Up,wd.Left;var Mo={},mc={},g9;function Vx(){if(g9)return mc;g9=1;function t(A,F,O){if(O===void 0&&(O=Array.prototype),A&&typeof O.find=="function")return O.find.call(A,F);for(var N=0;N<A.length;N++)if(n(A,N)){var H=A[N];if(F.call(void 0,H,N,A))return H}}function e(A,F){return F===void 0&&(F=Object),F&&typeof F.getOwnPropertyDescriptors=="function"&&(A=F.create(null,F.getOwnPropertyDescriptors(A))),F&&typeof F.freeze=="function"?F.freeze(A):A}function n(A,F){return Object.prototype.hasOwnProperty.call(A,F)}function r(A,F){if(A===null||typeof A!="object")throw new TypeError("target is not an object");for(var O in F)n(F,O)&&(A[O]=F[O]);return A}var i=e({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function o(A){return n(i,A.toLowerCase())}var s=e({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(A){return n(s,A.toLowerCase())}var c=e({script:!1,style:!1,textarea:!0,title:!0});function h(A){var F=A.toLowerCase();return n(c,F)&&!c[F]}function d(A){var F=A.toLowerCase();return n(c,F)&&c[F]}function v(A){return A===_.HTML}function w(A){return v(A)||A===_.XML_XHTML_APPLICATION}var _=e({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),E=Object.keys(_).map(function(A){return _[A]});function M(A){return E.indexOf(A)>-1}var D=e({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return mc.assign=r,mc.find=t,mc.freeze=e,mc.HTML_BOOLEAN_ATTRIBUTES=i,mc.HTML_RAW_TEXT_ELEMENTS=c,mc.HTML_VOID_ELEMENTS=s,mc.hasDefaultHTMLNamespace=w,mc.hasOwn=n,mc.isHTMLBooleanAttribute=o,mc.isHTMLRawTextElement=h,mc.isHTMLEscapableRawTextElement=d,mc.isHTMLMimeType=v,mc.isHTMLVoidElement=a,mc.isValidMimeType=M,mc.MIME_TYPE=_,mc.NAMESPACE=D,mc}var G_={},m9;function oA(){if(m9)return G_;m9=1;var t=Vx();function e(w,_){w.prototype=Object.create(Error.prototype,{constructor:{value:w},name:{value:w.name,enumerable:!0,writable:_}})}var n=t.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),r=Object.keys(n);function i(w){return typeof w=="number"&&w>=1&&w<=25}function o(w){return typeof w=="string"&&w.substring(w.length-n.Error.length)===n.Error}function s(w,_){i(w)?(this.name=r[w],this.message=_||""):(this.message=w,this.name=o(_)?_:n.Error),Error.captureStackTrace&&Error.captureStackTrace(this,s)}e(s,!0),Object.defineProperties(s.prototype,{code:{enumerable:!0,get:function(){var w=r.indexOf(this.name);return i(w)?w:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},c=Object.entries(a),h=0;h<c.length;h++){var d=c[h][0];s[d]=c[h][1]}function v(w,_){this.message=w,this.locator=_,Error.captureStackTrace&&Error.captureStackTrace(this,v)}return e(v),G_.DOMException=s,G_.DOMExceptionName=n,G_.ExceptionCode=a,G_.ParseError=v,G_}var Jl={},qa={},v9;function eX(){if(v9)return qa;v9=1;function t(kt){try{typeof kt!="function"&&(kt=RegExp);var Jt=new kt("𝌆","u").exec("𝌆");return!!Jt&&Jt[0].length===2}catch{}return!1}var e=t();function n(kt){if(kt.source[0]!=="[")throw new Error(kt+" can not be used with chars");return kt.source.slice(1,kt.source.lastIndexOf("]"))}function r(kt,Jt){if(kt.source[0]!=="[")throw new Error("/"+kt.source+"/ can not be used with chars_without");if(!Jt||typeof Jt!="string")throw new Error(JSON.stringify(Jt)+" is not a valid search");if(kt.source.indexOf(Jt)===-1)throw new Error('"'+Jt+'" is not is /'+kt.source+"/");if(Jt==="-"&&kt.source.indexOf(Jt)!==1)throw new Error('"'+Jt+'" is not at the first postion of /'+kt.source+"/");return new RegExp(kt.source.replace(Jt,""),e?"u":"")}function i(kt){var Jt=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(rn){var Yt=typeof rn=="string";if(Yt&&Jt===void 0&&rn==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return Yt?rn:rn.source}).join(""),e?"mu":"m")}function o(kt){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(o,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var s="�",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;e&&(a=i("[",n(a),"\\u{10000}-\\u{10FFFF}","]"));var c=/[\x20\x09\x0D\x0A]/,h=n(c),d=i(c,"+"),v=i(c,"*"),w=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;e&&(w=i("[",n(w),"\\u{10000}-\\u{10FFFF}","]"));var _=n(w),E=i("[",_,n(/[-.0-9\xB7]/),n(/[\u0300-\u036F\u203F-\u2040]/),"]"),M=i(w,E,"*"),D=i(E,"+"),A=i("&",M,";"),F=o(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),O=o(A,"|",F),N=i("%",M,";"),H=o(i('"',o(/[^%&"]/,"|",N,"|",O),"*",'"'),"|",i("'",o(/[^%&']/,"|",N,"|",O),"*","'")),G=o('"',o(/[^<&"]/,"|",O),"*",'"',"|","'",o(/[^<&']/,"|",O),"*","'"),W=r(w,":"),X=r(E,":"),K=i(W,X,"*"),k=i(K,o(":",K),"?"),$=i("^",k,"$"),Q=i("(",k,")"),ie=o(/"[^"]*"|'[^']*'/),ae=i(/^<\?/,"(",M,")",o(d,"(",a,"*?)"),"?",/\?>/),ce=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,se=o('"',ce,'*"',"|","'",r(ce,"'"),"*'"),Se="<!--",ye="-->",Te=i(Se,o(r(a,"-"),"|",i("-",r(a,"-"))),"*",ye),pe="#PCDATA",Ie=o(i(/\(/,v,pe,o(v,/\|/,v,k),"*",v,/\)\*/),"|",i(/\(/,v,pe,v,/\)/)),me=/[?*+]?/,xe=i(/\([^>]+\)/,me),ve=o("EMPTY","|","ANY","|",Ie,"|",xe),Ee="<!ELEMENT",De=i(Ee,d,o(k,"|",N),d,o(ve,"|",N),v,">"),We=i("NOTATION",d,/\(/,v,M,o(v,/\|/,v,M),"*",v,/\)/),Ae=i(/\(/,v,D,o(v,/\|/,v,D),"*",v,/\)/),ut=o(We,"|",Ae),pt=o(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",ut),st=o(/#REQUIRED|#IMPLIED/,"|",o(o("#FIXED",d),"?",G)),Ce=o(d,M,d,pt,d,st),It="<!ATTLIST",Ve=i(It,d,M,Ce,"*",v,">"),yt="about:legacy-compat",Ze=o('"'+yt+'"',"|","'"+yt+"'"),wt="SYSTEM",Ut="PUBLIC",ht=o(o(wt,d,ie),"|",o(Ut,d,se,d,ie)),qt=i("^",o(o(wt,d,"(?<SystemLiteralOnly>",ie,")"),"|",o(Ut,d,"(?<PubidLiteral>",se,")",d,"(?<SystemLiteral>",ie,")"))),Ye=o(d,"NDATA",d,M),Re=o(H,"|",o(ht,Ye,"?")),Pt="<!ENTITY",Dt=i(Pt,d,M,d,Re,v,">"),At=o(H,"|",ht),Bt=i(Pt,d,"%",d,M,d,At,v,">"),gn=o(Dt,"|",Bt),Zt=i(Ut,d,se),cn=i("<!NOTATION",d,M,d,o(ht,"|",Zt),v,">"),$t=i(v,"=",v),Et=/1[.]\d+/,qn=i(d,"version",$t,o("'",Et,"'","|",'"',Et,'"')),Dn=/[A-Za-z][-A-Za-z0-9._]*/,sr=o(d,"encoding",$t,o('"',Dn,'"',"|","'",Dn,"'")),rt=o(d,"standalone",$t,o("'",o("yes","|","no"),"'","|",'"',o("yes","|","no"),'"')),ze=i(/^<\?xml/,qn,sr,"?",rt,"?",v,/\?>/),Xe="<!DOCTYPE",Fe="<![CDATA[",He="]]>",mt=/<!\[CDATA\[/,it=/\]\]>/,xt=i(a,"*?",it),Tt=i(mt,xt);return qa.chars=n,qa.chars_without=r,qa.detectUnicodeSupport=t,qa.reg=i,qa.regg=o,qa.ABOUT_LEGACY_COMPAT=yt,qa.ABOUT_LEGACY_COMPAT_SystemLiteral=Ze,qa.AttlistDecl=Ve,qa.CDATA_START=Fe,qa.CDATA_END=He,qa.CDSect=Tt,qa.Char=a,qa.Comment=Te,qa.COMMENT_START=Se,qa.COMMENT_END=ye,qa.DOCTYPE_DECL_START=Xe,qa.elementdecl=De,qa.EntityDecl=gn,qa.EntityValue=H,qa.ExternalID=ht,qa.ExternalID_match=qt,qa.Name=M,qa.NotationDecl=cn,qa.Reference=O,qa.PEReference=N,qa.PI=ae,qa.PUBLIC=Ut,qa.PubidLiteral=se,qa.QName=k,qa.QName_exact=$,qa.QName_group=Q,qa.S=d,qa.SChar_s=h,qa.S_OPT=v,qa.SYSTEM=wt,qa.SystemLiteral=ie,qa.UNICODE_REPLACEMENT_CHARACTER=s,qa.UNICODE_SUPPORT=e,qa.XMLDecl=ze,qa}var y9;function tX(){if(y9)return Jl;y9=1;var t=Vx(),e=t.find,n=t.hasDefaultHTMLNamespace,r=t.hasOwn,i=t.isHTMLMimeType,o=t.isHTMLRawTextElement,s=t.isHTMLVoidElement,a=t.MIME_TYPE,c=t.NAMESPACE,h=Symbol(),d=oA(),v=d.DOMException,w=d.DOMExceptionName,_=eX();function E(Pe){if(Pe!==h)throw new TypeError("Illegal constructor")}function M(Pe){return Pe!==""}function D(Pe){return Pe?Pe.split(/[\t\n\f\r ]+/).filter(M):[]}function A(Pe,je){return r(Pe,je)||(Pe[je]=!0),Pe}function F(Pe){if(!Pe)return[];var je=D(Pe);return Object.keys(je.reduce(A,{}))}function O(Pe){return function(je){return Pe&&Pe.indexOf(je)!==-1}}function N(Pe){if(!_.QName_exact.test(Pe))throw new v(v.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+Pe+'"')}function H(Pe,je){N(je),Pe=Pe||null;var _t=null,Qt=je;if(je.indexOf(":")>=0){var en=je.split(":");_t=en[0],Qt=en[1]}if(_t!==null&&Pe===null)throw new v(v.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(_t==="xml"&&Pe!==t.NAMESPACE.XML)throw new v(v.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((_t==="xmlns"||je==="xmlns")&&Pe!==t.NAMESPACE.XMLNS)throw new v(v.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(Pe===t.NAMESPACE.XMLNS&&_t!=="xmlns"&&je!=="xmlns")throw new v(v.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[Pe,_t,Qt]}function G(Pe,je){for(var _t in Pe)r(Pe,_t)&&(je[_t]=Pe[_t])}function W(Pe,je){var _t=Pe.prototype;if(!(_t instanceof je)){let Qt=function(){};Qt.prototype=je.prototype,Qt=new Qt,G(_t,Qt),Pe.prototype=_t=Qt}_t.constructor!=Pe&&(typeof Pe!="function"&&console.error("unknown Class:"+Pe),_t.constructor=Pe)}var X={},K=X.ELEMENT_NODE=1,k=X.ATTRIBUTE_NODE=2,$=X.TEXT_NODE=3,Q=X.CDATA_SECTION_NODE=4,ie=X.ENTITY_REFERENCE_NODE=5,ae=X.ENTITY_NODE=6,ce=X.PROCESSING_INSTRUCTION_NODE=7,se=X.COMMENT_NODE=8,Se=X.DOCUMENT_NODE=9,ye=X.DOCUMENT_TYPE_NODE=10,Te=X.DOCUMENT_FRAGMENT_NODE=11,pe=X.NOTATION_NODE=12,Ie=t.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function me(Pe,je){if(je.length<Pe.length)return me(je,Pe);var _t=null;for(var Qt in Pe){if(Pe[Qt]!==je[Qt])return _t;_t=Pe[Qt]}return _t}function xe(Pe){return Pe.guid||(Pe.guid=Math.random()),Pe.guid}function ve(){}ve.prototype={length:0,item:function(Pe){return Pe>=0&&Pe<this.length?this[Pe]:null},toString:function(Pe){for(var je=[],_t=0;_t<this.length;_t++)Yt(this[_t],je,Pe);return je.join("")},filter:function(Pe){return Array.prototype.filter.call(this,Pe)},indexOf:function(Pe){return Array.prototype.indexOf.call(this,Pe)}},ve.prototype[Symbol.iterator]=function(){var Pe=this,je=0;return{next:function(){return je<Pe.length?{value:Pe[je++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Ee(Pe,je){this._node=Pe,this._refresh=je,De(this)}function De(Pe){var je=Pe._node._inc||Pe._node.ownerDocument._inc;if(Pe._inc!==je){var _t=Pe._refresh(Pe._node);if(jt(Pe,"length",_t.length),!Pe.$$length||_t.length<Pe.$$length)for(var Qt=_t.length;Qt in Pe;Qt++)r(Pe,Qt)&&delete Pe[Qt];G(_t,Pe),Pe._inc=je}}Ee.prototype.item=function(Pe){return De(this),this[Pe]||null},W(Ee,ve);function We(){}function Ae(Pe,je){for(var _t=0;_t<Pe.length;){if(Pe[_t]===je)return _t;_t++}}function ut(Pe,je,_t,Qt){if(Qt?je[Ae(je,Qt)]=_t:(je[je.length]=_t,je.length++),Pe){_t.ownerElement=Pe;var en=Pe.ownerDocument;en&&(Qt&&wt(en,Pe,Qt),Ze(en,Pe,_t))}}function pt(Pe,je,_t){var Qt=Ae(je,_t);if(Qt>=0){for(var en=je.length-1;Qt<=en;)je[Qt]=je[++Qt];if(je.length=en,Pe){var Fn=Pe.ownerDocument;Fn&&wt(Fn,Pe,_t),_t.ownerElement=null}}}We.prototype={length:0,item:ve.prototype.item,getNamedItem:function(Pe){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(Pe=Pe.toLowerCase());for(var je=0;je<this.length;){var _t=this[je];if(_t.nodeName===Pe)return _t;je++}return null},setNamedItem:function(Pe){var je=Pe.ownerElement;if(je&&je!==this._ownerElement)throw new v(v.INUSE_ATTRIBUTE_ERR);var _t=this.getNamedItemNS(Pe.namespaceURI,Pe.localName);return _t===Pe?Pe:(ut(this._ownerElement,this,Pe,_t),_t)},setNamedItemNS:function(Pe){return this.setNamedItem(Pe)},removeNamedItem:function(Pe){var je=this.getNamedItem(Pe);if(!je)throw new v(v.NOT_FOUND_ERR,Pe);return pt(this._ownerElement,this,je),je},removeNamedItemNS:function(Pe,je){var _t=this.getNamedItemNS(Pe,je);if(!_t)throw new v(v.NOT_FOUND_ERR,Pe?Pe+" : "+je:je);return pt(this._ownerElement,this,_t),_t},getNamedItemNS:function(Pe,je){Pe||(Pe=null);for(var _t=0;_t<this.length;){var Qt=this[_t];if(Qt.localName===je&&Qt.namespaceURI===Pe)return Qt;_t++}return null}},We.prototype[Symbol.iterator]=function(){var Pe=this,je=0;return{next:function(){return je<Pe.length?{value:Pe[je++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function st(){}st.prototype={hasFeature:function(Pe,je){return!0},createDocument:function(Pe,je,_t){var Qt=a.XML_APPLICATION;Pe===c.HTML?Qt=a.XML_XHTML_APPLICATION:Pe===c.SVG&&(Qt=a.XML_SVG_IMAGE);var en=new yt(h,{contentType:Qt});if(en.implementation=this,en.childNodes=new ve,en.doctype=_t||null,_t&&en.appendChild(_t),je){var Fn=en.createElementNS(Pe,je);en.appendChild(Fn)}return en},createDocumentType:function(Pe,je,_t,Qt){N(Pe);var en=new Xe(h);return en.name=Pe,en.nodeName=Pe,en.publicId=je||"",en.systemId=_t||"",en.internalSubset=Qt||"",en.childNodes=new ve,en},createHTMLDocument:function(Pe){var je=new yt(h,{contentType:a.HTML});if(je.implementation=this,je.childNodes=new ve,Pe!==!1){je.doctype=this.createDocumentType("html"),je.doctype.ownerDocument=je,je.appendChild(je.doctype);var _t=je.createElement("html");je.appendChild(_t);var Qt=je.createElement("head");if(_t.appendChild(Qt),typeof Pe=="string"){var en=je.createElement("title");en.appendChild(je.createTextNode(Pe)),Qt.appendChild(en)}_t.appendChild(je.createElement("body"))}return je}};function Ce(Pe){E(Pe)}Ce.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var Pe=this.getRootNode();return Pe&&Pe.nodeType===Pe.DOCUMENT_NODE},contains:function(Pe){if(!Pe)return!1;var je=Pe;do{if(this===je)return!0;je=Pe.parentNode}while(je);return!1},getRootNode:function(Pe){var je=this;do{if(!je.parentNode)return je;je=je.parentNode}while(je)},isEqualNode:function(Pe){if(!Pe||this.nodeType!==Pe.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==Pe.name||this.publicId!==Pe.publicId||this.systemId!==Pe.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==Pe.namespaceURI||this.prefix!==Pe.prefix||this.localName!==Pe.localName||this.attributes.length!==Pe.attributes.length)return!1;for(var je=0;je<this.attributes.length;je++){var _t=this.attributes.item(je);if(!_t.isEqualNode(Pe.getAttributeNodeNS(_t.namespaceURI,_t.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==Pe.namespaceURI||this.localName!==Pe.localName||this.value!==Pe.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==Pe.target||this.data!==Pe.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==Pe.data)return!1;break}if(this.childNodes.length!==Pe.childNodes.length)return!1;for(var je=0;je<this.childNodes.length;je++)if(!this.childNodes[je].isEqualNode(Pe.childNodes[je]))return!1;return!0},isSameNode:function(Pe){return this===Pe},insertBefore:function(Pe,je){return $t(this,Pe,je)},replaceChild:function(Pe,je){$t(this,Pe,je,cn),je&&this.removeChild(je)},removeChild:function(Pe){return ht(this,Pe)},appendChild:function(Pe){return this.insertBefore(Pe,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(Pe){return An(this.ownerDocument||this,this,Pe)},normalize:function(){for(var Pe=this.firstChild;Pe;){var je=Pe.nextSibling;je&&je.nodeType==$&&Pe.nodeType==$?(this.removeChild(je),Pe.appendData(je.data)):(Pe.normalize(),Pe=je)}},isSupported:function(Pe,je){return this.ownerDocument.implementation.hasFeature(Pe,je)},lookupPrefix:function(Pe){for(var je=this;je;){var _t=je._nsMap;if(_t){for(var Qt in _t)if(r(_t,Qt)&&_t[Qt]===Pe)return Qt}je=je.nodeType==k?je.ownerDocument:je.parentNode}return null},lookupNamespaceURI:function(Pe){for(var je=this;je;){var _t=je._nsMap;if(_t&&r(_t,Pe))return _t[Pe];je=je.nodeType==k?je.ownerDocument:je.parentNode}return null},isDefaultNamespace:function(Pe){var je=this.lookupPrefix(Pe);return je==null},compareDocumentPosition:function(Pe){if(this===Pe)return 0;var je=Pe,_t=this,Qt=null,en=null;if(je instanceof qn&&(Qt=je,je=Qt.ownerElement),_t instanceof qn&&(en=_t,_t=en.ownerElement,Qt&&je&&_t===je))for(var Fn=0,Wn;Wn=_t.attributes[Fn];Fn++){if(Wn===Qt)return Ie.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Ie.DOCUMENT_POSITION_PRECEDING;if(Wn===en)return Ie.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Ie.DOCUMENT_POSITION_FOLLOWING}if(!je||!_t||_t.ownerDocument!==je.ownerDocument)return Ie.DOCUMENT_POSITION_DISCONNECTED+Ie.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(xe(_t.ownerDocument)>xe(je.ownerDocument)?Ie.DOCUMENT_POSITION_FOLLOWING:Ie.DOCUMENT_POSITION_PRECEDING);if(en&&je===_t)return Ie.DOCUMENT_POSITION_CONTAINS+Ie.DOCUMENT_POSITION_PRECEDING;if(Qt&&je===_t)return Ie.DOCUMENT_POSITION_CONTAINED_BY+Ie.DOCUMENT_POSITION_FOLLOWING;for(var kr=[],Qr=je.parentNode;Qr;){if(!en&&Qr===_t)return Ie.DOCUMENT_POSITION_CONTAINED_BY+Ie.DOCUMENT_POSITION_FOLLOWING;kr.push(Qr),Qr=Qr.parentNode}kr.reverse();for(var vi=[],zr=_t.parentNode;zr;){if(!Qt&&zr===je)return Ie.DOCUMENT_POSITION_CONTAINS+Ie.DOCUMENT_POSITION_PRECEDING;vi.push(zr),zr=zr.parentNode}vi.reverse();var zn=me(kr,vi);for(var En in zn.childNodes){var mr=zn.childNodes[En];if(mr===_t)return Ie.DOCUMENT_POSITION_FOLLOWING;if(mr===je)return Ie.DOCUMENT_POSITION_PRECEDING;if(vi.indexOf(mr)>=0)return Ie.DOCUMENT_POSITION_FOLLOWING;if(kr.indexOf(mr)>=0)return Ie.DOCUMENT_POSITION_PRECEDING}return 0}};function It(Pe){return Pe=="<"&&"&lt;"||Pe==">"&&"&gt;"||Pe=="&"&&"&amp;"||Pe=='"'&&"&quot;"||"&#"+Pe.charCodeAt()+";"}G(X,Ce),G(X,Ce.prototype),G(Ie,Ce),G(Ie,Ce.prototype);function Ve(Pe,je){if(je(Pe))return!0;if(Pe=Pe.firstChild)do if(Ve(Pe,je))return!0;while(Pe=Pe.nextSibling)}function yt(Pe,je){E(Pe);var _t=je||{};this.ownerDocument=this,this.contentType=_t.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function Ze(Pe,je,_t){Pe&&Pe._inc++;var Qt=_t.namespaceURI;Qt===c.XMLNS&&(je._nsMap[_t.prefix?_t.localName:""]=_t.value)}function wt(Pe,je,_t,Qt){Pe&&Pe._inc++;var en=_t.namespaceURI;en===c.XMLNS&&delete je._nsMap[_t.prefix?_t.localName:""]}function Ut(Pe,je,_t){if(Pe&&Pe._inc){Pe._inc++;var Qt=je.childNodes;if(_t&&!_t.nextSibling)Qt[Qt.length++]=_t;else{for(var en=je.firstChild,Fn=0;en;)Qt[Fn++]=en,en=en.nextSibling;Qt.length=Fn,delete Qt[Qt.length]}}}function ht(Pe,je){if(Pe!==je.parentNode)throw new v(v.NOT_FOUND_ERR,"child's parent is not parent");var _t=je.previousSibling,Qt=je.nextSibling;return _t?_t.nextSibling=Qt:Pe.firstChild=Qt,Qt?Qt.previousSibling=_t:Pe.lastChild=_t,Ut(Pe.ownerDocument,Pe),je.parentNode=null,je.previousSibling=null,je.nextSibling=null,je}function qt(Pe){return Pe&&(Pe.nodeType===Ce.DOCUMENT_NODE||Pe.nodeType===Ce.DOCUMENT_FRAGMENT_NODE||Pe.nodeType===Ce.ELEMENT_NODE)}function Ye(Pe){return Pe&&(Pe.nodeType===Ce.CDATA_SECTION_NODE||Pe.nodeType===Ce.COMMENT_NODE||Pe.nodeType===Ce.DOCUMENT_FRAGMENT_NODE||Pe.nodeType===Ce.DOCUMENT_TYPE_NODE||Pe.nodeType===Ce.ELEMENT_NODE||Pe.nodeType===Ce.PROCESSING_INSTRUCTION_NODE||Pe.nodeType===Ce.TEXT_NODE)}function Re(Pe){return Pe&&Pe.nodeType===Ce.DOCUMENT_TYPE_NODE}function Pt(Pe){return Pe&&Pe.nodeType===Ce.ELEMENT_NODE}function Dt(Pe){return Pe&&Pe.nodeType===Ce.TEXT_NODE}function At(Pe,je){var _t=Pe.childNodes||[];if(e(_t,Pt)||Re(je))return!1;var Qt=e(_t,Re);return!(je&&Qt&&_t.indexOf(Qt)>_t.indexOf(je))}function Bt(Pe,je){var _t=Pe.childNodes||[];function Qt(Fn){return Pt(Fn)&&Fn!==je}if(e(_t,Qt))return!1;var en=e(_t,Re);return!(je&&en&&_t.indexOf(en)>_t.indexOf(je))}function gn(Pe,je,_t){if(!qt(Pe))throw new v(v.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+Pe.nodeType);if(_t&&_t.parentNode!==Pe)throw new v(v.NOT_FOUND_ERR,"child not in parent");if(!Ye(je)||Re(je)&&Pe.nodeType!==Ce.DOCUMENT_NODE)throw new v(v.HIERARCHY_REQUEST_ERR,"Unexpected node type "+je.nodeType+" for parent node type "+Pe.nodeType)}function Zt(Pe,je,_t){var Qt=Pe.childNodes||[],en=je.childNodes||[];if(je.nodeType===Ce.DOCUMENT_FRAGMENT_NODE){var Fn=en.filter(Pt);if(Fn.length>1||e(en,Dt))throw new v(v.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Fn.length===1&&!At(Pe,_t))throw new v(v.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Pt(je)&&!At(Pe,_t))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(Re(je)){if(e(Qt,Re))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Wn=e(Qt,Pt);if(_t&&Qt.indexOf(Wn)<Qt.indexOf(_t))throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!_t&&Wn)throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function cn(Pe,je,_t){var Qt=Pe.childNodes||[],en=je.childNodes||[];if(je.nodeType===Ce.DOCUMENT_FRAGMENT_NODE){var Fn=en.filter(Pt);if(Fn.length>1||e(en,Dt))throw new v(v.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Fn.length===1&&!Bt(Pe,_t))throw new v(v.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Pt(je)&&!Bt(Pe,_t))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(Re(je)){if(e(Qt,function(Qr){return Re(Qr)&&Qr!==_t}))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Wn=e(Qt,Pt);if(_t&&Qt.indexOf(Wn)<Qt.indexOf(_t))throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function $t(Pe,je,_t,Qt){gn(Pe,je,_t),Pe.nodeType===Ce.DOCUMENT_NODE&&(Qt||Zt)(Pe,je,_t);var en=je.parentNode;if(en&&en.removeChild(je),je.nodeType===Te){var Fn=je.firstChild;if(Fn==null)return je;var Wn=je.lastChild}else Fn=Wn=je;var kr=_t?_t.previousSibling:Pe.lastChild;Fn.previousSibling=kr,Wn.nextSibling=_t,kr?kr.nextSibling=Fn:Pe.firstChild=Fn,_t==null?Pe.lastChild=Wn:_t.previousSibling=Wn;do Fn.parentNode=Pe;while(Fn!==Wn&&(Fn=Fn.nextSibling));return Ut(Pe.ownerDocument||Pe,Pe,je),je.nodeType==Te&&(je.firstChild=je.lastChild=null),je}yt.prototype={implementation:null,nodeName:"#document",nodeType:Se,doctype:null,documentElement:null,_inc:1,insertBefore:function(Pe,je){if(Pe.nodeType===Te){for(var _t=Pe.firstChild;_t;){var Qt=_t.nextSibling;this.insertBefore(_t,je),_t=Qt}return Pe}return $t(this,Pe,je),Pe.ownerDocument=this,this.documentElement===null&&Pe.nodeType===K&&(this.documentElement=Pe),Pe},removeChild:function(Pe){var je=ht(this,Pe);return je===this.documentElement&&(this.documentElement=null),je},replaceChild:function(Pe,je){$t(this,Pe,je,cn),Pe.ownerDocument=this,je&&this.removeChild(je),Pt(Pe)&&(this.documentElement=Pe)},importNode:function(Pe,je){return Qn(this,Pe,je)},getElementById:function(Pe){var je=null;return Ve(this.documentElement,function(_t){if(_t.nodeType==K&&_t.getAttribute("id")==Pe)return je=_t,!0}),je},createElement:function(Pe){var je=new Et(h);je.ownerDocument=this,this.type==="html"&&(Pe=Pe.toLowerCase()),n(this.contentType)&&(je.namespaceURI=c.HTML),je.nodeName=Pe,je.tagName=Pe,je.localName=Pe,je.childNodes=new ve;var _t=je.attributes=new We;return _t._ownerElement=je,je},createDocumentFragment:function(){var Pe=new it(h);return Pe.ownerDocument=this,Pe.childNodes=new ve,Pe},createTextNode:function(Pe){var je=new sr(h);return je.ownerDocument=this,je.childNodes=new ve,je.appendData(Pe),je},createComment:function(Pe){var je=new rt(h);return je.ownerDocument=this,je.childNodes=new ve,je.appendData(Pe),je},createCDATASection:function(Pe){var je=new ze(h);return je.ownerDocument=this,je.childNodes=new ve,je.appendData(Pe),je},createProcessingInstruction:function(Pe,je){var _t=new xt(h);return _t.ownerDocument=this,_t.childNodes=new ve,_t.nodeName=_t.target=Pe,_t.nodeValue=_t.data=je,_t},createAttribute:function(Pe){if(!_.QName_exact.test(Pe))throw new v(v.INVALID_CHARACTER_ERR,'invalid character in name "'+Pe+'"');return this.type==="html"&&(Pe=Pe.toLowerCase()),this._createAttribute(Pe)},_createAttribute:function(Pe){var je=new qn(h);return je.ownerDocument=this,je.childNodes=new ve,je.name=Pe,je.nodeName=Pe,je.localName=Pe,je.specified=!0,je},createEntityReference:function(Pe){if(!_.Name.test(Pe))throw new v(v.INVALID_CHARACTER_ERR,'not a valid xml name "'+Pe+'"');if(this.type==="html")throw new v("document is an html document",w.NotSupportedError);var je=new mt(h);return je.ownerDocument=this,je.childNodes=new ve,je.nodeName=Pe,je},createElementNS:function(Pe,je){var _t=H(Pe,je),Qt=new Et(h),en=Qt.attributes=new We;return Qt.childNodes=new ve,Qt.ownerDocument=this,Qt.nodeName=je,Qt.tagName=je,Qt.namespaceURI=_t[0],Qt.prefix=_t[1],Qt.localName=_t[2],en._ownerElement=Qt,Qt},createAttributeNS:function(Pe,je){var _t=H(Pe,je),Qt=new qn(h);return Qt.ownerDocument=this,Qt.childNodes=new ve,Qt.nodeName=je,Qt.name=je,Qt.specified=!0,Qt.namespaceURI=_t[0],Qt.prefix=_t[1],Qt.localName=_t[2],Qt}},W(yt,Ce);function Et(Pe){E(Pe),this._nsMap=Object.create(null)}Et.prototype={nodeType:K,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===c.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(Pe){return!!this.getAttributeNode(Pe)},getAttribute:function(Pe){var je=this.getAttributeNode(Pe);return je?je.value:null},getAttributeNode:function(Pe){return this._isInHTMLDocumentAndNamespace()&&(Pe=Pe.toLowerCase()),this.attributes.getNamedItem(Pe)},setAttribute:function(Pe,je){this._isInHTMLDocumentAndNamespace()&&(Pe=Pe.toLowerCase());var _t=this.getAttributeNode(Pe);_t?_t.value=_t.nodeValue=""+je:(_t=this.ownerDocument._createAttribute(Pe),_t.value=_t.nodeValue=""+je,this.setAttributeNode(_t))},removeAttribute:function(Pe){var je=this.getAttributeNode(Pe);je&&this.removeAttributeNode(je)},setAttributeNode:function(Pe){return this.attributes.setNamedItem(Pe)},setAttributeNodeNS:function(Pe){return this.attributes.setNamedItemNS(Pe)},removeAttributeNode:function(Pe){return this.attributes.removeNamedItem(Pe.nodeName)},removeAttributeNS:function(Pe,je){var _t=this.getAttributeNodeNS(Pe,je);_t&&this.removeAttributeNode(_t)},hasAttributeNS:function(Pe,je){return this.getAttributeNodeNS(Pe,je)!=null},getAttributeNS:function(Pe,je){var _t=this.getAttributeNodeNS(Pe,je);return _t?_t.value:null},setAttributeNS:function(Pe,je,_t){var Qt=H(Pe,je),en=Qt[2],Fn=this.getAttributeNodeNS(Pe,en);Fn?Fn.value=Fn.nodeValue=""+_t:(Fn=this.ownerDocument.createAttributeNS(Pe,je),Fn.value=Fn.nodeValue=""+_t,this.setAttributeNode(Fn))},getAttributeNodeNS:function(Pe,je){return this.attributes.getNamedItemNS(Pe,je)},getElementsByClassName:function(Pe){var je=F(Pe);return new Ee(this,function(_t){var Qt=[];return je.length>0&&Ve(_t,function(en){if(en!==_t&&en.nodeType===K){var Fn=en.getAttribute("class");if(Fn){var Wn=Pe===Fn;if(!Wn){var kr=F(Fn);Wn=je.every(O(kr))}Wn&&Qt.push(en)}}}),Qt})},getElementsByTagName:function(Pe){var je=(this.nodeType===Se?this:this.ownerDocument).type==="html",_t=Pe.toLowerCase();return new Ee(this,function(Qt){var en=[];return Ve(Qt,function(Fn){if(!(Fn===Qt||Fn.nodeType!==K))if(Pe==="*")en.push(Fn);else{var Wn=Fn.getQualifiedName(),kr=je&&Fn.namespaceURI===c.HTML?_t:Pe;Wn===kr&&en.push(Fn)}}),en})},getElementsByTagNameNS:function(Pe,je){return new Ee(this,function(_t){var Qt=[];return Ve(_t,function(en){en!==_t&&en.nodeType===K&&(Pe==="*"||en.namespaceURI===Pe)&&(je==="*"||en.localName==je)&&Qt.push(en)}),Qt})}},yt.prototype.getElementsByClassName=Et.prototype.getElementsByClassName,yt.prototype.getElementsByTagName=Et.prototype.getElementsByTagName,yt.prototype.getElementsByTagNameNS=Et.prototype.getElementsByTagNameNS,W(Et,Ce);function qn(Pe){E(Pe),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}qn.prototype.nodeType=k,W(qn,Ce);function Dn(Pe){E(Pe)}Dn.prototype={data:"",substringData:function(Pe,je){return this.data.substring(Pe,Pe+je)},appendData:function(Pe){Pe=this.data+Pe,this.nodeValue=this.data=Pe,this.length=Pe.length},insertData:function(Pe,je){this.replaceData(Pe,0,je)},deleteData:function(Pe,je){this.replaceData(Pe,je,"")},replaceData:function(Pe,je,_t){var Qt=this.data.substring(0,Pe),en=this.data.substring(Pe+je);_t=Qt+_t+en,this.nodeValue=this.data=_t,this.length=_t.length}},W(Dn,Ce);function sr(Pe){E(Pe)}sr.prototype={nodeName:"#text",nodeType:$,splitText:function(Pe){var je=this.data,_t=je.substring(Pe);je=je.substring(0,Pe),this.data=this.nodeValue=je,this.length=je.length;var Qt=this.ownerDocument.createTextNode(_t);return this.parentNode&&this.parentNode.insertBefore(Qt,this.nextSibling),Qt}},W(sr,Dn);function rt(Pe){E(Pe)}rt.prototype={nodeName:"#comment",nodeType:se},W(rt,Dn);function ze(Pe){E(Pe)}ze.prototype={nodeName:"#cdata-section",nodeType:Q},W(ze,sr);function Xe(Pe){E(Pe)}Xe.prototype.nodeType=ye,W(Xe,Ce);function Fe(Pe){E(Pe)}Fe.prototype.nodeType=pe,W(Fe,Ce);function He(Pe){E(Pe)}He.prototype.nodeType=ae,W(He,Ce);function mt(Pe){E(Pe)}mt.prototype.nodeType=ie,W(mt,Ce);function it(Pe){E(Pe)}it.prototype.nodeName="#document-fragment",it.prototype.nodeType=Te,W(it,Ce);function xt(Pe){E(Pe)}xt.prototype.nodeType=ce,W(xt,Dn);function Tt(){}Tt.prototype.serializeToString=function(Pe,je){return kt.call(Pe,je)},Ce.prototype.toString=kt;function kt(Pe){var je=[],_t=this.nodeType===Se&&this.documentElement||this,Qt=_t.prefix,en=_t.namespaceURI;if(en&&Qt==null){var Qt=_t.lookupPrefix(en);if(Qt==null)var Fn=[{namespace:en,prefix:null}]}return Yt(this,je,Pe,Fn),je.join("")}function Jt(Pe,je,_t){var Qt=Pe.prefix||"",en=Pe.namespaceURI;if(!en||Qt==="xml"&&en===c.XML||en===c.XMLNS)return!1;for(var Fn=_t.length;Fn--;){var Wn=_t[Fn];if(Wn.prefix===Qt)return Wn.namespace!==en}return!0}function rn(Pe,je,_t){Pe.push(" ",je,'="',_t.replace(/[<>&"\t\n\r]/g,It),'"')}function Yt(Pe,je,_t,Qt){Qt||(Qt=[]);var en=Pe.nodeType===Se?Pe:Pe.ownerDocument,Fn=en.type==="html";if(_t)if(Pe=_t(Pe),Pe){if(typeof Pe=="string"){je.push(Pe);return}}else return;switch(Pe.nodeType){case K:var Wn=Pe.attributes,kr=Wn.length,Ln=Pe.firstChild,Qr=Pe.tagName,vi=Qr;if(!Fn&&!Pe.prefix&&Pe.namespaceURI){for(var zr,zn=0;zn<Wn.length;zn++)if(Wn.item(zn).name==="xmlns"){zr=Wn.item(zn).value;break}if(!zr)for(var En=Qt.length-1;En>=0;En--){var mr=Qt[En];if(mr.prefix===""&&mr.namespace===Pe.namespaceURI){zr=mr.namespace;break}}if(zr!==Pe.namespaceURI)for(var En=Qt.length-1;En>=0;En--){var mr=Qt[En];if(mr.namespace===Pe.namespaceURI){mr.prefix&&(vi=mr.prefix+":"+Qr);break}}}je.push("<",vi);for(var yi=0;yi<kr;yi++){var _i=Wn.item(yi);_i.prefix=="xmlns"?Qt.push({prefix:_i.localName,namespace:_i.value}):_i.nodeName=="xmlns"&&Qt.push({prefix:"",namespace:_i.value})}for(var yi=0;yi<kr;yi++){var _i=Wn.item(yi);if(Jt(_i,Fn,Qt)){var gi=_i.prefix||"",lt=_i.namespaceURI;rn(je,gi?"xmlns:"+gi:"xmlns",lt),Qt.push({prefix:gi,namespace:lt})}Yt(_i,je,_t,Qt)}if(Qr===vi&&Jt(Pe,Fn,Qt)){var gi=Pe.prefix||"",lt=Pe.namespaceURI;rn(je,gi?"xmlns:"+gi:"xmlns",lt),Qt.push({prefix:gi,namespace:lt})}var yn=!Ln;if(yn&&(Fn||Pe.namespaceURI===c.HTML)&&(yn=s(Qr)),yn)je.push("/>");else{if(je.push(">"),Fn&&o(Qr))for(;Ln;)Ln.data?je.push(Ln.data):Yt(Ln,je,_t,Qt.slice()),Ln=Ln.nextSibling;else for(;Ln;)Yt(Ln,je,_t,Qt.slice()),Ln=Ln.nextSibling;je.push("</",vi,">")}return;case Se:case Te:for(var Ln=Pe.firstChild;Ln;)Yt(Ln,je,_t,Qt.slice()),Ln=Ln.nextSibling;return;case k:return rn(je,Pe.name,Pe.value);case $:return je.push(Pe.data.replace(/[<&>]/g,It));case Q:return je.push(_.CDATA_START,Pe.data,_.CDATA_END);case se:return je.push(_.COMMENT_START,Pe.data,_.COMMENT_END);case ye:var Vn=Pe.publicId,bn=Pe.systemId;je.push(_.DOCTYPE_DECL_START," ",Pe.name),Vn?(je.push(" ",_.PUBLIC," ",Vn),bn&&bn!=="."&&je.push(" ",bn)):bn&&bn!=="."&&je.push(" ",_.SYSTEM," ",bn),Pe.internalSubset&&je.push(" [",Pe.internalSubset,"]"),je.push(">");return;case ce:return je.push("<?",Pe.target," ",Pe.data,"?>");case ie:return je.push("&",Pe.nodeName,";");default:je.push("??",Pe.nodeName)}}function Qn(Pe,je,_t){var Qt;switch(je.nodeType){case K:Qt=je.cloneNode(!1),Qt.ownerDocument=Pe;case Te:break;case k:_t=!0;break}if(Qt||(Qt=je.cloneNode(!1)),Qt.ownerDocument=Pe,Qt.parentNode=null,_t)for(var en=je.firstChild;en;)Qt.appendChild(Qn(Pe,en,_t)),en=en.nextSibling;return Qt}function An(Pe,je,_t){var Qt=new je.constructor(h);for(var en in je)if(r(je,en)){var Fn=je[en];typeof Fn!="object"&&Fn!=Qt[en]&&(Qt[en]=Fn)}switch(je.childNodes&&(Qt.childNodes=new ve),Qt.ownerDocument=Pe,Qt.nodeType){case K:var Wn=je.attributes,kr=Qt.attributes=new We,Qr=Wn.length;kr._ownerElement=Qt;for(var vi=0;vi<Qr;vi++)Qt.setAttributeNode(An(Pe,Wn.item(vi),!0));break;case k:_t=!0}if(_t)for(var zr=je.firstChild;zr;)Qt.appendChild(An(Pe,zr,_t)),zr=zr.nextSibling;return Qt}function jt(Pe,je,_t){Pe[je]=_t}try{if(Object.defineProperty){let Pe=function(je){switch(je.nodeType){case K:case Te:var _t=[];for(je=je.firstChild;je;)je.nodeType!==7&&je.nodeType!==8&&_t.push(Pe(je)),je=je.nextSibling;return _t.join("");default:return je.nodeValue}};Object.defineProperty(Ee.prototype,"length",{get:function(){return De(this),this.$$length}}),Object.defineProperty(Ce.prototype,"textContent",{get:function(){return Pe(this)},set:function(je){switch(this.nodeType){case K:case Te:for(;this.firstChild;)this.removeChild(this.firstChild);(je||String(je))&&this.appendChild(this.ownerDocument.createTextNode(je));break;default:this.data=je,this.value=je,this.nodeValue=je}}}),jt=function(je,_t,Qt){je["$$"+_t]=Qt}}}catch{}return Jl._updateLiveList=De,Jl.Attr=qn,Jl.CDATASection=ze,Jl.CharacterData=Dn,Jl.Comment=rt,Jl.Document=yt,Jl.DocumentFragment=it,Jl.DocumentType=Xe,Jl.DOMImplementation=st,Jl.Element=Et,Jl.Entity=He,Jl.EntityReference=mt,Jl.LiveNodeList=Ee,Jl.NamedNodeMap=We,Jl.Node=Ce,Jl.NodeList=ve,Jl.Notation=Fe,Jl.Text=sr,Jl.ProcessingInstruction=xt,Jl.XMLSerializer=Tt,Jl}var _0={},DP={},_9;function Y2e(){return _9||(_9=1,function(t){var e=Vx().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES}(DP)),DP}var e2={},x9;function Z2e(){if(x9)return e2;x9=1;var t=Vx(),e=eX(),n=oA(),r=t.isHTMLEscapableRawTextElement,i=t.isHTMLMimeType,o=t.isHTMLRawTextElement,s=t.hasOwn,a=t.NAMESPACE,c=n.ParseError,h=n.DOMException,d=0,v=1,w=2,_=3,E=4,M=5,D=6,A=7;function F(){}F.prototype={parse:function(ce,se,Se){var ye=this.domBuilder;ye.startDocument(),K(se,se=Object.create(null)),N(ce,se,Se,ye,this.errorHandler),ye.endDocument()}};var O=/&#?\w+;?/g;function N(ce,se,Se,ye,Te){var pe=i(ye.mimeType);ce.indexOf(e.UNICODE_REPLACEMENT_CHARACTER)>=0&&Te.warning("Unicode replacement character detected, source encoding issues?");function Ie($t){if($t>65535){$t-=65536;var Et=55296+($t>>10),qn=56320+($t&1023);return String.fromCharCode(Et,qn)}else return String.fromCharCode($t)}function me($t){var Et=$t[$t.length-1]===";"?$t:$t+";";if(!pe&&Et!==$t)return Te.error("EntityRef: expecting ;"),$t;var qn=e.Reference.exec(Et);if(!qn||qn[0].length!==Et.length)return Te.error("entity not matching Reference production: "+$t),$t;var Dn=Et.slice(1,-1);return s(Se,Dn)?Se[Dn]:Dn.charAt(0)==="#"?Ie(parseInt(Dn.substring(1).replace("x","0x"))):(Te.error("entity not found:"+$t),$t)}function xe($t){if($t>st){var Et=ce.substring(st,$t).replace(O,me);We&&Ae(st),ye.characters(Et,0,$t-st),st=$t}}var ve=0,Ee=0,De=/\r\n?|\n|$/g,We=ye.locator;function Ae($t,Et){for(;$t>=Ee&&(Et=De.exec(ce));)ve=Ee,Ee=Et.index+Et[0].length,We.lineNumber++;We.columnNumber=$t-ve+1}for(var ut=[{currentNSMap:se}],pt=[],st=0;;){try{var Ce=ce.indexOf("<",st);if(Ce<0){if(!pe&&pt.length>0)return Te.fatalError("unclosed xml tag(s): "+pt.join(", "));if(!ce.substring(st).match(/^\s*$/)){var It=ye.doc,Ve=It.createTextNode(ce.substring(st));if(It.documentElement)return Te.error("Extra content at the end of the document");It.appendChild(Ve),ye.currentElement=Ve}return}if(Ce>st){var yt=ce.substring(st,Ce);!pe&&pt.length===0&&(yt=yt.replace(new RegExp(e.S_OPT.source,"g"),""),yt&&Te.error("Unexpected content outside root element: '"+yt+"'")),xe(Ce)}switch(ce.charAt(Ce+1)){case"/":var At=ce.indexOf(">",Ce+2),Ze=ce.substring(Ce+2,At>0?At:void 0);if(!Ze)return Te.fatalError("end tag name missing");var wt=At>0&&e.reg("^",e.QName_group,e.S_OPT,"$").exec(Ze);if(!wt)return Te.fatalError('end tag name contains invalid characters: "'+Ze+'"');if(!ye.currentElement&&!ye.doc.documentElement)return;var Ut=pt[pt.length-1]||ye.currentElement.tagName||ye.doc.documentElement.tagName||"";if(Ut!==wt[1]){var ht=wt[1].toLowerCase();if(!pe||Ut.toLowerCase()!==ht)return Te.fatalError('Opening and ending tag mismatch: "'+Ut+'" != "'+Ze+'"')}var qt=ut.pop();pt.pop();var Ye=qt.localNSMap;if(ye.endElement(qt.uri,qt.localName,Ut),Ye)for(var Re in Ye)s(Ye,Re)&&ye.endPrefixMapping(Re);At++;break;case"?":We&&Ae(Ce),At=ie(ce,Ce,ye,Te);break;case"!":We&&Ae(Ce),At=Q(ce,Ce,ye,Te,pe);break;default:We&&Ae(Ce);var Pt=new ae,Dt=ut[ut.length-1].currentNSMap,At=G(ce,Ce,Pt,Dt,me,Te,pe),Bt=Pt.length;if(Pt.closed||(pe&&t.isHTMLVoidElement(Pt.tagName)?Pt.closed=!0:pt.push(Pt.tagName)),We&&Bt){for(var gn=H(We,{}),Zt=0;Zt<Bt;Zt++){var cn=Pt[Zt];Ae(cn.offset),cn.locator=H(We,{})}ye.locator=gn,W(Pt,ye,Dt)&&ut.push(Pt),ye.locator=We}else W(Pt,ye,Dt)&&ut.push(Pt);pe&&!Pt.closed?At=X(ce,At,Pt.tagName,me,ye):At++}}catch($t){if($t instanceof c)throw $t;if($t instanceof h)throw new c($t.name+": "+$t.message,ye.locator,$t);Te.error("element parse error: "+$t),At=-1}At>st?st=At:xe(Math.max(Ce,st)+1)}}function H(ce,se){return se.lineNumber=ce.lineNumber,se.columnNumber=ce.columnNumber,se}function G(ce,se,Se,ye,Te,pe,Ie){function me(Ae,ut,pt){if(s(Se.attributeNames,Ae))return pe.fatalError("Attribute "+Ae+" redefined");if(!Ie&&ut.indexOf("<")>=0)return pe.fatalError("Unescaped '<' not allowed in attributes values");Se.addValue(Ae,ut.replace(/[\t\n\r]/g," ").replace(O,Te),pt)}for(var xe,ve,Ee=++se,De=d;;){var We=ce.charAt(Ee);switch(We){case"=":if(De===v)xe=ce.slice(se,Ee),De=_;else if(De===w)De=_;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(De===_||De===v)if(De===v&&(pe.warning('attribute value must after "="'),xe=ce.slice(se,Ee)),se=Ee+1,Ee=ce.indexOf(We,se),Ee>0)ve=ce.slice(se,Ee),me(xe,ve,se-1),De=M;else throw new Error("attribute value no end '"+We+"' match");else if(De==E)ve=ce.slice(se,Ee),me(xe,ve,se),pe.warning('attribute "'+xe+'" missed start quot('+We+")!!"),se=Ee+1,De=M;else throw new Error('attribute value must after "="');break;case"/":switch(De){case d:Se.setTagName(ce.slice(se,Ee));case M:case D:case A:De=A,Se.closed=!0;case E:case v:break;case w:Se.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return pe.error("unexpected end of input"),De==d&&Se.setTagName(ce.slice(se,Ee)),Ee;case">":switch(De){case d:Se.setTagName(ce.slice(se,Ee));case M:case D:case A:break;case E:case v:ve=ce.slice(se,Ee),ve.slice(-1)==="/"&&(Se.closed=!0,ve=ve.slice(0,-1));case w:De===w&&(ve=xe),De==E?(pe.warning('attribute "'+ve+'" missed quot(")!'),me(xe,ve,se)):(Ie||pe.warning('attribute "'+ve+'" missed value!! "'+ve+'" instead!!'),me(ve,ve,se));break;case _:if(!Ie)return pe.fatalError(`AttValue: ' or " expected`)}return Ee;case"":We=" ";default:if(We<=" ")switch(De){case d:Se.setTagName(ce.slice(se,Ee)),De=D;break;case v:xe=ce.slice(se,Ee),De=w;break;case E:var ve=ce.slice(se,Ee);pe.warning('attribute "'+ve+'" missed quot(")!!'),me(xe,ve,se);case M:De=D;break}else switch(De){case w:Ie||pe.warning('attribute "'+xe+'" missed value!! "'+xe+'" instead2!!'),me(xe,xe,se),se=Ee,De=v;break;case M:pe.warning('attribute space is required"'+xe+'"!!');case D:De=v,se=Ee;break;case _:De=E,se=Ee;break;case A:throw new Error("elements closed character '/' and '>' must be connected to")}}Ee++}}function W(ce,se,Se){for(var ye=ce.tagName,Te=null,De=ce.length;De--;){var pe=ce[De],Ie=pe.qName,me=pe.value,We=Ie.indexOf(":");if(We>0)var xe=pe.prefix=Ie.slice(0,We),ve=Ie.slice(We+1),Ee=xe==="xmlns"&&ve;else ve=Ie,xe=null,Ee=Ie==="xmlns"&&"";pe.localName=ve,Ee!==!1&&(Te==null&&(Te=Object.create(null),K(Se,Se=Object.create(null))),Se[Ee]=Te[Ee]=me,pe.uri=a.XMLNS,se.startPrefixMapping(Ee,me))}for(var De=ce.length;De--;)pe=ce[De],pe.prefix&&(pe.prefix==="xml"&&(pe.uri=a.XML),pe.prefix!=="xmlns"&&(pe.uri=Se[pe.prefix]));var We=ye.indexOf(":");We>0?(xe=ce.prefix=ye.slice(0,We),ve=ce.localName=ye.slice(We+1)):(xe=null,ve=ce.localName=ye);var Ae=ce.uri=Se[xe||""];if(se.startElement(Ae,ve,ye,ce),ce.closed){if(se.endElement(Ae,ve,ye),Te)for(xe in Te)s(Te,xe)&&se.endPrefixMapping(xe)}else return ce.currentNSMap=Se,ce.localNSMap=Te,!0}function X(ce,se,Se,ye,Te){var pe=r(Se);if(pe||o(Se)){var Ie=ce.indexOf("</"+Se+">",se),me=ce.substring(se+1,Ie);return pe&&(me=me.replace(O,ye)),Te.characters(me,0,me.length),Ie}return se+1}function K(ce,se){for(var Se in ce)s(ce,Se)&&(se[Se]=ce[Se])}function k(ce,se){var Se=se;function ye(Ee){return Ee=Ee||0,ce.charAt(Se+Ee)}function Te(Ee){Ee=Ee||1,Se+=Ee}function pe(){for(var Ee=0;Se<ce.length;){var De=ye();if(De!==" "&&De!==`
`&&De!=="	"&&De!=="\r")return Ee;Ee++,Te()}return-1}function Ie(){return ce.substring(Se)}function me(Ee){return ce.substring(Se,Se+Ee.length)===Ee}function xe(Ee){return ce.substring(Se,Se+Ee.length).toUpperCase()===Ee.toUpperCase()}function ve(Ee){var De=e.reg("^",Ee),We=De.exec(Ie());return We?(Te(We[0].length),We[0]):null}return{char:ye,getIndex:function(){return Se},getMatch:ve,getSource:function(){return ce},skip:Te,skipBlanks:pe,substringFromIndex:Ie,substringStartsWith:me,substringStartsWithCaseInsensitive:xe}}function $(ce,se){function Se(me,xe){var ve=e.PI.exec(me.substringFromIndex());return ve?ve[1].toLowerCase()==="xml"?xe.fatalError("xml declaration is only allowed at the start of the document, but found at position "+me.getIndex()):(me.skip(ve[0].length),ve[0]):xe.fatalError("processing instruction is not well-formed at position "+me.getIndex())}var ye=ce.getSource();if(ce.char()==="["){ce.skip(1);for(var Te=ce.getIndex();ce.getIndex()<ye.length;){if(ce.skipBlanks(),ce.char()==="]"){var pe=ye.substring(Te,ce.getIndex());return ce.skip(1),pe}var Ie=null;if(ce.char()==="<"&&ce.char(1)==="!")switch(ce.char(2)){case"E":ce.char(3)==="L"?Ie=ce.getMatch(e.elementdecl):ce.char(3)==="N"&&(Ie=ce.getMatch(e.EntityDecl));break;case"A":Ie=ce.getMatch(e.AttlistDecl);break;case"N":Ie=ce.getMatch(e.NotationDecl);break;case"-":Ie=ce.getMatch(e.Comment);break}else if(ce.char()==="<"&&ce.char(1)==="?")Ie=Se(ce,se);else if(ce.char()==="%")Ie=ce.getMatch(e.PEReference);else return se.fatalError("Error detected in Markup declaration");if(!Ie)return se.fatalError("Error in internal subset at position "+ce.getIndex())}return se.fatalError("doctype internal subset is not well-formed, missing ]")}}function Q(ce,se,Se,ye,Te){var pe=k(ce,se);switch(Te?pe.char(2).toUpperCase():pe.char(2)){case"-":var Ie=pe.getMatch(e.Comment);return Ie?(Se.comment(Ie,e.COMMENT_START.length,Ie.length-e.COMMENT_START.length-e.COMMENT_END.length),pe.getIndex()):ye.fatalError("comment is not well-formed at position "+pe.getIndex());case"[":var me=pe.getMatch(e.CDSect);return me?!Te&&!Se.currentElement?ye.fatalError("CDATA outside of element"):(Se.startCDATA(),Se.characters(me,e.CDATA_START.length,me.length-e.CDATA_START.length-e.CDATA_END.length),Se.endCDATA(),pe.getIndex()):ye.fatalError("Invalid CDATA starting at position "+se);case"D":{if(Se.doc&&Se.doc.documentElement)return ye.fatalError("Doctype not allowed inside or after documentElement at position "+pe.getIndex());if(Te?!pe.substringStartsWithCaseInsensitive(e.DOCTYPE_DECL_START):!pe.substringStartsWith(e.DOCTYPE_DECL_START))return ye.fatalError("Expected "+e.DOCTYPE_DECL_START+" at position "+pe.getIndex());if(pe.skip(e.DOCTYPE_DECL_START.length),pe.skipBlanks()<1)return ye.fatalError("Expected whitespace after "+e.DOCTYPE_DECL_START+" at position "+pe.getIndex());var xe={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(xe.name=pe.getMatch(e.Name),!xe.name)return ye.fatalError("doctype name missing or contains unexpected characters at position "+pe.getIndex());if(Te&&xe.name.toLowerCase()!=="html"&&ye.warning("Unexpected DOCTYPE in HTML document at position "+pe.getIndex()),pe.skipBlanks(),pe.substringStartsWith(e.PUBLIC)||pe.substringStartsWith(e.SYSTEM)){var ve=e.ExternalID_match.exec(pe.substringFromIndex());if(!ve)return ye.fatalError("doctype external id is not well-formed at position "+pe.getIndex());ve.groups.SystemLiteralOnly!==void 0?xe.systemId=ve.groups.SystemLiteralOnly:(xe.systemId=ve.groups.SystemLiteral,xe.publicId=ve.groups.PubidLiteral),pe.skip(ve[0].length)}else if(Te&&pe.substringStartsWithCaseInsensitive(e.SYSTEM)){if(pe.skip(e.SYSTEM.length),pe.skipBlanks()<1)return ye.fatalError("Expected whitespace after "+e.SYSTEM+" at position "+pe.getIndex());if(xe.systemId=pe.getMatch(e.ABOUT_LEGACY_COMPAT_SystemLiteral),!xe.systemId)return ye.fatalError("Expected "+e.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+e.SYSTEM+" at position "+pe.getIndex())}return Te&&xe.systemId&&!e.ABOUT_LEGACY_COMPAT_SystemLiteral.test(xe.systemId)&&ye.warning("Unexpected doctype.systemId in HTML document at position "+pe.getIndex()),Te||(pe.skipBlanks(),xe.internalSubset=$(pe,ye)),pe.skipBlanks(),pe.char()!==">"?ye.fatalError("doctype not terminated with > at position "+pe.getIndex()):(pe.skip(1),Se.startDTD(xe.name,xe.publicId,xe.systemId,xe.internalSubset),Se.endDTD(),pe.getIndex())}default:return ye.fatalError('Not well-formed XML starting with "<!" at position '+se)}}function ie(ce,se,Se,ye){var Te=ce.substring(se).match(e.PI);if(!Te)return ye.fatalError("Invalid processing instruction starting at position "+se);if(Te[1].toLowerCase()==="xml"){if(se>0)return ye.fatalError("processing instruction at position "+se+" is an xml declaration which is only at the start of the document");if(!e.XMLDecl.test(ce.substring(se)))return ye.fatalError("xml declaration is not well-formed")}return Se.processingInstruction(Te[1],Te[2]),se+Te[0].length}function ae(){this.attributeNames=Object.create(null)}return ae.prototype={setTagName:function(ce){if(!e.QName_exact.test(ce))throw new Error("invalid tagName:"+ce);this.tagName=ce},addValue:function(ce,se,Se){if(!e.QName_exact.test(ce))throw new Error("invalid attribute:"+ce);this.attributeNames[ce]=this.length,this[this.length++]={qName:ce,value:se,offset:Se}},length:0,getLocalName:function(ce){return this[ce].localName},getLocator:function(ce){return this[ce].locator},getQName:function(ce){return this[ce].qName},getURI:function(ce){return this[ce].uri},getValue:function(ce){return this[ce].value}},e2.XMLReader=F,e2.parseUtils=k,e2.parseDoctypeCommentOrCData=Q,e2}var b9;function K2e(){if(b9)return _0;b9=1;var t=Vx(),e=tX(),n=oA(),r=Y2e(),i=Z2e(),o=e.DOMImplementation,s=t.hasDefaultHTMLNamespace,a=t.isHTMLMimeType,c=t.isValidMimeType,h=t.MIME_TYPE,d=t.NAMESPACE,v=n.ParseError,w=i.XMLReader;function _(G){return G.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function E(G){if(G=G||{},G.locator===void 0&&(G.locator=!0),this.assign=G.assign||t.assign,this.domHandler=G.domHandler||M,this.onError=G.onError||G.errorHandler,G.errorHandler&&typeof G.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");G.errorHandler&&G.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=G.normalizeLineEndings||_,this.locator=!!G.locator,this.xmlns=this.assign(Object.create(null),G.xmlns)}E.prototype.parseFromString=function(G,W){if(!c(W))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+W+'" is not valid.');var X=this.assign(Object.create(null),this.xmlns),K=r.XML_ENTITIES,k=X[""]||null;s(W)?(K=r.HTML_ENTITIES,k=d.HTML):W===h.XML_SVG_IMAGE&&(k=d.SVG),X[""]=k,X.xml=X.xml||d.XML;var $=new this.domHandler({mimeType:W,defaultNamespace:k,onError:this.onError}),Q=this.locator?{}:void 0;this.locator&&$.setDocumentLocator(Q);var ie=new w;ie.errorHandler=$,ie.domBuilder=$;var ae=!t.isHTMLMimeType(W);return ae&&typeof G!="string"&&ie.errorHandler.fatalError("source is not a string"),ie.parse(this.normalizeLineEndings(String(G)),X,K),$.doc.documentElement||ie.errorHandler.fatalError("missing root element"),$.doc};function M(G){var W=G||{};this.mimeType=W.mimeType||h.XML_APPLICATION,this.defaultNamespace=W.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=W.onError}function D(G,W){W.lineNumber=G.lineNumber,W.columnNumber=G.columnNumber}M.prototype={startDocument:function(){var G=new o;this.doc=a(this.mimeType)?G.createHTMLDocument(!1):G.createDocument(this.defaultNamespace,"")},startElement:function(G,W,X,K){var k=this.doc,$=k.createElementNS(G,X||W),Q=K.length;O(this,$),this.currentElement=$,this.locator&&D(this.locator,$);for(var ie=0;ie<Q;ie++){var G=K.getURI(ie),ae=K.getValue(ie),X=K.getQName(ie),ce=k.createAttributeNS(G,X);this.locator&&D(K.getLocator(ie),ce),ce.value=ce.nodeValue=ae,$.setAttributeNode(ce)}},endElement:function(G,W,X){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(G,W){},endPrefixMapping:function(G){},processingInstruction:function(G,W){var X=this.doc.createProcessingInstruction(G,W);this.locator&&D(this.locator,X),O(this,X)},ignorableWhitespace:function(G,W,X){},characters:function(G,W,X){if(G=F.apply(this,arguments),G){if(this.cdata)var K=this.doc.createCDATASection(G);else var K=this.doc.createTextNode(G);this.currentElement?this.currentElement.appendChild(K):/^\s*$/.test(G)&&this.doc.appendChild(K),this.locator&&D(this.locator,K)}},skippedEntity:function(G){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(G){G&&(G.lineNumber=0),this.locator=G},comment:function(G,W,X){G=F.apply(this,arguments);var K=this.doc.createComment(G);this.locator&&D(this.locator,K),O(this,K)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(G,W,X,K){var k=this.doc.implementation;if(k&&k.createDocumentType){var $=k.createDocumentType(G,W,X,K);this.locator&&D(this.locator,$),O(this,$),this.doc.doctype=$}},reportError:function(G,W){if(typeof this.onError=="function")try{this.onError(G,W,this)}catch(X){throw new v("Reporting "+G+' "'+W+'" caused '+X,this.locator)}else console.error("[xmldom "+G+"]	"+W,A(this.locator))},warning:function(G){this.reportError("warning",G)},error:function(G){this.reportError("error",G)},fatalError:function(G){throw this.reportError("fatalError",G),new v(G,this.locator)}};function A(G){if(G)return`
@#[line:`+G.lineNumber+",col:"+G.columnNumber+"]"}function F(G,W,X){return typeof G=="string"?G.substr(W,X):G.length>=W+X||W?new java.lang.String(G,W,X)+"":G}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(G){M.prototype[G]=function(){return null}});function O(G,W){G.currentElement?G.currentElement.appendChild(W):G.doc.appendChild(W)}function N(G){if(G==="error")throw"onErrorStopParsing"}function H(){throw"onWarningStopParsing"}return _0.__DOMHandler=M,_0.DOMParser=E,_0.normalizeLineEndings=_,_0.onErrorStopParsing=N,_0.onWarningStopParsing=H,_0}var w9;function J2e(){if(w9)return Mo;w9=1;var t=Vx();Mo.assign=t.assign,Mo.hasDefaultHTMLNamespace=t.hasDefaultHTMLNamespace,Mo.isHTMLMimeType=t.isHTMLMimeType,Mo.isValidMimeType=t.isValidMimeType,Mo.MIME_TYPE=t.MIME_TYPE,Mo.NAMESPACE=t.NAMESPACE;var e=oA();Mo.DOMException=e.DOMException,Mo.DOMExceptionName=e.DOMExceptionName,Mo.ExceptionCode=e.ExceptionCode,Mo.ParseError=e.ParseError;var n=tX();Mo.Attr=n.Attr,Mo.CDATASection=n.CDATASection,Mo.CharacterData=n.CharacterData,Mo.Comment=n.Comment,Mo.Document=n.Document,Mo.DocumentFragment=n.DocumentFragment,Mo.DocumentType=n.DocumentType,Mo.DOMImplementation=n.DOMImplementation,Mo.Element=n.Element,Mo.Entity=n.Entity,Mo.EntityReference=n.EntityReference,Mo.LiveNodeList=n.LiveNodeList,Mo.NamedNodeMap=n.NamedNodeMap,Mo.Node=n.Node,Mo.NodeList=n.NodeList,Mo.Notation=n.Notation,Mo.ProcessingInstruction=n.ProcessingInstruction,Mo.Text=n.Text,Mo.XMLSerializer=n.XMLSerializer;var r=K2e();return Mo.DOMParser=r.DOMParser,Mo.normalizeLineEndings=r.normalizeLineEndings,Mo.onErrorStopParsing=r.onErrorStopParsing,Mo.onWarningStopParsing=r.onWarningStopParsing,Mo}var Q2e=J2e();/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var vo=t=>t!==void 0,nX=(t,e,n)=>e in t?t[e]:t[e]=n;const kC={ELEMENT:1,TEXT:3,CDATA_SECTION:4};function Z4(t,e){return rX(t,e,[]).join("")}function rX(t,e,n){if(t.nodeType===kC.CDATA_SECTION||t.nodeType===kC.TEXT)n.push(t.nodeValue);else{var r;for(r=t.firstChild;r;r=r.nextSibling)rX(r,e,n)}return n}function ewe(t,e,n,r){for(var i=twe(e);i;i=nwe(i)){var o=i.namespaceURI||null,s=t[o];if(vo(s)){var a=s[i.localName];vo(a)&&a.call(r,i,n)}}}function twe(t){let e=t.firstElementChild||t.firstChild;for(;e&&e.nodeType!==kC.ELEMENT;)e=e.nextSibling;return e}function nwe(t){let e=t.nextElementSibling||t.nextSibling;for(;e&&e.nodeType!==kC.ELEMENT;)e=e.nextSibling;return e}function Vc(t,e,n){return rwe(t,e,n)}function rwe(t,e,n){var r=vo(n)?n:{},i,o;for(i=0,o=t.length;i<o;++i)r[t[i]]=e;return r}function iX(t,e){return function(n,r){var i=t.call(vo(e)?e:this,n,r);if(vo(i)){var o=r[r.length-1];o.push(i)}}}function Hc(t,e,n,r,i){return r.push(t),ewe(e,n,r,i),r.pop()}function Vi(t,e,n){return function(r,i){let o=t.call(vo(n)?n:this,r,i);if(vo(o)){var s=i[i.length-1],a=vo(e)?e:r.localName;s[a]=o}}}function uf(t,e,n){return function(r,i){var o=t.call(vo(n)?n:this,r,i);if(vo(o)){var s=i[i.length-1],a=vo(e)?e:r.localName,c=nX(s,a,[]);c.push(o)}}}const iwe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function awe(t){return t.replace(iwe,"")}function X0(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return vo(e[1])||!1}function O1(t){return om(Z4(t,!1))}function om(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function LP(t){return OC(Z4(t,!1))}function OC(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function Wo(t){return awe(Z4(t,!1))}const owe="http://www.w3.org/1999/xlink";function K4(t){return t.getAttributeNS(owe,"href")}function swe(t,e){return Hc({},Lwe,t,e)}function aX(t){return[om(t.getAttribute("minx")),om(t.getAttribute("miny")),om(t.getAttribute("maxx")),om(t.getAttribute("maxy"))]}function lwe(t,e){const n=aX(t),r=[om(t.getAttribute("resx")),om(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS")||t.getAttribute("SRS"),extent:n,res:r}}function uwe(t,e){const n=aX(t);if(!(!vo(n[0])||!vo(n[1])||!vo(n[2])||!vo(n[3])))return n}function cwe(t,e){const n=parseFloat(t.getAttribute("min")),r=parseFloat(t.getAttribute("max"));return{min:n,max:r}}function hwe(t,e){const n=Hc({},Nwe,t,e);if(!vo(n))return;const r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,s=n.northBoundLatitude;if(!(!vo(r)||!vo(i)||!vo(o)||!vo(s)))return[r,i,o,s]}function fwe(t,e){return Hc({},Mwe,t,e)}function dwe(t,e){return Hc({},Awe,t,e)}function pwe(t,e){return Hc({},Rwe,t,e)}function gwe(t,e){return Hc({},Pwe,t,e)}function mwe(t,e){return Hc({},Iwe,t,e)}function vwe(t,e){return Hc([],Dwe,t,e)}function ywe(t,e){const n=X0(t.getAttribute("queryable"));return Hc({queryable:vo(n)?n:!1},lX,t,e)}function _we(t,e){var n=e[e.length-1];const r=Hc({},lX,t,e);if(!vo(r))return;let i=X0(t.getAttribute("queryable"));vo(i)||(i=n.queryable),r.queryable=vo(i)?i:!1;let o=OC(t.getAttribute("cascaded"));vo(o)||(o=n.cascaded),r.cascaded=o;let s=X0(t.getAttribute("opaque"));vo(s)||(s=n.opaque),r.opaque=vo(s)?s:!1;let a=X0(t.getAttribute("noSubsets"));vo(a)||(a=n.noSubsets),r.noSubsets=vo(a)?a:!1;let c=om(t.getAttribute("fixedWidth"));vo(c)||(c=n.fixedWidth),r.fixedWidth=c;let h=om(t.getAttribute("fixedHeight"));vo(h)||(h=n.fixedHeight),r.fixedHeight=h;const d=["Style","CRS","AuthorityURL"];for(let w=0,_=d.length;w<_;w++){const E=d[w],M=n[E];if(vo(M)){let D=nX(r,E,[]);D=D.concat(M),r[E]=D}}const v=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let w=0,_=v.length;w<_;w++){const E=v[w],M=r[E];if(!vo(M)){const D=n[E];r[E]=D}}return r}function xwe(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:X0(t.getAttribute("multipleValues")),nearestValue:X0(t.getAttribute("nearestValue")),current:X0(t.getAttribute("current")),values:Wo(t)}}function xm(t,e){return Hc({},Uwe,t,e)}function bwe(t,e){return Hc({},kwe,t,e)}function wwe(t,e){return Hc({},Fwe,t,e)}function Swe(t,e){return Hc({},Bwe,t,e)}function NP(t,e){return Hc({},Owe,t,e)}function oX(t,e){var n=xm(t,e);if(vo(n)){const r=[OC(t.getAttribute("width")),OC(t.getAttribute("height"))];return n.size=r,n}}function Ewe(t,e){var n=xm(t,e);if(vo(n))return n.name=t.getAttribute("name"),n}function Twe(t,e){var n=xm(t,e);if(vo(n))return n.type=t.getAttribute("type"),n}function Cwe(t,e){return Hc({},zwe,t,e)}function sX(t,e){return Hc([],jwe,t,e)}const qc=[null,"http://www.opengis.net/wms"];Vc(qc,{Service:Vi(dwe),Capability:Vi(fwe)});const Mwe=Vc(qc,{Request:Vi(bwe),Exception:Vi(vwe),Layer:Vi(ywe)}),Awe=Vc(qc,{Name:Vi(Wo),Title:Vi(Wo),Abstract:Vi(Wo),KeywordList:Vi(sX),OnlineResource:Vi(K4),ContactInformation:Vi(pwe),Fees:Vi(Wo),AccessConstraints:Vi(Wo),LayerLimit:Vi(LP),MaxWidth:Vi(LP),MaxHeight:Vi(LP)}),Rwe=Vc(qc,{ContactPersonPrimary:Vi(gwe),ContactPosition:Vi(Wo),ContactAddress:Vi(mwe),ContactVoiceTelephone:Vi(Wo),ContactFacsimileTelephone:Vi(Wo),ContactElectronicMailAddress:Vi(Wo)}),Pwe=Vc(qc,{ContactPerson:Vi(Wo),ContactOrganization:Vi(Wo)}),Iwe=Vc(qc,{AddressType:Vi(Wo),Address:Vi(Wo),City:Vi(Wo),StateOrProvince:Vi(Wo),PostCode:Vi(Wo),Country:Vi(Wo)}),Dwe=Vc(qc,{Format:iX(Wo)}),lX=Vc(qc,{Name:Vi(Wo),Title:Vi(Wo),Abstract:Vi(Wo),KeywordList:Vi(sX),CRS:uf(Wo),SRS:uf(Wo),EX_GeographicBoundingBox:Vi(hwe),LatLonBoundingBox:Vi(uwe),BoundingBox:uf(lwe),Dimension:uf(xwe),Attribution:Vi(swe),AuthorityURL:uf(Ewe),Identifier:uf(Wo),MetadataURL:uf(Twe),DataURL:uf(xm),FeatureListURL:uf(xm),Style:uf(Cwe),MinScaleDenominator:Vi(O1),MaxScaleDenominator:Vi(O1),ScaleHint:Vi(cwe),Layer:uf(_we)}),Lwe=Vc(qc,{Title:Vi(Wo),OnlineResource:Vi(K4),LogoURL:Vi(oX)}),Nwe=Vc(qc,{westBoundLongitude:Vi(O1),eastBoundLongitude:Vi(O1),southBoundLatitude:Vi(O1),northBoundLatitude:Vi(O1)}),kwe=Vc(qc,{GetCapabilities:Vi(NP),GetMap:Vi(NP),GetFeatureInfo:Vi(NP)}),Owe=Vc(qc,{Format:uf(Wo),DCPType:uf(wwe)}),Fwe=Vc(qc,{HTTP:Vi(Swe)}),Bwe=Vc(qc,{Get:Vi(xm),Post:Vi(xm)}),zwe=Vc(qc,{Name:Vi(Wo),Title:Vi(Wo),Abstract:Vi(Wo),LegendURL:uf(oX),StyleSheetURL:Vi(xm),StyleURL:Vi(xm)}),Uwe=Vc(qc,{Format:Vi(Wo),OnlineResource:Vi(K4)}),jwe=Vc(qc,{Keyword:iX(Wo)}),Gwe=gg([ke.jsx("circle",{cx:"7",cy:"14",r:"3"},"0"),ke.jsx("circle",{cx:"11",cy:"6",r:"3"},"1"),ke.jsx("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")]);function uX(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+"]"}).join(",")+"}")}function Vwe(t,e){var n=uX(t);return function(r,i){return e(n(r),i,t)}}function Hwe(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function J4(t){var e=new RegExp('["'+t+`
]`),n=t.charCodeAt(0);function r(h,d){var v,w,_=i(h,function(E,M){if(v)return v(E,M-1);w=E,v=d?Vwe(E,d):uX(E)});return _.columns=w,_}function i(h,d){var v={},w={},_=[],E=h.length,M=0,D=0,A,F;function O(){if(M>=E)return w;if(F)return F=!1,v;var H=M,G;if(h.charCodeAt(H)===34){for(var W=H;W++<E;)if(h.charCodeAt(W)===34){if(h.charCodeAt(W+1)!==34)break;++W}return M=W+2,G=h.charCodeAt(W+1),G===13?(F=!0,h.charCodeAt(W+2)===10&&++M):G===10&&(F=!0),h.slice(H+1,W).replace(/""/g,'"')}for(;M<E;){var X=1;if(G=h.charCodeAt(M++),G===10)F=!0;else if(G===13)F=!0,h.charCodeAt(M)===10&&(++M,++X);else if(G!==n)continue;return h.slice(H,M-X)}return h.slice(H)}for(;(A=O())!==w;){for(var N=[];A!==v&&A!==w;)N.push(A),A=O();d&&(N=d(N,D++))==null||_.push(N)}return _}function o(h,d){return d==null&&(d=Hwe(h)),[d.map(c).join(t)].concat(h.map(function(v){return d.map(function(w){return c(v[w])}).join(t)})).join(`
`)}function s(h){return h.map(a).join(`
`)}function a(h){return h.map(c).join(t)}function c(h){return h==null?"":e.test(h+="")?'"'+h.replace(/\"/g,'""')+'"':h}return{parse:r,parseRows:i,format:o,formatRows:s}}var sA=J4(","),qwe=sA.parse,$we=sA.parseRows,Wwe=sA.format,Xwe=sA.formatRows,lA=J4("	"),Ywe=lA.parse,Zwe=lA.parseRows,Kwe=lA.format,Jwe=lA.formatRows;const Qwe=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:Wwe,csvFormatRows:Xwe,csvParse:qwe,csvParseRows:$we,dsvFormat:J4,tsvFormat:Kwe,tsvFormatRows:Jwe,tsvParse:Ywe,tsvParseRows:Zwe},Symbol.toStringTag,{value:"Module"})),eSe=tZ(Qwe);var x0={exports:{}},S9;function tSe(){if(S9)return x0.exports;S9=1,x0.exports=t,x0.exports.pair=o,x0.exports.format=n,x0.exports.formatPair=e,x0.exports.coordToDMS=r;function t(a,c){var h=i(a,c);return h===null?null:h.val}function e(a){return n(a.lat,"lat")+" "+n(a.lon,"lon")}function n(a,c){var h=r(a,c);return h.whole+"° "+(h.minutes?h.minutes+"' ":"")+(h.seconds?h.seconds+'" ':"")+h.dir}function r(a,c){var h={lat:["N","S"],lon:["E","W"]}[c]||"",d=h[a>=0?0:1],v=Math.abs(a),w=Math.floor(v),_=v-w,E=_*60,M=Math.floor(E),D=Math.floor((E-M)*60);return{whole:w,minutes:M,seconds:D,dir:d}}function i(a,c){if(c||(c="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var h=/^[\s\,]*([NSEW])?\s*([\-|\—|\―]?[0-9.]+)[°º˚]?\s*(?:([0-9.]+)['’′‘]\s*)?(?:([0-9.]+)(?:''|"|”|″)\s*)?([NSEW])?/,d=a.match(h);if(!d)return null;var v=d[0],w;if(d[1]&&d[5]?(w=d[1],v=v.slice(0,-1)):w=d[1]||d[5],w&&c.indexOf(w)===-1)return null;var _=d[2]?parseFloat(d[2]):0,E=d[3]?parseFloat(d[3])/60:0,M=d[4]?parseFloat(d[4])/3600:0,D=_<0?-1:1;return(w==="S"||w==="W")&&(D*=-1),{val:(Math.abs(_)+E+M)*D,dim:w,matched:v,remain:a.slice(v.length)}}function o(a,c){a=a.trim();var h=i(a,c);if(!h)return null;a=h.remain.trim();var d=i(a,c);return!d||d.remain?null:h.dim?s(h.val,d.val,h.dim):[h.val,d.val]}function s(a,c,h){if(h==="N"||h==="S")return[a,c];if(h==="W"||h==="E")return[c,a]}return x0.exports}var kP,E9;function nSe(){if(E9)return kP;E9=1;var t=eSe,e=tSe(),n=/(Lat)(itude)?/gi,r=/(L)(on|ng)(gitude)?/i;function i(D,A){var F,O,N;for(var H in D)O=H.match(A),O&&(!F||O[0].length/H.length>N)&&(N=O[0].length/H.length,F=H);return F}function o(D){return i(D,n)}function s(D){return i(D,r)}function a(D){return!!D.match(n)}function c(D){return!!D.match(r)}function h(D){return typeof D=="object"?Object.keys(D).length:0}function d(D){var A=[",",";","	","|"],F=[];return A.forEach(function(O){var N=t.dsvFormat(O).parse(D);if(N.length>=1){for(var H=h(N[0]),G=0;G<N.length;G++)if(h(N[G])!==H)return;F.push({delimiter:O,arity:Object.keys(N[0]).length})}}),F.length?F.sort(function(O,N){return N.arity-O.arity})[0].delimiter:null}function v(D){return delete D.columns,D}function w(D){var A=d(D);return A?v(t.dsvFormat(A).parse(D)):null}function _(D,A,F){F||(F=A,A={}),A.delimiter=A.delimiter||",";var O=A.latfield||"",N=A.lonfield||"",H=A.crs||"",G=[],W={type:"FeatureCollection",features:G};if(H!==""&&(W.crs={type:"name",properties:{name:H}}),A.delimiter==="auto"&&typeof D=="string"&&(A.delimiter=d(D),!A.delimiter)){F({type:"Error",message:"Could not autodetect delimiter"});return}var X=A.numericFields?A.numericFields.split(","):null,K=typeof D=="string"?t.dsvFormat(A.delimiter).parse(D,function(ye){if(X)for(var Te in ye)X.includes(Te)&&(ye[Te]=+ye[Te]);return ye}):D;if(!K.length){F(null,W);return}var k=[],$;O||(O=o(K[0])),N||(N=s(K[0]));var Q=!O||!N;if(Q){for($=0;$<K.length;$++)G.push({type:"Feature",properties:K[$],geometry:null});F(k.length?k:null,W);return}for($=0;$<K.length;$++)if(K[$][N]!==void 0&&K[$][O]!==void 0){var ie=K[$][N],ae=K[$][O],ce,se,Se;Se=e(ie,"EW"),Se&&(ie=Se),Se=e(ae,"NS"),Se&&(ae=Se),ce=parseFloat(ie),se=parseFloat(ae),isNaN(ce)||isNaN(se)?k.push({message:"A row contained an invalid value for latitude or longitude",row:K[$],index:$}):(A.includeLatLon||(delete K[$][N],delete K[$][O]),G.push({type:"Feature",properties:K[$],geometry:{type:"Point",coordinates:[parseFloat(ce),parseFloat(se)]}}))}F(k.length?k:null,W)}function E(D){for(var A=D.features,F={type:"Feature",geometry:{type:"LineString",coordinates:[]}},O=0;O<A.length;O++)F.geometry.coordinates.push(A[O].geometry.coordinates);return F.properties=A.reduce(function(N,H){for(var G in H.properties)N[G]||(N[G]=[]),N[G].push(H.properties[G]);return N},{}),{type:"FeatureCollection",features:[F]}}function M(D){for(var A=D.features,F={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},O=0;O<A.length;O++)F.geometry.coordinates[0].push(A[O].geometry.coordinates);return F.properties=A.reduce(function(N,H){for(var G in H.properties)N[G]||(N[G]=[]),N[G].push(H.properties[G]);return N},{}),{type:"FeatureCollection",features:[F]}}return kP={isLon:c,isLat:a,guessLatHeader:o,guessLonHeader:s,csv:t.csvParse,tsv:t.tsvParse,dsv:t,auto:w,csv2geojson:_,toLine:E,toPolygon:M},kP}nSe();var ip={},OP={},T9;function lL(){return T9||(T9=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WayCollection=t.RefElements=t.LateBinder=t.strToFloat=t.ptInsidePolygon=t.ringDirection=t.isRing=t.coordsToKey=t.last=t.first=void 0,t.purgeProps=e,t.mergeProps=n,t.addPropToFeature=r,t.addPropToFeatures=i,t.addToMap=c,t.removeFromMap=h,t.getFirstFromMap=d;function e(F,O){if(F){const N=Object.assign({},F);if(O)for(const H of O)delete N[H];return N}return{}}function n(F,O){return F=F||{},O=O||{},Object.assign(F,O)}function r(F,O,N){F.properties&&O&&N&&(F.properties[O]=N)}function i(F,O,N){for(const H of F)r(H,O,N)}const o=F=>F[0];t.first=o;const s=F=>F[F.length-1];t.last=s;const a=F=>F.join(",");t.coordsToKey=a;function c(F,O,N){const H=F[O];H?H.push(N):F[O]=[N]}function h(F,O,N){const H=F[O];let G=-1;H&&(G=H.indexOf(N)),G>=0&&H.splice(G,1)}function d(F,O){const N=F[O];return N&&N.length>0?N[0]:null}const v=F=>F.length>3&&(0,t.coordsToKey)((0,t.first)(F))===(0,t.coordsToKey)((0,t.last)(F));t.isRing=v;const w=(F,O,N)=>{O=O||0,N=N||1;const H=F.reduce((ce,se,Se)=>F[ce][O||0]>se[O||0]?ce:Se,0),G=H<=0?F.length-2:H-1,W=H>=F.length-1?1:H+1,X=F[G][O],K=F[H][O],k=F[W][O],$=F[G][N],Q=F[H][N],ie=F[W][N];return(K-X)*(ie-$)-(k-X)*(Q-$)<0?"clockwise":"counterclockwise"};t.ringDirection=w;const _=(F,O,N,H)=>{N=N||0,H=H||1;let G=!1;for(let W=0,X=O.length-1;W<O.length;X=W++)(O[W][N]<=F[N]&&F[N]<O[X][N]||O[X][N]<=F[N]&&F[N]<O[W][N])&&F[H]<(O[X][H]-O[W][H])*(F[N]-O[W][N])/(O[X][N]-O[W][N])+O[W][H]&&(G=!G);return G};t.ptInsidePolygon=_;const E=F=>F instanceof Array?F.map(t.strToFloat):parseFloat(F);t.strToFloat=E;class M{constructor(O,N,H,G){this.container=O,this.valueFunc=N,this.ctx=H,this.args=G}bind(){const O=this.valueFunc.apply(this.ctx,this.args);if(this.container instanceof Array){const N=this.container.indexOf(this);if(N>=0){const H=[N,1];O&&H.push(O),Array.prototype.splice.apply(this.container,H)}}else if(typeof this.container=="object"&&!Array.isArray(this.container)){const N=this.container,H=Object.keys(N).find(G=>N[G]===this);H&&(O?N[H]=O:delete N[H])}}}t.LateBinder=M;class D extends Map{constructor(){super(),this.binders=[]}add(O,N){this.set(O,N)}addBinder(O){this.binders.push(O)}bindAll(){this.binders.forEach(O=>O.bind())}}t.RefElements=D;class A extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay(O){const N=O.toCoordsArray();N.length>0&&(this.push(N),c(this.firstMap,(0,t.coordsToKey)((0,t.first)(N)),N),c(this.lastMap,(0,t.coordsToKey)((0,t.last)(N)),N))}toStrings(){const O=[];let N=this.shift();for(;N;){h(this.firstMap,(0,t.coordsToKey)((0,t.first)(N)),N),h(this.lastMap,(0,t.coordsToKey)((0,t.last)(N)),N);let H=N,G;do{const W=(0,t.coordsToKey)((0,t.last)(H));let X=!1;G=d(this.firstMap,W),G||(G=d(this.lastMap,W),X=!0),G&&(this.splice(this.indexOf(G),1),h(this.firstMap,(0,t.coordsToKey)((0,t.first)(G)),G),h(this.lastMap,(0,t.coordsToKey)((0,t.last)(G)),G),X&&(G.length>H.length&&([H,G]=[G,H]),G.reverse()),H=H.concat(G.slice(1)))}while(G);O.push((0,t.strToFloat)(H)),N=this.shift()}return O}toRings(O){const N=this.toStrings(),H=[];let G=N.shift();for(;G;)(0,t.isRing)(G)&&((0,t.ringDirection)(G)!==O&&G.reverse(),H.push(G)),G=N.shift();return H}}t.WayCollection=A}(OP)),OP}const rSe={},iSe={whitelist:["services","rest_area","escape","elevator"]},aSe={blacklist:["coastline","cliff","ridge","arete","tree_row"]},oSe={},sSe={whitelist:["riverbank","dock","boatyard","dam"]},lSe={},uSe={},cSe={whitelist:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},hSe={whitelist:["station","turntable","roundhouse","platform"]},fSe={},dSe={},pSe={blacklist:["cutline","embankment","pipeline"]},gSe={whitelist:["plant","substation","generator","transformer"]},mSe={},vSe={},ySe={blacklist:["taxiway"]},_Se={},xSe={},bSe={},wSe={},SSe={},ESe={},TSe={},CSe={},MSe={},ASe={building:rSe,highway:iSe,natural:aSe,landuse:oSe,waterway:sSe,amenity:lSe,leisure:uSe,barrier:cSe,railway:hSe,area:fSe,boundary:dSe,man_made:pSe,power:gSe,place:mSe,shop:vSe,aeroway:ySe,tourism:_Se,historic:xSe,public_transport:bSe,office:wSe,"building:part":{},military:SSe,ruins:ESe,"area:highway":{},craft:TSe,golf:CSe,indoor:MSe};var C9;function RSe(){if(C9)return ip;C9=1;var t=ip&&ip.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ip,"__esModule",{value:!0}),ip.Relation=ip.Way=ip.Node=void 0;const e=lL(),n=lL(),r=t(ASe);class i{constructor(h,d,v){this.type=h,this.id=d,this.refElems=v,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,v&&v.add(this.getCompositeId(),this)}addTags(h){this.tags=Object.assign(this.tags,h),this.hasTag=!!h}addTag(h,d){this.tags[h]=d,this.hasTag=!!h}addProp(h,d){this.props[h]=d}addProps(h){this.props=Object.assign(this.props,h)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}toFeatureArray(){return[]}}class o extends i{constructor(h,d){super("node",h,d),this.latLng=null}setLatLng(h){this.latLng=h}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:(0,e.strToFloat)([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}ip.Node=o;class s extends i{constructor(h,d){super("way",h,d),this.latLngArray=[],this.isPolygon=!1}addLatLng(h){this.latLngArray.push(h)}setLatLngArray(h){this.latLngArray=h}addNodeRef(h){const d=new n.LateBinder(this.latLngArray,v=>{const w=this.refElems.get(`node/${v}`);if(w)return w.refCount++,w.getLatLng()},this,[h]);this.latLngArray.push(d),this.refElems.addBinder(d)}addTags(h){super.addTags(h);for(const[d,v]of Object.entries(h))this.analyzeTag(d,v)}addTag(h,d){super.addTag(h,d),this.analyzeTag(h,d)}toCoordsArray(){return this.latLngArray.map(h=>[h.lon,h.lat])}toFeatureArray(){let h=this.toCoordsArray();if(h.length>1){h=(0,e.strToFloat)(h);const d={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:h}};return this.isPolygon&&(0,e.isRing)(h)?((0,e.ringDirection)(h)!=="counterclockwise"&&h.reverse(),d.geometry={type:"Polygon",coordinates:[h]},[d]):[d]}return[]}analyzeTag(h,d){const v=r.default[h];v&&(this.isPolygon=!0,v.whitelist?this.isPolygon=v.whitelist.indexOf(d)>=0:v.blacklist&&(this.isPolygon=!(v.blacklist.indexOf(d)>=0)))}}ip.Way=s;class a extends i{constructor(h,d){super("relation",h,d),this.relations=[],this.nodes=[],this.bounds=void 0}setBounds(h){this.bounds=h}addMember(h){switch(h.type){case"relation":let d=new n.LateBinder(this.relations,_=>{const E=this.refElems.get(`relation/${_}`);if(E)return E.refCount++,E},this,[h.ref]);this.relations.push(d),this.refElems.addBinder(d);break;case"way":h.role||(h.role="");let v=this[h.role];if(v||(v=this[h.role]=[]),h.geometry){const _=new s(h.ref,this.refElems);_.setLatLngArray(h.geometry),_.refCount++,v.push(_)}else if(h.nodes){const _=new s(h.ref,this.refElems);for(const E of h.nodes)_.addNodeRef(E);_.refCount++,v.push(_)}else{let _=new n.LateBinder(v,E=>{const M=this.refElems.get(`way/${E}`);if(M)return M.refCount++,M},this,[h.ref]);v.push(_),this.refElems.addBinder(_)}break;case"node":let w=null;if(h.lat&&h.lon){w=new o(h.ref,this.refElems),w.setLatLng({lon:h.lon,lat:h.lat}),h.tags&&w.addTags(h.tags);for(const[_,E]of Object.entries(h))["id","type","lat","lon"].indexOf(_)<0&&w.addProp(_,E);w.refCount++,this.nodes.push(w)}else{let _=new n.LateBinder(this.nodes,E=>{const M=this.refElems.get(`node/${E}`);if(M)return M.refCount++,M},this,[h.ref]);this.nodes.push(_),this.refElems.addBinder(_)}}}toFeatureArray(){function h(A){const F=A?A.toStrings():[];return F.length>0?F.length===1?{type:"LineString",coordinates:F[0]}:{type:"MultiLineString",coordinates:F}:null}function d(A,F){const O=A?A.toRings("counterclockwise"):[],N=F?F.toRings("clockwise"):[];if(O.length>0){const H=[];let G;for(G of O)H.push([G]);for(G=N.shift();G;){for(const W in O)if((0,e.ptInsidePolygon)((0,e.first)(G),O[W])){H[W].push(G);break}G=N.shift()}return H.length===1?{type:"Polygon",coordinates:H[0]}:{type:"MultiPolygon",coordinates:H}}return null}const v=[],w=[];let _=[];const E=["type","id","refElems","tags","props","refCount","hasTag","relations","nodes","bounds"];for(const A of this.relations)if(A){let F=Object.keys(A).filter(O=>E.indexOf(O)<0);for(const O of F){const N=A[O];if(N){const H=this[O];H?H.push(...N):this[O]=N}}}let M=Object.keys(this).filter(A=>E.indexOf(A)<0);for(const A of M){const F=this[A];if(F){this[A]=new n.WayCollection;for(const O of F)this[A].addWay(O)}}let D={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps(),geometry:null};if(this.bounds||delete D.bbox,this.outer){let A=Object.assign({},D),F=d(this.outer,this.inner);F&&(A.geometry=F,v.push(A))}else{let A={type:"MultiLineString",coordinates:[]};for(let F of M)if(F!=null&&F!=="inner"){let O=this[F];if(O){let N=h(O);if(N){if(N.type==="LineString")A.coordinates.push(N.coordinates);else if(N.type==="MultiLineString"){let H=Object.assign({},D);H.geometry=N,w.push(H)}}}}if(A.coordinates.length>0){let F=Object.assign({},D);F.geometry=A,w.push(F)}}for(let A of this.nodes)_=_.concat(A.toFeatureArray());return[...v,...w,..._]}}return ip.Relation=a,ip}var zE={},M9;function PSe(){if(M9)return zE;M9=1,Object.defineProperty(zE,"__esModule",{value:!0});function t(i){return i.match(/^(.+?)\[(.+?)\]>$/g)!==null}function e(i){const o=/^(.+?)\[(.+?)\]>$/g.exec(i);return o?{evt:o[1]+">",exp:o[2]}:{evt:i}}function n(i){const o="return "+i.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",o)}class r{constructor(o){this.queryParent=!1,this.progressive=!1,this.parentMap=new WeakMap,o&&(this.queryParent=!!o.queryParent,this.progressive=o.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(o,s,a){a=a?a+".":"";const c=/<([^ >\/]+)(.*?)>/mg,h=[];let d=c.exec(o);for(;d;){const v=d[1],w={$tag:v},_=a+v,E=d[2].trim();let M=!1;(E.endsWith("/")||v.startsWith("?")||v.startsWith("!"))&&(M=!0);const D=/([^ ]+?)="(.+?)"/g,A=/([^ ]+?)='(.+?)'/g;let F=D.exec(E),O=!1;for(;F;)O=!0,w[F[1]]=F[2],F=D.exec(E);if(!O)for(F=A.exec(E);F;)O=!0,w[F[1]]=F[2],F=A.exec(E);if(!O&&E!==""&&(w.text=E),this.progressive&&this.emit(`<${_}>`,w,s),!M){const N=new RegExp(`([^]+?)</${v}>`,"g");N.lastIndex=c.lastIndex;const H=N.exec(o);if(H&&H[1]){c.lastIndex=N.lastIndex;const G=this.parse(H[1],w,_);G.length>0?w.$innerNodes=G:w.$innerText=H[1]}}this.queryParent&&s&&this.parentMap.set(w,s),this.progressive&&this.emit(`</${_}>`,w,s),h.push(w),d=c.exec(o)}return h}getParent(o){return this.queryParent?this.parentMap.get(o):null}addListener(o,s){if(t(o)){const a=e(o);a.exp&&(s.condition=n(a.exp)),o=a.evt}this.$addListener(o,s)}removeListener(o,s){t(o)&&(o=e(o).evt),this.$removeListener(o,s)}on(o,s){this.addListener(o,s)}off(o,s){this.removeListener(o,s)}$addListener(o,s){const a=this.evtListeners[o];a?a.push(s):this.evtListeners[o]=[s]}$removeListener(o,s){const a=this.evtListeners[o];let c=-1;a&&(c=a.indexOf(s)),c>=0&&a.splice(c,1)}emit(o,...s){const a=this.evtListeners[o];if(a)for(const c of a)c.condition?c.condition.apply(null,s)===!0&&c.apply(null,s):c.apply(null,s)}}return zE.default=r,zE}var t2,A9;function ISe(){if(A9)return t2;A9=1;var t=t2&&t2.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};const e=RSe(),n=lL(),r=t(PSe());function i(o,s){let a=!1,c=!1,h=!0;s&&(A=>{if(A){a=!!(A.completeFeature||A.allFeatures),c=!!A.renderTagged;const F=A.suppressWay||A.excludeWay;F!==void 0&&!F&&(h=!1)}})(s);let w=(A=>A.elements?"json":A.indexOf("<osm")>=0?"xml":A.trim().startsWith("{")?"json-raw":"invalid")(o);const _=new n.RefElements;let E=[];const M=A=>{for(const F of o.elements)switch(F.type){case"node":const O=new e.Node(F.id,_);F.tags&&O.addTags(F.tags),O.addProps((0,n.purgeProps)(F,["id","type","tags","lat","lon"])),O.setLatLng(F);break;case"way":const N=new e.Way(F.id,_);if(F.tags&&N.addTags(F.tags),N.addProps((0,n.purgeProps)(F,["id","type","tags","nodes","geometry"])),F.geometry)N.setLatLngArray(F.geometry);else if(F.nodes)for(const G of F.nodes)N.addNodeRef(G);break;case"relation":const H=new e.Relation(F.id,_);if(F.bounds&&H.setBounds([parseFloat(F.bounds.minlon),parseFloat(F.bounds.minlat),parseFloat(F.bounds.maxlon),parseFloat(F.bounds.maxlat)]),F.tags&&H.addTags(F.tags),H.addProps((0,n.purgeProps)(F,["id","type","tags","bounds","members"])),F.members)for(const G of F.members)H.addMember(G)}},D=A=>{const F=new r.default({progressive:!0});F.on("</osm.node>",O=>{const N=new e.Node(O.id,_);for(const[H,G]of Object.entries(O))!H.startsWith("$")&&["id","lon","lat"].indexOf(H)<0&&N.addProp(H,G);if(N.setLatLng(O),O.$innerNodes)for(const H of O.$innerNodes)H.$tag==="tag"&&N.addTag(H.k,H.v)}),F.on("</osm.way>",O=>{const N=new e.Way(O.id,_);for(const[H,G]of Object.entries(O))!H.startsWith("$")&&["id"].indexOf(H)<0&&N.addProp(H,G);if(O.$innerNodes)for(const H of O.$innerNodes)H.$tag==="nd"?H.lon&&H.lat?N.addLatLng(H):H.ref&&N.addNodeRef(H.ref):H.$tag==="tag"&&N.addTag(H.k,H.v)}),F.on("<osm.relation>",O=>new e.Relation(O.id,_)),F.on("</osm.relation.member>",(O,N)=>{const H=_.get(`relation/${N==null?void 0:N.id}`),G={type:O.type,role:O.role?O.role:"",ref:O.ref};if(O.lat&&O.lon){G.lat=O.lat,G.lon=O.lon,G.tags={};for(const[W,X]of Object.entries(O))!W.startsWith("$")&&["type","lat","lon"].indexOf(W)<0&&(G[W]=X)}if(O.$innerNodes){const W=[],X=[];for(const K of O.$innerNodes)K.lat&&K.lon?W.push(K):K.ref&&X.push(K.ref);W.length>0?G.geometry=W:X.length>0&&(G.nodes=X)}H.addMember(G)}),F.on("</osm.relation.bounds>",(O,N)=>{_.get(`relation/${N==null?void 0:N.id}`).setBounds([parseFloat(O.minlon),parseFloat(O.minlat),parseFloat(O.maxlon),parseFloat(O.maxlat)])}),F.on("</osm.relation.tag>",(O,N)=>{_.get(`relation/${N==null?void 0:N.id}`).addTag(O.k,O.v)}),F.parse(A)};w==="json-raw"&&(o=JSON.parse(o),o.elements?w="json":w="invalid"),w==="json"?M():w==="xml"&&D(o),_.bindAll();for(const A of _.values())if(A.refCount<=0||A.hasTag&&c&&!(A instanceof e.Way&&h)){const F=A.toFeatureArray();if(A instanceof e.Relation&&!a&&F.length>0)return F[0].geometry;E=E.concat(F)}return{type:"FeatureCollection",features:E}}return t2=i,t2}ISe();var DSe={value:()=>{}};function cX(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new UT(n)}function UT(t){this._=t}function LSe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}UT.prototype=cX.prototype={constructor:UT,on:function(t,e){var n=this._,r=LSe(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=NSe(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=R9(n[i],t.name,e);else if(e==null)for(i in n)n[i]=R9(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new UT(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function NSe(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function R9(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=DSe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var uL="http://www.w3.org/1999/xhtml";const P9={svg:"http://www.w3.org/2000/svg",xhtml:uL,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uA(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),P9.hasOwnProperty(e)?{space:P9[e],local:t}:t}function kSe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===uL&&e.documentElement.namespaceURI===uL?e.createElement(t):e.createElementNS(n,t)}}function OSe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hX(t){var e=uA(t);return(e.local?OSe:kSe)(e)}function FSe(){}function Q4(t){return t==null?FSe:function(){return this.querySelector(t)}}function BSe(t){typeof t!="function"&&(t=Q4(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,h,d=0;d<s;++d)(c=o[d])&&(h=t.call(c,c.__data__,d,o))&&("__data__"in c&&(h.__data__=c.__data__),a[d]=h);return new bp(r,this._parents)}function zSe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function USe(){return[]}function fX(t){return t==null?USe:function(){return this.querySelectorAll(t)}}function jSe(t){return function(){return zSe(t.apply(this,arguments))}}function GSe(t){typeof t=="function"?t=jSe(t):t=fX(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,c,h=0;h<a;++h)(c=s[h])&&(r.push(t.call(c,c.__data__,h,s)),i.push(c));return new bp(r,i)}function dX(t){return function(){return this.matches(t)}}function pX(t){return function(e){return e.matches(t)}}var VSe=Array.prototype.find;function HSe(t){return function(){return VSe.call(this.children,t)}}function qSe(){return this.firstElementChild}function $Se(t){return this.select(t==null?qSe:HSe(typeof t=="function"?t:pX(t)))}var WSe=Array.prototype.filter;function XSe(){return Array.from(this.children)}function YSe(t){return function(){return WSe.call(this.children,t)}}function ZSe(t){return this.selectAll(t==null?XSe:YSe(typeof t=="function"?t:pX(t)))}function KSe(t){typeof t!="function"&&(t=dX(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,h=0;h<s;++h)(c=o[h])&&t.call(c,c.__data__,h,o)&&a.push(c);return new bp(r,this._parents)}function gX(t){return new Array(t.length)}function JSe(){return new bp(this._enter||this._groups.map(gX),this._parents)}function FC(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}FC.prototype={constructor:FC,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function QSe(t){return function(){return t}}function eEe(t,e,n,r,i,o){for(var s=0,a,c=e.length,h=o.length;s<h;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new FC(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function tEe(t,e,n,r,i,o,s){var a,c,h=new Map,d=e.length,v=o.length,w=new Array(d),_;for(a=0;a<d;++a)(c=e[a])&&(w[a]=_=s.call(c,c.__data__,a,e)+"",h.has(_)?i[a]=c:h.set(_,c));for(a=0;a<v;++a)_=s.call(t,o[a],a,o)+"",(c=h.get(_))?(r[a]=c,c.__data__=o[a],h.delete(_)):n[a]=new FC(t,o[a]);for(a=0;a<d;++a)(c=e[a])&&h.get(w[a])===c&&(i[a]=c)}function nEe(t){return t.__data__}function rEe(t,e){if(!arguments.length)return Array.from(this,nEe);var n=e?tEe:eEe,r=this._parents,i=this._groups;typeof t!="function"&&(t=QSe(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),h=0;h<o;++h){var d=r[h],v=i[h],w=v.length,_=iEe(t.call(d,d&&d.__data__,h,r)),E=_.length,M=a[h]=new Array(E),D=s[h]=new Array(E),A=c[h]=new Array(w);n(d,v,M,D,A,_,e);for(var F=0,O=0,N,H;F<E;++F)if(N=M[F]){for(F>=O&&(O=F+1);!(H=D[O])&&++O<E;);N._next=H||null}}return s=new bp(s,r),s._enter=a,s._exit=c,s}function iEe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function aEe(){return new bp(this._exit||this._groups.map(gX),this._parents)}function oEe(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function sEe(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var h=n[c],d=r[c],v=h.length,w=a[c]=new Array(v),_,E=0;E<v;++E)(_=h[E]||d[E])&&(w[E]=_);for(;c<i;++c)a[c]=n[c];return new bp(a,this._parents)}function lEe(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function uEe(t){t||(t=cEe);function e(v,w){return v&&w?t(v.__data__,w.__data__):!v-!w}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),h,d=0;d<a;++d)(h=s[d])&&(c[d]=h);c.sort(e)}return new bp(i,this._parents).order()}function cEe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function hEe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function fEe(){return Array.from(this)}function dEe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function pEe(){let t=0;for(const e of this)++t;return t}function gEe(){return!this.node()}function mEe(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function vEe(t){return function(){this.removeAttribute(t)}}function yEe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _Ee(t,e){return function(){this.setAttribute(t,e)}}function xEe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function bEe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function wEe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function SEe(t,e){var n=uA(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?yEe:vEe:typeof e=="function"?n.local?wEe:bEe:n.local?xEe:_Ee)(n,e))}function mX(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function EEe(t){return function(){this.style.removeProperty(t)}}function TEe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function CEe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function MEe(t,e,n){return arguments.length>1?this.each((e==null?EEe:typeof e=="function"?CEe:TEe)(t,e,n??"")):mx(this.node(),t)}function mx(t,e){return t.style.getPropertyValue(e)||mX(t).getComputedStyle(t,null).getPropertyValue(e)}function AEe(t){return function(){delete this[t]}}function REe(t,e){return function(){this[t]=e}}function PEe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function IEe(t,e){return arguments.length>1?this.each((e==null?AEe:typeof e=="function"?PEe:REe)(t,e)):this.node()[t]}function vX(t){return t.trim().split(/^|\s+/)}function eO(t){return t.classList||new yX(t)}function yX(t){this._node=t,this._names=vX(t.getAttribute("class")||"")}yX.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function _X(t,e){for(var n=eO(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function xX(t,e){for(var n=eO(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function DEe(t){return function(){_X(this,t)}}function LEe(t){return function(){xX(this,t)}}function NEe(t,e){return function(){(e.apply(this,arguments)?_X:xX)(this,t)}}function kEe(t,e){var n=vX(t+"");if(arguments.length<2){for(var r=eO(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?NEe:e?DEe:LEe)(n,e))}function OEe(){this.textContent=""}function FEe(t){return function(){this.textContent=t}}function BEe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function zEe(t){return arguments.length?this.each(t==null?OEe:(typeof t=="function"?BEe:FEe)(t)):this.node().textContent}function UEe(){this.innerHTML=""}function jEe(t){return function(){this.innerHTML=t}}function GEe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function VEe(t){return arguments.length?this.each(t==null?UEe:(typeof t=="function"?GEe:jEe)(t)):this.node().innerHTML}function HEe(){this.nextSibling&&this.parentNode.appendChild(this)}function qEe(){return this.each(HEe)}function $Ee(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function WEe(){return this.each($Ee)}function XEe(t){var e=typeof t=="function"?t:hX(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function YEe(){return null}function ZEe(t,e){var n=typeof t=="function"?t:hX(t),r=e==null?YEe:typeof e=="function"?e:Q4(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function KEe(){var t=this.parentNode;t&&t.removeChild(this)}function JEe(){return this.each(KEe)}function QEe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function eTe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tTe(t){return this.select(t?eTe:QEe)}function nTe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function rTe(t){return function(e){t.call(this,e,this.__data__)}}function iTe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function aTe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function oTe(t,e,n){return function(){var r=this.__on,i,o=rTe(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function sTe(t,e,n){var r=iTe(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,h=a.length,d;c<h;++c)for(i=0,d=a[c];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(a=e?oTe:aTe,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function bX(t,e,n){var r=mX(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function lTe(t,e){return function(){return bX(this,t,e)}}function uTe(t,e){return function(){return bX(this,t,e.apply(this,arguments))}}function cTe(t,e){return this.each((typeof e=="function"?uTe:lTe)(t,e))}function*hTe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var fTe=[null];function bp(t,e){this._groups=t,this._parents=e}function sS(){return new bp([[document.documentElement]],fTe)}function dTe(){return this}bp.prototype=sS.prototype={constructor:bp,select:BSe,selectAll:GSe,selectChild:$Se,selectChildren:ZSe,filter:KSe,data:rEe,enter:JSe,exit:aEe,join:oEe,merge:sEe,selection:dTe,order:lEe,sort:uEe,call:hEe,nodes:fEe,node:dEe,size:pEe,empty:gEe,each:mEe,attr:SEe,style:MEe,property:IEe,classed:kEe,text:zEe,html:VEe,raise:qEe,lower:WEe,append:XEe,insert:ZEe,remove:JEe,clone:tTe,datum:nTe,on:sTe,dispatch:cTe,[Symbol.iterator]:hTe};function tO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function wX(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function lS(){}var Tw=.7,BC=1/Tw,Y1="\\s*([+-]?\\d+)\\s*",Cw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pTe=/^#([0-9a-f]{3,8})$/,gTe=new RegExp(`^rgb\\(${Y1},${Y1},${Y1}\\)$`),mTe=new RegExp(`^rgb\\(${cg},${cg},${cg}\\)$`),vTe=new RegExp(`^rgba\\(${Y1},${Y1},${Y1},${Cw}\\)$`),yTe=new RegExp(`^rgba\\(${cg},${cg},${cg},${Cw}\\)$`),_Te=new RegExp(`^hsl\\(${Cw},${cg},${cg}\\)$`),xTe=new RegExp(`^hsla\\(${Cw},${cg},${cg},${Cw}\\)$`),I9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tO(lS,Mw,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:D9,formatHex:D9,formatHex8:bTe,formatHsl:wTe,formatRgb:L9,toString:L9});function D9(){return this.rgb().formatHex()}function bTe(){return this.rgb().formatHex8()}function wTe(){return SX(this).formatHsl()}function L9(){return this.rgb().formatRgb()}function Mw(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pTe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?N9(e):n===3?new df(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?UE(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?UE(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gTe.exec(t))?new df(e[1],e[2],e[3],1):(e=mTe.exec(t))?new df(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vTe.exec(t))?UE(e[1],e[2],e[3],e[4]):(e=yTe.exec(t))?UE(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_Te.exec(t))?F9(e[1],e[2]/100,e[3]/100,1):(e=xTe.exec(t))?F9(e[1],e[2]/100,e[3]/100,e[4]):I9.hasOwnProperty(t)?N9(I9[t]):t==="transparent"?new df(NaN,NaN,NaN,0):null}function N9(t){return new df(t>>16&255,t>>8&255,t&255,1)}function UE(t,e,n,r){return r<=0&&(t=e=n=NaN),new df(t,e,n,r)}function STe(t){return t instanceof lS||(t=Mw(t)),t?(t=t.rgb(),new df(t.r,t.g,t.b,t.opacity)):new df}function cL(t,e,n,r){return arguments.length===1?STe(t):new df(t,e,n,r??1)}function df(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}tO(df,cL,wX(lS,{brighter(t){return t=t==null?BC:Math.pow(BC,t),new df(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Tw:Math.pow(Tw,t),new df(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new df(Y0(this.r),Y0(this.g),Y0(this.b),zC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k9,formatHex:k9,formatHex8:ETe,formatRgb:O9,toString:O9}));function k9(){return`#${j0(this.r)}${j0(this.g)}${j0(this.b)}`}function ETe(){return`#${j0(this.r)}${j0(this.g)}${j0(this.b)}${j0((isNaN(this.opacity)?1:this.opacity)*255)}`}function O9(){const t=zC(this.opacity);return`${t===1?"rgb(":"rgba("}${Y0(this.r)}, ${Y0(this.g)}, ${Y0(this.b)}${t===1?")":`, ${t})`}`}function zC(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Y0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function j0(t){return t=Y0(t),(t<16?"0":"")+t.toString(16)}function F9(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new hp(t,e,n,r)}function SX(t){if(t instanceof hp)return new hp(t.h,t.s,t.l,t.opacity);if(t instanceof lS||(t=Mw(t)),!t)return new hp;if(t instanceof hp)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new hp(s,a,c,t.opacity)}function TTe(t,e,n,r){return arguments.length===1?SX(t):new hp(t,e,n,r??1)}function hp(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}tO(hp,TTe,wX(lS,{brighter(t){return t=t==null?BC:Math.pow(BC,t),new hp(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tw:Math.pow(Tw,t),new hp(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new df(FP(t>=240?t-240:t+120,i,r),FP(t,i,r),FP(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new hp(B9(this.h),jE(this.s),jE(this.l),zC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zC(this.opacity);return`${t===1?"hsl(":"hsla("}${B9(this.h)}, ${jE(this.s)*100}%, ${jE(this.l)*100}%${t===1?")":`, ${t})`}`}}));function B9(t){return t=(t||0)%360,t<0?t+360:t}function jE(t){return Math.max(0,Math.min(1,t||0))}function FP(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const EX=t=>()=>t;function CTe(t,e){return function(n){return t+n*e}}function MTe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ATe(t){return(t=+t)==1?TX:function(e,n){return n-e?MTe(e,n,t):EX(isNaN(e)?n:e)}}function TX(t,e){var n=e-t;return n?CTe(t,n):EX(isNaN(t)?e:t)}const z9=function t(e){var n=ATe(e);function r(i,o){var s=n((i=cL(i)).r,(o=cL(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),h=TX(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=c(d),i.opacity=h(d),i+""}}return r.gamma=t,r}(1);function lv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var hL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,BP=new RegExp(hL.source,"g");function RTe(t){return function(){return t}}function PTe(t){return function(e){return t(e)+""}}function ITe(t,e){var n=hL.lastIndex=BP.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=hL.exec(t))&&(i=BP.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:lv(r,i)})),n=BP.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?PTe(c[0].x):RTe(e):(e=c.length,function(h){for(var d=0,v;d<e;++d)a[(v=c[d]).i]=v.x(h);return a.join("")})}var U9=180/Math.PI,fL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function CX(t,e,n,r,i,o){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*U9,skewX:Math.atan(c)*U9,scaleX:s,scaleY:a}}var GE;function DTe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?fL:CX(e.a,e.b,e.c,e.d,e.e,e.f)}function LTe(t){return t==null||(GE||(GE=document.createElementNS("http://www.w3.org/2000/svg","g")),GE.setAttribute("transform",t),!(t=GE.transform.baseVal.consolidate()))?fL:(t=t.matrix,CX(t.a,t.b,t.c,t.d,t.e,t.f))}function MX(t,e,n,r){function i(h){return h.length?h.pop()+" ":""}function o(h,d,v,w,_,E){if(h!==v||d!==w){var M=_.push("translate(",null,e,null,n);E.push({i:M-4,x:lv(h,v)},{i:M-2,x:lv(d,w)})}else(v||w)&&_.push("translate("+v+e+w+n)}function s(h,d,v,w){h!==d?(h-d>180?d+=360:d-h>180&&(h+=360),w.push({i:v.push(i(v)+"rotate(",null,r)-2,x:lv(h,d)})):d&&v.push(i(v)+"rotate("+d+r)}function a(h,d,v,w){h!==d?w.push({i:v.push(i(v)+"skewX(",null,r)-2,x:lv(h,d)}):d&&v.push(i(v)+"skewX("+d+r)}function c(h,d,v,w,_,E){if(h!==v||d!==w){var M=_.push(i(_)+"scale(",null,",",null,")");E.push({i:M-4,x:lv(h,v)},{i:M-2,x:lv(d,w)})}else(v!==1||w!==1)&&_.push(i(_)+"scale("+v+","+w+")")}return function(h,d){var v=[],w=[];return h=t(h),d=t(d),o(h.translateX,h.translateY,d.translateX,d.translateY,v,w),s(h.rotate,d.rotate,v,w),a(h.skewX,d.skewX,v,w),c(h.scaleX,h.scaleY,d.scaleX,d.scaleY,v,w),h=d=null,function(_){for(var E=-1,M=w.length,D;++E<M;)v[(D=w[E]).i]=D.x(_);return v.join("")}}}var NTe=MX(DTe,"px, ","px)","deg)"),kTe=MX(LTe,", ",")",")"),vx=0,C2=0,n2=0,AX=1e3,UC,M2,jC=0,uy=0,cA=0,Aw=typeof performance=="object"&&performance.now?performance:Date,RX=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function nO(){return uy||(RX(OTe),uy=Aw.now()+cA)}function OTe(){uy=0}function GC(){this._call=this._time=this._next=null}GC.prototype=PX.prototype={constructor:GC,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?nO():+n)+(e==null?0:+e),!this._next&&M2!==this&&(M2?M2._next=this:UC=this,M2=this),this._call=t,this._time=n,dL()},stop:function(){this._call&&(this._call=null,this._time=1/0,dL())}};function PX(t,e,n){var r=new GC;return r.restart(t,e,n),r}function FTe(){nO(),++vx;for(var t=UC,e;t;)(e=uy-t._time)>=0&&t._call.call(void 0,e),t=t._next;--vx}function j9(){uy=(jC=Aw.now())+cA,vx=C2=0;try{FTe()}finally{vx=0,zTe(),uy=0}}function BTe(){var t=Aw.now(),e=t-jC;e>AX&&(cA-=e,jC=t)}function zTe(){for(var t,e=UC,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:UC=n);M2=t,dL(r)}function dL(t){if(!vx){C2&&(C2=clearTimeout(C2));var e=t-uy;e>24?(t<1/0&&(C2=setTimeout(j9,t-Aw.now()-cA)),n2&&(n2=clearInterval(n2))):(n2||(jC=Aw.now(),n2=setInterval(BTe,AX)),vx=1,RX(j9))}}function G9(t,e,n){var r=new GC;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var UTe=cX("start","end","cancel","interrupt"),jTe=[],IX=0,V9=1,pL=2,jT=3,H9=4,gL=5,GT=6;function hA(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;GTe(t,n,{name:e,index:r,group:i,on:UTe,tween:jTe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:IX})}function rO(t,e){var n=Rp(t,e);if(n.state>IX)throw new Error("too late; already scheduled");return n}function _g(t,e){var n=Rp(t,e);if(n.state>jT)throw new Error("too late; already running");return n}function Rp(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function GTe(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=PX(o,0,n.time);function o(h){n.state=V9,n.timer.restart(s,n.delay,n.time),n.delay<=h&&s(h-n.delay)}function s(h){var d,v,w,_;if(n.state!==V9)return c();for(d in r)if(_=r[d],_.name===n.name){if(_.state===jT)return G9(s);_.state===H9?(_.state=GT,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete r[d]):+d<e&&(_.state=GT,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete r[d])}if(G9(function(){n.state===jT&&(n.state=H9,n.timer.restart(a,n.delay,n.time),a(h))}),n.state=pL,n.on.call("start",t,t.__data__,n.index,n.group),n.state===pL){for(n.state=jT,i=new Array(w=n.tween.length),d=0,v=-1;d<w;++d)(_=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++v]=_);i.length=v+1}}function a(h){for(var d=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(c),n.state=gL,1),v=-1,w=i.length;++v<w;)i[v].call(t,d);n.state===gL&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=GT,n.timer.stop(),delete r[e];for(var h in r)return;delete t.__transition}}function VTe(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>pL&&r.state<gL,r.state=GT,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function HTe(t){return this.each(function(){VTe(this,t)})}function qTe(t,e){var n,r;return function(){var i=_g(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function $Te(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=_g(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},c=0,h=i.length;c<h;++c)if(i[c].name===e){i[c]=a;break}c===h&&i.push(a)}o.tween=i}}function WTe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Rp(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?qTe:$Te)(n,t,e))}function iO(t,e,n){var r=t._id;return t.each(function(){var i=_g(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Rp(i,r).value[e]}}function DX(t,e){var n;return(typeof e=="number"?lv:e instanceof Mw?z9:(n=Mw(e))?(e=n,z9):ITe)(t,e)}function XTe(t){return function(){this.removeAttribute(t)}}function YTe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ZTe(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function KTe(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function JTe(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function QTe(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function eCe(t,e){var n=uA(t),r=n==="transform"?kTe:DX;return this.attrTween(t,typeof e=="function"?(n.local?QTe:JTe)(n,r,iO(this,"attr."+t,e)):e==null?(n.local?YTe:XTe)(n):(n.local?KTe:ZTe)(n,r,e))}function tCe(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function nCe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function rCe(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&nCe(t,o)),n}return i._value=e,i}function iCe(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&tCe(t,o)),n}return i._value=e,i}function aCe(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=uA(t);return this.tween(n,(r.local?rCe:iCe)(r,e))}function oCe(t,e){return function(){rO(this,t).delay=+e.apply(this,arguments)}}function sCe(t,e){return e=+e,function(){rO(this,t).delay=e}}function lCe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?oCe:sCe)(e,t)):Rp(this.node(),e).delay}function uCe(t,e){return function(){_g(this,t).duration=+e.apply(this,arguments)}}function cCe(t,e){return e=+e,function(){_g(this,t).duration=e}}function hCe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?uCe:cCe)(e,t)):Rp(this.node(),e).duration}function fCe(t,e){if(typeof e!="function")throw new Error;return function(){_g(this,t).ease=e}}function dCe(t){var e=this._id;return arguments.length?this.each(fCe(e,t)):Rp(this.node(),e).ease}function pCe(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;_g(this,t).ease=n}}function gCe(t){if(typeof t!="function")throw new Error;return this.each(pCe(this._id,t))}function mCe(t){typeof t!="function"&&(t=dX(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,h=0;h<s;++h)(c=o[h])&&t.call(c,c.__data__,h,o)&&a.push(c);return new bm(r,this._parents,this._name,this._id)}function vCe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],h=n[a],d=c.length,v=s[a]=new Array(d),w,_=0;_<d;++_)(w=c[_]||h[_])&&(v[_]=w);for(;a<r;++a)s[a]=e[a];return new bm(s,this._parents,this._name,this._id)}function yCe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function _Ce(t,e,n){var r,i,o=yCe(e)?rO:_g;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function xCe(t,e){var n=this._id;return arguments.length<2?Rp(this.node(),n).on.on(t):this.each(_Ce(n,t,e))}function bCe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function wCe(){return this.on("end.remove",bCe(this._id))}function SCe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Q4(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,h=o[s]=new Array(c),d,v,w=0;w<c;++w)(d=a[w])&&(v=t.call(d,d.__data__,w,a))&&("__data__"in d&&(v.__data__=d.__data__),h[w]=v,hA(h[w],e,n,w,h,Rp(d,n)));return new bm(o,this._parents,e,n)}function ECe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=fX(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],h=c.length,d,v=0;v<h;++v)if(d=c[v]){for(var w=t.call(d,d.__data__,v,c),_,E=Rp(d,n),M=0,D=w.length;M<D;++M)(_=w[M])&&hA(_,e,n,M,w,E);o.push(w),s.push(d)}return new bm(o,s,e,n)}var TCe=sS.prototype.constructor;function CCe(){return new TCe(this._groups,this._parents)}function MCe(t,e){var n,r,i;return function(){var o=mx(this,t),s=(this.style.removeProperty(t),mx(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function LX(t){return function(){this.style.removeProperty(t)}}function ACe(t,e,n){var r,i=n+"",o;return function(){var s=mx(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function RCe(t,e,n){var r,i,o;return function(){var s=mx(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),mx(this,t))),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function PCe(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var c=_g(this,t),h=c.on,d=c.value[o]==null?a||(a=LX(e)):void 0;(h!==n||i!==d)&&(r=(n=h).copy()).on(s,i=d),c.on=r}}function ICe(t,e,n){var r=(t+="")=="transform"?NTe:DX;return e==null?this.styleTween(t,MCe(t,r)).on("end.style."+t,LX(t)):typeof e=="function"?this.styleTween(t,RCe(t,r,iO(this,"style."+t,e))).each(PCe(this._id,t)):this.styleTween(t,ACe(t,r,e),n).on("end.style."+t,null)}function DCe(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function LCe(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&DCe(t,s,n)),r}return o._value=e,o}function NCe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,LCe(t,e,n??""))}function kCe(t){return function(){this.textContent=t}}function OCe(t){return function(){var e=t(this);this.textContent=e??""}}function FCe(t){return this.tween("text",typeof t=="function"?OCe(iO(this,"text",t)):kCe(t==null?"":t+""))}function BCe(t){return function(e){this.textContent=t.call(this,e)}}function zCe(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&BCe(i)),e}return r._value=t,r}function UCe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,zCe(t))}function jCe(){for(var t=this._name,e=this._id,n=NX(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,h=0;h<a;++h)if(c=s[h]){var d=Rp(c,e);hA(c,t,n,h,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new bm(r,this._parents,t,n)}function GCe(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var h=_g(this,r),d=h.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),h.on=e}),i===0&&o()})}var VCe=0;function bm(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function NX(){return++VCe}var Zg=sS.prototype;bm.prototype={constructor:bm,select:SCe,selectAll:ECe,selectChild:Zg.selectChild,selectChildren:Zg.selectChildren,filter:mCe,merge:vCe,selection:CCe,transition:jCe,call:Zg.call,nodes:Zg.nodes,node:Zg.node,size:Zg.size,empty:Zg.empty,each:Zg.each,on:xCe,attr:eCe,attrTween:aCe,style:ICe,styleTween:NCe,text:FCe,textTween:UCe,remove:wCe,tween:WTe,delay:lCe,duration:hCe,ease:dCe,easeVarying:gCe,end:GCe,[Symbol.iterator]:Zg[Symbol.iterator]};function HCe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var qCe={time:null,delay:0,duration:250,ease:HCe};function $Ce(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function WCe(t){var e,n;t instanceof bm?(e=t._id,t=t._name):(e=NX(),(n=qCe).time=nO(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,h=0;h<a;++h)(c=s[h])&&hA(c,t,e,h,s,n||$Ce(c,e));return new bm(r,this._parents,t,e)}sS.prototype.interrupt=HTe;sS.prototype.transition=WCe;function A2(t,e,n){this.k=t,this.x=e,this.y=n}A2.prototype={constructor:A2,scale:function(t){return t===1?this:new A2(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new A2(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};A2.prototype;const XCe=gg(ke.jsx("path",{d:"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2zm6 9-4 5h12l-3-4-2.03 2.71zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5M20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2m0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4z"})),YCe=gg(ke.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"})),ZCe=gg(ke.jsx("path",{d:"m16.24 11.51 1.57-1.57-3.75-3.75-1.57 1.57-4.14-4.13c-.78-.78-2.05-.78-2.83 0l-1.9 1.9c-.78.78-.78 2.05 0 2.83l4.13 4.13L3 17.25V21h3.75l4.76-4.76 4.13 4.13c.95.95 2.23.6 2.83 0l1.9-1.9c.78-.78.78-2.05 0-2.83zm-7.06-.44L5.04 6.94l1.89-1.9L8.2 6.31 7.02 7.5l1.41 1.41 1.19-1.19 1.45 1.45zm7.88 7.89-4.13-4.13 1.9-1.9 1.45 1.45-1.19 1.19 1.41 1.41 1.19-1.19 1.27 1.27zm3.65-11.92c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.47-.47-1.12-.29-1.41 0l-1.83 1.83 3.75 3.75z"})),KCe=gg(ke.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}));function Fc(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var JCe=typeof Symbol=="function"&&Symbol.observable||"@@observable",q9=JCe,zP=()=>Math.random().toString(36).substring(7).split("").join("."),QCe={INIT:`@@redux/INIT${zP()}`,REPLACE:`@@redux/REPLACE${zP()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${zP()}`},VC=QCe;function aO(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function kX(t,e,n){if(typeof t!="function")throw new Error(Fc(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Fc(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Fc(1));return n(kX)(t,e)}let r=t,i=e,o=new Map,s=o,a=0,c=!1;function h(){s===o&&(s=new Map,o.forEach((D,A)=>{s.set(A,D)}))}function d(){if(c)throw new Error(Fc(3));return i}function v(D){if(typeof D!="function")throw new Error(Fc(4));if(c)throw new Error(Fc(5));let A=!0;h();const F=a++;return s.set(F,D),function(){if(A){if(c)throw new Error(Fc(6));A=!1,h(),s.delete(F),o=null}}}function w(D){if(!aO(D))throw new Error(Fc(7));if(typeof D.type>"u")throw new Error(Fc(8));if(typeof D.type!="string")throw new Error(Fc(17));if(c)throw new Error(Fc(9));try{c=!0,i=r(i,D)}finally{c=!1}return(o=s).forEach(F=>{F()}),D}function _(D){if(typeof D!="function")throw new Error(Fc(10));r=D,w({type:VC.REPLACE})}function E(){const D=v;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(Fc(11));function F(){const N=A;N.next&&N.next(d())}return F(),{unsubscribe:D(F)}},[q9](){return this}}}return w({type:VC.INIT}),{dispatch:w,subscribe:v,getState:d,replaceReducer:_,[q9]:E}}function eMe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:VC.INIT})>"u")throw new Error(Fc(12));if(typeof n(void 0,{type:VC.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fc(13))})}function tMe(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{eMe(n)}catch(o){i=o}return function(s={},a){if(i)throw i;let c=!1;const h={};for(let d=0;d<r.length;d++){const v=r[d],w=n[v],_=s[v],E=w(_,a);if(typeof E>"u")throw a&&a.type,new Error(Fc(14));h[v]=E,c=c||E!==_}return c=c||r.length!==Object.keys(s).length,c?h:s}}function HC(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function nMe(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(Fc(15))};const s={getState:i.getState,dispatch:(c,...h)=>o(c,...h)},a=t.map(c=>c(s));return o=HC(...a)(i.dispatch),{...i,dispatch:o}}}function rMe(t){return aO(t)&&"type"in t&&typeof t.type=="string"}var OX=Symbol.for("immer-nothing"),$9=Symbol.for("immer-draftable"),Qf=Symbol.for("immer-state");function fp(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var yx=Object.getPrototypeOf;function cy(t){return!!t&&!!t[Qf]}function wm(t){var e;return t?FX(t)||Array.isArray(t)||!!t[$9]||!!((e=t.constructor)!=null&&e[$9])||dA(t)||pA(t):!1}var iMe=Object.prototype.constructor.toString();function FX(t){if(!t||typeof t!="object")return!1;const e=yx(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===iMe}function qC(t,e){fA(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function fA(t){const e=t[Qf];return e?e.type_:Array.isArray(t)?1:dA(t)?2:pA(t)?3:0}function mL(t,e){return fA(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function BX(t,e,n){const r=fA(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function aMe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function dA(t){return t instanceof Map}function pA(t){return t instanceof Set}function P0(t){return t.copy_||t.base_}function vL(t,e){if(dA(t))return new Map(t);if(pA(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=FX(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Qf];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create(yx(t),r)}else{const r=yx(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function oO(t,e=!1){return gA(t)||cy(t)||!wm(t)||(fA(t)>1&&(t.set=t.add=t.clear=t.delete=oMe),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>oO(r,!0))),t}function oMe(){fp(2)}function gA(t){return Object.isFrozen(t)}var sMe={};function hy(t){const e=sMe[t];return e||fp(0,t),e}var Rw;function zX(){return Rw}function lMe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function W9(t,e){e&&(hy("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function yL(t){_L(t),t.drafts_.forEach(uMe),t.drafts_=null}function _L(t){t===Rw&&(Rw=t.parent_)}function X9(t){return Rw=lMe(Rw,t)}function uMe(t){const e=t[Qf];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Y9(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Qf].modified_&&(yL(e),fp(4)),wm(t)&&(t=$C(e,t),e.parent_||WC(e,t)),e.patches_&&hy("Patches").generateReplacementPatches_(n[Qf].base_,t,e.patches_,e.inversePatches_)):t=$C(e,n,[]),yL(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==OX?t:void 0}function $C(t,e,n){if(gA(e))return e;const r=e[Qf];if(!r)return qC(e,(i,o)=>Z9(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return WC(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),qC(o,(a,c)=>Z9(t,r,i,a,c,n,s)),WC(t,i,!1),n&&t.patches_&&hy("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function Z9(t,e,n,r,i,o,s){if(cy(i)){const a=o&&e&&e.type_!==3&&!mL(e.assigned_,r)?o.concat(r):void 0,c=$C(t,i,a);if(BX(n,r,c),cy(c))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(wm(i)&&!gA(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;$C(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&WC(t,i)}}function WC(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&oO(e,n)}function cMe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:zX(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=sO;n&&(i=[r],o=Pw);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var sO={get(t,e){if(e===Qf)return t;const n=P0(t);if(!mL(n,e))return hMe(t,n,e);const r=n[e];return t.finalized_||!wm(r)?r:r===UP(t.base_,e)?(jP(t),t.copy_[e]=bL(r,t)):r},has(t,e){return e in P0(t)},ownKeys(t){return Reflect.ownKeys(P0(t))},set(t,e,n){const r=UX(P0(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=UP(P0(t),e),o=i==null?void 0:i[Qf];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(aMe(n,i)&&(n!==void 0||mL(t.base_,e)))return!0;jP(t),xL(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return UP(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,jP(t),xL(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=P0(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){fp(11)},getPrototypeOf(t){return yx(t.base_)},setPrototypeOf(){fp(12)}},Pw={};qC(sO,(t,e)=>{Pw[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Pw.deleteProperty=function(t,e){return Pw.set.call(this,t,e,void 0)};Pw.set=function(t,e,n){return sO.set.call(this,t[0],e,n,t[0])};function UP(t,e){const n=t[Qf];return(n?P0(n):t)[e]}function hMe(t,e,n){var i;const r=UX(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function UX(t,e){if(!(e in t))return;let n=yx(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=yx(n)}}function xL(t){t.modified_||(t.modified_=!0,t.parent_&&xL(t.parent_))}function jP(t){t.copy_||(t.copy_=vL(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var fMe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(c=o,...h){return s.produce(c,d=>n.call(this,d,...h))}}typeof n!="function"&&fp(6),r!==void 0&&typeof r!="function"&&fp(7);let i;if(wm(e)){const o=X9(this),s=bL(e,void 0);let a=!0;try{i=n(s),a=!1}finally{a?yL(o):_L(o)}return W9(o,r),Y9(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===OX&&(i=void 0),this.autoFreeze_&&oO(i,!0),r){const o=[],s=[];hy("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else fp(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,c=>e(c,...a));let r,i;return[this.produce(e,n,(s,a)=>{r=s,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){wm(t)||fp(8),cy(t)&&(t=dMe(t));const e=X9(this),n=bL(t,void 0);return n[Qf].isManual_=!0,_L(e),n}finishDraft(t,e){const n=t&&t[Qf];(!n||!n.isManual_)&&fp(9);const{scope_:r}=n;return W9(r,e),Y9(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=hy("Patches").applyPatches_;return cy(t)?r(t,e):this.produce(t,i=>r(i,e))}};function bL(t,e){const n=dA(t)?hy("MapSet").proxyMap_(t,e):pA(t)?hy("MapSet").proxySet_(t,e):cMe(t,e);return(e?e.scope_:zX()).drafts_.push(n),n}function dMe(t){return cy(t)||fp(10,t),jX(t)}function jX(t){if(!wm(t)||gA(t))return t;const e=t[Qf];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=vL(t,e.scope_.immer_.useStrictShallowCopy_)}else n=vL(t,!0);return qC(n,(r,i)=>{BX(n,r,jX(i))}),e&&(e.finalized_=!1),n}var ed=new fMe,GX=ed.produce;ed.produceWithPatches.bind(ed);ed.setAutoFreeze.bind(ed);ed.setUseStrictShallowCopy.bind(ed);ed.applyPatches.bind(ed);ed.createDraft.bind(ed);ed.finishDraft.bind(ed);function VX(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var pMe=VX(),gMe=VX,mMe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?HC:HC.apply(null,arguments)};function K9(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(dm(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>rMe(r)&&r.type===t,n}var HX=class R2 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,R2.prototype)}static get[Symbol.species](){return R2}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new R2(...e[0].concat(this)):new R2(...e.concat(this))}};function J9(t){return wm(t)?GX(t,()=>{}):t}function Q9(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function vMe(t){return typeof t=="boolean"}var yMe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new HX;return n&&(vMe(n)?s.push(pMe):s.push(gMe(n.extraArgument))),s},_Me="RTK_autoBatch",ej=t=>e=>{setTimeout(e,t)},xMe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const a=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ej(10):t.type==="callback"?t.queueNotification:ej(t.timeout),h=()=>{s=!1,o&&(o=!1,a.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const v=()=>i&&d(),w=r.subscribe(v);return a.add(d),()=>{w(),a.delete(d)}},dispatch(d){var v;try{return i=!((v=d==null?void 0:d.meta)!=null&&v[_Me]),o=!i,o&&(s||(s=!0,c(h))),r.dispatch(d)}finally{i=!0}}})},bMe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new HX(t);return r&&i.push(xMe(typeof r=="object"?r:void 0)),i};function wMe(t){const e=yMe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(aO(n))a=tMe(n);else throw new Error(dm(1));let c;typeof r=="function"?c=r(e):c=e();let h=HC;i&&(h=mMe({trace:!1,...typeof i=="object"&&i}));const d=nMe(...c),v=bMe(d);let w=typeof s=="function"?s(v):v();const _=h(...w);return kX(a,o,_)}function qX(t){const e={},n=[];let r;const i={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(dm(28));if(a in e)throw new Error(dm(29));return e[a]=s,i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function SMe(t){return typeof t=="function"}function EMe(t,e){let[n,r,i]=qX(e),o;if(SMe(t))o=()=>J9(t());else{const a=J9(t);o=()=>a}function s(a=o(),c){let h=[n[c.type],...r.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return h.filter(d=>!!d).length===0&&(h=[i]),h.reduce((d,v)=>{if(v)if(cy(d)){const _=v(d,c);return _===void 0?d:_}else{if(wm(d))return GX(d,w=>v(w,c));{const w=v(d,c);if(w===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return w}}return d},a)}return s.getInitialState=o,s}var TMe=Symbol.for("rtk-slice-createasyncthunk");function CMe(t,e){return`${t}/${e}`}function MMe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[TMe];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(dm(11));const a=(typeof i.reducers=="function"?i.reducers(PMe()):i.reducers)||{},c=Object.keys(a),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(O,N){const H=typeof O=="string"?O:O.type;if(!H)throw new Error(dm(12));if(H in h.sliceCaseReducersByType)throw new Error(dm(13));return h.sliceCaseReducersByType[H]=N,d},addMatcher(O,N){return h.sliceMatchers.push({matcher:O,reducer:N}),d},exposeAction(O,N){return h.actionCreators[O]=N,d},exposeCaseReducer(O,N){return h.sliceCaseReducersByName[O]=N,d}};c.forEach(O=>{const N=a[O],H={reducerName:O,type:CMe(o,O),createNotation:typeof i.reducers=="function"};DMe(N)?NMe(H,N,d,e):IMe(H,N,d)});function v(){const[O={},N=[],H=void 0]=typeof i.extraReducers=="function"?qX(i.extraReducers):[i.extraReducers],G={...O,...h.sliceCaseReducersByType};return EMe(i.initialState,W=>{for(let X in G)W.addCase(X,G[X]);for(let X of h.sliceMatchers)W.addMatcher(X.matcher,X.reducer);for(let X of N)W.addMatcher(X.matcher,X.reducer);H&&W.addDefaultCase(H)})}const w=O=>O,_=new Map;let E;function M(O,N){return E||(E=v()),E(O,N)}function D(){return E||(E=v()),E.getInitialState()}function A(O,N=!1){function H(W){let X=W[O];return typeof X>"u"&&N&&(X=D()),X}function G(W=w){const X=Q9(_,N,()=>new WeakMap);return Q9(X,W,()=>{const K={};for(const[k,$]of Object.entries(i.selectors??{}))K[k]=AMe($,W,D,N);return K})}return{reducerPath:O,getSelectors:G,get selectors(){return G(H)},selectSlice:H}}const F={name:o,reducer:M,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:D,...A(s),injectInto(O,{reducerPath:N,...H}={}){const G=N??s;return O.inject({reducerPath:G,reducer:M},H),{...F,...A(G,!0)}}};return F}}function AMe(t,e,n,r){function i(o,...s){let a=e(o);return typeof a>"u"&&r&&(a=n()),t(a,...s)}return i.unwrapped=t,i}var RMe=MMe();function PMe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function IMe({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!LMe(r))throw new Error(dm(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?K9(t,s):K9(t))}function DMe(t){return t._reducerDefinitionType==="asyncThunk"}function LMe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function NMe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(dm(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:c,settled:h,options:d}=n,v=i(t,o,d);r.exposeAction(e,v),s&&r.addCase(v.fulfilled,s),a&&r.addCase(v.pending,a),c&&r.addCase(v.rejected,c),h&&r.addMatcher(v.settled,h),r.exposeCaseReducer(e,{fulfilled:s||VE,pending:a||VE,rejected:c||VE,settled:h||VE})}function VE(){}function dm(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Gh=function(){return Gh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Gh.apply(this,arguments)};function kMe(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(d){try{h(r.next(d))}catch(v){s(v)}}function c(d){try{h(r.throw(d))}catch(v){s(v)}}function h(d){d.done?o(d.value):i(d.value).then(a,c)}h((r=r.apply(t,[])).next())})}function OMe(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(h){return function(d){return c([h,d])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(d){h=[6,d],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function vv(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var FMe=function(){function t(e){var n=this,r=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[],addsource:[],addlayer:[]},this.wrapper={on:function(c,h,d,v){if(r.eventHandlers[c]){typeof d=="string"&&(v=d,d={}),r.eventHandlers[c].push({handler:h,options:d});var w=[c,h];v&&typeof v=="string"&&(r.initRegisteredElements(v),r.registeredElements[v].wrapperEvents.push(w))}},off:function(c,h){r.eventHandlers[c]&&(r.eventHandlers[c]=r.eventHandlers[c].filter(function(d){return Object.is(d.handler,h)?!1:d}))},fire:function(c,h){if(r.eventHandlers[c]){var d=h||window,v=new Event(c);r.eventHandlers[c].forEach(function(w){w.handler.call(d,v,r,h)})}},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:function(c){if(c)return{id:c.id,type:c.type,visible:c.visibility!=="none",baseLayer:r.baseLayers.indexOf(c.id)!==-1}},buildLayerObjects:function(){return r.map.style._order.map(function(c){return r.wrapper.buildLayerObject(r.map.style._layers[c])}).filter(function(c){return typeof c<"u"})},refreshLayerState:function(){r.wrapper.layerState=r.wrapper.buildLayerObjects(),JSON.stringify(r.wrapper.layerState)!==r.wrapper.layerStateString&&(r.wrapper.fire("layerchange"),r.wrapper.layerStateString=JSON.stringify(r.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:function(){return typeof r.map.getCenter=="function"?{center:function(c){var h=c.lng,d=c.lat;return{lng:h,lat:d}}(r.map.getCenter()),zoom:r.map.getZoom(),bearing:r.map.getBearing(),pitch:r.map.getPitch()}:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0}},refreshViewport:function(){r.wrapper.viewportState=r.wrapper.getViewport()}},this.cancelled=!1,this.initRegisteredElements=function(c,h){(typeof r.registeredElements[c]>"u"||typeof h<"u"&&h)&&(r.registeredElements[c]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=function(c,h,d){return r.map.style&&(d&&typeof d=="string"&&typeof c.id<"u"&&(r.initRegisteredElements(d),r.registeredElements[d].layers.push(c.id),c!=null&&c.source&&typeof(c==null?void 0:c.source)!="string"&&r.registeredElements[d].sources.push(c.id)),r.map.addLayer(c,h),r.wrapper.fire("addlayer",{layer_id:c.id})),n},this.addSource=function(c,h,d){return r.map.style&&(d&&typeof d=="string"&&typeof c<"u"&&(r.initRegisteredElements(d),r.registeredElements[d].sources.push(c)),r.map.addSource(c,h),r.wrapper.fire("addsource",{source_id:c})),n},this.addImage=function(c,h,d,v){return r.map.style?typeof d=="string"&&typeof v>"u"?r.addImage(c,h,void 0,d):(v&&typeof v=="string"&&typeof c<"u"&&(r.initRegisteredElements(v),r.registeredElements[v].images.push(c)),r.map.addImage(c,h,d),n):n},this.on=function(c,h,d,v){var w;if(typeof d=="string"&&typeof h=="function")return r.on.call(r,c,void 0,h,d);var _=[c,h,d];return h||(_=[c,d]),v&&typeof v=="string"&&(r.initRegisteredElements(v),r.registeredElements[v].events.push(_)),(w=r.map).on.apply(w,_),n},this.addControl=function(c,h,d){return d&&typeof d=="string"&&(r.initRegisteredElements(d),r.registeredElements[d].controls.push(c)),r.map.addControl(c,h),n},this.cleanup=function(c){r.map.style&&typeof r.registeredElements[c]<"u"&&(r.registeredElements[c].layers.forEach(function(h){r.map.style.getLayer(h)&&r.map.style.removeLayer(h)}),r.registeredElements[c].sources.forEach(function(h){r.map.style.getSource(h)&&r.map.style.removeSource(h)}),r.registeredElements[c].images.forEach(function(h){r.map.hasImage(h)&&r.map.style.removeImage(h)}),r.registeredElements[c].events.forEach(function(h){var d;(d=r.map).off.apply(d,h)}),r.registeredElements[c].controls.forEach(function(h){r.map.removeControl(h)}),r.registeredElements[c].wrapperEvents.forEach(function(h){var d;(d=r.wrapper).off.apply(d,h)}),r.initRegisteredElements(c,!0))};var i=["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"];i.forEach(function(c){n[c]=function(){for(var h,d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return r.map&&r.map.style&&typeof r.map.style[c]=="function"&&(h=r.map.style)[c].apply(h,d),r.map._update?r.map._update(!0):void 0}});var o=["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"];o.forEach(function(c){n[c]=function(){for(var h,d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return r.map&&r.map.style?(h=r.map.style)[c].apply(h,d):!1}}),this.addNativeMaplibreFunctionsAndProps=function(){Object.getOwnPropertyNames(Object.getPrototypeOf(n.map)).forEach(function(c){typeof n[c]>"u"&&(n[c]=function(){for(var h,d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return(h=r.map)[c].apply(h,d)})}),Object.keys(n.map).forEach(function(c){typeof n[c]>"u"&&(n[c]=r.map[c])})};var s=["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"];s.forEach(function(c){n[c]=function(){for(var h,d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];if(typeof r.map[c]=="function")return(h=r.map[c]).call.apply(h,vv([r.map],d,!1))}});var a=function(){return kMe(n,void 0,void 0,function(){return OMe(this,function(c){switch(c.label){case 0:return typeof e.mapOptions.style=="string"&&e.mapOptions.style.indexOf("mapbox://")===-1?[4,fetch(e.mapOptions.style).then(function(h){if(h.ok)return h.json();throw new Error("error loading map style.json")}).then(function(h){h.layers.forEach(function(d){r.baseLayers.push(d.id),!r.firstSymbolLayer&&d.type==="symbol"&&(r.firstSymbolLayer=d.id)}),r.styleJson=h,e.mapOptions.style=h}).catch(function(h){console.log(h)})]:[3,2];case 1:c.sent(),c.label=2;case 2:return r.map=new dse.Map(e.mapOptions),r.addNativeMaplibreFunctionsAndProps(),r.wrapper.refreshViewport(),r.wrapper.fire("viewportchange"),r.map.on("load",function(){r.addNativeMaplibreFunctionsAndProps()}),r.map.on("move",function(){r.wrapper.viewportState=r.wrapper.getViewport(),r.wrapper.fire("viewportchange")}),r.map.on("idle",function(){r.wrapper.refreshLayerState()}),r.map.on("data",function(){r.wrapper.refreshLayerState()}),typeof e.onReady=="function"&&e.onReady(r.map,r),[2]}})})};a()}return t}(),BMe=Lx({palette:{mode:"light"}}),zMe=Lx({palette:{mode:"dark"}}),UMe=function(t){return Gh(Gh({},t==="light"?BMe:zMe),{palette:Gh({mode:t},t==="dark"?{primary:{main:"#009EE0"},secondary:{main:"#747577"},background:{paper:"#313131"},text:{primary:"#FFF",contrast:"#000"},topToolbar:{barColor:"#000"},navigation:{navColor:"#313131",navHover:"#747577"},GPS:{GPSActiveColor:"#fff",GPSInactiveColor:"#fff",GPSActiveBackgroundColor:"#747577"},compass:{compColor:"#313131",compHover:"#747577",compStroke:"#d3dce1",compNorth:"#cf003f",compSouth:"#d3dcf0"}}:{primary:{main:"#009EE0"},secondary:{main:"#747577"},text:{primary:"#000",contrast:"#fff"},topToolbar:{barColor:"#fff"},navigation:{navColor:"#fff",navHover:"#f5f5f5"},GPS:{GPSActiveColor:"#009EE0",GPSInactiveColor:"#000",GPSActiveBackgroundColor:"#fff"},compass:{compColor:"#fff",compHover:"#f5f5f5",compStroke:"#009ee0",compNorth:"#cf003f",compSouth:"#d3dcf0"}})})},jMe=function(t){var e,n=UMe(["light","dark"].includes(t)?t:"light");return Lx(n,{components:{MuiTypography:{styleOverrides:{root:{}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:n.palette.topToolbar.barColor}}},MuiButton:{variants:[{props:{variant:"navtools"},style:(e={minWidth:"20px",minHeight:"20px",fontWeight:600},e[n.breakpoints.down("md")]={width:"50px",height:"50px",fontSize:"1.4em"},e[n.breakpoints.up("md")]={width:"30px",height:"30px",fontSize:"1.2em"},e.color=n.palette.text.primary,e.backgroundColor=n.palette.navigation.navColor,e.borderRadius="23%",e.margin="0.15px",e.marginTop="4px",e[":hover"]={backgroundColor:n.palette.navigation.navHover},e)}]},MuiListItemText:{styleOverrides:{primary:function(r){var i=r.ownerState;return(i==null?void 0:i.variant)==="layerlist"?{fontSize:"0.9rem"}:{}},secondary:function(r){var i=r.ownerState;return(i==null?void 0:i.variant)==="layerlist"?{fontSize:"0.7rem"}:{}}}}}})},GMe={sourceOptions_tiles:["https://wms.wheregroup.com/tileserver/tile/world-0-14/{z}/{x}/{y}.pbf"]},VMe=zt.createContext({});function HMe(t){var e=zt.useState([]),n=e[0],r=e[1],i=zt.useState([]),o=i[0],s=i[1],a=zt.useState([]),c=a[0],h=a[1],d=zt.useState(GMe.sourceOptions_tiles[0]),v=d[0],w=d[1],_=Be.useMemo(function(){return{layerId:"openmaptiles",sourceOptions:{type:"vector",tiles:[v]}}},[v]),E=function(O){if(O){var N=[],H=[];O.layers.forEach(function(G,W){G.type==="symbol"?H.push(G):(W===0&&(G.id=O.name||"background"),N.push(G))}),s(N),h(H)}};Be.useEffect(function(){if(n.filter(function(N){return!(N!=null&&N.id)}).length){var O=vv([],n,!0);O.forEach(function(N){N!=null&&N.id||(N.id=mk())}),r(O)}},[n]);var M=Be.useCallback(function(O,N){var H,G=(H=n==null?void 0:n.filter)===null||H===void 0?void 0:H.call(n,function($){return $.id===O});if(G.length>0){var W=vv([],n,!0),X=G[0],K=n.indexOf(X),k=N(K);k>=0&&k<=n.length-1&&(W.splice(K,1),W.splice(k,0,X),r(W))}},[n]),D=Be.useCallback(function(O){M(O,function(N){return N+1})},[M]),A=Be.useCallback(function(O){M(O,function(N){return N-1})},[M]),F={layers:n,setLayers:r,backgroundLayers:o,setBackgroundLayers:s,symbolLayers:c,setSymbolLayers:h,updateStyle:E,vtLayerConfig:_,tileUrl:v,setTileUrl:w,moveUp:A,moveDown:D,moveLayer:M};return zt.createElement(VMe.Provider,{value:F},t.children)}var mA=zt.createContext({}),qMe=function(t){var e=t.children,n=Be.useState(void 0),r=n[0],i=n[1],o=Be.useState([]),s=o[0],a=o[1],c=Be.useRef([]),h=Be.useRef({}),d=function(_){if(_){typeof h.current[_]<"u"&&delete h.current[_];var E=c.current.indexOf(_);E>-1&&c.current.splice(E,1),a(vv([],c.current,!0)),c.current.length===0&&r&&i(void 0)}else d("anonymous_map")},v=function(_){if(i(_),s.length===0){var E="anonymous_map";a(vv(vv([],s,!0),[E],!1)),h.current[E]=_}},w={map:r,setMap:v,maps:h.current,mapIds:s,registerMap:function(_,E){_&&E&&(h.current[_]=E,c.current.push(_),a(vv([],c.current,!0)),(!r||(r==null?void 0:r.cancelled)===!0)&&i(E))},removeMap:d,mapExists:function(_){return _&&Object.keys(h.current).indexOf(_)===-1?!1:!(!_&&!r)},getMap:function(_){return _&&s.indexOf(_)!==-1?h.current[_]:!_&&r?r:null}};return zt.createElement(mA.Provider,{value:w},zt.createElement(HMe,null,zt.createElement(Zue,{theme:jMe("light")},e)))},VT={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",layers:[{id:"_background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}}},$X=function(t){var e,n,r=Be.useRef(null),i=Be.useRef(null),o=Be.useContext(mA),s=Be.useRef(t.mapId),a=Be.useRef(!1),c=Be.useRef((e=t.options)===null||e===void 0?void 0:e.style);return Be.useEffect(function(){var h=s.current;return function(){var d,v;a.current=!1,o.removeMap(h),r.current&&((v=(d=r.current.map)===null||d===void 0?void 0:d.remove)===null||v===void 0||v.call(d),r.current.cancelled=!0,r.current=null)}},[]),Be.useEffect(function(){var h,d;a.current||i.current&&(a.current=!0,r.current=new FMe({mapOptions:Gh(Gh(Gh({style:""},t.options),!((h=t==null?void 0:t.options)===null||h===void 0)&&h.style?{}:{style:(d=VT==null?void 0:VT.options)===null||d===void 0?void 0:d.style}),{container:i.current}),onReady:function(v,w){v.once("load",function(){w!=null&&w.cancelled?v.remove():(window._map=v,t.mapId?o.registerMap(t.mapId,w):o.setMap(w))})}}))},[t.options,t.mapId]),Be.useEffect(function(){var h,d;!((h=r.current)===null||h===void 0)&&h.map&&(!((d=t==null?void 0:t.options)===null||d===void 0)&&d.style)&&c.current!==t.options.style&&(c.current=t.options.style,r.current.map.setStyle(t.options.style))},[(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.style]),zt.createElement("div",{ref:i,className:"mapContainer",style:t.style})};$X.defaultProps=VT;function lO(t){var e=Be.useContext(mA),n=Be.useRef(!1),r=Be.useRef(null),i=Be.useState(),o=i[0],s=i[1],a=Be.useRef(void 0),c=Be.useState([]),h=c[0],d=c[1],v=Be.useRef(""),w=Be.useRef(mk()),_=Be.useCallback(function(M){var D,A;return!(!((D=t==null?void 0:t.filter)===null||D===void 0)&&D.includeBaseLayers)&&(M!=null&&M.baseLayer)?!1:typeof((A=t.filter)===null||A===void 0?void 0:A.matchLayerIds)<"u"?t.filter.matchLayerIds instanceof RegExp?t.filter.matchLayerIds.test(M.id):M.id.includes(t.filter.matchLayerIds):!0},[t.filter]),E=Be.useCallback(function(){if(r.current){var M=r.current.wrapper.layerState.filter(_),D=JSON.stringify(M);v.current!==D&&(v.current=D,d(M))}},[_]);return Be.useEffect(function(){var M=w.current;return function(){r.current&&(r.current.cleanup(M),r.current=null),n.current=!1}},[]),Be.useEffect(function(){var M,D,A,F;if(!(!e.mapExists(t.mapId)||n.current)){if(n.current=!0,r.current=e.getMap(t.mapId),!r.current){n.current=!1;return}!((M=t==null?void 0:t.watch)===null||M===void 0)&&M.viewport&&(s(r.current.wrapper.viewportState),r.current.wrapper.on("viewportchange",function(){var O,N;a.current!==((O=r.current)===null||O===void 0?void 0:O.wrapper.viewportStateString)&&s((N=r.current)===null||N===void 0?void 0:N.wrapper.viewportState)},w.current)),!((D=t==null?void 0:t.watch)===null||D===void 0)&&D.layers&&(E(),r.current.wrapper.on("layerchange",E,{includeBaseLayers:(A=t==null?void 0:t.filter)===null||A===void 0?void 0:A.includeBaseLayers,matchLayerIds:(F=t==null?void 0:t.filter)===null||F===void 0?void 0:F.matchLayerIds},w.current))}},[e.mapIds,e,t.mapId,E,t]),{layers:h,viewport:o}}lO.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}};function WX(t){var e=Be.useContext(mA),n=Be.useState({map:void 0,ready:!1}),r=n[0],i=n[1],o=lO({mapId:t==null?void 0:t.mapId,watch:{viewport:!1,layers:!!(t!=null&&t.waitForLayer),sources:!1},filter:{includeBaseLayers:!0}}),s=Be.useRef(null),a=Be.useRef(mk()),c=function(){s.current&&s.current.cleanup(a.current)};return Be.useEffect(function(){return function(){c(),s.current=null}},[]),Be.useEffect(function(){var h;if(s.current&&s.current.cancelled===!0&&(s.current=null,i({map:void 0,ready:!1})),!(s.current||!e.mapExists(t==null?void 0:t.mapId))){if(t!=null&&t.waitForLayer){var d=!1;if((h=o==null?void 0:o.layers)===null||h===void 0||h.forEach(function(v){v.id===(t==null?void 0:t.waitForLayer)&&(d=!0)}),!d)return}s.current=e.getMap(t==null?void 0:t.mapId),i({map:s.current,ready:!0})}},[e.mapIds,o.layers,e,t]),{map:r.map,mapIsReady:r.ready,componentId:a.current,layers:o.layers,cleanup:c}}zt.createContext({});Ba(DM)({marginTop:"15px"});Dx(vk)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});Dx(yk)({minWidth:"30px"});Dx(zv)({marginRight:"0px",padding:"0px"});Dx(AH)({padding:0,marginRight:"5px"});Dx(xle)(function(t){var e=t.open;return{display:e?"block":"none"}});Dx(DM)({marginLeft:"50px"});Ba(CH)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});Ba(by)({marginLeft:"61px"});Ba(vk)(function(t){return{paddingRight:t?"56px":0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}});Ba(zv)({padding:"4px",marginTop:"-3px"});Ba(yk)({minWidth:"30px"});Ba(AH)({padding:0});Ba(zv)({padding:"4px",marginTop:"-3px"});Ba(zv)({marginLeft:"20px"});zt.createElement(zt.Fragment,null);Ba("div")(function(){return{display:"flex",alignItems:"center"}});Ba(by)(function(t){var e=t.theme;return{width:30,height:6,backgroundColor:e.palette.text.primary,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}});Ba(by)(function(t){var e,n=t.theme;return e={zIndex:1e3,cursor:"pointer",transform:"scale(1)"},e[n.breakpoints.down("md")]={transform:"scale(1.6)"},e});Ba(by)(function(t){var e,n=t.theme;return e={position:"absolute",right:"-10px",top:"-52px",width:"52px",height:"52px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},e[n.breakpoints.down("md")]={right:"0px",top:"-52px"},e.circle={fill:n.palette.compass.compColor,stroke:n.palette.compass.compStroke},e.path={fill:n.palette.compass.compStroke},e["&:hover circle"]={fill:n.palette.compass.compHover},e});Ba(by)(function(t){var e=t.theme;return{display:"flex",flexDirection:"row","path:nth-of-type(2)":{fill:e.palette.compass.compSouth},"path:nth-of-type(1)":{fill:e.palette.compass.compNorth}}});function K2(t){"@babel/helpers - typeof";return K2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K2(t)}(function(){var t=/\s*/g,e=/^\s*|\s*$/g,n=/\s+/;function r(G){if(!G||!G.length)return 0;for(var W=0,X=0;W<G.length;W++)X=(X<<5)-X+G.charCodeAt(W)|0;return X}function i(G,W){return G.getElementsByTagName(W)}function o(G,W){return G.getAttribute(W)}function s(G,W){return parseFloat(o(G,W))}function a(G,W){var X=i(G,W);return X.length?X[0]:null}function c(G){return G.normalize&&G.normalize(),G}function h(G){for(var W=0,X=[];W<G.length;W++)X[W]=parseFloat(G[W]);return X}function d(G){return G&&c(G),G&&G.textContent||""}function v(G,W){var X={},K,k;for(k=0;k<W.length;k++)K=a(G,W[k]),K&&(X[W[k]]=d(K));return X}function w(G,W){for(var X in W)G[X]=W[X]}function _(G){return h(G.replace(t,"").split(","))}function E(G){for(var W=G.replace(e,"").split(n),X=[],K=0;K<W.length;K++)X.push(_(W[K]));return X}function M(G){var W=[s(G,"lon"),s(G,"lat")],X=a(G,"ele"),K=a(G,"gpxtpx:hr")||a(G,"hr"),k=a(G,"time"),$;return X&&($=parseFloat(d(X)),isNaN($)||W.push($)),{coordinates:W,time:k?d(k):null,heartRate:K?parseFloat(d(K)):null}}function D(){return{type:"FeatureCollection",features:[]}}var A;if(typeof XMLSerializer<"u")A=new XMLSerializer;else{var F=(typeof process>"u"?"undefined":K2(process))==="object"&&!process.browser,O=(typeof Titanium>"u"?"undefined":K2(Titanium))==="object";if((typeof exports>"u"?"undefined":K2(exports))==="object"&&(F||O))A=Q2e.XMLSerializer;else throw new Error("Unable to initialize serializer")}function N(G){return G.xml!==void 0?G.xml:A.serializeToString(G)}var H={kml:function(W){for(var X=D(),K={},k={},$={},Q=["Polygon","LineString","Point","Track","gx:Track"],ie=i(W,"Placemark"),ae=i(W,"Style"),ce=i(W,"StyleMap"),se=0;se<ae.length;se++){var Se=r(N(ae[se])).toString(16);K["#"+o(ae[se],"id")]=Se,k[Se]=ae[se]}for(var ye=0;ye<ce.length;ye++){K["#"+o(ce[ye],"id")]=r(N(ce[ye])).toString(16);for(var Te=i(ce[ye],"Pair"),pe={},Ie=0;Ie<Te.length;Ie++)pe[d(a(Te[Ie],"key"))]=d(a(Te[Ie],"styleUrl"));$["#"+o(ce[ye],"id")]=pe}for(var me=0;me<ie.length;me++)X.features=X.features.concat(We(ie[me]));function xe(Ae){var ut,pt;return Ae=Ae||"",Ae.substr(0,1)==="#"&&(Ae=Ae.substr(1)),(Ae.length===6||Ae.length===3)&&(ut=Ae),Ae.length===8&&(pt=parseInt(Ae.substr(0,2),16)/255,ut="#"+Ae.substr(6,2)+Ae.substr(4,2)+Ae.substr(2,2)),[ut,isNaN(pt)?void 0:pt]}function ve(Ae){return h(Ae.split(" "))}function Ee(Ae){var ut=i(Ae,"coord"),pt=[],st=[];ut.length===0&&(ut=i(Ae,"gx:coord"));for(var Ce=0;Ce<ut.length;Ce++)pt.push(ve(d(ut[Ce])));for(var It=i(Ae,"when"),Ve=0;Ve<It.length;Ve++)st.push(d(It[Ve]));return{coords:pt,times:st}}function De(Ae){var ut,pt,st,Ce,It,Ve=[],yt=[];if(a(Ae,"MultiGeometry"))return De(a(Ae,"MultiGeometry"));if(a(Ae,"MultiTrack"))return De(a(Ae,"MultiTrack"));if(a(Ae,"gx:MultiTrack"))return De(a(Ae,"gx:MultiTrack"));for(st=0;st<Q.length;st++)if(pt=i(Ae,Q[st]),pt){for(Ce=0;Ce<pt.length;Ce++)if(ut=pt[Ce],Q[st]==="Point")Ve.push({type:"Point",coordinates:_(d(a(ut,"coordinates")))});else if(Q[st]==="LineString")Ve.push({type:"LineString",coordinates:E(d(a(ut,"coordinates")))});else if(Q[st]==="Polygon"){var Ze=i(ut,"LinearRing"),wt=[];for(It=0;It<Ze.length;It++)wt.push(E(d(a(Ze[It],"coordinates"))));Ve.push({type:"Polygon",coordinates:wt})}else if(Q[st]==="Track"||Q[st]==="gx:Track"){var Ut=Ee(ut);Ve.push({type:"LineString",coordinates:Ut.coords}),Ut.times.length&&yt.push(Ut.times)}}return{geoms:Ve,coordTimes:yt}}function We(Ae){var ut=De(Ae),pt,st={},Ce=d(a(Ae,"name")),It=d(a(Ae,"address")),Ve=d(a(Ae,"styleUrl")),yt=d(a(Ae,"description")),Ze=a(Ae,"TimeSpan"),wt=a(Ae,"TimeStamp"),Ut=a(Ae,"ExtendedData"),ht=a(Ae,"LineStyle"),qt=a(Ae,"PolyStyle"),Ye=a(Ae,"visibility");if(!ut.geoms.length)return[];if(Ce&&(st.name=Ce),It&&(st.address=It),Ve){Ve[0]!=="#"&&(Ve="#"+Ve),st.styleUrl=Ve,K[Ve]&&(st.styleHash=K[Ve]),$[Ve]&&(st.styleMapHash=$[Ve],st.styleHash=K[$[Ve].normal]);var Re=k[st.styleHash];if(Re){ht||(ht=a(Re,"LineStyle")),qt||(qt=a(Re,"PolyStyle"));var Pt=a(Re,"IconStyle");if(Pt){var Dt=a(Pt,"Icon");if(Dt){var At=d(a(Dt,"href"));At&&(st.icon=At)}}}}if(yt&&(st.description=yt),Ze){var Bt=d(a(Ze,"begin")),gn=d(a(Ze,"end"));st.timespan={begin:Bt,end:gn}}if(wt&&(st.timestamp=d(a(wt,"when"))),ht){var Zt=xe(d(a(ht,"color"))),cn=Zt[0],$t=Zt[1],Et=parseFloat(d(a(ht,"width")));cn&&(st.stroke=cn),isNaN($t)||(st["stroke-opacity"]=$t),isNaN(Et)||(st["stroke-width"]=Et)}if(qt){var qn=xe(d(a(qt,"color"))),Dn=qn[0],sr=qn[1],rt=d(a(qt,"fill")),ze=d(a(qt,"outline"));Dn&&(st.fill=Dn),isNaN(sr)||(st["fill-opacity"]=sr),rt&&(st["fill-opacity"]=rt==="1"?st["fill-opacity"]||1:0),ze&&(st["stroke-opacity"]=ze==="1"?st["stroke-opacity"]||1:0)}if(Ut){var Xe=i(Ut,"Data"),Fe=i(Ut,"SimpleData");for(pt=0;pt<Xe.length;pt++)st[Xe[pt].getAttribute("name")]=d(a(Xe[pt],"value"));for(pt=0;pt<Fe.length;pt++)st[Fe[pt].getAttribute("name")]=d(Fe[pt])}Ye&&(st.visibility=d(Ye)),ut.coordTimes.length&&(st.coordTimes=ut.coordTimes.length===1?ut.coordTimes[0]:ut.coordTimes);var He={type:"Feature",geometry:ut.geoms.length===1?ut.geoms[0]:{type:"GeometryCollection",geometries:ut.geoms},properties:st};return o(Ae,"id")&&(He.id=o(Ae,"id")),[He]}return X},gpx:function(W){var X,K=i(W,"trk"),k=i(W,"rte"),$=i(W,"wpt"),Q=D(),ie;for(X=0;X<K.length;X++)ie=se(K[X]),ie&&Q.features.push(ie);for(X=0;X<k.length;X++)ie=Se(k[X]),ie&&Q.features.push(ie);for(X=0;X<$.length;X++)Q.features.push(ye($[X]));function ae(Ie,me){for(var xe=0;xe<me;xe++)Ie.push(null);return Ie}function ce(Ie,me){var xe=i(Ie,me),ve=[],Ee=[],De=[],We=xe.length;if(We<2)return{};for(var Ae=0;Ae<We;Ae++){var ut=M(xe[Ae]);ve.push(ut.coordinates),ut.time&&Ee.push(ut.time),(ut.heartRate||De.length)&&(De.length||ae(De,Ae),De.push(ut.heartRate||null))}return{line:ve,times:Ee,heartRates:De}}function se(Ie){for(var me=i(Ie,"trkseg"),xe=[],ve=[],Ee=[],De,We=0;We<me.length;We++)if(De=ce(me[We],"trkpt"),De&&(De.line&&xe.push(De.line),De.times&&De.times.length&&ve.push(De.times),Ee.length||De.heartRates&&De.heartRates.length)){if(!Ee.length)for(var Ae=0;Ae<We;Ae++)Ee.push(ae([],xe[Ae].length));De.heartRates&&De.heartRates.length?Ee.push(De.heartRates):Ee.push(ae([],De.line.length||0))}if(xe.length!==0){var ut=pe(Ie);return w(ut,Te(a(Ie,"extensions"))),ve.length&&(ut.coordTimes=xe.length===1?ve[0]:ve),Ee.length&&(ut.heartRates=xe.length===1?Ee[0]:Ee),{type:"Feature",properties:ut,geometry:{type:xe.length===1?"LineString":"MultiLineString",coordinates:xe.length===1?xe[0]:xe}}}}function Se(Ie){var me=ce(Ie,"rtept");if(me.line){var xe=pe(Ie);w(xe,Te(a(Ie,"extensions")));var ve={type:"Feature",properties:xe,geometry:{type:"LineString",coordinates:me.line}};return ve}}function ye(Ie){var me=pe(Ie);return w(me,v(Ie,["sym"])),{type:"Feature",properties:me,geometry:{type:"Point",coordinates:M(Ie).coordinates}}}function Te(Ie){var me={};if(Ie){var xe=a(Ie,"line");if(xe){var ve=d(a(xe,"color")),Ee=parseFloat(d(a(xe,"opacity"))),De=parseFloat(d(a(xe,"width")));ve&&(me.stroke=ve),isNaN(Ee)||(me["stroke-opacity"]=Ee),isNaN(De)||(me["stroke-width"]=De*96/25.4)}}return me}function pe(Ie){var me=v(Ie,["name","cmt","desc","type","time","keywords"]),xe=i(Ie,"link");xe.length&&(me.links=[]);for(var ve=0,Ee;ve<xe.length;ve++)Ee={href:o(xe[ve],"href")},w(Ee,v(xe[ve],["text","type"])),me.links.push(Ee);return me}return Q}};return H})();var $Me=zt.createContext({});$Me.Provider;var WMe=function(){var t=Object.fromEntries(new URLSearchParams(window.location.search));return t.layers=JSON.parse(t!=null&&t.layers?t.layers:"[]"),t};WMe();var XMe={visible:!0,urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:256,height:256,styles:""},attribution:"",sourceOptions:{minZoom:0,maxZoom:20},layerOptions:{minZoom:0,maxZoom:20}};Gh({},XMe);zt.createElement(Gwe,null),zt.createElement(Wme,null),zt.createElement(Xme,null);var YMe=zt.createContext({});YMe.Provider;Ba(zv)({padding:"4px",marginTop:"-3px",background:"none","&:hover":{background:"none"}});zt.createElement(KCe,null),zt.createElement(ZCe,null),zt.createElement(YCe,null),zt.createElement(XCe,null);var fy;function XX(t,e,n){e.forEach(function(r){t(r,n),r.layers&&r.layers.length>0&&XX(t,r.layers,r)})}var ZMe={mapConfigs:{}},YX=RMe({name:"mapConfig",initialState:ZMe,reducers:{setMapConfig:function(t,e){var n=e.payload.mapConfig,r=e.payload.key;t.mapConfigs[r]=n},removeMapConfig:function(t,e){delete t.mapConfigs[e.payload.key]},setLayerInMapConfig:function(t,e){var n=e.payload,r=n.mapConfigKey,i=n.layer,o=t.mapConfigs[r];if(o){for(var s=0;s<o.layers.length;s++)if(o.layers[s].uuid===i.uuid){o.layers[s]=i;break}}},removeLayerFromMapConfig:function(t,e){var n=e.payload,r=n.mapConfigKey,i=n.layerUuid,o=t.mapConfigs[r];if(o){var s=o.layers.findIndex(function(a){return a.uuid===i});s!==-1&&(delete o.layers[s],XX(function(a,c){c&&c.layers&&(c.layers=c.layers.filter(function(h){return h.uuid!==i}))},o.layerOrder))}},updateLayerOrder:function(t,e){var n=e.payload,r=n.mapConfigKey,i=n.newOrder,o=t.mapConfigs[r];o&&(o.layerOrder=i)},setMasterVisible:function(t,e){var n,r=e.payload,i=r.mapConfigKey,o=r.layerId,s=r.masterVisible,a=t.mapConfigs[i];if(a){var c=a.layers.findIndex(function(v){return v.uuid===o});if(c!==-1){var h=a.layers[c];if(h){var d=vv([],a.layers,!0);h.type==="folder"&&a.layerOrder.forEach(function(v){var w;v.uuid===o&&((w=v.layers)===null||w===void 0||w.forEach(function(_){var E,M=a.layers.findIndex(function(A){return A.uuid===_.uuid}),D=d[M];d[M]=Gh(Gh({},D),{masterVisible:s}),(D==null?void 0:D.type)==="vt"&&(!((E=D==null?void 0:D.config)===null||E===void 0)&&E.layers)&&(D.config.layers=D.config.layers.map(function(A){return Gh(Gh({},A),{masterVisible:s})}))}))}),h.type==="vt"&&(!((n=h==null?void 0:h.config)===null||n===void 0)&&n.layers)&&(h.config.layers=h.config.layers.map(function(v){return Gh(Gh({},v),{masterVisible:s})})),t.mapConfigs[i].layers=d}}}}}});wMe({reducer:{mapConfig:YX.reducer}});fy=YX.actions,fy.setMapConfig;fy.removeMapConfig;fy.setLayerInMapConfig;fy.removeLayerFromMapConfig;fy.updateLayerOrder;fy.setMasterVisible;Ba(CH)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});Ba(by)({marginLeft:"61px"});Ba(zv)({padding:"4px",marginTop:"-3px"});Ba(zv)({marginLeft:"20px"});Ba(vk)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});Ba(yk)({minWidth:"30px"});Ba(zv)({marginRight:"0px",padding:"0px"});Ba(by)(function(t){var e=t.open;return{display:e?"block":"none"}});Ba(DM)({marginLeft:"50px"});Ba(DM)({marginTop:"15px"});/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const vA="174",Z1={ROTATE:0,DOLLY:1,PAN:2},F1={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},KMe=0,tj=1,JMe=2,ZX=1,KX=2,nm=3,kv=0,vf=1,dp=2,Vh=0,K1=1,wL=2,nj=3,rj=4,JX=5,im=100,QMe=101,eAe=102,tAe=103,nAe=104,SL=200,rAe=201,iAe=202,aAe=203,EL=204,TL=205,QX=206,oAe=207,eY=208,sAe=209,lAe=210,uAe=211,cAe=212,hAe=213,fAe=214,CL=0,ML=1,AL=2,_x=3,RL=4,PL=5,IL=6,DL=7,tY=0,dAe=1,pAe=2,wv=0,nY=1,rY=2,iY=3,uO=4,aY=5,oY=6,sY=7,lY=300,xx=301,bx=302,XC=303,LL=304,yA=306,wx=1e3,yv=1001,YC=1002,xh=1003,uY=1004,P2=1005,mp=1006,HT=1007,_v=1008,Sm=1009,cY=1010,hY=1011,Iw=1012,cO=1013,dy=1014,ig=1015,yp=1016,hO=1017,fO=1018,py=1020,fY=35902,dY=1021,pY=1022,Td=1023,gY=1024,mY=1025,J1=1026,gy=1027,dO=1028,pO=1029,vY=1030,gO=1031,mO=1033,qT=33776,$T=33777,WT=33778,XT=33779,NL=35840,kL=35841,OL=35842,FL=35843,BL=36196,zL=37492,UL=37496,jL=37808,GL=37809,VL=37810,HL=37811,qL=37812,$L=37813,WL=37814,XL=37815,YL=37816,ZL=37817,KL=37818,JL=37819,QL=37820,eN=37821,YT=36492,tN=36494,nN=36495,yY=36283,rN=36284,iN=36285,aN=36286,gAe=2300,mAe=2301,vAe=3200,yAe=3201,vO=0,_Ae=1,am="",ff="srgb",Sx="srgb-linear",ZC="linear",xs="srgb",V_=7680,ij=519,xAe=512,bAe=513,wAe=514,_Y=515,SAe=516,EAe=517,TAe=518,CAe=519,aj=35044,oj="300 es",sm=2e3,KC=2001;class Dy{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}const gh=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let sj=1234567;const J2=Math.PI/180,Dw=180/Math.PI;function Ly(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(gh[t&255]+gh[t>>8&255]+gh[t>>16&255]+gh[t>>24&255]+"-"+gh[e&255]+gh[e>>8&255]+"-"+gh[e>>16&15|64]+gh[e>>24&255]+"-"+gh[n&63|128]+gh[n>>8&255]+"-"+gh[n>>16&255]+gh[n>>24&255]+gh[r&255]+gh[r>>8&255]+gh[r>>16&255]+gh[r>>24&255]).toLowerCase()}function $a(t,e,n){return Math.max(e,Math.min(n,t))}function yO(t,e){return(t%e+e)%e}function MAe(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function AAe(t,e,n){return t!==e?(n-t)/(e-t):0}function Q2(t,e,n){return(1-n)*t+n*e}function RAe(t,e,n,r){return Q2(t,e,1-Math.exp(-n*r))}function PAe(t,e=1){return e-Math.abs(yO(t,e*2)-e)}function IAe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function DAe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function LAe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function NAe(t,e){return t+Math.random()*(e-t)}function kAe(t){return t*(.5-Math.random())}function OAe(t){t!==void 0&&(sj=t);let e=sj+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function FAe(t){return t*J2}function BAe(t){return t*Dw}function zAe(t){return(t&t-1)===0&&t!==0}function UAe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function jAe(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function GAe(t,e,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),c=s(n/2),h=o((e+r)/2),d=s((e+r)/2),v=o((e-r)/2),w=s((e-r)/2),_=o((r-e)/2),E=s((r-e)/2);switch(i){case"XYX":t.set(a*d,c*v,c*w,a*h);break;case"YZY":t.set(c*w,a*d,c*v,a*h);break;case"ZXZ":t.set(c*v,c*w,a*d,a*h);break;case"XZX":t.set(a*d,c*E,c*_,a*h);break;case"YXY":t.set(c*_,a*d,c*E,a*h);break;case"ZYZ":t.set(c*E,c*_,a*d,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function M1(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Fh(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Lw={DEG2RAD:J2,RAD2DEG:Dw,generateUUID:Ly,clamp:$a,euclideanModulo:yO,mapLinear:MAe,inverseLerp:AAe,lerp:Q2,damp:RAe,pingpong:PAe,smoothstep:IAe,smootherstep:DAe,randInt:LAe,randFloat:NAe,randFloatSpread:kAe,seededRandom:OAe,degToRad:FAe,radToDeg:BAe,isPowerOfTwo:zAe,ceilPowerOfTwo:UAe,floorPowerOfTwo:jAe,setQuaternionFromProperEuler:GAe,normalize:Fh,denormalize:M1};class qr{constructor(e=0,n=0){qr.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=$a(this.x,e.x,n.x),this.y=$a(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=$a(this.x,e,n),this.y=$a(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar($a(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos($a(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Oa{constructor(e,n,r,i,o,s,a,c,h){Oa.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,c,h)}set(e,n,r,i,o,s,a,c,h){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=n,d[4]=o,d[5]=c,d[6]=r,d[7]=s,d[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[3],c=r[6],h=r[1],d=r[4],v=r[7],w=r[2],_=r[5],E=r[8],M=i[0],D=i[3],A=i[6],F=i[1],O=i[4],N=i[7],H=i[2],G=i[5],W=i[8];return o[0]=s*M+a*F+c*H,o[3]=s*D+a*O+c*G,o[6]=s*A+a*N+c*W,o[1]=h*M+d*F+v*H,o[4]=h*D+d*O+v*G,o[7]=h*A+d*N+v*W,o[2]=w*M+_*F+E*H,o[5]=w*D+_*O+E*G,o[8]=w*A+_*N+E*W,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],h=e[7],d=e[8];return n*s*d-n*a*h-r*o*d+r*a*c+i*o*h-i*s*c}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],h=e[7],d=e[8],v=d*s-a*h,w=a*c-d*o,_=h*o-s*c,E=n*v+r*w+i*_;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/E;return e[0]=v*M,e[1]=(i*h-d*r)*M,e[2]=(a*r-i*s)*M,e[3]=w*M,e[4]=(d*n-i*c)*M,e[5]=(i*o-a*n)*M,e[6]=_*M,e[7]=(r*c-h*n)*M,e[8]=(s*n-r*o)*M,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,s,a){const c=Math.cos(o),h=Math.sin(o);return this.set(r*c,r*h,-r*(c*s+h*a)+s+e,-i*h,i*c,-i*(-h*s+c*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(GP.makeScale(e,n)),this}rotate(e){return this.premultiply(GP.makeRotation(-e)),this}translate(e,n){return this.premultiply(GP.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const GP=new Oa;function xY(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function JC(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function VAe(){const t=JC("canvas");return t.style.display="block",t}const lj={};function I0(t){t in lj||(lj[t]=!0,console.warn(t))}function HAe(t,e,n){return new Promise(function(r,i){function o(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:r()}}setTimeout(o,n)})}function qAe(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function $Ae(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const uj=new Oa().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),cj=new Oa().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function WAe(){const t={enabled:!0,workingColorSpace:Sx,spaces:{},convert:function(i,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===xs&&(i.r=pm(i.r),i.g=pm(i.g),i.b=pm(i.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[o].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===xs&&(i.r=Q1(i.r),i.g=Q1(i.g),i.b=Q1(i.b))),i},fromWorkingColorSpace:function(i,o){return this.convert(i,this.workingColorSpace,o)},toWorkingColorSpace:function(i,o){return this.convert(i,o,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===am?ZC:this.spaces[i].transfer},getLuminanceCoefficients:function(i,o=this.workingColorSpace){return i.fromArray(this.spaces[o].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,o,s){return i.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[Sx]:{primaries:e,whitePoint:r,transfer:ZC,toXYZ:uj,fromXYZ:cj,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:ff},outputColorSpaceConfig:{drawingBufferColorSpace:ff}},[ff]:{primaries:e,whitePoint:r,transfer:xs,toXYZ:uj,fromXYZ:cj,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:ff}}}),t}const Po=WAe();function pm(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Q1(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let H_;class XAe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{H_===void 0&&(H_=JC("canvas")),H_.width=e.width,H_.height=e.height;const r=H_.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=H_}return n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=JC("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=pm(o[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(pm(n[r]/255)*255):n[r]=pm(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let YAe=0;class _A{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:YAe++}),this.uuid=Ly(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(VP(i[s].image)):o.push(VP(i[s]))}else o=VP(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function VP(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?XAe.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ZAe=0;class jc extends Dy{constructor(e=jc.DEFAULT_IMAGE,n=jc.DEFAULT_MAPPING,r=yv,i=yv,o=mp,s=_v,a=Td,c=Sm,h=jc.DEFAULT_ANISOTROPY,d=am){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ZAe++}),this.uuid=Ly(),this.name="",this.source=new _A(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=h,this.format=a,this.internalFormat=null,this.type=c,this.offset=new qr(0,0),this.repeat=new qr(1,1),this.center=new qr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Oa,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==lY)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case wx:e.x=e.x-Math.floor(e.x);break;case yv:e.x=e.x<0?0:1;break;case YC:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case wx:e.y=e.y-Math.floor(e.y);break;case yv:e.y=e.y<0?0:1;break;case YC:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}jc.DEFAULT_IMAGE=null;jc.DEFAULT_MAPPING=lY;jc.DEFAULT_ANISOTROPY=1;class iu{constructor(e=0,n=0,r=0,i=1){iu.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const c=e.elements,h=c[0],d=c[4],v=c[8],w=c[1],_=c[5],E=c[9],M=c[2],D=c[6],A=c[10];if(Math.abs(d-w)<.01&&Math.abs(v-M)<.01&&Math.abs(E-D)<.01){if(Math.abs(d+w)<.1&&Math.abs(v+M)<.1&&Math.abs(E+D)<.1&&Math.abs(h+_+A-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const O=(h+1)/2,N=(_+1)/2,H=(A+1)/2,G=(d+w)/4,W=(v+M)/4,X=(E+D)/4;return O>N&&O>H?O<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(O),i=G/r,o=W/r):N>H?N<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(N),r=G/i,o=X/i):H<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(H),r=W/o,i=X/o),this.set(r,i,o,n),this}let F=Math.sqrt((D-E)*(D-E)+(v-M)*(v-M)+(w-d)*(w-d));return Math.abs(F)<.001&&(F=1),this.x=(D-E)/F,this.y=(v-M)/F,this.z=(w-d)/F,this.w=Math.acos((h+_+A-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=$a(this.x,e.x,n.x),this.y=$a(this.y,e.y,n.y),this.z=$a(this.z,e.z,n.z),this.w=$a(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=$a(this.x,e,n),this.y=$a(this.y,e,n),this.z=$a(this.z,e,n),this.w=$a(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar($a(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class KAe extends Dy{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new iu(0,0,e,n),this.scissorTest=!1,this.viewport=new iu(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:mp,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const o=new jc(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const s=r.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new _A(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class $f extends KAe{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class bY extends jc{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=xh,this.minFilter=xh,this.wrapR=yv,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class JAe extends jc{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=xh,this.minFilter=xh,this.wrapR=yv,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ov{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,s,a){let c=r[i+0],h=r[i+1],d=r[i+2],v=r[i+3];const w=o[s+0],_=o[s+1],E=o[s+2],M=o[s+3];if(a===0){e[n+0]=c,e[n+1]=h,e[n+2]=d,e[n+3]=v;return}if(a===1){e[n+0]=w,e[n+1]=_,e[n+2]=E,e[n+3]=M;return}if(v!==M||c!==w||h!==_||d!==E){let D=1-a;const A=c*w+h*_+d*E+v*M,F=A>=0?1:-1,O=1-A*A;if(O>Number.EPSILON){const H=Math.sqrt(O),G=Math.atan2(H,A*F);D=Math.sin(D*G)/H,a=Math.sin(a*G)/H}const N=a*F;if(c=c*D+w*N,h=h*D+_*N,d=d*D+E*N,v=v*D+M*N,D===1-a){const H=1/Math.sqrt(c*c+h*h+d*d+v*v);c*=H,h*=H,d*=H,v*=H}}e[n]=c,e[n+1]=h,e[n+2]=d,e[n+3]=v}static multiplyQuaternionsFlat(e,n,r,i,o,s){const a=r[i],c=r[i+1],h=r[i+2],d=r[i+3],v=o[s],w=o[s+1],_=o[s+2],E=o[s+3];return e[n]=a*E+d*v+c*_-h*w,e[n+1]=c*E+d*w+h*v-a*_,e[n+2]=h*E+d*_+a*w-c*v,e[n+3]=d*E-a*v-c*w-h*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,c=Math.sin,h=a(r/2),d=a(i/2),v=a(o/2),w=c(r/2),_=c(i/2),E=c(o/2);switch(s){case"XYZ":this._x=w*d*v+h*_*E,this._y=h*_*v-w*d*E,this._z=h*d*E+w*_*v,this._w=h*d*v-w*_*E;break;case"YXZ":this._x=w*d*v+h*_*E,this._y=h*_*v-w*d*E,this._z=h*d*E-w*_*v,this._w=h*d*v+w*_*E;break;case"ZXY":this._x=w*d*v-h*_*E,this._y=h*_*v+w*d*E,this._z=h*d*E+w*_*v,this._w=h*d*v-w*_*E;break;case"ZYX":this._x=w*d*v-h*_*E,this._y=h*_*v+w*d*E,this._z=h*d*E-w*_*v,this._w=h*d*v+w*_*E;break;case"YZX":this._x=w*d*v+h*_*E,this._y=h*_*v+w*d*E,this._z=h*d*E-w*_*v,this._w=h*d*v-w*_*E;break;case"XZY":this._x=w*d*v-h*_*E,this._y=h*_*v-w*d*E,this._z=h*d*E+w*_*v,this._w=h*d*v+w*_*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],c=n[9],h=n[2],d=n[6],v=n[10],w=r+a+v;if(w>0){const _=.5/Math.sqrt(w+1);this._w=.25/_,this._x=(d-c)*_,this._y=(o-h)*_,this._z=(s-i)*_}else if(r>a&&r>v){const _=2*Math.sqrt(1+r-a-v);this._w=(d-c)/_,this._x=.25*_,this._y=(i+s)/_,this._z=(o+h)/_}else if(a>v){const _=2*Math.sqrt(1+a-r-v);this._w=(o-h)/_,this._x=(i+s)/_,this._y=.25*_,this._z=(c+d)/_}else{const _=2*Math.sqrt(1+v-r-a);this._w=(s-i)/_,this._x=(o+h)/_,this._y=(c+d)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($a(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,s=e._w,a=n._x,c=n._y,h=n._z,d=n._w;return this._x=r*d+s*a+i*h-o*c,this._y=i*d+s*c+o*a-r*h,this._z=o*d+s*h+r*c-i*a,this._w=s*d-r*a-i*c-o*h,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const c=1-a*a;if(c<=Number.EPSILON){const _=1-n;return this._w=_*s+n*this._w,this._x=_*r+n*this._x,this._y=_*i+n*this._y,this._z=_*o+n*this._z,this.normalize(),this}const h=Math.sqrt(c),d=Math.atan2(h,a),v=Math.sin((1-n)*d)/h,w=Math.sin(n*d)/h;return this._w=s*v+this._w*w,this._x=r*v+this._x*w,this._y=i*v+this._y*w,this._z=o*v+this._z*w,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Pn{constructor(e=0,n=0,r=0){Pn.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(hj.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(hj.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,c=e.w,h=2*(s*i-a*r),d=2*(a*n-o*i),v=2*(o*r-s*n);return this.x=n+c*h+s*v-a*d,this.y=r+c*d+a*h-o*v,this.z=i+c*v+o*d-s*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=$a(this.x,e.x,n.x),this.y=$a(this.y,e.y,n.y),this.z=$a(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=$a(this.x,e,n),this.y=$a(this.y,e,n),this.z=$a(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar($a(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,s=n.x,a=n.y,c=n.z;return this.x=i*c-o*a,this.y=o*s-r*c,this.z=r*a-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return HP.copy(this).projectOnVector(e),this.sub(HP)}reflect(e){return this.sub(HP.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos($a(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const HP=new Pn,hj=new Ov;class Hx{constructor(e=new Pn(1/0,1/0,1/0),n=new Pn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(ap.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(ap.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=ap.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,ap):ap.fromBufferAttribute(o,s),ap.applyMatrix4(e.matrixWorld),this.expandByPoint(ap);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),HE.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),HE.copy(r.boundingBox)),HE.applyMatrix4(e.matrixWorld),this.union(HE)}const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ap),ap.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(r2),qE.subVectors(this.max,r2),q_.subVectors(e.a,r2),$_.subVectors(e.b,r2),W_.subVectors(e.c,r2),tv.subVectors($_,q_),nv.subVectors(W_,$_),b0.subVectors(q_,W_);let n=[0,-tv.z,tv.y,0,-nv.z,nv.y,0,-b0.z,b0.y,tv.z,0,-tv.x,nv.z,0,-nv.x,b0.z,0,-b0.x,-tv.y,tv.x,0,-nv.y,nv.x,0,-b0.y,b0.x,0];return!qP(n,q_,$_,W_,qE)||(n=[1,0,0,0,1,0,0,0,1],!qP(n,q_,$_,W_,qE))?!1:($E.crossVectors(tv,nv),n=[$E.x,$E.y,$E.z],qP(n,q_,$_,W_,qE))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ap).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ap).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Kg[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Kg[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Kg[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Kg[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Kg[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Kg[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Kg[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Kg[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Kg),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Kg=[new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn],ap=new Pn,HE=new Hx,q_=new Pn,$_=new Pn,W_=new Pn,tv=new Pn,nv=new Pn,b0=new Pn,r2=new Pn,qE=new Pn,$E=new Pn,w0=new Pn;function qP(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){w0.fromArray(t,o);const a=i.x*Math.abs(w0.x)+i.y*Math.abs(w0.y)+i.z*Math.abs(w0.z),c=e.dot(w0),h=n.dot(w0),d=r.dot(w0);if(Math.max(-Math.max(c,h,d),Math.min(c,h,d))>a)return!1}return!0}const QAe=new Hx,i2=new Pn,$P=new Pn;class _O{constructor(e=new Pn,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):QAe.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;i2.subVectors(e,this.center);const n=i2.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(i2,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):($P.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(i2.copy(e.center).add($P)),this.expandByPoint(i2.copy(e.center).sub($P))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Jg=new Pn,WP=new Pn,WE=new Pn,rv=new Pn,XP=new Pn,XE=new Pn,YP=new Pn;class wY{constructor(e=new Pn,n=new Pn(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Jg)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Jg.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Jg.copy(this.origin).addScaledVector(this.direction,n),Jg.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){WP.copy(e).add(n).multiplyScalar(.5),WE.copy(n).sub(e).normalize(),rv.copy(this.origin).sub(WP);const o=e.distanceTo(n)*.5,s=-this.direction.dot(WE),a=rv.dot(this.direction),c=-rv.dot(WE),h=rv.lengthSq(),d=Math.abs(1-s*s);let v,w,_,E;if(d>0)if(v=s*c-a,w=s*a-c,E=o*d,v>=0)if(w>=-E)if(w<=E){const M=1/d;v*=M,w*=M,_=v*(v+s*w+2*a)+w*(s*v+w+2*c)+h}else w=o,v=Math.max(0,-(s*w+a)),_=-v*v+w*(w+2*c)+h;else w=-o,v=Math.max(0,-(s*w+a)),_=-v*v+w*(w+2*c)+h;else w<=-E?(v=Math.max(0,-(-s*o+a)),w=v>0?-o:Math.min(Math.max(-o,-c),o),_=-v*v+w*(w+2*c)+h):w<=E?(v=0,w=Math.min(Math.max(-o,-c),o),_=w*(w+2*c)+h):(v=Math.max(0,-(s*o+a)),w=v>0?o:Math.min(Math.max(-o,-c),o),_=-v*v+w*(w+2*c)+h);else w=s>0?-o:o,v=Math.max(0,-(s*w+a)),_=-v*v+w*(w+2*c)+h;return r&&r.copy(this.origin).addScaledVector(this.direction,v),i&&i.copy(WP).addScaledVector(WE,w),_}intersectSphere(e,n){Jg.subVectors(e.center,this.origin);const r=Jg.dot(this.direction),i=Jg.dot(Jg)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,c=r+s;return c<0?null:a<0?this.at(c,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,s,a,c;const h=1/this.direction.x,d=1/this.direction.y,v=1/this.direction.z,w=this.origin;return h>=0?(r=(e.min.x-w.x)*h,i=(e.max.x-w.x)*h):(r=(e.max.x-w.x)*h,i=(e.min.x-w.x)*h),d>=0?(o=(e.min.y-w.y)*d,s=(e.max.y-w.y)*d):(o=(e.max.y-w.y)*d,s=(e.min.y-w.y)*d),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),v>=0?(a=(e.min.z-w.z)*v,c=(e.max.z-w.z)*v):(a=(e.max.z-w.z)*v,c=(e.min.z-w.z)*v),r>c||a>i)||((a>r||r!==r)&&(r=a),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Jg)!==null}intersectTriangle(e,n,r,i,o){XP.subVectors(n,e),XE.subVectors(r,e),YP.crossVectors(XP,XE);let s=this.direction.dot(YP),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;rv.subVectors(this.origin,e);const c=a*this.direction.dot(XE.crossVectors(rv,XE));if(c<0)return null;const h=a*this.direction.dot(XP.cross(rv));if(h<0||c+h>s)return null;const d=-a*rv.dot(YP);return d<0?null:this.at(d/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Os{constructor(e,n,r,i,o,s,a,c,h,d,v,w,_,E,M,D){Os.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,c,h,d,v,w,_,E,M,D)}set(e,n,r,i,o,s,a,c,h,d,v,w,_,E,M,D){const A=this.elements;return A[0]=e,A[4]=n,A[8]=r,A[12]=i,A[1]=o,A[5]=s,A[9]=a,A[13]=c,A[2]=h,A[6]=d,A[10]=v,A[14]=w,A[3]=_,A[7]=E,A[11]=M,A[15]=D,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Os().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/X_.setFromMatrixColumn(e,0).length(),o=1/X_.setFromMatrixColumn(e,1).length(),s=1/X_.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),c=Math.cos(i),h=Math.sin(i),d=Math.cos(o),v=Math.sin(o);if(e.order==="XYZ"){const w=s*d,_=s*v,E=a*d,M=a*v;n[0]=c*d,n[4]=-c*v,n[8]=h,n[1]=_+E*h,n[5]=w-M*h,n[9]=-a*c,n[2]=M-w*h,n[6]=E+_*h,n[10]=s*c}else if(e.order==="YXZ"){const w=c*d,_=c*v,E=h*d,M=h*v;n[0]=w+M*a,n[4]=E*a-_,n[8]=s*h,n[1]=s*v,n[5]=s*d,n[9]=-a,n[2]=_*a-E,n[6]=M+w*a,n[10]=s*c}else if(e.order==="ZXY"){const w=c*d,_=c*v,E=h*d,M=h*v;n[0]=w-M*a,n[4]=-s*v,n[8]=E+_*a,n[1]=_+E*a,n[5]=s*d,n[9]=M-w*a,n[2]=-s*h,n[6]=a,n[10]=s*c}else if(e.order==="ZYX"){const w=s*d,_=s*v,E=a*d,M=a*v;n[0]=c*d,n[4]=E*h-_,n[8]=w*h+M,n[1]=c*v,n[5]=M*h+w,n[9]=_*h-E,n[2]=-h,n[6]=a*c,n[10]=s*c}else if(e.order==="YZX"){const w=s*c,_=s*h,E=a*c,M=a*h;n[0]=c*d,n[4]=M-w*v,n[8]=E*v+_,n[1]=v,n[5]=s*d,n[9]=-a*d,n[2]=-h*d,n[6]=_*v+E,n[10]=w-M*v}else if(e.order==="XZY"){const w=s*c,_=s*h,E=a*c,M=a*h;n[0]=c*d,n[4]=-v,n[8]=h*d,n[1]=w*v+M,n[5]=s*d,n[9]=_*v-E,n[2]=E*v-_,n[6]=a*d,n[10]=M*v+w}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(e5e,e,t5e)}lookAt(e,n,r){const i=this.elements;return kf.subVectors(e,n),kf.lengthSq()===0&&(kf.z=1),kf.normalize(),iv.crossVectors(r,kf),iv.lengthSq()===0&&(Math.abs(r.z)===1?kf.x+=1e-4:kf.z+=1e-4,kf.normalize(),iv.crossVectors(r,kf)),iv.normalize(),YE.crossVectors(kf,iv),i[0]=iv.x,i[4]=YE.x,i[8]=kf.x,i[1]=iv.y,i[5]=YE.y,i[9]=kf.y,i[2]=iv.z,i[6]=YE.z,i[10]=kf.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[4],c=r[8],h=r[12],d=r[1],v=r[5],w=r[9],_=r[13],E=r[2],M=r[6],D=r[10],A=r[14],F=r[3],O=r[7],N=r[11],H=r[15],G=i[0],W=i[4],X=i[8],K=i[12],k=i[1],$=i[5],Q=i[9],ie=i[13],ae=i[2],ce=i[6],se=i[10],Se=i[14],ye=i[3],Te=i[7],pe=i[11],Ie=i[15];return o[0]=s*G+a*k+c*ae+h*ye,o[4]=s*W+a*$+c*ce+h*Te,o[8]=s*X+a*Q+c*se+h*pe,o[12]=s*K+a*ie+c*Se+h*Ie,o[1]=d*G+v*k+w*ae+_*ye,o[5]=d*W+v*$+w*ce+_*Te,o[9]=d*X+v*Q+w*se+_*pe,o[13]=d*K+v*ie+w*Se+_*Ie,o[2]=E*G+M*k+D*ae+A*ye,o[6]=E*W+M*$+D*ce+A*Te,o[10]=E*X+M*Q+D*se+A*pe,o[14]=E*K+M*ie+D*Se+A*Ie,o[3]=F*G+O*k+N*ae+H*ye,o[7]=F*W+O*$+N*ce+H*Te,o[11]=F*X+O*Q+N*se+H*pe,o[15]=F*K+O*ie+N*Se+H*Ie,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],c=e[9],h=e[13],d=e[2],v=e[6],w=e[10],_=e[14],E=e[3],M=e[7],D=e[11],A=e[15];return E*(+o*c*v-i*h*v-o*a*w+r*h*w+i*a*_-r*c*_)+M*(+n*c*_-n*h*w+o*s*w-i*s*_+i*h*d-o*c*d)+D*(+n*h*v-n*a*_-o*s*v+r*s*_+o*a*d-r*h*d)+A*(-i*a*d-n*c*v+n*a*w+i*s*v-r*s*w+r*c*d)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],h=e[7],d=e[8],v=e[9],w=e[10],_=e[11],E=e[12],M=e[13],D=e[14],A=e[15],F=v*D*h-M*w*h+M*c*_-a*D*_-v*c*A+a*w*A,O=E*w*h-d*D*h-E*c*_+s*D*_+d*c*A-s*w*A,N=d*M*h-E*v*h+E*a*_-s*M*_-d*a*A+s*v*A,H=E*v*c-d*M*c-E*a*w+s*M*w+d*a*D-s*v*D,G=n*F+r*O+i*N+o*H;if(G===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const W=1/G;return e[0]=F*W,e[1]=(M*w*o-v*D*o-M*i*_+r*D*_+v*i*A-r*w*A)*W,e[2]=(a*D*o-M*c*o+M*i*h-r*D*h-a*i*A+r*c*A)*W,e[3]=(v*c*o-a*w*o-v*i*h+r*w*h+a*i*_-r*c*_)*W,e[4]=O*W,e[5]=(d*D*o-E*w*o+E*i*_-n*D*_-d*i*A+n*w*A)*W,e[6]=(E*c*o-s*D*o-E*i*h+n*D*h+s*i*A-n*c*A)*W,e[7]=(s*w*o-d*c*o+d*i*h-n*w*h-s*i*_+n*c*_)*W,e[8]=N*W,e[9]=(E*v*o-d*M*o-E*r*_+n*M*_+d*r*A-n*v*A)*W,e[10]=(s*M*o-E*a*o+E*r*h-n*M*h-s*r*A+n*a*A)*W,e[11]=(d*a*o-s*v*o-d*r*h+n*v*h+s*r*_-n*a*_)*W,e[12]=H*W,e[13]=(d*M*i-E*v*i+E*r*w-n*M*w-d*r*D+n*v*D)*W,e[14]=(E*a*i-s*M*i-E*r*c+n*M*c+s*r*D-n*a*D)*W,e[15]=(s*v*i-d*a*i+d*r*c-n*v*c-s*r*w+n*a*w)*W,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,s=e.x,a=e.y,c=e.z,h=o*s,d=o*a;return this.set(h*s+r,h*a-i*c,h*c+i*a,0,h*a+i*c,d*a+r,d*c-i*s,0,h*c-i*a,d*c+i*s,o*c*c+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,s=n._y,a=n._z,c=n._w,h=o+o,d=s+s,v=a+a,w=o*h,_=o*d,E=o*v,M=s*d,D=s*v,A=a*v,F=c*h,O=c*d,N=c*v,H=r.x,G=r.y,W=r.z;return i[0]=(1-(M+A))*H,i[1]=(_+N)*H,i[2]=(E-O)*H,i[3]=0,i[4]=(_-N)*G,i[5]=(1-(w+A))*G,i[6]=(D+F)*G,i[7]=0,i[8]=(E+O)*W,i[9]=(D-F)*W,i[10]=(1-(w+M))*W,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=X_.set(i[0],i[1],i[2]).length();const s=X_.set(i[4],i[5],i[6]).length(),a=X_.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],op.copy(this);const h=1/o,d=1/s,v=1/a;return op.elements[0]*=h,op.elements[1]*=h,op.elements[2]*=h,op.elements[4]*=d,op.elements[5]*=d,op.elements[6]*=d,op.elements[8]*=v,op.elements[9]*=v,op.elements[10]*=v,n.setFromRotationMatrix(op),r.x=o,r.y=s,r.z=a,this}makePerspective(e,n,r,i,o,s,a=sm){const c=this.elements,h=2*o/(n-e),d=2*o/(r-i),v=(n+e)/(n-e),w=(r+i)/(r-i);let _,E;if(a===sm)_=-(s+o)/(s-o),E=-2*s*o/(s-o);else if(a===KC)_=-s/(s-o),E=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=h,c[4]=0,c[8]=v,c[12]=0,c[1]=0,c[5]=d,c[9]=w,c[13]=0,c[2]=0,c[6]=0,c[10]=_,c[14]=E,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,r,i,o,s,a=sm){const c=this.elements,h=1/(n-e),d=1/(r-i),v=1/(s-o),w=(n+e)*h,_=(r+i)*d;let E,M;if(a===sm)E=(s+o)*v,M=-2*v;else if(a===KC)E=o*v,M=-1*v;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*h,c[4]=0,c[8]=0,c[12]=-w,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-_,c[2]=0,c[6]=0,c[10]=M,c[14]=-E,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const X_=new Pn,op=new Os,e5e=new Pn(0,0,0),t5e=new Pn(1,1,1),iv=new Pn,YE=new Pn,kf=new Pn,fj=new Os,dj=new Ov;class pg{constructor(e=0,n=0,r=0,i=pg.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],c=i[1],h=i[5],d=i[9],v=i[2],w=i[6],_=i[10];switch(n){case"XYZ":this._y=Math.asin($a(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,_),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(w,h),this._z=0);break;case"YXZ":this._x=Math.asin(-$a(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,_),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-v,o),this._z=0);break;case"ZXY":this._x=Math.asin($a(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(-v,_),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-$a(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(w,_),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-s,h));break;case"YZX":this._z=Math.asin($a(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,h),this._y=Math.atan2(-v,o)):(this._x=0,this._y=Math.atan2(a,_));break;case"XZY":this._z=Math.asin(-$a(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(w,h),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-d,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return fj.makeRotationFromQuaternion(e),this.setFromRotationMatrix(fj,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return dj.setFromEuler(this),this.setFromQuaternion(dj,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}pg.DEFAULT_ORDER="XYZ";class SY{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let n5e=0;const pj=new Pn,Y_=new Ov,Qg=new Os,ZE=new Pn,a2=new Pn,r5e=new Pn,i5e=new Ov,gj=new Pn(1,0,0),mj=new Pn(0,1,0),vj=new Pn(0,0,1),yj={type:"added"},a5e={type:"removed"},Z_={type:"childadded",child:null},ZP={type:"childremoved",child:null};class Gc extends Dy{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:n5e++}),this.uuid=Ly(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gc.DEFAULT_UP.clone();const e=new Pn,n=new pg,r=new Ov,i=new Pn(1,1,1);function o(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Os},normalMatrix:{value:new Oa}}),this.matrix=new Os,this.matrixWorld=new Os,this.matrixAutoUpdate=Gc.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Gc.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new SY,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Y_.setFromAxisAngle(e,n),this.quaternion.multiply(Y_),this}rotateOnWorldAxis(e,n){return Y_.setFromAxisAngle(e,n),this.quaternion.premultiply(Y_),this}rotateX(e){return this.rotateOnAxis(gj,e)}rotateY(e){return this.rotateOnAxis(mj,e)}rotateZ(e){return this.rotateOnAxis(vj,e)}translateOnAxis(e,n){return pj.copy(e).applyQuaternion(this.quaternion),this.position.add(pj.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(gj,e)}translateY(e){return this.translateOnAxis(mj,e)}translateZ(e){return this.translateOnAxis(vj,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Qg.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?ZE.copy(e):ZE.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),a2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qg.lookAt(a2,ZE,this.up):Qg.lookAt(ZE,a2,this.up),this.quaternion.setFromRotationMatrix(Qg),i&&(Qg.extractRotation(i.matrixWorld),Y_.setFromRotationMatrix(Qg),this.quaternion.premultiply(Y_.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(yj),Z_.child=e,this.dispatchEvent(Z_),Z_.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(a5e),ZP.child=e,this.dispatchEvent(ZP),ZP.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Qg.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Qg.multiply(e.parent.matrixWorld)),e.applyMatrix4(Qg),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(yj),Z_.child=e,this.dispatchEvent(Z_),Z_.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(a2,e,r5e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(a2,i5e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let h=0,d=c.length;h<d;h++){const v=c[h];o(e.shapes,v)}else o(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,h=this.material.length;c<h;c++)a.push(o(e.materials,this.material[c]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];i.animations.push(o(e.animations,c))}}if(n){const a=s(e.geometries),c=s(e.materials),h=s(e.textures),d=s(e.images),v=s(e.shapes),w=s(e.skeletons),_=s(e.animations),E=s(e.nodes);a.length>0&&(r.geometries=a),c.length>0&&(r.materials=c),h.length>0&&(r.textures=h),d.length>0&&(r.images=d),v.length>0&&(r.shapes=v),w.length>0&&(r.skeletons=w),_.length>0&&(r.animations=_),E.length>0&&(r.nodes=E)}return r.object=i,r;function s(a){const c=[];for(const h in a){const d=a[h];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Gc.DEFAULT_UP=new Pn(0,1,0);Gc.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gc.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const sp=new Pn,em=new Pn,KP=new Pn,tm=new Pn,K_=new Pn,J_=new Pn,_j=new Pn,JP=new Pn,QP=new Pn,eI=new Pn,tI=new iu,nI=new iu,rI=new iu;class pp{constructor(e=new Pn,n=new Pn,r=new Pn){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),sp.subVectors(e,n),i.cross(sp);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){sp.subVectors(i,n),em.subVectors(r,n),KP.subVectors(e,n);const s=sp.dot(sp),a=sp.dot(em),c=sp.dot(KP),h=em.dot(em),d=em.dot(KP),v=s*h-a*a;if(v===0)return o.set(0,0,0),null;const w=1/v,_=(h*c-a*d)*w,E=(s*d-a*c)*w;return o.set(1-_-E,E,_)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,tm)===null?!1:tm.x>=0&&tm.y>=0&&tm.x+tm.y<=1}static getInterpolation(e,n,r,i,o,s,a,c){return this.getBarycoord(e,n,r,i,tm)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,tm.x),c.addScaledVector(s,tm.y),c.addScaledVector(a,tm.z),c)}static getInterpolatedAttribute(e,n,r,i,o,s){return tI.setScalar(0),nI.setScalar(0),rI.setScalar(0),tI.fromBufferAttribute(e,n),nI.fromBufferAttribute(e,r),rI.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(tI,o.x),s.addScaledVector(nI,o.y),s.addScaledVector(rI,o.z),s}static isFrontFacing(e,n,r,i){return sp.subVectors(r,n),em.subVectors(e,n),sp.cross(em).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return sp.subVectors(this.c,this.b),em.subVectors(this.a,this.b),sp.cross(em).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return pp.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return pp.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return pp.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return pp.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return pp.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let s,a;K_.subVectors(i,r),J_.subVectors(o,r),JP.subVectors(e,r);const c=K_.dot(JP),h=J_.dot(JP);if(c<=0&&h<=0)return n.copy(r);QP.subVectors(e,i);const d=K_.dot(QP),v=J_.dot(QP);if(d>=0&&v<=d)return n.copy(i);const w=c*v-d*h;if(w<=0&&c>=0&&d<=0)return s=c/(c-d),n.copy(r).addScaledVector(K_,s);eI.subVectors(e,o);const _=K_.dot(eI),E=J_.dot(eI);if(E>=0&&_<=E)return n.copy(o);const M=_*h-c*E;if(M<=0&&h>=0&&E<=0)return a=h/(h-E),n.copy(r).addScaledVector(J_,a);const D=d*E-_*v;if(D<=0&&v-d>=0&&_-E>=0)return _j.subVectors(o,i),a=(v-d)/(v-d+(_-E)),n.copy(i).addScaledVector(_j,a);const A=1/(D+M+w);return s=M*A,a=w*A,n.copy(r).addScaledVector(K_,s).addScaledVector(J_,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const EY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},av={h:0,s:0,l:0},KE={h:0,s:0,l:0};function iI(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Ji{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ff){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Po.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Po.workingColorSpace){return this.r=e,this.g=n,this.b=r,Po.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Po.workingColorSpace){if(e=yO(e,1),n=$a(n,0,1),r=$a(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,s=2*r-o;this.r=iI(s,o,e+1/3),this.g=iI(s,o,e),this.b=iI(s,o,e-1/3)}return Po.toWorkingColorSpace(this,i),this}setStyle(e,n=ff){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ff){const r=EY[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=pm(e.r),this.g=pm(e.g),this.b=pm(e.b),this}copyLinearToSRGB(e){return this.r=Q1(e.r),this.g=Q1(e.g),this.b=Q1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ff){return Po.fromWorkingColorSpace(mh.copy(this),e),Math.round($a(mh.r*255,0,255))*65536+Math.round($a(mh.g*255,0,255))*256+Math.round($a(mh.b*255,0,255))}getHexString(e=ff){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Po.workingColorSpace){Po.fromWorkingColorSpace(mh.copy(this),n);const r=mh.r,i=mh.g,o=mh.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let c,h;const d=(a+s)/2;if(a===s)c=0,h=0;else{const v=s-a;switch(h=d<=.5?v/(s+a):v/(2-s-a),s){case r:c=(i-o)/v+(i<o?6:0);break;case i:c=(o-r)/v+2;break;case o:c=(r-i)/v+4;break}c/=6}return e.h=c,e.s=h,e.l=d,e}getRGB(e,n=Po.workingColorSpace){return Po.fromWorkingColorSpace(mh.copy(this),n),e.r=mh.r,e.g=mh.g,e.b=mh.b,e}getStyle(e=ff){Po.fromWorkingColorSpace(mh.copy(this),e);const n=mh.r,r=mh.g,i=mh.b;return e!==ff?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(av),this.setHSL(av.h+e,av.s+n,av.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(av),e.getHSL(KE);const r=Q2(av.h,KE.h,n),i=Q2(av.s,KE.s,n),o=Q2(av.l,KE.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const mh=new Ji;Ji.NAMES=EY;let o5e=0;class qx extends Dy{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:o5e++}),this.uuid=Ly(),this.name="",this.type="Material",this.blending=K1,this.side=kv,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=EL,this.blendDst=TL,this.blendEquation=im,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ji(0,0,0),this.blendAlpha=0,this.depthFunc=_x,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ij,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=V_,this.stencilZFail=V_,this.stencilZPass=V_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==K1&&(r.blending=this.blending),this.side!==kv&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==EL&&(r.blendSrc=this.blendSrc),this.blendDst!==TL&&(r.blendDst=this.blendDst),this.blendEquation!==im&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==_x&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ij&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==V_&&(r.stencilFail=this.stencilFail),this.stencilZFail!==V_&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==V_&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const c=o[a];delete c.metadata,s.push(c)}return s}if(n){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Nw extends qx{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ji(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pg,this.combine=tY,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Nu=new Pn,JE=new qr;let s5e=0;class ol{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:s5e++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=aj,this.updateRanges=[],this.gpuType=ig,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)JE.fromBufferAttribute(this,n),JE.applyMatrix3(e),this.setXY(n,JE.x,JE.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Nu.fromBufferAttribute(this,n),Nu.applyMatrix3(e),this.setXYZ(n,Nu.x,Nu.y,Nu.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Nu.fromBufferAttribute(this,n),Nu.applyMatrix4(e),this.setXYZ(n,Nu.x,Nu.y,Nu.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Nu.fromBufferAttribute(this,n),Nu.applyNormalMatrix(e),this.setXYZ(n,Nu.x,Nu.y,Nu.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Nu.fromBufferAttribute(this,n),Nu.transformDirection(e),this.setXYZ(n,Nu.x,Nu.y,Nu.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=M1(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Fh(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=M1(n,this.array)),n}setX(e,n){return this.normalized&&(n=Fh(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=M1(n,this.array)),n}setY(e,n){return this.normalized&&(n=Fh(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=M1(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Fh(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=M1(n,this.array)),n}setW(e,n){return this.normalized&&(n=Fh(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Fh(n,this.array),r=Fh(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Fh(n,this.array),r=Fh(r,this.array),i=Fh(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Fh(n,this.array),r=Fh(r,this.array),i=Fh(i,this.array),o=Fh(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==aj&&(e.usage=this.usage),e}}class TY extends ol{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class CY extends ol{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Wf extends ol{constructor(e,n,r){super(new Float32Array(e),n,r)}}let l5e=0;const gd=new Os,aI=new Gc,Q_=new Pn,Of=new Hx,o2=new Hx,vc=new Pn;class qh extends Dy{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:l5e++}),this.uuid=Ly(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xY(e)?CY:TY)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new Oa().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return gd.makeRotationFromQuaternion(e),this.applyMatrix4(gd),this}rotateX(e){return gd.makeRotationX(e),this.applyMatrix4(gd),this}rotateY(e){return gd.makeRotationY(e),this.applyMatrix4(gd),this}rotateZ(e){return gd.makeRotationZ(e),this.applyMatrix4(gd),this}translate(e,n,r){return gd.makeTranslation(e,n,r),this.applyMatrix4(gd),this}scale(e,n,r){return gd.makeScale(e,n,r),this.applyMatrix4(gd),this}lookAt(e){return aI.lookAt(e),aI.updateMatrix(),this.applyMatrix4(aI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Q_).negate(),this.translate(Q_.x,Q_.y,Q_.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,o=e.length;i<o;i++){const s=e[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Wf(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const o=e[i];n.setXYZ(i,o.x,o.y,o.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hx);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Pn(-1/0,-1/0,-1/0),new Pn(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];Of.setFromBufferAttribute(o),this.morphTargetsRelative?(vc.addVectors(this.boundingBox.min,Of.min),this.boundingBox.expandByPoint(vc),vc.addVectors(this.boundingBox.max,Of.max),this.boundingBox.expandByPoint(vc)):(this.boundingBox.expandByPoint(Of.min),this.boundingBox.expandByPoint(Of.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _O);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Pn,1/0);return}if(e){const r=this.boundingSphere.center;if(Of.setFromBufferAttribute(e),n)for(let o=0,s=n.length;o<s;o++){const a=n[o];o2.setFromBufferAttribute(a),this.morphTargetsRelative?(vc.addVectors(Of.min,o2.min),Of.expandByPoint(vc),vc.addVectors(Of.max,o2.max),Of.expandByPoint(vc)):(Of.expandByPoint(o2.min),Of.expandByPoint(o2.max))}Of.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)vc.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(vc));if(n)for(let o=0,s=n.length;o<s;o++){const a=n[o],c=this.morphTargetsRelative;for(let h=0,d=a.count;h<d;h++)vc.fromBufferAttribute(a,h),c&&(Q_.fromBufferAttribute(e,h),vc.add(Q_)),i=Math.max(i,r.distanceToSquared(vc))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ol(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),a=[],c=[];for(let X=0;X<r.count;X++)a[X]=new Pn,c[X]=new Pn;const h=new Pn,d=new Pn,v=new Pn,w=new qr,_=new qr,E=new qr,M=new Pn,D=new Pn;function A(X,K,k){h.fromBufferAttribute(r,X),d.fromBufferAttribute(r,K),v.fromBufferAttribute(r,k),w.fromBufferAttribute(o,X),_.fromBufferAttribute(o,K),E.fromBufferAttribute(o,k),d.sub(h),v.sub(h),_.sub(w),E.sub(w);const $=1/(_.x*E.y-E.x*_.y);isFinite($)&&(M.copy(d).multiplyScalar(E.y).addScaledVector(v,-_.y).multiplyScalar($),D.copy(v).multiplyScalar(_.x).addScaledVector(d,-E.x).multiplyScalar($),a[X].add(M),a[K].add(M),a[k].add(M),c[X].add(D),c[K].add(D),c[k].add(D))}let F=this.groups;F.length===0&&(F=[{start:0,count:e.count}]);for(let X=0,K=F.length;X<K;++X){const k=F[X],$=k.start,Q=k.count;for(let ie=$,ae=$+Q;ie<ae;ie+=3)A(e.getX(ie+0),e.getX(ie+1),e.getX(ie+2))}const O=new Pn,N=new Pn,H=new Pn,G=new Pn;function W(X){H.fromBufferAttribute(i,X),G.copy(H);const K=a[X];O.copy(K),O.sub(H.multiplyScalar(H.dot(K))).normalize(),N.crossVectors(G,K);const $=N.dot(c[X])<0?-1:1;s.setXYZW(X,O.x,O.y,O.z,$)}for(let X=0,K=F.length;X<K;++X){const k=F[X],$=k.start,Q=k.count;for(let ie=$,ae=$+Q;ie<ae;ie+=3)W(e.getX(ie+0)),W(e.getX(ie+1)),W(e.getX(ie+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ol(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let w=0,_=r.count;w<_;w++)r.setXYZ(w,0,0,0);const i=new Pn,o=new Pn,s=new Pn,a=new Pn,c=new Pn,h=new Pn,d=new Pn,v=new Pn;if(e)for(let w=0,_=e.count;w<_;w+=3){const E=e.getX(w+0),M=e.getX(w+1),D=e.getX(w+2);i.fromBufferAttribute(n,E),o.fromBufferAttribute(n,M),s.fromBufferAttribute(n,D),d.subVectors(s,o),v.subVectors(i,o),d.cross(v),a.fromBufferAttribute(r,E),c.fromBufferAttribute(r,M),h.fromBufferAttribute(r,D),a.add(d),c.add(d),h.add(d),r.setXYZ(E,a.x,a.y,a.z),r.setXYZ(M,c.x,c.y,c.z),r.setXYZ(D,h.x,h.y,h.z)}else for(let w=0,_=n.count;w<_;w+=3)i.fromBufferAttribute(n,w+0),o.fromBufferAttribute(n,w+1),s.fromBufferAttribute(n,w+2),d.subVectors(s,o),v.subVectors(i,o),d.cross(v),r.setXYZ(w+0,d.x,d.y,d.z),r.setXYZ(w+1,d.x,d.y,d.z),r.setXYZ(w+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)vc.fromBufferAttribute(e,n),vc.normalize(),e.setXYZ(n,vc.x,vc.y,vc.z)}toNonIndexed(){function e(a,c){const h=a.array,d=a.itemSize,v=a.normalized,w=new h.constructor(c.length*d);let _=0,E=0;for(let M=0,D=c.length;M<D;M++){a.isInterleavedBufferAttribute?_=c[M]*a.data.stride+a.offset:_=c[M]*d;for(let A=0;A<d;A++)w[E++]=h[_++]}return new ol(w,d,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new qh,r=this.index.array,i=this.attributes;for(const a in i){const c=i[a],h=e(c,r);n.setAttribute(a,h)}const o=this.morphAttributes;for(const a in o){const c=[],h=o[a];for(let d=0,v=h.length;d<v;d++){const w=h[d],_=e(w,r);c.push(_)}n.morphAttributes[a]=c}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,c=s.length;a<c;a++){const h=s[a];n.addGroup(h.start,h.count,h.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const c in r){const h=r[c];e.data.attributes[c]=h.toJSON(e.data)}const i={};let o=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],d=[];for(let v=0,w=h.length;v<w;v++){const _=h[v];d.push(_.toJSON(e.data))}d.length>0&&(i[c]=d,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const h in i){const d=i[h];this.setAttribute(h,d.clone(n))}const o=e.morphAttributes;for(const h in o){const d=[],v=o[h];for(let w=0,_=v.length;w<_;w++)d.push(v[w].clone(n));this.morphAttributes[h]=d}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let h=0,d=s.length;h<d;h++){const v=s[h];this.addGroup(v.start,v.count,v.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const xj=new Os,S0=new wY,QE=new _O,bj=new Pn,eT=new Pn,tT=new Pn,nT=new Pn,oI=new Pn,rT=new Pn,wj=new Pn,iT=new Pn;class Uc extends Gc{constructor(e=new qh,n=new Nw){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){rT.set(0,0,0);for(let c=0,h=o.length;c<h;c++){const d=a[c],v=o[c];d!==0&&(oI.fromBufferAttribute(v,e),s?rT.addScaledVector(oI,d):rT.addScaledVector(oI.sub(n),d))}n.add(rT)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),QE.copy(r.boundingSphere),QE.applyMatrix4(o),S0.copy(e.ray).recast(e.near),!(QE.containsPoint(S0.origin)===!1&&(S0.intersectSphere(QE,bj)===null||S0.origin.distanceToSquared(bj)>(e.far-e.near)**2))&&(xj.copy(o).invert(),S0.copy(e.ray).applyMatrix4(xj),!(r.boundingBox!==null&&S0.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,S0)))}_computeIntersections(e,n,r){let i;const o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,h=o.attributes.uv,d=o.attributes.uv1,v=o.attributes.normal,w=o.groups,_=o.drawRange;if(a!==null)if(Array.isArray(s))for(let E=0,M=w.length;E<M;E++){const D=w[E],A=s[D.materialIndex],F=Math.max(D.start,_.start),O=Math.min(a.count,Math.min(D.start+D.count,_.start+_.count));for(let N=F,H=O;N<H;N+=3){const G=a.getX(N),W=a.getX(N+1),X=a.getX(N+2);i=aT(this,A,e,r,h,d,v,G,W,X),i&&(i.faceIndex=Math.floor(N/3),i.face.materialIndex=D.materialIndex,n.push(i))}}else{const E=Math.max(0,_.start),M=Math.min(a.count,_.start+_.count);for(let D=E,A=M;D<A;D+=3){const F=a.getX(D),O=a.getX(D+1),N=a.getX(D+2);i=aT(this,s,e,r,h,d,v,F,O,N),i&&(i.faceIndex=Math.floor(D/3),n.push(i))}}else if(c!==void 0)if(Array.isArray(s))for(let E=0,M=w.length;E<M;E++){const D=w[E],A=s[D.materialIndex],F=Math.max(D.start,_.start),O=Math.min(c.count,Math.min(D.start+D.count,_.start+_.count));for(let N=F,H=O;N<H;N+=3){const G=N,W=N+1,X=N+2;i=aT(this,A,e,r,h,d,v,G,W,X),i&&(i.faceIndex=Math.floor(N/3),i.face.materialIndex=D.materialIndex,n.push(i))}}else{const E=Math.max(0,_.start),M=Math.min(c.count,_.start+_.count);for(let D=E,A=M;D<A;D+=3){const F=D,O=D+1,N=D+2;i=aT(this,s,e,r,h,d,v,F,O,N),i&&(i.faceIndex=Math.floor(D/3),n.push(i))}}}}function u5e(t,e,n,r,i,o,s,a){let c;if(e.side===vf?c=r.intersectTriangle(s,o,i,!0,a):c=r.intersectTriangle(i,o,s,e.side===kv,a),c===null)return null;iT.copy(a),iT.applyMatrix4(t.matrixWorld);const h=n.ray.origin.distanceTo(iT);return h<n.near||h>n.far?null:{distance:h,point:iT.clone(),object:t}}function aT(t,e,n,r,i,o,s,a,c,h){t.getVertexPosition(a,eT),t.getVertexPosition(c,tT),t.getVertexPosition(h,nT);const d=u5e(t,e,n,r,eT,tT,nT,wj);if(d){const v=new Pn;pp.getBarycoord(wj,eT,tT,nT,v),i&&(d.uv=pp.getInterpolatedAttribute(i,a,c,h,v,new qr)),o&&(d.uv1=pp.getInterpolatedAttribute(o,a,c,h,v,new qr)),s&&(d.normal=pp.getInterpolatedAttribute(s,a,c,h,v,new Pn),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const w={a,b:c,c:h,normal:new Pn,materialIndex:0};pp.getNormal(eT,tT,nT,w.normal),d.face=w,d.barycoord=v}return d}class Ny extends qh{constructor(e=1,n=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const c=[],h=[],d=[],v=[];let w=0,_=0;E("z","y","x",-1,-1,r,n,e,s,o,0),E("z","y","x",1,-1,r,n,-e,s,o,1),E("x","z","y",1,1,e,r,n,i,s,2),E("x","z","y",1,-1,e,r,-n,i,s,3),E("x","y","z",1,-1,e,n,r,i,o,4),E("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(c),this.setAttribute("position",new Wf(h,3)),this.setAttribute("normal",new Wf(d,3)),this.setAttribute("uv",new Wf(v,2));function E(M,D,A,F,O,N,H,G,W,X,K){const k=N/W,$=H/X,Q=N/2,ie=H/2,ae=G/2,ce=W+1,se=X+1;let Se=0,ye=0;const Te=new Pn;for(let pe=0;pe<se;pe++){const Ie=pe*$-ie;for(let me=0;me<ce;me++){const xe=me*k-Q;Te[M]=xe*F,Te[D]=Ie*O,Te[A]=ae,h.push(Te.x,Te.y,Te.z),Te[M]=0,Te[D]=0,Te[A]=G>0?1:-1,d.push(Te.x,Te.y,Te.z),v.push(me/W),v.push(1-pe/X),Se+=1}}for(let pe=0;pe<X;pe++)for(let Ie=0;Ie<W;Ie++){const me=w+Ie+ce*pe,xe=w+Ie+ce*(pe+1),ve=w+(Ie+1)+ce*(pe+1),Ee=w+(Ie+1)+ce*pe;c.push(me,xe,Ee),c.push(xe,ve,Ee),ye+=6}a.addGroup(_,ye,K),_+=ye,w+=Se}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ny(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ex(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Bh(t){const e={};for(let n=0;n<t.length;n++){const r=Ex(t[n]);for(const i in r)e[i]=r[i]}return e}function c5e(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function MY(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Po.workingColorSpace}const lm={clone:Ex,merge:Bh};var h5e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,f5e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ic extends qx{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=h5e,this.fragmentShader=f5e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ex(e.uniforms),this.uniformsGroups=c5e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class AY extends Gc{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Os,this.projectionMatrix=new Os,this.projectionMatrixInverse=new Os,this.coordinateSystem=sm}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ov=new Pn,Sj=new qr,Ej=new qr;class Sd extends AY{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Dw*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(J2*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Dw*2*Math.atan(Math.tan(J2*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){ov.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ov.x,ov.y).multiplyScalar(-e/ov.z),ov.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(ov.x,ov.y).multiplyScalar(-e/ov.z)}getViewSize(e,n){return this.getViewBounds(e,Sj,Ej),n.subVectors(Ej,Sj)}setViewOffset(e,n,r,i,o,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(J2*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,h=s.fullHeight;o+=s.offsetX*i/c,n-=s.offsetY*r/h,i*=s.width/c,r*=s.height/h}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const e1=-90,t1=1;class d5e extends Gc{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Sd(e1,t1,e,n);i.layers=this.layers,this.add(i);const o=new Sd(e1,t1,e,n);o.layers=this.layers,this.add(o);const s=new Sd(e1,t1,e,n);s.layers=this.layers,this.add(s);const a=new Sd(e1,t1,e,n);a.layers=this.layers,this.add(a);const c=new Sd(e1,t1,e,n);c.layers=this.layers,this.add(c);const h=new Sd(e1,t1,e,n);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,s,a,c]=n;for(const h of n)this.remove(h);if(e===sm)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===KC)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of n)this.add(h),h.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,c,h,d]=this.children,v=e.getRenderTarget(),w=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),E=e.xr.enabled;e.xr.enabled=!1;const M=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,c),e.setRenderTarget(r,4,i),e.render(n,h),r.texture.generateMipmaps=M,e.setRenderTarget(r,5,i),e.render(n,d),e.setRenderTarget(v,w,_),e.xr.enabled=E,r.texture.needsPMREMUpdate=!0}}class RY extends jc{constructor(e,n,r,i,o,s,a,c,h,d){e=e!==void 0?e:[],n=n!==void 0?n:xx,super(e,n,r,i,o,s,a,c,h,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class p5e extends $f{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new RY(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:mp}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ny(5,5,5),o=new ic({name:"CubemapFromEquirect",uniforms:Ex(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:vf,blending:Vh});o.uniforms.tEquirect.value=n;const s=new Uc(i,o),a=n.minFilter;return n.minFilter===_v&&(n.minFilter=mp),new d5e(1,10,this).update(e,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(o)}}class I2 extends Gc{constructor(){super(),this.isGroup=!0,this.type="Group"}}const g5e={type:"move"};class sI{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new I2,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new I2,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Pn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Pn),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new I2,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Pn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Pn),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,s=null;const a=this._targetRay,c=this._grip,h=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(h&&e.hand){s=!0;for(const M of e.hand.values()){const D=n.getJointPose(M,r),A=this._getHandJoint(h,M);D!==null&&(A.matrix.fromArray(D.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,A.jointRadius=D.radius),A.visible=D!==null}const d=h.joints["index-finger-tip"],v=h.joints["thumb-tip"],w=d.position.distanceTo(v.position),_=.02,E=.005;h.inputState.pinching&&w>_+E?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&w<=_-E&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(g5e)))}return a!==null&&(a.visible=i!==null),c!==null&&(c.visible=o!==null),h!==null&&(h.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new I2;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class kw extends Gc{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new pg,this.environmentIntensity=1,this.environmentRotation=new pg,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class m5e extends jc{constructor(e=null,n=1,r=1,i,o,s,a,c,h=xh,d=xh,v,w){super(null,s,a,c,h,d,i,o,v,w),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const lI=new Pn,v5e=new Pn,y5e=new Oa;let uv=class{constructor(e=new Pn(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=lI.subVectors(r,n).cross(v5e.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(lI),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||y5e.getNormalMatrix(e),i=this.coplanarPoint(lI).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const E0=new _O,oT=new Pn;class xO{constructor(e=new uv,n=new uv,r=new uv,i=new uv,o=new uv,s=new uv){this.planes=[e,n,r,i,o,s]}set(e,n,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=sm){const r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],c=i[3],h=i[4],d=i[5],v=i[6],w=i[7],_=i[8],E=i[9],M=i[10],D=i[11],A=i[12],F=i[13],O=i[14],N=i[15];if(r[0].setComponents(c-o,w-h,D-_,N-A).normalize(),r[1].setComponents(c+o,w+h,D+_,N+A).normalize(),r[2].setComponents(c+s,w+d,D+E,N+F).normalize(),r[3].setComponents(c-s,w-d,D-E,N-F).normalize(),r[4].setComponents(c-a,w-v,D-M,N-O).normalize(),n===sm)r[5].setComponents(c+a,w+v,D+M,N+O).normalize();else if(n===KC)r[5].setComponents(a,v,M,O).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),E0.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),E0.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(E0)}intersectsSprite(e){return E0.center.set(0,0,0),E0.radius=.7071067811865476,E0.applyMatrix4(e.matrixWorld),this.intersectsSphere(E0)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(oT.x=i.normal.x>0?e.max.x:e.min.x,oT.y=i.normal.y>0?e.max.y:e.min.y,oT.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(oT)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class uI extends jc{constructor(e,n,r,i,o,s,a,c,h,d,v,w){super(null,s,a,c,h,d,i,o,v,w),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class _5e extends jc{constructor(e,n,r,i,o,s,a,c,h){super(e,n,r,i,o,s,a,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class bO extends jc{constructor(e,n,r,i,o,s,a,c,h,d=J1){if(d!==J1&&d!==gy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===J1&&(r=dy),r===void 0&&d===gy&&(r=py),super(null,i,o,s,a,c,d,r,h),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:xh,this.minFilter=c!==void 0?c:xh,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new _A(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class xg{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const r=this.getLengths();let i=0;const o=r.length;let s;n?s=n:s=e*r[o-1];let a=0,c=o-1,h;for(;a<=c;)if(i=Math.floor(a+(c-a)/2),h=r[i]-s,h<0)a=i+1;else if(h>0)c=i-1;else{c=i;break}if(i=c,r[i]===s)return i/(o-1);const d=r[i],w=r[i+1]-d,_=(s-d)/w;return(i+_)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),c=n||(s.isVector2?new qr:new Pn);return c.copy(a).sub(s).normalize(),c}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n=!1){const r=new Pn,i=[],o=[],s=[],a=new Pn,c=new Os;for(let _=0;_<=e;_++){const E=_/e;i[_]=this.getTangentAt(E,new Pn)}o[0]=new Pn,s[0]=new Pn;let h=Number.MAX_VALUE;const d=Math.abs(i[0].x),v=Math.abs(i[0].y),w=Math.abs(i[0].z);d<=h&&(h=d,r.set(1,0,0)),v<=h&&(h=v,r.set(0,1,0)),w<=h&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let _=1;_<=e;_++){if(o[_]=o[_-1].clone(),s[_]=s[_-1].clone(),a.crossVectors(i[_-1],i[_]),a.length()>Number.EPSILON){a.normalize();const E=Math.acos($a(i[_-1].dot(i[_]),-1,1));o[_].applyMatrix4(c.makeRotationAxis(a,E))}s[_].crossVectors(i[_],o[_])}if(n===!0){let _=Math.acos($a(o[0].dot(o[e]),-1,1));_/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(_=-_);for(let E=1;E<=e;E++)o[E].applyMatrix4(c.makeRotationAxis(i[E],_*E)),s[E].crossVectors(i[E],o[E])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class wO extends xg{constructor(e=0,n=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=c}getPoint(e,n=new qr){const r=n,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+e*o;let c=this.aX+this.xRadius*Math.cos(a),h=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),v=Math.sin(this.aRotation),w=c-this.aX,_=h-this.aY;c=w*d-_*v+this.aX,h=w*v+_*d+this.aY}return r.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class x5e extends wO{constructor(e,n,r,i,o,s){super(e,n,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function SO(){let t=0,e=0,n=0,r=0;function i(o,s,a,c){t=o,e=a,n=-3*o+3*s-2*a-c,r=2*o-2*s+a+c}return{initCatmullRom:function(o,s,a,c,h){i(s,a,h*(a-o),h*(c-s))},initNonuniformCatmullRom:function(o,s,a,c,h,d,v){let w=(s-o)/h-(a-o)/(h+d)+(a-s)/d,_=(a-s)/d-(c-s)/(d+v)+(c-a)/v;w*=d,_*=d,i(s,a,w,_)},calc:function(o){const s=o*o,a=s*o;return t+e*o+n*s+r*a}}}const sT=new Pn,cI=new SO,hI=new SO,fI=new SO;class b5e extends xg{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new Pn){const r=n,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),c=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:c===0&&a===o-1&&(a=o-2,c=1);let h,d;this.closed||a>0?h=i[(a-1)%o]:(sT.subVectors(i[0],i[1]).add(i[0]),h=sT);const v=i[a%o],w=i[(a+1)%o];if(this.closed||a+2<o?d=i[(a+2)%o]:(sT.subVectors(i[o-1],i[o-2]).add(i[o-1]),d=sT),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let E=Math.pow(h.distanceToSquared(v),_),M=Math.pow(v.distanceToSquared(w),_),D=Math.pow(w.distanceToSquared(d),_);M<1e-4&&(M=1),E<1e-4&&(E=M),D<1e-4&&(D=M),cI.initNonuniformCatmullRom(h.x,v.x,w.x,d.x,E,M,D),hI.initNonuniformCatmullRom(h.y,v.y,w.y,d.y,E,M,D),fI.initNonuniformCatmullRom(h.z,v.z,w.z,d.z,E,M,D)}else this.curveType==="catmullrom"&&(cI.initCatmullRom(h.x,v.x,w.x,d.x,this.tension),hI.initCatmullRom(h.y,v.y,w.y,d.y,this.tension),fI.initCatmullRom(h.z,v.z,w.z,d.z,this.tension));return r.set(cI.calc(c),hI.calc(c),fI.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Pn().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Tj(t,e,n,r,i){const o=(r-e)*.5,s=(i-n)*.5,a=t*t,c=t*a;return(2*n-2*r+o+s)*c+(-3*n+3*r-2*o-s)*a+o*t+n}function w5e(t,e){const n=1-t;return n*n*e}function S5e(t,e){return 2*(1-t)*t*e}function E5e(t,e){return t*t*e}function ew(t,e,n,r){return w5e(t,e)+S5e(t,n)+E5e(t,r)}function T5e(t,e){const n=1-t;return n*n*n*e}function C5e(t,e){const n=1-t;return 3*n*n*t*e}function M5e(t,e){return 3*(1-t)*t*t*e}function A5e(t,e){return t*t*t*e}function tw(t,e,n,r,i){return T5e(t,e)+C5e(t,n)+M5e(t,r)+A5e(t,i)}class PY extends xg{constructor(e=new qr,n=new qr,r=new qr,i=new qr){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new qr){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(tw(e,i.x,o.x,s.x,a.x),tw(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class R5e extends xg{constructor(e=new Pn,n=new Pn,r=new Pn,i=new Pn){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Pn){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(tw(e,i.x,o.x,s.x,a.x),tw(e,i.y,o.y,s.y,a.y),tw(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class IY extends xg{constructor(e=new qr,n=new qr){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new qr){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new qr){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class P5e extends xg{constructor(e=new Pn,n=new Pn){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new Pn){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Pn){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DY extends xg{constructor(e=new qr,n=new qr,r=new qr){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new qr){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(ew(e,i.x,o.x,s.x),ew(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class I5e extends xg{constructor(e=new Pn,n=new Pn,r=new Pn){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Pn){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(ew(e,i.x,o.x,s.x),ew(e,i.y,o.y,s.y),ew(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LY extends xg{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new qr){const r=n,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,c=i[s===0?s:s-1],h=i[s],d=i[s>i.length-2?i.length-1:s+1],v=i[s>i.length-3?i.length-1:s+2];return r.set(Tj(a,c.x,h.x,d.x,v.x),Tj(a,c.y,h.y,d.y,v.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new qr().fromArray(i))}return this}}var oN=Object.freeze({__proto__:null,ArcCurve:x5e,CatmullRomCurve3:b5e,CubicBezierCurve:PY,CubicBezierCurve3:R5e,EllipseCurve:wO,LineCurve:IY,LineCurve3:P5e,QuadraticBezierCurve:DY,QuadraticBezierCurve3:I5e,SplineCurve:LY});class D5e extends xg{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new oN[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],c=a.getLength(),h=c===0?0:1-s/c;return a.getPointAt(h,n)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(a);for(let h=0;h<c.length;h++){const d=c[h];r&&r.equals(d)||(n.push(d),r=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new oN[i.type]().fromJSON(i))}return this}}class Cj extends D5e{constructor(e){super(),this.type="Path",this.currentPoint=new qr,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new IY(this.currentPoint.clone(),new qr(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const o=new DY(this.currentPoint.clone(),new qr(e,n),new qr(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,o,s){const a=new PY(this.currentPoint.clone(),new qr(e,n),new qr(r,i),new qr(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new LY(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,o,s){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,n+c,r,i,o,s),this}absarc(e,n,r,i,o,s){return this.absellipse(e,n,r,r,i,o,s),this}ellipse(e,n,r,i,o,s,a,c){const h=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+h,n+d,r,i,o,s,a,c),this}absellipse(e,n,r,i,o,s,a,c){const h=new wO(e,n,r,i,o,s,a,c);if(this.curves.length>0){const v=h.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(h);const d=h.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class NY extends Cj{constructor(e){super(e),this.uuid=Ly(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new Cj().fromJSON(i))}return this}}class L5e{static triangulate(e,n,r=2){const i=n&&n.length,o=i?n[0]*r:e.length;let s=kY(e,0,o,r,!0);const a=[];if(!s||s.next===s.prev)return a;let c,h,d,v,w,_,E;if(i&&(s=B5e(e,n,s,r)),e.length>80*r){c=d=e[0],h=v=e[1];for(let M=r;M<o;M+=r)w=e[M],_=e[M+1],w<c&&(c=w),_<h&&(h=_),w>d&&(d=w),_>v&&(v=_);E=Math.max(d-c,v-h),E=E!==0?32767/E:0}return Ow(s,a,r,c,h,E,0),a}}function kY(t,e,n,r,i){let o,s;if(i===Y5e(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Mj(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Mj(o,t[o],t[o+1],s);return s&&xA(s,s.next)&&(Bw(s),s=s.next),s}function my(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(xA(n,n.next)||ql(n.prev,n,n.next)===0)){if(Bw(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Ow(t,e,n,r,i,o,s){if(!t)return;!s&&o&&V5e(t,r,i,o);let a=t,c,h;for(;t.prev!==t.next;){if(c=t.prev,h=t.next,o?k5e(t,r,i,o):N5e(t)){e.push(c.i/n|0),e.push(t.i/n|0),e.push(h.i/n|0),Bw(t),t=h.next,a=h.next;continue}if(t=h,t===a){s?s===1?(t=O5e(my(t),e,n),Ow(t,e,n,r,i,o,2)):s===2&&F5e(t,e,n,r,i,o):Ow(my(t),e,n,r,i,o,1);break}}}function N5e(t){const e=t.prev,n=t,r=t.next;if(ql(e,n,r)>=0)return!1;const i=e.x,o=n.x,s=r.x,a=e.y,c=n.y,h=r.y,d=i<o?i<s?i:s:o<s?o:s,v=a<c?a<h?a:h:c<h?c:h,w=i>o?i>s?i:s:o>s?o:s,_=a>c?a>h?a:h:c>h?c:h;let E=r.next;for(;E!==e;){if(E.x>=d&&E.x<=w&&E.y>=v&&E.y<=_&&B1(i,a,o,c,s,h,E.x,E.y)&&ql(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function k5e(t,e,n,r){const i=t.prev,o=t,s=t.next;if(ql(i,o,s)>=0)return!1;const a=i.x,c=o.x,h=s.x,d=i.y,v=o.y,w=s.y,_=a<c?a<h?a:h:c<h?c:h,E=d<v?d<w?d:w:v<w?v:w,M=a>c?a>h?a:h:c>h?c:h,D=d>v?d>w?d:w:v>w?v:w,A=sN(_,E,e,n,r),F=sN(M,D,e,n,r);let O=t.prevZ,N=t.nextZ;for(;O&&O.z>=A&&N&&N.z<=F;){if(O.x>=_&&O.x<=M&&O.y>=E&&O.y<=D&&O!==i&&O!==s&&B1(a,d,c,v,h,w,O.x,O.y)&&ql(O.prev,O,O.next)>=0||(O=O.prevZ,N.x>=_&&N.x<=M&&N.y>=E&&N.y<=D&&N!==i&&N!==s&&B1(a,d,c,v,h,w,N.x,N.y)&&ql(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;O&&O.z>=A;){if(O.x>=_&&O.x<=M&&O.y>=E&&O.y<=D&&O!==i&&O!==s&&B1(a,d,c,v,h,w,O.x,O.y)&&ql(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;N&&N.z<=F;){if(N.x>=_&&N.x<=M&&N.y>=E&&N.y<=D&&N!==i&&N!==s&&B1(a,d,c,v,h,w,N.x,N.y)&&ql(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function O5e(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!xA(i,o)&&OY(i,r,r.next,o)&&Fw(i,o)&&Fw(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),Bw(r),Bw(r.next),r=t=o),r=r.next}while(r!==t);return my(r)}function F5e(t,e,n,r,i,o){let s=t;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&$5e(s,a)){let c=FY(s,a);s=my(s,s.next),c=my(c,c.next),Ow(s,e,n,r,i,o,0),Ow(c,e,n,r,i,o,0);return}a=a.next}s=s.next}while(s!==t)}function B5e(t,e,n,r){const i=[];let o,s,a,c,h;for(o=0,s=e.length;o<s;o++)a=e[o]*r,c=o<s-1?e[o+1]*r:t.length,h=kY(t,a,c,r,!1),h===h.next&&(h.steiner=!0),i.push(q5e(h));for(i.sort(z5e),o=0;o<i.length;o++)n=U5e(i[o],n);return n}function z5e(t,e){return t.x-e.x}function U5e(t,e){const n=j5e(t,e);if(!n)return e;const r=FY(n,t);return my(r,r.next),my(n,n.next)}function j5e(t,e){let n=e,r=-1/0,i;const o=t.x,s=t.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const w=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(w<=o&&w>r&&(r=w,i=n.x<n.next.x?n:n.next,w===o))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,c=i.x,h=i.y;let d=1/0,v;n=i;do o>=n.x&&n.x>=c&&o!==n.x&&B1(s<h?o:r,s,c,h,s<h?r:o,s,n.x,n.y)&&(v=Math.abs(s-n.y)/(o-n.x),Fw(n,t)&&(v<d||v===d&&(n.x>i.x||n.x===i.x&&G5e(i,n)))&&(i=n,d=v)),n=n.next;while(n!==a);return i}function G5e(t,e){return ql(t.prev,t,e.prev)<0&&ql(e.next,t,t.next)<0}function V5e(t,e,n,r){let i=t;do i.z===0&&(i.z=sN(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,H5e(i)}function H5e(t){let e,n,r,i,o,s,a,c,h=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<h&&(a++,r=r.nextZ,!!r);e++);for(c=h;a>0||c>0&&r;)a!==0&&(c===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,h*=2}while(s>1);return t}function sN(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function q5e(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function B1(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function $5e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!W5e(t,e)&&(Fw(t,e)&&Fw(e,t)&&X5e(t,e)&&(ql(t.prev,t,e.prev)||ql(t,e.prev,e))||xA(t,e)&&ql(t.prev,t,t.next)>0&&ql(e.prev,e,e.next)>0)}function ql(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function xA(t,e){return t.x===e.x&&t.y===e.y}function OY(t,e,n,r){const i=uT(ql(t,e,n)),o=uT(ql(t,e,r)),s=uT(ql(n,r,t)),a=uT(ql(n,r,e));return!!(i!==o&&s!==a||i===0&&lT(t,n,e)||o===0&&lT(t,r,e)||s===0&&lT(n,t,r)||a===0&&lT(n,e,r))}function lT(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function uT(t){return t>0?1:t<0?-1:0}function W5e(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&OY(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Fw(t,e){return ql(t.prev,t,t.next)<0?ql(t,e,t.next)>=0&&ql(t,t.prev,e)>=0:ql(t,e,t.prev)<0||ql(t,t.next,e)<0}function X5e(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function FY(t,e){const n=new lN(t.i,t.x,t.y),r=new lN(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Mj(t,e,n,r){const i=new lN(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Bw(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function lN(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Y5e(t,e,n,r){let i=0;for(let o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}class ex{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return ex.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];Aj(e),Rj(r,e);let s=e.length;n.forEach(Aj);for(let c=0;c<n.length;c++)i.push(s),s+=n[c].length,Rj(r,n[c]);const a=L5e.triangulate(r,i);for(let c=0;c<a.length;c+=3)o.push(a.slice(c,c+3));return o}}function Aj(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Rj(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class EO extends qh{constructor(e=new NY([new qr(.5,.5),new qr(-.5,.5),new qr(-.5,-.5),new qr(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let a=0,c=e.length;a<c;a++){const h=e[a];s(h)}this.setAttribute("position",new Wf(i,3)),this.setAttribute("uv",new Wf(o,2)),this.computeVertexNormals();function s(a){const c=[],h=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,v=n.depth!==void 0?n.depth:1;let w=n.bevelEnabled!==void 0?n.bevelEnabled:!0,_=n.bevelThickness!==void 0?n.bevelThickness:.2,E=n.bevelSize!==void 0?n.bevelSize:_-.1,M=n.bevelOffset!==void 0?n.bevelOffset:0,D=n.bevelSegments!==void 0?n.bevelSegments:3;const A=n.extrudePath,F=n.UVGenerator!==void 0?n.UVGenerator:Z5e;let O,N=!1,H,G,W,X;A&&(O=A.getSpacedPoints(d),N=!0,w=!1,H=A.computeFrenetFrames(d,!1),G=new Pn,W=new Pn,X=new Pn),w||(D=0,_=0,E=0,M=0);const K=a.extractPoints(h);let k=K.shape;const $=K.holes;if(!ex.isClockWise(k)){k=k.reverse();for(let Ce=0,It=$.length;Ce<It;Ce++){const Ve=$[Ce];ex.isClockWise(Ve)&&($[Ce]=Ve.reverse())}}const ie=ex.triangulateShape(k,$),ae=k;for(let Ce=0,It=$.length;Ce<It;Ce++){const Ve=$[Ce];k=k.concat(Ve)}function ce(Ce,It,Ve){return It||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ce.clone().addScaledVector(It,Ve)}const se=k.length,Se=ie.length;function ye(Ce,It,Ve){let yt,Ze,wt;const Ut=Ce.x-It.x,ht=Ce.y-It.y,qt=Ve.x-Ce.x,Ye=Ve.y-Ce.y,Re=Ut*Ut+ht*ht,Pt=Ut*Ye-ht*qt;if(Math.abs(Pt)>Number.EPSILON){const Dt=Math.sqrt(Re),At=Math.sqrt(qt*qt+Ye*Ye),Bt=It.x-ht/Dt,gn=It.y+Ut/Dt,Zt=Ve.x-Ye/At,cn=Ve.y+qt/At,$t=((Zt-Bt)*Ye-(cn-gn)*qt)/(Ut*Ye-ht*qt);yt=Bt+Ut*$t-Ce.x,Ze=gn+ht*$t-Ce.y;const Et=yt*yt+Ze*Ze;if(Et<=2)return new qr(yt,Ze);wt=Math.sqrt(Et/2)}else{let Dt=!1;Ut>Number.EPSILON?qt>Number.EPSILON&&(Dt=!0):Ut<-Number.EPSILON?qt<-Number.EPSILON&&(Dt=!0):Math.sign(ht)===Math.sign(Ye)&&(Dt=!0),Dt?(yt=-ht,Ze=Ut,wt=Math.sqrt(Re)):(yt=Ut,Ze=ht,wt=Math.sqrt(Re/2))}return new qr(yt/wt,Ze/wt)}const Te=[];for(let Ce=0,It=ae.length,Ve=It-1,yt=Ce+1;Ce<It;Ce++,Ve++,yt++)Ve===It&&(Ve=0),yt===It&&(yt=0),Te[Ce]=ye(ae[Ce],ae[Ve],ae[yt]);const pe=[];let Ie,me=Te.concat();for(let Ce=0,It=$.length;Ce<It;Ce++){const Ve=$[Ce];Ie=[];for(let yt=0,Ze=Ve.length,wt=Ze-1,Ut=yt+1;yt<Ze;yt++,wt++,Ut++)wt===Ze&&(wt=0),Ut===Ze&&(Ut=0),Ie[yt]=ye(Ve[yt],Ve[wt],Ve[Ut]);pe.push(Ie),me=me.concat(Ie)}for(let Ce=0;Ce<D;Ce++){const It=Ce/D,Ve=_*Math.cos(It*Math.PI/2),yt=E*Math.sin(It*Math.PI/2)+M;for(let Ze=0,wt=ae.length;Ze<wt;Ze++){const Ut=ce(ae[Ze],Te[Ze],yt);We(Ut.x,Ut.y,-Ve)}for(let Ze=0,wt=$.length;Ze<wt;Ze++){const Ut=$[Ze];Ie=pe[Ze];for(let ht=0,qt=Ut.length;ht<qt;ht++){const Ye=ce(Ut[ht],Ie[ht],yt);We(Ye.x,Ye.y,-Ve)}}}const xe=E+M;for(let Ce=0;Ce<se;Ce++){const It=w?ce(k[Ce],me[Ce],xe):k[Ce];N?(W.copy(H.normals[0]).multiplyScalar(It.x),G.copy(H.binormals[0]).multiplyScalar(It.y),X.copy(O[0]).add(W).add(G),We(X.x,X.y,X.z)):We(It.x,It.y,0)}for(let Ce=1;Ce<=d;Ce++)for(let It=0;It<se;It++){const Ve=w?ce(k[It],me[It],xe):k[It];N?(W.copy(H.normals[Ce]).multiplyScalar(Ve.x),G.copy(H.binormals[Ce]).multiplyScalar(Ve.y),X.copy(O[Ce]).add(W).add(G),We(X.x,X.y,X.z)):We(Ve.x,Ve.y,v/d*Ce)}for(let Ce=D-1;Ce>=0;Ce--){const It=Ce/D,Ve=_*Math.cos(It*Math.PI/2),yt=E*Math.sin(It*Math.PI/2)+M;for(let Ze=0,wt=ae.length;Ze<wt;Ze++){const Ut=ce(ae[Ze],Te[Ze],yt);We(Ut.x,Ut.y,v+Ve)}for(let Ze=0,wt=$.length;Ze<wt;Ze++){const Ut=$[Ze];Ie=pe[Ze];for(let ht=0,qt=Ut.length;ht<qt;ht++){const Ye=ce(Ut[ht],Ie[ht],yt);N?We(Ye.x,Ye.y+O[d-1].y,O[d-1].x+Ve):We(Ye.x,Ye.y,v+Ve)}}}ve(),Ee();function ve(){const Ce=i.length/3;if(w){let It=0,Ve=se*It;for(let yt=0;yt<Se;yt++){const Ze=ie[yt];Ae(Ze[2]+Ve,Ze[1]+Ve,Ze[0]+Ve)}It=d+D*2,Ve=se*It;for(let yt=0;yt<Se;yt++){const Ze=ie[yt];Ae(Ze[0]+Ve,Ze[1]+Ve,Ze[2]+Ve)}}else{for(let It=0;It<Se;It++){const Ve=ie[It];Ae(Ve[2],Ve[1],Ve[0])}for(let It=0;It<Se;It++){const Ve=ie[It];Ae(Ve[0]+se*d,Ve[1]+se*d,Ve[2]+se*d)}}r.addGroup(Ce,i.length/3-Ce,0)}function Ee(){const Ce=i.length/3;let It=0;De(ae,It),It+=ae.length;for(let Ve=0,yt=$.length;Ve<yt;Ve++){const Ze=$[Ve];De(Ze,It),It+=Ze.length}r.addGroup(Ce,i.length/3-Ce,1)}function De(Ce,It){let Ve=Ce.length;for(;--Ve>=0;){const yt=Ve;let Ze=Ve-1;Ze<0&&(Ze=Ce.length-1);for(let wt=0,Ut=d+D*2;wt<Ut;wt++){const ht=se*wt,qt=se*(wt+1),Ye=It+yt+ht,Re=It+Ze+ht,Pt=It+Ze+qt,Dt=It+yt+qt;ut(Ye,Re,Pt,Dt)}}}function We(Ce,It,Ve){c.push(Ce),c.push(It),c.push(Ve)}function Ae(Ce,It,Ve){pt(Ce),pt(It),pt(Ve);const yt=i.length/3,Ze=F.generateTopUV(r,i,yt-3,yt-2,yt-1);st(Ze[0]),st(Ze[1]),st(Ze[2])}function ut(Ce,It,Ve,yt){pt(Ce),pt(It),pt(yt),pt(It),pt(Ve),pt(yt);const Ze=i.length/3,wt=F.generateSideWallUV(r,i,Ze-6,Ze-3,Ze-2,Ze-1);st(wt[0]),st(wt[1]),st(wt[3]),st(wt[1]),st(wt[2]),st(wt[3])}function pt(Ce){i.push(c[Ce*3+0]),i.push(c[Ce*3+1]),i.push(c[Ce*3+2])}function st(Ce){o.push(Ce.x),o.push(Ce.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return K5e(n,r,e)}static fromJSON(e,n){const r=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=n[e.shapes[o]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new oN[i.type]().fromJSON(i)),new EO(r,e.options)}}const Z5e={generateTopUV:function(t,e,n,r,i){const o=e[n*3],s=e[n*3+1],a=e[r*3],c=e[r*3+1],h=e[i*3],d=e[i*3+1];return[new qr(o,s),new qr(a,c),new qr(h,d)]},generateSideWallUV:function(t,e,n,r,i,o){const s=e[n*3],a=e[n*3+1],c=e[n*3+2],h=e[r*3],d=e[r*3+1],v=e[r*3+2],w=e[i*3],_=e[i*3+1],E=e[i*3+2],M=e[o*3],D=e[o*3+1],A=e[o*3+2];return Math.abs(a-d)<Math.abs(s-h)?[new qr(s,1-c),new qr(h,1-v),new qr(w,1-E),new qr(M,1-A)]:[new qr(a,1-c),new qr(d,1-v),new qr(_,1-E),new qr(D,1-A)]}};function K5e(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class bA extends qh{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,s=n/2,a=Math.floor(r),c=Math.floor(i),h=a+1,d=c+1,v=e/a,w=n/c,_=[],E=[],M=[],D=[];for(let A=0;A<d;A++){const F=A*w-s;for(let O=0;O<h;O++){const N=O*v-o;E.push(N,-F,0),M.push(0,0,1),D.push(O/a),D.push(1-A/c)}}for(let A=0;A<c;A++)for(let F=0;F<a;F++){const O=F+h*A,N=F+h*(A+1),H=F+1+h*(A+1),G=F+1+h*A;_.push(O,N,G),_.push(N,H,G)}this.setIndex(_),this.setAttribute("position",new Wf(E,3)),this.setAttribute("normal",new Wf(M,3)),this.setAttribute("uv",new Wf(D,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bA(e.width,e.height,e.widthSegments,e.heightSegments)}}class J5e extends ic{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class QC extends qx{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ji(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vO,this.normalScale=new qr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pg,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Q5e extends QC{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new qr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $a(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ji(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ji(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ji(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class e3e extends qx{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vO,this.normalScale=new qr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class t3e extends qx{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=vAe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class n3e extends qx{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class TO extends Gc{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ji(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class r3e extends TO{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gc.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ji(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const dI=new Os,Pj=new Pn,Ij=new Pn;class i3e{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qr(512,512),this.map=null,this.mapPass=null,this.matrix=new Os,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xO,this._frameExtents=new qr(1,1),this._viewportCount=1,this._viewports=[new iu(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;Pj.setFromMatrixPosition(e.matrixWorld),n.position.copy(Pj),Ij.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Ij),n.updateMatrixWorld(),dI.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dI),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(dI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class CO extends AY{constructor(e=-1,n=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+n,c=i-n;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=h*this.view.offsetX,s=o+h*this.view.width,a-=d*this.view.offsetY,c=a-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class a3e extends i3e{constructor(){super(new CO(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ZT extends TO{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gc.DEFAULT_UP),this.updateMatrix(),this.target=new Gc,this.shadow=new a3e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class o3e extends TO{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class s3e extends Sd{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class l3e{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Dj(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=Dj();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function Dj(){return performance.now()}const MO="\\[\\]\\.:\\/",u3e=new RegExp("["+MO+"]","g"),AO="[^"+MO+"]",c3e="[^"+MO.replace("\\.","")+"]",h3e=/((?:WC+[\/:])*)/.source.replace("WC",AO),f3e=/(WCOD+)?/.source.replace("WCOD",c3e),d3e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",AO),p3e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",AO),g3e=new RegExp("^"+h3e+f3e+d3e+p3e+"$"),m3e=["material","materials","bones","map"];class v3e{constructor(e,n,r){const i=r||qo.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class qo{constructor(e,n,r){this.path=n,this.parsedPath=r||qo.parseTrackName(n),this.node=qo.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new qo.Composite(e,n,r):new qo(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(u3e,"")}static parseTrackName(e){const n=g3e.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);m3e.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===n||a.uuid===n)return a;const c=r(a.children);if(c)return c}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(e||(e=qo.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let h=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===h){h=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const s=e[i];if(s===void 0){const h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qo.Composite=v3e;qo.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qo.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qo.prototype.GetterByBindingType=[qo.prototype._getValue_direct,qo.prototype._getValue_array,qo.prototype._getValue_arrayElement,qo.prototype._getValue_toArray];qo.prototype.SetterByBindingTypeAndVersioning=[[qo.prototype._setValue_direct,qo.prototype._setValue_direct_setNeedsUpdate,qo.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qo.prototype._setValue_array,qo.prototype._setValue_array_setNeedsUpdate,qo.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qo.prototype._setValue_arrayElement,qo.prototype._setValue_arrayElement_setNeedsUpdate,qo.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qo.prototype._setValue_fromArray,qo.prototype._setValue_fromArray_setNeedsUpdate,qo.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Lj{constructor(e=1,n=0,r=0){this.radius=e,this.phi=n,this.theta=r}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=$a(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos($a(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class y3e extends Dy{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Nj(t,e,n,r){const i=_3e(r);switch(n){case dY:return t*e;case gY:return t*e;case mY:return t*e*2;case dO:return t*e/i.components*i.byteLength;case pO:return t*e/i.components*i.byteLength;case vY:return t*e*2/i.components*i.byteLength;case gO:return t*e*2/i.components*i.byteLength;case pY:return t*e*3/i.components*i.byteLength;case Td:return t*e*4/i.components*i.byteLength;case mO:return t*e*4/i.components*i.byteLength;case qT:case $T:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case WT:case XT:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case kL:case FL:return Math.max(t,16)*Math.max(e,8)/4;case NL:case OL:return Math.max(t,8)*Math.max(e,8)/2;case BL:case zL:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case UL:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case jL:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case GL:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case VL:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case HL:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case qL:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case $L:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case WL:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case XL:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case YL:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case ZL:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case KL:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case JL:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case QL:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case eN:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case YT:case tN:case nN:return Math.ceil(t/4)*Math.ceil(e/4)*16;case yY:case rN:return Math.ceil(t/4)*Math.ceil(e/4)*8;case iN:case aN:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function _3e(t){switch(t){case Sm:case cY:return{byteLength:1,components:1};case Iw:case hY:case yp:return{byteLength:2,components:1};case hO:case fO:return{byteLength:2,components:4};case dy:case cO:case ig:return{byteLength:4,components:1};case fY:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:vA}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=vA);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function BY(){let t=null,e=!1,n=null,r=null;function i(o,s){n(o,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function x3e(t){const e=new WeakMap;function n(a,c){const h=a.array,d=a.usage,v=h.byteLength,w=t.createBuffer();t.bindBuffer(c,w),t.bufferData(c,h,d),a.onUploadCallback();let _;if(h instanceof Float32Array)_=t.FLOAT;else if(h instanceof Uint16Array)a.isFloat16BufferAttribute?_=t.HALF_FLOAT:_=t.UNSIGNED_SHORT;else if(h instanceof Int16Array)_=t.SHORT;else if(h instanceof Uint32Array)_=t.UNSIGNED_INT;else if(h instanceof Int32Array)_=t.INT;else if(h instanceof Int8Array)_=t.BYTE;else if(h instanceof Uint8Array)_=t.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)_=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:w,type:_,bytesPerElement:h.BYTES_PER_ELEMENT,version:a.version,size:v}}function r(a,c,h){const d=c.array,v=c.updateRanges;if(t.bindBuffer(h,a),v.length===0)t.bufferSubData(h,0,d);else{v.sort((_,E)=>_.start-E.start);let w=0;for(let _=1;_<v.length;_++){const E=v[w],M=v[_];M.start<=E.start+E.count+1?E.count=Math.max(E.count,M.start+M.count-E.start):(++w,v[w]=M)}v.length=w+1;for(let _=0,E=v.length;_<E;_++){const M=v[_];t.bufferSubData(h,M.start*d.BYTES_PER_ELEMENT,d,M.start,M.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);c&&(t.deleteBuffer(c.buffer),e.delete(a))}function s(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const d=e.get(a);(!d||d.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const h=e.get(a);if(h===void 0)e.set(a,n(a,c));else if(h.version<a.version){if(h.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(h.buffer,a,c),h.version=a.version}}return{get:i,remove:o,update:s}}var b3e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,w3e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,S3e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,E3e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,T3e=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,C3e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,M3e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,A3e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,R3e=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,P3e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,I3e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,D3e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,L3e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,N3e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,k3e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,O3e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,F3e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,B3e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,z3e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,U3e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,j3e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,G3e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,V3e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,H3e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,q3e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$3e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,W3e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,X3e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Y3e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Z3e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,K3e="gl_FragColor = linearToOutputTexel( gl_FragColor );",J3e=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Q3e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,eRe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,tRe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,nRe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,rRe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,iRe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,aRe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,oRe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,sRe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,lRe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,uRe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cRe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,hRe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,fRe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,dRe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,pRe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,gRe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,mRe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,vRe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,yRe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,_Re=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xRe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,bRe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,wRe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,SRe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,ERe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,TRe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,CRe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,MRe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ARe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,RRe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,PRe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,IRe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,DRe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,LRe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,NRe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,kRe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,ORe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,FRe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,BRe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,zRe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,URe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jRe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GRe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,VRe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,HRe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,qRe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,$Re=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,WRe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,XRe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,YRe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ZRe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,KRe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,JRe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,QRe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ePe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,tPe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,nPe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,rPe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,iPe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,aPe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,oPe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,sPe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,lPe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,uPe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cPe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,hPe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fPe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dPe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,pPe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,gPe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,mPe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vPe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yPe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,_Pe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const xPe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,bPe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,SPe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TPe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CPe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,MPe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,APe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,RPe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,PPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,IPe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DPe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LPe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NPe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,kPe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OPe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FPe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BPe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zPe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UPe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,jPe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,GPe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VPe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HPe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,qPe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$Pe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WPe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XPe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,YPe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZPe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KPe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,JPe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QPe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ya={alphahash_fragment:b3e,alphahash_pars_fragment:w3e,alphamap_fragment:S3e,alphamap_pars_fragment:E3e,alphatest_fragment:T3e,alphatest_pars_fragment:C3e,aomap_fragment:M3e,aomap_pars_fragment:A3e,batching_pars_vertex:R3e,batching_vertex:P3e,begin_vertex:I3e,beginnormal_vertex:D3e,bsdfs:L3e,iridescence_fragment:N3e,bumpmap_pars_fragment:k3e,clipping_planes_fragment:O3e,clipping_planes_pars_fragment:F3e,clipping_planes_pars_vertex:B3e,clipping_planes_vertex:z3e,color_fragment:U3e,color_pars_fragment:j3e,color_pars_vertex:G3e,color_vertex:V3e,common:H3e,cube_uv_reflection_fragment:q3e,defaultnormal_vertex:$3e,displacementmap_pars_vertex:W3e,displacementmap_vertex:X3e,emissivemap_fragment:Y3e,emissivemap_pars_fragment:Z3e,colorspace_fragment:K3e,colorspace_pars_fragment:J3e,envmap_fragment:Q3e,envmap_common_pars_fragment:eRe,envmap_pars_fragment:tRe,envmap_pars_vertex:nRe,envmap_physical_pars_fragment:dRe,envmap_vertex:rRe,fog_vertex:iRe,fog_pars_vertex:aRe,fog_fragment:oRe,fog_pars_fragment:sRe,gradientmap_pars_fragment:lRe,lightmap_pars_fragment:uRe,lights_lambert_fragment:cRe,lights_lambert_pars_fragment:hRe,lights_pars_begin:fRe,lights_toon_fragment:pRe,lights_toon_pars_fragment:gRe,lights_phong_fragment:mRe,lights_phong_pars_fragment:vRe,lights_physical_fragment:yRe,lights_physical_pars_fragment:_Re,lights_fragment_begin:xRe,lights_fragment_maps:bRe,lights_fragment_end:wRe,logdepthbuf_fragment:SRe,logdepthbuf_pars_fragment:ERe,logdepthbuf_pars_vertex:TRe,logdepthbuf_vertex:CRe,map_fragment:MRe,map_pars_fragment:ARe,map_particle_fragment:RRe,map_particle_pars_fragment:PRe,metalnessmap_fragment:IRe,metalnessmap_pars_fragment:DRe,morphinstance_vertex:LRe,morphcolor_vertex:NRe,morphnormal_vertex:kRe,morphtarget_pars_vertex:ORe,morphtarget_vertex:FRe,normal_fragment_begin:BRe,normal_fragment_maps:zRe,normal_pars_fragment:URe,normal_pars_vertex:jRe,normal_vertex:GRe,normalmap_pars_fragment:VRe,clearcoat_normal_fragment_begin:HRe,clearcoat_normal_fragment_maps:qRe,clearcoat_pars_fragment:$Re,iridescence_pars_fragment:WRe,opaque_fragment:XRe,packing:YRe,premultiplied_alpha_fragment:ZRe,project_vertex:KRe,dithering_fragment:JRe,dithering_pars_fragment:QRe,roughnessmap_fragment:ePe,roughnessmap_pars_fragment:tPe,shadowmap_pars_fragment:nPe,shadowmap_pars_vertex:rPe,shadowmap_vertex:iPe,shadowmask_pars_fragment:aPe,skinbase_vertex:oPe,skinning_pars_vertex:sPe,skinning_vertex:lPe,skinnormal_vertex:uPe,specularmap_fragment:cPe,specularmap_pars_fragment:hPe,tonemapping_fragment:fPe,tonemapping_pars_fragment:dPe,transmission_fragment:pPe,transmission_pars_fragment:gPe,uv_pars_fragment:mPe,uv_pars_vertex:vPe,uv_vertex:yPe,worldpos_vertex:_Pe,background_vert:xPe,background_frag:bPe,backgroundCube_vert:wPe,backgroundCube_frag:SPe,cube_vert:EPe,cube_frag:TPe,depth_vert:CPe,depth_frag:MPe,distanceRGBA_vert:APe,distanceRGBA_frag:RPe,equirect_vert:PPe,equirect_frag:IPe,linedashed_vert:DPe,linedashed_frag:LPe,meshbasic_vert:NPe,meshbasic_frag:kPe,meshlambert_vert:OPe,meshlambert_frag:FPe,meshmatcap_vert:BPe,meshmatcap_frag:zPe,meshnormal_vert:UPe,meshnormal_frag:jPe,meshphong_vert:GPe,meshphong_frag:VPe,meshphysical_vert:HPe,meshphysical_frag:qPe,meshtoon_vert:$Pe,meshtoon_frag:WPe,points_vert:XPe,points_frag:YPe,shadow_vert:ZPe,shadow_frag:KPe,sprite_vert:JPe,sprite_frag:QPe},Si={common:{diffuse:{value:new Ji(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Oa},alphaMap:{value:null},alphaMapTransform:{value:new Oa},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Oa}},envmap:{envMap:{value:null},envMapRotation:{value:new Oa},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Oa}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Oa}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Oa},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Oa},normalScale:{value:new qr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Oa},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Oa}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Oa}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Oa}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ji(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ji(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Oa},alphaTest:{value:0},uvTransform:{value:new Oa}},sprite:{diffuse:{value:new Ji(16777215)},opacity:{value:1},center:{value:new qr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Oa},alphaMap:{value:null},alphaMapTransform:{value:new Oa},alphaTest:{value:0}}},Jp={basic:{uniforms:Bh([Si.common,Si.specularmap,Si.envmap,Si.aomap,Si.lightmap,Si.fog]),vertexShader:Ya.meshbasic_vert,fragmentShader:Ya.meshbasic_frag},lambert:{uniforms:Bh([Si.common,Si.specularmap,Si.envmap,Si.aomap,Si.lightmap,Si.emissivemap,Si.bumpmap,Si.normalmap,Si.displacementmap,Si.fog,Si.lights,{emissive:{value:new Ji(0)}}]),vertexShader:Ya.meshlambert_vert,fragmentShader:Ya.meshlambert_frag},phong:{uniforms:Bh([Si.common,Si.specularmap,Si.envmap,Si.aomap,Si.lightmap,Si.emissivemap,Si.bumpmap,Si.normalmap,Si.displacementmap,Si.fog,Si.lights,{emissive:{value:new Ji(0)},specular:{value:new Ji(1118481)},shininess:{value:30}}]),vertexShader:Ya.meshphong_vert,fragmentShader:Ya.meshphong_frag},standard:{uniforms:Bh([Si.common,Si.envmap,Si.aomap,Si.lightmap,Si.emissivemap,Si.bumpmap,Si.normalmap,Si.displacementmap,Si.roughnessmap,Si.metalnessmap,Si.fog,Si.lights,{emissive:{value:new Ji(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ya.meshphysical_vert,fragmentShader:Ya.meshphysical_frag},toon:{uniforms:Bh([Si.common,Si.aomap,Si.lightmap,Si.emissivemap,Si.bumpmap,Si.normalmap,Si.displacementmap,Si.gradientmap,Si.fog,Si.lights,{emissive:{value:new Ji(0)}}]),vertexShader:Ya.meshtoon_vert,fragmentShader:Ya.meshtoon_frag},matcap:{uniforms:Bh([Si.common,Si.bumpmap,Si.normalmap,Si.displacementmap,Si.fog,{matcap:{value:null}}]),vertexShader:Ya.meshmatcap_vert,fragmentShader:Ya.meshmatcap_frag},points:{uniforms:Bh([Si.points,Si.fog]),vertexShader:Ya.points_vert,fragmentShader:Ya.points_frag},dashed:{uniforms:Bh([Si.common,Si.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ya.linedashed_vert,fragmentShader:Ya.linedashed_frag},depth:{uniforms:Bh([Si.common,Si.displacementmap]),vertexShader:Ya.depth_vert,fragmentShader:Ya.depth_frag},normal:{uniforms:Bh([Si.common,Si.bumpmap,Si.normalmap,Si.displacementmap,{opacity:{value:1}}]),vertexShader:Ya.meshnormal_vert,fragmentShader:Ya.meshnormal_frag},sprite:{uniforms:Bh([Si.sprite,Si.fog]),vertexShader:Ya.sprite_vert,fragmentShader:Ya.sprite_frag},background:{uniforms:{uvTransform:{value:new Oa},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ya.background_vert,fragmentShader:Ya.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Oa}},vertexShader:Ya.backgroundCube_vert,fragmentShader:Ya.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ya.cube_vert,fragmentShader:Ya.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ya.equirect_vert,fragmentShader:Ya.equirect_frag},distanceRGBA:{uniforms:Bh([Si.common,Si.displacementmap,{referencePosition:{value:new Pn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ya.distanceRGBA_vert,fragmentShader:Ya.distanceRGBA_frag},shadow:{uniforms:Bh([Si.lights,Si.fog,{color:{value:new Ji(0)},opacity:{value:1}}]),vertexShader:Ya.shadow_vert,fragmentShader:Ya.shadow_frag}};Jp.physical={uniforms:Bh([Jp.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Oa},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Oa},clearcoatNormalScale:{value:new qr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Oa},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Oa},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Oa},sheen:{value:0},sheenColor:{value:new Ji(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Oa},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Oa},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Oa},transmissionSamplerSize:{value:new qr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Oa},attenuationDistance:{value:0},attenuationColor:{value:new Ji(0)},specularColor:{value:new Ji(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Oa},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Oa},anisotropyVector:{value:new qr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Oa}}]),vertexShader:Ya.meshphysical_vert,fragmentShader:Ya.meshphysical_frag};const cT={r:0,b:0,g:0},T0=new pg,eIe=new Os;function tIe(t,e,n,r,i,o,s){const a=new Ji(0);let c=o===!0?0:1,h,d,v=null,w=0,_=null;function E(O){let N=O.isScene===!0?O.background:null;return N&&N.isTexture&&(N=(O.backgroundBlurriness>0?n:e).get(N)),N}function M(O){let N=!1;const H=E(O);H===null?A(a,c):H&&H.isColor&&(A(H,1),N=!0);const G=t.xr.getEnvironmentBlendMode();G==="additive"?r.buffers.color.setClear(0,0,0,1,s):G==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||N)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function D(O,N){const H=E(N);H&&(H.isCubeTexture||H.mapping===yA)?(d===void 0&&(d=new Uc(new Ny(1,1,1),new ic({name:"BackgroundCubeMaterial",uniforms:Ex(Jp.backgroundCube.uniforms),vertexShader:Jp.backgroundCube.vertexShader,fragmentShader:Jp.backgroundCube.fragmentShader,side:vf,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(G,W,X){this.matrixWorld.copyPosition(X.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),T0.copy(N.backgroundRotation),T0.x*=-1,T0.y*=-1,T0.z*=-1,H.isCubeTexture&&H.isRenderTargetTexture===!1&&(T0.y*=-1,T0.z*=-1),d.material.uniforms.envMap.value=H,d.material.uniforms.flipEnvMap.value=H.isCubeTexture&&H.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=N.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(eIe.makeRotationFromEuler(T0)),d.material.toneMapped=Po.getTransfer(H.colorSpace)!==xs,(v!==H||w!==H.version||_!==t.toneMapping)&&(d.material.needsUpdate=!0,v=H,w=H.version,_=t.toneMapping),d.layers.enableAll(),O.unshift(d,d.geometry,d.material,0,0,null)):H&&H.isTexture&&(h===void 0&&(h=new Uc(new bA(2,2),new ic({name:"BackgroundMaterial",uniforms:Ex(Jp.background.uniforms),vertexShader:Jp.background.vertexShader,fragmentShader:Jp.background.fragmentShader,side:kv,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(h)),h.material.uniforms.t2D.value=H,h.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,h.material.toneMapped=Po.getTransfer(H.colorSpace)!==xs,H.matrixAutoUpdate===!0&&H.updateMatrix(),h.material.uniforms.uvTransform.value.copy(H.matrix),(v!==H||w!==H.version||_!==t.toneMapping)&&(h.material.needsUpdate=!0,v=H,w=H.version,_=t.toneMapping),h.layers.enableAll(),O.unshift(h,h.geometry,h.material,0,0,null))}function A(O,N){O.getRGB(cT,MY(t)),r.buffers.color.setClear(cT.r,cT.g,cT.b,N,s)}function F(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return a},setClearColor:function(O,N=1){a.set(O),c=N,A(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(O){c=O,A(a,c)},render:M,addToRenderList:D,dispose:F}}function nIe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=w(null);let o=i,s=!1;function a(k,$,Q,ie,ae){let ce=!1;const se=v(ie,Q,$);o!==se&&(o=se,h(o.object)),ce=_(k,ie,Q,ae),ce&&E(k,ie,Q,ae),ae!==null&&e.update(ae,t.ELEMENT_ARRAY_BUFFER),(ce||s)&&(s=!1,N(k,$,Q,ie),ae!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(ae).buffer))}function c(){return t.createVertexArray()}function h(k){return t.bindVertexArray(k)}function d(k){return t.deleteVertexArray(k)}function v(k,$,Q){const ie=Q.wireframe===!0;let ae=r[k.id];ae===void 0&&(ae={},r[k.id]=ae);let ce=ae[$.id];ce===void 0&&(ce={},ae[$.id]=ce);let se=ce[ie];return se===void 0&&(se=w(c()),ce[ie]=se),se}function w(k){const $=[],Q=[],ie=[];for(let ae=0;ae<n;ae++)$[ae]=0,Q[ae]=0,ie[ae]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:Q,attributeDivisors:ie,object:k,attributes:{},index:null}}function _(k,$,Q,ie){const ae=o.attributes,ce=$.attributes;let se=0;const Se=Q.getAttributes();for(const ye in Se)if(Se[ye].location>=0){const pe=ae[ye];let Ie=ce[ye];if(Ie===void 0&&(ye==="instanceMatrix"&&k.instanceMatrix&&(Ie=k.instanceMatrix),ye==="instanceColor"&&k.instanceColor&&(Ie=k.instanceColor)),pe===void 0||pe.attribute!==Ie||Ie&&pe.data!==Ie.data)return!0;se++}return o.attributesNum!==se||o.index!==ie}function E(k,$,Q,ie){const ae={},ce=$.attributes;let se=0;const Se=Q.getAttributes();for(const ye in Se)if(Se[ye].location>=0){let pe=ce[ye];pe===void 0&&(ye==="instanceMatrix"&&k.instanceMatrix&&(pe=k.instanceMatrix),ye==="instanceColor"&&k.instanceColor&&(pe=k.instanceColor));const Ie={};Ie.attribute=pe,pe&&pe.data&&(Ie.data=pe.data),ae[ye]=Ie,se++}o.attributes=ae,o.attributesNum=se,o.index=ie}function M(){const k=o.newAttributes;for(let $=0,Q=k.length;$<Q;$++)k[$]=0}function D(k){A(k,0)}function A(k,$){const Q=o.newAttributes,ie=o.enabledAttributes,ae=o.attributeDivisors;Q[k]=1,ie[k]===0&&(t.enableVertexAttribArray(k),ie[k]=1),ae[k]!==$&&(t.vertexAttribDivisor(k,$),ae[k]=$)}function F(){const k=o.newAttributes,$=o.enabledAttributes;for(let Q=0,ie=$.length;Q<ie;Q++)$[Q]!==k[Q]&&(t.disableVertexAttribArray(Q),$[Q]=0)}function O(k,$,Q,ie,ae,ce,se){se===!0?t.vertexAttribIPointer(k,$,Q,ae,ce):t.vertexAttribPointer(k,$,Q,ie,ae,ce)}function N(k,$,Q,ie){M();const ae=ie.attributes,ce=Q.getAttributes(),se=$.defaultAttributeValues;for(const Se in ce){const ye=ce[Se];if(ye.location>=0){let Te=ae[Se];if(Te===void 0&&(Se==="instanceMatrix"&&k.instanceMatrix&&(Te=k.instanceMatrix),Se==="instanceColor"&&k.instanceColor&&(Te=k.instanceColor)),Te!==void 0){const pe=Te.normalized,Ie=Te.itemSize,me=e.get(Te);if(me===void 0)continue;const xe=me.buffer,ve=me.type,Ee=me.bytesPerElement,De=ve===t.INT||ve===t.UNSIGNED_INT||Te.gpuType===cO;if(Te.isInterleavedBufferAttribute){const We=Te.data,Ae=We.stride,ut=Te.offset;if(We.isInstancedInterleavedBuffer){for(let pt=0;pt<ye.locationSize;pt++)A(ye.location+pt,We.meshPerAttribute);k.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=We.meshPerAttribute*We.count)}else for(let pt=0;pt<ye.locationSize;pt++)D(ye.location+pt);t.bindBuffer(t.ARRAY_BUFFER,xe);for(let pt=0;pt<ye.locationSize;pt++)O(ye.location+pt,Ie/ye.locationSize,ve,pe,Ae*Ee,(ut+Ie/ye.locationSize*pt)*Ee,De)}else{if(Te.isInstancedBufferAttribute){for(let We=0;We<ye.locationSize;We++)A(ye.location+We,Te.meshPerAttribute);k.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let We=0;We<ye.locationSize;We++)D(ye.location+We);t.bindBuffer(t.ARRAY_BUFFER,xe);for(let We=0;We<ye.locationSize;We++)O(ye.location+We,Ie/ye.locationSize,ve,pe,Ie*Ee,Ie/ye.locationSize*We*Ee,De)}}else if(se!==void 0){const pe=se[Se];if(pe!==void 0)switch(pe.length){case 2:t.vertexAttrib2fv(ye.location,pe);break;case 3:t.vertexAttrib3fv(ye.location,pe);break;case 4:t.vertexAttrib4fv(ye.location,pe);break;default:t.vertexAttrib1fv(ye.location,pe)}}}}F()}function H(){X();for(const k in r){const $=r[k];for(const Q in $){const ie=$[Q];for(const ae in ie)d(ie[ae].object),delete ie[ae];delete $[Q]}delete r[k]}}function G(k){if(r[k.id]===void 0)return;const $=r[k.id];for(const Q in $){const ie=$[Q];for(const ae in ie)d(ie[ae].object),delete ie[ae];delete $[Q]}delete r[k.id]}function W(k){for(const $ in r){const Q=r[$];if(Q[k.id]===void 0)continue;const ie=Q[k.id];for(const ae in ie)d(ie[ae].object),delete ie[ae];delete Q[k.id]}}function X(){K(),s=!0,o!==i&&(o=i,h(o.object))}function K(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:X,resetDefaultState:K,dispose:H,releaseStatesOfGeometry:G,releaseStatesOfProgram:W,initAttributes:M,enableAttribute:D,disableUnusedAttributes:F}}function rIe(t,e,n){let r;function i(h){r=h}function o(h,d){t.drawArrays(r,h,d),n.update(d,r,1)}function s(h,d,v){v!==0&&(t.drawArraysInstanced(r,h,d,v),n.update(d,r,v))}function a(h,d,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,h,0,d,0,v);let _=0;for(let E=0;E<v;E++)_+=d[E];n.update(_,r,1)}function c(h,d,v,w){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let E=0;E<h.length;E++)s(h[E],d[E],w[E]);else{_.multiDrawArraysInstancedWEBGL(r,h,0,d,0,w,0,v);let E=0;for(let M=0;M<v;M++)E+=d[M]*w[M];n.update(E,r,1)}}this.setMode=i,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function iIe(t,e,n,r){let i;function o(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const W=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(W.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(W){return!(W!==Td&&r.convert(W)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(W){const X=W===yp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(W!==Sm&&r.convert(W)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&W!==ig&&!X)}function c(W){if(W==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";W="mediump"}return W==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=n.precision!==void 0?n.precision:"highp";const d=c(h);d!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",d,"instead."),h=d);const v=n.logarithmicDepthBuffer===!0,w=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),_=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),E=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=t.getParameter(t.MAX_TEXTURE_SIZE),D=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),A=t.getParameter(t.MAX_VERTEX_ATTRIBS),F=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),O=t.getParameter(t.MAX_VARYING_VECTORS),N=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),H=E>0,G=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:a,precision:h,logarithmicDepthBuffer:v,reverseDepthBuffer:w,maxTextures:_,maxVertexTextures:E,maxTextureSize:M,maxCubemapSize:D,maxAttributes:A,maxVertexUniforms:F,maxVaryings:O,maxFragmentUniforms:N,vertexTextures:H,maxSamples:G}}function aIe(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new uv,a=new Oa,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(v,w){const _=v.length!==0||w||r!==0||i;return i=w,r=v.length,_},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(v,w){n=d(v,w,0)},this.setState=function(v,w,_){const E=v.clippingPlanes,M=v.clipIntersection,D=v.clipShadows,A=t.get(v);if(!i||E===null||E.length===0||o&&!D)o?d(null):h();else{const F=o?0:r,O=F*4;let N=A.clippingState||null;c.value=N,N=d(E,w,O,_);for(let H=0;H!==O;++H)N[H]=n[H];A.clippingState=N,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=F}};function h(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(v,w,_,E){const M=v!==null?v.length:0;let D=null;if(M!==0){if(D=c.value,E!==!0||D===null){const A=_+M*4,F=w.matrixWorldInverse;a.getNormalMatrix(F),(D===null||D.length<A)&&(D=new Float32Array(A));for(let O=0,N=_;O!==M;++O,N+=4)s.copy(v[O]).applyMatrix4(F,a),s.normal.toArray(D,N),D[N+3]=s.constant}c.value=D,c.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,D}}function oIe(t){let e=new WeakMap;function n(s,a){return a===XC?s.mapping=xx:a===LL&&(s.mapping=bx),s}function r(s){if(s&&s.isTexture){const a=s.mapping;if(a===XC||a===LL)if(e.has(s)){const c=e.get(s).texture;return n(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const h=new p5e(c.height);return h.fromEquirectangularTexture(t,s),e.set(s,h),s.addEventListener("dispose",i),n(h.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}const z1=4,kj=[.125,.215,.35,.446,.526,.582],B0=20,pI=new CO,Oj=new Ji;let gI=null,mI=0,vI=0,yI=!1;const D0=(1+Math.sqrt(5))/2,n1=1/D0,Fj=[new Pn(-D0,n1,0),new Pn(D0,n1,0),new Pn(-n1,0,D0),new Pn(n1,0,D0),new Pn(0,D0,-n1),new Pn(0,D0,n1),new Pn(-1,1,-1),new Pn(1,1,-1),new Pn(-1,1,1),new Pn(1,1,1)],sIe=new Pn;class uN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100,o={}){const{size:s=256,position:a=sIe}=o;gI=this._renderer.getRenderTarget(),mI=this._renderer.getActiveCubeFace(),vI=this._renderer.getActiveMipmapLevel(),yI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,r,i,c,a),n>0&&this._blur(c,0,0,n),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Uj(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=zj(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(gI,mI,vI),this._renderer.xr.enabled=yI,e.scissorTest=!1,hT(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===xx||e.mapping===bx?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),gI=this._renderer.getRenderTarget(),mI=this._renderer.getActiveCubeFace(),vI=this._renderer.getActiveMipmapLevel(),yI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:mp,minFilter:mp,generateMipmaps:!1,type:yp,format:Td,colorSpace:Sx,depthBuffer:!1},i=Bj(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Bj(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=lIe(o)),this._blurMaterial=uIe(o,e,n)}return i}_compileMaterial(e){const n=new Uc(this._lodPlanes[0],e);this._renderer.compile(n,pI)}_sceneToCubeUV(e,n,r,i,o){const c=new Sd(90,1,n,r),h=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],v=this._renderer,w=v.autoClear,_=v.toneMapping;v.getClearColor(Oj),v.toneMapping=wv,v.autoClear=!1;const E=new Nw({name:"PMREM.Background",side:vf,depthWrite:!1,depthTest:!1}),M=new Uc(new Ny,E);let D=!1;const A=e.background;A?A.isColor&&(E.color.copy(A),e.background=null,D=!0):(E.color.copy(Oj),D=!0);for(let F=0;F<6;F++){const O=F%3;O===0?(c.up.set(0,h[F],0),c.position.set(o.x,o.y,o.z),c.lookAt(o.x+d[F],o.y,o.z)):O===1?(c.up.set(0,0,h[F]),c.position.set(o.x,o.y,o.z),c.lookAt(o.x,o.y+d[F],o.z)):(c.up.set(0,h[F],0),c.position.set(o.x,o.y,o.z),c.lookAt(o.x,o.y,o.z+d[F]));const N=this._cubeSize;hT(i,O*N,F>2?N:0,N,N),v.setRenderTarget(i),D&&v.render(M,c),v.render(e,c)}M.geometry.dispose(),M.material.dispose(),v.toneMapping=_,v.autoClear=w,e.background=A}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===xx||e.mapping===bx;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Uj()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=zj());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new Uc(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const c=this._cubeSize;hT(n,0,0,3*c,2*c),r.setRenderTarget(n),r.render(s,pI)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let o=1;o<i;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=Fj[(i-o-1)%Fj.length];this._blur(e,o-1,o,s,a)}n.autoClear=r}_blur(e,n,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,s,a){const c=this._renderer,h=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,v=new Uc(this._lodPlanes[i],h),w=h.uniforms,_=this._sizeLods[r]-1,E=isFinite(o)?Math.PI/(2*_):2*Math.PI/(2*B0-1),M=o/E,D=isFinite(o)?1+Math.floor(d*M):B0;D>B0&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${D} samples when the maximum is set to ${B0}`);const A=[];let F=0;for(let W=0;W<B0;++W){const X=W/M,K=Math.exp(-X*X/2);A.push(K),W===0?F+=K:W<D&&(F+=2*K)}for(let W=0;W<A.length;W++)A[W]=A[W]/F;w.envMap.value=e.texture,w.samples.value=D,w.weights.value=A,w.latitudinal.value=s==="latitudinal",a&&(w.poleAxis.value=a);const{_lodMax:O}=this;w.dTheta.value=E,w.mipInt.value=O-r;const N=this._sizeLods[i],H=3*N*(i>O-z1?i-O+z1:0),G=4*(this._cubeSize-N);hT(n,H,G,3*N,2*N),c.setRenderTarget(n),c.render(v,pI)}}function lIe(t){const e=[],n=[],r=[];let i=t;const o=t-z1+1+kj.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);n.push(a);let c=1/a;s>t-z1?c=kj[s-t+z1-1]:s===0&&(c=0),r.push(c);const h=1/(a-2),d=-h,v=1+h,w=[d,d,v,d,v,v,d,d,v,v,d,v],_=6,E=6,M=3,D=2,A=1,F=new Float32Array(M*E*_),O=new Float32Array(D*E*_),N=new Float32Array(A*E*_);for(let G=0;G<_;G++){const W=G%3*2/3-1,X=G>2?0:-1,K=[W,X,0,W+2/3,X,0,W+2/3,X+1,0,W,X,0,W+2/3,X+1,0,W,X+1,0];F.set(K,M*E*G),O.set(w,D*E*G);const k=[G,G,G,G,G,G];N.set(k,A*E*G)}const H=new qh;H.setAttribute("position",new ol(F,M)),H.setAttribute("uv",new ol(O,D)),H.setAttribute("faceIndex",new ol(N,A)),e.push(H),i>z1&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function Bj(t,e,n){const r=new $f(t,e,n);return r.texture.mapping=yA,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function hT(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function uIe(t,e,n){const r=new Float32Array(B0),i=new Pn(0,1,0);return new ic({name:"SphericalGaussianBlur",defines:{n:B0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:RO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Vh,depthTest:!1,depthWrite:!1})}function zj(){return new ic({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:RO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Vh,depthTest:!1,depthWrite:!1})}function Uj(){return new ic({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:RO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Vh,depthTest:!1,depthWrite:!1})}function RO(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cIe(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const c=a.mapping,h=c===XC||c===LL,d=c===xx||c===bx;if(h||d){let v=e.get(a);const w=v!==void 0?v.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==w)return n===null&&(n=new uN(t)),v=h?n.fromEquirectangular(a,v):n.fromCubemap(a,v),v.texture.pmremVersion=a.pmremVersion,e.set(a,v),v.texture;if(v!==void 0)return v.texture;{const _=a.image;return h&&_&&_.height>0||d&&_&&i(_)?(n===null&&(n=new uN(t)),v=h?n.fromEquirectangular(a):n.fromCubemap(a),v.texture.pmremVersion=a.pmremVersion,e.set(a,v),a.addEventListener("dispose",o),v.texture):null}}}return a}function i(a){let c=0;const h=6;for(let d=0;d<h;d++)a[d]!==void 0&&c++;return c===h}function o(a){const c=a.target;c.removeEventListener("dispose",o);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function hIe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&I0("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function fIe(t,e,n,r){const i={},o=new WeakMap;function s(v){const w=v.target;w.index!==null&&e.remove(w.index);for(const E in w.attributes)e.remove(w.attributes[E]);w.removeEventListener("dispose",s),delete i[w.id];const _=o.get(w);_&&(e.remove(_),o.delete(w)),r.releaseStatesOfGeometry(w),w.isInstancedBufferGeometry===!0&&delete w._maxInstanceCount,n.memory.geometries--}function a(v,w){return i[w.id]===!0||(w.addEventListener("dispose",s),i[w.id]=!0,n.memory.geometries++),w}function c(v){const w=v.attributes;for(const _ in w)e.update(w[_],t.ARRAY_BUFFER)}function h(v){const w=[],_=v.index,E=v.attributes.position;let M=0;if(_!==null){const F=_.array;M=_.version;for(let O=0,N=F.length;O<N;O+=3){const H=F[O+0],G=F[O+1],W=F[O+2];w.push(H,G,G,W,W,H)}}else if(E!==void 0){const F=E.array;M=E.version;for(let O=0,N=F.length/3-1;O<N;O+=3){const H=O+0,G=O+1,W=O+2;w.push(H,G,G,W,W,H)}}else return;const D=new(xY(w)?CY:TY)(w,1);D.version=M;const A=o.get(v);A&&e.remove(A),o.set(v,D)}function d(v){const w=o.get(v);if(w){const _=v.index;_!==null&&w.version<_.version&&h(v)}else h(v);return o.get(v)}return{get:a,update:c,getWireframeAttribute:d}}function dIe(t,e,n){let r;function i(w){r=w}let o,s;function a(w){o=w.type,s=w.bytesPerElement}function c(w,_){t.drawElements(r,_,o,w*s),n.update(_,r,1)}function h(w,_,E){E!==0&&(t.drawElementsInstanced(r,_,o,w*s,E),n.update(_,r,E))}function d(w,_,E){if(E===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,_,0,o,w,0,E);let D=0;for(let A=0;A<E;A++)D+=_[A];n.update(D,r,1)}function v(w,_,E,M){if(E===0)return;const D=e.get("WEBGL_multi_draw");if(D===null)for(let A=0;A<w.length;A++)h(w[A]/s,_[A],M[A]);else{D.multiDrawElementsInstancedWEBGL(r,_,0,o,w,0,M,0,E);let A=0;for(let F=0;F<E;F++)A+=_[F]*M[F];n.update(A,r,1)}}this.setMode=i,this.setIndex=a,this.render=c,this.renderInstances=h,this.renderMultiDraw=d,this.renderMultiDrawInstances=v}function pIe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=a*(o/3);break;case t.LINES:n.lines+=a*(o/2);break;case t.LINE_STRIP:n.lines+=a*(o-1);break;case t.LINE_LOOP:n.lines+=a*o;break;case t.POINTS:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function gIe(t,e,n){const r=new WeakMap,i=new iu;function o(s,a,c){const h=s.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,v=d!==void 0?d.length:0;let w=r.get(a);if(w===void 0||w.count!==v){let K=function(){W.dispose(),r.delete(a),a.removeEventListener("dispose",K)};w!==void 0&&w.texture.dispose();const _=a.morphAttributes.position!==void 0,E=a.morphAttributes.normal!==void 0,M=a.morphAttributes.color!==void 0,D=a.morphAttributes.position||[],A=a.morphAttributes.normal||[],F=a.morphAttributes.color||[];let O=0;_===!0&&(O=1),E===!0&&(O=2),M===!0&&(O=3);let N=a.attributes.position.count*O,H=1;N>e.maxTextureSize&&(H=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const G=new Float32Array(N*H*4*v),W=new bY(G,N,H,v);W.type=ig,W.needsUpdate=!0;const X=O*4;for(let k=0;k<v;k++){const $=D[k],Q=A[k],ie=F[k],ae=N*H*4*k;for(let ce=0;ce<$.count;ce++){const se=ce*X;_===!0&&(i.fromBufferAttribute($,ce),G[ae+se+0]=i.x,G[ae+se+1]=i.y,G[ae+se+2]=i.z,G[ae+se+3]=0),E===!0&&(i.fromBufferAttribute(Q,ce),G[ae+se+4]=i.x,G[ae+se+5]=i.y,G[ae+se+6]=i.z,G[ae+se+7]=0),M===!0&&(i.fromBufferAttribute(ie,ce),G[ae+se+8]=i.x,G[ae+se+9]=i.y,G[ae+se+10]=i.z,G[ae+se+11]=ie.itemSize===4?i.w:1)}}w={count:v,texture:W,size:new qr(N,H)},r.set(a,w),a.addEventListener("dispose",K)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let _=0;for(let M=0;M<h.length;M++)_+=h[M];const E=a.morphTargetsRelative?1:1-_;c.getUniforms().setValue(t,"morphTargetBaseInfluence",E),c.getUniforms().setValue(t,"morphTargetInfluences",h)}c.getUniforms().setValue(t,"morphTargetsTexture",w.texture,n),c.getUniforms().setValue(t,"morphTargetsTextureSize",w.size)}return{update:o}}function mIe(t,e,n,r){let i=new WeakMap;function o(c){const h=r.render.frame,d=c.geometry,v=e.get(c,d);if(i.get(v)!==h&&(e.update(v),i.set(v,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),i.get(c)!==h&&(n.update(c.instanceMatrix,t.ARRAY_BUFFER),c.instanceColor!==null&&n.update(c.instanceColor,t.ARRAY_BUFFER),i.set(c,h))),c.isSkinnedMesh){const w=c.skeleton;i.get(w)!==h&&(w.update(),i.set(w,h))}return v}function s(){i=new WeakMap}function a(c){const h=c.target;h.removeEventListener("dispose",a),n.remove(h.instanceMatrix),h.instanceColor!==null&&n.remove(h.instanceColor)}return{update:o,dispose:s}}const zY=new jc,jj=new bO(1,1),UY=new bY,jY=new JAe,GY=new RY,Gj=[],Vj=[],Hj=new Float32Array(16),qj=new Float32Array(9),$j=new Float32Array(4);function $x(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=Gj[i];if(o===void 0&&(o=new Float32Array(i),Gj[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function ac(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function oc(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function wA(t,e){let n=Vj[e];n===void 0&&(n=new Int32Array(e),Vj[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function vIe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function yIe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ac(n,e))return;t.uniform2fv(this.addr,e),oc(n,e)}}function _Ie(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ac(n,e))return;t.uniform3fv(this.addr,e),oc(n,e)}}function xIe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ac(n,e))return;t.uniform4fv(this.addr,e),oc(n,e)}}function bIe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ac(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),oc(n,e)}else{if(ac(n,r))return;$j.set(r),t.uniformMatrix2fv(this.addr,!1,$j),oc(n,r)}}function wIe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ac(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),oc(n,e)}else{if(ac(n,r))return;qj.set(r),t.uniformMatrix3fv(this.addr,!1,qj),oc(n,r)}}function SIe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ac(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),oc(n,e)}else{if(ac(n,r))return;Hj.set(r),t.uniformMatrix4fv(this.addr,!1,Hj),oc(n,r)}}function EIe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function TIe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ac(n,e))return;t.uniform2iv(this.addr,e),oc(n,e)}}function CIe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ac(n,e))return;t.uniform3iv(this.addr,e),oc(n,e)}}function MIe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ac(n,e))return;t.uniform4iv(this.addr,e),oc(n,e)}}function AIe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function RIe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ac(n,e))return;t.uniform2uiv(this.addr,e),oc(n,e)}}function PIe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ac(n,e))return;t.uniform3uiv(this.addr,e),oc(n,e)}}function IIe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ac(n,e))return;t.uniform4uiv(this.addr,e),oc(n,e)}}function DIe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let o;this.type===t.SAMPLER_2D_SHADOW?(jj.compareFunction=_Y,o=jj):o=zY,n.setTexture2D(e||o,i)}function LIe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||jY,i)}function NIe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||GY,i)}function kIe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||UY,i)}function OIe(t){switch(t){case 5126:return vIe;case 35664:return yIe;case 35665:return _Ie;case 35666:return xIe;case 35674:return bIe;case 35675:return wIe;case 35676:return SIe;case 5124:case 35670:return EIe;case 35667:case 35671:return TIe;case 35668:case 35672:return CIe;case 35669:case 35673:return MIe;case 5125:return AIe;case 36294:return RIe;case 36295:return PIe;case 36296:return IIe;case 35678:case 36198:case 36298:case 36306:case 35682:return DIe;case 35679:case 36299:case 36307:return LIe;case 35680:case 36300:case 36308:case 36293:return NIe;case 36289:case 36303:case 36311:case 36292:return kIe}}function FIe(t,e){t.uniform1fv(this.addr,e)}function BIe(t,e){const n=$x(e,this.size,2);t.uniform2fv(this.addr,n)}function zIe(t,e){const n=$x(e,this.size,3);t.uniform3fv(this.addr,n)}function UIe(t,e){const n=$x(e,this.size,4);t.uniform4fv(this.addr,n)}function jIe(t,e){const n=$x(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function GIe(t,e){const n=$x(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function VIe(t,e){const n=$x(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function HIe(t,e){t.uniform1iv(this.addr,e)}function qIe(t,e){t.uniform2iv(this.addr,e)}function $Ie(t,e){t.uniform3iv(this.addr,e)}function WIe(t,e){t.uniform4iv(this.addr,e)}function XIe(t,e){t.uniform1uiv(this.addr,e)}function YIe(t,e){t.uniform2uiv(this.addr,e)}function ZIe(t,e){t.uniform3uiv(this.addr,e)}function KIe(t,e){t.uniform4uiv(this.addr,e)}function JIe(t,e,n){const r=this.cache,i=e.length,o=wA(n,i);ac(r,o)||(t.uniform1iv(this.addr,o),oc(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||zY,o[s])}function QIe(t,e,n){const r=this.cache,i=e.length,o=wA(n,i);ac(r,o)||(t.uniform1iv(this.addr,o),oc(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||jY,o[s])}function eDe(t,e,n){const r=this.cache,i=e.length,o=wA(n,i);ac(r,o)||(t.uniform1iv(this.addr,o),oc(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||GY,o[s])}function tDe(t,e,n){const r=this.cache,i=e.length,o=wA(n,i);ac(r,o)||(t.uniform1iv(this.addr,o),oc(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||UY,o[s])}function nDe(t){switch(t){case 5126:return FIe;case 35664:return BIe;case 35665:return zIe;case 35666:return UIe;case 35674:return jIe;case 35675:return GIe;case 35676:return VIe;case 5124:case 35670:return HIe;case 35667:case 35671:return qIe;case 35668:case 35672:return $Ie;case 35669:case 35673:return WIe;case 5125:return XIe;case 36294:return YIe;case 36295:return ZIe;case 36296:return KIe;case 35678:case 36198:case 36298:case 36306:case 35682:return JIe;case 35679:case 36299:case 36307:return QIe;case 35680:case 36300:case 36308:case 36293:return eDe;case 36289:case 36303:case 36311:case 36292:return tDe}}class rDe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=OIe(n.type)}}class iDe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=nDe(n.type)}}class aDe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,n[a.id],r)}}}const _I=/(\w+)(\])?(\[|\.)?/g;function Wj(t,e){t.seq.push(e),t.map[e.id]=e}function oDe(t,e,n){const r=t.name,i=r.length;for(_I.lastIndex=0;;){const o=_I.exec(r),s=_I.lastIndex;let a=o[1];const c=o[2]==="]",h=o[3];if(c&&(a=a|0),h===void 0||h==="["&&s+2===i){Wj(n,h===void 0?new rDe(a,t,e):new iDe(a,t,e));break}else{let v=n.map[a];v===void 0&&(v=new aDe(a),Wj(n,v)),n=v}}}class KT{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),s=e.getUniformLocation(n,o.name);oDe(o,s,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,s=n.length;o!==s;++o){const a=n[o],c=r[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function Xj(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const sDe=37297;let lDe=0;function uDe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${n[s]}`)}return r.join(`
`)}const Yj=new Oa;function cDe(t){Po._getMatrix(Yj,Po.workingColorSpace,t);const e=`mat3( ${Yj.elements.map(n=>n.toFixed(4))} )`;switch(Po.getTransfer(t)){case ZC:return[e,"LinearTransferOETF"];case xs:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function Zj(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+uDe(t.getShaderSource(e),s)}else return i}function hDe(t,e){const n=cDe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function fDe(t,e){let n;switch(e){case nY:n="Linear";break;case rY:n="Reinhard";break;case iY:n="Cineon";break;case uO:n="ACESFilmic";break;case oY:n="AgX";break;case sY:n="Neutral";break;case aY:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const fT=new Pn;function dDe(){Po.getLuminanceCoefficients(fT);const t=fT.x.toFixed(4),e=fT.y.toFixed(4),n=fT.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function pDe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(D2).join(`
`)}function gDe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function mDe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),s=o.name;let a=1;o.type===t.FLOAT_MAT2&&(a=2),o.type===t.FLOAT_MAT3&&(a=3),o.type===t.FLOAT_MAT4&&(a=4),n[s]={type:o.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}function D2(t){return t!==""}function Kj(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Jj(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const vDe=/^[ \t]*#include +<([\w\d./]+)>/gm;function cN(t){return t.replace(vDe,_De)}const yDe=new Map;function _De(t,e){let n=Ya[e];if(n===void 0){const r=yDe.get(e);if(r!==void 0)n=Ya[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return cN(n)}const xDe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Qj(t){return t.replace(xDe,bDe)}function bDe(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function eG(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function wDe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===ZX?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===KX?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===nm&&(e="SHADOWMAP_TYPE_VSM"),e}function SDe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case xx:case bx:e="ENVMAP_TYPE_CUBE";break;case yA:e="ENVMAP_TYPE_CUBE_UV";break}return e}function EDe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case bx:e="ENVMAP_MODE_REFRACTION";break}return e}function TDe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case tY:e="ENVMAP_BLENDING_MULTIPLY";break;case dAe:e="ENVMAP_BLENDING_MIX";break;case pAe:e="ENVMAP_BLENDING_ADD";break}return e}function CDe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function MDe(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const c=wDe(n),h=SDe(n),d=EDe(n),v=TDe(n),w=CDe(n),_=pDe(n),E=gDe(o),M=i.createProgram();let D,A,F=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(D=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E].filter(D2).join(`
`),D.length>0&&(D+=`
`),A=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E].filter(D2).join(`
`),A.length>0&&(A+=`
`)):(D=[eG(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(D2).join(`
`),A=[eG(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+v:"",w?"#define CUBEUV_TEXEL_WIDTH "+w.texelWidth:"",w?"#define CUBEUV_TEXEL_HEIGHT "+w.texelHeight:"",w?"#define CUBEUV_MAX_MIP "+w.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==wv?"#define TONE_MAPPING":"",n.toneMapping!==wv?Ya.tonemapping_pars_fragment:"",n.toneMapping!==wv?fDe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ya.colorspace_pars_fragment,hDe("linearToOutputTexel",n.outputColorSpace),dDe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(D2).join(`
`)),s=cN(s),s=Kj(s,n),s=Jj(s,n),a=cN(a),a=Kj(a,n),a=Jj(a,n),s=Qj(s),a=Qj(a),n.isRawShaderMaterial!==!0&&(F=`#version 300 es
`,D=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+D,A=["#define varying in",n.glslVersion===oj?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===oj?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const O=F+D+s,N=F+A+a,H=Xj(i,i.VERTEX_SHADER,O),G=Xj(i,i.FRAGMENT_SHADER,N);i.attachShader(M,H),i.attachShader(M,G),n.index0AttributeName!==void 0?i.bindAttribLocation(M,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(M,0,"position"),i.linkProgram(M);function W($){if(t.debug.checkShaderErrors){const Q=i.getProgramInfoLog(M).trim(),ie=i.getShaderInfoLog(H).trim(),ae=i.getShaderInfoLog(G).trim();let ce=!0,se=!0;if(i.getProgramParameter(M,i.LINK_STATUS)===!1)if(ce=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,M,H,G);else{const Se=Zj(i,H,"vertex"),ye=Zj(i,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(M,i.VALIDATE_STATUS)+`

Material Name: `+$.name+`
Material Type: `+$.type+`

Program Info Log: `+Q+`
`+Se+`
`+ye)}else Q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Q):(ie===""||ae==="")&&(se=!1);se&&($.diagnostics={runnable:ce,programLog:Q,vertexShader:{log:ie,prefix:D},fragmentShader:{log:ae,prefix:A}})}i.deleteShader(H),i.deleteShader(G),X=new KT(i,M),K=mDe(i,M)}let X;this.getUniforms=function(){return X===void 0&&W(this),X};let K;this.getAttributes=function(){return K===void 0&&W(this),K};let k=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return k===!1&&(k=i.getProgramParameter(M,sDe)),k},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(M),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=lDe++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=H,this.fragmentShader=G,this}let ADe=0;class RDe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new PDe(e),n.set(e,r)),r}}class PDe{constructor(e){this.id=ADe++,this.code=e,this.usedTimes=0}}function IDe(t,e,n,r,i,o,s){const a=new SY,c=new RDe,h=new Set,d=[],v=i.logarithmicDepthBuffer,w=i.vertexTextures;let _=i.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(K){return h.add(K),K===0?"uv":`uv${K}`}function D(K,k,$,Q,ie){const ae=Q.fog,ce=ie.geometry,se=K.isMeshStandardMaterial?Q.environment:null,Se=(K.isMeshStandardMaterial?n:e).get(K.envMap||se),ye=Se&&Se.mapping===yA?Se.image.height:null,Te=E[K.type];K.precision!==null&&(_=i.getMaxPrecision(K.precision),_!==K.precision&&console.warn("THREE.WebGLProgram.getParameters:",K.precision,"not supported, using",_,"instead."));const pe=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,Ie=pe!==void 0?pe.length:0;let me=0;ce.morphAttributes.position!==void 0&&(me=1),ce.morphAttributes.normal!==void 0&&(me=2),ce.morphAttributes.color!==void 0&&(me=3);let xe,ve,Ee,De;if(Te){const Qn=Jp[Te];xe=Qn.vertexShader,ve=Qn.fragmentShader}else xe=K.vertexShader,ve=K.fragmentShader,c.update(K),Ee=c.getVertexShaderID(K),De=c.getFragmentShaderID(K);const We=t.getRenderTarget(),Ae=t.state.buffers.depth.getReversed(),ut=ie.isInstancedMesh===!0,pt=ie.isBatchedMesh===!0,st=!!K.map,Ce=!!K.matcap,It=!!Se,Ve=!!K.aoMap,yt=!!K.lightMap,Ze=!!K.bumpMap,wt=!!K.normalMap,Ut=!!K.displacementMap,ht=!!K.emissiveMap,qt=!!K.metalnessMap,Ye=!!K.roughnessMap,Re=K.anisotropy>0,Pt=K.clearcoat>0,Dt=K.dispersion>0,At=K.iridescence>0,Bt=K.sheen>0,gn=K.transmission>0,Zt=Re&&!!K.anisotropyMap,cn=Pt&&!!K.clearcoatMap,$t=Pt&&!!K.clearcoatNormalMap,Et=Pt&&!!K.clearcoatRoughnessMap,qn=At&&!!K.iridescenceMap,Dn=At&&!!K.iridescenceThicknessMap,sr=Bt&&!!K.sheenColorMap,rt=Bt&&!!K.sheenRoughnessMap,ze=!!K.specularMap,Xe=!!K.specularColorMap,Fe=!!K.specularIntensityMap,He=gn&&!!K.transmissionMap,mt=gn&&!!K.thicknessMap,it=!!K.gradientMap,xt=!!K.alphaMap,Tt=K.alphaTest>0,kt=!!K.alphaHash,Jt=!!K.extensions;let rn=wv;K.toneMapped&&(We===null||We.isXRRenderTarget===!0)&&(rn=t.toneMapping);const Yt={shaderID:Te,shaderType:K.type,shaderName:K.name,vertexShader:xe,fragmentShader:ve,defines:K.defines,customVertexShaderID:Ee,customFragmentShaderID:De,isRawShaderMaterial:K.isRawShaderMaterial===!0,glslVersion:K.glslVersion,precision:_,batching:pt,batchingColor:pt&&ie._colorsTexture!==null,instancing:ut,instancingColor:ut&&ie.instanceColor!==null,instancingMorph:ut&&ie.morphTexture!==null,supportsVertexTextures:w,outputColorSpace:We===null?t.outputColorSpace:We.isXRRenderTarget===!0?We.texture.colorSpace:Sx,alphaToCoverage:!!K.alphaToCoverage,map:st,matcap:Ce,envMap:It,envMapMode:It&&Se.mapping,envMapCubeUVHeight:ye,aoMap:Ve,lightMap:yt,bumpMap:Ze,normalMap:wt,displacementMap:w&&Ut,emissiveMap:ht,normalMapObjectSpace:wt&&K.normalMapType===_Ae,normalMapTangentSpace:wt&&K.normalMapType===vO,metalnessMap:qt,roughnessMap:Ye,anisotropy:Re,anisotropyMap:Zt,clearcoat:Pt,clearcoatMap:cn,clearcoatNormalMap:$t,clearcoatRoughnessMap:Et,dispersion:Dt,iridescence:At,iridescenceMap:qn,iridescenceThicknessMap:Dn,sheen:Bt,sheenColorMap:sr,sheenRoughnessMap:rt,specularMap:ze,specularColorMap:Xe,specularIntensityMap:Fe,transmission:gn,transmissionMap:He,thicknessMap:mt,gradientMap:it,opaque:K.transparent===!1&&K.blending===K1&&K.alphaToCoverage===!1,alphaMap:xt,alphaTest:Tt,alphaHash:kt,combine:K.combine,mapUv:st&&M(K.map.channel),aoMapUv:Ve&&M(K.aoMap.channel),lightMapUv:yt&&M(K.lightMap.channel),bumpMapUv:Ze&&M(K.bumpMap.channel),normalMapUv:wt&&M(K.normalMap.channel),displacementMapUv:Ut&&M(K.displacementMap.channel),emissiveMapUv:ht&&M(K.emissiveMap.channel),metalnessMapUv:qt&&M(K.metalnessMap.channel),roughnessMapUv:Ye&&M(K.roughnessMap.channel),anisotropyMapUv:Zt&&M(K.anisotropyMap.channel),clearcoatMapUv:cn&&M(K.clearcoatMap.channel),clearcoatNormalMapUv:$t&&M(K.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Et&&M(K.clearcoatRoughnessMap.channel),iridescenceMapUv:qn&&M(K.iridescenceMap.channel),iridescenceThicknessMapUv:Dn&&M(K.iridescenceThicknessMap.channel),sheenColorMapUv:sr&&M(K.sheenColorMap.channel),sheenRoughnessMapUv:rt&&M(K.sheenRoughnessMap.channel),specularMapUv:ze&&M(K.specularMap.channel),specularColorMapUv:Xe&&M(K.specularColorMap.channel),specularIntensityMapUv:Fe&&M(K.specularIntensityMap.channel),transmissionMapUv:He&&M(K.transmissionMap.channel),thicknessMapUv:mt&&M(K.thicknessMap.channel),alphaMapUv:xt&&M(K.alphaMap.channel),vertexTangents:!!ce.attributes.tangent&&(wt||Re),vertexColors:K.vertexColors,vertexAlphas:K.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,pointsUvs:ie.isPoints===!0&&!!ce.attributes.uv&&(st||xt),fog:!!ae,useFog:K.fog===!0,fogExp2:!!ae&&ae.isFogExp2,flatShading:K.flatShading===!0,sizeAttenuation:K.sizeAttenuation===!0,logarithmicDepthBuffer:v,reverseDepthBuffer:Ae,skinning:ie.isSkinnedMesh===!0,morphTargets:ce.morphAttributes.position!==void 0,morphNormals:ce.morphAttributes.normal!==void 0,morphColors:ce.morphAttributes.color!==void 0,morphTargetsCount:Ie,morphTextureStride:me,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numLightProbes:k.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:K.dithering,shadowMapEnabled:t.shadowMap.enabled&&$.length>0,shadowMapType:t.shadowMap.type,toneMapping:rn,decodeVideoTexture:st&&K.map.isVideoTexture===!0&&Po.getTransfer(K.map.colorSpace)===xs,decodeVideoTextureEmissive:ht&&K.emissiveMap.isVideoTexture===!0&&Po.getTransfer(K.emissiveMap.colorSpace)===xs,premultipliedAlpha:K.premultipliedAlpha,doubleSided:K.side===dp,flipSided:K.side===vf,useDepthPacking:K.depthPacking>=0,depthPacking:K.depthPacking||0,index0AttributeName:K.index0AttributeName,extensionClipCullDistance:Jt&&K.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Jt&&K.extensions.multiDraw===!0||pt)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:K.customProgramCacheKey()};return Yt.vertexUv1s=h.has(1),Yt.vertexUv2s=h.has(2),Yt.vertexUv3s=h.has(3),h.clear(),Yt}function A(K){const k=[];if(K.shaderID?k.push(K.shaderID):(k.push(K.customVertexShaderID),k.push(K.customFragmentShaderID)),K.defines!==void 0)for(const $ in K.defines)k.push($),k.push(K.defines[$]);return K.isRawShaderMaterial===!1&&(F(k,K),O(k,K),k.push(t.outputColorSpace)),k.push(K.customProgramCacheKey),k.join()}function F(K,k){K.push(k.precision),K.push(k.outputColorSpace),K.push(k.envMapMode),K.push(k.envMapCubeUVHeight),K.push(k.mapUv),K.push(k.alphaMapUv),K.push(k.lightMapUv),K.push(k.aoMapUv),K.push(k.bumpMapUv),K.push(k.normalMapUv),K.push(k.displacementMapUv),K.push(k.emissiveMapUv),K.push(k.metalnessMapUv),K.push(k.roughnessMapUv),K.push(k.anisotropyMapUv),K.push(k.clearcoatMapUv),K.push(k.clearcoatNormalMapUv),K.push(k.clearcoatRoughnessMapUv),K.push(k.iridescenceMapUv),K.push(k.iridescenceThicknessMapUv),K.push(k.sheenColorMapUv),K.push(k.sheenRoughnessMapUv),K.push(k.specularMapUv),K.push(k.specularColorMapUv),K.push(k.specularIntensityMapUv),K.push(k.transmissionMapUv),K.push(k.thicknessMapUv),K.push(k.combine),K.push(k.fogExp2),K.push(k.sizeAttenuation),K.push(k.morphTargetsCount),K.push(k.morphAttributeCount),K.push(k.numDirLights),K.push(k.numPointLights),K.push(k.numSpotLights),K.push(k.numSpotLightMaps),K.push(k.numHemiLights),K.push(k.numRectAreaLights),K.push(k.numDirLightShadows),K.push(k.numPointLightShadows),K.push(k.numSpotLightShadows),K.push(k.numSpotLightShadowsWithMaps),K.push(k.numLightProbes),K.push(k.shadowMapType),K.push(k.toneMapping),K.push(k.numClippingPlanes),K.push(k.numClipIntersection),K.push(k.depthPacking)}function O(K,k){a.disableAll(),k.supportsVertexTextures&&a.enable(0),k.instancing&&a.enable(1),k.instancingColor&&a.enable(2),k.instancingMorph&&a.enable(3),k.matcap&&a.enable(4),k.envMap&&a.enable(5),k.normalMapObjectSpace&&a.enable(6),k.normalMapTangentSpace&&a.enable(7),k.clearcoat&&a.enable(8),k.iridescence&&a.enable(9),k.alphaTest&&a.enable(10),k.vertexColors&&a.enable(11),k.vertexAlphas&&a.enable(12),k.vertexUv1s&&a.enable(13),k.vertexUv2s&&a.enable(14),k.vertexUv3s&&a.enable(15),k.vertexTangents&&a.enable(16),k.anisotropy&&a.enable(17),k.alphaHash&&a.enable(18),k.batching&&a.enable(19),k.dispersion&&a.enable(20),k.batchingColor&&a.enable(21),K.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.reverseDepthBuffer&&a.enable(4),k.skinning&&a.enable(5),k.morphTargets&&a.enable(6),k.morphNormals&&a.enable(7),k.morphColors&&a.enable(8),k.premultipliedAlpha&&a.enable(9),k.shadowMapEnabled&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.transmission&&a.enable(15),k.sheen&&a.enable(16),k.opaque&&a.enable(17),k.pointsUvs&&a.enable(18),k.decodeVideoTexture&&a.enable(19),k.decodeVideoTextureEmissive&&a.enable(20),k.alphaToCoverage&&a.enable(21),K.push(a.mask)}function N(K){const k=E[K.type];let $;if(k){const Q=Jp[k];$=lm.clone(Q.uniforms)}else $=K.uniforms;return $}function H(K,k){let $;for(let Q=0,ie=d.length;Q<ie;Q++){const ae=d[Q];if(ae.cacheKey===k){$=ae,++$.usedTimes;break}}return $===void 0&&($=new MDe(t,k,K,o),d.push($)),$}function G(K){if(--K.usedTimes===0){const k=d.indexOf(K);d[k]=d[d.length-1],d.pop(),K.destroy()}}function W(K){c.remove(K)}function X(){c.dispose()}return{getParameters:D,getProgramCacheKey:A,getUniforms:N,acquireProgram:H,releaseProgram:G,releaseShaderCache:W,programs:d,dispose:X}}function DDe(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function r(s){t.delete(s)}function i(s,a,c){t.get(s)[a]=c}function o(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:o}}function LDe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function tG(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function nG(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function s(v,w,_,E,M,D){let A=t[e];return A===void 0?(A={id:v.id,object:v,geometry:w,material:_,groupOrder:E,renderOrder:v.renderOrder,z:M,group:D},t[e]=A):(A.id=v.id,A.object=v,A.geometry=w,A.material=_,A.groupOrder=E,A.renderOrder=v.renderOrder,A.z=M,A.group=D),e++,A}function a(v,w,_,E,M,D){const A=s(v,w,_,E,M,D);_.transmission>0?r.push(A):_.transparent===!0?i.push(A):n.push(A)}function c(v,w,_,E,M,D){const A=s(v,w,_,E,M,D);_.transmission>0?r.unshift(A):_.transparent===!0?i.unshift(A):n.unshift(A)}function h(v,w){n.length>1&&n.sort(v||LDe),r.length>1&&r.sort(w||tG),i.length>1&&i.sort(w||tG)}function d(){for(let v=e,w=t.length;v<w;v++){const _=t[v];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:c,finish:d,sort:h}}function NDe(){let t=new WeakMap;function e(r,i){const o=t.get(r);let s;return o===void 0?(s=new nG,t.set(r,[s])):i>=o.length?(s=new nG,o.push(s)):s=o[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function kDe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Pn,color:new Ji};break;case"SpotLight":n={position:new Pn,direction:new Pn,color:new Ji,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Pn,color:new Ji,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Pn,skyColor:new Ji,groundColor:new Ji};break;case"RectAreaLight":n={color:new Ji,position:new Pn,halfWidth:new Pn,halfHeight:new Pn};break}return t[e.id]=n,n}}}function ODe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qr};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qr};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qr,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let FDe=0;function BDe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function zDe(t){const e=new kDe,n=ODe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)r.probe.push(new Pn);const i=new Pn,o=new Os,s=new Os;function a(h){let d=0,v=0,w=0;for(let K=0;K<9;K++)r.probe[K].set(0,0,0);let _=0,E=0,M=0,D=0,A=0,F=0,O=0,N=0,H=0,G=0,W=0;h.sort(BDe);for(let K=0,k=h.length;K<k;K++){const $=h[K],Q=$.color,ie=$.intensity,ae=$.distance,ce=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)d+=Q.r*ie,v+=Q.g*ie,w+=Q.b*ie;else if($.isLightProbe){for(let se=0;se<9;se++)r.probe[se].addScaledVector($.sh.coefficients[se],ie);W++}else if($.isDirectionalLight){const se=e.get($);if(se.color.copy($.color).multiplyScalar($.intensity),$.castShadow){const Se=$.shadow,ye=n.get($);ye.shadowIntensity=Se.intensity,ye.shadowBias=Se.bias,ye.shadowNormalBias=Se.normalBias,ye.shadowRadius=Se.radius,ye.shadowMapSize=Se.mapSize,r.directionalShadow[_]=ye,r.directionalShadowMap[_]=ce,r.directionalShadowMatrix[_]=$.shadow.matrix,F++}r.directional[_]=se,_++}else if($.isSpotLight){const se=e.get($);se.position.setFromMatrixPosition($.matrixWorld),se.color.copy(Q).multiplyScalar(ie),se.distance=ae,se.coneCos=Math.cos($.angle),se.penumbraCos=Math.cos($.angle*(1-$.penumbra)),se.decay=$.decay,r.spot[M]=se;const Se=$.shadow;if($.map&&(r.spotLightMap[H]=$.map,H++,Se.updateMatrices($),$.castShadow&&G++),r.spotLightMatrix[M]=Se.matrix,$.castShadow){const ye=n.get($);ye.shadowIntensity=Se.intensity,ye.shadowBias=Se.bias,ye.shadowNormalBias=Se.normalBias,ye.shadowRadius=Se.radius,ye.shadowMapSize=Se.mapSize,r.spotShadow[M]=ye,r.spotShadowMap[M]=ce,N++}M++}else if($.isRectAreaLight){const se=e.get($);se.color.copy(Q).multiplyScalar(ie),se.halfWidth.set($.width*.5,0,0),se.halfHeight.set(0,$.height*.5,0),r.rectArea[D]=se,D++}else if($.isPointLight){const se=e.get($);if(se.color.copy($.color).multiplyScalar($.intensity),se.distance=$.distance,se.decay=$.decay,$.castShadow){const Se=$.shadow,ye=n.get($);ye.shadowIntensity=Se.intensity,ye.shadowBias=Se.bias,ye.shadowNormalBias=Se.normalBias,ye.shadowRadius=Se.radius,ye.shadowMapSize=Se.mapSize,ye.shadowCameraNear=Se.camera.near,ye.shadowCameraFar=Se.camera.far,r.pointShadow[E]=ye,r.pointShadowMap[E]=ce,r.pointShadowMatrix[E]=$.shadow.matrix,O++}r.point[E]=se,E++}else if($.isHemisphereLight){const se=e.get($);se.skyColor.copy($.color).multiplyScalar(ie),se.groundColor.copy($.groundColor).multiplyScalar(ie),r.hemi[A]=se,A++}}D>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Si.LTC_FLOAT_1,r.rectAreaLTC2=Si.LTC_FLOAT_2):(r.rectAreaLTC1=Si.LTC_HALF_1,r.rectAreaLTC2=Si.LTC_HALF_2)),r.ambient[0]=d,r.ambient[1]=v,r.ambient[2]=w;const X=r.hash;(X.directionalLength!==_||X.pointLength!==E||X.spotLength!==M||X.rectAreaLength!==D||X.hemiLength!==A||X.numDirectionalShadows!==F||X.numPointShadows!==O||X.numSpotShadows!==N||X.numSpotMaps!==H||X.numLightProbes!==W)&&(r.directional.length=_,r.spot.length=M,r.rectArea.length=D,r.point.length=E,r.hemi.length=A,r.directionalShadow.length=F,r.directionalShadowMap.length=F,r.pointShadow.length=O,r.pointShadowMap.length=O,r.spotShadow.length=N,r.spotShadowMap.length=N,r.directionalShadowMatrix.length=F,r.pointShadowMatrix.length=O,r.spotLightMatrix.length=N+H-G,r.spotLightMap.length=H,r.numSpotLightShadowsWithMaps=G,r.numLightProbes=W,X.directionalLength=_,X.pointLength=E,X.spotLength=M,X.rectAreaLength=D,X.hemiLength=A,X.numDirectionalShadows=F,X.numPointShadows=O,X.numSpotShadows=N,X.numSpotMaps=H,X.numLightProbes=W,r.version=FDe++)}function c(h,d){let v=0,w=0,_=0,E=0,M=0;const D=d.matrixWorldInverse;for(let A=0,F=h.length;A<F;A++){const O=h[A];if(O.isDirectionalLight){const N=r.directional[v];N.direction.setFromMatrixPosition(O.matrixWorld),i.setFromMatrixPosition(O.target.matrixWorld),N.direction.sub(i),N.direction.transformDirection(D),v++}else if(O.isSpotLight){const N=r.spot[_];N.position.setFromMatrixPosition(O.matrixWorld),N.position.applyMatrix4(D),N.direction.setFromMatrixPosition(O.matrixWorld),i.setFromMatrixPosition(O.target.matrixWorld),N.direction.sub(i),N.direction.transformDirection(D),_++}else if(O.isRectAreaLight){const N=r.rectArea[E];N.position.setFromMatrixPosition(O.matrixWorld),N.position.applyMatrix4(D),s.identity(),o.copy(O.matrixWorld),o.premultiply(D),s.extractRotation(o),N.halfWidth.set(O.width*.5,0,0),N.halfHeight.set(0,O.height*.5,0),N.halfWidth.applyMatrix4(s),N.halfHeight.applyMatrix4(s),E++}else if(O.isPointLight){const N=r.point[w];N.position.setFromMatrixPosition(O.matrixWorld),N.position.applyMatrix4(D),w++}else if(O.isHemisphereLight){const N=r.hemi[M];N.direction.setFromMatrixPosition(O.matrixWorld),N.direction.transformDirection(D),M++}}}return{setup:a,setupView:c,state:r}}function rG(t){const e=new zDe(t),n=[],r=[];function i(d){h.camera=d,n.length=0,r.length=0}function o(d){n.push(d)}function s(d){r.push(d)}function a(){e.setup(n)}function c(d){e.setupView(n,d)}const h={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:h,setupLights:a,setupLightsView:c,pushLight:o,pushShadow:s}}function UDe(t){let e=new WeakMap;function n(i,o=0){const s=e.get(i);let a;return s===void 0?(a=new rG(t),e.set(i,[a])):o>=s.length?(a=new rG(t),s.push(a)):a=s[o],a}function r(){e=new WeakMap}return{get:n,dispose:r}}const jDe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,GDe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function VDe(t,e,n){let r=new xO;const i=new qr,o=new qr,s=new iu,a=new t3e({depthPacking:yAe}),c=new n3e,h={},d=n.maxTextureSize,v={[kv]:vf,[vf]:kv,[dp]:dp},w=new ic({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qr},radius:{value:4}},vertexShader:jDe,fragmentShader:GDe}),_=w.clone();_.defines.HORIZONTAL_PASS=1;const E=new qh;E.setAttribute("position",new ol(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Uc(E,w),D=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ZX;let A=this.type;this.render=function(G,W,X){if(D.enabled===!1||D.autoUpdate===!1&&D.needsUpdate===!1||G.length===0)return;const K=t.getRenderTarget(),k=t.getActiveCubeFace(),$=t.getActiveMipmapLevel(),Q=t.state;Q.setBlending(Vh),Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);const ie=A!==nm&&this.type===nm,ae=A===nm&&this.type!==nm;for(let ce=0,se=G.length;ce<se;ce++){const Se=G[ce],ye=Se.shadow;if(ye===void 0){console.warn("THREE.WebGLShadowMap:",Se,"has no shadow.");continue}if(ye.autoUpdate===!1&&ye.needsUpdate===!1)continue;i.copy(ye.mapSize);const Te=ye.getFrameExtents();if(i.multiply(Te),o.copy(ye.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(o.x=Math.floor(d/Te.x),i.x=o.x*Te.x,ye.mapSize.x=o.x),i.y>d&&(o.y=Math.floor(d/Te.y),i.y=o.y*Te.y,ye.mapSize.y=o.y)),ye.map===null||ie===!0||ae===!0){const Ie=this.type!==nm?{minFilter:xh,magFilter:xh}:{};ye.map!==null&&ye.map.dispose(),ye.map=new $f(i.x,i.y,Ie),ye.map.texture.name=Se.name+".shadowMap",ye.camera.updateProjectionMatrix()}t.setRenderTarget(ye.map),t.clear();const pe=ye.getViewportCount();for(let Ie=0;Ie<pe;Ie++){const me=ye.getViewport(Ie);s.set(o.x*me.x,o.y*me.y,o.x*me.z,o.y*me.w),Q.viewport(s),ye.updateMatrices(Se,Ie),r=ye.getFrustum(),N(W,X,ye.camera,Se,this.type)}ye.isPointLightShadow!==!0&&this.type===nm&&F(ye,X),ye.needsUpdate=!1}A=this.type,D.needsUpdate=!1,t.setRenderTarget(K,k,$)};function F(G,W){const X=e.update(M);w.defines.VSM_SAMPLES!==G.blurSamples&&(w.defines.VSM_SAMPLES=G.blurSamples,_.defines.VSM_SAMPLES=G.blurSamples,w.needsUpdate=!0,_.needsUpdate=!0),G.mapPass===null&&(G.mapPass=new $f(i.x,i.y)),w.uniforms.shadow_pass.value=G.map.texture,w.uniforms.resolution.value=G.mapSize,w.uniforms.radius.value=G.radius,t.setRenderTarget(G.mapPass),t.clear(),t.renderBufferDirect(W,null,X,w,M,null),_.uniforms.shadow_pass.value=G.mapPass.texture,_.uniforms.resolution.value=G.mapSize,_.uniforms.radius.value=G.radius,t.setRenderTarget(G.map),t.clear(),t.renderBufferDirect(W,null,X,_,M,null)}function O(G,W,X,K){let k=null;const $=X.isPointLight===!0?G.customDistanceMaterial:G.customDepthMaterial;if($!==void 0)k=$;else if(k=X.isPointLight===!0?c:a,t.localClippingEnabled&&W.clipShadows===!0&&Array.isArray(W.clippingPlanes)&&W.clippingPlanes.length!==0||W.displacementMap&&W.displacementScale!==0||W.alphaMap&&W.alphaTest>0||W.map&&W.alphaTest>0){const Q=k.uuid,ie=W.uuid;let ae=h[Q];ae===void 0&&(ae={},h[Q]=ae);let ce=ae[ie];ce===void 0&&(ce=k.clone(),ae[ie]=ce,W.addEventListener("dispose",H)),k=ce}if(k.visible=W.visible,k.wireframe=W.wireframe,K===nm?k.side=W.shadowSide!==null?W.shadowSide:W.side:k.side=W.shadowSide!==null?W.shadowSide:v[W.side],k.alphaMap=W.alphaMap,k.alphaTest=W.alphaTest,k.map=W.map,k.clipShadows=W.clipShadows,k.clippingPlanes=W.clippingPlanes,k.clipIntersection=W.clipIntersection,k.displacementMap=W.displacementMap,k.displacementScale=W.displacementScale,k.displacementBias=W.displacementBias,k.wireframeLinewidth=W.wireframeLinewidth,k.linewidth=W.linewidth,X.isPointLight===!0&&k.isMeshDistanceMaterial===!0){const Q=t.properties.get(k);Q.light=X}return k}function N(G,W,X,K,k){if(G.visible===!1)return;if(G.layers.test(W.layers)&&(G.isMesh||G.isLine||G.isPoints)&&(G.castShadow||G.receiveShadow&&k===nm)&&(!G.frustumCulled||r.intersectsObject(G))){G.modelViewMatrix.multiplyMatrices(X.matrixWorldInverse,G.matrixWorld);const ie=e.update(G),ae=G.material;if(Array.isArray(ae)){const ce=ie.groups;for(let se=0,Se=ce.length;se<Se;se++){const ye=ce[se],Te=ae[ye.materialIndex];if(Te&&Te.visible){const pe=O(G,Te,K,k);G.onBeforeShadow(t,G,W,X,ie,pe,ye),t.renderBufferDirect(X,null,ie,pe,G,ye),G.onAfterShadow(t,G,W,X,ie,pe,ye)}}}else if(ae.visible){const ce=O(G,ae,K,k);G.onBeforeShadow(t,G,W,X,ie,ce,null),t.renderBufferDirect(X,null,ie,ce,G,null),G.onAfterShadow(t,G,W,X,ie,ce,null)}}const Q=G.children;for(let ie=0,ae=Q.length;ie<ae;ie++)N(Q[ie],W,X,K,k)}function H(G){G.target.removeEventListener("dispose",H);for(const X in h){const K=h[X],k=G.target.uuid;k in K&&(K[k].dispose(),delete K[k])}}}const HDe={[CL]:ML,[AL]:IL,[RL]:DL,[_x]:PL,[ML]:CL,[IL]:AL,[DL]:RL,[PL]:_x};function qDe(t,e){function n(){let He=!1;const mt=new iu;let it=null;const xt=new iu(0,0,0,0);return{setMask:function(Tt){it!==Tt&&!He&&(t.colorMask(Tt,Tt,Tt,Tt),it=Tt)},setLocked:function(Tt){He=Tt},setClear:function(Tt,kt,Jt,rn,Yt){Yt===!0&&(Tt*=rn,kt*=rn,Jt*=rn),mt.set(Tt,kt,Jt,rn),xt.equals(mt)===!1&&(t.clearColor(Tt,kt,Jt,rn),xt.copy(mt))},reset:function(){He=!1,it=null,xt.set(-1,0,0,0)}}}function r(){let He=!1,mt=!1,it=null,xt=null,Tt=null;return{setReversed:function(kt){if(mt!==kt){const Jt=e.get("EXT_clip_control");mt?Jt.clipControlEXT(Jt.LOWER_LEFT_EXT,Jt.ZERO_TO_ONE_EXT):Jt.clipControlEXT(Jt.LOWER_LEFT_EXT,Jt.NEGATIVE_ONE_TO_ONE_EXT);const rn=Tt;Tt=null,this.setClear(rn)}mt=kt},getReversed:function(){return mt},setTest:function(kt){kt?We(t.DEPTH_TEST):Ae(t.DEPTH_TEST)},setMask:function(kt){it!==kt&&!He&&(t.depthMask(kt),it=kt)},setFunc:function(kt){if(mt&&(kt=HDe[kt]),xt!==kt){switch(kt){case CL:t.depthFunc(t.NEVER);break;case ML:t.depthFunc(t.ALWAYS);break;case AL:t.depthFunc(t.LESS);break;case _x:t.depthFunc(t.LEQUAL);break;case RL:t.depthFunc(t.EQUAL);break;case PL:t.depthFunc(t.GEQUAL);break;case IL:t.depthFunc(t.GREATER);break;case DL:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}xt=kt}},setLocked:function(kt){He=kt},setClear:function(kt){Tt!==kt&&(mt&&(kt=1-kt),t.clearDepth(kt),Tt=kt)},reset:function(){He=!1,it=null,xt=null,Tt=null,mt=!1}}}function i(){let He=!1,mt=null,it=null,xt=null,Tt=null,kt=null,Jt=null,rn=null,Yt=null;return{setTest:function(Qn){He||(Qn?We(t.STENCIL_TEST):Ae(t.STENCIL_TEST))},setMask:function(Qn){mt!==Qn&&!He&&(t.stencilMask(Qn),mt=Qn)},setFunc:function(Qn,An,jt){(it!==Qn||xt!==An||Tt!==jt)&&(t.stencilFunc(Qn,An,jt),it=Qn,xt=An,Tt=jt)},setOp:function(Qn,An,jt){(kt!==Qn||Jt!==An||rn!==jt)&&(t.stencilOp(Qn,An,jt),kt=Qn,Jt=An,rn=jt)},setLocked:function(Qn){He=Qn},setClear:function(Qn){Yt!==Qn&&(t.clearStencil(Qn),Yt=Qn)},reset:function(){He=!1,mt=null,it=null,xt=null,Tt=null,kt=null,Jt=null,rn=null,Yt=null}}}const o=new n,s=new r,a=new i,c=new WeakMap,h=new WeakMap;let d={},v={},w=new WeakMap,_=[],E=null,M=!1,D=null,A=null,F=null,O=null,N=null,H=null,G=null,W=new Ji(0,0,0),X=0,K=!1,k=null,$=null,Q=null,ie=null,ae=null;const ce=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let se=!1,Se=0;const ye=t.getParameter(t.VERSION);ye.indexOf("WebGL")!==-1?(Se=parseFloat(/^WebGL (\d)/.exec(ye)[1]),se=Se>=1):ye.indexOf("OpenGL ES")!==-1&&(Se=parseFloat(/^OpenGL ES (\d)/.exec(ye)[1]),se=Se>=2);let Te=null,pe={};const Ie=t.getParameter(t.SCISSOR_BOX),me=t.getParameter(t.VIEWPORT),xe=new iu().fromArray(Ie),ve=new iu().fromArray(me);function Ee(He,mt,it,xt){const Tt=new Uint8Array(4),kt=t.createTexture();t.bindTexture(He,kt),t.texParameteri(He,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(He,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Jt=0;Jt<it;Jt++)He===t.TEXTURE_3D||He===t.TEXTURE_2D_ARRAY?t.texImage3D(mt,0,t.RGBA,1,1,xt,0,t.RGBA,t.UNSIGNED_BYTE,Tt):t.texImage2D(mt+Jt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Tt);return kt}const De={};De[t.TEXTURE_2D]=Ee(t.TEXTURE_2D,t.TEXTURE_2D,1),De[t.TEXTURE_CUBE_MAP]=Ee(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),De[t.TEXTURE_2D_ARRAY]=Ee(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),De[t.TEXTURE_3D]=Ee(t.TEXTURE_3D,t.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),We(t.DEPTH_TEST),s.setFunc(_x),Ze(!1),wt(tj),We(t.CULL_FACE),Ve(Vh);function We(He){d[He]!==!0&&(t.enable(He),d[He]=!0)}function Ae(He){d[He]!==!1&&(t.disable(He),d[He]=!1)}function ut(He,mt){return v[He]!==mt?(t.bindFramebuffer(He,mt),v[He]=mt,He===t.DRAW_FRAMEBUFFER&&(v[t.FRAMEBUFFER]=mt),He===t.FRAMEBUFFER&&(v[t.DRAW_FRAMEBUFFER]=mt),!0):!1}function pt(He,mt){let it=_,xt=!1;if(He){it=w.get(mt),it===void 0&&(it=[],w.set(mt,it));const Tt=He.textures;if(it.length!==Tt.length||it[0]!==t.COLOR_ATTACHMENT0){for(let kt=0,Jt=Tt.length;kt<Jt;kt++)it[kt]=t.COLOR_ATTACHMENT0+kt;it.length=Tt.length,xt=!0}}else it[0]!==t.BACK&&(it[0]=t.BACK,xt=!0);xt&&t.drawBuffers(it)}function st(He){return E!==He?(t.useProgram(He),E=He,!0):!1}const Ce={[im]:t.FUNC_ADD,[QMe]:t.FUNC_SUBTRACT,[eAe]:t.FUNC_REVERSE_SUBTRACT};Ce[tAe]=t.MIN,Ce[nAe]=t.MAX;const It={[SL]:t.ZERO,[rAe]:t.ONE,[iAe]:t.SRC_COLOR,[EL]:t.SRC_ALPHA,[lAe]:t.SRC_ALPHA_SATURATE,[eY]:t.DST_COLOR,[QX]:t.DST_ALPHA,[aAe]:t.ONE_MINUS_SRC_COLOR,[TL]:t.ONE_MINUS_SRC_ALPHA,[sAe]:t.ONE_MINUS_DST_COLOR,[oAe]:t.ONE_MINUS_DST_ALPHA,[uAe]:t.CONSTANT_COLOR,[cAe]:t.ONE_MINUS_CONSTANT_COLOR,[hAe]:t.CONSTANT_ALPHA,[fAe]:t.ONE_MINUS_CONSTANT_ALPHA};function Ve(He,mt,it,xt,Tt,kt,Jt,rn,Yt,Qn){if(He===Vh){M===!0&&(Ae(t.BLEND),M=!1);return}if(M===!1&&(We(t.BLEND),M=!0),He!==JX){if(He!==D||Qn!==K){if((A!==im||N!==im)&&(t.blendEquation(t.FUNC_ADD),A=im,N=im),Qn)switch(He){case K1:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case wL:t.blendFunc(t.ONE,t.ONE);break;case nj:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case rj:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",He);break}else switch(He){case K1:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case wL:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case nj:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case rj:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",He);break}F=null,O=null,H=null,G=null,W.set(0,0,0),X=0,D=He,K=Qn}return}Tt=Tt||mt,kt=kt||it,Jt=Jt||xt,(mt!==A||Tt!==N)&&(t.blendEquationSeparate(Ce[mt],Ce[Tt]),A=mt,N=Tt),(it!==F||xt!==O||kt!==H||Jt!==G)&&(t.blendFuncSeparate(It[it],It[xt],It[kt],It[Jt]),F=it,O=xt,H=kt,G=Jt),(rn.equals(W)===!1||Yt!==X)&&(t.blendColor(rn.r,rn.g,rn.b,Yt),W.copy(rn),X=Yt),D=He,K=!1}function yt(He,mt){He.side===dp?Ae(t.CULL_FACE):We(t.CULL_FACE);let it=He.side===vf;mt&&(it=!it),Ze(it),He.blending===K1&&He.transparent===!1?Ve(Vh):Ve(He.blending,He.blendEquation,He.blendSrc,He.blendDst,He.blendEquationAlpha,He.blendSrcAlpha,He.blendDstAlpha,He.blendColor,He.blendAlpha,He.premultipliedAlpha),s.setFunc(He.depthFunc),s.setTest(He.depthTest),s.setMask(He.depthWrite),o.setMask(He.colorWrite);const xt=He.stencilWrite;a.setTest(xt),xt&&(a.setMask(He.stencilWriteMask),a.setFunc(He.stencilFunc,He.stencilRef,He.stencilFuncMask),a.setOp(He.stencilFail,He.stencilZFail,He.stencilZPass)),ht(He.polygonOffset,He.polygonOffsetFactor,He.polygonOffsetUnits),He.alphaToCoverage===!0?We(t.SAMPLE_ALPHA_TO_COVERAGE):Ae(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ze(He){k!==He&&(He?t.frontFace(t.CW):t.frontFace(t.CCW),k=He)}function wt(He){He!==KMe?(We(t.CULL_FACE),He!==$&&(He===tj?t.cullFace(t.BACK):He===JMe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ae(t.CULL_FACE),$=He}function Ut(He){He!==Q&&(se&&t.lineWidth(He),Q=He)}function ht(He,mt,it){He?(We(t.POLYGON_OFFSET_FILL),(ie!==mt||ae!==it)&&(t.polygonOffset(mt,it),ie=mt,ae=it)):Ae(t.POLYGON_OFFSET_FILL)}function qt(He){He?We(t.SCISSOR_TEST):Ae(t.SCISSOR_TEST)}function Ye(He){He===void 0&&(He=t.TEXTURE0+ce-1),Te!==He&&(t.activeTexture(He),Te=He)}function Re(He,mt,it){it===void 0&&(Te===null?it=t.TEXTURE0+ce-1:it=Te);let xt=pe[it];xt===void 0&&(xt={type:void 0,texture:void 0},pe[it]=xt),(xt.type!==He||xt.texture!==mt)&&(Te!==it&&(t.activeTexture(it),Te=it),t.bindTexture(He,mt||De[He]),xt.type=He,xt.texture=mt)}function Pt(){const He=pe[Te];He!==void 0&&He.type!==void 0&&(t.bindTexture(He.type,null),He.type=void 0,He.texture=void 0)}function Dt(){try{t.compressedTexImage2D(...arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function At(){try{t.compressedTexImage3D(...arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function Bt(){try{t.texSubImage2D(...arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function gn(){try{t.texSubImage3D(...arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function Zt(){try{t.compressedTexSubImage2D(...arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function cn(){try{t.compressedTexSubImage3D(...arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function $t(){try{t.texStorage2D(...arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function Et(){try{t.texStorage3D(...arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function qn(){try{t.texImage2D(...arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function Dn(){try{t.texImage3D(...arguments)}catch(He){console.error("THREE.WebGLState:",He)}}function sr(He){xe.equals(He)===!1&&(t.scissor(He.x,He.y,He.z,He.w),xe.copy(He))}function rt(He){ve.equals(He)===!1&&(t.viewport(He.x,He.y,He.z,He.w),ve.copy(He))}function ze(He,mt){let it=h.get(mt);it===void 0&&(it=new WeakMap,h.set(mt,it));let xt=it.get(He);xt===void 0&&(xt=t.getUniformBlockIndex(mt,He.name),it.set(He,xt))}function Xe(He,mt){const xt=h.get(mt).get(He);c.get(mt)!==xt&&(t.uniformBlockBinding(mt,xt,He.__bindingPointIndex),c.set(mt,xt))}function Fe(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},Te=null,pe={},v={},w=new WeakMap,_=[],E=null,M=!1,D=null,A=null,F=null,O=null,N=null,H=null,G=null,W=new Ji(0,0,0),X=0,K=!1,k=null,$=null,Q=null,ie=null,ae=null,xe.set(0,0,t.canvas.width,t.canvas.height),ve.set(0,0,t.canvas.width,t.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:We,disable:Ae,bindFramebuffer:ut,drawBuffers:pt,useProgram:st,setBlending:Ve,setMaterial:yt,setFlipSided:Ze,setCullFace:wt,setLineWidth:Ut,setPolygonOffset:ht,setScissorTest:qt,activeTexture:Ye,bindTexture:Re,unbindTexture:Pt,compressedTexImage2D:Dt,compressedTexImage3D:At,texImage2D:qn,texImage3D:Dn,updateUBOMapping:ze,uniformBlockBinding:Xe,texStorage2D:$t,texStorage3D:Et,texSubImage2D:Bt,texSubImage3D:gn,compressedTexSubImage2D:Zt,compressedTexSubImage3D:cn,scissor:sr,viewport:rt,reset:Fe}}function $De(t,e,n,r,i,o,s){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new qr,d=new WeakMap;let v;const w=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(Ye,Re){return _?new OffscreenCanvas(Ye,Re):JC("canvas")}function M(Ye,Re,Pt){let Dt=1;const At=qt(Ye);if((At.width>Pt||At.height>Pt)&&(Dt=Pt/Math.max(At.width,At.height)),Dt<1)if(typeof HTMLImageElement<"u"&&Ye instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ye instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ye instanceof ImageBitmap||typeof VideoFrame<"u"&&Ye instanceof VideoFrame){const Bt=Math.floor(Dt*At.width),gn=Math.floor(Dt*At.height);v===void 0&&(v=E(Bt,gn));const Zt=Re?E(Bt,gn):v;return Zt.width=Bt,Zt.height=gn,Zt.getContext("2d").drawImage(Ye,0,0,Bt,gn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+At.width+"x"+At.height+") to ("+Bt+"x"+gn+")."),Zt}else return"data"in Ye&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+At.width+"x"+At.height+")."),Ye;return Ye}function D(Ye){return Ye.generateMipmaps}function A(Ye){t.generateMipmap(Ye)}function F(Ye){return Ye.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:Ye.isWebGL3DRenderTarget?t.TEXTURE_3D:Ye.isWebGLArrayRenderTarget||Ye.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function O(Ye,Re,Pt,Dt,At=!1){if(Ye!==null){if(t[Ye]!==void 0)return t[Ye];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ye+"'")}let Bt=Re;if(Re===t.RED&&(Pt===t.FLOAT&&(Bt=t.R32F),Pt===t.HALF_FLOAT&&(Bt=t.R16F),Pt===t.UNSIGNED_BYTE&&(Bt=t.R8)),Re===t.RED_INTEGER&&(Pt===t.UNSIGNED_BYTE&&(Bt=t.R8UI),Pt===t.UNSIGNED_SHORT&&(Bt=t.R16UI),Pt===t.UNSIGNED_INT&&(Bt=t.R32UI),Pt===t.BYTE&&(Bt=t.R8I),Pt===t.SHORT&&(Bt=t.R16I),Pt===t.INT&&(Bt=t.R32I)),Re===t.RG&&(Pt===t.FLOAT&&(Bt=t.RG32F),Pt===t.HALF_FLOAT&&(Bt=t.RG16F),Pt===t.UNSIGNED_BYTE&&(Bt=t.RG8)),Re===t.RG_INTEGER&&(Pt===t.UNSIGNED_BYTE&&(Bt=t.RG8UI),Pt===t.UNSIGNED_SHORT&&(Bt=t.RG16UI),Pt===t.UNSIGNED_INT&&(Bt=t.RG32UI),Pt===t.BYTE&&(Bt=t.RG8I),Pt===t.SHORT&&(Bt=t.RG16I),Pt===t.INT&&(Bt=t.RG32I)),Re===t.RGB_INTEGER&&(Pt===t.UNSIGNED_BYTE&&(Bt=t.RGB8UI),Pt===t.UNSIGNED_SHORT&&(Bt=t.RGB16UI),Pt===t.UNSIGNED_INT&&(Bt=t.RGB32UI),Pt===t.BYTE&&(Bt=t.RGB8I),Pt===t.SHORT&&(Bt=t.RGB16I),Pt===t.INT&&(Bt=t.RGB32I)),Re===t.RGBA_INTEGER&&(Pt===t.UNSIGNED_BYTE&&(Bt=t.RGBA8UI),Pt===t.UNSIGNED_SHORT&&(Bt=t.RGBA16UI),Pt===t.UNSIGNED_INT&&(Bt=t.RGBA32UI),Pt===t.BYTE&&(Bt=t.RGBA8I),Pt===t.SHORT&&(Bt=t.RGBA16I),Pt===t.INT&&(Bt=t.RGBA32I)),Re===t.RGB&&Pt===t.UNSIGNED_INT_5_9_9_9_REV&&(Bt=t.RGB9_E5),Re===t.RGBA){const gn=At?ZC:Po.getTransfer(Dt);Pt===t.FLOAT&&(Bt=t.RGBA32F),Pt===t.HALF_FLOAT&&(Bt=t.RGBA16F),Pt===t.UNSIGNED_BYTE&&(Bt=gn===xs?t.SRGB8_ALPHA8:t.RGBA8),Pt===t.UNSIGNED_SHORT_4_4_4_4&&(Bt=t.RGBA4),Pt===t.UNSIGNED_SHORT_5_5_5_1&&(Bt=t.RGB5_A1)}return(Bt===t.R16F||Bt===t.R32F||Bt===t.RG16F||Bt===t.RG32F||Bt===t.RGBA16F||Bt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Bt}function N(Ye,Re){let Pt;return Ye?Re===null||Re===dy||Re===py?Pt=t.DEPTH24_STENCIL8:Re===ig?Pt=t.DEPTH32F_STENCIL8:Re===Iw&&(Pt=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Re===null||Re===dy||Re===py?Pt=t.DEPTH_COMPONENT24:Re===ig?Pt=t.DEPTH_COMPONENT32F:Re===Iw&&(Pt=t.DEPTH_COMPONENT16),Pt}function H(Ye,Re){return D(Ye)===!0||Ye.isFramebufferTexture&&Ye.minFilter!==xh&&Ye.minFilter!==mp?Math.log2(Math.max(Re.width,Re.height))+1:Ye.mipmaps!==void 0&&Ye.mipmaps.length>0?Ye.mipmaps.length:Ye.isCompressedTexture&&Array.isArray(Ye.image)?Re.mipmaps.length:1}function G(Ye){const Re=Ye.target;Re.removeEventListener("dispose",G),X(Re),Re.isVideoTexture&&d.delete(Re)}function W(Ye){const Re=Ye.target;Re.removeEventListener("dispose",W),k(Re)}function X(Ye){const Re=r.get(Ye);if(Re.__webglInit===void 0)return;const Pt=Ye.source,Dt=w.get(Pt);if(Dt){const At=Dt[Re.__cacheKey];At.usedTimes--,At.usedTimes===0&&K(Ye),Object.keys(Dt).length===0&&w.delete(Pt)}r.remove(Ye)}function K(Ye){const Re=r.get(Ye);t.deleteTexture(Re.__webglTexture);const Pt=Ye.source,Dt=w.get(Pt);delete Dt[Re.__cacheKey],s.memory.textures--}function k(Ye){const Re=r.get(Ye);if(Ye.depthTexture&&(Ye.depthTexture.dispose(),r.remove(Ye.depthTexture)),Ye.isWebGLCubeRenderTarget)for(let Dt=0;Dt<6;Dt++){if(Array.isArray(Re.__webglFramebuffer[Dt]))for(let At=0;At<Re.__webglFramebuffer[Dt].length;At++)t.deleteFramebuffer(Re.__webglFramebuffer[Dt][At]);else t.deleteFramebuffer(Re.__webglFramebuffer[Dt]);Re.__webglDepthbuffer&&t.deleteRenderbuffer(Re.__webglDepthbuffer[Dt])}else{if(Array.isArray(Re.__webglFramebuffer))for(let Dt=0;Dt<Re.__webglFramebuffer.length;Dt++)t.deleteFramebuffer(Re.__webglFramebuffer[Dt]);else t.deleteFramebuffer(Re.__webglFramebuffer);if(Re.__webglDepthbuffer&&t.deleteRenderbuffer(Re.__webglDepthbuffer),Re.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Re.__webglMultisampledFramebuffer),Re.__webglColorRenderbuffer)for(let Dt=0;Dt<Re.__webglColorRenderbuffer.length;Dt++)Re.__webglColorRenderbuffer[Dt]&&t.deleteRenderbuffer(Re.__webglColorRenderbuffer[Dt]);Re.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Re.__webglDepthRenderbuffer)}const Pt=Ye.textures;for(let Dt=0,At=Pt.length;Dt<At;Dt++){const Bt=r.get(Pt[Dt]);Bt.__webglTexture&&(t.deleteTexture(Bt.__webglTexture),s.memory.textures--),r.remove(Pt[Dt])}r.remove(Ye)}let $=0;function Q(){$=0}function ie(){const Ye=$;return Ye>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Ye+" texture units while this GPU supports only "+i.maxTextures),$+=1,Ye}function ae(Ye){const Re=[];return Re.push(Ye.wrapS),Re.push(Ye.wrapT),Re.push(Ye.wrapR||0),Re.push(Ye.magFilter),Re.push(Ye.minFilter),Re.push(Ye.anisotropy),Re.push(Ye.internalFormat),Re.push(Ye.format),Re.push(Ye.type),Re.push(Ye.generateMipmaps),Re.push(Ye.premultiplyAlpha),Re.push(Ye.flipY),Re.push(Ye.unpackAlignment),Re.push(Ye.colorSpace),Re.join()}function ce(Ye,Re){const Pt=r.get(Ye);if(Ye.isVideoTexture&&Ut(Ye),Ye.isRenderTargetTexture===!1&&Ye.version>0&&Pt.__version!==Ye.version){const Dt=Ye.image;if(Dt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Dt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ve(Pt,Ye,Re);return}}n.bindTexture(t.TEXTURE_2D,Pt.__webglTexture,t.TEXTURE0+Re)}function se(Ye,Re){const Pt=r.get(Ye);if(Ye.version>0&&Pt.__version!==Ye.version){ve(Pt,Ye,Re);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Pt.__webglTexture,t.TEXTURE0+Re)}function Se(Ye,Re){const Pt=r.get(Ye);if(Ye.version>0&&Pt.__version!==Ye.version){ve(Pt,Ye,Re);return}n.bindTexture(t.TEXTURE_3D,Pt.__webglTexture,t.TEXTURE0+Re)}function ye(Ye,Re){const Pt=r.get(Ye);if(Ye.version>0&&Pt.__version!==Ye.version){Ee(Pt,Ye,Re);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Pt.__webglTexture,t.TEXTURE0+Re)}const Te={[wx]:t.REPEAT,[yv]:t.CLAMP_TO_EDGE,[YC]:t.MIRRORED_REPEAT},pe={[xh]:t.NEAREST,[uY]:t.NEAREST_MIPMAP_NEAREST,[P2]:t.NEAREST_MIPMAP_LINEAR,[mp]:t.LINEAR,[HT]:t.LINEAR_MIPMAP_NEAREST,[_v]:t.LINEAR_MIPMAP_LINEAR},Ie={[xAe]:t.NEVER,[CAe]:t.ALWAYS,[bAe]:t.LESS,[_Y]:t.LEQUAL,[wAe]:t.EQUAL,[TAe]:t.GEQUAL,[SAe]:t.GREATER,[EAe]:t.NOTEQUAL};function me(Ye,Re){if(Re.type===ig&&e.has("OES_texture_float_linear")===!1&&(Re.magFilter===mp||Re.magFilter===HT||Re.magFilter===P2||Re.magFilter===_v||Re.minFilter===mp||Re.minFilter===HT||Re.minFilter===P2||Re.minFilter===_v)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(Ye,t.TEXTURE_WRAP_S,Te[Re.wrapS]),t.texParameteri(Ye,t.TEXTURE_WRAP_T,Te[Re.wrapT]),(Ye===t.TEXTURE_3D||Ye===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ye,t.TEXTURE_WRAP_R,Te[Re.wrapR]),t.texParameteri(Ye,t.TEXTURE_MAG_FILTER,pe[Re.magFilter]),t.texParameteri(Ye,t.TEXTURE_MIN_FILTER,pe[Re.minFilter]),Re.compareFunction&&(t.texParameteri(Ye,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Ye,t.TEXTURE_COMPARE_FUNC,Ie[Re.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Re.magFilter===xh||Re.minFilter!==P2&&Re.minFilter!==_v||Re.type===ig&&e.has("OES_texture_float_linear")===!1)return;if(Re.anisotropy>1||r.get(Re).__currentAnisotropy){const Pt=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Ye,Pt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Re.anisotropy,i.getMaxAnisotropy())),r.get(Re).__currentAnisotropy=Re.anisotropy}}}function xe(Ye,Re){let Pt=!1;Ye.__webglInit===void 0&&(Ye.__webglInit=!0,Re.addEventListener("dispose",G));const Dt=Re.source;let At=w.get(Dt);At===void 0&&(At={},w.set(Dt,At));const Bt=ae(Re);if(Bt!==Ye.__cacheKey){At[Bt]===void 0&&(At[Bt]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,Pt=!0),At[Bt].usedTimes++;const gn=At[Ye.__cacheKey];gn!==void 0&&(At[Ye.__cacheKey].usedTimes--,gn.usedTimes===0&&K(Re)),Ye.__cacheKey=Bt,Ye.__webglTexture=At[Bt].texture}return Pt}function ve(Ye,Re,Pt){let Dt=t.TEXTURE_2D;(Re.isDataArrayTexture||Re.isCompressedArrayTexture)&&(Dt=t.TEXTURE_2D_ARRAY),Re.isData3DTexture&&(Dt=t.TEXTURE_3D);const At=xe(Ye,Re),Bt=Re.source;n.bindTexture(Dt,Ye.__webglTexture,t.TEXTURE0+Pt);const gn=r.get(Bt);if(Bt.version!==gn.__version||At===!0){n.activeTexture(t.TEXTURE0+Pt);const Zt=Po.getPrimaries(Po.workingColorSpace),cn=Re.colorSpace===am?null:Po.getPrimaries(Re.colorSpace),$t=Re.colorSpace===am||Zt===cn?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Re.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Re.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,$t);let Et=M(Re.image,!1,i.maxTextureSize);Et=ht(Re,Et);const qn=o.convert(Re.format,Re.colorSpace),Dn=o.convert(Re.type);let sr=O(Re.internalFormat,qn,Dn,Re.colorSpace,Re.isVideoTexture);me(Dt,Re);let rt;const ze=Re.mipmaps,Xe=Re.isVideoTexture!==!0,Fe=gn.__version===void 0||At===!0,He=Bt.dataReady,mt=H(Re,Et);if(Re.isDepthTexture)sr=N(Re.format===gy,Re.type),Fe&&(Xe?n.texStorage2D(t.TEXTURE_2D,1,sr,Et.width,Et.height):n.texImage2D(t.TEXTURE_2D,0,sr,Et.width,Et.height,0,qn,Dn,null));else if(Re.isDataTexture)if(ze.length>0){Xe&&Fe&&n.texStorage2D(t.TEXTURE_2D,mt,sr,ze[0].width,ze[0].height);for(let it=0,xt=ze.length;it<xt;it++)rt=ze[it],Xe?He&&n.texSubImage2D(t.TEXTURE_2D,it,0,0,rt.width,rt.height,qn,Dn,rt.data):n.texImage2D(t.TEXTURE_2D,it,sr,rt.width,rt.height,0,qn,Dn,rt.data);Re.generateMipmaps=!1}else Xe?(Fe&&n.texStorage2D(t.TEXTURE_2D,mt,sr,Et.width,Et.height),He&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Et.width,Et.height,qn,Dn,Et.data)):n.texImage2D(t.TEXTURE_2D,0,sr,Et.width,Et.height,0,qn,Dn,Et.data);else if(Re.isCompressedTexture)if(Re.isCompressedArrayTexture){Xe&&Fe&&n.texStorage3D(t.TEXTURE_2D_ARRAY,mt,sr,ze[0].width,ze[0].height,Et.depth);for(let it=0,xt=ze.length;it<xt;it++)if(rt=ze[it],Re.format!==Td)if(qn!==null)if(Xe){if(He)if(Re.layerUpdates.size>0){const Tt=Nj(rt.width,rt.height,Re.format,Re.type);for(const kt of Re.layerUpdates){const Jt=rt.data.subarray(kt*Tt/rt.data.BYTES_PER_ELEMENT,(kt+1)*Tt/rt.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,it,0,0,kt,rt.width,rt.height,1,qn,Jt)}Re.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,it,0,0,0,rt.width,rt.height,Et.depth,qn,rt.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,it,sr,rt.width,rt.height,Et.depth,0,rt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Xe?He&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,it,0,0,0,rt.width,rt.height,Et.depth,qn,Dn,rt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,it,sr,rt.width,rt.height,Et.depth,0,qn,Dn,rt.data)}else{Xe&&Fe&&n.texStorage2D(t.TEXTURE_2D,mt,sr,ze[0].width,ze[0].height);for(let it=0,xt=ze.length;it<xt;it++)rt=ze[it],Re.format!==Td?qn!==null?Xe?He&&n.compressedTexSubImage2D(t.TEXTURE_2D,it,0,0,rt.width,rt.height,qn,rt.data):n.compressedTexImage2D(t.TEXTURE_2D,it,sr,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xe?He&&n.texSubImage2D(t.TEXTURE_2D,it,0,0,rt.width,rt.height,qn,Dn,rt.data):n.texImage2D(t.TEXTURE_2D,it,sr,rt.width,rt.height,0,qn,Dn,rt.data)}else if(Re.isDataArrayTexture)if(Xe){if(Fe&&n.texStorage3D(t.TEXTURE_2D_ARRAY,mt,sr,Et.width,Et.height,Et.depth),He)if(Re.layerUpdates.size>0){const it=Nj(Et.width,Et.height,Re.format,Re.type);for(const xt of Re.layerUpdates){const Tt=Et.data.subarray(xt*it/Et.data.BYTES_PER_ELEMENT,(xt+1)*it/Et.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,xt,Et.width,Et.height,1,qn,Dn,Tt)}Re.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Et.width,Et.height,Et.depth,qn,Dn,Et.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,sr,Et.width,Et.height,Et.depth,0,qn,Dn,Et.data);else if(Re.isData3DTexture)Xe?(Fe&&n.texStorage3D(t.TEXTURE_3D,mt,sr,Et.width,Et.height,Et.depth),He&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Et.width,Et.height,Et.depth,qn,Dn,Et.data)):n.texImage3D(t.TEXTURE_3D,0,sr,Et.width,Et.height,Et.depth,0,qn,Dn,Et.data);else if(Re.isFramebufferTexture){if(Fe)if(Xe)n.texStorage2D(t.TEXTURE_2D,mt,sr,Et.width,Et.height);else{let it=Et.width,xt=Et.height;for(let Tt=0;Tt<mt;Tt++)n.texImage2D(t.TEXTURE_2D,Tt,sr,it,xt,0,qn,Dn,null),it>>=1,xt>>=1}}else if(ze.length>0){if(Xe&&Fe){const it=qt(ze[0]);n.texStorage2D(t.TEXTURE_2D,mt,sr,it.width,it.height)}for(let it=0,xt=ze.length;it<xt;it++)rt=ze[it],Xe?He&&n.texSubImage2D(t.TEXTURE_2D,it,0,0,qn,Dn,rt):n.texImage2D(t.TEXTURE_2D,it,sr,qn,Dn,rt);Re.generateMipmaps=!1}else if(Xe){if(Fe){const it=qt(Et);n.texStorage2D(t.TEXTURE_2D,mt,sr,it.width,it.height)}He&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,qn,Dn,Et)}else n.texImage2D(t.TEXTURE_2D,0,sr,qn,Dn,Et);D(Re)&&A(Dt),gn.__version=Bt.version,Re.onUpdate&&Re.onUpdate(Re)}Ye.__version=Re.version}function Ee(Ye,Re,Pt){if(Re.image.length!==6)return;const Dt=xe(Ye,Re),At=Re.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Ye.__webglTexture,t.TEXTURE0+Pt);const Bt=r.get(At);if(At.version!==Bt.__version||Dt===!0){n.activeTexture(t.TEXTURE0+Pt);const gn=Po.getPrimaries(Po.workingColorSpace),Zt=Re.colorSpace===am?null:Po.getPrimaries(Re.colorSpace),cn=Re.colorSpace===am||gn===Zt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Re.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Re.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,cn);const $t=Re.isCompressedTexture||Re.image[0].isCompressedTexture,Et=Re.image[0]&&Re.image[0].isDataTexture,qn=[];for(let xt=0;xt<6;xt++)!$t&&!Et?qn[xt]=M(Re.image[xt],!0,i.maxCubemapSize):qn[xt]=Et?Re.image[xt].image:Re.image[xt],qn[xt]=ht(Re,qn[xt]);const Dn=qn[0],sr=o.convert(Re.format,Re.colorSpace),rt=o.convert(Re.type),ze=O(Re.internalFormat,sr,rt,Re.colorSpace),Xe=Re.isVideoTexture!==!0,Fe=Bt.__version===void 0||Dt===!0,He=At.dataReady;let mt=H(Re,Dn);me(t.TEXTURE_CUBE_MAP,Re);let it;if($t){Xe&&Fe&&n.texStorage2D(t.TEXTURE_CUBE_MAP,mt,ze,Dn.width,Dn.height);for(let xt=0;xt<6;xt++){it=qn[xt].mipmaps;for(let Tt=0;Tt<it.length;Tt++){const kt=it[Tt];Re.format!==Td?sr!==null?Xe?He&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Tt,0,0,kt.width,kt.height,sr,kt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Tt,ze,kt.width,kt.height,0,kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Xe?He&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Tt,0,0,kt.width,kt.height,sr,rt,kt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Tt,ze,kt.width,kt.height,0,sr,rt,kt.data)}}}else{if(it=Re.mipmaps,Xe&&Fe){it.length>0&&mt++;const xt=qt(qn[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,mt,ze,xt.width,xt.height)}for(let xt=0;xt<6;xt++)if(Et){Xe?He&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,0,0,qn[xt].width,qn[xt].height,sr,rt,qn[xt].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,ze,qn[xt].width,qn[xt].height,0,sr,rt,qn[xt].data);for(let Tt=0;Tt<it.length;Tt++){const Jt=it[Tt].image[xt].image;Xe?He&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Tt+1,0,0,Jt.width,Jt.height,sr,rt,Jt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Tt+1,ze,Jt.width,Jt.height,0,sr,rt,Jt.data)}}else{Xe?He&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,0,0,sr,rt,qn[xt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,ze,sr,rt,qn[xt]);for(let Tt=0;Tt<it.length;Tt++){const kt=it[Tt];Xe?He&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Tt+1,0,0,sr,rt,kt.image[xt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Tt+1,ze,sr,rt,kt.image[xt])}}}D(Re)&&A(t.TEXTURE_CUBE_MAP),Bt.__version=At.version,Re.onUpdate&&Re.onUpdate(Re)}Ye.__version=Re.version}function De(Ye,Re,Pt,Dt,At,Bt){const gn=o.convert(Pt.format,Pt.colorSpace),Zt=o.convert(Pt.type),cn=O(Pt.internalFormat,gn,Zt,Pt.colorSpace),$t=r.get(Re),Et=r.get(Pt);if(Et.__renderTarget=Re,!$t.__hasExternalTextures){const qn=Math.max(1,Re.width>>Bt),Dn=Math.max(1,Re.height>>Bt);At===t.TEXTURE_3D||At===t.TEXTURE_2D_ARRAY?n.texImage3D(At,Bt,cn,qn,Dn,Re.depth,0,gn,Zt,null):n.texImage2D(At,Bt,cn,qn,Dn,0,gn,Zt,null)}n.bindFramebuffer(t.FRAMEBUFFER,Ye),wt(Re)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Dt,At,Et.__webglTexture,0,Ze(Re)):(At===t.TEXTURE_2D||At>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&At<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Dt,At,Et.__webglTexture,Bt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function We(Ye,Re,Pt){if(t.bindRenderbuffer(t.RENDERBUFFER,Ye),Re.depthBuffer){const Dt=Re.depthTexture,At=Dt&&Dt.isDepthTexture?Dt.type:null,Bt=N(Re.stencilBuffer,At),gn=Re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Zt=Ze(Re);wt(Re)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Zt,Bt,Re.width,Re.height):Pt?t.renderbufferStorageMultisample(t.RENDERBUFFER,Zt,Bt,Re.width,Re.height):t.renderbufferStorage(t.RENDERBUFFER,Bt,Re.width,Re.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,gn,t.RENDERBUFFER,Ye)}else{const Dt=Re.textures;for(let At=0;At<Dt.length;At++){const Bt=Dt[At],gn=o.convert(Bt.format,Bt.colorSpace),Zt=o.convert(Bt.type),cn=O(Bt.internalFormat,gn,Zt,Bt.colorSpace),$t=Ze(Re);Pt&&wt(Re)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,$t,cn,Re.width,Re.height):wt(Re)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,$t,cn,Re.width,Re.height):t.renderbufferStorage(t.RENDERBUFFER,cn,Re.width,Re.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ae(Ye,Re){if(Re&&Re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Ye),!(Re.depthTexture&&Re.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Dt=r.get(Re.depthTexture);Dt.__renderTarget=Re,(!Dt.__webglTexture||Re.depthTexture.image.width!==Re.width||Re.depthTexture.image.height!==Re.height)&&(Re.depthTexture.image.width=Re.width,Re.depthTexture.image.height=Re.height,Re.depthTexture.needsUpdate=!0),ce(Re.depthTexture,0);const At=Dt.__webglTexture,Bt=Ze(Re);if(Re.depthTexture.format===J1)wt(Re)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,At,0,Bt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,At,0);else if(Re.depthTexture.format===gy)wt(Re)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,At,0,Bt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,At,0);else throw new Error("Unknown depthTexture format")}function ut(Ye){const Re=r.get(Ye),Pt=Ye.isWebGLCubeRenderTarget===!0;if(Re.__boundDepthTexture!==Ye.depthTexture){const Dt=Ye.depthTexture;if(Re.__depthDisposeCallback&&Re.__depthDisposeCallback(),Dt){const At=()=>{delete Re.__boundDepthTexture,delete Re.__depthDisposeCallback,Dt.removeEventListener("dispose",At)};Dt.addEventListener("dispose",At),Re.__depthDisposeCallback=At}Re.__boundDepthTexture=Dt}if(Ye.depthTexture&&!Re.__autoAllocateDepthBuffer){if(Pt)throw new Error("target.depthTexture not supported in Cube render targets");Ae(Re.__webglFramebuffer,Ye)}else if(Pt){Re.__webglDepthbuffer=[];for(let Dt=0;Dt<6;Dt++)if(n.bindFramebuffer(t.FRAMEBUFFER,Re.__webglFramebuffer[Dt]),Re.__webglDepthbuffer[Dt]===void 0)Re.__webglDepthbuffer[Dt]=t.createRenderbuffer(),We(Re.__webglDepthbuffer[Dt],Ye,!1);else{const At=Ye.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Bt=Re.__webglDepthbuffer[Dt];t.bindRenderbuffer(t.RENDERBUFFER,Bt),t.framebufferRenderbuffer(t.FRAMEBUFFER,At,t.RENDERBUFFER,Bt)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,Re.__webglFramebuffer),Re.__webglDepthbuffer===void 0)Re.__webglDepthbuffer=t.createRenderbuffer(),We(Re.__webglDepthbuffer,Ye,!1);else{const Dt=Ye.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,At=Re.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,At),t.framebufferRenderbuffer(t.FRAMEBUFFER,Dt,t.RENDERBUFFER,At)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function pt(Ye,Re,Pt){const Dt=r.get(Ye);Re!==void 0&&De(Dt.__webglFramebuffer,Ye,Ye.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Pt!==void 0&&ut(Ye)}function st(Ye){const Re=Ye.texture,Pt=r.get(Ye),Dt=r.get(Re);Ye.addEventListener("dispose",W);const At=Ye.textures,Bt=Ye.isWebGLCubeRenderTarget===!0,gn=At.length>1;if(gn||(Dt.__webglTexture===void 0&&(Dt.__webglTexture=t.createTexture()),Dt.__version=Re.version,s.memory.textures++),Bt){Pt.__webglFramebuffer=[];for(let Zt=0;Zt<6;Zt++)if(Re.mipmaps&&Re.mipmaps.length>0){Pt.__webglFramebuffer[Zt]=[];for(let cn=0;cn<Re.mipmaps.length;cn++)Pt.__webglFramebuffer[Zt][cn]=t.createFramebuffer()}else Pt.__webglFramebuffer[Zt]=t.createFramebuffer()}else{if(Re.mipmaps&&Re.mipmaps.length>0){Pt.__webglFramebuffer=[];for(let Zt=0;Zt<Re.mipmaps.length;Zt++)Pt.__webglFramebuffer[Zt]=t.createFramebuffer()}else Pt.__webglFramebuffer=t.createFramebuffer();if(gn)for(let Zt=0,cn=At.length;Zt<cn;Zt++){const $t=r.get(At[Zt]);$t.__webglTexture===void 0&&($t.__webglTexture=t.createTexture(),s.memory.textures++)}if(Ye.samples>0&&wt(Ye)===!1){Pt.__webglMultisampledFramebuffer=t.createFramebuffer(),Pt.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Pt.__webglMultisampledFramebuffer);for(let Zt=0;Zt<At.length;Zt++){const cn=At[Zt];Pt.__webglColorRenderbuffer[Zt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Pt.__webglColorRenderbuffer[Zt]);const $t=o.convert(cn.format,cn.colorSpace),Et=o.convert(cn.type),qn=O(cn.internalFormat,$t,Et,cn.colorSpace,Ye.isXRRenderTarget===!0),Dn=Ze(Ye);t.renderbufferStorageMultisample(t.RENDERBUFFER,Dn,qn,Ye.width,Ye.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Zt,t.RENDERBUFFER,Pt.__webglColorRenderbuffer[Zt])}t.bindRenderbuffer(t.RENDERBUFFER,null),Ye.depthBuffer&&(Pt.__webglDepthRenderbuffer=t.createRenderbuffer(),We(Pt.__webglDepthRenderbuffer,Ye,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Bt){n.bindTexture(t.TEXTURE_CUBE_MAP,Dt.__webglTexture),me(t.TEXTURE_CUBE_MAP,Re);for(let Zt=0;Zt<6;Zt++)if(Re.mipmaps&&Re.mipmaps.length>0)for(let cn=0;cn<Re.mipmaps.length;cn++)De(Pt.__webglFramebuffer[Zt][cn],Ye,Re,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,cn);else De(Pt.__webglFramebuffer[Zt],Ye,Re,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,0);D(Re)&&A(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(gn){for(let Zt=0,cn=At.length;Zt<cn;Zt++){const $t=At[Zt],Et=r.get($t);n.bindTexture(t.TEXTURE_2D,Et.__webglTexture),me(t.TEXTURE_2D,$t),De(Pt.__webglFramebuffer,Ye,$t,t.COLOR_ATTACHMENT0+Zt,t.TEXTURE_2D,0),D($t)&&A(t.TEXTURE_2D)}n.unbindTexture()}else{let Zt=t.TEXTURE_2D;if((Ye.isWebGL3DRenderTarget||Ye.isWebGLArrayRenderTarget)&&(Zt=Ye.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Zt,Dt.__webglTexture),me(Zt,Re),Re.mipmaps&&Re.mipmaps.length>0)for(let cn=0;cn<Re.mipmaps.length;cn++)De(Pt.__webglFramebuffer[cn],Ye,Re,t.COLOR_ATTACHMENT0,Zt,cn);else De(Pt.__webglFramebuffer,Ye,Re,t.COLOR_ATTACHMENT0,Zt,0);D(Re)&&A(Zt),n.unbindTexture()}Ye.depthBuffer&&ut(Ye)}function Ce(Ye){const Re=Ye.textures;for(let Pt=0,Dt=Re.length;Pt<Dt;Pt++){const At=Re[Pt];if(D(At)){const Bt=F(Ye),gn=r.get(At).__webglTexture;n.bindTexture(Bt,gn),A(Bt),n.unbindTexture()}}}const It=[],Ve=[];function yt(Ye){if(Ye.samples>0){if(wt(Ye)===!1){const Re=Ye.textures,Pt=Ye.width,Dt=Ye.height;let At=t.COLOR_BUFFER_BIT;const Bt=Ye.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,gn=r.get(Ye),Zt=Re.length>1;if(Zt)for(let cn=0;cn<Re.length;cn++)n.bindFramebuffer(t.FRAMEBUFFER,gn.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+cn,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,gn.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+cn,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,gn.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,gn.__webglFramebuffer);for(let cn=0;cn<Re.length;cn++){if(Ye.resolveDepthBuffer&&(Ye.depthBuffer&&(At|=t.DEPTH_BUFFER_BIT),Ye.stencilBuffer&&Ye.resolveStencilBuffer&&(At|=t.STENCIL_BUFFER_BIT)),Zt){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,gn.__webglColorRenderbuffer[cn]);const $t=r.get(Re[cn]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,$t,0)}t.blitFramebuffer(0,0,Pt,Dt,0,0,Pt,Dt,At,t.NEAREST),c===!0&&(It.length=0,Ve.length=0,It.push(t.COLOR_ATTACHMENT0+cn),Ye.depthBuffer&&Ye.resolveDepthBuffer===!1&&(It.push(Bt),Ve.push(Bt),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,Ve)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,It))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Zt)for(let cn=0;cn<Re.length;cn++){n.bindFramebuffer(t.FRAMEBUFFER,gn.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+cn,t.RENDERBUFFER,gn.__webglColorRenderbuffer[cn]);const $t=r.get(Re[cn]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,gn.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+cn,t.TEXTURE_2D,$t,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,gn.__webglMultisampledFramebuffer)}else if(Ye.depthBuffer&&Ye.resolveDepthBuffer===!1&&c){const Re=Ye.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Re])}}}function Ze(Ye){return Math.min(i.maxSamples,Ye.samples)}function wt(Ye){const Re=r.get(Ye);return Ye.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Re.__useRenderToTexture!==!1}function Ut(Ye){const Re=s.render.frame;d.get(Ye)!==Re&&(d.set(Ye,Re),Ye.update())}function ht(Ye,Re){const Pt=Ye.colorSpace,Dt=Ye.format,At=Ye.type;return Ye.isCompressedTexture===!0||Ye.isVideoTexture===!0||Pt!==Sx&&Pt!==am&&(Po.getTransfer(Pt)===xs?(Dt!==Td||At!==Sm)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Pt)),Re}function qt(Ye){return typeof HTMLImageElement<"u"&&Ye instanceof HTMLImageElement?(h.width=Ye.naturalWidth||Ye.width,h.height=Ye.naturalHeight||Ye.height):typeof VideoFrame<"u"&&Ye instanceof VideoFrame?(h.width=Ye.displayWidth,h.height=Ye.displayHeight):(h.width=Ye.width,h.height=Ye.height),h}this.allocateTextureUnit=ie,this.resetTextureUnits=Q,this.setTexture2D=ce,this.setTexture2DArray=se,this.setTexture3D=Se,this.setTextureCube=ye,this.rebindTextures=pt,this.setupRenderTarget=st,this.updateRenderTargetMipmap=Ce,this.updateMultisampleRenderTarget=yt,this.setupDepthRenderbuffer=ut,this.setupFrameBufferTexture=De,this.useMultisampledRTT=wt}function WDe(t,e){function n(r,i=am){let o;const s=Po.getTransfer(i);if(r===Sm)return t.UNSIGNED_BYTE;if(r===hO)return t.UNSIGNED_SHORT_4_4_4_4;if(r===fO)return t.UNSIGNED_SHORT_5_5_5_1;if(r===fY)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===cY)return t.BYTE;if(r===hY)return t.SHORT;if(r===Iw)return t.UNSIGNED_SHORT;if(r===cO)return t.INT;if(r===dy)return t.UNSIGNED_INT;if(r===ig)return t.FLOAT;if(r===yp)return t.HALF_FLOAT;if(r===dY)return t.ALPHA;if(r===pY)return t.RGB;if(r===Td)return t.RGBA;if(r===gY)return t.LUMINANCE;if(r===mY)return t.LUMINANCE_ALPHA;if(r===J1)return t.DEPTH_COMPONENT;if(r===gy)return t.DEPTH_STENCIL;if(r===dO)return t.RED;if(r===pO)return t.RED_INTEGER;if(r===vY)return t.RG;if(r===gO)return t.RG_INTEGER;if(r===mO)return t.RGBA_INTEGER;if(r===qT||r===$T||r===WT||r===XT)if(s===xs)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===qT)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===$T)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===WT)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===XT)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===qT)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===$T)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===WT)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===XT)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===NL||r===kL||r===OL||r===FL)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===NL)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===kL)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===OL)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===FL)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===BL||r===zL||r===UL)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(r===BL||r===zL)return s===xs?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===UL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===jL||r===GL||r===VL||r===HL||r===qL||r===$L||r===WL||r===XL||r===YL||r===ZL||r===KL||r===JL||r===QL||r===eN)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(r===jL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===GL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===VL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===HL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===qL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===$L)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===WL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===XL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===YL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===ZL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===KL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===JL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===QL)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===eN)return s===xs?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===YT||r===tN||r===nN)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(r===YT)return s===xs?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===tN)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===nN)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===yY||r===rN||r===iN||r===aN)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(r===YT)return o.COMPRESSED_RED_RGTC1_EXT;if(r===rN)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===iN)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===aN)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===py?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const XDe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,YDe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ZDe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new jc,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new ic({vertexShader:XDe,fragmentShader:YDe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Uc(new bA(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class KDe extends Dy{constructor(e,n){super();const r=this;let i=null,o=1,s=null,a="local-floor",c=1,h=null,d=null,v=null,w=null,_=null,E=null;const M=new ZDe,D=n.getContextAttributes();let A=null,F=null;const O=[],N=[],H=new qr;let G=null;const W=new Sd;W.viewport=new iu;const X=new Sd;X.viewport=new iu;const K=[W,X],k=new s3e;let $=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ve){let Ee=O[ve];return Ee===void 0&&(Ee=new sI,O[ve]=Ee),Ee.getTargetRaySpace()},this.getControllerGrip=function(ve){let Ee=O[ve];return Ee===void 0&&(Ee=new sI,O[ve]=Ee),Ee.getGripSpace()},this.getHand=function(ve){let Ee=O[ve];return Ee===void 0&&(Ee=new sI,O[ve]=Ee),Ee.getHandSpace()};function ie(ve){const Ee=N.indexOf(ve.inputSource);if(Ee===-1)return;const De=O[Ee];De!==void 0&&(De.update(ve.inputSource,ve.frame,h||s),De.dispatchEvent({type:ve.type,data:ve.inputSource}))}function ae(){i.removeEventListener("select",ie),i.removeEventListener("selectstart",ie),i.removeEventListener("selectend",ie),i.removeEventListener("squeeze",ie),i.removeEventListener("squeezestart",ie),i.removeEventListener("squeezeend",ie),i.removeEventListener("end",ae),i.removeEventListener("inputsourceschange",ce);for(let ve=0;ve<O.length;ve++){const Ee=N[ve];Ee!==null&&(N[ve]=null,O[ve].disconnect(Ee))}$=null,Q=null,M.reset(),e.setRenderTarget(A),_=null,w=null,v=null,i=null,F=null,xe.stop(),r.isPresenting=!1,e.setPixelRatio(G),e.setSize(H.width,H.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ve){o=ve,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ve){a=ve,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||s},this.setReferenceSpace=function(ve){h=ve},this.getBaseLayer=function(){return w!==null?w:_},this.getBinding=function(){return v},this.getFrame=function(){return E},this.getSession=function(){return i},this.setSession=async function(ve){if(i=ve,i!==null){if(A=e.getRenderTarget(),i.addEventListener("select",ie),i.addEventListener("selectstart",ie),i.addEventListener("selectend",ie),i.addEventListener("squeeze",ie),i.addEventListener("squeezestart",ie),i.addEventListener("squeezeend",ie),i.addEventListener("end",ae),i.addEventListener("inputsourceschange",ce),D.xrCompatible!==!0&&await n.makeXRCompatible(),G=e.getPixelRatio(),e.getSize(H),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let De=null,We=null,Ae=null;D.depth&&(Ae=D.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,De=D.stencil?gy:J1,We=D.stencil?py:dy);const ut={colorFormat:n.RGBA8,depthFormat:Ae,scaleFactor:o};v=new XRWebGLBinding(i,n),w=v.createProjectionLayer(ut),i.updateRenderState({layers:[w]}),e.setPixelRatio(1),e.setSize(w.textureWidth,w.textureHeight,!1),F=new $f(w.textureWidth,w.textureHeight,{format:Td,type:Sm,depthTexture:new bO(w.textureWidth,w.textureHeight,We,void 0,void 0,void 0,void 0,void 0,void 0,De),stencilBuffer:D.stencil,colorSpace:e.outputColorSpace,samples:D.antialias?4:0,resolveDepthBuffer:w.ignoreDepthValues===!1,resolveStencilBuffer:w.ignoreDepthValues===!1})}else{const De={antialias:D.antialias,alpha:!0,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:o};_=new XRWebGLLayer(i,n,De),i.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),F=new $f(_.framebufferWidth,_.framebufferHeight,{format:Td,type:Sm,colorSpace:e.outputColorSpace,stencilBuffer:D.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}F.isXRRenderTarget=!0,this.setFoveation(c),h=null,s=await i.requestReferenceSpace(a),xe.setContext(i),xe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function ce(ve){for(let Ee=0;Ee<ve.removed.length;Ee++){const De=ve.removed[Ee],We=N.indexOf(De);We>=0&&(N[We]=null,O[We].disconnect(De))}for(let Ee=0;Ee<ve.added.length;Ee++){const De=ve.added[Ee];let We=N.indexOf(De);if(We===-1){for(let ut=0;ut<O.length;ut++)if(ut>=N.length){N.push(De),We=ut;break}else if(N[ut]===null){N[ut]=De,We=ut;break}if(We===-1)break}const Ae=O[We];Ae&&Ae.connect(De)}}const se=new Pn,Se=new Pn;function ye(ve,Ee,De){se.setFromMatrixPosition(Ee.matrixWorld),Se.setFromMatrixPosition(De.matrixWorld);const We=se.distanceTo(Se),Ae=Ee.projectionMatrix.elements,ut=De.projectionMatrix.elements,pt=Ae[14]/(Ae[10]-1),st=Ae[14]/(Ae[10]+1),Ce=(Ae[9]+1)/Ae[5],It=(Ae[9]-1)/Ae[5],Ve=(Ae[8]-1)/Ae[0],yt=(ut[8]+1)/ut[0],Ze=pt*Ve,wt=pt*yt,Ut=We/(-Ve+yt),ht=Ut*-Ve;if(Ee.matrixWorld.decompose(ve.position,ve.quaternion,ve.scale),ve.translateX(ht),ve.translateZ(Ut),ve.matrixWorld.compose(ve.position,ve.quaternion,ve.scale),ve.matrixWorldInverse.copy(ve.matrixWorld).invert(),Ae[10]===-1)ve.projectionMatrix.copy(Ee.projectionMatrix),ve.projectionMatrixInverse.copy(Ee.projectionMatrixInverse);else{const qt=pt+Ut,Ye=st+Ut,Re=Ze-ht,Pt=wt+(We-ht),Dt=Ce*st/Ye*qt,At=It*st/Ye*qt;ve.projectionMatrix.makePerspective(Re,Pt,Dt,At,qt,Ye),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert()}}function Te(ve,Ee){Ee===null?ve.matrixWorld.copy(ve.matrix):ve.matrixWorld.multiplyMatrices(Ee.matrixWorld,ve.matrix),ve.matrixWorldInverse.copy(ve.matrixWorld).invert()}this.updateCamera=function(ve){if(i===null)return;let Ee=ve.near,De=ve.far;M.texture!==null&&(M.depthNear>0&&(Ee=M.depthNear),M.depthFar>0&&(De=M.depthFar)),k.near=X.near=W.near=Ee,k.far=X.far=W.far=De,($!==k.near||Q!==k.far)&&(i.updateRenderState({depthNear:k.near,depthFar:k.far}),$=k.near,Q=k.far),W.layers.mask=ve.layers.mask|2,X.layers.mask=ve.layers.mask|4,k.layers.mask=W.layers.mask|X.layers.mask;const We=ve.parent,Ae=k.cameras;Te(k,We);for(let ut=0;ut<Ae.length;ut++)Te(Ae[ut],We);Ae.length===2?ye(k,W,X):k.projectionMatrix.copy(W.projectionMatrix),pe(ve,k,We)};function pe(ve,Ee,De){De===null?ve.matrix.copy(Ee.matrixWorld):(ve.matrix.copy(De.matrixWorld),ve.matrix.invert(),ve.matrix.multiply(Ee.matrixWorld)),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.updateMatrixWorld(!0),ve.projectionMatrix.copy(Ee.projectionMatrix),ve.projectionMatrixInverse.copy(Ee.projectionMatrixInverse),ve.isPerspectiveCamera&&(ve.fov=Dw*2*Math.atan(1/ve.projectionMatrix.elements[5]),ve.zoom=1)}this.getCamera=function(){return k},this.getFoveation=function(){if(!(w===null&&_===null))return c},this.setFoveation=function(ve){c=ve,w!==null&&(w.fixedFoveation=ve),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=ve)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(k)};let Ie=null;function me(ve,Ee){if(d=Ee.getViewerPose(h||s),E=Ee,d!==null){const De=d.views;_!==null&&(e.setRenderTargetFramebuffer(F,_.framebuffer),e.setRenderTarget(F));let We=!1;De.length!==k.cameras.length&&(k.cameras.length=0,We=!0);for(let pt=0;pt<De.length;pt++){const st=De[pt];let Ce=null;if(_!==null)Ce=_.getViewport(st);else{const Ve=v.getViewSubImage(w,st);Ce=Ve.viewport,pt===0&&(e.setRenderTargetTextures(F,Ve.colorTexture,w.ignoreDepthValues?void 0:Ve.depthStencilTexture),e.setRenderTarget(F))}let It=K[pt];It===void 0&&(It=new Sd,It.layers.enable(pt),It.viewport=new iu,K[pt]=It),It.matrix.fromArray(st.transform.matrix),It.matrix.decompose(It.position,It.quaternion,It.scale),It.projectionMatrix.fromArray(st.projectionMatrix),It.projectionMatrixInverse.copy(It.projectionMatrix).invert(),It.viewport.set(Ce.x,Ce.y,Ce.width,Ce.height),pt===0&&(k.matrix.copy(It.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale)),We===!0&&k.cameras.push(It)}const Ae=i.enabledFeatures;if(Ae&&Ae.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&v){const pt=v.getDepthInformation(De[0]);pt&&pt.isValid&&pt.texture&&M.init(e,pt,i.renderState)}}for(let De=0;De<O.length;De++){const We=N[De],Ae=O[De];We!==null&&Ae!==void 0&&Ae.update(We,Ee,h||s)}Ie&&Ie(ve,Ee),Ee.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Ee}),E=null}const xe=new BY;xe.setAnimationLoop(me),this.setAnimationLoop=function(ve){Ie=ve},this.dispose=function(){}}}const C0=new pg,JDe=new Os;function QDe(t,e){function n(D,A){D.matrixAutoUpdate===!0&&D.updateMatrix(),A.value.copy(D.matrix)}function r(D,A){A.color.getRGB(D.fogColor.value,MY(t)),A.isFog?(D.fogNear.value=A.near,D.fogFar.value=A.far):A.isFogExp2&&(D.fogDensity.value=A.density)}function i(D,A,F,O,N){A.isMeshBasicMaterial||A.isMeshLambertMaterial?o(D,A):A.isMeshToonMaterial?(o(D,A),v(D,A)):A.isMeshPhongMaterial?(o(D,A),d(D,A)):A.isMeshStandardMaterial?(o(D,A),w(D,A),A.isMeshPhysicalMaterial&&_(D,A,N)):A.isMeshMatcapMaterial?(o(D,A),E(D,A)):A.isMeshDepthMaterial?o(D,A):A.isMeshDistanceMaterial?(o(D,A),M(D,A)):A.isMeshNormalMaterial?o(D,A):A.isLineBasicMaterial?(s(D,A),A.isLineDashedMaterial&&a(D,A)):A.isPointsMaterial?c(D,A,F,O):A.isSpriteMaterial?h(D,A):A.isShadowMaterial?(D.color.value.copy(A.color),D.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function o(D,A){D.opacity.value=A.opacity,A.color&&D.diffuse.value.copy(A.color),A.emissive&&D.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(D.map.value=A.map,n(A.map,D.mapTransform)),A.alphaMap&&(D.alphaMap.value=A.alphaMap,n(A.alphaMap,D.alphaMapTransform)),A.bumpMap&&(D.bumpMap.value=A.bumpMap,n(A.bumpMap,D.bumpMapTransform),D.bumpScale.value=A.bumpScale,A.side===vf&&(D.bumpScale.value*=-1)),A.normalMap&&(D.normalMap.value=A.normalMap,n(A.normalMap,D.normalMapTransform),D.normalScale.value.copy(A.normalScale),A.side===vf&&D.normalScale.value.negate()),A.displacementMap&&(D.displacementMap.value=A.displacementMap,n(A.displacementMap,D.displacementMapTransform),D.displacementScale.value=A.displacementScale,D.displacementBias.value=A.displacementBias),A.emissiveMap&&(D.emissiveMap.value=A.emissiveMap,n(A.emissiveMap,D.emissiveMapTransform)),A.specularMap&&(D.specularMap.value=A.specularMap,n(A.specularMap,D.specularMapTransform)),A.alphaTest>0&&(D.alphaTest.value=A.alphaTest);const F=e.get(A),O=F.envMap,N=F.envMapRotation;O&&(D.envMap.value=O,C0.copy(N),C0.x*=-1,C0.y*=-1,C0.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(C0.y*=-1,C0.z*=-1),D.envMapRotation.value.setFromMatrix4(JDe.makeRotationFromEuler(C0)),D.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,D.reflectivity.value=A.reflectivity,D.ior.value=A.ior,D.refractionRatio.value=A.refractionRatio),A.lightMap&&(D.lightMap.value=A.lightMap,D.lightMapIntensity.value=A.lightMapIntensity,n(A.lightMap,D.lightMapTransform)),A.aoMap&&(D.aoMap.value=A.aoMap,D.aoMapIntensity.value=A.aoMapIntensity,n(A.aoMap,D.aoMapTransform))}function s(D,A){D.diffuse.value.copy(A.color),D.opacity.value=A.opacity,A.map&&(D.map.value=A.map,n(A.map,D.mapTransform))}function a(D,A){D.dashSize.value=A.dashSize,D.totalSize.value=A.dashSize+A.gapSize,D.scale.value=A.scale}function c(D,A,F,O){D.diffuse.value.copy(A.color),D.opacity.value=A.opacity,D.size.value=A.size*F,D.scale.value=O*.5,A.map&&(D.map.value=A.map,n(A.map,D.uvTransform)),A.alphaMap&&(D.alphaMap.value=A.alphaMap,n(A.alphaMap,D.alphaMapTransform)),A.alphaTest>0&&(D.alphaTest.value=A.alphaTest)}function h(D,A){D.diffuse.value.copy(A.color),D.opacity.value=A.opacity,D.rotation.value=A.rotation,A.map&&(D.map.value=A.map,n(A.map,D.mapTransform)),A.alphaMap&&(D.alphaMap.value=A.alphaMap,n(A.alphaMap,D.alphaMapTransform)),A.alphaTest>0&&(D.alphaTest.value=A.alphaTest)}function d(D,A){D.specular.value.copy(A.specular),D.shininess.value=Math.max(A.shininess,1e-4)}function v(D,A){A.gradientMap&&(D.gradientMap.value=A.gradientMap)}function w(D,A){D.metalness.value=A.metalness,A.metalnessMap&&(D.metalnessMap.value=A.metalnessMap,n(A.metalnessMap,D.metalnessMapTransform)),D.roughness.value=A.roughness,A.roughnessMap&&(D.roughnessMap.value=A.roughnessMap,n(A.roughnessMap,D.roughnessMapTransform)),A.envMap&&(D.envMapIntensity.value=A.envMapIntensity)}function _(D,A,F){D.ior.value=A.ior,A.sheen>0&&(D.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),D.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(D.sheenColorMap.value=A.sheenColorMap,n(A.sheenColorMap,D.sheenColorMapTransform)),A.sheenRoughnessMap&&(D.sheenRoughnessMap.value=A.sheenRoughnessMap,n(A.sheenRoughnessMap,D.sheenRoughnessMapTransform))),A.clearcoat>0&&(D.clearcoat.value=A.clearcoat,D.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(D.clearcoatMap.value=A.clearcoatMap,n(A.clearcoatMap,D.clearcoatMapTransform)),A.clearcoatRoughnessMap&&(D.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap,n(A.clearcoatRoughnessMap,D.clearcoatRoughnessMapTransform)),A.clearcoatNormalMap&&(D.clearcoatNormalMap.value=A.clearcoatNormalMap,n(A.clearcoatNormalMap,D.clearcoatNormalMapTransform),D.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),A.side===vf&&D.clearcoatNormalScale.value.negate())),A.dispersion>0&&(D.dispersion.value=A.dispersion),A.iridescence>0&&(D.iridescence.value=A.iridescence,D.iridescenceIOR.value=A.iridescenceIOR,D.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],D.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(D.iridescenceMap.value=A.iridescenceMap,n(A.iridescenceMap,D.iridescenceMapTransform)),A.iridescenceThicknessMap&&(D.iridescenceThicknessMap.value=A.iridescenceThicknessMap,n(A.iridescenceThicknessMap,D.iridescenceThicknessMapTransform))),A.transmission>0&&(D.transmission.value=A.transmission,D.transmissionSamplerMap.value=F.texture,D.transmissionSamplerSize.value.set(F.width,F.height),A.transmissionMap&&(D.transmissionMap.value=A.transmissionMap,n(A.transmissionMap,D.transmissionMapTransform)),D.thickness.value=A.thickness,A.thicknessMap&&(D.thicknessMap.value=A.thicknessMap,n(A.thicknessMap,D.thicknessMapTransform)),D.attenuationDistance.value=A.attenuationDistance,D.attenuationColor.value.copy(A.attenuationColor)),A.anisotropy>0&&(D.anisotropyVector.value.set(A.anisotropy*Math.cos(A.anisotropyRotation),A.anisotropy*Math.sin(A.anisotropyRotation)),A.anisotropyMap&&(D.anisotropyMap.value=A.anisotropyMap,n(A.anisotropyMap,D.anisotropyMapTransform))),D.specularIntensity.value=A.specularIntensity,D.specularColor.value.copy(A.specularColor),A.specularColorMap&&(D.specularColorMap.value=A.specularColorMap,n(A.specularColorMap,D.specularColorMapTransform)),A.specularIntensityMap&&(D.specularIntensityMap.value=A.specularIntensityMap,n(A.specularIntensityMap,D.specularIntensityMapTransform))}function E(D,A){A.matcap&&(D.matcap.value=A.matcap)}function M(D,A){const F=e.get(A).light;D.referencePosition.value.setFromMatrixPosition(F.matrixWorld),D.nearDistance.value=F.shadow.camera.near,D.farDistance.value=F.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function eLe(t,e,n,r){let i={},o={},s=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function c(F,O){const N=O.program;r.uniformBlockBinding(F,N)}function h(F,O){let N=i[F.id];N===void 0&&(E(F),N=d(F),i[F.id]=N,F.addEventListener("dispose",D));const H=O.program;r.updateUBOMapping(F,H);const G=e.render.frame;o[F.id]!==G&&(w(F),o[F.id]=G)}function d(F){const O=v();F.__bindingPointIndex=O;const N=t.createBuffer(),H=F.__size,G=F.usage;return t.bindBuffer(t.UNIFORM_BUFFER,N),t.bufferData(t.UNIFORM_BUFFER,H,G),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,O,N),N}function v(){for(let F=0;F<a;F++)if(s.indexOf(F)===-1)return s.push(F),F;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function w(F){const O=i[F.id],N=F.uniforms,H=F.__cache;t.bindBuffer(t.UNIFORM_BUFFER,O);for(let G=0,W=N.length;G<W;G++){const X=Array.isArray(N[G])?N[G]:[N[G]];for(let K=0,k=X.length;K<k;K++){const $=X[K];if(_($,G,K,H)===!0){const Q=$.__offset,ie=Array.isArray($.value)?$.value:[$.value];let ae=0;for(let ce=0;ce<ie.length;ce++){const se=ie[ce],Se=M(se);typeof se=="number"||typeof se=="boolean"?($.__data[0]=se,t.bufferSubData(t.UNIFORM_BUFFER,Q+ae,$.__data)):se.isMatrix3?($.__data[0]=se.elements[0],$.__data[1]=se.elements[1],$.__data[2]=se.elements[2],$.__data[3]=0,$.__data[4]=se.elements[3],$.__data[5]=se.elements[4],$.__data[6]=se.elements[5],$.__data[7]=0,$.__data[8]=se.elements[6],$.__data[9]=se.elements[7],$.__data[10]=se.elements[8],$.__data[11]=0):(se.toArray($.__data,ae),ae+=Se.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,Q,$.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function _(F,O,N,H){const G=F.value,W=O+"_"+N;if(H[W]===void 0)return typeof G=="number"||typeof G=="boolean"?H[W]=G:H[W]=G.clone(),!0;{const X=H[W];if(typeof G=="number"||typeof G=="boolean"){if(X!==G)return H[W]=G,!0}else if(X.equals(G)===!1)return X.copy(G),!0}return!1}function E(F){const O=F.uniforms;let N=0;const H=16;for(let W=0,X=O.length;W<X;W++){const K=Array.isArray(O[W])?O[W]:[O[W]];for(let k=0,$=K.length;k<$;k++){const Q=K[k],ie=Array.isArray(Q.value)?Q.value:[Q.value];for(let ae=0,ce=ie.length;ae<ce;ae++){const se=ie[ae],Se=M(se),ye=N%H,Te=ye%Se.boundary,pe=ye+Te;N+=Te,pe!==0&&H-pe<Se.storage&&(N+=H-pe),Q.__data=new Float32Array(Se.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=N,N+=Se.storage}}}const G=N%H;return G>0&&(N+=H-G),F.__size=N,F.__cache={},this}function M(F){const O={boundary:0,storage:0};return typeof F=="number"||typeof F=="boolean"?(O.boundary=4,O.storage=4):F.isVector2?(O.boundary=8,O.storage=8):F.isVector3||F.isColor?(O.boundary=16,O.storage=12):F.isVector4?(O.boundary=16,O.storage=16):F.isMatrix3?(O.boundary=48,O.storage=48):F.isMatrix4?(O.boundary=64,O.storage=64):F.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",F),O}function D(F){const O=F.target;O.removeEventListener("dispose",D);const N=s.indexOf(O.__bindingPointIndex);s.splice(N,1),t.deleteBuffer(i[O.id]),delete i[O.id],delete o[O.id]}function A(){for(const F in i)t.deleteBuffer(i[F]);s=[],i={},o={}}return{bind:c,update:h,dispose:A}}class tLe{constructor(e={}){const{canvas:n=VAe(),context:r=null,depth:i=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:v=!1,reverseDepthBuffer:w=!1}=e;this.isWebGLRenderer=!0;let _;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=r.getContextAttributes().alpha}else _=s;const E=new Uint32Array(4),M=new Int32Array(4);let D=null,A=null;const F=[],O=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ff,this.toneMapping=wv,this.toneMappingExposure=1;const N=this;let H=!1,G=0,W=0,X=null,K=-1,k=null;const $=new iu,Q=new iu;let ie=null;const ae=new Ji(0);let ce=0,se=n.width,Se=n.height,ye=1,Te=null,pe=null;const Ie=new iu(0,0,se,Se),me=new iu(0,0,se,Se);let xe=!1;const ve=new xO;let Ee=!1,De=!1;this.transmissionResolutionScale=1;const We=new Os,Ae=new Os,ut=new Pn,pt=new iu,st={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ce=!1;function It(){return X===null?ye:1}let Ve=r;function yt(lt,yn){return n.getContext(lt,yn)}try{const lt={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:d,failIfMajorPerformanceCaveat:v};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${vA}`),n.addEventListener("webglcontextlost",xt,!1),n.addEventListener("webglcontextrestored",Tt,!1),n.addEventListener("webglcontextcreationerror",kt,!1),Ve===null){const yn="webgl2";if(Ve=yt(yn,lt),Ve===null)throw yt(yn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(lt){throw console.error("THREE.WebGLRenderer: "+lt.message),lt}let Ze,wt,Ut,ht,qt,Ye,Re,Pt,Dt,At,Bt,gn,Zt,cn,$t,Et,qn,Dn,sr,rt,ze,Xe,Fe,He;function mt(){Ze=new hIe(Ve),Ze.init(),Xe=new WDe(Ve,Ze),wt=new iIe(Ve,Ze,e,Xe),Ut=new qDe(Ve,Ze),wt.reverseDepthBuffer&&w&&Ut.buffers.depth.setReversed(!0),ht=new pIe(Ve),qt=new DDe,Ye=new $De(Ve,Ze,Ut,qt,wt,Xe,ht),Re=new oIe(N),Pt=new cIe(N),Dt=new x3e(Ve),Fe=new nIe(Ve,Dt),At=new fIe(Ve,Dt,ht,Fe),Bt=new mIe(Ve,At,Dt,ht),sr=new gIe(Ve,wt,Ye),Et=new aIe(qt),gn=new IDe(N,Re,Pt,Ze,wt,Fe,Et),Zt=new QDe(N,qt),cn=new NDe,$t=new UDe(Ze),Dn=new tIe(N,Re,Pt,Ut,Bt,_,c),qn=new VDe(N,Bt,wt),He=new eLe(Ve,ht,wt,Ut),rt=new rIe(Ve,Ze,ht),ze=new dIe(Ve,Ze,ht),ht.programs=gn.programs,N.capabilities=wt,N.extensions=Ze,N.properties=qt,N.renderLists=cn,N.shadowMap=qn,N.state=Ut,N.info=ht}mt();const it=new KDe(N,Ve);this.xr=it,this.getContext=function(){return Ve},this.getContextAttributes=function(){return Ve.getContextAttributes()},this.forceContextLoss=function(){const lt=Ze.get("WEBGL_lose_context");lt&&lt.loseContext()},this.forceContextRestore=function(){const lt=Ze.get("WEBGL_lose_context");lt&&lt.restoreContext()},this.getPixelRatio=function(){return ye},this.setPixelRatio=function(lt){lt!==void 0&&(ye=lt,this.setSize(se,Se,!1))},this.getSize=function(lt){return lt.set(se,Se)},this.setSize=function(lt,yn,Ln=!0){if(it.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}se=lt,Se=yn,n.width=Math.floor(lt*ye),n.height=Math.floor(yn*ye),Ln===!0&&(n.style.width=lt+"px",n.style.height=yn+"px"),this.setViewport(0,0,lt,yn)},this.getDrawingBufferSize=function(lt){return lt.set(se*ye,Se*ye).floor()},this.setDrawingBufferSize=function(lt,yn,Ln){se=lt,Se=yn,ye=Ln,n.width=Math.floor(lt*Ln),n.height=Math.floor(yn*Ln),this.setViewport(0,0,lt,yn)},this.getCurrentViewport=function(lt){return lt.copy($)},this.getViewport=function(lt){return lt.copy(Ie)},this.setViewport=function(lt,yn,Ln,Vn){lt.isVector4?Ie.set(lt.x,lt.y,lt.z,lt.w):Ie.set(lt,yn,Ln,Vn),Ut.viewport($.copy(Ie).multiplyScalar(ye).round())},this.getScissor=function(lt){return lt.copy(me)},this.setScissor=function(lt,yn,Ln,Vn){lt.isVector4?me.set(lt.x,lt.y,lt.z,lt.w):me.set(lt,yn,Ln,Vn),Ut.scissor(Q.copy(me).multiplyScalar(ye).round())},this.getScissorTest=function(){return xe},this.setScissorTest=function(lt){Ut.setScissorTest(xe=lt)},this.setOpaqueSort=function(lt){Te=lt},this.setTransparentSort=function(lt){pe=lt},this.getClearColor=function(lt){return lt.copy(Dn.getClearColor())},this.setClearColor=function(){Dn.setClearColor(...arguments)},this.getClearAlpha=function(){return Dn.getClearAlpha()},this.setClearAlpha=function(){Dn.setClearAlpha(...arguments)},this.clear=function(lt=!0,yn=!0,Ln=!0){let Vn=0;if(lt){let bn=!1;if(X!==null){const wr=X.texture.format;bn=wr===mO||wr===gO||wr===pO}if(bn){const wr=X.texture.type,Lr=wr===Sm||wr===dy||wr===Iw||wr===py||wr===hO||wr===fO,Mr=Dn.getClearColor(),Xr=Dn.getClearAlpha(),Yr=Mr.r,ni=Mr.g,bi=Mr.b;Lr?(E[0]=Yr,E[1]=ni,E[2]=bi,E[3]=Xr,Ve.clearBufferuiv(Ve.COLOR,0,E)):(M[0]=Yr,M[1]=ni,M[2]=bi,M[3]=Xr,Ve.clearBufferiv(Ve.COLOR,0,M))}else Vn|=Ve.COLOR_BUFFER_BIT}yn&&(Vn|=Ve.DEPTH_BUFFER_BIT),Ln&&(Vn|=Ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ve.clear(Vn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",xt,!1),n.removeEventListener("webglcontextrestored",Tt,!1),n.removeEventListener("webglcontextcreationerror",kt,!1),Dn.dispose(),cn.dispose(),$t.dispose(),qt.dispose(),Re.dispose(),Pt.dispose(),Bt.dispose(),Fe.dispose(),He.dispose(),gn.dispose(),it.dispose(),it.removeEventListener("sessionstart",Pe),it.removeEventListener("sessionend",je),_t.stop()};function xt(lt){lt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),H=!0}function Tt(){console.log("THREE.WebGLRenderer: Context Restored."),H=!1;const lt=ht.autoReset,yn=qn.enabled,Ln=qn.autoUpdate,Vn=qn.needsUpdate,bn=qn.type;mt(),ht.autoReset=lt,qn.enabled=yn,qn.autoUpdate=Ln,qn.needsUpdate=Vn,qn.type=bn}function kt(lt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",lt.statusMessage)}function Jt(lt){const yn=lt.target;yn.removeEventListener("dispose",Jt),rn(yn)}function rn(lt){Yt(lt),qt.remove(lt)}function Yt(lt){const yn=qt.get(lt).programs;yn!==void 0&&(yn.forEach(function(Ln){gn.releaseProgram(Ln)}),lt.isShaderMaterial&&gn.releaseShaderCache(lt))}this.renderBufferDirect=function(lt,yn,Ln,Vn,bn,wr){yn===null&&(yn=st);const Lr=bn.isMesh&&bn.matrixWorld.determinant()<0,Mr=zn(lt,yn,Ln,Vn,bn);Ut.setMaterial(Vn,Lr);let Xr=Ln.index,Yr=1;if(Vn.wireframe===!0){if(Xr=At.getWireframeAttribute(Ln),Xr===void 0)return;Yr=2}const ni=Ln.drawRange,bi=Ln.attributes.position;let Ni=ni.start*Yr,Yi=(ni.start+ni.count)*Yr;wr!==null&&(Ni=Math.max(Ni,wr.start*Yr),Yi=Math.min(Yi,(wr.start+wr.count)*Yr)),Xr!==null?(Ni=Math.max(Ni,0),Yi=Math.min(Yi,Xr.count)):bi!=null&&(Ni=Math.max(Ni,0),Yi=Math.min(Yi,bi.count));const Qi=Yi-Ni;if(Qi<0||Qi===1/0)return;Fe.setup(bn,Vn,Mr,Ln,Xr);let _a,ra=rt;if(Xr!==null&&(_a=Dt.get(Xr),ra=ze,ra.setIndex(_a)),bn.isMesh)Vn.wireframe===!0?(Ut.setLineWidth(Vn.wireframeLinewidth*It()),ra.setMode(Ve.LINES)):ra.setMode(Ve.TRIANGLES);else if(bn.isLine){let Ai=Vn.linewidth;Ai===void 0&&(Ai=1),Ut.setLineWidth(Ai*It()),bn.isLineSegments?ra.setMode(Ve.LINES):bn.isLineLoop?ra.setMode(Ve.LINE_LOOP):ra.setMode(Ve.LINE_STRIP)}else bn.isPoints?ra.setMode(Ve.POINTS):bn.isSprite&&ra.setMode(Ve.TRIANGLES);if(bn.isBatchedMesh)if(bn._multiDrawInstances!==null)I0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),ra.renderMultiDrawInstances(bn._multiDrawStarts,bn._multiDrawCounts,bn._multiDrawCount,bn._multiDrawInstances);else if(Ze.get("WEBGL_multi_draw"))ra.renderMultiDraw(bn._multiDrawStarts,bn._multiDrawCounts,bn._multiDrawCount);else{const Ai=bn._multiDrawStarts,Ka=bn._multiDrawCounts,la=bn._multiDrawCount,Sa=Xr?Dt.get(Xr).bytesPerElement:1,_o=qt.get(Vn).currentProgram.getUniforms();for(let Ui=0;Ui<la;Ui++)_o.setValue(Ve,"_gl_DrawID",Ui),ra.render(Ai[Ui]/Sa,Ka[Ui])}else if(bn.isInstancedMesh)ra.renderInstances(Ni,Qi,bn.count);else if(Ln.isInstancedBufferGeometry){const Ai=Ln._maxInstanceCount!==void 0?Ln._maxInstanceCount:1/0,Ka=Math.min(Ln.instanceCount,Ai);ra.renderInstances(Ni,Qi,Ka)}else ra.render(Ni,Qi)};function Qn(lt,yn,Ln){lt.transparent===!0&&lt.side===dp&&lt.forceSinglePass===!1?(lt.side=vf,lt.needsUpdate=!0,Qr(lt,yn,Ln),lt.side=kv,lt.needsUpdate=!0,Qr(lt,yn,Ln),lt.side=dp):Qr(lt,yn,Ln)}this.compile=function(lt,yn,Ln=null){Ln===null&&(Ln=lt),A=$t.get(Ln),A.init(yn),O.push(A),Ln.traverseVisible(function(bn){bn.isLight&&bn.layers.test(yn.layers)&&(A.pushLight(bn),bn.castShadow&&A.pushShadow(bn))}),lt!==Ln&&lt.traverseVisible(function(bn){bn.isLight&&bn.layers.test(yn.layers)&&(A.pushLight(bn),bn.castShadow&&A.pushShadow(bn))}),A.setupLights();const Vn=new Set;return lt.traverse(function(bn){if(!(bn.isMesh||bn.isPoints||bn.isLine||bn.isSprite))return;const wr=bn.material;if(wr)if(Array.isArray(wr))for(let Lr=0;Lr<wr.length;Lr++){const Mr=wr[Lr];Qn(Mr,Ln,bn),Vn.add(Mr)}else Qn(wr,Ln,bn),Vn.add(wr)}),A=O.pop(),Vn},this.compileAsync=function(lt,yn,Ln=null){const Vn=this.compile(lt,yn,Ln);return new Promise(bn=>{function wr(){if(Vn.forEach(function(Lr){qt.get(Lr).currentProgram.isReady()&&Vn.delete(Lr)}),Vn.size===0){bn(lt);return}setTimeout(wr,10)}Ze.get("KHR_parallel_shader_compile")!==null?wr():setTimeout(wr,10)})};let An=null;function jt(lt){An&&An(lt)}function Pe(){_t.stop()}function je(){_t.start()}const _t=new BY;_t.setAnimationLoop(jt),typeof self<"u"&&_t.setContext(self),this.setAnimationLoop=function(lt){An=lt,it.setAnimationLoop(lt),lt===null?_t.stop():_t.start()},it.addEventListener("sessionstart",Pe),it.addEventListener("sessionend",je),this.render=function(lt,yn){if(yn!==void 0&&yn.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(H===!0)return;if(lt.matrixWorldAutoUpdate===!0&&lt.updateMatrixWorld(),yn.parent===null&&yn.matrixWorldAutoUpdate===!0&&yn.updateMatrixWorld(),it.enabled===!0&&it.isPresenting===!0&&(it.cameraAutoUpdate===!0&&it.updateCamera(yn),yn=it.getCamera()),lt.isScene===!0&&lt.onBeforeRender(N,lt,yn,X),A=$t.get(lt,O.length),A.init(yn),O.push(A),Ae.multiplyMatrices(yn.projectionMatrix,yn.matrixWorldInverse),ve.setFromProjectionMatrix(Ae),De=this.localClippingEnabled,Ee=Et.init(this.clippingPlanes,De),D=cn.get(lt,F.length),D.init(),F.push(D),it.enabled===!0&&it.isPresenting===!0){const wr=N.xr.getDepthSensingMesh();wr!==null&&Qt(wr,yn,-1/0,N.sortObjects)}Qt(lt,yn,0,N.sortObjects),D.finish(),N.sortObjects===!0&&D.sort(Te,pe),Ce=it.enabled===!1||it.isPresenting===!1||it.hasDepthSensing()===!1,Ce&&Dn.addToRenderList(D,lt),this.info.render.frame++,Ee===!0&&Et.beginShadows();const Ln=A.state.shadowsArray;qn.render(Ln,lt,yn),Ee===!0&&Et.endShadows(),this.info.autoReset===!0&&this.info.reset();const Vn=D.opaque,bn=D.transmissive;if(A.setupLights(),yn.isArrayCamera){const wr=yn.cameras;if(bn.length>0)for(let Lr=0,Mr=wr.length;Lr<Mr;Lr++){const Xr=wr[Lr];Fn(Vn,bn,lt,Xr)}Ce&&Dn.render(lt);for(let Lr=0,Mr=wr.length;Lr<Mr;Lr++){const Xr=wr[Lr];en(D,lt,Xr,Xr.viewport)}}else bn.length>0&&Fn(Vn,bn,lt,yn),Ce&&Dn.render(lt),en(D,lt,yn);X!==null&&W===0&&(Ye.updateMultisampleRenderTarget(X),Ye.updateRenderTargetMipmap(X)),lt.isScene===!0&&lt.onAfterRender(N,lt,yn),Fe.resetDefaultState(),K=-1,k=null,O.pop(),O.length>0?(A=O[O.length-1],Ee===!0&&Et.setGlobalState(N.clippingPlanes,A.state.camera)):A=null,F.pop(),F.length>0?D=F[F.length-1]:D=null};function Qt(lt,yn,Ln,Vn){if(lt.visible===!1)return;if(lt.layers.test(yn.layers)){if(lt.isGroup)Ln=lt.renderOrder;else if(lt.isLOD)lt.autoUpdate===!0&&lt.update(yn);else if(lt.isLight)A.pushLight(lt),lt.castShadow&&A.pushShadow(lt);else if(lt.isSprite){if(!lt.frustumCulled||ve.intersectsSprite(lt)){Vn&&pt.setFromMatrixPosition(lt.matrixWorld).applyMatrix4(Ae);const Lr=Bt.update(lt),Mr=lt.material;Mr.visible&&D.push(lt,Lr,Mr,Ln,pt.z,null)}}else if((lt.isMesh||lt.isLine||lt.isPoints)&&(!lt.frustumCulled||ve.intersectsObject(lt))){const Lr=Bt.update(lt),Mr=lt.material;if(Vn&&(lt.boundingSphere!==void 0?(lt.boundingSphere===null&&lt.computeBoundingSphere(),pt.copy(lt.boundingSphere.center)):(Lr.boundingSphere===null&&Lr.computeBoundingSphere(),pt.copy(Lr.boundingSphere.center)),pt.applyMatrix4(lt.matrixWorld).applyMatrix4(Ae)),Array.isArray(Mr)){const Xr=Lr.groups;for(let Yr=0,ni=Xr.length;Yr<ni;Yr++){const bi=Xr[Yr],Ni=Mr[bi.materialIndex];Ni&&Ni.visible&&D.push(lt,Lr,Ni,Ln,pt.z,bi)}}else Mr.visible&&D.push(lt,Lr,Mr,Ln,pt.z,null)}}const wr=lt.children;for(let Lr=0,Mr=wr.length;Lr<Mr;Lr++)Qt(wr[Lr],yn,Ln,Vn)}function en(lt,yn,Ln,Vn){const bn=lt.opaque,wr=lt.transmissive,Lr=lt.transparent;A.setupLightsView(Ln),Ee===!0&&Et.setGlobalState(N.clippingPlanes,Ln),Vn&&Ut.viewport($.copy(Vn)),bn.length>0&&Wn(bn,yn,Ln),wr.length>0&&Wn(wr,yn,Ln),Lr.length>0&&Wn(Lr,yn,Ln),Ut.buffers.depth.setTest(!0),Ut.buffers.depth.setMask(!0),Ut.buffers.color.setMask(!0),Ut.setPolygonOffset(!1)}function Fn(lt,yn,Ln,Vn){if((Ln.isScene===!0?Ln.overrideMaterial:null)!==null)return;A.state.transmissionRenderTarget[Vn.id]===void 0&&(A.state.transmissionRenderTarget[Vn.id]=new $f(1,1,{generateMipmaps:!0,type:Ze.has("EXT_color_buffer_half_float")||Ze.has("EXT_color_buffer_float")?yp:Sm,minFilter:_v,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Po.workingColorSpace}));const wr=A.state.transmissionRenderTarget[Vn.id],Lr=Vn.viewport||$;wr.setSize(Lr.z*N.transmissionResolutionScale,Lr.w*N.transmissionResolutionScale);const Mr=N.getRenderTarget();N.setRenderTarget(wr),N.getClearColor(ae),ce=N.getClearAlpha(),ce<1&&N.setClearColor(16777215,.5),N.clear(),Ce&&Dn.render(Ln);const Xr=N.toneMapping;N.toneMapping=wv;const Yr=Vn.viewport;if(Vn.viewport!==void 0&&(Vn.viewport=void 0),A.setupLightsView(Vn),Ee===!0&&Et.setGlobalState(N.clippingPlanes,Vn),Wn(lt,Ln,Vn),Ye.updateMultisampleRenderTarget(wr),Ye.updateRenderTargetMipmap(wr),Ze.has("WEBGL_multisampled_render_to_texture")===!1){let ni=!1;for(let bi=0,Ni=yn.length;bi<Ni;bi++){const Yi=yn[bi],Qi=Yi.object,_a=Yi.geometry,ra=Yi.material,Ai=Yi.group;if(ra.side===dp&&Qi.layers.test(Vn.layers)){const Ka=ra.side;ra.side=vf,ra.needsUpdate=!0,kr(Qi,Ln,Vn,_a,ra,Ai),ra.side=Ka,ra.needsUpdate=!0,ni=!0}}ni===!0&&(Ye.updateMultisampleRenderTarget(wr),Ye.updateRenderTargetMipmap(wr))}N.setRenderTarget(Mr),N.setClearColor(ae,ce),Yr!==void 0&&(Vn.viewport=Yr),N.toneMapping=Xr}function Wn(lt,yn,Ln){const Vn=yn.isScene===!0?yn.overrideMaterial:null;for(let bn=0,wr=lt.length;bn<wr;bn++){const Lr=lt[bn],Mr=Lr.object,Xr=Lr.geometry,Yr=Vn===null?Lr.material:Vn,ni=Lr.group;Mr.layers.test(Ln.layers)&&kr(Mr,yn,Ln,Xr,Yr,ni)}}function kr(lt,yn,Ln,Vn,bn,wr){lt.onBeforeRender(N,yn,Ln,Vn,bn,wr),lt.modelViewMatrix.multiplyMatrices(Ln.matrixWorldInverse,lt.matrixWorld),lt.normalMatrix.getNormalMatrix(lt.modelViewMatrix),bn.onBeforeRender(N,yn,Ln,Vn,lt,wr),bn.transparent===!0&&bn.side===dp&&bn.forceSinglePass===!1?(bn.side=vf,bn.needsUpdate=!0,N.renderBufferDirect(Ln,yn,Vn,bn,lt,wr),bn.side=kv,bn.needsUpdate=!0,N.renderBufferDirect(Ln,yn,Vn,bn,lt,wr),bn.side=dp):N.renderBufferDirect(Ln,yn,Vn,bn,lt,wr),lt.onAfterRender(N,yn,Ln,Vn,bn,wr)}function Qr(lt,yn,Ln){yn.isScene!==!0&&(yn=st);const Vn=qt.get(lt),bn=A.state.lights,wr=A.state.shadowsArray,Lr=bn.state.version,Mr=gn.getParameters(lt,bn.state,wr,yn,Ln),Xr=gn.getProgramCacheKey(Mr);let Yr=Vn.programs;Vn.environment=lt.isMeshStandardMaterial?yn.environment:null,Vn.fog=yn.fog,Vn.envMap=(lt.isMeshStandardMaterial?Pt:Re).get(lt.envMap||Vn.environment),Vn.envMapRotation=Vn.environment!==null&&lt.envMap===null?yn.environmentRotation:lt.envMapRotation,Yr===void 0&&(lt.addEventListener("dispose",Jt),Yr=new Map,Vn.programs=Yr);let ni=Yr.get(Xr);if(ni!==void 0){if(Vn.currentProgram===ni&&Vn.lightsStateVersion===Lr)return zr(lt,Mr),ni}else Mr.uniforms=gn.getUniforms(lt),lt.onBeforeCompile(Mr,N),ni=gn.acquireProgram(Mr,Xr),Yr.set(Xr,ni),Vn.uniforms=Mr.uniforms;const bi=Vn.uniforms;return(!lt.isShaderMaterial&&!lt.isRawShaderMaterial||lt.clipping===!0)&&(bi.clippingPlanes=Et.uniform),zr(lt,Mr),Vn.needsLights=mr(lt),Vn.lightsStateVersion=Lr,Vn.needsLights&&(bi.ambientLightColor.value=bn.state.ambient,bi.lightProbe.value=bn.state.probe,bi.directionalLights.value=bn.state.directional,bi.directionalLightShadows.value=bn.state.directionalShadow,bi.spotLights.value=bn.state.spot,bi.spotLightShadows.value=bn.state.spotShadow,bi.rectAreaLights.value=bn.state.rectArea,bi.ltc_1.value=bn.state.rectAreaLTC1,bi.ltc_2.value=bn.state.rectAreaLTC2,bi.pointLights.value=bn.state.point,bi.pointLightShadows.value=bn.state.pointShadow,bi.hemisphereLights.value=bn.state.hemi,bi.directionalShadowMap.value=bn.state.directionalShadowMap,bi.directionalShadowMatrix.value=bn.state.directionalShadowMatrix,bi.spotShadowMap.value=bn.state.spotShadowMap,bi.spotLightMatrix.value=bn.state.spotLightMatrix,bi.spotLightMap.value=bn.state.spotLightMap,bi.pointShadowMap.value=bn.state.pointShadowMap,bi.pointShadowMatrix.value=bn.state.pointShadowMatrix),Vn.currentProgram=ni,Vn.uniformsList=null,ni}function vi(lt){if(lt.uniformsList===null){const yn=lt.currentProgram.getUniforms();lt.uniformsList=KT.seqWithValue(yn.seq,lt.uniforms)}return lt.uniformsList}function zr(lt,yn){const Ln=qt.get(lt);Ln.outputColorSpace=yn.outputColorSpace,Ln.batching=yn.batching,Ln.batchingColor=yn.batchingColor,Ln.instancing=yn.instancing,Ln.instancingColor=yn.instancingColor,Ln.instancingMorph=yn.instancingMorph,Ln.skinning=yn.skinning,Ln.morphTargets=yn.morphTargets,Ln.morphNormals=yn.morphNormals,Ln.morphColors=yn.morphColors,Ln.morphTargetsCount=yn.morphTargetsCount,Ln.numClippingPlanes=yn.numClippingPlanes,Ln.numIntersection=yn.numClipIntersection,Ln.vertexAlphas=yn.vertexAlphas,Ln.vertexTangents=yn.vertexTangents,Ln.toneMapping=yn.toneMapping}function zn(lt,yn,Ln,Vn,bn){yn.isScene!==!0&&(yn=st),Ye.resetTextureUnits();const wr=yn.fog,Lr=Vn.isMeshStandardMaterial?yn.environment:null,Mr=X===null?N.outputColorSpace:X.isXRRenderTarget===!0?X.texture.colorSpace:Sx,Xr=(Vn.isMeshStandardMaterial?Pt:Re).get(Vn.envMap||Lr),Yr=Vn.vertexColors===!0&&!!Ln.attributes.color&&Ln.attributes.color.itemSize===4,ni=!!Ln.attributes.tangent&&(!!Vn.normalMap||Vn.anisotropy>0),bi=!!Ln.morphAttributes.position,Ni=!!Ln.morphAttributes.normal,Yi=!!Ln.morphAttributes.color;let Qi=wv;Vn.toneMapped&&(X===null||X.isXRRenderTarget===!0)&&(Qi=N.toneMapping);const _a=Ln.morphAttributes.position||Ln.morphAttributes.normal||Ln.morphAttributes.color,ra=_a!==void 0?_a.length:0,Ai=qt.get(Vn),Ka=A.state.lights;if(Ee===!0&&(De===!0||lt!==k)){const we=lt===k&&Vn.id===K;Et.setState(Vn,lt,we)}let la=!1;Vn.version===Ai.__version?(Ai.needsLights&&Ai.lightsStateVersion!==Ka.state.version||Ai.outputColorSpace!==Mr||bn.isBatchedMesh&&Ai.batching===!1||!bn.isBatchedMesh&&Ai.batching===!0||bn.isBatchedMesh&&Ai.batchingColor===!0&&bn.colorTexture===null||bn.isBatchedMesh&&Ai.batchingColor===!1&&bn.colorTexture!==null||bn.isInstancedMesh&&Ai.instancing===!1||!bn.isInstancedMesh&&Ai.instancing===!0||bn.isSkinnedMesh&&Ai.skinning===!1||!bn.isSkinnedMesh&&Ai.skinning===!0||bn.isInstancedMesh&&Ai.instancingColor===!0&&bn.instanceColor===null||bn.isInstancedMesh&&Ai.instancingColor===!1&&bn.instanceColor!==null||bn.isInstancedMesh&&Ai.instancingMorph===!0&&bn.morphTexture===null||bn.isInstancedMesh&&Ai.instancingMorph===!1&&bn.morphTexture!==null||Ai.envMap!==Xr||Vn.fog===!0&&Ai.fog!==wr||Ai.numClippingPlanes!==void 0&&(Ai.numClippingPlanes!==Et.numPlanes||Ai.numIntersection!==Et.numIntersection)||Ai.vertexAlphas!==Yr||Ai.vertexTangents!==ni||Ai.morphTargets!==bi||Ai.morphNormals!==Ni||Ai.morphColors!==Yi||Ai.toneMapping!==Qi||Ai.morphTargetsCount!==ra)&&(la=!0):(la=!0,Ai.__version=Vn.version);let Sa=Ai.currentProgram;la===!0&&(Sa=Qr(Vn,yn,bn));let _o=!1,Ui=!1,Pi=!1;const Ta=Sa.getUniforms(),to=Ai.uniforms;if(Ut.useProgram(Sa.program)&&(_o=!0,Ui=!0,Pi=!0),Vn.id!==K&&(K=Vn.id,Ui=!0),_o||k!==lt){Ut.buffers.depth.getReversed()?(We.copy(lt.projectionMatrix),qAe(We),$Ae(We),Ta.setValue(Ve,"projectionMatrix",We)):Ta.setValue(Ve,"projectionMatrix",lt.projectionMatrix),Ta.setValue(Ve,"viewMatrix",lt.matrixWorldInverse);const et=Ta.map.cameraPosition;et!==void 0&&et.setValue(Ve,ut.setFromMatrixPosition(lt.matrixWorld)),wt.logarithmicDepthBuffer&&Ta.setValue(Ve,"logDepthBufFC",2/(Math.log(lt.far+1)/Math.LN2)),(Vn.isMeshPhongMaterial||Vn.isMeshToonMaterial||Vn.isMeshLambertMaterial||Vn.isMeshBasicMaterial||Vn.isMeshStandardMaterial||Vn.isShaderMaterial)&&Ta.setValue(Ve,"isOrthographic",lt.isOrthographicCamera===!0),k!==lt&&(k=lt,Ui=!0,Pi=!0)}if(bn.isSkinnedMesh){Ta.setOptional(Ve,bn,"bindMatrix"),Ta.setOptional(Ve,bn,"bindMatrixInverse");const we=bn.skeleton;we&&(we.boneTexture===null&&we.computeBoneTexture(),Ta.setValue(Ve,"boneTexture",we.boneTexture,Ye))}bn.isBatchedMesh&&(Ta.setOptional(Ve,bn,"batchingTexture"),Ta.setValue(Ve,"batchingTexture",bn._matricesTexture,Ye),Ta.setOptional(Ve,bn,"batchingIdTexture"),Ta.setValue(Ve,"batchingIdTexture",bn._indirectTexture,Ye),Ta.setOptional(Ve,bn,"batchingColorTexture"),bn._colorsTexture!==null&&Ta.setValue(Ve,"batchingColorTexture",bn._colorsTexture,Ye));const ne=Ln.morphAttributes;if((ne.position!==void 0||ne.normal!==void 0||ne.color!==void 0)&&sr.update(bn,Ln,Sa),(Ui||Ai.receiveShadow!==bn.receiveShadow)&&(Ai.receiveShadow=bn.receiveShadow,Ta.setValue(Ve,"receiveShadow",bn.receiveShadow)),Vn.isMeshGouraudMaterial&&Vn.envMap!==null&&(to.envMap.value=Xr,to.flipEnvMap.value=Xr.isCubeTexture&&Xr.isRenderTargetTexture===!1?-1:1),Vn.isMeshStandardMaterial&&Vn.envMap===null&&yn.environment!==null&&(to.envMapIntensity.value=yn.environmentIntensity),Ui&&(Ta.setValue(Ve,"toneMappingExposure",N.toneMappingExposure),Ai.needsLights&&En(to,Pi),wr&&Vn.fog===!0&&Zt.refreshFogUniforms(to,wr),Zt.refreshMaterialUniforms(to,Vn,ye,Se,A.state.transmissionRenderTarget[lt.id]),KT.upload(Ve,vi(Ai),to,Ye)),Vn.isShaderMaterial&&Vn.uniformsNeedUpdate===!0&&(KT.upload(Ve,vi(Ai),to,Ye),Vn.uniformsNeedUpdate=!1),Vn.isSpriteMaterial&&Ta.setValue(Ve,"center",bn.center),Ta.setValue(Ve,"modelViewMatrix",bn.modelViewMatrix),Ta.setValue(Ve,"normalMatrix",bn.normalMatrix),Ta.setValue(Ve,"modelMatrix",bn.matrixWorld),Vn.isShaderMaterial||Vn.isRawShaderMaterial){const we=Vn.uniformsGroups;for(let et=0,Gt=we.length;et<Gt;et++){const on=we[et];He.update(on,Sa),He.bind(on,Sa)}}return Sa}function En(lt,yn){lt.ambientLightColor.needsUpdate=yn,lt.lightProbe.needsUpdate=yn,lt.directionalLights.needsUpdate=yn,lt.directionalLightShadows.needsUpdate=yn,lt.pointLights.needsUpdate=yn,lt.pointLightShadows.needsUpdate=yn,lt.spotLights.needsUpdate=yn,lt.spotLightShadows.needsUpdate=yn,lt.rectAreaLights.needsUpdate=yn,lt.hemisphereLights.needsUpdate=yn}function mr(lt){return lt.isMeshLambertMaterial||lt.isMeshToonMaterial||lt.isMeshPhongMaterial||lt.isMeshStandardMaterial||lt.isShadowMaterial||lt.isShaderMaterial&&lt.lights===!0}this.getActiveCubeFace=function(){return G},this.getActiveMipmapLevel=function(){return W},this.getRenderTarget=function(){return X},this.setRenderTargetTextures=function(lt,yn,Ln){qt.get(lt.texture).__webglTexture=yn,qt.get(lt.depthTexture).__webglTexture=Ln;const Vn=qt.get(lt);Vn.__hasExternalTextures=!0,Vn.__autoAllocateDepthBuffer=Ln===void 0,Vn.__autoAllocateDepthBuffer||Ze.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Vn.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(lt,yn){const Ln=qt.get(lt);Ln.__webglFramebuffer=yn,Ln.__useDefaultFramebuffer=yn===void 0};const yi=Ve.createFramebuffer();this.setRenderTarget=function(lt,yn=0,Ln=0){X=lt,G=yn,W=Ln;let Vn=!0,bn=null,wr=!1,Lr=!1;if(lt){const Xr=qt.get(lt);if(Xr.__useDefaultFramebuffer!==void 0)Ut.bindFramebuffer(Ve.FRAMEBUFFER,null),Vn=!1;else if(Xr.__webglFramebuffer===void 0)Ye.setupRenderTarget(lt);else if(Xr.__hasExternalTextures)Ye.rebindTextures(lt,qt.get(lt.texture).__webglTexture,qt.get(lt.depthTexture).__webglTexture);else if(lt.depthBuffer){const bi=lt.depthTexture;if(Xr.__boundDepthTexture!==bi){if(bi!==null&&qt.has(bi)&&(lt.width!==bi.image.width||lt.height!==bi.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ye.setupDepthRenderbuffer(lt)}}const Yr=lt.texture;(Yr.isData3DTexture||Yr.isDataArrayTexture||Yr.isCompressedArrayTexture)&&(Lr=!0);const ni=qt.get(lt).__webglFramebuffer;lt.isWebGLCubeRenderTarget?(Array.isArray(ni[yn])?bn=ni[yn][Ln]:bn=ni[yn],wr=!0):lt.samples>0&&Ye.useMultisampledRTT(lt)===!1?bn=qt.get(lt).__webglMultisampledFramebuffer:Array.isArray(ni)?bn=ni[Ln]:bn=ni,$.copy(lt.viewport),Q.copy(lt.scissor),ie=lt.scissorTest}else $.copy(Ie).multiplyScalar(ye).floor(),Q.copy(me).multiplyScalar(ye).floor(),ie=xe;if(Ln!==0&&(bn=yi),Ut.bindFramebuffer(Ve.FRAMEBUFFER,bn)&&Vn&&Ut.drawBuffers(lt,bn),Ut.viewport($),Ut.scissor(Q),Ut.setScissorTest(ie),wr){const Xr=qt.get(lt.texture);Ve.framebufferTexture2D(Ve.FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,Ve.TEXTURE_CUBE_MAP_POSITIVE_X+yn,Xr.__webglTexture,Ln)}else if(Lr){const Xr=qt.get(lt.texture),Yr=yn;Ve.framebufferTextureLayer(Ve.FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,Xr.__webglTexture,Ln,Yr)}else if(lt!==null&&Ln!==0){const Xr=qt.get(lt.texture);Ve.framebufferTexture2D(Ve.FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,Ve.TEXTURE_2D,Xr.__webglTexture,Ln)}K=-1},this.readRenderTargetPixels=function(lt,yn,Ln,Vn,bn,wr,Lr){if(!(lt&&lt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Mr=qt.get(lt).__webglFramebuffer;if(lt.isWebGLCubeRenderTarget&&Lr!==void 0&&(Mr=Mr[Lr]),Mr){Ut.bindFramebuffer(Ve.FRAMEBUFFER,Mr);try{const Xr=lt.texture,Yr=Xr.format,ni=Xr.type;if(!wt.textureFormatReadable(Yr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!wt.textureTypeReadable(ni)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}yn>=0&&yn<=lt.width-Vn&&Ln>=0&&Ln<=lt.height-bn&&Ve.readPixels(yn,Ln,Vn,bn,Xe.convert(Yr),Xe.convert(ni),wr)}finally{const Xr=X!==null?qt.get(X).__webglFramebuffer:null;Ut.bindFramebuffer(Ve.FRAMEBUFFER,Xr)}}},this.readRenderTargetPixelsAsync=async function(lt,yn,Ln,Vn,bn,wr,Lr){if(!(lt&&lt.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Mr=qt.get(lt).__webglFramebuffer;if(lt.isWebGLCubeRenderTarget&&Lr!==void 0&&(Mr=Mr[Lr]),Mr){const Xr=lt.texture,Yr=Xr.format,ni=Xr.type;if(!wt.textureFormatReadable(Yr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!wt.textureTypeReadable(ni))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(yn>=0&&yn<=lt.width-Vn&&Ln>=0&&Ln<=lt.height-bn){Ut.bindFramebuffer(Ve.FRAMEBUFFER,Mr);const bi=Ve.createBuffer();Ve.bindBuffer(Ve.PIXEL_PACK_BUFFER,bi),Ve.bufferData(Ve.PIXEL_PACK_BUFFER,wr.byteLength,Ve.STREAM_READ),Ve.readPixels(yn,Ln,Vn,bn,Xe.convert(Yr),Xe.convert(ni),0);const Ni=X!==null?qt.get(X).__webglFramebuffer:null;Ut.bindFramebuffer(Ve.FRAMEBUFFER,Ni);const Yi=Ve.fenceSync(Ve.SYNC_GPU_COMMANDS_COMPLETE,0);return Ve.flush(),await HAe(Ve,Yi,4),Ve.bindBuffer(Ve.PIXEL_PACK_BUFFER,bi),Ve.getBufferSubData(Ve.PIXEL_PACK_BUFFER,0,wr),Ve.deleteBuffer(bi),Ve.deleteSync(Yi),wr}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(lt,yn=null,Ln=0){lt.isTexture!==!0&&(I0("WebGLRenderer: copyFramebufferToTexture function signature has changed."),yn=arguments[0]||null,lt=arguments[1]);const Vn=Math.pow(2,-Ln),bn=Math.floor(lt.image.width*Vn),wr=Math.floor(lt.image.height*Vn),Lr=yn!==null?yn.x:0,Mr=yn!==null?yn.y:0;Ye.setTexture2D(lt,0),Ve.copyTexSubImage2D(Ve.TEXTURE_2D,Ln,0,0,Lr,Mr,bn,wr),Ut.unbindTexture()};const _i=Ve.createFramebuffer(),gi=Ve.createFramebuffer();this.copyTextureToTexture=function(lt,yn,Ln=null,Vn=null,bn=0,wr=null){lt.isTexture!==!0&&(I0("WebGLRenderer: copyTextureToTexture function signature has changed."),Vn=arguments[0]||null,lt=arguments[1],yn=arguments[2],wr=arguments[3]||0,Ln=null),wr===null&&(bn!==0?(I0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),wr=bn,bn=0):wr=0);let Lr,Mr,Xr,Yr,ni,bi,Ni,Yi,Qi;const _a=lt.isCompressedTexture?lt.mipmaps[wr]:lt.image;if(Ln!==null)Lr=Ln.max.x-Ln.min.x,Mr=Ln.max.y-Ln.min.y,Xr=Ln.isBox3?Ln.max.z-Ln.min.z:1,Yr=Ln.min.x,ni=Ln.min.y,bi=Ln.isBox3?Ln.min.z:0;else{const ne=Math.pow(2,-bn);Lr=Math.floor(_a.width*ne),Mr=Math.floor(_a.height*ne),lt.isDataArrayTexture?Xr=_a.depth:lt.isData3DTexture?Xr=Math.floor(_a.depth*ne):Xr=1,Yr=0,ni=0,bi=0}Vn!==null?(Ni=Vn.x,Yi=Vn.y,Qi=Vn.z):(Ni=0,Yi=0,Qi=0);const ra=Xe.convert(yn.format),Ai=Xe.convert(yn.type);let Ka;yn.isData3DTexture?(Ye.setTexture3D(yn,0),Ka=Ve.TEXTURE_3D):yn.isDataArrayTexture||yn.isCompressedArrayTexture?(Ye.setTexture2DArray(yn,0),Ka=Ve.TEXTURE_2D_ARRAY):(Ye.setTexture2D(yn,0),Ka=Ve.TEXTURE_2D),Ve.pixelStorei(Ve.UNPACK_FLIP_Y_WEBGL,yn.flipY),Ve.pixelStorei(Ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,yn.premultiplyAlpha),Ve.pixelStorei(Ve.UNPACK_ALIGNMENT,yn.unpackAlignment);const la=Ve.getParameter(Ve.UNPACK_ROW_LENGTH),Sa=Ve.getParameter(Ve.UNPACK_IMAGE_HEIGHT),_o=Ve.getParameter(Ve.UNPACK_SKIP_PIXELS),Ui=Ve.getParameter(Ve.UNPACK_SKIP_ROWS),Pi=Ve.getParameter(Ve.UNPACK_SKIP_IMAGES);Ve.pixelStorei(Ve.UNPACK_ROW_LENGTH,_a.width),Ve.pixelStorei(Ve.UNPACK_IMAGE_HEIGHT,_a.height),Ve.pixelStorei(Ve.UNPACK_SKIP_PIXELS,Yr),Ve.pixelStorei(Ve.UNPACK_SKIP_ROWS,ni),Ve.pixelStorei(Ve.UNPACK_SKIP_IMAGES,bi);const Ta=lt.isDataArrayTexture||lt.isData3DTexture,to=yn.isDataArrayTexture||yn.isData3DTexture;if(lt.isDepthTexture){const ne=qt.get(lt),we=qt.get(yn),et=qt.get(ne.__renderTarget),Gt=qt.get(we.__renderTarget);Ut.bindFramebuffer(Ve.READ_FRAMEBUFFER,et.__webglFramebuffer),Ut.bindFramebuffer(Ve.DRAW_FRAMEBUFFER,Gt.__webglFramebuffer);for(let on=0;on<Xr;on++)Ta&&(Ve.framebufferTextureLayer(Ve.READ_FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,qt.get(lt).__webglTexture,bn,bi+on),Ve.framebufferTextureLayer(Ve.DRAW_FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,qt.get(yn).__webglTexture,wr,Qi+on)),Ve.blitFramebuffer(Yr,ni,Lr,Mr,Ni,Yi,Lr,Mr,Ve.DEPTH_BUFFER_BIT,Ve.NEAREST);Ut.bindFramebuffer(Ve.READ_FRAMEBUFFER,null),Ut.bindFramebuffer(Ve.DRAW_FRAMEBUFFER,null)}else if(bn!==0||lt.isRenderTargetTexture||qt.has(lt)){const ne=qt.get(lt),we=qt.get(yn);Ut.bindFramebuffer(Ve.READ_FRAMEBUFFER,_i),Ut.bindFramebuffer(Ve.DRAW_FRAMEBUFFER,gi);for(let et=0;et<Xr;et++)Ta?Ve.framebufferTextureLayer(Ve.READ_FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,ne.__webglTexture,bn,bi+et):Ve.framebufferTexture2D(Ve.READ_FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,Ve.TEXTURE_2D,ne.__webglTexture,bn),to?Ve.framebufferTextureLayer(Ve.DRAW_FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,we.__webglTexture,wr,Qi+et):Ve.framebufferTexture2D(Ve.DRAW_FRAMEBUFFER,Ve.COLOR_ATTACHMENT0,Ve.TEXTURE_2D,we.__webglTexture,wr),bn!==0?Ve.blitFramebuffer(Yr,ni,Lr,Mr,Ni,Yi,Lr,Mr,Ve.COLOR_BUFFER_BIT,Ve.NEAREST):to?Ve.copyTexSubImage3D(Ka,wr,Ni,Yi,Qi+et,Yr,ni,Lr,Mr):Ve.copyTexSubImage2D(Ka,wr,Ni,Yi,Yr,ni,Lr,Mr);Ut.bindFramebuffer(Ve.READ_FRAMEBUFFER,null),Ut.bindFramebuffer(Ve.DRAW_FRAMEBUFFER,null)}else to?lt.isDataTexture||lt.isData3DTexture?Ve.texSubImage3D(Ka,wr,Ni,Yi,Qi,Lr,Mr,Xr,ra,Ai,_a.data):yn.isCompressedArrayTexture?Ve.compressedTexSubImage3D(Ka,wr,Ni,Yi,Qi,Lr,Mr,Xr,ra,_a.data):Ve.texSubImage3D(Ka,wr,Ni,Yi,Qi,Lr,Mr,Xr,ra,Ai,_a):lt.isDataTexture?Ve.texSubImage2D(Ve.TEXTURE_2D,wr,Ni,Yi,Lr,Mr,ra,Ai,_a.data):lt.isCompressedTexture?Ve.compressedTexSubImage2D(Ve.TEXTURE_2D,wr,Ni,Yi,_a.width,_a.height,ra,_a.data):Ve.texSubImage2D(Ve.TEXTURE_2D,wr,Ni,Yi,Lr,Mr,ra,Ai,_a);Ve.pixelStorei(Ve.UNPACK_ROW_LENGTH,la),Ve.pixelStorei(Ve.UNPACK_IMAGE_HEIGHT,Sa),Ve.pixelStorei(Ve.UNPACK_SKIP_PIXELS,_o),Ve.pixelStorei(Ve.UNPACK_SKIP_ROWS,Ui),Ve.pixelStorei(Ve.UNPACK_SKIP_IMAGES,Pi),wr===0&&yn.generateMipmaps&&Ve.generateMipmap(Ka),Ut.unbindTexture()},this.copyTextureToTexture3D=function(lt,yn,Ln=null,Vn=null,bn=0){return lt.isTexture!==!0&&(I0("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ln=arguments[0]||null,Vn=arguments[1]||null,lt=arguments[2],yn=arguments[3],bn=arguments[4]||0),I0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(lt,yn,Ln,Vn,bn)},this.initRenderTarget=function(lt){qt.get(lt).__webglFramebuffer===void 0&&Ye.setupRenderTarget(lt)},this.initTexture=function(lt){lt.isCubeTexture?Ye.setTextureCube(lt,0):lt.isData3DTexture?Ye.setTexture3D(lt,0):lt.isDataArrayTexture||lt.isCompressedArrayTexture?Ye.setTexture2DArray(lt,0):Ye.setTexture2D(lt,0),Ut.unbindTexture()},this.resetState=function(){G=0,W=0,X=null,Ut.reset(),Fe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return sm}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorspace=Po._getDrawingBufferColorSpace(e),n.unpackColorSpace=Po._getUnpackColorSpace()}}const iG={type:"change"},PO={type:"start"},VY={type:"end"},dT=new wY,aG=new uv,nLe=Math.cos(70*Lw.DEG2RAD),tc=new Pn,sf=2*Math.PI,Ns={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},xI=1e-6;class rLe extends y3e{constructor(e,n=null){super(e,n),this.state=Ns.NONE,this.enabled=!0,this.target=new Pn,this.cursor=new Pn,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Z1.ROTATE,MIDDLE:Z1.DOLLY,RIGHT:Z1.PAN},this.touches={ONE:F1.ROTATE,TWO:F1.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Pn,this._lastQuaternion=new Ov,this._lastTargetPosition=new Pn,this._quat=new Ov().setFromUnitVectors(e.up,new Pn(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Lj,this._sphericalDelta=new Lj,this._scale=1,this._panOffset=new Pn,this._rotateStart=new qr,this._rotateEnd=new qr,this._rotateDelta=new qr,this._panStart=new qr,this._panEnd=new qr,this._panDelta=new qr,this._dollyStart=new qr,this._dollyEnd=new qr,this._dollyDelta=new qr,this._dollyDirection=new Pn,this._mouse=new qr,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=aLe.bind(this),this._onPointerDown=iLe.bind(this),this._onPointerUp=oLe.bind(this),this._onContextMenu=dLe.bind(this),this._onMouseWheel=uLe.bind(this),this._onKeyDown=cLe.bind(this),this._onTouchStart=hLe.bind(this),this._onTouchMove=fLe.bind(this),this._onMouseDown=sLe.bind(this),this._onMouseMove=lLe.bind(this),this._interceptControlDown=pLe.bind(this),this._interceptControlUp=gLe.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(iG),this.update(),this.state=Ns.NONE}update(e=null){const n=this.object.position;tc.copy(n).sub(this.target),tc.applyQuaternion(this._quat),this._spherical.setFromVector3(tc),this.autoRotate&&this.state===Ns.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=sf:r>Math.PI&&(r-=sf),i<-Math.PI?i+=sf:i>Math.PI&&(i-=sf),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(tc.setFromSpherical(this._spherical),tc.applyQuaternion(this._quatInverse),n.copy(this.target).add(tc),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){const a=tc.length();s=this._clampDistance(a*this._scale);const c=a-s;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),o=!!c}else if(this.object.isOrthographicCamera){const a=new Pn(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=c!==this.object.zoom;const h=new Pn(this._mouse.x,this._mouse.y,0);h.unproject(this.object),this.object.position.sub(h).add(a),this.object.updateMatrixWorld(),s=tc.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(dT.origin.copy(this.object.position),dT.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(dT.direction))<nLe?this.object.lookAt(this.target):(aG.setFromNormalAndCoplanarPoint(this.object.up,this.target),dT.intersectPlane(aG,this.target))))}else if(this.object.isOrthographicCamera){const s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>xI||8*(1-this._lastQuaternion.dot(this.object.quaternion))>xI||this._lastTargetPosition.distanceToSquared(this.target)>xI?(this.dispatchEvent(iG),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?sf/60*this.autoRotateSpeed*e:sf/60/60*this.autoRotateSpeed}_getZoomScale(e){const n=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*n)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,n){tc.setFromMatrixColumn(n,0),tc.multiplyScalar(-e),this._panOffset.add(tc)}_panUp(e,n){this.screenSpacePanning===!0?tc.setFromMatrixColumn(n,1):(tc.setFromMatrixColumn(n,0),tc.crossVectors(this.object.up,tc)),tc.multiplyScalar(e),this._panOffset.add(tc)}_pan(e,n){const r=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;tc.copy(i).sub(this.target);let o=tc.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/r.clientHeight,this.object.matrix),this._panUp(2*n*o/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(n*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,n){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),i=e-r.left,o=n-r.top,s=r.width,a=r.height;this._mouse.x=i/s*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(sf*this._rotateDelta.x/n.clientHeight),this._rotateUp(sf*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let n=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(sf*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),n=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-sf*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),n=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(sf*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),n=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-sf*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),n=!0;break}n&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y,o=Math.sqrt(r*r+i*i);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._rotateEnd.set(i,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(sf*this._rotateDelta.x/n.clientHeight),this._rotateUp(sf*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y,o=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const s=(e.pageX+n.x)*.5,a=(e.pageY+n.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId){this._pointers.splice(n,1);return}}_isTrackingPointer(e){for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId)return!0;return!1}_trackPointer(e){let n=this._pointerPositions[e.pointerId];n===void 0&&(n=new qr,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const n=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[n]}_customWheelEvent(e){const n=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(n){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function iLe(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(t)&&(this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t)))}function aLe(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function oLe(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(VY),this.state=Ns.NONE;break;case 1:const e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y});break}}function sLe(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Z1.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(t),this.state=Ns.DOLLY;break;case Z1.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=Ns.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=Ns.ROTATE}break;case Z1.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=Ns.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=Ns.PAN}break;default:this.state=Ns.NONE}this.state!==Ns.NONE&&this.dispatchEvent(PO)}function lLe(t){switch(this.state){case Ns.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(t);break;case Ns.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(t);break;case Ns.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(t);break}}function uLe(t){this.enabled===!1||this.enableZoom===!1||this.state!==Ns.NONE||(t.preventDefault(),this.dispatchEvent(PO),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(VY))}function cLe(t){this.enabled!==!1&&this._handleKeyDown(t)}function hLe(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case F1.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(t),this.state=Ns.TOUCH_ROTATE;break;case F1.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(t),this.state=Ns.TOUCH_PAN;break;default:this.state=Ns.NONE}break;case 2:switch(this.touches.TWO){case F1.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(t),this.state=Ns.TOUCH_DOLLY_PAN;break;case F1.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(t),this.state=Ns.TOUCH_DOLLY_ROTATE;break;default:this.state=Ns.NONE}break;default:this.state=Ns.NONE}this.state!==Ns.NONE&&this.dispatchEvent(PO)}function fLe(t){switch(this._trackPointer(t),this.state){case Ns.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(t),this.update();break;case Ns.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(t),this.update();break;case Ns.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(t),this.update();break;case Ns.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=Ns.NONE}}function dLe(t){this.enabled!==!1&&t.preventDefault()}function pLe(t){t.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function gLe(t){t.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const nw={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class ky{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const mLe=new CO(-1,1,1,-1,0,1);class vLe extends qh{constructor(){super(),this.setAttribute("position",new Wf([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Wf([0,2,0,0,2,0],2))}}const yLe=new vLe;class SA{constructor(e){this._mesh=new Uc(yLe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,mLe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class _Le extends ky{constructor(e,n){super(),this.textureID=n!==void 0?n:"tDiffuse",e instanceof ic?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=lm.clone(e.uniforms),this.material=new ic({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new SA(this.material)}render(e,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class oG extends ky{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,r){const i=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let s,a;this.inverse?(s=0,a=1):(s=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),o.buffers.stencil.setFunc(i.ALWAYS,s,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(i.EQUAL,1,4294967295),o.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),o.buffers.stencil.setLocked(!0)}}class xLe extends ky{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class bLe{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const r=e.getSize(new qr);this._width=r.width,this._height=r.height,n=new $f(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:yp}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new _Le(nw),this.copyPass.material.blending=Vh,this.clock=new l3e}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let r=!1;for(let i=0,o=this.passes.length;i<o;i++){const s=this.passes[i];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),s.needsSwap){if(r){const a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}oG!==void 0&&(s instanceof oG?r=!0:s instanceof xLe&&(r=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new qr);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class wLe extends ky{constructor(e,n,r=null,i=null,o=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ji}render(e,n,r){const i=e.autoClear;e.autoClear=!1;let o,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=i}}const SLe={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Ji(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Tx extends ky{constructor(e,n,r,i){super(),this.strength=n!==void 0?n:1,this.radius=r,this.threshold=i,this.resolution=e!==void 0?new qr(e.x,e.y):new qr(256,256),this.clearColor=new Ji(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new $f(o,s,{type:yp}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let v=0;v<this.nMips;v++){const w=new $f(o,s,{type:yp});w.texture.name="UnrealBloomPass.h"+v,w.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(w);const _=new $f(o,s,{type:yp});_.texture.name="UnrealBloomPass.v"+v,_.texture.generateMipmaps=!1,this.renderTargetsVertical.push(_),o=Math.round(o/2),s=Math.round(s/2)}const a=SLe;this.highPassUniforms=lm.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ic({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let v=0;v<this.nMips;v++)this.separableBlurMaterials.push(this.getSeparableBlurMaterial(c[v])),this.separableBlurMaterials[v].uniforms.invSize.value=new qr(1/o,1/s),o=Math.round(o/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const h=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=h,this.bloomTintColors=[new Pn(1,1,1),new Pn(1,1,1),new Pn(1,1,1),new Pn(1,1,1),new Pn(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const d=nw;this.copyUniforms=lm.clone(d.uniforms),this.blendMaterial=new ic({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:wL,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Ji,this.oldClearAlpha=1,this.basic=new Nw,this.fsQuad=new SA(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,n){let r=Math.round(e/2),i=Math.round(n/2);this.renderTargetBright.setSize(r,i);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(r,i),this.renderTargetsVertical[o].setSize(r,i),this.separableBlurMaterials[o].uniforms.invSize.value=new qr(1/r,1/i),r=Math.round(r/2),i=Math.round(i/2)}render(e,n,r,i,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=r.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let c=0;c<this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[c].uniforms.direction.value=Tx.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=Tx.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeparableBlurMaterial(e){const n=[];for(let r=0;r<e;r++)n.push(.39894*Math.exp(-.5*r*r/(e*e))/e);return new ic({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new qr(.5,.5)},direction:{value:new qr(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new ic({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Tx.BlurDirectionX=new qr(1,0);Tx.BlurDirectionY=new qr(0,1);class ELe{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let n=0;n<256;n++)this.p[n]=Math.floor(e.random()*256);this.perm=[];for(let n=0;n<512;n++)this.perm[n]=this.p[n&255];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,n,r){return e[0]*n+e[1]*r}dot3(e,n,r,i){return e[0]*n+e[1]*r+e[2]*i}dot4(e,n,r,i,o){return e[0]*n+e[1]*r+e[2]*i+e[3]*o}noise(e,n){let r,i,o;const s=.5*(Math.sqrt(3)-1),a=(e+n)*s,c=Math.floor(e+a),h=Math.floor(n+a),d=(3-Math.sqrt(3))/6,v=(c+h)*d,w=c-v,_=h-v,E=e-w,M=n-_;let D,A;E>M?(D=1,A=0):(D=0,A=1);const F=E-D+d,O=M-A+d,N=E-1+2*d,H=M-1+2*d,G=c&255,W=h&255,X=this.perm[G+this.perm[W]]%12,K=this.perm[G+D+this.perm[W+A]]%12,k=this.perm[G+1+this.perm[W+1]]%12;let $=.5-E*E-M*M;$<0?r=0:($*=$,r=$*$*this.dot(this.grad3[X],E,M));let Q=.5-F*F-O*O;Q<0?i=0:(Q*=Q,i=Q*Q*this.dot(this.grad3[K],F,O));let ie=.5-N*N-H*H;return ie<0?o=0:(ie*=ie,o=ie*ie*this.dot(this.grad3[k],N,H)),70*(r+i+o)}noise3d(e,n,r){let i,o,s,a;const h=(e+n+r)*.3333333333333333,d=Math.floor(e+h),v=Math.floor(n+h),w=Math.floor(r+h),_=1/6,E=(d+v+w)*_,M=d-E,D=v-E,A=w-E,F=e-M,O=n-D,N=r-A;let H,G,W,X,K,k;F>=O?O>=N?(H=1,G=0,W=0,X=1,K=1,k=0):F>=N?(H=1,G=0,W=0,X=1,K=0,k=1):(H=0,G=0,W=1,X=1,K=0,k=1):O<N?(H=0,G=0,W=1,X=0,K=1,k=1):F<N?(H=0,G=1,W=0,X=0,K=1,k=1):(H=0,G=1,W=0,X=1,K=1,k=0);const $=F-H+_,Q=O-G+_,ie=N-W+_,ae=F-X+2*_,ce=O-K+2*_,se=N-k+2*_,Se=F-1+3*_,ye=O-1+3*_,Te=N-1+3*_,pe=d&255,Ie=v&255,me=w&255,xe=this.perm[pe+this.perm[Ie+this.perm[me]]]%12,ve=this.perm[pe+H+this.perm[Ie+G+this.perm[me+W]]]%12,Ee=this.perm[pe+X+this.perm[Ie+K+this.perm[me+k]]]%12,De=this.perm[pe+1+this.perm[Ie+1+this.perm[me+1]]]%12;let We=.6-F*F-O*O-N*N;We<0?i=0:(We*=We,i=We*We*this.dot3(this.grad3[xe],F,O,N));let Ae=.6-$*$-Q*Q-ie*ie;Ae<0?o=0:(Ae*=Ae,o=Ae*Ae*this.dot3(this.grad3[ve],$,Q,ie));let ut=.6-ae*ae-ce*ce-se*se;ut<0?s=0:(ut*=ut,s=ut*ut*this.dot3(this.grad3[Ee],ae,ce,se));let pt=.6-Se*Se-ye*ye-Te*Te;return pt<0?a=0:(pt*=pt,a=pt*pt*this.dot3(this.grad3[De],Se,ye,Te)),32*(i+o+s+a)}noise4d(e,n,r,i){const o=this.grad4,s=this.simplex,a=this.perm,c=(Math.sqrt(5)-1)/4,h=(5-Math.sqrt(5))/20;let d,v,w,_,E;const M=(e+n+r+i)*c,D=Math.floor(e+M),A=Math.floor(n+M),F=Math.floor(r+M),O=Math.floor(i+M),N=(D+A+F+O)*h,H=D-N,G=A-N,W=F-N,X=O-N,K=e-H,k=n-G,$=r-W,Q=i-X,ie=K>k?32:0,ae=K>$?16:0,ce=k>$?8:0,se=K>Q?4:0,Se=k>Q?2:0,ye=$>Q?1:0,Te=ie+ae+ce+se+Se+ye,pe=s[Te][0]>=3?1:0,Ie=s[Te][1]>=3?1:0,me=s[Te][2]>=3?1:0,xe=s[Te][3]>=3?1:0,ve=s[Te][0]>=2?1:0,Ee=s[Te][1]>=2?1:0,De=s[Te][2]>=2?1:0,We=s[Te][3]>=2?1:0,Ae=s[Te][0]>=1?1:0,ut=s[Te][1]>=1?1:0,pt=s[Te][2]>=1?1:0,st=s[Te][3]>=1?1:0,Ce=K-pe+h,It=k-Ie+h,Ve=$-me+h,yt=Q-xe+h,Ze=K-ve+2*h,wt=k-Ee+2*h,Ut=$-De+2*h,ht=Q-We+2*h,qt=K-Ae+3*h,Ye=k-ut+3*h,Re=$-pt+3*h,Pt=Q-st+3*h,Dt=K-1+4*h,At=k-1+4*h,Bt=$-1+4*h,gn=Q-1+4*h,Zt=D&255,cn=A&255,$t=F&255,Et=O&255,qn=a[Zt+a[cn+a[$t+a[Et]]]]%32,Dn=a[Zt+pe+a[cn+Ie+a[$t+me+a[Et+xe]]]]%32,sr=a[Zt+ve+a[cn+Ee+a[$t+De+a[Et+We]]]]%32,rt=a[Zt+Ae+a[cn+ut+a[$t+pt+a[Et+st]]]]%32,ze=a[Zt+1+a[cn+1+a[$t+1+a[Et+1]]]]%32;let Xe=.6-K*K-k*k-$*$-Q*Q;Xe<0?d=0:(Xe*=Xe,d=Xe*Xe*this.dot4(o[qn],K,k,$,Q));let Fe=.6-Ce*Ce-It*It-Ve*Ve-yt*yt;Fe<0?v=0:(Fe*=Fe,v=Fe*Fe*this.dot4(o[Dn],Ce,It,Ve,yt));let He=.6-Ze*Ze-wt*wt-Ut*Ut-ht*ht;He<0?w=0:(He*=He,w=He*He*this.dot4(o[sr],Ze,wt,Ut,ht));let mt=.6-qt*qt-Ye*Ye-Re*Re-Pt*Pt;mt<0?_=0:(mt*=mt,_=mt*mt*this.dot4(o[rt],qt,Ye,Re,Pt));let it=.6-Dt*Dt-At*At-Bt*Bt-gn*gn;return it<0?E=0:(it*=it,E=it*it*this.dot4(o[ze],Dt,At,Bt,gn)),27*(d+v+w+_+E)}}const pT={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new qr},cameraProjectionMatrix:{value:new Os},cameraInverseProjectionMatrix:{value:new Os},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform highp sampler2D tNormal;
		uniform highp sampler2D tDepth;
		uniform sampler2D tNoise;

		uniform vec3 kernel[ KERNEL_SIZE ];

		uniform vec2 resolution;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float kernelRadius;
		uniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference
		uniform float maxDistance; // avoid the influence of fragments which are too far away

		varying vec2 vUv;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {

			return texture2D( tDepth, screenPosition ).x;

		}

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		float getViewZ( const in float depth ) {

			#if PERSPECTIVE_CAMERA == 1

				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );

			#else

				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );

			#endif

		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {

			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];

			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );

			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;

		}

		vec3 getViewNormal( const in vec2 screenPosition ) {

			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );

		}

		void main() {

			float depth = getDepth( vUv );

			if ( depth == 1.0 ) {

				gl_FragColor = vec4( 1.0 ); // don't influence background
				
			} else {

				float viewZ = getViewZ( depth );

				vec3 viewPosition = getViewPosition( vUv, depth, viewZ );
				vec3 viewNormal = getViewNormal( vUv );

				vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );
				vec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );

				// compute matrix used to reorient a kernel vector

				vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );
				vec3 bitangent = cross( viewNormal, tangent );
				mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );

				float occlusion = 0.0;

				for ( int i = 0; i < KERNEL_SIZE; i ++ ) {

					vec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space
					vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point

					vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC
					samplePointNDC /= samplePointNDC.w;

					vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates

					float realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture
					float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value
					float delta = sampleDepth - realDepth;

					if ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion

						occlusion += 1.0;

					}

				}

				occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );

				gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );

			}

		}`},gT={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );

		}`},mT={uniforms:{tDiffuse:{value:null},resolution:{value:new qr}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		void main() {

			vec2 texelSize = ( 1.0 / resolution );
			float result = 0.0;

			for ( int i = - 2; i <= 2; i ++ ) {

				for ( int j = - 2; j <= 2; j ++ ) {

					vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;
					result += texture2D( tDiffuse, vUv + offset ).r;

				}

			}

			gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );

		}`};class hv extends ky{constructor(e,n,r,i,o=32){super(),this.width=r!==void 0?r:512,this.height=i!==void 0?i:512,this.clear=!0,this.needsSwap=!1,this.camera=n,this.scene=e,this.kernelRadius=8,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(o),this.generateRandomKernelRotations();const s=new bO;s.format=gy,s.type=py,this.normalRenderTarget=new $f(this.width,this.height,{minFilter:xh,magFilter:xh,type:yp,depthTexture:s}),this.ssaoRenderTarget=new $f(this.width,this.height,{type:yp}),this.blurRenderTarget=this.ssaoRenderTarget.clone(),this.ssaoMaterial=new ic({defines:Object.assign({},pT.defines),uniforms:lm.clone(pT.uniforms),vertexShader:pT.vertexShader,fragmentShader:pT.fragmentShader,blending:Vh}),this.ssaoMaterial.defines.KERNEL_SIZE=o,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new e3e,this.normalMaterial.blending=Vh,this.blurMaterial=new ic({defines:Object.assign({},mT.defines),uniforms:lm.clone(mT.uniforms),vertexShader:mT.vertexShader,fragmentShader:mT.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new ic({defines:Object.assign({},gT.defines),uniforms:lm.clone(gT.uniforms),vertexShader:gT.vertexShader,fragmentShader:gT.fragmentShader,blending:Vh}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new ic({uniforms:lm.clone(nw.uniforms),vertexShader:nw.vertexShader,fragmentShader:nw.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:eY,blendDst:SL,blendEquation:im,blendSrcAlpha:QX,blendDstAlpha:SL,blendEquationAlpha:im}),this.fsQuad=new SA(null),this.originalClearColor=new Ji}dispose(){this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(e,n,r){switch(this.overrideVisibility(),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(e,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.output){case hv.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=Vh,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:r);break;case hv.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=Vh,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:r);break;case hv.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:r);break;case hv.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=Vh,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:r);break;case hv.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=JX,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:r);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(e,n,r,i,o){e.getClearColor(this.originalClearColor);const s=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,i!=null&&(e.setClearColor(i),e.setClearAlpha(o||0),e.clear()),this.fsQuad.material=n,this.fsQuad.render(e),e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(s)}renderOverride(e,n,r,i,o){e.getClearColor(this.originalClearColor);const s=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,i=n.clearColor||i,o=n.clearAlpha||o,i!=null&&(e.setClearColor(i),e.setClearAlpha(o||0),e.clear()),this.scene.overrideMaterial=n,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(s)}setSize(e,n){this.width=e,this.height=n,this.ssaoRenderTarget.setSize(e,n),this.normalRenderTarget.setSize(e,n),this.blurRenderTarget.setSize(e,n),this.ssaoMaterial.uniforms.resolution.value.set(e,n),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,n)}generateSampleKernel(e){const n=this.kernel;for(let r=0;r<e;r++){const i=new Pn;i.x=Math.random()*2-1,i.y=Math.random()*2-1,i.z=Math.random(),i.normalize();let o=r/e;o=Lw.lerp(.1,1,o*o),i.multiplyScalar(o),n.push(i)}}generateRandomKernelRotations(){const r=new ELe,i=4*4,o=new Float32Array(i);for(let s=0;s<i;s++){const a=Math.random()*2-1,c=Math.random()*2-1,h=0;o[s]=r.noise3d(a,c,h)}this.noiseTexture=new m5e(o,4,4,dO,ig),this.noiseTexture.wrapS=wx,this.noiseTexture.wrapT=wx,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const e=this.scene,n=this._visibilityCache;e.traverse(function(r){n.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){const e=this.scene,n=this._visibilityCache;e.traverse(function(r){const i=n.get(r);r.visible=i}),n.clear()}}hv.OUTPUT={Default:0,SSAO:1,Blur:2,Depth:3,Normal:4};const TLe={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:`
		precision highp float;

		uniform mat4 modelViewMatrix;
		uniform mat4 projectionMatrix;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D tDiffuse;

		#include <tonemapping_pars_fragment>
		#include <colorspace_pars_fragment>

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );

			// tone mapping

			#ifdef LINEAR_TONE_MAPPING

				gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );

			#elif defined( REINHARD_TONE_MAPPING )

				gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );

			#elif defined( CINEON_TONE_MAPPING )

				gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );

			#elif defined( ACES_FILMIC_TONE_MAPPING )

				gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );

			#elif defined( AGX_TONE_MAPPING )

				gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );

			#elif defined( NEUTRAL_TONE_MAPPING )

				gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );

			#elif defined( CUSTOM_TONE_MAPPING )

				gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );

			#endif

			// color space

			#ifdef SRGB_TRANSFER

				gl_FragColor = sRGBTransferOETF( gl_FragColor );

			#endif

		}`};class CLe extends ky{constructor(){super();const e=TLe;this.uniforms=lm.clone(e.uniforms),this.material=new J5e({name:e.name,uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new SA(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,n,r){this.uniforms.tDiffuse.value=r.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,(this._outputColorSpace!==e.outputColorSpace||this._toneMapping!==e.toneMapping)&&(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},Po.getTransfer(this._outputColorSpace)===xs&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===nY?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===rY?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===iY?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===uO?this.material.defines.ACES_FILMIC_TONE_MAPPING="":this._toneMapping===oY?this.material.defines.AGX_TONE_MAPPING="":this._toneMapping===sY?this.material.defines.NEUTRAL_TONE_MAPPING="":this._toneMapping===aY&&(this.material.defines.CUSTOM_TONE_MAPPING=""),this.material.needsUpdate=!0),this.renderToScreen===!0?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}const sG=t=>{let e;const n=new Set,r=(h,d)=>{const v=typeof h=="function"?h(e):h;if(!Object.is(v,e)){const w=e;e=d??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(_=>_(e,w))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h))},c=e=t(r,i,a);return a},MLe=t=>t?sG(t):sG,ALe=t=>t;function RLe(t,e=ALe){const n=zt.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return zt.useDebugValue(n),n}const lG=t=>{const e=MLe(t),n=r=>RLe(e,r);return Object.assign(n,e),n},PLe=t=>t?lG(t):lG,uG=[{sourceLayer:"water",color:new Ji(7781631),extrusionDepth:1,zOffset:-.5,enabled:!0},{sourceLayer:"landcover",color:new Ji(7659536),extrusionDepth:1.2,zOffset:-.3,bufferSize:2,enabled:!0},{sourceLayer:"park",color:new Ji(5037908),extrusionDepth:.8,zOffset:-.3,bufferSize:2,enabled:!0},{sourceLayer:"landuse",color:new Ji(5025616),extrusionDepth:.8,zOffset:-.3,bufferSize:2,enabled:!0,filter:["in","class","commercial","residential"]},{sourceLayer:"transportation",color:new Ji(11184810),extrusionDepth:.8,zOffset:-.2,bufferSize:2.4,enabled:!0,alignVerticesToTerrain:!0,filter:["all",["in","class","motorway","trunk","primary","secondary","tertiary","residential","service","minor","track"]]},{sourceLayer:"building",color:new Ji(11513775),zOffset:0,useAdaptiveScaleFactor:!0,heightScaleFactor:.25,enabled:!0}];function ILe(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/255,g:parseInt(e[2],16)/255,b:parseInt(e[3],16)/255}:null}const Oy=PLe(t=>({isProcessing:!1,processingStatus:null,processingProgress:null,configHashes:{fullConfigHash:"",terrainHash:"",layerHashes:[]},processedTerrainData:{processedElevationGrid:void 0,processedMinElevation:0,processedMaxElevation:0},geometryDataSets:{polygonGeometries:null,terrainGeometry:void 0},setGeometryDataSets:e=>t({geometryDataSets:{...e}}),setConfigHashes:e=>t({configHashes:e}),setProcessedTerrainData:e=>t({processedTerrainData:e}),vtLayers:[...uG],terrainSettings:{enabled:!0,verticalExaggeration:.06,baseHeight:5},buildingSettings:{enabled:!0,scaleFactor:.5},bbox:void 0,setVtLayers:e=>t({vtLayers:e}),updateVtLayer:(e,n)=>t(r=>{const i=[...r.vtLayers];return i[e]={...i[e],...n},{vtLayers:i}}),toggleLayerEnabled:e=>t(n=>{const r=[...n.vtLayers];return r[e]={...r[e],enabled:!r[e].enabled},{vtLayers:r}}),setLayerColor:(e,n)=>t(r=>{const i=ILe(n);if(!i)return r;const o=[...r.vtLayers];return o[e]={...o[e],color:new Ji(i.r,i.g,i.b)},{vtLayers:o}}),setLayerExtrusionDepth:(e,n)=>t(r=>{const i=[...r.vtLayers];return i[e]={...i[e],extrusionDepth:n},{vtLayers:i}}),setLayerMinExtrusionDepth:(e,n)=>t(r=>{const i=[...r.vtLayers];return i[e]={...i[e],minExtrusionDepth:n},{vtLayers:i}}),setLayerZOffset:(e,n)=>t(r=>{const i=[...r.vtLayers];return i[e]={...i[e],zOffset:n},{vtLayers:i}}),setLayerBufferSize:(e,n)=>t(r=>{const i=[...r.vtLayers];return i[e]={...i[e],bufferSize:n},{vtLayers:i}}),toggleLayerUseAdaptiveScaleFactor:e=>t(n=>{const r=[...n.vtLayers];return r[e]={...r[e],useAdaptiveScaleFactor:!r[e].useAdaptiveScaleFactor},{vtLayers:r}}),setLayerHeightScaleFactor:(e,n)=>t(r=>{const i=[...r.vtLayers];return i[e]={...i[e],heightScaleFactor:n},{vtLayers:i}}),setTerrainSettings:e=>t(n=>({terrainSettings:{...n.terrainSettings,...e}})),toggleTerrainEnabled:()=>t(e=>({terrainSettings:{...e.terrainSettings,enabled:!e.terrainSettings.enabled}})),setTerrainVerticalExaggeration:e=>t(n=>({terrainSettings:{...n.terrainSettings,verticalExaggeration:e}})),setTerrainBaseHeight:e=>t(n=>({terrainSettings:{...n.terrainSettings,baseHeight:e}})),setBuildingSettings:e=>t(n=>({buildingSettings:{...n.buildingSettings,...e}})),toggleBuildingsEnabled:()=>t(e=>({buildingSettings:{...e.buildingSettings,enabled:!e.buildingSettings.enabled}})),setBuildingScaleFactor:e=>t(n=>({buildingSettings:{...n.buildingSettings,scaleFactor:e}})),setBbox:e=>t({bbox:e}),setIsProcessing:e=>t({isProcessing:e}),setProcessingStatus:e=>t({processingStatus:e}),setProcessingProgress:e=>t({processingProgress:e}),updateProcessingState:e=>t(n=>({isProcessing:e.isProcessing!==void 0?e.isProcessing:n.isProcessing,processingStatus:e.status!==void 0?e.status:n.processingStatus,processingProgress:e.progress!==void 0?e.progress:n.processingProgress})),resetToDefaults:()=>t({vtLayers:[...uG],terrainSettings:{enabled:!0,verticalExaggeration:.06,baseHeight:5},buildingSettings:{enabled:!0,scaleFactor:.5},bbox:void 0,geometryDataSets:{polygonGeometries:null,terrainGeometry:void 0},configHashes:{fullConfigHash:"",terrainHash:"",layerHashes:[]},processedTerrainData:{processedElevationGrid:void 0,processedMinElevation:0,processedMaxElevation:0}})})),DLe=({})=>{const{geometryDataSets:t}=Oy(),e=Be.useRef(null),n=Be.useRef(null),[r,i]=Be.useState(!0),[o,s]=Be.useState(null),[a,c]=Be.useState(null),[h,d]=Be.useState(null);return Be.useEffect(()=>()=>{n.current&&(e.current&&e.current.contains(n.current.domElement)&&e.current.removeChild(n.current.domElement),n.current.dispose(),n.current=null)},[]),Be.useEffect(()=>{if(!e.current)return;console.log("Starting model load - dialog fully mounted"),i(!0),s(null);const v=setTimeout(()=>{if(!e.current)return;n.current&&(e.current.contains(n.current.domElement)&&e.current.removeChild(n.current.domElement),n.current.dispose(),n.current=null);let w;try{const _=new kw,E=e.current.clientWidth,M=e.current.clientHeight;if(console.log("Container dimensions:",{width:E,height:M}),E===0||M===0)throw new Error("Container has zero width or height");n.current=new tLe({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),n.current.setSize(E,M),n.current.setPixelRatio(Math.min(window.devicePixelRatio,2)),n.current.shadowMap.enabled=!0,n.current.shadowMap.type=KX,n.current.outputEncoding=void 0,n.current.toneMapping=uO,n.current.toneMappingExposure=.8,n.current.physicallyCorrectLights=!0,e.current.appendChild(n.current.domElement);const D=new Sd(42,E/M,.1,2e3);D.position.z=5;const A=new rLe(D,n.current.domElement);A.enableDamping=!0,A.dampingFactor=.07,A.screenSpacePanning=!0,A.minDistance=.1,A.maxDistance=500,A.maxPolarAngle=Math.PI*.85;const F=new bLe(n.current),O=new wLe(_,D);F.addPass(O);const N=new Tx(new qr(E,M),.4,.35,.9);F.addPass(N);const H=new hv(_,D,E,M);H.kernelRadius=16,H.minDistance=.005,H.maxDistance=.1,F.addPass(H);const G=new CLe;F.addPass(G);const W=new uN(n.current);W.compileEquirectangularShader();const X=new kw,K=document.createElement("canvas");K.width=2048,K.height=1024;const k=K.getContext("2d");if(k){const Ie=k.createLinearGradient(0,0,0,K.height);Ie.addColorStop(0,"#a1c4fd"),Ie.addColorStop(.4,"#f9d976"),Ie.addColorStop(.7,"#c2e9fb"),Ie.addColorStop(1,"#81d8d0"),k.fillStyle=Ie,k.fillRect(0,0,K.width,K.height)}const $=new _5e(K);$.mapping=XC;const Q=W.fromEquirectangular($).texture;_.environment=Q,_.background=Q,W.dispose();const ie=new ZT(16776176,.9);ie.position.set(1,2,3),ie.castShadow=!0,ie.shadow.mapSize.width=2048,ie.shadow.mapSize.height=2048,ie.shadow.camera.near=.1,ie.shadow.camera.far=100,ie.shadow.camera.left=-50,ie.shadow.camera.right=50,ie.shadow.camera.top=50,ie.shadow.camera.bottom=-50,ie.shadow.radius=12,ie.shadow.blurSamples=8,ie.shadow.bias=-1e-4,_.add(ie);const ae=new ZT(12902655,.3);ae.position.set(-3,1,-2),_.add(ae);const ce=new ZT(16773312,.2);ce.position.set(2,-1,-1),_.add(ce);const se=new r3e(16777215,15791615,2.7);_.add(se);const Se=new I2,ye=new QC({vertexColors:!0,roughness:.8,metalness:.01,envMapIntensity:.4,flatShading:!0}),Te=new Uc(t.terrainGeometry,ye);Te.castShadow=!0,Te.receiveShadow=!0,Se.add(Te),t.polygonGeometries&&t.polygonGeometries.forEach(({geometry:Ie,...me})=>{const xe=me.color||new Ji(8514796),ve=new Ji().copy(xe).convertSRGBToLinear();ve.r=Math.min(1,ve.r*1.2),ve.g=Math.min(1,ve.g*1.2),ve.b=Math.min(1,ve.b*1.2);const Ee=new Q5e({color:ve,roughness:.35,metalness:.01,clearcoat:.06,clearcoatRoughness:2,envMapIntensity:.7,flatShading:!1,side:dp}),De=new Uc(Ie,Ee);De.castShadow=!0,De.receiveShadow=!0,Se.add(De)}),_.add(Se),Se.position.set(0,0,0),a&&h?(D.position.copy(a),A.target.copy(h)):(D.position.set(-80,-140,60),A.target.set(0,0,5)),D.updateProjectionMatrix();const pe=()=>{n.current&&(A.target&&D.position&&(!a||!D.position.equals(a)||!A.target.equals(h||new Pn))&&(c(D.position.clone()),d(A.target.clone())),w=requestAnimationFrame(pe),A.update(),F.render())};document.debug_camera=D,pe(),console.log("Enhanced animation started"),i(!1)}catch(_){console.error("Error setting up 3D scene:",_),s(`Failed to setup 3D viewer: ${_ instanceof Error?_.message:String(_)}`),i(!1)}},100);return()=>{clearTimeout(v)}},[t.polygonGeometries,t.terrainGeometry]),ke.jsxs("div",{ref:e,style:{width:"100%",height:"100%",position:"relative"},"data-testid":"model-container",children:[r&&ke.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.7)",zIndex:1},children:[ke.jsx(vM,{size:48}),ke.jsx("p",{style:{marginTop:16},children:"Loading 3D model..."})]}),o&&ke.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"red"},children:o})]})},LLe=fs(ke.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),cG=[{name:"New York",country:"USA",coordinates:[-74.006,40.7128],population:8804190},{name:"London",country:"UK",coordinates:[-.1276,51.5074],population:8982e3},{name:"Tokyo",country:"Japan",coordinates:[139.6503,35.6762],population:1396e4},{name:"Paris",country:"France",coordinates:[2.3522,48.8566],population:2161e3},{name:"Sydney",country:"Australia",coordinates:[151.2093,-33.8688],population:5312e3},{name:"Berlin",country:"Germany",coordinates:[13.405,52.52],population:3769e3},{name:"Rome",country:"Italy",coordinates:[12.4964,41.9028],population:2873e3},{name:"Cairo",country:"Egypt",coordinates:[31.2357,30.0444],population:954e4},{name:"Rio de Janeiro",country:"Brazil",coordinates:[-43.1729,-22.9068],population:6748e3},{name:"Mexico City",country:"Mexico",coordinates:[-99.1332,19.4326],population:9209944},{name:"Moscow",country:"Russia",coordinates:[37.6173,55.7558],population:12538e3},{name:"Beijing",country:"China",coordinates:[116.4074,39.9042],population:2154e4},{name:"Mumbai",country:"India",coordinates:[72.8777,19.076],population:12478447},{name:"Istanbul",country:"Turkey",coordinates:[28.9784,41.0082],population:1546e4},{name:"Dubai",country:"UAE",coordinates:[55.2708,25.2048],population:3331e3},{name:"Singapore",country:"Singapore",coordinates:[103.8198,1.3521],population:5686e3},{name:"Barcelona",country:"Spain",coordinates:[2.1734,41.3851],population:162e4},{name:"Amsterdam",country:"Netherlands",coordinates:[4.9041,52.3676],population:821752},{name:"Bangkok",country:"Thailand",coordinates:[100.5018,13.7563],population:8281e3},{name:"Toronto",country:"Canada",coordinates:[-79.3832,43.6532],population:293e4},{name:"Seoul",country:"South Korea",coordinates:[126.978,37.5665],population:9776e3},{name:"Cape Town",country:"South Africa",coordinates:[18.4241,-33.9249],population:433688},{name:"Buenos Aires",country:"Argentina",coordinates:[-58.3816,-34.6037],population:3075646},{name:"Vienna",country:"Austria",coordinates:[16.3738,48.2082],population:1897e3},{name:"Stockholm",country:"Sweden",coordinates:[18.0686,59.3293],population:975551},{name:"Warsaw",country:"Poland",coordinates:[21.0122,52.2297],population:1790658},{name:"Prague",country:"Czech Republic",coordinates:[14.4378,50.0755],population:1309e3},{name:"Athens",country:"Greece",coordinates:[23.7275,37.9838],population:664046},{name:"Helsinki",country:"Finland",coordinates:[24.9384,60.1699],population:653835},{name:"Dublin",country:"Ireland",coordinates:[-6.2603,53.3498],population:544107},{name:"Lisbon",country:"Portugal",coordinates:[-9.1393,38.7223],population:505526},{name:"Brussels",country:"Belgium",coordinates:[4.3517,50.8503],population:1208542},{name:"Copenhagen",country:"Denmark",coordinates:[12.5683,55.6761],population:602481},{name:"Oslo",country:"Norway",coordinates:[10.7522,59.9139],population:693491},{name:"Zurich",country:"Switzerland",coordinates:[8.5417,47.3769],population:428737},{name:"Auckland",country:"New Zealand",coordinates:[174.7633,-36.8485],population:1657e3},{name:"Santiago",country:"Chile",coordinates:[-70.6693,-33.4489],population:6257516},{name:"Reykjavik",country:"Iceland",coordinates:[-21.9426,64.1466],population:123246},{name:"Johannesburg",country:"South Africa",coordinates:[28.0473,-26.2041],population:5635127},{name:"Manila",country:"Philippines",coordinates:[120.9842,14.5995],population:1780148},{name:"San Francisco",country:"USA",coordinates:[-122.4194,37.7749],population:873965},{name:"Chicago",country:"USA",coordinates:[-87.6298,41.8781],population:2746388},{name:"Los Angeles",country:"USA",coordinates:[-118.2437,34.0522],population:3898747},{name:"Miami",country:"USA",coordinates:[-80.1918,25.7617],population:454279},{name:"Seattle",country:"USA",coordinates:[-122.3321,47.6062],population:737015},{name:"Boston",country:"USA",coordinates:[-71.0589,42.3601],population:684379},{name:"Washington DC",country:"USA",coordinates:[-77.0369,38.9072],population:701974},{name:"Vancouver",country:"Canada",coordinates:[-123.1207,49.2827],population:675218},{name:"Montreal",country:"Canada",coordinates:[-73.5674,45.5019],population:1704694},{name:"Calgary",country:"Canada",coordinates:[-114.0719,51.0447],population:1336e3},{name:"Manchester",country:"UK",coordinates:[-2.2426,53.4808],population:547627},{name:"Liverpool",country:"UK",coordinates:[-2.9916,53.4084],population:498042},{name:"Glasgow",country:"UK",coordinates:[-4.2518,55.8642],population:633120},{name:"Edinburgh",country:"UK",coordinates:[-3.1883,55.9533],population:488050},{name:"Birmingham",country:"UK",coordinates:[-1.8904,52.4862],population:1141816},{name:"Madrid",country:"Spain",coordinates:[-3.7038,40.4168],population:3223334},{name:"Valencia",country:"Spain",coordinates:[-.3763,39.4699],population:791413},{name:"Seville",country:"Spain",coordinates:[-5.9845,37.3891],population:688711},{name:"Milan",country:"Italy",coordinates:[9.19,45.4642],population:1352e3},{name:"Naples",country:"Italy",coordinates:[14.2681,40.8518],population:3085e3},{name:"Florence",country:"Italy",coordinates:[11.2558,43.7696],population:382258},{name:"Venice",country:"Italy",coordinates:[12.3155,45.4408],population:261905},{name:"Munich",country:"Germany",coordinates:[11.582,48.1351],population:1471508},{name:"Hamburg",country:"Germany",coordinates:[9.9937,53.5511],population:1841179},{name:"Frankfurt",country:"Germany",coordinates:[8.6821,50.1109],population:753056},{name:"Lyon",country:"France",coordinates:[4.8357,45.764],population:513275},{name:"Marseille",country:"France",coordinates:[5.3698,43.2965],population:861635},{name:"Nice",country:"France",coordinates:[7.262,43.7102],population:342295},{name:"Shanghai",country:"China",coordinates:[121.4737,31.2304],population:24256800},{name:"Guangzhou",country:"China",coordinates:[113.2644,23.1291],population:13080500},{name:"Shenzhen",country:"China",coordinates:[114.0579,22.5431],population:1259e4},{name:"Hong Kong",country:"China",coordinates:[114.1694,22.3193],population:7448900},{name:"Delhi",country:"India",coordinates:[77.1025,28.7041],population:16787941},{name:"Kolkata",country:"India",coordinates:[88.3639,22.5726],population:14112536},{name:"Bangalore",country:"India",coordinates:[77.5946,12.9716],population:8443675},{name:"Chennai",country:"India",coordinates:[80.2707,13.0827],population:4646732},{name:"Osaka",country:"Japan",coordinates:[135.5023,34.6937],population:2691742},{name:"Kyoto",country:"Japan",coordinates:[135.7681,35.0116],population:1474570},{name:"Nagoya",country:"Japan",coordinates:[136.9066,35.1815],population:2296014},{name:"Sapporo",country:"Japan",coordinates:[141.3545,43.0621],population:1952356},{name:"Melbourne",country:"Australia",coordinates:[144.9631,-37.8136],population:4936349},{name:"Brisbane",country:"Australia",coordinates:[153.0251,-27.4698],population:2462637},{name:"Perth",country:"Australia",coordinates:[115.8575,-31.9505],population:2042e3},{name:"Adelaide",country:"Australia",coordinates:[138.6007,-34.9285],population:1345777},{name:"Wellington",country:"New Zealand",coordinates:[174.7762,-41.2865],population:412500},{name:"Christchurch",country:"New Zealand",coordinates:[172.6362,-43.532],population:381800},{name:"São Paulo",country:"Brazil",coordinates:[-46.6333,-23.5505],population:12106920},{name:"Brasília",country:"Brazil",coordinates:[-47.9292,-15.7801],population:3015268},{name:"Salvador",country:"Brazil",coordinates:[-38.5014,-12.9716],population:2886698},{name:"Bogotá",country:"Colombia",coordinates:[-74.0721,4.711],population:7181e3},{name:"Lima",country:"Peru",coordinates:[-77.0428,-12.0464],population:8852e3},{name:"Casablanca",country:"Morocco",coordinates:[-7.5898,33.5731],population:3359818},{name:"Nairobi",country:"Kenya",coordinates:[36.8219,-1.2921],population:4397073},{name:"Lagos",country:"Nigeria",coordinates:[3.3792,6.5244],population:14862e3},{name:"Accra",country:"Ghana",coordinates:[-.187,5.6037],population:2291352},{name:"Addis Ababa",country:"Ethiopia",coordinates:[38.7578,9.0222],population:3384569},{name:"Alexandria",country:"Egypt",coordinates:[29.9187,31.2001],population:52e5},{name:"Riyadh",country:"Saudi Arabia",coordinates:[46.6753,24.7136],population:7676654},{name:"Tehran",country:"Iran",coordinates:[51.389,35.6892],population:8693706},{name:"Karachi",country:"Pakistan",coordinates:[67.0099,24.8607],population:14910352},{name:"Rotterdam",country:"Netherlands",coordinates:[4.4777,51.9244],population:651446},{name:"Utrecht",country:"Netherlands",coordinates:[5.1214,52.0907],population:357597},{name:"Eindhoven",country:"Netherlands",coordinates:[5.4697,51.4416],population:234394},{name:"Antwerp",country:"Belgium",coordinates:[4.4024,51.2194],population:523248},{name:"Ghent",country:"Belgium",coordinates:[3.7174,51.0543],population:263927},{name:"Charleroi",country:"Belgium",coordinates:[4.4435,50.4108],population:201300},{name:"Luxembourg City",country:"Luxembourg",coordinates:[6.1296,49.6116],population:119214},{name:"Strasbourg",country:"France",coordinates:[7.7521,48.5734],population:280966},{name:"Bordeaux",country:"France",coordinates:[-.5792,44.8378],population:257068},{name:"Toulouse",country:"France",coordinates:[1.4442,43.6047],population:479553},{name:"Lille",country:"France",coordinates:[3.0573,50.6292],population:232741},{name:"Nantes",country:"France",coordinates:[-1.5534,47.2184],population:309346},{name:"Montpellier",country:"France",coordinates:[3.8767,43.6108],population:285121},{name:"Porto",country:"Portugal",coordinates:[-8.6291,41.1579],population:237591},{name:"Braga",country:"Portugal",coordinates:[-8.4266,41.5518],population:136885},{name:"Coimbra",country:"Portugal",coordinates:[-8.4293,40.2033],population:143396},{name:"Bilbao",country:"Spain",coordinates:[-2.935,43.263],population:345821},{name:"Zaragoza",country:"Spain",coordinates:[-.889,41.6488],population:674997},{name:"Málaga",country:"Spain",coordinates:[-4.4214,36.7213],population:574654},{name:"Palma",country:"Spain",coordinates:[2.6502,39.5696],population:416065},{name:"Granada",country:"Spain",coordinates:[-3.5986,37.1773],population:232462},{name:"Genoa",country:"Italy",coordinates:[8.9463,44.4056],population:580097},{name:"Turin",country:"Italy",coordinates:[7.6869,45.0703],population:870456},{name:"Bologna",country:"Italy",coordinates:[11.3426,44.4949],population:390636},{name:"Palermo",country:"Italy",coordinates:[13.3613,38.1157],population:663401},{name:"Catania",country:"Italy",coordinates:[15.0878,37.5079],population:311584},{name:"Bari",country:"Italy",coordinates:[16.8718,41.1171],population:320862},{name:"Basel",country:"Switzerland",coordinates:[7.5886,47.5596],population:177654},{name:"Geneva",country:"Switzerland",coordinates:[6.1432,46.2044],population:203856},{name:"Lausanne",country:"Switzerland",coordinates:[6.6327,46.5197],population:139111},{name:"Bern",country:"Switzerland",coordinates:[7.4474,46.948],population:134591},{name:"Salzburg",country:"Austria",coordinates:[13.055,47.8095],population:155021},{name:"Innsbruck",country:"Austria",coordinates:[11.4041,47.2692],population:132493},{name:"Graz",country:"Austria",coordinates:[15.4395,47.0707],population:291134},{name:"Linz",country:"Austria",coordinates:[14.2856,48.3069],population:204846},{name:"Cologne",country:"Germany",coordinates:[6.9578,50.9413],population:1085664},{name:"Ljubljana",country:"Slovenia",coordinates:[14.5057,46.0569],population:289518},{name:"Zagreb",country:"Croatia",coordinates:[15.9819,45.815],population:806341},{name:"Split",country:"Croatia",coordinates:[16.4402,43.5081],population:178102},{name:"Dubrovnik",country:"Croatia",coordinates:[18.0944,42.6507],population:42615},{name:"Belgrade",country:"Serbia",coordinates:[20.4651,44.8125],population:1378682},{name:"Novi Sad",country:"Serbia",coordinates:[19.8335,45.2671],population:289128},{name:"Sarajevo",country:"Bosnia and Herzegovina",coordinates:[18.4131,43.8563],population:275524},{name:"Skopje",country:"North Macedonia",coordinates:[21.4317,41.9973],population:544086},{name:"Sofia",country:"Bulgaria",coordinates:[23.3219,42.6977],population:1241396},{name:"Plovdiv",country:"Bulgaria",coordinates:[24.7453,42.1354],population:346893},{name:"Varna",country:"Bulgaria",coordinates:[27.9147,43.2141],population:335177},{name:"Bucharest",country:"Romania",coordinates:[26.1025,44.4268],population:1803425},{name:"Cluj-Napoca",country:"Romania",coordinates:[23.6236,46.7712],population:324576},{name:"Timișoara",country:"Romania",coordinates:[21.2287,45.7489],population:319279},{name:"Budapest",country:"Hungary",coordinates:[19.0402,47.4979],population:1752286},{name:"Debrecen",country:"Hungary",coordinates:[21.627,47.5316],population:201982},{name:"Szeged",country:"Hungary",coordinates:[20.1486,46.253],population:160766},{name:"Bratislava",country:"Slovakia",coordinates:[17.1077,48.1486],population:429564},{name:"Košice",country:"Slovakia",coordinates:[21.2611,48.7164],population:238593},{name:"Kraków",country:"Poland",coordinates:[19.945,50.0647],population:780981},{name:"Wrocław",country:"Poland",coordinates:[17.0385,51.1079],population:643782},{name:"Gdańsk",country:"Poland",coordinates:[18.6466,54.352],population:470907},{name:"Poznań",country:"Poland",coordinates:[16.9252,52.4064],population:532048},{name:"Łódź",country:"Poland",coordinates:[19.456,51.7592],population:679941},{name:"Kiev",country:"Ukraine",coordinates:[30.5234,50.4501],population:2962180},{name:"Lviv",country:"Ukraine",coordinates:[24.0297,49.8397],population:724314},{name:"Odessa",country:"Ukraine",coordinates:[30.7233,46.4825],population:1017699},{name:"Kharkiv",country:"Ukraine",coordinates:[36.2304,49.9935],population:1446107},{name:"Minsk",country:"Belarus",coordinates:[27.5615,53.9045],population:2018281},{name:"Riga",country:"Latvia",coordinates:[24.1052,56.9496],population:627487},{name:"Vilnius",country:"Lithuania",coordinates:[25.2797,54.6872],population:580020},{name:"Kaunas",country:"Lithuania",coordinates:[23.9036,54.8985],population:295269},{name:"Tallinn",country:"Estonia",coordinates:[24.7536,59.437],population:438341},{name:"St. Petersburg",country:"Russia",coordinates:[30.3351,59.9343],population:5383890},{name:"Kaliningrad",country:"Russia",coordinates:[20.5037,54.7065],population:489359},{name:"Gothenburg",country:"Sweden",coordinates:[11.9746,57.7089],population:583056},{name:"Malmö",country:"Sweden",coordinates:[13.0359,55.605],population:344166},{name:"Uppsala",country:"Sweden",coordinates:[17.6389,59.8586],population:177074},{name:"Bergen",country:"Norway",coordinates:[5.3221,60.3913],population:287888},{name:"Trondheim",country:"Norway",coordinates:[10.3951,63.4305],population:199039},{name:"Stavanger",country:"Norway",coordinates:[5.7331,58.97],population:143574},{name:"Tampere",country:"Finland",coordinates:[23.761,61.4978],population:238140},{name:"Turku",country:"Finland",coordinates:[22.2685,60.4518],population:193224},{name:"Oulu",country:"Finland",coordinates:[25.4715,65.0126],population:203940},{name:"Aarhus",country:"Denmark",coordinates:[10.2108,56.1629],population:349983},{name:"Odense",country:"Denmark",coordinates:[10.4036,55.3971],population:180863},{name:"Aalborg",country:"Denmark",coordinates:[9.9187,57.0488],population:140897},{name:"Cork",country:"Ireland",coordinates:[-8.4863,51.8969],population:21e4},{name:"Galway",country:"Ireland",coordinates:[-9.0574,53.2707],population:79934},{name:"Limerick",country:"Ireland",coordinates:[-8.6267,52.6638],population:94192},{name:"Bristol",country:"UK",coordinates:[-2.5879,51.4545],population:463400},{name:"Newcastle",country:"UK",coordinates:[-1.6132,54.9783],population:300196},{name:"Sheffield",country:"UK",coordinates:[-1.4701,53.3811],population:582506},{name:"Leeds",country:"UK",coordinates:[-1.5491,53.8008],population:792525},{name:"Cardiff",country:"UK",coordinates:[-3.1791,51.4816],population:362756},{name:"Belfast",country:"UK",coordinates:[-5.9301,54.5973],population:343542},{name:"Thessaloniki",country:"Greece",coordinates:[22.9444,40.6401],population:1012297},{name:"Patras",country:"Greece",coordinates:[21.7369,38.2466],population:213984},{name:"Heraklion",country:"Greece",coordinates:[25.1442,35.3387],population:173993},{name:"Nicosia",country:"Cyprus",coordinates:[33.3823,35.1856],population:33e4},{name:"Limassol",country:"Cyprus",coordinates:[33.0413,34.6786],population:235056},{name:"Valletta",country:"Malta",coordinates:[14.5074,35.8989],population:5827}],hG=({onCitySelect:t})=>{const{map:e}=WX(),[n,r]=Be.useState(null),[i,o]=Be.useState(""),s=h=>{h&&e&&(e.setZoom(14),e.setCenter(h.coordinates),t&&t(h))},a=(h,d)=>{r(d),s(d)},c=h=>{if(h.key==="Enter"){const d=cG.find(v=>v.name.toLowerCase()===i.toLowerCase());d&&(r(d),s(d))}};return ke.jsx(da,{sx:{width:300,mx:2},children:ke.jsx(Ine,{id:"city-search",options:cG,autoHighlight:!0,freeSolo:!0,selectOnFocus:!0,handleHomeEndKeys:!0,sx:{zIndex:1e4},getOptionLabel:h=>typeof h=="string"?h:h.name,filterOptions:(h,d)=>{const v=d.inputValue.toLowerCase().trim();return h.filter(w=>w.name.toLowerCase().includes(v)||w.country.toLowerCase().includes(v))},renderOption:(h,d)=>ke.jsxs(da,{component:"li",...h,children:[ke.jsx(uo,{variant:"body1",children:d.name}),ke.jsx(uo,{variant:"body2",color:"text.secondary",sx:{ml:"auto"},children:d.country})]}),renderInput:h=>ke.jsx(eH,{...h,placeholder:"Search for a city",variant:"outlined",size:"small",onKeyDown:c,InputProps:{...h.InputProps,startAdornment:ke.jsx(HV,{position:"start",children:ke.jsx(LLe,{})})},sx:{backgroundColor:"background.paper",borderRadius:1}}),value:n,onChange:a,inputValue:i,onInputChange:(h,d)=>{o(d)}})})};function NLe(t){const n=window.getComputedStyle(t,null).getPropertyValue("transform");let r=0;if(n!=="none"){const i=n.split("(")[1].split(")")[0].split(","),o=parseFloat(i[0]),s=parseFloat(i[1]);r=Math.round(Math.atan2(s,o)*(180/Math.PI))}return r<0?r+360:r}function vT(t,e,n){const r=getComputedStyle(t),i=[e[0]-n[0],e[1]-n[1]],o=new DOMMatrixReadOnly(r.transform);return[i[0]*o.a+i[1]*o.c+o.e+n[0],i[0]*o.b+i[1]*o.d+o.f+n[1]]}const fG=10;function s2(t,e){const n=e.unproject(t),r=e.unproject([t[0]+fG,t[1]]),i=n.distanceTo(r);return fG/i}function kLe(t){var D,A,F,O,N,H;const[e,n]=zt.useState(t.options),r=lO({mapId:t.mapId,watch:{layers:!1,viewport:!0}}),i=Be.useRef(null),o=Be.useRef(null),s=Be.useRef(null),a=WX({mapId:t.mapId}),[c,h]=Be.useState(null),[d,v]=Be.useState(void 0);function w(G,W=1e3){c&&clearTimeout(c);const X=setTimeout(()=>{var K;(K=t.onChange)==null||K.call(t,G)},W);h(X)}Be.useEffect(()=>{d&&w(d)},[d]),Be.useEffect(()=>{typeof t.setOptions=="function"&&t.setOptions(e)},[e,t]),Be.useEffect(()=>{var G;if((G=t==null?void 0:t.options)!=null&&G.center&&a.map){const W=Math.round(a.map.map._container.clientWidth/2),X=Math.round(a.map.map._container.clientHeight/2),K=W<X?W:X,k=1/s2([W,X],a.map.map);n($=>{var Q;return{...$,scale:[k,k],width:K,height:K,center:(Q=t==null?void 0:t.options)==null?void 0:Q.center}})}},[a.map,(D=t.options)==null?void 0:D.center]),Be.useEffect(()=>{var X;if(!((X=r==null?void 0:r.viewport)!=null&&X.zoom)||!a.map)return;const G=Math.round(a.map.map._container.clientWidth/2),W=Math.round(a.map.map._container.clientHeight/2);if(!e.scale){const K=1/s2([G,W],a.map.map);n(k=>({...k,scale:[K,K]}))}if(!e.center){const K=a.map.map.unproject([G,W]);n(k=>({...k,center:[K.lng,K.lat]}))}},[a.map,(A=r.viewport)==null?void 0:A.zoom,e==null?void 0:e.scale,e==null?void 0:e.center]),Be.useEffect(()=>{if(!a.map)return;a.map.map.setPitch(0);const G=a.map.map.getMaxPitch();return a.map.map.setMaxPitch(0),M(),()=>{var W;(W=a.map)==null||W.map.setMaxPitch(G)}},[a.map]);const _=Be.useMemo(()=>e.orientation==="portrait"?[e.width/2,e.height/2]:[e.height/2,e.width/2],[e.orientation,e.width,e.height]),E=Be.useMemo(()=>{var Q,ie;if(!a.map||!e.scale)return"none";const G=a.map.map.project(e.center);console.log(e.center);const W=G.x,X=G.y,K=e.scale[0]*s2([W,X],a.map.map),k=(Q=r==null?void 0:r.viewport)!=null&&Q.bearing?(ie=r.viewport)==null?void 0:ie.bearing:0,$=`translate(${Math.floor(G.x-_[0])}px,${Math.floor(G.y-_[1])}px) rotate(${e.rotate-k}deg) scale(${K},${K})`;return i.current&&(i.current.style.transform=$),$},[a.map,r.viewport,e.scale,e.rotate,e.center,_]);Be.useEffect(()=>{var G;(G=s.current)==null||G.updateTarget()},[E]),Be.useEffect(()=>{if(!a.map||!(e!=null&&e.center)||!(e!=null&&e.fixedScale)||typeof(e==null?void 0:e.fixedScale)<"u"&&o.current===(e==null?void 0:e.fixedScale))return;o.current=e.fixedScale;const G=o4(e.center),W=e.fixedScale*(e.width/1e3),k=lme(G,W,90,{units:"meters"}),$=a.map.map.project(G.geometry.coordinates),Q=a.map.map.project(k.geometry.coordinates),ie=Math.round(Q.x-$.x)/e.width*(1/s2([$.x,$.y],a.map.map));n(ae=>({...ae,scale:[ie,ie]}))},[a.map,e.width,e.center,e.fixedScale]);const M=zt.useCallback(()=>{var G;if(i.current&&a.map&&(_!=null&&_[0])){let W=e.width,X=e.height;e.orientation==="portrait"?(i.current.style.width=e.width+"px",i.current.style.height=e.height+"px"):(i.current.style.width=e.height+"px",i.current.style.height=e.width+"px",W=e.height,X=e.width),(G=s.current)==null||G.updateTarget();const K=a.map.map.unproject(vT(i.current,[0,0],_)),k=a.map.map.unproject(vT(i.current,[W,0],_)),$=a.map.map.unproject(vT(i.current,[0,X],_)),Q=a.map.map.unproject(vT(i.current,[W,X],_)),ie={type:"Feature",bbox:[K.lng,K.lat,Q.lng,Q.lat],geometry:{type:"Polygon",coordinates:[[[K.lng,K.lat],[k.lng,k.lat],[Q.lng,Q.lat],[$.lng,$.lat],[K.lng,K.lat]]]},properties:{bearing:NLe(i.current)}};console.log("update bbox",ie),v(ie)}},[a.map,e.width,e.height,e.orientation,_]);return Be.useEffect(()=>{var G;i.current&&a.map&&(_!=null&&_[0])&&(e.orientation==="portrait"?(i.current.style.width=e.width+"px",i.current.style.height=e.height+"px"):(i.current.style.width=e.height+"px",i.current.style.height=e.width+"px"),(G=s.current)==null||G.updateTarget())},[e==null?void 0:e.orientation,e==null?void 0:e.height,e==null?void 0:e.width,_,a.map,E]),(H=(N=(O=(F=a==null?void 0:a.map)==null?void 0:F.map)==null?void 0:O._canvas)==null?void 0:N.parentNode)!=null&&H.parentNode?h2.createPortal(ke.jsxs(ke.Fragment,{children:[ke.jsx("div",{className:"target",ref:i,style:{transform:E,transformOrigin:"center center"}}),ke.jsx(ime,{ref:s,target:i,container:null,origin:!0,keepRatio:!0,draggable:!0,onDrag:G=>{var W;if(a.map){let X=G.transform.split("translate(");X=X[1].split("px)")[0].split("px, ");const K=(W=a.map)==null?void 0:W.map.unproject([parseInt(X[0])+_[0],parseInt(X[1])+_[1]]);n(k=>({...k,center:[K.lng,K.lat]}))}},onDragEnd:()=>{M()},scalable:!e.fixedScale,onScale:G=>{if(a.map){let W=G.drag.transform.split("scale(");W=W[1].split(")")[0].split(", ");const X=a.map.map.project(e.center),K=X.x,k=X.y,$=parseFloat(W[0])*(1/s2([K,k],a.map.map));n(Q=>({...Q,scale:[$,$]}))}},onScaleEnd:()=>{M()},rotatable:!0,onRotate:G=>{var W;if(a.map&&r.viewport){const K=G.drag.transform.split("rotate(")[1].split("deg)")[0],k=(W=r==null?void 0:r.viewport)!=null&&W.bearing?r.viewport.bearing:0;n($=>({...$,rotate:parseFloat(K)+k}))}},onRotateEnd:()=>{M()}})]}),a.map.map._canvas.parentNode.parentElement):ke.jsx(ke.Fragment,{})}function xv(t,e){this.x=t,this.y=e}xv.prototype={clone(){return new xv(this.x,this.y)},add(t){return this.clone()._add(t)},sub(t){return this.clone()._sub(t)},multByPoint(t){return this.clone()._multByPoint(t)},divByPoint(t){return this.clone()._divByPoint(t)},mult(t){return this.clone()._mult(t)},div(t){return this.clone()._div(t)},rotate(t){return this.clone()._rotate(t)},rotateAround(t,e){return this.clone()._rotateAround(t,e)},matMult(t){return this.clone()._matMult(t)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(t){return this.x===t.x&&this.y===t.y},dist(t){return Math.sqrt(this.distSqr(t))},distSqr(t){const e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith(t){return this.angleWithSep(t.x,t.y)},angleWithSep(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult(t){const e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add(t){return this.x+=t.x,this.y+=t.y,this},_sub(t){return this.x-=t.x,this.y-=t.y,this},_mult(t){return this.x*=t,this.y*=t,this},_div(t){return this.x/=t,this.y/=t,this},_multByPoint(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint(t){return this.x/=t.x,this.y/=t.y,this},_unit(){return this._div(this.mag()),this},_perp(){const t=this.y;return this.y=this.x,this.x=-t,this},_rotate(t){const e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround(t,e){const n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:xv};xv.convert=function(t){if(t instanceof xv)return t;if(Array.isArray(t))return new xv(+t[0],+t[1]);if(t.x!==void 0&&t.y!==void 0)return new xv(+t.x,+t.y);throw new Error("Expected [x, y] or {x, y} point format")};class HY{constructor(e,n,r,i,o){this.properties={},this.extent=r,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=o,e.readFields(OLe,this,n)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const n=e.readVarint()+e.pos,r=[];let i,o=1,s=0,a=0,c=0;for(;e.pos<n;){if(s<=0){const h=e.readVarint();o=h&7,s=h>>3}if(s--,o===1||o===2)a+=e.readSVarint(),c+=e.readSVarint(),o===1&&(i&&r.push(i),i=[]),i&&i.push(new xv(a,c));else if(o===7)i&&i.push(i[0].clone());else throw new Error(`unknown command ${o}`)}return i&&r.push(i),r}bbox(){const e=this._pbf;e.pos=this._geometry;const n=e.readVarint()+e.pos;let r=1,i=0,o=0,s=0,a=1/0,c=-1/0,h=1/0,d=-1/0;for(;e.pos<n;){if(i<=0){const v=e.readVarint();r=v&7,i=v>>3}if(i--,r===1||r===2)o+=e.readSVarint(),s+=e.readSVarint(),o<a&&(a=o),o>c&&(c=o),s<h&&(h=s),s>d&&(d=s);else if(r!==7)throw new Error(`unknown command ${r}`)}return[a,h,c,d]}toGeoJSON(e,n,r){const i=this.extent*Math.pow(2,r),o=this.extent*e,s=this.extent*n,a=this.loadGeometry();function c(w){return[(w.x+o)*360/i-180,360/Math.PI*Math.atan(Math.exp((1-(w.y+s)*2/i)*Math.PI))-90]}function h(w){return w.map(c)}let d;if(this.type===1){const w=[];for(const E of a)w.push(E[0]);const _=h(w);d=w.length===1?{type:"Point",coordinates:_[0]}:{type:"MultiPoint",coordinates:_}}else if(this.type===2){const w=a.map(h);d=w.length===1?{type:"LineString",coordinates:w[0]}:{type:"MultiLineString",coordinates:w}}else if(this.type===3){const w=BLe(a),_=[];for(const E of w)_.push(E.map(h));d=_.length===1?{type:"Polygon",coordinates:_[0]}:{type:"MultiPolygon",coordinates:_}}else throw new Error("unknown feature type");const v={type:"Feature",geometry:d,properties:this.properties};return this.id!=null&&(v.id=this.id),v}}HY.types=["Unknown","Point","LineString","Polygon"];function OLe(t,e,n){t===1?e.id=n.readVarint():t===2?FLe(n,e):t===3?e.type=n.readVarint():t===4&&(e._geometry=n.pos)}function FLe(t,e){const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}function BLe(t){const e=t.length;if(e<=1)return[t];const n=[];let r,i;for(let o=0;o<e;o++){const s=zLe(t[o]);s!==0&&(i===void 0&&(i=s<0),i===s<0?(r&&n.push(r),r=[t[o]]):r&&r.push(t[o]))}return r&&n.push(r),n}function zLe(t){let e=0;for(let n=0,r=t.length,i=r-1,o,s;n<r;i=n++)o=t[n],s=t[i],e+=(s.x-o.x)*(o.y+s.y);return e}class ULe{constructor(e,n){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(jLe,this,n),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const n=this._pbf.readVarint()+this._pbf.pos;return new HY(this._pbf,n,this.extent,this._keys,this._values)}}function jLe(t,e,n){t===15?e.version=n.readVarint():t===1?e.name=n.readString():t===5?e.extent=n.readVarint():t===2?e._features.push(n.pos):t===3?e._keys.push(n.readString()):t===4&&e._values.push(GLe(n))}function GLe(t){let e=null;const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=t.readVarint()>>3;e=r===1?t.readString():r===2?t.readFloat():r===3?t.readDouble():r===4?t.readVarint64():r===5?t.readVarint():r===6?t.readSVarint():r===7?t.readBoolean():null}return e}class VLe{constructor(e,n){this.layers=e.readFields(HLe,{},n)}}function HLe(t,e,n){if(t===3){const r=new ULe(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}const hN=65536*65536,dG=1/hN,qLe=12,pG=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),bI=0,yT=1,l2=2,_T=5;class $Le{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,n,r=this.length){for(;this.pos<r;){const i=this.readVarint(),o=i>>3,s=this.pos;this.type=i&7,e(o,n,this),this.pos===s&&this.skip(i)}return n}readMessage(e,n){return this.readFields(e,n,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*hN;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*hN;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const n=this.buf;let r,i;return i=n[this.pos++],r=i&127,i<128||(i=n[this.pos++],r|=(i&127)<<7,i<128)||(i=n[this.pos++],r|=(i&127)<<14,i<128)||(i=n[this.pos++],r|=(i&127)<<21,i<128)?r:(i=n[this.pos],r|=(i&15)<<28,WLe(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,n=this.pos;return this.pos=e,e-n>=qLe&&pG?pG.decode(this.buf.subarray(n,e)):oNe(this.buf,n,e)}readBytes(){const e=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,e);return this.pos=e,n}readPackedVarint(e=[],n){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(n));return e}readPackedSVarint(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===l2?this.readVarint()+this.pos:this.pos+1}skip(e){const n=e&7;if(n===bI)for(;this.buf[this.pos++]>127;);else if(n===l2)this.pos=this.readVarint()+this.pos;else if(n===_T)this.pos+=4;else if(n===yT)this.pos+=8;else throw new Error(`Unimplemented type: ${n}`)}writeTag(e,n){this.writeVarint(e<<3|n)}realloc(e){let n=this.length||16;for(;n<this.pos+e;)n*=2;if(n!==this.length){const r=new Uint8Array(n);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=n}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*dG),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*dG),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){XLe(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const n=this.pos;this.pos=sNe(this.buf,e,this.pos);const r=this.pos-n;r>=128&&gG(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const n=e.length;this.writeVarint(n),this.realloc(n);for(let r=0;r<n;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,n){this.pos++;const r=this.pos;e(n,this);const i=this.pos-r;i>=128&&gG(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,n,r){this.writeTag(e,l2),this.writeRawMessage(n,r)}writePackedVarint(e,n){n.length&&this.writeMessage(e,KLe,n)}writePackedSVarint(e,n){n.length&&this.writeMessage(e,JLe,n)}writePackedBoolean(e,n){n.length&&this.writeMessage(e,tNe,n)}writePackedFloat(e,n){n.length&&this.writeMessage(e,QLe,n)}writePackedDouble(e,n){n.length&&this.writeMessage(e,eNe,n)}writePackedFixed32(e,n){n.length&&this.writeMessage(e,nNe,n)}writePackedSFixed32(e,n){n.length&&this.writeMessage(e,rNe,n)}writePackedFixed64(e,n){n.length&&this.writeMessage(e,iNe,n)}writePackedSFixed64(e,n){n.length&&this.writeMessage(e,aNe,n)}writeBytesField(e,n){this.writeTag(e,l2),this.writeBytes(n)}writeFixed32Field(e,n){this.writeTag(e,_T),this.writeFixed32(n)}writeSFixed32Field(e,n){this.writeTag(e,_T),this.writeSFixed32(n)}writeFixed64Field(e,n){this.writeTag(e,yT),this.writeFixed64(n)}writeSFixed64Field(e,n){this.writeTag(e,yT),this.writeSFixed64(n)}writeVarintField(e,n){this.writeTag(e,bI),this.writeVarint(n)}writeSVarintField(e,n){this.writeTag(e,bI),this.writeSVarint(n)}writeStringField(e,n){this.writeTag(e,l2),this.writeString(n)}writeFloatField(e,n){this.writeTag(e,_T),this.writeFloat(n)}writeDoubleField(e,n){this.writeTag(e,yT),this.writeDouble(n)}writeBooleanField(e,n){this.writeVarintField(e,+n)}}function WLe(t,e,n){const r=n.buf;let i,o;if(o=r[n.pos++],i=(o&112)>>4,o<128||(o=r[n.pos++],i|=(o&127)<<3,o<128)||(o=r[n.pos++],i|=(o&127)<<10,o<128)||(o=r[n.pos++],i|=(o&127)<<17,o<128)||(o=r[n.pos++],i|=(o&127)<<24,o<128)||(o=r[n.pos++],i|=(o&1)<<31,o<128))return r1(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function r1(t,e,n){return n?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function XLe(t,e){let n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(n=~(-t%4294967296),r=~(-t/4294967296),n^4294967295?n=n+1|0:(n=0,r=r+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),YLe(n,r,e),ZLe(r,e)}function YLe(t,e,n){n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos]=t&127}function ZLe(t,e){const n=(t&7)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function gG(t,e,n){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));n.realloc(r);for(let i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function KLe(t,e){for(let n=0;n<t.length;n++)e.writeVarint(t[n])}function JLe(t,e){for(let n=0;n<t.length;n++)e.writeSVarint(t[n])}function QLe(t,e){for(let n=0;n<t.length;n++)e.writeFloat(t[n])}function eNe(t,e){for(let n=0;n<t.length;n++)e.writeDouble(t[n])}function tNe(t,e){for(let n=0;n<t.length;n++)e.writeBoolean(t[n])}function nNe(t,e){for(let n=0;n<t.length;n++)e.writeFixed32(t[n])}function rNe(t,e){for(let n=0;n<t.length;n++)e.writeSFixed32(t[n])}function iNe(t,e){for(let n=0;n<t.length;n++)e.writeFixed64(t[n])}function aNe(t,e){for(let n=0;n<t.length;n++)e.writeSFixed64(t[n])}function oNe(t,e,n){let r="",i=e;for(;i<n;){const o=t[i];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a>n)break;let c,h,d;a===1?o<128&&(s=o):a===2?(c=t[i+1],(c&192)===128&&(s=(o&31)<<6|c&63,s<=127&&(s=null))):a===3?(c=t[i+1],h=t[i+2],(c&192)===128&&(h&192)===128&&(s=(o&15)<<12|(c&63)<<6|h&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(c=t[i+1],h=t[i+2],d=t[i+3],(c&192)===128&&(h&192)===128&&(d&192)===128&&(s=(o&15)<<18|(c&63)<<12|(h&63)<<6|d&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,r+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),r+=String.fromCharCode(s),i+=a}return r}function sNe(t,e,n){for(let r=0,i,o;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(o)if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||r+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):o=i;continue}else o&&(t[n++]=239,t[n++]=191,t[n++]=189,o=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=i&63|128)}return n}const lNe=t=>{try{const e=new $Le(t);return new VLe(e)}catch(e){return console.error("Error parsing vector tile:",e),{}}},qY=(t,e,n,r,i)=>{const o=eM(t,e,i),s=eM(n,r,i),a=Math.abs(s.x-o.x)+1,c=Math.abs(s.y-o.y)+1;return a*c},eM=(t,e,n)=>{const r=Math.pow(2,n),i=Math.floor((t+180)/360*r),o=e*Math.PI/180,s=Math.floor((1-Math.log(Math.tan(o)+1/Math.cos(o))/Math.PI)/2*r);return{x:i,y:s}},$Y=(t,e,n,r,i)=>{const o=eM(t,e,i),s=eM(n,r,i),a=[];for(let c=Math.min(o.x,s.x);c<=Math.max(o.x,s.x);c++)for(let h=Math.min(o.y,s.y);h<=Math.max(o.y,s.y);h++)a.push({x:c,y:h,z:i});return a},uNe=async t=>{const{bbox:e,vectorTiles:n,vtDataset:r,elevationGrid:i,gridSize:o}=t,[s,a,c,h]=e;if(r.enabled===!1)return console.log(`Skipping disabled layer "${r.sourceLayer}"`),[];const d=[];return n.forEach(v=>{var M,D,A,F,O;let w=v.data,_=v.tile;if(!w.layers||!w.layers[r.sourceLayer]){console.warn(`Source layer "${r.sourceLayer}" not found in tile`);return}const E=w.layers[r.sourceLayer];for(let N=0;N<E.length;N++){const H=E.feature(N).toGeoJSON(_.x,_.y,_.z);if(!(r!=null&&r.subClass&&r.subClass.indexOf((M=H.properties)==null?void 0:M.subclass)!==-1)&&!(r.filter&&!JT(r.filter,H)))if(H.geometry.type==="Polygon")H.geometry.coordinates.forEach(G=>{var X,K;const W=i1(G,i,o,s,a,c,h);d.push({geometry:G,type:"Polygon",height:((X=H==null?void 0:H.properties)==null?void 0:X.height)||((K=H==null?void 0:H.properties)==null?void 0:K.render_height),baseElevation:W})});else if(H.geometry.type==="MultiPolygon")H.geometry.coordinates.forEach(G=>{G.forEach(W=>{var K,k;const X=i1(W,i,o,s,a,c,h);d.push({geometry:W,type:"Polygon",height:((K=H==null?void 0:H.properties)==null?void 0:K.height)||((k=H==null?void 0:H.properties)==null?void 0:k.render_height),baseElevation:X})})});else if(H.geometry.type==="LineString"){const G=i1(H.geometry.coordinates,i,o,s,a,c,h);d.push({geometry:H.geometry.coordinates,type:"LineString",height:((D=H==null?void 0:H.properties)==null?void 0:D.height)||((A=H==null?void 0:H.properties)==null?void 0:A.render_height)||0,baseElevation:G})}else if(H.geometry.type==="Point"){const G=i1([H.geometry.coordinates],i,o,s,a,c,h);d.push({geometry:[H.geometry.coordinates],type:"Point",height:((F=H==null?void 0:H.properties)==null?void 0:F.height)||((O=H==null?void 0:H.properties)==null?void 0:O.render_height)||0,baseElevation:G})}else H.geometry.type==="MultiLineString"?H.geometry.coordinates.forEach(G=>{var X,K;const W=i1(G,i,o,s,a,c,h);d.push({geometry:G,type:"LineString",height:((X=H==null?void 0:H.properties)==null?void 0:X.height)||((K=H==null?void 0:H.properties)==null?void 0:K.render_height)||0,baseElevation:W})}):H.geometry.type==="MultiPoint"&&H.geometry.coordinates.forEach(G=>{var X,K;const W=i1([G],i,o,s,a,c,h);d.push({geometry:[G],type:"Point",height:((X=H==null?void 0:H.properties)==null?void 0:X.height)||((K=H==null?void 0:H.properties)==null?void 0:K.render_height)||0,baseElevation:W})})}console.log(`Fetched ${d.length} polygons from source layer "${r.sourceLayer}"`)}),d},cNe=async t=>{const{bbox:e,zoom:n,gridSize:r}=t,[i,o,s,a]=e;if(!r||!r.width||!r.height)return console.warn("Invalid or missing gridSize. Returning no data."),[];const c=qY(i,o,s,a,n);if(c>9)return console.warn(`Skipping geometry data fetch: area too large (${c} tiles, max allowed: 9)`),[];const h=$Y(i,o,s,a,n);return console.log(`Fetching geometry data from ${h.length} tiles`),(await Promise.all(h.map(async d=>{const v=`https://wms.wheregroup.com/tileserver/tile/world-0-14/${d.z}/${d.x}/${d.y}.pbf`;console.log(`Fetching geometry from: ${v}`);try{const w=await fetch(v);if(!w.ok){console.warn(`Failed to fetch tile: ${w.status}`);return}const _=await w.arrayBuffer(),E=lNe(_);return{tile:d,data:E}}catch(w){console.error(`Error fetching tile ${d.z}/${d.x}/${d.y}:`,w)}}))).filter(d=>d!==void 0)},i1=(t,e,n,r,i,o,s)=>{const{width:a,height:c}=n;let h=0,d=0;return t.forEach(([v,w])=>{const _=Math.floor((v-r)/(o-r)*(a-1)),E=Math.floor((w-i)/(s-i)*(c-1));_>=0&&_<a&&E>=0&&E<c&&(h+=e[E][_],d++)}),d>0?h/d:0};function JT(t,e){var r,i,o,s;if(!t)return!0;const n=t[0];if(n==="all"){for(let a=1;a<t.length;a++)if(!JT(t[a],e))return!1;return!0}else if(n==="any"){for(let a=1;a<t.length;a++)if(JT(t[a],e))return!0;return!1}else if(n==="none"){for(let a=1;a<t.length;a++)if(JT(t[a],e))return!1;return!0}else if(n==="=="){const[a,c,h]=t;return c==="$type"?e.geometry.type===h:((r=e.properties)==null?void 0:r[c])===h}else if(n==="!="){const[a,c,h]=t;return c==="$type"?e.geometry.type!==h:((i=e.properties)==null?void 0:i[c])!==h}else if(n==="in"){const[a,c,...h]=t;return c==="$type"?h.includes(e.geometry.type):h.includes((o=e.properties)==null?void 0:o[c])}else if(n==="!in"){const[a,c,...h]=t;return c==="$type"?!h.includes(e.geometry.type):!h.includes((s=e.properties)==null?void 0:s[c])}else{if(n==="has")return t[1]in(e.properties||{});if(n==="!has")return!(t[1]in(e.properties||{}))}return console.warn(`Unsupported filter operator: ${n}`),!0}class wI{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y,this.array[this.top++]=e.z}}class hNe{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y}}class Qp{constructor(e){this.plane=null,this.front=null,this.back=null,this.polygons=[],e&&this.build(e)}clone(){const e=new Qp;return e.plane=this.plane&&this.plane.clone(),e.front=this.front&&this.front.clone(),e.back=this.back&&this.back.clone(),e.polygons=this.polygons.map(n=>n.clone()),e}invert(){for(let n=0;n<this.polygons.length;n++)this.polygons[n].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();const e=this.front;this.front=this.back,this.back=e}clipPolygons(e){if(!this.plane)return e.slice();let n=new Array,r=new Array;for(let i=0;i<e.length;i++)this.plane.splitPolygon(e[i],n,r,n,r);return this.front&&(n=this.front.clipPolygons(n)),this.back?r=this.back.clipPolygons(r):r=[],n.concat(r)}clipTo(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}allPolygons(){let e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}build(e){if(!e.length)return;this.plane||(this.plane=e[0].plane.clone());const n=[],r=[];for(let i=0;i<e.length;i++)this.plane.splitPolygon(e[i],this.polygons,this.polygons,n,r);n.length&&(this.front||(this.front=new Qp),this.front.build(n)),r.length&&(this.back||(this.back=new Qp),this.back.build(r))}}class pf{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}clone(){return new pf(this.x,this.y,this.z)}negate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}times(e){return this.x*=e,this.y*=e,this.z*=e,this}dividedBy(e){return this.x/=e,this.y/=e,this.z/=e,this}lerp(e,n){return this.add(new pf().copy(e).sub(this).times(n))}unit(){return this.dividedBy(this.length())}length(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}normalize(){return this.unit()}cross(e){const n=this.clone(),r=n.x,i=n.y,o=n.z,s=e.x,a=e.y,c=e.z;return this.x=i*c-o*a,this.y=o*s-r*c,this.z=r*a-i*s,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}toVector3(){return new Pn(this.x,this.y,this.z)}}class G0{constructor(e,n){this.normal=e,this.w=n,this.normal=e,this.w=n}clone(){return new G0(this.normal.clone(),this.w)}flip(){this.normal.negate(),this.w=-this.w}splitPolygon(e,n,r,i,o){let d=0;const v=[];for(let w=0;w<e.vertices.length;w++){const _=this.normal.dot(e.vertices[w].pos)-this.w,E=_<-G0.EPSILON?2:_>G0.EPSILON?1:0;d|=E,v.push(E)}switch(d){case 0:(this.normal.dot(e.plane.normal)>0?n:r).push(e);break;case 1:i.push(e);break;case 2:o.push(e);break;case 3:{const w=[],_=[];for(let E=0;E<e.vertices.length;E++){const M=(E+1)%e.vertices.length,D=v[E],A=v[M],F=e.vertices[E],O=e.vertices[M];if(D!=2&&w.push(F),D!=1&&_.push(D!=2?F.clone():F),(D|A)==3){const N=(this.w-this.normal.dot(F.pos))/this.normal.dot(new pf().copy(O.pos).sub(F.pos)),H=F.interpolate(O,N);w.push(H),_.push(H.clone())}}w.length>=3&&i.push(new Cx(w,e.shared)),_.length>=3&&o.push(new Cx(_,e.shared));break}}}static fromPoints(e,n,r){const i=new pf().copy(n).sub(e).cross(new pf().copy(r).sub(e)).normalize();return new G0(i.clone(),i.dot(e))}}G0.EPSILON=1e-5;class Cx{constructor(e,n){this.vertices=e,this.shared=n,this.plane=G0.fromPoints(e[0].pos,e[1].pos,e[2].pos)}clone(){return new Cx(this.vertices.map(e=>e.clone()),this.shared)}flip(){this.vertices.reverse().map(e=>e.flip()),this.plane.flip()}}class tM{constructor(e,n,r,i){this.pos=new pf().copy(e),this.normal=new pf().copy(n),this.uv=new pf().copy(r),this.uv.z=0,i&&(this.color=new pf().copy(i))}clone(){return new tM(this.pos,this.normal,this.uv,this.color)}flip(){this.normal.negate()}interpolate(e,n){return new tM(this.pos.clone().lerp(e.pos,n),this.normal.clone().lerp(e.normal,n),this.uv.clone().lerp(e.uv,n),this.color&&e.color&&this.color.clone().lerp(e.color,n))}}class gu{constructor(){this.polygons=[]}static fromPolygons(e){const n=new gu;return n.polygons=e,n}static fromGeometry(e,n){let r=[];const i=e.attributes.position,o=e.attributes.normal,s=e.attributes.uv,a=e.attributes.color,c=e.groups;let h;if(e.index)h=e.index.array;else{h=new Uint16Array(i.array.length/i.itemSize|0);for(let v=0;v<h.length;v++)h[v]=v}const d=h.length/3|0;r=new Array(d);for(let v=0,w=0,_=h.length;v<_;v+=3,w++){const E=new Array(3);for(let M=0;M<3;M++){const D=h[v+M],A=D*3,F=D*2,O=i.array[A],N=i.array[A+1],H=i.array[A+2],G=o.array[A],W=o.array[A+1],X=o.array[A+2],K=s==null?void 0:s.array[F],k=s==null?void 0:s.array[F+1];E[M]=new tM(new pf(O,N,H),new pf(G,W,X),new pf(K,k,0),a&&new pf(a.array[A],a.array[A+1],a.array[A+2]))}if(n===void 0&&c&&c.length>0)for(const M of c)v>=M.start&&v<M.start+M.count&&(r[w]=new Cx(E,M.materialIndex));else r[w]=new Cx(E,n)}return gu.fromPolygons(r.filter(v=>!Number.isNaN(v.plane.normal.x)))}static toGeometry(e,n){let r=0;const i=e.polygons;for(const _ of i)r+=_.vertices.length-2;const o=new qh,s=new wI(r*3*3),a=new wI(r*3*3),c=new hNe(r*2*3);let h;const d=[],v=[];for(const _ of i){const E=_.vertices,M=E.length;_.shared!==void 0&&(d[_.shared]||(d[_.shared]=[])),M&&E[0].color!==void 0&&(h||(h=new wI(r*3*3)));for(let D=3;D<=M;D++)(_.shared===void 0?v:d[_.shared]).push(s.top/3,s.top/3+1,s.top/3+2),s.write(E[0].pos),s.write(E[D-2].pos),s.write(E[D-1].pos),a.write(E[0].normal),a.write(E[D-2].normal),a.write(E[D-1].normal),c&&(c.write(E[0].uv),c.write(E[D-2].uv),c.write(E[D-1].uv)),h&&(h.write(E[0].color),h.write(E[D-2].color),h.write(E[D-1].color))}o.setAttribute("position",new ol(s.array,3)),o.setAttribute("normal",new ol(a.array,3)),c&&o.setAttribute("uv",new ol(c.array,2)),h&&o.setAttribute("color",new ol(h.array,3));for(let _=0;_<d.length;_++)d[_]===void 0&&(d[_]=[]);if(d.length){let _=[],E=0;for(let M=0;M<d.length;M++)o.addGroup(E,d[M].length,M),E+=d[M].length,_=_.concat(d[M]);o.addGroup(E,v.length,d.length),_=_.concat(v),o.setIndex(_)}const w=new Os().copy(n).invert();return o.applyMatrix4(w),o.computeBoundingSphere(),o.computeBoundingBox(),o}static fromMesh(e,n){const r=gu.fromGeometry(e.geometry,n),i=new Pn,o=new Oa;o.getNormalMatrix(e.matrix);for(let s=0;s<r.polygons.length;s++){const a=r.polygons[s];for(let c=0;c<a.vertices.length;c++){const h=a.vertices[c];h.pos.copy(i.copy(h.pos.toVector3()).applyMatrix4(e.matrix)),h.normal.copy(i.copy(h.normal.toVector3()).applyMatrix3(o))}}return r}static toMesh(e,n,r){const i=gu.toGeometry(e,n),o=new Uc(i,r);return o.matrix.copy(n),o.matrix.decompose(o.position,o.quaternion,o.scale),o.rotation.setFromQuaternion(o.quaternion),o.updateMatrixWorld(),o.castShadow=o.receiveShadow=!0,o}static union(e,n){const r=gu.fromMesh(e),i=gu.fromMesh(n);return gu.toMesh(r.union(i),e.matrix,e.material)}static subtract(e,n){const r=gu.fromMesh(e),i=gu.fromMesh(n);return gu.toMesh(r.subtract(i),e.matrix,e.material)}static intersect(e,n){const r=gu.fromMesh(e),i=gu.fromMesh(n);return gu.toMesh(r.intersect(i),e.matrix,e.material)}clone(){const e=new gu;return e.polygons=this.polygons.map(n=>n.clone()).filter(n=>Number.isFinite(n.plane.w)),e}toPolygons(){return this.polygons}union(e){const n=new Qp(this.clone().polygons),r=new Qp(e.clone().polygons);return n.clipTo(r),r.clipTo(n),r.invert(),r.clipTo(n),r.invert(),n.build(r.allPolygons()),gu.fromPolygons(n.allPolygons())}subtract(e){const n=new Qp(this.clone().polygons),r=new Qp(e.clone().polygons);return n.invert(),n.clipTo(r),r.clipTo(n),r.invert(),r.clipTo(n),r.invert(),n.build(r.allPolygons()),n.invert(),gu.fromPolygons(n.allPolygons())}intersect(e){const n=new Qp(this.clone().polygons),r=new Qp(e.clone().polygons);return n.invert(),r.clipTo(n),r.invert(),n.clipTo(r),r.clipTo(n),n.build(r.allPolygons()),n.invert(),gu.fromPolygons(n.allPolygons())}inverse(){const e=this.clone();for(const n of e.polygons)n.flip();return e}toMesh(e,n){return gu.toMesh(this,e,n)}toGeometry(e){return gu.toGeometry(this,e)}}function fNe(t,e=!1){const n=t[0].index!==null,r=new Set(Object.keys(t[0].attributes)),i=new Set(Object.keys(t[0].morphAttributes)),o={},s={},a=t[0].morphTargetsRelative,c=new qh;let h=0;for(let d=0;d<t.length;++d){const v=t[d];let w=0;if(n!==(v.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const _ in v.attributes){if(!r.has(_))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+_+'" attribute exists among all geometries, or in none of them.'),null;o[_]===void 0&&(o[_]=[]),o[_].push(v.attributes[_]),w++}if(w!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(a!==v.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const _ in v.morphAttributes){if(!i.has(_))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;s[_]===void 0&&(s[_]=[]),s[_].push(v.morphAttributes[_])}if(e){let _;if(n)_=v.index.count;else if(v.attributes.position!==void 0)_=v.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;c.addGroup(h,_,d),h+=_}}if(n){let d=0;const v=[];for(let w=0;w<t.length;++w){const _=t[w].index;for(let E=0;E<_.count;++E)v.push(_.getX(E)+d);d+=t[w].attributes.position.count}c.setIndex(v)}for(const d in o){const v=mG(o[d]);if(!v)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+d+" attribute."),null;c.setAttribute(d,v)}for(const d in s){const v=s[d][0].length;if(v===0)break;c.morphAttributes=c.morphAttributes||{},c.morphAttributes[d]=[];for(let w=0;w<v;++w){const _=[];for(let M=0;M<s[d].length;++M)_.push(s[d][M][w]);const E=mG(_);if(!E)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+d+" morphAttribute."),null;c.morphAttributes[d].push(E)}}return c}function mG(t){let e,n,r,i=-1,o=0;for(let h=0;h<t.length;++h){const d=t[h];if(e===void 0&&(e=d.array.constructor),e!==d.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=d.itemSize),n!==d.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=d.normalized),r!==d.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(i===-1&&(i=d.gpuType),i!==d.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;o+=d.count*n}const s=new e(o),a=new ol(s,n,r);let c=0;for(let h=0;h<t.length;++h){const d=t[h];if(d.isInterleavedBufferAttribute){const v=c/n;for(let w=0,_=d.count;w<_;w++)for(let E=0;E<n;E++){const M=d.getComponent(w,E);a.setComponent(w+v,E,M)}}else s.set(d.array,c);c+=d.count*n}return i!==void 0&&(a.gpuType=i),a}function SI(t,e,n,r,i,o,s){const{width:a,height:c}=r;if(t<i.minLng||t>i.maxLng||e<i.minLat||e>i.maxLat)return o;const h=(t-i.minLng)/(i.maxLng-i.minLng)*(a-1),d=(e-i.minLat)/(i.maxLat-i.minLat)*(c-1),v=Math.floor(h),w=Math.floor(d),_=Math.min(v+1,a-1),E=Math.min(w+1,c-1),M=h-v,D=d-w,A=n[w][v],F=n[w][_],O=n[E][v],N=n[E][_],H=A*(1-M)+F*M,G=O*(1-M)+N*M,W=H*(1-D)+G*D,X=Math.max(0,Math.min(1,(W-o)/(s-o||1)));return o+X*(s-o)}function dNe({lng:t,lat:e,bbox:[n,r,i,o]}){const s=(t-n)/(i-n)-.5,a=(e-r)/(o-r)-.5;return[s*200,a*200]}function pNe(t,e,n,r,i,o){const s=(e+r)/2,a=111320*Math.cos(s*Math.PI/180),c=111320,h=(n-t)*a,d=(r-e)*c,v=Math.sqrt(h*h+d*d),w=o-i||1;let M=200*.2/w;return v>1e4?M*=1.5:v<2e3&&(M*=.8),Math.min(.5,Math.max(.001,M))}const gNe=.01;function mNe({bbox:[t,e,n,r],polygons:i,terrainBaseHeight:o,elevationGrid:s,gridSize:a,minElevation:c,maxElevation:h,vtDataSet:d,useSameZOffset:v=!1}){console.log(`Processing ${i.length} polygons for ${d.sourceLayer}`);const w=[],_=500,E=.5;let M=1/0,D=-1/0;const A=10;for(let X=0;X<A;X++){const K=t+(n-t)*(X/(A-1));for(let k=0;k<A;k++){const $=e+(r-e)*(k/(A-1)),Q=SI(K,$,s,a,{minLng:t,minLat:e,maxLng:n,maxLat:r},c,h);M=Math.min(M,Q),D=Math.max(D,Q)}}const F=200,O=new Ny(F,F,F),N=new Uc(O,new Nw);N.position.set(0,0,-10);const H=new Hx;H.setFromObject(N);function G(X){if(X.boundingBox||X.computeBoundingBox(),X.boundingBox&&!H.intersectsBox(X.boundingBox))return null;try{if(!X||!X.attributes||!X.attributes.position||X.attributes.position.count===0)return null;const K=X.clone();K.attributes.color&&K.deleteAttribute("color");const k=new Nw,$=new Uc(K,k);try{const Q=gu.intersect($,N),ie=Q.geometry.attributes.position.array;for(let ae=2;ae<ie.length;ae+=3)if(ie[ae]<0){return console.warn("Resulting geometry has a point below z=0, returning original geometry",X),null;return X}if(Q&&Q.geometry&&Q.geometry.attributes&&Q.geometry.attributes.position&&Q.geometry.attributes.position.count>0){if(X.attributes.color){const ae=X.attributes.color,ce=new Float32Array(Q.geometry.attributes.position.count*3),se=ae.array?ae.array[0]:.7,Se=ae.array?ae.array[1]:.7,ye=ae.array?ae.array[2]:.7;for(let Te=0;Te<ce.length;Te+=3)ce[Te]=se,ce[Te+1]=Se,ce[Te+2]=ye;Q.geometry.setAttribute("color",new ol(ce,3))}return Q.geometry}return null}catch(Q){return console.warn("CSG intersection failed:",Q),X}}catch(K){return console.error("Unhandled error during geometry clipping:",K),X}return X}if(i.forEach((X,K)=>{let k=d.extrusionDepth||X.height||D-M+.1;d.minExtrusionDepth&&k<d.minExtrusionDepth&&(k=d.minExtrusionDepth);const $=X.geometry;if(!$||$.length<3)return;const Q=$.map(([xe,ve])=>new qr(xe,ve));ex.isClockWise(Q)||Q.reverse();let ie=1/0;const ae=[];Q.forEach(xe=>{const ve=xe.x,Ee=xe.y,De=SI(ve,Ee,s,a,{minLng:t,minLat:e,maxLng:n,maxLat:r},c,h);ie=Math.min(ie,De),ae.push(dNe({lng:ve,lat:Ee,bbox:[t,e,n,r]}))}),v&&(ie=M);let ce=Math.min(Math.max(k,E),_);if(d.useAdaptiveScaleFactor){const xe=pNe(t,e,n,r,c,h);ce=ce*xe}d.heightScaleFactor&&(ce=ce*d.heightScaleFactor);const se=ie+(typeof(d==null?void 0:d.zOffset)<"u"?d.zOffset:0)-gNe,Se=new NY;Se.moveTo(ae[0][0],ae[0][1]);for(let xe=1;xe<ae.length;xe++)Se.lineTo(ae[xe][0],ae[xe][1]);Se.autoClose=!0;const ye={steps:1,depth:ce,bevelEnabled:!0},Te=new EO(Se,ye);if(Te.translate(0,0,se),d.alignVerticesToTerrain){const xe=Te.attributes.position;for(let ve=0;ve<xe.count;ve++){const Ee=xe.getX(ve),De=xe.getY(ve),We=xe.getZ(ve);if(We<=se+.1)continue;const Ae=Math.min(200,200),ut=t+(Ee+Ae/2)/Ae*(n-t),pt=e+(De+Ae/2)/Ae*(r-e),st=SI(ut,pt,s,a,{minLng:t,minLat:e,maxLng:n,maxLat:r},c,h),Ce=We-se;xe.setZ(ve,st+Ce)}xe.needsUpdate=!0}Te.computeVertexNormals();const pe=new Ji(d.color),Ie=new Float32Array(Te.attributes.position.count*3);for(let xe=0;xe<Te.attributes.position.count;xe++)Ie[xe*3]=pe.r,Ie[xe*3+1]=pe.g,Ie[xe*3+2]=pe.b;Te.setAttribute("color",new ol(Ie,3)),Te.hasAttribute("uv")&&Te.deleteAttribute("uv");const me=G(Te);me&&me.attributes&&me.attributes.position&&me.attributes.position.count>0&&w.push(me)}),!w.length)return new qh;const W=[];for(const X of w){if(!X.attributes||!X.attributes.position){console.warn("Skipping geometry without position attribute");continue}const K=X.clone();if(K.attributes.normal||K.computeVertexNormals(),!K.attributes.color){const k=new Ji(d.color),$=new Float32Array(K.attributes.position.count*3);for(let Q=0;Q<K.attributes.position.count;Q++)$[Q*3]=k.r,$[Q*3+1]=k.g,$[Q*3+2]=k.b;K.setAttribute("color",new ol($,3))}K.attributes.position.count>=3&&W.push(K)}if(console.log(`Merging ${W.length} normalized geometries`),W.length===0)return new qh;if(W.length===1)return W[0];try{const X=fNe(W,!1);return X||(console.warn("Merge operation returned null geometry"),new qh)}catch(X){return console.error("Error merging geometries:",X),W[0]}}function vG(t,e,n,r,i,o){const s=[],a=new qh,{width:c,height:h}=e;let d=1/0,v=-1/0;const w=[],_=[],E=[],M=[];for(let F=0;F<h;F++)for(let O=0;O<c;O++){const N=(t[F][O]-n)/Math.max(1,r-n),H=new Ji(13808780),G=new Ji(11041613),W=new Ji().lerpColors(H,G,N);M.push(W.r,W.g,W.b);const X=(O/(c-1)-.5)*200,K=(F/(h-1)-.5)*200,k=o+N*(200*.2)*i;d=Math.min(d,k),v=Math.max(v,k),w.push(X,K,k),s[F]||(s[F]=[]),s[F][O]=k,_.push(X,K,0)}for(let F=0;F<h-1;F++)for(let O=0;O<c-1;O++){const N=F*c+O,H=N+1,G=N+c,W=G+1;E.push(N,H,G,G,H,W)}const D=c*h;for(let F=0;F<h-1;F++)for(let O=0;O<c-1;O++){const N=D+F*c+O,H=N+1,G=N+c,W=G+1;E.push(N,G,H,H,G,W)}for(let F=0;F<h-1;F++){const O=F*c+(c-1),N=D+O,H=(F+1)*c+(c-1),G=D+H;E.push(O,N,G),E.push(O,G,H);const W=F*c,X=D+W,K=(F+1)*c,k=D+K;E.push(W,k,X),E.push(W,K,k)}for(let F=0;F<c-1;F++){const O=(h-1)*c+F,N=D+O,H=O+1,G=D+H;E.push(O,G,N),E.push(O,H,G);const W=F,X=D+W,K=F+1,k=D+K;E.push(W,X,k),E.push(W,k,K)}const A=new Float32Array(w.length+_.length);return A.set(w,0),A.set(_,w.length),a.setIndex(E),a.setAttribute("position",new Wf(A,3)),a.setAttribute("color",new Wf(M,3)),a.computeVertexNormals(),console.log(s),{geometry:a,processedElevationGrid:s,processedMinElevation:d,processedMaxElevation:v}}function vNe(t,e){const n=ame(t),r=Vme(n,e,{units:"meters"});if(!r||r.geometry.type!=="Polygon")throw new Error("Failed to buffer LineString into a Polygon");return r.geometry.coordinates[0]}function WY(t){return JSON.stringify({enabled:t.enabled,verticalExaggeration:t.verticalExaggeration,baseHeight:t.baseHeight})}function XY(t){return JSON.stringify({sourceLayer:t.sourceLayer,subClass:t.subClass,extrusionDepth:t.extrusionDepth,zOffset:t.zOffset,bufferSize:t.bufferSize,filter:t.filter,useAdaptiveScaleFactor:t.useAdaptiveScaleFactor,heightScaleFactor:t.heightScaleFactor,alignVerticesToTerrain:t.alignVerticesToTerrain,enabled:t.enabled,color:t.color?{r:t.color.r,g:t.color.g,b:t.color.b}:void 0})}function fN(t){return t?JSON.stringify(t.geometry):"undefined"}function yNe(t,e,n){return JSON.stringify({bbox:fN(t),terrain:WY(e),layers:n.filter(r=>r.enabled!==!1).map(XY)})}function EI(t,e,n){const r=e.enabled?`${fN(t)}:${WY(e)}`:"disabled",i=n.map((o,s)=>({index:s,hash:o.enabled!==!1?`${fN(t)}:${XY(o)}`:"disabled"}));return{terrainHash:r,layerHashes:i}}const _Ne=function(){const[t,e]=Be.useState(null),{bbox:n,vtLayers:r,terrainSettings:i,buildingSettings:o,setGeometryDataSets:s,geometryDataSets:a,setIsProcessing:c,setProcessingProgress:h,setProcessingStatus:d,updateProcessingState:v,configHashes:w,setConfigHashes:_,processedTerrainData:E,setProcessedTerrainData:M}=Oy(),D=async()=>{var K,k;if(!n){console.error("Cannot generate 3D model: bbox is undefined");return}c(!0),v({status:"Starting 3D model generation...",progress:0}),console.log("%c 🏗️ STARTING 3D MODEL GENERATION","background: #4CAF50; color: white; padding: 4px; font-weight: bold;");const N=yNe(n,i,r),{terrainHash:H,layerHashes:G}=EI(n,i,r);if(N===w.fullConfigHash){console.log("%c ✅ SKIPPING 3D MODEL GENERATION - No config changes detected","background: #2196F3; color: white; padding: 4px; font-weight: bold;");return}console.log("Generating 3D model for:",n),console.log("Using terrain settings:",i),console.log("Using building settings:",o);const W=H!==w.terrainHash,X=G.filter(($,Q)=>{var ae;return((ae=w.layerHashes.find(ce=>ce.index===$.index))==null?void 0:ae.hash)!==$.hash}).map($=>$.index);W?console.log("%c 🏔️ Terrain configuration changed - regenerating terrain","color: #FF9800;"):i.enabled&&a.terrainGeometry&&console.log("%c ✅ Terrain configuration unchanged - reusing existing terrain geometry","color: #4CAF50;"),X.length>0&&console.log("%c 🔄 Changed layers:","color: #FF9800;",X.map($=>{var Q;return((Q=r[$])==null?void 0:Q.sourceLayer)||`Layer ${$}`}).join(", "));try{const $=n;if(!$.geometry||$.geometry.type!=="Polygon"){console.error("Invalid geometry: expected a Polygon");return}const Q=$.geometry.coordinates[0];let ie=1/0,ae=1/0,ce=-1/0,se=-1/0;Q.forEach(wt=>{const[Ut,ht]=wt;ie=Math.min(ie,Ut),ae=Math.min(ae,ht),ce=Math.max(ce,Ut),se=Math.max(se,ht)});let Se=12;for(;Se>0&&!(qY(ie,ae,ce,se,Se)<=4);)Se--;console.log(`Using zoom level ${Se} for the 3D model`),v({status:"Calculating tile coordinates...",progress:10});const ye=$Y(ie,ae,ce,se,Se);console.log(`Downloading ${ye.length} tiles`),v({status:`Downloading ${ye.length} elevation tiles...`,progress:20}),console.log("🌐 Downloading tile data for tiles:",ye);const Te=await Promise.all(ye.map(wt=>A(wt.z,wt.x,wt.y)));console.log("✅ Successfully downloaded all tile data:",Te.length),v({status:"Processing elevation data...",progress:35}),console.log("🏔️ Processing elevation data...");const{elevationGrid:pe,gridSize:Ie,minElevation:me,maxElevation:xe}=F(Te,ye,ie,ae,ce,se);console.log("✅ Elevation data processed:",{gridSize:Ie,minElevation:me,maxElevation:xe}),v({status:"Fetching vector tile data...",progress:50}),console.log("Fetching buildings at fixed zoom level 14");let Ee=await cNe({bbox:[ie,ae,ce,se],zoom:14,gridSize:Ie});v({status:"Generating terrain geometry...",progress:65});let De=i.enabled?a.terrainGeometry:void 0,We,Ae=me,ut=xe;const{terrainHash:pt}=EI(n,i,r),st=pt!==w.terrainHash;if(!De||st){console.log("🗻 Creating terrain geometry...");const wt=vG(pe,Ie,me,xe,i.verticalExaggeration,i.baseHeight);De=wt.geometry,We=wt.processedElevationGrid,Ae=wt.processedMinElevation,ut=wt.processedMaxElevation,M({processedElevationGrid:wt.processedElevationGrid,processedMinElevation:wt.processedMinElevation,processedMaxElevation:wt.processedMaxElevation}),console.log("✅ Terrain geometry created successfully:",{geometryExists:!!De,vertexCount:((k=(K=De==null?void 0:De.attributes)==null?void 0:K.position)==null?void 0:k.count)||0})}else if(console.log("%c ♻️ Reusing existing terrain geometry - configuration unchanged","color: #4CAF50;"),E.processedElevationGrid)console.log("%c ♻️ Reusing existing processed terrain data","color: #4CAF50;"),We=E.processedElevationGrid,Ae=E.processedMinElevation,ut=E.processedMaxElevation;else{console.log("%c 🔄 Regenerating processed terrain data","color: #FF9800;");const wt=vG(pe,Ie,me,xe,i.verticalExaggeration,i.baseHeight);We=wt.processedElevationGrid,Ae=wt.processedMinElevation,ut=wt.processedMaxElevation,M({processedElevationGrid:wt.processedElevationGrid,processedMinElevation:wt.processedMinElevation,processedMaxElevation:wt.processedMaxElevation})}console.log("🔄 Setting output geometries:",{terrainEnabled:i.enabled,terrainGeometryExists:!!De,buildingsEnabled:o.enabled});let Ce=[];const It=a.polygonGeometries||[],{terrainHash:Ve,layerHashes:yt}=EI(n,i,r),Ze=yt.filter(wt=>{var ht;return((ht=w.layerHashes.find(qt=>qt.index===wt.index))==null?void 0:ht.hash)!==wt.hash}).map(wt=>wt.index);for(let wt=0;wt<r.length;wt++){const Ut=r[wt];if(v({status:"Processing "+Ut.sourceLayer+" layer",progress:75+wt*10/r.length}),Ut.enabled===!1){console.log(`Skipping disabled layer: ${Ut.sourceLayer}`);continue}const ht=Ze.includes(wt)||st,qt=It.find(Re=>{var Pt,Dt;return Re.sourceLayer===Ut.sourceLayer&&((Pt=Re.subClass)==null?void 0:Pt.toString())===((Dt=Ut.subClass)==null?void 0:Dt.toString())});if(!ht&&(qt!=null&&qt.geometry)){console.log(`%c ♻️ Reusing existing ${Ut.sourceLayer} geometry - configuration unchanged`,"color: #4CAF50;"),Ce.push({...Ut,geometry:qt.geometry});continue}console.log(`%c 🔄 Generating ${Ut.sourceLayer} geometry - configuration changed`,"color: #FF9800;"),console.log(`Fetching ${Ut.sourceLayer} data...`);let Ye=await uNe({bbox:[ie,ae,ce,se],vtDataset:Ut,vectorTiles:Ee,elevationGrid:We,gridSize:Ie});if(console.log(`Received ${(Ye==null?void 0:Ye.length)||0} ${Ut.sourceLayer} features`),Ye&&Ye.length>0){const Pt={minX:-100,maxX:100,minY:-100,maxY:100,minZ:i.baseHeight-20,maxZ:i.baseHeight+100};Ye=Ye.map(At=>{if(At.type==="LineString"){const Bt=vNe(At.geometry,Ut.bufferSize||1);return{...At,type:"Polygon",geometry:Bt}}return At});const Dt=mNe({polygons:Ye,terrainBaseHeight:i.baseHeight,bbox:[ie,ae,ce,se],elevationGrid:We,gridSize:Ie,minElevation:Ae,maxElevation:ut,vtDataSet:Ut,useSameZOffset:!0});Dt&&Dt.attributes&&Dt.attributes.position&&Dt.attributes.position.count>0?(console.log(`Created valid ${Ut.sourceLayer} geometry with ${Dt.attributes.position.count} vertices`),Ce.push({...Ut,geometry:Dt})):console.warn(`Failed to create valid ${Ut.sourceLayer} geometry or all features were clipped out`)}else console.warn(`No ${Ut.sourceLayer} features found`)}if(Ce.length>0){const Ut=new Ny(200,200,100)}s({terrainGeometry:i.enabled?De:void 0,polygonGeometries:Ce}),c(!1),_({fullConfigHash:N,terrainHash:Ve,layerHashes:yt}),v({status:"3D model generation complete!",progress:100}),console.log("%c ✅ 3D model generation complete!","background: #4CAF50; color: white; padding: 4px; font-weight: bold;"),setTimeout(()=>{c(!1)},2e3)}catch($){console.error("Error generating 3D model:",$);const Q=$ instanceof Error?$.message:"Failed to generate 3D model";v({status:`Error: ${Q}`,progress:100}),setTimeout(()=>{c(!1)},3e3)}},A=async(N,H,G)=>{const W=`https://wms.wheregroup.com/dem_tileserver/raster_dem/${N}/${H}/${G}.webp`;console.log(`Downloading tile: ${W}`);try{const X=await fetch(W);if(!X.ok)throw new Error(`Failed to download tile: ${X.status}`);const K=await X.blob(),k=await createImageBitmap(K),$=document.createElement("canvas");$.width=k.width,$.height=k.height;const Q=$.getContext("2d");if(!Q)throw new Error("Could not get canvas context");return Q.drawImage(k,0,0),{imageData:Q.getImageData(0,0,$.width,$.height),width:$.width,height:$.height,x:H,y:G,z:N}}catch(X){throw console.error(`Error downloading tile ${N}/${H}/${G}:`,X),X}},F=(N,H,G,W,X,K)=>{const k={width:200,height:200},$=new Array(k.height).fill(0).map(()=>new Array(k.width).fill(0)),Q=new Array(k.height).fill(0).map(()=>new Array(k.width).fill(0));let ie=1/0,ae=-1/0;N.forEach(ye=>{if(!ye.imageData)return;const{imageData:Te,width:pe,height:Ie}=ye,me=Te.data;for(let xe=0;xe<Ie;xe++)for(let ve=0;ve<pe;ve++){const Ee=(xe*pe+ve)*4,De=me[Ee],We=me[Ee+1],Ae=me[Ee+2],ut=-1e4+(De*65536+We*256+Ae)*.1;isFinite(ut)&&!isNaN(ut)&&(ie=Math.min(ie,ut),ae=Math.max(ae,ut))}}),console.log(`Elevation range: ${ie.toFixed(2)}m - ${ae.toFixed(2)}m`),N.forEach(ye=>{if(!ye.imageData)return;const{imageData:Te,width:pe,height:Ie,x:me,y:xe,z:ve}=ye,Ee=Te.data,De=Math.pow(2,ve),We=me/De*360-180,Ae=(me+1)/De*360-180,ut=Math.atan(Math.sinh(Math.PI*(1-2*xe/De)))*180/Math.PI,pt=Math.atan(Math.sinh(Math.PI*(1-2*(xe+1)/De)))*180/Math.PI;for(let st=0;st<k.height;st++)for(let Ce=0;Ce<k.width;Ce++){const It=G+(X-G)*(Ce/(k.width-1)),Ve=W+(K-W)*st/(k.height-1);if(It<We||It>Ae||Ve<pt||Ve>ut)continue;const yt=(It-We)/(Ae-We)*(pe-1),Ze=(1-(Ve-pt)/(ut-pt))*(Ie-1),wt=Math.floor(yt),Ut=Math.floor(Ze);if(wt<0||wt>=pe-1||Ut<0||Ut>=Ie-1)continue;const ht=yt-wt,qt=Ze-Ut,Ye=[];let Re=!1;for(let sr=0;sr<=1;sr++){for(let rt=0;rt<=1;rt++){const ze=wt+rt,Xe=Ut+sr;if(ze>=0&&ze<pe&&Xe>=0&&Xe<Ie){const Fe=(Xe*pe+ze)*4,He=Ee[Fe],mt=Ee[Fe+1],it=Ee[Fe+2],xt=-1e4+(He*65536+mt*256+it)*.1;if(!isFinite(xt)||isNaN(xt)){Re=!0;break}Ye.push(xt)}else{Re=!0;break}}if(Re)break}if(Re||Ye.length!==4)continue;const Pt=Ye[0],Dt=Ye[1],At=Ye[2],Bt=Ye[3],gn=Pt*(1-ht)+Dt*ht,Zt=At*(1-ht)+Bt*ht,cn=gn*(1-qt)+Zt*qt,$t=Math.abs(2*((It-We)/(Ae-We)-.5)),Et=Math.abs(2*((Ve-pt)/(ut-pt)-.5)),qn=Math.max($t,Et),Dn=1-Math.pow(qn,2)*.7;$[st][Ce]+=cn*Dn,Q[st][Ce]+=Dn}});let ce=0;for(let ye=0;ye<k.height;ye++)for(let Te=0;Te<k.width;Te++)if(Q[ye][Te]>0)$[ye][Te]/=Q[ye][Te];else{ce++;let pe=null,Ie=1/0;for(let me=0;me<k.height;me++)for(let xe=0;xe<k.width;xe++)if(Q[me][xe]>0){const ve=Math.sqrt(Math.pow(xe-Te,2)+Math.pow(me-ye,2));ve<Ie&&(Ie=ve,pe={x:xe,y:me})}pe?$[ye][Te]=$[pe.y][pe.x]:$[ye][Te]=(ie+ae)/2}ce>0&&console.log(`Filled ${ce} missing data points`);let se=$;const Se=2;for(let ye=0;ye<Se;ye++)se=O(se,k);return{elevationGrid:se,gridSize:k,minElevation:ie,maxElevation:ae}},O=(N,H)=>{const{width:G,height:W}=H,X=new Array(W).fill(0).map(()=>new Array(G).fill(0)),k=Math.floor(5/2);for(let $=0;$<W;$++)for(let Q=0;Q<G;Q++){let ie=0,ae=0;for(let ce=-k;ce<=k;ce++)for(let se=-k;se<=k;se++){const Se=$+ce,ye=Q+se;if(ye>=0&&ye<G&&Se>=0&&Se<W){const Te=Math.sqrt(se*se+ce*ce),pe=Math.exp(-Te*Te/(2*k*k));ie+=N[Se][ye]*pe,ae+=pe}}ae>0?X[$][Q]=ie/ae:X[$][Q]=N[$][Q]}return X};return Be.useEffect(()=>{if(console.log("GenerateMeshButton dependencies changed:",{hasBbox:!!n,terrainEnabled:i==null?void 0:i.enabled,buildingsEnabled:o==null?void 0:o.enabled,layerCount:r==null?void 0:r.length}),t&&clearTimeout(t),!n){console.warn("No bbox available, skipping model generation");return}const N=setTimeout(()=>{console.log("Debounce timer expired, generating 3D model"),D()},1e3);return e(N),()=>{N&&clearTimeout(N)}},[n,r,i]),ke.jsx(ke.Fragment,{})},yG=fs(ke.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),_G=fs(ke.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),xNe=fs(ke.jsx("path",{d:"m14 6-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22z"}),"Terrain"),bNe=fs(ke.jsx("path",{d:"M21.98 14H22zM5.35 13c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1v-2c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1v2c1.9 0 2.17-1 3.35-1m13.32 2c-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.1 1-3.34 1s-1.38-1-3.33-1-2.1 1-3.34 1v2c1.95 0 2.11-1 3.34-1 1.24 0 1.38 1 3.33 1s2.1-1 3.34-1c1.19 0 1.42 1 3.33 1 1.94 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1v-2c-1.24 0-1.38-1-3.33-1M5.35 9c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1V8c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1C3.38 7 3.24 8 2 8v2c1.9 0 2.17-1 3.35-1"}),"Water"),wNe=fs(ke.jsx("path",{d:"M17 12h2L12 2 5.05 12H7l-3.9 6h6.92v4h3.96v-4H21z"}),"Park"),SNe=fs([ke.jsx("path",{d:"M16 12 9 2 2 12h1.86L0 18h7v4h4v-4h7l-3.86-6z"},"0"),ke.jsx("path",{d:"M20.14 12H22L15 2l-2.39 3.41L17.92 13h-1.95l3.22 5H24zM13 19h4v3h-4z"},"1")],"Forest"),ENe=fs(ke.jsx("path",{d:"m21.41 10.59-7.99-8c-.78-.78-2.05-.78-2.83 0l-8.01 8c-.78.78-.78 2.05 0 2.83l8.01 8c.78.78 2.05.78 2.83 0l7.99-8c.79-.79.79-2.05 0-2.83M13.5 14.5V12H10v3H8v-4c0-.55.45-1 1-1h4.5V7.5L17 11z"}),"Directions"),TNe=fs(ke.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers"),CNe=fs(ke.jsx("path",{d:"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12M5.21 10 10 5.21 14.79 10zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5M2 20h20v4H2z"}),"FormatColorFill"),xG=_r(wp)(({theme:t})=>({backgroundColor:t.palette.background.paper,borderRadius:t.shape.borderRadius,boxShadow:t.shadows[1],margin:t.spacing(0,0,2,0),overflow:"hidden"})),bG=_r(A1)(({theme:t,active:e})=>({backgroundColor:e?`${t.palette.primary.main}10`:t.palette.background.paper,borderLeft:`3px solid ${e?t.palette.primary.main:"transparent"}`,transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:`${t.palette.primary.main}20`}})),MNe=_r(da)(({bgcolor:t})=>({width:24,height:24,borderRadius:"50%",backgroundColor:t,border:"2px solid white",boxShadow:"0 0 0 1px rgba(0,0,0,0.1)",display:"inline-block",marginRight:8}));function TI(t){return"#"+Math.floor(t.r*255).toString(16).padStart(2,"0")+Math.floor(t.g*255).toString(16).padStart(2,"0")+Math.floor(t.b*255).toString(16).padStart(2,"0")}const ANe=()=>{const{vtLayers:t,terrainSettings:e,buildingSettings:n,toggleLayerEnabled:r,setLayerColor:i,setLayerExtrusionDepth:o,setLayerMinExtrusionDepth:s,setLayerZOffset:a,setLayerBufferSize:c,toggleLayerUseAdaptiveScaleFactor:h,setLayerHeightScaleFactor:d,setTerrainSettings:v,setBuildingSettings:w}=Oy(),[_,E]=Be.useState({terrain:!0,buildings:!0}),M=$=>{r($)},D=($,Q)=>{i($,Q)},A=($,Q)=>{o($,Q)},F=($,Q)=>{Q?o($,1):o($,void 0)},O=($,Q)=>{a($,Q)},N=($,Q)=>{c($,Q)},H=$=>{h($)},G=($,Q)=>{d($,Q)},W=($,Q)=>{Q?s($,0):s($,void 0)},X=($,Q)=>{s($,Q)},K=$=>{E(Q=>({...Q,[$]:!Q[$]}))},k=$=>{switch($){case"water":return ke.jsx(bNe,{});case"landcover":case"landuse":return ke.jsx(SNe,{});case"park":return ke.jsx(wNe,{});case"transportation":return ke.jsx(ENe,{});default:return ke.jsx(TNe,{})}};return ke.jsxs(da,{sx:{width:"100%",maxHeight:"100%",overflowY:"auto",px:1},children:[ke.jsxs(xG,{sx:{marginTop:2},children:[ke.jsxs(bG,{active:e.enabled,onClick:()=>K("terrain"),children:[ke.jsx(fw,{children:ke.jsx(xNe,{color:e.enabled?"primary":"disabled"})}),ke.jsx(dw,{primary:"Terrain"}),ke.jsx(Hb,{control:ke.jsx(p6,{checked:e.enabled,onChange:()=>v({enabled:!e.enabled}),onClick:$=>$.stopPropagation()}),label:""}),_.terrain?ke.jsx(_G,{}):ke.jsx(yG,{})]}),ke.jsx(iC,{in:_.terrain,timeout:"auto",unmountOnExit:!0,children:ke.jsxs(da,{sx:{p:3},children:[ke.jsxs(uo,{gutterBottom:!0,children:["Vertical Exaggeration: ",e.verticalExaggeration.toFixed(2)]}),ke.jsx(y0,{value:e.verticalExaggeration,onChange:($,Q)=>v({verticalExaggeration:Q}),min:.01,max:1,step:.01,marks:[{value:.01,label:"Min"},{value:.5,label:"Med"},{value:1,label:"Max"}]}),ke.jsxs(uo,{gutterBottom:!0,sx:{mt:2},children:["Base Height: ",e.baseHeight]}),ke.jsx(y0,{value:e.baseHeight,onChange:($,Q)=>v({baseHeight:Q}),min:0,max:100,step:1,marks:[{value:0,label:"0"},{value:50,label:"50"},{value:100,label:"100"}]})]})})]}),t.map(($,Q)=>{const ie=`layer-${Q}-${$.sourceLayer}`,ae=_[ie]||!1;return ke.jsxs(xG,{children:[ke.jsxs(bG,{active:$.enabled,onClick:()=>K(ie),children:[ke.jsx(fw,{children:k($.sourceLayer)}),ke.jsx(dw,{primary:$.sourceLayer.charAt(0).toUpperCase()+$.sourceLayer.slice(1)}),ke.jsx(Hb,{control:ke.jsx(p6,{checked:$.enabled!==!1,onChange:()=>M(Q),onClick:ce=>ce.stopPropagation()}),label:""}),ae?ke.jsx(_G,{}):ke.jsx(yG,{})]}),ke.jsx(iC,{in:ae,timeout:"auto",unmountOnExit:!0,children:ke.jsxs(da,{sx:{p:3},children:[ke.jsxs(da,{sx:{display:"flex",alignItems:"center",mb:2},children:[ke.jsx(CNe,{sx:{mr:1,color:TI($.color)}}),ke.jsx(eH,{label:"Color",type:"color",value:TI($.color),onChange:ce=>D(Q,ce.target.value),InputProps:{startAdornment:ke.jsx(HV,{position:"start",children:ke.jsx(MNe,{bgcolor:TI($.color)})})},sx:{width:"100%"},size:"small"})]}),ke.jsxs(da,{sx:{mt:2},children:[ke.jsx(Hb,{control:ke.jsx(YA,{checked:$.extrusionDepth!==void 0,onChange:ce=>F(Q,ce.target.checked),size:"small"}),label:"Enable Extrusion Depth"}),$.extrusionDepth!==void 0&&ke.jsxs(ke.Fragment,{children:[ke.jsxs(uo,{gutterBottom:!0,children:["Extrusion Depth: ",$.extrusionDepth.toFixed(1)]}),ke.jsx(y0,{value:$.extrusionDepth,onChange:(ce,se)=>A(Q,se),min:0,max:10,step:.1,marks:[{value:0,label:"0"},{value:5,label:"5"},{value:10,label:"10"}]})]})]}),ke.jsxs(da,{sx:{mt:2},children:[ke.jsx(Hb,{control:ke.jsx(YA,{checked:$.minExtrusionDepth!==void 0,onChange:ce=>W(Q,ce.target.checked),size:"small"}),label:"Enable Min Extrusion Depth"}),$.minExtrusionDepth!==void 0&&ke.jsxs(ke.Fragment,{children:[ke.jsxs(uo,{gutterBottom:!0,children:["Min Extrusion Depth: ",$.minExtrusionDepth.toFixed(1)]}),ke.jsx(y0,{value:$.minExtrusionDepth,onChange:(ce,se)=>X(Q,se),min:0,max:10,step:.1,marks:[{value:0,label:"0"},{value:5,label:"5"},{value:10,label:"10"}]})]})]}),$.zOffset!==void 0&&ke.jsxs(da,{sx:{mt:2},children:[ke.jsxs(uo,{gutterBottom:!0,children:["Z-Offset: ",$.zOffset.toFixed(1)]}),ke.jsx(y0,{value:$.zOffset,onChange:(ce,se)=>O(Q,se),min:-10,max:10,step:.1,marks:[{value:-10,label:"-10"},{value:0,label:"0"},{value:10,label:"10"}]})]}),$.bufferSize!==void 0&&ke.jsxs(da,{sx:{mt:2},children:[ke.jsxs(uo,{gutterBottom:!0,children:["Buffer Size: ",$.bufferSize.toFixed(1)]}),ke.jsx(y0,{value:$.bufferSize,onChange:(ce,se)=>N(Q,se),min:0,max:10,step:.1,marks:[{value:0,label:"0"},{value:5,label:"5"},{value:10,label:"10"}]})]}),ke.jsx(da,{sx:{mt:2},children:ke.jsx(Hb,{control:ke.jsx(YA,{checked:$.useAdaptiveScaleFactor===!0,onChange:()=>H(Q),size:"small"}),label:"Use Adaptive Scale Factor"})}),ke.jsxs(da,{sx:{mt:2},children:[ke.jsxs(uo,{gutterBottom:!0,children:["Height Scale Factor: ",($.heightScaleFactor||1).toFixed(2)]}),ke.jsx(y0,{value:$.heightScaleFactor||1,onChange:(ce,se)=>G(Q,se),min:0,max:5,step:.1,marks:[{value:0,label:"0"},{value:1,label:"1"},{value:5,label:"5"}]})]})]})})]},ie)})]})},wG=440,RNe=({bboxCenter:t})=>{const{terrainSettings:e,buildingSettings:n,vtLayers:r,bbox:i,setBbox:o}=Oy(),[s,a]=Be.useState(!1),[c,h]=Be.useState(!1),[d,v]=Be.useState(0);return ke.jsxs(XI,{variant:"permanent",sx:{width:wG,flexShrink:0,"& .MuiDrawer-paper":{width:wG,boxSizing:"border-box"}},children:[ke.jsx(MT,{})," ",ke.jsxs(ose,{value:d,onChange:(w,_)=>v(_),variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider"},children:[ke.jsx(g6,{label:"Layers"}),ke.jsx(g6,{label:"Controls"})]}),ke.jsx(da,{sx:{overflow:"auto",display:d===0?"block":"none",height:"calc(100% - 48px)"},children:ke.jsx(ANe,{})}),ke.jsxs(da,{sx:{overflow:"auto",p:2,display:d===1?"block":"none",height:"calc(100% - 48px)"},children:[ke.jsx(kLe,{options:{center:t,scale:[1,1],rotate:0,orientation:"portrait",width:800,height:800},onChange:w=>{console.log("BboxSelector onChange triggered with:",w),o(w)}}),ke.jsx(da,{sx:{mt:2},children:ke.jsx(_Ne,{})})]})]})};class PNe{parse(e,n={}){n=Object.assign({binary:!1},n);const r=n.binary,i=[];let o=0;e.traverse(function(A){if(A.isMesh){const F=A.geometry,O=F.index,N=F.getAttribute("position");o+=O!==null?O.count/3:N.count/3,i.push({object3d:A,geometry:F})}});let s,a=80;if(r===!0){const A=o*2+o*3*4*4+80+4,F=new ArrayBuffer(A);s=new DataView(F),s.setUint32(a,o,!0),a+=4}else s="",s+=`solid exported
`;const c=new Pn,h=new Pn,d=new Pn,v=new Pn,w=new Pn,_=new Pn;for(let A=0,F=i.length;A<F;A++){const O=i[A].object3d,N=i[A].geometry,H=N.index,G=N.getAttribute("position");if(H!==null)for(let W=0;W<H.count;W+=3){const X=H.getX(W+0),K=H.getX(W+1),k=H.getX(W+2);E(X,K,k,G,O)}else for(let W=0;W<G.count;W+=3){const X=W+0,K=W+1,k=W+2;E(X,K,k,G,O)}}return r===!1&&(s+=`endsolid exported
`),s;function E(A,F,O,N,H){c.fromBufferAttribute(N,A),h.fromBufferAttribute(N,F),d.fromBufferAttribute(N,O),H.isSkinnedMesh===!0&&(H.applyBoneTransform(A,c),H.applyBoneTransform(F,h),H.applyBoneTransform(O,d)),c.applyMatrix4(H.matrixWorld),h.applyMatrix4(H.matrixWorld),d.applyMatrix4(H.matrixWorld),M(c,h,d),D(c),D(h),D(d),r===!0?(s.setUint16(a,0,!0),a+=2):(s+=`		endloop
`,s+=`	endfacet
`)}function M(A,F,O){v.subVectors(O,F),w.subVectors(A,F),v.cross(w).normalize(),_.copy(v).normalize(),r===!0?(s.setFloat32(a,_.x,!0),a+=4,s.setFloat32(a,_.y,!0),a+=4,s.setFloat32(a,_.z,!0),a+=4):(s+="	facet normal "+_.x+" "+_.y+" "+_.z+`
`,s+=`		outer loop
`)}function D(A){r===!0?(s.setFloat32(a,A.x,!0),a+=4,s.setFloat32(a,A.y,!0),a+=4,s.setFloat32(a,A.z,!0),a+=4):s+="			vertex "+A.x+" "+A.y+" "+A.z+`
`}}}class INe{parse(e){let n="",r=0,i=0,o=0;const s=new Pn,a=new Ji,c=new Pn,h=new qr,d=[];function v(E){let M=0,D=0,A=0;const F=E.geometry,O=new Oa,N=F.getAttribute("position"),H=F.getAttribute("normal"),G=F.getAttribute("uv"),W=F.getIndex();if(n+="o "+E.name+`
`,E.material&&E.material.name&&(n+="usemtl "+E.material.name+`
`),N!==void 0)for(let X=0,K=N.count;X<K;X++,M++)s.fromBufferAttribute(N,X),s.applyMatrix4(E.matrixWorld),n+="v "+s.x+" "+s.y+" "+s.z+`
`;if(G!==void 0)for(let X=0,K=G.count;X<K;X++,A++)h.fromBufferAttribute(G,X),n+="vt "+h.x+" "+h.y+`
`;if(H!==void 0){O.getNormalMatrix(E.matrixWorld);for(let X=0,K=H.count;X<K;X++,D++)c.fromBufferAttribute(H,X),c.applyMatrix3(O).normalize(),n+="vn "+c.x+" "+c.y+" "+c.z+`
`}if(W!==null)for(let X=0,K=W.count;X<K;X+=3){for(let k=0;k<3;k++){const $=W.getX(X+k)+1;d[k]=r+$+(H||G?"/"+(G?i+$:"")+(H?"/"+(o+$):""):"")}n+="f "+d.join(" ")+`
`}else for(let X=0,K=N.count;X<K;X+=3){for(let k=0;k<3;k++){const $=X+k+1;d[k]=r+$+(H||G?"/"+(G?i+$:"")+(H?"/"+(o+$):""):"")}n+="f "+d.join(" ")+`
`}r+=M,i+=A,o+=D}function w(E){let M=0;const D=E.geometry,A=E.type,F=D.getAttribute("position");if(n+="o "+E.name+`
`,F!==void 0)for(let O=0,N=F.count;O<N;O++,M++)s.fromBufferAttribute(F,O),s.applyMatrix4(E.matrixWorld),n+="v "+s.x+" "+s.y+" "+s.z+`
`;if(A==="Line"){n+="l ";for(let O=1,N=F.count;O<=N;O++)n+=r+O+" ";n+=`
`}if(A==="LineSegments")for(let O=1,N=O+1,H=F.count;O<H;O+=2,N=O+1)n+="l "+(r+O)+" "+(r+N)+`
`;r+=M}function _(E){let M=0;const D=E.geometry,A=D.getAttribute("position"),F=D.getAttribute("color");if(n+="o "+E.name+`
`,A!==void 0){for(let O=0,N=A.count;O<N;O++,M++)s.fromBufferAttribute(A,O),s.applyMatrix4(E.matrixWorld),n+="v "+s.x+" "+s.y+" "+s.z,F!==void 0&&(a.fromBufferAttribute(F,O),Po.fromWorkingColorSpace(a,ff),n+=" "+a.r+" "+a.g+" "+a.b),n+=`
`;n+="p ";for(let O=1,N=A.count;O<=N;O++)n+=r+O+" ";n+=`
`}r+=M}return e.traverse(function(E){E.isMesh===!0&&v(E),E.isLine===!0&&w(E),E.isPoints===!0&&_(E)}),n}}const SG={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class nM{constructor(){this.textureUtils=null,this.pluginCallbacks=[],this.register(function(e){return new jNe(e)}),this.register(function(e){return new GNe(e)}),this.register(function(e){return new $Ne(e)}),this.register(function(e){return new WNe(e)}),this.register(function(e){return new XNe(e)}),this.register(function(e){return new YNe(e)}),this.register(function(e){return new VNe(e)}),this.register(function(e){return new HNe(e)}),this.register(function(e){return new qNe(e)}),this.register(function(e){return new ZNe(e)}),this.register(function(e){return new KNe(e)}),this.register(function(e){return new JNe(e)}),this.register(function(e){return new QNe(e)}),this.register(function(e){return new eke(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}setTextureUtils(e){return this.textureUtils=e,this}parse(e,n,r,i){const o=new UNe,s=[];for(let a=0,c=this.pluginCallbacks.length;a<c;a++)s.push(this.pluginCallbacks[a](o));o.setPlugins(s),o.setTextureUtils(this.textureUtils),o.writeAsync(e,n,i).catch(r)}parseAsync(e,n){const r=this;return new Promise(function(i,o){r.parse(e,i,o,n)})}}const mo={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},CI="KHR_mesh_quantization",Vf={};Vf[xh]=mo.NEAREST;Vf[uY]=mo.NEAREST_MIPMAP_NEAREST;Vf[P2]=mo.NEAREST_MIPMAP_LINEAR;Vf[mp]=mo.LINEAR;Vf[HT]=mo.LINEAR_MIPMAP_NEAREST;Vf[_v]=mo.LINEAR_MIPMAP_LINEAR;Vf[yv]=mo.CLAMP_TO_EDGE;Vf[wx]=mo.REPEAT;Vf[YC]=mo.MIRRORED_REPEAT;const EG={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},DNe=new Ji,TG=12,LNe=1179937895,NNe=2,CG=8,kNe=1313821514,ONe=5130562;function L2(t,e){return t.length===e.length&&t.every(function(n,r){return n===e[r]})}function FNe(t){return new TextEncoder().encode(t).buffer}function BNe(t){return L2(t.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function zNe(t,e,n){const r={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+n;i++)for(let o=0;o<t.itemSize;o++){let s;t.itemSize>4?s=t.array[i*t.itemSize+o]:(o===0?s=t.getX(i):o===1?s=t.getY(i):o===2?s=t.getZ(i):o===3&&(s=t.getW(i)),t.normalized===!0&&(s=Lw.normalize(s,t.array))),r.min[o]=Math.min(r.min[o],s),r.max[o]=Math.max(r.max[o],s)}return r}function YY(t){return Math.ceil(t/4)*4}function MI(t,e=0){const n=YY(t.byteLength);if(n!==t.byteLength){const r=new Uint8Array(n);if(r.set(new Uint8Array(t)),e!==0)for(let i=t.byteLength;i<n;i++)r[i]=e;return r.buffer}return t}function MG(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function AG(t,e){if(t.toBlob!==void 0)return new Promise(r=>t.toBlob(r,e));let n;return e==="image/jpeg"?n=.92:e==="image/webp"&&(n=.8),t.convertToBlob({type:e,quality:n})}class UNe{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+vA}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},this.textureUtils=null}setPlugins(e){this.plugins=e}setTextureUtils(e){this.textureUtils=e}async writeAsync(e,n,r={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),await this.processInputAsync(e),await Promise.all(this.pending);const i=this,o=i.buffers,s=i.json;r=i.options;const a=i.extensionsUsed,c=i.extensionsRequired,h=new Blob(o,{type:"application/octet-stream"}),d=Object.keys(a),v=Object.keys(c);if(d.length>0&&(s.extensionsUsed=d),v.length>0&&(s.extensionsRequired=v),s.buffers&&s.buffers.length>0&&(s.buffers[0].byteLength=h.size),r.binary===!0){const w=new FileReader;w.readAsArrayBuffer(h),w.onloadend=function(){const _=MI(w.result),E=new DataView(new ArrayBuffer(CG));E.setUint32(0,_.byteLength,!0),E.setUint32(4,ONe,!0);const M=MI(FNe(JSON.stringify(s)),32),D=new DataView(new ArrayBuffer(CG));D.setUint32(0,M.byteLength,!0),D.setUint32(4,kNe,!0);const A=new ArrayBuffer(TG),F=new DataView(A);F.setUint32(0,LNe,!0),F.setUint32(4,NNe,!0);const O=TG+D.byteLength+M.byteLength+E.byteLength+_.byteLength;F.setUint32(8,O,!0);const N=new Blob([A,D,M,E,_],{type:"application/octet-stream"}),H=new FileReader;H.readAsArrayBuffer(N),H.onloadend=function(){n(H.result)}}}else if(s.buffers&&s.buffers.length>0){const w=new FileReader;w.readAsDataURL(h),w.onloadend=function(){const _=w.result;s.buffers[0].uri=_,n(s)}}else n(s)}serializeUserData(e,n){if(Object.keys(e.userData).length===0)return;const r=this.options,i=this.extensionsUsed;try{const o=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&o.gltfExtensions){n.extensions===void 0&&(n.extensions={});for(const s in o.gltfExtensions)n.extensions[s]=o.gltfExtensions[s],i[s]=!0;delete o.gltfExtensions}Object.keys(o).length>0&&(n.extras=o)}catch(o){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+o.message)}}getUID(e,n=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(n)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const r=new Pn;for(let i=0,o=e.count;i<o;i++)if(Math.abs(r.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const n=this.cache;if(n.attributesNormalized.has(e))return n.attributesNormalized.get(e);const r=e.clone(),i=new Pn;for(let o=0,s=r.count;o<s;o++)i.fromBufferAttribute(r,o),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),r.setXYZ(o,i.x,i.y,i.z);return n.attributesNormalized.set(e,r),r}applyTextureTransform(e,n){let r=!1;const i={};(n.offset.x!==0||n.offset.y!==0)&&(i.offset=n.offset.toArray(),r=!0),n.rotation!==0&&(i.rotation=n.rotation,r=!0),(n.repeat.x!==1||n.repeat.y!==1)&&(i.scale=n.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}async buildMetalRoughTextureAsync(e,n){if(e===n)return e;function r(_){return _.colorSpace===ff?function(M){return M<.04045?M*.0773993808:Math.pow(M*.9478672986+.0521327014,2.4)}:function(M){return M}}e instanceof uI&&(e=await this.decompressTextureAsync(e)),n instanceof uI&&(n=await this.decompressTextureAsync(n));const i=e?e.image:null,o=n?n.image:null,s=Math.max(i?i.width:0,o?o.width:0),a=Math.max(i?i.height:0,o?o.height:0),c=MG();c.width=s,c.height=a;const h=c.getContext("2d",{willReadFrequently:!0});h.fillStyle="#00ffff",h.fillRect(0,0,s,a);const d=h.getImageData(0,0,s,a);if(i){h.drawImage(i,0,0,s,a);const _=r(e),E=h.getImageData(0,0,s,a).data;for(let M=2;M<E.length;M+=4)d.data[M]=_(E[M]/256)*256}if(o){h.drawImage(o,0,0,s,a);const _=r(n),E=h.getImageData(0,0,s,a).data;for(let M=1;M<E.length;M+=4)d.data[M]=_(E[M]/256)*256}h.putImageData(d,0,0);const w=(e||n).clone();return w.source=new _A(c),w.colorSpace=am,w.channel=(e||n).channel,e&&n&&e.channel!==n.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),w}async decompressTextureAsync(e,n=1/0){if(this.textureUtils===null)throw new Error("THREE.GLTFExporter: setTextureUtils() must be called to process compressed textures.");return await this.textureUtils.decompress(e,n)}processBuffer(e){const n=this.json,r=this.buffers;return n.buffers||(n.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,n,r,i,o){const s=this.json;s.bufferViews||(s.bufferViews=[]);let a;switch(n){case mo.BYTE:case mo.UNSIGNED_BYTE:a=1;break;case mo.SHORT:case mo.UNSIGNED_SHORT:a=2;break;default:a=4}let c=e.itemSize*a;o===mo.ARRAY_BUFFER&&(c=Math.ceil(c/4)*4);const h=YY(i*c),d=new DataView(new ArrayBuffer(h));let v=0;for(let E=r;E<r+i;E++){for(let M=0;M<e.itemSize;M++){let D;e.itemSize>4?D=e.array[E*e.itemSize+M]:(M===0?D=e.getX(E):M===1?D=e.getY(E):M===2?D=e.getZ(E):M===3&&(D=e.getW(E)),e.normalized===!0&&(D=Lw.normalize(D,e.array))),n===mo.FLOAT?d.setFloat32(v,D,!0):n===mo.INT?d.setInt32(v,D,!0):n===mo.UNSIGNED_INT?d.setUint32(v,D,!0):n===mo.SHORT?d.setInt16(v,D,!0):n===mo.UNSIGNED_SHORT?d.setUint16(v,D,!0):n===mo.BYTE?d.setInt8(v,D):n===mo.UNSIGNED_BYTE&&d.setUint8(v,D),v+=a}v%c!==0&&(v+=c-v%c)}const w={buffer:this.processBuffer(d.buffer),byteOffset:this.byteOffset,byteLength:h};return o!==void 0&&(w.target=o),o===mo.ARRAY_BUFFER&&(w.byteStride=c),this.byteOffset+=h,s.bufferViews.push(w),{id:s.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const n=this,r=n.json;return r.bufferViews||(r.bufferViews=[]),new Promise(function(i){const o=new FileReader;o.readAsArrayBuffer(e),o.onloadend=function(){const s=MI(o.result),a={buffer:n.processBuffer(s),byteOffset:n.byteOffset,byteLength:s.byteLength};n.byteOffset+=s.byteLength,i(r.bufferViews.push(a)-1)}})}processAccessor(e,n,r,i){const o=this.json,s={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=mo.FLOAT;else if(e.array.constructor===Int32Array)a=mo.INT;else if(e.array.constructor===Uint32Array)a=mo.UNSIGNED_INT;else if(e.array.constructor===Int16Array)a=mo.SHORT;else if(e.array.constructor===Uint16Array)a=mo.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)a=mo.BYTE;else if(e.array.constructor===Uint8Array)a=mo.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(r===void 0&&(r=0),(i===void 0||i===1/0)&&(i=e.count),i===0)return null;const c=zNe(e,r,i);let h;n!==void 0&&(h=e===n.index?mo.ELEMENT_ARRAY_BUFFER:mo.ARRAY_BUFFER);const d=this.processBufferView(e,a,r,i,h),v={bufferView:d.id,byteOffset:d.byteOffset,componentType:a,count:i,max:c.max,min:c.min,type:s[e.itemSize]};return e.normalized===!0&&(v.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(v)-1}processImage(e,n,r,i="image/png"){if(e!==null){const o=this,s=o.cache,a=o.json,c=o.options,h=o.pending;s.images.has(e)||s.images.set(e,{});const d=s.images.get(e),v=i+":flipY/"+r.toString();if(d[v]!==void 0)return d[v];a.images||(a.images=[]);const w={mimeType:i},_=MG();_.width=Math.min(e.width,c.maxTextureSize),_.height=Math.min(e.height,c.maxTextureSize);const E=_.getContext("2d",{willReadFrequently:!0});if(r===!0&&(E.translate(0,_.height),E.scale(1,-1)),e.data!==void 0){n!==Td&&console.error("GLTFExporter: Only RGBAFormat is supported.",n),(e.width>c.maxTextureSize||e.height>c.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const D=new Uint8ClampedArray(e.height*e.width*4);for(let A=0;A<D.length;A+=4)D[A+0]=e.data[A+0],D[A+1]=e.data[A+1],D[A+2]=e.data[A+2],D[A+3]=e.data[A+3];E.putImageData(new ImageData(D,e.width,e.height),0,0)}else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)E.drawImage(e,0,0,_.width,_.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");c.binary===!0?h.push(AG(_,i).then(D=>o.processBufferViewImage(D)).then(D=>{w.bufferView=D})):_.toDataURL!==void 0?w.uri=_.toDataURL(i):h.push(AG(_,i).then(D=>new FileReader().readAsDataURL(D)).then(D=>{w.uri=D}));const M=a.images.push(w)-1;return d[v]=M,M}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const n=this.json;n.samplers||(n.samplers=[]);const r={magFilter:Vf[e.magFilter],minFilter:Vf[e.minFilter],wrapS:Vf[e.wrapS],wrapT:Vf[e.wrapT]};return n.samplers.push(r)-1}async processTextureAsync(e){const r=this.options,i=this.cache,o=this.json;if(i.textures.has(e))return i.textures.get(e);o.textures||(o.textures=[]),e instanceof uI&&(e=await this.decompressTextureAsync(e,r.maxTextureSize));let s=e.userData.mimeType;s==="image/webp"&&(s="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,s)};e.name&&(a.name=e.name),await this._invokeAllAsync(async function(h){h.writeTexture&&await h.writeTexture(e,a)});const c=o.textures.push(a)-1;return i.textures.set(e,c),c}async processMaterialAsync(e){const n=this.cache,r=this.json;if(n.materials.has(e))return n.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const o=e.color.toArray().concat([e.opacity]);if(L2(o,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=o),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=0,i.pbrMetallicRoughness.roughnessFactor=1),e.metalnessMap||e.roughnessMap){const a=await this.buildMetalRoughTextureAsync(e.metalnessMap,e.roughnessMap),c={index:await this.processTextureAsync(a),texCoord:a.channel};this.applyTextureTransform(c,a),i.pbrMetallicRoughness.metallicRoughnessTexture=c}if(e.map){const a={index:await this.processTextureAsync(e.map),texCoord:e.map.channel};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive;if(Math.max(a.r,a.g,a.b)>0&&(i.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const h={index:await this.processTextureAsync(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(h,e.emissiveMap),i.emissiveTexture=h}}if(e.normalMap){const a={index:await this.processTextureAsync(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){const a={index:await this.processTextureAsync(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===dp&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),await this._invokeAllAsync(async function(a){a.writeMaterialAsync&&await a.writeMaterialAsync(e,i)});const s=r.materials.push(i)-1;return n.materials.set(e,s),s}async processMeshAsync(e){const n=this.cache,r=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let N=0,H=e.material.length;N<H;N++)i.push(e.material[N].uuid);else i.push(e.material.uuid);const o=i.join(":");if(n.meshes.has(o))return n.meshes.get(o);const s=e.geometry;let a;e.isLineSegments?a=mo.LINES:e.isLineLoop?a=mo.LINE_LOOP:e.isLine?a=mo.LINE_STRIP:e.isPoints?a=mo.POINTS:a=e.material.wireframe?mo.LINES:mo.TRIANGLES;const c={},h={},d=[],v=[],w={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},_=s.getAttribute("normal");_!==void 0&&!this.isNormalizedNormalAttribute(_)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),s.setAttribute("normal",this.createNormalizedNormalAttribute(_)));let E=null;for(let N in s.attributes){if(N.slice(0,5)==="morph")continue;const H=s.attributes[N];if(N=w[N]||N.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(N)||(N="_"+N),n.attributes.has(this.getUID(H))){h[N]=n.attributes.get(this.getUID(H));continue}E=null;const W=H.array;N==="JOINTS_0"&&!(W instanceof Uint16Array)&&!(W instanceof Uint8Array)?(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),E=new ol(new Uint16Array(W),H.itemSize,H.normalized)):(W instanceof Uint32Array||W instanceof Int32Array)&&!N.startsWith("_")&&(console.warn(`GLTFExporter: Attribute "${N}" converted to type FLOAT.`),E=nM.Utils.toFloat32BufferAttribute(H));const X=this.processAccessor(E||H,s);X!==null&&(N.startsWith("_")||this.detectMeshQuantization(N,H),h[N]=X,n.attributes.set(this.getUID(H),X))}if(_!==void 0&&s.setAttribute("normal",_),Object.keys(h).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const N=[],H=[],G={};if(e.morphTargetDictionary!==void 0)for(const W in e.morphTargetDictionary)G[e.morphTargetDictionary[W]]=W;for(let W=0;W<e.morphTargetInfluences.length;++W){const X={};let K=!1;for(const k in s.morphAttributes){if(k!=="position"&&k!=="normal"){K||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),K=!0);continue}const $=s.morphAttributes[k][W],Q=k.toUpperCase(),ie=s.attributes[k];if(n.attributes.has(this.getUID($,!0))){X[Q]=n.attributes.get(this.getUID($,!0));continue}const ae=$.clone();if(!s.morphTargetsRelative)for(let ce=0,se=$.count;ce<se;ce++)for(let Se=0;Se<$.itemSize;Se++)Se===0&&ae.setX(ce,$.getX(ce)-ie.getX(ce)),Se===1&&ae.setY(ce,$.getY(ce)-ie.getY(ce)),Se===2&&ae.setZ(ce,$.getZ(ce)-ie.getZ(ce)),Se===3&&ae.setW(ce,$.getW(ce)-ie.getW(ce));X[Q]=this.processAccessor(ae,s),n.attributes.set(this.getUID(ie,!0),X[Q])}v.push(X),N.push(e.morphTargetInfluences[W]),e.morphTargetDictionary!==void 0&&H.push(G[W])}c.weights=N,H.length>0&&(c.extras={},c.extras.targetNames=H)}const M=Array.isArray(e.material);if(M&&s.groups.length===0)return null;let D=!1;if(M&&s.index===null){const N=[];for(let H=0,G=s.attributes.position.count;H<G;H++)N[H]=H;s.setIndex(N),D=!0}const A=M?e.material:[e.material],F=M?s.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let N=0,H=F.length;N<H;N++){const G={mode:a,attributes:h};if(this.serializeUserData(s,G),v.length>0&&(G.targets=v),s.index!==null){let X=this.getUID(s.index);(F[N].start!==void 0||F[N].count!==void 0)&&(X+=":"+F[N].start+":"+F[N].count),n.attributes.has(X)?G.indices=n.attributes.get(X):(G.indices=this.processAccessor(s.index,s,F[N].start,F[N].count),n.attributes.set(X,G.indices)),G.indices===null&&delete G.indices}const W=await this.processMaterialAsync(A[F[N].materialIndex]);W!==null&&(G.material=W),d.push(G)}D===!0&&s.setIndex(null),c.primitives=d,r.meshes||(r.meshes=[]),await this._invokeAllAsync(function(N){N.writeMesh&&N.writeMesh(e,c)});const O=r.meshes.push(c)-1;return n.meshes.set(o,O),O}detectMeshQuantization(e,n){if(this.extensionsUsed[CI])return;let r;switch(n.array.constructor){case Int8Array:r="byte";break;case Uint8Array:r="unsigned byte";break;case Int16Array:r="short";break;case Uint16Array:r="unsigned short";break;default:return}n.normalized&&(r+=" normalized");const i=e.split("_",1)[0];SG[i]&&SG[i].includes(r)&&(this.extensionsUsed[CI]=!0,this.extensionsRequired[CI]=!0)}processCamera(e){const n=this.json;n.cameras||(n.cameras=[]);const r=e.isOrthographicCamera,i={type:r?"orthographic":"perspective"};return r?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:Lw.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),n.cameras.push(i)-1}processAnimation(e,n){const r=this.json,i=this.nodeMap;r.animations||(r.animations=[]),e=nM.Utils.mergeMorphTargetTracks(e.clone(),n);const o=e.tracks,s=[],a=[];for(let c=0;c<o.length;++c){const h=o[c],d=qo.parseTrackName(h.name);let v=qo.findNode(n,d.nodeName);const w=EG[d.propertyName];if(d.objectName==="bones"&&(v.isSkinnedMesh===!0?v=v.skeleton.getBoneByName(d.objectIndex):v=void 0),!v||!w){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',h.name);continue}const _=1;let E=h.values.length/h.times.length;w===EG.morphTargetInfluences&&(E/=v.morphTargetInfluences.length);let M;h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(M="CUBICSPLINE",E/=3):h.getInterpolation()===gAe?M="STEP":M="LINEAR",a.push({input:this.processAccessor(new ol(h.times,_)),output:this.processAccessor(new ol(h.values,E)),interpolation:M}),s.push({sampler:a.length-1,target:{node:i.get(v),path:w}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:a,channels:s}),r.animations.length-1}processSkin(e){const n=this.json,r=this.nodeMap,i=n.nodes[r.get(e)],o=e.skeleton;if(o===void 0)return null;const s=e.skeleton.bones[0];if(s===void 0)return null;const a=[],c=new Float32Array(o.bones.length*16),h=new Os;for(let v=0;v<o.bones.length;++v)a.push(r.get(o.bones[v])),h.copy(o.boneInverses[v]),h.multiply(e.bindMatrix).toArray(c,v*16);return n.skins===void 0&&(n.skins=[]),n.skins.push({inverseBindMatrices:this.processAccessor(new ol(c,16)),joints:a,skeleton:r.get(s)}),i.skin=n.skins.length-1}async processNodeAsync(e){const n=this.json,r=this.options,i=this.nodeMap;n.nodes||(n.nodes=[]);const o={};if(r.trs){const a=e.quaternion.toArray(),c=e.position.toArray(),h=e.scale.toArray();L2(a,[0,0,0,1])||(o.rotation=a),L2(c,[0,0,0])||(o.translation=c),L2(h,[1,1,1])||(o.scale=h)}else e.matrixAutoUpdate&&e.updateMatrix(),BNe(e.matrix)===!1&&(o.matrix=e.matrix.elements);if(e.name!==""&&(o.name=String(e.name)),this.serializeUserData(e,o),e.isMesh||e.isLine||e.isPoints){const a=await this.processMeshAsync(e);a!==null&&(o.mesh=a)}else e.isCamera&&(o.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let c=0,h=e.children.length;c<h;c++){const d=e.children[c];if(d.visible||r.onlyVisible===!1){const v=await this.processNodeAsync(d);v!==null&&a.push(v)}}a.length>0&&(o.children=a)}await this._invokeAllAsync(function(a){a.writeNode&&a.writeNode(e,o)});const s=n.nodes.push(o)-1;return i.set(e,s),s}async processSceneAsync(e){const n=this.json,r=this.options;n.scenes||(n.scenes=[],n.scene=0);const i={};e.name!==""&&(i.name=e.name),n.scenes.push(i);const o=[];for(let s=0,a=e.children.length;s<a;s++){const c=e.children[s];if(c.visible||r.onlyVisible===!1){const h=await this.processNodeAsync(c);h!==null&&o.push(h)}}o.length>0&&(i.nodes=o),this.serializeUserData(e,i)}async processObjectsAsync(e){const n=new kw;n.name="AuxScene";for(let r=0;r<e.length;r++)n.children.push(e[r]);await this.processSceneAsync(n)}async processInputAsync(e){const n=this.options;e=e instanceof Array?e:[e],await this._invokeAllAsync(function(i){i.beforeParse&&i.beforeParse(e)});const r=[];for(let i=0;i<e.length;i++)e[i]instanceof kw?await this.processSceneAsync(e[i]):r.push(e[i]);r.length>0&&await this.processObjectsAsync(r);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<n.animations.length;++i)this.processAnimation(n.animations[i],e[0]);await this._invokeAllAsync(function(i){i.afterParse&&i.afterParse(e)})}async _invokeAllAsync(e){for(let n=0,r=this.plugins.length;n<r;n++)await e(this.plugins[n])}}class jNe{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,n){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const r=this.writer,i=r.json,o=r.extensionsUsed,s={};e.name&&(s.name=e.name),s.color=e.color.toArray(),s.intensity=e.intensity,e.isDirectionalLight?s.type="directional":e.isPointLight?(s.type="point",e.distance>0&&(s.range=e.distance)):e.isSpotLight&&(s.type="spot",e.distance>0&&(s.range=e.distance),s.spot={},s.spot.innerConeAngle=(1-e.penumbra)*e.angle,s.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),o[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},o[this.name]=!0);const a=i.extensions[this.name].lights;a.push(s),n.extensions=n.extensions||{},n.extensions[this.name]={light:a.length-1}}}class GNe{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}async writeMaterialAsync(e,n){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;n.extensions=n.extensions||{},n.extensions[this.name]={},i[this.name]=!0,n.pbrMetallicRoughness.metallicFactor=0,n.pbrMetallicRoughness.roughnessFactor=.9}}class VNe{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}async writeMaterialAsync(e,n){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const r=this.writer,i=r.extensionsUsed,o={};if(o.clearcoatFactor=e.clearcoat,e.clearcoatMap){const s={index:await r.processTextureAsync(e.clearcoatMap),texCoord:e.clearcoatMap.channel};r.applyTextureTransform(s,e.clearcoatMap),o.clearcoatTexture=s}if(o.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const s={index:await r.processTextureAsync(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};r.applyTextureTransform(s,e.clearcoatRoughnessMap),o.clearcoatRoughnessTexture=s}if(e.clearcoatNormalMap){const s={index:await r.processTextureAsync(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};e.clearcoatNormalScale.x!==1&&(s.scale=e.clearcoatNormalScale.x),r.applyTextureTransform(s,e.clearcoatNormalMap),o.clearcoatNormalTexture=s}n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class HNe{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}async writeMaterialAsync(e,n){if(!e.isMeshPhysicalMaterial||e.dispersion===0)return;const i=this.writer.extensionsUsed,o={};o.dispersion=e.dispersion,n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class qNe{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}async writeMaterialAsync(e,n){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const r=this.writer,i=r.extensionsUsed,o={};if(o.iridescenceFactor=e.iridescence,e.iridescenceMap){const s={index:await r.processTextureAsync(e.iridescenceMap),texCoord:e.iridescenceMap.channel};r.applyTextureTransform(s,e.iridescenceMap),o.iridescenceTexture=s}if(o.iridescenceIor=e.iridescenceIOR,o.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],o.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const s={index:await r.processTextureAsync(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};r.applyTextureTransform(s,e.iridescenceThicknessMap),o.iridescenceThicknessTexture=s}n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class $Ne{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}async writeMaterialAsync(e,n){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,o={};if(o.transmissionFactor=e.transmission,e.transmissionMap){const s={index:await r.processTextureAsync(e.transmissionMap),texCoord:e.transmissionMap.channel};r.applyTextureTransform(s,e.transmissionMap),o.transmissionTexture=s}n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class WNe{constructor(e){this.writer=e,this.name="KHR_materials_volume"}async writeMaterialAsync(e,n){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,o={};if(o.thicknessFactor=e.thickness,e.thicknessMap){const s={index:await r.processTextureAsync(e.thicknessMap),texCoord:e.thicknessMap.channel};r.applyTextureTransform(s,e.thicknessMap),o.thicknessTexture=s}e.attenuationDistance!==1/0&&(o.attenuationDistance=e.attenuationDistance),o.attenuationColor=e.attenuationColor.toArray(),n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class XNe{constructor(e){this.writer=e,this.name="KHR_materials_ior"}async writeMaterialAsync(e,n){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const i=this.writer.extensionsUsed,o={};o.ior=e.ior,n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class YNe{constructor(e){this.writer=e,this.name="KHR_materials_specular"}async writeMaterialAsync(e,n){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(DNe)&&!e.specularIntensityMap&&!e.specularColorMap)return;const r=this.writer,i=r.extensionsUsed,o={};if(e.specularIntensityMap){const s={index:await r.processTextureAsync(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};r.applyTextureTransform(s,e.specularIntensityMap),o.specularTexture=s}if(e.specularColorMap){const s={index:await r.processTextureAsync(e.specularColorMap),texCoord:e.specularColorMap.channel};r.applyTextureTransform(s,e.specularColorMap),o.specularColorTexture=s}o.specularFactor=e.specularIntensity,o.specularColorFactor=e.specularColor.toArray(),n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class ZNe{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}async writeMaterialAsync(e,n){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const r=this.writer,i=r.extensionsUsed,o={};if(e.sheenRoughnessMap){const s={index:await r.processTextureAsync(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};r.applyTextureTransform(s,e.sheenRoughnessMap),o.sheenRoughnessTexture=s}if(e.sheenColorMap){const s={index:await r.processTextureAsync(e.sheenColorMap),texCoord:e.sheenColorMap.channel};r.applyTextureTransform(s,e.sheenColorMap),o.sheenColorTexture=s}o.sheenRoughnessFactor=e.sheenRoughness,o.sheenColorFactor=e.sheenColor.toArray(),n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class KNe{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}async writeMaterialAsync(e,n){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const r=this.writer,i=r.extensionsUsed,o={};if(e.anisotropyMap){const s={index:await r.processTextureAsync(e.anisotropyMap)};r.applyTextureTransform(s,e.anisotropyMap),o.anisotropyTexture=s}o.anisotropyStrength=e.anisotropy,o.anisotropyRotation=e.anisotropyRotation,n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class JNe{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}async writeMaterialAsync(e,n){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const i=this.writer.extensionsUsed,o={};o.emissiveStrength=e.emissiveIntensity,n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class QNe{constructor(e){this.writer=e,this.name="EXT_materials_bump"}async writeMaterialAsync(e,n){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;const r=this.writer,i=r.extensionsUsed,o={};if(e.bumpMap){const s={index:await r.processTextureAsync(e.bumpMap),texCoord:e.bumpMap.channel};r.applyTextureTransform(s,e.bumpMap),o.bumpTexture=s}o.bumpFactor=e.bumpScale,n.extensions=n.extensions||{},n.extensions[this.name]=o,i[this.name]=!0}}class eke{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,n){if(!e.isInstancedMesh)return;const r=this.writer,i=e,o=new Float32Array(i.count*3),s=new Float32Array(i.count*4),a=new Float32Array(i.count*3),c=new Os,h=new Pn,d=new Ov,v=new Pn;for(let _=0;_<i.count;_++)i.getMatrixAt(_,c),c.decompose(h,d,v),h.toArray(o,_*3),d.toArray(s,_*4),v.toArray(a,_*3);const w={TRANSLATION:r.processAccessor(new ol(o,3)),ROTATION:r.processAccessor(new ol(s,4)),SCALE:r.processAccessor(new ol(a,3))};i.instanceColor&&(w._COLOR_0=r.processAccessor(i.instanceColor)),n.extensions=n.extensions||{},n.extensions[this.name]={attributes:w},r.extensionsUsed[this.name]=!0,r.extensionsRequired[this.name]=!0}}nM.Utils={insertKeyframe:function(t,e){const r=t.getValueSize(),i=new t.TimeBufferType(t.times.length+1),o=new t.ValueBufferType(t.values.length+r),s=t.createInterpolant(new t.ValueBufferType(r));let a;if(t.times.length===0){i[0]=e;for(let c=0;c<r;c++)o[c]=0;a=0}else if(e<t.times[0]){if(Math.abs(t.times[0]-e)<.001)return 0;i[0]=e,i.set(t.times,1),o.set(s.evaluate(e),0),o.set(t.values,r),a=0}else if(e>t.times[t.times.length-1]){if(Math.abs(t.times[t.times.length-1]-e)<.001)return t.times.length-1;i[i.length-1]=e,i.set(t.times,0),o.set(t.values,0),o.set(s.evaluate(e),t.values.length),a=i.length-1}else for(let c=0;c<t.times.length;c++){if(Math.abs(t.times[c]-e)<.001)return c;if(t.times[c]<e&&t.times[c+1]>e){i.set(t.times.slice(0,c+1),0),i[c+1]=e,i.set(t.times.slice(c+1),c+2),o.set(t.values.slice(0,(c+1)*r),0),o.set(s.evaluate(e),(c+1)*r),o.set(t.values.slice((c+1)*r),(c+2)*r),a=c+1;break}}return t.times=i,t.values=o,a},mergeMorphTargetTracks:function(t,e){const n=[],r={},i=t.tracks;for(let o=0;o<i.length;++o){let s=i[o];const a=qo.parseTrackName(s.name),c=qo.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){n.push(s);continue}if(s.createInterpolant!==s.InterpolantFactoryMethodDiscrete&&s.createInterpolant!==s.InterpolantFactoryMethodLinear){if(s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),s=s.clone(),s.setInterpolation(mAe)}const h=c.morphTargetInfluences.length,d=c.morphTargetDictionary[a.propertyIndex];if(d===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let v;if(r[c.uuid]===void 0){v=s.clone();const _=new v.ValueBufferType(h*v.times.length);for(let E=0;E<v.times.length;E++)_[E*h+d]=v.values[E];v.name=(a.nodeName||"")+".morphTargetInfluences",v.values=_,r[c.uuid]=v,n.push(v);continue}const w=s.createInterpolant(new s.ValueBufferType(1));v=r[c.uuid];for(let _=0;_<v.times.length;_++)v.values[_*h+d]=w.evaluate(v.times[_]);for(let _=0;_<s.times.length;_++){const E=this.insertKeyframe(v,s.times[_]);v.values[E*h+d]=s.values[_]}}return t.tracks=n,t},toFloat32BufferAttribute:function(t){const e=new ol(new Float32Array(t.count*t.itemSize),t.itemSize,!1);if(!t.normalized&&!t.isInterleavedBufferAttribute)return e.array.set(t.array),e;for(let n=0,r=t.count;n<r;n++)for(let i=0;i<t.itemSize;i++)e.setComponent(n,i,t.getComponent(n,i));return e}};const RG=fs(ke.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload"),PG=fs(ke.jsx("path",{d:"M15.5 13.5c0 2-2.5 3.5-2.5 5h-2c0-1.5-2.5-3-2.5-5 0-1.93 1.57-3.5 3.5-3.5s3.5 1.57 3.5 3.5m-2.5 6h-2V21h2zm6-6.5c0 1.68-.59 3.21-1.58 4.42l1.42 1.42C20.18 17.27 21 15.23 21 13c0-2.74-1.23-5.19-3.16-6.84l-1.42 1.42C17.99 8.86 19 10.82 19 13m-3-8-4-4v3c-4.97 0-9 4.03-9 9 0 2.23.82 4.27 2.16 5.84l1.42-1.42C5.59 16.21 5 14.68 5 13c0-3.86 3.14-7 7-7v3z"}),"ModelTraining"),tke=fs([ke.jsx("circle",{cx:"7",cy:"14",r:"3"},"0"),ke.jsx("circle",{cx:"11",cy:"6",r:"3"},"1"),ke.jsx("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")],"ScatterPlot"),IG=fs(ke.jsx("path",{d:"M7.52 21.48C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81zm.89-6.52c-.19 0-.37-.03-.52-.08-.16-.06-.29-.13-.4-.24-.11-.1-.2-.22-.26-.37-.06-.14-.09-.3-.09-.47h-1.3c0 .36.07.68.21.95s.33.5.56.69c.24.18.51.32.82.41q.45.15.96.15c.37 0 .72-.05 1.03-.15.32-.1.6-.25.83-.44s.42-.43.55-.72.2-.61.2-.97c0-.19-.02-.38-.07-.56s-.12-.35-.23-.51c-.1-.16-.24-.3-.4-.43-.17-.13-.37-.23-.61-.31.2-.09.37-.2.52-.33s.27-.27.37-.42.17-.3.22-.46.07-.32.07-.48q0-.54-.18-.96t-.51-.69c-.2-.19-.47-.33-.77-.43C9.1 8.05 8.76 8 8.39 8c-.36 0-.69.05-1 .16-.3.11-.57.26-.79.45-.21.19-.38.41-.51.67-.12.26-.18.54-.18.85h1.3q0-.255.09-.45c.09-.195.14-.25.25-.34s.23-.17.38-.22.3-.08.48-.08c.4 0 .7.1.89.31.19.2.29.49.29.86 0 .18-.03.34-.08.49s-.14.27-.25.37-.25.18-.41.24-.36.09-.58.09H7.5v1.03h.77c.22 0 .42.02.6.07s.33.13.45.23c.12.11.22.24.29.4s.1.35.1.57c0 .41-.12.72-.35.93-.23.23-.55.33-.95.33m8.55-5.92c-.32-.33-.7-.59-1.14-.77-.43-.18-.92-.27-1.46-.27H12v8h2.3c.55 0 1.06-.09 1.51-.27s.84-.43 1.16-.76.57-.73.74-1.19c.17-.47.26-.99.26-1.57v-.4c0-.58-.09-1.1-.26-1.57q-.27-.705-.75-1.2m-.39 3.16c0 .42-.05.79-.14 1.13-.1.33-.24.62-.43.85s-.43.41-.71.53q-.435.18-.99.18h-.91V9.12h.97c.72 0 1.27.23 1.64.69.38.46.57 1.12.57 1.99zM12 0l-.66.03 3.81 3.81 1.33-1.33c3.27 1.55 5.61 4.72 5.96 8.48h1.5C23.44 4.84 18.29 0 12 0"}),"ThreeDRotation"),nke=()=>{const{geometryDataSets:t}=Oy(),e=td(),[n,r]=Be.useState(!1),[i,o]=Be.useState(""),[s,a]=Be.useState(""),[c,h]=Be.useState(""),[d,v]=Be.useState({obj:!1,stl:!1,gltf:!1}),w=[{id:"obj",name:"Wavefront OBJ",description:"Standard 3D file format supported by most 3D applications. Good for general-purpose 3D models.",icon:ke.jsx(tke,{fontSize:"large"}),fileExtension:"obj"},{id:"stl",name:"STL",description:"3D printing industry standard format. Ideal for 3D printing and CNC manufacturing.",icon:ke.jsx(PG,{fontSize:"large"}),fileExtension:"stl"},{id:"glb",name:"glTF/GLB",description:"Modern, efficient 3D format with material support. Best for web and game engines.",icon:ke.jsx(IG,{fontSize:"large"}),fileExtension:"glb"}];Be.useEffect(()=>()=>{i&&URL.revokeObjectURL(i),s&&URL.revokeObjectURL(s),c&&URL.revokeObjectURL(c)},[i,s,c]);const _=k=>{if(!k)return k;const $=k.clone();if(!$.attributes.position)return $;const Q=$.attributes.position.count;if($.index){const ae=$.index.array;let ce=0,se=!1;for(let Se=0;Se<ae.length;Se++)if(ce=Math.max(ce,ae[Se]),ae[Se]>=Q){se=!0;break}(se||ce>=Q)&&(console.warn(`Fixing out-of-bounds indices: max index ${ce} exceeds vertex count ${Q}`),$.setIndex(null))}const ie=Object.keys($.attributes);for(const ae of ie){if(ae==="position")continue;const ce=$.attributes[ae];ce.count!==Q&&(console.warn(`Fixing mismatched attribute count for ${ae}: ${ce.count} vs position ${Q}`),$.deleteAttribute(ae))}return $.index?$.toNonIndexed():$},E=(k=!1)=>{const $=new kw;if(t.terrainGeometry){const ae=k?_(t.terrainGeometry):t.terrainGeometry,ce=new QC({vertexColors:!0,flatShading:!0}),se=new Uc(ae,ce);se.name="Terrain",$.add(se)}t.polygonGeometries&&t.polygonGeometries.length>0&&t.polygonGeometries.forEach((ae,ce)=>{if(!(ae!=null&&ae.geometry))return;const se=k?_(ae.geometry):ae.geometry,Se=new QC({color:8900331,flatShading:!0}),ye=new Uc(se,Se);ye.name=`Polygon_${ce}`,$.add(ye)});const Q=new o3e(16777215,.5);$.add(Q);const ie=new ZT(16777215,.8);return ie.position.set(1,1,1),$.add(ie),$},M=()=>{D(),A(),F()},D=()=>{if(t.terrainGeometry)try{const k=E(!1),Q=new INe().parse(k),ie=new Blob([Q],{type:"text/plain"}),ae=URL.createObjectURL(ie);o(ae),console.log("OBJ file generated successfully")}catch(k){console.error("Error generating OBJ file:",k)}},A=()=>{if(t.terrainGeometry)try{const k=E(!1),Q=new PNe().parse(k,{binary:!0}),ie=new Blob([Q],{type:"application/octet-stream"}),ae=URL.createObjectURL(ie);a(ae),console.log("STL file generated successfully")}catch(k){console.error("Error generating STL file:",k)}},F=()=>{if(t.terrainGeometry)try{const k=E(!0);new nM().parse(k,Q=>{let ie;Q instanceof ArrayBuffer?ie=new Blob([Q],{type:"application/octet-stream"}):ie=new Blob([JSON.stringify(Q)],{type:"model/gltf+json"});const ae=URL.createObjectURL(ie);h(ae),console.log("GLTF/GLB file generated successfully"),v(ce=>({...ce,gltf:!1}))},Q=>{console.error("Error during GLTF export:",Q),v(ie=>({...ie,gltf:!1}))},{binary:!0,onlyVisible:!0,truncateDrawRange:!0,animations:[]})}catch(k){console.error("Error generating GLTF file:",k),v($=>({...$,gltf:!1}))}},O=()=>{v(k=>({...k,obj:!0})),D(),v(k=>({...k,obj:!1}))},N=()=>{v(k=>({...k,stl:!0})),A(),v(k=>({...k,stl:!1}))},H=()=>{v(k=>({...k,gltf:!0})),F()},G=!t.terrainGeometry,W=()=>{r(!0)},X=()=>{r(!1)},K=k=>{switch(k){case"obj":return{url:i,isLoading:d.obj,handler:O};case"stl":return{url:s,isLoading:d.stl,handler:N};case"glb":return{url:c,isLoading:d.gltf,handler:H};default:return{url:"",isLoading:!1,handler:()=>{}}}};return ke.jsxs(ke.Fragment,{children:[ke.jsx(rm,{variant:"contained",color:"primary",onClick:W,disabled:G,startIcon:ke.jsx(RG,{}),children:"Export 3D Model"}),ke.jsxs(HN,{open:n,onClose:X,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:2,overflow:"hidden"}},children:[ke.jsxs(WN,{sx:{bgcolor:e.palette.primary.main,color:"white",display:"flex",alignItems:"center",gap:1},children:[ke.jsx(IG,{})," Export 3D Model"]}),ke.jsxs($N,{sx:{p:3},children:[ke.jsx(uo,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:"Export your 3D terrain model in various formats for use in external applications."}),ke.jsx(Tv,{sx:{my:2}}),ke.jsx(QF,{container:!0,spacing:3,children:w.map(k=>{const{url:$,isLoading:Q,handler:ie}=K(k.id);return ke.jsx(QF,{item:!0,xs:12,children:ke.jsxs(wp,{elevation:2,sx:{p:3,borderRadius:2,display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:"center",gap:3,transition:"all 0.2s ease-in-out","&:hover":{boxShadow:6,transform:"translateY(-2px)"}},children:[ke.jsx(da,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:e.palette.action.hover,borderRadius:"50%",p:2,color:e.palette.primary.main},children:k.icon}),ke.jsxs(da,{flex:1,children:[ke.jsxs(da,{display:"flex",alignItems:"center",mb:.5,children:[ke.jsx(uo,{variant:"h6",fontWeight:"bold",children:k.name}),ke.jsx(z2,{label:`.${k.fileExtension}`,size:"small",sx:{ml:1},color:"primary"})]}),ke.jsx(uo,{variant:"body2",color:"text.secondary",mb:1,children:k.description}),$?ke.jsxs(rm,{component:"a",variant:"contained",disabled:G||Q,href:$,download:`model.${k.fileExtension}`,startIcon:ke.jsx(RG,{}),children:["Download ",k.fileExtension.toUpperCase()]}):ke.jsx(rm,{variant:"outlined",onClick:ie,disabled:G||Q,startIcon:Q?null:ke.jsx(PG,{}),children:Q?"Generating...":`Generate ${k.fileExtension.toUpperCase()}`})]})]})},k.id)})})]}),ke.jsxs(qN,{sx:{p:2,bgcolor:e.palette.grey[100]},children:[ke.jsx(rm,{onClick:X,color:"primary",children:"Close"}),ke.jsx(rm,{onClick:()=>{M()},variant:"contained",color:"primary",disabled:G||d.obj||d.stl||d.gltf,children:"Generate All Formats"})]})]})]})},rke=({open:t,onClose:e})=>ke.jsxs(HN,{open:t,onClose:e,sx:{zIndex:1e4},maxWidth:"md",fullWidth:!0,children:[ke.jsx(WN,{children:"Acknowledgements"}),ke.jsxs($N,{dividers:!0,children:[ke.jsxs(da,{sx:{mb:4},children:[ke.jsx(uo,{variant:"h6",gutterBottom:!0,children:"JAXA ALOS World 3D"}),ke.jsxs(da,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[ke.jsx(da,{component:"img",src:"assets/jaxa.svg",alt:"JAXA Logo",sx:{width:100,objectFit:"contain"}}),ke.jsxs(da,{children:[ke.jsx(uo,{variant:"body1",paragraph:!0,children:'This application utilizes the Precise Global Digital 3D Map "ALOS World 3D" (AW3D) provided by the Japan Aerospace Exploration Agency (JAXA).'}),ke.jsx(QA,{href:"https://earth.jaxa.jp/en/data/2552/index.html",target:"_blank",rel:"noopener noreferrer",underline:"hover",children:"JAXA AW3D Dataset Information"})]})]})]}),ke.jsx(Tv,{sx:{my:3}}),ke.jsxs(da,{sx:{mb:4},children:[ke.jsx(uo,{variant:"h6",gutterBottom:!0,children:"OpenStreetMap"}),ke.jsxs(da,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[ke.jsx(da,{component:"img",src:"assets/osm.svg",alt:"OpenStreetMap Logo",sx:{width:100,objectFit:"contain"}}),ke.jsxs(da,{children:[ke.jsx(uo,{variant:"body1",paragraph:!0,children:"Map data is provided by OpenStreetMap contributors, serving as the foundation for the vector tile dataset used in this application. OpenStreetMap is an open collaborative project creating freely available geographic data."}),ke.jsx(QA,{href:"https://www.openstreetmap.org/copyright",target:"_blank",rel:"noopener noreferrer",underline:"hover",children:"© OpenStreetMap Contributors"})]})]})]}),ke.jsx(Tv,{sx:{my:3}}),ke.jsxs(da,{children:[ke.jsx(uo,{variant:"h6",gutterBottom:!0,children:"MapComponents"}),ke.jsxs(da,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[ke.jsx(da,{component:"img",src:"assets/mapcomponents.png",alt:"MapComponents Logo",sx:{width:100,objectFit:"contain"}}),ke.jsxs(da,{children:[ke.jsx(uo,{variant:"body1",paragraph:!0,children:"This application is built using @mapcomponents/react-maplibre, a modern React framework for interactive map applications. MapComponents provides developer-friendly tools for creating customizable mapping solutions."}),ke.jsx(QA,{href:"https://mapcomponents.org",target:"_blank",rel:"noopener noreferrer",underline:"hover",children:"MapComponents Project"})]})]})]})]}),ke.jsx(qN,{children:ke.jsx(rm,{onClick:e,variant:"outlined",children:"Close"})})]}),DG=fs(ke.jsx("path",{d:"m19.77 5.03 1.4 1.4L8.43 19.17l-5.6-5.6 1.4-1.4 4.2 4.2zm0-2.83L8.43 13.54l-4.2-4.2L0 13.57 8.43 22 24 6.43z"}),"DoneOutline"),ZY=fs(ke.jsx("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),ike=fs([ke.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),ke.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule"),ake=fs(ke.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"}),"Timer"),oke=({open:t,onClose:e})=>{const n=td(),[r,i]=zt.useState({});zt.useEffect(()=>{if(t){const d={};s.forEach(v=>{d[v.id]=v.status==="in-progress"}),i(d)}},[t]);const o=d=>{i(v=>({...v,[d]:!v[d]}))},s=[{id:1,title:"3D Mesh Generation from Elevation Data",description:"Develop an algorithm to convert JAXA ALOS World 3D elevation data into navigable 3D terrain meshes.",status:"completed",tags:["3D","Algorithm","Elevation"],progress:100,children:[{title:"Process terrain height data",done:!0},{title:"Convert to triangulated mesh",done:!0},{title:"Optimize mesh for rendering",done:!0}]},{id:2,title:"Vector Tile Integration for Geographic Data",description:"Convert various vector tile data sources into 3D mesh representations, including buildings, roads, land use, and other geographic features.",status:"in-progress",tags:["OSM","Vector Tiles","3D Mesh"],progress:65,children:[{title:"Load vector tile data",done:!0},{title:"Generate 3D building extrusions",done:!0},{title:"Add water polygons",done:!0},{title:"Implement road networks (LineString support)",done:!0},{title:"Add land use polygons",done:!0},{title:"Support MapLibre style specification",done:!1}]},{id:3,title:"@threegis/core npm package",description:"Create a custom npm package to handle 3D mesh generation and rendering.",status:"in-progress",tags:["OSM","Vector Tiles","3D Mesh"],progress:5,children:[{title:"Initialize monorepo using Lerna and Turborepo",done:!0},{title:"Create GitHub actions for npm deployments",done:!1},{title:"Set up stlmaps-app to consume the local dev version in development",done:!1},{title:"Move processing and data-fetching functions from stlmaps-app to @threegis/core",done:!1}]},{id:4,title:"Improve User Interface and Experience",description:"Enhance layer controls to allow users to customize the appearance of map elements.",status:"planned",tags:["UI/UX","Customization","Styling"],progress:0,children:[{title:"Redesign layout",done:!1},{title:"Implement layer controls (toggle, color, filter)",done:!1},{title:"Add color and style options",done:!1},{title:"Add matrix support to ensure perfect alignment of adjacent bbox exports",done:!1},{title:"Create save/load bbox presets",done:!1},{title:"Create save/load style presets",done:!1}]}],a=d=>{switch(d){case"completed":return ke.jsx(DG,{sx:{color:n.palette.success.main,fontSize:28}});case"in-progress":return ke.jsx(ZY,{sx:{color:n.palette.info.main,fontSize:28}});case"planned":return ke.jsx(ike,{sx:{color:n.palette.warning.main,fontSize:28}});default:return null}},c=d=>{switch(d){case"completed":return n.palette.success.main;case"in-progress":return n.palette.info.main;case"planned":return n.palette.warning.main;default:return n.palette.grey[500]}},h=d=>{switch(d){case"completed":return"Completed";case"in-progress":return"In Progress";case"planned":return"Planned";default:return d}};return ke.jsxs(HN,{open:t,onClose:e,sx:{zIndex:1e4},maxWidth:"md",fullWidth:!0,children:[ke.jsxs(WN,{sx:{background:`linear-gradient(45deg, ${n.palette.primary.main}, ${n.palette.secondary.main})`,color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[ke.jsx(uo,{variant:"h5",component:"div",sx:{fontWeight:"bold"},children:"Project Roadmap"}),ke.jsx(z2,{icon:ke.jsx(ake,{}),label:"Updated April 2025",variant:"outlined",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.5)"}})]}),ke.jsxs($N,{sx:{py:3},children:[ke.jsx(uo,{variant:"subtitle1",color:"text.secondary",paragraph:!0,children:"Track our progress and see what's coming next in the STL Maps project. Here's what we're working on:"}),ke.jsx(KN,{sx:{width:"100%"},children:s.map((d,v)=>ke.jsxs(zt.Fragment,{children:[v>0&&ke.jsx(Tv,{variant:"inset",component:"li"}),ke.jsx(wp,{elevation:3,sx:{my:2,p:0,overflow:"hidden",borderRadius:2,border:`1px solid ${n.palette.divider}`,transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:6}},children:ke.jsxs(A1,{alignItems:"flex-start",sx:{py:2,px:3,background:`linear-gradient(135deg, ${n.palette.background.paper} 0%, ${n.palette.background.paper} 85%, ${c(d.status)}22 100%)`},children:[ke.jsx(fw,{sx:{mt:1.5},children:a(d.status)}),ke.jsx(dw,{primary:ke.jsxs(da,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[ke.jsx(uo,{variant:"h6",component:"div",children:d.title}),ke.jsx(z2,{label:h(d.status),size:"small",sx:{bgcolor:c(d.status),color:"white",fontWeight:"bold"}})]}),secondary:ke.jsxs(da,{sx:{color:"text.primary",mt:1},children:[ke.jsx(uo,{variant:"body2",color:"text.secondary",paragraph:!0,children:d.description}),d.progress!==void 0&&ke.jsxs(da,{sx:{mt:1,mb:2},children:[ke.jsxs(da,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[ke.jsx(uo,{variant:"caption",color:"text.secondary",children:"Progress"}),ke.jsxs(uo,{variant:"caption",fontWeight:"bold",color:c(d.status),children:[d.progress,"%"]})]}),ke.jsx(qV,{variant:"determinate",value:d.progress,sx:{height:8,borderRadius:4,bgcolor:n.palette.grey[200],"& .MuiLinearProgress-bar":{bgcolor:c(d.status),borderRadius:4}}})]}),d.children&&d.children.length>0&&ke.jsxs(da,{sx:{mt:2,mb:2},children:[ke.jsxs(da,{onClick:()=>o(d.id),sx:{display:"flex",alignItems:"center",cursor:"pointer",gap:1,mb:1},children:[ke.jsx(da,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:18,height:18,borderRadius:"50%",bgcolor:`${c(d.status)}22`,color:c(d.status),fontSize:14,fontWeight:"bold",transition:"transform 0.2s ease-in-out"},children:r[d.id]?"−":"+"}),ke.jsxs(uo,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:.5},children:["Subtasks: ",d.children.filter(w=>w.done).length,"/",d.children.length," completed"]})]}),r[d.id]&&ke.jsx(da,{sx:{pl:1,borderLeft:`2px solid ${n.palette.grey[200]}`,display:"flex",flexDirection:"column",gap:1},children:d.children.map((w,_)=>ke.jsxs(da,{sx:{display:"flex",alignItems:"center",gap:1},children:[ke.jsx(da,{sx:{width:16,height:16,borderRadius:"50%",border:`1px solid ${w.done?n.palette.success.main:n.palette.grey[400]}`,bgcolor:w.done?n.palette.success.main:"transparent",display:"flex",justifyContent:"center",alignItems:"center"},children:w.done&&ke.jsx(DG,{sx:{color:"white",fontSize:12}})}),ke.jsx(uo,{variant:"body2",color:w.done?"text.primary":"text.secondary",sx:{fontWeight:w.done?"medium":"normal"},children:w.title})]},_))})]}),ke.jsx(da,{sx:{display:"flex",flexWrap:"wrap",gap:.7,mt:2},children:d.tags.map(w=>ke.jsx(z2,{label:w,size:"small",sx:{bgcolor:`${c(d.status)}22`,borderColor:c(d.status),color:c(d.status),border:`1px solid ${c(d.status)}`}},w))})]})})]})})]},d.id))})]}),ke.jsx(qN,{sx:{px:3,py:2,bgcolor:n.palette.grey[50]},children:ke.jsx(rm,{onClick:e,variant:"outlined",children:"Close"})})]})},ske=Wh`
  0% {
    opacity: 0.6;
    transform: scale(0.95);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
  100% {
    opacity: 0.6;
    transform: scale(0.95);
  }
`,lke=Wh`
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
`,uke=_r(wp)(({theme:t})=>({position:"fixed",bottom:"2rem",right:"2rem",padding:"16px 24px",borderRadius:"12px",backgroundColor:"rgba(34, 43, 54, 0.9)",backdropFilter:"blur(8px)",color:"#fff",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",width:"300px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.3)",overflow:"hidden",transition:"transform 0.3s ease-out, opacity 0.3s ease-out"})),cke=_r(da)({position:"absolute",top:0,left:0,right:0,height:"4px",backgroundSize:"300% 100%",animation:`${lke} 3s linear infinite`}),hke=_r(da)({animation:`${ske} 2s ease-in-out infinite`,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(66, 165, 245, 0.15)",borderRadius:"50%",padding:"12px",marginBottom:"12px"}),fke=_r(qV)(({theme:t})=>({width:"100%",height:"6px",marginTop:"12px",borderRadius:"3px",backgroundColor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{background:"linear-gradient(90deg, #42a5f5, #64ffda)"}})),dke=_r(uo)({fontSize:"0.875rem",opacity:.85,marginTop:"8px",fontFamily:"monospace",letterSpacing:"0.3px"}),pke=()=>{const{isProcessing:t,processingStatus:e,processingProgress:n}=Oy();return ke.jsxs(uke,{elevation:8,sx:{transform:t?"translateY(0)":"translateY(150px)",opacity:t?1:0},children:[ke.jsx(cke,{}),ke.jsx(hke,{children:ke.jsx(ZY,{color:"primary",fontSize:"large"})}),ke.jsx(uo,{variant:"subtitle1",fontWeight:"600",textAlign:"center",children:"Processing 3D Model"}),ke.jsx(fke,{variant:n!==null?"determinate":"indeterminate",value:n!==null?n:void 0}),ke.jsx(dke,{variant:"caption",children:e||"Initializing..."})]})},LG=fs(ke.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),gke=fs(ke.jsx("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7zm-6 .67 2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),mke=fs(ke.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),vke=fs(ke.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"}),"Map"),yke=[-74.00599999999997,40.71279999999999],NG=440,_ke=()=>{const t=td(),e=Bie(t.breakpoints.down("md")),[n,r]=Be.useState([-74.00599999999997,40.71279999999999]),[i,o]=Be.useState(!1),[s,a]=Be.useState(!1),[c,h]=Be.useState(!e),[d,v]=Be.useState(!1);Be.useEffect(()=>{h(!e)},[e]);const{terrainSettings:w,buildingSettings:_,polygonGeometries:E,terrainGeometry:M,buildingsGeometry:D}=Oy();return ke.jsxs(ke.Fragment,{children:[ke.jsxs(da,{sx:{display:"flex",height:"100vh",overflow:"hidden"},children:[ke.jsx(ure,{}),ke.jsx(Lee,{position:"fixed",sx:{zIndex:A=>A.zIndex.drawer+1e4},children:ke.jsxs(MT,{sx:{display:"flex",justifyContent:"space-between"},children:[ke.jsxs(da,{sx:{display:"flex",alignItems:"center"},children:[e&&ke.jsx(O2,{color:"secondary",edge:"start",onClick:()=>h(!c),sx:{mr:2},children:ke.jsx(LG,{})}),ke.jsx(uo,{variant:"h6",color:"primary",children:"STLmaps"})]}),!e&&ke.jsx(hG,{onCitySelect:A=>{A&&r(A.coordinates)}}),ke.jsxs(da,{sx:{display:"flex",gap:1},children:[ke.jsx(O2,{color:"secondary",children:ke.jsx(gke,{})}),e&&ke.jsx(O2,{color:"secondary",onClick:()=>v(!0),children:ke.jsx(LG,{})}),!e&&ke.jsxs(ke.Fragment,{children:[ke.jsx(rm,{variant:"outlined",onClick:()=>o(!0),color:"secondary",children:"Attribution"}),ke.jsx(rm,{variant:"outlined",onClick:()=>a(!0),color:"secondary",children:"Roadmap"}),ke.jsx(pke,{})]})]})]})}),ke.jsx(XI,{anchor:"right",open:d,onClose:()=>v(!1),sx:{zIndex:A=>A.zIndex.drawer+2e4},children:ke.jsx(da,{sx:{width:280},role:"presentation",children:ke.jsxs(KN,{children:[ke.jsx(A1,{children:ke.jsx(hG,{onCitySelect:A=>{A&&(r(A.coordinates),v(!1))}})}),ke.jsx(Tv,{}),ke.jsxs(A1,{button:!0,onClick:()=>{o(!0),v(!1)},children:[ke.jsx(fw,{children:ke.jsx(mke,{})}),ke.jsx(dw,{primary:"Attribution"})]}),ke.jsxs(A1,{button:!0,onClick:()=>{a(!0),v(!1)},children:[ke.jsx(fw,{children:ke.jsx(vke,{})}),ke.jsx(dw,{primary:"Roadmap"})]}),ke.jsx(A1,{children:ke.jsx(nke,{})})]})})}),ke.jsxs(XI,{variant:e?"temporary":"permanent",open:c,onClose:()=>h(!1),sx:{width:NG,flexShrink:0,"& .MuiDrawer-paper":{width:NG,boxSizing:"border-box"}},children:[ke.jsx(MT,{})," ",ke.jsx(RNe,{bboxCenter:n})]}),ke.jsxs(da,{component:"main",sx:{flexGrow:1,height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden",ml:{xs:0},transition:A=>A.transitions.create("margin")},children:[ke.jsx(MT,{})," ",ke.jsx(da,{sx:{flex:1,position:"relative",minHeight:0},children:ke.jsx($X,{style:{position:"absolute",top:0,bottom:0,left:0,right:0},options:{center:yke,zoom:14,style:"https://wms.wheregroup.com/tileserver/style/osm-bright.json"}})}),ke.jsx(Tv,{}),ke.jsx(da,{sx:{flex:1,position:"relative",minHeight:0,zIndex:1e4},children:ke.jsx(Be.Suspense,{fallback:ke.jsx(vM,{}),children:ke.jsx(DLe,{})})})]})]}),ke.jsx(rke,{open:i,onClose:()=>o(!1)}),ke.jsx(oke,{open:s,onClose:()=>a(!1)})]})};cZ.createRoot(document.getElementById("root")).render(ke.jsx(Be.StrictMode,{children:ke.jsx(qMe,{children:ke.jsx(_ke,{})})}));export{bs as _,fv as c,vy as g};
