var Aj=Object.defineProperty;var Cj=(t,e,n)=>e in t?Aj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var M1=(t,e,n)=>Cj(t,typeof e!="symbol"?e+"":e,n);function Pj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Xm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function S_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Rj(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var GE={exports:{}},A1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xL;function Dj(){if(xL)return A1;xL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var a in i)a!=="key"&&(o[a]=i[a])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:o}}return A1.Fragment=e,A1.jsx=n,A1.jsxs=n,A1}var wL;function Lj(){return wL||(wL=1,GE.exports=Dj()),GE.exports}var Ln=Lj(),qE={exports:{}},ma={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SL;function Ij(){if(SL)return ma;SL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function w(me){return me===null||typeof me!="object"?null:(me=y&&me[y]||me["@@iterator"],typeof me=="function"?me:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,M={};function P(me,Me,fe){this.props=me,this.context=Me,this.refs=M,this.updater=fe||b}P.prototype.isReactComponent={},P.prototype.setState=function(me,Me){if(typeof me!="object"&&typeof me!="function"&&me!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,me,Me,"setState")},P.prototype.forceUpdate=function(me){this.updater.enqueueForceUpdate(this,me,"forceUpdate")};function C(){}C.prototype=P.prototype;function k(me,Me,fe){this.props=me,this.context=Me,this.refs=M,this.updater=fe||b}var B=k.prototype=new C;B.constructor=k,A(B,P.prototype),B.isPureReactComponent=!0;var z=Array.isArray,q={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function W(me,Me,fe,ve,le,ye){return fe=ye.ref,{$$typeof:t,type:me,key:Me,ref:fe!==void 0?fe:null,props:ye}}function Y(me,Me){return W(me.type,Me,void 0,void 0,void 0,me.props)}function Z(me){return typeof me=="object"&&me!==null&&me.$$typeof===t}function j(me){var Me={"=":"=0",":":"=2"};return"$"+me.replace(/[=:]/g,function(fe){return Me[fe]})}var K=/\/+/g;function re(me,Me){return typeof me=="object"&&me!==null&&me.key!=null?j(""+me.key):Me.toString(36)}function ie(){}function se(me){switch(me.status){case"fulfilled":return me.value;case"rejected":throw me.reason;default:switch(typeof me.status=="string"?me.then(ie,ie):(me.status="pending",me.then(function(Me){me.status==="pending"&&(me.status="fulfilled",me.value=Me)},function(Me){me.status==="pending"&&(me.status="rejected",me.reason=Me)})),me.status){case"fulfilled":return me.value;case"rejected":throw me.reason}}throw me}function de(me,Me,fe,ve,le){var ye=typeof me;(ye==="undefined"||ye==="boolean")&&(me=null);var Se=!1;if(me===null)Se=!0;else switch(ye){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(me.$$typeof){case t:case e:Se=!0;break;case v:return Se=me._init,de(Se(me._payload),Me,fe,ve,le)}}if(Se)return le=le(me),Se=ve===""?"."+re(me,0):ve,z(le)?(fe="",Se!=null&&(fe=Se.replace(K,"$&/")+"/"),de(le,Me,fe,"",function(tt){return tt})):le!=null&&(Z(le)&&(le=Y(le,fe+(le.key==null||me&&me.key===le.key?"":(""+le.key).replace(K,"$&/")+"/")+Se)),Me.push(le)),1;Se=0;var Be=ve===""?".":ve+":";if(z(me))for(var Ve=0;Ve<me.length;Ve++)ve=me[Ve],ye=Be+re(ve,Ve),Se+=de(ve,Me,fe,ye,le);else if(Ve=w(me),typeof Ve=="function")for(me=Ve.call(me),Ve=0;!(ve=me.next()).done;)ve=ve.value,ye=Be+re(ve,Ve++),Se+=de(ve,Me,fe,ye,le);else if(ye==="object"){if(typeof me.then=="function")return de(se(me),Me,fe,ve,le);throw Me=String(me),Error("Objects are not valid as a React child (found: "+(Me==="[object Object]"?"object with keys {"+Object.keys(me).join(", ")+"}":Me)+"). If you meant to render a collection of children, use an array instead.")}return Se}function ue(me,Me,fe){if(me==null)return me;var ve=[],le=0;return de(me,ve,"","",function(ye){return Me.call(fe,ye,le++)}),ve}function Te(me){if(me._status===-1){var Me=me._result;Me=Me(),Me.then(function(fe){(me._status===0||me._status===-1)&&(me._status=1,me._result=fe)},function(fe){(me._status===0||me._status===-1)&&(me._status=2,me._result=fe)}),me._status===-1&&(me._status=0,me._result=Me)}if(me._status===1)return me._result.default;throw me._result}var pe=typeof reportError=="function"?reportError:function(me){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Me=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof me=="object"&&me!==null&&typeof me.message=="string"?String(me.message):String(me),error:me});if(!window.dispatchEvent(Me))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",me);return}console.error(me)};function De(){}return ma.Children={map:ue,forEach:function(me,Me,fe){ue(me,function(){Me.apply(this,arguments)},fe)},count:function(me){var Me=0;return ue(me,function(){Me++}),Me},toArray:function(me){return ue(me,function(Me){return Me})||[]},only:function(me){if(!Z(me))throw Error("React.Children.only expected to receive a single React element child.");return me}},ma.Component=P,ma.Fragment=n,ma.Profiler=i,ma.PureComponent=k,ma.StrictMode=r,ma.Suspense=h,ma.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,ma.act=function(){throw Error("act(...) is not supported in production builds of React.")},ma.cache=function(me){return function(){return me.apply(null,arguments)}},ma.cloneElement=function(me,Me,fe){if(me==null)throw Error("The argument must be a React element, but you passed "+me+".");var ve=A({},me.props),le=me.key,ye=void 0;if(Me!=null)for(Se in Me.ref!==void 0&&(ye=void 0),Me.key!==void 0&&(le=""+Me.key),Me)!V.call(Me,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&Me.ref===void 0||(ve[Se]=Me[Se]);var Se=arguments.length-2;if(Se===1)ve.children=fe;else if(1<Se){for(var Be=Array(Se),Ve=0;Ve<Se;Ve++)Be[Ve]=arguments[Ve+2];ve.children=Be}return W(me.type,le,void 0,void 0,ye,ve)},ma.createContext=function(me){return me={$$typeof:l,_currentValue:me,_currentValue2:me,_threadCount:0,Provider:null,Consumer:null},me.Provider=me,me.Consumer={$$typeof:o,_context:me},me},ma.createElement=function(me,Me,fe){var ve,le={},ye=null;if(Me!=null)for(ve in Me.key!==void 0&&(ye=""+Me.key),Me)V.call(Me,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(le[ve]=Me[ve]);var Se=arguments.length-2;if(Se===1)le.children=fe;else if(1<Se){for(var Be=Array(Se),Ve=0;Ve<Se;Ve++)Be[Ve]=arguments[Ve+2];le.children=Be}if(me&&me.defaultProps)for(ve in Se=me.defaultProps,Se)le[ve]===void 0&&(le[ve]=Se[ve]);return W(me,ye,void 0,void 0,null,le)},ma.createRef=function(){return{current:null}},ma.forwardRef=function(me){return{$$typeof:a,render:me}},ma.isValidElement=Z,ma.lazy=function(me){return{$$typeof:v,_payload:{_status:-1,_result:me},_init:Te}},ma.memo=function(me,Me){return{$$typeof:f,type:me,compare:Me===void 0?null:Me}},ma.startTransition=function(me){var Me=q.T,fe={};q.T=fe;try{var ve=me(),le=q.S;le!==null&&le(fe,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(De,pe)}catch(ye){pe(ye)}finally{q.T=Me}},ma.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},ma.use=function(me){return q.H.use(me)},ma.useActionState=function(me,Me,fe){return q.H.useActionState(me,Me,fe)},ma.useCallback=function(me,Me){return q.H.useCallback(me,Me)},ma.useContext=function(me){return q.H.useContext(me)},ma.useDebugValue=function(){},ma.useDeferredValue=function(me,Me){return q.H.useDeferredValue(me,Me)},ma.useEffect=function(me,Me){return q.H.useEffect(me,Me)},ma.useId=function(){return q.H.useId()},ma.useImperativeHandle=function(me,Me,fe){return q.H.useImperativeHandle(me,Me,fe)},ma.useInsertionEffect=function(me,Me){return q.H.useInsertionEffect(me,Me)},ma.useLayoutEffect=function(me,Me){return q.H.useLayoutEffect(me,Me)},ma.useMemo=function(me,Me){return q.H.useMemo(me,Me)},ma.useOptimistic=function(me,Me){return q.H.useOptimistic(me,Me)},ma.useReducer=function(me,Me,fe){return q.H.useReducer(me,Me,fe)},ma.useRef=function(me){return q.H.useRef(me)},ma.useState=function(me){return q.H.useState(me)},ma.useSyncExternalStore=function(me,Me,fe){return q.H.useSyncExternalStore(me,Me,fe)},ma.useTransition=function(){return q.H.useTransition()},ma.version="19.0.0",ma}var EL;function U0(){return EL||(EL=1,qE.exports=Ij()),qE.exports}var Et=U0();const bt=S_(Et),MC=Pj({__proto__:null,default:bt},[Et]);var HE={exports:{}},C1={},$E={exports:{}},WE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TL;function Oj(){return TL||(TL=1,function(t){function e(ue,Te){var pe=ue.length;ue.push(Te);e:for(;0<pe;){var De=pe-1>>>1,me=ue[De];if(0<i(me,Te))ue[De]=Te,ue[pe]=me,pe=De;else break e}}function n(ue){return ue.length===0?null:ue[0]}function r(ue){if(ue.length===0)return null;var Te=ue[0],pe=ue.pop();if(pe!==Te){ue[0]=pe;e:for(var De=0,me=ue.length,Me=me>>>1;De<Me;){var fe=2*(De+1)-1,ve=ue[fe],le=fe+1,ye=ue[le];if(0>i(ve,pe))le<me&&0>i(ye,ve)?(ue[De]=ye,ue[le]=pe,De=le):(ue[De]=ve,ue[fe]=pe,De=fe);else if(le<me&&0>i(ye,pe))ue[De]=ye,ue[le]=pe,De=le;else break e}}return Te}function i(ue,Te){var pe=ue.sortIndex-Te.sortIndex;return pe!==0?pe:ue.id-Te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,a=l.now();t.unstable_now=function(){return l.now()-a}}var h=[],f=[],v=1,y=null,w=3,b=!1,A=!1,M=!1,P=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function B(ue){for(var Te=n(f);Te!==null;){if(Te.callback===null)r(f);else if(Te.startTime<=ue)r(f),Te.sortIndex=Te.expirationTime,e(h,Te);else break;Te=n(f)}}function z(ue){if(M=!1,B(ue),!A)if(n(h)!==null)A=!0,se();else{var Te=n(f);Te!==null&&de(z,Te.startTime-ue)}}var q=!1,V=-1,W=5,Y=-1;function Z(){return!(t.unstable_now()-Y<W)}function j(){if(q){var ue=t.unstable_now();Y=ue;var Te=!0;try{e:{A=!1,M&&(M=!1,C(V),V=-1),b=!0;var pe=w;try{t:{for(B(ue),y=n(h);y!==null&&!(y.expirationTime>ue&&Z());){var De=y.callback;if(typeof De=="function"){y.callback=null,w=y.priorityLevel;var me=De(y.expirationTime<=ue);if(ue=t.unstable_now(),typeof me=="function"){y.callback=me,B(ue),Te=!0;break t}y===n(h)&&r(h),B(ue)}else r(h);y=n(h)}if(y!==null)Te=!0;else{var Me=n(f);Me!==null&&de(z,Me.startTime-ue),Te=!1}}break e}finally{y=null,w=pe,b=!1}Te=void 0}}finally{Te?K():q=!1}}}var K;if(typeof k=="function")K=function(){k(j)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ie=re.port2;re.port1.onmessage=j,K=function(){ie.postMessage(null)}}else K=function(){P(j,0)};function se(){q||(q=!0,K())}function de(ue,Te){V=P(function(){ue(t.unstable_now())},Te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ue){ue.callback=null},t.unstable_continueExecution=function(){A||b||(A=!0,se())},t.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ue?Math.floor(1e3/ue):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(ue){switch(w){case 1:case 2:case 3:var Te=3;break;default:Te=w}var pe=w;w=Te;try{return ue()}finally{w=pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ue,Te){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var pe=w;w=ue;try{return Te()}finally{w=pe}},t.unstable_scheduleCallback=function(ue,Te,pe){var De=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?De+pe:De):pe=De,ue){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=pe+me,ue={id:v++,callback:Te,priorityLevel:ue,startTime:pe,expirationTime:me,sortIndex:-1},pe>De?(ue.sortIndex=pe,e(f,ue),n(h)===null&&ue===n(f)&&(M?(C(V),V=-1):M=!0,de(z,pe-De))):(ue.sortIndex=me,e(h,ue),A||b||(A=!0,se())),ue},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(ue){var Te=w;return function(){var pe=w;w=Te;try{return ue.apply(this,arguments)}finally{w=pe}}}}(WE)),WE}var ML;function Nj(){return ML||(ML=1,$E.exports=Oj()),$E.exports}var XE={exports:{}},Sc={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AL;function kj(){if(AL)return Sc;AL=1;var t=U0();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,f,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:f,implementation:v}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Sc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Sc.createPortal=function(h,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,v)},Sc.flushSync=function(h){var f=l.T,v=r.p;try{if(l.T=null,r.p=2,h)return h()}finally{l.T=f,r.p=v,r.d.f()}},Sc.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Sc.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Sc.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var v=f.as,y=a(v,f.crossOrigin),w=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;v==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:b}):v==="script"&&r.d.X(h,{crossOrigin:y,integrity:w,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Sc.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var v=a(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Sc.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var v=f.as,y=a(v,f.crossOrigin);r.d.L(h,v,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Sc.preloadModule=function(h,f){if(typeof h=="string")if(f){var v=a(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Sc.requestFormReset=function(h){r.d.r(h)},Sc.unstable_batchedUpdates=function(h,f){return h(f)},Sc.useFormState=function(h,f,v){return l.H.useFormState(h,f,v)},Sc.useFormStatus=function(){return l.H.useHostTransitionStatus()},Sc.version="19.0.0",Sc}var CL;function UB(){if(CL)return XE.exports;CL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),XE.exports=kj(),XE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PL;function Fj(){if(PL)return C1;PL=1;var t=Nj(),e=U0(),n=UB();function r(c){var g="https://react.dev/errors/"+c;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+c+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}var o=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),b=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),z=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function V(c){return c===null||typeof c!="object"?null:(c=q&&c[q]||c["@@iterator"],typeof c=="function"?c:null)}var W=Symbol.for("react.client.reference");function Y(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===W?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case h:return"Fragment";case a:return"Portal";case v:return"Profiler";case f:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case b:return(c.displayName||"Context")+".Provider";case w:return(c._context.displayName||"Context")+".Consumer";case A:var g=c.render;return c=c.displayName,c||(c=g.displayName||g.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case C:return g=c.displayName||null,g!==null?g:Y(c.type)||"Memo";case k:g=c._payload,c=c._init;try{return Y(c(g))}catch{}}return null}var Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=Object.assign,K,re;function ie(c){if(K===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);K=g&&g[1]||"",re=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+K+c+re}var se=!1;function de(c,g){if(!c||se)return"";se=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var D={DetermineComponentFrameRoot:function(){try{if(g){var yr=function(){throw Error()};if(Object.defineProperty(yr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yr,[])}catch(Jn){var Nn=Jn}Reflect.construct(c,[],yr)}else{try{yr.call()}catch(Jn){Nn=Jn}c.call(yr.prototype)}}else{try{throw Error()}catch(Jn){Nn=Jn}(yr=c())&&typeof yr.catch=="function"&&yr.catch(function(){})}}catch(Jn){if(Jn&&Nn&&typeof Jn.stack=="string")return[Jn.stack,Nn.stack]}return[null,null]}};D.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(D.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(D.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var te=D.DetermineComponentFrameRoot(),Oe=te[0],st=te[1];if(Oe&&st){var Ot=Oe.split(`
`),cn=st.split(`
`);for(G=D=0;D<Ot.length&&!Ot[D].includes("DetermineComponentFrameRoot");)D++;for(;G<cn.length&&!cn[G].includes("DetermineComponentFrameRoot");)G++;if(D===Ot.length||G===cn.length)for(D=Ot.length-1,G=cn.length-1;1<=D&&0<=G&&Ot[D]!==cn[G];)G--;for(;1<=D&&0<=G;D--,G--)if(Ot[D]!==cn[G]){if(D!==1||G!==1)do if(D--,G--,0>G||Ot[D]!==cn[G]){var tr=`
`+Ot[D].replace(" at new "," at ");return c.displayName&&tr.includes("<anonymous>")&&(tr=tr.replace("<anonymous>",c.displayName)),tr}while(1<=D&&0<=G);break}}}finally{se=!1,Error.prepareStackTrace=S}return(S=c?c.displayName||c.name:"")?ie(S):""}function ue(c){switch(c.tag){case 26:case 27:case 5:return ie(c.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 15:return c=de(c.type,!1),c;case 11:return c=de(c.type.render,!1),c;case 1:return c=de(c.type,!0),c;default:return""}}function Te(c){try{var g="";do g+=ue(c),c=c.return;while(c);return g}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}function pe(c){var g=c,S=c;if(c.alternate)for(;g.return;)g=g.return;else{c=g;do g=c,(g.flags&4098)!==0&&(S=g.return),c=g.return;while(c)}return g.tag===3?S:null}function De(c){if(c.tag===13){var g=c.memoizedState;if(g===null&&(c=c.alternate,c!==null&&(g=c.memoizedState)),g!==null)return g.dehydrated}return null}function me(c){if(pe(c)!==c)throw Error(r(188))}function Me(c){var g=c.alternate;if(!g){if(g=pe(c),g===null)throw Error(r(188));return g!==c?null:c}for(var S=c,D=g;;){var G=S.return;if(G===null)break;var te=G.alternate;if(te===null){if(D=G.return,D!==null){S=D;continue}break}if(G.child===te.child){for(te=G.child;te;){if(te===S)return me(G),c;if(te===D)return me(G),g;te=te.sibling}throw Error(r(188))}if(S.return!==D.return)S=G,D=te;else{for(var Oe=!1,st=G.child;st;){if(st===S){Oe=!0,S=G,D=te;break}if(st===D){Oe=!0,D=G,S=te;break}st=st.sibling}if(!Oe){for(st=te.child;st;){if(st===S){Oe=!0,S=te,D=G;break}if(st===D){Oe=!0,D=te,S=G;break}st=st.sibling}if(!Oe)throw Error(r(189))}}if(S.alternate!==D)throw Error(r(190))}if(S.tag!==3)throw Error(r(188));return S.stateNode.current===S?c:g}function fe(c){var g=c.tag;if(g===5||g===26||g===27||g===6)return c;for(c=c.child;c!==null;){if(g=fe(c),g!==null)return g;c=c.sibling}return null}var ve=Array.isArray,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Se=[],Be=-1;function Ve(c){return{current:c}}function tt(c){0>Be||(c.current=Se[Be],Se[Be]=null,Be--)}function ht(c,g){Be++,Se[Be]=c.current,c.current=g}var it=Ve(null),gt=Ve(null),$t=Ve(null),He=Ve(null);function Ct(c,g){switch(ht($t,g),ht(gt,c),ht(it,null),c=g.nodeType,c){case 9:case 11:g=(g=g.documentElement)&&(g=g.namespaceURI)?Rm(g):0;break;default:if(c=c===8?g.parentNode:g,g=c.tagName,c=c.namespaceURI)c=Rm(c),g=v1(c,g);else switch(g){case"svg":g=1;break;case"math":g=2;break;default:g=0}}tt(it),ht(it,g)}function Xe(){tt(it),tt(gt),tt($t)}function tn(c){c.memoizedState!==null&&ht(He,c);var g=it.current,S=v1(g,c.type);g!==S&&(ht(gt,c),ht(it,S))}function Kt(c){gt.current===c&&(tt(it),tt(gt)),He.current===c&&(tt(He),at._currentValue=ye)}var Jt=Object.prototype.hasOwnProperty,Ht=t.unstable_scheduleCallback,$e=t.unstable_cancelCallback,Ee=t.unstable_shouldYield,_t=t.unstable_requestPaint,jt=t.unstable_now,vt=t.unstable_getCurrentPriorityLevel,Pt=t.unstable_ImmediatePriority,vn=t.unstable_UserBlockingPriority,hn=t.unstable_NormalPriority,pn=t.unstable_LowPriority,nn=t.unstable_IdlePriority,Ft=t.log,In=t.unstable_setDisableYieldValue,Pn=null,ir=null;function mt(c){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(Pn,c,void 0,(c.current.flags&128)===128)}catch{}}function ge(c){if(typeof Ft=="function"&&In(c),ir&&typeof ir.setStrictMode=="function")try{ir.setStrictMode(Pn,c)}catch{}}var ke=Math.clz32?Math.clz32:Qe,We=Math.log,Ce=Math.LN2;function Qe(c){return c>>>=0,c===0?32:31-(We(c)/Ce|0)|0}var et=128,ut=4194304;function lt(c){var g=c&42;if(g!==0)return g;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function xt(c,g){var S=c.pendingLanes;if(S===0)return 0;var D=0,G=c.suspendedLanes,te=c.pingedLanes,Oe=c.warmLanes;c=c.finishedLanes!==0;var st=S&134217727;return st!==0?(S=st&~G,S!==0?D=lt(S):(te&=st,te!==0?D=lt(te):c||(Oe=st&~Oe,Oe!==0&&(D=lt(Oe))))):(st=S&~G,st!==0?D=lt(st):te!==0?D=lt(te):c||(Oe=S&~Oe,Oe!==0&&(D=lt(Oe)))),D===0?0:g!==0&&g!==D&&(g&G)===0&&(G=D&-D,Oe=g&-g,G>=Oe||G===32&&(Oe&4194176)!==0)?g:D}function Dt(c,g){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&g)===0}function zt(c,g){switch(c){case 1:case 2:case 4:case 8:return g+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tn(){var c=et;return et<<=1,(et&4194176)===0&&(et=128),c}function qt(){var c=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),c}function Zn(c){for(var g=[],S=0;31>S;S++)g.push(c);return g}function Gn(c,g){c.pendingLanes|=g,g!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function we(c,g,S,D,G,te){var Oe=c.pendingLanes;c.pendingLanes=S,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=S,c.entangledLanes&=S,c.errorRecoveryDisabledLanes&=S,c.shellSuspendCounter=0;var st=c.entanglements,Ot=c.expirationTimes,cn=c.hiddenUpdates;for(S=Oe&~S;0<S;){var tr=31-ke(S),yr=1<<tr;st[tr]=0,Ot[tr]=-1;var Nn=cn[tr];if(Nn!==null)for(cn[tr]=null,tr=0;tr<Nn.length;tr++){var Jn=Nn[tr];Jn!==null&&(Jn.lane&=-536870913)}S&=~yr}D!==0&&Ne(c,D,0),te!==0&&G===0&&c.tag!==0&&(c.suspendedLanes|=te&~(Oe&~g))}function Ne(c,g,S){c.pendingLanes|=g,c.suspendedLanes&=~g;var D=31-ke(g);c.entangledLanes|=g,c.entanglements[D]=c.entanglements[D]|1073741824|S&4194218}function je(c,g){var S=c.entangledLanes|=g;for(c=c.entanglements;S;){var D=31-ke(S),G=1<<D;G&g|c[D]&g&&(c[D]|=g),S&=~G}}function At(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function sn(){var c=le.p;return c!==0?c:(c=window.event,c===void 0?32:Oo(c.type))}function Hn(c,g){var S=le.p;try{return le.p=c,g()}finally{le.p=S}}var or=Math.random().toString(36).slice(2),Er="__reactFiber$"+or,lr="__reactProps$"+or,Ri="__reactContainer$"+or,ci="__reactEvents$"+or,Vi="__reactListeners$"+or,Vr="__reactHandles$"+or,Ca="__reactResources$"+or,ra="__reactMarker$"+or;function mi(c){delete c[Er],delete c[lr],delete c[ci],delete c[Vi],delete c[Vr]}function no(c){var g=c[Er];if(g)return g;for(var S=c.parentNode;S;){if(g=S[Ri]||S[Er]){if(S=g.alternate,g.child!==null||S!==null&&S.child!==null)for(c=_1(c);c!==null;){if(S=c[Er])return S;c=_1(c)}return g}c=S,S=c.parentNode}return null}function nt(c){if(c=c[Er]||c[Ri]){var g=c.tag;if(g===5||g===6||g===13||g===26||g===27||g===3)return c}return null}function an(c){var g=c.tag;if(g===5||g===26||g===27||g===6)return c.stateNode;throw Error(r(33))}function gn(c){var g=c[Ca];return g||(g=c[Ca]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function _n(c){c[ra]=!0}var fn=new Set,cr={};function hr(c,g){Ar(c,g),Ar(c+"Capture",g)}function Ar(c,g){for(cr[c]=g,c=0;c<g.length;c++)fn.add(g[c])}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ei=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xr={},Hr={};function gi(c){return Jt.call(Hr,c)?!0:Jt.call(Xr,c)?!1:ei.test(c)?Hr[c]=!0:(Xr[c]=!0,!1)}function vi(c,g,S){if(gi(g))if(S===null)c.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":c.removeAttribute(g);return;case"boolean":var D=g.toLowerCase().slice(0,5);if(D!=="data-"&&D!=="aria-"){c.removeAttribute(g);return}}c.setAttribute(g,""+S)}}function yi(c,g,S){if(S===null)c.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(g);return}c.setAttribute(g,""+S)}}function Wi(c,g,S,D){if(D===null)c.removeAttribute(S);else{switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(S);return}c.setAttributeNS(g,S,""+D)}}function ii(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Zr(c){var g=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function $a(c){var g=Zr(c)?"checked":"value",S=Object.getOwnPropertyDescriptor(c.constructor.prototype,g),D=""+c[g];if(!c.hasOwnProperty(g)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var G=S.get,te=S.set;return Object.defineProperty(c,g,{configurable:!0,get:function(){return G.call(this)},set:function(Oe){D=""+Oe,te.call(this,Oe)}}),Object.defineProperty(c,g,{enumerable:S.enumerable}),{getValue:function(){return D},setValue:function(Oe){D=""+Oe},stopTracking:function(){c._valueTracker=null,delete c[g]}}}}function Di(c){c._valueTracker||(c._valueTracker=$a(c))}function ja(c){if(!c)return!1;var g=c._valueTracker;if(!g)return!0;var S=g.getValue(),D="";return c&&(D=Zr(c)?c.checked?"true":"false":c.value),c=D,c!==S?(g.setValue(c),!0):!1}function lo(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Gi=/[\n"\\]/g;function ti(c){return c.replace(Gi,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function Pi(c,g,S,D,G,te,Oe,st){c.name="",Oe!=null&&typeof Oe!="function"&&typeof Oe!="symbol"&&typeof Oe!="boolean"?c.type=Oe:c.removeAttribute("type"),g!=null?Oe==="number"?(g===0&&c.value===""||c.value!=g)&&(c.value=""+ii(g)):c.value!==""+ii(g)&&(c.value=""+ii(g)):Oe!=="submit"&&Oe!=="reset"||c.removeAttribute("value"),g!=null?H(c,Oe,ii(g)):S!=null?H(c,Oe,ii(S)):D!=null&&c.removeAttribute("value"),G==null&&te!=null&&(c.defaultChecked=!!te),G!=null&&(c.checked=G&&typeof G!="function"&&typeof G!="symbol"),st!=null&&typeof st!="function"&&typeof st!="symbol"&&typeof st!="boolean"?c.name=""+ii(st):c.removeAttribute("name")}function xa(c,g,S,D,G,te,Oe,st){if(te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(c.type=te),g!=null||S!=null){if(!(te!=="submit"&&te!=="reset"||g!=null))return;S=S!=null?""+ii(S):"",g=g!=null?""+ii(g):S,st||g===c.value||(c.value=g),c.defaultValue=g}D=D??G,D=typeof D!="function"&&typeof D!="symbol"&&!!D,c.checked=st?c.checked:!!D,c.defaultChecked=!!D,Oe!=null&&typeof Oe!="function"&&typeof Oe!="symbol"&&typeof Oe!="boolean"&&(c.name=Oe)}function H(c,g,S){g==="number"&&lo(c.ownerDocument)===c||c.defaultValue===""+S||(c.defaultValue=""+S)}function he(c,g,S,D){if(c=c.options,g){g={};for(var G=0;G<S.length;G++)g["$"+S[G]]=!0;for(S=0;S<c.length;S++)G=g.hasOwnProperty("$"+c[S].value),c[S].selected!==G&&(c[S].selected=G),G&&D&&(c[S].defaultSelected=!0)}else{for(S=""+ii(S),g=null,G=0;G<c.length;G++){if(c[G].value===S){c[G].selected=!0,D&&(c[G].defaultSelected=!0);return}g!==null||c[G].disabled||(g=c[G])}g!==null&&(g.selected=!0)}}function Ge(c,g,S){if(g!=null&&(g=""+ii(g),g!==c.value&&(c.value=g),S==null)){c.defaultValue!==g&&(c.defaultValue=g);return}c.defaultValue=S!=null?""+ii(S):""}function St(c,g,S,D){if(g==null){if(D!=null){if(S!=null)throw Error(r(92));if(ve(D)){if(1<D.length)throw Error(r(93));D=D[0]}S=D}S==null&&(S=""),g=S}S=ii(g),c.defaultValue=S,D=c.textContent,D===S&&D!==""&&D!==null&&(c.value=D)}function Lt(c,g){if(g){var S=c.firstChild;if(S&&S===c.lastChild&&S.nodeType===3){S.nodeValue=g;return}}c.textContent=g}var Ut=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yt(c,g,S){var D=g.indexOf("--")===0;S==null||typeof S=="boolean"||S===""?D?c.setProperty(g,""):g==="float"?c.cssFloat="":c[g]="":D?c.setProperty(g,S):typeof S!="number"||S===0||Ut.has(g)?g==="float"?c.cssFloat=S:c[g]=(""+S).trim():c[g]=S+"px"}function sr(c,g,S){if(g!=null&&typeof g!="object")throw Error(r(62));if(c=c.style,S!=null){for(var D in S)!S.hasOwnProperty(D)||g!=null&&g.hasOwnProperty(D)||(D.indexOf("--")===0?c.setProperty(D,""):D==="float"?c.cssFloat="":c[D]="");for(var G in g)D=g[G],g.hasOwnProperty(G)&&S[G]!==D&&Yt(c,G,D)}else for(var te in g)g.hasOwnProperty(te)&&Yt(c,te,g[te])}function Wn(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xr(c){return vr.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var Lr=null;function Ti(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Yr=null,Cr=null;function $n(c){var g=nt(c);if(g&&(c=g.stateNode)){var S=c[lr]||null;e:switch(c=g.stateNode,g.type){case"input":if(Pi(c,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name),g=S.name,S.type==="radio"&&g!=null){for(S=c;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll('input[name="'+ti(""+g)+'"][type="radio"]'),g=0;g<S.length;g++){var D=S[g];if(D!==c&&D.form===c.form){var G=D[lr]||null;if(!G)throw Error(r(90));Pi(D,G.value,G.defaultValue,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name)}}for(g=0;g<S.length;g++)D=S[g],D.form===c.form&&ja(D)}break e;case"textarea":Ge(c,S.value,S.defaultValue);break e;case"select":g=S.value,g!=null&&he(c,!!S.multiple,g,!1)}}}var Rr=!1;function Ni(c,g,S){if(Rr)return c(g,S);Rr=!0;try{var D=c(g);return D}finally{if(Rr=!1,(Yr!==null||Cr!==null)&&(Bg(),Yr&&(g=Yr,c=Cr,Cr=Yr=null,$n(g),c)))for(g=0;g<c.length;g++)$n(c[g])}}function ta(c,g){var S=c.stateNode;if(S===null)return null;var D=S[lr]||null;if(D===null)return null;S=D[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(c=c.type,D=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!D;break e;default:c=!1}if(c)return null;if(S&&typeof S!="function")throw Error(r(231,g,typeof S));return S}var di=!1;if(Pr)try{var js={};Object.defineProperty(js,"passive",{get:function(){di=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{di=!1}var _i=null,Ir=null,Gl=null;function ji(){if(Gl)return Gl;var c,g=Ir,S=g.length,D,G="value"in _i?_i.value:_i.textContent,te=G.length;for(c=0;c<S&&g[c]===G[c];c++);var Oe=S-c;for(D=1;D<=Oe&&g[S-D]===G[te-D];D++);return Gl=G.slice(c,1<D?1-D:void 0)}function Po(c){var g=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&g===13&&(c=13)):c=g,c===10&&(c=13),32<=c||c===13?c:0}function vo(){return!0}function tl(){return!1}function Ro(c){function g(S,D,G,te,Oe){this._reactName=S,this._targetInst=G,this.type=D,this.nativeEvent=te,this.target=Oe,this.currentTarget=null;for(var st in c)c.hasOwnProperty(st)&&(S=c[st],this[st]=S?S(te):te[st]);return this.isDefaultPrevented=(te.defaultPrevented!=null?te.defaultPrevented:te.returnValue===!1)?vo:tl,this.isPropagationStopped=tl,this}return j(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=vo)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=vo)},persist:function(){},isPersistent:vo}),g}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=Ro(jo),Es=j({},jo,{view:0,detail:0}),Kh=Ro(Es),Zu,hc,Ml,Pa=j({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ml&&(Ml&&c.type==="mousemove"?(Zu=c.screenX-Ml.screenX,hc=c.screenY-Ml.screenY):hc=Zu=0,Ml=c),Zu)},movementY:function(c){return"movementY"in c?c.movementY:hc}}),Wa=Ro(Pa),eh=j({},Pa,{dataTransfer:0}),Do=Ro(eh),ia=j({},Es,{relatedTarget:0}),hu=Ro(ia),fu=j({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),as=Ro(fu),Nc=j({},jo,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),kc=Ro(Nc),Fc=j({},jo,{data:0}),Bc=Ro(Fc),Cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(c){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(c):(c=Vo[c])?!!g[c]:!1}function os(){return fc}var th=j({},Es,{key:function(c){if(c.key){var g=Cu[c.key]||c.key;if(g!=="Unidentified")return g}return c.type==="keypress"?(c=Po(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Pu[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(c){return c.type==="keypress"?Po(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Po(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Ru=Ro(th),Ts=j({},Pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dc=Ro(Ts),rl=j({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),du=Ro(rl),ee=j({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=Ro(ee),Mt=j({},Pa,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Zt=Ro(Mt),yn=j({},jo,{newState:0,oldState:0}),qn=Ro(yn),fr=[9,13,27,32],Or=Pr&&"CompositionEvent"in window,Gr=null;Pr&&"documentMode"in document&&(Gr=document.documentMode);var wi=Pr&&"TextEvent"in window&&!Gr,oi=Pr&&(!Or||Gr&&8<Gr&&11>=Gr),Mi=" ",ya=!1;function ka(c,g){switch(c){case"keyup":return fr.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aa(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var yo=!1;function _o(c,g){switch(c){case"compositionend":return aa(g);case"keypress":return g.which!==32?null:(ya=!0,Mi);case"textInput":return c=g.data,c===Mi&&ya?null:c;default:return null}}function So(c,g){if(yo)return c==="compositionend"||!Or&&ka(c,g)?(c=ji(),Gl=Ir=_i=null,yo=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return oi&&g.locale!=="ko"?null:g.data;default:return null}}var il={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vs(c){var g=c&&c.nodeName&&c.nodeName.toLowerCase();return g==="input"?!!il[c.type]:g==="textarea"}function Sh(c,g,S,D){Yr?Cr?Cr.push(D):Cr=[D]:Yr=D,g=Vg(g,"onChange"),0<g.length&&(S=new nl("onChange","change",null,S,D),c.push({event:S,listeners:g}))}var Du=null,ql=null;function pc(c){f1(c,0)}function Hl(c){var g=an(c);if(ja(g))return c}function al(c,g){if(c==="change")return g}var Yu=!1;if(Pr){var Ra;if(Pr){var Ms="oninput"in document;if(!Ms){var Gs=document.createElement("div");Gs.setAttribute("oninput","return;"),Ms=typeof Gs.oninput=="function"}Ra=Ms}else Ra=!1;Yu=Ra&&(!document.documentMode||9<document.documentMode)}function pu(){Du&&(Du.detachEvent("onpropertychange",mc),ql=Du=null)}function mc(c){if(c.propertyName==="value"&&Hl(ql)){var g=[];Sh(g,ql,c,Ti(c)),Ni(pc,g)}}function ss(c,g,S){c==="focusin"?(pu(),Du=g,ql=S,Du.attachEvent("onpropertychange",mc)):c==="focusout"&&pu()}function zc(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Hl(ql)}function $l(c,g){if(c==="click")return Hl(g)}function qi(c,g){if(c==="input"||c==="change")return Hl(g)}function Al(c,g){return c===g&&(c!==0||1/c===1/g)||c!==c&&g!==g}var bo=typeof Object.is=="function"?Object.is:Al;function Ku(c,g){if(bo(c,g))return!0;if(typeof c!="object"||c===null||typeof g!="object"||g===null)return!1;var S=Object.keys(c),D=Object.keys(g);if(S.length!==D.length)return!1;for(D=0;D<S.length;D++){var G=S[D];if(!Jt.call(g,G)||!bo(c[G],g[G]))return!1}return!0}function Eh(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function ln(c,g){var S=Eh(c);c=0;for(var D;S;){if(S.nodeType===3){if(D=c+S.textContent.length,c<=g&&D>=g)return{node:S,offset:g-c};c=D}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=Eh(S)}}function On(c,g){return c&&g?c===g?!0:c&&c.nodeType===3?!1:g&&g.nodeType===3?On(c,g.parentNode):"contains"in c?c.contains(g):c.compareDocumentPosition?!!(c.compareDocumentPosition(g)&16):!1:!1}function _r(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var g=lo(c.document);g instanceof c.HTMLIFrameElement;){try{var S=typeof g.contentWindow.location.href=="string"}catch{S=!1}if(S)c=g.contentWindow;else break;g=lo(c.document)}return g}function Dr(c){var g=c&&c.nodeName&&c.nodeName.toLowerCase();return g&&(g==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||g==="textarea"||c.contentEditable==="true")}function na(c,g){var S=_r(g);g=c.focusedElem;var D=c.selectionRange;if(S!==g&&g&&g.ownerDocument&&On(g.ownerDocument.documentElement,g)){if(D!==null&&Dr(g)){if(c=D.start,S=D.end,S===void 0&&(S=c),"selectionStart"in g)g.selectionStart=c,g.selectionEnd=Math.min(S,g.value.length);else if(S=(c=g.ownerDocument||document)&&c.defaultView||window,S.getSelection){S=S.getSelection();var G=g.textContent.length,te=Math.min(D.start,G);D=D.end===void 0?te:Math.min(D.end,G),!S.extend&&te>D&&(G=D,D=te,te=G),G=ln(g,te);var Oe=ln(g,D);G&&Oe&&(S.rangeCount!==1||S.anchorNode!==G.node||S.anchorOffset!==G.offset||S.focusNode!==Oe.node||S.focusOffset!==Oe.offset)&&(c=c.createRange(),c.setStart(G.node,G.offset),S.removeAllRanges(),te>D?(S.addRange(c),S.extend(Oe.node,Oe.offset)):(c.setEnd(Oe.node,Oe.offset),S.addRange(c)))}}for(c=[],S=g;S=S.parentNode;)S.nodeType===1&&c.push({element:S,left:S.scrollLeft,top:S.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<c.length;g++)S=c[g],S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}var Si=Pr&&"documentMode"in document&&11>=document.documentMode,Xi=null,la=null,Fa=null,si=!1;function Qa(c,g,S){var D=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;si||Xi==null||Xi!==lo(D)||(D=Xi,"selectionStart"in D&&Dr(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),Fa&&Ku(Fa,D)||(Fa=D,D=Vg(la,"onSelect"),0<D.length&&(g=new nl("onSelect","select",null,g,S),c.push({event:g,listeners:D}),g.target=Xi)))}function wa(c,g){var S={};return S[c.toLowerCase()]=g.toLowerCase(),S["Webkit"+c]="webkit"+g,S["Moz"+c]="moz"+g,S}var Va={animationend:wa("Animation","AnimationEnd"),animationiteration:wa("Animation","AnimationIteration"),animationstart:wa("Animation","AnimationStart"),transitionrun:wa("Transition","TransitionRun"),transitionstart:wa("Transition","TransitionStart"),transitioncancel:wa("Transition","TransitionCancel"),transitionend:wa("Transition","TransitionEnd")},Ba={},As={};Pr&&(As=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function Go(c){if(Ba[c])return Ba[c];if(!Va[c])return c;var g=Va[c],S;for(S in g)if(g.hasOwnProperty(S)&&S in As)return Ba[c]=g[S];return c}var qs=Go("animationend"),Cs=Go("animationiteration"),ol=Go("animationstart"),Cl=Go("transitionrun"),mu=Go("transitionstart"),gc=Go("transitioncancel"),Zi=Go("transitionend"),Br=new Map,qo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Da(c,g){Br.set(c,g),hr(g,[c])}var zi=[],bi=0,Sa=0;function La(){for(var c=bi,g=Sa=bi=0;g<c;){var S=zi[g];zi[g++]=null;var D=zi[g];zi[g++]=null;var G=zi[g];zi[g++]=null;var te=zi[g];if(zi[g++]=null,D!==null&&G!==null){var Oe=D.pending;Oe===null?G.next=G:(G.next=Oe.next,Oe.next=G),D.pending=G}te!==0&&sl(S,G,te)}}function ds(c,g,S,D){zi[bi++]=c,zi[bi++]=g,zi[bi++]=S,zi[bi++]=D,Sa|=D,c.lanes|=D,c=c.alternate,c!==null&&(c.lanes|=D)}function gu(c,g,S,D){return ds(c,g,S,D),Pl(c)}function Lo(c,g){return ds(c,null,null,g),Pl(c)}function sl(c,g,S){c.lanes|=S;var D=c.alternate;D!==null&&(D.lanes|=S);for(var G=!1,te=c.return;te!==null;)te.childLanes|=S,D=te.alternate,D!==null&&(D.childLanes|=S),te.tag===22&&(c=te.stateNode,c===null||c._visibility&1||(G=!0)),c=te,te=te.return;G&&g!==null&&c.tag===3&&(te=c.stateNode,G=31-ke(S),te=te.hiddenUpdates,c=te[G],c===null?te[G]=[g]:c.push(g),g.lane=S|536870912)}function Pl(c){if(50<Mp)throw Mp=0,dv=null,Error(r(185));for(var g=c.return;g!==null;)c=g,g=c.return;return c.tag===3?c.stateNode:null}var Hs={},ls=new WeakMap;function Ga(c,g){if(typeof c=="object"&&c!==null){var S=ls.get(c);return S!==void 0?S:(g={value:c,source:g,stack:Te(g)},ls.set(c,g),g)}return{value:c,source:g,stack:Te(g)}}var $s=[],Rl=0,Lu=null,vu=0,Ps=[],Wl=0,Uc=null,Dl=1,Xl="";function Iu(c,g){$s[Rl++]=vu,$s[Rl++]=Lu,Lu=c,vu=g}function Jh(c,g,S){Ps[Wl++]=Dl,Ps[Wl++]=Xl,Ps[Wl++]=Uc,Uc=c;var D=Dl;c=Xl;var G=32-ke(D)-1;D&=~(1<<G),S+=1;var te=32-ke(g)+G;if(30<te){var Oe=G-G%5;te=(D&(1<<Oe)-1).toString(32),D>>=Oe,G-=Oe,Dl=1<<32-ke(g)+G|S<<G|D,Xl=te+c}else Dl=1<<te|S<<G|D,Xl=c}function nh(c){c.return!==null&&(Iu(c,1),Jh(c,1,0))}function Th(c){for(;c===Lu;)Lu=$s[--Rl],$s[Rl]=null,vu=$s[--Rl],$s[Rl]=null;for(;c===Uc;)Uc=Ps[--Wl],Ps[Wl]=null,Xl=Ps[--Wl],Ps[Wl]=null,Dl=Ps[--Wl],Ps[Wl]=null}var Rs=null,Ho=null,hi=!1,Ws=null,$o=!1,Cf=Error(r(519));function Ju(c){var g=Error(r(418,""));throw Mh(Ga(g,c)),Cf}function Pf(c){var g=c.stateNode,S=c.type,D=c.memoizedProps;switch(g[Er]=c,g[lr]=D,S){case"dialog":da("cancel",g),da("close",g);break;case"iframe":case"object":case"embed":da("load",g);break;case"video":case"audio":for(S=0;S<Am.length;S++)da(Am[S],g);break;case"source":da("error",g);break;case"img":case"image":case"link":da("error",g),da("load",g);break;case"details":da("toggle",g);break;case"input":da("invalid",g),xa(g,D.value,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name,!0),Di(g);break;case"select":da("invalid",g);break;case"textarea":da("invalid",g),St(g,D.value,D.defaultValue,D.children),Di(g)}S=D.children,typeof S!="string"&&typeof S!="number"&&typeof S!="bigint"||g.textContent===""+S||D.suppressHydrationWarning===!0||p1(g.textContent,S)?(D.popover!=null&&(da("beforetoggle",g),da("toggle",g)),D.onScroll!=null&&da("scroll",g),D.onScrollEnd!=null&&da("scrollend",g),D.onClick!=null&&(g.onclick=Oh),g=!0):g=!1,g||Ju(c)}function Ou(c){for(Rs=c.return;Rs;)switch(Rs.tag){case 3:case 27:$o=!0;return;case 5:case 13:$o=!1;return;default:Rs=Rs.return}}function vc(c){if(c!==Rs)return!1;if(!hi)return Ou(c),hi=!0,!1;var g=!1,S;if((S=c.tag!==3&&c.tag!==27)&&((S=c.tag===5)&&(S=c.type,S=!(S!=="form"&&S!=="button")||Dm(c.type,c.memoizedProps)),S=!S),S&&(g=!0),g&&Ho&&Ju(c),Ou(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,g=0;c;){if(c.nodeType===8)if(S=c.data,S==="/$"){if(g===0){Ho=uh(c.nextSibling);break e}g--}else S!=="$"&&S!=="$!"&&S!=="$?"||g++;c=c.nextSibling}Ho=null}}else Ho=Rs?uh(c.stateNode.nextSibling):null;return!0}function yc(){Ho=Rs=null,hi=!1}function Mh(c){Ws===null?Ws=[c]:Ws.push(c)}var Ah=Error(r(460)),bd=Error(r(474)),xd={then:function(){}};function wd(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Ds(){}function Xs(c,g,S){switch(S=c[S],S===void 0?c.push(g):S!==g&&(g.then(Ds,Ds),g=S),g.status){case"fulfilled":return g.value;case"rejected":throw c=g.reason,c===Ah?Error(r(483)):c;default:if(typeof g.status=="string")g.then(Ds,Ds);else{if(c=To,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=g,c.status="pending",c.then(function(D){if(g.status==="pending"){var G=g;G.status="fulfilled",G.value=D}},function(D){if(g.status==="pending"){var G=g;G.status="rejected",G.reason=D}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw c=g.reason,c===Ah?Error(r(483)):c}throw Zl=g,Ah}}var Zl=null;function mp(){if(Zl===null)throw Error(r(459));var c=Zl;return Zl=null,c}var rh=null,yu=0;function ll(c){var g=yu;return yu+=1,rh===null&&(rh=[]),Xs(rh,c,g)}function Qh(c,g){g=g.props.ref,c.ref=g!==void 0?g:null}function Qu(c,g){throw g.$$typeof===o?Error(r(525)):(c=Object.prototype.toString.call(g),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":c)))}function ih(c){var g=c._init;return g(c._payload)}function uo(c){function g(wn,dn){if(c){var Cn=wn.deletions;Cn===null?(wn.deletions=[dn],wn.flags|=16):Cn.push(dn)}}function S(wn,dn){if(!c)return null;for(;dn!==null;)g(wn,dn),dn=dn.sibling;return null}function D(wn){for(var dn=new Map;wn!==null;)wn.key!==null?dn.set(wn.key,wn):dn.set(wn.index,wn),wn=wn.sibling;return dn}function G(wn,dn){return wn=kd(wn,dn),wn.index=0,wn.sibling=null,wn}function te(wn,dn,Cn){return wn.index=Cn,c?(Cn=wn.alternate,Cn!==null?(Cn=Cn.index,Cn<dn?(wn.flags|=33554434,dn):Cn):(wn.flags|=33554434,dn)):(wn.flags|=1048576,dn)}function Oe(wn){return c&&wn.alternate===null&&(wn.flags|=33554434),wn}function st(wn,dn,Cn,rr){return dn===null||dn.tag!==6?(dn=K_(Cn,wn.mode,rr),dn.return=wn,dn):(dn=G(dn,Cn),dn.return=wn,dn)}function Ot(wn,dn,Cn,rr){var qr=Cn.type;return qr===h?tr(wn,dn,Cn.props.children,rr,Cn.key):dn!==null&&(dn.elementType===qr||typeof qr=="object"&&qr!==null&&qr.$$typeof===k&&ih(qr)===dn.type)?(dn=G(dn,Cn.props),Qh(dn,Cn),dn.return=wn,dn):(dn=Ig(Cn.type,Cn.key,Cn.props,null,wn.mode,rr),Qh(dn,Cn),dn.return=wn,dn)}function cn(wn,dn,Cn,rr){return dn===null||dn.tag!==4||dn.stateNode.containerInfo!==Cn.containerInfo||dn.stateNode.implementation!==Cn.implementation?(dn=Sp(Cn,wn.mode,rr),dn.return=wn,dn):(dn=G(dn,Cn.children||[]),dn.return=wn,dn)}function tr(wn,dn,Cn,rr,qr){return dn===null||dn.tag!==7?(dn=Fd(Cn,wn.mode,rr,qr),dn.return=wn,dn):(dn=G(dn,Cn),dn.return=wn,dn)}function yr(wn,dn,Cn){if(typeof dn=="string"&&dn!==""||typeof dn=="number"||typeof dn=="bigint")return dn=K_(""+dn,wn.mode,Cn),dn.return=wn,dn;if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case l:return Cn=Ig(dn.type,dn.key,dn.props,null,wn.mode,Cn),Qh(Cn,dn),Cn.return=wn,Cn;case a:return dn=Sp(dn,wn.mode,Cn),dn.return=wn,dn;case k:var rr=dn._init;return dn=rr(dn._payload),yr(wn,dn,Cn)}if(ve(dn)||V(dn))return dn=Fd(dn,wn.mode,Cn,null),dn.return=wn,dn;if(typeof dn.then=="function")return yr(wn,ll(dn),Cn);if(dn.$$typeof===b)return yr(wn,iv(wn,dn),Cn);Qu(wn,dn)}return null}function Nn(wn,dn,Cn,rr){var qr=dn!==null?dn.key:null;if(typeof Cn=="string"&&Cn!==""||typeof Cn=="number"||typeof Cn=="bigint")return qr!==null?null:st(wn,dn,""+Cn,rr);if(typeof Cn=="object"&&Cn!==null){switch(Cn.$$typeof){case l:return Cn.key===qr?Ot(wn,dn,Cn,rr):null;case a:return Cn.key===qr?cn(wn,dn,Cn,rr):null;case k:return qr=Cn._init,Cn=qr(Cn._payload),Nn(wn,dn,Cn,rr)}if(ve(Cn)||V(Cn))return qr!==null?null:tr(wn,dn,Cn,rr,null);if(typeof Cn.then=="function")return Nn(wn,dn,ll(Cn),rr);if(Cn.$$typeof===b)return Nn(wn,dn,iv(wn,Cn),rr);Qu(wn,Cn)}return null}function Jn(wn,dn,Cn,rr,qr){if(typeof rr=="string"&&rr!==""||typeof rr=="number"||typeof rr=="bigint")return wn=wn.get(Cn)||null,st(dn,wn,""+rr,qr);if(typeof rr=="object"&&rr!==null){switch(rr.$$typeof){case l:return wn=wn.get(rr.key===null?Cn:rr.key)||null,Ot(dn,wn,rr,qr);case a:return wn=wn.get(rr.key===null?Cn:rr.key)||null,cn(dn,wn,rr,qr);case k:var pa=rr._init;return rr=pa(rr._payload),Jn(wn,dn,Cn,rr,qr)}if(ve(rr)||V(rr))return wn=wn.get(Cn)||null,tr(dn,wn,rr,qr,null);if(typeof rr.then=="function")return Jn(wn,dn,Cn,ll(rr),qr);if(rr.$$typeof===b)return Jn(wn,dn,Cn,iv(dn,rr),qr);Qu(dn,rr)}return null}function ai(wn,dn,Cn,rr){for(var qr=null,pa=null,fi=dn,Ci=dn=0,ou=null;fi!==null&&Ci<Cn.length;Ci++){fi.index>Ci?(ou=fi,fi=null):ou=fi.sibling;var Oi=Nn(wn,fi,Cn[Ci],rr);if(Oi===null){fi===null&&(fi=ou);break}c&&fi&&Oi.alternate===null&&g(wn,fi),dn=te(Oi,dn,Ci),pa===null?qr=Oi:pa.sibling=Oi,pa=Oi,fi=ou}if(Ci===Cn.length)return S(wn,fi),hi&&Iu(wn,Ci),qr;if(fi===null){for(;Ci<Cn.length;Ci++)fi=yr(wn,Cn[Ci],rr),fi!==null&&(dn=te(fi,dn,Ci),pa===null?qr=fi:pa.sibling=fi,pa=fi);return hi&&Iu(wn,Ci),qr}for(fi=D(fi);Ci<Cn.length;Ci++)ou=Jn(fi,wn,Ci,Cn[Ci],rr),ou!==null&&(c&&ou.alternate!==null&&fi.delete(ou.key===null?Ci:ou.key),dn=te(ou,dn,Ci),pa===null?qr=ou:pa.sibling=ou,pa=ou);return c&&fi.forEach(function(yl){return g(wn,yl)}),hi&&Iu(wn,Ci),qr}function Hi(wn,dn,Cn,rr){if(Cn==null)throw Error(r(151));for(var qr=null,pa=null,fi=dn,Ci=dn=0,ou=null,Oi=Cn.next();fi!==null&&!Oi.done;Ci++,Oi=Cn.next()){fi.index>Ci?(ou=fi,fi=null):ou=fi.sibling;var yl=Nn(wn,fi,Oi.value,rr);if(yl===null){fi===null&&(fi=ou);break}c&&fi&&yl.alternate===null&&g(wn,fi),dn=te(yl,dn,Ci),pa===null?qr=yl:pa.sibling=yl,pa=yl,fi=ou}if(Oi.done)return S(wn,fi),hi&&Iu(wn,Ci),qr;if(fi===null){for(;!Oi.done;Ci++,Oi=Cn.next())Oi=yr(wn,Oi.value,rr),Oi!==null&&(dn=te(Oi,dn,Ci),pa===null?qr=Oi:pa.sibling=Oi,pa=Oi);return hi&&Iu(wn,Ci),qr}for(fi=D(fi);!Oi.done;Ci++,Oi=Cn.next())Oi=Jn(fi,wn,Ci,Oi.value,rr),Oi!==null&&(c&&Oi.alternate!==null&&fi.delete(Oi.key===null?Ci:Oi.key),dn=te(Oi,dn,Ci),pa===null?qr=Oi:pa.sibling=Oi,pa=Oi);return c&&fi.forEach(function(Dp){return g(wn,Dp)}),hi&&Iu(wn,Ci),qr}function Bs(wn,dn,Cn,rr){if(typeof Cn=="object"&&Cn!==null&&Cn.type===h&&Cn.key===null&&(Cn=Cn.props.children),typeof Cn=="object"&&Cn!==null){switch(Cn.$$typeof){case l:e:{for(var qr=Cn.key;dn!==null;){if(dn.key===qr){if(qr=Cn.type,qr===h){if(dn.tag===7){S(wn,dn.sibling),rr=G(dn,Cn.props.children),rr.return=wn,wn=rr;break e}}else if(dn.elementType===qr||typeof qr=="object"&&qr!==null&&qr.$$typeof===k&&ih(qr)===dn.type){S(wn,dn.sibling),rr=G(dn,Cn.props),Qh(rr,Cn),rr.return=wn,wn=rr;break e}S(wn,dn);break}else g(wn,dn);dn=dn.sibling}Cn.type===h?(rr=Fd(Cn.props.children,wn.mode,rr,Cn.key),rr.return=wn,wn=rr):(rr=Ig(Cn.type,Cn.key,Cn.props,null,wn.mode,rr),Qh(rr,Cn),rr.return=wn,wn=rr)}return Oe(wn);case a:e:{for(qr=Cn.key;dn!==null;){if(dn.key===qr)if(dn.tag===4&&dn.stateNode.containerInfo===Cn.containerInfo&&dn.stateNode.implementation===Cn.implementation){S(wn,dn.sibling),rr=G(dn,Cn.children||[]),rr.return=wn,wn=rr;break e}else{S(wn,dn);break}else g(wn,dn);dn=dn.sibling}rr=Sp(Cn,wn.mode,rr),rr.return=wn,wn=rr}return Oe(wn);case k:return qr=Cn._init,Cn=qr(Cn._payload),Bs(wn,dn,Cn,rr)}if(ve(Cn))return ai(wn,dn,Cn,rr);if(V(Cn)){if(qr=V(Cn),typeof qr!="function")throw Error(r(150));return Cn=qr.call(Cn),Hi(wn,dn,Cn,rr)}if(typeof Cn.then=="function")return Bs(wn,dn,ll(Cn),rr);if(Cn.$$typeof===b)return Bs(wn,dn,iv(wn,Cn),rr);Qu(wn,Cn)}return typeof Cn=="string"&&Cn!==""||typeof Cn=="number"||typeof Cn=="bigint"?(Cn=""+Cn,dn!==null&&dn.tag===6?(S(wn,dn.sibling),rr=G(dn,Cn),rr.return=wn,wn=rr):(S(wn,dn),rr=K_(Cn,wn.mode,rr),rr.return=wn,wn=rr),Oe(wn)):S(wn,dn)}return function(wn,dn,Cn,rr){try{yu=0;var qr=Bs(wn,dn,Cn,rr);return rh=null,qr}catch(fi){if(fi===Ah)throw fi;var pa=qu(29,fi,null,wn.mode);return pa.lanes=rr,pa.return=wn,pa}finally{}}}var Wo=uo(!0),Rf=uo(!1),Ll=Ve(null),Nu=Ve(0);function jc(c,g){c=sf,ht(Nu,c),ht(Ll,g),sf=c|g.baseLanes}function ah(){ht(Nu,sf),ht(Ll,Ll.current)}function Ch(){sf=Nu.current,tt(Ll),tt(Nu)}var ku=Ve(null),Yl=null;function Fu(c){var g=c.alternate;ht(Xo,Xo.current&1),ht(ku,c),Yl===null&&(g===null||Ll.current!==null||g.memoizedState!==null)&&(Yl=c)}function Kl(c){if(c.tag===22){if(ht(Xo,Xo.current),ht(ku,c),Yl===null){var g=c.alternate;g!==null&&g.memoizedState!==null&&(Yl=c)}}else Mr()}function Mr(){ht(Xo,Xo.current),ht(ku,ku.current)}function Jl(c){tt(ku),Yl===c&&(Yl=null),tt(Xo)}var Xo=Ve(0);function Df(c){for(var g=c;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Vc=typeof AbortController<"u"?AbortController:function(){var c=[],g=this.signal={aborted:!1,addEventListener:function(S,D){c.push(D)}};this.abort=function(){g.aborted=!0,c.forEach(function(S){return S()})}},oh=t.unstable_scheduleCallback,Sd=t.unstable_NormalPriority,Jr={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ph(){return{controller:new Vc,data:new Map,refCount:0}}function N(c){c.refCount--,c.refCount===0&&oh(Sd,function(){c.controller.abort()})}var $=null,oe=0,xe=0,ze=null;function Ke(c,g){if($===null){var S=$=[];oe=0,xe=c1(),ze={status:"pending",value:void 0,then:function(D){S.push(D)}}}return oe++,g.then(Je,Je),g}function Je(){if(--oe===0&&$!==null){ze!==null&&(ze.status="fulfilled");var c=$;$=null,xe=0,ze=null;for(var g=0;g<c.length;g++)(0,c[g])()}}function rt(c,g){var S=[],D={status:"pending",value:null,reason:null,then:function(G){S.push(G)}};return c.then(function(){D.status="fulfilled",D.value=g;for(var G=0;G<S.length;G++)(0,S[G])(g)},function(G){for(D.status="rejected",D.reason=G,G=0;G<S.length;G++)(0,S[G])(void 0)}),D}var ot=Z.S;Z.S=function(c,g){typeof g=="object"&&g!==null&&typeof g.then=="function"&&Ke(c,g),ot!==null&&ot(c,g)};var yt=Ve(null);function en(){var c=yt.current;return c!==null?c:To.pooledCache}function bn(c,g){g===null?ht(yt,yt.current):ht(yt,g.pool)}function mn(){var c=en();return c===null?null:{parent:Jr._currentValue,pool:c}}var un=0,Rn=null,Mn=null,Vt=null,on=!1,Yn=!1,Xn=!1,Qn=0,jn=0,Bn=null,ri=0;function br(){throw Error(r(321))}function ua(c,g){if(g===null)return!1;for(var S=0;S<g.length&&S<c.length;S++)if(!bo(c[S],g[S]))return!1;return!0}function Li(c,g,S,D,G,te){return un=te,Rn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Z.H=c===null||c.memoizedState===null?ho:Ka,Xn=!1,te=S(D,G),Xn=!1,Yn&&(te=Ai(g,S,D,G)),ca(c),te}function ca(c){Z.H=Ya;var g=Mn!==null&&Mn.next!==null;if(un=0,Vt=Mn=Rn=null,on=!1,jn=0,Bn=null,g)throw Error(r(300));c===null||Zs||(c=c.dependencies,c!==null&&Vu(c)&&(Zs=!0))}function Ai(c,g,S,D){Rn=c;var G=0;do{if(Yn&&(Bn=null),jn=0,Yn=!1,25<=G)throw Error(r(301));if(G+=1,Vt=Mn=null,c.updateQueue!=null){var te=c.updateQueue;te.lastEffect=null,te.events=null,te.stores=null,te.memoCache!=null&&(te.memoCache.index=0)}Z.H=hl,te=g(S,D)}while(Yn);return te}function eo(){var c=Z.H,g=c.useState()[0];return g=typeof g.then=="function"?ha(g):g,c=c.useState()[0],(Mn!==null?Mn.memoizedState:null)!==c&&(Rn.flags|=1024),g}function Yi(){var c=Qn!==0;return Qn=0,c}function jr(c,g,S){g.updateQueue=c.updateQueue,g.flags&=-2053,c.lanes&=~S}function Ui(c){if(on){for(c=c.memoizedState;c!==null;){var g=c.queue;g!==null&&(g.pending=null),c=c.next}on=!1}un=0,Vt=Mn=Rn=null,Yn=!1,jn=Qn=0,Bn=null}function Xa(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Rn.memoizedState=Vt=c:Vt=Vt.next=c,Vt}function Ii(){if(Mn===null){var c=Rn.alternate;c=c!==null?c.memoizedState:null}else c=Mn.next;var g=Vt===null?Rn.memoizedState:Vt.next;if(g!==null)Vt=g,Mn=c;else{if(c===null)throw Rn.alternate===null?Error(r(467)):Error(r(310));Mn=c,c={memoizedState:Mn.memoizedState,baseState:Mn.baseState,baseQueue:Mn.baseQueue,queue:Mn.queue,next:null},Vt===null?Rn.memoizedState=Vt=c:Vt=Vt.next=c}return Vt}var us;us=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ha(c){var g=jn;return jn+=1,Bn===null&&(Bn=[]),c=Xs(Bn,c,g),g=Rn,(Vt===null?g.memoizedState:Vt.next)===null&&(g=g.alternate,Z.H=g===null||g.memoizedState===null?ho:Ka),c}function xo(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return ha(c);if(c.$$typeof===b)return ru(c)}throw Error(r(438,String(c)))}function Ls(c){var g=null,S=Rn.updateQueue;if(S!==null&&(g=S.memoCache),g==null){var D=Rn.alternate;D!==null&&(D=D.updateQueue,D!==null&&(D=D.memoCache,D!=null&&(g={data:D.data.map(function(G){return G.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),S===null&&(S=us(),Rn.updateQueue=S),S.memoCache=g,S=g.data[g.index],S===void 0)for(S=g.data[g.index]=Array(c),D=0;D<c;D++)S[D]=z;return g.index++,S}function Aa(c,g){return typeof g=="function"?g(c):g}function Eo(c){var g=Ii();return Zo(g,Mn,c)}function Zo(c,g,S){var D=c.queue;if(D===null)throw Error(r(311));D.lastRenderedReducer=S;var G=c.baseQueue,te=D.pending;if(te!==null){if(G!==null){var Oe=G.next;G.next=te.next,te.next=Oe}g.baseQueue=G=te,D.pending=null}if(te=c.baseState,G===null)c.memoizedState=te;else{g=G.next;var st=Oe=null,Ot=null,cn=g,tr=!1;do{var yr=cn.lane&-536870913;if(yr!==cn.lane?(Ma&yr)===yr:(un&yr)===yr){var Nn=cn.revertLane;if(Nn===0)Ot!==null&&(Ot=Ot.next={lane:0,revertLane:0,action:cn.action,hasEagerState:cn.hasEagerState,eagerState:cn.eagerState,next:null}),yr===xe&&(tr=!0);else if((un&Nn)===Nn){cn=cn.next,Nn===xe&&(tr=!0);continue}else yr={lane:0,revertLane:cn.revertLane,action:cn.action,hasEagerState:cn.hasEagerState,eagerState:cn.eagerState,next:null},Ot===null?(st=Ot=yr,Oe=te):Ot=Ot.next=yr,Rn.lanes|=Nn,Bd|=Nn;yr=cn.action,Xn&&S(te,yr),te=cn.hasEagerState?cn.eagerState:S(te,yr)}else Nn={lane:yr,revertLane:cn.revertLane,action:cn.action,hasEagerState:cn.hasEagerState,eagerState:cn.eagerState,next:null},Ot===null?(st=Ot=Nn,Oe=te):Ot=Ot.next=Nn,Rn.lanes|=yr,Bd|=yr;cn=cn.next}while(cn!==null&&cn!==g);if(Ot===null?Oe=te:Ot.next=st,!bo(te,c.memoizedState)&&(Zs=!0,tr&&(S=ze,S!==null)))throw S;c.memoizedState=te,c.baseState=Oe,c.baseQueue=Ot,D.lastRenderedState=te}return G===null&&(D.lanes=0),[c.memoizedState,D.dispatch]}function ul(c){var g=Ii(),S=g.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=c;var D=S.dispatch,G=S.pending,te=g.memoizedState;if(G!==null){S.pending=null;var Oe=G=G.next;do te=c(te,Oe.action),Oe=Oe.next;while(Oe!==G);bo(te,g.memoizedState)||(Zs=!0),g.memoizedState=te,g.baseQueue===null&&(g.baseState=te),S.lastRenderedState=te}return[te,D]}function cl(c,g,S){var D=Rn,G=Ii(),te=hi;if(te){if(S===void 0)throw Error(r(407));S=S()}else S=g();var Oe=!bo((Mn||G).memoizedState,S);if(Oe&&(G.memoizedState=S,Zs=!0),G=G.queue,ft(ec.bind(null,D,G,c),[c]),G.getSnapshot!==g||Oe||Vt!==null&&Vt.memoizedState.tag&1){if(D.flags|=2048,Ae(9,Bu.bind(null,D,G,S,g),{destroy:void 0},null),To===null)throw Error(r(349));te||(un&60)!==0||co(D,g,S)}return S}function co(c,g,S){c.flags|=16384,c={getSnapshot:g,value:S},g=Rn.updateQueue,g===null?(g=us(),Rn.updateQueue=g,g.stores=[c]):(S=g.stores,S===null?g.stores=[c]:S.push(c))}function Bu(c,g,S,D){g.value=S,g.getSnapshot=D,_u(g)&&zu(c)}function ec(c,g,S){return S(function(){_u(g)&&zu(c)})}function _u(c){var g=c.getSnapshot;c=c.value;try{var S=g();return!bo(c,S)}catch{return!0}}function zu(c){var g=Lo(c,2);g!==null&&kl(g,c,2)}function ro(c){var g=Xa();if(typeof c=="function"){var S=c;if(c=S(),Xn){ge(!0);try{S()}finally{ge(!1)}}}return g.memoizedState=g.baseState=c,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:c},g}function Rh(c,g,S,D){return c.baseState=S,Zo(c,Mn,typeof D=="function"?D:Aa)}function Lf(c,g,S,D,G){if(oa(c))throw Error(r(485));if(c=g.action,c!==null){var te={payload:G,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Oe){te.listeners.push(Oe)}};Z.T!==null?S(!0):te.isTransition=!1,D(te),S=g.pending,S===null?(te.next=g.pending=te,R(g,te)):(te.next=S.next,g.pending=S.next=te)}}function R(c,g){var S=g.action,D=g.payload,G=c.state;if(g.isTransition){var te=Z.T,Oe={};Z.T=Oe;try{var st=S(G,D),Ot=Z.S;Ot!==null&&Ot(Oe,st),s(c,g,st)}catch(cn){x(c,g,cn)}finally{Z.T=te}}else try{te=S(G,D),s(c,g,te)}catch(cn){x(c,g,cn)}}function s(c,g,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(D){d(c,g,D)},function(D){return x(c,g,D)}):d(c,g,S)}function d(c,g,S){g.status="fulfilled",g.value=S,E(g),c.state=S,g=c.pending,g!==null&&(S=g.next,S===g?c.pending=null:(S=S.next,g.next=S,R(c,S)))}function x(c,g,S){var D=c.pending;if(c.pending=null,D!==null){D=D.next;do g.status="rejected",g.reason=S,E(g),g=g.next;while(g!==D)}c.action=null}function E(c){c=c.listeners;for(var g=0;g<c.length;g++)(0,c[g])()}function L(c,g){return g}function F(c,g){if(hi){var S=To.formState;if(S!==null){e:{var D=Rn;if(hi){if(Ho){t:{for(var G=Ho,te=$o;G.nodeType!==8;){if(!te){G=null;break t}if(G=uh(G.nextSibling),G===null){G=null;break t}}te=G.data,G=te==="F!"||te==="F"?G:null}if(G){Ho=uh(G.nextSibling),D=G.data==="F!";break e}}Ju(D)}D=!1}D&&(g=S[0])}}return S=Xa(),S.memoizedState=S.baseState=g,D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:L,lastRenderedState:g},S.queue=D,S=za.bind(null,Rn,D),D.dispatch=S,D=ro(!1),te=Ea.bind(null,Rn,!1,D.queue),D=Xa(),G={state:g,dispatch:null,action:c,pending:null},D.queue=G,S=Lf.bind(null,Rn,G,te,S),G.dispatch=S,D.memoizedState=c,[g,S,!1]}function X(c){var g=Ii();return Q(g,Mn,c)}function Q(c,g,S){g=Zo(c,g,L)[0],c=Eo(Aa)[0],g=typeof g=="object"&&g!==null&&typeof g.then=="function"?ha(g):g;var D=Ii(),G=D.queue,te=G.dispatch;return S!==D.memoizedState&&(Rn.flags|=2048,Ae(9,ae.bind(null,G,S),{destroy:void 0},null)),[g,te,c]}function ae(c,g){c.action=g}function be(c){var g=Ii(),S=Mn;if(S!==null)return Q(g,S,c);Ii(),g=g.memoizedState,S=Ii();var D=S.queue.dispatch;return S.memoizedState=c,[g,D,!1]}function Ae(c,g,S,D){return c={tag:c,create:g,inst:S,deps:D,next:null},g=Rn.updateQueue,g===null&&(g=us(),Rn.updateQueue=g),S=g.lastEffect,S===null?g.lastEffect=c.next=c:(D=S.next,S.next=c,c.next=D,g.lastEffect=c),c}function Pe(){return Ii().memoizedState}function qe(c,g,S,D){var G=Xa();Rn.flags|=c,G.memoizedState=Ae(1|g,S,{destroy:void 0},D===void 0?null:D)}function Ze(c,g,S,D){var G=Ii();D=D===void 0?null:D;var te=G.memoizedState.inst;Mn!==null&&D!==null&&ua(D,Mn.memoizedState.deps)?G.memoizedState=Ae(g,S,te,D):(Rn.flags|=c,G.memoizedState=Ae(1|g,S,te,D))}function dt(c,g){qe(8390656,8,c,g)}function ft(c,g){Ze(2048,8,c,g)}function pt(c,g){return Ze(4,2,c,g)}function Tt(c,g){return Ze(4,4,c,g)}function Nt(c,g){if(typeof g=="function"){c=c();var S=g(c);return function(){typeof S=="function"?S():g(null)}}if(g!=null)return c=c(),g.current=c,function(){g.current=null}}function kt(c,g,S){S=S!=null?S.concat([c]):null,Ze(4,4,Nt.bind(null,g,c),S)}function Bt(){}function Wt(c,g){var S=Ii();g=g===void 0?null:g;var D=S.memoizedState;return g!==null&&ua(g,D[1])?D[0]:(S.memoizedState=[c,g],c)}function Gt(c,g){var S=Ii();g=g===void 0?null:g;var D=S.memoizedState;if(g!==null&&ua(g,D[1]))return D[0];if(D=c(),Xn){ge(!0);try{c()}finally{ge(!1)}}return S.memoizedState=[D,g],D}function xn(c,g,S){return S===void 0||(un&1073741824)!==0?c.memoizedState=g:(c.memoizedState=S,c=kg(),Rn.lanes|=c,Bd|=c,S)}function En(c,g,S,D){return bo(S,g)?S:Ll.current!==null?(c=xn(c,S,D),bo(c,g)||(Zs=!0),c):(un&42)===0?(Zs=!0,c.memoizedState=S):(c=kg(),Rn.lanes|=c,Bd|=c,g)}function zn(c,g,S,D,G){var te=le.p;le.p=te!==0&&8>te?te:8;var Oe=Z.T,st={};Z.T=st,Ea(c,!1,g,S);try{var Ot=G(),cn=Z.S;if(cn!==null&&cn(st,Ot),Ot!==null&&typeof Ot=="object"&&typeof Ot.then=="function"){var tr=rt(Ot,D);Ua(c,g,tr,fl(c))}else Ua(c,g,D,fl(c))}catch(yr){Ua(c,g,{then:function(){},status:"rejected",reason:yr},fl())}finally{le.p=te,Z.T=Oe}}function Un(){}function kn(c,g,S,D){if(c.tag!==5)throw Error(r(476));var G=wr(c).queue;zn(c,G,g,ye,S===null?Un:function(){return dr(c),S(D)})}function wr(c){var g=c.memoizedState;if(g!==null)return g;g={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:ye},next:null};var S={};return g.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:S},next:null},c.memoizedState=g,c=c.alternate,c!==null&&(c.memoizedState=g),g}function dr(c){var g=wr(c).next.queue;Ua(c,g,{},fl())}function Kn(){return ru(at)}function Nr(){return Ii().memoizedState}function Fr(){return Ii().memoizedState}function fa(c){for(var g=c.return;g!==null;){switch(g.tag){case 24:case 3:var S=fl();c=Rd(S);var D=af(g,c,S);D!==null&&(kl(D,g,S),vp(D,g,S)),g={cache:Ph()},c.payload=g;return}g=g.return}}function Za(c,g,S){var D=fl();S={lane:D,revertLane:0,action:S,hasEagerState:!1,eagerState:null,next:null},oa(c)?Ia(g,S):(S=gu(c,g,S,D),S!==null&&(kl(S,c,D),ps(S,g,D)))}function za(c,g,S){var D=fl();Ua(c,g,S,D)}function Ua(c,g,S,D){var G={lane:D,revertLane:0,action:S,hasEagerState:!1,eagerState:null,next:null};if(oa(c))Ia(g,G);else{var te=c.alternate;if(c.lanes===0&&(te===null||te.lanes===0)&&(te=g.lastRenderedReducer,te!==null))try{var Oe=g.lastRenderedState,st=te(Oe,S);if(G.hasEagerState=!0,G.eagerState=st,bo(st,Oe))return ds(c,g,G,0),To===null&&La(),!1}catch{}finally{}if(S=gu(c,g,G,D),S!==null)return kl(S,c,D),ps(S,g,D),!0}return!1}function Ea(c,g,S,D){if(D={lane:2,revertLane:c1(),action:D,hasEagerState:!1,eagerState:null,next:null},oa(c)){if(g)throw Error(r(479))}else g=gu(c,S,D,2),g!==null&&kl(g,c,2)}function oa(c){var g=c.alternate;return c===Rn||g!==null&&g===Rn}function Ia(c,g){Yn=on=!0;var S=c.pending;S===null?g.next=g:(g.next=S.next,S.next=g),c.pending=g}function ps(c,g,S){if((S&4194176)!==0){var D=g.lanes;D&=c.pendingLanes,S|=D,g.lanes=S,je(c,S)}}var Ya={readContext:ru,use:xo,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useLayoutEffect:br,useInsertionEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useSyncExternalStore:br,useId:br};Ya.useCacheRefresh=br,Ya.useMemoCache=br,Ya.useHostTransitionStatus=br,Ya.useFormState=br,Ya.useActionState=br,Ya.useOptimistic=br;var ho={readContext:ru,use:xo,useCallback:function(c,g){return Xa().memoizedState=[c,g===void 0?null:g],c},useContext:ru,useEffect:dt,useImperativeHandle:function(c,g,S){S=S!=null?S.concat([c]):null,qe(4194308,4,Nt.bind(null,g,c),S)},useLayoutEffect:function(c,g){return qe(4194308,4,c,g)},useInsertionEffect:function(c,g){qe(4,2,c,g)},useMemo:function(c,g){var S=Xa();g=g===void 0?null:g;var D=c();if(Xn){ge(!0);try{c()}finally{ge(!1)}}return S.memoizedState=[D,g],D},useReducer:function(c,g,S){var D=Xa();if(S!==void 0){var G=S(g);if(Xn){ge(!0);try{S(g)}finally{ge(!1)}}}else G=g;return D.memoizedState=D.baseState=G,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:G},D.queue=c,c=c.dispatch=Za.bind(null,Rn,c),[D.memoizedState,c]},useRef:function(c){var g=Xa();return c={current:c},g.memoizedState=c},useState:function(c){c=ro(c);var g=c.queue,S=za.bind(null,Rn,g);return g.dispatch=S,[c.memoizedState,S]},useDebugValue:Bt,useDeferredValue:function(c,g){var S=Xa();return xn(S,c,g)},useTransition:function(){var c=ro(!1);return c=zn.bind(null,Rn,c.queue,!0,!1),Xa().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,g,S){var D=Rn,G=Xa();if(hi){if(S===void 0)throw Error(r(407));S=S()}else{if(S=g(),To===null)throw Error(r(349));(Ma&60)!==0||co(D,g,S)}G.memoizedState=S;var te={value:S,getSnapshot:g};return G.queue=te,dt(ec.bind(null,D,te,c),[c]),D.flags|=2048,Ae(9,Bu.bind(null,D,te,S,g),{destroy:void 0},null),S},useId:function(){var c=Xa(),g=To.identifierPrefix;if(hi){var S=Xl,D=Dl;S=(D&~(1<<32-ke(D)-1)).toString(32)+S,g=":"+g+"R"+S,S=Qn++,0<S&&(g+="H"+S.toString(32)),g+=":"}else S=ri++,g=":"+g+"r"+S.toString(32)+":";return c.memoizedState=g},useCacheRefresh:function(){return Xa().memoizedState=fa.bind(null,Rn)}};ho.useMemoCache=Ls,ho.useHostTransitionStatus=Kn,ho.useFormState=F,ho.useActionState=F,ho.useOptimistic=function(c){var g=Xa();g.memoizedState=g.baseState=c;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=S,g=Ea.bind(null,Rn,!0,S),S.dispatch=g,[c,g]};var Ka={readContext:ru,use:xo,useCallback:Wt,useContext:ru,useEffect:ft,useImperativeHandle:kt,useInsertionEffect:pt,useLayoutEffect:Tt,useMemo:Gt,useReducer:Eo,useRef:Pe,useState:function(){return Eo(Aa)},useDebugValue:Bt,useDeferredValue:function(c,g){var S=Ii();return En(S,Mn.memoizedState,c,g)},useTransition:function(){var c=Eo(Aa)[0],g=Ii().memoizedState;return[typeof c=="boolean"?c:ha(c),g]},useSyncExternalStore:cl,useId:Nr};Ka.useCacheRefresh=Fr,Ka.useMemoCache=Ls,Ka.useHostTransitionStatus=Kn,Ka.useFormState=X,Ka.useActionState=X,Ka.useOptimistic=function(c,g){var S=Ii();return Rh(S,Mn,c,g)};var hl={readContext:ru,use:xo,useCallback:Wt,useContext:ru,useEffect:ft,useImperativeHandle:kt,useInsertionEffect:pt,useLayoutEffect:Tt,useMemo:Gt,useReducer:ul,useRef:Pe,useState:function(){return ul(Aa)},useDebugValue:Bt,useDeferredValue:function(c,g){var S=Ii();return Mn===null?xn(S,c,g):En(S,Mn.memoizedState,c,g)},useTransition:function(){var c=ul(Aa)[0],g=Ii().memoizedState;return[typeof c=="boolean"?c:ha(c),g]},useSyncExternalStore:cl,useId:Nr};hl.useCacheRefresh=Fr,hl.useMemoCache=Ls,hl.useHostTransitionStatus=Kn,hl.useFormState=be,hl.useActionState=be,hl.useOptimistic=function(c,g){var S=Ii();return Mn!==null?Rh(S,Mn,c,g):(S.baseState=c,[c,S.queue.dispatch])};function Ql(c,g,S,D){g=c.memoizedState,S=S(D,g),S=S==null?g:j({},g,S),c.memoizedState=S,c.lanes===0&&(c.updateQueue.baseState=S)}var cs={isMounted:function(c){return(c=c._reactInternals)?pe(c)===c:!1},enqueueSetState:function(c,g,S){c=c._reactInternals;var D=fl(),G=Rd(D);G.payload=g,S!=null&&(G.callback=S),g=af(c,G,D),g!==null&&(kl(g,c,D),vp(g,c,D))},enqueueReplaceState:function(c,g,S){c=c._reactInternals;var D=fl(),G=Rd(D);G.tag=1,G.payload=g,S!=null&&(G.callback=S),g=af(c,G,D),g!==null&&(kl(g,c,D),vp(g,c,D))},enqueueForceUpdate:function(c,g){c=c._reactInternals;var S=fl(),D=Rd(S);D.tag=2,g!=null&&(D.callback=g),g=af(c,D,S),g!==null&&(kl(g,c,S),vp(g,c,S))}};function hs(c,g,S,D,G,te,Oe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(D,te,Oe):g.prototype&&g.prototype.isPureReactComponent?!Ku(S,D)||!Ku(G,te):!0}function Il(c,g,S,D){c=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,D),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,D),g.state!==c&&cs.enqueueReplaceState(g,g.state,null)}function eu(c,g){var S=g;if("ref"in g){S={};for(var D in g)D!=="ref"&&(S[D]=g[D])}if(c=c.defaultProps){S===g&&(S=j({},S));for(var G in c)S[G]===void 0&&(S[G]=c[G])}return S}var Uu=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function tu(c){Uu(c)}function tc(c){console.error(c)}function nu(c){Uu(c)}function Ol(c,g){try{var S=c.onUncaughtError;S(g.value,{componentStack:g.stack})}catch(D){setTimeout(function(){throw D})}}function io(c,g,S){try{var D=c.onCaughtError;D(S.value,{componentStack:S.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function Ja(c,g,S){return S=Rd(S),S.tag=3,S.payload={element:null},S.callback=function(){Ol(c,g)},S}function Is(c){return c=Rd(c),c.tag=3,c}function Os(c,g,S,D){var G=S.type.getDerivedStateFromError;if(typeof G=="function"){var te=D.value;c.payload=function(){return G(te)},c.callback=function(){io(g,S,D)}}var Oe=S.stateNode;Oe!==null&&typeof Oe.componentDidCatch=="function"&&(c.callback=function(){io(g,S,D),typeof G!="function"&&(zd===null?zd=new Set([this]):zd.add(this));var st=D.stack;this.componentDidCatch(D.value,{componentStack:st!==null?st:""})})}function If(c,g,S,D,G){if(S.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){if(g=S.alternate,g!==null&&Of(g,S,G,!0),S=ku.current,S!==null){switch(S.tag){case 13:return Yl===null?zg():S.alternate===null&&Ns===0&&(Ns=3),S.flags&=-257,S.flags|=65536,S.lanes=G,D===xd?S.flags|=16384:(g=S.updateQueue,g===null?S.updateQueue=new Set([D]):g.add(D),o1(c,D,G)),!1;case 22:return S.flags|=65536,D===xd?S.flags|=16384:(g=S.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([D])},S.updateQueue=g):(S=g.retryQueue,S===null?g.retryQueue=new Set([D]):S.add(D)),o1(c,D,G)),!1}throw Error(r(435,S.tag))}return o1(c,D,G),zg(),!1}if(hi)return g=ku.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=G,D!==Cf&&(c=Error(r(422),{cause:D}),Mh(Ga(c,S)))):(D!==Cf&&(g=Error(r(423),{cause:D}),Mh(Ga(g,S))),c=c.current.alternate,c.flags|=65536,G&=-G,c.lanes|=G,D=Ga(D,S),G=Ja(c.stateNode,D,G),av(c,G),Ns!==4&&(Ns=2)),!1;var te=Error(r(520),{cause:D});if(te=Ga(te,S),Qo===null?Qo=[te]:Qo.push(te),Ns!==4&&(Ns=2),g===null)return!0;D=Ga(D,S),S=g;do{switch(S.tag){case 3:return S.flags|=65536,c=G&-G,S.lanes|=c,c=Ja(S.stateNode,D,c),av(S,c),!1;case 1:if(g=S.type,te=S.stateNode,(S.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(zd===null||!zd.has(te))))return S.flags|=65536,G&=-G,S.lanes|=G,G=Is(G),Os(G,c,S,D),av(S,G),!1}S=S.return}while(S!==null);return!1}var Q0=Error(r(461)),Zs=!1;function Ys(c,g,S,D){g.child=c===null?Rf(g,null,S,D):Wo(g,c.child,S,D)}function _g(c,g,S,D,G){S=S.render;var te=g.ref;if("ref"in D){var Oe={};for(var st in D)st!=="ref"&&(Oe[st]=D[st])}else Oe=D;return Cd(g),D=Li(c,g,S,Oe,te,G),st=Yi(),c!==null&&!Zs?(jr(c,g,G),nf(c,g,G)):(hi&&st&&nh(g),g.flags|=1,Ys(c,g,D,G),g.child)}function ef(c,g,S,D,G){if(c===null){var te=S.type;return typeof te=="function"&&!Lg(te)&&te.defaultProps===void 0&&S.compare===null?(g.tag=15,g.type=te,ju(c,g,te,D,G)):(c=Ig(S.type,null,D,g,g.mode,G),c.ref=g.ref,c.return=g,g.child=c)}if(te=c.child,!tv(c,G)){var Oe=te.memoizedProps;if(S=S.compare,S=S!==null?S:Ku,S(Oe,D)&&c.ref===g.ref)return nf(c,g,G)}return g.flags|=1,c=kd(te,D),c.ref=g.ref,c.return=g,g.child=c}function ju(c,g,S,D,G){if(c!==null){var te=c.memoizedProps;if(Ku(te,D)&&c.ref===g.ref)if(Zs=!1,g.pendingProps=D=te,tv(c,G))(c.flags&131072)!==0&&(Zs=!0);else return g.lanes=c.lanes,nf(c,g,G)}return Ed(c,g,S,D,G)}function hm(c,g,S){var D=g.pendingProps,G=D.children,te=(g.stateNode._pendingVisibility&2)!==0,Oe=c!==null?c.memoizedState:null;if(tf(c,g),D.mode==="hidden"||te){if((g.flags&128)!==0){if(D=Oe!==null?Oe.baseLanes|S:S,c!==null){for(G=g.child=c.child,te=0;G!==null;)te=te|G.lanes|G.childLanes,G=G.sibling;g.childLanes=te&~D}else g.childLanes=0,g.child=null;return bg(c,g,D,S)}if((S&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},c!==null&&bn(g,Oe!==null?Oe.cachePool:null),Oe!==null?jc(g,Oe):ah(),Kl(g);else return g.lanes=g.childLanes=536870912,bg(c,g,Oe!==null?Oe.baseLanes|S:S,S)}else Oe!==null?(bn(g,Oe.cachePool),jc(g,Oe),Mr(),g.memoizedState=null):(c!==null&&bn(g,null),ah(),Mr());return Ys(c,g,G,S),g.child}function bg(c,g,S,D){var G=en();return G=G===null?null:{parent:Jr._currentValue,pool:G},g.memoizedState={baseLanes:S,cachePool:G},c!==null&&bn(g,null),ah(),Kl(g),c!==null&&Of(c,g,D,!0),null}function tf(c,g){var S=g.ref;if(S===null)c!==null&&c.ref!==null&&(g.flags|=2097664);else{if(typeof S!="function"&&typeof S!="object")throw Error(r(284));(c===null||c.ref!==S)&&(g.flags|=2097664)}}function Ed(c,g,S,D,G){return Cd(g),S=Li(c,g,S,D,void 0,G),D=Yi(),c!==null&&!Zs?(jr(c,g,G),nf(c,g,G)):(hi&&D&&nh(g),g.flags|=1,Ys(c,g,S,G),g.child)}function xg(c,g,S,D,G,te){return Cd(g),g.updateQueue=null,S=Ai(g,D,S,G),ca(c),D=Yi(),c!==null&&!Zs?(jr(c,g,te),nf(c,g,te)):(hi&&D&&nh(g),g.flags|=1,Ys(c,g,S,te),g.child)}function gp(c,g,S,D,G){if(Cd(g),g.stateNode===null){var te=Hs,Oe=S.contextType;typeof Oe=="object"&&Oe!==null&&(te=ru(Oe)),te=new S(D,te),g.memoizedState=te.state!==null&&te.state!==void 0?te.state:null,te.updater=cs,g.stateNode=te,te._reactInternals=g,te=g.stateNode,te.props=D,te.state=g.memoizedState,te.refs={},U_(g),Oe=S.contextType,te.context=typeof Oe=="object"&&Oe!==null?ru(Oe):Hs,te.state=g.memoizedState,Oe=S.getDerivedStateFromProps,typeof Oe=="function"&&(Ql(g,S,Oe,D),te.state=g.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof te.getSnapshotBeforeUpdate=="function"||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(Oe=te.state,typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount(),Oe!==te.state&&cs.enqueueReplaceState(te,te.state,null),Mg(g,D,te,G),kf(),te.state=g.memoizedState),typeof te.componentDidMount=="function"&&(g.flags|=4194308),D=!0}else if(c===null){te=g.stateNode;var st=g.memoizedProps,Ot=eu(S,st);te.props=Ot;var cn=te.context,tr=S.contextType;Oe=Hs,typeof tr=="object"&&tr!==null&&(Oe=ru(tr));var yr=S.getDerivedStateFromProps;tr=typeof yr=="function"||typeof te.getSnapshotBeforeUpdate=="function",st=g.pendingProps!==st,tr||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(st||cn!==Oe)&&Il(g,te,D,Oe),Pd=!1;var Nn=g.memoizedState;te.state=Nn,Mg(g,D,te,G),kf(),cn=g.memoizedState,st||Nn!==cn||Pd?(typeof yr=="function"&&(Ql(g,S,yr,D),cn=g.memoizedState),(Ot=Pd||hs(g,S,Ot,D,Nn,cn,Oe))?(tr||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(g.flags|=4194308)):(typeof te.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=D,g.memoizedState=cn),te.props=D,te.state=cn,te.context=Oe,D=Ot):(typeof te.componentDidMount=="function"&&(g.flags|=4194308),D=!1)}else{te=g.stateNode,j_(c,g),Oe=g.memoizedProps,tr=eu(S,Oe),te.props=tr,yr=g.pendingProps,Nn=te.context,cn=S.contextType,Ot=Hs,typeof cn=="object"&&cn!==null&&(Ot=ru(cn)),st=S.getDerivedStateFromProps,(cn=typeof st=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(Oe!==yr||Nn!==Ot)&&Il(g,te,D,Ot),Pd=!1,Nn=g.memoizedState,te.state=Nn,Mg(g,D,te,G),kf();var Jn=g.memoizedState;Oe!==yr||Nn!==Jn||Pd||c!==null&&c.dependencies!==null&&Vu(c.dependencies)?(typeof st=="function"&&(Ql(g,S,st,D),Jn=g.memoizedState),(tr=Pd||hs(g,S,tr,D,Nn,Jn,Ot)||c!==null&&c.dependencies!==null&&Vu(c.dependencies))?(cn||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(D,Jn,Ot),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(D,Jn,Ot)),typeof te.componentDidUpdate=="function"&&(g.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof te.componentDidUpdate!="function"||Oe===c.memoizedProps&&Nn===c.memoizedState||(g.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||Oe===c.memoizedProps&&Nn===c.memoizedState||(g.flags|=1024),g.memoizedProps=D,g.memoizedState=Jn),te.props=D,te.state=Jn,te.context=Ot,D=tr):(typeof te.componentDidUpdate!="function"||Oe===c.memoizedProps&&Nn===c.memoizedState||(g.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||Oe===c.memoizedProps&&Nn===c.memoizedState||(g.flags|=1024),D=!1)}return te=D,tf(c,g),D=(g.flags&128)!==0,te||D?(te=g.stateNode,S=D&&typeof S.getDerivedStateFromError!="function"?null:te.render(),g.flags|=1,c!==null&&D?(g.child=Wo(g,c.child,null,G),g.child=Wo(g,null,S,G)):Ys(c,g,S,G),g.memoizedState=te.state,c=g.child):c=nf(c,g,G),c}function bx(c,g,S,D){return yc(),g.flags|=256,Ys(c,g,S,D),g.child}var wg={dehydrated:null,treeContext:null,retryLane:0};function k_(c){return{baseLanes:c,cachePool:mn()}}function Sg(c,g,S){return c=c!==null?c.childLanes&~S:0,g&&(c|=bc),c}function F_(c,g,S){var D=g.pendingProps,G=!1,te=(g.flags&128)!==0,Oe;if((Oe=te)||(Oe=c!==null&&c.memoizedState===null?!1:(Xo.current&2)!==0),Oe&&(G=!0,g.flags&=-129),Oe=(g.flags&32)!==0,g.flags&=-33,c===null){if(hi){if(G?Fu(g):Mr(),hi){var st=Ho,Ot;if(Ot=st){e:{for(Ot=st,st=$o;Ot.nodeType!==8;){if(!st){st=null;break e}if(Ot=uh(Ot.nextSibling),Ot===null){st=null;break e}}st=Ot}st!==null?(g.memoizedState={dehydrated:st,treeContext:Uc!==null?{id:Dl,overflow:Xl}:null,retryLane:536870912},Ot=qu(18,null,null,0),Ot.stateNode=st,Ot.return=g,g.child=Ot,Rs=g,Ho=null,Ot=!0):Ot=!1}Ot||Ju(g)}if(st=g.memoizedState,st!==null&&(st=st.dehydrated,st!==null))return st.data==="$!"?g.lanes=16:g.lanes=536870912,null;Jl(g)}return st=D.children,D=D.fallback,G?(Mr(),G=g.mode,st=Td({mode:"hidden",children:st},G),D=Fd(D,G,S,null),st.return=g,D.return=g,st.sibling=D,g.child=st,G=g.child,G.memoizedState=k_(S),G.childLanes=Sg(c,Oe,S),g.memoizedState=wg,D):(Fu(g),ev(g,st))}if(Ot=c.memoizedState,Ot!==null&&(st=Ot.dehydrated,st!==null)){if(te)g.flags&256?(Fu(g),g.flags&=-257,g=B_(c,g,S)):g.memoizedState!==null?(Mr(),g.child=c.child,g.flags|=128,g=null):(Mr(),G=D.fallback,st=g.mode,D=Td({mode:"visible",children:D.children},st),G=Fd(G,st,S,null),G.flags|=2,D.return=g,G.return=g,D.sibling=G,g.child=D,Wo(g,c.child,null,S),D=g.child,D.memoizedState=k_(S),D.childLanes=Sg(c,Oe,S),g.memoizedState=wg,g=G);else if(Fu(g),st.data==="$!"){if(Oe=st.nextSibling&&st.nextSibling.dataset,Oe)var cn=Oe.dgst;Oe=cn,D=Error(r(419)),D.stack="",D.digest=Oe,Mh({value:D,source:null,stack:null}),g=B_(c,g,S)}else if(Zs||Of(c,g,S,!1),Oe=(S&c.childLanes)!==0,Zs||Oe){if(Oe=To,Oe!==null){if(D=S&-S,(D&42)!==0)D=1;else switch(D){case 2:D=1;break;case 8:D=4;break;case 32:D=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:D=64;break;case 268435456:D=134217728;break;default:D=0}if(D=(D&(Oe.suspendedLanes|S))!==0?0:D,D!==0&&D!==Ot.retryLane)throw Ot.retryLane=D,Lo(c,D),kl(Oe,c,D),Q0}st.data==="$?"||zg(),g=B_(c,g,S)}else st.data==="$?"?(g.flags|=128,g.child=c.child,g=BE.bind(null,c),st._reactRetry=g,g=null):(c=Ot.treeContext,Ho=uh(st.nextSibling),Rs=g,hi=!0,Ws=null,$o=!1,c!==null&&(Ps[Wl++]=Dl,Ps[Wl++]=Xl,Ps[Wl++]=Uc,Dl=c.id,Xl=c.overflow,Uc=g),g=ev(g,D.children),g.flags|=4096);return g}return G?(Mr(),G=D.fallback,st=g.mode,Ot=c.child,cn=Ot.sibling,D=kd(Ot,{mode:"hidden",children:D.children}),D.subtreeFlags=Ot.subtreeFlags&31457280,cn!==null?G=kd(cn,G):(G=Fd(G,st,S,null),G.flags|=2),G.return=g,D.return=g,D.sibling=G,g.child=D,D=G,G=g.child,st=c.child.memoizedState,st===null?st=k_(S):(Ot=st.cachePool,Ot!==null?(cn=Jr._currentValue,Ot=Ot.parent!==cn?{parent:cn,pool:cn}:Ot):Ot=mn(),st={baseLanes:st.baseLanes|S,cachePool:Ot}),G.memoizedState=st,G.childLanes=Sg(c,Oe,S),g.memoizedState=wg,D):(Fu(g),S=c.child,c=S.sibling,S=kd(S,{mode:"visible",children:D.children}),S.return=g,S.sibling=null,c!==null&&(Oe=g.deletions,Oe===null?(g.deletions=[c],g.flags|=16):Oe.push(c)),g.child=S,g.memoizedState=null,S)}function ev(c,g){return g=Td({mode:"visible",children:g},c.mode),g.return=c,c.child=g}function Td(c,g){return Rx(c,g,0,null)}function B_(c,g,S){return Wo(g,c.child,null,S),c=ev(g,g.pendingProps.children),c.flags|=2,g.memoizedState=null,c}function fm(c,g,S){c.lanes|=g;var D=c.alternate;D!==null&&(D.lanes|=g),rv(c.return,g,S)}function dm(c,g,S,D,G){var te=c.memoizedState;te===null?c.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:D,tail:S,tailMode:G}:(te.isBackwards=g,te.rendering=null,te.renderingStartTime=0,te.last=D,te.tail=S,te.tailMode=G)}function Eg(c,g,S){var D=g.pendingProps,G=D.revealOrder,te=D.tail;if(Ys(c,g,D.children,S),D=Xo.current,(D&2)!==0)D=D&1|2,g.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=g.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&fm(c,S,g);else if(c.tag===19)fm(c,S,g);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===g)break e;for(;c.sibling===null;){if(c.return===null||c.return===g)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}D&=1}switch(ht(Xo,D),G){case"forwards":for(S=g.child,G=null;S!==null;)c=S.alternate,c!==null&&Df(c)===null&&(G=S),S=S.sibling;S=G,S===null?(G=g.child,g.child=null):(G=S.sibling,S.sibling=null),dm(g,!1,G,S,te);break;case"backwards":for(S=null,G=g.child,g.child=null;G!==null;){if(c=G.alternate,c!==null&&Df(c)===null){g.child=G;break}c=G.sibling,G.sibling=S,S=G,G=c}dm(g,!0,S,null,te);break;case"together":dm(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function nf(c,g,S){if(c!==null&&(g.dependencies=c.dependencies),Bd|=g.lanes,(S&g.childLanes)===0)if(c!==null){if(Of(c,g,S,!1),(S&g.childLanes)===0)return null}else return null;if(c!==null&&g.child!==c.child)throw Error(r(153));if(g.child!==null){for(c=g.child,S=kd(c,c.pendingProps),g.child=S,S.return=g;c.sibling!==null;)c=c.sibling,S=S.sibling=kd(c,c.pendingProps),S.return=g;S.sibling=null}return g.child}function tv(c,g){return(c.lanes&g)!==0?!0:(c=c.dependencies,!!(c!==null&&Vu(c)))}function DE(c,g,S){switch(g.tag){case 3:Ct(g,g.stateNode.containerInfo),Ad(g,Jr,c.memoizedState.cache),yc();break;case 27:case 5:tn(g);break;case 4:Ct(g,g.stateNode.containerInfo);break;case 10:Ad(g,g.type,g.memoizedProps.value);break;case 13:var D=g.memoizedState;if(D!==null)return D.dehydrated!==null?(Fu(g),g.flags|=128,null):(S&g.child.childLanes)!==0?F_(c,g,S):(Fu(g),c=nf(c,g,S),c!==null?c.sibling:null);Fu(g);break;case 19:var G=(c.flags&128)!==0;if(D=(S&g.childLanes)!==0,D||(Of(c,g,S,!1),D=(S&g.childLanes)!==0),G){if(D)return Eg(c,g,S);g.flags|=128}if(G=g.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),ht(Xo,Xo.current),D)break;return null;case 22:case 23:return g.lanes=0,hm(c,g,S);case 24:Ad(g,Jr,c.memoizedState.cache)}return nf(c,g,S)}function xx(c,g,S){if(c!==null)if(c.memoizedProps!==g.pendingProps)Zs=!0;else{if(!tv(c,S)&&(g.flags&128)===0)return Zs=!1,DE(c,g,S);Zs=(c.flags&131072)!==0}else Zs=!1,hi&&(g.flags&1048576)!==0&&Jh(g,vu,g.index);switch(g.lanes=0,g.tag){case 16:e:{c=g.pendingProps;var D=g.elementType,G=D._init;if(D=G(D._payload),g.type=D,typeof D=="function")Lg(D)?(c=eu(D,c),g.tag=1,g=gp(null,g,D,c,S)):(g.tag=0,g=Ed(null,g,D,c,S));else{if(D!=null){if(G=D.$$typeof,G===A){g.tag=11,g=_g(null,g,D,c,S);break e}else if(G===C){g.tag=14,g=ef(null,g,D,c,S);break e}}throw g=Y(D)||D,Error(r(306,g,""))}}return g;case 0:return Ed(c,g,g.type,g.pendingProps,S);case 1:return D=g.type,G=eu(D,g.pendingProps),gp(c,g,D,G,S);case 3:e:{if(Ct(g,g.stateNode.containerInfo),c===null)throw Error(r(387));var te=g.pendingProps;G=g.memoizedState,D=G.element,j_(c,g),Mg(g,te,null,S);var Oe=g.memoizedState;if(te=Oe.cache,Ad(g,Jr,te),te!==G.cache&&Tg(g,[Jr],S,!0),kf(),te=Oe.element,G.isDehydrated)if(G={element:te,isDehydrated:!1,cache:Oe.cache},g.updateQueue.baseState=G,g.memoizedState=G,g.flags&256){g=bx(c,g,te,S);break e}else if(te!==D){D=Ga(Error(r(424)),g),Mh(D),g=bx(c,g,te,S);break e}else for(Ho=uh(g.stateNode.containerInfo.firstChild),Rs=g,hi=!0,Ws=null,$o=!0,S=Rf(g,null,te,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(yc(),te===D){g=nf(c,g,S);break e}Ys(c,g,te,S)}g=g.child}return g;case 26:return tf(c,g),c===null?(S=Lv(g.type,null,g.pendingProps,null))?g.memoizedState=S:hi||(S=g.type,c=g.pendingProps,D=Gg($t.current).createElement(S),D[Er]=g,D[lr]=c,iu(D,S,c),_n(D),g.stateNode=D):g.memoizedState=Lv(g.type,c.memoizedProps,g.pendingProps,c.memoizedState),null;case 27:return tn(g),c===null&&hi&&(D=g.stateNode=Rv(g.type,g.pendingProps,$t.current),Rs=g,$o=!0,Ho=uh(D.firstChild)),D=g.pendingProps.children,c!==null||hi?Ys(c,g,D,S):g.child=Wo(g,null,D,S),tf(c,g),g.child;case 5:return c===null&&hi&&((G=D=Ho)&&(D=Gd(D,g.type,g.pendingProps,$o),D!==null?(g.stateNode=D,Rs=g,Ho=uh(D.firstChild),$o=!1,G=!0):G=!1),G||Ju(g)),tn(g),G=g.type,te=g.pendingProps,Oe=c!==null?c.memoizedProps:null,D=te.children,Dm(G,te)?D=null:Oe!==null&&Dm(G,Oe)&&(g.flags|=32),g.memoizedState!==null&&(G=Li(c,g,eo,null,null,S),at._currentValue=G),tf(c,g),Ys(c,g,D,S),g.child;case 6:return c===null&&hi&&((c=S=Ho)&&(S=y1(S,g.pendingProps,$o),S!==null?(g.stateNode=S,Rs=g,Ho=null,c=!0):c=!1),c||Ju(g)),null;case 13:return F_(c,g,S);case 4:return Ct(g,g.stateNode.containerInfo),D=g.pendingProps,c===null?g.child=Wo(g,null,D,S):Ys(c,g,D,S),g.child;case 11:return _g(c,g,g.type,g.pendingProps,S);case 7:return Ys(c,g,g.pendingProps,S),g.child;case 8:return Ys(c,g,g.pendingProps.children,S),g.child;case 12:return Ys(c,g,g.pendingProps.children,S),g.child;case 10:return D=g.pendingProps,Ad(g,g.type,D.value),Ys(c,g,D.children,S),g.child;case 9:return G=g.type._context,D=g.pendingProps.children,Cd(g),G=ru(G),D=D(G),g.flags|=1,Ys(c,g,D,S),g.child;case 14:return ef(c,g,g.type,g.pendingProps,S);case 15:return ju(c,g,g.type,g.pendingProps,S);case 19:return Eg(c,g,S);case 22:return hm(c,g,S);case 24:return Cd(g),D=ru(Jr),c===null?(G=en(),G===null&&(G=To,te=Ph(),G.pooledCache=te,te.refCount++,te!==null&&(G.pooledCacheLanes|=S),G=te),g.memoizedState={parent:D,cache:G},U_(g),Ad(g,Jr,G)):((c.lanes&S)!==0&&(j_(c,g),Mg(g,null,null,S),kf()),G=c.memoizedState,te=g.memoizedState,G.parent!==D?(G={parent:D,cache:D},g.memoizedState=G,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=G),Ad(g,Jr,D)):(D=te.cache,Ad(g,Jr,D),D!==G.cache&&Tg(g,[Jr],S,!0))),Ys(c,g,g.pendingProps.children,S),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}var nv=Ve(null),Md=null,rf=null;function Ad(c,g,S){ht(nv,g._currentValue),g._currentValue=S}function Dh(c){c._currentValue=nv.current,tt(nv)}function rv(c,g,S){for(;c!==null;){var D=c.alternate;if((c.childLanes&g)!==g?(c.childLanes|=g,D!==null&&(D.childLanes|=g)):D!==null&&(D.childLanes&g)!==g&&(D.childLanes|=g),c===S)break;c=c.return}}function Tg(c,g,S,D){var G=c.child;for(G!==null&&(G.return=c);G!==null;){var te=G.dependencies;if(te!==null){var Oe=G.child;te=te.firstContext;e:for(;te!==null;){var st=te;te=G;for(var Ot=0;Ot<g.length;Ot++)if(st.context===g[Ot]){te.lanes|=S,st=te.alternate,st!==null&&(st.lanes|=S),rv(te.return,S,c),D||(Oe=null);break e}te=st.next}}else if(G.tag===18){if(Oe=G.return,Oe===null)throw Error(r(341));Oe.lanes|=S,te=Oe.alternate,te!==null&&(te.lanes|=S),rv(Oe,S,c),Oe=null}else Oe=G.child;if(Oe!==null)Oe.return=G;else for(Oe=G;Oe!==null;){if(Oe===c){Oe=null;break}if(G=Oe.sibling,G!==null){G.return=Oe.return,Oe=G;break}Oe=Oe.return}G=Oe}}function Of(c,g,S,D){c=null;for(var G=g,te=!1;G!==null;){if(!te){if((G.flags&524288)!==0)te=!0;else if((G.flags&262144)!==0)break}if(G.tag===10){var Oe=G.alternate;if(Oe===null)throw Error(r(387));if(Oe=Oe.memoizedProps,Oe!==null){var st=G.type;bo(G.pendingProps.value,Oe.value)||(c!==null?c.push(st):c=[st])}}else if(G===He.current){if(Oe=G.alternate,Oe===null)throw Error(r(387));Oe.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(c!==null?c.push(at):c=[at])}G=G.return}c!==null&&Tg(g,c,S,D),g.flags|=262144}function Vu(c){for(c=c.firstContext;c!==null;){if(!bo(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Cd(c){Md=c,rf=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function ru(c){return z_(Md,c)}function iv(c,g){return Md===null&&Cd(c),z_(c,g)}function z_(c,g){var S=g._currentValue;if(g={context:g,memoizedValue:S,next:null},rf===null){if(c===null)throw Error(r(308));rf=g,c.dependencies={lanes:0,firstContext:g},c.flags|=524288}else rf=rf.next=g;return S}var Pd=!1;function U_(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function j_(c,g){c=c.updateQueue,g.updateQueue===c&&(g.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Rd(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function af(c,g,S){var D=c.updateQueue;if(D===null)return null;if(D=D.shared,(fs&2)!==0){var G=D.pending;return G===null?g.next=g:(g.next=G.next,G.next=g),D.pending=g,g=Pl(c),sl(c,null,S),g}return ds(c,D,g,S),Pl(c)}function vp(c,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194176)!==0)){var D=g.lanes;D&=c.pendingLanes,S|=D,g.lanes=S,je(c,S)}}function av(c,g){var S=c.updateQueue,D=c.alternate;if(D!==null&&(D=D.updateQueue,S===D)){var G=null,te=null;if(S=S.firstBaseUpdate,S!==null){do{var Oe={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};te===null?G=te=Oe:te=te.next=Oe,S=S.next}while(S!==null);te===null?G=te=g:te=te.next=g}else G=te=g;S={baseState:D.baseState,firstBaseUpdate:G,lastBaseUpdate:te,shared:D.shared,callbacks:D.callbacks},c.updateQueue=S;return}c=S.lastBaseUpdate,c===null?S.firstBaseUpdate=g:c.next=g,S.lastBaseUpdate=g}var Nf=!1;function kf(){if(Nf){var c=ze;if(c!==null)throw c}}function Mg(c,g,S,D){Nf=!1;var G=c.updateQueue;Pd=!1;var te=G.firstBaseUpdate,Oe=G.lastBaseUpdate,st=G.shared.pending;if(st!==null){G.shared.pending=null;var Ot=st,cn=Ot.next;Ot.next=null,Oe===null?te=cn:Oe.next=cn,Oe=Ot;var tr=c.alternate;tr!==null&&(tr=tr.updateQueue,st=tr.lastBaseUpdate,st!==Oe&&(st===null?tr.firstBaseUpdate=cn:st.next=cn,tr.lastBaseUpdate=Ot))}if(te!==null){var yr=G.baseState;Oe=0,tr=cn=Ot=null,st=te;do{var Nn=st.lane&-536870913,Jn=Nn!==st.lane;if(Jn?(Ma&Nn)===Nn:(D&Nn)===Nn){Nn!==0&&Nn===xe&&(Nf=!0),tr!==null&&(tr=tr.next={lane:0,tag:st.tag,payload:st.payload,callback:null,next:null});e:{var ai=c,Hi=st;Nn=g;var Bs=S;switch(Hi.tag){case 1:if(ai=Hi.payload,typeof ai=="function"){yr=ai.call(Bs,yr,Nn);break e}yr=ai;break e;case 3:ai.flags=ai.flags&-65537|128;case 0:if(ai=Hi.payload,Nn=typeof ai=="function"?ai.call(Bs,yr,Nn):ai,Nn==null)break e;yr=j({},yr,Nn);break e;case 2:Pd=!0}}Nn=st.callback,Nn!==null&&(c.flags|=64,Jn&&(c.flags|=8192),Jn=G.callbacks,Jn===null?G.callbacks=[Nn]:Jn.push(Nn))}else Jn={lane:Nn,tag:st.tag,payload:st.payload,callback:st.callback,next:null},tr===null?(cn=tr=Jn,Ot=yr):tr=tr.next=Jn,Oe|=Nn;if(st=st.next,st===null){if(st=G.shared.pending,st===null)break;Jn=st,st=Jn.next,Jn.next=null,G.lastBaseUpdate=Jn,G.shared.pending=null}}while(!0);tr===null&&(Ot=yr),G.baseState=Ot,G.firstBaseUpdate=cn,G.lastBaseUpdate=tr,te===null&&(G.shared.lanes=0),Bd|=Oe,c.lanes=Oe,c.memoizedState=yr}}function wx(c,g){if(typeof c!="function")throw Error(r(191,c));c.call(g)}function Sx(c,g){var S=c.callbacks;if(S!==null)for(c.callbacks=null,c=0;c<S.length;c++)wx(S[c],g)}function Ag(c,g){try{var S=g.updateQueue,D=S!==null?S.lastEffect:null;if(D!==null){var G=D.next;S=G;do{if((S.tag&c)===c){D=void 0;var te=S.create,Oe=S.inst;D=te(),Oe.destroy=D}S=S.next}while(S!==G)}}catch(st){Mo(g,g.return,st)}}function Dd(c,g,S){try{var D=g.updateQueue,G=D!==null?D.lastEffect:null;if(G!==null){var te=G.next;D=te;do{if((D.tag&c)===c){var Oe=D.inst,st=Oe.destroy;if(st!==void 0){Oe.destroy=void 0,G=g;var Ot=S;try{st()}catch(cn){Mo(G,Ot,cn)}}}D=D.next}while(D!==te)}}catch(cn){Mo(g,g.return,cn)}}function Ex(c){var g=c.updateQueue;if(g!==null){var S=c.stateNode;try{Sx(g,S)}catch(D){Mo(c,c.return,D)}}}function Tx(c,g,S){S.props=eu(c.type,c.memoizedProps),S.state=c.memoizedState;try{S.componentWillUnmount()}catch(D){Mo(c,g,D)}}function Ff(c,g){try{var S=c.ref;if(S!==null){var D=c.stateNode;switch(c.tag){case 26:case 27:case 5:var G=D;break;default:G=D}typeof S=="function"?c.refCleanup=S(G):S.current=G}}catch(te){Mo(c,g,te)}}function Gc(c,g){var S=c.ref,D=c.refCleanup;if(S!==null)if(typeof D=="function")try{D()}catch(G){Mo(c,g,G)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(G){Mo(c,g,G)}else S.current=null}function V_(c){var g=c.type,S=c.memoizedProps,D=c.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":S.autoFocus&&D.focus();break e;case"img":S.src?D.src=S.src:S.srcSet&&(D.srcset=S.srcSet)}}catch(G){Mo(c,c.return,G)}}function pm(c,g,S){try{var D=c.stateNode;qx(D,c.type,S,g),D[lr]=g}catch(G){Mo(c,c.return,G)}}function Mx(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27||c.tag===4}function Yo(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Mx(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==27&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ld(c,g,S){var D=c.tag;if(D===5||D===6)c=c.stateNode,g?S.nodeType===8?S.parentNode.insertBefore(c,g):S.insertBefore(c,g):(S.nodeType===8?(g=S.parentNode,g.insertBefore(c,S)):(g=S,g.appendChild(c)),S=S._reactRootContainer,S!=null||g.onclick!==null||(g.onclick=Oh));else if(D!==4&&D!==27&&(c=c.child,c!==null))for(Ld(c,g,S),c=c.sibling;c!==null;)Ld(c,g,S),c=c.sibling}function Cg(c,g,S){var D=c.tag;if(D===5||D===6)c=c.stateNode,g?S.insertBefore(c,g):S.appendChild(c);else if(D!==4&&D!==27&&(c=c.child,c!==null))for(Cg(c,g,S),c=c.sibling;c!==null;)Cg(c,g,S),c=c.sibling}var sh=!1,Ko=!1,yp=!1,G_=typeof WeakSet=="function"?WeakSet:Set,Nl=null,mm=!1;function q_(c,g){if(c=c.containerInfo,m1=pr,c=_r(c),Dr(c)){if("selectionStart"in c)var S={start:c.selectionStart,end:c.selectionEnd};else e:{S=(S=c.ownerDocument)&&S.defaultView||window;var D=S.getSelection&&S.getSelection();if(D&&D.rangeCount!==0){S=D.anchorNode;var G=D.anchorOffset,te=D.focusNode;D=D.focusOffset;try{S.nodeType,te.nodeType}catch{S=null;break e}var Oe=0,st=-1,Ot=-1,cn=0,tr=0,yr=c,Nn=null;t:for(;;){for(var Jn;yr!==S||G!==0&&yr.nodeType!==3||(st=Oe+G),yr!==te||D!==0&&yr.nodeType!==3||(Ot=Oe+D),yr.nodeType===3&&(Oe+=yr.nodeValue.length),(Jn=yr.firstChild)!==null;)Nn=yr,yr=Jn;for(;;){if(yr===c)break t;if(Nn===S&&++cn===G&&(st=Oe),Nn===te&&++tr===D&&(Ot=Oe),(Jn=yr.nextSibling)!==null)break;yr=Nn,Nn=yr.parentNode}yr=Jn}S=st===-1||Ot===-1?null:{start:st,end:Ot}}else S=null}S=S||{start:0,end:0}}else S=null;for(g1={focusedElem:c,selectionRange:S},pr=!1,Nl=g;Nl!==null;)if(g=Nl,c=g.child,(g.subtreeFlags&1028)!==0&&c!==null)c.return=g,Nl=c;else for(;Nl!==null;){switch(g=Nl,te=g.alternate,c=g.flags,g.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&te!==null){c=void 0,S=g,G=te.memoizedProps,te=te.memoizedState,D=S.stateNode;try{var ai=eu(S.type,G,S.elementType===S.type);c=D.getSnapshotBeforeUpdate(ai,te),D.__reactInternalSnapshotBeforeUpdate=c}catch(Hi){Mo(S,S.return,Hi)}}break;case 3:if((c&1024)!==0){if(c=g.stateNode.containerInfo,S=c.nodeType,S===9)dl(c);else if(S===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":dl(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=g.sibling,c!==null){c.return=g.return,Nl=c;break}Nl=g.return}return ai=mm,mm=!1,ai}function _p(c,g,S){var D=S.flags;switch(S.tag){case 0:case 11:case 15:zf(c,S),D&4&&Ag(5,S);break;case 1:if(zf(c,S),D&4)if(c=S.stateNode,g===null)try{c.componentDidMount()}catch(st){Mo(S,S.return,st)}else{var G=eu(S.type,g.memoizedProps);g=g.memoizedState;try{c.componentDidUpdate(G,g,c.__reactInternalSnapshotBeforeUpdate)}catch(st){Mo(S,S.return,st)}}D&64&&Ex(S),D&512&&Ff(S,S.return);break;case 3:if(zf(c,S),D&64&&(D=S.updateQueue,D!==null)){if(c=null,S.child!==null)switch(S.child.tag){case 27:case 5:c=S.child.stateNode;break;case 1:c=S.child.stateNode}try{Sx(D,c)}catch(st){Mo(S,S.return,st)}}break;case 26:zf(c,S),D&512&&Ff(S,S.return);break;case 27:case 5:zf(c,S),g===null&&D&4&&V_(S),D&512&&Ff(S,S.return);break;case 12:zf(c,S);break;case 13:zf(c,S),D&4&&Id(c,S);break;case 22:if(G=S.memoizedState!==null||sh,!G){g=g!==null&&g.memoizedState!==null||Ko;var te=sh,Oe=Ko;sh=G,(Ko=g)&&!Oe?Od(c,S,(S.subtreeFlags&8772)!==0):zf(c,S),sh=te,Ko=Oe}D&512&&(S.memoizedProps.mode==="manual"?Ff(S,S.return):Gc(S,S.return));break;default:zf(c,S)}}function Pg(c){var g=c.alternate;g!==null&&(c.alternate=null,Pg(g)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(g=c.stateNode,g!==null&&mi(g)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Jo=null,bu=!1;function Bf(c,g,S){for(S=S.child;S!==null;)H_(c,g,S),S=S.sibling}function H_(c,g,S){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(Pn,S)}catch{}switch(S.tag){case 26:Ko||Gc(S,g),Bf(c,g,S),S.memoizedState?S.memoizedState.count--:S.stateNode&&(S=S.stateNode,S.parentNode.removeChild(S));break;case 27:Ko||Gc(S,g);var D=Jo,G=bu;for(Jo=S.stateNode,Bf(c,g,S),S=S.stateNode,g=S.attributes;g.length;)S.removeAttributeNode(g[0]);mi(S),Jo=D,bu=G;break;case 5:Ko||Gc(S,g);case 6:G=Jo;var te=bu;if(Jo=null,Bf(c,g,S),Jo=G,bu=te,Jo!==null)if(bu)try{c=Jo,D=S.stateNode,c.nodeType===8?c.parentNode.removeChild(D):c.removeChild(D)}catch(Oe){Mo(S,g,Oe)}else try{Jo.removeChild(S.stateNode)}catch(Oe){Mo(S,g,Oe)}break;case 18:Jo!==null&&(bu?(g=Jo,S=S.stateNode,g.nodeType===8?Vd(g.parentNode,S):g.nodeType===1&&Vd(g,S),nc(g)):Vd(Jo,S.stateNode));break;case 4:D=Jo,G=bu,Jo=S.stateNode.containerInfo,bu=!0,Bf(c,g,S),Jo=D,bu=G;break;case 0:case 11:case 14:case 15:Ko||Dd(2,S,g),Ko||Dd(4,S,g),Bf(c,g,S);break;case 1:Ko||(Gc(S,g),D=S.stateNode,typeof D.componentWillUnmount=="function"&&Tx(S,g,D)),Bf(c,g,S);break;case 21:Bf(c,g,S);break;case 22:Ko||Gc(S,g),Ko=(D=Ko)||S.memoizedState!==null,Bf(c,g,S),Ko=D;break;default:Bf(c,g,S)}}function Id(c,g){if(g.memoizedState===null&&(c=g.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{nc(c)}catch(S){Mo(g,g.return,S)}}function LE(c){switch(c.tag){case 13:case 19:var g=c.stateNode;return g===null&&(g=c.stateNode=new G_),g;case 22:return c=c.stateNode,g=c._retryCache,g===null&&(g=c._retryCache=new G_),g;default:throw Error(r(435,c.tag))}}function ov(c,g){var S=LE(c);g.forEach(function(D){var G=s1.bind(null,c,D);S.has(D)||(S.add(D),D.then(G,G))})}function Gu(c,g){var S=g.deletions;if(S!==null)for(var D=0;D<S.length;D++){var G=S[D],te=c,Oe=g,st=Oe;e:for(;st!==null;){switch(st.tag){case 27:case 5:Jo=st.stateNode,bu=!1;break e;case 3:Jo=st.stateNode.containerInfo,bu=!0;break e;case 4:Jo=st.stateNode.containerInfo,bu=!0;break e}st=st.return}if(Jo===null)throw Error(r(160));H_(te,Oe,G),Jo=null,bu=!1,te=G.alternate,te!==null&&(te.return=null),G.return=null}if(g.subtreeFlags&13878)for(g=g.child;g!==null;)$_(g,c),g=g.sibling}var qc=null;function $_(c,g){var S=c.alternate,D=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Gu(g,c),Hc(c),D&4&&(Dd(3,c,c.return),Ag(3,c),Dd(5,c,c.return));break;case 1:Gu(g,c),Hc(c),D&512&&(Ko||S===null||Gc(S,S.return)),D&64&&sh&&(c=c.updateQueue,c!==null&&(D=c.callbacks,D!==null&&(S=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=S===null?D:S.concat(D))));break;case 26:var G=qc;if(Gu(g,c),Hc(c),D&512&&(Ko||S===null||Gc(S,S.return)),D&4){var te=S!==null?S.memoizedState:null;if(D=c.memoizedState,S===null)if(D===null)if(c.stateNode===null){e:{D=c.type,S=c.memoizedProps,G=G.ownerDocument||G;t:switch(D){case"title":te=G.getElementsByTagName("title")[0],(!te||te[ra]||te[Er]||te.namespaceURI==="http://www.w3.org/2000/svg"||te.hasAttribute("itemprop"))&&(te=G.createElement(D),G.head.insertBefore(te,G.querySelector("head > title"))),iu(te,D,S),te[Er]=c,_n(te),D=te;break e;case"link":var Oe=ne("link","href",G).get(D+(S.href||""));if(Oe){for(var st=0;st<Oe.length;st++)if(te=Oe[st],te.getAttribute("href")===(S.href==null?null:S.href)&&te.getAttribute("rel")===(S.rel==null?null:S.rel)&&te.getAttribute("title")===(S.title==null?null:S.title)&&te.getAttribute("crossorigin")===(S.crossOrigin==null?null:S.crossOrigin)){Oe.splice(st,1);break t}}te=G.createElement(D),iu(te,D,S),G.head.appendChild(te);break;case"meta":if(Oe=ne("meta","content",G).get(D+(S.content||""))){for(st=0;st<Oe.length;st++)if(te=Oe[st],te.getAttribute("content")===(S.content==null?null:""+S.content)&&te.getAttribute("name")===(S.name==null?null:S.name)&&te.getAttribute("property")===(S.property==null?null:S.property)&&te.getAttribute("http-equiv")===(S.httpEquiv==null?null:S.httpEquiv)&&te.getAttribute("charset")===(S.charSet==null?null:S.charSet)){Oe.splice(st,1);break t}}te=G.createElement(D),iu(te,D,S),G.head.appendChild(te);break;default:throw Error(r(468,D))}te[Er]=c,_n(te),D=te}c.stateNode=D}else ce(G,c.type,c.stateNode);else c.stateNode=T(G,D,c.memoizedProps);else te!==D?(te===null?S.stateNode!==null&&(S=S.stateNode,S.parentNode.removeChild(S)):te.count--,D===null?ce(G,c.type,c.stateNode):T(G,D,c.memoizedProps)):D===null&&c.stateNode!==null&&pm(c,c.memoizedProps,S.memoizedProps)}break;case 27:if(D&4&&c.alternate===null){G=c.stateNode,te=c.memoizedProps;try{for(var Ot=G.firstChild;Ot;){var cn=Ot.nextSibling,tr=Ot.nodeName;Ot[ra]||tr==="HEAD"||tr==="BODY"||tr==="SCRIPT"||tr==="STYLE"||tr==="LINK"&&Ot.rel.toLowerCase()==="stylesheet"||G.removeChild(Ot),Ot=cn}for(var yr=c.type,Nn=G.attributes;Nn.length;)G.removeAttributeNode(Nn[0]);iu(G,yr,te),G[Er]=c,G[lr]=te}catch(ai){Mo(c,c.return,ai)}}case 5:if(Gu(g,c),Hc(c),D&512&&(Ko||S===null||Gc(S,S.return)),c.flags&32){G=c.stateNode;try{Lt(G,"")}catch(ai){Mo(c,c.return,ai)}}D&4&&c.stateNode!=null&&(G=c.memoizedProps,pm(c,G,S!==null?S.memoizedProps:G)),D&1024&&(yp=!0);break;case 6:if(Gu(g,c),Hc(c),D&4){if(c.stateNode===null)throw Error(r(162));D=c.memoizedProps,S=c.stateNode;try{S.nodeValue=D}catch(ai){Mo(c,c.return,ai)}}break;case 3:if(J=null,G=qc,qc=Hg(g.containerInfo),Gu(g,c),qc=G,Hc(c),D&4&&S!==null&&S.memoizedState.isDehydrated)try{nc(g.containerInfo)}catch(ai){Mo(c,c.return,ai)}yp&&(yp=!1,Ax(c));break;case 4:D=qc,qc=Hg(c.stateNode.containerInfo),Gu(g,c),Hc(c),qc=D;break;case 12:Gu(g,c),Hc(c);break;case 13:Gu(g,c),Hc(c),c.child.flags&8192&&c.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(cv=jt()),D&4&&(D=c.updateQueue,D!==null&&(c.updateQueue=null,ov(c,D)));break;case 22:if(D&512&&(Ko||S===null||Gc(S,S.return)),Ot=c.memoizedState!==null,cn=S!==null&&S.memoizedState!==null,tr=sh,yr=Ko,sh=tr||Ot,Ko=yr||cn,Gu(g,c),Ko=yr,sh=tr,Hc(c),g=c.stateNode,g._current=c,g._visibility&=-3,g._visibility|=g._pendingVisibility&2,D&8192&&(g._visibility=Ot?g._visibility&-2:g._visibility|1,Ot&&(g=sh||Ko,S===null||cn||g||gm(c)),c.memoizedProps===null||c.memoizedProps.mode!=="manual"))e:for(S=null,g=c;;){if(g.tag===5||g.tag===26||g.tag===27){if(S===null){cn=S=g;try{if(G=cn.stateNode,Ot)te=G.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none";else{Oe=cn.stateNode,st=cn.memoizedProps.style;var Jn=st!=null&&st.hasOwnProperty("display")?st.display:null;Oe.style.display=Jn==null||typeof Jn=="boolean"?"":(""+Jn).trim()}}catch(ai){Mo(cn,cn.return,ai)}}}else if(g.tag===6){if(S===null){cn=g;try{cn.stateNode.nodeValue=Ot?"":cn.memoizedProps}catch(ai){Mo(cn,cn.return,ai)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===c)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break e;for(;g.sibling===null;){if(g.return===null||g.return===c)break e;S===g&&(S=null),g=g.return}S===g&&(S=null),g.sibling.return=g.return,g=g.sibling}D&4&&(D=c.updateQueue,D!==null&&(S=D.retryQueue,S!==null&&(D.retryQueue=null,ov(c,S))));break;case 19:Gu(g,c),Hc(c),D&4&&(D=c.updateQueue,D!==null&&(c.updateQueue=null,ov(c,D)));break;case 21:break;default:Gu(g,c),Hc(c)}}function Hc(c){var g=c.flags;if(g&2){try{if(c.tag!==27){e:{for(var S=c.return;S!==null;){if(Mx(S)){var D=S;break e}S=S.return}throw Error(r(160))}switch(D.tag){case 27:var G=D.stateNode,te=Yo(c);Cg(c,te,G);break;case 5:var Oe=D.stateNode;D.flags&32&&(Lt(Oe,""),D.flags&=-33);var st=Yo(c);Cg(c,st,Oe);break;case 3:case 4:var Ot=D.stateNode.containerInfo,cn=Yo(c);Ld(c,cn,Ot);break;default:throw Error(r(161))}}}catch(tr){Mo(c,c.return,tr)}c.flags&=-3}g&4096&&(c.flags&=-4097)}function Ax(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var g=c;Ax(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),c=c.sibling}}function zf(c,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)_p(c,g.alternate,g),g=g.sibling}function gm(c){for(c=c.child;c!==null;){var g=c;switch(g.tag){case 0:case 11:case 14:case 15:Dd(4,g,g.return),gm(g);break;case 1:Gc(g,g.return);var S=g.stateNode;typeof S.componentWillUnmount=="function"&&Tx(g,g.return,S),gm(g);break;case 26:case 27:case 5:Gc(g,g.return),gm(g);break;case 22:Gc(g,g.return),g.memoizedState===null&&gm(g);break;default:gm(g)}c=c.sibling}}function Od(c,g,S){for(S=S&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var D=g.alternate,G=c,te=g,Oe=te.flags;switch(te.tag){case 0:case 11:case 15:Od(G,te,S),Ag(4,te);break;case 1:if(Od(G,te,S),D=te,G=D.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch(cn){Mo(D,D.return,cn)}if(D=te,G=D.updateQueue,G!==null){var st=D.stateNode;try{var Ot=G.shared.hiddenCallbacks;if(Ot!==null)for(G.shared.hiddenCallbacks=null,G=0;G<Ot.length;G++)wx(Ot[G],st)}catch(cn){Mo(D,D.return,cn)}}S&&Oe&64&&Ex(te),Ff(te,te.return);break;case 26:case 27:case 5:Od(G,te,S),S&&D===null&&Oe&4&&V_(te),Ff(te,te.return);break;case 12:Od(G,te,S);break;case 13:Od(G,te,S),S&&Oe&4&&Id(G,te);break;case 22:te.memoizedState===null&&Od(G,te,S),Ff(te,te.return);break;default:Od(G,te,S)}g=g.sibling}}function W_(c,g){var S=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(S=c.memoizedState.cachePool.pool),c=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(c=g.memoizedState.cachePool.pool),c!==S&&(c!=null&&c.refCount++,S!=null&&N(S))}function Rg(c,g){c=null,g.alternate!==null&&(c=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==c&&(g.refCount++,c!=null&&N(c))}function Uf(c,g,S,D){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)sv(c,g,S,D),g=g.sibling}function sv(c,g,S,D){var G=g.flags;switch(g.tag){case 0:case 11:case 15:Uf(c,g,S,D),G&2048&&Ag(9,g);break;case 3:Uf(c,g,S,D),G&2048&&(c=null,g.alternate!==null&&(c=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==c&&(g.refCount++,c!=null&&N(c)));break;case 12:if(G&2048){Uf(c,g,S,D),c=g.stateNode;try{var te=g.memoizedProps,Oe=te.id,st=te.onPostCommit;typeof st=="function"&&st(Oe,g.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Ot){Mo(g,g.return,Ot)}}else Uf(c,g,S,D);break;case 23:break;case 22:te=g.stateNode,g.memoizedState!==null?te._visibility&4?Uf(c,g,S,D):xp(c,g):te._visibility&4?Uf(c,g,S,D):(te._visibility|=4,bp(c,g,S,D,(g.subtreeFlags&10256)!==0)),G&2048&&W_(g.alternate,g);break;case 24:Uf(c,g,S,D),G&2048&&Rg(g.alternate,g);break;default:Uf(c,g,S,D)}}function bp(c,g,S,D,G){for(G=G&&(g.subtreeFlags&10256)!==0,g=g.child;g!==null;){var te=c,Oe=g,st=S,Ot=D,cn=Oe.flags;switch(Oe.tag){case 0:case 11:case 15:bp(te,Oe,st,Ot,G),Ag(8,Oe);break;case 23:break;case 22:var tr=Oe.stateNode;Oe.memoizedState!==null?tr._visibility&4?bp(te,Oe,st,Ot,G):xp(te,Oe):(tr._visibility|=4,bp(te,Oe,st,Ot,G)),G&&cn&2048&&W_(Oe.alternate,Oe);break;case 24:bp(te,Oe,st,Ot,G),G&&cn&2048&&Rg(Oe.alternate,Oe);break;default:bp(te,Oe,st,Ot,G)}g=g.sibling}}function xp(c,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var S=c,D=g,G=D.flags;switch(D.tag){case 22:xp(S,D),G&2048&&W_(D.alternate,D);break;case 24:xp(S,D),G&2048&&Rg(D.alternate,D);break;default:xp(S,D)}g=g.sibling}}var vm=8192;function wp(c){if(c.subtreeFlags&vm)for(c=c.child;c!==null;)Dg(c),c=c.sibling}function Dg(c){switch(c.tag){case 26:wp(c),c.flags&vm&&c.memoizedState!==null&&Ye(qc,c.memoizedState,c.memoizedProps);break;case 5:wp(c);break;case 3:case 4:var g=qc;qc=Hg(c.stateNode.containerInfo),wp(c),qc=g;break;case 22:c.memoizedState===null&&(g=c.alternate,g!==null&&g.memoizedState!==null?(g=vm,vm=16777216,wp(c),vm=g):wp(c));break;default:wp(c)}}function X_(c){var g=c.alternate;if(g!==null&&(c=g.child,c!==null)){g.child=null;do g=c.sibling,c.sibling=null,c=g;while(c!==null)}}function ym(c){var g=c.deletions;if((c.flags&16)!==0){if(g!==null)for(var S=0;S<g.length;S++){var D=g[S];Nl=D,Cx(D,c)}X_(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Z_(c),c=c.sibling}function Z_(c){switch(c.tag){case 0:case 11:case 15:ym(c),c.flags&2048&&Dd(9,c,c.return);break;case 3:ym(c);break;case 12:ym(c);break;case 22:var g=c.stateNode;c.memoizedState!==null&&g._visibility&4&&(c.return===null||c.return.tag!==13)?(g._visibility&=-5,Nd(c)):ym(c);break;default:ym(c)}}function Nd(c){var g=c.deletions;if((c.flags&16)!==0){if(g!==null)for(var S=0;S<g.length;S++){var D=g[S];Nl=D,Cx(D,c)}X_(c)}for(c=c.child;c!==null;){switch(g=c,g.tag){case 0:case 11:case 15:Dd(8,g,g.return),Nd(g);break;case 22:S=g.stateNode,S._visibility&4&&(S._visibility&=-5,Nd(g));break;default:Nd(g)}c=c.sibling}}function Cx(c,g){for(;Nl!==null;){var S=Nl;switch(S.tag){case 0:case 11:case 15:Dd(8,S,g);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var D=S.memoizedState.cachePool.pool;D!=null&&D.refCount++}break;case 24:N(S.memoizedState.cache)}if(D=S.child,D!==null)D.return=S,Nl=D;else e:for(S=c;Nl!==null;){D=Nl;var G=D.sibling,te=D.return;if(Pg(D),D===S){Nl=null;break e}if(G!==null){G.return=te,Nl=G;break e}Nl=te}}}function Y_(c,g,S,D){this.tag=c,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qu(c,g,S,D){return new Y_(c,g,S,D)}function Lg(c){return c=c.prototype,!(!c||!c.isReactComponent)}function kd(c,g){var S=c.alternate;return S===null?(S=qu(c.tag,g,c.key,c.mode),S.elementType=c.elementType,S.type=c.type,S.stateNode=c.stateNode,S.alternate=c,c.alternate=S):(S.pendingProps=g,S.type=c.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=c.flags&31457280,S.childLanes=c.childLanes,S.lanes=c.lanes,S.child=c.child,S.memoizedProps=c.memoizedProps,S.memoizedState=c.memoizedState,S.updateQueue=c.updateQueue,g=c.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=c.sibling,S.index=c.index,S.ref=c.ref,S.refCleanup=c.refCleanup,S}function Px(c,g){c.flags&=31457282;var S=c.alternate;return S===null?(c.childLanes=0,c.lanes=g,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=S.childLanes,c.lanes=S.lanes,c.child=S.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=S.memoizedProps,c.memoizedState=S.memoizedState,c.updateQueue=S.updateQueue,c.type=S.type,g=S.dependencies,c.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),c}function Ig(c,g,S,D,G,te){var Oe=0;if(D=c,typeof c=="function")Lg(c)&&(Oe=1);else if(typeof c=="string")Oe=_e(c,S,it.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case h:return Fd(S.children,G,te,g);case f:Oe=8,G|=24;break;case v:return c=qu(12,S,g,G|2),c.elementType=v,c.lanes=te,c;case M:return c=qu(13,S,g,G),c.elementType=M,c.lanes=te,c;case P:return c=qu(19,S,g,G),c.elementType=P,c.lanes=te,c;case B:return Rx(S,G,te,g);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case y:case b:Oe=10;break e;case w:Oe=9;break e;case A:Oe=11;break e;case C:Oe=14;break e;case k:Oe=16,D=null;break e}Oe=29,S=Error(r(130,c===null?"null":typeof c,"")),D=null}return g=qu(Oe,S,g,G),g.elementType=c,g.type=D,g.lanes=te,g}function Fd(c,g,S,D){return c=qu(7,c,D,g),c.lanes=S,c}function Rx(c,g,S,D){c=qu(22,c,D,g),c.elementType=B,c.lanes=S;var G={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var te=G._current;if(te===null)throw Error(r(456));if((G._pendingVisibility&2)===0){var Oe=Lo(te,2);Oe!==null&&(G._pendingVisibility|=2,kl(Oe,te,2))}},attach:function(){var te=G._current;if(te===null)throw Error(r(456));if((G._pendingVisibility&2)!==0){var Oe=Lo(te,2);Oe!==null&&(G._pendingVisibility&=-3,kl(Oe,te,2))}}};return c.stateNode=G,c}function K_(c,g,S){return c=qu(6,c,null,g),c.lanes=S,c}function Sp(c,g,S){return g=qu(4,c.children!==null?c.children:[],c.key,g),g.lanes=S,g.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},g}function of(c){c.flags|=4}function Dx(c,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!Re(g)){if(g=ku.current,g!==null&&((Ma&4194176)===Ma?Yl!==null:(Ma&62914560)!==Ma&&(Ma&536870912)===0||g!==Yl))throw Zl=xd,bd;c.flags|=8192}}function lv(c,g){g!==null&&(c.flags|=4),c.flags&16384&&(g=c.tag!==22?qt():536870912,c.lanes|=g,Ep|=g)}function Og(c,g){if(!hi)switch(c.tailMode){case"hidden":g=c.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?c.tail=null:S.sibling=null;break;case"collapsed":S=c.tail;for(var D=null;S!==null;)S.alternate!==null&&(D=S),S=S.sibling;D===null?g||c.tail===null?c.tail=null:c.tail.sibling=null:D.sibling=null}}function ms(c){var g=c.alternate!==null&&c.alternate.child===c.child,S=0,D=0;if(g)for(var G=c.child;G!==null;)S|=G.lanes|G.childLanes,D|=G.subtreeFlags&31457280,D|=G.flags&31457280,G.return=c,G=G.sibling;else for(G=c.child;G!==null;)S|=G.lanes|G.childLanes,D|=G.subtreeFlags,D|=G.flags,G.return=c,G=G.sibling;return c.subtreeFlags|=D,c.childLanes=S,g}function IE(c,g,S){var D=g.pendingProps;switch(Th(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ms(g),null;case 1:return ms(g),null;case 3:return S=g.stateNode,D=null,c!==null&&(D=c.memoizedState.cache),g.memoizedState.cache!==D&&(g.flags|=2048),Dh(Jr),Xe(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(c===null||c.child===null)&&(vc(g)?of(g):c===null||c.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Ws!==null&&(wm(Ws),Ws=null))),ms(g),null;case 26:return S=g.memoizedState,c===null?(of(g),S!==null?(ms(g),Dx(g,S)):(ms(g),g.flags&=-16777217)):S?S!==c.memoizedState?(of(g),ms(g),Dx(g,S)):(ms(g),g.flags&=-16777217):(c.memoizedProps!==D&&of(g),ms(g),g.flags&=-16777217),null;case 27:Kt(g),S=$t.current;var G=g.type;if(c!==null&&g.stateNode!=null)c.memoizedProps!==D&&of(g);else{if(!D){if(g.stateNode===null)throw Error(r(166));return ms(g),null}c=it.current,vc(g)?Pf(g):(c=Rv(G,D,S),g.stateNode=c,of(g))}return ms(g),null;case 5:if(Kt(g),S=g.type,c!==null&&g.stateNode!=null)c.memoizedProps!==D&&of(g);else{if(!D){if(g.stateNode===null)throw Error(r(166));return ms(g),null}if(c=it.current,vc(g))Pf(g);else{switch(G=Gg($t.current),c){case 1:c=G.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:c=G.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":c=G.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":c=G.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":c=G.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof D.is=="string"?G.createElement("select",{is:D.is}):G.createElement("select"),D.multiple?c.multiple=!0:D.size&&(c.size=D.size);break;default:c=typeof D.is=="string"?G.createElement(S,{is:D.is}):G.createElement(S)}}c[Er]=g,c[lr]=D;e:for(G=g.child;G!==null;){if(G.tag===5||G.tag===6)c.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===g)break e;for(;G.sibling===null;){if(G.return===null||G.return===g)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}g.stateNode=c;e:switch(iu(c,S,D),S){case"button":case"input":case"select":case"textarea":c=!!D.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&of(g)}}return ms(g),g.flags&=-16777217,null;case 6:if(c&&g.stateNode!=null)c.memoizedProps!==D&&of(g);else{if(typeof D!="string"&&g.stateNode===null)throw Error(r(166));if(c=$t.current,vc(g)){if(c=g.stateNode,S=g.memoizedProps,D=null,G=Rs,G!==null)switch(G.tag){case 27:case 5:D=G.memoizedProps}c[Er]=g,c=!!(c.nodeValue===S||D!==null&&D.suppressHydrationWarning===!0||p1(c.nodeValue,S)),c||Ju(g)}else c=Gg(c).createTextNode(D),c[Er]=g,g.stateNode=c}return ms(g),null;case 13:if(D=g.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(G=vc(g),D!==null&&D.dehydrated!==null){if(c===null){if(!G)throw Error(r(318));if(G=g.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(r(317));G[Er]=g}else yc(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ms(g),G=!1}else Ws!==null&&(wm(Ws),Ws=null),G=!0;if(!G)return g.flags&256?(Jl(g),g):(Jl(g),null)}if(Jl(g),(g.flags&128)!==0)return g.lanes=S,g;if(S=D!==null,c=c!==null&&c.memoizedState!==null,S){D=g.child,G=null,D.alternate!==null&&D.alternate.memoizedState!==null&&D.alternate.memoizedState.cachePool!==null&&(G=D.alternate.memoizedState.cachePool.pool);var te=null;D.memoizedState!==null&&D.memoizedState.cachePool!==null&&(te=D.memoizedState.cachePool.pool),te!==G&&(D.flags|=2048)}return S!==c&&S&&(g.child.flags|=8192),lv(g,g.updateQueue),ms(g),null;case 4:return Xe(),c===null&&Tv(g.stateNode.containerInfo),ms(g),null;case 10:return Dh(g.type),ms(g),null;case 19:if(tt(Xo),G=g.memoizedState,G===null)return ms(g),null;if(D=(g.flags&128)!==0,te=G.rendering,te===null)if(D)Og(G,!1);else{if(Ns!==0||c!==null&&(c.flags&128)!==0)for(c=g.child;c!==null;){if(te=Df(c),te!==null){for(g.flags|=128,Og(G,!1),c=te.updateQueue,g.updateQueue=c,lv(g,c),g.subtreeFlags=0,c=S,S=g.child;S!==null;)Px(S,c),S=S.sibling;return ht(Xo,Xo.current&1|2),g.child}c=c.sibling}G.tail!==null&&jt()>bm&&(g.flags|=128,D=!0,Og(G,!1),g.lanes=4194304)}else{if(!D)if(c=Df(te),c!==null){if(g.flags|=128,D=!0,c=c.updateQueue,g.updateQueue=c,lv(g,c),Og(G,!0),G.tail===null&&G.tailMode==="hidden"&&!te.alternate&&!hi)return ms(g),null}else 2*jt()-G.renderingStartTime>bm&&S!==536870912&&(g.flags|=128,D=!0,Og(G,!1),g.lanes=4194304);G.isBackwards?(te.sibling=g.child,g.child=te):(c=G.last,c!==null?c.sibling=te:g.child=te,G.last=te)}return G.tail!==null?(g=G.tail,G.rendering=g,G.tail=g.sibling,G.renderingStartTime=jt(),g.sibling=null,c=Xo.current,ht(Xo,D?c&1|2:c&1),g):(ms(g),null);case 22:case 23:return Jl(g),Ch(),D=g.memoizedState!==null,c!==null?c.memoizedState!==null!==D&&(g.flags|=8192):D&&(g.flags|=8192),D?(S&536870912)!==0&&(g.flags&128)===0&&(ms(g),g.subtreeFlags&6&&(g.flags|=8192)):ms(g),S=g.updateQueue,S!==null&&lv(g,S.retryQueue),S=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(S=c.memoizedState.cachePool.pool),D=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(D=g.memoizedState.cachePool.pool),D!==S&&(g.flags|=2048),c!==null&&tt(yt),null;case 24:return S=null,c!==null&&(S=c.memoizedState.cache),g.memoizedState.cache!==S&&(g.flags|=2048),Dh(Jr),ms(g),null;case 25:return null}throw Error(r(156,g.tag))}function OE(c,g){switch(Th(g),g.tag){case 1:return c=g.flags,c&65536?(g.flags=c&-65537|128,g):null;case 3:return Dh(Jr),Xe(),c=g.flags,(c&65536)!==0&&(c&128)===0?(g.flags=c&-65537|128,g):null;case 26:case 27:case 5:return Kt(g),null;case 13:if(Jl(g),c=g.memoizedState,c!==null&&c.dehydrated!==null){if(g.alternate===null)throw Error(r(340));yc()}return c=g.flags,c&65536?(g.flags=c&-65537|128,g):null;case 19:return tt(Xo),null;case 4:return Xe(),null;case 10:return Dh(g.type),null;case 22:case 23:return Jl(g),Ch(),c!==null&&tt(yt),c=g.flags,c&65536?(g.flags=c&-65537|128,g):null;case 24:return Dh(Jr),null;case 25:return null;default:return null}}function J_(c,g){switch(Th(g),g.tag){case 3:Dh(Jr),Xe();break;case 26:case 27:case 5:Kt(g);break;case 4:Xe();break;case 13:Jl(g);break;case 19:tt(Xo);break;case 10:Dh(g.type);break;case 22:case 23:Jl(g),Ch(),c!==null&&tt(yt);break;case 24:Dh(Jr)}}var Q_={getCacheForType:function(c){var g=ru(Jr),S=g.data.get(c);return S===void 0&&(S=c(),g.data.set(c,S)),S}},Lx=typeof WeakMap=="function"?WeakMap:Map,fs=0,To=null,Ta=null,Ma=0,Io=0,_c=null,jf=!1,_m=!1,e1=!1,sf=0,Ns=0,Bd=0,Lh=0,uv=0,bc=0,Ep=0,Qo=null,lh=null,t1=!1,cv=0,bm=1/0,xm=null,zd=null,hv=!1,Tp=null,Ng=0,fv=0,xu=null,Mp=0,dv=null;function fl(){if((fs&2)!==0&&Ma!==0)return Ma&-Ma;if(Z.T!==null){var c=xe;return c!==0?c:c1()}return sn()}function kg(){bc===0&&(bc=(Ma&536870912)===0||hi?Tn():536870912);var c=ku.current;return c!==null&&(c.flags|=32),bc}function kl(c,g,S){(c===To&&Io===2||c.cancelPendingCommit!==null)&&(Sm(c,0),Vf(c,Ma,bc,!1)),Gn(c,S),((fs&2)===0||c!==To)&&(c===To&&((fs&2)===0&&(Lh|=S),Ns===4&&Vf(c,Ma,bc,!1)),Ih(c))}function Ap(c,g,S){if((fs&6)!==0)throw Error(r(327));var D=!S&&(g&60)===0&&(g&c.expiredLanes)===0||Dt(c,g),G=D?kE(c,g):i1(c,g,!0),te=D;do{if(G===0){_m&&!D&&Vf(c,g,0,!1);break}else if(G===6)Vf(c,g,0,!jf);else{if(S=c.current.alternate,te&&!NE(S)){G=i1(c,g,!1),te=!1;continue}if(G===2){if(te=g,c.errorRecoveryDisabledLanes&te)var Oe=0;else Oe=c.pendingLanes&-536870913,Oe=Oe!==0?Oe:Oe&536870912?536870912:0;if(Oe!==0){g=Oe;e:{var st=c;G=Qo;var Ot=st.current.memoizedState.isDehydrated;if(Ot&&(Sm(st,Oe).flags|=256),Oe=i1(st,Oe,!1),Oe!==2){if(e1&&!Ot){st.errorRecoveryDisabledLanes|=te,Lh|=te,G=4;break e}te=lh,lh=G,te!==null&&wm(te)}G=Oe}if(te=!1,G!==2)continue}}if(G===1){Sm(c,0),Vf(c,g,0,!0);break}e:{switch(D=c,G){case 0:case 1:throw Error(r(345));case 4:if((g&4194176)===g){Vf(D,g,bc,!jf);break e}break;case 2:lh=null;break;case 3:case 5:break;default:throw Error(r(329))}if(D.finishedWork=S,D.finishedLanes=g,(g&62914560)===g&&(te=cv+300-jt(),10<te)){if(Vf(D,g,bc,!jf),xt(D,0)!==0)break e;D.timeoutHandle=qg(Fg.bind(null,D,S,lh,xm,t1,g,bc,Lh,Ep,jf,2,-0,0),te);break e}Fg(D,S,lh,xm,t1,g,bc,Lh,Ep,jf,0,-0,0)}}break}while(!0);Ih(c)}function wm(c){lh===null?lh=c:lh.push.apply(lh,c)}function Fg(c,g,S,D,G,te,Oe,st,Ot,cn,tr,yr,Nn){var Jn=g.subtreeFlags;if((Jn&8192||(Jn&16785408)===16785408)&&(Le={stylesheets:null,count:0,unsuspend:Fe},Dg(g),g=ct(),g!==null)){c.cancelPendingCommit=g(Tm.bind(null,c,S,D,G,Oe,st,Ot,1,yr,Nn)),Vf(c,te,Oe,!cn);return}Tm(c,S,D,G,Oe,st,Ot,tr,yr,Nn)}function NE(c){for(var g=c;;){var S=g.tag;if((S===0||S===11||S===15)&&g.flags&16384&&(S=g.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var D=0;D<S.length;D++){var G=S[D],te=G.getSnapshot;G=G.value;try{if(!bo(te(),G))return!1}catch{return!1}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Vf(c,g,S,D){g&=~uv,g&=~Lh,c.suspendedLanes|=g,c.pingedLanes&=~g,D&&(c.warmLanes|=g),D=c.expirationTimes;for(var G=g;0<G;){var te=31-ke(G),Oe=1<<te;D[te]=-1,G&=~Oe}S!==0&&Ne(c,S,g)}function Bg(){return(fs&6)===0?(jg(0),!1):!0}function pv(){if(Ta!==null){if(Io===0)var c=Ta.return;else c=Ta,rf=Md=null,Ui(c),rh=null,yu=0,c=Ta;for(;c!==null;)J_(c.alternate,c),c=c.return;Ta=null}}function Sm(c,g){c.finishedWork=null,c.finishedLanes=0;var S=c.timeoutHandle;S!==-1&&(c.timeoutHandle=-1,Pv(S)),S=c.cancelPendingCommit,S!==null&&(c.cancelPendingCommit=null,S()),pv(),To=c,Ta=S=kd(c.current,null),Ma=g,Io=0,_c=null,jf=!1,_m=Dt(c,g),e1=!1,Ep=bc=uv=Lh=Bd=Ns=0,lh=Qo=null,t1=!1,(g&8)!==0&&(g|=g&32);var D=c.entangledLanes;if(D!==0)for(c=c.entanglements,D&=g;0<D;){var G=31-ke(D),te=1<<G;g|=c[G],D&=~te}return sf=g,La(),S}function n1(c,g){Rn=null,Z.H=Ya,g===Ah?(g=mp(),Io=3):g===bd?(g=mp(),Io=4):Io=g===Q0?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,_c=g,Ta===null&&(Ns=1,Ol(c,Ga(g,c.current)))}function r1(){var c=Z.H;return Z.H=Ya,c===null?Ya:c}function mv(){var c=Z.A;return Z.A=Q_,c}function zg(){Ns=4,jf||(Ma&4194176)!==Ma&&ku.current!==null||(_m=!0),(Bd&134217727)===0&&(Lh&134217727)===0||To===null||Vf(To,Ma,bc,!1)}function i1(c,g,S){var D=fs;fs|=2;var G=r1(),te=mv();(To!==c||Ma!==g)&&(xm=null,Sm(c,g)),g=!1;var Oe=Ns;e:do try{if(Io!==0&&Ta!==null){var st=Ta,Ot=_c;switch(Io){case 8:pv(),Oe=6;break e;case 3:case 2:case 6:ku.current===null&&(g=!0);var cn=Io;if(Io=0,_c=null,Em(c,st,Ot,cn),S&&_m){Oe=0;break e}break;default:cn=Io,Io=0,_c=null,Em(c,st,Ot,cn)}}Ix(),Oe=Ns;break}catch(tr){n1(c,tr)}while(!0);return g&&c.shellSuspendCounter++,rf=Md=null,fs=D,Z.H=G,Z.A=te,Ta===null&&(To=null,Ma=0,La()),Oe}function Ix(){for(;Ta!==null;)Ox(Ta)}function kE(c,g){var S=fs;fs|=2;var D=r1(),G=mv();To!==c||Ma!==g?(xm=null,bm=jt()+500,Sm(c,g)):_m=Dt(c,g);e:do try{if(Io!==0&&Ta!==null){g=Ta;var te=_c;t:switch(Io){case 1:Io=0,_c=null,Em(c,g,te,1);break;case 2:if(wd(te)){Io=0,_c=null,Nx(g);break}g=function(){Io===2&&To===c&&(Io=7),Ih(c)},te.then(g,g);break e;case 3:Io=7;break e;case 4:Io=5;break e;case 7:wd(te)?(Io=0,_c=null,Nx(g)):(Io=0,_c=null,Em(c,g,te,7));break;case 5:var Oe=null;switch(Ta.tag){case 26:Oe=Ta.memoizedState;case 5:case 27:var st=Ta;if(!Oe||Re(Oe)){Io=0,_c=null;var Ot=st.sibling;if(Ot!==null)Ta=Ot;else{var cn=st.return;cn!==null?(Ta=cn,Ug(cn)):Ta=null}break t}}Io=0,_c=null,Em(c,g,te,5);break;case 6:Io=0,_c=null,Em(c,g,te,6);break;case 8:pv(),Ns=6;break e;default:throw Error(r(462))}}FE();break}catch(tr){n1(c,tr)}while(!0);return rf=Md=null,Z.H=D,Z.A=G,fs=S,Ta!==null?0:(To=null,Ma=0,La(),Ns)}function FE(){for(;Ta!==null&&!Ee();)Ox(Ta)}function Ox(c){var g=xx(c.alternate,c,sf);c.memoizedProps=c.pendingProps,g===null?Ug(c):Ta=g}function Nx(c){var g=c,S=g.alternate;switch(g.tag){case 15:case 0:g=xg(S,g,g.pendingProps,g.type,void 0,Ma);break;case 11:g=xg(S,g,g.pendingProps,g.type.render,g.ref,Ma);break;case 5:Ui(g);default:J_(S,g),g=Ta=Px(g,sf),g=xx(S,g,sf)}c.memoizedProps=c.pendingProps,g===null?Ug(c):Ta=g}function Em(c,g,S,D){rf=Md=null,Ui(g),rh=null,yu=0;var G=g.return;try{if(If(c,G,g,S,Ma)){Ns=1,Ol(c,Ga(S,c.current)),Ta=null;return}}catch(te){if(G!==null)throw Ta=G,te;Ns=1,Ol(c,Ga(S,c.current)),Ta=null;return}g.flags&32768?(hi||D===1?c=!0:_m||(Ma&536870912)!==0?c=!1:(jf=c=!0,(D===2||D===3||D===6)&&(D=ku.current,D!==null&&D.tag===13&&(D.flags|=16384))),a1(g,c)):Ug(g)}function Ug(c){var g=c;do{if((g.flags&32768)!==0){a1(g,jf);return}c=g.return;var S=IE(g.alternate,g,sf);if(S!==null){Ta=S;return}if(g=g.sibling,g!==null){Ta=g;return}Ta=g=c}while(g!==null);Ns===0&&(Ns=5)}function a1(c,g){do{var S=OE(c.alternate,c);if(S!==null){S.flags&=32767,Ta=S;return}if(S=c.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!g&&(c=c.sibling,c!==null)){Ta=c;return}Ta=c=S}while(c!==null);Ns=6,Ta=null}function Tm(c,g,S,D,G,te,Oe,st,Ot,cn){var tr=Z.T,yr=le.p;try{le.p=2,Z.T=null,lf(c,g,S,D,yr,G,te,Oe,st,Ot,cn)}finally{Z.T=tr,le.p=yr}}function lf(c,g,S,D,G,te,Oe,st){do Cp();while(Tp!==null);if((fs&6)!==0)throw Error(r(327));var Ot=c.finishedWork;if(D=c.finishedLanes,Ot===null)return null;if(c.finishedWork=null,c.finishedLanes=0,Ot===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0,c.cancelPendingCommit=null;var cn=Ot.lanes|Ot.childLanes;if(cn|=Sa,we(c,D,cn,te,Oe,st),c===To&&(Ta=To=null,Ma=0),(Ot.subtreeFlags&10256)===0&&(Ot.flags&10256)===0||hv||(hv=!0,fv=cn,xu=S,l1(hn,function(){return Cp(),null})),S=(Ot.flags&15990)!==0,(Ot.subtreeFlags&15990)!==0||S?(S=Z.T,Z.T=null,te=le.p,le.p=2,Oe=fs,fs|=4,q_(c,Ot),$_(Ot,c),na(g1,c.containerInfo),pr=!!m1,g1=m1=null,c.current=Ot,_p(c,Ot.alternate,Ot),_t(),fs=Oe,le.p=te,Z.T=S):c.current=Ot,hv?(hv=!1,Tp=c,Ng=D):Gf(c,cn),cn=c.pendingLanes,cn===0&&(zd=null),mt(Ot.stateNode),Ih(c),g!==null)for(G=c.onRecoverableError,Ot=0;Ot<g.length;Ot++)cn=g[Ot],G(cn.value,{componentStack:cn.stack});return(Ng&3)!==0&&Cp(),cn=c.pendingLanes,(D&4194218)!==0&&(cn&42)!==0?c===dv?Mp++:(Mp=0,dv=c):Mp=0,jg(0),null}function Gf(c,g){(c.pooledCacheLanes&=g)===0&&(g=c.pooledCache,g!=null&&(c.pooledCache=null,N(g)))}function Cp(){if(Tp!==null){var c=Tp,g=fv;fv=0;var S=At(Ng),D=Z.T,G=le.p;try{if(le.p=32>S?32:S,Z.T=null,Tp===null)var te=!1;else{S=xu,xu=null;var Oe=Tp,st=Ng;if(Tp=null,Ng=0,(fs&6)!==0)throw Error(r(331));var Ot=fs;if(fs|=4,Z_(Oe.current),sv(Oe,Oe.current,st,S),fs=Ot,jg(0,!1),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(Pn,Oe)}catch{}te=!0}return te}finally{le.p=G,Z.T=D,Gf(c,g)}}return!1}function gv(c,g,S){g=Ga(S,g),g=Ja(c.stateNode,g,2),c=af(c,g,2),c!==null&&(Gn(c,2),Ih(c))}function Mo(c,g,S){if(c.tag===3)gv(c,c,S);else for(;g!==null;){if(g.tag===3){gv(g,c,S);break}else if(g.tag===1){var D=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(zd===null||!zd.has(D))){c=Ga(S,c),S=Is(2),D=af(g,S,2),D!==null&&(Os(S,D,g,c),Gn(D,2),Ih(D));break}}g=g.return}}function o1(c,g,S){var D=c.pingCache;if(D===null){D=c.pingCache=new Lx;var G=new Set;D.set(g,G)}else G=D.get(g),G===void 0&&(G=new Set,D.set(g,G));G.has(S)||(e1=!0,G.add(S),c=vv.bind(null,c,g,S),g.then(c,c))}function vv(c,g,S){var D=c.pingCache;D!==null&&D.delete(g),c.pingedLanes|=c.suspendedLanes&S,c.warmLanes&=~S,To===c&&(Ma&S)===S&&(Ns===4||Ns===3&&(Ma&62914560)===Ma&&300>jt()-cv?(fs&2)===0&&Sm(c,0):uv|=S,Ep===Ma&&(Ep=0)),Ih(c)}function yv(c,g){g===0&&(g=qt()),c=Lo(c,g),c!==null&&(Gn(c,g),Ih(c))}function BE(c){var g=c.memoizedState,S=0;g!==null&&(S=g.retryLane),yv(c,S)}function s1(c,g){var S=0;switch(c.tag){case 13:var D=c.stateNode,G=c.memoizedState;G!==null&&(S=G.retryLane);break;case 19:D=c.stateNode;break;case 22:D=c.stateNode._retryCache;break;default:throw Error(r(314))}D!==null&&D.delete(g),yv(c,S)}function l1(c,g){return Ht(c,g)}var qf=null,Pp=null,_v=!1,Mm=!1,bv=!1,uf=0;function Ih(c){c!==Pp&&c.next===null&&(Pp===null?qf=Pp=c:Pp=Pp.next=c),Mm=!0,_v||(_v=!0,UE(zE))}function jg(c,g){if(!bv&&Mm){bv=!0;do for(var S=!1,D=qf;D!==null;){if(c!==0){var G=D.pendingLanes;if(G===0)var te=0;else{var Oe=D.suspendedLanes,st=D.pingedLanes;te=(1<<31-ke(42|c)+1)-1,te&=G&~(Oe&~st),te=te&201326677?te&201326677|1:te?te|2:0}te!==0&&(S=!0,Fx(D,te))}else te=Ma,te=xt(D,D===To?te:0),(te&3)===0||Dt(D,te)||(S=!0,Fx(D,te));D=D.next}while(S);bv=!1}}function zE(){Mm=_v=!1;var c=0;uf!==0&&(Cv()&&(c=uf),uf=0);for(var g=jt(),S=null,D=qf;D!==null;){var G=D.next,te=u1(D,g);te===0?(D.next=null,S===null?qf=G:S.next=G,G===null&&(Pp=S)):(S=D,(c!==0||(te&3)!==0)&&(Mm=!0)),D=G}jg(c)}function u1(c,g){for(var S=c.suspendedLanes,D=c.pingedLanes,G=c.expirationTimes,te=c.pendingLanes&-62914561;0<te;){var Oe=31-ke(te),st=1<<Oe,Ot=G[Oe];Ot===-1?((st&S)===0||(st&D)!==0)&&(G[Oe]=zt(st,g)):Ot<=g&&(c.expiredLanes|=st),te&=~st}if(g=To,S=Ma,S=xt(c,c===g?S:0),D=c.callbackNode,S===0||c===g&&Io===2||c.cancelPendingCommit!==null)return D!==null&&D!==null&&$e(D),c.callbackNode=null,c.callbackPriority=0;if((S&3)===0||Dt(c,S)){if(g=S&-S,g===c.callbackPriority)return g;switch(D!==null&&$e(D),At(S)){case 2:case 8:S=vn;break;case 32:S=hn;break;case 268435456:S=nn;break;default:S=hn}return D=kx.bind(null,c),S=Ht(S,D),c.callbackPriority=g,c.callbackNode=S,g}return D!==null&&D!==null&&$e(D),c.callbackPriority=2,c.callbackNode=null,2}function kx(c,g){var S=c.callbackNode;if(Cp()&&c.callbackNode!==S)return null;var D=Ma;return D=xt(c,c===To?D:0),D===0?null:(Ap(c,D,g),u1(c,jt()),c.callbackNode!=null&&c.callbackNode===S?kx.bind(null,c):null)}function Fx(c,g){if(Cp())return null;Ap(c,g,!0)}function UE(c){jE(function(){(fs&6)!==0?Ht(Pt,c):c()})}function c1(){return uf===0&&(uf=Tn()),uf}function Bx(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:xr(""+c)}function xv(c,g){var S=g.ownerDocument.createElement("input");return S.name=g.name,S.value=g.value,c.id&&S.setAttribute("form",c.id),g.parentNode.insertBefore(S,g),c=new FormData(c),S.parentNode.removeChild(S),c}function Ud(c,g,S,D,G){if(g==="submit"&&S&&S.stateNode===G){var te=Bx((G[lr]||null).action),Oe=D.submitter;Oe&&(g=(g=Oe[lr]||null)?Bx(g.formAction):Oe.getAttribute("formAction"),g!==null&&(te=g,Oe=null));var st=new nl("action","action",null,D,G);c.push({event:st,listeners:[{instance:null,listener:function(){if(D.defaultPrevented){if(uf!==0){var Ot=Oe?xv(G,Oe):new FormData(G);kn(S,{pending:!0,data:Ot,method:G.method,action:te},null,Ot)}}else typeof te=="function"&&(st.preventDefault(),Ot=Oe?xv(G,Oe):new FormData(G),kn(S,{pending:!0,data:Ot,method:G.method,action:te},te,Ot))},currentTarget:G}]})}}for(var wv=0;wv<qo.length;wv++){var Sv=qo[wv],zx=Sv.toLowerCase(),Ux=Sv[0].toUpperCase()+Sv.slice(1);Da(zx,"on"+Ux)}Da(qs,"onAnimationEnd"),Da(Cs,"onAnimationIteration"),Da(ol,"onAnimationStart"),Da("dblclick","onDoubleClick"),Da("focusin","onFocus"),Da("focusout","onBlur"),Da(Cl,"onTransitionRun"),Da(mu,"onTransitionStart"),Da(gc,"onTransitionCancel"),Da(Zi,"onTransitionEnd"),Ar("onMouseEnter",["mouseout","mouseover"]),Ar("onMouseLeave",["mouseout","mouseover"]),Ar("onPointerEnter",["pointerout","pointerover"]),Ar("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Am="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Am));function f1(c,g){g=(g&4)!==0;for(var S=0;S<c.length;S++){var D=c[S],G=D.event;D=D.listeners;e:{var te=void 0;if(g)for(var Oe=D.length-1;0<=Oe;Oe--){var st=D[Oe],Ot=st.instance,cn=st.currentTarget;if(st=st.listener,Ot!==te&&G.isPropagationStopped())break e;te=st,G.currentTarget=cn;try{te(G)}catch(tr){Uu(tr)}G.currentTarget=null,te=Ot}else for(Oe=0;Oe<D.length;Oe++){if(st=D[Oe],Ot=st.instance,cn=st.currentTarget,st=st.listener,Ot!==te&&G.isPropagationStopped())break e;te=st,G.currentTarget=cn;try{te(G)}catch(tr){Uu(tr)}G.currentTarget=null,te=Ot}}}}function da(c,g){var S=g[ci];S===void 0&&(S=g[ci]=new Set);var D=c+"__bubble";S.has(D)||(xc(g,c,2,!1),S.add(D))}function Ev(c,g,S){var D=0;g&&(D|=4),xc(S,c,D,g)}var Cm="_reactListening"+Math.random().toString(36).slice(2);function Tv(c){if(!c[Cm]){c[Cm]=!0,fn.forEach(function(S){S!=="selectionchange"&&(h1.has(S)||Ev(S,!1,c),Ev(S,!0,c))});var g=c.nodeType===9?c:c.ownerDocument;g===null||g[Cm]||(g[Cm]=!0,Ev("selectionchange",!1,g))}}function xc(c,g,S,D){switch(Oo(g)){case 2:var G=Vn;break;case 8:G=kr;break;default:G=Qr}S=G.bind(null,g,S,c),G=void 0,!di||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(G=!0),D?G!==void 0?c.addEventListener(g,S,{capture:!0,passive:G}):c.addEventListener(g,S,!0):G!==void 0?c.addEventListener(g,S,{passive:G}):c.addEventListener(g,S,!1)}function jd(c,g,S,D,G){var te=D;if((g&1)===0&&(g&2)===0&&D!==null)e:for(;;){if(D===null)return;var Oe=D.tag;if(Oe===3||Oe===4){var st=D.stateNode.containerInfo;if(st===G||st.nodeType===8&&st.parentNode===G)break;if(Oe===4)for(Oe=D.return;Oe!==null;){var Ot=Oe.tag;if((Ot===3||Ot===4)&&(Ot=Oe.stateNode.containerInfo,Ot===G||Ot.nodeType===8&&Ot.parentNode===G))return;Oe=Oe.return}for(;st!==null;){if(Oe=no(st),Oe===null)return;if(Ot=Oe.tag,Ot===5||Ot===6||Ot===26||Ot===27){D=te=Oe;continue e}st=st.parentNode}}D=D.return}Ni(function(){var cn=te,tr=Ti(S),yr=[];e:{var Nn=Br.get(c);if(Nn!==void 0){var Jn=nl,ai=c;switch(c){case"keypress":if(Po(S)===0)break e;case"keydown":case"keyup":Jn=Ru;break;case"focusin":ai="focus",Jn=hu;break;case"focusout":ai="blur",Jn=hu;break;case"beforeblur":case"afterblur":Jn=hu;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Jn=Wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Jn=Do;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Jn=du;break;case qs:case Cs:case ol:Jn=as;break;case Zi:Jn=Ue;break;case"scroll":case"scrollend":Jn=Kh;break;case"wheel":Jn=Zt;break;case"copy":case"cut":case"paste":Jn=kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Jn=dc;break;case"toggle":case"beforetoggle":Jn=qn}var Hi=(g&4)!==0,Bs=!Hi&&(c==="scroll"||c==="scrollend"),wn=Hi?Nn!==null?Nn+"Capture":null:Nn;Hi=[];for(var dn=cn,Cn;dn!==null;){var rr=dn;if(Cn=rr.stateNode,rr=rr.tag,rr!==5&&rr!==26&&rr!==27||Cn===null||wn===null||(rr=ta(dn,wn),rr!=null&&Hi.push(Pm(dn,rr,Cn))),Bs)break;dn=dn.return}0<Hi.length&&(Nn=new Jn(Nn,ai,null,S,tr),yr.push({event:Nn,listeners:Hi}))}}if((g&7)===0){e:{if(Nn=c==="mouseover"||c==="pointerover",Jn=c==="mouseout"||c==="pointerout",Nn&&S!==Lr&&(ai=S.relatedTarget||S.fromElement)&&(no(ai)||ai[Ri]))break e;if((Jn||Nn)&&(Nn=tr.window===tr?tr:(Nn=tr.ownerDocument)?Nn.defaultView||Nn.parentWindow:window,Jn?(ai=S.relatedTarget||S.toElement,Jn=cn,ai=ai?no(ai):null,ai!==null&&(Bs=pe(ai),Hi=ai.tag,ai!==Bs||Hi!==5&&Hi!==27&&Hi!==6)&&(ai=null)):(Jn=null,ai=cn),Jn!==ai)){if(Hi=Wa,rr="onMouseLeave",wn="onMouseEnter",dn="mouse",(c==="pointerout"||c==="pointerover")&&(Hi=dc,rr="onPointerLeave",wn="onPointerEnter",dn="pointer"),Bs=Jn==null?Nn:an(Jn),Cn=ai==null?Nn:an(ai),Nn=new Hi(rr,dn+"leave",Jn,S,tr),Nn.target=Bs,Nn.relatedTarget=Cn,rr=null,no(tr)===cn&&(Hi=new Hi(wn,dn+"enter",ai,S,tr),Hi.target=Cn,Hi.relatedTarget=Bs,rr=Hi),Bs=rr,Jn&&ai)t:{for(Hi=Jn,wn=ai,dn=0,Cn=Hi;Cn;Cn=Rp(Cn))dn++;for(Cn=0,rr=wn;rr;rr=Rp(rr))Cn++;for(;0<dn-Cn;)Hi=Rp(Hi),dn--;for(;0<Cn-dn;)wn=Rp(wn),Cn--;for(;dn--;){if(Hi===wn||wn!==null&&Hi===wn.alternate)break t;Hi=Rp(Hi),wn=Rp(wn)}Hi=null}else Hi=null;Jn!==null&&d1(yr,Nn,Jn,Hi,!1),ai!==null&&Bs!==null&&d1(yr,Bs,ai,Hi,!0)}}e:{if(Nn=cn?an(cn):window,Jn=Nn.nodeName&&Nn.nodeName.toLowerCase(),Jn==="select"||Jn==="input"&&Nn.type==="file")var qr=al;else if(Vs(Nn))if(Yu)qr=qi;else{qr=zc;var pa=ss}else Jn=Nn.nodeName,!Jn||Jn.toLowerCase()!=="input"||Nn.type!=="checkbox"&&Nn.type!=="radio"?cn&&Wn(cn.elementType)&&(qr=al):qr=$l;if(qr&&(qr=qr(c,cn))){Sh(yr,qr,S,tr);break e}pa&&pa(c,Nn,cn),c==="focusout"&&cn&&Nn.type==="number"&&cn.memoizedProps.value!=null&&H(Nn,"number",Nn.value)}switch(pa=cn?an(cn):window,c){case"focusin":(Vs(pa)||pa.contentEditable==="true")&&(Xi=pa,la=cn,Fa=null);break;case"focusout":Fa=la=Xi=null;break;case"mousedown":si=!0;break;case"contextmenu":case"mouseup":case"dragend":si=!1,Qa(yr,S,tr);break;case"selectionchange":if(Si)break;case"keydown":case"keyup":Qa(yr,S,tr)}var fi;if(Or)e:{switch(c){case"compositionstart":var Ci="onCompositionStart";break e;case"compositionend":Ci="onCompositionEnd";break e;case"compositionupdate":Ci="onCompositionUpdate";break e}Ci=void 0}else yo?ka(c,S)&&(Ci="onCompositionEnd"):c==="keydown"&&S.keyCode===229&&(Ci="onCompositionStart");Ci&&(oi&&S.locale!=="ko"&&(yo||Ci!=="onCompositionStart"?Ci==="onCompositionEnd"&&yo&&(fi=ji()):(_i=tr,Ir="value"in _i?_i.value:_i.textContent,yo=!0)),pa=Vg(cn,Ci),0<pa.length&&(Ci=new Bc(Ci,c,null,S,tr),yr.push({event:Ci,listeners:pa}),fi?Ci.data=fi:(fi=aa(S),fi!==null&&(Ci.data=fi)))),(fi=wi?_o(c,S):So(c,S))&&(Ci=Vg(cn,"onBeforeInput"),0<Ci.length&&(pa=new Bc("onBeforeInput","beforeinput",null,S,tr),yr.push({event:pa,listeners:Ci}),pa.data=fi)),Ud(yr,c,cn,S,tr)}f1(yr,g)})}function Pm(c,g,S){return{instance:c,listener:g,currentTarget:S}}function Vg(c,g){for(var S=g+"Capture",D=[];c!==null;){var G=c,te=G.stateNode;G=G.tag,G!==5&&G!==26&&G!==27||te===null||(G=ta(c,S),G!=null&&D.unshift(Pm(c,G,te)),G=ta(c,g),G!=null&&D.push(Pm(c,G,te))),c=c.return}return D}function Rp(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function d1(c,g,S,D,G){for(var te=g._reactName,Oe=[];S!==null&&S!==D;){var st=S,Ot=st.alternate,cn=st.stateNode;if(st=st.tag,Ot!==null&&Ot===D)break;st!==5&&st!==26&&st!==27||cn===null||(Ot=cn,G?(cn=ta(S,te),cn!=null&&Oe.unshift(Pm(S,cn,Ot))):G||(cn=ta(S,te),cn!=null&&Oe.push(Pm(S,cn,Ot)))),S=S.return}Oe.length!==0&&c.push({event:g,listeners:Oe})}var jx=/\r\n?/g,Vx=/\u0000|\uFFFD/g;function Gx(c){return(typeof c=="string"?c:""+c).replace(jx,`
`).replace(Vx,"")}function p1(c,g){return g=Gx(g),Gx(c)===g}function Oh(){}function fo(c,g,S,D,G,te){switch(S){case"children":typeof D=="string"?g==="body"||g==="textarea"&&D===""||Lt(c,D):(typeof D=="number"||typeof D=="bigint")&&g!=="body"&&Lt(c,""+D);break;case"className":yi(c,"class",D);break;case"tabIndex":yi(c,"tabindex",D);break;case"dir":case"role":case"viewBox":case"width":case"height":yi(c,S,D);break;case"style":sr(c,D,te);break;case"data":if(g!=="object"){yi(c,"data",D);break}case"src":case"href":if(D===""&&(g!=="a"||S!=="href")){c.removeAttribute(S);break}if(D==null||typeof D=="function"||typeof D=="symbol"||typeof D=="boolean"){c.removeAttribute(S);break}D=xr(""+D),c.setAttribute(S,D);break;case"action":case"formAction":if(typeof D=="function"){c.setAttribute(S,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof te=="function"&&(S==="formAction"?(g!=="input"&&fo(c,g,"name",G.name,G,null),fo(c,g,"formEncType",G.formEncType,G,null),fo(c,g,"formMethod",G.formMethod,G,null),fo(c,g,"formTarget",G.formTarget,G,null)):(fo(c,g,"encType",G.encType,G,null),fo(c,g,"method",G.method,G,null),fo(c,g,"target",G.target,G,null)));if(D==null||typeof D=="symbol"||typeof D=="boolean"){c.removeAttribute(S);break}D=xr(""+D),c.setAttribute(S,D);break;case"onClick":D!=null&&(c.onclick=Oh);break;case"onScroll":D!=null&&da("scroll",c);break;case"onScrollEnd":D!=null&&da("scrollend",c);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(r(61));if(S=D.__html,S!=null){if(G.children!=null)throw Error(r(60));c.innerHTML=S}}break;case"multiple":c.multiple=D&&typeof D!="function"&&typeof D!="symbol";break;case"muted":c.muted=D&&typeof D!="function"&&typeof D!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(D==null||typeof D=="function"||typeof D=="boolean"||typeof D=="symbol"){c.removeAttribute("xlink:href");break}S=xr(""+D),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",S);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":D!=null&&typeof D!="function"&&typeof D!="symbol"?c.setAttribute(S,""+D):c.removeAttribute(S);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":D&&typeof D!="function"&&typeof D!="symbol"?c.setAttribute(S,""):c.removeAttribute(S);break;case"capture":case"download":D===!0?c.setAttribute(S,""):D!==!1&&D!=null&&typeof D!="function"&&typeof D!="symbol"?c.setAttribute(S,D):c.removeAttribute(S);break;case"cols":case"rows":case"size":case"span":D!=null&&typeof D!="function"&&typeof D!="symbol"&&!isNaN(D)&&1<=D?c.setAttribute(S,D):c.removeAttribute(S);break;case"rowSpan":case"start":D==null||typeof D=="function"||typeof D=="symbol"||isNaN(D)?c.removeAttribute(S):c.setAttribute(S,D);break;case"popover":da("beforetoggle",c),da("toggle",c),vi(c,"popover",D);break;case"xlinkActuate":Wi(c,"http://www.w3.org/1999/xlink","xlink:actuate",D);break;case"xlinkArcrole":Wi(c,"http://www.w3.org/1999/xlink","xlink:arcrole",D);break;case"xlinkRole":Wi(c,"http://www.w3.org/1999/xlink","xlink:role",D);break;case"xlinkShow":Wi(c,"http://www.w3.org/1999/xlink","xlink:show",D);break;case"xlinkTitle":Wi(c,"http://www.w3.org/1999/xlink","xlink:title",D);break;case"xlinkType":Wi(c,"http://www.w3.org/1999/xlink","xlink:type",D);break;case"xmlBase":Wi(c,"http://www.w3.org/XML/1998/namespace","xml:base",D);break;case"xmlLang":Wi(c,"http://www.w3.org/XML/1998/namespace","xml:lang",D);break;case"xmlSpace":Wi(c,"http://www.w3.org/XML/1998/namespace","xml:space",D);break;case"is":vi(c,"is",D);break;case"innerText":case"textContent":break;default:(!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(S=mr.get(S)||S,vi(c,S,D))}}function Mv(c,g,S,D,G,te){switch(S){case"style":sr(c,D,te);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(r(61));if(S=D.__html,S!=null){if(G.children!=null)throw Error(r(60));c.innerHTML=S}}break;case"children":typeof D=="string"?Lt(c,D):(typeof D=="number"||typeof D=="bigint")&&Lt(c,""+D);break;case"onScroll":D!=null&&da("scroll",c);break;case"onScrollEnd":D!=null&&da("scrollend",c);break;case"onClick":D!=null&&(c.onclick=Oh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cr.hasOwnProperty(S))e:{if(S[0]==="o"&&S[1]==="n"&&(G=S.endsWith("Capture"),g=S.slice(2,G?S.length-7:void 0),te=c[lr]||null,te=te!=null?te[S]:null,typeof te=="function"&&c.removeEventListener(g,te,G),typeof D=="function")){typeof te!="function"&&te!==null&&(S in c?c[S]=null:c.hasAttribute(S)&&c.removeAttribute(S)),c.addEventListener(g,D,G);break e}S in c?c[S]=D:D===!0?c.setAttribute(S,""):vi(c,S,D)}}}function iu(c,g,S){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":da("error",c),da("load",c);var D=!1,G=!1,te;for(te in S)if(S.hasOwnProperty(te)){var Oe=S[te];if(Oe!=null)switch(te){case"src":D=!0;break;case"srcSet":G=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:fo(c,g,te,Oe,S,null)}}G&&fo(c,g,"srcSet",S.srcSet,S,null),D&&fo(c,g,"src",S.src,S,null);return;case"input":da("invalid",c);var st=te=Oe=G=null,Ot=null,cn=null;for(D in S)if(S.hasOwnProperty(D)){var tr=S[D];if(tr!=null)switch(D){case"name":G=tr;break;case"type":Oe=tr;break;case"checked":Ot=tr;break;case"defaultChecked":cn=tr;break;case"value":te=tr;break;case"defaultValue":st=tr;break;case"children":case"dangerouslySetInnerHTML":if(tr!=null)throw Error(r(137,g));break;default:fo(c,g,D,tr,S,null)}}xa(c,te,st,Ot,cn,Oe,G,!1),Di(c);return;case"select":da("invalid",c),D=Oe=te=null;for(G in S)if(S.hasOwnProperty(G)&&(st=S[G],st!=null))switch(G){case"value":te=st;break;case"defaultValue":Oe=st;break;case"multiple":D=st;default:fo(c,g,G,st,S,null)}g=te,S=Oe,c.multiple=!!D,g!=null?he(c,!!D,g,!1):S!=null&&he(c,!!D,S,!0);return;case"textarea":da("invalid",c),te=G=D=null;for(Oe in S)if(S.hasOwnProperty(Oe)&&(st=S[Oe],st!=null))switch(Oe){case"value":D=st;break;case"defaultValue":G=st;break;case"children":te=st;break;case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(91));break;default:fo(c,g,Oe,st,S,null)}St(c,D,G,te),Di(c);return;case"option":for(Ot in S)if(S.hasOwnProperty(Ot)&&(D=S[Ot],D!=null))switch(Ot){case"selected":c.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:fo(c,g,Ot,D,S,null)}return;case"dialog":da("cancel",c),da("close",c);break;case"iframe":case"object":da("load",c);break;case"video":case"audio":for(D=0;D<Am.length;D++)da(Am[D],c);break;case"image":da("error",c),da("load",c);break;case"details":da("toggle",c);break;case"embed":case"source":case"link":da("error",c),da("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(cn in S)if(S.hasOwnProperty(cn)&&(D=S[cn],D!=null))switch(cn){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:fo(c,g,cn,D,S,null)}return;default:if(Wn(g)){for(tr in S)S.hasOwnProperty(tr)&&(D=S[tr],D!==void 0&&Mv(c,g,tr,D,S,void 0));return}}for(st in S)S.hasOwnProperty(st)&&(D=S[st],D!=null&&fo(c,g,st,D,S,null))}function qx(c,g,S,D){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var G=null,te=null,Oe=null,st=null,Ot=null,cn=null,tr=null;for(Jn in S){var yr=S[Jn];if(S.hasOwnProperty(Jn)&&yr!=null)switch(Jn){case"checked":break;case"value":break;case"defaultValue":Ot=yr;default:D.hasOwnProperty(Jn)||fo(c,g,Jn,null,D,yr)}}for(var Nn in D){var Jn=D[Nn];if(yr=S[Nn],D.hasOwnProperty(Nn)&&(Jn!=null||yr!=null))switch(Nn){case"type":te=Jn;break;case"name":G=Jn;break;case"checked":cn=Jn;break;case"defaultChecked":tr=Jn;break;case"value":Oe=Jn;break;case"defaultValue":st=Jn;break;case"children":case"dangerouslySetInnerHTML":if(Jn!=null)throw Error(r(137,g));break;default:Jn!==yr&&fo(c,g,Nn,Jn,D,yr)}}Pi(c,Oe,st,Ot,cn,tr,te,G);return;case"select":Jn=Oe=st=Nn=null;for(te in S)if(Ot=S[te],S.hasOwnProperty(te)&&Ot!=null)switch(te){case"value":break;case"multiple":Jn=Ot;default:D.hasOwnProperty(te)||fo(c,g,te,null,D,Ot)}for(G in D)if(te=D[G],Ot=S[G],D.hasOwnProperty(G)&&(te!=null||Ot!=null))switch(G){case"value":Nn=te;break;case"defaultValue":st=te;break;case"multiple":Oe=te;default:te!==Ot&&fo(c,g,G,te,D,Ot)}g=st,S=Oe,D=Jn,Nn!=null?he(c,!!S,Nn,!1):!!D!=!!S&&(g!=null?he(c,!!S,g,!0):he(c,!!S,S?[]:"",!1));return;case"textarea":Jn=Nn=null;for(st in S)if(G=S[st],S.hasOwnProperty(st)&&G!=null&&!D.hasOwnProperty(st))switch(st){case"value":break;case"children":break;default:fo(c,g,st,null,D,G)}for(Oe in D)if(G=D[Oe],te=S[Oe],D.hasOwnProperty(Oe)&&(G!=null||te!=null))switch(Oe){case"value":Nn=G;break;case"defaultValue":Jn=G;break;case"children":break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(91));break;default:G!==te&&fo(c,g,Oe,G,D,te)}Ge(c,Nn,Jn);return;case"option":for(var ai in S)if(Nn=S[ai],S.hasOwnProperty(ai)&&Nn!=null&&!D.hasOwnProperty(ai))switch(ai){case"selected":c.selected=!1;break;default:fo(c,g,ai,null,D,Nn)}for(Ot in D)if(Nn=D[Ot],Jn=S[Ot],D.hasOwnProperty(Ot)&&Nn!==Jn&&(Nn!=null||Jn!=null))switch(Ot){case"selected":c.selected=Nn&&typeof Nn!="function"&&typeof Nn!="symbol";break;default:fo(c,g,Ot,Nn,D,Jn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Hi in S)Nn=S[Hi],S.hasOwnProperty(Hi)&&Nn!=null&&!D.hasOwnProperty(Hi)&&fo(c,g,Hi,null,D,Nn);for(cn in D)if(Nn=D[cn],Jn=S[cn],D.hasOwnProperty(cn)&&Nn!==Jn&&(Nn!=null||Jn!=null))switch(cn){case"children":case"dangerouslySetInnerHTML":if(Nn!=null)throw Error(r(137,g));break;default:fo(c,g,cn,Nn,D,Jn)}return;default:if(Wn(g)){for(var Bs in S)Nn=S[Bs],S.hasOwnProperty(Bs)&&Nn!==void 0&&!D.hasOwnProperty(Bs)&&Mv(c,g,Bs,void 0,D,Nn);for(tr in D)Nn=D[tr],Jn=S[tr],!D.hasOwnProperty(tr)||Nn===Jn||Nn===void 0&&Jn===void 0||Mv(c,g,tr,Nn,D,Jn);return}}for(var wn in S)Nn=S[wn],S.hasOwnProperty(wn)&&Nn!=null&&!D.hasOwnProperty(wn)&&fo(c,g,wn,null,D,Nn);for(yr in D)Nn=D[yr],Jn=S[yr],!D.hasOwnProperty(yr)||Nn===Jn||Nn==null&&Jn==null||fo(c,g,yr,Nn,D,Jn)}var m1=null,g1=null;function Gg(c){return c.nodeType===9?c:c.ownerDocument}function Rm(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v1(c,g){if(c===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&g==="foreignObject"?0:c}function Dm(c,g){return c==="textarea"||c==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Av=null;function Cv(){var c=window.event;return c&&c.type==="popstate"?c===Av?!1:(Av=c,!0):(Av=null,!1)}var qg=typeof setTimeout=="function"?setTimeout:void 0,Pv=typeof clearTimeout=="function"?clearTimeout:void 0,Hx=typeof Promise=="function"?Promise:void 0,jE=typeof queueMicrotask=="function"?queueMicrotask:typeof Hx<"u"?function(c){return Hx.resolve(null).then(c).catch(VE)}:qg;function VE(c){setTimeout(function(){throw c})}function Vd(c,g){var S=g,D=0;do{var G=S.nextSibling;if(c.removeChild(S),G&&G.nodeType===8)if(S=G.data,S==="/$"){if(D===0){c.removeChild(G),nc(g);return}D--}else S!=="$"&&S!=="$?"&&S!=="$!"||D++;S=G}while(S);nc(g)}function dl(c){var g=c.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var S=g;switch(g=g.nextSibling,S.nodeName){case"HTML":case"HEAD":case"BODY":dl(S),mi(S);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(S.rel.toLowerCase()==="stylesheet")continue}c.removeChild(S)}}function Gd(c,g,S,D){for(;c.nodeType===1;){var G=S;if(c.nodeName.toLowerCase()!==g.toLowerCase()){if(!D&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(D){if(!c[ra])switch(g){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(te=c.getAttribute("rel"),te==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(te!==G.rel||c.getAttribute("href")!==(G.href==null?null:G.href)||c.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin)||c.getAttribute("title")!==(G.title==null?null:G.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(te=c.getAttribute("src"),(te!==(G.src==null?null:G.src)||c.getAttribute("type")!==(G.type==null?null:G.type)||c.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin))&&te&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(g==="input"&&c.type==="hidden"){var te=G.name==null?null:""+G.name;if(G.type==="hidden"&&c.getAttribute("name")===te)return c}else return c;if(c=uh(c.nextSibling),c===null)break}return null}function y1(c,g,S){if(g==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!S||(c=uh(c.nextSibling),c===null))return null;return c}function uh(c){for(;c!=null;c=c.nextSibling){var g=c.nodeType;if(g===1||g===3)break;if(g===8){if(g=c.data,g==="$"||g==="$!"||g==="$?"||g==="F!"||g==="F")break;if(g==="/$")return null}}return c}function _1(c){c=c.previousSibling;for(var g=0;c;){if(c.nodeType===8){var S=c.data;if(S==="$"||S==="$!"||S==="$?"){if(g===0)return c;g--}else S==="/$"&&g++}c=c.previousSibling}return null}function Rv(c,g,S){switch(g=Gg(S),c){case"html":if(c=g.documentElement,!c)throw Error(r(452));return c;case"head":if(c=g.head,!c)throw Error(r(453));return c;case"body":if(c=g.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}var ch=new Map,b1=new Set;function Hg(c){return typeof c.getRootNode=="function"?c.getRootNode():c.ownerDocument}var Hf=le.d;le.d={f:$x,r:x1,D:$g,C:S1,L:Wx,m:E1,X:Wg,S:Dv,M:T1};function $x(){var c=Hf.f(),g=Bg();return c||g}function x1(c){var g=nt(c);g!==null&&g.tag===5&&g.type==="form"?dr(g):Hf.r(c)}var qd=typeof document>"u"?null:document;function w1(c,g,S){var D=qd;if(D&&typeof g=="string"&&g){var G=ti(g);G='link[rel="'+c+'"][href="'+G+'"]',typeof S=="string"&&(G+='[crossorigin="'+S+'"]'),b1.has(G)||(b1.add(G),c={rel:c,crossOrigin:S,href:g},D.querySelector(G)===null&&(g=D.createElement("link"),iu(g,"link",c),_n(g),D.head.appendChild(g)))}}function $g(c){Hf.D(c),w1("dns-prefetch",c,null)}function S1(c,g){Hf.C(c,g),w1("preconnect",c,g)}function Wx(c,g,S){Hf.L(c,g,S);var D=qd;if(D&&c&&g){var G='link[rel="preload"][as="'+ti(g)+'"]';g==="image"&&S&&S.imageSrcSet?(G+='[imagesrcset="'+ti(S.imageSrcSet)+'"]',typeof S.imageSizes=="string"&&(G+='[imagesizes="'+ti(S.imageSizes)+'"]')):G+='[href="'+ti(c)+'"]';var te=G;switch(g){case"style":te=Hd(c);break;case"script":te=p(c)}ch.has(te)||(c=j({rel:"preload",href:g==="image"&&S&&S.imageSrcSet?void 0:c,as:g},S),ch.set(te,c),D.querySelector(G)!==null||g==="style"&&D.querySelector(Xg(te))||g==="script"&&D.querySelector(_(te))||(g=D.createElement("link"),iu(g,"link",c),_n(g),D.head.appendChild(g)))}}function E1(c,g){Hf.m(c,g);var S=qd;if(S&&c){var D=g&&typeof g.as=="string"?g.as:"script",G='link[rel="modulepreload"][as="'+ti(D)+'"][href="'+ti(c)+'"]',te=G;switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":te=p(c)}if(!ch.has(te)&&(c=j({rel:"modulepreload",href:c},g),ch.set(te,c),S.querySelector(G)===null)){switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(S.querySelector(_(te)))return}D=S.createElement("link"),iu(D,"link",c),_n(D),S.head.appendChild(D)}}}function Dv(c,g,S){Hf.S(c,g,S);var D=qd;if(D&&c){var G=gn(D).hoistableStyles,te=Hd(c);g=g||"default";var Oe=G.get(te);if(!Oe){var st={loading:0,preload:null};if(Oe=D.querySelector(Xg(te)))st.loading=5;else{c=j({rel:"stylesheet",href:c,"data-precedence":g},S),(S=ch.get(te))&&O(c,S);var Ot=Oe=D.createElement("link");_n(Ot),iu(Ot,"link",c),Ot._p=new Promise(function(cn,tr){Ot.onload=cn,Ot.onerror=tr}),Ot.addEventListener("load",function(){st.loading|=1}),Ot.addEventListener("error",function(){st.loading|=2}),st.loading|=4,I(Oe,g,D)}Oe={type:"stylesheet",instance:Oe,count:1,state:st},G.set(te,Oe)}}}function Wg(c,g){Hf.X(c,g);var S=qd;if(S&&c){var D=gn(S).hoistableScripts,G=p(c),te=D.get(G);te||(te=S.querySelector(_(G)),te||(c=j({src:c,async:!0},g),(g=ch.get(G))&&U(c,g),te=S.createElement("script"),_n(te),iu(te,"link",c),S.head.appendChild(te)),te={type:"script",instance:te,count:1,state:null},D.set(G,te))}}function T1(c,g){Hf.M(c,g);var S=qd;if(S&&c){var D=gn(S).hoistableScripts,G=p(c),te=D.get(G);te||(te=S.querySelector(_(G)),te||(c=j({src:c,async:!0,type:"module"},g),(g=ch.get(G))&&U(c,g),te=S.createElement("script"),_n(te),iu(te,"link",c),S.head.appendChild(te)),te={type:"script",instance:te,count:1,state:null},D.set(G,te))}}function Lv(c,g,S,D){var G=(G=$t.current)?Hg(G):null;if(!G)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof S.precedence=="string"&&typeof S.href=="string"?(g=Hd(S.href),S=gn(G).hoistableStyles,D=S.get(g),D||(D={type:"style",instance:null,count:0,state:null},S.set(g,D)),D):{type:"void",instance:null,count:0,state:null};case"link":if(S.rel==="stylesheet"&&typeof S.href=="string"&&typeof S.precedence=="string"){c=Hd(S.href);var te=gn(G).hoistableStyles,Oe=te.get(c);if(Oe||(G=G.ownerDocument||G,Oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},te.set(c,Oe),(te=G.querySelector(Xg(c)))&&!te._p&&(Oe.instance=te,Oe.state.loading=5),ch.has(c)||(S={rel:"preload",as:"style",href:S.href,crossOrigin:S.crossOrigin,integrity:S.integrity,media:S.media,hrefLang:S.hrefLang,referrerPolicy:S.referrerPolicy},ch.set(c,S),te||u(G,c,S,Oe.state))),g&&D===null)throw Error(r(528,""));return Oe}if(g&&D!==null)throw Error(r(529,""));return null;case"script":return g=S.async,S=S.src,typeof S=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=p(S),S=gn(G).hoistableScripts,D=S.get(g),D||(D={type:"script",instance:null,count:0,state:null},S.set(g,D)),D):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Hd(c){return'href="'+ti(c)+'"'}function Xg(c){return'link[rel="stylesheet"]['+c+"]"}function m(c){return j({},c,{"data-precedence":c.precedence,precedence:null})}function u(c,g,S,D){c.querySelector('link[rel="preload"][as="style"]['+g+"]")?D.loading=1:(g=c.createElement("link"),D.preload=g,g.addEventListener("load",function(){return D.loading|=1}),g.addEventListener("error",function(){return D.loading|=2}),iu(g,"link",S),_n(g),c.head.appendChild(g))}function p(c){return'[src="'+ti(c)+'"]'}function _(c){return"script[async]"+c}function T(c,g,S){if(g.count++,g.instance===null)switch(g.type){case"style":var D=c.querySelector('style[data-href~="'+ti(S.href)+'"]');if(D)return g.instance=D,_n(D),D;var G=j({},S,{"data-href":S.href,"data-precedence":S.precedence,href:null,precedence:null});return D=(c.ownerDocument||c).createElement("style"),_n(D),iu(D,"style",G),I(D,S.precedence,c),g.instance=D;case"stylesheet":G=Hd(S.href);var te=c.querySelector(Xg(G));if(te)return g.state.loading|=4,g.instance=te,_n(te),te;D=m(S),(G=ch.get(G))&&O(D,G),te=(c.ownerDocument||c).createElement("link"),_n(te);var Oe=te;return Oe._p=new Promise(function(st,Ot){Oe.onload=st,Oe.onerror=Ot}),iu(te,"link",D),g.state.loading|=4,I(te,S.precedence,c),g.instance=te;case"script":return te=p(S.src),(G=c.querySelector(_(te)))?(g.instance=G,_n(G),G):(D=S,(G=ch.get(te))&&(D=j({},S),U(D,G)),c=c.ownerDocument||c,G=c.createElement("script"),_n(G),iu(G,"link",D),c.head.appendChild(G),g.instance=G);case"void":return null;default:throw Error(r(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(D=g.instance,g.state.loading|=4,I(D,S.precedence,c));return g.instance}function I(c,g,S){for(var D=S.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),G=D.length?D[D.length-1]:null,te=G,Oe=0;Oe<D.length;Oe++){var st=D[Oe];if(st.dataset.precedence===g)te=st;else if(te!==G)break}te?te.parentNode.insertBefore(c,te.nextSibling):(g=S.nodeType===9?S.head:S,g.insertBefore(c,g.firstChild))}function O(c,g){c.crossOrigin==null&&(c.crossOrigin=g.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=g.referrerPolicy),c.title==null&&(c.title=g.title)}function U(c,g){c.crossOrigin==null&&(c.crossOrigin=g.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=g.referrerPolicy),c.integrity==null&&(c.integrity=g.integrity)}var J=null;function ne(c,g,S){if(J===null){var D=new Map,G=J=new Map;G.set(S,D)}else G=J,D=G.get(S),D||(D=new Map,G.set(S,D));if(D.has(c))return D;for(D.set(c,null),S=S.getElementsByTagName(c),G=0;G<S.length;G++){var te=S[G];if(!(te[ra]||te[Er]||c==="link"&&te.getAttribute("rel")==="stylesheet")&&te.namespaceURI!=="http://www.w3.org/2000/svg"){var Oe=te.getAttribute(g)||"";Oe=c+Oe;var st=D.get(Oe);st?st.push(te):D.set(Oe,[te])}}return D}function ce(c,g,S){c=c.ownerDocument||c,c.head.insertBefore(S,g==="title"?c.querySelector("head > title"):null)}function _e(c,g,S){if(S===1||g.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return c=g.disabled,typeof g.precedence=="string"&&c==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function Re(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Le=null;function Fe(){}function Ye(c,g,S){if(Le===null)throw Error(r(475));var D=Le;if(g.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var G=Hd(S.href),te=c.querySelector(Xg(G));if(te){c=te._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(D.count++,D=wt.bind(D),c.then(D,D)),g.state.loading|=4,g.instance=te,_n(te);return}te=c.ownerDocument||c,S=m(S),(G=ch.get(G))&&O(S,G),te=te.createElement("link"),_n(te);var Oe=te;Oe._p=new Promise(function(st,Ot){Oe.onload=st,Oe.onerror=Ot}),iu(te,"link",S),g.instance=te}D.stylesheets===null&&(D.stylesheets=new Map),D.stylesheets.set(g,c),(c=g.state.preload)&&(g.state.loading&3)===0&&(D.count++,g=wt.bind(D),c.addEventListener("load",g),c.addEventListener("error",g))}}function ct(){if(Le===null)throw Error(r(475));var c=Le;return c.stylesheets&&c.count===0&&Rt(c,c.stylesheets),0<c.count?function(g){var S=setTimeout(function(){if(c.stylesheets&&Rt(c,c.stylesheets),c.unsuspend){var D=c.unsuspend;c.unsuspend=null,D()}},6e4);return c.unsuspend=g,function(){c.unsuspend=null,clearTimeout(S)}}:null}function wt(){if(this.count--,this.count===0){if(this.stylesheets)Rt(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Xt=null;function Rt(c,g){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Xt=new Map,g.forEach(Ie,c),Xt=null,wt.call(c))}function Ie(c,g){if(!(g.state.loading&4)){var S=Xt.get(c);if(S)var D=S.get(null);else{S=new Map,Xt.set(c,S);for(var G=c.querySelectorAll("link[data-precedence],style[data-precedence]"),te=0;te<G.length;te++){var Oe=G[te];(Oe.nodeName==="LINK"||Oe.getAttribute("media")!=="not all")&&(S.set(Oe.dataset.precedence,Oe),D=Oe)}D&&S.set(null,D)}G=g.instance,Oe=G.getAttribute("data-precedence"),te=S.get(Oe)||D,te===D&&S.set(null,G),S.set(Oe,G),this.count++,D=wt.bind(this),G.addEventListener("load",D),G.addEventListener("error",D),te?te.parentNode.insertBefore(G,te.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(G,c.firstChild)),g.state.loading|=4}}var at={$$typeof:b,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function It(c,g,S,D,G,te,Oe,st){this.tag=1,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zn(0),this.hiddenUpdates=Zn(null),this.identifierPrefix=D,this.onUncaughtError=G,this.onCaughtError=te,this.onRecoverableError=Oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=st,this.incompleteTransitions=new Map}function An(c,g,S,D,G,te,Oe,st,Ot,cn,tr,yr){return c=new It(c,g,S,Oe,st,Ot,cn,yr),g=1,te===!0&&(g|=24),te=qu(3,null,null,g),c.current=te,te.stateNode=c,g=Ph(),g.refCount++,c.pooledCache=g,g.refCount++,te.memoizedState={element:D,isDehydrated:S,cache:g},U_(te),c}function nr(c){return c?(c=Hs,c):Hs}function Dn(c,g,S,D,G,te){G=nr(G),D.context===null?D.context=G:D.pendingContext=G,D=Rd(g),D.payload={element:S},te=te===void 0?null:te,te!==null&&(D.callback=te),S=af(c,D,g),S!==null&&(kl(S,c,g),vp(S,c,g))}function Fn(c,g){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var S=c.retryLane;c.retryLane=S!==0&&S<g?S:g}}function ur(c,g){Fn(c,g),(c=c.alternate)&&Fn(c,g)}function ar(c){if(c.tag===13){var g=Lo(c,67108864);g!==null&&kl(g,c,67108864),ur(c,67108864)}}var pr=!0;function Vn(c,g,S,D){var G=Z.T;Z.T=null;var te=le.p;try{le.p=2,Qr(c,g,S,D)}finally{le.p=te,Z.T=G}}function kr(c,g,S,D){var G=Z.T;Z.T=null;var te=le.p;try{le.p=8,Qr(c,g,S,D)}finally{le.p=te,Z.T=G}}function Qr(c,g,S,D){if(pr){var G=Kr(D);if(G===null)jd(c,g,D,zr,S),ml(c,D);else if($c(G,c,g,S,D))D.stopPropagation();else if(ml(c,D),g&4&&-1<Fl.indexOf(c)){for(;G!==null;){var te=nt(G);if(te!==null)switch(te.tag){case 3:if(te=te.stateNode,te.current.memoizedState.isDehydrated){var Oe=lt(te.pendingLanes);if(Oe!==0){var st=te;for(st.pendingLanes|=2,st.entangledLanes|=2;Oe;){var Ot=1<<31-ke(Oe);st.entanglements[1]|=Ot,Oe&=~Ot}Ih(te),(fs&6)===0&&(bm=jt()+500,jg(0))}}break;case 13:st=Lo(te,2),st!==null&&kl(st,te,2),Bg(),ur(te,2)}if(te=Kr(D),te===null&&jd(c,g,D,zr,S),te===G)break;G=te}G!==null&&D.stopPropagation()}else jd(c,g,D,null,S)}}function Kr(c){return c=Ti(c),Ki(c)}var zr=null;function Ki(c){if(zr=null,c=no(c),c!==null){var g=pe(c);if(g===null)c=null;else{var S=g.tag;if(S===13){if(c=De(g),c!==null)return c;c=null}else if(S===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;c=null}else g!==c&&(c=null)}}return zr=c,null}function Oo(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vt()){case Pt:return 2;case vn:return 8;case hn:case pn:return 32;case nn:return 268435456;default:return 32}default:return 32}}var gs=!1,es=null,pl=null,ks=null,vs=new Map,ao=new Map,Ao=[],Fl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ml(c,g){switch(c){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":pl=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":vs.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":ao.delete(g.pointerId)}}function gl(c,g,S,D,G,te){return c===null||c.nativeEvent!==te?(c={blockedOn:g,domEventName:S,eventSystemFlags:D,nativeEvent:te,targetContainers:[G]},g!==null&&(g=nt(g),g!==null&&ar(g)),c):(c.eventSystemFlags|=D,g=c.targetContainers,G!==null&&g.indexOf(G)===-1&&g.push(G),c)}function $c(c,g,S,D,G){switch(g){case"focusin":return es=gl(es,c,g,S,D,G),!0;case"dragenter":return pl=gl(pl,c,g,S,D,G),!0;case"mouseover":return ks=gl(ks,c,g,S,D,G),!0;case"pointerover":var te=G.pointerId;return vs.set(te,gl(vs.get(te)||null,c,g,S,D,G)),!0;case"gotpointercapture":return te=G.pointerId,ao.set(te,gl(ao.get(te)||null,c,g,S,D,G)),!0}return!1}function Ks(c){var g=no(c.target);if(g!==null){var S=pe(g);if(S!==null){if(g=S.tag,g===13){if(g=De(S),g!==null){c.blockedOn=g,Hn(c.priority,function(){if(S.tag===13){var D=fl(),G=Lo(S,D);G!==null&&kl(G,S,D),ur(S,D)}});return}}else if(g===3&&S.stateNode.current.memoizedState.isDehydrated){c.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}c.blockedOn=null}function au(c){if(c.blockedOn!==null)return!1;for(var g=c.targetContainers;0<g.length;){var S=Kr(c.nativeEvent);if(S===null){S=c.nativeEvent;var D=new S.constructor(S.type,S);Lr=D,S.target.dispatchEvent(D),Lr=null}else return g=nt(S),g!==null&&ar(g),c.blockedOn=S,!1;g.shift()}return!0}function Fs(c,g,S){au(c)&&S.delete(g)}function vl(){gs=!1,es!==null&&au(es)&&(es=null),pl!==null&&au(pl)&&(pl=null),ks!==null&&au(ks)&&(ks=null),vs.forEach(Fs),ao.forEach(Fs)}function ys(c,g){c.blockedOn===g&&(c.blockedOn=null,gs||(gs=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vl)))}var ts=null;function po(c){ts!==c&&(ts=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ts===c&&(ts=null);for(var g=0;g<c.length;g+=3){var S=c[g],D=c[g+1],G=c[g+2];if(typeof D!="function"){if(Ki(D||S)===null)continue;break}var te=nt(S);te!==null&&(c.splice(g,3),g-=3,kn(te,{pending:!0,data:G,method:S.method,action:D},D,G))}}))}function nc(c){function g(Ot){return ys(Ot,c)}es!==null&&ys(es,c),pl!==null&&ys(pl,c),ks!==null&&ys(ks,c),vs.forEach(g),ao.forEach(g);for(var S=0;S<Ao.length;S++){var D=Ao[S];D.blockedOn===c&&(D.blockedOn=null)}for(;0<Ao.length&&(S=Ao[0],S.blockedOn===null);)Ks(S),S.blockedOn===null&&Ao.shift();if(S=(c.ownerDocument||c).$$reactFormReplay,S!=null)for(D=0;D<S.length;D+=3){var G=S[D],te=S[D+1],Oe=G[lr]||null;if(typeof te=="function")Oe||po(S);else if(Oe){var st=null;if(te&&te.hasAttribute("formAction")){if(G=te,Oe=te[lr]||null)st=Oe.formAction;else if(Ki(G)!==null)continue}else st=Oe.action;typeof st=="function"?S[D+1]=st:(S.splice(D,3),D-=3),po(S)}}}function $d(c){this._internalRoot=c}wc.prototype.render=$d.prototype.render=function(c){var g=this._internalRoot;if(g===null)throw Error(r(409));var S=g.current,D=fl();Dn(S,D,c,g,null,null)},wc.prototype.unmount=$d.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var g=c.containerInfo;c.tag===0&&Cp(),Dn(c.current,2,null,c,null,null),Bg(),g[Ri]=null}};function wc(c){this._internalRoot=c}wc.prototype.unstable_scheduleHydration=function(c){if(c){var g=sn();c={blockedOn:null,target:c,priority:g};for(var S=0;S<Ao.length&&g!==0&&g<Ao[S].priority;S++);Ao.splice(S,0,c),S===0&&Ks(c)}};var Xx=e.version;if(Xx!=="19.0.0")throw Error(r(527,Xx,"19.0.0"));le.findDOMNode=function(c){var g=c._reactInternals;if(g===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=Me(g),c=c!==null?fe(c):null,c=c===null?null:c.stateNode,c};var Lm={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,findFiberByHostInstance:no,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Pn=cf.inject(Lm),ir=cf}catch{}}return C1.createRoot=function(c,g){if(!i(c))throw Error(r(299));var S=!1,D="",G=tu,te=tc,Oe=nu,st=null;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(D=g.identifierPrefix),g.onUncaughtError!==void 0&&(G=g.onUncaughtError),g.onCaughtError!==void 0&&(te=g.onCaughtError),g.onRecoverableError!==void 0&&(Oe=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(st=g.unstable_transitionCallbacks)),g=An(c,1,!1,null,null,S,D,G,te,Oe,st,null),c[Ri]=g.current,Tv(c.nodeType===8?c.parentNode:c),new $d(g)},C1.hydrateRoot=function(c,g,S){if(!i(c))throw Error(r(299));var D=!1,G="",te=tu,Oe=tc,st=nu,Ot=null,cn=null;return S!=null&&(S.unstable_strictMode===!0&&(D=!0),S.identifierPrefix!==void 0&&(G=S.identifierPrefix),S.onUncaughtError!==void 0&&(te=S.onUncaughtError),S.onCaughtError!==void 0&&(Oe=S.onCaughtError),S.onRecoverableError!==void 0&&(st=S.onRecoverableError),S.unstable_transitionCallbacks!==void 0&&(Ot=S.unstable_transitionCallbacks),S.formState!==void 0&&(cn=S.formState)),g=An(c,1,!0,g,S??null,D,G,te,Oe,st,Ot,cn),g.context=nr(null),S=g.current,D=fl(),G=Rd(D),G.callback=null,af(S,G,D),g.current.lanes=D,Gn(g,D),Ih(g),c[Ri]=g.current,Tv(c),new wc(g)},C1.version="19.0.0",C1}var RL;function Bj(){if(RL)return HE.exports;RL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),HE.exports=Fj(),HE.exports}var zj=Bj();const Ab={black:"#000",white:"#fff"},Iv={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Ov={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Nv={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},kv={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Fv={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},P1={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Uj={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function A0(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const rp="$$material";function Ow(){return Ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ow.apply(null,arguments)}function jj(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Vj(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Gj=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Vj(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=jj(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Dc="-ms-",Nw="-moz-",mo="-webkit-",jB="comm",UP="rule",jP="decl",qj="@import",VB="@keyframes",Hj="@layer",$j=Math.abs,AS=String.fromCharCode,Wj=Object.assign;function Xj(t,e){return oc(t,0)^45?(((e<<2^oc(t,0))<<2^oc(t,1))<<2^oc(t,2))<<2^oc(t,3):0}function GB(t){return t.trim()}function Zj(t,e){return(t=e.exec(t))?t[0]:t}function go(t,e,n){return t.replace(e,n)}function AC(t,e){return t.indexOf(e)}function oc(t,e){return t.charCodeAt(e)|0}function Cb(t,e,n){return t.slice(e,n)}function Yd(t){return t.length}function VP(t){return t.length}function Zx(t,e){return e.push(t),t}function Yj(t,e){return t.map(e).join("")}var CS=1,o_=1,qB=0,yh=0,uu=0,E_="";function PS(t,e,n,r,i,o,l){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:CS,column:o_,length:l,return:""}}function R1(t,e){return Wj(PS("",null,null,"",null,null,0),t,{length:-t.length},e)}function Kj(){return uu}function Jj(){return uu=yh>0?oc(E_,--yh):0,o_--,uu===10&&(o_=1,CS--),uu}function Vh(){return uu=yh<qB?oc(E_,yh++):0,o_++,uu===10&&(o_=1,CS++),uu}function ip(){return oc(E_,yh)}function hw(){return yh}function Yb(t,e){return Cb(E_,t,e)}function Pb(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function HB(t){return CS=o_=1,qB=Yd(E_=t),yh=0,[]}function $B(t){return E_="",t}function fw(t){return GB(Yb(yh-1,CC(t===91?t+2:t===40?t+1:t)))}function Qj(t){for(;(uu=ip())&&uu<33;)Vh();return Pb(t)>2||Pb(uu)>3?"":" "}function eV(t,e){for(;--e&&Vh()&&!(uu<48||uu>102||uu>57&&uu<65||uu>70&&uu<97););return Yb(t,hw()+(e<6&&ip()==32&&Vh()==32))}function CC(t){for(;Vh();)switch(uu){case t:return yh;case 34:case 39:t!==34&&t!==39&&CC(uu);break;case 40:t===41&&CC(t);break;case 92:Vh();break}return yh}function tV(t,e){for(;Vh()&&t+uu!==57;)if(t+uu===84&&ip()===47)break;return"/*"+Yb(e,yh-1)+"*"+AS(t===47?t:Vh())}function nV(t){for(;!Pb(ip());)Vh();return Yb(t,yh)}function rV(t){return $B(dw("",null,null,null,[""],t=HB(t),0,[0],t))}function dw(t,e,n,r,i,o,l,a,h){for(var f=0,v=0,y=l,w=0,b=0,A=0,M=1,P=1,C=1,k=0,B="",z=i,q=o,V=r,W=B;P;)switch(A=k,k=Vh()){case 40:if(A!=108&&oc(W,y-1)==58){AC(W+=go(fw(k),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:W+=fw(k);break;case 9:case 10:case 13:case 32:W+=Qj(A);break;case 92:W+=eV(hw()-1,7);continue;case 47:switch(ip()){case 42:case 47:Zx(iV(tV(Vh(),hw()),e,n),h);break;default:W+="/"}break;case 123*M:a[f++]=Yd(W)*C;case 125*M:case 59:case 0:switch(k){case 0:case 125:P=0;case 59+v:C==-1&&(W=go(W,/\f/g,"")),b>0&&Yd(W)-y&&Zx(b>32?LL(W+";",r,n,y-1):LL(go(W," ","")+";",r,n,y-2),h);break;case 59:W+=";";default:if(Zx(V=DL(W,e,n,f,v,i,a,B,z=[],q=[],y),o),k===123)if(v===0)dw(W,e,V,V,z,o,y,a,q);else switch(w===99&&oc(W,3)===110?100:w){case 100:case 108:case 109:case 115:dw(t,V,V,r&&Zx(DL(t,V,V,0,0,i,a,B,i,z=[],y),q),i,q,y,a,r?z:q);break;default:dw(W,V,V,V,[""],q,0,a,q)}}f=v=b=0,M=C=1,B=W="",y=l;break;case 58:y=1+Yd(W),b=A;default:if(M<1){if(k==123)--M;else if(k==125&&M++==0&&Jj()==125)continue}switch(W+=AS(k),k*M){case 38:C=v>0?1:(W+="\f",-1);break;case 44:a[f++]=(Yd(W)-1)*C,C=1;break;case 64:ip()===45&&(W+=fw(Vh())),w=ip(),v=y=Yd(B=W+=nV(hw())),k++;break;case 45:A===45&&Yd(W)==2&&(M=0)}}return o}function DL(t,e,n,r,i,o,l,a,h,f,v){for(var y=i-1,w=i===0?o:[""],b=VP(w),A=0,M=0,P=0;A<r;++A)for(var C=0,k=Cb(t,y+1,y=$j(M=l[A])),B=t;C<b;++C)(B=GB(M>0?w[C]+" "+k:go(k,/&\f/g,w[C])))&&(h[P++]=B);return PS(t,e,n,i===0?UP:a,h,f,v)}function iV(t,e,n){return PS(t,e,n,jB,AS(Kj()),Cb(t,2,-2),0)}function LL(t,e,n,r){return PS(t,e,n,jP,Cb(t,0,r),Cb(t,r+1,-1),r)}function $y(t,e){for(var n="",r=VP(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function aV(t,e,n,r){switch(t.type){case Hj:if(t.children.length)break;case qj:case jP:return t.return=t.return||t.value;case jB:return"";case VB:return t.return=t.value+"{"+$y(t.children,r)+"}";case UP:t.value=t.props.join(",")}return Yd(n=$y(t.children,r))?t.return=t.value+"{"+n+"}":""}function oV(t){var e=VP(t);return function(n,r,i,o){for(var l="",a=0;a<e;a++)l+=t[a](n,r,i,o)||"";return l}}function sV(t){return function(e){e.root||(e=e.return)&&t(e)}}function WB(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var lV=function(e,n,r){for(var i=0,o=0;i=o,o=ip(),i===38&&o===12&&(n[r]=1),!Pb(o);)Vh();return Yb(e,yh)},uV=function(e,n){var r=-1,i=44;do switch(Pb(i)){case 0:i===38&&ip()===12&&(n[r]=1),e[r]+=lV(yh-1,n,r);break;case 2:e[r]+=fw(i);break;case 4:if(i===44){e[++r]=ip()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=AS(i)}while(i=Vh());return e},cV=function(e,n){return $B(uV(HB(e),n))},IL=new WeakMap,hV=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!IL.get(r))&&!i){IL.set(e,!0);for(var o=[],l=cV(n,o),a=r.props,h=0,f=0;h<l.length;h++)for(var v=0;v<a.length;v++,f++)e.props[f]=o[h]?l[h].replace(/&\f/g,a[v]):a[v]+" "+l[h]}}},fV=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function XB(t,e){switch(Xj(t,e)){case 5103:return mo+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return mo+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return mo+t+Nw+t+Dc+t+t;case 6828:case 4268:return mo+t+Dc+t+t;case 6165:return mo+t+Dc+"flex-"+t+t;case 5187:return mo+t+go(t,/(\w+).+(:[^]+)/,mo+"box-$1$2"+Dc+"flex-$1$2")+t;case 5443:return mo+t+Dc+"flex-item-"+go(t,/flex-|-self/,"")+t;case 4675:return mo+t+Dc+"flex-line-pack"+go(t,/align-content|flex-|-self/,"")+t;case 5548:return mo+t+Dc+go(t,"shrink","negative")+t;case 5292:return mo+t+Dc+go(t,"basis","preferred-size")+t;case 6060:return mo+"box-"+go(t,"-grow","")+mo+t+Dc+go(t,"grow","positive")+t;case 4554:return mo+go(t,/([^-])(transform)/g,"$1"+mo+"$2")+t;case 6187:return go(go(go(t,/(zoom-|grab)/,mo+"$1"),/(image-set)/,mo+"$1"),t,"")+t;case 5495:case 3959:return go(t,/(image-set\([^]*)/,mo+"$1$`$1");case 4968:return go(go(t,/(.+:)(flex-)?(.*)/,mo+"box-pack:$3"+Dc+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+mo+t+t;case 4095:case 3583:case 4068:case 2532:return go(t,/(.+)-inline(.+)/,mo+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Yd(t)-1-e>6)switch(oc(t,e+1)){case 109:if(oc(t,e+4)!==45)break;case 102:return go(t,/(.+:)(.+)-([^]+)/,"$1"+mo+"$2-$3$1"+Nw+(oc(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~AC(t,"stretch")?XB(go(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(oc(t,e+1)!==115)break;case 6444:switch(oc(t,Yd(t)-3-(~AC(t,"!important")&&10))){case 107:return go(t,":",":"+mo)+t;case 101:return go(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+mo+(oc(t,14)===45?"inline-":"")+"box$3$1"+mo+"$2$3$1"+Dc+"$2box$3")+t}break;case 5936:switch(oc(t,e+11)){case 114:return mo+t+Dc+go(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return mo+t+Dc+go(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return mo+t+Dc+go(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return mo+t+Dc+t+t}return t}var dV=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case jP:e.return=XB(e.value,e.length);break;case VB:return $y([R1(e,{value:go(e.value,"@","@"+mo)})],i);case UP:if(e.length)return Yj(e.props,function(o){switch(Zj(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return $y([R1(e,{props:[go(o,/:(read-\w+)/,":"+Nw+"$1")]})],i);case"::placeholder":return $y([R1(e,{props:[go(o,/:(plac\w+)/,":"+mo+"input-$1")]}),R1(e,{props:[go(o,/:(plac\w+)/,":"+Nw+"$1")]}),R1(e,{props:[go(o,/:(plac\w+)/,Dc+"input-$1")]})],i)}return""})}},pV=[dV],mV=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(M){var P=M.getAttribute("data-emotion");P.indexOf(" ")!==-1&&(document.head.appendChild(M),M.setAttribute("data-s",""))})}var i=e.stylisPlugins||pV,o={},l,a=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(M){for(var P=M.getAttribute("data-emotion").split(" "),C=1;C<P.length;C++)o[P[C]]=!0;a.push(M)});var h,f=[hV,fV];{var v,y=[aV,sV(function(M){v.insert(M)})],w=oV(f.concat(i,y)),b=function(P){return $y(rV(P),w)};h=function(P,C,k,B){v=k,b(P?P+"{"+C.styles+"}":C.styles),B&&(A.inserted[C.name]=!0)}}var A={key:n,sheet:new Gj({key:n,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:h};return A.sheet.hydrate(a),A},ZE={exports:{}},wo={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OL;function gV(){if(OL)return wo;OL=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,a=t?Symbol.for("react.context"):60110,h=t?Symbol.for("react.async_mode"):60111,f=t?Symbol.for("react.concurrent_mode"):60111,v=t?Symbol.for("react.forward_ref"):60112,y=t?Symbol.for("react.suspense"):60113,w=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,A=t?Symbol.for("react.lazy"):60116,M=t?Symbol.for("react.block"):60121,P=t?Symbol.for("react.fundamental"):60117,C=t?Symbol.for("react.responder"):60118,k=t?Symbol.for("react.scope"):60119;function B(q){if(typeof q=="object"&&q!==null){var V=q.$$typeof;switch(V){case e:switch(q=q.type,q){case h:case f:case r:case o:case i:case y:return q;default:switch(q=q&&q.$$typeof,q){case a:case v:case A:case b:case l:return q;default:return V}}case n:return V}}}function z(q){return B(q)===f}return wo.AsyncMode=h,wo.ConcurrentMode=f,wo.ContextConsumer=a,wo.ContextProvider=l,wo.Element=e,wo.ForwardRef=v,wo.Fragment=r,wo.Lazy=A,wo.Memo=b,wo.Portal=n,wo.Profiler=o,wo.StrictMode=i,wo.Suspense=y,wo.isAsyncMode=function(q){return z(q)||B(q)===h},wo.isConcurrentMode=z,wo.isContextConsumer=function(q){return B(q)===a},wo.isContextProvider=function(q){return B(q)===l},wo.isElement=function(q){return typeof q=="object"&&q!==null&&q.$$typeof===e},wo.isForwardRef=function(q){return B(q)===v},wo.isFragment=function(q){return B(q)===r},wo.isLazy=function(q){return B(q)===A},wo.isMemo=function(q){return B(q)===b},wo.isPortal=function(q){return B(q)===n},wo.isProfiler=function(q){return B(q)===o},wo.isStrictMode=function(q){return B(q)===i},wo.isSuspense=function(q){return B(q)===y},wo.isValidElementType=function(q){return typeof q=="string"||typeof q=="function"||q===r||q===f||q===o||q===i||q===y||q===w||typeof q=="object"&&q!==null&&(q.$$typeof===A||q.$$typeof===b||q.$$typeof===l||q.$$typeof===a||q.$$typeof===v||q.$$typeof===P||q.$$typeof===C||q.$$typeof===k||q.$$typeof===M)},wo.typeOf=B,wo}var NL;function vV(){return NL||(NL=1,ZE.exports=gV()),ZE.exports}var YE,kL;function yV(){if(kL)return YE;kL=1;var t=vV(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[t.ForwardRef]=r,o[t.Memo]=i;function l(A){return t.isMemo(A)?i:o[A.$$typeof]||e}var a=Object.defineProperty,h=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,v=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,w=Object.prototype;function b(A,M,P){if(typeof M!="string"){if(w){var C=y(M);C&&C!==w&&b(A,C,P)}var k=h(M);f&&(k=k.concat(f(M)));for(var B=l(A),z=l(M),q=0;q<k.length;++q){var V=k[q];if(!n[V]&&!(P&&P[V])&&!(z&&z[V])&&!(B&&B[V])){var W=v(M,V);try{a(A,V,W)}catch{}}}}return A}return YE=b,YE}yV();var _V=!0;function ZB(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var GP=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||_V===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},qP=function(e,n,r){GP(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function bV(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var xV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},wV=/[A-Z]|^ms/g,SV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,YB=function(e){return e.charCodeAt(1)===45},FL=function(e){return e!=null&&typeof e!="boolean"},KE=WB(function(t){return YB(t)?t:t.replace(wV,"-$&").toLowerCase()}),BL=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(SV,function(r,i,o){return Kd={name:i,styles:o,next:Kd},i})}return xV[e]!==1&&!YB(e)&&typeof n=="number"&&n!==0?n+"px":n};function Rb(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Kd={name:i.name,styles:i.styles,next:Kd},i.name;var o=n;if(o.styles!==void 0){var l=o.next;if(l!==void 0)for(;l!==void 0;)Kd={name:l.name,styles:l.styles,next:Kd},l=l.next;var a=o.styles+";";return a}return EV(t,e,n)}case"function":{if(t!==void 0){var h=Kd,f=n(t);return Kd=h,Rb(t,e,f)}break}}var v=n;if(e==null)return v;var y=e[v];return y!==void 0?y:v}function EV(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Rb(t,e,n[i])+";";else for(var o in n){var l=n[o];if(typeof l!="object"){var a=l;e!=null&&e[a]!==void 0?r+=o+"{"+e[a]+"}":FL(a)&&(r+=KE(o)+":"+BL(o,a)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var h=0;h<l.length;h++)FL(l[h])&&(r+=KE(o)+":"+BL(o,l[h])+";");else{var f=Rb(t,e,l);switch(o){case"animation":case"animationName":{r+=KE(o)+":"+f+";";break}default:r+=o+"{"+f+"}"}}}return r}var zL=/label:\s*([^\s;{]+)\s*(;|$)/g,Kd;function Kb(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Kd=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=Rb(n,e,o);else{var l=o;i+=l[0]}for(var a=1;a<t.length;a++)if(i+=Rb(n,e,t[a]),r){var h=o;i+=h[a]}zL.lastIndex=0;for(var f="",v;(v=zL.exec(i))!==null;)f+="-"+v[1];var y=bV(i)+f;return{name:y,styles:i,next:Kd}}var TV=function(e){return e()},KB=MC.useInsertionEffect?MC.useInsertionEffect:!1,JB=KB||TV,UL=KB||Et.useLayoutEffect,QB=Et.createContext(typeof HTMLElement<"u"?mV({key:"css"}):null);QB.Provider;var HP=function(e){return Et.forwardRef(function(n,r){var i=Et.useContext(QB);return e(n,i,r)})},Jb=Et.createContext({}),$P={}.hasOwnProperty,PC="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",MV=function(e,n){var r={};for(var i in n)$P.call(n,i)&&(r[i]=n[i]);return r[PC]=e,r},AV=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return GP(n,r,i),JB(function(){return qP(n,r,i)}),null},CV=HP(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[PC],o=[r],l="";typeof t.className=="string"?l=ZB(e.registered,o,t.className):t.className!=null&&(l=t.className+" ");var a=Kb(o,void 0,Et.useContext(Jb));l+=e.key+"-"+a.name;var h={};for(var f in t)$P.call(t,f)&&f!=="css"&&f!==PC&&(h[f]=t[f]);return h.className=l,n&&(h.ref=n),Et.createElement(Et.Fragment,null,Et.createElement(AV,{cache:e,serialized:a,isStringTag:typeof i=="string"}),Et.createElement(i,h))}),PV=CV,jL=function(e,n){var r=arguments;if(n==null||!$P.call(n,"css"))return Et.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=PV,o[1]=MV(e,n);for(var l=2;l<i;l++)o[l]=r[l];return Et.createElement.apply(null,o)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(jL||(jL={}));var RV=HP(function(t,e){var n=t.styles,r=Kb([n],void 0,Et.useContext(Jb)),i=Et.useRef();return UL(function(){var o=e.key+"-global",l=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,h=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(l.before=e.sheet.tags[0]),h!==null&&(a=!0,h.setAttribute("data-emotion",o),l.hydrate([h])),i.current=[l,a],function(){l.flush()}},[e]),UL(function(){var o=i.current,l=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&qP(e,r.next,!0),l.tags.length){var h=l.tags[l.tags.length-1].nextElementSibling;l.before=h,l.flush()}e.insert("",r,l,!1)},[e,r.name]),null});function WP(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Kb(e)}function Qb(){var t=WP.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var DV=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,LV=WB(function(t){return DV.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),IV=LV,OV=function(e){return e!=="theme"},VL=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?IV:OV},GL=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(l){return e.__emotion_forwardProp(l)&&o(l)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},NV=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return GP(n,r,i),JB(function(){return qP(n,r,i)}),null},kV=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,l;n!==void 0&&(o=n.label,l=n.target);var a=GL(e,n,r),h=a||VL(i),f=!h("as");return function(){var v=arguments,y=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&y.push("label:"+o+";"),v[0]==null||v[0].raw===void 0)y.push.apply(y,v);else{var w=v[0];y.push(w[0]);for(var b=v.length,A=1;A<b;A++)y.push(v[A],w[A])}var M=HP(function(P,C,k){var B=f&&P.as||i,z="",q=[],V=P;if(P.theme==null){V={};for(var W in P)V[W]=P[W];V.theme=Et.useContext(Jb)}typeof P.className=="string"?z=ZB(C.registered,q,P.className):P.className!=null&&(z=P.className+" ");var Y=Kb(y.concat(q),C.registered,V);z+=C.key+"-"+Y.name,l!==void 0&&(z+=" "+l);var Z=f&&a===void 0?VL(B):h,j={};for(var K in P)f&&K==="as"||Z(K)&&(j[K]=P[K]);return j.className=z,k&&(j.ref=k),Et.createElement(Et.Fragment,null,Et.createElement(NV,{cache:C,serialized:Y,isStringTag:typeof B=="string"}),Et.createElement(B,j))});return M.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",M.defaultProps=e.defaultProps,M.__emotion_real=M,M.__emotion_base=i,M.__emotion_styles=y,M.__emotion_forwardProp=a,Object.defineProperty(M,"toString",{value:function(){return"."+l}}),M.withComponent=function(P,C){var k=t(P,Ow({},n,C,{shouldForwardProp:GL(M,C,!0)}));return k.apply(void 0,y)},M}},FV=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],RC=kV.bind(null);FV.forEach(function(t){RC[t]=RC(t)});var JE={exports:{}},QE,qL;function BV(){if(qL)return QE;qL=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return QE=t,QE}var eT,HL;function zV(){if(HL)return eT;HL=1;var t=BV();function e(){}function n(){}return n.resetWarningCache=e,eT=function(){function r(l,a,h,f,v,y){if(y!==t){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},eT}var $L;function UV(){return $L||($L=1,JE.exports=zV()()),JE.exports}var jV=UV();const Sr=S_(jV);function VV(t){return t==null||Object.keys(t).length===0}function ez(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(VV(i)?n:i):e;return Ln.jsx(RV,{styles:r})}/**
 * @mui/styled-engine v6.4.8
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function tz(t,e){return RC(t,e)}function GV(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const WL=[];function XL(t){return WL[0]=t,Kb(WL)}var tT={exports:{}},No={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZL;function qV(){if(ZL)return No;ZL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),b=Symbol.for("react.client.reference");function A(M){if(typeof M=="object"&&M!==null){var P=M.$$typeof;switch(P){case t:switch(M=M.type,M){case n:case i:case r:case h:case f:return M;default:switch(M=M&&M.$$typeof,M){case l:case a:case y:case v:return M;case o:return M;default:return P}}case e:return P}}}return No.ContextConsumer=o,No.ContextProvider=l,No.Element=t,No.ForwardRef=a,No.Fragment=n,No.Lazy=y,No.Memo=v,No.Portal=e,No.Profiler=i,No.StrictMode=r,No.Suspense=h,No.SuspenseList=f,No.isContextConsumer=function(M){return A(M)===o},No.isContextProvider=function(M){return A(M)===l},No.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},No.isForwardRef=function(M){return A(M)===a},No.isFragment=function(M){return A(M)===n},No.isLazy=function(M){return A(M)===y},No.isMemo=function(M){return A(M)===v},No.isPortal=function(M){return A(M)===e},No.isProfiler=function(M){return A(M)===i},No.isStrictMode=function(M){return A(M)===r},No.isSuspense=function(M){return A(M)===h},No.isSuspenseList=function(M){return A(M)===f},No.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===n||M===i||M===r||M===h||M===f||M===w||typeof M=="object"&&M!==null&&(M.$$typeof===y||M.$$typeof===v||M.$$typeof===l||M.$$typeof===o||M.$$typeof===a||M.$$typeof===b||M.getModuleId!==void 0)},No.typeOf=A,No}var YL;function HV(){return YL||(YL=1,tT.exports=qV()),tT.exports}var nz=HV();function Qd(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function rz(t){if(Et.isValidElement(t)||nz.isValidElementType(t)||!Qd(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=rz(t[n])}),e}function Gh(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Qd(t)&&Qd(e)&&Object.keys(e).forEach(i=>{Et.isValidElement(e[i])||nz.isValidElementType(e[i])?r[i]=e[i]:Qd(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Qd(t[i])?r[i]=Gh(t[i],e[i],n):n.clone?r[i]=Qd(e[i])?rz(e[i]):e[i]:r[i]=e[i]}),r}const $V=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function WV(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,o=$V(e),l=Object.keys(o);function a(w){return`@media (min-width:${typeof e[w]=="number"?e[w]:w}${n})`}function h(w){return`@media (max-width:${(typeof e[w]=="number"?e[w]:w)-r/100}${n})`}function f(w,b){const A=l.indexOf(b);return`@media (min-width:${typeof e[w]=="number"?e[w]:w}${n}) and (max-width:${(A!==-1&&typeof e[l[A]]=="number"?e[l[A]]:b)-r/100}${n})`}function v(w){return l.indexOf(w)+1<l.length?f(w,l[l.indexOf(w)+1]):a(w)}function y(w){const b=l.indexOf(w);return b===0?a(l[1]):b===l.length-1?h(l[b]):f(w,l[l.indexOf(w)+1]).replace("@media","@media not all and")}return{keys:l,values:o,up:a,down:h,between:f,only:v,not:y,unit:n,...i}}function XV(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var l,a;const o=/min-width:\s*([0-9.]+)/;return+(((l=r.match(o))==null?void 0:l[1])||0)-+(((a=i.match(o))==null?void 0:a[1])||0)});return n.length?n.reduce((r,i)=>{const o=e[i];return delete r[i],r[i]=o,r},{...e}):e}function ZV(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function YV(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(o)}function KV(t){const e=(o,l)=>o.replace("@media",l?`@container ${l}`:"@container");function n(o,l){o.up=(...a)=>e(t.breakpoints.up(...a),l),o.down=(...a)=>e(t.breakpoints.down(...a),l),o.between=(...a)=>e(t.breakpoints.between(...a),l),o.only=(...a)=>e(t.breakpoints.only(...a),l),o.not=(...a)=>{const h=e(t.breakpoints.not(...a),l);return h.includes("not all and")?h.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):h}}const r={},i=o=>(n(r,o),r);return n(i),{...t,containerQueries:i}}const JV={borderRadius:4};function pb(t,e){return e?Gh(t,e,{clone:!1}):t}const RS={xs:0,sm:600,md:900,lg:1200,xl:1536},KL={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${RS[t]}px)`},QV={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:RS[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Qp(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||KL;return e.reduce((l,a,h)=>(l[o.up(o.keys[h])]=n(e[h]),l),{})}if(typeof e=="object"){const o=r.breakpoints||KL;return Object.keys(e).reduce((l,a)=>{if(ZV(o.keys,a)){const h=YV(r.containerQueries?r:QV,a);h&&(l[h]=n(e[a],a))}else if(Object.keys(o.values||RS).includes(a)){const h=o.up(a);l[h]=n(e[a],a)}else{const h=a;l[h]=e[h]}return l},{})}return n(e)}function eG(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function tG(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function pi(t){if(typeof t!="string")throw new Error(A0(7));return t.charAt(0).toUpperCase()+t.slice(1)}function DS(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function kw(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=DS(t,n)||r,e&&(i=e(i,r,t)),i}function Vl(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=l=>{if(l[e]==null)return null;const a=l[e],h=l.theme,f=DS(h,r)||{};return Qp(l,a,y=>{let w=kw(f,i,y);return y===w&&typeof y=="string"&&(w=kw(f,i,`${e}${y==="default"?"":pi(y)}`,y)),n===!1?w:{[n]:w}})};return o.propTypes={},o.filterProps=[e],o}function nG(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const rG={m:"margin",p:"padding"},iG={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},JL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},aG=nG(t=>{if(t.length>2)if(JL[t])t=JL[t];else return[t];const[e,n]=t.split(""),r=rG[e],i=iG[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),XP=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],ZP=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...XP,...ZP];function ex(t,e,n,r){const i=DS(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const l=Math.abs(o),a=i[l];return o>=0?a:typeof a=="number"?-a:`-${a}`}:typeof i=="function"?i:()=>{}}function YP(t){return ex(t,"spacing",8)}function tx(t,e){return typeof e=="string"||e==null?e:t(e)}function oG(t,e){return n=>t.reduce((r,i)=>(r[i]=tx(e,n),r),{})}function sG(t,e,n,r){if(!e.includes(n))return null;const i=aG(n),o=oG(i,r),l=t[n];return Qp(t,l,o)}function iz(t,e){const n=YP(t.theme);return Object.keys(t).map(r=>sG(t,e,r,n)).reduce(pb,{})}function bl(t){return iz(t,XP)}bl.propTypes={};bl.filterProps=XP;function xl(t){return iz(t,ZP)}xl.propTypes={};xl.filterProps=ZP;function az(t=8,e=YP({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const l=e(o);return typeof l=="number"?`${l}px`:l}).join(" ");return n.mui=!0,n}function LS(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?pb(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function mf(t){return typeof t!="number"?t:`${t}px solid`}function Af(t,e){return Vl({prop:t,themeKey:"borders",transform:e})}const lG=Af("border",mf),uG=Af("borderTop",mf),cG=Af("borderRight",mf),hG=Af("borderBottom",mf),fG=Af("borderLeft",mf),dG=Af("borderColor"),pG=Af("borderTopColor"),mG=Af("borderRightColor"),gG=Af("borderBottomColor"),vG=Af("borderLeftColor"),yG=Af("outline",mf),_G=Af("outlineColor"),IS=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=ex(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:tx(e,r)});return Qp(t,t.borderRadius,n)}return null};IS.propTypes={};IS.filterProps=["borderRadius"];LS(lG,uG,cG,hG,fG,dG,pG,mG,gG,vG,IS,yG,_G);const OS=t=>{if(t.gap!==void 0&&t.gap!==null){const e=ex(t.theme,"spacing",8),n=r=>({gap:tx(e,r)});return Qp(t,t.gap,n)}return null};OS.propTypes={};OS.filterProps=["gap"];const NS=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=ex(t.theme,"spacing",8),n=r=>({columnGap:tx(e,r)});return Qp(t,t.columnGap,n)}return null};NS.propTypes={};NS.filterProps=["columnGap"];const kS=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=ex(t.theme,"spacing",8),n=r=>({rowGap:tx(e,r)});return Qp(t,t.rowGap,n)}return null};kS.propTypes={};kS.filterProps=["rowGap"];const bG=Vl({prop:"gridColumn"}),xG=Vl({prop:"gridRow"}),wG=Vl({prop:"gridAutoFlow"}),SG=Vl({prop:"gridAutoColumns"}),EG=Vl({prop:"gridAutoRows"}),TG=Vl({prop:"gridTemplateColumns"}),MG=Vl({prop:"gridTemplateRows"}),AG=Vl({prop:"gridTemplateAreas"}),CG=Vl({prop:"gridArea"});LS(OS,NS,kS,bG,xG,wG,SG,EG,TG,MG,AG,CG);function Wy(t,e){return e==="grey"?e:t}const PG=Vl({prop:"color",themeKey:"palette",transform:Wy}),RG=Vl({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Wy}),DG=Vl({prop:"backgroundColor",themeKey:"palette",transform:Wy});LS(PG,RG,DG);function Uh(t){return t<=1&&t!==0?`${t*100}%`:t}const LG=Vl({prop:"width",transform:Uh}),KP=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,o,l,a,h;const r=((l=(o=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:o.values)==null?void 0:l[n])||RS[n];return r?((h=(a=t.theme)==null?void 0:a.breakpoints)==null?void 0:h.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Uh(n)}};return Qp(t,t.maxWidth,e)}return null};KP.filterProps=["maxWidth"];const IG=Vl({prop:"minWidth",transform:Uh}),OG=Vl({prop:"height",transform:Uh}),NG=Vl({prop:"maxHeight",transform:Uh}),kG=Vl({prop:"minHeight",transform:Uh});Vl({prop:"size",cssProperty:"width",transform:Uh});Vl({prop:"size",cssProperty:"height",transform:Uh});const FG=Vl({prop:"boxSizing"});LS(LG,KP,IG,OG,NG,kG,FG);const nx={border:{themeKey:"borders",transform:mf},borderTop:{themeKey:"borders",transform:mf},borderRight:{themeKey:"borders",transform:mf},borderBottom:{themeKey:"borders",transform:mf},borderLeft:{themeKey:"borders",transform:mf},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:mf},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:IS},color:{themeKey:"palette",transform:Wy},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Wy},backgroundColor:{themeKey:"palette",transform:Wy},p:{style:xl},pt:{style:xl},pr:{style:xl},pb:{style:xl},pl:{style:xl},px:{style:xl},py:{style:xl},padding:{style:xl},paddingTop:{style:xl},paddingRight:{style:xl},paddingBottom:{style:xl},paddingLeft:{style:xl},paddingX:{style:xl},paddingY:{style:xl},paddingInline:{style:xl},paddingInlineStart:{style:xl},paddingInlineEnd:{style:xl},paddingBlock:{style:xl},paddingBlockStart:{style:xl},paddingBlockEnd:{style:xl},m:{style:bl},mt:{style:bl},mr:{style:bl},mb:{style:bl},ml:{style:bl},mx:{style:bl},my:{style:bl},margin:{style:bl},marginTop:{style:bl},marginRight:{style:bl},marginBottom:{style:bl},marginLeft:{style:bl},marginX:{style:bl},marginY:{style:bl},marginInline:{style:bl},marginInlineStart:{style:bl},marginInlineEnd:{style:bl},marginBlock:{style:bl},marginBlockStart:{style:bl},marginBlockEnd:{style:bl},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:OS},rowGap:{style:kS},columnGap:{style:NS},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Uh},maxWidth:{style:KP},minWidth:{transform:Uh},height:{transform:Uh},maxHeight:{transform:Uh},minHeight:{transform:Uh},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function BG(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function zG(t,e){return typeof t=="function"?t(e):t}function UG(){function t(n,r,i,o){const l={[n]:r,theme:i},a=o[n];if(!a)return{[n]:r};const{cssProperty:h=n,themeKey:f,transform:v,style:y}=a;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[n]:r};const w=DS(i,f)||{};return y?y(l):Qp(l,r,A=>{let M=kw(w,v,A);return A===M&&typeof A=="string"&&(M=kw(w,v,`${n}${A==="default"?"":pi(A)}`,A)),h===!1?M:{[h]:M}})}function e(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??nx;function l(a){let h=a;if(typeof a=="function")h=a(i);else if(typeof a!="object")return a;if(!h)return null;const f=eG(i.breakpoints),v=Object.keys(f);let y=f;return Object.keys(h).forEach(w=>{const b=zG(h[w],i);if(b!=null)if(typeof b=="object")if(o[w])y=pb(y,t(w,b,i,o));else{const A=Qp({theme:i},b,M=>({[w]:M}));BG(A,b)?y[w]=e({sx:b,theme:i}):y=pb(y,A)}else y=pb(y,t(w,b,i,o))}),XV(i,tG(v,y))}return Array.isArray(r)?r.map(l):l(r)}return e}const ag=UG();ag.filterProps=["sx"];function jG(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function FS(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={},...l}=t,a=WV(n),h=az(i);let f=Gh({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:h,shape:{...JV,...o}},l);return f=KV(f),f.applyStyles=jG,f=e.reduce((v,y)=>Gh(v,y),f),f.unstable_sxConfig={...nx,...l==null?void 0:l.unstable_sxConfig},f.unstable_sx=function(y){return ag({sx:y,theme:this})},f}function VG(t){return Object.keys(t).length===0}function oz(t=null){const e=Et.useContext(Jb);return!e||VG(e)?t:e}const GG=FS();function BS(t=GG){return oz(t)}function qG({styles:t,themeId:e,defaultTheme:n={}}){const r=BS(n),i=typeof t=="function"?t(e&&r[e]||r):t;return Ln.jsx(ez,{styles:i})}const HG=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??nx;return Object.keys(t).forEach(i=>{n[i]?e.systemProps[i]=t[i]:e.otherProps[i]=t[i]}),e};function sz(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=HG(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...l)=>{const a=e(...l);return Qd(a)?{...r,...a}:r}:o={...r,...e},{...i,sx:o}}const QL=t=>t,$G=()=>{let t=QL;return{configure(e){t=e},generate(e){return t(e)},reset(){t=QL}}},JP=$G();function lz(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=lz(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ji(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=lz(t))&&(r&&(r+=" "),r+=e);return r}function uz(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=tz("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(ag);return Et.forwardRef(function(h,f){const v=BS(n),{className:y,component:w="div",...b}=sz(h);return Ln.jsx(o,{as:w,ref:f,className:Ji(y,i?i(r):r),theme:e&&v[e]||v,...b})})}const WG={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Qs(t,e,n="Mui"){const r=WG[e];return r?`${n}-${r}`:`${JP.generate(t)}-${e}`}function Ss(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Qs(t,i,n)}),r}const XG=Ss("MuiBox",["root"]),ZG=uz({defaultClassName:XG.root,generateClassName:JP.generate});function cz(t){const{variants:e,...n}=t,r={variants:e,style:XL(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=XL(i.style))}),r}const YG=FS();function nT(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function KG(t){return t?(e,n)=>n[t]:null}function JG(t,e,n){t.theme=eq(t.theme)?n:t.theme[e]||t.theme}function pw(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>pw(t,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:i,...o}=n;r=o}return hz(t,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function hz(t,e,n=[]){var i;let r;e:for(let o=0;o<e.length;o+=1){const l=e[o];if(typeof l.props=="function"){if(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),!l.props(r))continue}else for(const a in l.props)if(t[a]!==l.props[a]&&((i=t.ownerState)==null?void 0:i[a])!==l.props[a])continue e;typeof l.style=="function"?(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),n.push(l.style(r))):n.push(l.style)}return n}function fz(t={}){const{themeId:e,defaultTheme:n=YG,rootShouldForwardProp:r=nT,slotShouldForwardProp:i=nT}=t;function o(a){JG(a,e,n)}return(a,h={})=>{GV(a,q=>q.filter(V=>V!==ag));const{name:f,slot:v,skipVariantsResolver:y,skipSx:w,overridesResolver:b=KG(nq(v)),...A}=h,M=y!==void 0?y:v&&v!=="Root"&&v!=="root"||!1,P=w||!1;let C=nT;v==="Root"||v==="root"?C=r:v?C=i:tq(a)&&(C=void 0);const k=tz(a,{shouldForwardProp:C,label:QG(),...A}),B=q=>{if(typeof q=="function"&&q.__emotion_real!==q)return function(W){return pw(W,q)};if(Qd(q)){const V=cz(q);return V.variants?function(Y){return pw(Y,V)}:V.style}return q},z=(...q)=>{const V=[],W=q.map(B),Y=[];if(V.push(o),f&&b&&Y.push(function(re){var ue,Te;const se=(Te=(ue=re.theme.components)==null?void 0:ue[f])==null?void 0:Te.styleOverrides;if(!se)return null;const de={};for(const pe in se)de[pe]=pw(re,se[pe]);return b(re,de)}),f&&!M&&Y.push(function(re){var de,ue;const ie=re.theme,se=(ue=(de=ie==null?void 0:ie.components)==null?void 0:de[f])==null?void 0:ue.variants;return se?hz(re,se):null}),P||Y.push(ag),Array.isArray(W[0])){const K=W.shift(),re=new Array(V.length).fill(""),ie=new Array(Y.length).fill("");let se;se=[...re,...K,...ie],se.raw=[...re,...K.raw,...ie],V.unshift(se)}const Z=[...V,...W,...Y],j=k(...Z);return a.muiName&&(j.muiName=a.muiName),j};return k.withConfig&&(z.withConfig=k.withConfig),z}}function QG(t,e){return void 0}function eq(t){for(const e in t)return!1;return!0}function tq(t){return typeof t=="string"&&t.charCodeAt(0)>96}function nq(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const j0=fz();function Db(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=r;if(i==="components"||i==="slots")n[i]={...t[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const o=t[i],l=e[i];if(!l)n[i]=o||{};else if(!o)n[i]=l;else{n[i]={...l};for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)){const h=a;n[i][h]=Db(o[h],l[h])}}}else n[i]===void 0&&(n[i]=t[i])}return n}function rq(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:Db(e.components[n].defaultProps,r)}function iq({props:t,name:e,defaultTheme:n,themeId:r}){let i=BS(n);return r&&(i=i[r]||i),rq({theme:i,name:e,props:t})}const Lb=typeof window<"u"?Et.useLayoutEffect:Et.useEffect;function py(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function QP(t,e=0,n=1){return py(t,e,n)}function aq(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function og(t){if(t.type)return t;if(t.charAt(0)==="#")return og(aq(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(A0(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(A0(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const oq=t=>{const e=og(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},X1=(t,e)=>{try{return oq(t)}catch{return t}};function zS(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function dz(t){t=og(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),l=(f,v=(f+n/30)%12)=>i-o*Math.max(Math.min(v-3,9-v,1),-1);let a="rgb";const h=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return t.type==="hsla"&&(a+="a",h.push(e[3])),zS({type:a,values:h})}function DC(t){t=og(t);let e=t.type==="hsl"||t.type==="hsla"?og(dz(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function sq(t,e){const n=DC(t),r=DC(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function mh(t,e){return t=og(t),e=QP(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,zS(t)}function Yx(t,e,n){try{return mh(t,e)}catch{return t}}function Ib(t,e){if(t=og(t),e=QP(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return zS(t)}function ns(t,e,n){try{return Ib(t,e)}catch{return t}}function Ob(t,e){if(t=og(t),e=QP(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return zS(t)}function rs(t,e,n){try{return Ob(t,e)}catch{return t}}function lq(t,e=.15){return DC(t)>.5?Ib(t,e):Ob(t,e)}function Kx(t,e,n){try{return lq(t,e)}catch{return t}}function eI(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function uq(t,e){var n,r,i;return Et.isValidElement(t)&&e.indexOf(t.type.muiName??((i=(r=(n=t.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:i.muiName))!==-1}function ad(t){return t&&t.ownerDocument||document}function Fw(t){return ad(t).defaultView||window}function LC(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let tI=0;function cq(t){const[e,n]=Et.useState(t),r=t||e;return Et.useEffect(()=>{e==null&&(tI+=1,n(`mui-${tI}`))},[e]),r}const hq={...MC},nI=hq.useId;function eR(t){if(nI!==void 0){const e=nI();return t??e}return cq(t)}function pz({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=Et.useRef(t!==void 0),[o,l]=Et.useState(e),a=i?t:o,h=Et.useCallback(f=>{i||l(f)},[]);return[a,h]}function Xp(t){const e=Et.useRef(t);return Lb(()=>{e.current=t}),Et.useRef((...n)=>(0,e.current)(...n)).current}function up(...t){return Et.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{LC(n,e)})},t)}const rI={};function mz(t,e){const n=Et.useRef(rI);return n.current===rI&&(n.current=t(e)),n}const fq=[];function dq(t){Et.useEffect(t,fq)}class tR{constructor(){M1(this,"currentId",null);M1(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});M1(this,"disposeEffect",()=>this.clear)}static create(){return new tR}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function pq(){const t=mz(tR.create).current;return dq(t.disposeEffect),t}function Bw(t){try{return t.matches(":focus-visible")}catch{}return!1}function mq(t=window){const e=t.document.documentElement.clientWidth;return t.innerWidth-e}const gq={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Tl(t,e,n=void 0){const r={};for(const i in t){const o=t[i];let l="",a=!0;for(let h=0;h<o.length;h+=1){const f=o[h];f&&(l+=(a===!0?"":" ")+e(f),a=!1,n&&n[f]&&(l+=" "+n[f]))}r[i]=l}return r}function vq(t){return typeof t=="string"}function gz(t,e,n){return t===void 0||vq(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function mb(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function iI(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function vz(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const b=Ji(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),A={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},M={...n,...i,...r};return b.length>0&&(M.className=b),Object.keys(A).length>0&&(M.style=A),{props:M,internalRef:void 0}}const l=mb({...i,...r}),a=iI(r),h=iI(i),f=e(l),v=Ji(f==null?void 0:f.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),y={...f==null?void 0:f.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},w={...f,...n,...h,...a};return v.length>0&&(w.className=v),Object.keys(y).length>0&&(w.style=y),{props:w,internalRef:f.ref}}function yz(t,e,n){return typeof t=="function"?t(e,n):t}function Im(t){var y;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=t,l=i?{}:yz(n,r),{props:a,internalRef:h}=vz({...o,externalSlotProps:l}),f=up(h,l==null?void 0:l.ref,(y=t.additionalProps)==null?void 0:y.ref);return gz(e,{...a,ref:f},r)}function nR(t){var e;return parseInt(Et.version,10)>=19?((e=t==null?void 0:t.props)==null?void 0:e.ref)||null:(t==null?void 0:t.ref)||null}const _z=Et.createContext(null);function rR(){return Et.useContext(_z)}const yq=typeof Symbol=="function"&&Symbol.for,_q=yq?Symbol.for("mui.nested"):"__THEME_NESTED__";function bq(t,e){return typeof e=="function"?e(t):{...t,...e}}function xq(t){const{children:e,theme:n}=t,r=rR(),i=Et.useMemo(()=>{const o=r===null?{...n}:bq(r,n);return o!=null&&(o[_q]=r!==null),o},[n,r]);return Ln.jsx(_z.Provider,{value:i,children:e})}const bz=Et.createContext();function wq({value:t,...e}){return Ln.jsx(bz.Provider,{value:t??!0,...e})}const Sq=()=>Et.useContext(bz)??!1,xz=Et.createContext(void 0);function Eq({value:t,children:e}){return Ln.jsx(xz.Provider,{value:t,children:e})}function Tq(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?Db(i.defaultProps,r):!i.styleOverrides&&!i.variants?Db(i,r):r}function Mq({props:t,name:e}){const n=Et.useContext(xz);return Tq({props:t,name:e,theme:{components:n}})}const aI={};function oI(t,e,n,r=!1){return Et.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const o=n(i),l=t?{...e,[t]:o}:o;return r?()=>l:l}return t?{...e,[t]:n}:{...e,...n}},[t,e,n,r])}function wz(t){const{children:e,theme:n,themeId:r}=t,i=oz(aI),o=rR()||aI,l=oI(r,i,n),a=oI(r,o,n,!0),h=(r?l[r]:l).direction==="rtl";return Ln.jsx(xq,{theme:a,children:Ln.jsx(Jb.Provider,{value:l,children:Ln.jsx(wq,{value:h,children:Ln.jsx(Eq,{value:r?l[r].components:l.components,children:e})})})})}const sI={theme:void 0};function Aq(t){let e,n;return function(i){let o=e;return(o===void 0||i.theme!==n)&&(sI.theme=i.theme,o=cz(t(sI)),e=o,n=i.theme),o}}const iR="mode",aR="color-scheme",Cq="data-color-scheme";function Pq(t){const{defaultMode:e="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=iR,colorSchemeStorageKey:o=aR,attribute:l=Cq,colorSchemeNode:a="document.documentElement",nonce:h}=t||{};let f="",v=l;if(l==="class"&&(v=".%s"),l==="data"&&(v="[data-%s]"),v.startsWith(".")){const w=v.substring(1);f+=`${a}.classList.remove('${w}'.replace('%s', light), '${w}'.replace('%s', dark));
      ${a}.classList.add('${w}'.replace('%s', colorScheme));`}const y=v.match(/\[([^\]]+)\]/);if(y){const[w,b]=y[1].split("=");b||(f+=`${a}.removeAttribute('${w}'.replace('%s', light));
      ${a}.removeAttribute('${w}'.replace('%s', dark));`),f+=`
      ${a}.setAttribute('${w}'.replace('%s', colorScheme), ${b?`${b}.replace('%s', colorScheme)`:'""'});`}else f+=`${a}.setAttribute('${v}', colorScheme);`;return Ln.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${e}';
  const dark = localStorage.getItem('${o}-dark') || '${r}';
  const light = localStorage.getItem('${o}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${f}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function Rq(){}const Dq=({key:t,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(n){if(typeof window>"u")return;if(!e)return n;let r;try{r=e.localStorage.getItem(t)}catch{}return r||n},set:n=>{if(e)try{e.localStorage.setItem(t,n)}catch{}},subscribe:n=>{if(!e)return Rq;const r=i=>{const o=i.newValue;i.key===t&&n(o)};return e.addEventListener("storage",r),()=>{e.removeEventListener("storage",r)}}});function rT(){}function lI(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Sz(t,e){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return e("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return e("dark")}function Lq(t){return Sz(t,e=>{if(e==="light")return t.lightColorScheme;if(e==="dark")return t.darkColorScheme})}function Iq(t){const{defaultMode:e="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:o=iR,colorSchemeStorageKey:l=aR,storageWindow:a=typeof window>"u"?void 0:window,storageManager:h=Dq,noSsr:f=!1}=t,v=i.join(","),y=i.length>1,w=Et.useMemo(()=>h==null?void 0:h({key:o,storageWindow:a}),[h,o,a]),b=Et.useMemo(()=>h==null?void 0:h({key:`${l}-light`,storageWindow:a}),[h,l,a]),A=Et.useMemo(()=>h==null?void 0:h({key:`${l}-dark`,storageWindow:a}),[h,l,a]),[M,P]=Et.useState(()=>{const Y=(w==null?void 0:w.get(e))||e,Z=(b==null?void 0:b.get(n))||n,j=(A==null?void 0:A.get(r))||r;return{mode:Y,systemMode:lI(Y),lightColorScheme:Z,darkColorScheme:j}}),[C,k]=Et.useState(f||!y);Et.useEffect(()=>{k(!0)},[]);const B=Lq(M),z=Et.useCallback(Y=>{P(Z=>{if(Y===Z.mode)return Z;const j=Y??e;return w==null||w.set(j),{...Z,mode:j,systemMode:lI(j)}})},[w,e]),q=Et.useCallback(Y=>{Y?typeof Y=="string"?Y&&!v.includes(Y)?console.error(`\`${Y}\` does not exist in \`theme.colorSchemes\`.`):P(Z=>{const j={...Z};return Sz(Z,K=>{K==="light"&&(b==null||b.set(Y),j.lightColorScheme=Y),K==="dark"&&(A==null||A.set(Y),j.darkColorScheme=Y)}),j}):P(Z=>{const j={...Z},K=Y.light===null?n:Y.light,re=Y.dark===null?r:Y.dark;return K&&(v.includes(K)?(j.lightColorScheme=K,b==null||b.set(K)):console.error(`\`${K}\` does not exist in \`theme.colorSchemes\`.`)),re&&(v.includes(re)?(j.darkColorScheme=re,A==null||A.set(re)):console.error(`\`${re}\` does not exist in \`theme.colorSchemes\`.`)),j}):P(Z=>(b==null||b.set(n),A==null||A.set(r),{...Z,lightColorScheme:n,darkColorScheme:r}))},[v,b,A,n,r]),V=Et.useCallback(Y=>{M.mode==="system"&&P(Z=>{const j=Y!=null&&Y.matches?"dark":"light";return Z.systemMode===j?Z:{...Z,systemMode:j}})},[M.mode]),W=Et.useRef(V);return W.current=V,Et.useEffect(()=>{if(typeof window.matchMedia!="function"||!y)return;const Y=(...j)=>W.current(...j),Z=window.matchMedia("(prefers-color-scheme: dark)");return Z.addListener(Y),Y(Z),()=>{Z.removeListener(Y)}},[y]),Et.useEffect(()=>{if(y){const Y=(w==null?void 0:w.subscribe(K=>{(!K||["light","dark","system"].includes(K))&&z(K||e)}))||rT,Z=(b==null?void 0:b.subscribe(K=>{(!K||v.match(K))&&q({light:K})}))||rT,j=(A==null?void 0:A.subscribe(K=>{(!K||v.match(K))&&q({dark:K})}))||rT;return()=>{Y(),Z(),j()}}},[q,z,v,e,a,y,w,b,A]),{...M,mode:C?M.mode:void 0,systemMode:C?M.systemMode:void 0,colorScheme:C?B:void 0,setMode:z,setColorScheme:q}}const Oq="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Nq(t){const{themeId:e,theme:n={},modeStorageKey:r=iR,colorSchemeStorageKey:i=aR,disableTransitionOnChange:o=!1,defaultColorScheme:l,resolveTheme:a}=t,h={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},f=Et.createContext(void 0),v=()=>Et.useContext(f)||h,y={},w={};function b(C){var jt,vt,Pt,vn;const{children:k,theme:B,modeStorageKey:z=r,colorSchemeStorageKey:q=i,disableTransitionOnChange:V=o,storageManager:W,storageWindow:Y=typeof window>"u"?void 0:window,documentNode:Z=typeof document>"u"?void 0:document,colorSchemeNode:j=typeof document>"u"?void 0:document.documentElement,disableNestedContext:K=!1,disableStyleSheetGeneration:re=!1,defaultMode:ie="system",noSsr:se}=C,de=Et.useRef(!1),ue=rR(),Te=Et.useContext(f),pe=!!Te&&!K,De=Et.useMemo(()=>B||(typeof n=="function"?n():n),[B]),me=De[e],Me=me||De,{colorSchemes:fe=y,components:ve=w,cssVarPrefix:le}=Me,ye=Object.keys(fe).filter(hn=>!!fe[hn]).join(","),Se=Et.useMemo(()=>ye.split(","),[ye]),Be=typeof l=="string"?l:l.light,Ve=typeof l=="string"?l:l.dark,tt=fe[Be]&&fe[Ve]?ie:((vt=(jt=fe[Me.defaultColorScheme])==null?void 0:jt.palette)==null?void 0:vt.mode)||((Pt=Me.palette)==null?void 0:Pt.mode),{mode:ht,setMode:it,systemMode:gt,lightColorScheme:$t,darkColorScheme:He,colorScheme:Ct,setColorScheme:Xe}=Iq({supportedColorSchemes:Se,defaultLightColorScheme:Be,defaultDarkColorScheme:Ve,modeStorageKey:z,colorSchemeStorageKey:q,defaultMode:tt,storageManager:W,storageWindow:Y,noSsr:se});let tn=ht,Kt=Ct;pe&&(tn=Te.mode,Kt=Te.colorScheme);const Jt=Et.useMemo(()=>{var Ft;const hn=Kt||Me.defaultColorScheme,pn=((Ft=Me.generateThemeVars)==null?void 0:Ft.call(Me))||Me.vars,nn={...Me,components:ve,colorSchemes:fe,cssVarPrefix:le,vars:pn};if(typeof nn.generateSpacing=="function"&&(nn.spacing=nn.generateSpacing()),hn){const In=fe[hn];In&&typeof In=="object"&&Object.keys(In).forEach(Pn=>{In[Pn]&&typeof In[Pn]=="object"?nn[Pn]={...nn[Pn],...In[Pn]}:nn[Pn]=In[Pn]})}return a?a(nn):nn},[Me,Kt,ve,fe,le]),Ht=Me.colorSchemeSelector;Lb(()=>{if(Kt&&j&&Ht&&Ht!=="media"){const hn=Ht;let pn=Ht;if(hn==="class"&&(pn=".%s"),hn==="data"&&(pn="[data-%s]"),hn!=null&&hn.startsWith("data-")&&!hn.includes("%s")&&(pn=`[${hn}="%s"]`),pn.startsWith("."))j.classList.remove(...Se.map(nn=>pn.substring(1).replace("%s",nn))),j.classList.add(pn.substring(1).replace("%s",Kt));else{const nn=pn.replace("%s",Kt).match(/\[([^\]]+)\]/);if(nn){const[Ft,In]=nn[1].split("=");In||Se.forEach(Pn=>{j.removeAttribute(Ft.replace(Kt,Pn))}),j.setAttribute(Ft,In?In.replace(/"|'/g,""):"")}else j.setAttribute(pn,Kt)}}},[Kt,Ht,j,Se]),Et.useEffect(()=>{let hn;if(V&&de.current&&Z){const pn=Z.createElement("style");pn.appendChild(Z.createTextNode(Oq)),Z.head.appendChild(pn),window.getComputedStyle(Z.body),hn=setTimeout(()=>{Z.head.removeChild(pn)},1)}return()=>{clearTimeout(hn)}},[Kt,V,Z]),Et.useEffect(()=>(de.current=!0,()=>{de.current=!1}),[]);const $e=Et.useMemo(()=>({allColorSchemes:Se,colorScheme:Kt,darkColorScheme:He,lightColorScheme:$t,mode:tn,setColorScheme:Xe,setMode:it,systemMode:gt}),[Se,Kt,He,$t,tn,Xe,it,gt,Jt.colorSchemeSelector]);let Ee=!0;(re||Me.cssVariables===!1||pe&&(ue==null?void 0:ue.cssVarPrefix)===le)&&(Ee=!1);const _t=Ln.jsxs(Et.Fragment,{children:[Ln.jsx(wz,{themeId:me?e:void 0,theme:Jt,children:k}),Ee&&Ln.jsx(ez,{styles:((vn=Jt.generateStyleSheets)==null?void 0:vn.call(Jt))||[]})]});return pe?_t:Ln.jsx(f.Provider,{value:$e,children:_t})}const A=typeof l=="string"?l:l.light,M=typeof l=="string"?l:l.dark;return{CssVarsProvider:b,useColorScheme:v,getInitColorSchemeScript:C=>Pq({colorSchemeStorageKey:i,defaultLightColorScheme:A,defaultDarkColorScheme:M,modeStorageKey:r,...C})}}function kq(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const uI=(t,e,n,r=[])=>{let i=t;e.forEach((o,l)=>{l===e.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},Fq=(t,e,n)=>{function r(i,o=[],l=[]){Object.entries(i).forEach(([a,h])=>{(!n||n&&!n([...o,a]))&&h!=null&&(typeof h=="object"&&Object.keys(h).length>0?r(h,[...o,a],Array.isArray(h)?[...l,a]:l):e([...o,a],h,l))})}r(t)},Bq=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function iT(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},o={},l={};return Fq(t,(a,h,f)=>{if((typeof h=="string"||typeof h=="number")&&(!r||!r(a,h))){const v=`--${n?`${n}-`:""}${a.join("-")}`,y=Bq(a,h);Object.assign(i,{[v]:y}),uI(o,a,`var(${v})`,f),uI(l,a,`var(${v}, ${y})`,f)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:l}}function zq(t,e={}){const{getSelector:n=P,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:o={},components:l,defaultColorScheme:a="light",...h}=t,{vars:f,css:v,varsWithDefaults:y}=iT(h,e);let w=y;const b={},{[a]:A,...M}=o;if(Object.entries(M||{}).forEach(([B,z])=>{const{vars:q,css:V,varsWithDefaults:W}=iT(z,e);w=Gh(w,W),b[B]={css:V,vars:q}}),A){const{css:B,vars:z,varsWithDefaults:q}=iT(A,e);w=Gh(w,q),b[a]={css:B,vars:z}}function P(B,z){var V,W;let q=i;if(i==="class"&&(q=".%s"),i==="data"&&(q="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(q=`[${i}="%s"]`),B){if(q==="media")return t.defaultColorScheme===B?":root":{[`@media (prefers-color-scheme: ${((W=(V=o[B])==null?void 0:V.palette)==null?void 0:W.mode)||B})`]:{":root":z}};if(q)return t.defaultColorScheme===B?`:root, ${q.replace("%s",String(B))}`:q.replace("%s",String(B))}return":root"}return{vars:w,generateThemeVars:()=>{let B={...f};return Object.entries(b).forEach(([,{vars:z}])=>{B=Gh(B,z)}),B},generateStyleSheets:()=>{var Y,Z;const B=[],z=t.defaultColorScheme||"light";function q(j,K){Object.keys(K).length&&B.push(typeof j=="string"?{[j]:{...K}}:j)}q(n(void 0,{...v}),v);const{[z]:V,...W}=b;if(V){const{css:j}=V,K=(Z=(Y=o[z])==null?void 0:Y.palette)==null?void 0:Z.mode,re=!r&&K?{colorScheme:K,...j}:{...j};q(n(z,{...re}),re)}return Object.entries(W).forEach(([j,{css:K}])=>{var se,de;const re=(de=(se=o[j])==null?void 0:se.palette)==null?void 0:de.mode,ie=!r&&re?{colorScheme:re,...K}:{...K};q(n(j,{...ie}),ie)}),B}}}function Uq(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const jq=FS(),Vq=j0("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${pi(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),Gq=t=>iq({props:t,name:"MuiContainer",defaultTheme:jq}),qq=(t,e)=>{const n=h=>Qs(e,h),{classes:r,fixed:i,disableGutters:o,maxWidth:l}=t,a={root:["root",l&&`maxWidth${pi(String(l))}`,i&&"fixed",o&&"disableGutters"]};return Tl(a,n,r)};function Hq(t={}){const{createStyledComponent:e=Vq,useThemeProps:n=Gq,componentName:r="MuiContainer"}=t,i=e(({theme:l,ownerState:a})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!a.disableGutters&&{paddingLeft:l.spacing(2),paddingRight:l.spacing(2),[l.breakpoints.up("sm")]:{paddingLeft:l.spacing(3),paddingRight:l.spacing(3)}}}),({theme:l,ownerState:a})=>a.fixed&&Object.keys(l.breakpoints.values).reduce((h,f)=>{const v=f,y=l.breakpoints.values[v];return y!==0&&(h[l.breakpoints.up(v)]={maxWidth:`${y}${l.breakpoints.unit}`}),h},{}),({theme:l,ownerState:a})=>({...a.maxWidth==="xs"&&{[l.breakpoints.up("xs")]:{maxWidth:Math.max(l.breakpoints.values.xs,444)}},...a.maxWidth&&a.maxWidth!=="xs"&&{[l.breakpoints.up(a.maxWidth)]:{maxWidth:`${l.breakpoints.values[a.maxWidth]}${l.breakpoints.unit}`}}}));return Et.forwardRef(function(a,h){const f=n(a),{className:v,component:y="div",disableGutters:w=!1,fixed:b=!1,maxWidth:A="lg",classes:M,...P}=f,C={...f,component:y,disableGutters:w,fixed:b,maxWidth:A},k=qq(C,r);return Ln.jsx(i,{as:y,ownerState:C,className:Ji(k.root,v),ref:h,...P})})}function Ez(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ab.white,default:Ab.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const $q=Ez();function Tz(){return{text:{primary:Ab.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ab.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const cI=Tz();function hI(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=Ob(t.main,i):e==="dark"&&(t.dark=Ib(t.main,o)))}function Wq(t="light"){return t==="dark"?{main:Nv[200],light:Nv[50],dark:Nv[400]}:{main:Nv[700],light:Nv[400],dark:Nv[800]}}function Xq(t="light"){return t==="dark"?{main:Ov[200],light:Ov[50],dark:Ov[400]}:{main:Ov[500],light:Ov[300],dark:Ov[700]}}function Zq(t="light"){return t==="dark"?{main:Iv[500],light:Iv[300],dark:Iv[700]}:{main:Iv[700],light:Iv[400],dark:Iv[800]}}function Yq(t="light"){return t==="dark"?{main:kv[400],light:kv[300],dark:kv[700]}:{main:kv[700],light:kv[500],dark:kv[900]}}function Kq(t="light"){return t==="dark"?{main:Fv[400],light:Fv[300],dark:Fv[700]}:{main:Fv[800],light:Fv[500],dark:Fv[900]}}function Jq(t="light"){return t==="dark"?{main:P1[400],light:P1[300],dark:P1[700]}:{main:"#ed6c02",light:P1[500],dark:P1[900]}}function oR(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,o=t.primary||Wq(e),l=t.secondary||Xq(e),a=t.error||Zq(e),h=t.info||Yq(e),f=t.success||Kq(e),v=t.warning||Jq(e);function y(M){return sq(M,cI.text.primary)>=n?cI.text.primary:$q.text.primary}const w=({color:M,name:P,mainShade:C=500,lightShade:k=300,darkShade:B=700})=>{if(M={...M},!M.main&&M[C]&&(M.main=M[C]),!M.hasOwnProperty("main"))throw new Error(A0(11,P?` (${P})`:"",C));if(typeof M.main!="string")throw new Error(A0(12,P?` (${P})`:"",JSON.stringify(M.main)));return hI(M,"light",k,r),hI(M,"dark",B,r),M.contrastText||(M.contrastText=y(M.main)),M};let b;return e==="light"?b=Ez():e==="dark"&&(b=Tz()),Gh({common:{...Ab},mode:e,primary:w({color:o,name:"primary"}),secondary:w({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:w({color:a,name:"error"}),warning:w({color:v,name:"warning"}),info:w({color:h,name:"info"}),success:w({color:f,name:"success"}),grey:Uj,contrastThreshold:n,getContrastText:y,augmentColor:w,tonalOffset:r,...b},i)}function Qq(t){const e={};return Object.entries(t).forEach(r=>{const[i,o]=r;typeof o=="object"&&(e[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function eH(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function tH(t){return Math.round(t*1e5)/1e5}const fI={textTransform:"uppercase"},dI='"Roboto", "Helvetica", "Arial", sans-serif';function Mz(t,e){const{fontFamily:n=dI,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:l=500,fontWeightBold:a=700,htmlFontSize:h=16,allVariants:f,pxToRem:v,...y}=typeof e=="function"?e(t):e,w=r/14,b=v||(P=>`${P/h*w}rem`),A=(P,C,k,B,z)=>({fontFamily:n,fontWeight:P,fontSize:b(C),lineHeight:k,...n===dI?{letterSpacing:`${tH(B/C)}em`}:{},...z,...f}),M={h1:A(i,96,1.167,-1.5),h2:A(i,60,1.2,-.5),h3:A(o,48,1.167,0),h4:A(o,34,1.235,.25),h5:A(o,24,1.334,0),h6:A(l,20,1.6,.15),subtitle1:A(o,16,1.75,.15),subtitle2:A(l,14,1.57,.1),body1:A(o,16,1.5,.15),body2:A(o,14,1.43,.15),button:A(l,14,1.75,.4,fI),caption:A(o,12,1.66,.4),overline:A(o,12,2.66,1,fI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Gh({htmlFontSize:h,pxToRem:b,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:l,fontWeightBold:a,...M},y,{clone:!1})}const nH=.2,rH=.14,iH=.12;function zs(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${nH})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${rH})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${iH})`].join(",")}const aH=["none",zs(0,2,1,-1,0,1,1,0,0,1,3,0),zs(0,3,1,-2,0,2,2,0,0,1,5,0),zs(0,3,3,-2,0,3,4,0,0,1,8,0),zs(0,2,4,-1,0,4,5,0,0,1,10,0),zs(0,3,5,-1,0,5,8,0,0,1,14,0),zs(0,3,5,-1,0,6,10,0,0,1,18,0),zs(0,4,5,-2,0,7,10,1,0,2,16,1),zs(0,5,5,-3,0,8,10,1,0,3,14,2),zs(0,5,6,-3,0,9,12,1,0,3,16,2),zs(0,6,6,-3,0,10,14,1,0,4,18,3),zs(0,6,7,-4,0,11,15,1,0,4,20,3),zs(0,7,8,-4,0,12,17,2,0,5,22,4),zs(0,7,8,-4,0,13,19,2,0,5,24,4),zs(0,7,9,-4,0,14,21,2,0,5,26,4),zs(0,8,9,-5,0,15,22,2,0,6,28,5),zs(0,8,10,-5,0,16,24,2,0,6,30,5),zs(0,8,11,-5,0,17,26,2,0,6,32,5),zs(0,9,11,-5,0,18,28,2,0,7,34,6),zs(0,9,12,-6,0,19,29,2,0,7,36,6),zs(0,10,13,-6,0,20,31,3,0,8,38,7),zs(0,10,13,-6,0,21,33,3,0,8,40,7),zs(0,10,14,-6,0,22,35,3,0,8,42,7),zs(0,11,14,-7,0,23,36,3,0,9,44,8),zs(0,11,15,-7,0,24,38,3,0,9,46,8)],oH={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},sH={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function pI(t){return`${Math.round(t)}ms`}function lH(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function uH(t){const e={...oH,...t.easing},n={...sH,...t.duration};return{getAutoHeightDuration:lH,create:(i=["all"],o={})=>{const{duration:l=n.standard,easing:a=e.easeInOut,delay:h=0,...f}=o;return(Array.isArray(i)?i:[i]).map(v=>`${v} ${typeof l=="string"?l:pI(l)} ${a} ${typeof h=="string"?h:pI(h)}`).join(",")},...t,easing:e,duration:n}}const cH={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function hH(t){return Qd(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function Az(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let o=0;o<i.length;o++){const[l,a]=i[o];!hH(a)||l.startsWith("unstable_")?delete r[l]:Qd(a)&&(r[l]={...a},n(r[l]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function IC(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:o={},transitions:l={},typography:a={},shape:h,...f}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(A0(20));const v=oR(o),y=FS(t);let w=Gh(y,{mixins:eH(y.breakpoints,r),palette:v,shadows:aH.slice(),typography:Mz(v,a),transitions:uH(l),zIndex:{...cH}});return w=Gh(w,f),w=e.reduce((b,A)=>Gh(b,A),w),w.unstable_sxConfig={...nx,...f==null?void 0:f.unstable_sxConfig},w.unstable_sx=function(A){return ag({sx:A,theme:this})},w.toRuntimeSource=Az,w}function OC(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const fH=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=OC(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function Cz(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function Pz(t){return t==="dark"?fH:[]}function dH(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,o=oR(e);return{palette:o,opacity:{...Cz(o.mode),...n},overlays:r||Pz(o.mode),...i}}function pH(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const mH=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],gH=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const l={};return mH(t.cssVarPrefix).forEach(a=>{l[a]=n[a],delete n[a]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:l}}:o?{[o.replace("%s",e)]:l,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...l}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function vH(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function er(t,e,n){!t[e]&&n&&(t[e]=n)}function Z1(t){return typeof t!="string"||!t.startsWith("hsl")?t:dz(t)}function Lp(t,e){`${e}Channel`in t||(t[`${e}Channel`]=X1(Z1(t[e])))}function yH(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Xd=t=>{try{return t()}catch{}},_H=(t="mui")=>kq(t);function aT(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=dH({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:o,...l}=IC({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:o,opacity:{...Cz(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||Pz(i)},l}function bH(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:l=pH,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:h=":root",...f}=t,v=Object.keys(n)[0],y=r||(n.light&&v!=="light"?"light":v),w=_H(o),{[y]:b,light:A,dark:M,...P}=n,C={...P};let k=b;if((y==="dark"&&!("dark"in n)||y==="light"&&!("light"in n))&&(k=!0),!k)throw new Error(A0(21,y));const B=aT(C,k,f,y);A&&!C.light&&aT(C,A,void 0,"light"),M&&!C.dark&&aT(C,M,void 0,"dark");let z={defaultColorScheme:y,...B,cssVarPrefix:o,colorSchemeSelector:a,rootSelector:h,getCssVar:w,colorSchemes:C,font:{...Qq(B.typography),...B.font},spacing:yH(f.spacing)};Object.keys(z.colorSchemes).forEach(Z=>{const j=z.colorSchemes[Z].palette,K=re=>{const ie=re.split("-"),se=ie[1],de=ie[2];return w(re,j[se][de])};if(j.mode==="light"&&(er(j.common,"background","#fff"),er(j.common,"onBackground","#000")),j.mode==="dark"&&(er(j.common,"background","#000"),er(j.common,"onBackground","#fff")),vH(j,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),j.mode==="light"){er(j.Alert,"errorColor",ns(j.error.light,.6)),er(j.Alert,"infoColor",ns(j.info.light,.6)),er(j.Alert,"successColor",ns(j.success.light,.6)),er(j.Alert,"warningColor",ns(j.warning.light,.6)),er(j.Alert,"errorFilledBg",K("palette-error-main")),er(j.Alert,"infoFilledBg",K("palette-info-main")),er(j.Alert,"successFilledBg",K("palette-success-main")),er(j.Alert,"warningFilledBg",K("palette-warning-main")),er(j.Alert,"errorFilledColor",Xd(()=>j.getContrastText(j.error.main))),er(j.Alert,"infoFilledColor",Xd(()=>j.getContrastText(j.info.main))),er(j.Alert,"successFilledColor",Xd(()=>j.getContrastText(j.success.main))),er(j.Alert,"warningFilledColor",Xd(()=>j.getContrastText(j.warning.main))),er(j.Alert,"errorStandardBg",rs(j.error.light,.9)),er(j.Alert,"infoStandardBg",rs(j.info.light,.9)),er(j.Alert,"successStandardBg",rs(j.success.light,.9)),er(j.Alert,"warningStandardBg",rs(j.warning.light,.9)),er(j.Alert,"errorIconColor",K("palette-error-main")),er(j.Alert,"infoIconColor",K("palette-info-main")),er(j.Alert,"successIconColor",K("palette-success-main")),er(j.Alert,"warningIconColor",K("palette-warning-main")),er(j.AppBar,"defaultBg",K("palette-grey-100")),er(j.Avatar,"defaultBg",K("palette-grey-400")),er(j.Button,"inheritContainedBg",K("palette-grey-300")),er(j.Button,"inheritContainedHoverBg",K("palette-grey-A100")),er(j.Chip,"defaultBorder",K("palette-grey-400")),er(j.Chip,"defaultAvatarColor",K("palette-grey-700")),er(j.Chip,"defaultIconColor",K("palette-grey-700")),er(j.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),er(j.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),er(j.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),er(j.LinearProgress,"primaryBg",rs(j.primary.main,.62)),er(j.LinearProgress,"secondaryBg",rs(j.secondary.main,.62)),er(j.LinearProgress,"errorBg",rs(j.error.main,.62)),er(j.LinearProgress,"infoBg",rs(j.info.main,.62)),er(j.LinearProgress,"successBg",rs(j.success.main,.62)),er(j.LinearProgress,"warningBg",rs(j.warning.main,.62)),er(j.Skeleton,"bg",`rgba(${K("palette-text-primaryChannel")} / 0.11)`),er(j.Slider,"primaryTrack",rs(j.primary.main,.62)),er(j.Slider,"secondaryTrack",rs(j.secondary.main,.62)),er(j.Slider,"errorTrack",rs(j.error.main,.62)),er(j.Slider,"infoTrack",rs(j.info.main,.62)),er(j.Slider,"successTrack",rs(j.success.main,.62)),er(j.Slider,"warningTrack",rs(j.warning.main,.62));const re=Kx(j.background.default,.8);er(j.SnackbarContent,"bg",re),er(j.SnackbarContent,"color",Xd(()=>j.getContrastText(re))),er(j.SpeedDialAction,"fabHoverBg",Kx(j.background.paper,.15)),er(j.StepConnector,"border",K("palette-grey-400")),er(j.StepContent,"border",K("palette-grey-400")),er(j.Switch,"defaultColor",K("palette-common-white")),er(j.Switch,"defaultDisabledColor",K("palette-grey-100")),er(j.Switch,"primaryDisabledColor",rs(j.primary.main,.62)),er(j.Switch,"secondaryDisabledColor",rs(j.secondary.main,.62)),er(j.Switch,"errorDisabledColor",rs(j.error.main,.62)),er(j.Switch,"infoDisabledColor",rs(j.info.main,.62)),er(j.Switch,"successDisabledColor",rs(j.success.main,.62)),er(j.Switch,"warningDisabledColor",rs(j.warning.main,.62)),er(j.TableCell,"border",rs(Yx(j.divider,1),.88)),er(j.Tooltip,"bg",Yx(j.grey[700],.92))}if(j.mode==="dark"){er(j.Alert,"errorColor",rs(j.error.light,.6)),er(j.Alert,"infoColor",rs(j.info.light,.6)),er(j.Alert,"successColor",rs(j.success.light,.6)),er(j.Alert,"warningColor",rs(j.warning.light,.6)),er(j.Alert,"errorFilledBg",K("palette-error-dark")),er(j.Alert,"infoFilledBg",K("palette-info-dark")),er(j.Alert,"successFilledBg",K("palette-success-dark")),er(j.Alert,"warningFilledBg",K("palette-warning-dark")),er(j.Alert,"errorFilledColor",Xd(()=>j.getContrastText(j.error.dark))),er(j.Alert,"infoFilledColor",Xd(()=>j.getContrastText(j.info.dark))),er(j.Alert,"successFilledColor",Xd(()=>j.getContrastText(j.success.dark))),er(j.Alert,"warningFilledColor",Xd(()=>j.getContrastText(j.warning.dark))),er(j.Alert,"errorStandardBg",ns(j.error.light,.9)),er(j.Alert,"infoStandardBg",ns(j.info.light,.9)),er(j.Alert,"successStandardBg",ns(j.success.light,.9)),er(j.Alert,"warningStandardBg",ns(j.warning.light,.9)),er(j.Alert,"errorIconColor",K("palette-error-main")),er(j.Alert,"infoIconColor",K("palette-info-main")),er(j.Alert,"successIconColor",K("palette-success-main")),er(j.Alert,"warningIconColor",K("palette-warning-main")),er(j.AppBar,"defaultBg",K("palette-grey-900")),er(j.AppBar,"darkBg",K("palette-background-paper")),er(j.AppBar,"darkColor",K("palette-text-primary")),er(j.Avatar,"defaultBg",K("palette-grey-600")),er(j.Button,"inheritContainedBg",K("palette-grey-800")),er(j.Button,"inheritContainedHoverBg",K("palette-grey-700")),er(j.Chip,"defaultBorder",K("palette-grey-700")),er(j.Chip,"defaultAvatarColor",K("palette-grey-300")),er(j.Chip,"defaultIconColor",K("palette-grey-300")),er(j.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),er(j.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),er(j.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),er(j.LinearProgress,"primaryBg",ns(j.primary.main,.5)),er(j.LinearProgress,"secondaryBg",ns(j.secondary.main,.5)),er(j.LinearProgress,"errorBg",ns(j.error.main,.5)),er(j.LinearProgress,"infoBg",ns(j.info.main,.5)),er(j.LinearProgress,"successBg",ns(j.success.main,.5)),er(j.LinearProgress,"warningBg",ns(j.warning.main,.5)),er(j.Skeleton,"bg",`rgba(${K("palette-text-primaryChannel")} / 0.13)`),er(j.Slider,"primaryTrack",ns(j.primary.main,.5)),er(j.Slider,"secondaryTrack",ns(j.secondary.main,.5)),er(j.Slider,"errorTrack",ns(j.error.main,.5)),er(j.Slider,"infoTrack",ns(j.info.main,.5)),er(j.Slider,"successTrack",ns(j.success.main,.5)),er(j.Slider,"warningTrack",ns(j.warning.main,.5));const re=Kx(j.background.default,.98);er(j.SnackbarContent,"bg",re),er(j.SnackbarContent,"color",Xd(()=>j.getContrastText(re))),er(j.SpeedDialAction,"fabHoverBg",Kx(j.background.paper,.15)),er(j.StepConnector,"border",K("palette-grey-600")),er(j.StepContent,"border",K("palette-grey-600")),er(j.Switch,"defaultColor",K("palette-grey-300")),er(j.Switch,"defaultDisabledColor",K("palette-grey-600")),er(j.Switch,"primaryDisabledColor",ns(j.primary.main,.55)),er(j.Switch,"secondaryDisabledColor",ns(j.secondary.main,.55)),er(j.Switch,"errorDisabledColor",ns(j.error.main,.55)),er(j.Switch,"infoDisabledColor",ns(j.info.main,.55)),er(j.Switch,"successDisabledColor",ns(j.success.main,.55)),er(j.Switch,"warningDisabledColor",ns(j.warning.main,.55)),er(j.TableCell,"border",ns(Yx(j.divider,1),.68)),er(j.Tooltip,"bg",Yx(j.grey[700],.92))}Lp(j.background,"default"),Lp(j.background,"paper"),Lp(j.common,"background"),Lp(j.common,"onBackground"),Lp(j,"divider"),Object.keys(j).forEach(re=>{const ie=j[re];re!=="tonalOffset"&&ie&&typeof ie=="object"&&(ie.main&&er(j[re],"mainChannel",X1(Z1(ie.main))),ie.light&&er(j[re],"lightChannel",X1(Z1(ie.light))),ie.dark&&er(j[re],"darkChannel",X1(Z1(ie.dark))),ie.contrastText&&er(j[re],"contrastTextChannel",X1(Z1(ie.contrastText))),re==="text"&&(Lp(j[re],"primary"),Lp(j[re],"secondary")),re==="action"&&(ie.active&&Lp(j[re],"active"),ie.selected&&Lp(j[re],"selected")))})}),z=e.reduce((Z,j)=>Gh(Z,j),z);const q={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:l,getSelector:gH(z)},{vars:V,generateThemeVars:W,generateStyleSheets:Y}=zq(z,q);return z.vars=V,Object.entries(z.colorSchemes[z.defaultColorScheme]).forEach(([Z,j])=>{z[Z]=j}),z.generateThemeVars=W,z.generateStyleSheets=Y,z.generateSpacing=function(){return az(f.spacing,YP(this))},z.getColorSchemeSelector=Uq(a),z.spacing=z.generateSpacing(),z.shouldSkipGeneratingVar=l,z.unstable_sxConfig={...nx,...f==null?void 0:f.unstable_sxConfig},z.unstable_sx=function(j){return ag({sx:j,theme:this})},z.toRuntimeSource=Az,z}function mI(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:oR({...n===!0?{}:n.palette,mode:e})})}function T_(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...l}=t,a=o||"light",h=i==null?void 0:i[a],f={...i,...n?{[a]:{...typeof h!="boolean"&&h,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return IC(t,...e);let v=n;"palette"in t||f[a]&&(f[a]!==!0?v=f[a].palette:a==="dark"&&(v={mode:"dark"}));const y=IC({...t,palette:v},...e);return y.defaultColorScheme=a,y.colorSchemes=f,y.palette.mode==="light"&&(y.colorSchemes.light={...f.light!==!0&&f.light,palette:y.palette},mI(y,"dark",f.dark)),y.palette.mode==="dark"&&(y.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:y.palette},mI(y,"light",f.light)),y}return!n&&!("light"in f)&&a==="light"&&(f.light=!0),bH({...l,colorSchemes:f,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const sR=T_();function lR(){const t=BS(sR);return t[rp]||t}function uR(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const US=t=>uR(t)&&t!=="classes",Wr=fz({themeId:rp,defaultTheme:sR,rootShouldForwardProp:US});function oT({theme:t,...e}){const n=rp in t?t[rp]:void 0;return Ln.jsx(wz,{...e,themeId:n?rp:void 0,theme:n||t})}const Jx={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:xH}=Nq({themeId:rp,theme:()=>T_({cssVariables:!0}),colorSchemeStorageKey:Jx.colorSchemeStorageKey,modeStorageKey:Jx.modeStorageKey,defaultColorScheme:{light:Jx.defaultLightColorScheme,dark:Jx.defaultDarkColorScheme},resolveTheme:t=>{const e={...t,typography:Mz(t.palette,t.typography)};return e.unstable_sx=function(r){return ag({sx:r,theme:this})},e}}),wH=xH;function SH({theme:t,...e}){if(typeof t=="function")return Ln.jsx(oT,{theme:t,...e});const n=rp in t?t[rp]:t;return"colorSchemes"in n?Ln.jsx(wH,{theme:t,...e}):"vars"in n?Ln.jsx(oT,{theme:t,...e}):Ln.jsx(oT,{theme:{...t,vars:null},...e})}function EH(t){return Ln.jsx(qG,{...t,defaultTheme:sR,themeId:rp})}function Rz(t){return function(n){return Ln.jsx(EH,{styles:typeof t=="function"?r=>t({theme:r,...n}):t})}}function TH(){return sz}const El=Aq;function el(t){return Mq(t)}function MH(t){return Qs("MuiSvgIcon",t)}Ss("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const AH=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${pi(e)}`,`fontSize${pi(n)}`]};return Tl(i,MH,r)},CH=Wr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${pi(n.color)}`],e[`fontSize${pi(n.fontSize)}`]]}})(El(({theme:t})=>{var e,n,r,i,o,l,a,h,f,v,y,w,b,A;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=t.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:M=>!M.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((l=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:l.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((h=(a=t.typography)==null?void 0:a.pxToRem)==null?void 0:h.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((v=(f=t.typography)==null?void 0:f.pxToRem)==null?void 0:v.call(f,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,M])=>M&&M.main).map(([M])=>{var P,C;return{props:{color:M},style:{color:(C=(P=(t.vars??t).palette)==null?void 0:P[M])==null?void 0:C.main}}}),{props:{color:"action"},style:{color:(w=(y=(t.vars??t).palette)==null?void 0:y.action)==null?void 0:w.active}},{props:{color:"disabled"},style:{color:(A=(b=(t.vars??t).palette)==null?void 0:b.action)==null?void 0:A.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),NC=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:l="inherit",component:a="svg",fontSize:h="medium",htmlColor:f,inheritViewBox:v=!1,titleAccess:y,viewBox:w="0 0 24 24",...b}=r,A=Et.isValidElement(i)&&i.type==="svg",M={...r,color:l,component:a,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:v,viewBox:w,hasSvgAsChild:A},P={};v||(P.viewBox=w);const C=AH(M);return Ln.jsxs(CH,{as:a,className:Ji(C.root,o),focusable:"false",color:f,"aria-hidden":y?void 0:!0,role:y?"img":void 0,ref:n,...P,...b,...A&&i.props,ownerState:M,children:[A?i.props.children:i,y?Ln.jsx("title",{children:y}):null]})});NC.muiName="SvgIcon";function pd(t,e){function n(r,i){return Ln.jsx(NC,{"data-testid":`${e}Icon`,ref:i,...r,children:t})}return n.muiName=NC.muiName,Et.memo(Et.forwardRef(n))}function PH(t,e){if(!t)return e;if(typeof t=="function"||typeof e=="function")return i=>{const o=typeof e=="function"?e(i):e,l=typeof t=="function"?t({...i,...o}):t,a=Ji(i==null?void 0:i.className,o==null?void 0:o.className,l==null?void 0:l.className);return{...o,...l,...!!a&&{className:a},...(o==null?void 0:o.style)&&(l==null?void 0:l.style)&&{style:{...o.style,...l.style}},...(o==null?void 0:o.sx)&&(l==null?void 0:l.sx)&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const n=e,r=Ji(n==null?void 0:n.className,t==null?void 0:t.className);return{...e,...t,...!!r&&{className:r},...(n==null?void 0:n.style)&&(t==null?void 0:t.style)&&{style:{...n.style,...t.style}},...(n==null?void 0:n.sx)&&(t==null?void 0:t.sx)&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function Dz(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function kC(t,e){return kC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},kC(t,e)}function Lz(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,kC(t,e)}var Iz=UB();const Y1=S_(Iz),gI={disabled:!1},zw=bt.createContext(null);var RH=function(e){return e.scrollTop},K1="unmounted",a0="exited",o0="entering",my="entered",FC="exiting",am=function(t){Lz(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var l=i,a=l&&!l.isMounting?r.enter:r.appear,h;return o.appearStatus=null,r.in?a?(h=a0,o.appearStatus=o0):h=my:r.unmountOnExit||r.mountOnEnter?h=K1:h=a0,o.state={status:h},o.nextCallback=null,o}e.getDerivedStateFromProps=function(i,o){var l=i.in;return l&&o.status===K1?{status:a0}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==o0&&l!==my&&(o=o0):(l===o0||l===my)&&(o=FC)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,l,a;return o=l=a=i,i!=null&&typeof i!="number"&&(o=i.exit,l=i.enter,a=i.appear!==void 0?i.appear:l),{exit:o,enter:l,appear:a}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===o0){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Y1.findDOMNode(this);l&&RH(l)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===a0&&this.setState({status:K1})},n.performEnter=function(i){var o=this,l=this.props.enter,a=this.context?this.context.isMounting:i,h=this.props.nodeRef?[a]:[Y1.findDOMNode(this),a],f=h[0],v=h[1],y=this.getTimeouts(),w=a?y.appear:y.enter;if(!i&&!l||gI.disabled){this.safeSetState({status:my},function(){o.props.onEntered(f)});return}this.props.onEnter(f,v),this.safeSetState({status:o0},function(){o.props.onEntering(f,v),o.onTransitionEnd(w,function(){o.safeSetState({status:my},function(){o.props.onEntered(f,v)})})})},n.performExit=function(){var i=this,o=this.props.exit,l=this.getTimeouts(),a=this.props.nodeRef?void 0:Y1.findDOMNode(this);if(!o||gI.disabled){this.safeSetState({status:a0},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:FC},function(){i.props.onExiting(a),i.onTransitionEnd(l.exit,function(){i.safeSetState({status:a0},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,l=!0;return this.nextCallback=function(a){l&&(l=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:Y1.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!l||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],f=h[0],v=h[1];this.props.addEndListener(f,v)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===K1)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=Dz(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return bt.createElement(zw.Provider,{value:null},typeof l=="function"?l(i,a):bt.cloneElement(bt.Children.only(l),a))},e}(bt.Component);am.contextType=zw;am.propTypes={};function Bv(){}am.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bv,onEntering:Bv,onEntered:Bv,onExit:Bv,onExiting:Bv,onExited:Bv};am.UNMOUNTED=K1;am.EXITED=a0;am.ENTERING=o0;am.ENTERED=my;am.EXITING=FC;function DH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cR(t,e){var n=function(o){return e&&Et.isValidElement(o)?e(o):o},r=Object.create(null);return t&&Et.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function LH(t,e){t=t||{},e=e||{};function n(v){return v in e?e[v]:t[v]}var r=Object.create(null),i=[];for(var o in t)o in e?i.length&&(r[o]=i,i=[]):i.push(o);var l,a={};for(var h in e){if(r[h])for(l=0;l<r[h].length;l++){var f=r[h][l];a[r[h][l]]=n(f)}a[h]=n(h)}for(l=0;l<i.length;l++)a[i[l]]=n(i[l]);return a}function y0(t,e,n){return n[e]!=null?n[e]:t.props[e]}function IH(t,e){return cR(t.children,function(n){return Et.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:y0(n,"appear",t),enter:y0(n,"enter",t),exit:y0(n,"exit",t)})})}function OH(t,e,n){var r=cR(t.children),i=LH(e,r);return Object.keys(i).forEach(function(o){var l=i[o];if(Et.isValidElement(l)){var a=o in e,h=o in r,f=e[o],v=Et.isValidElement(f)&&!f.props.in;h&&(!a||v)?i[o]=Et.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:y0(l,"exit",t),enter:y0(l,"enter",t)}):!h&&a&&!v?i[o]=Et.cloneElement(l,{in:!1}):h&&a&&Et.isValidElement(f)&&(i[o]=Et.cloneElement(l,{onExited:n.bind(null,l),in:f.props.in,exit:y0(l,"exit",t),enter:y0(l,"enter",t)}))}}),i}var NH=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},kH={component:"div",childFactory:function(e){return e}},hR=function(t){Lz(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var l=o.handleExited.bind(DH(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,o){var l=o.children,a=o.handleExited,h=o.firstRender;return{children:h?IH(i,a):OH(i,l,a),firstRender:!1}},n.handleExited=function(i,o){var l=cR(this.props.children);i.key in l||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var h=Ow({},a.children);return delete h[i.key],{children:h}}))},n.render=function(){var i=this.props,o=i.component,l=i.childFactory,a=Dz(i,["component","childFactory"]),h=this.state.contextValue,f=NH(this.state.children).map(l);return delete a.appear,delete a.enter,delete a.exit,o===null?bt.createElement(zw.Provider,{value:h},f):bt.createElement(zw.Provider,{value:h},bt.createElement(o,a,f))},e}(bt.Component);hR.propTypes={};hR.defaultProps=kH;const FH=t=>t.scrollTop;function vI(t,e){const{timeout:n,easing:r,style:i={}}=t;return{duration:i.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function BH(t){return Qs("MuiPaper",t)}Ss("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const zH=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Tl(o,BH,i)},UH=Wr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(El(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),rx=Et.forwardRef(function(e,n){var b;const r=el({props:e,name:"MuiPaper"}),i=lR(),{className:o,component:l="div",elevation:a=1,square:h=!1,variant:f="elevation",...v}=r,y={...r,component:l,elevation:a,square:h,variant:f},w=zH(y);return Ln.jsx(UH,{as:l,ownerState:y,className:Ji(w.root,o),ref:n,...v,style:{...f==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":(b=i.vars.overlays)==null?void 0:b[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${mh("#fff",OC(a))}, ${mh("#fff",OC(a))})`}},...v.style}})});function yf(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,internalForwardedProps:l,shouldForwardComponentProp:a=!1,...h}=e,{component:f,slots:v={[t]:void 0},slotProps:y={[t]:void 0},...w}=o,b=v[t]||r,A=yz(y[t],i),{props:{component:M,...P},internalRef:C}=vz({className:n,...h,externalForwardedProps:t==="root"?w:void 0,externalSlotProps:A}),k=up(C,A==null?void 0:A.ref,e.ref),B=t==="root"?M||f:M,z=gz(b,{...t==="root"&&!f&&!v[t]&&l,...t!=="root"&&!v[t]&&l,...P,...B&&!a&&{as:B},...B&&a&&{component:B},ref:k},i);return[b,z]}class Uw{constructor(){M1(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Uw}static use(){const e=mz(Uw.create).current,[n,r]=Et.useState(!1);return e.shouldMount=n,e.setShouldMount=r,Et.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=VH(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function jH(){return Uw.use()}function VH(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function GH(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:l,in:a,onExited:h,timeout:f}=t,[v,y]=Et.useState(!1),w=Ji(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),b={width:l,height:l,top:-(l/2)+o,left:-(l/2)+i},A=Ji(n.child,v&&n.childLeaving,r&&n.childPulsate);return!a&&!v&&y(!0),Et.useEffect(()=>{if(!a&&h!=null){const M=setTimeout(h,f);return()=>{clearTimeout(M)}}},[h,a,f]),Ln.jsx("span",{className:w,style:b,children:Ln.jsx("span",{className:A})})}const pf=Ss("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),BC=550,qH=80,HH=Qb`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,$H=Qb`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,WH=Qb`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,XH=Wr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ZH=Wr(GH,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${pf.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${HH};
    animation-duration: ${BC}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${pf.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${pf.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${pf.childLeaving} {
    opacity: 0;
    animation-name: ${$H};
    animation-duration: ${BC}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${pf.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${WH};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,YH=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:l,...a}=r,[h,f]=Et.useState([]),v=Et.useRef(0),y=Et.useRef(null);Et.useEffect(()=>{y.current&&(y.current(),y.current=null)},[h]);const w=Et.useRef(!1),b=pq(),A=Et.useRef(null),M=Et.useRef(null),P=Et.useCallback(z=>{const{pulsate:q,rippleX:V,rippleY:W,rippleSize:Y,cb:Z}=z;f(j=>[...j,Ln.jsx(ZH,{classes:{ripple:Ji(o.ripple,pf.ripple),rippleVisible:Ji(o.rippleVisible,pf.rippleVisible),ripplePulsate:Ji(o.ripplePulsate,pf.ripplePulsate),child:Ji(o.child,pf.child),childLeaving:Ji(o.childLeaving,pf.childLeaving),childPulsate:Ji(o.childPulsate,pf.childPulsate)},timeout:BC,pulsate:q,rippleX:V,rippleY:W,rippleSize:Y},v.current)]),v.current+=1,y.current=Z},[o]),C=Et.useCallback((z={},q={},V=()=>{})=>{const{pulsate:W=!1,center:Y=i||q.pulsate,fakeElement:Z=!1}=q;if((z==null?void 0:z.type)==="mousedown"&&w.current){w.current=!1;return}(z==null?void 0:z.type)==="touchstart"&&(w.current=!0);const j=Z?null:M.current,K=j?j.getBoundingClientRect():{width:0,height:0,left:0,top:0};let re,ie,se;if(Y||z===void 0||z.clientX===0&&z.clientY===0||!z.clientX&&!z.touches)re=Math.round(K.width/2),ie=Math.round(K.height/2);else{const{clientX:de,clientY:ue}=z.touches&&z.touches.length>0?z.touches[0]:z;re=Math.round(de-K.left),ie=Math.round(ue-K.top)}if(Y)se=Math.sqrt((2*K.width**2+K.height**2)/3),se%2===0&&(se+=1);else{const de=Math.max(Math.abs((j?j.clientWidth:0)-re),re)*2+2,ue=Math.max(Math.abs((j?j.clientHeight:0)-ie),ie)*2+2;se=Math.sqrt(de**2+ue**2)}z!=null&&z.touches?A.current===null&&(A.current=()=>{P({pulsate:W,rippleX:re,rippleY:ie,rippleSize:se,cb:V})},b.start(qH,()=>{A.current&&(A.current(),A.current=null)})):P({pulsate:W,rippleX:re,rippleY:ie,rippleSize:se,cb:V})},[i,P,b]),k=Et.useCallback(()=>{C({},{pulsate:!0})},[C]),B=Et.useCallback((z,q)=>{if(b.clear(),(z==null?void 0:z.type)==="touchend"&&A.current){A.current(),A.current=null,b.start(0,()=>{B(z,q)});return}A.current=null,f(V=>V.length>0?V.slice(1):V),y.current=q},[b]);return Et.useImperativeHandle(n,()=>({pulsate:k,start:C,stop:B}),[k,C,B]),Ln.jsx(XH,{className:Ji(pf.root,o.root,l),ref:M,...a,children:Ln.jsx(hR,{component:null,exit:!0,children:h})})});function KH(t){return Qs("MuiButtonBase",t)}const JH=Ss("MuiButtonBase",["root","disabled","focusVisible"]),QH=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,l=Tl({root:["root",e&&"disabled",n&&"focusVisible"]},KH,i);return n&&r&&(l.root+=` ${r}`),l},e$=Wr("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${JH.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),fR=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:l,className:a,component:h="button",disabled:f=!1,disableRipple:v=!1,disableTouchRipple:y=!1,focusRipple:w=!1,focusVisibleClassName:b,LinkComponent:A="a",onBlur:M,onClick:P,onContextMenu:C,onDragLeave:k,onFocus:B,onFocusVisible:z,onKeyDown:q,onKeyUp:V,onMouseDown:W,onMouseLeave:Y,onMouseUp:Z,onTouchEnd:j,onTouchMove:K,onTouchStart:re,tabIndex:ie=0,TouchRippleProps:se,touchRippleRef:de,type:ue,...Te}=r,pe=Et.useRef(null),De=jH(),me=up(De.ref,de),[Me,fe]=Et.useState(!1);f&&Me&&fe(!1),Et.useImperativeHandle(i,()=>({focusVisible:()=>{fe(!0),pe.current.focus()}}),[]);const ve=De.shouldMount&&!v&&!f;Et.useEffect(()=>{Me&&w&&!v&&De.pulsate()},[v,w,Me,De]);const le=Ip(De,"start",W,y),ye=Ip(De,"stop",C,y),Se=Ip(De,"stop",k,y),Be=Ip(De,"stop",Z,y),Ve=Ip(De,"stop",Ee=>{Me&&Ee.preventDefault(),Y&&Y(Ee)},y),tt=Ip(De,"start",re,y),ht=Ip(De,"stop",j,y),it=Ip(De,"stop",K,y),gt=Ip(De,"stop",Ee=>{Bw(Ee.target)||fe(!1),M&&M(Ee)},!1),$t=Xp(Ee=>{pe.current||(pe.current=Ee.currentTarget),Bw(Ee.target)&&(fe(!0),z&&z(Ee)),B&&B(Ee)}),He=()=>{const Ee=pe.current;return h&&h!=="button"&&!(Ee.tagName==="A"&&Ee.href)},Ct=Xp(Ee=>{w&&!Ee.repeat&&Me&&Ee.key===" "&&De.stop(Ee,()=>{De.start(Ee)}),Ee.target===Ee.currentTarget&&He()&&Ee.key===" "&&Ee.preventDefault(),q&&q(Ee),Ee.target===Ee.currentTarget&&He()&&Ee.key==="Enter"&&!f&&(Ee.preventDefault(),P&&P(Ee))}),Xe=Xp(Ee=>{w&&Ee.key===" "&&Me&&!Ee.defaultPrevented&&De.stop(Ee,()=>{De.pulsate(Ee)}),V&&V(Ee),P&&Ee.target===Ee.currentTarget&&He()&&Ee.key===" "&&!Ee.defaultPrevented&&P(Ee)});let tn=h;tn==="button"&&(Te.href||Te.to)&&(tn=A);const Kt={};tn==="button"?(Kt.type=ue===void 0?"button":ue,Kt.disabled=f):(!Te.href&&!Te.to&&(Kt.role="button"),f&&(Kt["aria-disabled"]=f));const Jt=up(n,pe),Ht={...r,centerRipple:o,component:h,disabled:f,disableRipple:v,disableTouchRipple:y,focusRipple:w,tabIndex:ie,focusVisible:Me},$e=QH(Ht);return Ln.jsxs(e$,{as:tn,className:Ji($e.root,a),ownerState:Ht,onBlur:gt,onClick:P,onContextMenu:ye,onFocus:$t,onKeyDown:Ct,onKeyUp:Xe,onMouseDown:le,onMouseLeave:Ve,onMouseUp:Be,onDragLeave:Se,onTouchEnd:ht,onTouchMove:it,onTouchStart:tt,ref:Jt,tabIndex:f?-1:ie,type:ue,...Kt,...Te,children:[l,ve?Ln.jsx(YH,{ref:me,center:o,...se}):null]})});function Ip(t,e,n,r=!1){return Xp(i=>(n&&n(i),r||t[e](i),!0))}function t$(t){return typeof t.main=="string"}function n$(t,e=[]){if(!t$(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function ld(t=[]){return([,e])=>e&&n$(e,t)}function r$(t){return Qs("MuiCircularProgress",t)}Ss("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Om=44,zC=Qb`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,UC=Qb`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,i$=typeof zC!="string"?WP`
        animation: ${zC} 1.4s linear infinite;
      `:null,a$=typeof UC!="string"?WP`
        animation: ${UC} 1.4s ease-in-out infinite;
      `:null,o$=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,o={root:["root",n,`color${pi(r)}`],svg:["svg"],circle:["circle",`circle${pi(n)}`,i&&"circleDisableShrink"]};return Tl(o,r$,e)},s$=Wr("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${pi(n.color)}`]]}})(El(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:i$||{animation:`${zC} 1.4s linear infinite`}},...Object.entries(t.palette).filter(ld()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),l$=Wr("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),u$=Wr("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${pi(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(El(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:a$||{animation:`${UC} 1.4s ease-in-out infinite`}}]}))),jS=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:l=!1,size:a=40,style:h,thickness:f=3.6,value:v=0,variant:y="indeterminate",...w}=r,b={...r,color:o,disableShrink:l,size:a,thickness:f,value:v,variant:y},A=o$(b),M={},P={},C={};if(y==="determinate"){const k=2*Math.PI*((Om-f)/2);M.strokeDasharray=k.toFixed(3),C["aria-valuenow"]=Math.round(v),M.strokeDashoffset=`${((100-v)/100*k).toFixed(3)}px`,P.transform="rotate(-90deg)"}return Ln.jsx(s$,{className:Ji(A.root,i),style:{width:a,height:a,...P,...h},ownerState:b,ref:n,role:"progressbar",...C,...w,children:Ln.jsx(l$,{className:A.svg,ownerState:b,viewBox:`${Om/2} ${Om/2} ${Om} ${Om}`,children:Ln.jsx(u$,{className:A.circle,style:M,ownerState:b,cx:Om,cy:Om,r:(Om-f)/2,fill:"none",strokeWidth:f})})})});function c$(t){return Qs("MuiIconButton",t)}const yI=Ss("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),h$=t=>{const{classes:e,disabled:n,color:r,edge:i,size:o,loading:l}=t,a={root:["root",l&&"loading",n&&"disabled",r!=="default"&&`color${pi(r)}`,i&&`edge${pi(i)}`,`size${pi(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Tl(a,c$,e)},f$=Wr(fR,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${pi(n.color)}`],n.edge&&e[`edge${pi(n.edge)}`],e[`size${pi(n.size)}`]]}})(El(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:mh(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),El(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(ld()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(ld()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.vars?`rgba(${(t.vars||t).palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:mh((t.vars||t).palette[e].main,t.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${yI.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${yI.loading}`]:{color:"transparent"}}))),d$=Wr("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(t,e)=>e.loadingIndicator})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),om=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiIconButton"}),{edge:i=!1,children:o,className:l,color:a="default",disabled:h=!1,disableFocusRipple:f=!1,size:v="medium",id:y,loading:w=null,loadingIndicator:b,...A}=r,M=eR(y),P=b??Ln.jsx(jS,{"aria-labelledby":M,color:"inherit",size:16}),C={...r,edge:i,color:a,disabled:h,disableFocusRipple:f,loading:w,loadingIndicator:P,size:v},k=h$(C);return Ln.jsxs(f$,{id:w?M:y,className:Ji(k.root,l),centerRipple:!0,focusRipple:!f,disabled:h||w,ref:n,...A,ownerState:C,children:[typeof w=="boolean"&&Ln.jsx("span",{className:k.loadingWrapper,style:{display:"contents"},children:Ln.jsx(d$,{className:k.loadingIndicator,ownerState:C,children:w&&P})}),o]})});function p$(t){return Qs("MuiTypography",t)}Ss("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const m$={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},g$=TH(),v$=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:l}=t,a={root:["root",o,t.align!=="inherit"&&`align${pi(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Tl(a,p$,l)},y$=Wr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${pi(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(El(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(ld()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${pi(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),_I={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},dR=Et.forwardRef(function(e,n){const{color:r,...i}=el({props:e,name:"MuiTypography"}),o=!m$[r],l=g$({...i,...o&&{color:r}}),{align:a="inherit",className:h,component:f,gutterBottom:v=!1,noWrap:y=!1,paragraph:w=!1,variant:b="body1",variantMapping:A=_I,...M}=l,P={...l,align:a,color:r,className:h,component:f,gutterBottom:v,noWrap:y,paragraph:w,variant:b,variantMapping:A},C=f||(w?"p":A[b]||_I[b])||"span",k=v$(P);return Ln.jsx(y$,{as:C,ref:n,className:Ji(k.root,h),...M,ownerState:P,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...M.style}})});function _$(t){return Qs("MuiAppBar",t)}Ss("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const b$=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${pi(e)}`,`position${pi(n)}`]};return Tl(i,_$,r)},bI=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,x$=Wr(rx,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${pi(n.position)}`],e[`color${pi(n.color)}`]]}})(El(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(ld(["contrastText"])).map(([e])=>({props:{color:e},style:{"--AppBar-background":(t.vars??t).palette[e].main,"--AppBar-color":(t.vars??t).palette[e].contrastText}})),{props:e=>e.enableColorOnDark===!0&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>e.enableColorOnDark===!1&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?bI(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?bI(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),w$=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:l=!1,position:a="fixed",...h}=r,f={...r,color:o,position:a,enableColorOnDark:l},v=b$(f);return Ln.jsx(x$,{square:!0,component:"header",ownerState:f,elevation:4,className:Ji(v.root,i,a==="fixed"&&"mui-fixed"),ref:n,...h})});function S$(t){return typeof t=="function"?t():t}const E$=Et.forwardRef(function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[l,a]=Et.useState(null),h=up(Et.isValidElement(r)?nR(r):null,n);if(Lb(()=>{o||a(S$(i)||document.body)},[i,o]),Lb(()=>{if(l&&!o)return LC(n,l),()=>{LC(n,null)}},[n,l,o]),o){if(Et.isValidElement(r)){const f={ref:h};return Et.cloneElement(r,f)}return r}return l&&Iz.createPortal(r,l)});function Xy(t){return typeof t=="string"}const T$=Et.createContext(void 0);function M$(){return Et.useContext(T$)}const A$={entering:{opacity:1},entered:{opacity:1}},jC=Et.forwardRef(function(e,n){const r=lR(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:a,easing:h,in:f,onEnter:v,onEntered:y,onEntering:w,onExit:b,onExited:A,onExiting:M,style:P,timeout:C=i,TransitionComponent:k=am,...B}=e,z=Et.useRef(null),q=up(z,nR(a),n),V=se=>de=>{if(se){const ue=z.current;de===void 0?se(ue):se(ue,de)}},W=V(w),Y=V((se,de)=>{FH(se);const ue=vI({style:P,timeout:C,easing:h},{mode:"enter"});se.style.webkitTransition=r.transitions.create("opacity",ue),se.style.transition=r.transitions.create("opacity",ue),v&&v(se,de)}),Z=V(y),j=V(M),K=V(se=>{const de=vI({style:P,timeout:C,easing:h},{mode:"exit"});se.style.webkitTransition=r.transitions.create("opacity",de),se.style.transition=r.transitions.create("opacity",de),b&&b(se)}),re=V(A),ie=se=>{o&&o(z.current,se)};return Ln.jsx(k,{appear:l,in:f,nodeRef:z,onEnter:Y,onEntered:Z,onEntering:W,onExit:K,onExited:re,onExiting:j,addEndListener:ie,timeout:C,...B,children:(se,{ownerState:de,...ue})=>Et.cloneElement(a,{style:{opacity:0,visibility:se==="exited"&&!f?"hidden":void 0,...A$[se],...P,...a.props.style},ref:q,...ue})})});function C$(t){return Qs("MuiBackdrop",t)}Ss("MuiBackdrop",["root","invisible"]);const P$=t=>{const{classes:e,invisible:n}=t;return Tl({root:["root",n&&"invisible"]},C$,e)},R$=Wr("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Oz=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiBackdrop"}),{children:i,className:o,component:l="div",invisible:a=!1,open:h,components:f={},componentsProps:v={},slotProps:y={},slots:w={},TransitionComponent:b,transitionDuration:A,...M}=r,P={...r,component:l,invisible:a},C=P$(P),k={transition:b,root:f.Root,...w},B={...v,...y},z={slots:k,slotProps:B},[q,V]=yf("root",{elementType:R$,externalForwardedProps:z,className:Ji(C.root,o),ownerState:P}),[W,Y]=yf("transition",{elementType:jC,externalForwardedProps:z,ownerState:P});return Ln.jsx(W,{in:h,timeout:A,...M,...Y,children:Ln.jsx(q,{"aria-hidden":!0,...V,classes:C,ref:n,children:i})})}),D$=Ss("MuiBox",["root"]),L$=T_(),gg=uz({themeId:rp,defaultTheme:L$,defaultClassName:D$.root,generateClassName:JP.generate});function I$(t){return Qs("MuiButton",t)}const Yg=Ss("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),O$=Et.createContext({}),N$=Et.createContext(void 0),k$=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:o,loading:l,loadingPosition:a,classes:h}=t,f={root:["root",l&&"loading",o,`${o}${pi(e)}`,`size${pi(i)}`,`${o}Size${pi(i)}`,`color${pi(e)}`,n&&"disableElevation",r&&"fullWidth",l&&`loadingPosition${pi(a)}`],startIcon:["icon","startIcon",`iconSize${pi(i)}`],endIcon:["icon","endIcon",`iconSize${pi(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},v=Tl(f,I$,h);return{...h,...v}},Nz=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],F$=Wr(fR,{shouldForwardProp:t=>US(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${pi(n.color)}`],e[`size${pi(n.size)}`],e[`${n.variant}Size${pi(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(El(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Yg.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${Yg.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${Yg.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Yg.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(ld()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[r].mainChannel} / 0.5)`:mh(t.palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:mh(t.palette[r].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:mh(t.palette[r].main,t.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:mh(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:mh(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Yg.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Yg.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${Yg.loading}`]:{color:"transparent"}}}]}})),B$=Wr("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${pi(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Nz]})),z$=Wr("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${pi(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Nz]})),U$=Wr("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(t,e)=>e.loadingIndicator})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),xI=Wr("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(t,e)=>e.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),sT=Et.forwardRef(function(e,n){const r=Et.useContext(O$),i=Et.useContext(N$),o=Db(r,e),l=el({props:o,name:"MuiButton"}),{children:a,color:h="primary",component:f="button",className:v,disabled:y=!1,disableElevation:w=!1,disableFocusRipple:b=!1,endIcon:A,focusVisibleClassName:M,fullWidth:P=!1,id:C,loading:k=null,loadingIndicator:B,loadingPosition:z="center",size:q="medium",startIcon:V,type:W,variant:Y="text",...Z}=l,j=eR(C),K=B??Ln.jsx(jS,{"aria-labelledby":j,color:"inherit",size:16}),re={...l,color:h,component:f,disabled:y,disableElevation:w,disableFocusRipple:b,fullWidth:P,loading:k,loadingIndicator:K,loadingPosition:z,size:q,type:W,variant:Y},ie=k$(re),se=(V||k&&z==="start")&&Ln.jsx(B$,{className:ie.startIcon,ownerState:re,children:V||Ln.jsx(xI,{className:ie.loadingIconPlaceholder,ownerState:re})}),de=(A||k&&z==="end")&&Ln.jsx(z$,{className:ie.endIcon,ownerState:re,children:A||Ln.jsx(xI,{className:ie.loadingIconPlaceholder,ownerState:re})}),ue=i||"",Te=typeof k=="boolean"?Ln.jsx("span",{className:ie.loadingWrapper,style:{display:"contents"},children:k&&Ln.jsx(U$,{className:ie.loadingIndicator,ownerState:re,children:K})}):null;return Ln.jsxs(F$,{ownerState:re,className:Ji(r.className,ie.root,v,ue),component:f,disabled:y||k,focusRipple:!b,focusVisibleClassName:Ji(ie.focusVisible,M),ref:n,type:W,id:k?j:C,...Z,classes:ie,children:[se,z!=="end"&&Te,a,z==="end"&&Te,de]})});function j$(t){return Qs("PrivateSwitchBase",t)}Ss("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const V$=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${pi(i)}`],input:["input"]};return Tl(o,j$,e)},G$=Wr(fR)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:e})=>t==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:e})=>t==="end"&&e.size!=="small",style:{marginRight:-12}}]}),q$=Wr("input",{shouldForwardProp:US})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),H$=Et.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:o,defaultChecked:l,disabled:a,disableFocusRipple:h=!1,edge:f=!1,icon:v,id:y,inputProps:w,inputRef:b,name:A,onBlur:M,onChange:P,onFocus:C,readOnly:k,required:B=!1,tabIndex:z,type:q,value:V,slots:W={},slotProps:Y={},...Z}=e,[j,K]=pz({controlled:i,default:!!l,name:"SwitchBase",state:"checked"}),re=M$(),ie=ye=>{C&&C(ye),re&&re.onFocus&&re.onFocus(ye)},se=ye=>{M&&M(ye),re&&re.onBlur&&re.onBlur(ye)},de=ye=>{if(ye.nativeEvent.defaultPrevented)return;const Se=ye.target.checked;K(Se),P&&P(ye,Se)};let ue=a;re&&typeof ue>"u"&&(ue=re.disabled);const Te=q==="checkbox"||q==="radio",pe={...e,checked:j,disabled:ue,disableFocusRipple:h,edge:f},De=V$(pe),me={slots:W,slotProps:{input:w,...Y}},[Me,fe]=yf("root",{ref:n,elementType:G$,className:De.root,shouldForwardComponentProp:!0,externalForwardedProps:{...me,component:"span",...Z},getSlotProps:ye=>({...ye,onFocus:Se=>{var Be;(Be=ye.onFocus)==null||Be.call(ye,Se),ie(Se)},onBlur:Se=>{var Be;(Be=ye.onBlur)==null||Be.call(ye,Se),se(Se)}}),ownerState:pe,additionalProps:{centerRipple:!0,focusRipple:!h,disabled:ue,role:void 0,tabIndex:null}}),[ve,le]=yf("input",{ref:b,elementType:q$,className:De.input,externalForwardedProps:me,getSlotProps:ye=>({onChange:Se=>{var Be;(Be=ye.onChange)==null||Be.call(ye,Se),de(Se)}}),ownerState:pe,additionalProps:{autoFocus:r,checked:i,defaultChecked:l,disabled:ue,id:Te?y:void 0,name:A,readOnly:k,required:B,tabIndex:z,type:q,...q==="checkbox"&&V===void 0?{}:{value:V}}});return Ln.jsxs(Me,{...fe,children:[Ln.jsx(ve,{...le}),j?o:v]})}),$$=pd(Ln.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),W$=pd(Ln.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),X$=pd(Ln.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Z$(t){return Qs("MuiCheckbox",t)}const lT=Ss("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Y$=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,o={root:["root",n&&"indeterminate",`color${pi(r)}`,`size${pi(i)}`]},l=Tl(o,Z$,e);return{...e,...l}},K$=Wr(H$,{shouldForwardProp:t=>US(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${pi(n.size)}`],n.color!=="default"&&e[`color${pi(n.color)}`]]}})(El(({theme:t})=>({color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:mh(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(ld()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:mh(t.palette[e].main,t.palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(ld()).map(([e])=>({props:{color:e},style:{[`&.${lT.checked}, &.${lT.indeterminate}`]:{color:(t.vars||t).palette[e].main},[`&.${lT.disabled}`]:{color:(t.vars||t).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),J$=Ln.jsx(W$,{}),Q$=Ln.jsx($$,{}),eW=Ln.jsx(X$,{}),kz=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiCheckbox"}),{checkedIcon:i=J$,color:o="primary",icon:l=Q$,indeterminate:a=!1,indeterminateIcon:h=eW,inputProps:f,size:v="medium",disableRipple:y=!1,className:w,slots:b={},slotProps:A={},...M}=r,P=a?h:l,C=a?h:i,k={...r,disableRipple:y,color:o,indeterminate:a,size:v},B=Y$(k),z=A.input??f,[q,V]=yf("root",{ref:n,elementType:K$,className:Ji(B.root,w),shouldForwardComponentProp:!0,externalForwardedProps:{slots:b,slotProps:A,...M},ownerState:k,additionalProps:{type:"checkbox",icon:Et.cloneElement(P,{fontSize:P.props.fontSize??v}),checkedIcon:Et.cloneElement(C,{fontSize:C.props.fontSize??v}),disableRipple:y,slots:b,slotProps:{input:PH(typeof z=="function"?z(k):z,{"data-indeterminate":a})}}});return Ln.jsx(q,{...V,classes:B})}),tW=Hq({createStyledComponent:Wr("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${pi(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>el({props:t,name:"MuiContainer"})}),VC=typeof Rz({})=="function",nW=(t,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!t.vars&&{colorScheme:t.palette.mode}}),rW=t=>({color:(t.vars||t).palette.text.primary,...t.typography.body1,backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),Fz=(t,e=!1)=>{var o,l;const n={};e&&t.colorSchemes&&typeof t.getColorSchemeSelector=="function"&&Object.entries(t.colorSchemes).forEach(([a,h])=>{var v,y;const f=t.getColorSchemeSelector(a);f.startsWith("@")?n[f]={":root":{colorScheme:(v=h.palette)==null?void 0:v.mode}}:n[f.replace(/\s*&/,"")]={colorScheme:(y=h.palette)==null?void 0:y.mode}});let r={html:nW(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:{margin:0,...rW(t),"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}},...n};const i=(l=(o=t.components)==null?void 0:o.MuiCssBaseline)==null?void 0:l.styleOverrides;return i&&(r=[r,i]),r},mw="mui-ecs",iW=t=>{const e=Fz(t,!1),n=Array.isArray(e)?e[0]:e;return!t.vars&&n&&(n.html[`:root:has(${mw})`]={colorScheme:t.palette.mode}),t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([r,i])=>{var l,a;const o=t.getColorSchemeSelector(r);o.startsWith("@")?n[o]={[`:root:not(:has(.${mw}))`]:{colorScheme:(l=i.palette)==null?void 0:l.mode}}:n[o.replace(/\s*&/,"")]={[`&:not(:has(.${mw}))`]:{colorScheme:(a=i.palette)==null?void 0:a.mode}}}),e},aW=Rz(VC?({theme:t,enableColorScheme:e})=>Fz(t,e):({theme:t})=>iW(t));function oW(t){const e=el({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return Ln.jsxs(Et.Fragment,{children:[VC&&Ln.jsx(aW,{enableColorScheme:r}),!VC&&!r&&Ln.jsx("span",{className:mw,style:{display:"none"}}),n]})}function sW(t){const e=ad(t);return e.body===t?Fw(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function gb(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function wI(t){return parseInt(Fw(t).getComputedStyle(t).paddingRight,10)||0}function lW(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function SI(t,e,n,r,i){const o=[e,n,...r];[].forEach.call(t.children,l=>{const a=!o.includes(l),h=!lW(l);a&&h&&gb(l,i)})}function uT(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function uW(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(sW(r)){const l=mq(Fw(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${wI(r)+l}px`;const a=ad(r).querySelectorAll(".mui-fixed");[].forEach.call(a,h=>{n.push({value:h.style.paddingRight,property:"padding-right",el:h}),h.style.paddingRight=`${wI(h)+l}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=ad(r).body;else{const l=r.parentElement,a=Fw(r);o=(l==null?void 0:l.nodeName)==="HTML"&&a.getComputedStyle(l).overflowY==="scroll"?l:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:l,property:a})=>{o?l.style.setProperty(a,o):l.style.removeProperty(a)})}}function cW(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class hW{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&gb(e.modalRef,!1);const i=cW(n);SI(n,e.mount,e.modalRef,i,!0);const o=uT(this.containers,l=>l.container===n);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=uT(this.containers,o=>o.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=uW(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=uT(this.containers,l=>l.modals.includes(e)),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&gb(e.modalRef,n),SI(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&gb(l.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const fW=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function dW(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function pW(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function mW(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||pW(t))}function gW(t){const e=[],n=[];return Array.from(t.querySelectorAll(fW)).forEach((r,i)=>{const o=dW(r);o===-1||!mW(r)||(o===0?e.push(r):n.push({documentOrder:i,tabIndex:o,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function vW(){return!0}function yW(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=gW,isEnabled:l=vW,open:a}=t,h=Et.useRef(!1),f=Et.useRef(null),v=Et.useRef(null),y=Et.useRef(null),w=Et.useRef(null),b=Et.useRef(!1),A=Et.useRef(null),M=up(nR(e),A),P=Et.useRef(null);Et.useEffect(()=>{!a||!A.current||(b.current=!n)},[n,a]),Et.useEffect(()=>{if(!a||!A.current)return;const B=ad(A.current);return A.current.contains(B.activeElement)||(A.current.hasAttribute("tabIndex")||A.current.setAttribute("tabIndex","-1"),b.current&&A.current.focus()),()=>{i||(y.current&&y.current.focus&&(h.current=!0,y.current.focus()),y.current=null)}},[a]),Et.useEffect(()=>{if(!a||!A.current)return;const B=ad(A.current),z=W=>{P.current=W,!(r||!l()||W.key!=="Tab")&&B.activeElement===A.current&&W.shiftKey&&(h.current=!0,v.current&&v.current.focus())},q=()=>{var Z,j;const W=A.current;if(W===null)return;if(!B.hasFocus()||!l()||h.current){h.current=!1;return}if(W.contains(B.activeElement)||r&&B.activeElement!==f.current&&B.activeElement!==v.current)return;if(B.activeElement!==w.current)w.current=null;else if(w.current!==null)return;if(!b.current)return;let Y=[];if((B.activeElement===f.current||B.activeElement===v.current)&&(Y=o(A.current)),Y.length>0){const K=!!((Z=P.current)!=null&&Z.shiftKey&&((j=P.current)==null?void 0:j.key)==="Tab"),re=Y[0],ie=Y[Y.length-1];typeof re!="string"&&typeof ie!="string"&&(K?ie.focus():re.focus())}else W.focus()};B.addEventListener("focusin",q),B.addEventListener("keydown",z,!0);const V=setInterval(()=>{B.activeElement&&B.activeElement.tagName==="BODY"&&q()},50);return()=>{clearInterval(V),B.removeEventListener("focusin",q),B.removeEventListener("keydown",z,!0)}},[n,r,i,l,a,o]);const C=B=>{y.current===null&&(y.current=B.relatedTarget),b.current=!0,w.current=B.target;const z=e.props.onFocus;z&&z(B)},k=B=>{y.current===null&&(y.current=B.relatedTarget),b.current=!0};return Ln.jsxs(Et.Fragment,{children:[Ln.jsx("div",{tabIndex:a?0:-1,onFocus:k,ref:f,"data-testid":"sentinelStart"}),Et.cloneElement(e,{ref:M,onFocus:C}),Ln.jsx("div",{tabIndex:a?0:-1,onFocus:k,ref:v,"data-testid":"sentinelEnd"})]})}function _W(t){return typeof t=="function"?t():t}function bW(t){return t?t.props.hasOwnProperty("in"):!1}const EI=()=>{},Qx=new hW;function xW(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:o,onTransitionExited:l,children:a,onClose:h,open:f,rootRef:v}=t,y=Et.useRef({}),w=Et.useRef(null),b=Et.useRef(null),A=up(b,v),[M,P]=Et.useState(!f),C=bW(a);let k=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(k=!1);const B=()=>ad(w.current),z=()=>(y.current.modalRef=b.current,y.current.mount=w.current,y.current),q=()=>{Qx.mount(z(),{disableScrollLock:r}),b.current&&(b.current.scrollTop=0)},V=Xp(()=>{const de=_W(e)||B().body;Qx.add(z(),de),b.current&&q()}),W=()=>Qx.isTopModal(z()),Y=Xp(de=>{w.current=de,de&&(f&&W()?q():b.current&&gb(b.current,k))}),Z=Et.useCallback(()=>{Qx.remove(z(),k)},[k]);Et.useEffect(()=>()=>{Z()},[Z]),Et.useEffect(()=>{f?V():(!C||!i)&&Z()},[f,Z,C,i,V]);const j=de=>ue=>{var Te;(Te=de.onKeyDown)==null||Te.call(de,ue),!(ue.key!=="Escape"||ue.which===229||!W())&&(n||(ue.stopPropagation(),h&&h(ue,"escapeKeyDown")))},K=de=>ue=>{var Te;(Te=de.onClick)==null||Te.call(de,ue),ue.target===ue.currentTarget&&h&&h(ue,"backdropClick")};return{getRootProps:(de={})=>{const ue=mb(t);delete ue.onTransitionEnter,delete ue.onTransitionExited;const Te={...ue,...de};return{role:"presentation",...Te,onKeyDown:j(Te),ref:A}},getBackdropProps:(de={})=>{const ue=de;return{"aria-hidden":!0,...ue,onClick:K(ue),open:f}},getTransitionProps:()=>{const de=()=>{P(!1),o&&o()},ue=()=>{P(!0),l&&l(),i&&Z()};return{onEnter:eI(de,(a==null?void 0:a.props.onEnter)??EI),onExited:eI(ue,(a==null?void 0:a.props.onExited)??EI)}},rootRef:A,portalRef:Y,isTopModal:W,exited:M,hasTransition:C}}function wW(t){return Qs("MuiModal",t)}Ss("MuiModal",["root","hidden","backdrop"]);const SW=t=>{const{open:e,exited:n,classes:r}=t;return Tl({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},wW,r)},EW=Wr("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(El(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),TW=Wr(Oz,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),MW=Et.forwardRef(function(e,n){const r=el({name:"MuiModal",props:e}),{BackdropComponent:i=TW,BackdropProps:o,classes:l,className:a,closeAfterTransition:h=!1,children:f,container:v,component:y,components:w={},componentsProps:b={},disableAutoFocus:A=!1,disableEnforceFocus:M=!1,disableEscapeKeyDown:P=!1,disablePortal:C=!1,disableRestoreFocus:k=!1,disableScrollLock:B=!1,hideBackdrop:z=!1,keepMounted:q=!1,onBackdropClick:V,onClose:W,onTransitionEnter:Y,onTransitionExited:Z,open:j,slotProps:K={},slots:re={},theme:ie,...se}=r,de={...r,closeAfterTransition:h,disableAutoFocus:A,disableEnforceFocus:M,disableEscapeKeyDown:P,disablePortal:C,disableRestoreFocus:k,disableScrollLock:B,hideBackdrop:z,keepMounted:q},{getRootProps:ue,getBackdropProps:Te,getTransitionProps:pe,portalRef:De,isTopModal:me,exited:Me,hasTransition:fe}=xW({...de,rootRef:n}),ve={...de,exited:Me},le=SW(ve),ye={};if(f.props.tabIndex===void 0&&(ye.tabIndex="-1"),fe){const{onEnter:it,onExited:gt}=pe();ye.onEnter=it,ye.onExited=gt}const Se={slots:{root:w.Root,backdrop:w.Backdrop,...re},slotProps:{...b,...K}},[Be,Ve]=yf("root",{ref:n,elementType:EW,externalForwardedProps:{...Se,...se,component:y},getSlotProps:ue,ownerState:ve,className:Ji(a,le==null?void 0:le.root,!ve.open&&ve.exited&&(le==null?void 0:le.hidden))}),[tt,ht]=yf("backdrop",{ref:o==null?void 0:o.ref,elementType:i,externalForwardedProps:Se,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:it=>Te({...it,onClick:gt=>{V&&V(gt),it!=null&&it.onClick&&it.onClick(gt)}}),className:Ji(o==null?void 0:o.className,le==null?void 0:le.backdrop),ownerState:ve});return!q&&!j&&(!fe||Me)?null:Ln.jsx(E$,{ref:De,container:v,disablePortal:C,children:Ln.jsxs(Be,{...Ve,children:[!z&&i?Ln.jsx(tt,{...ht}):null,Ln.jsx(yW,{disableEnforceFocus:M,disableAutoFocus:A,disableRestoreFocus:k,isEnabled:me,open:j,children:Et.cloneElement(f,ye)})]})})});function AW(t){return Qs("MuiDialog",t)}const cT=Ss("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Bz=Et.createContext({}),CW=Wr(Oz,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),PW=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=t,l={root:["root"],container:["container",`scroll${pi(n)}`],paper:["paper",`paperScroll${pi(n)}`,`paperWidth${pi(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return Tl(l,AW,e)},RW=Wr(MW,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),DW=Wr("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${pi(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),LW=Wr(rx,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${pi(n.scroll)}`],e[`paperWidth${pi(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(El(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${cT.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${cT.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${cT.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),IW=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiDialog"}),i=lR(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":a,"aria-modal":h=!0,BackdropComponent:f,BackdropProps:v,children:y,className:w,disableEscapeKeyDown:b=!1,fullScreen:A=!1,fullWidth:M=!1,maxWidth:P="sm",onBackdropClick:C,onClick:k,onClose:B,open:z,PaperComponent:q=rx,PaperProps:V={},scroll:W="paper",slots:Y={},slotProps:Z={},TransitionComponent:j=jC,transitionDuration:K=o,TransitionProps:re,...ie}=r,se={...r,disableEscapeKeyDown:b,fullScreen:A,fullWidth:M,maxWidth:P,scroll:W},de=PW(se),ue=Et.useRef(),Te=He=>{ue.current=He.target===He.currentTarget},pe=He=>{k&&k(He),ue.current&&(ue.current=null,C&&C(He),B&&B(He,"backdropClick"))},De=eR(a),me=Et.useMemo(()=>({titleId:De}),[De]),Me={transition:j,...Y},fe={transition:re,paper:V,backdrop:v,...Z},ve={slots:Me,slotProps:fe},[le,ye]=yf("root",{elementType:RW,shouldForwardComponentProp:!0,externalForwardedProps:ve,ownerState:se,className:Ji(de.root,w),ref:n}),[Se,Be]=yf("backdrop",{elementType:CW,shouldForwardComponentProp:!0,externalForwardedProps:ve,ownerState:se}),[Ve,tt]=yf("paper",{elementType:LW,shouldForwardComponentProp:!0,externalForwardedProps:ve,ownerState:se,className:Ji(de.paper,V.className)}),[ht,it]=yf("container",{elementType:DW,externalForwardedProps:ve,ownerState:se,className:Ji(de.container)}),[gt,$t]=yf("transition",{elementType:jC,externalForwardedProps:ve,ownerState:se,additionalProps:{appear:!0,in:z,timeout:K,role:"presentation"}});return Ln.jsx(le,{closeAfterTransition:!0,slots:{backdrop:Se},slotProps:{backdrop:{transitionDuration:K,as:f,...Be}},disableEscapeKeyDown:b,onClose:B,open:z,onClick:pe,...ye,...ie,children:Ln.jsx(gt,{...$t,children:Ln.jsx(ht,{onMouseDown:Te,...it,children:Ln.jsx(Ve,{as:q,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":De,"aria-modal":h,...tt,children:Ln.jsx(Bz.Provider,{value:me,children:y})})})})})});function OW(t){return Qs("MuiDialogContent",t)}Ss("MuiDialogContent",["root","dividers"]);function NW(t){return Qs("MuiDialogTitle",t)}const kW=Ss("MuiDialogTitle",["root"]),FW=t=>{const{classes:e,dividers:n}=t;return Tl({root:["root",n&&"dividers"]},OW,e)},BW=Wr("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(El(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${kW.root} + &`]:{paddingTop:0}}}]}))),zW=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiDialogContent"}),{className:i,dividers:o=!1,...l}=r,a={...r,dividers:o},h=FW(a);return Ln.jsx(BW,{className:Ji(h.root,i),ownerState:a,ref:n,...l})}),UW=t=>{const{classes:e}=t;return Tl({root:["root"]},NW,e)},jW=Wr(dR,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),VW=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiDialogTitle"}),{className:i,id:o,...l}=r,a=r,h=UW(a),{titleId:f=o}=Et.useContext(Bz);return Ln.jsx(jW,{component:"h2",className:Ji(h.root,i),ownerState:a,ref:n,variant:"h6",id:o??f,...l})}),Zy=Et.createContext({});function GW(t){return Qs("MuiList",t)}Ss("MuiList",["root","padding","dense","subheader"]);const qW=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Tl({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},GW,e)},HW=Wr("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),VS=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiList"}),{children:i,className:o,component:l="ul",dense:a=!1,disablePadding:h=!1,subheader:f,...v}=r,y=Et.useMemo(()=>({dense:a}),[a]),w={...r,component:l,dense:a,disablePadding:h},b=qW(w);return Ln.jsx(Zy.Provider,{value:y,children:Ln.jsxs(HW,{as:l,className:Ji(b.root,o),ref:n,ownerState:w,...v,children:[f,i]})})});function $W(t){return Qs("MuiListItem",t)}Ss("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const WW=Ss("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function XW(t){return Qs("MuiListItemSecondaryAction",t)}Ss("MuiListItemSecondaryAction",["root","disableGutters"]);const ZW=t=>{const{disableGutters:e,classes:n}=t;return Tl({root:["root",e&&"disableGutters"]},XW,n)},YW=Wr("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),zz=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiListItemSecondaryAction"}),{className:i,...o}=r,l=Et.useContext(Zy),a={...r,disableGutters:l.disableGutters},h=ZW(a);return Ln.jsx(YW,{className:Ji(h.root,i),ownerState:a,ref:n,...o})});zz.muiName="ListItemSecondaryAction";const KW=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.hasSecondaryAction&&e.secondaryAction]},JW=t=>{const{alignItems:e,classes:n,dense:r,disableGutters:i,disablePadding:o,divider:l,hasSecondaryAction:a}=t;return Tl({root:["root",r&&"dense",!i&&"gutters",!o&&"padding",l&&"divider",e==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},$W,n)},QW=Wr("div",{name:"MuiListItem",slot:"Root",overridesResolver:KW})(El(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${WW.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),eX=Wr("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),pR=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiListItem"}),{alignItems:i="center",children:o,className:l,component:a,components:h={},componentsProps:f={},ContainerComponent:v="li",ContainerProps:{className:y,...w}={},dense:b=!1,disableGutters:A=!1,disablePadding:M=!1,divider:P=!1,secondaryAction:C,slotProps:k={},slots:B={},...z}=r,q=Et.useContext(Zy),V=Et.useMemo(()=>({dense:b||q.dense||!1,alignItems:i,disableGutters:A}),[i,q.dense,b,A]),W=Et.useRef(null),Y=Et.Children.toArray(o),Z=Y.length&&uq(Y[Y.length-1],["ListItemSecondaryAction"]),j={...r,alignItems:i,dense:V.dense,disableGutters:A,disablePadding:M,divider:P,hasSecondaryAction:Z},K=JW(j),re=up(W,n),ie=B.root||h.Root||QW,se=k.root||f.root||{},de={className:Ji(K.root,se.className,l),...z};let ue=a||"li";return Z?(ue=!de.component&&!a?"div":ue,v==="li"&&(ue==="li"?ue="div":de.component==="li"&&(de.component="div")),Ln.jsx(Zy.Provider,{value:V,children:Ln.jsxs(eX,{as:v,className:Ji(K.container,y),ref:re,ownerState:j,...w,children:[Ln.jsx(ie,{...se,...!Xy(ie)&&{as:ue,ownerState:{...j,...se.ownerState}},...de,children:Y}),Y.pop()]})})):Ln.jsx(Zy.Provider,{value:V,children:Ln.jsxs(ie,{...se,as:ue,ref:re,...!Xy(ie)&&{ownerState:{...j,...se.ownerState}},...de,children:[Y,C&&Ln.jsx(zz,{children:C})]})})});function tX(t){return Qs("MuiListItemIcon",t)}Ss("MuiListItemIcon",["root","alignItemsFlexStart"]);const nX=t=>{const{alignItems:e,classes:n}=t;return Tl({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},tX,n)},rX=Wr("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(El(({theme:t})=>({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),mR=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiListItemIcon"}),{className:i,...o}=r,l=Et.useContext(Zy),a={...r,alignItems:l.alignItems},h=nX(a);return Ln.jsx(rX,{className:Ji(h.root,i),ownerState:a,ref:n,...o})});function iX(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const aX=2;function zv(t,e,n,r,i){return n===1?Math.min(t+e,i):Math.max(t-e,r)}function Uz(t,e){return t-e}function TI(t,e){const{index:n}=t.reduce((r,i,o)=>{const l=Math.abs(e-i);return r===null||l<r.distance||l===r.distance?{distance:l,index:o}:r},null)??{};return n}function e2(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function jw(t,e,n){return(t-e)*100/(n-e)}function oX(t,e,n){return(n-e)*t+e}function sX(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function lX(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(sX(e)))}function MI({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(Uz)}function t2({sliderRef:t,activeIndex:e,setActive:n}){var i,o,l;const r=ad(t.current);(!((i=t.current)!=null&&i.contains(r.activeElement))||Number((o=r==null?void 0:r.activeElement)==null?void 0:o.getAttribute("data-index"))!==e)&&((l=t.current)==null||l.querySelector(`[type="range"][data-index="${e}"]`).focus()),n&&n(e)}function n2(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?iX(t,e):!1}const uX={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},cX=t=>t;let r2;function AI(){return r2===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?r2=CSS.supports("touch-action","none"):r2=!0),r2}function hX(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:o=!1,marks:l=!1,max:a=100,min:h=0,name:f,onChange:v,onChangeCommitted:y,orientation:w="horizontal",rootRef:b,scale:A=cX,step:M=1,shiftStep:P=10,tabIndex:C,value:k}=t,B=Et.useRef(void 0),[z,q]=Et.useState(-1),[V,W]=Et.useState(-1),[Y,Z]=Et.useState(!1),j=Et.useRef(0),K=Et.useRef(null),[re,ie]=pz({controlled:k,default:n??h,name:"Slider"}),se=v&&((vt,Pt,vn)=>{const hn=vt.nativeEvent||vt,pn=new hn.constructor(hn.type,hn);Object.defineProperty(pn,"target",{writable:!0,value:{value:Pt,name:f}}),K.current=Pt,v(pn,Pt,vn)}),de=Array.isArray(re);let ue=de?re.slice().sort(Uz):[re];ue=ue.map(vt=>vt==null?h:py(vt,h,a));const Te=l===!0&&M!==null?[...Array(Math.floor((a-h)/M)+1)].map((vt,Pt)=>({value:h+M*Pt})):l||[],pe=Te.map(vt=>vt.value),[De,me]=Et.useState(-1),Me=Et.useRef(null),fe=up(b,Me),ve=vt=>Pt=>{var hn;const vn=Number(Pt.currentTarget.getAttribute("data-index"));Bw(Pt.target)&&me(vn),W(vn),(hn=vt==null?void 0:vt.onFocus)==null||hn.call(vt,Pt)},le=vt=>Pt=>{var vn;Bw(Pt.target)||me(-1),W(-1),(vn=vt==null?void 0:vt.onBlur)==null||vn.call(vt,Pt)},ye=(vt,Pt)=>{const vn=Number(vt.currentTarget.getAttribute("data-index")),hn=ue[vn],pn=pe.indexOf(hn);let nn=Pt;if(Te&&M==null){const Ft=pe[pe.length-1];nn>=Ft?nn=Ft:nn<=pe[0]?nn=pe[0]:nn=nn<hn?pe[pn-1]:pe[pn+1]}if(nn=py(nn,h,a),de){i&&(nn=py(nn,ue[vn-1]||-1/0,ue[vn+1]||1/0));const Ft=nn;nn=MI({values:ue,newValue:nn,index:vn});let In=vn;i||(In=nn.indexOf(Ft)),t2({sliderRef:Me,activeIndex:In})}ie(nn),me(vn),se&&!n2(nn,re)&&se(vt,nn,vn),y&&y(vt,K.current??nn)},Se=vt=>Pt=>{var vn;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(Pt.key)){Pt.preventDefault();const hn=Number(Pt.currentTarget.getAttribute("data-index")),pn=ue[hn];let nn=null;if(M!=null){const Ft=Pt.shiftKey?P:M;switch(Pt.key){case"ArrowUp":nn=zv(pn,Ft,1,h,a);break;case"ArrowRight":nn=zv(pn,Ft,o?-1:1,h,a);break;case"ArrowDown":nn=zv(pn,Ft,-1,h,a);break;case"ArrowLeft":nn=zv(pn,Ft,o?1:-1,h,a);break;case"PageUp":nn=zv(pn,P,1,h,a);break;case"PageDown":nn=zv(pn,P,-1,h,a);break;case"Home":nn=h;break;case"End":nn=a;break}}else if(Te){const Ft=pe[pe.length-1],In=pe.indexOf(pn),Pn=[o?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],ir=[o?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];Pn.includes(Pt.key)?In===0?nn=pe[0]:nn=pe[In-1]:ir.includes(Pt.key)&&(In===pe.length-1?nn=Ft:nn=pe[In+1])}nn!=null&&ye(Pt,nn)}(vn=vt==null?void 0:vt.onKeyDown)==null||vn.call(vt,Pt)};Lb(()=>{var vt;r&&Me.current.contains(document.activeElement)&&((vt=document.activeElement)==null||vt.blur())},[r]),r&&z!==-1&&q(-1),r&&De!==-1&&me(-1);const Be=vt=>Pt=>{var vn;(vn=vt.onChange)==null||vn.call(vt,Pt),ye(Pt,Pt.target.valueAsNumber)},Ve=Et.useRef(void 0);let tt=w;o&&w==="horizontal"&&(tt+="-reverse");const ht=({finger:vt,move:Pt=!1})=>{const{current:vn}=Me,{width:hn,height:pn,bottom:nn,left:Ft}=vn.getBoundingClientRect();let In;tt.startsWith("vertical")?In=(nn-vt.y)/pn:In=(vt.x-Ft)/hn,tt.includes("-reverse")&&(In=1-In);let Pn;if(Pn=oX(In,h,a),M)Pn=lX(Pn,M,h);else{const mt=TI(pe,Pn);Pn=pe[mt]}Pn=py(Pn,h,a);let ir=0;if(de){Pt?ir=Ve.current:ir=TI(ue,Pn),i&&(Pn=py(Pn,ue[ir-1]||-1/0,ue[ir+1]||1/0));const mt=Pn;Pn=MI({values:ue,newValue:Pn,index:ir}),i&&Pt||(ir=Pn.indexOf(mt),Ve.current=ir)}return{newValue:Pn,activeIndex:ir}},it=Xp(vt=>{const Pt=e2(vt,B);if(!Pt)return;if(j.current+=1,vt.type==="mousemove"&&vt.buttons===0){gt(vt);return}const{newValue:vn,activeIndex:hn}=ht({finger:Pt,move:!0});t2({sliderRef:Me,activeIndex:hn,setActive:q}),ie(vn),!Y&&j.current>aX&&Z(!0),se&&!n2(vn,re)&&se(vt,vn,hn)}),gt=Xp(vt=>{const Pt=e2(vt,B);if(Z(!1),!Pt)return;const{newValue:vn}=ht({finger:Pt,move:!0});q(-1),vt.type==="touchend"&&W(-1),y&&y(vt,K.current??vn),B.current=void 0,He()}),$t=Xp(vt=>{if(r)return;AI()||vt.preventDefault();const Pt=vt.changedTouches[0];Pt!=null&&(B.current=Pt.identifier);const vn=e2(vt,B);if(vn!==!1){const{newValue:pn,activeIndex:nn}=ht({finger:vn});t2({sliderRef:Me,activeIndex:nn,setActive:q}),ie(pn),se&&!n2(pn,re)&&se(vt,pn,nn)}j.current=0;const hn=ad(Me.current);hn.addEventListener("touchmove",it,{passive:!0}),hn.addEventListener("touchend",gt,{passive:!0})}),He=Et.useCallback(()=>{const vt=ad(Me.current);vt.removeEventListener("mousemove",it),vt.removeEventListener("mouseup",gt),vt.removeEventListener("touchmove",it),vt.removeEventListener("touchend",gt)},[gt,it]);Et.useEffect(()=>{const{current:vt}=Me;return vt.addEventListener("touchstart",$t,{passive:AI()}),()=>{vt.removeEventListener("touchstart",$t),He()}},[He,$t]),Et.useEffect(()=>{r&&He()},[r,He]);const Ct=vt=>Pt=>{var pn;if((pn=vt.onMouseDown)==null||pn.call(vt,Pt),r||Pt.defaultPrevented||Pt.button!==0)return;Pt.preventDefault();const vn=e2(Pt,B);if(vn!==!1){const{newValue:nn,activeIndex:Ft}=ht({finger:vn});t2({sliderRef:Me,activeIndex:Ft,setActive:q}),ie(nn),se&&!n2(nn,re)&&se(Pt,nn,Ft)}j.current=0;const hn=ad(Me.current);hn.addEventListener("mousemove",it,{passive:!0}),hn.addEventListener("mouseup",gt)},Xe=jw(de?ue[0]:h,h,a),tn=jw(ue[ue.length-1],h,a)-Xe,Kt=(vt={})=>{const Pt=mb(vt),vn={onMouseDown:Ct(Pt||{})},hn={...Pt,...vn};return{...vt,ref:fe,...hn}},Jt=vt=>Pt=>{var hn;(hn=vt.onMouseOver)==null||hn.call(vt,Pt);const vn=Number(Pt.currentTarget.getAttribute("data-index"));W(vn)},Ht=vt=>Pt=>{var vn;(vn=vt.onMouseLeave)==null||vn.call(vt,Pt),W(-1)},$e=(vt={})=>{const Pt=mb(vt),vn={onMouseOver:Jt(Pt||{}),onMouseLeave:Ht(Pt||{})};return{...vt,...Pt,...vn}},Ee=vt=>({pointerEvents:z!==-1&&z!==vt?"none":void 0});let _t;return w==="vertical"&&(_t=o?"vertical-rl":"vertical-lr"),{active:z,axis:tt,axisProps:uX,dragging:Y,focusedThumbIndex:De,getHiddenInputProps:(vt={})=>{const Pt=mb(vt),vn={onChange:Be(Pt||{}),onFocus:ve(Pt||{}),onBlur:le(Pt||{}),onKeyDown:Se(Pt||{})},hn={...Pt,...vn};return{tabIndex:C,"aria-labelledby":e,"aria-orientation":w,"aria-valuemax":A(a),"aria-valuemin":A(h),name:f,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:r,...vt,...hn,style:{...gq,direction:o?"rtl":"ltr",width:"100%",height:"100%",writingMode:_t}}},getRootProps:Kt,getThumbProps:$e,marks:Te,open:V,range:de,rootRef:fe,trackLeap:tn,trackOffset:Xe,values:ue,getThumbStyle:Ee}}const fX=t=>!t||!Xy(t);function dX(t){return Qs("MuiSlider",t)}const bf=Ss("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),pX=t=>{const{open:e}=t;return{offset:Ji(e&&bf.valueLabelOpen),circle:bf.valueLabelCircle,label:bf.valueLabelLabel}};function mX(t){const{children:e,className:n,value:r}=t,i=pX(t);return e?Et.cloneElement(e,{className:Ji(e.props.className)},Ln.jsxs(Et.Fragment,{children:[e.props.children,Ln.jsx("span",{className:Ji(i.offset,n),"aria-hidden":!0,children:Ln.jsx("span",{className:i.circle,children:Ln.jsx("span",{className:i.label,children:r})})})]})):null}function CI(t){return t}const gX=Wr("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${pi(n.color)}`],n.size!=="medium"&&e[`size${pi(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(El(({theme:t})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${bf.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${bf.dragging}`]:{[`& .${bf.thumb}, & .${bf.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(ld()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),vX=Wr("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),yX=Wr("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})(El(({theme:t})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(ld()).map(([e])=>({props:{color:e,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:{backgroundColor:Ob(t.palette[e].main,.62),borderColor:Ob(t.palette[e].main,.62),...t.applyStyles("dark",{backgroundColor:Ib(t.palette[e].main,.5)}),...t.applyStyles("dark",{borderColor:Ib(t.palette[e].main,.5)})}}}))]}))),_X=Wr("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${pi(n.color)}`],n.size!=="medium"&&e[`thumbSize${pi(n.size)}`]]}})(El(({theme:t})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${bf.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(ld()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${bf.focusVisible}`]:{...t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${mh(t.palette[e].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${bf.active}`]:{...t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${mh(t.palette[e].main,.16)}`}}}}))]}))),bX=Wr(mX,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})(El(({theme:t})=>({zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${bf.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${bf.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),xX=Wr("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>uR(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(El(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}))),wX=Wr("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>uR(t)&&t!=="markLabelActive",overridesResolver:(t,e)=>e.markLabel})(El(({theme:t})=>({...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}))),SX=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:o,classes:l,color:a,size:h}=t,f={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",a&&`color${pi(a)}`,h&&`size${pi(h)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",h&&`thumbSize${pi(h)}`,a&&`thumbColor${pi(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Tl(f,dX,l)},EX=({children:t})=>t,TX=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiSlider"}),i=Sq(),{"aria-label":o,"aria-valuetext":l,"aria-labelledby":a,component:h="span",components:f={},componentsProps:v={},color:y="primary",classes:w,className:b,disableSwap:A=!1,disabled:M=!1,getAriaLabel:P,getAriaValueText:C,marks:k=!1,max:B=100,min:z=0,name:q,onChange:V,onChangeCommitted:W,orientation:Y="horizontal",shiftStep:Z=10,size:j="medium",step:K=1,scale:re=CI,slotProps:ie,slots:se,tabIndex:de,track:ue="normal",value:Te,valueLabelDisplay:pe="off",valueLabelFormat:De=CI,...me}=r,Me={...r,isRtl:i,max:B,min:z,classes:w,disabled:M,disableSwap:A,orientation:Y,marks:k,color:y,size:j,step:K,shiftStep:Z,scale:re,track:ue,valueLabelDisplay:pe,valueLabelFormat:De},{axisProps:fe,getRootProps:ve,getHiddenInputProps:le,getThumbProps:ye,open:Se,active:Be,axis:Ve,focusedThumbIndex:tt,range:ht,dragging:it,marks:gt,values:$t,trackOffset:He,trackLeap:Ct,getThumbStyle:Xe}=hX({...Me,rootRef:n});Me.marked=gt.length>0&&gt.some(ut=>ut.label),Me.dragging=it,Me.focusedThumbIndex=tt;const tn=SX(Me),Kt=(se==null?void 0:se.root)??f.Root??gX,Jt=(se==null?void 0:se.rail)??f.Rail??vX,Ht=(se==null?void 0:se.track)??f.Track??yX,$e=(se==null?void 0:se.thumb)??f.Thumb??_X,Ee=(se==null?void 0:se.valueLabel)??f.ValueLabel??bX,_t=(se==null?void 0:se.mark)??f.Mark??xX,jt=(se==null?void 0:se.markLabel)??f.MarkLabel??wX,vt=(se==null?void 0:se.input)??f.Input??"input",Pt=(ie==null?void 0:ie.root)??v.root,vn=(ie==null?void 0:ie.rail)??v.rail,hn=(ie==null?void 0:ie.track)??v.track,pn=(ie==null?void 0:ie.thumb)??v.thumb,nn=(ie==null?void 0:ie.valueLabel)??v.valueLabel,Ft=(ie==null?void 0:ie.mark)??v.mark,In=(ie==null?void 0:ie.markLabel)??v.markLabel,Pn=(ie==null?void 0:ie.input)??v.input,ir=Im({elementType:Kt,getSlotProps:ve,externalSlotProps:Pt,externalForwardedProps:me,additionalProps:{...fX(Kt)&&{as:h}},ownerState:{...Me,...Pt==null?void 0:Pt.ownerState},className:[tn.root,b]}),mt=Im({elementType:Jt,externalSlotProps:vn,ownerState:Me,className:tn.rail}),ge=Im({elementType:Ht,externalSlotProps:hn,additionalProps:{style:{...fe[Ve].offset(He),...fe[Ve].leap(Ct)}},ownerState:{...Me,...hn==null?void 0:hn.ownerState},className:tn.track}),ke=Im({elementType:$e,getSlotProps:ye,externalSlotProps:pn,ownerState:{...Me,...pn==null?void 0:pn.ownerState},className:tn.thumb}),We=Im({elementType:Ee,externalSlotProps:nn,ownerState:{...Me,...nn==null?void 0:nn.ownerState},className:tn.valueLabel}),Ce=Im({elementType:_t,externalSlotProps:Ft,ownerState:Me,className:tn.mark}),Qe=Im({elementType:jt,externalSlotProps:In,ownerState:Me,className:tn.markLabel}),et=Im({elementType:vt,getSlotProps:le,externalSlotProps:Pn,ownerState:Me});return Ln.jsxs(Kt,{...ir,children:[Ln.jsx(Jt,{...mt}),Ln.jsx(Ht,{...ge}),gt.filter(ut=>ut.value>=z&&ut.value<=B).map((ut,lt)=>{const xt=jw(ut.value,z,B),Dt=fe[Ve].offset(xt);let zt;return ue===!1?zt=$t.includes(ut.value):zt=ue==="normal"&&(ht?ut.value>=$t[0]&&ut.value<=$t[$t.length-1]:ut.value<=$t[0])||ue==="inverted"&&(ht?ut.value<=$t[0]||ut.value>=$t[$t.length-1]:ut.value>=$t[0]),Ln.jsxs(Et.Fragment,{children:[Ln.jsx(_t,{"data-index":lt,...Ce,...!Xy(_t)&&{markActive:zt},style:{...Dt,...Ce.style},className:Ji(Ce.className,zt&&tn.markActive)}),ut.label!=null?Ln.jsx(jt,{"aria-hidden":!0,"data-index":lt,...Qe,...!Xy(jt)&&{markLabelActive:zt},style:{...Dt,...Qe.style},className:Ji(tn.markLabel,Qe.className,zt&&tn.markLabelActive),children:ut.label}):null]},lt)}),$t.map((ut,lt)=>{const xt=jw(ut,z,B),Dt=fe[Ve].offset(xt),zt=pe==="off"?EX:Ee;return Ln.jsx(zt,{...!Xy(zt)&&{valueLabelFormat:De,valueLabelDisplay:pe,value:typeof De=="function"?De(re(ut),lt):De,index:lt,open:Se===lt||Be===lt||pe==="on",disabled:M},...We,children:Ln.jsx($e,{"data-index":lt,...ke,className:Ji(tn.thumb,ke.className,Be===lt&&tn.active,tt===lt&&tn.focusVisible),style:{...Dt,...Xe(lt),...ke.style},children:Ln.jsx(vt,{"data-index":lt,"aria-label":P?P(lt):o,"aria-valuenow":re(ut),"aria-labelledby":a,"aria-valuetext":C?C(re(ut),lt):l,value:$t[lt],...et})})},lt)})]})});function MX(t){return Qs("MuiToolbar",t)}Ss("MuiToolbar",["root","gutters","regular","dense"]);const AX=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Tl({root:["root",!n&&"gutters",r]},MX,e)},CX=Wr("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(El(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),PX=Et.forwardRef(function(e,n){const r=el({props:e,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:l=!1,variant:a="regular",...h}=r,f={...r,component:o,disableGutters:l,variant:a},v=AX(f);return Ln.jsx(CX,{as:o,className:Ji(v.root,i),ref:n,ownerState:f,...h})});var gw={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.2.0/LICENSE.txt
 */var RX=gw.exports,PI;function DX(){return PI||(PI=1,function(t,e){(function(n,r){t.exports=r()})(RX,function(){var n={},r={};function i(l,a,h){if(r[l]=h,l==="index"){var f="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",v={};return r.shared(v),r.index(n,v),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([f],{type:"text/javascript"}))),n}}i("shared",["exports"],function(l){function a(m,u,p,_){return new(p||(p=Promise))(function(T,I){function O(ne){try{J(_.next(ne))}catch(ce){I(ce)}}function U(ne){try{J(_.throw(ne))}catch(ce){I(ce)}}function J(ne){var ce;ne.done?T(ne.value):(ce=ne.value,ce instanceof p?ce:new p(function(_e){_e(ce)})).then(O,U)}J((_=_.apply(m,u||[])).next())})}function h(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var f,v;function y(){if(v)return f;function m(u,p){this.x=u,this.y=p}return v=1,f=m,m.prototype={clone:function(){return new m(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,p){return this.clone()._rotateAround(u,p)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var p=u.x-this.x,_=u.y-this.y;return p*p+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,p){return Math.atan2(this.x*p-this.y*u,this.x*u+this.y*p)},_matMult:function(u){var p=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=p,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var p=Math.cos(u),_=Math.sin(u),T=_*this.x+p*this.y;return this.x=p*this.x-_*this.y,this.y=T,this},_rotateAround:function(u,p){var _=Math.cos(u),T=Math.sin(u),I=p.y+T*(this.x-p.x)+_*(this.y-p.y);return this.x=p.x+_*(this.x-p.x)-T*(this.y-p.y),this.y=I,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(u){return u instanceof m?u:Array.isArray(u)?new m(u[0],u[1]):u},f}typeof SuppressedError=="function"&&SuppressedError;var w,b,A=h(y()),M=function(){if(b)return w;function m(u,p,_,T){this.cx=3*u,this.bx=3*(_-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(T-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=p,this.p2x=_,this.p2y=T}return b=1,w=m,m.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,p){if(p===void 0&&(p=1e-6),u<0)return 0;if(u>1)return 1;for(var _=u,T=0;T<8;T++){var I=this.sampleCurveX(_)-u;if(Math.abs(I)<p)return _;var O=this.sampleCurveDerivativeX(_);if(Math.abs(O)<1e-6)break;_-=I/O}var U=0,J=1;for(_=u,T=0;T<20&&(I=this.sampleCurveX(_),!(Math.abs(I-u)<p));T++)u>I?U=_:J=_,_=.5*(J-U)+U;return _},solve:function(u,p){return this.sampleCurveY(this.solveCurveX(u,p))}},w}(),P=h(M);let C,k;function B(){return C==null&&(C=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),C}function z(){if(k==null&&(k=!1,B())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let _=0;_<5*5;_++){const T=4*_;u.fillStyle=`rgb(${T},${T+1},${T+2})`,u.fillRect(_%5,Math.floor(_/5),1,1)}const p=u.getImageData(0,0,5,5).data;for(let _=0;_<5*5*4;_++)if(_%4!=3&&p[_]!==_){k=!0;break}}}return k||!1}var q,V=1e-6,W=typeof Float32Array<"u"?Float32Array:Array;function Y(){var m=new W(9);return W!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m}function Z(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}function j(){var m=new W(3);return W!=Float32Array&&(m[0]=0,m[1]=0,m[2]=0),m}function K(m,u,p){var _=new W(3);return _[0]=m,_[1]=u,_[2]=p,_}function re(m,u,p){var _=u[0],T=u[1],I=u[2],O=u[3];return m[0]=p[0]*_+p[4]*T+p[8]*I+p[12]*O,m[1]=p[1]*_+p[5]*T+p[9]*I+p[13]*O,m[2]=p[2]*_+p[6]*T+p[10]*I+p[14]*O,m[3]=p[3]*_+p[7]*T+p[11]*I+p[15]*O,m}function ie(){var m=new W(4);return W!=Float32Array&&(m[0]=0,m[1]=0,m[2]=0),m[3]=1,m}function se(){var m=new W(2);return W!=Float32Array&&(m[0]=0,m[1]=0),m}function de(m,u){var p=new W(2);return p[0]=m,p[1]=u,p}Math.hypot||(Math.hypot=function(){for(var m=0,u=arguments.length;u--;)m+=arguments[u]*arguments[u];return Math.sqrt(m)}),j(),q=new W(4),W!=Float32Array&&(q[0]=0,q[1]=0,q[2]=0,q[3]=0),j(),K(1,0,0),K(0,1,0),ie(),ie(),Y(),se();const ue=8192;function Te(m,u,p){return u*(ue/(m.tileSize*Math.pow(2,p-m.tileID.overscaledZ)))}function pe(m,u){return(m%u+u)%u}function De(m,u,p){return m*(1-p)+u*p}function me(m){if(m<=0)return 0;if(m>=1)return 1;const u=m*m,p=u*m;return 4*(m<.5?p:3*(m-u)+p-.75)}function Me(m,u,p,_){const T=new P(m,u,p,_);return I=>T.solve(I)}const fe=Me(.25,.1,.25,1);function ve(m,u,p){return Math.min(p,Math.max(u,m))}function le(m,u,p){const _=p-u,T=((m-u)%_+_)%_+u;return T===u?p:T}function ye(m,...u){for(const p of u)for(const _ in p)m[_]=p[_];return m}let Se=1;function Be(m,u,p){const _={};for(const T in m)_[T]=u.call(this,m[T],T,m);return _}function Ve(m,u,p){const _={};for(const T in m)u.call(this,m[T],T,m)&&(_[T]=m[T]);return _}function tt(m){return Array.isArray(m)?m.map(tt):typeof m=="object"&&m?Be(m,tt):m}const ht={};function it(m){ht[m]||(typeof console<"u"&&console.warn(m),ht[m]=!0)}function gt(m,u,p){return(p.y-m.y)*(u.x-m.x)>(u.y-m.y)*(p.x-m.x)}function $t(m){return typeof WorkerGlobalScope<"u"&&m!==void 0&&m instanceof WorkerGlobalScope}let He=null;function Ct(m){return typeof ImageBitmap<"u"&&m instanceof ImageBitmap}const Xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function tn(m,u,p,_,T){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const I=new VideoFrame(m,{timestamp:0});try{const O=I==null?void 0:I.format;if(!O||!O.startsWith("BGR")&&!O.startsWith("RGB"))throw new Error(`Unrecognized format ${O}`);const U=O.startsWith("BGR"),J=new Uint8ClampedArray(_*T*4);if(yield I.copyTo(J,function(ne,ce,_e,Re,Le){const Fe=4*Math.max(1,0),Ye=(Math.max(0,_e)-_e)*Re*4+Fe,ct=4*Re,wt=Math.max(0,ce),Xt=Math.max(0,_e);return{rect:{x:wt,y:Xt,width:Math.min(ne.width,ce+Re)-wt,height:Math.min(ne.height,_e+Le)-Xt},layout:[{offset:Ye,stride:ct}]}}(m,u,p,_,T)),U)for(let ne=0;ne<J.length;ne+=4){const ce=J[ne];J[ne]=J[ne+2],J[ne+2]=ce}return J}finally{I.close()}})}let Kt,Jt;function Ht(m,u,p,_){return m.addEventListener(u,p,_),{unsubscribe:()=>{m.removeEventListener(u,p,_)}}}function $e(m){return m/Math.PI*180}const Ee="AbortError";function _t(){return new Error(Ee)}const jt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function vt(m){return jt.REGISTERED_PROTOCOLS[m.substring(0,m.indexOf("://"))]}const Pt="global-dispatcher";class vn extends Error{constructor(u,p,_,T){super(`AJAXError: ${p} (${u}): ${_}`),this.status=u,this.statusText=p,this.url=_,this.body=T}}const hn=()=>$t(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,pn=function(m,u){if(/:\/\//.test(m.url)&&!/^https?:|^file:/.test(m.url)){const _=vt(m.url);if(_)return _(m,u);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:m,targetMapId:Pt},u)}if(!(/^file:/.test(p=m.url)||/^file:/.test(hn())&&!/^\w+:/.test(p))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(_,T){return a(this,void 0,void 0,function*(){const I=new Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,cache:_.cache,referrer:hn(),signal:T.signal});let O,U;_.type!=="json"||I.headers.has("Accept")||I.headers.set("Accept","application/json");try{O=yield fetch(I)}catch(ne){throw new vn(0,ne.message,_.url,new Blob)}if(!O.ok){const ne=yield O.blob();throw new vn(O.status,O.statusText,_.url,ne)}U=_.type==="arrayBuffer"||_.type==="image"?O.arrayBuffer():_.type==="json"?O.json():O.text();const J=yield U;if(T.signal.aborted)throw _t();return{data:J,cacheControl:O.headers.get("Cache-Control"),expires:O.headers.get("Expires")}})}(m,u);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:m,mustQueue:!0,targetMapId:Pt},u)}var p;return function(_,T){return new Promise((I,O)=>{var U;const J=new XMLHttpRequest;J.open(_.method||"GET",_.url,!0),_.type!=="arrayBuffer"&&_.type!=="image"||(J.responseType="arraybuffer");for(const ne in _.headers)J.setRequestHeader(ne,_.headers[ne]);_.type==="json"&&(J.responseType="text",!((U=_.headers)===null||U===void 0)&&U.Accept||J.setRequestHeader("Accept","application/json")),J.withCredentials=_.credentials==="include",J.onerror=()=>{O(new Error(J.statusText))},J.onload=()=>{if(!T.signal.aborted)if((J.status>=200&&J.status<300||J.status===0)&&J.response!==null){let ne=J.response;if(_.type==="json")try{ne=JSON.parse(J.response)}catch(ce){return void O(ce)}I({data:ne,cacheControl:J.getResponseHeader("Cache-Control"),expires:J.getResponseHeader("Expires")})}else{const ne=new Blob([J.response],{type:J.getResponseHeader("Content-Type")});O(new vn(J.status,J.statusText,_.url,ne))}},T.signal.addEventListener("abort",()=>{J.abort(),O(_t())}),J.send(_.body)})}(m,u)};function nn(m){if(!m||m.indexOf("://")<=0||m.indexOf("data:image/")===0||m.indexOf("blob:")===0)return!0;const u=new URL(m),p=window.location;return u.protocol===p.protocol&&u.host===p.host}function Ft(m,u,p){p[m]&&p[m].indexOf(u)!==-1||(p[m]=p[m]||[],p[m].push(u))}function In(m,u,p){if(p&&p[m]){const _=p[m].indexOf(u);_!==-1&&p[m].splice(_,1)}}class Pn{constructor(u,p={}){ye(this,p),this.type=u}}class ir extends Pn{constructor(u,p={}){super("error",ye({error:u},p))}}class mt{on(u,p){return this._listeners=this._listeners||{},Ft(u,p,this._listeners),{unsubscribe:()=>{this.off(u,p)}}}off(u,p){return In(u,p,this._listeners),In(u,p,this._oneTimeListeners),this}once(u,p){return p?(this._oneTimeListeners=this._oneTimeListeners||{},Ft(u,p,this._oneTimeListeners),this):new Promise(_=>this.once(u,_))}fire(u,p){typeof u=="string"&&(u=new Pn(u,p||{}));const _=u.type;if(this.listens(_)){u.target=this;const T=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const U of T)U.call(this,u);const I=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const U of I)In(_,U,this._oneTimeListeners),U.call(this,u);const O=this._eventedParent;O&&(ye(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),O.fire(u))}else u instanceof ir&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,p){return this._eventedParent=u,this._eventedParentData=p,this}}var ge={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ke=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function We(m,u){const p={};for(const _ in m)_!=="ref"&&(p[_]=m[_]);return ke.forEach(_=>{_ in u&&(p[_]=u[_])}),p}function Ce(m,u){if(Array.isArray(m)){if(!Array.isArray(u)||m.length!==u.length)return!1;for(let p=0;p<m.length;p++)if(!Ce(m[p],u[p]))return!1;return!0}if(typeof m=="object"&&m!==null&&u!==null){if(typeof u!="object"||Object.keys(m).length!==Object.keys(u).length)return!1;for(const p in m)if(!Ce(m[p],u[p]))return!1;return!0}return m===u}function Qe(m,u){m.push(u)}function et(m,u,p){Qe(p,{command:"addSource",args:[m,u[m]]})}function ut(m,u,p){Qe(u,{command:"removeSource",args:[m]}),p[m]=!0}function lt(m,u,p,_){ut(m,p,_),et(m,u,p)}function xt(m,u,p){let _;for(_ in m[p])if(Object.prototype.hasOwnProperty.call(m[p],_)&&_!=="data"&&!Ce(m[p][_],u[p][_]))return!1;for(_ in u[p])if(Object.prototype.hasOwnProperty.call(u[p],_)&&_!=="data"&&!Ce(m[p][_],u[p][_]))return!1;return!0}function Dt(m,u,p,_,T,I){m=m||{},u=u||{};for(const O in m)Object.prototype.hasOwnProperty.call(m,O)&&(Ce(m[O],u[O])||p.push({command:I,args:[_,O,u[O],T]}));for(const O in u)Object.prototype.hasOwnProperty.call(u,O)&&!Object.prototype.hasOwnProperty.call(m,O)&&(Ce(m[O],u[O])||p.push({command:I,args:[_,O,u[O],T]}))}function zt(m){return m.id}function Tn(m,u){return m[u.id]=u,m}class qt{constructor(u,p,_,T){this.message=(u?`${u}: `:"")+_,T&&(this.identifier=T),p!=null&&p.__line__&&(this.line=p.__line__)}}function Zn(m,...u){for(const p of u)for(const _ in p)m[_]=p[_];return m}class Gn extends Error{constructor(u,p){super(p),this.message=p,this.key=u}}class we{constructor(u,p=[]){this.parent=u,this.bindings={};for(const[_,T]of p)this.bindings[_]=T}concat(u){return new we(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Ne={kind:"null"},je={kind:"number"},At={kind:"string"},sn={kind:"boolean"},Hn={kind:"color"},or={kind:"projectionDefinition"},Er={kind:"object"},lr={kind:"value"},Ri={kind:"collator"},ci={kind:"formatted"},Vi={kind:"padding"},Vr={kind:"resolvedImage"},Ca={kind:"variableAnchorOffsetCollection"};function ra(m,u){return{kind:"array",itemType:m,N:u}}function mi(m){if(m.kind==="array"){const u=mi(m.itemType);return typeof m.N=="number"?`array<${u}, ${m.N}>`:m.itemType.kind==="value"?"array":`array<${u}>`}return m.kind}const no=[Ne,je,At,sn,Hn,or,ci,Er,ra(lr),Vi,Vr,Ca];function nt(m,u){if(u.kind==="error")return null;if(m.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!nt(m.itemType,u.itemType))&&(typeof m.N!="number"||m.N===u.N))return null}else{if(m.kind===u.kind)return null;if(m.kind==="value"){for(const p of no)if(!nt(p,u))return null}}return`Expected ${mi(m)} but found ${mi(u)} instead.`}function an(m,u){return u.some(p=>p.kind===m.kind)}function gn(m,u){return u.some(p=>p==="null"?m===null:p==="array"?Array.isArray(m):p==="object"?m&&!Array.isArray(m)&&typeof m=="object":p===typeof m)}function _n(m,u){return m.kind==="array"&&u.kind==="array"?m.itemType.kind===u.itemType.kind&&typeof m.N=="number":m.kind===u.kind}const fn=.96422,cr=.82521,hr=4/29,Ar=6/29,Pr=3*Ar*Ar,ei=Ar*Ar*Ar,Xr=Math.PI/180,Hr=180/Math.PI;function gi(m){return(m%=360)<0&&(m+=360),m}function vi([m,u,p,_]){let T,I;const O=Wi((.2225045*(m=yi(m))+.7168786*(u=yi(u))+.0606169*(p=yi(p)))/1);m===u&&u===p?T=I=O:(T=Wi((.4360747*m+.3850649*u+.1430804*p)/fn),I=Wi((.0139322*m+.0971045*u+.7141733*p)/cr));const U=116*O-16;return[U<0?0:U,500*(T-O),200*(O-I),_]}function yi(m){return m<=.04045?m/12.92:Math.pow((m+.055)/1.055,2.4)}function Wi(m){return m>ei?Math.pow(m,1/3):m/Pr+hr}function ii([m,u,p,_]){let T=(m+16)/116,I=isNaN(u)?T:T+u/500,O=isNaN(p)?T:T-p/200;return T=1*$a(T),I=fn*$a(I),O=cr*$a(O),[Zr(3.1338561*I-1.6168667*T-.4906146*O),Zr(-.9787684*I+1.9161415*T+.033454*O),Zr(.0719453*I-.2289914*T+1.4052427*O),_]}function Zr(m){return(m=m<=.00304?12.92*m:1.055*Math.pow(m,1/2.4)-.055)<0?0:m>1?1:m}function $a(m){return m>Ar?m*m*m:Pr*(m-hr)}function Di(m){return parseInt(m.padEnd(2,m),16)/255}function ja(m,u){return lo(u?m/100:m,0,1)}function lo(m,u,p){return Math.min(Math.max(u,m),p)}function Gi(m){return!m.some(Number.isNaN)}const ti={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Pi(m,u,p){return m+p*(u-m)}function xa(m,u,p){return m.map((_,T)=>Pi(_,u[T],p))}class H{constructor(u,p,_,T=1,I=!0){this.r=u,this.g=p,this.b=_,this.a=T,I||(this.r*=T,this.g*=T,this.b*=T,T||this.overwriteGetter("rgb",[u,p,_,T]))}static parse(u){if(u instanceof H)return u;if(typeof u!="string")return;const p=function(_){if((_=_.toLowerCase().trim())==="transparent")return[0,0,0,0];const T=ti[_];if(T){const[O,U,J]=T;return[O/255,U/255,J/255,1]}if(_.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(_)){const O=_.length<6?1:2;let U=1;return[Di(_.slice(U,U+=O)),Di(_.slice(U,U+=O)),Di(_.slice(U,U+=O)),Di(_.slice(U,U+O)||"ff")]}if(_.startsWith("rgb")){const O=_.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(O){const[U,J,ne,ce,_e,Re,Le,Fe,Ye,ct,wt,Xt]=O,Rt=[ce||" ",Le||" ",ct].join("");if(Rt==="  "||Rt==="  /"||Rt===",,"||Rt===",,,"){const Ie=[ne,Re,Ye].join(""),at=Ie==="%%%"?100:Ie===""?255:0;if(at){const It=[lo(+J/at,0,1),lo(+_e/at,0,1),lo(+Fe/at,0,1),wt?ja(+wt,Xt):1];if(Gi(It))return It}}return}}const I=_.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){const[O,U,J,ne,ce,_e,Re,Le,Fe]=I,Ye=[J||" ",ce||" ",Re].join("");if(Ye==="  "||Ye==="  /"||Ye===",,"||Ye===",,,"){const ct=[+U,lo(+ne,0,100),lo(+_e,0,100),Le?ja(+Le,Fe):1];if(Gi(ct))return function([wt,Xt,Rt,Ie]){function at(It){const An=(It+wt/30)%12,nr=Xt*Math.min(Rt,1-Rt);return Rt-nr*Math.max(-1,Math.min(An-3,9-An,1))}return wt=gi(wt),Xt/=100,Rt/=100,[at(0),at(8),at(4),Ie]}(ct)}}}(u);return p?new H(...p,!1):void 0}get rgb(){const{r:u,g:p,b:_,a:T}=this,I=T||1/0;return this.overwriteGetter("rgb",[u/I,p/I,_/I,T])}get hcl(){return this.overwriteGetter("hcl",function(u){const[p,_,T,I]=vi(u),O=Math.sqrt(_*_+T*T);return[Math.round(1e4*O)?gi(Math.atan2(T,_)*Hr):NaN,O,p,I]}(this.rgb))}get lab(){return this.overwriteGetter("lab",vi(this.rgb))}overwriteGetter(u,p){return Object.defineProperty(this,u,{value:p}),p}toString(){const[u,p,_,T]=this.rgb;return`rgba(${[u,p,_].map(I=>Math.round(255*I)).join(",")},${T})`}static interpolate(u,p,_,T="rgb"){switch(T){case"rgb":{const[I,O,U,J]=xa(u.rgb,p.rgb,_);return new H(I,O,U,J,!1)}case"hcl":{const[I,O,U,J]=u.hcl,[ne,ce,_e,Re]=p.hcl;let Le,Fe;if(isNaN(I)||isNaN(ne))isNaN(I)?isNaN(ne)?Le=NaN:(Le=ne,U!==1&&U!==0||(Fe=ce)):(Le=I,_e!==1&&_e!==0||(Fe=O));else{let Rt=ne-I;ne>I&&Rt>180?Rt-=360:ne<I&&I-ne>180&&(Rt+=360),Le=I+_*Rt}const[Ye,ct,wt,Xt]=function([Rt,Ie,at,It]){return Rt=isNaN(Rt)?0:Rt*Xr,ii([at,Math.cos(Rt)*Ie,Math.sin(Rt)*Ie,It])}([Le,Fe??Pi(O,ce,_),Pi(U,_e,_),Pi(J,Re,_)]);return new H(Ye,ct,wt,Xt,!1)}case"lab":{const[I,O,U,J]=ii(xa(u.lab,p.lab,_));return new H(I,O,U,J,!1)}}}}H.black=new H(0,0,0,1),H.white=new H(1,1,1,1),H.transparent=new H(0,0,0,0),H.red=new H(1,0,0,1);class he{constructor(u,p,_){this.sensitivity=u?p?"variant":"case":p?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,p){return this.collator.compare(u,p)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ge=["bottom","center","top"];class St{constructor(u,p,_,T,I,O){this.text=u,this.image=p,this.scale=_,this.fontStack=T,this.textColor=I,this.verticalAlign=O}}class Lt{constructor(u){this.sections=u}static fromString(u){return new Lt([new St(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof Lt?u:Lt.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class Ut{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Ut)return u;if(typeof u=="number")return new Ut([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const p of u)if(typeof p!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new Ut(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,p,_){return new Ut(xa(u.values,p.values,_))}}class Yt{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const sr=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Wn{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Wn)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let p=0;p<u.length;p+=2){const _=u[p],T=u[p+1];if(typeof _!="string"||!sr.has(_)||!Array.isArray(T)||T.length!==2||typeof T[0]!="number"||typeof T[1]!="number")return}return new Wn(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,p,_){const T=u.values,I=p.values;if(T.length!==I.length)throw new Yt(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${p.toString()}`);const O=[];for(let U=0;U<T.length;U+=2){if(T[U]!==I[U])throw new Yt(`Cannot interpolate values containing mismatched anchors. from[${U}]: ${T[U]}, to[${U}]: ${I[U]}`);O.push(T[U]);const[J,ne]=T[U+1],[ce,_e]=I[U+1];O.push([Pi(J,ce,_),Pi(ne,_e,_)])}return new Wn(O)}}class mr{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new mr({name:u,available:!1}):null}}class vr{constructor(u,p,_){this.from=u,this.to=p,this.transition=_}static interpolate(u,p,_){return new vr(u,p,_)}static parse(u){return u instanceof vr?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new vr(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new vr(u.from,u.to,u.transition):typeof u=="string"?new vr(u,u,1):void 0}}function xr(m,u,p,_){return typeof m=="number"&&m>=0&&m<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof p=="number"&&p>=0&&p<=255?_===void 0||typeof _=="number"&&_>=0&&_<=1?null:`Invalid rgba value [${[m,u,p,_].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof _=="number"?[m,u,p,_]:[m,u,p]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Lr(m){if(m===null||typeof m=="string"||typeof m=="boolean"||typeof m=="number"||m instanceof vr||m instanceof H||m instanceof he||m instanceof Lt||m instanceof Ut||m instanceof Wn||m instanceof mr)return!0;if(Array.isArray(m)){for(const u of m)if(!Lr(u))return!1;return!0}if(typeof m=="object"){for(const u in m)if(!Lr(m[u]))return!1;return!0}return!1}function Ti(m){if(m===null)return Ne;if(typeof m=="string")return At;if(typeof m=="boolean")return sn;if(typeof m=="number")return je;if(m instanceof H)return Hn;if(m instanceof vr)return or;if(m instanceof he)return Ri;if(m instanceof Lt)return ci;if(m instanceof Ut)return Vi;if(m instanceof Wn)return Ca;if(m instanceof mr)return Vr;if(Array.isArray(m)){const u=m.length;let p;for(const _ of m){const T=Ti(_);if(p){if(p===T)continue;p=lr;break}p=T}return ra(p||lr,u)}return Er}function Yr(m){const u=typeof m;return m===null?"":u==="string"||u==="number"||u==="boolean"?String(m):m instanceof H||m instanceof vr||m instanceof Lt||m instanceof Ut||m instanceof Wn||m instanceof mr?m.toString():JSON.stringify(m)}class Cr{constructor(u,p){this.type=u,this.value=p}static parse(u,p){if(u.length!==2)return p.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!Lr(u[1]))return p.error("invalid value");const _=u[1];let T=Ti(_);const I=p.expectedType;return T.kind!=="array"||T.N!==0||!I||I.kind!=="array"||typeof I.N=="number"&&I.N!==0||(T=I),new Cr(T,_)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const $n={string:At,number:je,boolean:sn,object:Er};class Rr{constructor(u,p){this.type=u,this.args=p}static parse(u,p){if(u.length<2)return p.error("Expected at least one argument.");let _,T=1;const I=u[0];if(I==="array"){let U,J;if(u.length>2){const ne=u[1];if(typeof ne!="string"||!(ne in $n)||ne==="object")return p.error('The item type argument of "array" must be one of string, number, boolean',1);U=$n[ne],T++}else U=lr;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return p.error('The length argument to "array" must be a positive integer literal',2);J=u[2],T++}_=ra(U,J)}else{if(!$n[I])throw new Error(`Types doesn't contain name = ${I}`);_=$n[I]}const O=[];for(;T<u.length;T++){const U=p.parse(u[T],T,lr);if(!U)return null;O.push(U)}return new Rr(_,O)}evaluate(u){for(let p=0;p<this.args.length;p++){const _=this.args[p].evaluate(u);if(!nt(this.type,Ti(_)))return _;if(p===this.args.length-1)throw new Yt(`Expected value to be of type ${mi(this.type)}, but found ${mi(Ti(_))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const Ni={"to-boolean":sn,"to-color":Hn,"to-number":je,"to-string":At};class ta{constructor(u,p){this.type=u,this.args=p}static parse(u,p){if(u.length<2)return p.error("Expected at least one argument.");const _=u[0];if(!Ni[_])throw new Error(`Can't parse ${_} as it is not part of the known types`);if((_==="to-boolean"||_==="to-string")&&u.length!==2)return p.error("Expected one argument.");const T=Ni[_],I=[];for(let O=1;O<u.length;O++){const U=p.parse(u[O],O,lr);if(!U)return null;I.push(U)}return new ta(T,I)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let p,_;for(const T of this.args){if(p=T.evaluate(u),_=null,p instanceof H)return p;if(typeof p=="string"){const I=u.parseColor(p);if(I)return I}else if(Array.isArray(p)&&(_=p.length<3||p.length>4?`Invalid rgba value ${JSON.stringify(p)}: expected an array containing either three or four numeric values.`:xr(p[0],p[1],p[2],p[3]),!_))return new H(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new Yt(_||`Could not parse color from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"padding":{let p;for(const _ of this.args){p=_.evaluate(u);const T=Ut.parse(p);if(T)return T}throw new Yt(`Could not parse padding from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"variableAnchorOffsetCollection":{let p;for(const _ of this.args){p=_.evaluate(u);const T=Wn.parse(p);if(T)return T}throw new Yt(`Could not parse variableAnchorOffsetCollection from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"number":{let p=null;for(const _ of this.args){if(p=_.evaluate(u),p===null)return 0;const T=Number(p);if(!isNaN(T))return T}throw new Yt(`Could not convert ${JSON.stringify(p)} to number.`)}case"formatted":return Lt.fromString(Yr(this.args[0].evaluate(u)));case"resolvedImage":return mr.fromString(Yr(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Yr(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const di=["Unknown","Point","LineString","Polygon"];class js{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?di[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let p=this._parseColorCache[u];return p||(p=this._parseColorCache[u]=H.parse(u)),p}}class _i{constructor(u,p,_=[],T,I=new we,O=[]){this.registry=u,this.path=_,this.key=_.map(U=>`[${U}]`).join(""),this.scope=I,this.errors=O,this.expectedType=T,this._isConstant=p}parse(u,p,_,T,I={}){return p?this.concat(p,_,T)._parse(u,I):this._parse(u,I)}_parse(u,p){function _(T,I,O){return O==="assert"?new Rr(I,[T]):O==="coerce"?new ta(I,[T]):T}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const T=u[0];if(typeof T!="string")return this.error(`Expression name must be a string, but found ${typeof T} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const I=this.registry[T];if(I){let O=I.parse(u,this);if(!O)return null;if(this.expectedType){const U=this.expectedType,J=O.type;if(U.kind!=="string"&&U.kind!=="number"&&U.kind!=="boolean"&&U.kind!=="object"&&U.kind!=="array"||J.kind!=="value")if(U.kind!=="projectionDefinition"||J.kind!=="string"&&J.kind!=="array")if(U.kind!=="color"&&U.kind!=="formatted"&&U.kind!=="resolvedImage"||J.kind!=="value"&&J.kind!=="string")if(U.kind!=="padding"||J.kind!=="value"&&J.kind!=="number"&&J.kind!=="array")if(U.kind!=="variableAnchorOffsetCollection"||J.kind!=="value"&&J.kind!=="array"){if(this.checkSubtype(U,J))return null}else O=_(O,U,p.typeAnnotation||"coerce");else O=_(O,U,p.typeAnnotation||"coerce");else O=_(O,U,p.typeAnnotation||"coerce");else O=_(O,U,p.typeAnnotation||"coerce");else O=_(O,U,p.typeAnnotation||"assert")}if(!(O instanceof Cr)&&O.type.kind!=="resolvedImage"&&this._isConstant(O)){const U=new js;try{O=new Cr(O.type,O.evaluate(U))}catch(J){return this.error(J.message),null}}return O}return this.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,p,_){const T=typeof u=="number"?this.path.concat(u):this.path,I=_?this.scope.concat(_):this.scope;return new _i(this.registry,this._isConstant,T,p||null,I,this.errors)}error(u,...p){const _=`${this.key}${p.map(T=>`[${T}]`).join("")}`;this.errors.push(new Gn(_,u))}checkSubtype(u,p){const _=nt(u,p);return _&&this.error(_),_}}class Ir{constructor(u,p){this.type=p.type,this.bindings=[].concat(u),this.result=p}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const p of this.bindings)u(p[1]);u(this.result)}static parse(u,p){if(u.length<4)return p.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const _=[];for(let I=1;I<u.length-1;I+=2){const O=u[I];if(typeof O!="string")return p.error(`Expected string, but found ${typeof O} instead.`,I);if(/[^a-zA-Z0-9_]/.test(O))return p.error("Variable names must contain only alphanumeric characters or '_'.",I);const U=p.parse(u[I+1],I+1);if(!U)return null;_.push([O,U])}const T=p.parse(u[u.length-1],u.length-1,p.expectedType,_);return T?new Ir(_,T):null}outputDefined(){return this.result.outputDefined()}}class Gl{constructor(u,p){this.type=p.type,this.name=u,this.boundExpression=p}static parse(u,p){if(u.length!==2||typeof u[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");const _=u[1];return p.scope.has(_)?new Gl(_,p.scope.get(_)):p.error(`Unknown variable "${_}". Make sure "${_}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class ji{constructor(u,p,_){this.type=u,this.index=p,this.input=_}static parse(u,p){if(u.length!==3)return p.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const _=p.parse(u[1],1,je),T=p.parse(u[2],2,ra(p.expectedType||lr));return _&&T?new ji(T.type.itemType,_,T):null}evaluate(u){const p=this.index.evaluate(u),_=this.input.evaluate(u);if(p<0)throw new Yt(`Array index out of bounds: ${p} < 0.`);if(p>=_.length)throw new Yt(`Array index out of bounds: ${p} > ${_.length-1}.`);if(p!==Math.floor(p))throw new Yt(`Array index must be an integer, but found ${p} instead.`);return _[p]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class Po{constructor(u,p){this.type=sn,this.needle=u,this.haystack=p}static parse(u,p){if(u.length!==3)return p.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const _=p.parse(u[1],1,lr),T=p.parse(u[2],2,lr);return _&&T?an(_.type,[sn,At,je,Ne,lr])?new Po(_,T):p.error(`Expected first argument to be of type boolean, string, number or null, but found ${mi(_.type)} instead`):null}evaluate(u){const p=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!_)return!1;if(!gn(p,["boolean","string","number","null"]))throw new Yt(`Expected first argument to be of type boolean, string, number or null, but found ${mi(Ti(p))} instead.`);if(!gn(_,["string","array"]))throw new Yt(`Expected second argument to be of type array or string, but found ${mi(Ti(_))} instead.`);return _.indexOf(p)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class vo{constructor(u,p,_){this.type=je,this.needle=u,this.haystack=p,this.fromIndex=_}static parse(u,p){if(u.length<=2||u.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const _=p.parse(u[1],1,lr),T=p.parse(u[2],2,lr);if(!_||!T)return null;if(!an(_.type,[sn,At,je,Ne,lr]))return p.error(`Expected first argument to be of type boolean, string, number or null, but found ${mi(_.type)} instead`);if(u.length===4){const I=p.parse(u[3],3,je);return I?new vo(_,T,I):null}return new vo(_,T)}evaluate(u){const p=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!gn(p,["boolean","string","number","null"]))throw new Yt(`Expected first argument to be of type boolean, string, number or null, but found ${mi(Ti(p))} instead.`);let T;if(this.fromIndex&&(T=this.fromIndex.evaluate(u)),gn(_,["string"])){const I=_.indexOf(p,T);return I===-1?-1:[..._.slice(0,I)].length}if(gn(_,["array"]))return _.indexOf(p,T);throw new Yt(`Expected second argument to be of type array or string, but found ${mi(Ti(_))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class tl{constructor(u,p,_,T,I,O){this.inputType=u,this.type=p,this.input=_,this.cases=T,this.outputs=I,this.otherwise=O}static parse(u,p){if(u.length<5)return p.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return p.error("Expected an even number of arguments.");let _,T;p.expectedType&&p.expectedType.kind!=="value"&&(T=p.expectedType);const I={},O=[];for(let ne=2;ne<u.length-1;ne+=2){let ce=u[ne];const _e=u[ne+1];Array.isArray(ce)||(ce=[ce]);const Re=p.concat(ne);if(ce.length===0)return Re.error("Expected at least one branch label.");for(const Fe of ce){if(typeof Fe!="number"&&typeof Fe!="string")return Re.error("Branch labels must be numbers or strings.");if(typeof Fe=="number"&&Math.abs(Fe)>Number.MAX_SAFE_INTEGER)return Re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Fe=="number"&&Math.floor(Fe)!==Fe)return Re.error("Numeric branch labels must be integer values.");if(_){if(Re.checkSubtype(_,Ti(Fe)))return null}else _=Ti(Fe);if(I[String(Fe)]!==void 0)return Re.error("Branch labels must be unique.");I[String(Fe)]=O.length}const Le=p.parse(_e,ne,T);if(!Le)return null;T=T||Le.type,O.push(Le)}const U=p.parse(u[1],1,lr);if(!U)return null;const J=p.parse(u[u.length-1],u.length-1,T);return J?U.type.kind!=="value"&&p.concat(1).checkSubtype(_,U.type)?null:new tl(_,T,U,I,O,J):null}evaluate(u){const p=this.input.evaluate(u);return(Ti(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class Ro{constructor(u,p,_){this.type=u,this.branches=p,this.otherwise=_}static parse(u,p){if(u.length<4)return p.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return p.error("Expected an odd number of arguments.");let _;p.expectedType&&p.expectedType.kind!=="value"&&(_=p.expectedType);const T=[];for(let O=1;O<u.length-1;O+=2){const U=p.parse(u[O],O,sn);if(!U)return null;const J=p.parse(u[O+1],O+1,_);if(!J)return null;T.push([U,J]),_=_||J.type}const I=p.parse(u[u.length-1],u.length-1,_);if(!I)return null;if(!_)throw new Error("Can't infer output type");return new Ro(_,T,I)}evaluate(u){for(const[p,_]of this.branches)if(p.evaluate(u))return _.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[p,_]of this.branches)u(p),u(_);u(this.otherwise)}outputDefined(){return this.branches.every(([u,p])=>p.outputDefined())&&this.otherwise.outputDefined()}}class jo{constructor(u,p,_,T){this.type=u,this.input=p,this.beginIndex=_,this.endIndex=T}static parse(u,p){if(u.length<=2||u.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const _=p.parse(u[1],1,lr),T=p.parse(u[2],2,je);if(!_||!T)return null;if(!an(_.type,[ra(lr),At,lr]))return p.error(`Expected first argument to be of type array or string, but found ${mi(_.type)} instead`);if(u.length===4){const I=p.parse(u[3],3,je);return I?new jo(_.type,_,T,I):null}return new jo(_.type,_,T)}evaluate(u){const p=this.input.evaluate(u),_=this.beginIndex.evaluate(u);let T;if(this.endIndex&&(T=this.endIndex.evaluate(u)),gn(p,["string"]))return[...p].slice(_,T).join("");if(gn(p,["array"]))return p.slice(_,T);throw new Yt(`Expected first argument to be of type array or string, but found ${mi(Ti(p))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function nl(m,u){const p=m.length-1;let _,T,I=0,O=p,U=0;for(;I<=O;)if(U=Math.floor((I+O)/2),_=m[U],T=m[U+1],_<=u){if(U===p||u<T)return U;I=U+1}else{if(!(_>u))throw new Yt("Input is not a number.");O=U-1}return 0}class Es{constructor(u,p,_){this.type=u,this.input=p,this.labels=[],this.outputs=[];for(const[T,I]of _)this.labels.push(T),this.outputs.push(I)}static parse(u,p){if(u.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return p.error("Expected an even number of arguments.");const _=p.parse(u[1],1,je);if(!_)return null;const T=[];let I=null;p.expectedType&&p.expectedType.kind!=="value"&&(I=p.expectedType);for(let O=1;O<u.length;O+=2){const U=O===1?-1/0:u[O],J=u[O+1],ne=O,ce=O+1;if(typeof U!="number")return p.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(T.length&&T[T.length-1][0]>=U)return p.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ne);const _e=p.parse(J,ce,I);if(!_e)return null;I=I||_e.type,T.push([U,_e])}return new Es(I,_,T)}evaluate(u){const p=this.labels,_=this.outputs;if(p.length===1)return _[0].evaluate(u);const T=this.input.evaluate(u);if(T<=p[0])return _[0].evaluate(u);const I=p.length;return T>=p[I-1]?_[I-1].evaluate(u):_[nl(p,T)].evaluate(u)}eachChild(u){u(this.input);for(const p of this.outputs)u(p)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Kh(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var Zu,hc,Ml=function(){if(hc)return Zu;function m(u,p,_,T){this.cx=3*u,this.bx=3*(_-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(T-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=p,this.p2x=_,this.p2y=T}return hc=1,Zu=m,m.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,p){if(p===void 0&&(p=1e-6),u<0)return 0;if(u>1)return 1;for(var _=u,T=0;T<8;T++){var I=this.sampleCurveX(_)-u;if(Math.abs(I)<p)return _;var O=this.sampleCurveDerivativeX(_);if(Math.abs(O)<1e-6)break;_-=I/O}var U=0,J=1;for(_=u,T=0;T<20&&(I=this.sampleCurveX(_),!(Math.abs(I-u)<p));T++)u>I?U=_:J=_,_=.5*(J-U)+U;return _},solve:function(u,p){return this.sampleCurveY(this.solveCurveX(u,p))}},Zu}(),Pa=Kh(Ml);class Wa{constructor(u,p,_,T,I){this.type=u,this.operator=p,this.interpolation=_,this.input=T,this.labels=[],this.outputs=[];for(const[O,U]of I)this.labels.push(O),this.outputs.push(U)}static interpolationFactor(u,p,_,T){let I=0;if(u.name==="exponential")I=eh(p,u.base,_,T);else if(u.name==="linear")I=eh(p,1,_,T);else if(u.name==="cubic-bezier"){const O=u.controlPoints;I=new Pa(O[0],O[1],O[2],O[3]).solve(eh(p,1,_,T))}return I}static parse(u,p){let[_,T,I,...O]=u;if(!Array.isArray(T)||T.length===0)return p.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){const ne=T[1];if(typeof ne!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:ne}}else{if(T[0]!=="cubic-bezier")return p.error(`Unknown interpolation type ${String(T[0])}`,1,0);{const ne=T.slice(1);if(ne.length!==4||ne.some(ce=>typeof ce!="number"||ce<0||ce>1))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:ne}}}if(u.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(I=p.parse(I,2,je),!I)return null;const U=[];let J=null;_==="interpolate-hcl"||_==="interpolate-lab"?J=Hn:p.expectedType&&p.expectedType.kind!=="value"&&(J=p.expectedType);for(let ne=0;ne<O.length;ne+=2){const ce=O[ne],_e=O[ne+1],Re=ne+3,Le=ne+4;if(typeof ce!="number")return p.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Re);if(U.length&&U[U.length-1][0]>=ce)return p.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Re);const Fe=p.parse(_e,Le,J);if(!Fe)return null;J=J||Fe.type,U.push([ce,Fe])}return _n(J,je)||_n(J,or)||_n(J,Hn)||_n(J,Vi)||_n(J,Ca)||_n(J,ra(je))?new Wa(J,_,T,I,U):p.error(`Type ${mi(J)} is not interpolatable.`)}evaluate(u){const p=this.labels,_=this.outputs;if(p.length===1)return _[0].evaluate(u);const T=this.input.evaluate(u);if(T<=p[0])return _[0].evaluate(u);const I=p.length;if(T>=p[I-1])return _[I-1].evaluate(u);const O=nl(p,T),U=Wa.interpolationFactor(this.interpolation,T,p[O],p[O+1]),J=_[O].evaluate(u),ne=_[O+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Pi(J,ne,U);case"color":return H.interpolate(J,ne,U);case"padding":return Ut.interpolate(J,ne,U);case"variableAnchorOffsetCollection":return Wn.interpolate(J,ne,U);case"array":return xa(J,ne,U);case"projectionDefinition":return vr.interpolate(J,ne,U)}case"interpolate-hcl":return H.interpolate(J,ne,U,"hcl");case"interpolate-lab":return H.interpolate(J,ne,U,"lab")}}eachChild(u){u(this.input);for(const p of this.outputs)u(p)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function eh(m,u,p,_){const T=_-p,I=m-p;return T===0?0:u===1?I/T:(Math.pow(u,I)-1)/(Math.pow(u,T)-1)}const Do={color:H.interpolate,number:Pi,padding:Ut.interpolate,variableAnchorOffsetCollection:Wn.interpolate,array:xa};class ia{constructor(u,p){this.type=u,this.args=p}static parse(u,p){if(u.length<2)return p.error("Expected at least one argument.");let _=null;const T=p.expectedType;T&&T.kind!=="value"&&(_=T);const I=[];for(const U of u.slice(1)){const J=p.parse(U,1+I.length,_,void 0,{typeAnnotation:"omit"});if(!J)return null;_=_||J.type,I.push(J)}if(!_)throw new Error("No output type");const O=T&&I.some(U=>nt(T,U.type));return new ia(O?lr:_,I)}evaluate(u){let p,_=null,T=0;for(const I of this.args)if(T++,_=I.evaluate(u),_&&_ instanceof mr&&!_.available&&(p||(p=_.name),_=null,T===this.args.length&&(_=p)),_!==null)break;return _}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function hu(m,u){return m==="=="||m==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function fu(m,u,p,_){return _.compare(u,p)===0}function as(m,u,p){const _=m!=="=="&&m!=="!=";return class jz{constructor(I,O,U){this.type=sn,this.lhs=I,this.rhs=O,this.collator=U,this.hasUntypedArgument=I.type.kind==="value"||O.type.kind==="value"}static parse(I,O){if(I.length!==3&&I.length!==4)return O.error("Expected two or three arguments.");const U=I[0];let J=O.parse(I[1],1,lr);if(!J)return null;if(!hu(U,J.type))return O.concat(1).error(`"${U}" comparisons are not supported for type '${mi(J.type)}'.`);let ne=O.parse(I[2],2,lr);if(!ne)return null;if(!hu(U,ne.type))return O.concat(2).error(`"${U}" comparisons are not supported for type '${mi(ne.type)}'.`);if(J.type.kind!==ne.type.kind&&J.type.kind!=="value"&&ne.type.kind!=="value")return O.error(`Cannot compare types '${mi(J.type)}' and '${mi(ne.type)}'.`);_&&(J.type.kind==="value"&&ne.type.kind!=="value"?J=new Rr(ne.type,[J]):J.type.kind!=="value"&&ne.type.kind==="value"&&(ne=new Rr(J.type,[ne])));let ce=null;if(I.length===4){if(J.type.kind!=="string"&&ne.type.kind!=="string"&&J.type.kind!=="value"&&ne.type.kind!=="value")return O.error("Cannot use collator to compare non-string types.");if(ce=O.parse(I[3],3,Ri),!ce)return null}return new jz(J,ne,ce)}evaluate(I){const O=this.lhs.evaluate(I),U=this.rhs.evaluate(I);if(_&&this.hasUntypedArgument){const J=Ti(O),ne=Ti(U);if(J.kind!==ne.kind||J.kind!=="string"&&J.kind!=="number")throw new Yt(`Expected arguments for "${m}" to be (string, string) or (number, number), but found (${J.kind}, ${ne.kind}) instead.`)}if(this.collator&&!_&&this.hasUntypedArgument){const J=Ti(O),ne=Ti(U);if(J.kind!=="string"||ne.kind!=="string")return u(I,O,U)}return this.collator?p(I,O,U,this.collator.evaluate(I)):u(I,O,U)}eachChild(I){I(this.lhs),I(this.rhs),this.collator&&I(this.collator)}outputDefined(){return!0}}}const Nc=as("==",function(m,u,p){return u===p},fu),kc=as("!=",function(m,u,p){return u!==p},function(m,u,p,_){return!fu(0,u,p,_)}),Fc=as("<",function(m,u,p){return u<p},function(m,u,p,_){return _.compare(u,p)<0}),Bc=as(">",function(m,u,p){return u>p},function(m,u,p,_){return _.compare(u,p)>0}),Cu=as("<=",function(m,u,p){return u<=p},function(m,u,p,_){return _.compare(u,p)<=0}),Pu=as(">=",function(m,u,p){return u>=p},function(m,u,p,_){return _.compare(u,p)>=0});class Vo{constructor(u,p,_){this.type=Ri,this.locale=_,this.caseSensitive=u,this.diacriticSensitive=p}static parse(u,p){if(u.length!==2)return p.error("Expected one argument.");const _=u[1];if(typeof _!="object"||Array.isArray(_))return p.error("Collator options argument must be an object.");const T=p.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,sn);if(!T)return null;const I=p.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,sn);if(!I)return null;let O=null;return _.locale&&(O=p.parse(_.locale,1,At),!O)?null:new Vo(T,I,O)}evaluate(u){return new he(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class fc{constructor(u,p,_,T,I){this.type=At,this.number=u,this.locale=p,this.currency=_,this.minFractionDigits=T,this.maxFractionDigits=I}static parse(u,p){if(u.length!==3)return p.error("Expected two arguments.");const _=p.parse(u[1],1,je);if(!_)return null;const T=u[2];if(typeof T!="object"||Array.isArray(T))return p.error("NumberFormat options argument must be an object.");let I=null;if(T.locale&&(I=p.parse(T.locale,1,At),!I))return null;let O=null;if(T.currency&&(O=p.parse(T.currency,1,At),!O))return null;let U=null;if(T["min-fraction-digits"]&&(U=p.parse(T["min-fraction-digits"],1,je),!U))return null;let J=null;return T["max-fraction-digits"]&&(J=p.parse(T["max-fraction-digits"],1,je),!J)?null:new fc(_,I,O,U,J)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class os{constructor(u){this.type=ci,this.sections=u}static parse(u,p){if(u.length<2)return p.error("Expected at least one argument.");const _=u[1];if(!Array.isArray(_)&&typeof _=="object")return p.error("First argument must be an image or text section.");const T=[];let I=!1;for(let O=1;O<=u.length-1;++O){const U=u[O];if(I&&typeof U=="object"&&!Array.isArray(U)){I=!1;let J=null;if(U["font-scale"]&&(J=p.parse(U["font-scale"],1,je),!J))return null;let ne=null;if(U["text-font"]&&(ne=p.parse(U["text-font"],1,ra(At)),!ne))return null;let ce=null;if(U["text-color"]&&(ce=p.parse(U["text-color"],1,Hn),!ce))return null;let _e=null;if(U["vertical-align"]){if(typeof U["vertical-align"]=="string"&&!Ge.includes(U["vertical-align"]))return p.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${U["vertical-align"]}' instead.`);if(_e=p.parse(U["vertical-align"],1,At),!_e)return null}const Re=T[T.length-1];Re.scale=J,Re.font=ne,Re.textColor=ce,Re.verticalAlign=_e}else{const J=p.parse(u[O],1,lr);if(!J)return null;const ne=J.type.kind;if(ne!=="string"&&ne!=="value"&&ne!=="null"&&ne!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");I=!0,T.push({content:J,scale:null,font:null,textColor:null,verticalAlign:null})}}return new os(T)}evaluate(u){return new Lt(this.sections.map(p=>{const _=p.content.evaluate(u);return Ti(_)===Vr?new St("",_,null,null,null,p.verticalAlign?p.verticalAlign.evaluate(u):null):new St(Yr(_),null,p.scale?p.scale.evaluate(u):null,p.font?p.font.evaluate(u).join(","):null,p.textColor?p.textColor.evaluate(u):null,p.verticalAlign?p.verticalAlign.evaluate(u):null)}))}eachChild(u){for(const p of this.sections)u(p.content),p.scale&&u(p.scale),p.font&&u(p.font),p.textColor&&u(p.textColor),p.verticalAlign&&u(p.verticalAlign)}outputDefined(){return!1}}class th{constructor(u){this.type=Vr,this.input=u}static parse(u,p){if(u.length!==2)return p.error("Expected two arguments.");const _=p.parse(u[1],1,At);return _?new th(_):p.error("No image name provided.")}evaluate(u){const p=this.input.evaluate(u),_=mr.fromString(p);return _&&u.availableImages&&(_.available=u.availableImages.indexOf(p)>-1),_}eachChild(u){u(this.input)}outputDefined(){return!1}}class Ru{constructor(u){this.type=je,this.input=u}static parse(u,p){if(u.length!==2)return p.error(`Expected 1 argument, but found ${u.length-1} instead.`);const _=p.parse(u[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?p.error(`Expected argument of type string or array, but found ${mi(_.type)} instead.`):new Ru(_):null}evaluate(u){const p=this.input.evaluate(u);if(typeof p=="string")return[...p].length;if(Array.isArray(p))return p.length;throw new Yt(`Expected value to be of type string or array, but found ${mi(Ti(p))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Ts=8192;function dc(m,u){const p=(180+m[0])/360,_=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+m[1]*Math.PI/360)))/360,T=Math.pow(2,u.z);return[Math.round(p*T*Ts),Math.round(_*T*Ts)]}function rl(m,u){const p=Math.pow(2,u.z);return[(T=(m[0]/Ts+u.x)/p,360*T-180),(_=(m[1]/Ts+u.y)/p,360/Math.PI*Math.atan(Math.exp((180-360*_)*Math.PI/180))-90)];var _,T}function du(m,u){m[0]=Math.min(m[0],u[0]),m[1]=Math.min(m[1],u[1]),m[2]=Math.max(m[2],u[0]),m[3]=Math.max(m[3],u[1])}function ee(m,u){return!(m[0]<=u[0]||m[2]>=u[2]||m[1]<=u[1]||m[3]>=u[3])}function Ue(m,u,p){const _=m[0]-u[0],T=m[1]-u[1],I=m[0]-p[0],O=m[1]-p[1];return _*O-I*T==0&&_*I<=0&&T*O<=0}function Mt(m,u,p,_){return(T=[_[0]-p[0],_[1]-p[1]])[0]*(I=[u[0]-m[0],u[1]-m[1]])[1]-T[1]*I[0]!=0&&!(!Gr(m,u,p,_)||!Gr(p,_,m,u));var T,I}function Zt(m,u,p){for(const _ of p)for(let T=0;T<_.length-1;++T)if(Mt(m,u,_[T],_[T+1]))return!0;return!1}function yn(m,u,p=!1){let _=!1;for(const U of u)for(let J=0;J<U.length-1;J++){if(Ue(m,U[J],U[J+1]))return p;(I=U[J])[1]>(T=m)[1]!=(O=U[J+1])[1]>T[1]&&T[0]<(O[0]-I[0])*(T[1]-I[1])/(O[1]-I[1])+I[0]&&(_=!_)}var T,I,O;return _}function qn(m,u){for(const p of u)if(yn(m,p))return!0;return!1}function fr(m,u){for(const p of m)if(!yn(p,u))return!1;for(let p=0;p<m.length-1;++p)if(Zt(m[p],m[p+1],u))return!1;return!0}function Or(m,u){for(const p of u)if(fr(m,p))return!0;return!1}function Gr(m,u,p,_){const T=_[0]-p[0],I=_[1]-p[1],O=(m[0]-p[0])*I-T*(m[1]-p[1]),U=(u[0]-p[0])*I-T*(u[1]-p[1]);return O>0&&U<0||O<0&&U>0}function wi(m,u,p){const _=[];for(let T=0;T<m.length;T++){const I=[];for(let O=0;O<m[T].length;O++){const U=dc(m[T][O],p);du(u,U),I.push(U)}_.push(I)}return _}function oi(m,u,p){const _=[];for(let T=0;T<m.length;T++){const I=wi(m[T],u,p);_.push(I)}return _}function Mi(m,u,p,_){if(m[0]<p[0]||m[0]>p[2]){const T=.5*_;let I=m[0]-p[0]>T?-_:p[0]-m[0]>T?_:0;I===0&&(I=m[0]-p[2]>T?-_:p[2]-m[0]>T?_:0),m[0]+=I}du(u,m)}function ya(m,u,p,_){const T=Math.pow(2,_.z)*Ts,I=[_.x*Ts,_.y*Ts],O=[];for(const U of m)for(const J of U){const ne=[J.x+I[0],J.y+I[1]];Mi(ne,u,p,T),O.push(ne)}return O}function ka(m,u,p,_){const T=Math.pow(2,_.z)*Ts,I=[_.x*Ts,_.y*Ts],O=[];for(const J of m){const ne=[];for(const ce of J){const _e=[ce.x+I[0],ce.y+I[1]];du(u,_e),ne.push(_e)}O.push(ne)}if(u[2]-u[0]<=T/2){(U=u)[0]=U[1]=1/0,U[2]=U[3]=-1/0;for(const J of O)for(const ne of J)Mi(ne,u,p,T)}var U;return O}class aa{constructor(u,p){this.type=sn,this.geojson=u,this.geometries=p}static parse(u,p){if(u.length!==2)return p.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Lr(u[1])){const _=u[1];if(_.type==="FeatureCollection"){const T=[];for(const I of _.features){const{type:O,coordinates:U}=I.geometry;O==="Polygon"&&T.push(U),O==="MultiPolygon"&&T.push(...U)}if(T.length)return new aa(_,{type:"MultiPolygon",coordinates:T})}else if(_.type==="Feature"){const T=_.geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new aa(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new aa(_,_)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(p,_){const T=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],O=p.canonicalID();if(_.type==="Polygon"){const U=wi(_.coordinates,I,O),J=ya(p.geometry(),T,I,O);if(!ee(T,I))return!1;for(const ne of J)if(!yn(ne,U))return!1}if(_.type==="MultiPolygon"){const U=oi(_.coordinates,I,O),J=ya(p.geometry(),T,I,O);if(!ee(T,I))return!1;for(const ne of J)if(!qn(ne,U))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(p,_){const T=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],O=p.canonicalID();if(_.type==="Polygon"){const U=wi(_.coordinates,I,O),J=ka(p.geometry(),T,I,O);if(!ee(T,I))return!1;for(const ne of J)if(!fr(ne,U))return!1}if(_.type==="MultiPolygon"){const U=oi(_.coordinates,I,O),J=ka(p.geometry(),T,I,O);if(!ee(T,I))return!1;for(const ne of J)if(!Or(ne,U))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let yo=class{constructor(m=[],u=(p,_)=>p<_?-1:p>_?1:0){if(this.data=m,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(m){this.data.push(m),this._up(this.length++)}pop(){if(this.length===0)return;const m=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),m}peek(){return this.data[0]}_up(m){const{data:u,compare:p}=this,_=u[m];for(;m>0;){const T=m-1>>1,I=u[T];if(p(_,I)>=0)break;u[m]=I,m=T}u[m]=_}_down(m){const{data:u,compare:p}=this,_=this.length>>1,T=u[m];for(;m<_;){let I=1+(m<<1);const O=I+1;if(O<this.length&&p(u[O],u[I])<0&&(I=O),p(u[I],T)>=0)break;u[m]=u[I],m=I}u[m]=T}};function _o(m,u,p=0,_=m.length-1,T=il){for(;_>p;){if(_-p>600){const J=_-p+1,ne=u-p+1,ce=Math.log(J),_e=.5*Math.exp(2*ce/3),Re=.5*Math.sqrt(ce*_e*(J-_e)/J)*(ne-J/2<0?-1:1);_o(m,u,Math.max(p,Math.floor(u-ne*_e/J+Re)),Math.min(_,Math.floor(u+(J-ne)*_e/J+Re)),T)}const I=m[u];let O=p,U=_;for(So(m,p,u),T(m[_],I)>0&&So(m,p,_);O<U;){for(So(m,O,U),O++,U--;T(m[O],I)<0;)O++;for(;T(m[U],I)>0;)U--}T(m[p],I)===0?So(m,p,U):(U++,So(m,U,_)),U<=u&&(p=U+1),u<=U&&(_=U-1)}}function So(m,u,p){const _=m[u];m[u]=m[p],m[p]=_}function il(m,u){return m<u?-1:m>u?1:0}function Vs(m,u){if(m.length<=1)return[m];const p=[];let _,T;for(const I of m){const O=Du(I);O!==0&&(I.area=Math.abs(O),T===void 0&&(T=O<0),T===O<0?(_&&p.push(_),_=[I]):_.push(I))}if(_&&p.push(_),u>1)for(let I=0;I<p.length;I++)p[I].length<=u||(_o(p[I],u,1,p[I].length-1,Sh),p[I]=p[I].slice(0,u));return p}function Sh(m,u){return u.area-m.area}function Du(m){let u=0;for(let p,_,T=0,I=m.length,O=I-1;T<I;O=T++)p=m[T],_=m[O],u+=(_.x-p.x)*(p.y+_.y);return u}const ql=1/298.257223563,pc=ql*(2-ql),Hl=Math.PI/180;class al{constructor(u){const p=6378.137*Hl*1e3,_=Math.cos(u*Hl),T=1/(1-pc*(1-_*_)),I=Math.sqrt(T);this.kx=p*I*_,this.ky=p*I*T*(1-pc)}distance(u,p){const _=this.wrap(u[0]-p[0])*this.kx,T=(u[1]-p[1])*this.ky;return Math.sqrt(_*_+T*T)}pointOnLine(u,p){let _,T,I,O,U=1/0;for(let J=0;J<u.length-1;J++){let ne=u[J][0],ce=u[J][1],_e=this.wrap(u[J+1][0]-ne)*this.kx,Re=(u[J+1][1]-ce)*this.ky,Le=0;_e===0&&Re===0||(Le=(this.wrap(p[0]-ne)*this.kx*_e+(p[1]-ce)*this.ky*Re)/(_e*_e+Re*Re),Le>1?(ne=u[J+1][0],ce=u[J+1][1]):Le>0&&(ne+=_e/this.kx*Le,ce+=Re/this.ky*Le)),_e=this.wrap(p[0]-ne)*this.kx,Re=(p[1]-ce)*this.ky;const Fe=_e*_e+Re*Re;Fe<U&&(U=Fe,_=ne,T=ce,I=J,O=Le)}return{point:[_,T],index:I,t:Math.max(0,Math.min(1,O))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function Yu(m,u){return u[0]-m[0]}function Ra(m){return m[1]-m[0]+1}function Ms(m,u){return m[1]>=m[0]&&m[1]<u}function Gs(m,u){if(m[0]>m[1])return[null,null];const p=Ra(m);if(u){if(p===2)return[m,null];const T=Math.floor(p/2);return[[m[0],m[0]+T],[m[0]+T,m[1]]]}if(p===1)return[m,null];const _=Math.floor(p/2)-1;return[[m[0],m[0]+_],[m[0]+_+1,m[1]]]}function pu(m,u){if(!Ms(u,m.length))return[1/0,1/0,-1/0,-1/0];const p=[1/0,1/0,-1/0,-1/0];for(let _=u[0];_<=u[1];++_)du(p,m[_]);return p}function mc(m){const u=[1/0,1/0,-1/0,-1/0];for(const p of m)for(const _ of p)du(u,_);return u}function ss(m){return m[0]!==-1/0&&m[1]!==-1/0&&m[2]!==1/0&&m[3]!==1/0}function zc(m,u,p){if(!ss(m)||!ss(u))return NaN;let _=0,T=0;return m[2]<u[0]&&(_=u[0]-m[2]),m[0]>u[2]&&(_=m[0]-u[2]),m[1]>u[3]&&(T=m[1]-u[3]),m[3]<u[1]&&(T=u[1]-m[3]),p.distance([0,0],[_,T])}function $l(m,u,p){const _=p.pointOnLine(u,m);return p.distance(m,_.point)}function qi(m,u,p,_,T){const I=Math.min($l(m,[p,_],T),$l(u,[p,_],T)),O=Math.min($l(p,[m,u],T),$l(_,[m,u],T));return Math.min(I,O)}function Al(m,u,p,_,T){if(!Ms(u,m.length)||!Ms(_,p.length))return 1/0;let I=1/0;for(let O=u[0];O<u[1];++O){const U=m[O],J=m[O+1];for(let ne=_[0];ne<_[1];++ne){const ce=p[ne],_e=p[ne+1];if(Mt(U,J,ce,_e))return 0;I=Math.min(I,qi(U,J,ce,_e,T))}}return I}function bo(m,u,p,_,T){if(!Ms(u,m.length)||!Ms(_,p.length))return NaN;let I=1/0;for(let O=u[0];O<=u[1];++O)for(let U=_[0];U<=_[1];++U)if(I=Math.min(I,T.distance(m[O],p[U])),I===0)return I;return I}function Ku(m,u,p){if(yn(m,u,!0))return 0;let _=1/0;for(const T of u){const I=T[0],O=T[T.length-1];if(I!==O&&(_=Math.min(_,$l(m,[O,I],p)),_===0))return _;const U=p.pointOnLine(T,m);if(_=Math.min(_,p.distance(m,U.point)),_===0)return _}return _}function Eh(m,u,p,_){if(!Ms(u,m.length))return NaN;for(let I=u[0];I<=u[1];++I)if(yn(m[I],p,!0))return 0;let T=1/0;for(let I=u[0];I<u[1];++I){const O=m[I],U=m[I+1];for(const J of p)for(let ne=0,ce=J.length,_e=ce-1;ne<ce;_e=ne++){const Re=J[_e],Le=J[ne];if(Mt(O,U,Re,Le))return 0;T=Math.min(T,qi(O,U,Re,Le,_))}}return T}function ln(m,u){for(const p of m)for(const _ of p)if(yn(_,u,!0))return!0;return!1}function On(m,u,p,_=1/0){const T=mc(m),I=mc(u);if(_!==1/0&&zc(T,I,p)>=_)return _;if(ee(T,I)){if(ln(m,u))return 0}else if(ln(u,m))return 0;let O=1/0;for(const U of m)for(let J=0,ne=U.length,ce=ne-1;J<ne;ce=J++){const _e=U[ce],Re=U[J];for(const Le of u)for(let Fe=0,Ye=Le.length,ct=Ye-1;Fe<Ye;ct=Fe++){const wt=Le[ct],Xt=Le[Fe];if(Mt(_e,Re,wt,Xt))return 0;O=Math.min(O,qi(_e,Re,wt,Xt,p))}}return O}function _r(m,u,p,_,T,I){if(!I)return;const O=zc(pu(_,I),T,p);O<u&&m.push([O,I,[0,0]])}function Dr(m,u,p,_,T,I,O){if(!I||!O)return;const U=zc(pu(_,I),pu(T,O),p);U<u&&m.push([U,I,O])}function na(m,u,p,_,T=1/0){let I=Math.min(_.distance(m[0],p[0][0]),T);if(I===0)return I;const O=new yo([[0,[0,m.length-1],[0,0]]],Yu),U=mc(p);for(;O.length>0;){const J=O.pop();if(J[0]>=I)continue;const ne=J[1],ce=u?50:100;if(Ra(ne)<=ce){if(!Ms(ne,m.length))return NaN;if(u){const _e=Eh(m,ne,p,_);if(isNaN(_e)||_e===0)return _e;I=Math.min(I,_e)}else for(let _e=ne[0];_e<=ne[1];++_e){const Re=Ku(m[_e],p,_);if(I=Math.min(I,Re),I===0)return 0}}else{const _e=Gs(ne,u);_r(O,I,_,m,U,_e[0]),_r(O,I,_,m,U,_e[1])}}return I}function Si(m,u,p,_,T,I=1/0){let O=Math.min(I,T.distance(m[0],p[0]));if(O===0)return O;const U=new yo([[0,[0,m.length-1],[0,p.length-1]]],Yu);for(;U.length>0;){const J=U.pop();if(J[0]>=O)continue;const ne=J[1],ce=J[2],_e=u?50:100,Re=_?50:100;if(Ra(ne)<=_e&&Ra(ce)<=Re){if(!Ms(ne,m.length)&&Ms(ce,p.length))return NaN;let Le;if(u&&_)Le=Al(m,ne,p,ce,T),O=Math.min(O,Le);else if(u&&!_){const Fe=m.slice(ne[0],ne[1]+1);for(let Ye=ce[0];Ye<=ce[1];++Ye)if(Le=$l(p[Ye],Fe,T),O=Math.min(O,Le),O===0)return O}else if(!u&&_){const Fe=p.slice(ce[0],ce[1]+1);for(let Ye=ne[0];Ye<=ne[1];++Ye)if(Le=$l(m[Ye],Fe,T),O=Math.min(O,Le),O===0)return O}else Le=bo(m,ne,p,ce,T),O=Math.min(O,Le)}else{const Le=Gs(ne,u),Fe=Gs(ce,_);Dr(U,O,T,m,p,Le[0],Fe[0]),Dr(U,O,T,m,p,Le[0],Fe[1]),Dr(U,O,T,m,p,Le[1],Fe[0]),Dr(U,O,T,m,p,Le[1],Fe[1])}}return O}function Xi(m){return m.type==="MultiPolygon"?m.coordinates.map(u=>({type:"Polygon",coordinates:u})):m.type==="MultiLineString"?m.coordinates.map(u=>({type:"LineString",coordinates:u})):m.type==="MultiPoint"?m.coordinates.map(u=>({type:"Point",coordinates:u})):[m]}class la{constructor(u,p){this.type=je,this.geojson=u,this.geometries=p}static parse(u,p){if(u.length!==2)return p.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Lr(u[1])){const _=u[1];if(_.type==="FeatureCollection")return new la(_,_.features.map(T=>Xi(T.geometry)).flat());if(_.type==="Feature")return new la(_,Xi(_.geometry));if("type"in _&&"coordinates"in _)return new la(_,Xi(_))}return p.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(p,_){const T=p.geometry(),I=T.flat().map(J=>rl([J.x,J.y],p.canonical));if(T.length===0)return NaN;const O=new al(I[0][1]);let U=1/0;for(const J of _){switch(J.type){case"Point":U=Math.min(U,Si(I,!1,[J.coordinates],!1,O,U));break;case"LineString":U=Math.min(U,Si(I,!1,J.coordinates,!0,O,U));break;case"Polygon":U=Math.min(U,na(I,!1,J.coordinates,O,U))}if(U===0)return U}return U}(u,this.geometries);if(u.geometryType()==="LineString")return function(p,_){const T=p.geometry(),I=T.flat().map(J=>rl([J.x,J.y],p.canonical));if(T.length===0)return NaN;const O=new al(I[0][1]);let U=1/0;for(const J of _){switch(J.type){case"Point":U=Math.min(U,Si(I,!0,[J.coordinates],!1,O,U));break;case"LineString":U=Math.min(U,Si(I,!0,J.coordinates,!0,O,U));break;case"Polygon":U=Math.min(U,na(I,!0,J.coordinates,O,U))}if(U===0)return U}return U}(u,this.geometries);if(u.geometryType()==="Polygon")return function(p,_){const T=p.geometry();if(T.length===0||T[0].length===0)return NaN;const I=Vs(T,0).map(J=>J.map(ne=>ne.map(ce=>rl([ce.x,ce.y],p.canonical)))),O=new al(I[0][0][0][1]);let U=1/0;for(const J of _)for(const ne of I){switch(J.type){case"Point":U=Math.min(U,na([J.coordinates],!1,ne,O,U));break;case"LineString":U=Math.min(U,na(J.coordinates,!0,ne,O,U));break;case"Polygon":U=Math.min(U,On(ne,J.coordinates,O,U))}if(U===0)return U}return U}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Fa={"==":Nc,"!=":kc,">":Bc,"<":Fc,">=":Pu,"<=":Cu,array:Rr,at:ji,boolean:Rr,case:Ro,coalesce:ia,collator:Vo,format:os,image:th,in:Po,"index-of":vo,interpolate:Wa,"interpolate-hcl":Wa,"interpolate-lab":Wa,length:Ru,let:Ir,literal:Cr,match:tl,number:Rr,"number-format":fc,object:Rr,slice:jo,step:Es,string:Rr,"to-boolean":ta,"to-color":ta,"to-number":ta,"to-string":ta,var:Gl,within:aa,distance:la};class si{constructor(u,p,_,T){this.name=u,this.type=p,this._evaluate=_,this.args=T}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,p){const _=u[0],T=si.definitions[_];if(!T)return p.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0);const I=Array.isArray(T)?T[0]:T.type,O=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,U=O.filter(([ne])=>!Array.isArray(ne)||ne.length===u.length-1);let J=null;for(const[ne,ce]of U){J=new _i(p.registry,As,p.path,null,p.scope);const _e=[];let Re=!1;for(let Le=1;Le<u.length;Le++){const Fe=u[Le],Ye=Array.isArray(ne)?ne[Le-1]:ne.type,ct=J.parse(Fe,1+_e.length,Ye);if(!ct){Re=!0;break}_e.push(ct)}if(!Re)if(Array.isArray(ne)&&ne.length!==_e.length)J.error(`Expected ${ne.length} arguments, but found ${_e.length} instead.`);else{for(let Le=0;Le<_e.length;Le++){const Fe=Array.isArray(ne)?ne[Le]:ne.type,Ye=_e[Le];J.concat(Le+1).checkSubtype(Fe,Ye.type)}if(J.errors.length===0)return new si(_,I,ce,_e)}}if(U.length===1)p.errors.push(...J.errors);else{const ne=(U.length?U:O).map(([_e])=>{return Re=_e,Array.isArray(Re)?`(${Re.map(mi).join(", ")})`:`(${mi(Re.type)}...)`;var Re}).join(" | "),ce=[];for(let _e=1;_e<u.length;_e++){const Re=p.parse(u[_e],1+ce.length);if(!Re)return null;ce.push(mi(Re.type))}p.error(`Expected arguments of type ${ne}, but found (${ce.join(", ")}) instead.`)}return null}static register(u,p){si.definitions=p;for(const _ in p)u[_]=si}}function Qa(m,[u,p,_,T]){u=u.evaluate(m),p=p.evaluate(m),_=_.evaluate(m);const I=T?T.evaluate(m):1,O=xr(u,p,_,I);if(O)throw new Yt(O);return new H(u/255,p/255,_/255,I,!1)}function wa(m,u){return m in u}function Va(m,u){const p=u[m];return p===void 0?null:p}function Ba(m){return{type:m}}function As(m){if(m instanceof Gl)return As(m.boundExpression);if(m instanceof si&&m.name==="error"||m instanceof Vo||m instanceof aa||m instanceof la)return!1;const u=m instanceof ta||m instanceof Rr;let p=!0;return m.eachChild(_=>{p=u?p&&As(_):p&&_ instanceof Cr}),!!p&&Go(m)&&Cs(m,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Go(m){if(m instanceof si&&(m.name==="get"&&m.args.length===1||m.name==="feature-state"||m.name==="has"&&m.args.length===1||m.name==="properties"||m.name==="geometry-type"||m.name==="id"||/^filter-/.test(m.name))||m instanceof aa||m instanceof la)return!1;let u=!0;return m.eachChild(p=>{u&&!Go(p)&&(u=!1)}),u}function qs(m){if(m instanceof si&&m.name==="feature-state")return!1;let u=!0;return m.eachChild(p=>{u&&!qs(p)&&(u=!1)}),u}function Cs(m,u){if(m instanceof si&&u.indexOf(m.name)>=0)return!1;let p=!0;return m.eachChild(_=>{p&&!Cs(_,u)&&(p=!1)}),p}function ol(m){return{result:"success",value:m}}function Cl(m){return{result:"error",value:m}}function mu(m){return m["property-type"]==="data-driven"||m["property-type"]==="cross-faded-data-driven"}function gc(m){return!!m.expression&&m.expression.parameters.indexOf("zoom")>-1}function Zi(m){return!!m.expression&&m.expression.interpolated}function Br(m){return m instanceof Number?"number":m instanceof String?"string":m instanceof Boolean?"boolean":Array.isArray(m)?"array":m===null?"null":typeof m}function qo(m){return typeof m=="object"&&m!==null&&!Array.isArray(m)}function Da(m){return m}function zi(m,u){const p=u.type==="color",_=m.stops&&typeof m.stops[0][0]=="object",T=_||!(_||m.property!==void 0),I=m.type||(Zi(u)?"exponential":"interval");if(p||u.type==="padding"){const ce=p?H.parse:Ut.parse;(m=Zn({},m)).stops&&(m.stops=m.stops.map(_e=>[_e[0],ce(_e[1])])),m.default=ce(m.default?m.default:u.default)}if(m.colorSpace&&(O=m.colorSpace)!=="rgb"&&O!=="hcl"&&O!=="lab")throw new Error(`Unknown color space: "${m.colorSpace}"`);var O;let U,J,ne;if(I==="exponential")U=ds;else if(I==="interval")U=La;else if(I==="categorical"){U=Sa,J=Object.create(null);for(const ce of m.stops)J[ce[0]]=ce[1];ne=typeof m.stops[0][0]}else{if(I!=="identity")throw new Error(`Unknown function type "${I}"`);U=gu}if(_){const ce={},_e=[];for(let Fe=0;Fe<m.stops.length;Fe++){const Ye=m.stops[Fe],ct=Ye[0].zoom;ce[ct]===void 0&&(ce[ct]={zoom:ct,type:m.type,property:m.property,default:m.default,stops:[]},_e.push(ct)),ce[ct].stops.push([Ye[0].value,Ye[1]])}const Re=[];for(const Fe of _e)Re.push([ce[Fe].zoom,zi(ce[Fe],u)]);const Le={name:"linear"};return{kind:"composite",interpolationType:Le,interpolationFactor:Wa.interpolationFactor.bind(void 0,Le),zoomStops:Re.map(Fe=>Fe[0]),evaluate:({zoom:Fe},Ye)=>ds({stops:Re,base:m.base},u,Fe).evaluate(Fe,Ye)}}if(T){const ce=I==="exponential"?{name:"exponential",base:m.base!==void 0?m.base:1}:null;return{kind:"camera",interpolationType:ce,interpolationFactor:Wa.interpolationFactor.bind(void 0,ce),zoomStops:m.stops.map(_e=>_e[0]),evaluate:({zoom:_e})=>U(m,u,_e,J,ne)}}return{kind:"source",evaluate(ce,_e){const Re=_e&&_e.properties?_e.properties[m.property]:void 0;return Re===void 0?bi(m.default,u.default):U(m,u,Re,J,ne)}}}function bi(m,u,p){return m!==void 0?m:u!==void 0?u:p!==void 0?p:void 0}function Sa(m,u,p,_,T){return bi(typeof p===T?_[p]:void 0,m.default,u.default)}function La(m,u,p){if(Br(p)!=="number")return bi(m.default,u.default);const _=m.stops.length;if(_===1||p<=m.stops[0][0])return m.stops[0][1];if(p>=m.stops[_-1][0])return m.stops[_-1][1];const T=nl(m.stops.map(I=>I[0]),p);return m.stops[T][1]}function ds(m,u,p){const _=m.base!==void 0?m.base:1;if(Br(p)!=="number")return bi(m.default,u.default);const T=m.stops.length;if(T===1||p<=m.stops[0][0])return m.stops[0][1];if(p>=m.stops[T-1][0])return m.stops[T-1][1];const I=nl(m.stops.map(ce=>ce[0]),p),O=function(ce,_e,Re,Le){const Fe=Le-Re,Ye=ce-Re;return Fe===0?0:_e===1?Ye/Fe:(Math.pow(_e,Ye)-1)/(Math.pow(_e,Fe)-1)}(p,_,m.stops[I][0],m.stops[I+1][0]),U=m.stops[I][1],J=m.stops[I+1][1],ne=Do[u.type]||Da;return typeof U.evaluate=="function"?{evaluate(...ce){const _e=U.evaluate.apply(void 0,ce),Re=J.evaluate.apply(void 0,ce);if(_e!==void 0&&Re!==void 0)return ne(_e,Re,O,m.colorSpace)}}:ne(U,J,O,m.colorSpace)}function gu(m,u,p){switch(u.type){case"color":p=H.parse(p);break;case"formatted":p=Lt.fromString(p.toString());break;case"resolvedImage":p=mr.fromString(p.toString());break;case"padding":p=Ut.parse(p);break;default:Br(p)===u.type||u.type==="enum"&&u.values[p]||(p=void 0)}return bi(p,m.default,u.default)}si.register(Fa,{error:[{kind:"error"},[At],(m,[u])=>{throw new Yt(u.evaluate(m))}],typeof:[At,[lr],(m,[u])=>mi(Ti(u.evaluate(m)))],"to-rgba":[ra(je,4),[Hn],(m,[u])=>{const[p,_,T,I]=u.evaluate(m).rgb;return[255*p,255*_,255*T,I]}],rgb:[Hn,[je,je,je],Qa],rgba:[Hn,[je,je,je,je],Qa],has:{type:sn,overloads:[[[At],(m,[u])=>wa(u.evaluate(m),m.properties())],[[At,Er],(m,[u,p])=>wa(u.evaluate(m),p.evaluate(m))]]},get:{type:lr,overloads:[[[At],(m,[u])=>Va(u.evaluate(m),m.properties())],[[At,Er],(m,[u,p])=>Va(u.evaluate(m),p.evaluate(m))]]},"feature-state":[lr,[At],(m,[u])=>Va(u.evaluate(m),m.featureState||{})],properties:[Er,[],m=>m.properties()],"geometry-type":[At,[],m=>m.geometryType()],id:[lr,[],m=>m.id()],zoom:[je,[],m=>m.globals.zoom],"heatmap-density":[je,[],m=>m.globals.heatmapDensity||0],"line-progress":[je,[],m=>m.globals.lineProgress||0],accumulated:[lr,[],m=>m.globals.accumulated===void 0?null:m.globals.accumulated],"+":[je,Ba(je),(m,u)=>{let p=0;for(const _ of u)p+=_.evaluate(m);return p}],"*":[je,Ba(je),(m,u)=>{let p=1;for(const _ of u)p*=_.evaluate(m);return p}],"-":{type:je,overloads:[[[je,je],(m,[u,p])=>u.evaluate(m)-p.evaluate(m)],[[je],(m,[u])=>-u.evaluate(m)]]},"/":[je,[je,je],(m,[u,p])=>u.evaluate(m)/p.evaluate(m)],"%":[je,[je,je],(m,[u,p])=>u.evaluate(m)%p.evaluate(m)],ln2:[je,[],()=>Math.LN2],pi:[je,[],()=>Math.PI],e:[je,[],()=>Math.E],"^":[je,[je,je],(m,[u,p])=>Math.pow(u.evaluate(m),p.evaluate(m))],sqrt:[je,[je],(m,[u])=>Math.sqrt(u.evaluate(m))],log10:[je,[je],(m,[u])=>Math.log(u.evaluate(m))/Math.LN10],ln:[je,[je],(m,[u])=>Math.log(u.evaluate(m))],log2:[je,[je],(m,[u])=>Math.log(u.evaluate(m))/Math.LN2],sin:[je,[je],(m,[u])=>Math.sin(u.evaluate(m))],cos:[je,[je],(m,[u])=>Math.cos(u.evaluate(m))],tan:[je,[je],(m,[u])=>Math.tan(u.evaluate(m))],asin:[je,[je],(m,[u])=>Math.asin(u.evaluate(m))],acos:[je,[je],(m,[u])=>Math.acos(u.evaluate(m))],atan:[je,[je],(m,[u])=>Math.atan(u.evaluate(m))],min:[je,Ba(je),(m,u)=>Math.min(...u.map(p=>p.evaluate(m)))],max:[je,Ba(je),(m,u)=>Math.max(...u.map(p=>p.evaluate(m)))],abs:[je,[je],(m,[u])=>Math.abs(u.evaluate(m))],round:[je,[je],(m,[u])=>{const p=u.evaluate(m);return p<0?-Math.round(-p):Math.round(p)}],floor:[je,[je],(m,[u])=>Math.floor(u.evaluate(m))],ceil:[je,[je],(m,[u])=>Math.ceil(u.evaluate(m))],"filter-==":[sn,[At,lr],(m,[u,p])=>m.properties()[u.value]===p.value],"filter-id-==":[sn,[lr],(m,[u])=>m.id()===u.value],"filter-type-==":[sn,[At],(m,[u])=>m.geometryType()===u.value],"filter-<":[sn,[At,lr],(m,[u,p])=>{const _=m.properties()[u.value],T=p.value;return typeof _==typeof T&&_<T}],"filter-id-<":[sn,[lr],(m,[u])=>{const p=m.id(),_=u.value;return typeof p==typeof _&&p<_}],"filter->":[sn,[At,lr],(m,[u,p])=>{const _=m.properties()[u.value],T=p.value;return typeof _==typeof T&&_>T}],"filter-id->":[sn,[lr],(m,[u])=>{const p=m.id(),_=u.value;return typeof p==typeof _&&p>_}],"filter-<=":[sn,[At,lr],(m,[u,p])=>{const _=m.properties()[u.value],T=p.value;return typeof _==typeof T&&_<=T}],"filter-id-<=":[sn,[lr],(m,[u])=>{const p=m.id(),_=u.value;return typeof p==typeof _&&p<=_}],"filter->=":[sn,[At,lr],(m,[u,p])=>{const _=m.properties()[u.value],T=p.value;return typeof _==typeof T&&_>=T}],"filter-id->=":[sn,[lr],(m,[u])=>{const p=m.id(),_=u.value;return typeof p==typeof _&&p>=_}],"filter-has":[sn,[lr],(m,[u])=>u.value in m.properties()],"filter-has-id":[sn,[],m=>m.id()!==null&&m.id()!==void 0],"filter-type-in":[sn,[ra(At)],(m,[u])=>u.value.indexOf(m.geometryType())>=0],"filter-id-in":[sn,[ra(lr)],(m,[u])=>u.value.indexOf(m.id())>=0],"filter-in-small":[sn,[At,ra(lr)],(m,[u,p])=>p.value.indexOf(m.properties()[u.value])>=0],"filter-in-large":[sn,[At,ra(lr)],(m,[u,p])=>function(_,T,I,O){for(;I<=O;){const U=I+O>>1;if(T[U]===_)return!0;T[U]>_?O=U-1:I=U+1}return!1}(m.properties()[u.value],p.value,0,p.value.length-1)],all:{type:sn,overloads:[[[sn,sn],(m,[u,p])=>u.evaluate(m)&&p.evaluate(m)],[Ba(sn),(m,u)=>{for(const p of u)if(!p.evaluate(m))return!1;return!0}]]},any:{type:sn,overloads:[[[sn,sn],(m,[u,p])=>u.evaluate(m)||p.evaluate(m)],[Ba(sn),(m,u)=>{for(const p of u)if(p.evaluate(m))return!0;return!1}]]},"!":[sn,[sn],(m,[u])=>!u.evaluate(m)],"is-supported-script":[sn,[At],(m,[u])=>{const p=m.globals&&m.globals.isSupportedScript;return!p||p(u.evaluate(m))}],upcase:[At,[At],(m,[u])=>u.evaluate(m).toUpperCase()],downcase:[At,[At],(m,[u])=>u.evaluate(m).toLowerCase()],concat:[At,Ba(lr),(m,u)=>u.map(p=>Yr(p.evaluate(m))).join("")],"resolved-locale":[At,[Ri],(m,[u])=>u.evaluate(m).resolvedLocale()]});class Lo{constructor(u,p){var _;this.expression=u,this._warningHistory={},this._evaluator=new js,this._defaultValue=p?(_=p).type==="color"&&qo(_.default)?new H(0,0,0,0):_.type==="color"?H.parse(_.default)||null:_.type==="padding"?Ut.parse(_.default)||null:_.type==="variableAnchorOffsetCollection"?Wn.parse(_.default)||null:_.type==="projectionDefinition"?vr.parse(_.default)||null:_.default===void 0?null:_.default:null,this._enumValues=p&&p.type==="enum"?p.values:null}evaluateWithoutErrorHandling(u,p,_,T,I,O){return this._evaluator.globals=u,this._evaluator.feature=p,this._evaluator.featureState=_,this._evaluator.canonical=T,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=O,this.expression.evaluate(this._evaluator)}evaluate(u,p,_,T,I,O){this._evaluator.globals=u,this._evaluator.feature=p||null,this._evaluator.featureState=_||null,this._evaluator.canonical=T,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=O||null;try{const U=this.expression.evaluate(this._evaluator);if(U==null||typeof U=="number"&&U!=U)return this._defaultValue;if(this._enumValues&&!(U in this._enumValues))throw new Yt(`Expected value to be one of ${Object.keys(this._enumValues).map(J=>JSON.stringify(J)).join(", ")}, but found ${JSON.stringify(U)} instead.`);return U}catch(U){return this._warningHistory[U.message]||(this._warningHistory[U.message]=!0,typeof console<"u"&&console.warn(U.message)),this._defaultValue}}}function sl(m){return Array.isArray(m)&&m.length>0&&typeof m[0]=="string"&&m[0]in Fa}function Pl(m,u){const p=new _i(Fa,As,[],u?function(T){const I={color:Hn,string:At,number:je,enum:At,boolean:sn,formatted:ci,padding:Vi,projectionDefinition:or,resolvedImage:Vr,variableAnchorOffsetCollection:Ca};return T.type==="array"?ra(I[T.value]||lr,T.length):I[T.type]}(u):void 0),_=p.parse(m,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?ol(new Lo(_,u)):Cl(p.errors)}class Hs{constructor(u,p){this.kind=u,this._styleExpression=p,this.isStateDependent=u!=="constant"&&!qs(p.expression)}evaluateWithoutErrorHandling(u,p,_,T,I,O){return this._styleExpression.evaluateWithoutErrorHandling(u,p,_,T,I,O)}evaluate(u,p,_,T,I,O){return this._styleExpression.evaluate(u,p,_,T,I,O)}}class ls{constructor(u,p,_,T){this.kind=u,this.zoomStops=_,this._styleExpression=p,this.isStateDependent=u!=="camera"&&!qs(p.expression),this.interpolationType=T}evaluateWithoutErrorHandling(u,p,_,T,I,O){return this._styleExpression.evaluateWithoutErrorHandling(u,p,_,T,I,O)}evaluate(u,p,_,T,I,O){return this._styleExpression.evaluate(u,p,_,T,I,O)}interpolationFactor(u,p,_){return this.interpolationType?Wa.interpolationFactor(this.interpolationType,u,p,_):0}}function Ga(m,u){const p=Pl(m,u);if(p.result==="error")return p;const _=p.value.expression,T=Go(_);if(!T&&!mu(u))return Cl([new Gn("","data expressions not supported")]);const I=Cs(_,["zoom"]);if(!I&&!gc(u))return Cl([new Gn("","zoom expressions not supported")]);const O=Rl(_);return O||I?O instanceof Gn?Cl([O]):O instanceof Wa&&!Zi(u)?Cl([new Gn("",'"interpolate" expressions cannot be used with this property')]):ol(O?new ls(T?"camera":"composite",p.value,O.labels,O instanceof Wa?O.interpolation:void 0):new Hs(T?"constant":"source",p.value)):Cl([new Gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class $s{constructor(u,p){this._parameters=u,this._specification=p,Zn(this,zi(this._parameters,this._specification))}static deserialize(u){return new $s(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function Rl(m){let u=null;if(m instanceof Ir)u=Rl(m.result);else if(m instanceof ia){for(const p of m.args)if(u=Rl(p),u)break}else(m instanceof Es||m instanceof Wa)&&m.input instanceof si&&m.input.name==="zoom"&&(u=m);return u instanceof Gn||m.eachChild(p=>{const _=Rl(p);_ instanceof Gn?u=_:!u&&_?u=new Gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&_&&u!==_&&(u=new Gn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function Lu(m){if(m===!0||m===!1)return!0;if(!Array.isArray(m)||m.length===0)return!1;switch(m[0]){case"has":return m.length>=2&&m[1]!=="$id"&&m[1]!=="$type";case"in":return m.length>=3&&(typeof m[1]!="string"||Array.isArray(m[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return m.length!==3||Array.isArray(m[1])||Array.isArray(m[2]);case"any":case"all":for(const u of m.slice(1))if(!Lu(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const vu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ps(m){if(m==null)return{filter:()=>!0,needGeometry:!1};Lu(m)||(m=Dl(m));const u=Pl(m,vu);if(u.result==="error")throw new Error(u.value.map(p=>`${p.key}: ${p.message}`).join(", "));return{filter:(p,_,T)=>u.value.evaluate(p,_,{},T),needGeometry:Uc(m)}}function Wl(m,u){return m<u?-1:m>u?1:0}function Uc(m){if(!Array.isArray(m))return!1;if(m[0]==="within"||m[0]==="distance")return!0;for(let u=1;u<m.length;u++)if(Uc(m[u]))return!0;return!1}function Dl(m){if(!m)return!0;const u=m[0];return m.length<=1?u!=="any":u==="=="?Xl(m[1],m[2],"=="):u==="!="?nh(Xl(m[1],m[2],"==")):u==="<"||u===">"||u==="<="||u===">="?Xl(m[1],m[2],u):u==="any"?(p=m.slice(1),["any"].concat(p.map(Dl))):u==="all"?["all"].concat(m.slice(1).map(Dl)):u==="none"?["all"].concat(m.slice(1).map(Dl).map(nh)):u==="in"?Iu(m[1],m.slice(2)):u==="!in"?nh(Iu(m[1],m.slice(2))):u==="has"?Jh(m[1]):u!=="!has"||nh(Jh(m[1]));var p}function Xl(m,u,p){switch(m){case"$type":return[`filter-type-${p}`,u];case"$id":return[`filter-id-${p}`,u];default:return[`filter-${p}`,m,u]}}function Iu(m,u){if(u.length===0)return!1;switch(m){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(p=>typeof p!=typeof u[0])?["filter-in-large",m,["literal",u.sort(Wl)]]:["filter-in-small",m,["literal",u]]}}function Jh(m){switch(m){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",m]}}function nh(m){return["!",m]}function Th(m){const u=typeof m;if(u==="number"||u==="boolean"||u==="string"||m==null)return JSON.stringify(m);if(Array.isArray(m)){let T="[";for(const I of m)T+=`${Th(I)},`;return`${T}]`}const p=Object.keys(m).sort();let _="{";for(let T=0;T<p.length;T++)_+=`${JSON.stringify(p[T])}:${Th(m[p[T]])},`;return`${_}}`}function Rs(m){let u="";for(const p of ke)u+=`/${Th(m[p])}`;return u}function Ho(m){const u=m.value;return u?[new qt(m.key,u,"constants have been deprecated as of v8")]:[]}function hi(m){return m instanceof Number||m instanceof String||m instanceof Boolean?m.valueOf():m}function Ws(m){if(Array.isArray(m))return m.map(Ws);if(m instanceof Object&&!(m instanceof Number||m instanceof String||m instanceof Boolean)){const u={};for(const p in m)u[p]=Ws(m[p]);return u}return hi(m)}function $o(m){const u=m.key,p=m.value,_=m.valueSpec||{},T=m.objectElementValidators||{},I=m.style,O=m.styleSpec,U=m.validateSpec;let J=[];const ne=Br(p);if(ne!=="object")return[new qt(u,p,`object expected, ${ne} found`)];for(const ce in p){const _e=ce.split(".")[0],Re=_[_e]||_["*"];let Le;if(T[_e])Le=T[_e];else if(_[_e])Le=U;else if(T["*"])Le=T["*"];else{if(!_["*"]){J.push(new qt(u,p[ce],`unknown property "${ce}"`));continue}Le=U}J=J.concat(Le({key:(u&&`${u}.`)+ce,value:p[ce],valueSpec:Re,style:I,styleSpec:O,object:p,objectKey:ce,validateSpec:U},p))}for(const ce in _)T[ce]||_[ce].required&&_[ce].default===void 0&&p[ce]===void 0&&J.push(new qt(u,p,`missing required property "${ce}"`));return J}function Cf(m){const u=m.value,p=m.valueSpec,_=m.style,T=m.styleSpec,I=m.key,O=m.arrayElementValidator||m.validateSpec;if(Br(u)!=="array")return[new qt(I,u,`array expected, ${Br(u)} found`)];if(p.length&&u.length!==p.length)return[new qt(I,u,`array length ${p.length} expected, length ${u.length} found`)];if(p["min-length"]&&u.length<p["min-length"])return[new qt(I,u,`array length at least ${p["min-length"]} expected, length ${u.length} found`)];let U={type:p.value,values:p.values};T.$version<7&&(U.function=p.function),Br(p.value)==="object"&&(U=p.value);let J=[];for(let ne=0;ne<u.length;ne++)J=J.concat(O({array:u,arrayIndex:ne,value:u[ne],valueSpec:U,validateSpec:m.validateSpec,style:_,styleSpec:T,key:`${I}[${ne}]`}));return J}function Ju(m){const u=m.key,p=m.value,_=m.valueSpec;let T=Br(p);return T==="number"&&p!=p&&(T="NaN"),T!=="number"?[new qt(u,p,`number expected, ${T} found`)]:"minimum"in _&&p<_.minimum?[new qt(u,p,`${p} is less than the minimum value ${_.minimum}`)]:"maximum"in _&&p>_.maximum?[new qt(u,p,`${p} is greater than the maximum value ${_.maximum}`)]:[]}function Pf(m){const u=m.valueSpec,p=hi(m.value.type);let _,T,I,O={};const U=p!=="categorical"&&m.value.property===void 0,J=!U,ne=Br(m.value.stops)==="array"&&Br(m.value.stops[0])==="array"&&Br(m.value.stops[0][0])==="object",ce=$o({key:m.key,value:m.value,valueSpec:m.styleSpec.function,validateSpec:m.validateSpec,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{stops:function(Le){if(p==="identity")return[new qt(Le.key,Le.value,'identity function may not have a "stops" property')];let Fe=[];const Ye=Le.value;return Fe=Fe.concat(Cf({key:Le.key,value:Ye,valueSpec:Le.valueSpec,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec,arrayElementValidator:_e})),Br(Ye)==="array"&&Ye.length===0&&Fe.push(new qt(Le.key,Ye,"array must have at least one stop")),Fe},default:function(Le){return Le.validateSpec({key:Le.key,value:Le.value,valueSpec:u,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec})}}});return p==="identity"&&U&&ce.push(new qt(m.key,m.value,'missing required property "property"')),p==="identity"||m.value.stops||ce.push(new qt(m.key,m.value,'missing required property "stops"')),p==="exponential"&&m.valueSpec.expression&&!Zi(m.valueSpec)&&ce.push(new qt(m.key,m.value,"exponential functions not supported")),m.styleSpec.$version>=8&&(J&&!mu(m.valueSpec)?ce.push(new qt(m.key,m.value,"property functions not supported")):U&&!gc(m.valueSpec)&&ce.push(new qt(m.key,m.value,"zoom functions not supported"))),p!=="categorical"&&!ne||m.value.property!==void 0||ce.push(new qt(m.key,m.value,'"property" property is required')),ce;function _e(Le){let Fe=[];const Ye=Le.value,ct=Le.key;if(Br(Ye)!=="array")return[new qt(ct,Ye,`array expected, ${Br(Ye)} found`)];if(Ye.length!==2)return[new qt(ct,Ye,`array length 2 expected, length ${Ye.length} found`)];if(ne){if(Br(Ye[0])!=="object")return[new qt(ct,Ye,`object expected, ${Br(Ye[0])} found`)];if(Ye[0].zoom===void 0)return[new qt(ct,Ye,"object stop key must have zoom")];if(Ye[0].value===void 0)return[new qt(ct,Ye,"object stop key must have value")];if(I&&I>hi(Ye[0].zoom))return[new qt(ct,Ye[0].zoom,"stop zoom values must appear in ascending order")];hi(Ye[0].zoom)!==I&&(I=hi(Ye[0].zoom),T=void 0,O={}),Fe=Fe.concat($o({key:`${ct}[0]`,value:Ye[0],valueSpec:{zoom:{}},validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec,objectElementValidators:{zoom:Ju,value:Re}}))}else Fe=Fe.concat(Re({key:`${ct}[0]`,value:Ye[0],validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec},Ye));return sl(Ws(Ye[1]))?Fe.concat([new qt(`${ct}[1]`,Ye[1],"expressions are not allowed in function stops.")]):Fe.concat(Le.validateSpec({key:`${ct}[1]`,value:Ye[1],valueSpec:u,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec}))}function Re(Le,Fe){const Ye=Br(Le.value),ct=hi(Le.value),wt=Le.value!==null?Le.value:Fe;if(_){if(Ye!==_)return[new qt(Le.key,wt,`${Ye} stop domain type must match previous stop domain type ${_}`)]}else _=Ye;if(Ye!=="number"&&Ye!=="string"&&Ye!=="boolean")return[new qt(Le.key,wt,"stop domain value must be a number, string, or boolean")];if(Ye!=="number"&&p!=="categorical"){let Xt=`number expected, ${Ye} found`;return mu(u)&&p===void 0&&(Xt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qt(Le.key,wt,Xt)]}return p!=="categorical"||Ye!=="number"||isFinite(ct)&&Math.floor(ct)===ct?p!=="categorical"&&Ye==="number"&&T!==void 0&&ct<T?[new qt(Le.key,wt,"stop domain values must appear in ascending order")]:(T=ct,p==="categorical"&&ct in O?[new qt(Le.key,wt,"stop domain values must be unique")]:(O[ct]=!0,[])):[new qt(Le.key,wt,`integer expected, found ${ct}`)]}}function Ou(m){const u=(m.expressionContext==="property"?Ga:Pl)(Ws(m.value),m.valueSpec);if(u.result==="error")return u.value.map(_=>new qt(`${m.key}${_.key}`,m.value,_.message));const p=u.value.expression||u.value._styleExpression.expression;if(m.expressionContext==="property"&&m.propertyKey==="text-font"&&!p.outputDefined())return[new qt(m.key,m.value,`Invalid data expression for "${m.propertyKey}". Output values must be contained as literals within the expression.`)];if(m.expressionContext==="property"&&m.propertyType==="layout"&&!qs(p))return[new qt(m.key,m.value,'"feature-state" data expressions are not supported with layout properties.')];if(m.expressionContext==="filter"&&!qs(p))return[new qt(m.key,m.value,'"feature-state" data expressions are not supported with filters.')];if(m.expressionContext&&m.expressionContext.indexOf("cluster")===0){if(!Cs(p,["zoom","feature-state"]))return[new qt(m.key,m.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(m.expressionContext==="cluster-initial"&&!Go(p))return[new qt(m.key,m.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vc(m){const u=m.key,p=m.value,_=m.valueSpec,T=[];return Array.isArray(_.values)?_.values.indexOf(hi(p))===-1&&T.push(new qt(u,p,`expected one of [${_.values.join(", ")}], ${JSON.stringify(p)} found`)):Object.keys(_.values).indexOf(hi(p))===-1&&T.push(new qt(u,p,`expected one of [${Object.keys(_.values).join(", ")}], ${JSON.stringify(p)} found`)),T}function yc(m){return Lu(Ws(m.value))?Ou(Zn({},m,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Mh(m)}function Mh(m){const u=m.value,p=m.key;if(Br(u)!=="array")return[new qt(p,u,`array expected, ${Br(u)} found`)];const _=m.styleSpec;let T,I=[];if(u.length<1)return[new qt(p,u,"filter array must have at least 1 element")];switch(I=I.concat(vc({key:`${p}[0]`,value:u[0],valueSpec:_.filter_operator,style:m.style,styleSpec:m.styleSpec})),hi(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&hi(u[1])==="$type"&&I.push(new qt(p,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&I.push(new qt(p,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(T=Br(u[1]),T!=="string"&&I.push(new qt(`${p}[1]`,u[1],`string expected, ${T} found`)));for(let O=2;O<u.length;O++)T=Br(u[O]),hi(u[1])==="$type"?I=I.concat(vc({key:`${p}[${O}]`,value:u[O],valueSpec:_.geometry_type,style:m.style,styleSpec:m.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&I.push(new qt(`${p}[${O}]`,u[O],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let O=1;O<u.length;O++)I=I.concat(Mh({key:`${p}[${O}]`,value:u[O],style:m.style,styleSpec:m.styleSpec}));break;case"has":case"!has":T=Br(u[1]),u.length!==2?I.push(new qt(p,u,`filter array for "${u[0]}" operator must have 2 elements`)):T!=="string"&&I.push(new qt(`${p}[1]`,u[1],`string expected, ${T} found`))}return I}function Ah(m,u){const p=m.key,_=m.validateSpec,T=m.style,I=m.styleSpec,O=m.value,U=m.objectKey,J=I[`${u}_${m.layerType}`];if(!J)return[];const ne=U.match(/^(.*)-transition$/);if(u==="paint"&&ne&&J[ne[1]]&&J[ne[1]].transition)return _({key:p,value:O,valueSpec:I.transition,style:T,styleSpec:I});const ce=m.valueSpec||J[U];if(!ce)return[new qt(p,O,`unknown property "${U}"`)];let _e;if(Br(O)==="string"&&mu(ce)&&!ce.tokens&&(_e=/^{([^}]+)}$/.exec(O)))return[new qt(p,O,`"${U}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(_e[1])} }\`.`)];const Re=[];return m.layerType==="symbol"&&(U==="text-field"&&T&&!T.glyphs&&Re.push(new qt(p,O,'use of "text-field" requires a style "glyphs" property')),U==="text-font"&&qo(Ws(O))&&hi(O.type)==="identity"&&Re.push(new qt(p,O,'"text-font" does not support identity functions'))),Re.concat(_({key:m.key,value:O,valueSpec:ce,style:T,styleSpec:I,expressionContext:"property",propertyType:u,propertyKey:U}))}function bd(m){return Ah(m,"paint")}function xd(m){return Ah(m,"layout")}function wd(m){let u=[];const p=m.value,_=m.key,T=m.style,I=m.styleSpec;p.type||p.ref||u.push(new qt(_,p,'either "type" or "ref" is required'));let O=hi(p.type);const U=hi(p.ref);if(p.id){const J=hi(p.id);for(let ne=0;ne<m.arrayIndex;ne++){const ce=T.layers[ne];hi(ce.id)===J&&u.push(new qt(_,p.id,`duplicate layer id "${p.id}", previously used at line ${ce.id.__line__}`))}}if("ref"in p){let J;["type","source","source-layer","filter","layout"].forEach(ne=>{ne in p&&u.push(new qt(_,p[ne],`"${ne}" is prohibited for ref layers`))}),T.layers.forEach(ne=>{hi(ne.id)===U&&(J=ne)}),J?J.ref?u.push(new qt(_,p.ref,"ref cannot reference another ref layer")):O=hi(J.type):u.push(new qt(_,p.ref,`ref layer "${U}" not found`))}else if(O!=="background")if(p.source){const J=T.sources&&T.sources[p.source],ne=J&&hi(J.type);J?ne==="vector"&&O==="raster"?u.push(new qt(_,p.source,`layer "${p.id}" requires a raster source`)):ne!=="raster-dem"&&O==="hillshade"?u.push(new qt(_,p.source,`layer "${p.id}" requires a raster-dem source`)):ne==="raster"&&O!=="raster"?u.push(new qt(_,p.source,`layer "${p.id}" requires a vector source`)):ne!=="vector"||p["source-layer"]?ne==="raster-dem"&&O!=="hillshade"?u.push(new qt(_,p.source,"raster-dem source can only be used with layer type 'hillshade'.")):O!=="line"||!p.paint||!p.paint["line-gradient"]||ne==="geojson"&&J.lineMetrics||u.push(new qt(_,p,`layer "${p.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new qt(_,p,`layer "${p.id}" must specify a "source-layer"`)):u.push(new qt(_,p.source,`source "${p.source}" not found`))}else u.push(new qt(_,p,'missing required property "source"'));return u=u.concat($o({key:_,value:p,valueSpec:I.layer,style:m.style,styleSpec:m.styleSpec,validateSpec:m.validateSpec,objectElementValidators:{"*":()=>[],type:()=>m.validateSpec({key:`${_}.type`,value:p.type,valueSpec:I.layer.type,style:m.style,styleSpec:m.styleSpec,validateSpec:m.validateSpec,object:p,objectKey:"type"}),filter:yc,layout:J=>$o({layer:p,key:J.key,value:J.value,style:J.style,styleSpec:J.styleSpec,validateSpec:J.validateSpec,objectElementValidators:{"*":ne=>xd(Zn({layerType:O},ne))}}),paint:J=>$o({layer:p,key:J.key,value:J.value,style:J.style,styleSpec:J.styleSpec,validateSpec:J.validateSpec,objectElementValidators:{"*":ne=>bd(Zn({layerType:O},ne))}})}})),u}function Ds(m){const u=m.value,p=m.key,_=Br(u);return _!=="string"?[new qt(p,u,`string expected, ${_} found`)]:[]}const Xs={promoteId:function({key:m,value:u}){if(Br(u)==="string")return Ds({key:m,value:u});{const p=[];for(const _ in u)p.push(...Ds({key:`${m}.${_}`,value:u[_]}));return p}}};function Zl(m){const u=m.value,p=m.key,_=m.styleSpec,T=m.style,I=m.validateSpec;if(!u.type)return[new qt(p,u,'"type" is required')];const O=hi(u.type);let U;switch(O){case"vector":case"raster":return U=$o({key:p,value:u,valueSpec:_[`source_${O.replace("-","_")}`],style:m.style,styleSpec:_,objectElementValidators:Xs,validateSpec:I}),U;case"raster-dem":return U=function(J){var ne;const ce=(ne=J.sourceName)!==null&&ne!==void 0?ne:"",_e=J.value,Re=J.styleSpec,Le=Re.source_raster_dem,Fe=J.style;let Ye=[];const ct=Br(_e);if(_e===void 0)return Ye;if(ct!=="object")return Ye.push(new qt("source_raster_dem",_e,`object expected, ${ct} found`)),Ye;const wt=hi(_e.encoding)==="custom",Xt=["redFactor","greenFactor","blueFactor","baseShift"],Rt=J.value.encoding?`"${J.value.encoding}"`:"Default";for(const Ie in _e)!wt&&Xt.includes(Ie)?Ye.push(new qt(Ie,_e[Ie],`In "${ce}": "${Ie}" is only valid when "encoding" is set to "custom". ${Rt} encoding found`)):Le[Ie]?Ye=Ye.concat(J.validateSpec({key:Ie,value:_e[Ie],valueSpec:Le[Ie],validateSpec:J.validateSpec,style:Fe,styleSpec:Re})):Ye.push(new qt(Ie,_e[Ie],`unknown property "${Ie}"`));return Ye}({sourceName:p,value:u,style:m.style,styleSpec:_,validateSpec:I}),U;case"geojson":if(U=$o({key:p,value:u,valueSpec:_.source_geojson,style:T,styleSpec:_,validateSpec:I,objectElementValidators:Xs}),u.cluster)for(const J in u.clusterProperties){const[ne,ce]=u.clusterProperties[J],_e=typeof ne=="string"?[ne,["accumulated"],["get",J]]:ne;U.push(...Ou({key:`${p}.${J}.map`,value:ce,expressionContext:"cluster-map"})),U.push(...Ou({key:`${p}.${J}.reduce`,value:_e,expressionContext:"cluster-reduce"}))}return U;case"video":return $o({key:p,value:u,valueSpec:_.source_video,style:T,validateSpec:I,styleSpec:_});case"image":return $o({key:p,value:u,valueSpec:_.source_image,style:T,validateSpec:I,styleSpec:_});case"canvas":return[new qt(p,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vc({key:`${p}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function mp(m){const u=m.value,p=m.styleSpec,_=p.light,T=m.style;let I=[];const O=Br(u);if(u===void 0)return I;if(O!=="object")return I=I.concat([new qt("light",u,`object expected, ${O} found`)]),I;for(const U in u){const J=U.match(/^(.*)-transition$/);I=I.concat(J&&_[J[1]]&&_[J[1]].transition?m.validateSpec({key:U,value:u[U],valueSpec:p.transition,validateSpec:m.validateSpec,style:T,styleSpec:p}):_[U]?m.validateSpec({key:U,value:u[U],valueSpec:_[U],validateSpec:m.validateSpec,style:T,styleSpec:p}):[new qt(U,u[U],`unknown property "${U}"`)])}return I}function rh(m){const u=m.value,p=m.styleSpec,_=p.sky,T=m.style,I=Br(u);if(u===void 0)return[];if(I!=="object")return[new qt("sky",u,`object expected, ${I} found`)];let O=[];for(const U in u)O=O.concat(_[U]?m.validateSpec({key:U,value:u[U],valueSpec:_[U],style:T,styleSpec:p}):[new qt(U,u[U],`unknown property "${U}"`)]);return O}function yu(m){const u=m.value,p=m.styleSpec,_=p.terrain,T=m.style;let I=[];const O=Br(u);if(u===void 0)return I;if(O!=="object")return I=I.concat([new qt("terrain",u,`object expected, ${O} found`)]),I;for(const U in u)I=I.concat(_[U]?m.validateSpec({key:U,value:u[U],valueSpec:_[U],validateSpec:m.validateSpec,style:T,styleSpec:p}):[new qt(U,u[U],`unknown property "${U}"`)]);return I}function ll(m){let u=[];const p=m.value,_=m.key;if(Array.isArray(p)){const T=[],I=[];for(const O in p)p[O].id&&T.includes(p[O].id)&&u.push(new qt(_,p,`all the sprites' ids must be unique, but ${p[O].id} is duplicated`)),T.push(p[O].id),p[O].url&&I.includes(p[O].url)&&u.push(new qt(_,p,`all the sprites' URLs must be unique, but ${p[O].url} is duplicated`)),I.push(p[O].url),u=u.concat($o({key:`${_}[${O}]`,value:p[O],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:m.validateSpec}));return u}return Ds({key:_,value:p})}const Qh={"*":()=>[],array:Cf,boolean:function(m){const u=m.value,p=m.key,_=Br(u);return _!=="boolean"?[new qt(p,u,`boolean expected, ${_} found`)]:[]},number:Ju,color:function(m){const u=m.key,p=m.value,_=Br(p);return _!=="string"?[new qt(u,p,`color expected, ${_} found`)]:H.parse(String(p))?[]:[new qt(u,p,`color expected, "${p}" found`)]},constants:Ho,enum:vc,filter:yc,function:Pf,layer:wd,object:$o,source:Zl,light:mp,sky:rh,terrain:yu,projection:function(m){const u=m.value,p=m.styleSpec,_=p.projection,T=m.style,I=Br(u);if(u===void 0)return[];if(I!=="object")return[new qt("projection",u,`object expected, ${I} found`)];let O=[];for(const U in u)O=O.concat(_[U]?m.validateSpec({key:U,value:u[U],valueSpec:_[U],style:T,styleSpec:p}):[new qt(U,u[U],`unknown property "${U}"`)]);return O},projectionDefinition:function(m){const u=m.key;let p=m.value;p=p instanceof String?p.valueOf():p;const _=Br(p);return _!=="array"||function(T){return Array.isArray(T)&&T.length===3&&typeof T[0]=="string"&&typeof T[1]=="string"&&typeof T[2]=="number"}(p)||function(T){return!!["interpolate","step","literal"].includes(T[0])}(p)?["array","string"].includes(_)?[]:[new qt(u,p,`projection expected, invalid type "${_}" found`)]:[new qt(u,p,`projection expected, invalid array ${JSON.stringify(p)} found`)]},string:Ds,formatted:function(m){return Ds(m).length===0?[]:Ou(m)},resolvedImage:function(m){return Ds(m).length===0?[]:Ou(m)},padding:function(m){const u=m.key,p=m.value;if(Br(p)==="array"){if(p.length<1||p.length>4)return[new qt(u,p,`padding requires 1 to 4 values; ${p.length} values found`)];const _={type:"number"};let T=[];for(let I=0;I<p.length;I++)T=T.concat(m.validateSpec({key:`${u}[${I}]`,value:p[I],validateSpec:m.validateSpec,valueSpec:_}));return T}return Ju({key:u,value:p,valueSpec:{}})},variableAnchorOffsetCollection:function(m){const u=m.key,p=m.value,_=Br(p),T=m.styleSpec;if(_!=="array"||p.length<1||p.length%2!=0)return[new qt(u,p,"variableAnchorOffsetCollection requires a non-empty array of even length")];let I=[];for(let O=0;O<p.length;O+=2)I=I.concat(vc({key:`${u}[${O}]`,value:p[O],valueSpec:T.layout_symbol["text-anchor"]})),I=I.concat(Cf({key:`${u}[${O+1}]`,value:p[O+1],valueSpec:{length:2,value:"number"},validateSpec:m.validateSpec,style:m.style,styleSpec:T}));return I},sprite:ll};function Qu(m){const u=m.value,p=m.valueSpec,_=m.styleSpec;return m.validateSpec=Qu,p.expression&&qo(hi(u))?Pf(m):p.expression&&sl(Ws(u))?Ou(m):p.type&&Qh[p.type]?Qh[p.type](m):$o(Zn({},m,{valueSpec:p.type?_[p.type]:p}))}function ih(m){const u=m.value,p=m.key,_=Ds(m);return _.length||(u.indexOf("{fontstack}")===-1&&_.push(new qt(p,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&_.push(new qt(p,u,'"glyphs" url must include a "{range}" token'))),_}function uo(m,u=ge){let p=[];return p=p.concat(Qu({key:"",value:m,valueSpec:u.$root,styleSpec:u,style:m,validateSpec:Qu,objectElementValidators:{glyphs:ih,"*":()=>[]}})),m.constants&&(p=p.concat(Ho({key:"constants",value:m.constants}))),Rf(p)}function Wo(m){return function(u){return m({...u,validateSpec:Qu})}}function Rf(m){return[].concat(m).sort((u,p)=>u.line-p.line)}function Ll(m){return function(...u){return Rf(m.apply(this,u))}}uo.source=Ll(Wo(Zl)),uo.sprite=Ll(Wo(ll)),uo.glyphs=Ll(Wo(ih)),uo.light=Ll(Wo(mp)),uo.sky=Ll(Wo(rh)),uo.terrain=Ll(Wo(yu)),uo.layer=Ll(Wo(wd)),uo.filter=Ll(Wo(yc)),uo.paintProperty=Ll(Wo(bd)),uo.layoutProperty=Ll(Wo(xd));const Nu=uo,jc=Nu.light,ah=Nu.sky,Ch=Nu.paintProperty,ku=Nu.layoutProperty;function Yl(m,u){let p=!1;if(u&&u.length)for(const _ of u)m.fire(new ir(new Error(_.message))),p=!0;return p}class Fu{constructor(u,p,_){const T=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const O=new Int32Array(this.arrayBuffer);u=O[0],this.d=(p=O[1])+2*(_=O[2]);for(let J=0;J<this.d*this.d;J++){const ne=O[3+J],ce=O[3+J+1];T.push(ne===ce?null:O.subarray(ne,ce))}const U=O[3+T.length+1];this.keys=O.subarray(O[3+T.length],U),this.bboxes=O.subarray(U),this.insert=this._insertReadonly}else{this.d=p+2*_;for(let O=0;O<this.d*this.d;O++)T.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=u,this.padding=_,this.scale=p/u,this.uid=0;const I=_/p*u;this.min=-I,this.max=u+I}insert(u,p,_,T,I){this._forEachCell(p,_,T,I,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(T),this.bboxes.push(I)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,p,_,T,I,O){this.cells[I].push(O)}query(u,p,_,T,I){const O=this.min,U=this.max;if(u<=O&&p<=O&&U<=_&&U<=T&&!I)return Array.prototype.slice.call(this.keys);{const J=[];return this._forEachCell(u,p,_,T,this._queryCell,J,{},I),J}}_queryCell(u,p,_,T,I,O,U,J){const ne=this.cells[I];if(ne!==null){const ce=this.keys,_e=this.bboxes;for(let Re=0;Re<ne.length;Re++){const Le=ne[Re];if(U[Le]===void 0){const Fe=4*Le;(J?J(_e[Fe+0],_e[Fe+1],_e[Fe+2],_e[Fe+3]):u<=_e[Fe+2]&&p<=_e[Fe+3]&&_>=_e[Fe+0]&&T>=_e[Fe+1])?(U[Le]=!0,O.push(ce[Le])):U[Le]=!1}}}}_forEachCell(u,p,_,T,I,O,U,J){const ne=this._convertToCellCoord(u),ce=this._convertToCellCoord(p),_e=this._convertToCellCoord(_),Re=this._convertToCellCoord(T);for(let Le=ne;Le<=_e;Le++)for(let Fe=ce;Fe<=Re;Fe++){const Ye=this.d*Fe+Le;if((!J||J(this._convertFromCellCoord(Le),this._convertFromCellCoord(Fe),this._convertFromCellCoord(Le+1),this._convertFromCellCoord(Fe+1)))&&I.call(this,u,p,_,T,Ye,O,U,J))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,p=3+this.cells.length+1+1;let _=0;for(let O=0;O<this.cells.length;O++)_+=this.cells[O].length;const T=new Int32Array(p+_+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;let I=p;for(let O=0;O<u.length;O++){const U=u[O];T[3+O]=I,T.set(U,I),I+=U.length}return T[3+u.length]=I,T.set(this.keys,I),I+=this.keys.length,T[3+u.length+1]=I,T.set(this.bboxes,I),I+=this.bboxes.length,T.buffer}static serialize(u,p){const _=u.toArrayBuffer();return p&&p.push(_),{buffer:_}}static deserialize(u){return new Fu(u.buffer)}}const Kl={};function Mr(m,u,p={}){if(Kl[m])throw new Error(`${m} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:m,writeable:!1}),Kl[m]={klass:u,omit:p.omit||[],shallow:p.shallow||[]}}Mr("Object",Object),Mr("TransferableGridIndex",Fu),Mr("Color",H),Mr("Error",Error),Mr("AJAXError",vn),Mr("ResolvedImage",mr),Mr("StylePropertyFunction",$s),Mr("StyleExpression",Lo,{omit:["_evaluator"]}),Mr("ZoomDependentExpression",ls),Mr("ZoomConstantExpression",Hs),Mr("CompoundExpression",si,{omit:["_evaluate"]});for(const m in Fa)Fa[m]._classRegistryKey||Mr(`Expression_${m}`,Fa[m]);function Jl(m){return m&&typeof ArrayBuffer<"u"&&(m instanceof ArrayBuffer||m.constructor&&m.constructor.name==="ArrayBuffer")}function Xo(m){return m.$name||m.constructor._classRegistryKey}function Df(m){return!function(u){if(u===null||typeof u!="object")return!1;const p=Xo(u);return!(!p||p==="Object")}(m)&&(m==null||typeof m=="boolean"||typeof m=="number"||typeof m=="string"||m instanceof Boolean||m instanceof Number||m instanceof String||m instanceof Date||m instanceof RegExp||m instanceof Blob||m instanceof Error||Jl(m)||Ct(m)||ArrayBuffer.isView(m)||m instanceof ImageData)}function Vc(m,u){if(Df(m))return(Jl(m)||Ct(m))&&u&&u.push(m),ArrayBuffer.isView(m)&&u&&u.push(m.buffer),m instanceof ImageData&&u&&u.push(m.data.buffer),m;if(Array.isArray(m)){const I=[];for(const O of m)I.push(Vc(O,u));return I}if(typeof m!="object")throw new Error("can't serialize object of type "+typeof m);const p=Xo(m);if(!p)throw new Error(`can't serialize object of unregistered class ${m.constructor.name}`);if(!Kl[p])throw new Error(`${p} is not registered.`);const{klass:_}=Kl[p],T=_.serialize?_.serialize(m,u):{};if(_.serialize){if(u&&T===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const I in m){if(!m.hasOwnProperty(I)||Kl[p].omit.indexOf(I)>=0)continue;const O=m[I];T[I]=Kl[p].shallow.indexOf(I)>=0?O:Vc(O,u)}m instanceof Error&&(T.message=m.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(T.$name=p),T}function oh(m){if(Df(m))return m;if(Array.isArray(m))return m.map(oh);if(typeof m!="object")throw new Error("can't deserialize object of type "+typeof m);const u=Xo(m)||"Object";if(!Kl[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:p}=Kl[u];if(!p)throw new Error(`can't deserialize unregistered class ${u}`);if(p.deserialize)return p.deserialize(m);const _=Object.create(p.prototype);for(const T of Object.keys(m)){if(T==="$name")continue;const I=m[T];_[T]=Kl[u].shallow.indexOf(T)>=0?I:oh(I)}return _}class Sd{constructor(){this.first=!0}update(u,p){const _=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=p),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=_,!0))}}const Jr={"Latin-1 Supplement":m=>m>=128&&m<=255,"Hangul Jamo":m=>m>=4352&&m<=4607,Khmer:m=>m>=6016&&m<=6143,"General Punctuation":m=>m>=8192&&m<=8303,"Letterlike Symbols":m=>m>=8448&&m<=8527,"Number Forms":m=>m>=8528&&m<=8591,"Miscellaneous Technical":m=>m>=8960&&m<=9215,"Control Pictures":m=>m>=9216&&m<=9279,"Optical Character Recognition":m=>m>=9280&&m<=9311,"Enclosed Alphanumerics":m=>m>=9312&&m<=9471,"Geometric Shapes":m=>m>=9632&&m<=9727,"Miscellaneous Symbols":m=>m>=9728&&m<=9983,"Miscellaneous Symbols and Arrows":m=>m>=11008&&m<=11263,"Ideographic Description Characters":m=>m>=12272&&m<=12287,"CJK Symbols and Punctuation":m=>m>=12288&&m<=12351,Hiragana:m=>m>=12352&&m<=12447,Katakana:m=>m>=12448&&m<=12543,Kanbun:m=>m>=12688&&m<=12703,"CJK Strokes":m=>m>=12736&&m<=12783,"Enclosed CJK Letters and Months":m=>m>=12800&&m<=13055,"CJK Compatibility":m=>m>=13056&&m<=13311,"Yijing Hexagram Symbols":m=>m>=19904&&m<=19967,"CJK Unified Ideographs":m=>m>=19968&&m<=40959,"Hangul Syllables":m=>m>=44032&&m<=55215,"Private Use Area":m=>m>=57344&&m<=63743,"Vertical Forms":m=>m>=65040&&m<=65055,"CJK Compatibility Forms":m=>m>=65072&&m<=65103,"Small Form Variants":m=>m>=65104&&m<=65135,"Halfwidth and Fullwidth Forms":m=>m>=65280&&m<=65519};function Ph(m){for(const u of m)if(Ke(u.charCodeAt(0)))return!0;return!1}function N(m){for(const u of m)if(!xe(u.charCodeAt(0)))return!1;return!0}function $(m){const u=m.map(p=>{try{return new RegExp(`\\p{sc=${p}}`,"u").source}catch{return null}}).filter(p=>p);return new RegExp(u.join("|"),"u")}const oe=$(["Arab","Dupl","Mong","Ougr","Syrc"]);function xe(m){return!oe.test(String.fromCodePoint(m))}const ze=$(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ke(m){return!(m!==746&&m!==747&&(m<4352||!(Jr["CJK Compatibility Forms"](m)&&!(m>=65097&&m<=65103)||Jr["CJK Compatibility"](m)||Jr["CJK Strokes"](m)||!(!Jr["CJK Symbols and Punctuation"](m)||m>=12296&&m<=12305||m>=12308&&m<=12319||m===12336)||Jr["Enclosed CJK Letters and Months"](m)||Jr["Ideographic Description Characters"](m)||Jr.Kanbun(m)||Jr.Katakana(m)&&m!==12540||!(!Jr["Halfwidth and Fullwidth Forms"](m)||m===65288||m===65289||m===65293||m>=65306&&m<=65310||m===65339||m===65341||m===65343||m>=65371&&m<=65503||m===65507||m>=65512&&m<=65519)||!(!Jr["Small Form Variants"](m)||m>=65112&&m<=65118||m>=65123&&m<=65126)||Jr["Vertical Forms"](m)||Jr["Yijing Hexagram Symbols"](m)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(m))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(m))||ze.test(String.fromCodePoint(m)))))}function Je(m){return!(Ke(m)||function(u){return!!(Jr["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||Jr["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||Jr["Letterlike Symbols"](u)||Jr["Number Forms"](u)||Jr["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||Jr["Control Pictures"](u)&&u!==9251||Jr["Optical Character Recognition"](u)||Jr["Enclosed Alphanumerics"](u)||Jr["Geometric Shapes"](u)||Jr["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||Jr["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||Jr["CJK Symbols and Punctuation"](u)||Jr.Katakana(u)||Jr["Private Use Area"](u)||Jr["CJK Compatibility Forms"](u)||Jr["Small Form Variants"](u)||Jr["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(m))}const rt=$(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function ot(m){return rt.test(String.fromCodePoint(m))}function yt(m,u){return!(!u&&ot(m)||m>=2304&&m<=3583||m>=3840&&m<=4255||Jr.Khmer(m))}function en(m){for(const u of m)if(ot(u.charCodeAt(0)))return!0;return!1}const bn=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(m){this.pluginStatus=m.pluginStatus,this.pluginURL=m.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(m){if(bn.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=m.applyArabicShaping,this.processBidirectionalText=m.processBidirectionalText,this.processStyledBidirectionalText=m.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(m,u){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(m.pluginStatus!=="loading")return this.setState(m),m;const p=m.pluginURL,_=new Promise(I=>{this.loadScriptResolve=I});u(p);const T=new Promise(I=>setTimeout(()=>I(),this.TIMEOUT));if(yield Promise.race([_,T]),this.isParsed()){const I={pluginStatus:"loaded",pluginURL:p};return this.setState(I),I}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${p}`)})}};class mn{constructor(u,p){this.zoom=u,p?(this.now=p.now,this.fadeDuration=p.fadeDuration,this.zoomHistory=p.zoomHistory,this.transition=p.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Sd,this.transition={})}isSupportedScript(u){return function(p,_){for(const T of p)if(!yt(T.charCodeAt(0),_))return!1;return!0}(u,bn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,p=u-Math.floor(u),_=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*p}}}class un{constructor(u,p){this.property=u,this.value=p,this.expression=function(_,T){if(qo(_))return new $s(_,T);if(sl(_)){const I=Ga(_,T);if(I.result==="error")throw new Error(I.value.map(O=>`${O.key}: ${O.message}`).join(", "));return I.value}{let I=_;return T.type==="color"&&typeof _=="string"?I=H.parse(_):T.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?T.type==="variableAnchorOffsetCollection"&&Array.isArray(_)?I=Wn.parse(_):T.type==="projectionDefinition"&&typeof _=="string"&&(I=vr.parse(_)):I=Ut.parse(_),{kind:"constant",evaluate:()=>I}}}(p===void 0?u.specification.default:p,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,p,_){return this.property.possiblyEvaluate(this,u,p,_)}}class Rn{constructor(u){this.property=u,this.value=new un(u,void 0)}transitioned(u,p){return new Vt(this.property,this.value,p,ye({},u.transition,this.transition),u.now)}untransitioned(){return new Vt(this.property,this.value,null,{},0)}}class Mn{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return tt(this._values[u].value.value)}setValue(u,p){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Rn(this._values[u].property)),this._values[u].value=new un(this._values[u].property,p===null?void 0:tt(p))}getTransition(u){return tt(this._values[u].transition)}setTransition(u,p){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Rn(this._values[u].property)),this._values[u].transition=tt(p)||void 0}serialize(){const u={};for(const p of Object.keys(this._values)){const _=this.getValue(p);_!==void 0&&(u[p]=_);const T=this.getTransition(p);T!==void 0&&(u[`${p}-transition`]=T)}return u}transitioned(u,p){const _=new on(this._properties);for(const T of Object.keys(this._values))_._values[T]=this._values[T].transitioned(u,p._values[T]);return _}untransitioned(){const u=new on(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].untransitioned();return u}}class Vt{constructor(u,p,_,T,I){this.property=u,this.value=p,this.begin=I+T.delay||0,this.end=this.begin+T.duration||0,u.specification.transition&&(T.delay||T.duration)&&(this.prior=_)}possiblyEvaluate(u,p,_){const T=u.now||0,I=this.value.possiblyEvaluate(u,p,_),O=this.prior;if(O){if(T>this.end)return this.prior=null,I;if(this.value.isDataDriven())return this.prior=null,I;if(T<this.begin)return O.possiblyEvaluate(u,p,_);{const U=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(O.possiblyEvaluate(u,p,_),I,me(U))}}return I}}class on{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,p,_){const T=new Qn(this._properties);for(const I of Object.keys(this._values))T._values[I]=this._values[I].possiblyEvaluate(u,p,_);return T}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class Yn{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return tt(this._values[u].value)}setValue(u,p){this._values[u]=new un(this._values[u].property,p===null?void 0:tt(p))}serialize(){const u={};for(const p of Object.keys(this._values)){const _=this.getValue(p);_!==void 0&&(u[p]=_)}return u}possiblyEvaluate(u,p,_){const T=new Qn(this._properties);for(const I of Object.keys(this._values))T._values[I]=this._values[I].possiblyEvaluate(u,p,_);return T}}class Xn{constructor(u,p,_){this.property=u,this.value=p,this.parameters=_}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,p,_,T){return this.property.evaluate(this.value,this.parameters,u,p,_,T)}}class Qn{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class jn{constructor(u){this.specification=u}possiblyEvaluate(u,p){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(p)}interpolate(u,p,_){const T=Do[this.specification.type];return T?T(u,p,_):u}}class Bn{constructor(u,p){this.specification=u,this.overrides=p}possiblyEvaluate(u,p,_,T){return new Xn(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(p,null,{},_,T)}:u.expression,p)}interpolate(u,p,_){if(u.value.kind!=="constant"||p.value.kind!=="constant")return u;if(u.value.value===void 0||p.value.value===void 0)return new Xn(this,{kind:"constant",value:void 0},u.parameters);const T=Do[this.specification.type];if(T){const I=T(u.value.value,p.value.value,_);return new Xn(this,{kind:"constant",value:I},u.parameters)}return u}evaluate(u,p,_,T,I,O){return u.kind==="constant"?u.value:u.evaluate(p,_,T,I,O)}}class ri extends Bn{possiblyEvaluate(u,p,_,T){if(u.value===void 0)return new Xn(this,{kind:"constant",value:void 0},p);if(u.expression.kind==="constant"){const I=u.expression.evaluate(p,null,{},_,T),O=u.property.specification.type==="resolvedImage"&&typeof I!="string"?I.name:I,U=this._calculate(O,O,O,p);return new Xn(this,{kind:"constant",value:U},p)}if(u.expression.kind==="camera"){const I=this._calculate(u.expression.evaluate({zoom:p.zoom-1}),u.expression.evaluate({zoom:p.zoom}),u.expression.evaluate({zoom:p.zoom+1}),p);return new Xn(this,{kind:"constant",value:I},p)}return new Xn(this,u.expression,p)}evaluate(u,p,_,T,I,O){if(u.kind==="source"){const U=u.evaluate(p,_,T,I,O);return this._calculate(U,U,U,p)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(p.zoom)-1},_,T),u.evaluate({zoom:Math.floor(p.zoom)},_,T),u.evaluate({zoom:Math.floor(p.zoom)+1},_,T),p):u.value}_calculate(u,p,_,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:u,to:p}:{from:_,to:p}}interpolate(u){return u}}class br{constructor(u){this.specification=u}possiblyEvaluate(u,p,_,T){if(u.value!==void 0){if(u.expression.kind==="constant"){const I=u.expression.evaluate(p,null,{},_,T);return this._calculate(I,I,I,p)}return this._calculate(u.expression.evaluate(new mn(Math.floor(p.zoom-1),p)),u.expression.evaluate(new mn(Math.floor(p.zoom),p)),u.expression.evaluate(new mn(Math.floor(p.zoom+1),p)),p)}}_calculate(u,p,_,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:u,to:p}:{from:_,to:p}}interpolate(u){return u}}class ua{constructor(u){this.specification=u}possiblyEvaluate(u,p,_,T){return!!u.expression.evaluate(p,null,{},_,T)}interpolate(){return!1}}class Li{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const p in u){const _=u[p];_.specification.overridable&&this.overridableProperties.push(p);const T=this.defaultPropertyValues[p]=new un(_,void 0),I=this.defaultTransitionablePropertyValues[p]=new Rn(_);this.defaultTransitioningPropertyValues[p]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=T.possiblyEvaluate({})}}}Mr("DataDrivenProperty",Bn),Mr("DataConstantProperty",jn),Mr("CrossFadedDataDrivenProperty",ri),Mr("CrossFadedProperty",br),Mr("ColorRampProperty",ua);const ca="-transition";class Ai extends mt{constructor(u,p){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),p.layout&&(this._unevaluatedLayout=new Yn(p.layout)),p.paint)){this._transitionablePaint=new Mn(p.paint);for(const _ in u.paint)this.setPaintProperty(_,u.paint[_],{validate:!1});for(const _ in u.layout)this.setLayoutProperty(_,u.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qn(p.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,p,_={}){p!=null&&this._validate(ku,`layers.${this.id}.layout.${u}`,u,p,_)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,p):this.visibility=p)}getPaintProperty(u){return u.endsWith(ca)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,p,_={}){if(p!=null&&this._validate(Ch,`layers.${this.id}.paint.${u}`,u,p,_))return!1;if(u.endsWith(ca))return this._transitionablePaint.setTransition(u.slice(0,-11),p||void 0),!1;{const T=this._transitionablePaint._values[u],I=T.property.specification["property-type"]==="cross-faded-data-driven",O=T.value.isDataDriven(),U=T.value;this._transitionablePaint.setValue(u,p),this._handleSpecialPaintPropertyUpdate(u);const J=this._transitionablePaint._values[u].value;return J.isDataDriven()||O||I||this._handleOverridablePaintPropertyUpdate(u,U,J)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,p,_){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,p){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,p)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,p)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Ve(u,(p,_)=>!(p===void 0||_==="layout"&&!Object.keys(p).length||_==="paint"&&!Object.keys(p).length))}_validate(u,p,_,T,I={}){return(!I||I.validate!==!1)&&Yl(this,u.call(Nu,{key:p,layerType:this.type,objectKey:_,value:T,styleSpec:ge,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const p=this.paint.get(u);if(p instanceof Xn&&mu(p.property.specification)&&(p.value.kind==="source"||p.value.kind==="composite")&&p.value.isStateDependent)return!0}return!1}}const eo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Yi{constructor(u,p){this._structArray=u,this._pos1=p*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class jr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,p){return u._trim(),p&&(u.isTransferred=!0,p.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const p=Object.create(this.prototype);return p.arrayBuffer=u.arrayBuffer,p.length=u.length,p.capacity=u.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ui(m,u=1){let p=0,_=0;return{members:m.map(T=>{const I=eo[T.type].BYTES_PER_ELEMENT,O=p=Xa(p,Math.max(u,I)),U=T.components||1;return _=Math.max(_,I),p+=I*U,{name:T.name,type:T.type,components:U,offset:O}}),size:Xa(p,Math.max(_,u)),alignment:u}}function Xa(m,u){return Math.ceil(m/u)*u}class Ii extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p){const _=this.length;return this.resize(_+1),this.emplace(_,u,p)}emplace(u,p,_){const T=2*u;return this.int16[T+0]=p,this.int16[T+1]=_,u}}Ii.prototype.bytesPerElement=4,Mr("StructArrayLayout2i4",Ii);class us extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,_){const T=this.length;return this.resize(T+1),this.emplace(T,u,p,_)}emplace(u,p,_,T){const I=3*u;return this.int16[I+0]=p,this.int16[I+1]=_,this.int16[I+2]=T,u}}us.prototype.bytesPerElement=6,Mr("StructArrayLayout3i6",us);class ha extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,_,T){const I=this.length;return this.resize(I+1),this.emplace(I,u,p,_,T)}emplace(u,p,_,T,I){const O=4*u;return this.int16[O+0]=p,this.int16[O+1]=_,this.int16[O+2]=T,this.int16[O+3]=I,u}}ha.prototype.bytesPerElement=8,Mr("StructArrayLayout4i8",ha);class xo extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,_,T,I,O){const U=this.length;return this.resize(U+1),this.emplace(U,u,p,_,T,I,O)}emplace(u,p,_,T,I,O,U){const J=6*u;return this.int16[J+0]=p,this.int16[J+1]=_,this.int16[J+2]=T,this.int16[J+3]=I,this.int16[J+4]=O,this.int16[J+5]=U,u}}xo.prototype.bytesPerElement=12,Mr("StructArrayLayout2i4i12",xo);class Ls extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,_,T,I,O){const U=this.length;return this.resize(U+1),this.emplace(U,u,p,_,T,I,O)}emplace(u,p,_,T,I,O,U){const J=4*u,ne=8*u;return this.int16[J+0]=p,this.int16[J+1]=_,this.uint8[ne+4]=T,this.uint8[ne+5]=I,this.uint8[ne+6]=O,this.uint8[ne+7]=U,u}}Ls.prototype.bytesPerElement=8,Mr("StructArrayLayout2i4ub8",Ls);class Aa extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p){const _=this.length;return this.resize(_+1),this.emplace(_,u,p)}emplace(u,p,_){const T=2*u;return this.float32[T+0]=p,this.float32[T+1]=_,u}}Aa.prototype.bytesPerElement=8,Mr("StructArrayLayout2f8",Aa);class Eo extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,_,T,I,O,U,J,ne,ce){const _e=this.length;return this.resize(_e+1),this.emplace(_e,u,p,_,T,I,O,U,J,ne,ce)}emplace(u,p,_,T,I,O,U,J,ne,ce,_e){const Re=10*u;return this.uint16[Re+0]=p,this.uint16[Re+1]=_,this.uint16[Re+2]=T,this.uint16[Re+3]=I,this.uint16[Re+4]=O,this.uint16[Re+5]=U,this.uint16[Re+6]=J,this.uint16[Re+7]=ne,this.uint16[Re+8]=ce,this.uint16[Re+9]=_e,u}}Eo.prototype.bytesPerElement=20,Mr("StructArrayLayout10ui20",Eo);class Zo extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,_,T,I,O,U,J,ne,ce,_e,Re){const Le=this.length;return this.resize(Le+1),this.emplace(Le,u,p,_,T,I,O,U,J,ne,ce,_e,Re)}emplace(u,p,_,T,I,O,U,J,ne,ce,_e,Re,Le){const Fe=12*u;return this.int16[Fe+0]=p,this.int16[Fe+1]=_,this.int16[Fe+2]=T,this.int16[Fe+3]=I,this.uint16[Fe+4]=O,this.uint16[Fe+5]=U,this.uint16[Fe+6]=J,this.uint16[Fe+7]=ne,this.int16[Fe+8]=ce,this.int16[Fe+9]=_e,this.int16[Fe+10]=Re,this.int16[Fe+11]=Le,u}}Zo.prototype.bytesPerElement=24,Mr("StructArrayLayout4i4ui4i24",Zo);class ul extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,_){const T=this.length;return this.resize(T+1),this.emplace(T,u,p,_)}emplace(u,p,_,T){const I=3*u;return this.float32[I+0]=p,this.float32[I+1]=_,this.float32[I+2]=T,u}}ul.prototype.bytesPerElement=12,Mr("StructArrayLayout3f12",ul);class cl extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const p=this.length;return this.resize(p+1),this.emplace(p,u)}emplace(u,p){return this.uint32[1*u+0]=p,u}}cl.prototype.bytesPerElement=4,Mr("StructArrayLayout1ul4",cl);class co extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,_,T,I,O,U,J,ne){const ce=this.length;return this.resize(ce+1),this.emplace(ce,u,p,_,T,I,O,U,J,ne)}emplace(u,p,_,T,I,O,U,J,ne,ce){const _e=10*u,Re=5*u;return this.int16[_e+0]=p,this.int16[_e+1]=_,this.int16[_e+2]=T,this.int16[_e+3]=I,this.int16[_e+4]=O,this.int16[_e+5]=U,this.uint32[Re+3]=J,this.uint16[_e+8]=ne,this.uint16[_e+9]=ce,u}}co.prototype.bytesPerElement=20,Mr("StructArrayLayout6i1ul2ui20",co);class Bu extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,_,T,I,O){const U=this.length;return this.resize(U+1),this.emplace(U,u,p,_,T,I,O)}emplace(u,p,_,T,I,O,U){const J=6*u;return this.int16[J+0]=p,this.int16[J+1]=_,this.int16[J+2]=T,this.int16[J+3]=I,this.int16[J+4]=O,this.int16[J+5]=U,u}}Bu.prototype.bytesPerElement=12,Mr("StructArrayLayout2i2i2i12",Bu);class ec extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,_,T,I){const O=this.length;return this.resize(O+1),this.emplace(O,u,p,_,T,I)}emplace(u,p,_,T,I,O){const U=4*u,J=8*u;return this.float32[U+0]=p,this.float32[U+1]=_,this.float32[U+2]=T,this.int16[J+6]=I,this.int16[J+7]=O,u}}ec.prototype.bytesPerElement=16,Mr("StructArrayLayout2f1f2i16",ec);class _u extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,p,_,T,I,O){const U=this.length;return this.resize(U+1),this.emplace(U,u,p,_,T,I,O)}emplace(u,p,_,T,I,O,U){const J=16*u,ne=4*u,ce=8*u;return this.uint8[J+0]=p,this.uint8[J+1]=_,this.float32[ne+1]=T,this.float32[ne+2]=I,this.int16[ce+6]=O,this.int16[ce+7]=U,u}}_u.prototype.bytesPerElement=16,Mr("StructArrayLayout2ub2f2i16",_u);class zu extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,_){const T=this.length;return this.resize(T+1),this.emplace(T,u,p,_)}emplace(u,p,_,T){const I=3*u;return this.uint16[I+0]=p,this.uint16[I+1]=_,this.uint16[I+2]=T,u}}zu.prototype.bytesPerElement=6,Mr("StructArrayLayout3ui6",zu);class ro extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,_,T,I,O,U,J,ne,ce,_e,Re,Le,Fe,Ye,ct,wt){const Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,u,p,_,T,I,O,U,J,ne,ce,_e,Re,Le,Fe,Ye,ct,wt)}emplace(u,p,_,T,I,O,U,J,ne,ce,_e,Re,Le,Fe,Ye,ct,wt,Xt){const Rt=24*u,Ie=12*u,at=48*u;return this.int16[Rt+0]=p,this.int16[Rt+1]=_,this.uint16[Rt+2]=T,this.uint16[Rt+3]=I,this.uint32[Ie+2]=O,this.uint32[Ie+3]=U,this.uint32[Ie+4]=J,this.uint16[Rt+10]=ne,this.uint16[Rt+11]=ce,this.uint16[Rt+12]=_e,this.float32[Ie+7]=Re,this.float32[Ie+8]=Le,this.uint8[at+36]=Fe,this.uint8[at+37]=Ye,this.uint8[at+38]=ct,this.uint32[Ie+10]=wt,this.int16[Rt+22]=Xt,u}}ro.prototype.bytesPerElement=48,Mr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ro);class Rh extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,_,T,I,O,U,J,ne,ce,_e,Re,Le,Fe,Ye,ct,wt,Xt,Rt,Ie,at,It,An,nr,Dn,Fn,ur,ar){const pr=this.length;return this.resize(pr+1),this.emplace(pr,u,p,_,T,I,O,U,J,ne,ce,_e,Re,Le,Fe,Ye,ct,wt,Xt,Rt,Ie,at,It,An,nr,Dn,Fn,ur,ar)}emplace(u,p,_,T,I,O,U,J,ne,ce,_e,Re,Le,Fe,Ye,ct,wt,Xt,Rt,Ie,at,It,An,nr,Dn,Fn,ur,ar,pr){const Vn=32*u,kr=16*u;return this.int16[Vn+0]=p,this.int16[Vn+1]=_,this.int16[Vn+2]=T,this.int16[Vn+3]=I,this.int16[Vn+4]=O,this.int16[Vn+5]=U,this.int16[Vn+6]=J,this.int16[Vn+7]=ne,this.uint16[Vn+8]=ce,this.uint16[Vn+9]=_e,this.uint16[Vn+10]=Re,this.uint16[Vn+11]=Le,this.uint16[Vn+12]=Fe,this.uint16[Vn+13]=Ye,this.uint16[Vn+14]=ct,this.uint16[Vn+15]=wt,this.uint16[Vn+16]=Xt,this.uint16[Vn+17]=Rt,this.uint16[Vn+18]=Ie,this.uint16[Vn+19]=at,this.uint16[Vn+20]=It,this.uint16[Vn+21]=An,this.uint16[Vn+22]=nr,this.uint32[kr+12]=Dn,this.float32[kr+13]=Fn,this.float32[kr+14]=ur,this.uint16[Vn+30]=ar,this.uint16[Vn+31]=pr,u}}Rh.prototype.bytesPerElement=64,Mr("StructArrayLayout8i15ui1ul2f2ui64",Rh);class Lf extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const p=this.length;return this.resize(p+1),this.emplace(p,u)}emplace(u,p){return this.float32[1*u+0]=p,u}}Lf.prototype.bytesPerElement=4,Mr("StructArrayLayout1f4",Lf);class R extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,_){const T=this.length;return this.resize(T+1),this.emplace(T,u,p,_)}emplace(u,p,_,T){const I=3*u;return this.uint16[6*u+0]=p,this.float32[I+1]=_,this.float32[I+2]=T,u}}R.prototype.bytesPerElement=12,Mr("StructArrayLayout1ui2f12",R);class s extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p,_){const T=this.length;return this.resize(T+1),this.emplace(T,u,p,_)}emplace(u,p,_,T){const I=4*u;return this.uint32[2*u+0]=p,this.uint16[I+2]=_,this.uint16[I+3]=T,u}}s.prototype.bytesPerElement=8,Mr("StructArrayLayout1ul2ui8",s);class d extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,p){const _=this.length;return this.resize(_+1),this.emplace(_,u,p)}emplace(u,p,_){const T=2*u;return this.uint16[T+0]=p,this.uint16[T+1]=_,u}}d.prototype.bytesPerElement=4,Mr("StructArrayLayout2ui4",d);class x extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const p=this.length;return this.resize(p+1),this.emplace(p,u)}emplace(u,p){return this.uint16[1*u+0]=p,u}}x.prototype.bytesPerElement=2,Mr("StructArrayLayout1ui2",x);class E extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,p,_,T){const I=this.length;return this.resize(I+1),this.emplace(I,u,p,_,T)}emplace(u,p,_,T,I){const O=4*u;return this.float32[O+0]=p,this.float32[O+1]=_,this.float32[O+2]=T,this.float32[O+3]=I,u}}E.prototype.bytesPerElement=16,Mr("StructArrayLayout4f16",E);class L extends Yi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}L.prototype.size=20;class F extends co{get(u){return new L(this,u)}}Mr("CollisionBoxArray",F);class X extends Yi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}X.prototype.size=48;class Q extends ro{get(u){return new X(this,u)}}Mr("PlacedSymbolArray",Q);class ae extends Yi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ae.prototype.size=64;class be extends Rh{get(u){return new ae(this,u)}}Mr("SymbolInstanceArray",be);class Ae extends Lf{getoffsetX(u){return this.float32[1*u+0]}}Mr("GlyphOffsetArray",Ae);class Pe extends us{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}Mr("SymbolLineVertexArray",Pe);class qe extends Yi{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}qe.prototype.size=12;class Ze extends R{get(u){return new qe(this,u)}}Mr("TextAnchorOffsetArray",Ze);class dt extends Yi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}dt.prototype.size=8;class ft extends s{get(u){return new dt(this,u)}}Mr("FeatureIndexArray",ft);class pt extends Ii{}class Tt extends Ii{}class Nt extends Ii{}class kt extends xo{}class Bt extends Ls{}class Wt extends Aa{}class Gt extends Eo{}class xn extends Zo{}class En extends ul{}class zn extends cl{}class Un extends Bu{}class kn extends _u{}class wr extends zu{}class dr extends d{}const Kn=Ui([{name:"a_pos",components:2,type:"Int16"}],4),{members:Nr}=Kn;class Fr{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,p,_,T){const I=this.segments[this.segments.length-1];return u>Fr.MAX_VERTEX_ARRAY_LENGTH&&it(`Max vertices per segment is ${Fr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Fr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!I||I.vertexLength+u>Fr.MAX_VERTEX_ARRAY_LENGTH||I.sortKey!==T?this.createNewSegment(p,_,T):I}createNewSegment(u,p,_){const T={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0,vaos:{}};return _!==void 0&&(T.sortKey=_),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(T),T}getOrCreateLatestSegment(u,p,_){return this.prepareSegment(0,u,p,_)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const p in u.vaos)u.vaos[p].destroy()}static simpleSegment(u,p,_,T){return new Fr([{vertexOffset:u,primitiveOffset:p,vertexLength:_,primitiveLength:T,vaos:{},sortKey:0}])}}function fa(m,u){return 256*(m=ve(Math.floor(m),0,255))+ve(Math.floor(u),0,255)}Fr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Mr("SegmentVector",Fr);const Za=Ui([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var za,Ua,Ea,oa={exports:{}},Ia={exports:{}},ps={exports:{}},Ya=function(){if(Ea)return oa.exports;Ea=1;var m=(za||(za=1,Ia.exports=function(p,_){var T,I,O,U,J,ne,ce,_e;for(I=p.length-(T=3&p.length),O=_,J=3432918353,ne=461845907,_e=0;_e<I;)ce=255&p.charCodeAt(_e)|(255&p.charCodeAt(++_e))<<8|(255&p.charCodeAt(++_e))<<16|(255&p.charCodeAt(++_e))<<24,++_e,O=27492+(65535&(U=5*(65535&(O=(O^=ce=(65535&(ce=(ce=(65535&ce)*J+(((ce>>>16)*J&65535)<<16)&4294967295)<<15|ce>>>17))*ne+(((ce>>>16)*ne&65535)<<16)&4294967295)<<13|O>>>19))+((5*(O>>>16)&65535)<<16)&4294967295))+((58964+(U>>>16)&65535)<<16);switch(ce=0,T){case 3:ce^=(255&p.charCodeAt(_e+2))<<16;case 2:ce^=(255&p.charCodeAt(_e+1))<<8;case 1:O^=ce=(65535&(ce=(ce=(65535&(ce^=255&p.charCodeAt(_e)))*J+(((ce>>>16)*J&65535)<<16)&4294967295)<<15|ce>>>17))*ne+(((ce>>>16)*ne&65535)<<16)&4294967295}return O^=p.length,O=2246822507*(65535&(O^=O>>>16))+((2246822507*(O>>>16)&65535)<<16)&4294967295,O=3266489909*(65535&(O^=O>>>13))+((3266489909*(O>>>16)&65535)<<16)&4294967295,(O^=O>>>16)>>>0}),Ia.exports),u=(Ua||(Ua=1,ps.exports=function(p,_){for(var T,I=p.length,O=_^I,U=0;I>=4;)T=1540483477*(65535&(T=255&p.charCodeAt(U)|(255&p.charCodeAt(++U))<<8|(255&p.charCodeAt(++U))<<16|(255&p.charCodeAt(++U))<<24))+((1540483477*(T>>>16)&65535)<<16),O=1540483477*(65535&O)+((1540483477*(O>>>16)&65535)<<16)^(T=1540483477*(65535&(T^=T>>>24))+((1540483477*(T>>>16)&65535)<<16)),I-=4,++U;switch(I){case 3:O^=(255&p.charCodeAt(U+2))<<16;case 2:O^=(255&p.charCodeAt(U+1))<<8;case 1:O=1540483477*(65535&(O^=255&p.charCodeAt(U)))+((1540483477*(O>>>16)&65535)<<16)}return O=1540483477*(65535&(O^=O>>>13))+((1540483477*(O>>>16)&65535)<<16),(O^=O>>>15)>>>0}),ps.exports);return oa.exports=m,oa.exports.murmur3=m,oa.exports.murmur2=u,oa.exports}(),ho=h(Ya);class Ka{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,p,_,T){this.ids.push(hl(u)),this.positions.push(p,_,T)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const p=hl(u);let _=0,T=this.ids.length-1;for(;_<T;){const O=_+T>>1;this.ids[O]>=p?T=O:_=O+1}const I=[];for(;this.ids[_]===p;)I.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return I}static serialize(u,p){const _=new Float64Array(u.ids),T=new Uint32Array(u.positions);return Ql(_,T,0,_.length-1),p&&p.push(_.buffer,T.buffer),{ids:_,positions:T}}static deserialize(u){const p=new Ka;return p.ids=u.ids,p.positions=u.positions,p.indexed=!0,p}}function hl(m){const u=+m;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:ho(String(m))}function Ql(m,u,p,_){for(;p<_;){const T=m[p+_>>1];let I=p-1,O=_+1;for(;;){do I++;while(m[I]<T);do O--;while(m[O]>T);if(I>=O)break;cs(m,I,O),cs(u,3*I,3*O),cs(u,3*I+1,3*O+1),cs(u,3*I+2,3*O+2)}O-p<_-O?(Ql(m,u,p,O),p=O+1):(Ql(m,u,O+1,_),_=O)}}function cs(m,u,p){const _=m[u];m[u]=m[p],m[p]=_}Mr("FeaturePositionMap",Ka);class hs{constructor(u,p){this.gl=u.gl,this.location=p}}class Il extends hs{constructor(u,p){super(u,p),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class eu extends hs{constructor(u,p){super(u,p),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class Uu extends hs{constructor(u,p){super(u,p),this.current=H.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const tu=new Float32Array(16);function tc(m){return[fa(255*m.r,255*m.g),fa(255*m.b,255*m.a)]}class nu{constructor(u,p,_){this.value=u,this.uniformNames=p.map(T=>`u_${T}`),this.type=_}setUniform(u,p,_){u.set(_.constantOr(this.value))}getBinding(u,p,_){return this.type==="color"?new Uu(u,p):new Il(u,p)}}class Ol{constructor(u,p){this.uniformNames=p.map(_=>`u_${_}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=u.tlbr}setUniform(u,p,_,T){const I=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;I&&u.set(I)}getBinding(u,p,_){return _.substr(0,9)==="u_pattern"?new eu(u,p):new Il(u,p)}}class io{constructor(u,p,_,T){this.expression=u,this.type=_,this.maxValue=0,this.paintVertexAttributes=p.map(I=>({name:`a_${I}`,type:"Float32",components:_==="color"?2:1,offset:0})),this.paintVertexArray=new T}populatePaintArray(u,p,_,T,I){const O=this.paintVertexArray.length,U=this.expression.evaluate(new mn(0),p,{},T,[],I);this.paintVertexArray.resize(u),this._setPaintValue(O,u,U)}updatePaintArray(u,p,_,T){const I=this.expression.evaluate({zoom:0},_,T);this._setPaintValue(u,p,I)}_setPaintValue(u,p,_){if(this.type==="color"){const T=tc(_);for(let I=u;I<p;I++)this.paintVertexArray.emplace(I,T[0],T[1])}else{for(let T=u;T<p;T++)this.paintVertexArray.emplace(T,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ja{constructor(u,p,_,T,I,O){this.expression=u,this.uniformNames=p.map(U=>`u_${U}_t`),this.type=_,this.useIntegerZoom=T,this.zoom=I,this.maxValue=0,this.paintVertexAttributes=p.map(U=>({name:`a_${U}`,type:"Float32",components:_==="color"?4:2,offset:0})),this.paintVertexArray=new O}populatePaintArray(u,p,_,T,I){const O=this.expression.evaluate(new mn(this.zoom),p,{},T,[],I),U=this.expression.evaluate(new mn(this.zoom+1),p,{},T,[],I),J=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(J,u,O,U)}updatePaintArray(u,p,_,T){const I=this.expression.evaluate({zoom:this.zoom},_,T),O=this.expression.evaluate({zoom:this.zoom+1},_,T);this._setPaintValue(u,p,I,O)}_setPaintValue(u,p,_,T){if(this.type==="color"){const I=tc(_),O=tc(T);for(let U=u;U<p;U++)this.paintVertexArray.emplace(U,I[0],I[1],O[0],O[1])}else{for(let I=u;I<p;I++)this.paintVertexArray.emplace(I,_,T);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(T))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,p){const _=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,T=ve(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);u.set(T)}getBinding(u,p,_){return new Il(u,p)}}class Is{constructor(u,p,_,T,I,O){this.expression=u,this.type=p,this.useIntegerZoom=_,this.zoom=T,this.layerId=O,this.zoomInPaintVertexArray=new I,this.zoomOutPaintVertexArray=new I}populatePaintArray(u,p,_){const T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(T,u,p.patterns&&p.patterns[this.layerId],_)}updatePaintArray(u,p,_,T,I){this._setPaintValues(u,p,_.patterns&&_.patterns[this.layerId],I)}_setPaintValues(u,p,_,T){if(!T||!_)return;const{min:I,mid:O,max:U}=_,J=T[I],ne=T[O],ce=T[U];if(J&&ne&&ce)for(let _e=u;_e<p;_e++)this.zoomInPaintVertexArray.emplace(_e,ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],J.tl[0],J.tl[1],J.br[0],J.br[1],ne.pixelRatio,J.pixelRatio),this.zoomOutPaintVertexArray.emplace(_e,ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],ce.tl[0],ce.tl[1],ce.br[0],ce.br[1],ne.pixelRatio,ce.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Za.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Za.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Os{constructor(u,p,_){this.binders={},this._buffers=[];const T=[];for(const I in u.paint._values){if(!_(I))continue;const O=u.paint.get(I);if(!(O instanceof Xn&&mu(O.property.specification)))continue;const U=Q0(I,u.type),J=O.value,ne=O.property.specification.type,ce=O.property.useIntegerZoom,_e=O.property.specification["property-type"],Re=_e==="cross-faded"||_e==="cross-faded-data-driven";if(J.kind==="constant")this.binders[I]=Re?new Ol(J.value,U):new nu(J.value,U,ne),T.push(`/u_${I}`);else if(J.kind==="source"||Re){const Le=Zs(I,ne,"source");this.binders[I]=Re?new Is(J,ne,ce,p,Le,u.id):new io(J,U,ne,Le),T.push(`/a_${I}`)}else{const Le=Zs(I,ne,"composite");this.binders[I]=new Ja(J,U,ne,ce,p,Le),T.push(`/z_${I}`)}}this.cacheKey=T.sort().join("")}getMaxValue(u){const p=this.binders[u];return p instanceof io||p instanceof Ja?p.maxValue:0}populatePaintArrays(u,p,_,T,I){for(const O in this.binders){const U=this.binders[O];(U instanceof io||U instanceof Ja||U instanceof Is)&&U.populatePaintArray(u,p,_,T,I)}}setConstantPatternPositions(u,p){for(const _ in this.binders){const T=this.binders[_];T instanceof Ol&&T.setConstantPatternPositions(u,p)}}updatePaintArrays(u,p,_,T,I){let O=!1;for(const U in u){const J=p.getPositions(U);for(const ne of J){const ce=_.feature(ne.index);for(const _e in this.binders){const Re=this.binders[_e];if((Re instanceof io||Re instanceof Ja||Re instanceof Is)&&Re.expression.isStateDependent===!0){const Le=T.paint.get(_e);Re.expression=Le.value,Re.updatePaintArray(ne.start,ne.end,ce,u[U],I),O=!0}}}}return O}defines(){const u=[];for(const p in this.binders){const _=this.binders[p];(_ instanceof nu||_ instanceof Ol)&&u.push(..._.uniformNames.map(T=>`#define HAS_UNIFORM_${T}`))}return u}getBinderAttributes(){const u=[];for(const p in this.binders){const _=this.binders[p];if(_ instanceof io||_ instanceof Ja)for(let T=0;T<_.paintVertexAttributes.length;T++)u.push(_.paintVertexAttributes[T].name);else if(_ instanceof Is)for(let T=0;T<Za.members.length;T++)u.push(Za.members[T].name)}return u}getBinderUniforms(){const u=[];for(const p in this.binders){const _=this.binders[p];if(_ instanceof nu||_ instanceof Ol||_ instanceof Ja)for(const T of _.uniformNames)u.push(T)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,p){const _=[];for(const T in this.binders){const I=this.binders[T];if(I instanceof nu||I instanceof Ol||I instanceof Ja){for(const O of I.uniformNames)if(p[O]){const U=I.getBinding(u,p[O],O);_.push({name:O,property:T,binding:U})}}}return _}setUniforms(u,p,_,T){for(const{name:I,property:O,binding:U}of p)this.binders[O].setUniform(U,T,_.get(O),I)}updatePaintBuffers(u){this._buffers=[];for(const p in this.binders){const _=this.binders[p];if(u&&_ instanceof Is){const T=u.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(_ instanceof io||_ instanceof Ja)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}}upload(u){for(const p in this.binders){const _=this.binders[p];(_ instanceof io||_ instanceof Ja||_ instanceof Is)&&_.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const p=this.binders[u];(p instanceof io||p instanceof Ja||p instanceof Is)&&p.destroy()}}}class If{constructor(u,p,_=()=>!0){this.programConfigurations={};for(const T of u)this.programConfigurations[T.id]=new Os(T,p,_);this.needsUpload=!1,this._featureMap=new Ka,this._bufferOffset=0}populatePaintArrays(u,p,_,T,I,O){for(const U in this.programConfigurations)this.programConfigurations[U].populatePaintArrays(u,p,T,I,O);p.id!==void 0&&this._featureMap.add(p.id,_,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,p,_,T){for(const I of _)this.needsUpload=this.programConfigurations[I.id].updatePaintArrays(u,this._featureMap,p,I,T)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const p in this.programConfigurations)this.programConfigurations[p].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function Q0(m,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[m]||[m.replace(`${u}-`,"").replace(/-/g,"_")]}function Zs(m,u,p){const _={color:{source:Aa,composite:E},number:{source:Lf,composite:Aa}},T=function(I){return{"line-pattern":{source:Gt,composite:Gt},"fill-pattern":{source:Gt,composite:Gt},"fill-extrusion-pattern":{source:Gt,composite:Gt}}[I]}(m);return T&&T[p]||_[u][p]}Mr("ConstantBinder",nu),Mr("CrossFadedConstantBinder",Ol),Mr("SourceExpressionBinder",io),Mr("CrossFadedCompositeBinder",Is),Mr("CompositeExpressionBinder",Ja),Mr("ProgramConfiguration",Os,{omit:["_buffers"]}),Mr("ProgramConfigurationSet",If);const Ys=Math.pow(2,14)-1,_g=-Ys-1;function ef(m){const u=ue/m.extent,p=m.loadGeometry();for(let _=0;_<p.length;_++){const T=p[_];for(let I=0;I<T.length;I++){const O=T[I],U=Math.round(O.x*u),J=Math.round(O.y*u);O.x=ve(U,_g,Ys),O.y=ve(J,_g,Ys),(U<O.x||U>O.x+1||J<O.y||J>O.y+1)&&it("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return p}function ju(m,u){return{type:m.type,id:m.id,properties:m.properties,geometry:u?ef(m):[]}}const hm=-32768;function bg(m,u,p,_,T){m.emplaceBack(hm+8*u+_,hm+8*p+T)}class tf{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Tt,this.indexArray=new wr,this.segments=new Fr,this.programConfigurations=new If(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,_){const T=this.layers[0],I=[];let O=null,U=!1,J=T.type==="heatmap";if(T.type==="circle"){const ce=T;O=ce.layout.get("circle-sort-key"),U=!O.isConstant(),J=J||ce.paint.get("circle-pitch-alignment")==="map"}const ne=J?p.subdivisionGranularity.circle:1;for(const{feature:ce,id:_e,index:Re,sourceLayerIndex:Le}of u){const Fe=this.layers[0]._featureFilter.needGeometry,Ye=ju(ce,Fe);if(!this.layers[0]._featureFilter.filter(new mn(this.zoom),Ye,_))continue;const ct=U?O.evaluate(Ye,{},_):void 0,wt={id:_e,properties:ce.properties,type:ce.type,sourceLayerIndex:Le,index:Re,geometry:Fe?Ye.geometry:ef(ce),patterns:{},sortKey:ct};I.push(wt)}U&&I.sort((ce,_e)=>ce.sortKey-_e.sortKey);for(const ce of I){const{geometry:_e,index:Re,sourceLayerIndex:Le}=ce,Fe=u[Re].feature;this.addFeature(ce,_e,Re,_,ne),p.featureIndex.insert(Fe,_e,Re,Le,this.index)}}update(u,p,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Nr),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,p,_,T,I=1){let O;switch(I){case 1:O=[0,7];break;case 3:O=[0,2,5,7];break;case 5:O=[0,1,3,4,6,7];break;case 7:O=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${I}; valid values are 1, 3, 5, 7.`)}const U=O.length;for(const J of p)for(const ne of J){const ce=ne.x,_e=ne.y;if(ce<0||ce>=ue||_e<0||_e>=ue)continue;const Re=this.segments.prepareSegment(U*U,this.layoutVertexArray,this.indexArray,u.sortKey),Le=Re.vertexLength;for(let Fe=0;Fe<U;Fe++)for(let Ye=0;Ye<U;Ye++)bg(this.layoutVertexArray,ce,_e,O[Ye],O[Fe]);for(let Fe=0;Fe<U-1;Fe++)for(let Ye=0;Ye<U-1;Ye++){const ct=Le+Fe*U+Ye,wt=Le+(Fe+1)*U+Ye;this.indexArray.emplaceBack(ct,wt+1,ct+1),this.indexArray.emplaceBack(ct,wt,wt+1)}Re.vertexLength+=U*U,Re.primitiveLength+=(U-1)*(U-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,{},T)}}function Ed(m,u){for(let p=0;p<m.length;p++)if(Td(u,m[p]))return!0;for(let p=0;p<u.length;p++)if(Td(m,u[p]))return!0;return!!wg(m,u)}function xg(m,u,p){return!!Td(m,u)||!!Sg(u,m,p)}function gp(m,u){if(m.length===1)return ev(u,m[0]);for(let p=0;p<u.length;p++){const _=u[p];for(let T=0;T<_.length;T++)if(Td(m,_[T]))return!0}for(let p=0;p<m.length;p++)if(ev(u,m[p]))return!0;for(let p=0;p<u.length;p++)if(wg(m,u[p]))return!0;return!1}function bx(m,u,p){if(m.length>1){if(wg(m,u))return!0;for(let _=0;_<u.length;_++)if(Sg(u[_],m,p))return!0}for(let _=0;_<m.length;_++)if(Sg(m[_],u,p))return!0;return!1}function wg(m,u){if(m.length===0||u.length===0)return!1;for(let p=0;p<m.length-1;p++){const _=m[p],T=m[p+1];for(let I=0;I<u.length-1;I++)if(k_(_,T,u[I],u[I+1]))return!0}return!1}function k_(m,u,p,_){return gt(m,p,_)!==gt(u,p,_)&&gt(m,u,p)!==gt(m,u,_)}function Sg(m,u,p){const _=p*p;if(u.length===1)return m.distSqr(u[0])<_;for(let T=1;T<u.length;T++)if(F_(m,u[T-1],u[T])<_)return!0;return!1}function F_(m,u,p){const _=u.distSqr(p);if(_===0)return m.distSqr(u);const T=((m.x-u.x)*(p.x-u.x)+(m.y-u.y)*(p.y-u.y))/_;return m.distSqr(T<0?u:T>1?p:p.sub(u)._mult(T)._add(u))}function ev(m,u){let p,_,T,I=!1;for(let O=0;O<m.length;O++){p=m[O];for(let U=0,J=p.length-1;U<p.length;J=U++)_=p[U],T=p[J],_.y>u.y!=T.y>u.y&&u.x<(T.x-_.x)*(u.y-_.y)/(T.y-_.y)+_.x&&(I=!I)}return I}function Td(m,u){let p=!1;for(let _=0,T=m.length-1;_<m.length;T=_++){const I=m[_],O=m[T];I.y>u.y!=O.y>u.y&&u.x<(O.x-I.x)*(u.y-I.y)/(O.y-I.y)+I.x&&(p=!p)}return p}function B_(m,u,p){const _=p[0],T=p[2];if(m.x<_.x&&u.x<_.x||m.x>T.x&&u.x>T.x||m.y<_.y&&u.y<_.y||m.y>T.y&&u.y>T.y)return!1;const I=gt(m,u,p[0]);return I!==gt(m,u,p[1])||I!==gt(m,u,p[2])||I!==gt(m,u,p[3])}function fm(m,u,p){const _=u.paint.get(m).value;return _.kind==="constant"?_.value:p.programConfigurations.get(u.id).getMaxValue(m)}function dm(m){return Math.sqrt(m[0]*m[0]+m[1]*m[1])}function Eg(m,u,p,_,T){if(!u[0]&&!u[1])return m;const I=A.convert(u)._mult(T);p==="viewport"&&I._rotate(-_);const O=[];for(let U=0;U<m.length;U++)O.push(m[U].sub(I));return O}let nf,tv;Mr("CircleBucket",tf,{omit:["layers"]});var DE={get paint(){return tv=tv||new Li({"circle-radius":new Bn(ge.paint_circle["circle-radius"]),"circle-color":new Bn(ge.paint_circle["circle-color"]),"circle-blur":new Bn(ge.paint_circle["circle-blur"]),"circle-opacity":new Bn(ge.paint_circle["circle-opacity"]),"circle-translate":new jn(ge.paint_circle["circle-translate"]),"circle-translate-anchor":new jn(ge.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jn(ge.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jn(ge.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Bn(ge.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Bn(ge.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Bn(ge.paint_circle["circle-stroke-opacity"])})},get layout(){return nf=nf||new Li({"circle-sort-key":new Bn(ge.layout_circle["circle-sort-key"])})}};class xx extends Ai{constructor(u){super(u,DE)}createBucket(u){return new tf(u)}queryRadius(u){const p=u;return fm("circle-radius",this,p)+fm("circle-stroke-width",this,p)+dm(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:p,featureState:_,geometry:T,transform:I,pixelsToTileUnits:O,pixelPosMatrix:U}){const J=Eg(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-I.bearingInRadians,O),ne=this.paint.get("circle-radius").evaluate(p,_)+this.paint.get("circle-stroke-width").evaluate(p,_),ce=this.paint.get("circle-pitch-alignment")==="map",_e=ce?J:function(Le,Fe){return Le.map(Ye=>nv(Ye,Fe))}(J,U),Re=ce?ne*O:ne;for(const Le of T)for(const Fe of Le){const Ye=ce?Fe:nv(Fe,U);let ct=Re;const wt=re([],[Fe.x,Fe.y,0,1],U);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ct*=wt[3]/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ct*=I.cameraToCenterDistance/wt[3]),xg(_e,Ye,ct))return!0}return!1}}function nv(m,u){const p=re([],[m.x,m.y,0,1],u);return new A(p[0]/p[3],p[1]/p[3])}class Md extends tf{}let rf;Mr("HeatmapBucket",Md,{omit:["layers"]});var Ad={get paint(){return rf=rf||new Li({"heatmap-radius":new Bn(ge.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Bn(ge.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jn(ge.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ua(ge.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jn(ge.paint_heatmap["heatmap-opacity"])})}};function Dh(m,{width:u,height:p},_,T){if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==u*p*_)throw new RangeError(`mismatched image size. expected: ${T.length} but got: ${u*p*_}`)}else T=new Uint8Array(u*p*_);return m.width=u,m.height=p,m.data=T,m}function rv(m,{width:u,height:p},_){if(u===m.width&&p===m.height)return;const T=Dh({},{width:u,height:p},_);Tg(m,T,{x:0,y:0},{x:0,y:0},{width:Math.min(m.width,u),height:Math.min(m.height,p)},_),m.width=u,m.height=p,m.data=T.data}function Tg(m,u,p,_,T,I){if(T.width===0||T.height===0)return u;if(T.width>m.width||T.height>m.height||p.x>m.width-T.width||p.y>m.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>u.width||T.height>u.height||_.x>u.width-T.width||_.y>u.height-T.height)throw new RangeError("out of range destination coordinates for image copy");const O=m.data,U=u.data;if(O===U)throw new Error("srcData equals dstData, so image is already copied");for(let J=0;J<T.height;J++){const ne=((p.y+J)*m.width+p.x)*I,ce=((_.y+J)*u.width+_.x)*I;for(let _e=0;_e<T.width*I;_e++)U[ce+_e]=O[ne+_e]}return u}class Of{constructor(u,p){Dh(this,u,1,p)}resize(u){rv(this,u,1)}clone(){return new Of({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,p,_,T,I){Tg(u,p,_,T,I,1)}}class Vu{constructor(u,p){Dh(this,u,4,p)}resize(u){rv(this,u,4)}replace(u,p){p?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Vu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,p,_,T,I){Tg(u,p,_,T,I,4)}}function Cd(m){const u={},p=m.resolution||256,_=m.clips?m.clips.length:1,T=m.image||new Vu({width:p,height:_});if(Math.log(p)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${p}`);const I=(O,U,J)=>{u[m.evaluationKey]=J;const ne=m.expression.evaluate(u);T.data[O+U+0]=Math.floor(255*ne.r/ne.a),T.data[O+U+1]=Math.floor(255*ne.g/ne.a),T.data[O+U+2]=Math.floor(255*ne.b/ne.a),T.data[O+U+3]=Math.floor(255*ne.a)};if(m.clips)for(let O=0,U=0;O<_;++O,U+=4*p)for(let J=0,ne=0;J<p;J++,ne+=4){const ce=J/(p-1),{start:_e,end:Re}=m.clips[O];I(U,ne,_e*(1-ce)+Re*ce)}else for(let O=0,U=0;O<p;O++,U+=4)I(0,U,O/(p-1));return T}Mr("AlphaImage",Of),Mr("RGBAImage",Vu);const ru="big-fb";class iv extends Ai{createBucket(u){return new Md(u)}constructor(u){super(u,Ad),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Cd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ru)&&this.heatmapFbos.delete(ru)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let z_;var Pd={get paint(){return z_=z_||new Li({"hillshade-illumination-direction":new jn(ge.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new jn(ge.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jn(ge.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jn(ge.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jn(ge.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jn(ge.paint_hillshade["hillshade-accent-color"])})}};class U_ extends Ai{constructor(u){super(u,Pd)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const j_=Ui([{name:"a_pos",components:2,type:"Int16"}],4),{members:Rd}=j_;function af(m,u,p){const _=p.patternDependencies;let T=!1;for(const I of u){const O=I.paint.get(`${m}-pattern`);O.isConstant()||(T=!0);const U=O.constantOr(null);U&&(T=!0,_[U.to]=!0,_[U.from]=!0)}return T}function vp(m,u,p,_,T){const I=T.patternDependencies;for(const O of u){const U=O.paint.get(`${m}-pattern`).value;if(U.kind!=="constant"){let J=U.evaluate({zoom:_-1},p,{},T.availableImages),ne=U.evaluate({zoom:_},p,{},T.availableImages),ce=U.evaluate({zoom:_+1},p,{},T.availableImages);J=J&&J.name?J.name:J,ne=ne&&ne.name?ne.name:ne,ce=ce&&ce.name?ce.name:ce,I[J]=!0,I[ne]=!0,I[ce]=!0,p.patterns[O.id]={min:J,mid:ne,max:ce}}}return p}function av(m,u,p,_,T){let I;if(T===function(O,U,J,ne){let ce=0;for(let _e=U,Re=J-ne;_e<J;_e+=ne)ce+=(O[Re]-O[_e])*(O[_e+1]+O[Re+1]),Re=_e;return ce}(m,u,p,_)>0)for(let O=u;O<p;O+=_)I=Nl(O/_|0,m[O],m[O+1],I);else for(let O=p-_;O>=u;O-=_)I=Nl(O/_|0,m[O],m[O+1],I);return I&&Ld(I,I.next)&&(mm(I),I=I.next),I}function Nf(m,u){if(!m)return m;u||(u=m);let p,_=m;do if(p=!1,_.steiner||!Ld(_,_.next)&&Yo(_.prev,_,_.next)!==0)_=_.next;else{if(mm(_),_=u=_.prev,_===_.next)break;p=!0}while(p||_!==u);return u}function kf(m,u,p,_,T,I,O){if(!m)return;!O&&I&&function(J,ne,ce,_e){let Re=J;do Re.z===0&&(Re.z=Ff(Re.x,Re.y,ne,ce,_e)),Re.prevZ=Re.prev,Re.nextZ=Re.next,Re=Re.next;while(Re!==J);Re.prevZ.nextZ=null,Re.prevZ=null,function(Le){let Fe,Ye=1;do{let ct,wt=Le;Le=null;let Xt=null;for(Fe=0;wt;){Fe++;let Rt=wt,Ie=0;for(let It=0;It<Ye&&(Ie++,Rt=Rt.nextZ,Rt);It++);let at=Ye;for(;Ie>0||at>0&&Rt;)Ie!==0&&(at===0||!Rt||wt.z<=Rt.z)?(ct=wt,wt=wt.nextZ,Ie--):(ct=Rt,Rt=Rt.nextZ,at--),Xt?Xt.nextZ=ct:Le=ct,ct.prevZ=Xt,Xt=ct;wt=Rt}Xt.nextZ=null,Ye*=2}while(Fe>1)}(Re)}(m,_,T,I);let U=m;for(;m.prev!==m.next;){const J=m.prev,ne=m.next;if(I?wx(m,_,T,I):Mg(m))u.push(J.i,m.i,ne.i),mm(m),m=ne.next,U=ne.next;else if((m=ne)===U){O?O===1?kf(m=Sx(Nf(m),u),u,p,_,T,I,2):O===2&&Ag(m,u,p,_,T,I):kf(Nf(m),u,p,_,T,I,1);break}}}function Mg(m){const u=m.prev,p=m,_=m.next;if(Yo(u,p,_)>=0)return!1;const T=u.x,I=p.x,O=_.x,U=u.y,J=p.y,ne=_.y,ce=Math.min(T,I,O),_e=Math.min(U,J,ne),Re=Math.max(T,I,O),Le=Math.max(U,J,ne);let Fe=_.next;for(;Fe!==u;){if(Fe.x>=ce&&Fe.x<=Re&&Fe.y>=_e&&Fe.y<=Le&&pm(T,U,I,J,O,ne,Fe.x,Fe.y)&&Yo(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.next}return!0}function wx(m,u,p,_){const T=m.prev,I=m,O=m.next;if(Yo(T,I,O)>=0)return!1;const U=T.x,J=I.x,ne=O.x,ce=T.y,_e=I.y,Re=O.y,Le=Math.min(U,J,ne),Fe=Math.min(ce,_e,Re),Ye=Math.max(U,J,ne),ct=Math.max(ce,_e,Re),wt=Ff(Le,Fe,u,p,_),Xt=Ff(Ye,ct,u,p,_);let Rt=m.prevZ,Ie=m.nextZ;for(;Rt&&Rt.z>=wt&&Ie&&Ie.z<=Xt;){if(Rt.x>=Le&&Rt.x<=Ye&&Rt.y>=Fe&&Rt.y<=ct&&Rt!==T&&Rt!==O&&pm(U,ce,J,_e,ne,Re,Rt.x,Rt.y)&&Yo(Rt.prev,Rt,Rt.next)>=0||(Rt=Rt.prevZ,Ie.x>=Le&&Ie.x<=Ye&&Ie.y>=Fe&&Ie.y<=ct&&Ie!==T&&Ie!==O&&pm(U,ce,J,_e,ne,Re,Ie.x,Ie.y)&&Yo(Ie.prev,Ie,Ie.next)>=0))return!1;Ie=Ie.nextZ}for(;Rt&&Rt.z>=wt;){if(Rt.x>=Le&&Rt.x<=Ye&&Rt.y>=Fe&&Rt.y<=ct&&Rt!==T&&Rt!==O&&pm(U,ce,J,_e,ne,Re,Rt.x,Rt.y)&&Yo(Rt.prev,Rt,Rt.next)>=0)return!1;Rt=Rt.prevZ}for(;Ie&&Ie.z<=Xt;){if(Ie.x>=Le&&Ie.x<=Ye&&Ie.y>=Fe&&Ie.y<=ct&&Ie!==T&&Ie!==O&&pm(U,ce,J,_e,ne,Re,Ie.x,Ie.y)&&Yo(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.nextZ}return!0}function Sx(m,u){let p=m;do{const _=p.prev,T=p.next.next;!Ld(_,T)&&Cg(_,p,p.next,T)&&yp(_,T)&&yp(T,_)&&(u.push(_.i,p.i,T.i),mm(p),mm(p.next),p=m=T),p=p.next}while(p!==m);return Nf(p)}function Ag(m,u,p,_,T,I){let O=m;do{let U=O.next.next;for(;U!==O.prev;){if(O.i!==U.i&&Mx(O,U)){let J=G_(O,U);return O=Nf(O,O.next),J=Nf(J,J.next),kf(O,u,p,_,T,I,0),void kf(J,u,p,_,T,I,0)}U=U.next}O=O.next}while(O!==m)}function Dd(m,u){let p=m.x-u.x;return p===0&&(p=m.y-u.y,p===0)&&(p=(m.next.y-m.y)/(m.next.x-m.x)-(u.next.y-u.y)/(u.next.x-u.x)),p}function Ex(m,u){const p=function(T,I){let O=I;const U=T.x,J=T.y;let ne,ce=-1/0;if(Ld(T,O))return O;do{if(Ld(T,O.next))return O.next;if(J<=O.y&&J>=O.next.y&&O.next.y!==O.y){const Ye=O.x+(J-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(Ye<=U&&Ye>ce&&(ce=Ye,ne=O.x<O.next.x?O:O.next,Ye===U))return ne}O=O.next}while(O!==I);if(!ne)return null;const _e=ne,Re=ne.x,Le=ne.y;let Fe=1/0;O=ne;do{if(U>=O.x&&O.x>=Re&&U!==O.x&&V_(J<Le?U:ce,J,Re,Le,J<Le?ce:U,J,O.x,O.y)){const Ye=Math.abs(J-O.y)/(U-O.x);yp(O,T)&&(Ye<Fe||Ye===Fe&&(O.x>ne.x||O.x===ne.x&&Tx(ne,O)))&&(ne=O,Fe=Ye)}O=O.next}while(O!==_e);return ne}(m,u);if(!p)return u;const _=G_(p,m);return Nf(_,_.next),Nf(p,p.next)}function Tx(m,u){return Yo(m.prev,m,u.prev)<0&&Yo(u.next,m,m.next)<0}function Ff(m,u,p,_,T){return(m=1431655765&((m=858993459&((m=252645135&((m=16711935&((m=(m-p)*T|0)|m<<8))|m<<4))|m<<2))|m<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-_)*T|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Gc(m){let u=m,p=m;do(u.x<p.x||u.x===p.x&&u.y<p.y)&&(p=u),u=u.next;while(u!==m);return p}function V_(m,u,p,_,T,I,O,U){return(T-O)*(u-U)>=(m-O)*(I-U)&&(m-O)*(_-U)>=(p-O)*(u-U)&&(p-O)*(I-U)>=(T-O)*(_-U)}function pm(m,u,p,_,T,I,O,U){return!(m===O&&u===U)&&V_(m,u,p,_,T,I,O,U)}function Mx(m,u){return m.next.i!==u.i&&m.prev.i!==u.i&&!function(p,_){let T=p;do{if(T.i!==p.i&&T.next.i!==p.i&&T.i!==_.i&&T.next.i!==_.i&&Cg(T,T.next,p,_))return!0;T=T.next}while(T!==p);return!1}(m,u)&&(yp(m,u)&&yp(u,m)&&function(p,_){let T=p,I=!1;const O=(p.x+_.x)/2,U=(p.y+_.y)/2;do T.y>U!=T.next.y>U&&T.next.y!==T.y&&O<(T.next.x-T.x)*(U-T.y)/(T.next.y-T.y)+T.x&&(I=!I),T=T.next;while(T!==p);return I}(m,u)&&(Yo(m.prev,m,u.prev)||Yo(m,u.prev,u))||Ld(m,u)&&Yo(m.prev,m,m.next)>0&&Yo(u.prev,u,u.next)>0)}function Yo(m,u,p){return(u.y-m.y)*(p.x-u.x)-(u.x-m.x)*(p.y-u.y)}function Ld(m,u){return m.x===u.x&&m.y===u.y}function Cg(m,u,p,_){const T=Ko(Yo(m,u,p)),I=Ko(Yo(m,u,_)),O=Ko(Yo(p,_,m)),U=Ko(Yo(p,_,u));return T!==I&&O!==U||!(T!==0||!sh(m,p,u))||!(I!==0||!sh(m,_,u))||!(O!==0||!sh(p,m,_))||!(U!==0||!sh(p,u,_))}function sh(m,u,p){return u.x<=Math.max(m.x,p.x)&&u.x>=Math.min(m.x,p.x)&&u.y<=Math.max(m.y,p.y)&&u.y>=Math.min(m.y,p.y)}function Ko(m){return m>0?1:m<0?-1:0}function yp(m,u){return Yo(m.prev,m,m.next)<0?Yo(m,u,m.next)>=0&&Yo(m,m.prev,u)>=0:Yo(m,u,m.prev)<0||Yo(m,m.next,u)<0}function G_(m,u){const p=q_(m.i,m.x,m.y),_=q_(u.i,u.x,u.y),T=m.next,I=u.prev;return m.next=u,u.prev=m,p.next=T,T.prev=p,_.next=p,p.prev=_,I.next=_,_.prev=I,_}function Nl(m,u,p,_){const T=q_(m,u,p);return _?(T.next=_.next,T.prev=_,_.next.prev=T,_.next=T):(T.prev=T,T.next=T),T}function mm(m){m.next.prev=m.prev,m.prev.next=m.next,m.prevZ&&(m.prevZ.nextZ=m.nextZ),m.nextZ&&(m.nextZ.prevZ=m.prevZ)}function q_(m,u,p){return{i:m,x:u,y:p,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class _p{constructor(u,p){if(p>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=p}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class Pg{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}Pg.noSubdivision=new Pg({fill:new _p(0,0),line:new _p(0,0),tile:new _p(0,0),stencil:new _p(0,0),circle:1}),Mr("SubdivisionGranularityExpression",_p),Mr("SubdivisionGranularitySetting",Pg);const Jo=-32768,bu=32767;class Bf{constructor(u,p){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=ue/u,this._canonical=p}_getKey(u,p){return(u+=32768)<<16|(p+=32768)<<0}_vertexToIndex(u,p){if(u<-32768||p<-32768||u>32767||p>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const _=0|Math.round(u),T=0|Math.round(p),I=this._getKey(_,T);if(this._vertexDictionary.has(I))return this._vertexDictionary.get(I);const O=this._vertexBuffer.length/2;return this._vertexDictionary.set(I,O),this._vertexBuffer.push(_,T),O}_subdivideTrianglesScanline(u){if(this._granularity<2)return function(T,I){const O=[];for(let U=0;U<I.length;U+=3){const J=I[U],ne=I[U+1],ce=I[U+2],_e=T[2*J],Re=T[2*J+1];(T[2*ne]-_e)*(T[2*ce+1]-Re)-(T[2*ne+1]-Re)*(T[2*ce]-_e)>0?(O.push(J),O.push(ce),O.push(ne)):(O.push(J),O.push(ne),O.push(ce))}return O}(this._vertexBuffer,u);const p=[],_=u.length;for(let T=0;T<_;T+=3){const I=[u[T+0],u[T+1],u[T+2]],O=[this._vertexBuffer[2*u[T+0]+0],this._vertexBuffer[2*u[T+0]+1],this._vertexBuffer[2*u[T+1]+0],this._vertexBuffer[2*u[T+1]+1],this._vertexBuffer[2*u[T+2]+0],this._vertexBuffer[2*u[T+2]+1]];let U=1/0,J=1/0,ne=-1/0,ce=-1/0;for(let Ye=0;Ye<3;Ye++){const ct=O[2*Ye],wt=O[2*Ye+1];U=Math.min(U,ct),ne=Math.max(ne,ct),J=Math.min(J,wt),ce=Math.max(ce,wt)}if(U===ne||J===ce)continue;const _e=Math.floor(U/this._granularityCellSize),Re=Math.ceil(ne/this._granularityCellSize),Le=Math.floor(J/this._granularityCellSize),Fe=Math.ceil(ce/this._granularityCellSize);if(_e!==Re||Le!==Fe)for(let Ye=Le;Ye<Fe;Ye++){const ct=this._scanlineGenerateVertexRingForCellRow(Ye,O,I);LE(this._vertexBuffer,ct,p)}else p.push(...I)}return p}_scanlineGenerateVertexRingForCellRow(u,p,_){const T=u*this._granularityCellSize,I=T+this._granularityCellSize,O=[];for(let U=0;U<3;U++){const J=p[2*U],ne=p[2*U+1],ce=p[2*(U+1)%6],_e=p[(2*(U+1)+1)%6],Re=p[2*(U+2)%6],Le=p[(2*(U+2)+1)%6],Fe=ce-J,Ye=_e-ne,ct=Fe===0,wt=Ye===0,Xt=(T-ne)/Ye,Rt=(I-ne)/Ye,Ie=Math.min(Xt,Rt),at=Math.max(Xt,Rt);if(!wt&&(Ie>=1||at<=0)||wt&&(ne<T||ne>I)){_e>=T&&_e<=I&&O.push(_[(U+1)%3]);continue}!wt&&Ie>0&&O.push(this._vertexToIndex(J+Fe*Ie,ne+Ye*Ie));const It=J+Fe*Math.max(Ie,0),An=J+Fe*Math.min(at,1);ct||this._generateIntraEdgeVertices(O,J,ne,ce,_e,It,An),!wt&&at<1&&O.push(this._vertexToIndex(J+Fe*at,ne+Ye*at)),(wt||_e>=T&&_e<=I)&&O.push(_[(U+1)%3]),!wt&&(_e<=T||_e>=I)&&this._generateInterEdgeVertices(O,J,ne,ce,_e,Re,Le,An,T,I)}return O}_generateIntraEdgeVertices(u,p,_,T,I,O,U){const J=T-p,ne=I-_,ce=ne===0,_e=ce?Math.min(p,T):Math.min(O,U),Re=ce?Math.max(p,T):Math.max(O,U),Le=Math.floor(_e/this._granularityCellSize)+1,Fe=Math.ceil(Re/this._granularityCellSize)-1;if(ce?p<T:O<U)for(let Ye=Le;Ye<=Fe;Ye++){const ct=Ye*this._granularityCellSize;u.push(this._vertexToIndex(ct,_+ne*(ct-p)/J))}else for(let Ye=Fe;Ye>=Le;Ye--){const ct=Ye*this._granularityCellSize;u.push(this._vertexToIndex(ct,_+ne*(ct-p)/J))}}_generateInterEdgeVertices(u,p,_,T,I,O,U,J,ne,ce){const _e=I-_,Re=O-T,Le=U-I,Fe=(ne-I)/Le,Ye=(ce-I)/Le,ct=Math.min(Fe,Ye),wt=Math.max(Fe,Ye),Xt=T+Re*ct;let Rt=Math.floor(Math.min(Xt,J)/this._granularityCellSize)+1,Ie=Math.ceil(Math.max(Xt,J)/this._granularityCellSize)-1,at=J<Xt;const It=Le===0;if(It&&(U===ne||U===ce))return;if(It||ct>=1||wt<=0){const nr=_-U,Dn=O+(p-O)*Math.min((ne-U)/nr,(ce-U)/nr);Rt=Math.floor(Math.min(Dn,J)/this._granularityCellSize)+1,Ie=Math.ceil(Math.max(Dn,J)/this._granularityCellSize)-1,at=J<Dn}const An=_e>0?ce:ne;if(at)for(let nr=Rt;nr<=Ie;nr++)u.push(this._vertexToIndex(nr*this._granularityCellSize,An));else for(let nr=Ie;nr>=Rt;nr--)u.push(this._vertexToIndex(nr*this._granularityCellSize,An))}_generateOutline(u){const p=[];for(const _ of u){const T=Id(_,this._granularity,!0),I=this._pointArrayToIndices(T),O=[];for(let U=1;U<I.length;U++)O.push(I[U-1]),O.push(I[U]);p.push(O)}return p}_handlePoles(u){let p=!1,_=!1;this._canonical&&(this._canonical.y===0&&(p=!0),this._canonical.y===(1<<this._canonical.z)-1&&(_=!0)),(p||_)&&this._fillPoles(u,p,_)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let p=0;p<u.length;p+=2){const _=u[p+1];_===Jo&&(u[p+1]=-32767),_===bu&&(u[p+1]=32766)}}_generatePoleQuad(u,p,_,T,I,O){T>I!=(O===Jo)?(u.push(p),u.push(_),u.push(this._vertexToIndex(T,O)),u.push(_),u.push(this._vertexToIndex(I,O)),u.push(this._vertexToIndex(T,O))):(u.push(_),u.push(p),u.push(this._vertexToIndex(T,O)),u.push(this._vertexToIndex(I,O)),u.push(_),u.push(this._vertexToIndex(T,O)))}_fillPoles(u,p,_){const T=this._vertexBuffer,I=ue,O=u.length;for(let U=2;U<O;U+=3){const J=u[U-2],ne=u[U-1],ce=u[U],_e=T[2*J],Re=T[2*J+1],Le=T[2*ne],Fe=T[2*ne+1],Ye=T[2*ce],ct=T[2*ce+1];p&&(Re===0&&Fe===0&&this._generatePoleQuad(u,J,ne,_e,Le,Jo),Fe===0&&ct===0&&this._generatePoleQuad(u,ne,ce,Le,Ye,Jo),ct===0&&Re===0&&this._generatePoleQuad(u,ce,J,Ye,_e,Jo)),_&&(Re===I&&Fe===I&&this._generatePoleQuad(u,J,ne,_e,Le,bu),Fe===I&&ct===I&&this._generatePoleQuad(u,ne,ce,Le,Ye,bu),ct===I&&Re===I&&this._generatePoleQuad(u,ce,J,Ye,_e,bu))}}_initializeVertices(u){for(let p=0;p<u.length;p+=2)this._vertexToIndex(u[p],u[p+1])}subdividePolygonInternal(u,p){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:_,holeIndices:T}=function(U){const J=[],ne=[];for(const ce of U)if(ce.length!==0){ce!==U[0]&&J.push(ne.length/2);for(let _e=0;_e<ce.length;_e++)ne.push(ce[_e].x),ne.push(ce[_e].y)}return{flattened:ne,holeIndices:J}}(u);let I;this._initializeVertices(_);try{const U=function(ne,ce,_e=2){const Re=ce&&ce.length,Le=Re?ce[0]*_e:ne.length;let Fe=av(ne,0,Le,_e,!0);const Ye=[];if(!Fe||Fe.next===Fe.prev)return Ye;let ct,wt,Xt;if(Re&&(Fe=function(Rt,Ie,at,It){const An=[];for(let nr=0,Dn=Ie.length;nr<Dn;nr++){const Fn=av(Rt,Ie[nr]*It,nr<Dn-1?Ie[nr+1]*It:Rt.length,It,!1);Fn===Fn.next&&(Fn.steiner=!0),An.push(Gc(Fn))}An.sort(Dd);for(let nr=0;nr<An.length;nr++)at=Ex(An[nr],at);return at}(ne,ce,Fe,_e)),ne.length>80*_e){ct=1/0,wt=1/0;let Rt=-1/0,Ie=-1/0;for(let at=_e;at<Le;at+=_e){const It=ne[at],An=ne[at+1];It<ct&&(ct=It),An<wt&&(wt=An),It>Rt&&(Rt=It),An>Ie&&(Ie=An)}Xt=Math.max(Rt-ct,Ie-wt),Xt=Xt!==0?32767/Xt:0}return kf(Fe,Ye,_e,ct,wt,Xt,0),Ye}(_,T),J=this._convertIndices(_,U);I=this._subdivideTrianglesScanline(J)}catch(U){console.error(U)}let O=[];return p&&(O=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(I),{verticesFlattened:this._vertexBuffer,indicesTriangles:I,indicesLineList:O}}_convertIndices(u,p){const _=[];for(let T=0;T<p.length;T++)_.push(this._vertexToIndex(u[2*p[T]],u[2*p[T]+1]));return _}_pointArrayToIndices(u){const p=[];for(let _=0;_<u.length;_++){const T=u[_];p.push(this._vertexToIndex(T.x,T.y))}return p}}function H_(m,u,p,_=!0){return new Bf(p,u).subdividePolygonInternal(m,_)}function Id(m,u,p=!1){if(!m||m.length<1)return[];if(m.length<2)return[];const _=m[0],T=m[m.length-1],I=p&&(_.x!==T.x||_.y!==T.y);if(u<2)return I?[...m,m[0]]:[...m];const O=Math.floor(ue/u),U=[];U.push(new A(m[0].x,m[0].y));const J=m.length,ne=I?J:J-1;for(let ce=0;ce<ne;ce++){const _e=m[ce],Re=ce<J-1?m[ce+1]:m[0],Le=_e.x,Fe=_e.y,Ye=Re.x,ct=Re.y,wt=Le!==Ye,Xt=Fe!==ct;if(!wt&&!Xt)continue;const Rt=Ye-Le,Ie=ct-Fe,at=Math.abs(Rt),It=Math.abs(Ie);let An=Le,nr=Fe;for(;;){const Fn=Rt>0?(Math.floor(An/O)+1)*O:(Math.ceil(An/O)-1)*O,ur=Ie>0?(Math.floor(nr/O)+1)*O:(Math.ceil(nr/O)-1)*O,ar=Math.abs(An-Fn),pr=Math.abs(nr-ur),Vn=Math.abs(An-Ye),kr=Math.abs(nr-ct),Qr=wt?ar/at:Number.POSITIVE_INFINITY,Kr=Xt?pr/It:Number.POSITIVE_INFINITY;if((Vn<=ar||!wt)&&(kr<=pr||!Xt))break;if(Qr<Kr&&wt||!Xt){An=Fn,nr+=Ie*Qr;const zr=new A(An,Math.round(nr));U[U.length-1].x===zr.x&&U[U.length-1].y===zr.y||U.push(zr)}else{An+=Rt*Kr,nr=ur;const zr=new A(Math.round(An),nr);U[U.length-1].x===zr.x&&U[U.length-1].y===zr.y||U.push(zr)}}const Dn=new A(Ye,ct);U[U.length-1].x===Dn.x&&U[U.length-1].y===Dn.y||U.push(Dn)}return U}function LE(m,u,p){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let _=0,T=m[2*u[0]];for(let J=1;J<u.length;J++){const ne=m[2*u[J]];ne<T&&(T=ne,_=J)}const I=u.length;let O=_,U=(O+1)%I;for(;;){const J=O-1>=0?O-1:I-1,ne=(U+1)%I,ce=m[2*u[J]],_e=m[2*u[ne]],Re=m[2*u[O]],Le=m[2*u[O]+1],Fe=m[2*u[U]+1];let Ye=!1;if(ce<_e)Ye=!0;else if(ce>_e)Ye=!1;else{const ct=Fe-Le,wt=-(m[2*u[U]]-Re),Xt=Le<Fe?1:-1;((ce-Re)*ct+(m[2*u[J]+1]-Le)*wt)*Xt>((_e-Re)*ct+(m[2*u[ne]+1]-Le)*wt)*Xt&&(Ye=!0)}if(Ye){const ct=u[J],wt=u[O],Xt=u[U];ct!==wt&&ct!==Xt&&wt!==Xt&&p.push(Xt,wt,ct),O--,O<0&&(O=I-1)}else{const ct=u[ne],wt=u[O],Xt=u[U];ct!==wt&&ct!==Xt&&wt!==Xt&&p.push(Xt,wt,ct),U++,U>=I&&(U=0)}if(J===ne)break}}function ov(m,u,p,_,T,I,O,U,J){const ne=T.length/2,ce=O&&U&&J;if(ne<Fr.MAX_VERTEX_ARRAY_LENGTH){const _e=u.prepareSegment(ne,p,_),Re=_e.vertexLength;for(let Ye=0;Ye<I.length;Ye+=3)_.emplaceBack(Re+I[Ye],Re+I[Ye+1],Re+I[Ye+2]);let Le,Fe;_e.vertexLength+=ne,_e.primitiveLength+=I.length/3,ce&&(Fe=O.prepareSegment(ne,p,U),Le=Fe.vertexLength,Fe.vertexLength+=ne);for(let Ye=0;Ye<T.length;Ye+=2)m(T[Ye],T[Ye+1]);if(ce)for(let Ye=0;Ye<J.length;Ye++){const ct=J[Ye];for(let wt=1;wt<ct.length;wt+=2)U.emplaceBack(Le+ct[wt-1],Le+ct[wt]);Fe.primitiveLength+=ct.length/2}}else(function(_e,Re,Le,Fe,Ye,ct){const wt=[];for(let It=0;It<Fe.length/2;It++)wt.push(-1);const Xt={count:0};let Rt=0,Ie=_e.getOrCreateLatestSegment(Re,Le),at=Ie.vertexLength;for(let It=2;It<Ye.length;It+=3){const An=Ye[It-2],nr=Ye[It-1],Dn=Ye[It];let Fn=wt[An]<Rt,ur=wt[nr]<Rt,ar=wt[Dn]<Rt;Ie.vertexLength+((Fn?1:0)+(ur?1:0)+(ar?1:0))>Fr.MAX_VERTEX_ARRAY_LENGTH&&(Ie=_e.createNewSegment(Re,Le),Rt=Xt.count,Fn=!0,ur=!0,ar=!0,at=0);const pr=Gu(wt,Fe,ct,Xt,An,Fn,Ie),Vn=Gu(wt,Fe,ct,Xt,nr,ur,Ie),kr=Gu(wt,Fe,ct,Xt,Dn,ar,Ie);Le.emplaceBack(at+pr-Rt,at+Vn-Rt,at+kr-Rt),Ie.primitiveLength++}})(u,p,_,T,I,m),ce&&function(_e,Re,Le,Fe,Ye,ct){const wt=[];for(let It=0;It<Fe.length/2;It++)wt.push(-1);const Xt={count:0};let Rt=0,Ie=_e.getOrCreateLatestSegment(Re,Le),at=Ie.vertexLength;for(let It=0;It<Ye.length;It++){const An=Ye[It];for(let nr=1;nr<Ye[It].length;nr+=2){const Dn=An[nr-1],Fn=An[nr];let ur=wt[Dn]<Rt,ar=wt[Fn]<Rt;Ie.vertexLength+((ur?1:0)+(ar?1:0))>Fr.MAX_VERTEX_ARRAY_LENGTH&&(Ie=_e.createNewSegment(Re,Le),Rt=Xt.count,ur=!0,ar=!0,at=0);const pr=Gu(wt,Fe,ct,Xt,Dn,ur,Ie),Vn=Gu(wt,Fe,ct,Xt,Fn,ar,Ie);Le.emplaceBack(at+pr-Rt,at+Vn-Rt),Ie.primitiveLength++}}}(O,p,U,T,J,m),u.forceNewSegmentOnNextPrepare(),O==null||O.forceNewSegmentOnNextPrepare()}function Gu(m,u,p,_,T,I,O){if(I){const U=_.count;return p(u[2*T],u[2*T+1]),m[T]=_.count,_.count++,O.vertexLength++,U}return m[T]}class qc{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Nt,this.indexArray=new wr,this.indexArray2=new dr,this.programConfigurations=new If(u.layers,u.zoom),this.segments=new Fr,this.segments2=new Fr,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,_){this.hasPattern=af("fill",this.layers,p);const T=this.layers[0].layout.get("fill-sort-key"),I=!T.isConstant(),O=[];for(const{feature:U,id:J,index:ne,sourceLayerIndex:ce}of u){const _e=this.layers[0]._featureFilter.needGeometry,Re=ju(U,_e);if(!this.layers[0]._featureFilter.filter(new mn(this.zoom),Re,_))continue;const Le=I?T.evaluate(Re,{},_,p.availableImages):void 0,Fe={id:J,properties:U.properties,type:U.type,sourceLayerIndex:ce,index:ne,geometry:_e?Re.geometry:ef(U),patterns:{},sortKey:Le};O.push(Fe)}I&&O.sort((U,J)=>U.sortKey-J.sortKey);for(const U of O){const{geometry:J,index:ne,sourceLayerIndex:ce}=U;if(this.hasPattern){const _e=vp("fill",this.layers,U,this.zoom,p);this.patternFeatures.push(_e)}else this.addFeature(U,J,ne,_,{},p.subdivisionGranularity);p.featureIndex.insert(u[ne].feature,J,ne,ce,this.index)}}update(u,p,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,_)}addFeatures(u,p,_){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,p,_,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Rd),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,p,_,T,I,O){for(const U of Vs(p,500)){const J=H_(U,T,O.fill.getGranularityForZoomLevel(T.z)),ne=this.layoutVertexArray;ov((ce,_e)=>{ne.emplaceBack(ce,_e)},this.segments,this.layoutVertexArray,this.indexArray,J.verticesFlattened,J.indicesTriangles,this.segments2,this.indexArray2,J.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,I,T)}}let $_,Hc;Mr("FillBucket",qc,{omit:["layers","patternFeatures"]});var Ax={get paint(){return Hc=Hc||new Li({"fill-antialias":new jn(ge.paint_fill["fill-antialias"]),"fill-opacity":new Bn(ge.paint_fill["fill-opacity"]),"fill-color":new Bn(ge.paint_fill["fill-color"]),"fill-outline-color":new Bn(ge.paint_fill["fill-outline-color"]),"fill-translate":new jn(ge.paint_fill["fill-translate"]),"fill-translate-anchor":new jn(ge.paint_fill["fill-translate-anchor"]),"fill-pattern":new ri(ge.paint_fill["fill-pattern"])})},get layout(){return $_=$_||new Li({"fill-sort-key":new Bn(ge.layout_fill["fill-sort-key"])})}};class zf extends Ai{constructor(u){super(u,Ax)}recalculate(u,p){super.recalculate(u,p);const _=this.paint._values["fill-outline-color"];_.value.kind==="constant"&&_.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new qc(u)}queryRadius(){return dm(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:p,transform:_,pixelsToTileUnits:T}){return gp(Eg(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-_.bearingInRadians,T),p)}isTileClipped(){return!0}}const gm=Ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Od=Ui([{name:"a_centroid",components:2,type:"Int16"}],4),{members:W_}=gm;var Rg,Uf,sv,bp,xp,vm,wp,Dg={};function X_(){if(Uf)return Rg;Uf=1;var m=y();function u(T,I,O,U,J){this.properties={},this.extent=O,this.type=0,this._pbf=T,this._geometry=-1,this._keys=U,this._values=J,T.readFields(p,this,I)}function p(T,I,O){T==1?I.id=O.readVarint():T==2?function(U,J){for(var ne=U.readVarint()+U.pos;U.pos<ne;){var ce=J._keys[U.readVarint()],_e=J._values[U.readVarint()];J.properties[ce]=_e}}(O,I):T==3?I.type=O.readVarint():T==4&&(I._geometry=O.pos)}function _(T){for(var I,O,U=0,J=0,ne=T.length,ce=ne-1;J<ne;ce=J++)U+=((O=T[ce]).x-(I=T[J]).x)*(I.y+O.y);return U}return Rg=u,u.types=["Unknown","Point","LineString","Polygon"],u.prototype.loadGeometry=function(){var T=this._pbf;T.pos=this._geometry;for(var I,O=T.readVarint()+T.pos,U=1,J=0,ne=0,ce=0,_e=[];T.pos<O;){if(J<=0){var Re=T.readVarint();U=7&Re,J=Re>>3}if(J--,U===1||U===2)ne+=T.readSVarint(),ce+=T.readSVarint(),U===1&&(I&&_e.push(I),I=[]),I.push(new m(ne,ce));else{if(U!==7)throw new Error("unknown command "+U);I&&I.push(I[0].clone())}}return I&&_e.push(I),_e},u.prototype.bbox=function(){var T=this._pbf;T.pos=this._geometry;for(var I=T.readVarint()+T.pos,O=1,U=0,J=0,ne=0,ce=1/0,_e=-1/0,Re=1/0,Le=-1/0;T.pos<I;){if(U<=0){var Fe=T.readVarint();O=7&Fe,U=Fe>>3}if(U--,O===1||O===2)(J+=T.readSVarint())<ce&&(ce=J),J>_e&&(_e=J),(ne+=T.readSVarint())<Re&&(Re=ne),ne>Le&&(Le=ne);else if(O!==7)throw new Error("unknown command "+O)}return[ce,Re,_e,Le]},u.prototype.toGeoJSON=function(T,I,O){var U,J,ne=this.extent*Math.pow(2,O),ce=this.extent*T,_e=this.extent*I,Re=this.loadGeometry(),Le=u.types[this.type];function Fe(wt){for(var Xt=0;Xt<wt.length;Xt++){var Rt=wt[Xt];wt[Xt]=[360*(Rt.x+ce)/ne-180,360/Math.PI*Math.atan(Math.exp((180-360*(Rt.y+_e)/ne)*Math.PI/180))-90]}}switch(this.type){case 1:var Ye=[];for(U=0;U<Re.length;U++)Ye[U]=Re[U][0];Fe(Re=Ye);break;case 2:for(U=0;U<Re.length;U++)Fe(Re[U]);break;case 3:for(Re=function(wt){var Xt=wt.length;if(Xt<=1)return[wt];for(var Rt,Ie,at=[],It=0;It<Xt;It++){var An=_(wt[It]);An!==0&&(Ie===void 0&&(Ie=An<0),Ie===An<0?(Rt&&at.push(Rt),Rt=[wt[It]]):Rt.push(wt[It]))}return Rt&&at.push(Rt),at}(Re),U=0;U<Re.length;U++)for(J=0;J<Re[U].length;J++)Fe(Re[U][J])}Re.length===1?Re=Re[0]:Le="Multi"+Le;var ct={type:"Feature",geometry:{type:Le,coordinates:Re},properties:this.properties};return"id"in this&&(ct.id=this.id),ct},Rg}function ym(){if(bp)return sv;bp=1;var m=X_();function u(_,T){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=_,this._keys=[],this._values=[],this._features=[],_.readFields(p,this,T),this.length=this._features.length}function p(_,T,I){_===15?T.version=I.readVarint():_===1?T.name=I.readString():_===5?T.extent=I.readVarint():_===2?T._features.push(I.pos):_===3?T._keys.push(I.readString()):_===4&&T._values.push(function(O){for(var U=null,J=O.readVarint()+O.pos;O.pos<J;){var ne=O.readVarint()>>3;U=ne===1?O.readString():ne===2?O.readFloat():ne===3?O.readDouble():ne===4?O.readVarint64():ne===5?O.readVarint():ne===6?O.readSVarint():ne===7?O.readBoolean():null}return U}(I))}return sv=u,u.prototype.feature=function(_){if(_<0||_>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[_];var T=this._pbf.readVarint()+this._pbf.pos;return new m(this._pbf,T,this.extent,this._keys,this._values)},sv}function Z_(){return wp||(wp=1,Dg.VectorTile=function(){if(vm)return xp;vm=1;var m=ym();function u(p,_,T){if(p===3){var I=new m(T,T.readVarint()+T.pos);I.length&&(_[I.name]=I)}}return xp=function(p,_){this.layers=p.readFields(u,{},_)},xp}(),Dg.VectorTileFeature=X_(),Dg.VectorTileLayer=ym()),Dg}var Nd=h(Z_());const Cx=Nd.VectorTileFeature.types,Y_=Math.pow(2,13);function qu(m,u,p,_,T,I,O,U){m.emplaceBack(u,p,2*Math.floor(_*Y_)+O,T*Y_*2,I*Y_*2,Math.round(U))}class Lg{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new kt,this.centroidVertexArray=new pt,this.indexArray=new wr,this.programConfigurations=new If(u.layers,u.zoom),this.segments=new Fr,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,_){this.features=[],this.hasPattern=af("fill-extrusion",this.layers,p);for(const{feature:T,id:I,index:O,sourceLayerIndex:U}of u){const J=this.layers[0]._featureFilter.needGeometry,ne=ju(T,J);if(!this.layers[0]._featureFilter.filter(new mn(this.zoom),ne,_))continue;const ce={id:I,sourceLayerIndex:U,index:O,geometry:J?ne.geometry:ef(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(vp("fill-extrusion",this.layers,ce,this.zoom,p)):this.addFeature(ce,ce.geometry,O,_,{},p.subdivisionGranularity),p.featureIndex.insert(T,ce.geometry,O,U,this.index,!0)}}addFeatures(u,p,_){for(const T of this.features){const{geometry:I}=T;this.addFeature(T,I,T.index,p,_,u.subdivisionGranularity)}}update(u,p,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,W_),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,Od.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,p,_,T,I,O){for(const U of Vs(p,500)){const J={x:0,y:0,sampleCount:0},ne=this.layoutVertexArray.length;this.processPolygon(J,T,u,U,O);const ce=this.layoutVertexArray.length-ne,_e=Math.floor(J.x/J.sampleCount),Re=Math.floor(J.y/J.sampleCount);for(let Le=0;Le<ce;Le++)this.centroidVertexArray.emplaceBack(_e,Re)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,I,T)}processPolygon(u,p,_,T,I){if(T.length<1||Ig(T[0]))return;for(const _e of T)_e.length!==0&&kd(u,_e);const O={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},U=I.fill.getGranularityForZoomLevel(p.z),J=Cx[_.type]==="Polygon";for(const _e of T){if(_e.length===0||Ig(_e))continue;const Re=Id(_e,U,J);this._generateSideFaces(Re,O)}if(!J)return;const ne=H_(T,p,U,!1),ce=this.layoutVertexArray;ov((_e,Re)=>{qu(ce,_e,Re,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,ne.verticesFlattened,ne.indicesTriangles)}_generateSideFaces(u,p){let _=0;for(let T=1;T<u.length;T++){const I=u[T],O=u[T-1];if(Px(I,O))continue;p.segment.vertexLength+4>Fr.MAX_VERTEX_ARRAY_LENGTH&&(p.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const U=I.sub(O)._perp()._unit(),J=O.dist(I);_+J>32768&&(_=0),qu(this.layoutVertexArray,I.x,I.y,U.x,U.y,0,0,_),qu(this.layoutVertexArray,I.x,I.y,U.x,U.y,0,1,_),_+=J,qu(this.layoutVertexArray,O.x,O.y,U.x,U.y,0,0,_),qu(this.layoutVertexArray,O.x,O.y,U.x,U.y,0,1,_);const ne=p.segment.vertexLength;this.indexArray.emplaceBack(ne,ne+2,ne+1),this.indexArray.emplaceBack(ne+1,ne+2,ne+3),p.segment.vertexLength+=4,p.segment.primitiveLength+=2}}}function kd(m,u){for(let p=0;p<u.length;p++){const _=u[p];p===u.length-1&&u[0].x===_.x&&u[0].y===_.y||(m.x+=_.x,m.y+=_.y,m.sampleCount++)}}function Px(m,u){return m.x===u.x&&(m.x<0||m.x>ue)||m.y===u.y&&(m.y<0||m.y>ue)}function Ig(m){return m.every(u=>u.x<0)||m.every(u=>u.x>ue)||m.every(u=>u.y<0)||m.every(u=>u.y>ue)}let Fd;Mr("FillExtrusionBucket",Lg,{omit:["layers","features"]});var Rx={get paint(){return Fd=Fd||new Li({"fill-extrusion-opacity":new jn(ge["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Bn(ge["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jn(ge["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jn(ge["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ri(ge["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Bn(ge["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Bn(ge["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jn(ge["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class K_ extends Ai{constructor(u){super(u,Rx)}createBucket(u){return new Lg(u)}queryRadius(){return dm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:p,featureState:_,geometry:T,transform:I,pixelsToTileUnits:O,pixelPosMatrix:U}){const J=Eg(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-I.bearingInRadians,O),ne=this.paint.get("fill-extrusion-height").evaluate(p,_),ce=this.paint.get("fill-extrusion-base").evaluate(p,_),_e=function(Le,Fe,Ye){const ct=[];for(const wt of Le){const Xt=[wt.x,wt.y,0,1];re(Xt,Xt,Fe),ct.push(new A(Xt[0]/Xt[3],Xt[1]/Xt[3]))}return ct}(J,U),Re=function(Le,Fe,Ye,ct){const wt=[],Xt=[],Rt=ct[8]*Fe,Ie=ct[9]*Fe,at=ct[10]*Fe,It=ct[11]*Fe,An=ct[8]*Ye,nr=ct[9]*Ye,Dn=ct[10]*Ye,Fn=ct[11]*Ye;for(const ur of Le){const ar=[],pr=[];for(const Vn of ur){const kr=Vn.x,Qr=Vn.y,Kr=ct[0]*kr+ct[4]*Qr+ct[12],zr=ct[1]*kr+ct[5]*Qr+ct[13],Ki=ct[2]*kr+ct[6]*Qr+ct[14],Oo=ct[3]*kr+ct[7]*Qr+ct[15],gs=Ki+at,es=Oo+It,pl=Kr+An,ks=zr+nr,vs=Ki+Dn,ao=Oo+Fn,Ao=new A((Kr+Rt)/es,(zr+Ie)/es);Ao.z=gs/es,ar.push(Ao);const Fl=new A(pl/ao,ks/ao);Fl.z=vs/ao,pr.push(Fl)}wt.push(ar),Xt.push(pr)}return[wt,Xt]}(T,ce,ne,U);return function(Le,Fe,Ye){let ct=1/0;gp(Ye,Fe)&&(ct=of(Ye,Fe[0]));for(let wt=0;wt<Fe.length;wt++){const Xt=Fe[wt],Rt=Le[wt];for(let Ie=0;Ie<Xt.length-1;Ie++){const at=Xt[Ie],It=[at,Xt[Ie+1],Rt[Ie+1],Rt[Ie],at];Ed(Ye,It)&&(ct=Math.min(ct,of(Ye,It)))}}return ct!==1/0&&ct}(Re[0],Re[1],_e)}}function Sp(m,u){return m.x*u.x+m.y*u.y}function of(m,u){if(m.length===1){let p=0;const _=u[p++];let T;for(;!T||_.equals(T);)if(T=u[p++],!T)return 1/0;for(;p<u.length;p++){const I=u[p],O=m[0],U=T.sub(_),J=I.sub(_),ne=O.sub(_),ce=Sp(U,U),_e=Sp(U,J),Re=Sp(J,J),Le=Sp(ne,U),Fe=Sp(ne,J),Ye=ce*Re-_e*_e,ct=(Re*Le-_e*Fe)/Ye,wt=(ce*Fe-_e*Le)/Ye,Xt=_.z*(1-ct-wt)+T.z*ct+I.z*wt;if(isFinite(Xt))return Xt}return 1/0}{let p=1/0;for(const _ of u)p=Math.min(p,_.z);return p}}const Dx=Ui([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:lv}=Dx,Og=Ui([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ms}=Og,IE=Nd.VectorTileFeature.types,OE=Math.cos(Math.PI/180*37.5),J_=Math.pow(2,14)/.5;class Q_{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(p=>p.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(p=>{this.gradients[p.id]={}}),this.layoutVertexArray=new Bt,this.layoutVertexArray2=new Wt,this.indexArray=new wr,this.programConfigurations=new If(u.layers,u.zoom),this.segments=new Fr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(u,p,_){this.hasPattern=af("line",this.layers,p);const T=this.layers[0].layout.get("line-sort-key"),I=!T.isConstant(),O=[];for(const{feature:U,id:J,index:ne,sourceLayerIndex:ce}of u){const _e=this.layers[0]._featureFilter.needGeometry,Re=ju(U,_e);if(!this.layers[0]._featureFilter.filter(new mn(this.zoom),Re,_))continue;const Le=I?T.evaluate(Re,{},_):void 0,Fe={id:J,properties:U.properties,type:U.type,sourceLayerIndex:ce,index:ne,geometry:_e?Re.geometry:ef(U),patterns:{},sortKey:Le};O.push(Fe)}I&&O.sort((U,J)=>U.sortKey-J.sortKey);for(const U of O){const{geometry:J,index:ne,sourceLayerIndex:ce}=U;if(this.hasPattern){const _e=vp("line",this.layers,U,this.zoom,p);this.patternFeatures.push(_e)}else this.addFeature(U,J,ne,_,{},p.subdivisionGranularity);p.featureIndex.insert(u[ne].feature,J,ne,ce,this.index)}}update(u,p,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,p,this.stateDependentLayers,_)}addFeatures(u,p,_){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,p,_,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,ms)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,lv),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,p,_,T,I,O){const U=this.layers[0].layout,J=U.get("line-join").evaluate(u,{}),ne=U.get("line-cap"),ce=U.get("line-miter-limit"),_e=U.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Re of p)this.addLine(Re,u,J,ne,ce,_e,T,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,I,T)}addLine(u,p,_,T,I,O,U,J){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=Id(u,U?J.line.getGranularityForZoomLevel(U.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Rt=0;Rt<u.length-1;Rt++)this.totalDistance+=u[Rt].dist(u[Rt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ne=IE[p.type]==="Polygon";let ce=u.length;for(;ce>=2&&u[ce-1].equals(u[ce-2]);)ce--;let _e=0;for(;_e<ce-1&&u[_e].equals(u[_e+1]);)_e++;if(ce<(ne?3:2))return;_==="bevel"&&(I=1.05);const Re=this.overscaling<=16?15*ue/(512*this.overscaling):0,Le=this.segments.prepareSegment(10*ce,this.layoutVertexArray,this.indexArray);let Fe,Ye,ct,wt,Xt;this.e1=this.e2=-1,ne&&(Fe=u[ce-2],Xt=u[_e].sub(Fe)._unit()._perp());for(let Rt=_e;Rt<ce;Rt++){if(ct=Rt===ce-1?ne?u[_e+1]:void 0:u[Rt+1],ct&&u[Rt].equals(ct))continue;Xt&&(wt=Xt),Fe&&(Ye=Fe),Fe=u[Rt],Xt=ct?ct.sub(Fe)._unit()._perp():wt,wt=wt||Xt;let Ie=wt.add(Xt);Ie.x===0&&Ie.y===0||Ie._unit();const at=wt.x*Xt.x+wt.y*Xt.y,It=Ie.x*Xt.x+Ie.y*Xt.y,An=It!==0?1/It:1/0,nr=2*Math.sqrt(2-2*It),Dn=It<OE&&Ye&&ct,Fn=wt.x*Xt.y-wt.y*Xt.x>0;if(Dn&&Rt>_e){const pr=Fe.dist(Ye);if(pr>2*Re){const Vn=Fe.sub(Fe.sub(Ye)._mult(Re/pr)._round());this.updateDistance(Ye,Vn),this.addCurrentVertex(Vn,wt,0,0,Le),Ye=Vn}}const ur=Ye&&ct;let ar=ur?_:ne?"butt":T;if(ur&&ar==="round"&&(An<O?ar="miter":An<=2&&(ar="fakeround")),ar==="miter"&&An>I&&(ar="bevel"),ar==="bevel"&&(An>2&&(ar="flipbevel"),An<I&&(ar="miter")),Ye&&this.updateDistance(Ye,Fe),ar==="miter")Ie._mult(An),this.addCurrentVertex(Fe,Ie,0,0,Le);else if(ar==="flipbevel"){if(An>100)Ie=Xt.mult(-1);else{const pr=An*wt.add(Xt).mag()/wt.sub(Xt).mag();Ie._perp()._mult(pr*(Fn?-1:1))}this.addCurrentVertex(Fe,Ie,0,0,Le),this.addCurrentVertex(Fe,Ie.mult(-1),0,0,Le)}else if(ar==="bevel"||ar==="fakeround"){const pr=-Math.sqrt(An*An-1),Vn=Fn?pr:0,kr=Fn?0:pr;if(Ye&&this.addCurrentVertex(Fe,wt,Vn,kr,Le),ar==="fakeround"){const Qr=Math.round(180*nr/Math.PI/20);for(let Kr=1;Kr<Qr;Kr++){let zr=Kr/Qr;if(zr!==.5){const Oo=zr-.5;zr+=zr*Oo*(zr-1)*((1.0904+at*(at*(3.55645-1.43519*at)-3.2452))*Oo*Oo+(.848013+at*(.215638*at-1.06021)))}const Ki=Xt.sub(wt)._mult(zr)._add(wt)._unit()._mult(Fn?-1:1);this.addHalfVertex(Fe,Ki.x,Ki.y,!1,Fn,0,Le)}}ct&&this.addCurrentVertex(Fe,Xt,-Vn,-kr,Le)}else if(ar==="butt")this.addCurrentVertex(Fe,Ie,0,0,Le);else if(ar==="square"){const pr=Ye?1:-1;this.addCurrentVertex(Fe,Ie,pr,pr,Le)}else ar==="round"&&(Ye&&(this.addCurrentVertex(Fe,wt,0,0,Le),this.addCurrentVertex(Fe,wt,1,1,Le,!0)),ct&&(this.addCurrentVertex(Fe,Xt,-1,-1,Le,!0),this.addCurrentVertex(Fe,Xt,0,0,Le)));if(Dn&&Rt<ce-1){const pr=Fe.dist(ct);if(pr>2*Re){const Vn=Fe.add(ct.sub(Fe)._mult(Re/pr)._round());this.updateDistance(Fe,Vn),this.addCurrentVertex(Vn,Xt,0,0,Le),Fe=Vn}}}}addCurrentVertex(u,p,_,T,I,O=!1){const U=p.y*T-p.x,J=-p.y-p.x*T;this.addHalfVertex(u,p.x+p.y*_,p.y-p.x*_,O,!1,_,I),this.addHalfVertex(u,U,J,O,!0,-T,I),this.distance>J_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,p,_,T,I,O))}addHalfVertex({x:u,y:p},_,T,I,O,U,J){const ne=.5*(this.lineClips?this.scaledDistance*(J_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(I?1:0),(p<<1)+(O?1:0),Math.round(63*_)+128,Math.round(63*T)+128,1+(U===0?0:U<0?-1:1)|(63&ne)<<2,ne>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ce=J.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ce,this.e2),J.primitiveLength++),O?this.e2=ce:this.e1=ce}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,p){this.distance+=u.dist(p),this.updateScaledDistance()}}let Lx,fs;Mr("LineBucket",Q_,{omit:["layers","patternFeatures"]});var To={get paint(){return fs=fs||new Li({"line-opacity":new Bn(ge.paint_line["line-opacity"]),"line-color":new Bn(ge.paint_line["line-color"]),"line-translate":new jn(ge.paint_line["line-translate"]),"line-translate-anchor":new jn(ge.paint_line["line-translate-anchor"]),"line-width":new Bn(ge.paint_line["line-width"]),"line-gap-width":new Bn(ge.paint_line["line-gap-width"]),"line-offset":new Bn(ge.paint_line["line-offset"]),"line-blur":new Bn(ge.paint_line["line-blur"]),"line-dasharray":new br(ge.paint_line["line-dasharray"]),"line-pattern":new ri(ge.paint_line["line-pattern"]),"line-gradient":new ua(ge.paint_line["line-gradient"])})},get layout(){return Lx=Lx||new Li({"line-cap":new jn(ge.layout_line["line-cap"]),"line-join":new Bn(ge.layout_line["line-join"]),"line-miter-limit":new jn(ge.layout_line["line-miter-limit"]),"line-round-limit":new jn(ge.layout_line["line-round-limit"]),"line-sort-key":new Bn(ge.layout_line["line-sort-key"])})}};class Ta extends Bn{possiblyEvaluate(u,p){return p=new mn(Math.floor(p.zoom),{now:p.now,fadeDuration:p.fadeDuration,zoomHistory:p.zoomHistory,transition:p.transition}),super.possiblyEvaluate(u,p)}evaluate(u,p,_,T){return p=ye({},p,{zoom:Math.floor(p.zoom)}),super.evaluate(u,p,_,T)}}let Ma;class Io extends Ai{constructor(u){super(u,To),this.gradientVersion=0,Ma||(Ma=new Ta(To.paint.properties["line-width"].specification),Ma.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const p=this.gradientExpression();this.stepInterpolant=!!function(_){return _._styleExpression!==void 0}(p)&&p._styleExpression.expression instanceof Es,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,p){super.recalculate(u,p),this.paint._values["line-floorwidth"]=Ma.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Q_(u)}queryRadius(u){const p=u,_=_c(fm("line-width",this,p),fm("line-gap-width",this,p)),T=fm("line-offset",this,p);return _/2+Math.abs(T)+dm(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:p,featureState:_,geometry:T,transform:I,pixelsToTileUnits:O}){const U=Eg(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-I.bearingInRadians,O),J=O/2*_c(this.paint.get("line-width").evaluate(p,_),this.paint.get("line-gap-width").evaluate(p,_)),ne=this.paint.get("line-offset").evaluate(p,_);return ne&&(T=function(ce,_e){const Re=[];for(let Le=0;Le<ce.length;Le++){const Fe=ce[Le],Ye=[];for(let ct=0;ct<Fe.length;ct++){const wt=Fe[ct-1],Xt=Fe[ct],Rt=Fe[ct+1],Ie=ct===0?new A(0,0):Xt.sub(wt)._unit()._perp(),at=ct===Fe.length-1?new A(0,0):Rt.sub(Xt)._unit()._perp(),It=Ie._add(at)._unit(),An=It.x*at.x+It.y*at.y;An!==0&&It._mult(1/An),Ye.push(It._mult(_e)._add(Xt))}Re.push(Ye)}return Re}(T,ne*O)),function(ce,_e,Re){for(let Le=0;Le<_e.length;Le++){const Fe=_e[Le];if(ce.length>=3){for(let Ye=0;Ye<Fe.length;Ye++)if(Td(ce,Fe[Ye]))return!0}if(bx(ce,Fe,Re))return!0}return!1}(U,T,J)}isTileClipped(){return!0}}function _c(m,u){return u>0?u+2*m:m}const jf=Ui([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_m=Ui([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ui([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const e1=Ui([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ui([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const sf=Ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ns=Ui([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Bd(m,u,p){return m.sections.forEach(_=>{_.text=function(T,I,O){const U=I.layout.get("text-transform").evaluate(O,{});return U==="uppercase"?T=T.toLocaleUpperCase():U==="lowercase"&&(T=T.toLocaleLowerCase()),bn.applyArabicShaping&&(T=bn.applyArabicShaping(T)),T}(_.text,u,p)}),m}Ui([{name:"triangle",components:3,type:"Uint16"}]),Ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ui([{type:"Float32",name:"offsetX"}]),Ui([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ui([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Lh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var uv,bc,Ep,Qo=24,lh={};function t1(){return uv||(uv=1,lh.read=function(m,u,p,_,T){var I,O,U=8*T-_-1,J=(1<<U)-1,ne=J>>1,ce=-7,_e=p?T-1:0,Re=p?-1:1,Le=m[u+_e];for(_e+=Re,I=Le&(1<<-ce)-1,Le>>=-ce,ce+=U;ce>0;I=256*I+m[u+_e],_e+=Re,ce-=8);for(O=I&(1<<-ce)-1,I>>=-ce,ce+=_;ce>0;O=256*O+m[u+_e],_e+=Re,ce-=8);if(I===0)I=1-ne;else{if(I===J)return O?NaN:1/0*(Le?-1:1);O+=Math.pow(2,_),I-=ne}return(Le?-1:1)*O*Math.pow(2,I-_)},lh.write=function(m,u,p,_,T,I){var O,U,J,ne=8*I-T-1,ce=(1<<ne)-1,_e=ce>>1,Re=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,Le=_?0:I-1,Fe=_?1:-1,Ye=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(U=isNaN(u)?1:0,O=ce):(O=Math.floor(Math.log(u)/Math.LN2),u*(J=Math.pow(2,-O))<1&&(O--,J*=2),(u+=O+_e>=1?Re/J:Re*Math.pow(2,1-_e))*J>=2&&(O++,J/=2),O+_e>=ce?(U=0,O=ce):O+_e>=1?(U=(u*J-1)*Math.pow(2,T),O+=_e):(U=u*Math.pow(2,_e-1)*Math.pow(2,T),O=0));T>=8;m[p+Le]=255&U,Le+=Fe,U/=256,T-=8);for(O=O<<T|U,ne+=T;ne>0;m[p+Le]=255&O,Le+=Fe,O/=256,ne-=8);m[p+Le-Fe]|=128*Ye}),lh}function cv(){if(Ep)return bc;Ep=1,bc=u;var m=t1();function u(Ie){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Ie)?Ie:new Uint8Array(Ie||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0,u.Fixed64=1,u.Bytes=2,u.Fixed32=5;var p=4294967296,_=1/p,T=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function I(Ie){return Ie.type===u.Bytes?Ie.readVarint()+Ie.pos:Ie.pos+1}function O(Ie,at,It){return It?4294967296*at+(Ie>>>0):4294967296*(at>>>0)+(Ie>>>0)}function U(Ie,at,It){var An=at<=16383?1:at<=2097151?2:at<=268435455?3:Math.floor(Math.log(at)/(7*Math.LN2));It.realloc(An);for(var nr=It.pos-1;nr>=Ie;nr--)It.buf[nr+An]=It.buf[nr]}function J(Ie,at){for(var It=0;It<Ie.length;It++)at.writeVarint(Ie[It])}function ne(Ie,at){for(var It=0;It<Ie.length;It++)at.writeSVarint(Ie[It])}function ce(Ie,at){for(var It=0;It<Ie.length;It++)at.writeFloat(Ie[It])}function _e(Ie,at){for(var It=0;It<Ie.length;It++)at.writeDouble(Ie[It])}function Re(Ie,at){for(var It=0;It<Ie.length;It++)at.writeBoolean(Ie[It])}function Le(Ie,at){for(var It=0;It<Ie.length;It++)at.writeFixed32(Ie[It])}function Fe(Ie,at){for(var It=0;It<Ie.length;It++)at.writeSFixed32(Ie[It])}function Ye(Ie,at){for(var It=0;It<Ie.length;It++)at.writeFixed64(Ie[It])}function ct(Ie,at){for(var It=0;It<Ie.length;It++)at.writeSFixed64(Ie[It])}function wt(Ie,at){return(Ie[at]|Ie[at+1]<<8|Ie[at+2]<<16)+16777216*Ie[at+3]}function Xt(Ie,at,It){Ie[It]=at,Ie[It+1]=at>>>8,Ie[It+2]=at>>>16,Ie[It+3]=at>>>24}function Rt(Ie,at){return(Ie[at]|Ie[at+1]<<8|Ie[at+2]<<16)+(Ie[at+3]<<24)}return u.prototype={destroy:function(){this.buf=null},readFields:function(Ie,at,It){for(It=It||this.length;this.pos<It;){var An=this.readVarint(),nr=An>>3,Dn=this.pos;this.type=7&An,Ie(nr,at,this),this.pos===Dn&&this.skip(An)}return at},readMessage:function(Ie,at){return this.readFields(Ie,at,this.readVarint()+this.pos)},readFixed32:function(){var Ie=wt(this.buf,this.pos);return this.pos+=4,Ie},readSFixed32:function(){var Ie=Rt(this.buf,this.pos);return this.pos+=4,Ie},readFixed64:function(){var Ie=wt(this.buf,this.pos)+wt(this.buf,this.pos+4)*p;return this.pos+=8,Ie},readSFixed64:function(){var Ie=wt(this.buf,this.pos)+Rt(this.buf,this.pos+4)*p;return this.pos+=8,Ie},readFloat:function(){var Ie=m.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Ie},readDouble:function(){var Ie=m.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Ie},readVarint:function(Ie){var at,It,An=this.buf;return at=127&(It=An[this.pos++]),It<128?at:(at|=(127&(It=An[this.pos++]))<<7,It<128?at:(at|=(127&(It=An[this.pos++]))<<14,It<128?at:(at|=(127&(It=An[this.pos++]))<<21,It<128?at:function(nr,Dn,Fn){var ur,ar,pr=Fn.buf;if(ur=(112&(ar=pr[Fn.pos++]))>>4,ar<128||(ur|=(127&(ar=pr[Fn.pos++]))<<3,ar<128)||(ur|=(127&(ar=pr[Fn.pos++]))<<10,ar<128)||(ur|=(127&(ar=pr[Fn.pos++]))<<17,ar<128)||(ur|=(127&(ar=pr[Fn.pos++]))<<24,ar<128)||(ur|=(1&(ar=pr[Fn.pos++]))<<31,ar<128))return O(nr,ur,Dn);throw new Error("Expected varint not more than 10 bytes")}(at|=(15&(It=An[this.pos]))<<28,Ie,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Ie=this.readVarint();return Ie%2==1?(Ie+1)/-2:Ie/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Ie=this.readVarint()+this.pos,at=this.pos;return this.pos=Ie,Ie-at>=12&&T?function(It,An,nr){return T.decode(It.subarray(An,nr))}(this.buf,at,Ie):function(It,An,nr){for(var Dn="",Fn=An;Fn<nr;){var ur,ar,pr,Vn=It[Fn],kr=null,Qr=Vn>239?4:Vn>223?3:Vn>191?2:1;if(Fn+Qr>nr)break;Qr===1?Vn<128&&(kr=Vn):Qr===2?(192&(ur=It[Fn+1]))==128&&(kr=(31&Vn)<<6|63&ur)<=127&&(kr=null):Qr===3?(ar=It[Fn+2],(192&(ur=It[Fn+1]))==128&&(192&ar)==128&&((kr=(15&Vn)<<12|(63&ur)<<6|63&ar)<=2047||kr>=55296&&kr<=57343)&&(kr=null)):Qr===4&&(ar=It[Fn+2],pr=It[Fn+3],(192&(ur=It[Fn+1]))==128&&(192&ar)==128&&(192&pr)==128&&((kr=(15&Vn)<<18|(63&ur)<<12|(63&ar)<<6|63&pr)<=65535||kr>=1114112)&&(kr=null)),kr===null?(kr=65533,Qr=1):kr>65535&&(kr-=65536,Dn+=String.fromCharCode(kr>>>10&1023|55296),kr=56320|1023&kr),Dn+=String.fromCharCode(kr),Fn+=Qr}return Dn}(this.buf,at,Ie)},readBytes:function(){var Ie=this.readVarint()+this.pos,at=this.buf.subarray(this.pos,Ie);return this.pos=Ie,at},readPackedVarint:function(Ie,at){if(this.type!==u.Bytes)return Ie.push(this.readVarint(at));var It=I(this);for(Ie=Ie||[];this.pos<It;)Ie.push(this.readVarint(at));return Ie},readPackedSVarint:function(Ie){if(this.type!==u.Bytes)return Ie.push(this.readSVarint());var at=I(this);for(Ie=Ie||[];this.pos<at;)Ie.push(this.readSVarint());return Ie},readPackedBoolean:function(Ie){if(this.type!==u.Bytes)return Ie.push(this.readBoolean());var at=I(this);for(Ie=Ie||[];this.pos<at;)Ie.push(this.readBoolean());return Ie},readPackedFloat:function(Ie){if(this.type!==u.Bytes)return Ie.push(this.readFloat());var at=I(this);for(Ie=Ie||[];this.pos<at;)Ie.push(this.readFloat());return Ie},readPackedDouble:function(Ie){if(this.type!==u.Bytes)return Ie.push(this.readDouble());var at=I(this);for(Ie=Ie||[];this.pos<at;)Ie.push(this.readDouble());return Ie},readPackedFixed32:function(Ie){if(this.type!==u.Bytes)return Ie.push(this.readFixed32());var at=I(this);for(Ie=Ie||[];this.pos<at;)Ie.push(this.readFixed32());return Ie},readPackedSFixed32:function(Ie){if(this.type!==u.Bytes)return Ie.push(this.readSFixed32());var at=I(this);for(Ie=Ie||[];this.pos<at;)Ie.push(this.readSFixed32());return Ie},readPackedFixed64:function(Ie){if(this.type!==u.Bytes)return Ie.push(this.readFixed64());var at=I(this);for(Ie=Ie||[];this.pos<at;)Ie.push(this.readFixed64());return Ie},readPackedSFixed64:function(Ie){if(this.type!==u.Bytes)return Ie.push(this.readSFixed64());var at=I(this);for(Ie=Ie||[];this.pos<at;)Ie.push(this.readSFixed64());return Ie},skip:function(Ie){var at=7&Ie;if(at===u.Varint)for(;this.buf[this.pos++]>127;);else if(at===u.Bytes)this.pos=this.readVarint()+this.pos;else if(at===u.Fixed32)this.pos+=4;else{if(at!==u.Fixed64)throw new Error("Unimplemented type: "+at);this.pos+=8}},writeTag:function(Ie,at){this.writeVarint(Ie<<3|at)},realloc:function(Ie){for(var at=this.length||16;at<this.pos+Ie;)at*=2;if(at!==this.length){var It=new Uint8Array(at);It.set(this.buf),this.buf=It,this.length=at}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Ie){this.realloc(4),Xt(this.buf,Ie,this.pos),this.pos+=4},writeSFixed32:function(Ie){this.realloc(4),Xt(this.buf,Ie,this.pos),this.pos+=4},writeFixed64:function(Ie){this.realloc(8),Xt(this.buf,-1&Ie,this.pos),Xt(this.buf,Math.floor(Ie*_),this.pos+4),this.pos+=8},writeSFixed64:function(Ie){this.realloc(8),Xt(this.buf,-1&Ie,this.pos),Xt(this.buf,Math.floor(Ie*_),this.pos+4),this.pos+=8},writeVarint:function(Ie){(Ie=+Ie||0)>268435455||Ie<0?function(at,It){var An,nr;if(at>=0?(An=at%4294967296|0,nr=at/4294967296|0):(nr=~(-at/4294967296),4294967295^(An=~(-at%4294967296))?An=An+1|0:(An=0,nr=nr+1|0)),at>=18446744073709552e3||at<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");It.realloc(10),function(Dn,Fn,ur){ur.buf[ur.pos++]=127&Dn|128,Dn>>>=7,ur.buf[ur.pos++]=127&Dn|128,Dn>>>=7,ur.buf[ur.pos++]=127&Dn|128,Dn>>>=7,ur.buf[ur.pos++]=127&Dn|128,ur.buf[ur.pos]=127&(Dn>>>=7)}(An,0,It),function(Dn,Fn){var ur=(7&Dn)<<4;Fn.buf[Fn.pos++]|=ur|((Dn>>>=3)?128:0),Dn&&(Fn.buf[Fn.pos++]=127&Dn|((Dn>>>=7)?128:0),Dn&&(Fn.buf[Fn.pos++]=127&Dn|((Dn>>>=7)?128:0),Dn&&(Fn.buf[Fn.pos++]=127&Dn|((Dn>>>=7)?128:0),Dn&&(Fn.buf[Fn.pos++]=127&Dn|((Dn>>>=7)?128:0),Dn&&(Fn.buf[Fn.pos++]=127&Dn)))))}(nr,It)}(Ie,this):(this.realloc(4),this.buf[this.pos++]=127&Ie|(Ie>127?128:0),Ie<=127||(this.buf[this.pos++]=127&(Ie>>>=7)|(Ie>127?128:0),Ie<=127||(this.buf[this.pos++]=127&(Ie>>>=7)|(Ie>127?128:0),Ie<=127||(this.buf[this.pos++]=Ie>>>7&127))))},writeSVarint:function(Ie){this.writeVarint(Ie<0?2*-Ie-1:2*Ie)},writeBoolean:function(Ie){this.writeVarint(!!Ie)},writeString:function(Ie){Ie=String(Ie),this.realloc(4*Ie.length),this.pos++;var at=this.pos;this.pos=function(An,nr,Dn){for(var Fn,ur,ar=0;ar<nr.length;ar++){if((Fn=nr.charCodeAt(ar))>55295&&Fn<57344){if(!ur){Fn>56319||ar+1===nr.length?(An[Dn++]=239,An[Dn++]=191,An[Dn++]=189):ur=Fn;continue}if(Fn<56320){An[Dn++]=239,An[Dn++]=191,An[Dn++]=189,ur=Fn;continue}Fn=ur-55296<<10|Fn-56320|65536,ur=null}else ur&&(An[Dn++]=239,An[Dn++]=191,An[Dn++]=189,ur=null);Fn<128?An[Dn++]=Fn:(Fn<2048?An[Dn++]=Fn>>6|192:(Fn<65536?An[Dn++]=Fn>>12|224:(An[Dn++]=Fn>>18|240,An[Dn++]=Fn>>12&63|128),An[Dn++]=Fn>>6&63|128),An[Dn++]=63&Fn|128)}return Dn}(this.buf,Ie,this.pos);var It=this.pos-at;It>=128&&U(at,It,this),this.pos=at-1,this.writeVarint(It),this.pos+=It},writeFloat:function(Ie){this.realloc(4),m.write(this.buf,Ie,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Ie){this.realloc(8),m.write(this.buf,Ie,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Ie){var at=Ie.length;this.writeVarint(at),this.realloc(at);for(var It=0;It<at;It++)this.buf[this.pos++]=Ie[It]},writeRawMessage:function(Ie,at){this.pos++;var It=this.pos;Ie(at,this);var An=this.pos-It;An>=128&&U(It,An,this),this.pos=It-1,this.writeVarint(An),this.pos+=An},writeMessage:function(Ie,at,It){this.writeTag(Ie,u.Bytes),this.writeRawMessage(at,It)},writePackedVarint:function(Ie,at){at.length&&this.writeMessage(Ie,J,at)},writePackedSVarint:function(Ie,at){at.length&&this.writeMessage(Ie,ne,at)},writePackedBoolean:function(Ie,at){at.length&&this.writeMessage(Ie,Re,at)},writePackedFloat:function(Ie,at){at.length&&this.writeMessage(Ie,ce,at)},writePackedDouble:function(Ie,at){at.length&&this.writeMessage(Ie,_e,at)},writePackedFixed32:function(Ie,at){at.length&&this.writeMessage(Ie,Le,at)},writePackedSFixed32:function(Ie,at){at.length&&this.writeMessage(Ie,Fe,at)},writePackedFixed64:function(Ie,at){at.length&&this.writeMessage(Ie,Ye,at)},writePackedSFixed64:function(Ie,at){at.length&&this.writeMessage(Ie,ct,at)},writeBytesField:function(Ie,at){this.writeTag(Ie,u.Bytes),this.writeBytes(at)},writeFixed32Field:function(Ie,at){this.writeTag(Ie,u.Fixed32),this.writeFixed32(at)},writeSFixed32Field:function(Ie,at){this.writeTag(Ie,u.Fixed32),this.writeSFixed32(at)},writeFixed64Field:function(Ie,at){this.writeTag(Ie,u.Fixed64),this.writeFixed64(at)},writeSFixed64Field:function(Ie,at){this.writeTag(Ie,u.Fixed64),this.writeSFixed64(at)},writeVarintField:function(Ie,at){this.writeTag(Ie,u.Varint),this.writeVarint(at)},writeSVarintField:function(Ie,at){this.writeTag(Ie,u.Varint),this.writeSVarint(at)},writeStringField:function(Ie,at){this.writeTag(Ie,u.Bytes),this.writeString(at)},writeFloatField:function(Ie,at){this.writeTag(Ie,u.Fixed32),this.writeFloat(at)},writeDoubleField:function(Ie,at){this.writeTag(Ie,u.Fixed64),this.writeDouble(at)},writeBooleanField:function(Ie,at){this.writeVarintField(Ie,!!at)}},bc}var bm=h(cv());const xm=3;function zd(m,u,p){m===1&&p.readMessage(hv,u)}function hv(m,u,p){if(m===3){const{id:_,bitmap:T,width:I,height:O,left:U,top:J,advance:ne}=p.readMessage(Tp,{});u.push({id:_,bitmap:new Of({width:I+2*xm,height:O+2*xm},T),metrics:{width:I,height:O,left:U,top:J,advance:ne}})}}function Tp(m,u,p){m===1?u.id=p.readVarint():m===2?u.bitmap=p.readBytes():m===3?u.width=p.readVarint():m===4?u.height=p.readVarint():m===5?u.left=p.readSVarint():m===6?u.top=p.readSVarint():m===7&&(u.advance=p.readVarint())}const Ng=xm;function fv(m){let u=0,p=0;for(const O of m)u+=O.w*O.h,p=Math.max(p,O.w);m.sort((O,U)=>U.h-O.h);const _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),p),h:1/0}];let T=0,I=0;for(const O of m)for(let U=_.length-1;U>=0;U--){const J=_[U];if(!(O.w>J.w||O.h>J.h)){if(O.x=J.x,O.y=J.y,I=Math.max(I,O.y+O.h),T=Math.max(T,O.x+O.w),O.w===J.w&&O.h===J.h){const ne=_.pop();U<_.length&&(_[U]=ne)}else O.h===J.h?(J.x+=O.w,J.w-=O.w):O.w===J.w?(J.y+=O.h,J.h-=O.h):(_.push({x:J.x+O.w,y:J.y,w:J.w-O.w,h:O.h}),J.y+=O.h,J.h-=O.h);break}}return{w:T,h:I,fill:u/(T*I)||0}}const xu=1;class Mp{constructor(u,{pixelRatio:p,version:_,stretchX:T,stretchY:I,content:O,textFitWidth:U,textFitHeight:J}){this.paddedRect=u,this.pixelRatio=p,this.stretchX=T,this.stretchY=I,this.content=O,this.version=_,this.textFitWidth=U,this.textFitHeight=J}get tl(){return[this.paddedRect.x+xu,this.paddedRect.y+xu]}get br(){return[this.paddedRect.x+this.paddedRect.w-xu,this.paddedRect.y+this.paddedRect.h-xu]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*xu)/this.pixelRatio,(this.paddedRect.h-2*xu)/this.pixelRatio]}}class dv{constructor(u,p){const _={},T={};this.haveRenderCallbacks=[];const I=[];this.addImages(u,_,I),this.addImages(p,T,I);const{w:O,h:U}=fv(I),J=new Vu({width:O||1,height:U||1});for(const ne in u){const ce=u[ne],_e=_[ne].paddedRect;Vu.copy(ce.data,J,{x:0,y:0},{x:_e.x+xu,y:_e.y+xu},ce.data)}for(const ne in p){const ce=p[ne],_e=T[ne].paddedRect,Re=_e.x+xu,Le=_e.y+xu,Fe=ce.data.width,Ye=ce.data.height;Vu.copy(ce.data,J,{x:0,y:0},{x:Re,y:Le},ce.data),Vu.copy(ce.data,J,{x:0,y:Ye-1},{x:Re,y:Le-1},{width:Fe,height:1}),Vu.copy(ce.data,J,{x:0,y:0},{x:Re,y:Le+Ye},{width:Fe,height:1}),Vu.copy(ce.data,J,{x:Fe-1,y:0},{x:Re-1,y:Le},{width:1,height:Ye}),Vu.copy(ce.data,J,{x:0,y:0},{x:Re+Fe,y:Le},{width:1,height:Ye})}this.image=J,this.iconPositions=_,this.patternPositions=T}addImages(u,p,_){for(const T in u){const I=u[T],O={x:0,y:0,w:I.data.width+2*xu,h:I.data.height+2*xu};_.push(O),p[T]=new Mp(O,I),I.hasRenderCallback&&this.haveRenderCallbacks.push(T)}}patchUpdatedImages(u,p){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const _ in u.updatedImages)this.patchUpdatedImage(this.iconPositions[_],u.getImage(_),p),this.patchUpdatedImage(this.patternPositions[_],u.getImage(_),p)}patchUpdatedImage(u,p,_){if(!u||!p||u.version===p.version)return;u.version=p.version;const[T,I]=u.tl;_.update(p.data,void 0,{x:T,y:I})}}var fl;Mr("ImagePosition",Mp),Mr("ImageAtlas",dv),l.ag=void 0,(fl=l.ag||(l.ag={}))[fl.none=0]="none",fl[fl.horizontal=1]="horizontal",fl[fl.vertical=2]="vertical",fl[fl.horizontalOnly=3]="horizontalOnly";const kg=-17;class kl{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,p,_){const T=new kl;return T.scale=u||1,T.fontStack=p,T.verticalAlign=_||"bottom",T}static forImage(u,p){const _=new kl;return _.imageName=u,_.verticalAlign=p||"bottom",_}}class Ap{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,p){const _=new Ap;for(let T=0;T<u.sections.length;T++){const I=u.sections[T];I.image?_.addImageSection(I):_.addTextSection(I,p)}return _}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let p="";for(let _=0;_<u.length;_++){const T=u.charCodeAt(_+1)||null,I=u.charCodeAt(_-1)||null;p+=T&&Je(T)&&!Lh[u[_+1]]||I&&Je(I)&&!Lh[u[_-1]]||!Lh[u[_]]?u[_]:Lh[u[_]]}return p}(this.text)}trim(){let u=0;for(let _=0;_<this.text.length&&Fg[this.text.charCodeAt(_)];_++)u++;let p=this.text.length;for(let _=this.text.length-1;_>=0&&_>=u&&Fg[this.text.charCodeAt(_)];_--)p--;this.text=this.text.substring(u,p),this.sectionIndex=this.sectionIndex.slice(u,p)}substring(u,p){const _=new Ap;return _.text=this.text.substring(u,p),_.sectionIndex=this.sectionIndex.slice(u,p),_.sections=this.sections,_}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,p)=>Math.max(u,this.sections[p].scale),0)}getMaxImageSize(u){let p=0,_=0;for(let T=0;T<this.length();T++){const I=this.getSection(T);if(I.imageName){const O=u[I.imageName];if(!O)continue;const U=O.displaySize;p=Math.max(p,U[0]),_=Math.max(_,U[1])}}return{maxImageWidth:p,maxImageHeight:_}}addTextSection(u,p){this.text+=u.text,this.sections.push(kl.forText(u.scale,u.fontStack||p,u.verticalAlign));const _=this.sections.length-1;for(let T=0;T<u.text.length;++T)this.sectionIndex.push(_)}addImageSection(u){const p=u.image?u.image.name:"";if(p.length===0)return void it("Can't add FormattedSection with an empty image.");const _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(kl.forImage(p,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):it("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wm(m,u,p,_,T,I,O,U,J,ne,ce,_e,Re,Le,Fe){const Ye=Ap.fromFeature(m,T);let ct;_e===l.ag.vertical&&Ye.verticalizePunctuation();const{processBidirectionalText:wt,processStyledBidirectionalText:Xt}=bn;if(wt&&Ye.sections.length===1){ct=[];const at=wt(Ye.toString(),mv(Ye,ne,I,u,_,Le));for(const It of at){const An=new Ap;An.text=It,An.sections=Ye.sections;for(let nr=0;nr<It.length;nr++)An.sectionIndex.push(0);ct.push(An)}}else if(Xt){ct=[];const at=Xt(Ye.text,Ye.sectionIndex,mv(Ye,ne,I,u,_,Le));for(const It of at){const An=new Ap;An.text=It[0],An.sectionIndex=It[1],An.sections=Ye.sections,ct.push(An)}}else ct=function(at,It){const An=[],nr=at.text;let Dn=0;for(const Fn of It)An.push(at.substring(Dn,Fn)),Dn=Fn;return Dn<nr.length&&An.push(at.substring(Dn,nr.length)),An}(Ye,mv(Ye,ne,I,u,_,Le));const Rt=[],Ie={positionedLines:Rt,text:Ye.toString(),top:ce[1],bottom:ce[1],left:ce[0],right:ce[0],writingMode:_e,iconsInText:!1,verticalizable:!1};return function(at,It,An,nr,Dn,Fn,ur,ar,pr,Vn,kr,Qr){let Kr=0,zr=0,Ki=0,Oo=0;const gs=ar==="right"?1:ar==="left"?0:.5,es=Qo/Qr;let pl=0;for(const ao of Dn){ao.trim();const Ao=ao.getMaxScale(),Fl={positionedGlyphs:[],lineOffset:0};at.positionedLines[pl]=Fl;const ml=Fl.positionedGlyphs;let gl=0;if(!ao.length()){zr+=Fn,++pl;continue}const $c=i1(nr,ao,es);for(let au=0;au<ao.length();au++){const Fs=ao.getSection(au),vl=ao.getSectionIndex(au),ys=ao.getCharCode(au),ts=kE(pr,kr,ys);let po;if(Fs.imageName){if(at.iconsInText=!0,Fs.scale=Fs.scale*es,po=Ox(Fs,ts,Ao,$c,nr),!po)continue;gl=Math.max(gl,po.imageOffset)}else if(po=FE(Fs,ys,ts,$c,It,An),!po)continue;const{rect:nc,metrics:$d,baselineOffset:wc}=po;ml.push({glyph:ys,imageName:Fs.imageName,x:Kr,y:zr+wc+kg,vertical:ts,scale:Fs.scale,fontStack:Fs.fontStack,sectionIndex:vl,metrics:$d,rect:nc}),ts?(at.verticalizable=!0,Kr+=(Fs.imageName?$d.advance:Qo)*Fs.scale+Vn):Kr+=$d.advance*Fs.scale+Vn}ml.length!==0&&(Ki=Math.max(Kr-Vn,Ki),Nx(ml,0,ml.length-1,gs)),Kr=0,Fl.lineOffset=Math.max(gl,(Ao-1)*Qo);const Ks=Fn*Ao+gl;zr+=Ks,Oo=Math.max(Ks,Oo),++pl}const{horizontalAlign:ks,verticalAlign:vs}=zg(ur);(function(ao,Ao,Fl,ml,gl,$c,Ks,au,Fs){const vl=(Ao-Fl)*gl;let ys=0;ys=$c!==Ks?-au*ml-kg:-ml*Fs*Ks+.5*Ks;for(const ts of ao)for(const po of ts.positionedGlyphs)po.x+=vl,po.y+=ys})(at.positionedLines,gs,ks,vs,Ki,Oo,Fn,zr,Dn.length),at.top+=-vs*zr,at.bottom=at.top+zr,at.left+=-ks*Ki,at.right=at.left+Ki}(Ie,u,p,_,ct,O,U,J,_e,ne,Re,Fe),!function(at){for(const It of at)if(It.positionedGlyphs.length!==0)return!1;return!0}(Rt)&&Ie}const Fg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},NE={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Vf={40:!0};function Bg(m,u,p,_,T,I){if(u.imageName){const O=_[u.imageName];return O?O.displaySize[0]*u.scale*Qo/I+T:0}{const O=p[u.fontStack],U=O&&O[m];return U?U.metrics.advance*u.scale+T:0}}function pv(m,u,p,_){const T=Math.pow(m-u,2);return _?m<u?T/2:2*T:T+Math.abs(p)*p}function Sm(m,u,p){let _=0;return m===10&&(_-=1e4),p&&(_+=150),m!==40&&m!==65288||(_+=50),u!==41&&u!==65289||(_+=50),_}function n1(m,u,p,_,T,I){let O=null,U=pv(u,p,T,I);for(const J of _){const ne=pv(u-J.x,p,T,I)+J.badness;ne<=U&&(O=J,U=ne)}return{index:m,x:u,priorBreak:O,badness:U}}function r1(m){return m?r1(m.priorBreak).concat(m.index):[]}function mv(m,u,p,_,T,I){if(!m)return[];const O=[],U=function(_e,Re,Le,Fe,Ye,ct){let wt=0;for(let Xt=0;Xt<_e.length();Xt++){const Rt=_e.getSection(Xt);wt+=Bg(_e.getCharCode(Xt),Rt,Fe,Ye,Re,ct)}return wt/Math.max(1,Math.ceil(wt/Le))}(m,u,p,_,T,I),J=m.text.indexOf("​")>=0;let ne=0;for(let _e=0;_e<m.length();_e++){const Re=m.getSection(_e),Le=m.getCharCode(_e);if(Fg[Le]||(ne+=Bg(Le,Re,_,T,u,I)),_e<m.length()-1){const Fe=!((ce=Le)<11904)&&(!!Jr["CJK Compatibility Forms"](ce)||!!Jr["CJK Compatibility"](ce)||!!Jr["CJK Strokes"](ce)||!!Jr["CJK Symbols and Punctuation"](ce)||!!Jr["Enclosed CJK Letters and Months"](ce)||!!Jr["Halfwidth and Fullwidth Forms"](ce)||!!Jr["Ideographic Description Characters"](ce)||!!Jr["Vertical Forms"](ce)||ze.test(String.fromCodePoint(ce)));(NE[Le]||Fe||Re.imageName||_e!==m.length()-2&&Vf[m.getCharCode(_e+1)])&&O.push(n1(_e+1,ne,U,O,Sm(Le,m.getCharCode(_e+1),Fe&&J),!1))}}var ce;return r1(n1(m.length(),ne,U,O,0,!0))}function zg(m){let u=.5,p=.5;switch(m){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(m){case"bottom":case"bottom-right":case"bottom-left":p=1;break;case"top":case"top-right":case"top-left":p=0}return{horizontalAlign:u,verticalAlign:p}}function i1(m,u,p){const _=u.getMaxScale()*Qo,{maxImageWidth:T,maxImageHeight:I}=u.getMaxImageSize(m),O=Math.max(_,I*p);return{verticalLineContentWidth:Math.max(_,T*p),horizontalLineContentHeight:O}}function Ix(m){switch(m){case"top":return 0;case"center":return .5;default:return 1}}function kE(m,u,p){return!(m===l.ag.horizontal||!u&&!Ke(p)||u&&(Fg[p]||(_=p,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(_)))));var _}function FE(m,u,p,_,T,I){const O=I[m.fontStack],U=function(ne,ce,_e,Re){if(ne&&ne.rect)return ne;const Le=ce[_e.fontStack],Fe=Le&&Le[Re];return Fe?{rect:null,metrics:Fe.metrics}:null}(O&&O[u],T,m,u);if(U===null)return null;let J;if(p)J=_.verticalLineContentWidth-m.scale*Qo;else{const ne=Ix(m.verticalAlign);J=(_.horizontalLineContentHeight-m.scale*Qo)*ne}return{rect:U.rect,metrics:U.metrics,baselineOffset:J}}function Ox(m,u,p,_,T){const I=T[m.imageName];if(!I)return null;const O=I.paddedRect,U=I.displaySize,J={width:U[0],height:U[1],left:xu,top:-3,advance:u?U[1]:U[0]};let ne;if(u)ne=_.verticalLineContentWidth-U[1]*m.scale;else{const ce=Ix(m.verticalAlign);ne=(_.horizontalLineContentHeight-U[1]*m.scale)*ce}return{rect:O,metrics:J,baselineOffset:ne,imageOffset:(u?U[0]:U[1])*m.scale-Qo*p}}function Nx(m,u,p,_){if(_===0)return;const T=m[p],I=(m[p].x+T.metrics.advance*T.scale)*_;for(let O=u;O<=p;O++)m[O].x-=I}function Em(m,u,p){const{horizontalAlign:_,verticalAlign:T}=zg(p),I=u[0]-m.displaySize[0]*_,O=u[1]-m.displaySize[1]*T;return{image:m,top:O,bottom:O+m.displaySize[1],left:I,right:I+m.displaySize[0]}}function Ug(m){var u,p;let _=m.left,T=m.top,I=m.right-_,O=m.bottom-T;const U=(u=m.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",J=(p=m.image.textFitHeight)!==null&&p!==void 0?p:"stretchOrShrink",ne=(m.image.content[2]-m.image.content[0])/(m.image.content[3]-m.image.content[1]);if(J==="proportional"){if(U==="stretchOnly"&&I/O<ne||U==="proportional"){const ce=Math.ceil(O*ne);_*=ce/I,I=ce}}else if(U==="proportional"&&J==="stretchOnly"&&ne!==0&&I/O>ne){const ce=Math.ceil(I/ne);T*=ce/O,O=ce}return{x1:_,y1:T,x2:_+I,y2:T+O}}function a1(m,u,p,_,T,I){const O=m.image;let U;if(O.content){const ct=O.content,wt=O.pixelRatio||1;U=[ct[0]/wt,ct[1]/wt,O.displaySize[0]-ct[2]/wt,O.displaySize[1]-ct[3]/wt]}const J=u.left*I,ne=u.right*I;let ce,_e,Re,Le;p==="width"||p==="both"?(Le=T[0]+J-_[3],_e=T[0]+ne+_[1]):(Le=T[0]+(J+ne-O.displaySize[0])/2,_e=Le+O.displaySize[0]);const Fe=u.top*I,Ye=u.bottom*I;return p==="height"||p==="both"?(ce=T[1]+Fe-_[0],Re=T[1]+Ye+_[2]):(ce=T[1]+(Fe+Ye-O.displaySize[1])/2,Re=ce+O.displaySize[1]),{image:O,top:ce,right:_e,bottom:Re,left:Le,collisionPadding:U}}const Tm=255,lf=128,Gf=Tm*lf;function Cp(m,u){const{expression:p}=u;if(p.kind==="constant")return{kind:"constant",layoutSize:p.evaluate(new mn(m+1))};if(p.kind==="source")return{kind:"source"};{const{zoomStops:_,interpolationType:T}=p;let I=0;for(;I<_.length&&_[I]<=m;)I++;I=Math.max(0,I-1);let O=I;for(;O<_.length&&_[O]<m+1;)O++;O=Math.min(_.length-1,O);const U=_[I],J=_[O];return p.kind==="composite"?{kind:"composite",minZoom:U,maxZoom:J,interpolationType:T}:{kind:"camera",minZoom:U,maxZoom:J,minSize:p.evaluate(new mn(U)),maxSize:p.evaluate(new mn(J)),interpolationType:T}}}function gv(m,u,p){let _="never";const T=m.get(u);return T?_=T:m.get(p)&&(_="always"),_}const Mo=Nd.VectorTileFeature.types,o1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vv(m,u,p,_,T,I,O,U,J,ne,ce,_e,Re){const Le=U?Math.min(Gf,Math.round(U[0])):0,Fe=U?Math.min(Gf,Math.round(U[1])):0;m.emplaceBack(u,p,Math.round(32*_),Math.round(32*T),I,O,(Le<<1)+(J?1:0),Fe,16*ne,16*ce,256*_e,256*Re)}function yv(m,u,p){m.emplaceBack(u.x,u.y,p),m.emplaceBack(u.x,u.y,p),m.emplaceBack(u.x,u.y,p),m.emplaceBack(u.x,u.y,p)}function BE(m){for(const u of m.sections)if(en(u.text))return!0;return!1}class s1{constructor(u){this.layoutVertexArray=new xn,this.indexArray=new wr,this.programConfigurations=u,this.segments=new Fr,this.dynamicLayoutVertexArray=new En,this.opacityVertexArray=new zn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Q}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,p,_,T){this.isEmpty()||(_&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,jf.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,_m.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,o1,!0),this.opacityVertexBuffer.itemSize=1),(_||T)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Mr("SymbolBuffers",s1);class l1{constructor(u,p,_){this.layoutVertexArray=new u,this.layoutAttributes=p,this.indexArray=new _,this.segments=new Fr,this.collisionVertexArray=new kn}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,e1.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Mr("CollisionBuffers",l1);class qf{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(O=>O.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const p=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Cp(this.zoom,p["text-size"]),this.iconSizeData=Cp(this.zoom,p["icon-size"]);const _=this.layers[0].layout,T=_.get("symbol-sort-key"),I=_.get("symbol-z-order");this.canOverlap=gv(_,"text-overlap","text-allow-overlap")!=="never"||gv(_,"icon-overlap","icon-allow-overlap")!=="never"||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=I!=="viewport-y"&&!T.isConstant(),this.sortFeaturesByY=(I==="viewport-y"||I==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(O=>l.ag[O])),this.stateDependentLayerIds=this.layers.filter(O=>O.isStateDependent()).map(O=>O.id),this.sourceID=u.sourceID}createArrays(){this.text=new s1(new If(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new s1(new If(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new Ae,this.lineVertexArray=new Pe,this.symbolInstances=new be,this.textAnchorOffsets=new Ze}calculateGlyphDependencies(u,p,_,T,I){for(let O=0;O<u.length;O++)if(p[u.charCodeAt(O)]=!0,(_||T)&&I){const U=Lh[u.charAt(O)];U&&(p[U.charCodeAt(0)]=!0)}}populate(u,p,_){const T=this.layers[0],I=T.layout,O=I.get("text-font"),U=I.get("text-field"),J=I.get("icon-image"),ne=(U.value.kind!=="constant"||U.value.value instanceof Lt&&!U.value.value.isEmpty()||U.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),ce=J.value.kind!=="constant"||!!J.value.value||Object.keys(J.parameters).length>0,_e=I.get("symbol-sort-key");if(this.features=[],!ne&&!ce)return;const Re=p.iconDependencies,Le=p.glyphDependencies,Fe=p.availableImages,Ye=new mn(this.zoom);for(const{feature:ct,id:wt,index:Xt,sourceLayerIndex:Rt}of u){const Ie=T._featureFilter.needGeometry,at=ju(ct,Ie);if(!T._featureFilter.filter(Ye,at,_))continue;let It,An;if(Ie||(at.geometry=ef(ct)),ne){const Dn=T.getValueAndResolveTokens("text-field",at,_,Fe),Fn=Lt.factory(Dn),ur=this.hasRTLText=this.hasRTLText||BE(Fn);(!ur||bn.getRTLTextPluginStatus()==="unavailable"||ur&&bn.isParsed())&&(It=Bd(Fn,T,at))}if(ce){const Dn=T.getValueAndResolveTokens("icon-image",at,_,Fe);An=Dn instanceof mr?Dn:mr.fromString(Dn)}if(!It&&!An)continue;const nr=this.sortFeaturesByKey?_e.evaluate(at,{},_):void 0;if(this.features.push({id:wt,text:It,icon:An,index:Xt,sourceLayerIndex:Rt,geometry:at.geometry,properties:ct.properties,type:Mo[ct.type],sortKey:nr}),An&&(Re[An.name]=!0),It){const Dn=O.evaluate(at,{},_).join(","),Fn=I.get("text-rotation-alignment")!=="viewport"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ag.vertical)>=0;for(const ur of It.sections)if(ur.image)Re[ur.image.name]=!0;else{const ar=Ph(It.toString()),pr=ur.fontStack||Dn,Vn=Le[pr]=Le[pr]||{};this.calculateGlyphDependencies(ur.text,Vn,Fn,this.allowVerticalPlacement,ar)}}}I.get("symbol-placement")==="line"&&(this.features=function(ct){const wt={},Xt={},Rt=[];let Ie=0;function at(Dn){Rt.push(ct[Dn]),Ie++}function It(Dn,Fn,ur){const ar=Xt[Dn];return delete Xt[Dn],Xt[Fn]=ar,Rt[ar].geometry[0].pop(),Rt[ar].geometry[0]=Rt[ar].geometry[0].concat(ur[0]),ar}function An(Dn,Fn,ur){const ar=wt[Fn];return delete wt[Fn],wt[Dn]=ar,Rt[ar].geometry[0].shift(),Rt[ar].geometry[0]=ur[0].concat(Rt[ar].geometry[0]),ar}function nr(Dn,Fn,ur){const ar=ur?Fn[0][Fn[0].length-1]:Fn[0][0];return`${Dn}:${ar.x}:${ar.y}`}for(let Dn=0;Dn<ct.length;Dn++){const Fn=ct[Dn],ur=Fn.geometry,ar=Fn.text?Fn.text.toString():null;if(!ar){at(Dn);continue}const pr=nr(ar,ur),Vn=nr(ar,ur,!0);if(pr in Xt&&Vn in wt&&Xt[pr]!==wt[Vn]){const kr=An(pr,Vn,ur),Qr=It(pr,Vn,Rt[kr].geometry);delete wt[pr],delete Xt[Vn],Xt[nr(ar,Rt[Qr].geometry,!0)]=Qr,Rt[kr].geometry=null}else pr in Xt?It(pr,Vn,ur):Vn in wt?An(pr,Vn,ur):(at(Dn),wt[pr]=Ie-1,Xt[Vn]=Ie-1)}return Rt.filter(Dn=>Dn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ct,wt)=>ct.sortKey-wt.sortKey)}update(u,p,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,p,this.layers,_),this.icon.programConfigurations.updatePaintArrays(u,p,this.layers,_))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,p){const _=this.lineVertexArray.length;if(u.segment!==void 0){let T=u.dist(p[u.segment+1]),I=u.dist(p[u.segment]);const O={};for(let U=u.segment+1;U<p.length;U++)O[U]={x:p[U].x,y:p[U].y,tileUnitDistanceFromAnchor:T},U<p.length-1&&(T+=p[U+1].dist(p[U]));for(let U=u.segment||0;U>=0;U--)O[U]={x:p[U].x,y:p[U].y,tileUnitDistanceFromAnchor:I},U>0&&(I+=p[U-1].dist(p[U]));for(let U=0;U<p.length;U++){const J=O[U];this.lineVertexArray.emplaceBack(J.x,J.y,J.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}}addSymbols(u,p,_,T,I,O,U,J,ne,ce,_e,Re){const Le=u.indexArray,Fe=u.layoutVertexArray,Ye=u.segments.prepareSegment(4*p.length,Fe,Le,this.canOverlap?O.sortKey:void 0),ct=this.glyphOffsetArray.length,wt=Ye.vertexLength,Xt=this.allowVerticalPlacement&&U===l.ag.vertical?Math.PI/2:0,Rt=O.text&&O.text.sections;for(let Ie=0;Ie<p.length;Ie++){const{tl:at,tr:It,bl:An,br:nr,tex:Dn,pixelOffsetTL:Fn,pixelOffsetBR:ur,minFontScaleX:ar,minFontScaleY:pr,glyphOffset:Vn,isSDF:kr,sectionIndex:Qr}=p[Ie],Kr=Ye.vertexLength,zr=Vn[1];vv(Fe,J.x,J.y,at.x,zr+at.y,Dn.x,Dn.y,_,kr,Fn.x,Fn.y,ar,pr),vv(Fe,J.x,J.y,It.x,zr+It.y,Dn.x+Dn.w,Dn.y,_,kr,ur.x,Fn.y,ar,pr),vv(Fe,J.x,J.y,An.x,zr+An.y,Dn.x,Dn.y+Dn.h,_,kr,Fn.x,ur.y,ar,pr),vv(Fe,J.x,J.y,nr.x,zr+nr.y,Dn.x+Dn.w,Dn.y+Dn.h,_,kr,ur.x,ur.y,ar,pr),yv(u.dynamicLayoutVertexArray,J,Xt),Le.emplaceBack(Kr,Kr+2,Kr+1),Le.emplaceBack(Kr+1,Kr+2,Kr+3),Ye.vertexLength+=4,Ye.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vn[0]),Ie!==p.length-1&&Qr===p[Ie+1].sectionIndex||u.programConfigurations.populatePaintArrays(Fe.length,O,O.index,{},Re,Rt&&Rt[Qr])}u.placedSymbolArray.emplaceBack(J.x,J.y,ct,this.glyphOffsetArray.length-ct,wt,ne,ce,J.segment,_?_[0]:0,_?_[1]:0,T[0],T[1],U,0,!1,0,_e)}_addCollisionDebugVertex(u,p,_,T,I,O){return p.emplaceBack(0,0),u.emplaceBack(_.x,_.y,T,I,Math.round(O.x),Math.round(O.y))}addCollisionDebugVertices(u,p,_,T,I,O,U){const J=I.segments.prepareSegment(4,I.layoutVertexArray,I.indexArray),ne=J.vertexLength,ce=I.layoutVertexArray,_e=I.collisionVertexArray,Re=U.anchorX,Le=U.anchorY;this._addCollisionDebugVertex(ce,_e,O,Re,Le,new A(u,p)),this._addCollisionDebugVertex(ce,_e,O,Re,Le,new A(_,p)),this._addCollisionDebugVertex(ce,_e,O,Re,Le,new A(_,T)),this._addCollisionDebugVertex(ce,_e,O,Re,Le,new A(u,T)),J.vertexLength+=4;const Fe=I.indexArray;Fe.emplaceBack(ne,ne+1),Fe.emplaceBack(ne+1,ne+2),Fe.emplaceBack(ne+2,ne+3),Fe.emplaceBack(ne+3,ne),J.primitiveLength+=4}addDebugCollisionBoxes(u,p,_,T){for(let I=u;I<p;I++){const O=this.collisionBoxArray.get(I);this.addCollisionDebugVertices(O.x1,O.y1,O.x2,O.y2,T?this.textCollisionBox:this.iconCollisionBox,O.anchorPoint,_)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new l1(Un,sf.members,dr),this.iconCollisionBox=new l1(Un,sf.members,dr);for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}}_deserializeCollisionBoxesForSymbol(u,p,_,T,I,O,U,J,ne){const ce={};for(let _e=p;_e<_;_e++){const Re=u.get(_e);ce.textBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},ce.textFeatureIndex=Re.featureIndex;break}for(let _e=T;_e<I;_e++){const Re=u.get(_e);ce.verticalTextBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},ce.verticalTextFeatureIndex=Re.featureIndex;break}for(let _e=O;_e<U;_e++){const Re=u.get(_e);ce.iconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},ce.iconFeatureIndex=Re.featureIndex;break}for(let _e=J;_e<ne;_e++){const Re=u.get(_e);ce.verticalIconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},ce.verticalIconFeatureIndex=Re.featureIndex;break}return ce}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let p=0;p<this.symbolInstances.length;p++){const _=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,p){const _=u.placedSymbolArray.get(p),T=_.vertexStartIndex+4*_.numGlyphs;for(let I=_.vertexStartIndex;I<T;I+=4)u.indexArray.emplaceBack(I,I+2,I+1),u.indexArray.emplaceBack(I+1,I+2,I+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const p=Math.sin(u),_=Math.cos(u),T=[],I=[],O=[];for(let U=0;U<this.symbolInstances.length;++U){O.push(U);const J=this.symbolInstances.get(U);T.push(0|Math.round(p*J.anchorX+_*J.anchorY)),I.push(J.featureIndex)}return O.sort((U,J)=>T[U]-T[J]||I[J]-I[U]),O}addToSortKeyRanges(u,p){const _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===p?_.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const p of this.symbolInstanceIndexes){const _=this.symbolInstances.get(p);this.featureSortOrder.push(_.featureIndex),[_.rightJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.leftJustifiedTextSymbolIndex].forEach((T,I,O)=>{T>=0&&O.indexOf(T)===I&&this.addIndicesForPlacedSymbol(this.text,T)}),_.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_.verticalPlacedTextSymbolIndex),_.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.placedIconSymbolIndex),_.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Pp,_v;Mr("SymbolBucket",qf,{omit:["layers","collisionBoxArray","features","compareText"]}),qf.MAX_GLYPHS=65535,qf.addDynamicAttributes=yv;var Mm={get paint(){return _v=_v||new Li({"icon-opacity":new Bn(ge.paint_symbol["icon-opacity"]),"icon-color":new Bn(ge.paint_symbol["icon-color"]),"icon-halo-color":new Bn(ge.paint_symbol["icon-halo-color"]),"icon-halo-width":new Bn(ge.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Bn(ge.paint_symbol["icon-halo-blur"]),"icon-translate":new jn(ge.paint_symbol["icon-translate"]),"icon-translate-anchor":new jn(ge.paint_symbol["icon-translate-anchor"]),"text-opacity":new Bn(ge.paint_symbol["text-opacity"]),"text-color":new Bn(ge.paint_symbol["text-color"],{runtimeType:Hn,getOverride:m=>m.textColor,hasOverride:m=>!!m.textColor}),"text-halo-color":new Bn(ge.paint_symbol["text-halo-color"]),"text-halo-width":new Bn(ge.paint_symbol["text-halo-width"]),"text-halo-blur":new Bn(ge.paint_symbol["text-halo-blur"]),"text-translate":new jn(ge.paint_symbol["text-translate"]),"text-translate-anchor":new jn(ge.paint_symbol["text-translate-anchor"])})},get layout(){return Pp=Pp||new Li({"symbol-placement":new jn(ge.layout_symbol["symbol-placement"]),"symbol-spacing":new jn(ge.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jn(ge.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Bn(ge.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jn(ge.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jn(ge.layout_symbol["icon-allow-overlap"]),"icon-overlap":new jn(ge.layout_symbol["icon-overlap"]),"icon-ignore-placement":new jn(ge.layout_symbol["icon-ignore-placement"]),"icon-optional":new jn(ge.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jn(ge.layout_symbol["icon-rotation-alignment"]),"icon-size":new Bn(ge.layout_symbol["icon-size"]),"icon-text-fit":new jn(ge.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jn(ge.layout_symbol["icon-text-fit-padding"]),"icon-image":new Bn(ge.layout_symbol["icon-image"]),"icon-rotate":new Bn(ge.layout_symbol["icon-rotate"]),"icon-padding":new Bn(ge.layout_symbol["icon-padding"]),"icon-keep-upright":new jn(ge.layout_symbol["icon-keep-upright"]),"icon-offset":new Bn(ge.layout_symbol["icon-offset"]),"icon-anchor":new Bn(ge.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jn(ge.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jn(ge.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jn(ge.layout_symbol["text-rotation-alignment"]),"text-field":new Bn(ge.layout_symbol["text-field"]),"text-font":new Bn(ge.layout_symbol["text-font"]),"text-size":new Bn(ge.layout_symbol["text-size"]),"text-max-width":new Bn(ge.layout_symbol["text-max-width"]),"text-line-height":new jn(ge.layout_symbol["text-line-height"]),"text-letter-spacing":new Bn(ge.layout_symbol["text-letter-spacing"]),"text-justify":new Bn(ge.layout_symbol["text-justify"]),"text-radial-offset":new Bn(ge.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jn(ge.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Bn(ge.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Bn(ge.layout_symbol["text-anchor"]),"text-max-angle":new jn(ge.layout_symbol["text-max-angle"]),"text-writing-mode":new jn(ge.layout_symbol["text-writing-mode"]),"text-rotate":new Bn(ge.layout_symbol["text-rotate"]),"text-padding":new jn(ge.layout_symbol["text-padding"]),"text-keep-upright":new jn(ge.layout_symbol["text-keep-upright"]),"text-transform":new Bn(ge.layout_symbol["text-transform"]),"text-offset":new Bn(ge.layout_symbol["text-offset"]),"text-allow-overlap":new jn(ge.layout_symbol["text-allow-overlap"]),"text-overlap":new jn(ge.layout_symbol["text-overlap"]),"text-ignore-placement":new jn(ge.layout_symbol["text-ignore-placement"]),"text-optional":new jn(ge.layout_symbol["text-optional"])})}};class bv{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Ne,this.defaultValue=u}evaluate(u){if(u.formattedSection){const p=this.defaultValue.property.overrides;if(p&&p.hasOverride(u.formattedSection))return p.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Mr("FormatSectionOverride",bv,{omit:["defaultValue"]});class uf extends Ai{constructor(u){super(u,Mm)}recalculate(u,p){if(super.recalculate(u,p),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const _=this.layout.get("text-writing-mode");if(_){const T=[];for(const I of _)T.indexOf(I)<0&&T.push(I);this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,p,_,T){const I=this.layout.get(u).evaluate(p,{},_,T),O=this._unevaluatedLayout._values[u];return O.isDataDriven()||sl(O.value)||!I?I:function(U,J){return J.replace(/{([^{}]+)}/g,(ne,ce)=>U&&ce in U?String(U[ce]):"")}(p.properties,I)}createBucket(u){return new qf(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of Mm.paint.overridableProperties){if(!uf.hasPaintOverride(this.layout,u))continue;const p=this.paint.get(u),_=new bv(p),T=new Lo(_,p.property.specification);let I=null;I=p.value.kind==="constant"||p.value.kind==="source"?new Hs("source",T):new ls("composite",T,p.value.zoomStops),this.paint._values[u]=new Xn(p.property,I,p.parameters)}}_handleOverridablePaintPropertyUpdate(u,p,_){return!(!this.layout||p.isDataDriven()||_.isDataDriven())&&uf.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,p){const _=u.get("text-field"),T=Mm.paint.properties[p];let I=!1;const O=U=>{for(const J of U)if(T.overrides&&T.overrides.hasOverride(J))return void(I=!0)};if(_.value.kind==="constant"&&_.value.value instanceof Lt)O(_.value.value.sections);else if(_.value.kind==="source"){const U=ne=>{I||(ne instanceof Cr&&Ti(ne.value)===ci?O(ne.value.sections):ne instanceof os?O(ne.sections):ne.eachChild(U))},J=_.value;J._styleExpression&&U(J._styleExpression.expression)}return I}}let Ih;var jg={get paint(){return Ih=Ih||new Li({"background-color":new jn(ge.paint_background["background-color"]),"background-pattern":new br(ge.paint_background["background-pattern"]),"background-opacity":new jn(ge.paint_background["background-opacity"])})}};class zE extends Ai{constructor(u){super(u,jg)}}let u1;var kx={get paint(){return u1=u1||new Li({"raster-opacity":new jn(ge.paint_raster["raster-opacity"]),"raster-hue-rotate":new jn(ge.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jn(ge.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jn(ge.paint_raster["raster-brightness-max"]),"raster-saturation":new jn(ge.paint_raster["raster-saturation"]),"raster-contrast":new jn(ge.paint_raster["raster-contrast"]),"raster-resampling":new jn(ge.paint_raster["raster-resampling"]),"raster-fade-duration":new jn(ge.paint_raster["raster-fade-duration"])})}};class Fx extends Ai{constructor(u){super(u,kx)}}class UE extends Ai{constructor(u){super(u,{}),this.onAdd=p=>{this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},this.onRemove=p=>{this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class c1{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Bx={once:!0},xv=63710088e-1;class Ud{constructor(u,p){if(isNaN(u)||isNaN(p))throw new Error(`Invalid LngLat object: (${u}, ${p})`);if(this.lng=+u,this.lat=+p,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ud(le(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const p=Math.PI/180,_=this.lat*p,T=u.lat*p,I=Math.sin(_)*Math.sin(T)+Math.cos(_)*Math.cos(T)*Math.cos((u.lng-this.lng)*p);return xv*Math.acos(Math.min(I,1))}static convert(u){if(u instanceof Ud)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Ud(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Ud(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const wv=2*Math.PI*xv;function Sv(m){return wv*Math.cos(m*Math.PI/180)}function zx(m){return(180+m)/360}function Ux(m){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+m*Math.PI/360)))/360}function Am(m,u){return m/Sv(u)}function h1(m){return 360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90}function f1(m,u){return m*Sv(h1(u))}class da{constructor(u,p,_=0){this.x=+u,this.y=+p,this.z=+_}static fromLngLat(u,p=0){const _=Ud.convert(u);return new da(zx(_.lng),Ux(_.lat),Am(p,_.lat))}toLngLat(){return new Ud(360*this.x-180,h1(this.y))}toAltitude(){return f1(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/wv*(u=h1(this.y),1/Math.cos(u*Math.PI/180));var u}}function Ev(m,u,p){var _=2*Math.PI*6378137/256/Math.pow(2,p);return[m*_-2*Math.PI*6378137/2,u*_-2*Math.PI*6378137/2]}class Cm{constructor(u,p,_){if(!function(T,I,O){return!(T<0||T>25||O<0||O>=Math.pow(2,T)||I<0||I>=Math.pow(2,T))}(u,p,_))throw new Error(`x=${p}, y=${_}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=p,this.y=_,this.key=jd(0,u,u,p,_)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,p,_){const T=(O=this.y,U=this.z,J=Ev(256*(I=this.x),256*(O=Math.pow(2,U)-O-1),U),ne=Ev(256*(I+1),256*(O+1),U),J[0]+","+J[1]+","+ne[0]+","+ne[1]);var I,O,U,J,ne;const ce=function(_e,Re,Le){let Fe,Ye="";for(let ct=_e;ct>0;ct--)Fe=1<<ct-1,Ye+=(Re&Fe?1:0)+(Le&Fe?2:0);return Ye}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(_==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,p>1?"@2x":"").replace(/{quadkey}/g,ce).replace(/{bbox-epsg-3857}/g,T)}isChildOf(u){const p=this.z-u.z;return p>0&&u.x===this.x>>p&&u.y===this.y>>p}getTilePoint(u){const p=Math.pow(2,this.z);return new A((u.x*p-this.x)*ue,(u.y*p-this.y)*ue)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Tv{constructor(u,p){this.wrap=u,this.canonical=p,this.key=jd(u,p.z,p.z,p.x,p.y)}}class xc{constructor(u,p,_,T,I){if(this.terrainRttPosMatrix32f=null,u<_)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${_}`);this.overscaledZ=u,this.wrap=p,this.canonical=new Cm(_,+T,+I),this.key=jd(p,u,_,T,I)}clone(){return new xc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-u;return u>this.canonical.z?new xc(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xc(u,this.wrap,u,this.canonical.x>>p,this.canonical.y>>p)}calculateScaledKey(u,p){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-u;return u>this.canonical.z?jd(this.wrap*+p,u,this.canonical.z,this.canonical.x,this.canonical.y):jd(this.wrap*+p,u,u,this.canonical.x>>_,this.canonical.y>>_)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const p=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>p&&u.canonical.y===this.canonical.y>>p}children(u){if(this.overscaledZ>=u)return[new xc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const p=this.canonical.z+1,_=2*this.canonical.x,T=2*this.canonical.y;return[new xc(p,this.wrap,p,_,T),new xc(p,this.wrap,p,_+1,T),new xc(p,this.wrap,p,_,T+1),new xc(p,this.wrap,p,_+1,T+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new xc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new xc(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Tv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new da(u.x-this.wrap,u.y))}}function jd(m,u,p,_,T){(m*=2)<0&&(m=-1*m-1);const I=1<<p;return(I*I*m+I*T+_).toString(36)+p.toString(36)+u.toString(36)}Mr("CanonicalTileID",Cm),Mr("OverscaledTileID",xc,{omit:["terrainRttPosMatrix32f"]});class Pm{constructor(u,p,_,T=1,I=1,O=1,U=0){if(this.uid=u,p.height!==p.width)throw new RangeError("DEM tiles must be square");if(_&&!["mapbox","terrarium","custom"].includes(_))return void it(`"${_}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=p.height;const J=this.dim=p.height-2;switch(this.data=new Uint32Array(p.data.buffer),_){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=T,this.greenFactor=I,this.blueFactor=O,this.baseShift=U;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ne=0;ne<J;ne++)this.data[this._idx(-1,ne)]=this.data[this._idx(0,ne)],this.data[this._idx(J,ne)]=this.data[this._idx(J-1,ne)],this.data[this._idx(ne,-1)]=this.data[this._idx(ne,0)],this.data[this._idx(ne,J)]=this.data[this._idx(ne,J-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(J,-1)]=this.data[this._idx(J-1,0)],this.data[this._idx(-1,J)]=this.data[this._idx(0,J-1)],this.data[this._idx(J,J)]=this.data[this._idx(J-1,J-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ne=0;ne<J;ne++)for(let ce=0;ce<J;ce++){const _e=this.get(ne,ce);_e>this.max&&(this.max=_e),_e<this.min&&(this.min=_e)}}get(u,p){const _=new Uint8Array(this.data.buffer),T=4*this._idx(u,p);return this.unpack(_[T],_[T+1],_[T+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,p){if(u<-1||u>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(u+1)}unpack(u,p,_){return u*this.redFactor+p*this.greenFactor+_*this.blueFactor-this.baseShift}getPixels(){return new Vu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,p,_){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let T=p*this.dim,I=p*this.dim+this.dim,O=_*this.dim,U=_*this.dim+this.dim;switch(p){case-1:T=I-1;break;case 1:I=T+1}switch(_){case-1:O=U-1;break;case 1:U=O+1}const J=-p*this.dim,ne=-_*this.dim;for(let ce=O;ce<U;ce++)for(let _e=T;_e<I;_e++)this.data[this._idx(_e,ce)]=u.data[this._idx(_e+J,ce+ne)]}}Mr("DEMData",Pm);class Vg{constructor(u){this._stringToNumber={},this._numberToString=[];for(let p=0;p<u.length;p++){const _=u[p];this._stringToNumber[_]=p,this._numberToString[p]=_}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class Rp{constructor(u,p,_,T,I){this.type="Feature",this._vectorTileFeature=u,u._z=p,u._x=_,u._y=T,this.properties=u.properties,this.id=I}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(u[p]=this[p]);return u}}class d1{constructor(u,p){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Fu(ue,16,0),this.grid3D=new Fu(ue,16,0),this.featureIndexArray=new ft,this.promoteId=p}insert(u,p,_,T,I,O){const U=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,T,I);const J=O?this.grid3D:this.grid;for(let ne=0;ne<p.length;ne++){const ce=p[ne],_e=[1/0,1/0,-1/0,-1/0];for(let Re=0;Re<ce.length;Re++){const Le=ce[Re];_e[0]=Math.min(_e[0],Le.x),_e[1]=Math.min(_e[1],Le.y),_e[2]=Math.max(_e[2],Le.x),_e[3]=Math.max(_e[3],Le.y)}_e[0]<ue&&_e[1]<ue&&_e[2]>=0&&_e[3]>=0&&J.insert(U,_e[0],_e[1],_e[2],_e[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Nd.VectorTile(new bm(this.rawTileData)).layers,this.sourceLayerCoder=new Vg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,p,_,T){this.loadVTLayers();const I=u.params,O=ue/u.tileSize/u.scale,U=Ps(I.filter),J=u.queryGeometry,ne=u.queryPadding*O,ce=Vx(J),_e=this.grid.query(ce.minX-ne,ce.minY-ne,ce.maxX+ne,ce.maxY+ne),Re=Vx(u.cameraQueryGeometry),Le=this.grid3D.query(Re.minX-ne,Re.minY-ne,Re.maxX+ne,Re.maxY+ne,(ct,wt,Xt,Rt)=>function(Ie,at,It,An,nr){for(const Fn of Ie)if(at<=Fn.x&&It<=Fn.y&&An>=Fn.x&&nr>=Fn.y)return!0;const Dn=[new A(at,It),new A(at,nr),new A(An,nr),new A(An,It)];if(Ie.length>2){for(const Fn of Dn)if(Td(Ie,Fn))return!0}for(let Fn=0;Fn<Ie.length-1;Fn++)if(B_(Ie[Fn],Ie[Fn+1],Dn))return!0;return!1}(u.cameraQueryGeometry,ct-ne,wt-ne,Xt+ne,Rt+ne));for(const ct of Le)_e.push(ct);_e.sort(Gx);const Fe={};let Ye;for(let ct=0;ct<_e.length;ct++){const wt=_e[ct];if(wt===Ye)continue;Ye=wt;const Xt=this.featureIndexArray.get(wt);let Rt=null;this.loadMatchingFeature(Fe,Xt.bucketIndex,Xt.sourceLayerIndex,Xt.featureIndex,U,I.layers,I.availableImages,p,_,T,(Ie,at,It)=>(Rt||(Rt=ef(Ie)),at.queryIntersectsFeature({queryGeometry:J,feature:Ie,featureState:It,geometry:Rt,zoom:this.z,transform:u.transform,pixelsToTileUnits:O,pixelPosMatrix:u.pixelPosMatrix})))}return Fe}loadMatchingFeature(u,p,_,T,I,O,U,J,ne,ce,_e){const Re=this.bucketLayerIDs[p];if(O&&!Re.some(ct=>O.has(ct)))return;const Le=this.sourceLayerCoder.decode(_),Fe=this.vtLayers[Le].feature(T);if(I.needGeometry){const ct=ju(Fe,!0);if(!I.filter(new mn(this.tileID.overscaledZ),ct,this.tileID.canonical))return}else if(!I.filter(new mn(this.tileID.overscaledZ),Fe))return;const Ye=this.getId(Fe,Le);for(let ct=0;ct<Re.length;ct++){const wt=Re[ct];if(O&&!O.has(wt))continue;const Xt=J[wt];if(!Xt)continue;let Rt={};Ye&&ce&&(Rt=ce.getState(Xt.sourceLayer||"_geojsonTileLayer",Ye));const Ie=ye({},ne[wt]);Ie.paint=jx(Ie.paint,Xt.paint,Fe,Rt,U),Ie.layout=jx(Ie.layout,Xt.layout,Fe,Rt,U);const at=!_e||_e(Fe,Xt,Rt);if(!at)continue;const It=new Rp(Fe,this.z,this.x,this.y,Ye);It.layer=Ie;let An=u[wt];An===void 0&&(An=u[wt]=[]),An.push({featureIndex:T,feature:It,intersectionZ:at})}}lookupSymbolFeatures(u,p,_,T,I,O,U,J){const ne={};this.loadVTLayers();const ce=Ps(I);for(const _e of u)this.loadMatchingFeature(ne,_,T,_e,ce,O,U,J,p);return ne}hasLayer(u){for(const p of this.bucketLayerIDs)for(const _ of p)if(u===_)return!0;return!1}getId(u,p){var _;let T=u.id;return this.promoteId&&(T=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]],typeof T=="boolean"&&(T=Number(T)),T===void 0&&(!((_=u.properties)===null||_===void 0)&&_.cluster)&&this.promoteId&&(T=Number(u.properties.cluster_id))),T}}function jx(m,u,p,_,T){return Be(m,(I,O)=>{const U=u instanceof Qn?u.get(O):null;return U&&U.evaluate?U.evaluate(p,_,T):U})}function Vx(m){let u=1/0,p=1/0,_=-1/0,T=-1/0;for(const I of m)u=Math.min(u,I.x),p=Math.min(p,I.y),_=Math.max(_,I.x),T=Math.max(T,I.y);return{minX:u,minY:p,maxX:_,maxY:T}}function Gx(m,u){return u-m}function p1(m,u,p,_,T){const I=[];for(let O=0;O<m.length;O++){const U=m[O];let J;for(let ne=0;ne<U.length-1;ne++){let ce=U[ne],_e=U[ne+1];ce.x<u&&_e.x<u||(ce.x<u?ce=new A(u,ce.y+(u-ce.x)/(_e.x-ce.x)*(_e.y-ce.y))._round():_e.x<u&&(_e=new A(u,ce.y+(u-ce.x)/(_e.x-ce.x)*(_e.y-ce.y))._round()),ce.y<p&&_e.y<p||(ce.y<p?ce=new A(ce.x+(p-ce.y)/(_e.y-ce.y)*(_e.x-ce.x),p)._round():_e.y<p&&(_e=new A(ce.x+(p-ce.y)/(_e.y-ce.y)*(_e.x-ce.x),p)._round()),ce.x>=_&&_e.x>=_||(ce.x>=_?ce=new A(_,ce.y+(_-ce.x)/(_e.x-ce.x)*(_e.y-ce.y))._round():_e.x>=_&&(_e=new A(_,ce.y+(_-ce.x)/(_e.x-ce.x)*(_e.y-ce.y))._round()),ce.y>=T&&_e.y>=T||(ce.y>=T?ce=new A(ce.x+(T-ce.y)/(_e.y-ce.y)*(_e.x-ce.x),T)._round():_e.y>=T&&(_e=new A(ce.x+(T-ce.y)/(_e.y-ce.y)*(_e.x-ce.x),T)._round()),J&&ce.equals(J[J.length-1])||(J=[ce],I.push(J)),J.push(_e)))))}}return I}Mr("FeatureIndex",d1,{omit:["rawTileData","sourceLayerCoder"]});class Oh extends A{constructor(u,p,_,T){super(u,p),this.angle=_,T!==void 0&&(this.segment=T)}clone(){return new Oh(this.x,this.y,this.angle,this.segment)}}function fo(m,u,p,_,T){if(u.segment===void 0||p===0)return!0;let I=u,O=u.segment+1,U=0;for(;U>-p/2;){if(O--,O<0)return!1;U-=m[O].dist(I),I=m[O]}U+=m[O].dist(m[O+1]),O++;const J=[];let ne=0;for(;U<p/2;){const ce=m[O],_e=m[O+1];if(!_e)return!1;let Re=m[O-1].angleTo(ce)-ce.angleTo(_e);for(Re=Math.abs((Re+3*Math.PI)%(2*Math.PI)-Math.PI),J.push({distance:U,angleDelta:Re}),ne+=Re;U-J[0].distance>_;)ne-=J.shift().angleDelta;if(ne>T)return!1;O++,U+=ce.dist(_e)}return!0}function Mv(m){let u=0;for(let p=0;p<m.length-1;p++)u+=m[p].dist(m[p+1]);return u}function iu(m,u,p){return m?.6*u*p:0}function qx(m,u){return Math.max(m?m.right-m.left:0,u?u.right-u.left:0)}function m1(m,u,p,_,T,I){const O=iu(p,T,I),U=qx(p,_)*I;let J=0;const ne=Mv(m)/2;for(let ce=0;ce<m.length-1;ce++){const _e=m[ce],Re=m[ce+1],Le=_e.dist(Re);if(J+Le>ne){const Fe=(ne-J)/Le,Ye=Do.number(_e.x,Re.x,Fe),ct=Do.number(_e.y,Re.y,Fe),wt=new Oh(Ye,ct,Re.angleTo(_e),ce);return wt._round(),!O||fo(m,wt,U,O,u)?wt:void 0}J+=Le}}function g1(m,u,p,_,T,I,O,U,J){const ne=iu(_,I,O),ce=qx(_,T),_e=ce*O,Re=m[0].x===0||m[0].x===J||m[0].y===0||m[0].y===J;return u-_e<u/4&&(u=_e+u/4),Gg(m,Re?u/2*U%u:(ce/2+2*I)*O*U%u,u,ne,p,_e,Re,!1,J)}function Gg(m,u,p,_,T,I,O,U,J){const ne=I/2,ce=Mv(m);let _e=0,Re=u-p,Le=[];for(let Fe=0;Fe<m.length-1;Fe++){const Ye=m[Fe],ct=m[Fe+1],wt=Ye.dist(ct),Xt=ct.angleTo(Ye);for(;Re+p<_e+wt;){Re+=p;const Rt=(Re-_e)/wt,Ie=Do.number(Ye.x,ct.x,Rt),at=Do.number(Ye.y,ct.y,Rt);if(Ie>=0&&Ie<J&&at>=0&&at<J&&Re-ne>=0&&Re+ne<=ce){const It=new Oh(Ie,at,Xt,Fe);It._round(),_&&!fo(m,It,I,_,T)||Le.push(It)}}_e+=wt}return U||Le.length||O||(Le=Gg(m,_e/2,p,_,T,I,O,!0,J)),Le}Mr("Anchor",Oh);const Rm=xu;function v1(m,u,p,_){const T=[],I=m.image,O=I.pixelRatio,U=I.paddedRect.w-2*Rm,J=I.paddedRect.h-2*Rm;let ne={x1:m.left,y1:m.top,x2:m.right,y2:m.bottom};const ce=I.stretchX||[[0,U]],_e=I.stretchY||[[0,J]],Re=(Vn,kr)=>Vn+kr[1]-kr[0],Le=ce.reduce(Re,0),Fe=_e.reduce(Re,0),Ye=U-Le,ct=J-Fe;let wt=0,Xt=Le,Rt=0,Ie=Fe,at=0,It=Ye,An=0,nr=ct;if(I.content&&_){const Vn=I.content,kr=Vn[2]-Vn[0],Qr=Vn[3]-Vn[1];(I.textFitWidth||I.textFitHeight)&&(ne=Ug(m)),wt=Dm(ce,0,Vn[0]),Rt=Dm(_e,0,Vn[1]),Xt=Dm(ce,Vn[0],Vn[2]),Ie=Dm(_e,Vn[1],Vn[3]),at=Vn[0]-wt,An=Vn[1]-Rt,It=kr-Xt,nr=Qr-Ie}const Dn=ne.x1,Fn=ne.y1,ur=ne.x2-Dn,ar=ne.y2-Fn,pr=(Vn,kr,Qr,Kr)=>{const zr=Cv(Vn.stretch-wt,Xt,ur,Dn),Ki=qg(Vn.fixed-at,It,Vn.stretch,Le),Oo=Cv(kr.stretch-Rt,Ie,ar,Fn),gs=qg(kr.fixed-An,nr,kr.stretch,Fe),es=Cv(Qr.stretch-wt,Xt,ur,Dn),pl=qg(Qr.fixed-at,It,Qr.stretch,Le),ks=Cv(Kr.stretch-Rt,Ie,ar,Fn),vs=qg(Kr.fixed-An,nr,Kr.stretch,Fe),ao=new A(zr,Oo),Ao=new A(es,Oo),Fl=new A(es,ks),ml=new A(zr,ks),gl=new A(Ki/O,gs/O),$c=new A(pl/O,vs/O),Ks=u*Math.PI/180;if(Ks){const vl=Math.sin(Ks),ys=Math.cos(Ks),ts=[ys,-vl,vl,ys];ao._matMult(ts),Ao._matMult(ts),ml._matMult(ts),Fl._matMult(ts)}const au=Vn.stretch+Vn.fixed,Fs=kr.stretch+kr.fixed;return{tl:ao,tr:Ao,bl:ml,br:Fl,tex:{x:I.paddedRect.x+Rm+au,y:I.paddedRect.y+Rm+Fs,w:Qr.stretch+Qr.fixed-au,h:Kr.stretch+Kr.fixed-Fs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gl,pixelOffsetBR:$c,minFontScaleX:It/O/ur,minFontScaleY:nr/O/ar,isSDF:p}};if(_&&(I.stretchX||I.stretchY)){const Vn=Av(ce,Ye,Le),kr=Av(_e,ct,Fe);for(let Qr=0;Qr<Vn.length-1;Qr++){const Kr=Vn[Qr],zr=Vn[Qr+1];for(let Ki=0;Ki<kr.length-1;Ki++)T.push(pr(Kr,kr[Ki],zr,kr[Ki+1]))}}else T.push(pr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:U+1},{fixed:0,stretch:J+1}));return T}function Dm(m,u,p){let _=0;for(const T of m)_+=Math.max(u,Math.min(p,T[1]))-Math.max(u,Math.min(p,T[0]));return _}function Av(m,u,p){const _=[{fixed:-1,stretch:0}];for(const[T,I]of m){const O=_[_.length-1];_.push({fixed:T-O.stretch,stretch:O.stretch}),_.push({fixed:T-O.stretch,stretch:O.stretch+(I-T)})}return _.push({fixed:u+Rm,stretch:p}),_}function Cv(m,u,p,_){return m/u*p+_}function qg(m,u,p,_){return m-u*p/_}class Pv{constructor(u,p,_,T,I,O,U,J,ne,ce){var _e;if(this.boxStartIndex=u.length,ne){let Re=O.top,Le=O.bottom;const Fe=O.collisionPadding;Fe&&(Re-=Fe[1],Le+=Fe[3]);let Ye=Le-Re;Ye>0&&(Ye=Math.max(10,Ye),this.circleDiameter=Ye)}else{const Re=!((_e=O.image)===null||_e===void 0)&&_e.content&&(O.image.textFitWidth||O.image.textFitHeight)?Ug(O):{x1:O.left,y1:O.top,x2:O.right,y2:O.bottom};Re.y1=Re.y1*U-J[0],Re.y2=Re.y2*U+J[2],Re.x1=Re.x1*U-J[3],Re.x2=Re.x2*U+J[1];const Le=O.collisionPadding;if(Le&&(Re.x1-=Le[0]*U,Re.y1-=Le[1]*U,Re.x2+=Le[2]*U,Re.y2+=Le[3]*U),ce){const Fe=new A(Re.x1,Re.y1),Ye=new A(Re.x2,Re.y1),ct=new A(Re.x1,Re.y2),wt=new A(Re.x2,Re.y2),Xt=ce*Math.PI/180;Fe._rotate(Xt),Ye._rotate(Xt),ct._rotate(Xt),wt._rotate(Xt),Re.x1=Math.min(Fe.x,Ye.x,ct.x,wt.x),Re.x2=Math.max(Fe.x,Ye.x,ct.x,wt.x),Re.y1=Math.min(Fe.y,Ye.y,ct.y,wt.y),Re.y2=Math.max(Fe.y,Ye.y,ct.y,wt.y)}u.emplaceBack(p.x,p.y,Re.x1,Re.y1,Re.x2,Re.y2,_,T,I)}this.boxEndIndex=u.length}}class Hx{constructor(u=[],p=(_,T)=>_<T?-1:_>T?1:0){if(this.data=u,this.length=this.data.length,this.compare=p,this.length>0)for(let _=(this.length>>1)-1;_>=0;_--)this._down(_)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],p=this.data.pop();return--this.length>0&&(this.data[0]=p,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:p,compare:_}=this,T=p[u];for(;u>0;){const I=u-1>>1,O=p[I];if(_(T,O)>=0)break;p[u]=O,u=I}p[u]=T}_down(u){const{data:p,compare:_}=this,T=this.length>>1,I=p[u];for(;u<T;){let O=1+(u<<1);const U=O+1;if(U<this.length&&_(p[U],p[O])<0&&(O=U),_(p[O],I)>=0)break;p[u]=p[O],u=O}p[u]=I}}function jE(m,u=1,p=!1){let _=1/0,T=1/0,I=-1/0,O=-1/0;const U=m[0];for(let Le=0;Le<U.length;Le++){const Fe=U[Le];(!Le||Fe.x<_)&&(_=Fe.x),(!Le||Fe.y<T)&&(T=Fe.y),(!Le||Fe.x>I)&&(I=Fe.x),(!Le||Fe.y>O)&&(O=Fe.y)}const J=Math.min(I-_,O-T);let ne=J/2;const ce=new Hx([],VE);if(J===0)return new A(_,T);for(let Le=_;Le<I;Le+=J)for(let Fe=T;Fe<O;Fe+=J)ce.push(new Vd(Le+ne,Fe+ne,ne,m));let _e=function(Le){let Fe=0,Ye=0,ct=0;const wt=Le[0];for(let Xt=0,Rt=wt.length,Ie=Rt-1;Xt<Rt;Ie=Xt++){const at=wt[Xt],It=wt[Ie],An=at.x*It.y-It.x*at.y;Ye+=(at.x+It.x)*An,ct+=(at.y+It.y)*An,Fe+=3*An}return new Vd(Ye/Fe,ct/Fe,0,Le)}(m),Re=ce.length;for(;ce.length;){const Le=ce.pop();(Le.d>_e.d||!_e.d)&&(_e=Le,p&&console.log("found best %d after %d probes",Math.round(1e4*Le.d)/1e4,Re)),Le.max-_e.d<=u||(ne=Le.h/2,ce.push(new Vd(Le.p.x-ne,Le.p.y-ne,ne,m)),ce.push(new Vd(Le.p.x+ne,Le.p.y-ne,ne,m)),ce.push(new Vd(Le.p.x-ne,Le.p.y+ne,ne,m)),ce.push(new Vd(Le.p.x+ne,Le.p.y+ne,ne,m)),Re+=4)}return p&&(console.log(`num probes: ${Re}`),console.log(`best distance: ${_e.d}`)),_e.p}function VE(m,u){return u.max-m.max}function Vd(m,u,p,_){this.p=new A(m,u),this.h=p,this.d=function(T,I){let O=!1,U=1/0;for(let J=0;J<I.length;J++){const ne=I[J];for(let ce=0,_e=ne.length,Re=_e-1;ce<_e;Re=ce++){const Le=ne[ce],Fe=ne[Re];Le.y>T.y!=Fe.y>T.y&&T.x<(Fe.x-Le.x)*(T.y-Le.y)/(Fe.y-Le.y)+Le.x&&(O=!O),U=Math.min(U,F_(T,Le,Fe))}}return(O?1:-1)*Math.sqrt(U)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}var dl;l.ax=void 0,(dl=l.ax||(l.ax={}))[dl.center=1]="center",dl[dl.left=2]="left",dl[dl.right=3]="right",dl[dl.top=4]="top",dl[dl.bottom=5]="bottom",dl[dl["top-left"]=6]="top-left",dl[dl["top-right"]=7]="top-right",dl[dl["bottom-left"]=8]="bottom-left",dl[dl["bottom-right"]=9]="bottom-right";const Gd=7,y1=Number.POSITIVE_INFINITY;function uh(m,u){return u[1]!==y1?function(p,_,T){let I=0,O=0;switch(_=Math.abs(_),T=Math.abs(T),p){case"top-right":case"top-left":case"top":O=T-Gd;break;case"bottom-right":case"bottom-left":case"bottom":O=-T+Gd}switch(p){case"top-right":case"bottom-right":case"right":I=-_;break;case"top-left":case"bottom-left":case"left":I=_}return[I,O]}(m,u[0],u[1]):function(p,_){let T=0,I=0;_<0&&(_=0);const O=_/Math.SQRT2;switch(p){case"top-right":case"top-left":I=O-Gd;break;case"bottom-right":case"bottom-left":I=-O+Gd;break;case"bottom":I=-_+Gd;break;case"top":I=_-Gd}switch(p){case"top-right":case"bottom-right":T=-O;break;case"top-left":case"bottom-left":T=O;break;case"left":T=_;break;case"right":T=-_}return[T,I]}(m,u[0])}function _1(m,u,p){var _;const T=m.layout,I=(_=T.get("text-variable-anchor-offset"))===null||_===void 0?void 0:_.evaluate(u,{},p);if(I){const U=I.values,J=[];for(let ne=0;ne<U.length;ne+=2){const ce=J[ne]=U[ne],_e=U[ne+1].map(Re=>Re*Qo);ce.startsWith("top")?_e[1]-=Gd:ce.startsWith("bottom")&&(_e[1]+=Gd),J[ne+1]=_e}return new Wn(J)}const O=T.get("text-variable-anchor");if(O){let U;U=m._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[T.get("text-radial-offset").evaluate(u,{},p)*Qo,y1]:T.get("text-offset").evaluate(u,{},p).map(ne=>ne*Qo);const J=[];for(const ne of O)J.push(ne,uh(ne,U));return new Wn(J)}return null}function Rv(m){switch(m){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ch(m,u,p,_,T,I,O,U,J,ne,ce,_e){let Re=I.textMaxSize.evaluate(u,{});Re===void 0&&(Re=O);const Le=m.layers[0].layout,Fe=Le.get("icon-offset").evaluate(u,{},ce),Ye=Hg(p.horizontal),ct=O/24,wt=m.tilePixelRatio*ct,Xt=m.tilePixelRatio*Re/24,Rt=m.tilePixelRatio*U,Ie=m.tilePixelRatio*Le.get("symbol-spacing"),at=Le.get("text-padding")*m.tilePixelRatio,It=function(Qr,Kr,zr,Ki=1){const Oo=Qr.get("icon-padding").evaluate(Kr,{},zr),gs=Oo&&Oo.values;return[gs[0]*Ki,gs[1]*Ki,gs[2]*Ki,gs[3]*Ki]}(Le,u,ce,m.tilePixelRatio),An=Le.get("text-max-angle")/180*Math.PI,nr=Le.get("text-rotation-alignment")!=="viewport"&&Le.get("symbol-placement")!=="point",Dn=Le.get("icon-rotation-alignment")==="map"&&Le.get("symbol-placement")!=="point",Fn=Le.get("symbol-placement"),ur=Ie/2,ar=Le.get("icon-text-fit");let pr;_&&ar!=="none"&&(m.allowVerticalPlacement&&p.vertical&&(pr=a1(_,p.vertical,ar,Le.get("icon-text-fit-padding"),Fe,ct)),Ye&&(_=a1(_,Ye,ar,Le.get("icon-text-fit-padding"),Fe,ct)));const Vn=ce?_e.line.getGranularityForZoomLevel(ce.z):1,kr=(Qr,Kr)=>{Kr.x<0||Kr.x>=ue||Kr.y<0||Kr.y>=ue||function(zr,Ki,Oo,gs,es,pl,ks,vs,ao,Ao,Fl,ml,gl,$c,Ks,au,Fs,vl,ys,ts,po,nc,$d,wc,Xx){const Lm=zr.addToLineVertexArray(Ki,Oo);let cf,c,g,S,D=0,G=0,te=0,Oe=0,st=-1,Ot=-1;const cn={};let tr=ho("");if(zr.allowVerticalPlacement&&gs.vertical){const Oi=vs.layout.get("text-rotate").evaluate(po,{},wc)+90;g=new Pv(ao,Ki,Ao,Fl,ml,gs.vertical,gl,$c,Ks,Oi),ks&&(S=new Pv(ao,Ki,Ao,Fl,ml,ks,Fs,vl,Ks,Oi))}if(es){const Oi=vs.layout.get("icon-rotate").evaluate(po,{}),yl=vs.layout.get("icon-text-fit")!=="none",Dp=v1(es,Oi,$d,yl),$f=ks?v1(ks,Oi,$d,yl):void 0;c=new Pv(ao,Ki,Ao,Fl,ml,es,Fs,vl,!1,Oi),D=4*Dp.length;const Zg=zr.iconSizeData;let Wd=null;Zg.kind==="source"?(Wd=[lf*vs.layout.get("icon-size").evaluate(po,{})],Wd[0]>Gf&&it(`${zr.layerIds[0]}: Value for "icon-size" is >= ${Tm}. Reduce your "icon-size".`)):Zg.kind==="composite"&&(Wd=[lf*nc.compositeIconSizes[0].evaluate(po,{},wc),lf*nc.compositeIconSizes[1].evaluate(po,{},wc)],(Wd[0]>Gf||Wd[1]>Gf)&&it(`${zr.layerIds[0]}: Value for "icon-size" is >= ${Tm}. Reduce your "icon-size".`)),zr.addSymbols(zr.icon,Dp,Wd,ts,ys,po,l.ag.none,Ki,Lm.lineStartIndex,Lm.lineLength,-1,wc),st=zr.icon.placedSymbolArray.length-1,$f&&(G=4*$f.length,zr.addSymbols(zr.icon,$f,Wd,ts,ys,po,l.ag.vertical,Ki,Lm.lineStartIndex,Lm.lineLength,-1,wc),Ot=zr.icon.placedSymbolArray.length-1)}const yr=Object.keys(gs.horizontal);for(const Oi of yr){const yl=gs.horizontal[Oi];if(!cf){tr=ho(yl.text);const $f=vs.layout.get("text-rotate").evaluate(po,{},wc);cf=new Pv(ao,Ki,Ao,Fl,ml,yl,gl,$c,Ks,$f)}const Dp=yl.positionedLines.length===1;if(te+=b1(zr,Ki,yl,pl,vs,Ks,po,au,Lm,gs.vertical?l.ag.horizontal:l.ag.horizontalOnly,Dp?yr:[Oi],cn,st,nc,wc),Dp)break}gs.vertical&&(Oe+=b1(zr,Ki,gs.vertical,pl,vs,Ks,po,au,Lm,l.ag.vertical,["vertical"],cn,Ot,nc,wc));const Nn=cf?cf.boxStartIndex:zr.collisionBoxArray.length,Jn=cf?cf.boxEndIndex:zr.collisionBoxArray.length,ai=g?g.boxStartIndex:zr.collisionBoxArray.length,Hi=g?g.boxEndIndex:zr.collisionBoxArray.length,Bs=c?c.boxStartIndex:zr.collisionBoxArray.length,wn=c?c.boxEndIndex:zr.collisionBoxArray.length,dn=S?S.boxStartIndex:zr.collisionBoxArray.length,Cn=S?S.boxEndIndex:zr.collisionBoxArray.length;let rr=-1;const qr=(Oi,yl)=>Oi&&Oi.circleDiameter?Math.max(Oi.circleDiameter,yl):yl;rr=qr(cf,rr),rr=qr(g,rr),rr=qr(c,rr),rr=qr(S,rr);const pa=rr>-1?1:0;pa&&(rr*=Xx/Qo),zr.glyphOffsetArray.length>=qf.MAX_GLYPHS&&it("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),po.sortKey!==void 0&&zr.addToSortKeyRanges(zr.symbolInstances.length,po.sortKey);const fi=_1(vs,po,wc),[Ci,ou]=function(Oi,yl){const Dp=Oi.length,$f=yl==null?void 0:yl.values;if(($f==null?void 0:$f.length)>0)for(let Zg=0;Zg<$f.length;Zg+=2){const Wd=$f[Zg+1];Oi.emplaceBack(l.ax[$f[Zg]],Wd[0],Wd[1])}return[Dp,Oi.length]}(zr.textAnchorOffsets,fi);zr.symbolInstances.emplaceBack(Ki.x,Ki.y,cn.right>=0?cn.right:-1,cn.center>=0?cn.center:-1,cn.left>=0?cn.left:-1,cn.vertical||-1,st,Ot,tr,Nn,Jn,ai,Hi,Bs,wn,dn,Cn,Ao,te,Oe,D,G,pa,0,gl,rr,Ci,ou)}(m,Kr,Qr,p,_,T,pr,m.layers[0],m.collisionBoxArray,u.index,u.sourceLayerIndex,m.index,wt,[at,at,at,at],nr,J,Rt,It,Dn,Fe,u,I,ne,ce,O)};if(Fn==="line")for(const Qr of p1(u.geometry,0,0,ue,ue)){const Kr=Id(Qr,Vn),zr=g1(Kr,Ie,An,p.vertical||Ye,_,24,Xt,m.overscaling,ue);for(const Ki of zr)Ye&&Hf(m,Ye.text,ur,Ki)||kr(Kr,Ki)}else if(Fn==="line-center"){for(const Qr of u.geometry)if(Qr.length>1){const Kr=Id(Qr,Vn),zr=m1(Kr,An,p.vertical||Ye,_,24,Xt);zr&&kr(Kr,zr)}}else if(u.type==="Polygon")for(const Qr of Vs(u.geometry,0)){const Kr=jE(Qr,16);kr(Id(Qr[0],Vn,!0),new Oh(Kr.x,Kr.y,0))}else if(u.type==="LineString")for(const Qr of u.geometry){const Kr=Id(Qr,Vn);kr(Kr,new Oh(Kr[0].x,Kr[0].y,0))}else if(u.type==="Point")for(const Qr of u.geometry)for(const Kr of Qr)kr([Kr],new Oh(Kr.x,Kr.y,0))}function b1(m,u,p,_,T,I,O,U,J,ne,ce,_e,Re,Le,Fe){const Ye=function(Xt,Rt,Ie,at,It,An,nr,Dn){const Fn=at.layout.get("text-rotate").evaluate(An,{})*Math.PI/180,ur=[];for(const ar of Rt.positionedLines)for(const pr of ar.positionedGlyphs){if(!pr.rect)continue;const Vn=pr.rect||{};let kr=Ng+1,Qr=!0,Kr=1,zr=0;const Ki=(It||Dn)&&pr.vertical,Oo=pr.metrics.advance*pr.scale/2;if(Dn&&Rt.verticalizable&&(zr=ar.lineOffset/2-(pr.imageName?-(Qo-pr.metrics.width*pr.scale)/2:(pr.scale-1)*Qo)),pr.imageName){const vl=nr[pr.imageName];Qr=vl.sdf,Kr=vl.pixelRatio,kr=xu/Kr}const gs=It?[pr.x+Oo,pr.y]:[0,0];let es=It?[0,0]:[pr.x+Oo+Ie[0],pr.y+Ie[1]-zr],pl=[0,0];Ki&&(pl=es,es=[0,0]);const ks=pr.metrics.isDoubleResolution?2:1,vs=(pr.metrics.left-kr)*pr.scale-Oo+es[0],ao=(-pr.metrics.top-kr)*pr.scale+es[1],Ao=vs+Vn.w/ks*pr.scale/Kr,Fl=ao+Vn.h/ks*pr.scale/Kr,ml=new A(vs,ao),gl=new A(Ao,ao),$c=new A(vs,Fl),Ks=new A(Ao,Fl);if(Ki){const vl=new A(-Oo,Oo-kg),ys=-Math.PI/2,ts=Qo/2-Oo,po=new A(5-kg-ts,-(pr.imageName?ts:0)),nc=new A(...pl);ml._rotateAround(ys,vl)._add(po)._add(nc),gl._rotateAround(ys,vl)._add(po)._add(nc),$c._rotateAround(ys,vl)._add(po)._add(nc),Ks._rotateAround(ys,vl)._add(po)._add(nc)}if(Fn){const vl=Math.sin(Fn),ys=Math.cos(Fn),ts=[ys,-vl,vl,ys];ml._matMult(ts),gl._matMult(ts),$c._matMult(ts),Ks._matMult(ts)}const au=new A(0,0),Fs=new A(0,0);ur.push({tl:ml,tr:gl,bl:$c,br:Ks,tex:Vn,writingMode:Rt.writingMode,glyphOffset:gs,sectionIndex:pr.sectionIndex,isSDF:Qr,pixelOffsetTL:au,pixelOffsetBR:Fs,minFontScaleX:0,minFontScaleY:0})}return ur}(0,p,U,T,I,O,_,m.allowVerticalPlacement),ct=m.textSizeData;let wt=null;ct.kind==="source"?(wt=[lf*T.layout.get("text-size").evaluate(O,{})],wt[0]>Gf&&it(`${m.layerIds[0]}: Value for "text-size" is >= ${Tm}. Reduce your "text-size".`)):ct.kind==="composite"&&(wt=[lf*Le.compositeTextSizes[0].evaluate(O,{},Fe),lf*Le.compositeTextSizes[1].evaluate(O,{},Fe)],(wt[0]>Gf||wt[1]>Gf)&&it(`${m.layerIds[0]}: Value for "text-size" is >= ${Tm}. Reduce your "text-size".`)),m.addSymbols(m.text,Ye,wt,U,I,O,ne,u,J.lineStartIndex,J.lineLength,Re,Fe);for(const Xt of ce)_e[Xt]=m.text.placedSymbolArray.length-1;return 4*Ye.length}function Hg(m){for(const u in m)return m[u];return null}function Hf(m,u,p,_){const T=m.compareText;if(u in T){const I=T[u];for(let O=I.length-1;O>=0;O--)if(_.dist(I[O])<p)return!0}else T[u]=[];return T[u].push(_),!1}const $x=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class x1{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[p,_]=new Uint8Array(u,0,2);if(p!==219)throw new Error("Data does not appear to be in a KDBush format.");const T=_>>4;if(T!==1)throw new Error(`Got v${T} data when expected v1.`);const I=$x[15&_];if(!I)throw new Error("Unrecognized array type.");const[O]=new Uint16Array(u,2,1),[U]=new Uint32Array(u,4,1);return new x1(U,O,I,u)}constructor(u,p=64,_=Float64Array,T){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+p,2),65535),this.ArrayType=_,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const I=$x.indexOf(this.ArrayType),O=2*u*this.ArrayType.BYTES_PER_ELEMENT,U=u*this.IndexArrayType.BYTES_PER_ELEMENT,J=(8-U%8)%8;if(I<0)throw new Error(`Unexpected typed array class: ${_}.`);T&&T instanceof ArrayBuffer?(this.data=T,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+U+J,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+O+U+J),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+U+J,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+I]),new Uint16Array(this.data,2,1)[0]=p,new Uint32Array(this.data,4,1)[0]=u)}add(u,p){const _=this._pos>>1;return this.ids[_]=_,this.coords[this._pos++]=u,this.coords[this._pos++]=p,_}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return qd(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,p,_,T){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:I,coords:O,nodeSize:U}=this,J=[0,I.length-1,0],ne=[];for(;J.length;){const ce=J.pop()||0,_e=J.pop()||0,Re=J.pop()||0;if(_e-Re<=U){for(let ct=Re;ct<=_e;ct++){const wt=O[2*ct],Xt=O[2*ct+1];wt>=u&&wt<=_&&Xt>=p&&Xt<=T&&ne.push(I[ct])}continue}const Le=Re+_e>>1,Fe=O[2*Le],Ye=O[2*Le+1];Fe>=u&&Fe<=_&&Ye>=p&&Ye<=T&&ne.push(I[Le]),(ce===0?u<=Fe:p<=Ye)&&(J.push(Re),J.push(Le-1),J.push(1-ce)),(ce===0?_>=Fe:T>=Ye)&&(J.push(Le+1),J.push(_e),J.push(1-ce))}return ne}within(u,p,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:I,nodeSize:O}=this,U=[0,T.length-1,0],J=[],ne=_*_;for(;U.length;){const ce=U.pop()||0,_e=U.pop()||0,Re=U.pop()||0;if(_e-Re<=O){for(let ct=Re;ct<=_e;ct++)Wx(I[2*ct],I[2*ct+1],u,p)<=ne&&J.push(T[ct]);continue}const Le=Re+_e>>1,Fe=I[2*Le],Ye=I[2*Le+1];Wx(Fe,Ye,u,p)<=ne&&J.push(T[Le]),(ce===0?u-_<=Fe:p-_<=Ye)&&(U.push(Re),U.push(Le-1),U.push(1-ce)),(ce===0?u+_>=Fe:p+_>=Ye)&&(U.push(Le+1),U.push(_e),U.push(1-ce))}return J}}function qd(m,u,p,_,T,I){if(T-_<=p)return;const O=_+T>>1;w1(m,u,O,_,T,I),qd(m,u,p,_,O-1,1-I),qd(m,u,p,O+1,T,1-I)}function w1(m,u,p,_,T,I){for(;T>_;){if(T-_>600){const ne=T-_+1,ce=p-_+1,_e=Math.log(ne),Re=.5*Math.exp(2*_e/3),Le=.5*Math.sqrt(_e*Re*(ne-Re)/ne)*(ce-ne/2<0?-1:1);w1(m,u,p,Math.max(_,Math.floor(p-ce*Re/ne+Le)),Math.min(T,Math.floor(p+(ne-ce)*Re/ne+Le)),I)}const O=u[2*p+I];let U=_,J=T;for($g(m,u,_,p),u[2*T+I]>O&&$g(m,u,_,T);U<J;){for($g(m,u,U,J),U++,J--;u[2*U+I]<O;)U++;for(;u[2*J+I]>O;)J--}u[2*_+I]===O?$g(m,u,_,J):(J++,$g(m,u,J,T)),J<=p&&(_=J+1),p<=J&&(T=J-1)}}function $g(m,u,p,_){S1(m,p,_),S1(u,2*p,2*_),S1(u,2*p+1,2*_+1)}function S1(m,u,p){const _=m[u];m[u]=m[p],m[p]=_}function Wx(m,u,p,_){const T=m-p,I=u-_;return T*T+I*I}var E1;l.cg=void 0,(E1=l.cg||(l.cg={})).create="create",E1.load="load",E1.fullLoad="fullLoad";let Dv=null,Wg=[];const T1=1e3/60,Lv="loadTime",Hd="fullLoadTime",Xg={mark(m){performance.mark(m)},frame(m){const u=m;Dv!=null&&Wg.push(u-Dv),Dv=u},clearMetrics(){Dv=null,Wg=[],performance.clearMeasures(Lv),performance.clearMeasures(Hd);for(const m in l.cg)performance.clearMarks(l.cg[m])},getPerformanceMetrics(){performance.measure(Lv,l.cg.create,l.cg.load),performance.measure(Hd,l.cg.create,l.cg.fullLoad);const m=performance.getEntriesByName(Lv)[0].duration,u=performance.getEntriesByName(Hd)[0].duration,p=Wg.length,_=1/(Wg.reduce((I,O)=>I+O,0)/p/1e3),T=Wg.filter(I=>I>T1).reduce((I,O)=>I+(O-T1)/T1,0);return{loadTime:m,fullLoadTime:u,fps:_,percentDroppedFrames:T/(p+T)*100,totalFrames:p}}};l.$=da,l.A=W,l.B=Do,l.C=mn,l.D=jn,l.E=mt,l.F=ah,l.G=function(m){if(He==null){const u=m.navigator?m.navigator.userAgent:null;He=!!m.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return He},l.H=class{constructor(m,u){this.target=m,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new c1(()=>this.process()),this.subscription=Ht(this.target,"message",p=>this.receive(p),!1),this.globalScope=$t(self)?m:window}registerMessageHandler(m,u){this.messageHandlers[m]=u}sendAsync(m,u){return new Promise((p,_)=>{const T=Math.round(1e18*Math.random()).toString(36).substring(0,10),I=u?Ht(u.signal,"abort",()=>{I==null||I.unsubscribe(),delete this.resolveRejects[T];const J={id:T,type:"<cancel>",origin:location.origin,targetMapId:m.targetMapId,sourceMapId:this.mapId};this.target.postMessage(J)},Bx):null;this.resolveRejects[T]={resolve:J=>{I==null||I.unsubscribe(),p(J)},reject:J=>{I==null||I.unsubscribe(),_(J)}};const O=[],U=Object.assign(Object.assign({},m),{id:T,sourceMapId:this.mapId,origin:location.origin,data:Vc(m.data,O)});this.target.postMessage(U,{transfer:O})})}receive(m){const u=m.data,p=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[p];const _=this.abortControllers[p];return delete this.abortControllers[p],void(_&&_.abort())}if($t(self)||u.mustQueue)return this.tasks[p]=u,this.taskQueue.push(p),void this.invoker.trigger();this.processTask(p,u)}}process(){if(this.taskQueue.length===0)return;const m=this.taskQueue.shift(),u=this.tasks[m];delete this.tasks[m],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(m,u)}processTask(m,u){return a(this,void 0,void 0,function*(){if(u.type==="<response>"){const T=this.resolveRejects[m];return delete this.resolveRejects[m],T?void(u.error?T.reject(oh(u.error)):T.resolve(oh(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(m,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const p=oh(u.data),_=new AbortController;this.abortControllers[m]=_;try{const T=yield this.messageHandlers[u.type](u.sourceMapId,p,_);this.completeTask(m,null,T)}catch(T){this.completeTask(m,T)}})}completeTask(m,u,p){const _=[];delete this.abortControllers[m];const T={id:m,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Vc(u):null,data:Vc(p,_)};this.target.postMessage(T,{transfer:_})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.I=Mp,l.J=Pt,l.K=function(){var m=new W(16);return W!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[11]=0,m[12]=0,m[13]=0,m[14]=0),m[0]=1,m[5]=1,m[10]=1,m[15]=1,m},l.L=function(m,u,p){var _,T,I,O,U,J,ne,ce,_e,Re,Le,Fe,Ye=p[0],ct=p[1],wt=p[2];return u===m?(m[12]=u[0]*Ye+u[4]*ct+u[8]*wt+u[12],m[13]=u[1]*Ye+u[5]*ct+u[9]*wt+u[13],m[14]=u[2]*Ye+u[6]*ct+u[10]*wt+u[14],m[15]=u[3]*Ye+u[7]*ct+u[11]*wt+u[15]):(T=u[1],I=u[2],O=u[3],U=u[4],J=u[5],ne=u[6],ce=u[7],_e=u[8],Re=u[9],Le=u[10],Fe=u[11],m[0]=_=u[0],m[1]=T,m[2]=I,m[3]=O,m[4]=U,m[5]=J,m[6]=ne,m[7]=ce,m[8]=_e,m[9]=Re,m[10]=Le,m[11]=Fe,m[12]=_*Ye+U*ct+_e*wt+u[12],m[13]=T*Ye+J*ct+Re*wt+u[13],m[14]=I*Ye+ne*ct+Le*wt+u[14],m[15]=O*Ye+ce*ct+Fe*wt+u[15]),m},l.M=function(m,u,p){var _=p[0],T=p[1],I=p[2];return m[0]=u[0]*_,m[1]=u[1]*_,m[2]=u[2]*_,m[3]=u[3]*_,m[4]=u[4]*T,m[5]=u[5]*T,m[6]=u[6]*T,m[7]=u[7]*T,m[8]=u[8]*I,m[9]=u[9]*I,m[10]=u[10]*I,m[11]=u[11]*I,m[12]=u[12],m[13]=u[13],m[14]=u[14],m[15]=u[15],m},l.N=function(m,u,p){var _=u[0],T=u[1],I=u[2],O=u[3],U=u[4],J=u[5],ne=u[6],ce=u[7],_e=u[8],Re=u[9],Le=u[10],Fe=u[11],Ye=u[12],ct=u[13],wt=u[14],Xt=u[15],Rt=p[0],Ie=p[1],at=p[2],It=p[3];return m[0]=Rt*_+Ie*U+at*_e+It*Ye,m[1]=Rt*T+Ie*J+at*Re+It*ct,m[2]=Rt*I+Ie*ne+at*Le+It*wt,m[3]=Rt*O+Ie*ce+at*Fe+It*Xt,m[4]=(Rt=p[4])*_+(Ie=p[5])*U+(at=p[6])*_e+(It=p[7])*Ye,m[5]=Rt*T+Ie*J+at*Re+It*ct,m[6]=Rt*I+Ie*ne+at*Le+It*wt,m[7]=Rt*O+Ie*ce+at*Fe+It*Xt,m[8]=(Rt=p[8])*_+(Ie=p[9])*U+(at=p[10])*_e+(It=p[11])*Ye,m[9]=Rt*T+Ie*J+at*Re+It*ct,m[10]=Rt*I+Ie*ne+at*Le+It*wt,m[11]=Rt*O+Ie*ce+at*Fe+It*Xt,m[12]=(Rt=p[12])*_+(Ie=p[13])*U+(at=p[14])*_e+(It=p[15])*Ye,m[13]=Rt*T+Ie*J+at*Re+It*ct,m[14]=Rt*I+Ie*ne+at*Le+It*wt,m[15]=Rt*O+Ie*ce+at*Fe+It*Xt,m},l.O=function(m,u){const p={};for(let _=0;_<u.length;_++){const T=u[_];T in m&&(p[T]=m[T])}return p},l.P=A,l.Q=Ud,l.R=Vu,l.S=Ux,l.T=Mn,l.U=zx,l.V=B,l.W=z,l.X=tn,l.Y=xc,l.Z=ue,l._=a,l.a=jt,l.a$=function(){const m=new Float32Array(16);return Z(m),m},l.a0=Cm,l.a1=m=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(p=>{u.onloadstart=()=>{p(u)};for(const _ of m){const T=window.document.createElement("source");nn(_)||(u.crossOrigin="Anonymous"),T.src=_,u.appendChild(T)}})},l.a2=qt,l.a3=function(){return Se++},l.a4=F,l.a5=qf,l.a6=Ps,l.a7=ju,l.a8=Rp,l.a9=function(m){const u={};if(m.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(p,_,T,I)=>{const O=T||I;return u[_]=!O||O.toLowerCase(),""}),u["max-age"]){const p=parseInt(u["max-age"],10);isNaN(p)?delete u["max-age"]:u["max-age"]=p}return u},l.aA=zg,l.aB=x1,l.aC=Ui,l.aD=Pg,l.aE=pt,l.aF=Fr,l.aG=wr,l.aH=function(m){return Math.pow(2,m)},l.aI=85.051129,l.aJ=Am,l.aK=le,l.aL=$e,l.aM=f1,l.aN=function(m,u,p){return m[0]=u[0]*p,m[1]=u[1]*p,m[2]=u[2]*p,m},l.aO=function(m,u,p){return m[0]=u[0]+p[0],m[1]=u[1]+p[1],m[2]=u[2]+p[2],m},l.aP=function(m){var u=new W(3);return u[0]=m[0],u[1]=m[1],u[2]=m[2],u},l.aQ=function(m,u,p){return m[0]=u[0]*p[0],m[1]=u[1]*p[1],m[2]=u[2]*p[2],m[3]=u[3]*p[3],m},l.aR=function(m,u,p){return m[0]=u[0]-p[0],m[1]=u[1]-p[1],m[2]=u[2]-p[2],m},l.aS=function(m,u){var p=u[0],_=u[1],T=u[2],I=p*p+_*_+T*T;return I>0&&(I=1/Math.sqrt(I)),m[0]=u[0]*I,m[1]=u[1]*I,m[2]=u[2]*I,m},l.aT=function(m,u,p){var _=u[0],T=u[1],I=u[2],O=p[0],U=p[1],J=p[2];return m[0]=T*J-I*U,m[1]=I*O-_*J,m[2]=_*U-T*O,m},l.aU=function(m,u){return m[0]*u[0]+m[1]*u[1]+m[2]*u[2]},l.aV=Tv,l.aW=jd,l.aX=function(m,u,p,_,T){var I,O=1/Math.tan(u/2);return m[0]=O/p,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=O,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[11]=-1,m[12]=0,m[13]=0,m[15]=0,T!=null&&T!==1/0?(m[10]=(T+_)*(I=1/(_-T)),m[14]=2*T*_*I):(m[10]=-1,m[14]=-2*_),m},l.aY=function(m){var u=new W(16);return u[0]=m[0],u[1]=m[1],u[2]=m[2],u[3]=m[3],u[4]=m[4],u[5]=m[5],u[6]=m[6],u[7]=m[7],u[8]=m[8],u[9]=m[9],u[10]=m[10],u[11]=m[11],u[12]=m[12],u[13]=m[13],u[14]=m[14],u[15]=m[15],u},l.aZ=function(m,u,p){var _=Math.sin(p),T=Math.cos(p),I=u[0],O=u[1],U=u[2],J=u[3],ne=u[4],ce=u[5],_e=u[6],Re=u[7];return u!==m&&(m[8]=u[8],m[9]=u[9],m[10]=u[10],m[11]=u[11],m[12]=u[12],m[13]=u[13],m[14]=u[14],m[15]=u[15]),m[0]=I*T+ne*_,m[1]=O*T+ce*_,m[2]=U*T+_e*_,m[3]=J*T+Re*_,m[4]=ne*T-I*_,m[5]=ce*T-O*_,m[6]=_e*T-U*_,m[7]=Re*T-J*_,m},l.a_=function(m,u,p){var _=Math.sin(p),T=Math.cos(p),I=u[4],O=u[5],U=u[6],J=u[7],ne=u[8],ce=u[9],_e=u[10],Re=u[11];return u!==m&&(m[0]=u[0],m[1]=u[1],m[2]=u[2],m[3]=u[3],m[12]=u[12],m[13]=u[13],m[14]=u[14],m[15]=u[15]),m[4]=I*T+ne*_,m[5]=O*T+ce*_,m[6]=U*T+_e*_,m[7]=J*T+Re*_,m[8]=ne*T-I*_,m[9]=ce*T-O*_,m[10]=_e*T-U*_,m[11]=Re*T-J*_,m},l.aa=function(m){return Math.log(m)/Math.LN2},l.ab=function(m){var u=m[0],p=m[1];return u*u+p*p},l.ac=function(m){return m*Math.PI/180},l.ad=ve,l.ae=function(m,u){const p=[];for(const _ in m)_ in u||p.push(_);return p},l.af=function(m,u){let p=0,_=0;if(m.kind==="constant")_=m.layoutSize;else if(m.kind!=="source"){const{interpolationType:T,minZoom:I,maxZoom:O}=m,U=T?ve(Wa.interpolationFactor(T,u,I,O),0,1):0;m.kind==="camera"?_=Do.number(m.minSize,m.maxSize,U):p=U}return{uSizeT:p,uSize:_}},l.ah=function(m,{uSize:u,uSizeT:p},{lowerSize:_,upperSize:T}){return m.kind==="source"?_/lf:m.kind==="composite"?Do.number(_/lf,T/lf,p):u},l.ai=function(m,u){var p=u[0],_=u[1],T=u[2],I=u[3],O=u[4],U=u[5],J=u[6],ne=u[7],ce=u[8],_e=u[9],Re=u[10],Le=u[11],Fe=u[12],Ye=u[13],ct=u[14],wt=u[15],Xt=p*U-_*O,Rt=p*J-T*O,Ie=p*ne-I*O,at=_*J-T*U,It=_*ne-I*U,An=T*ne-I*J,nr=ce*Ye-_e*Fe,Dn=ce*ct-Re*Fe,Fn=ce*wt-Le*Fe,ur=_e*ct-Re*Ye,ar=_e*wt-Le*Ye,pr=Re*wt-Le*ct,Vn=Xt*pr-Rt*ar+Ie*ur+at*Fn-It*Dn+An*nr;return Vn?(m[0]=(U*pr-J*ar+ne*ur)*(Vn=1/Vn),m[1]=(T*ar-_*pr-I*ur)*Vn,m[2]=(Ye*An-ct*It+wt*at)*Vn,m[3]=(Re*It-_e*An-Le*at)*Vn,m[4]=(J*Fn-O*pr-ne*Dn)*Vn,m[5]=(p*pr-T*Fn+I*Dn)*Vn,m[6]=(ct*Ie-Fe*An-wt*Rt)*Vn,m[7]=(ce*An-Re*Ie+Le*Rt)*Vn,m[8]=(O*ar-U*Fn+ne*nr)*Vn,m[9]=(_*Fn-p*ar-I*nr)*Vn,m[10]=(Fe*It-Ye*Ie+wt*Xt)*Vn,m[11]=(_e*Ie-ce*It-Le*Xt)*Vn,m[12]=(U*Dn-O*ur-J*nr)*Vn,m[13]=(p*ur-_*Dn+T*nr)*Vn,m[14]=(Ye*Rt-Fe*at-ct*Xt)*Vn,m[15]=(ce*at-_e*Rt+Re*Xt)*Vn,m):null},l.aj=se,l.ak=function(m){return Math.hypot(m[0],m[1])},l.al=function(m){return m[0]=0,m[1]=0,m},l.am=function(m,u,p){return m[0]=u[0]*p,m[1]=u[1]*p,m},l.an=yv,l.ao=re,l.ap=function(m,u,p,_){const T=u.y-m.y,I=u.x-m.x,O=_.y-p.y,U=_.x-p.x,J=O*I-U*T;if(J===0)return null;const ne=(U*(m.y-p.y)-O*(m.x-p.x))/J;return new A(m.x+ne*I,m.y+ne*T)},l.aq=p1,l.ar=Ed,l.as=Z,l.at=function(m){let u=1/0,p=1/0,_=-1/0,T=-1/0;for(const I of m)u=Math.min(u,I.x),p=Math.min(p,I.y),_=Math.max(_,I.x),T=Math.max(T,I.y);return[u,p,_,T]},l.au=Qo,l.av=Te,l.aw=function(m,u,p,_,T=!1){if(!p[0]&&!p[1])return[0,0];const I=T?_==="map"?-m.bearingInRadians:0:_==="viewport"?m.bearingInRadians:0;if(I){const O=Math.sin(I),U=Math.cos(I);p=[p[0]*U-p[1]*O,p[0]*O+p[1]*U]}return[T?p[0]:Te(u,p[0],m.zoom),T?p[1]:Te(u,p[1],m.zoom)]},l.ay=gv,l.az=Rv,l.b=Ct,l.b$=m=>m.type==="circle",l.b0=function(){const m=new Float64Array(16);return Z(m),m},l.b1=function(){return new Float64Array(16)},l.b2=function(m,u,p){const _=new Float64Array(4);return function(T,I,O,U){var J=.5*Math.PI/180;I*=J,O*=J,U*=J;var ne=Math.sin(I),ce=Math.cos(I),_e=Math.sin(O),Re=Math.cos(O),Le=Math.sin(U),Fe=Math.cos(U);T[0]=ne*Re*Fe-ce*_e*Le,T[1]=ce*_e*Fe+ne*Re*Le,T[2]=ce*Re*Le-ne*_e*Fe,T[3]=ce*Re*Fe+ne*_e*Le}(_,m,u-90,p),_},l.b3=function(m,u,p,_){var T,I,O,U,J,ne=u[0],ce=u[1],_e=u[2],Re=u[3],Le=p[0],Fe=p[1],Ye=p[2],ct=p[3];return(I=ne*Le+ce*Fe+_e*Ye+Re*ct)<0&&(I=-I,Le=-Le,Fe=-Fe,Ye=-Ye,ct=-ct),1-I>V?(T=Math.acos(I),O=Math.sin(T),U=Math.sin((1-_)*T)/O,J=Math.sin(_*T)/O):(U=1-_,J=_),m[0]=U*ne+J*Le,m[1]=U*ce+J*Fe,m[2]=U*_e+J*Ye,m[3]=U*Re+J*ct,m},l.b4=function(m){const u=new Float64Array(9);var p,_,T,I,O,U,J,ne,ce,_e,Re,Le,Fe,Ye,ct,wt,Xt,Rt;_e=(T=(_=m)[0])*(J=T+T),Re=(I=_[1])*J,Fe=(O=_[2])*J,Ye=O*(ne=I+I),wt=(U=_[3])*J,Xt=U*ne,Rt=U*(ce=O+O),(p=u)[0]=1-(Le=I*ne)-(ct=O*ce),p[3]=Re-Rt,p[6]=Fe+Xt,p[1]=Re+Rt,p[4]=1-_e-ct,p[7]=Ye-wt,p[2]=Fe-Xt,p[5]=Ye+wt,p[8]=1-_e-Le;const Ie=$e(-Math.asin(ve(u[2],-1,1)));let at,It;return Math.hypot(u[5],u[8])<.001?(at=0,It=-$e(Math.atan2(u[3],u[4]))):(at=$e(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),It=$e(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:at,pitch:Ie+90,bearing:It}},l.b5=function(m,u){return m.roll==u.roll&&m.pitch==u.pitch&&m.bearing==u.bearing},l.b6=H,l.b7=Il,l.b8=Jo,l.b9=bu,l.bA=function(m){const u=[],p=m.id;return p===void 0&&u.push({message:`layers.${p}: missing required property "id"`}),m.render===void 0&&u.push({message:`layers.${p}: missing required method "render"`}),m.renderingMode&&m.renderingMode!=="2d"&&m.renderingMode!=="3d"&&u.push({message:`layers.${p}: property "renderingMode" must be either "2d" or "3d"`}),u},l.bB=function m(u,p){if(Array.isArray(u)){if(!Array.isArray(p)||u.length!==p.length)return!1;for(let _=0;_<u.length;_++)if(!m(u[_],p[_]))return!1;return!0}if(typeof u=="object"&&u!==null&&p!==null){if(typeof p!="object"||Object.keys(u).length!==Object.keys(p).length)return!1;for(const _ in u)if(!m(u[_],p[_]))return!1;return!0}return u===p},l.bC=Be,l.bD=Ve,l.bE=class extends hs{constructor(m,u){super(m,u),this.current=0}set(m){this.current!==m&&(this.current=m,this.gl.uniform1i(this.location,m))}},l.bF=Uu,l.bG=class extends hs{constructor(m,u){super(m,u),this.current=tu}set(m){if(m[12]!==this.current[12]||m[0]!==this.current[0])return this.current=m,void this.gl.uniformMatrix4fv(this.location,!1,m);for(let u=1;u<16;u++)if(m[u]!==this.current[u]){this.current=m,this.gl.uniformMatrix4fv(this.location,!1,m);break}}},l.bH=eu,l.bI=class extends hs{constructor(m,u){super(m,u),this.current=[0,0,0]}set(m){m[0]===this.current[0]&&m[1]===this.current[1]&&m[2]===this.current[2]||(this.current=m,this.gl.uniform3f(this.location,m[0],m[1],m[2]))}},l.bJ=class extends hs{constructor(m,u){super(m,u),this.current=[0,0]}set(m){m[0]===this.current[0]&&m[1]===this.current[1]||(this.current=m,this.gl.uniform2f(this.location,m[0],m[1]))}},l.bK=Y,l.bL=function(m,u){var p=Math.sin(u),_=Math.cos(u);return m[0]=_,m[1]=p,m[2]=0,m[3]=-p,m[4]=_,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},l.bM=function(m,u,p){var _=u[0],T=u[1],I=u[2];return m[0]=_*p[0]+T*p[3]+I*p[6],m[1]=_*p[1]+T*p[4]+I*p[7],m[2]=_*p[2]+T*p[5]+I*p[8],m},l.bN=function(m,u,p,_,T,I,O){var U=1/(u-p),J=1/(_-T),ne=1/(I-O);return m[0]=-2*U,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=-2*J,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=2*ne,m[11]=0,m[12]=(u+p)*U,m[13]=(T+_)*J,m[14]=(O+I)*ne,m[15]=1,m},l.bO=class extends ec{},l.bP=Ns,l.bQ=class extends zu{},l.bR=ru,l.bS=function(m){return m<=1?1:Math.pow(2,Math.ceil(Math.log(m)/Math.LN2))},l.bT=Cd,l.bU=function(m,u,p){var _=u[0],T=u[1],I=u[2],O=p[3]*_+p[7]*T+p[11]*I+p[15];return m[0]=(p[0]*_+p[4]*T+p[8]*I+p[12])/(O=O||1),m[1]=(p[1]*_+p[5]*T+p[9]*I+p[13])/O,m[2]=(p[2]*_+p[6]*T+p[10]*I+p[14])/O,m},l.bV=class extends ha{},l.bW=class extends x{},l.bX=function(m,u){return m[0]===u[0]&&m[1]===u[1]&&m[2]===u[2]&&m[3]===u[3]&&m[4]===u[4]&&m[5]===u[5]&&m[6]===u[6]&&m[7]===u[7]&&m[8]===u[8]&&m[9]===u[9]&&m[10]===u[10]&&m[11]===u[11]&&m[12]===u[12]&&m[13]===u[13]&&m[14]===u[14]&&m[15]===u[15]},l.bY=function(m,u){var p=m[0],_=m[1],T=m[2],I=m[3],O=m[4],U=m[5],J=m[6],ne=m[7],ce=m[8],_e=m[9],Re=m[10],Le=m[11],Fe=m[12],Ye=m[13],ct=m[14],wt=m[15],Xt=u[0],Rt=u[1],Ie=u[2],at=u[3],It=u[4],An=u[5],nr=u[6],Dn=u[7],Fn=u[8],ur=u[9],ar=u[10],pr=u[11],Vn=u[12],kr=u[13],Qr=u[14],Kr=u[15];return Math.abs(p-Xt)<=V*Math.max(1,Math.abs(p),Math.abs(Xt))&&Math.abs(_-Rt)<=V*Math.max(1,Math.abs(_),Math.abs(Rt))&&Math.abs(T-Ie)<=V*Math.max(1,Math.abs(T),Math.abs(Ie))&&Math.abs(I-at)<=V*Math.max(1,Math.abs(I),Math.abs(at))&&Math.abs(O-It)<=V*Math.max(1,Math.abs(O),Math.abs(It))&&Math.abs(U-An)<=V*Math.max(1,Math.abs(U),Math.abs(An))&&Math.abs(J-nr)<=V*Math.max(1,Math.abs(J),Math.abs(nr))&&Math.abs(ne-Dn)<=V*Math.max(1,Math.abs(ne),Math.abs(Dn))&&Math.abs(ce-Fn)<=V*Math.max(1,Math.abs(ce),Math.abs(Fn))&&Math.abs(_e-ur)<=V*Math.max(1,Math.abs(_e),Math.abs(ur))&&Math.abs(Re-ar)<=V*Math.max(1,Math.abs(Re),Math.abs(ar))&&Math.abs(Le-pr)<=V*Math.max(1,Math.abs(Le),Math.abs(pr))&&Math.abs(Fe-Vn)<=V*Math.max(1,Math.abs(Fe),Math.abs(Vn))&&Math.abs(Ye-kr)<=V*Math.max(1,Math.abs(Ye),Math.abs(kr))&&Math.abs(ct-Qr)<=V*Math.max(1,Math.abs(ct),Math.abs(Qr))&&Math.abs(wt-Kr)<=V*Math.max(1,Math.abs(wt),Math.abs(Kr))},l.bZ=function(m,u){return m[0]=u[0],m[1]=u[1],m[2]=u[2],m[3]=u[3],m[4]=u[4],m[5]=u[5],m[6]=u[6],m[7]=u[7],m[8]=u[8],m[9]=u[9],m[10]=u[10],m[11]=u[11],m[12]=u[12],m[13]=u[13],m[14]=u[14],m[15]=u[15],m},l.b_=m=>m.type==="symbol",l.ba=_p,l.bb=De,l.bc=me,l.bd=vr,l.be=function(m,u,p,_,T){return De(_,T,ve((m-u)/(p-u),0,1))},l.bf=pe,l.bg=function(){return new Float64Array(4)},l.bh=function(){return new Float64Array(3)},l.bi=function(m,u,p,_){var T=[],I=[];return T[0]=u[0]-p[0],T[1]=u[1]-p[1],T[2]=u[2]-p[2],I[0]=T[0]*Math.cos(_)-T[1]*Math.sin(_),I[1]=T[0]*Math.sin(_)+T[1]*Math.cos(_),I[2]=T[2],m[0]=I[0]+p[0],m[1]=I[1]+p[1],m[2]=I[2]+p[2],m},l.bj=function(m,u,p,_){var T=[],I=[];return T[0]=u[0]-p[0],T[1]=u[1]-p[1],T[2]=u[2]-p[2],I[0]=T[0],I[1]=T[1]*Math.cos(_)-T[2]*Math.sin(_),I[2]=T[1]*Math.sin(_)+T[2]*Math.cos(_),m[0]=I[0]+p[0],m[1]=I[1]+p[1],m[2]=I[2]+p[2],m},l.bk=function(m,u,p,_){var T=[],I=[];return T[0]=u[0]-p[0],T[1]=u[1]-p[1],T[2]=u[2]-p[2],I[0]=T[2]*Math.sin(_)+T[0]*Math.cos(_),I[1]=T[1],I[2]=T[2]*Math.cos(_)-T[0]*Math.sin(_),m[0]=I[0]+p[0],m[1]=I[1]+p[1],m[2]=I[2]+p[2],m},l.bl=function(m,u,p){var _=Math.sin(p),T=Math.cos(p),I=u[0],O=u[1],U=u[2],J=u[3],ne=u[8],ce=u[9],_e=u[10],Re=u[11];return u!==m&&(m[4]=u[4],m[5]=u[5],m[6]=u[6],m[7]=u[7],m[12]=u[12],m[13]=u[13],m[14]=u[14],m[15]=u[15]),m[0]=I*T-ne*_,m[1]=O*T-ce*_,m[2]=U*T-_e*_,m[3]=J*T-Re*_,m[8]=I*_+ne*T,m[9]=O*_+ce*T,m[10]=U*_+_e*T,m[11]=J*_+Re*T,m},l.bm=function(m,u){const p=pe(m,360),_=pe(u,360),T=_-p,I=_>p?T-360:T+360;return Math.abs(T)<Math.abs(I)?T:I},l.bn=function(m){return m[0]=0,m[1]=0,m[2]=0,m},l.bo=function(m,u,p,_){const T=Math.sqrt(m*m+u*u),I=Math.sqrt(p*p+_*_);m/=T,u/=T,p/=I,_/=I;const O=Math.acos(m*p+u*_);return-u*p+m*_>0?O:-O},l.bp=function(m,u){return m[0]*u[0]+m[1]*u[1]+m[2]*u[2]+m[3]},l.bq=xv,l.br=function(m,u){const p=pe(m,2*Math.PI),_=pe(u,2*Math.PI);return Math.min(Math.abs(p-_),Math.abs(p-_+2*Math.PI),Math.abs(p-_-2*Math.PI))},l.bs=function(m){return Math.hypot(m[0],m[1],m[2])},l.bt=function(){const m={},u=ge.$version;for(const p in ge.$root){const _=ge.$root[p];if(_.required){let T=null;T=p==="version"?u:_.type==="array"?[]:{},T!=null&&(m[p]=T)}}return m},l.bu=Sd,l.bv=hn,l.bw=function(m){m=m.slice();const u=Object.create(null);for(let p=0;p<m.length;p++)u[m[p].id]=m[p];for(let p=0;p<m.length;p++)"ref"in m[p]&&(m[p]=We(m[p],u[m[p].ref]));return m},l.bx=function(m){if(m.type==="custom")return new UE(m);switch(m.type){case"background":return new zE(m);case"circle":return new xx(m);case"fill":return new zf(m);case"fill-extrusion":return new K_(m);case"heatmap":return new iv(m);case"hillshade":return new U_(m);case"line":return new Io(m);case"raster":return new Fx(m);case"symbol":return new uf(m)}},l.by=tt,l.bz=function(m,u){if(!m)return[{command:"setStyle",args:[u]}];let p=[];try{if(!Ce(m.version,u.version))return[{command:"setStyle",args:[u]}];Ce(m.center,u.center)||p.push({command:"setCenter",args:[u.center]}),Ce(m.centerAltitude,u.centerAltitude)||p.push({command:"setCenterAltitude",args:[u.centerAltitude]}),Ce(m.zoom,u.zoom)||p.push({command:"setZoom",args:[u.zoom]}),Ce(m.bearing,u.bearing)||p.push({command:"setBearing",args:[u.bearing]}),Ce(m.pitch,u.pitch)||p.push({command:"setPitch",args:[u.pitch]}),Ce(m.roll,u.roll)||p.push({command:"setRoll",args:[u.roll]}),Ce(m.sprite,u.sprite)||p.push({command:"setSprite",args:[u.sprite]}),Ce(m.glyphs,u.glyphs)||p.push({command:"setGlyphs",args:[u.glyphs]}),Ce(m.transition,u.transition)||p.push({command:"setTransition",args:[u.transition]}),Ce(m.light,u.light)||p.push({command:"setLight",args:[u.light]}),Ce(m.terrain,u.terrain)||p.push({command:"setTerrain",args:[u.terrain]}),Ce(m.sky,u.sky)||p.push({command:"setSky",args:[u.sky]}),Ce(m.projection,u.projection)||p.push({command:"setProjection",args:[u.projection]});const _={},T=[];(function(O,U,J,ne){let ce;for(ce in U=U||{},O=O||{})Object.prototype.hasOwnProperty.call(O,ce)&&(Object.prototype.hasOwnProperty.call(U,ce)||ut(ce,J,ne));for(ce in U)Object.prototype.hasOwnProperty.call(U,ce)&&(Object.prototype.hasOwnProperty.call(O,ce)?Ce(O[ce],U[ce])||(O[ce].type==="geojson"&&U[ce].type==="geojson"&&xt(O,U,ce)?Qe(J,{command:"setGeoJSONSourceData",args:[ce,U[ce].data]}):lt(ce,U,J,ne)):et(ce,U,J))})(m.sources,u.sources,T,_);const I=[];m.layers&&m.layers.forEach(O=>{"source"in O&&_[O.source]?p.push({command:"removeLayer",args:[O.id]}):I.push(O)}),p=p.concat(T),function(O,U,J){U=U||[];const ne=(O=O||[]).map(zt),ce=U.map(zt),_e=O.reduce(Tn,{}),Re=U.reduce(Tn,{}),Le=ne.slice(),Fe=Object.create(null);let Ye,ct,wt,Xt,Rt;for(let Ie=0,at=0;Ie<ne.length;Ie++)Ye=ne[Ie],Object.prototype.hasOwnProperty.call(Re,Ye)?at++:(Qe(J,{command:"removeLayer",args:[Ye]}),Le.splice(Le.indexOf(Ye,at),1));for(let Ie=0,at=0;Ie<ce.length;Ie++)Ye=ce[ce.length-1-Ie],Le[Le.length-1-Ie]!==Ye&&(Object.prototype.hasOwnProperty.call(_e,Ye)?(Qe(J,{command:"removeLayer",args:[Ye]}),Le.splice(Le.lastIndexOf(Ye,Le.length-at),1)):at++,Xt=Le[Le.length-Ie],Qe(J,{command:"addLayer",args:[Re[Ye],Xt]}),Le.splice(Le.length-Ie,0,Ye),Fe[Ye]=!0);for(let Ie=0;Ie<ce.length;Ie++)if(Ye=ce[Ie],ct=_e[Ye],wt=Re[Ye],!Fe[Ye]&&!Ce(ct,wt))if(Ce(ct.source,wt.source)&&Ce(ct["source-layer"],wt["source-layer"])&&Ce(ct.type,wt.type)){for(Rt in Dt(ct.layout,wt.layout,J,Ye,null,"setLayoutProperty"),Dt(ct.paint,wt.paint,J,Ye,null,"setPaintProperty"),Ce(ct.filter,wt.filter)||Qe(J,{command:"setFilter",args:[Ye,wt.filter]}),Ce(ct.minzoom,wt.minzoom)&&Ce(ct.maxzoom,wt.maxzoom)||Qe(J,{command:"setLayerZoomRange",args:[Ye,wt.minzoom,wt.maxzoom]}),ct)Object.prototype.hasOwnProperty.call(ct,Rt)&&Rt!=="layout"&&Rt!=="paint"&&Rt!=="filter"&&Rt!=="metadata"&&Rt!=="minzoom"&&Rt!=="maxzoom"&&(Rt.indexOf("paint.")===0?Dt(ct[Rt],wt[Rt],J,Ye,Rt.slice(6),"setPaintProperty"):Ce(ct[Rt],wt[Rt])||Qe(J,{command:"setLayerProperty",args:[Ye,Rt,wt[Rt]]}));for(Rt in wt)Object.prototype.hasOwnProperty.call(wt,Rt)&&!Object.prototype.hasOwnProperty.call(ct,Rt)&&Rt!=="layout"&&Rt!=="paint"&&Rt!=="filter"&&Rt!=="metadata"&&Rt!=="minzoom"&&Rt!=="maxzoom"&&(Rt.indexOf("paint.")===0?Dt(ct[Rt],wt[Rt],J,Ye,Rt.slice(6),"setPaintProperty"):Ce(ct[Rt],wt[Rt])||Qe(J,{command:"setLayerProperty",args:[Ye,Rt,wt[Rt]]}))}else Qe(J,{command:"removeLayer",args:[Ye]}),Xt=Le[Le.lastIndexOf(Ye)+1],Qe(J,{command:"addLayer",args:[wt,Xt]})}(I,u.layers,p)}catch(_){console.warn("Unable to compute style diff:",_),p=[{command:"setStyle",args:[u]}]}return p},l.c=_t,l.c0=m=>m.type==="heatmap",l.c1=m=>m.type==="line",l.c2=m=>m.type==="fill",l.c3=m=>m.type==="fill-extrusion",l.c4=m=>m.type==="hillshade",l.c5=m=>m.type==="raster",l.c6=m=>m.type==="background",l.c7=m=>m.type==="custom",l.c8=Me,l.c9=function(m,u,p){const _=de(u.x-p.x,u.y-p.y),T=de(m.x-p.x,m.y-p.y);var I,O;return $e(Math.atan2(_[0]*T[1]-_[1]*T[0],(I=_)[0]*(O=T)[0]+I[1]*O[1]))},l.cA=y,l.cB=Z_,l.cC=cv,l.cD=Pl,l.cE=bn,l.ca=fe,l.cb=function(m,u,p){var _=u[0],T=u[1];return m[0]=p[0]*_+p[4]*T+p[12],m[1]=p[1]*_+p[5]*T+p[13],m},l.cc=function(m,u){const{x:p,y:_}=da.fromLngLat(u);return!(m<0||m>25||_<0||_>=1||p<0||p>=1)},l.cd=function(m,u){return m[0]=u[0],m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=u[1],m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=u[2],m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m},l.ce=class extends us{},l.cf=Xg,l.ch=function(m){return m.message===Ee},l.ci=vn,l.cj=function(m,u){jt.REGISTERED_PROTOCOLS[m]=u},l.ck=function(m){delete jt.REGISTERED_PROTOCOLS[m]},l.cl=function(m,u){const p={};for(let T=0;T<m.length;T++){const I=u&&u[m[T].id]||Rs(m[T]);u&&(u[m[T].id]=I);let O=p[I];O||(O=p[I]=[]),O.push(m[T])}const _=[];for(const T in p)_.push(p[T]);return _},l.cm=Mr,l.cn=Vg,l.co=d1,l.cp=dv,l.cq=function(m){m.bucket.createArrays(),m.bucket.tilePixelRatio=ue/(512*m.bucket.overscaling),m.bucket.compareText={},m.bucket.iconsNeedLinear=!1;const u=m.bucket.layers[0],p=u.layout,_=u._unevaluatedLayout._values,T={layoutIconSize:_["icon-size"].possiblyEvaluate(new mn(m.bucket.zoom+1),m.canonical),layoutTextSize:_["text-size"].possiblyEvaluate(new mn(m.bucket.zoom+1),m.canonical),textMaxSize:_["text-size"].possiblyEvaluate(new mn(18))};if(m.bucket.textSizeData.kind==="composite"){const{minZoom:ne,maxZoom:ce}=m.bucket.textSizeData;T.compositeTextSizes=[_["text-size"].possiblyEvaluate(new mn(ne),m.canonical),_["text-size"].possiblyEvaluate(new mn(ce),m.canonical)]}if(m.bucket.iconSizeData.kind==="composite"){const{minZoom:ne,maxZoom:ce}=m.bucket.iconSizeData;T.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new mn(ne),m.canonical),_["icon-size"].possiblyEvaluate(new mn(ce),m.canonical)]}const I=p.get("text-line-height")*Qo,O=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point",U=p.get("text-keep-upright"),J=p.get("text-size");for(const ne of m.bucket.features){const ce=p.get("text-font").evaluate(ne,{},m.canonical).join(","),_e=J.evaluate(ne,{},m.canonical),Re=T.layoutTextSize.evaluate(ne,{},m.canonical),Le=T.layoutIconSize.evaluate(ne,{},m.canonical),Fe={horizontal:{},vertical:void 0},Ye=ne.text;let ct,wt=[0,0];if(Ye){const Ie=Ye.toString(),at=p.get("text-letter-spacing").evaluate(ne,{},m.canonical)*Qo,It=N(Ie)?at:0,An=p.get("text-anchor").evaluate(ne,{},m.canonical),nr=_1(u,ne,m.canonical);if(!nr){const ar=p.get("text-radial-offset").evaluate(ne,{},m.canonical);wt=ar?uh(An,[ar*Qo,y1]):p.get("text-offset").evaluate(ne,{},m.canonical).map(pr=>pr*Qo)}let Dn=O?"center":p.get("text-justify").evaluate(ne,{},m.canonical);const Fn=p.get("symbol-placement")==="point"?p.get("text-max-width").evaluate(ne,{},m.canonical)*Qo:1/0,ur=()=>{m.bucket.allowVerticalPlacement&&Ph(Ie)&&(Fe.vertical=wm(Ye,m.glyphMap,m.glyphPositions,m.imagePositions,ce,Fn,I,An,"left",It,wt,l.ag.vertical,!0,Re,_e))};if(!O&&nr){const ar=new Set;if(Dn==="auto")for(let Vn=0;Vn<nr.values.length;Vn+=2)ar.add(Rv(nr.values[Vn]));else ar.add(Dn);let pr=!1;for(const Vn of ar)if(!Fe.horizontal[Vn])if(pr)Fe.horizontal[Vn]=Fe.horizontal[0];else{const kr=wm(Ye,m.glyphMap,m.glyphPositions,m.imagePositions,ce,Fn,I,"center",Vn,It,wt,l.ag.horizontal,!1,Re,_e);kr&&(Fe.horizontal[Vn]=kr,pr=kr.positionedLines.length===1)}ur()}else{Dn==="auto"&&(Dn=Rv(An));const ar=wm(Ye,m.glyphMap,m.glyphPositions,m.imagePositions,ce,Fn,I,An,Dn,It,wt,l.ag.horizontal,!1,Re,_e);ar&&(Fe.horizontal[Dn]=ar),ur(),Ph(Ie)&&O&&U&&(Fe.vertical=wm(Ye,m.glyphMap,m.glyphPositions,m.imagePositions,ce,Fn,I,An,Dn,It,wt,l.ag.vertical,!1,Re,_e))}}let Xt=!1;if(ne.icon&&ne.icon.name){const Ie=m.imageMap[ne.icon.name];Ie&&(ct=Em(m.imagePositions[ne.icon.name],p.get("icon-offset").evaluate(ne,{},m.canonical),p.get("icon-anchor").evaluate(ne,{},m.canonical)),Xt=!!Ie.sdf,m.bucket.sdfIcons===void 0?m.bucket.sdfIcons=Xt:m.bucket.sdfIcons!==Xt&&it("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ie.pixelRatio!==m.bucket.pixelRatio||p.get("icon-rotate").constantOr(1)!==0)&&(m.bucket.iconsNeedLinear=!0))}const Rt=Hg(Fe.horizontal)||Fe.vertical;m.bucket.iconsInText=!!Rt&&Rt.iconsInText,(Rt||ct)&&ch(m.bucket,ne,Fe,ct,m.imageMap,T,Re,Le,wt,Xt,m.canonical,m.subdivisionGranularity)}m.showCollisionBoxes&&m.bucket.generateCollisionDebugBuffers()},l.cr=Q_,l.cs=qc,l.ct=Lg,l.cu=Nd,l.cv=bm,l.cw=class{constructor(m){this._marks={start:[m.url,"start"].join("#"),end:[m.url,"end"].join("#"),measure:m.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let m=performance.getEntriesByName(this._marks.measure);return m.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),m=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),m}},l.cx=function(m,u,p,_,T){return a(this,void 0,void 0,function*(){if(z())try{return yield tn(m,u,p,_,T)}catch{}return function(I,O,U,J,ne){const ce=I.width,_e=I.height;Kt&&Jt||(Kt=new OffscreenCanvas(ce,_e),Jt=Kt.getContext("2d",{willReadFrequently:!0})),Kt.width=ce,Kt.height=_e,Jt.drawImage(I,0,0,ce,_e);const Re=Jt.getImageData(O,U,J,ne);return Jt.clearRect(0,0,ce,_e),Re.data}(m,u,p,_,T)})},l.cy=Pm,l.cz=h,l.d=nn,l.e=ye,l.f=m=>a(void 0,void 0,void 0,function*(){if(m.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(m)],{type:"image/png"});try{return createImageBitmap(u)}catch(p){throw new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=vt,l.h=m=>new Promise((u,p)=>{const _=new Image;_.onload=()=>{u(_),URL.revokeObjectURL(_.src),_.onload=null,window.requestAnimationFrame(()=>{_.src=Xe})},_.onerror=()=>p(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const T=new Blob([new Uint8Array(m)],{type:"image/png"});_.src=m.byteLength?URL.createObjectURL(T):Xe}),l.i=$t,l.j=(m,u)=>pn(ye(m,{type:"json"}),u),l.k=ir,l.l=Pn,l.m=pn,l.n=(m,u)=>pn(ye(m,{type:"arrayBuffer"}),u),l.o=function(m){return new bm(m).readFields(zd,[])},l.p=fv,l.q=Of,l.r=Li,l.s=Ht,l.t=jc,l.u=Jr,l.v=ge,l.w=it,l.x=Yl,l.y=Nu,l.z=function([m,u,p]){return u+=90,u*=Math.PI/180,p*=Math.PI/180,{x:m*Math.cos(u)*Math.sin(p),y:m*Math.sin(u)*Math.sin(p),z:m*Math.cos(p)}}}),i("worker",["./shared"],function(l){class a{constructor(ge){this.keyCache={},ge&&this.replace(ge)}replace(ge){this._layerConfigs={},this._layers={},this.update(ge,[])}update(ge,ke){for(const Ce of ge){this._layerConfigs[Ce.id]=Ce;const Qe=this._layers[Ce.id]=l.bx(Ce);Qe._featureFilter=l.a6(Qe.filter),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(const Ce of ke)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const We=l.cl(Object.values(this._layerConfigs),this.keyCache);for(const Ce of We){const Qe=Ce.map(zt=>this._layers[zt.id]),et=Qe[0];if(et.visibility==="none")continue;const ut=et.source||"";let lt=this.familiesBySource[ut];lt||(lt=this.familiesBySource[ut]={});const xt=et.sourceLayer||"_geojsonTileLayer";let Dt=lt[xt];Dt||(Dt=lt[xt]=[]),Dt.push(Qe)}}}class h{constructor(ge){const ke={},We=[];for(const ut in ge){const lt=ge[ut],xt=ke[ut]={};for(const Dt in lt){const zt=lt[+Dt];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const Tn={x:0,y:0,w:zt.bitmap.width+2,h:zt.bitmap.height+2};We.push(Tn),xt[Dt]={rect:Tn,metrics:zt.metrics}}}const{w:Ce,h:Qe}=l.p(We),et=new l.q({width:Ce||1,height:Qe||1});for(const ut in ge){const lt=ge[ut];for(const xt in lt){const Dt=lt[+xt];if(!Dt||Dt.bitmap.width===0||Dt.bitmap.height===0)continue;const zt=ke[ut][xt].rect;l.q.copy(Dt.bitmap,et,{x:0,y:0},{x:zt.x+1,y:zt.y+1},Dt.bitmap)}}this.image=et,this.positions=ke}}l.cm("GlyphAtlas",h);class f{constructor(ge){this.tileID=new l.Y(ge.tileID.overscaledZ,ge.tileID.wrap,ge.tileID.canonical.z,ge.tileID.canonical.x,ge.tileID.canonical.y),this.uid=ge.uid,this.zoom=ge.zoom,this.pixelRatio=ge.pixelRatio,this.tileSize=ge.tileSize,this.source=ge.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ge.showCollisionBoxes,this.collectResourceTiming=!!ge.collectResourceTiming,this.returnDependencies=!!ge.returnDependencies,this.promoteId=ge.promoteId,this.inFlightDependencies=[]}parse(ge,ke,We,Ce,Qe){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=ge,this.collisionBoxArray=new l.a4;const et=new l.cn(Object.keys(ge.layers).sort()),ut=new l.co(this.tileID,this.promoteId);ut.bucketLayerIDs=[];const lt={},xt={featureIndex:ut,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:We,subdivisionGranularity:Qe},Dt=ke.familiesBySource[this.source];for(const or in Dt){const Er=ge.layers[or];if(!Er)continue;Er.version===1&&l.w(`Vector tile source "${this.source}" layer "${or}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const lr=et.encode(or),Ri=[];for(let ci=0;ci<Er.length;ci++){const Vi=Er.feature(ci),Vr=ut.getId(Vi,or);Ri.push({feature:Vi,id:Vr,index:ci,sourceLayerIndex:lr})}for(const ci of Dt[or]){const Vi=ci[0];Vi.source!==this.source&&l.w(`layer.source = ${Vi.source} does not equal this.source = ${this.source}`),Vi.minzoom&&this.zoom<Math.floor(Vi.minzoom)||Vi.maxzoom&&this.zoom>=Vi.maxzoom||Vi.visibility!=="none"&&(v(ci,this.zoom,We),(lt[Vi.id]=Vi.createBucket({index:ut.bucketLayerIDs.length,layers:ci,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:lr,sourceID:this.source})).populate(Ri,xt,this.tileID.canonical),ut.bucketLayerIDs.push(ci.map(Vr=>Vr.id)))}}const zt=l.bC(xt.glyphDependencies,or=>Object.keys(or).map(Number));this.inFlightDependencies.forEach(or=>or==null?void 0:or.abort()),this.inFlightDependencies=[];let Tn=Promise.resolve({});if(Object.keys(zt).length){const or=new AbortController;this.inFlightDependencies.push(or),Tn=Ce.sendAsync({type:"GG",data:{stacks:zt,source:this.source,tileID:this.tileID,type:"glyphs"}},or)}const qt=Object.keys(xt.iconDependencies);let Zn=Promise.resolve({});if(qt.length){const or=new AbortController;this.inFlightDependencies.push(or),Zn=Ce.sendAsync({type:"GI",data:{icons:qt,source:this.source,tileID:this.tileID,type:"icons"}},or)}const Gn=Object.keys(xt.patternDependencies);let we=Promise.resolve({});if(Gn.length){const or=new AbortController;this.inFlightDependencies.push(or),we=Ce.sendAsync({type:"GI",data:{icons:Gn,source:this.source,tileID:this.tileID,type:"patterns"}},or)}const[Ne,je,At]=yield Promise.all([Tn,Zn,we]),sn=new h(Ne),Hn=new l.cp(je,At);for(const or in lt){const Er=lt[or];Er instanceof l.a5?(v(Er.layers,this.zoom,We),l.cq({bucket:Er,glyphMap:Ne,glyphPositions:sn.positions,imageMap:je,imagePositions:Hn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:xt.subdivisionGranularity})):Er.hasPattern&&(Er instanceof l.cr||Er instanceof l.cs||Er instanceof l.ct)&&(v(Er.layers,this.zoom,We),Er.addFeatures(xt,this.tileID.canonical,Hn.patternPositions))}return this.status="done",{buckets:Object.values(lt).filter(or=>!or.isEmpty()),featureIndex:ut,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:sn.image,imageAtlas:Hn,glyphMap:this.returnDependencies?Ne:null,iconMap:this.returnDependencies?je:null,glyphPositions:this.returnDependencies?sn.positions:null}})}}function v(mt,ge,ke){const We=new l.C(ge);for(const Ce of mt)Ce.recalculate(We,ke)}class y{constructor(ge,ke,We){this.actor=ge,this.layerIndex=ke,this.availableImages=We,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ge,ke){return l._(this,void 0,void 0,function*(){const We=yield l.n(ge.request,ke);try{return{vectorTile:new l.cu.VectorTile(new l.cv(We.data)),rawData:We.data,cacheControl:We.cacheControl,expires:We.expires}}catch(Ce){const Qe=new Uint8Array(We.data);let et=`Unable to parse the tile at ${ge.request.url}, `;throw et+=Qe[0]===31&&Qe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ce.message}`,new Error(et)}})}loadTile(ge){return l._(this,void 0,void 0,function*(){const ke=ge.uid,We=!!(ge&&ge.request&&ge.request.collectResourceTiming)&&new l.cw(ge.request),Ce=new f(ge);this.loading[ke]=Ce;const Qe=new AbortController;Ce.abort=Qe;try{const et=yield this.loadVectorTile(ge,Qe);if(delete this.loading[ke],!et)return null;const ut=et.rawData,lt={};et.expires&&(lt.expires=et.expires),et.cacheControl&&(lt.cacheControl=et.cacheControl);const xt={};if(We){const zt=We.finish();zt&&(xt.resourceTiming=JSON.parse(JSON.stringify(zt)))}Ce.vectorTile=et.vectorTile;const Dt=Ce.parse(et.vectorTile,this.layerIndex,this.availableImages,this.actor,ge.subdivisionGranularity);this.loaded[ke]=Ce,this.fetching[ke]={rawTileData:ut,cacheControl:lt,resourceTiming:xt};try{const zt=yield Dt;return l.e({rawTileData:ut.slice(0)},zt,lt,xt)}finally{delete this.fetching[ke]}}catch(et){throw delete this.loading[ke],Ce.status="done",this.loaded[ke]=Ce,et}})}reloadTile(ge){return l._(this,void 0,void 0,function*(){const ke=ge.uid;if(!this.loaded||!this.loaded[ke])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const We=this.loaded[ke];if(We.showCollisionBoxes=ge.showCollisionBoxes,We.status==="parsing"){const Ce=yield We.parse(We.vectorTile,this.layerIndex,this.availableImages,this.actor,ge.subdivisionGranularity);let Qe;if(this.fetching[ke]){const{rawTileData:et,cacheControl:ut,resourceTiming:lt}=this.fetching[ke];delete this.fetching[ke],Qe=l.e({rawTileData:et.slice(0)},Ce,ut,lt)}else Qe=Ce;return Qe}if(We.status==="done"&&We.vectorTile)return We.parse(We.vectorTile,this.layerIndex,this.availableImages,this.actor,ge.subdivisionGranularity)})}abortTile(ge){return l._(this,void 0,void 0,function*(){const ke=this.loading,We=ge.uid;ke&&ke[We]&&ke[We].abort&&(ke[We].abort.abort(),delete ke[We])})}removeTile(ge){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ge.uid]&&delete this.loaded[ge.uid]})}}class w{constructor(){this.loaded={}}loadTile(ge){return l._(this,void 0,void 0,function*(){const{uid:ke,encoding:We,rawImageData:Ce,redFactor:Qe,greenFactor:et,blueFactor:ut,baseShift:lt}=ge,xt=Ce.width+2,Dt=Ce.height+2,zt=l.b(Ce)?new l.R({width:xt,height:Dt},yield l.cx(Ce,-1,-1,xt,Dt)):Ce,Tn=new l.cy(ke,zt,We,Qe,et,ut,lt);return this.loaded=this.loaded||{},this.loaded[ke]=Tn,Tn})}removeTile(ge){const ke=this.loaded,We=ge.uid;ke&&ke[We]&&delete ke[We]}}var b,A,M=function(){if(A)return b;function mt(ke,We){if(ke.length!==0){ge(ke[0],We);for(var Ce=1;Ce<ke.length;Ce++)ge(ke[Ce],!We)}}function ge(ke,We){for(var Ce=0,Qe=0,et=0,ut=ke.length,lt=ut-1;et<ut;lt=et++){var xt=(ke[et][0]-ke[lt][0])*(ke[lt][1]+ke[et][1]),Dt=Ce+xt;Qe+=Math.abs(Ce)>=Math.abs(xt)?Ce-Dt+xt:xt-Dt+Ce,Ce=Dt}Ce+Qe>=0!=!!We&&ke.reverse()}return A=1,b=function ke(We,Ce){var Qe,et=We&&We.type;if(et==="FeatureCollection")for(Qe=0;Qe<We.features.length;Qe++)ke(We.features[Qe],Ce);else if(et==="GeometryCollection")for(Qe=0;Qe<We.geometries.length;Qe++)ke(We.geometries[Qe],Ce);else if(et==="Feature")ke(We.geometry,Ce);else if(et==="Polygon")mt(We.coordinates,Ce);else if(et==="MultiPolygon")for(Qe=0;Qe<We.coordinates.length;Qe++)mt(We.coordinates[Qe],Ce);return We}}(),P=l.cz(M);const C=l.cu.VectorTileFeature.prototype.toGeoJSON;class k{constructor(ge){this._feature=ge,this.extent=l.Z,this.type=ge.type,this.properties=ge.tags,"id"in ge&&!isNaN(ge.id)&&(this.id=parseInt(ge.id,10))}loadGeometry(){if(this._feature.type===1){const ge=[];for(const ke of this._feature.geometry)ge.push([new l.P(ke[0],ke[1])]);return ge}{const ge=[];for(const ke of this._feature.geometry){const We=[];for(const Ce of ke)We.push(new l.P(Ce[0],Ce[1]));ge.push(We)}return ge}}toGeoJSON(ge,ke,We){return C.call(this,ge,ke,We)}}class B{constructor(ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.Z,this.length=ge.length,this._features=ge}feature(ge){return new k(this._features[ge])}}var z,q,V,W={exports:{}},Y=function(){if(V)return W.exports;V=1;var mt=l.cC(),ge=function(){if(q)return z;q=1;var Dt=l.cA(),zt=l.cB().VectorTileFeature;function Tn(Zn,Gn){this.options=Gn||{},this.features=Zn,this.length=Zn.length}function qt(Zn,Gn){this.id=typeof Zn.id=="number"?Zn.id:void 0,this.type=Zn.type,this.rawGeometry=Zn.type===1?[Zn.geometry]:Zn.geometry,this.properties=Zn.tags,this.extent=Gn||4096}return z=Tn,Tn.prototype.feature=function(Zn){return new qt(this.features[Zn],this.options.extent)},qt.prototype.loadGeometry=function(){var Zn=this.rawGeometry;this.geometry=[];for(var Gn=0;Gn<Zn.length;Gn++){for(var we=Zn[Gn],Ne=[],je=0;je<we.length;je++)Ne.push(new Dt(we[je][0],we[je][1]));this.geometry.push(Ne)}return this.geometry},qt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Zn=this.geometry,Gn=1/0,we=-1/0,Ne=1/0,je=-1/0,At=0;At<Zn.length;At++)for(var sn=Zn[At],Hn=0;Hn<sn.length;Hn++){var or=sn[Hn];Gn=Math.min(Gn,or.x),we=Math.max(we,or.x),Ne=Math.min(Ne,or.y),je=Math.max(je,or.y)}return[Gn,Ne,we,je]},qt.prototype.toGeoJSON=zt.prototype.toGeoJSON,z}();function ke(Dt){var zt=new mt;return function(Tn,qt){for(var Zn in Tn.layers)qt.writeMessage(3,We,Tn.layers[Zn])}(Dt,zt),zt.finish()}function We(Dt,zt){var Tn;zt.writeVarintField(15,Dt.version||1),zt.writeStringField(1,Dt.name||""),zt.writeVarintField(5,Dt.extent||4096);var qt={keys:[],values:[],keycache:{},valuecache:{}};for(Tn=0;Tn<Dt.length;Tn++)qt.feature=Dt.feature(Tn),zt.writeMessage(2,Ce,qt);var Zn=qt.keys;for(Tn=0;Tn<Zn.length;Tn++)zt.writeStringField(3,Zn[Tn]);var Gn=qt.values;for(Tn=0;Tn<Gn.length;Tn++)zt.writeMessage(4,xt,Gn[Tn])}function Ce(Dt,zt){var Tn=Dt.feature;Tn.id!==void 0&&zt.writeVarintField(1,Tn.id),zt.writeMessage(2,Qe,Dt),zt.writeVarintField(3,Tn.type),zt.writeMessage(4,lt,Tn)}function Qe(Dt,zt){var Tn=Dt.feature,qt=Dt.keys,Zn=Dt.values,Gn=Dt.keycache,we=Dt.valuecache;for(var Ne in Tn.properties){var je=Tn.properties[Ne],At=Gn[Ne];if(je!==null){At===void 0&&(qt.push(Ne),Gn[Ne]=At=qt.length-1),zt.writeVarint(At);var sn=typeof je;sn!=="string"&&sn!=="boolean"&&sn!=="number"&&(je=JSON.stringify(je));var Hn=sn+":"+je,or=we[Hn];or===void 0&&(Zn.push(je),we[Hn]=or=Zn.length-1),zt.writeVarint(or)}}}function et(Dt,zt){return(zt<<3)+(7&Dt)}function ut(Dt){return Dt<<1^Dt>>31}function lt(Dt,zt){for(var Tn=Dt.loadGeometry(),qt=Dt.type,Zn=0,Gn=0,we=Tn.length,Ne=0;Ne<we;Ne++){var je=Tn[Ne],At=1;qt===1&&(At=je.length),zt.writeVarint(et(1,At));for(var sn=qt===3?je.length-1:je.length,Hn=0;Hn<sn;Hn++){Hn===1&&qt!==1&&zt.writeVarint(et(2,sn-1));var or=je[Hn].x-Zn,Er=je[Hn].y-Gn;zt.writeVarint(ut(or)),zt.writeVarint(ut(Er)),Zn+=or,Gn+=Er}qt===3&&zt.writeVarint(et(7,1))}}function xt(Dt,zt){var Tn=typeof Dt;Tn==="string"?zt.writeStringField(1,Dt):Tn==="boolean"?zt.writeBooleanField(7,Dt):Tn==="number"&&(Dt%1!=0?zt.writeDoubleField(3,Dt):Dt<0?zt.writeSVarintField(6,Dt):zt.writeVarintField(5,Dt))}return W.exports=ke,W.exports.fromVectorTileJs=ke,W.exports.fromGeojsonVt=function(Dt,zt){zt=zt||{};var Tn={};for(var qt in Dt)Tn[qt]=new ge(Dt[qt].features,zt),Tn[qt].name=qt,Tn[qt].version=zt.version,Tn[qt].extent=zt.extent;return ke({layers:Tn})},W.exports.GeoJSONWrapper=ge,W.exports}(),Z=l.cz(Y);const j={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:mt=>mt},K=Math.fround||(re=new Float32Array(1),mt=>(re[0]=+mt,re[0]));var re;const ie=3,se=5,de=6;class ue{constructor(ge){this.options=Object.assign(Object.create(j),ge),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ge){const{log:ke,minZoom:We,maxZoom:Ce}=this.options;ke&&console.time("total time");const Qe=`prepare ${ge.length} points`;ke&&console.time(Qe),this.points=ge;const et=[];for(let lt=0;lt<ge.length;lt++){const xt=ge[lt];if(!xt.geometry)continue;const[Dt,zt]=xt.geometry.coordinates,Tn=K(De(Dt)),qt=K(me(zt));et.push(Tn,qt,1/0,lt,-1,1),this.options.reduce&&et.push(0)}let ut=this.trees[Ce+1]=this._createTree(et);ke&&console.timeEnd(Qe);for(let lt=Ce;lt>=We;lt--){const xt=+Date.now();ut=this.trees[lt]=this._createTree(this._cluster(ut,lt)),ke&&console.log("z%d: %d clusters in %dms",lt,ut.numItems,+Date.now()-xt)}return ke&&console.timeEnd("total time"),this}getClusters(ge,ke){let We=((ge[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,ge[1]));let Qe=ge[2]===180?180:((ge[2]+180)%360+360)%360-180;const et=Math.max(-90,Math.min(90,ge[3]));if(ge[2]-ge[0]>=360)We=-180,Qe=180;else if(We>Qe){const zt=this.getClusters([We,Ce,180,et],ke),Tn=this.getClusters([-180,Ce,Qe,et],ke);return zt.concat(Tn)}const ut=this.trees[this._limitZoom(ke)],lt=ut.range(De(We),me(et),De(Qe),me(Ce)),xt=ut.data,Dt=[];for(const zt of lt){const Tn=this.stride*zt;Dt.push(xt[Tn+se]>1?Te(xt,Tn,this.clusterProps):this.points[xt[Tn+ie]])}return Dt}getChildren(ge){const ke=this._getOriginId(ge),We=this._getOriginZoom(ge),Ce="No cluster with the specified id.",Qe=this.trees[We];if(!Qe)throw new Error(Ce);const et=Qe.data;if(ke*this.stride>=et.length)throw new Error(Ce);const ut=this.options.radius/(this.options.extent*Math.pow(2,We-1)),lt=Qe.within(et[ke*this.stride],et[ke*this.stride+1],ut),xt=[];for(const Dt of lt){const zt=Dt*this.stride;et[zt+4]===ge&&xt.push(et[zt+se]>1?Te(et,zt,this.clusterProps):this.points[et[zt+ie]])}if(xt.length===0)throw new Error(Ce);return xt}getLeaves(ge,ke,We){const Ce=[];return this._appendLeaves(Ce,ge,ke=ke||10,We=We||0,0),Ce}getTile(ge,ke,We){const Ce=this.trees[this._limitZoom(ge)],Qe=Math.pow(2,ge),{extent:et,radius:ut}=this.options,lt=ut/et,xt=(We-lt)/Qe,Dt=(We+1+lt)/Qe,zt={features:[]};return this._addTileFeatures(Ce.range((ke-lt)/Qe,xt,(ke+1+lt)/Qe,Dt),Ce.data,ke,We,Qe,zt),ke===0&&this._addTileFeatures(Ce.range(1-lt/Qe,xt,1,Dt),Ce.data,Qe,We,Qe,zt),ke===Qe-1&&this._addTileFeatures(Ce.range(0,xt,lt/Qe,Dt),Ce.data,-1,We,Qe,zt),zt.features.length?zt:null}getClusterExpansionZoom(ge){let ke=this._getOriginZoom(ge)-1;for(;ke<=this.options.maxZoom;){const We=this.getChildren(ge);if(ke++,We.length!==1)break;ge=We[0].properties.cluster_id}return ke}_appendLeaves(ge,ke,We,Ce,Qe){const et=this.getChildren(ke);for(const ut of et){const lt=ut.properties;if(lt&&lt.cluster?Qe+lt.point_count<=Ce?Qe+=lt.point_count:Qe=this._appendLeaves(ge,lt.cluster_id,We,Ce,Qe):Qe<Ce?Qe++:ge.push(ut),ge.length===We)break}return Qe}_createTree(ge){const ke=new l.aB(ge.length/this.stride|0,this.options.nodeSize,Float32Array);for(let We=0;We<ge.length;We+=this.stride)ke.add(ge[We],ge[We+1]);return ke.finish(),ke.data=ge,ke}_addTileFeatures(ge,ke,We,Ce,Qe,et){for(const ut of ge){const lt=ut*this.stride,xt=ke[lt+se]>1;let Dt,zt,Tn;if(xt)Dt=pe(ke,lt,this.clusterProps),zt=ke[lt],Tn=ke[lt+1];else{const Gn=this.points[ke[lt+ie]];Dt=Gn.properties;const[we,Ne]=Gn.geometry.coordinates;zt=De(we),Tn=me(Ne)}const qt={type:1,geometry:[[Math.round(this.options.extent*(zt*Qe-We)),Math.round(this.options.extent*(Tn*Qe-Ce))]],tags:Dt};let Zn;Zn=xt||this.options.generateId?ke[lt+ie]:this.points[ke[lt+ie]].id,Zn!==void 0&&(qt.id=Zn),et.features.push(qt)}}_limitZoom(ge){return Math.max(this.options.minZoom,Math.min(Math.floor(+ge),this.options.maxZoom+1))}_cluster(ge,ke){const{radius:We,extent:Ce,reduce:Qe,minPoints:et}=this.options,ut=We/(Ce*Math.pow(2,ke)),lt=ge.data,xt=[],Dt=this.stride;for(let zt=0;zt<lt.length;zt+=Dt){if(lt[zt+2]<=ke)continue;lt[zt+2]=ke;const Tn=lt[zt],qt=lt[zt+1],Zn=ge.within(lt[zt],lt[zt+1],ut),Gn=lt[zt+se];let we=Gn;for(const Ne of Zn){const je=Ne*Dt;lt[je+2]>ke&&(we+=lt[je+se])}if(we>Gn&&we>=et){let Ne,je=Tn*Gn,At=qt*Gn,sn=-1;const Hn=((zt/Dt|0)<<5)+(ke+1)+this.points.length;for(const or of Zn){const Er=or*Dt;if(lt[Er+2]<=ke)continue;lt[Er+2]=ke;const lr=lt[Er+se];je+=lt[Er]*lr,At+=lt[Er+1]*lr,lt[Er+4]=Hn,Qe&&(Ne||(Ne=this._map(lt,zt,!0),sn=this.clusterProps.length,this.clusterProps.push(Ne)),Qe(Ne,this._map(lt,Er)))}lt[zt+4]=Hn,xt.push(je/we,At/we,1/0,Hn,-1,we),Qe&&xt.push(sn)}else{for(let Ne=0;Ne<Dt;Ne++)xt.push(lt[zt+Ne]);if(we>1)for(const Ne of Zn){const je=Ne*Dt;if(!(lt[je+2]<=ke)){lt[je+2]=ke;for(let At=0;At<Dt;At++)xt.push(lt[je+At])}}}}return xt}_getOriginId(ge){return ge-this.points.length>>5}_getOriginZoom(ge){return(ge-this.points.length)%32}_map(ge,ke,We){if(ge[ke+se]>1){const et=this.clusterProps[ge[ke+de]];return We?Object.assign({},et):et}const Ce=this.points[ge[ke+ie]].properties,Qe=this.options.map(Ce);return We&&Qe===Ce?Object.assign({},Qe):Qe}}function Te(mt,ge,ke){return{type:"Feature",id:mt[ge+ie],properties:pe(mt,ge,ke),geometry:{type:"Point",coordinates:[(We=mt[ge],360*(We-.5)),Me(mt[ge+1])]}};var We}function pe(mt,ge,ke){const We=mt[ge+se],Ce=We>=1e4?`${Math.round(We/1e3)}k`:We>=1e3?Math.round(We/100)/10+"k":We,Qe=mt[ge+de],et=Qe===-1?{}:Object.assign({},ke[Qe]);return Object.assign(et,{cluster:!0,cluster_id:mt[ge+ie],point_count:We,point_count_abbreviated:Ce})}function De(mt){return mt/360+.5}function me(mt){const ge=Math.sin(mt*Math.PI/180),ke=.5-.25*Math.log((1+ge)/(1-ge))/Math.PI;return ke<0?0:ke>1?1:ke}function Me(mt){const ge=(180-360*mt)*Math.PI/180;return 360*Math.atan(Math.exp(ge))/Math.PI-90}function fe(mt,ge,ke,We){let Ce=We;const Qe=ge+(ke-ge>>1);let et,ut=ke-ge;const lt=mt[ge],xt=mt[ge+1],Dt=mt[ke],zt=mt[ke+1];for(let Tn=ge+3;Tn<ke;Tn+=3){const qt=ve(mt[Tn],mt[Tn+1],lt,xt,Dt,zt);if(qt>Ce)et=Tn,Ce=qt;else if(qt===Ce){const Zn=Math.abs(Tn-Qe);Zn<ut&&(et=Tn,ut=Zn)}}Ce>We&&(et-ge>3&&fe(mt,ge,et,We),mt[et+2]=Ce,ke-et>3&&fe(mt,et,ke,We))}function ve(mt,ge,ke,We,Ce,Qe){let et=Ce-ke,ut=Qe-We;if(et!==0||ut!==0){const lt=((mt-ke)*et+(ge-We)*ut)/(et*et+ut*ut);lt>1?(ke=Ce,We=Qe):lt>0&&(ke+=et*lt,We+=ut*lt)}return et=mt-ke,ut=ge-We,et*et+ut*ut}function le(mt,ge,ke,We){const Ce={id:mt??null,type:ge,geometry:ke,tags:We,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")ye(Ce,ke);else if(ge==="Polygon")ye(Ce,ke[0]);else if(ge==="MultiLineString")for(const Qe of ke)ye(Ce,Qe);else if(ge==="MultiPolygon")for(const Qe of ke)ye(Ce,Qe[0]);return Ce}function ye(mt,ge){for(let ke=0;ke<ge.length;ke+=3)mt.minX=Math.min(mt.minX,ge[ke]),mt.minY=Math.min(mt.minY,ge[ke+1]),mt.maxX=Math.max(mt.maxX,ge[ke]),mt.maxY=Math.max(mt.maxY,ge[ke+1])}function Se(mt,ge,ke,We){if(!ge.geometry)return;const Ce=ge.geometry.coordinates;if(Ce&&Ce.length===0)return;const Qe=ge.geometry.type,et=Math.pow(ke.tolerance/((1<<ke.maxZoom)*ke.extent),2);let ut=[],lt=ge.id;if(ke.promoteId?lt=ge.properties[ke.promoteId]:ke.generateId&&(lt=We||0),Qe==="Point")Be(Ce,ut);else if(Qe==="MultiPoint")for(const xt of Ce)Be(xt,ut);else if(Qe==="LineString")Ve(Ce,ut,et,!1);else if(Qe==="MultiLineString"){if(ke.lineMetrics){for(const xt of Ce)ut=[],Ve(xt,ut,et,!1),mt.push(le(lt,"LineString",ut,ge.properties));return}tt(Ce,ut,et,!1)}else if(Qe==="Polygon")tt(Ce,ut,et,!0);else{if(Qe!=="MultiPolygon"){if(Qe==="GeometryCollection"){for(const xt of ge.geometry.geometries)Se(mt,{id:lt,geometry:xt,properties:ge.properties},ke,We);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const xt of Ce){const Dt=[];tt(xt,Dt,et,!0),ut.push(Dt)}}mt.push(le(lt,Qe,ut,ge.properties))}function Be(mt,ge){ge.push(ht(mt[0]),it(mt[1]),0)}function Ve(mt,ge,ke,We){let Ce,Qe,et=0;for(let lt=0;lt<mt.length;lt++){const xt=ht(mt[lt][0]),Dt=it(mt[lt][1]);ge.push(xt,Dt,0),lt>0&&(et+=We?(Ce*Dt-xt*Qe)/2:Math.sqrt(Math.pow(xt-Ce,2)+Math.pow(Dt-Qe,2))),Ce=xt,Qe=Dt}const ut=ge.length-3;ge[2]=1,fe(ge,0,ut,ke),ge[ut+2]=1,ge.size=Math.abs(et),ge.start=0,ge.end=ge.size}function tt(mt,ge,ke,We){for(let Ce=0;Ce<mt.length;Ce++){const Qe=[];Ve(mt[Ce],Qe,ke,We),ge.push(Qe)}}function ht(mt){return mt/360+.5}function it(mt){const ge=Math.sin(mt*Math.PI/180),ke=.5-.25*Math.log((1+ge)/(1-ge))/Math.PI;return ke<0?0:ke>1?1:ke}function gt(mt,ge,ke,We,Ce,Qe,et,ut){if(We/=ge,Qe>=(ke/=ge)&&et<We)return mt;if(et<ke||Qe>=We)return null;const lt=[];for(const xt of mt){const Dt=xt.geometry;let zt=xt.type;const Tn=Ce===0?xt.minX:xt.minY,qt=Ce===0?xt.maxX:xt.maxY;if(Tn>=ke&&qt<We){lt.push(xt);continue}if(qt<ke||Tn>=We)continue;let Zn=[];if(zt==="Point"||zt==="MultiPoint")$t(Dt,Zn,ke,We,Ce);else if(zt==="LineString")He(Dt,Zn,ke,We,Ce,!1,ut.lineMetrics);else if(zt==="MultiLineString")Xe(Dt,Zn,ke,We,Ce,!1);else if(zt==="Polygon")Xe(Dt,Zn,ke,We,Ce,!0);else if(zt==="MultiPolygon")for(const Gn of Dt){const we=[];Xe(Gn,we,ke,We,Ce,!0),we.length&&Zn.push(we)}if(Zn.length){if(ut.lineMetrics&&zt==="LineString"){for(const Gn of Zn)lt.push(le(xt.id,zt,Gn,xt.tags));continue}zt!=="LineString"&&zt!=="MultiLineString"||(Zn.length===1?(zt="LineString",Zn=Zn[0]):zt="MultiLineString"),zt!=="Point"&&zt!=="MultiPoint"||(zt=Zn.length===3?"Point":"MultiPoint"),lt.push(le(xt.id,zt,Zn,xt.tags))}}return lt.length?lt:null}function $t(mt,ge,ke,We,Ce){for(let Qe=0;Qe<mt.length;Qe+=3){const et=mt[Qe+Ce];et>=ke&&et<=We&&tn(ge,mt[Qe],mt[Qe+1],mt[Qe+2])}}function He(mt,ge,ke,We,Ce,Qe,et){let ut=Ct(mt);const lt=Ce===0?Kt:Jt;let xt,Dt,zt=mt.start;for(let we=0;we<mt.length-3;we+=3){const Ne=mt[we],je=mt[we+1],At=mt[we+2],sn=mt[we+3],Hn=mt[we+4],or=Ce===0?Ne:je,Er=Ce===0?sn:Hn;let lr=!1;et&&(xt=Math.sqrt(Math.pow(Ne-sn,2)+Math.pow(je-Hn,2))),or<ke?Er>ke&&(Dt=lt(ut,Ne,je,sn,Hn,ke),et&&(ut.start=zt+xt*Dt)):or>We?Er<We&&(Dt=lt(ut,Ne,je,sn,Hn,We),et&&(ut.start=zt+xt*Dt)):tn(ut,Ne,je,At),Er<ke&&or>=ke&&(Dt=lt(ut,Ne,je,sn,Hn,ke),lr=!0),Er>We&&or<=We&&(Dt=lt(ut,Ne,je,sn,Hn,We),lr=!0),!Qe&&lr&&(et&&(ut.end=zt+xt*Dt),ge.push(ut),ut=Ct(mt)),et&&(zt+=xt)}let Tn=mt.length-3;const qt=mt[Tn],Zn=mt[Tn+1],Gn=Ce===0?qt:Zn;Gn>=ke&&Gn<=We&&tn(ut,qt,Zn,mt[Tn+2]),Tn=ut.length-3,Qe&&Tn>=3&&(ut[Tn]!==ut[0]||ut[Tn+1]!==ut[1])&&tn(ut,ut[0],ut[1],ut[2]),ut.length&&ge.push(ut)}function Ct(mt){const ge=[];return ge.size=mt.size,ge.start=mt.start,ge.end=mt.end,ge}function Xe(mt,ge,ke,We,Ce,Qe){for(const et of mt)He(et,ge,ke,We,Ce,Qe,!1)}function tn(mt,ge,ke,We){mt.push(ge,ke,We)}function Kt(mt,ge,ke,We,Ce,Qe){const et=(Qe-ge)/(We-ge);return tn(mt,Qe,ke+(Ce-ke)*et,1),et}function Jt(mt,ge,ke,We,Ce,Qe){const et=(Qe-ke)/(Ce-ke);return tn(mt,ge+(We-ge)*et,Qe,1),et}function Ht(mt,ge){const ke=[];for(let We=0;We<mt.length;We++){const Ce=mt[We],Qe=Ce.type;let et;if(Qe==="Point"||Qe==="MultiPoint"||Qe==="LineString")et=$e(Ce.geometry,ge);else if(Qe==="MultiLineString"||Qe==="Polygon"){et=[];for(const ut of Ce.geometry)et.push($e(ut,ge))}else if(Qe==="MultiPolygon"){et=[];for(const ut of Ce.geometry){const lt=[];for(const xt of ut)lt.push($e(xt,ge));et.push(lt)}}ke.push(le(Ce.id,Qe,et,Ce.tags))}return ke}function $e(mt,ge){const ke=[];ke.size=mt.size,mt.start!==void 0&&(ke.start=mt.start,ke.end=mt.end);for(let We=0;We<mt.length;We+=3)ke.push(mt[We]+ge,mt[We+1],mt[We+2]);return ke}function Ee(mt,ge){if(mt.transformed)return mt;const ke=1<<mt.z,We=mt.x,Ce=mt.y;for(const Qe of mt.features){const et=Qe.geometry,ut=Qe.type;if(Qe.geometry=[],ut===1)for(let lt=0;lt<et.length;lt+=2)Qe.geometry.push(_t(et[lt],et[lt+1],ge,ke,We,Ce));else for(let lt=0;lt<et.length;lt++){const xt=[];for(let Dt=0;Dt<et[lt].length;Dt+=2)xt.push(_t(et[lt][Dt],et[lt][Dt+1],ge,ke,We,Ce));Qe.geometry.push(xt)}}return mt.transformed=!0,mt}function _t(mt,ge,ke,We,Ce,Qe){return[Math.round(ke*(mt*We-Ce)),Math.round(ke*(ge*We-Qe))]}function jt(mt,ge,ke,We,Ce){const Qe=ge===Ce.maxZoom?0:Ce.tolerance/((1<<ge)*Ce.extent),et={features:[],numPoints:0,numSimplified:0,numFeatures:mt.length,source:null,x:ke,y:We,z:ge,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ut of mt)vt(et,ut,Qe,Ce);return et}function vt(mt,ge,ke,We){const Ce=ge.geometry,Qe=ge.type,et=[];if(mt.minX=Math.min(mt.minX,ge.minX),mt.minY=Math.min(mt.minY,ge.minY),mt.maxX=Math.max(mt.maxX,ge.maxX),mt.maxY=Math.max(mt.maxY,ge.maxY),Qe==="Point"||Qe==="MultiPoint")for(let ut=0;ut<Ce.length;ut+=3)et.push(Ce[ut],Ce[ut+1]),mt.numPoints++,mt.numSimplified++;else if(Qe==="LineString")Pt(et,Ce,mt,ke,!1,!1);else if(Qe==="MultiLineString"||Qe==="Polygon")for(let ut=0;ut<Ce.length;ut++)Pt(et,Ce[ut],mt,ke,Qe==="Polygon",ut===0);else if(Qe==="MultiPolygon")for(let ut=0;ut<Ce.length;ut++){const lt=Ce[ut];for(let xt=0;xt<lt.length;xt++)Pt(et,lt[xt],mt,ke,!0,xt===0)}if(et.length){let ut=ge.tags||null;if(Qe==="LineString"&&We.lineMetrics){ut={};for(const xt in ge.tags)ut[xt]=ge.tags[xt];ut.mapbox_clip_start=Ce.start/Ce.size,ut.mapbox_clip_end=Ce.end/Ce.size}const lt={geometry:et,type:Qe==="Polygon"||Qe==="MultiPolygon"?3:Qe==="LineString"||Qe==="MultiLineString"?2:1,tags:ut};ge.id!==null&&(lt.id=ge.id),mt.features.push(lt)}}function Pt(mt,ge,ke,We,Ce,Qe){const et=We*We;if(We>0&&ge.size<(Ce?et:We))return void(ke.numPoints+=ge.length/3);const ut=[];for(let lt=0;lt<ge.length;lt+=3)(We===0||ge[lt+2]>et)&&(ke.numSimplified++,ut.push(ge[lt],ge[lt+1])),ke.numPoints++;Ce&&function(lt,xt){let Dt=0;for(let zt=0,Tn=lt.length,qt=Tn-2;zt<Tn;qt=zt,zt+=2)Dt+=(lt[zt]-lt[qt])*(lt[zt+1]+lt[qt+1]);if(Dt>0===xt)for(let zt=0,Tn=lt.length;zt<Tn/2;zt+=2){const qt=lt[zt],Zn=lt[zt+1];lt[zt]=lt[Tn-2-zt],lt[zt+1]=lt[Tn-1-zt],lt[Tn-2-zt]=qt,lt[Tn-1-zt]=Zn}}(ut,Qe),mt.push(ut)}const vn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class hn{constructor(ge,ke){const We=(ke=this.options=function(Qe,et){for(const ut in et)Qe[ut]=et[ut];return Qe}(Object.create(vn),ke)).debug;if(We&&console.time("preprocess data"),ke.maxZoom<0||ke.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ke.promoteId&&ke.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ce=function(Qe,et){const ut=[];if(Qe.type==="FeatureCollection")for(let lt=0;lt<Qe.features.length;lt++)Se(ut,Qe.features[lt],et,lt);else Se(ut,Qe.type==="Feature"?Qe:{geometry:Qe},et);return ut}(ge,ke);this.tiles={},this.tileCoords=[],We&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ke.indexMaxZoom,ke.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ce=function(Qe,et){const ut=et.buffer/et.extent;let lt=Qe;const xt=gt(Qe,1,-1-ut,ut,0,-1,2,et),Dt=gt(Qe,1,1-ut,2+ut,0,-1,2,et);return(xt||Dt)&&(lt=gt(Qe,1,-ut,1+ut,0,-1,2,et)||[],xt&&(lt=Ht(xt,1).concat(lt)),Dt&&(lt=lt.concat(Ht(Dt,-1)))),lt}(Ce,ke),Ce.length&&this.splitTile(Ce,0,0,0),We&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ge,ke,We,Ce,Qe,et,ut){const lt=[ge,ke,We,Ce],xt=this.options,Dt=xt.debug;for(;lt.length;){Ce=lt.pop(),We=lt.pop(),ke=lt.pop(),ge=lt.pop();const zt=1<<ke,Tn=pn(ke,We,Ce);let qt=this.tiles[Tn];if(!qt&&(Dt>1&&console.time("creation"),qt=this.tiles[Tn]=jt(ge,ke,We,Ce,xt),this.tileCoords.push({z:ke,x:We,y:Ce}),Dt)){Dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ke,We,Ce,qt.numFeatures,qt.numPoints,qt.numSimplified),console.timeEnd("creation"));const lr=`z${ke}`;this.stats[lr]=(this.stats[lr]||0)+1,this.total++}if(qt.source=ge,Qe==null){if(ke===xt.indexMaxZoom||qt.numPoints<=xt.indexMaxPoints)continue}else{if(ke===xt.maxZoom||ke===Qe)continue;if(Qe!=null){const lr=Qe-ke;if(We!==et>>lr||Ce!==ut>>lr)continue}}if(qt.source=null,ge.length===0)continue;Dt>1&&console.time("clipping");const Zn=.5*xt.buffer/xt.extent,Gn=.5-Zn,we=.5+Zn,Ne=1+Zn;let je=null,At=null,sn=null,Hn=null,or=gt(ge,zt,We-Zn,We+we,0,qt.minX,qt.maxX,xt),Er=gt(ge,zt,We+Gn,We+Ne,0,qt.minX,qt.maxX,xt);ge=null,or&&(je=gt(or,zt,Ce-Zn,Ce+we,1,qt.minY,qt.maxY,xt),At=gt(or,zt,Ce+Gn,Ce+Ne,1,qt.minY,qt.maxY,xt),or=null),Er&&(sn=gt(Er,zt,Ce-Zn,Ce+we,1,qt.minY,qt.maxY,xt),Hn=gt(Er,zt,Ce+Gn,Ce+Ne,1,qt.minY,qt.maxY,xt),Er=null),Dt>1&&console.timeEnd("clipping"),lt.push(je||[],ke+1,2*We,2*Ce),lt.push(At||[],ke+1,2*We,2*Ce+1),lt.push(sn||[],ke+1,2*We+1,2*Ce),lt.push(Hn||[],ke+1,2*We+1,2*Ce+1)}}getTile(ge,ke,We){ge=+ge,ke=+ke,We=+We;const Ce=this.options,{extent:Qe,debug:et}=Ce;if(ge<0||ge>24)return null;const ut=1<<ge,lt=pn(ge,ke=ke+ut&ut-1,We);if(this.tiles[lt])return Ee(this.tiles[lt],Qe);et>1&&console.log("drilling down to z%d-%d-%d",ge,ke,We);let xt,Dt=ge,zt=ke,Tn=We;for(;!xt&&Dt>0;)Dt--,zt>>=1,Tn>>=1,xt=this.tiles[pn(Dt,zt,Tn)];return xt&&xt.source?(et>1&&(console.log("found parent tile z%d-%d-%d",Dt,zt,Tn),console.time("drilling down")),this.splitTile(xt.source,Dt,zt,Tn,ge,ke,We),et>1&&console.timeEnd("drilling down"),this.tiles[lt]?Ee(this.tiles[lt],Qe):null):null}}function pn(mt,ge,ke){return 32*((1<<mt)*ke+ge)+mt}function nn(mt,ge){return ge?mt.properties[ge]:mt.id}function Ft(mt,ge){if(mt==null)return!0;if(mt.type==="Feature")return nn(mt,ge)!=null;if(mt.type==="FeatureCollection"){const ke=new Set;for(const We of mt.features){const Ce=nn(We,ge);if(Ce==null||ke.has(Ce))return!1;ke.add(Ce)}return!0}return!1}function In(mt,ge){const ke=new Map;if(mt!=null)if(mt.type==="Feature")ke.set(nn(mt,ge),mt);else for(const We of mt.features)ke.set(nn(We,ge),We);return ke}class Pn extends y{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ge,ke){return l._(this,void 0,void 0,function*(){const We=ge.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ce=this._geoJSONIndex.getTile(We.z,We.x,We.y);if(!Ce)return null;const Qe=new B(Ce.features);let et=Z(Qe);return et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),{vectorTile:Qe,rawData:et.buffer}})}loadData(ge){return l._(this,void 0,void 0,function*(){var ke;(ke=this._pendingRequest)===null||ke===void 0||ke.abort();const We=!!(ge&&ge.request&&ge.request.collectResourceTiming)&&new l.cw(ge.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ge,this._pendingRequest),this._geoJSONIndex=ge.cluster?new ue(function({superclusterOptions:et,clusterProperties:ut}){if(!ut||!et)return et;const lt={},xt={},Dt={accumulated:null,zoom:0},zt={properties:null},Tn=Object.keys(ut);for(const qt of Tn){const[Zn,Gn]=ut[qt],we=l.cD(Gn),Ne=l.cD(typeof Zn=="string"?[Zn,["accumulated"],["get",qt]]:Zn);lt[qt]=we.value,xt[qt]=Ne.value}return et.map=qt=>{zt.properties=qt;const Zn={};for(const Gn of Tn)Zn[Gn]=lt[Gn].evaluate(Dt,zt);return Zn},et.reduce=(qt,Zn)=>{zt.properties=Zn;for(const Gn of Tn)Dt.accumulated=qt[Gn],qt[Gn]=xt[Gn].evaluate(Dt,zt)},et}(ge)).load((yield this._pendingData).features):(Ce=yield this._pendingData,new hn(Ce,ge.geojsonVtOptions)),this.loaded={};const Qe={};if(We){const et=We.finish();et&&(Qe.resourceTiming={},Qe.resourceTiming[ge.source]=JSON.parse(JSON.stringify(et)))}return Qe}catch(Qe){if(delete this._pendingRequest,l.ch(Qe))return{abandoned:!0};throw Qe}var Ce})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ge){const ke=this.loaded;return ke&&ke[ge.uid]?super.reloadTile(ge):this.loadTile(ge)}loadAndProcessGeoJSON(ge,ke){return l._(this,void 0,void 0,function*(){let We=yield this.loadGeoJSON(ge,ke);if(delete this._pendingRequest,typeof We!="object")throw new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`);if(P(We,!0),ge.filter){const Ce=l.cD(ge.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ce.result==="error")throw new Error(Ce.value.map(et=>`${et.key}: ${et.message}`).join(", "));We={type:"FeatureCollection",features:We.features.filter(et=>Ce.value.evaluate({zoom:0},et))}}return We})}loadGeoJSON(ge,ke){return l._(this,void 0,void 0,function*(){const{promoteId:We}=ge;if(ge.request){const Ce=yield l.j(ge.request,ke);return this._dataUpdateable=Ft(Ce.data,We)?In(Ce.data,We):void 0,Ce.data}if(typeof ge.data=="string")try{const Ce=JSON.parse(ge.data);return this._dataUpdateable=Ft(Ce,We)?In(Ce,We):void 0,Ce}catch{throw new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`)}if(!ge.dataDiff)throw new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ge.source}`);return function(Ce,Qe,et){var ut,lt,xt,Dt;if(Qe.removeAll&&Ce.clear(),Qe.remove)for(const zt of Qe.remove)Ce.delete(zt);if(Qe.add)for(const zt of Qe.add){const Tn=nn(zt,et);Tn!=null&&Ce.set(Tn,zt)}if(Qe.update)for(const zt of Qe.update){let Tn=Ce.get(zt.id);if(Tn==null)continue;const qt=!zt.removeAllProperties&&(((ut=zt.removeProperties)===null||ut===void 0?void 0:ut.length)>0||((lt=zt.addOrUpdateProperties)===null||lt===void 0?void 0:lt.length)>0);if((zt.newGeometry||zt.removeAllProperties||qt)&&(Tn=Object.assign({},Tn),Ce.set(zt.id,Tn),qt&&(Tn.properties=Object.assign({},Tn.properties))),zt.newGeometry&&(Tn.geometry=zt.newGeometry),zt.removeAllProperties)Tn.properties={};else if(((xt=zt.removeProperties)===null||xt===void 0?void 0:xt.length)>0)for(const Zn of zt.removeProperties)Object.prototype.hasOwnProperty.call(Tn.properties,Zn)&&delete Tn.properties[Zn];if(((Dt=zt.addOrUpdateProperties)===null||Dt===void 0?void 0:Dt.length)>0)for(const{key:Zn,value:Gn}of zt.addOrUpdateProperties)Tn.properties[Zn]=Gn}}(this._dataUpdateable,ge.dataDiff,We),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ge){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ge){return this._geoJSONIndex.getClusterExpansionZoom(ge.clusterId)}getClusterChildren(ge){return this._geoJSONIndex.getChildren(ge.clusterId)}getClusterLeaves(ge){return this._geoJSONIndex.getLeaves(ge.clusterId,ge.limit,ge.offset)}}class ir{constructor(ge){this.self=ge,this.actor=new l.H(ge),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ke,We)=>{if(this.externalWorkerSourceTypes[ke])throw new Error(`Worker source with name "${ke}" already registered.`);this.externalWorkerSourceTypes[ke]=We},this.self.addProtocol=l.cj,this.self.removeProtocol=l.ck,this.self.registerRTLTextPlugin=ke=>{l.cE.setMethods(ke)},this.actor.registerMessageHandler("LDT",(ke,We)=>this._getDEMWorkerSource(ke,We.source).loadTile(We)),this.actor.registerMessageHandler("RDT",(ke,We)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ke,We.source).removeTile(We)})),this.actor.registerMessageHandler("GCEZ",(ke,We)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ke,We.type,We.source).getClusterExpansionZoom(We)})),this.actor.registerMessageHandler("GCC",(ke,We)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ke,We.type,We.source).getClusterChildren(We)})),this.actor.registerMessageHandler("GCL",(ke,We)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ke,We.type,We.source).getClusterLeaves(We)})),this.actor.registerMessageHandler("LD",(ke,We)=>this._getWorkerSource(ke,We.type,We.source).loadData(We)),this.actor.registerMessageHandler("GD",(ke,We)=>this._getWorkerSource(ke,We.type,We.source).getData()),this.actor.registerMessageHandler("LT",(ke,We)=>this._getWorkerSource(ke,We.type,We.source).loadTile(We)),this.actor.registerMessageHandler("RT",(ke,We)=>this._getWorkerSource(ke,We.type,We.source).reloadTile(We)),this.actor.registerMessageHandler("AT",(ke,We)=>this._getWorkerSource(ke,We.type,We.source).abortTile(We)),this.actor.registerMessageHandler("RMT",(ke,We)=>this._getWorkerSource(ke,We.type,We.source).removeTile(We)),this.actor.registerMessageHandler("RS",(ke,We)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[ke]||!this.workerSources[ke][We.type]||!this.workerSources[ke][We.type][We.source])return;const Ce=this.workerSources[ke][We.type][We.source];delete this.workerSources[ke][We.type][We.source],Ce.removeSource!==void 0&&Ce.removeSource(We)})),this.actor.registerMessageHandler("RM",ke=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[ke],delete this.availableImages[ke],delete this.workerSources[ke],delete this.demWorkerSources[ke]})),this.actor.registerMessageHandler("SR",(ke,We)=>l._(this,void 0,void 0,function*(){this.referrer=We})),this.actor.registerMessageHandler("SRPS",(ke,We)=>this._syncRTLPluginState(ke,We)),this.actor.registerMessageHandler("IS",(ke,We)=>l._(this,void 0,void 0,function*(){this.self.importScripts(We)})),this.actor.registerMessageHandler("SI",(ke,We)=>this._setImages(ke,We)),this.actor.registerMessageHandler("UL",(ke,We)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ke).update(We.layers,We.removedIds)})),this.actor.registerMessageHandler("SL",(ke,We)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ke).replace(We)}))}_setImages(ge,ke){return l._(this,void 0,void 0,function*(){this.availableImages[ge]=ke;for(const We in this.workerSources[ge]){const Ce=this.workerSources[ge][We];for(const Qe in Ce)Ce[Qe].availableImages=ke}})}_syncRTLPluginState(ge,ke){return l._(this,void 0,void 0,function*(){return yield l.cE.syncState(ke,this.self.importScripts)})}_getAvailableImages(ge){let ke=this.availableImages[ge];return ke||(ke=[]),ke}_getLayerIndex(ge){let ke=this.layerIndexes[ge];return ke||(ke=this.layerIndexes[ge]=new a),ke}_getWorkerSource(ge,ke,We){if(this.workerSources[ge]||(this.workerSources[ge]={}),this.workerSources[ge][ke]||(this.workerSources[ge][ke]={}),!this.workerSources[ge][ke][We]){const Ce={sendAsync:(Qe,et)=>(Qe.targetMapId=ge,this.actor.sendAsync(Qe,et))};switch(ke){case"vector":this.workerSources[ge][ke][We]=new y(Ce,this._getLayerIndex(ge),this._getAvailableImages(ge));break;case"geojson":this.workerSources[ge][ke][We]=new Pn(Ce,this._getLayerIndex(ge),this._getAvailableImages(ge));break;default:this.workerSources[ge][ke][We]=new this.externalWorkerSourceTypes[ke](Ce,this._getLayerIndex(ge),this._getAvailableImages(ge))}}return this.workerSources[ge][ke][We]}_getDEMWorkerSource(ge,ke){return this.demWorkerSources[ge]||(this.demWorkerSources[ge]={}),this.demWorkerSources[ge][ke]||(this.demWorkerSources[ge][ke]=new w),this.demWorkerSources[ge][ke]}}return l.i(self)&&(self.worker=new ir(self)),ir}),i("index",["exports","./shared"],function(l,a){var h="5.2.0";function f(){var R=new a.A(4);return a.A!=Float32Array&&(R[1]=0,R[2]=0),R[0]=1,R[3]=1,R}let v,y;const w={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(R,s,d){const x=requestAnimationFrame(L=>{E(),s(L)}),{unsubscribe:E}=a.s(R.signal,"abort",()=>{E(),cancelAnimationFrame(x),d(a.c())},!1)},frameAsync(R){return new Promise((s,d)=>{this.frame(R,s,d)})},getImageData(R,s=0){return this.getImageCanvasContext(R).getImageData(-s,-s,R.width+2*s,R.height+2*s)},getImageCanvasContext(R){const s=window.document.createElement("canvas"),d=s.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return s.width=R.width,s.height=R.height,d.drawImage(R,0,0,R.width,R.height),d},resolveURL:R=>(v||(v=document.createElement("a")),v.href=R,v.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(y==null&&(y=matchMedia("(prefers-reduced-motion: reduce)")),y.matches)}};class b{static testProp(s){if(!b.docStyle)return s[0];for(let d=0;d<s.length;d++)if(s[d]in b.docStyle)return s[d];return s[0]}static create(s,d,x){const E=window.document.createElement(s);return d!==void 0&&(E.className=d),x&&x.appendChild(E),E}static createNS(s,d){return window.document.createElementNS(s,d)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(s,d){s.style[b.transformProp]=d}static addEventListener(s,d,x,E={}){s.addEventListener(d,x,"passive"in E?E:E.capture)}static removeEventListener(s,d,x,E={}){s.removeEventListener(d,x,"passive"in E?E:E.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static getScale(s){const d=s.getBoundingClientRect();return{x:d.width/s.offsetWidth||1,y:d.height/s.offsetHeight||1,boundingClientRect:d}}static getPoint(s,d,x){const E=d.boundingClientRect;return new a.P((x.clientX-E.left)/d.x-s.clientLeft,(x.clientY-E.top)/d.y-s.clientTop)}static mousePos(s,d){const x=b.getScale(s);return b.getPoint(s,x,d)}static touchPos(s,d){const x=[],E=b.getScale(s);for(let L=0;L<d.length;L++)x.push(b.getPoint(s,E,d[L]));return x}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){const d=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),x=d.querySelectorAll("script");for(const E of x)E.remove();return b.clean(d),d.innerHTML}static isPossiblyDangerous(s,d){const x=d.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!x.includes("javascript:")&&!x.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){const d=s.children;for(const x of d)b.removeAttributes(x),b.clean(x)}static removeAttributes(s){for(const{name:d,value:x}of s.attributes)b.isPossiblyDangerous(d,x)&&s.removeAttribute(d)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const A={supported:!1,testSupport:function(R){!C&&P&&(k?B(R):M=R)}};let M,P,C=!1,k=!1;function B(R){const s=R.createTexture();R.bindTexture(R.TEXTURE_2D,s);try{if(R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,P),R.isContextLost())return;A.supported=!0}catch{}R.deleteTexture(s),C=!0}var z;typeof document<"u"&&(P=document.createElement("img"),P.onload=()=>{M&&B(M),M=null,k=!0},P.onerror=()=>{C=!0,M=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(R){let s,d,x,E;R.resetRequestQueue=()=>{s=[],d=0,x=0,E={}},R.addThrottleControl=Q=>{const ae=x++;return E[ae]=Q,ae},R.removeThrottleControl=Q=>{delete E[Q],F()},R.getImage=(Q,ae,be=!0)=>new Promise((Ae,Pe)=>{A.supported&&(Q.headers||(Q.headers={}),Q.headers.accept="image/webp,*/*"),a.e(Q,{type:"image"}),s.push({abortController:ae,requestParameters:Q,supportImageRefresh:be,state:"queued",onError:qe=>{Pe(qe)},onSuccess:qe=>{Ae(qe)}}),F()});const L=Q=>a._(this,void 0,void 0,function*(){Q.state="running";const{requestParameters:ae,supportImageRefresh:be,onError:Ae,onSuccess:Pe,abortController:qe}=Q,Ze=be===!1&&!a.i(self)&&!a.g(ae.url)&&(!ae.headers||Object.keys(ae.headers).reduce((pt,Tt)=>pt&&Tt==="accept",!0));d++;const dt=Ze?X(ae,qe):a.m(ae,qe);try{const pt=yield dt;delete Q.abortController,Q.state="completed",pt.data instanceof HTMLImageElement||a.b(pt.data)?Pe(pt):pt.data&&Pe({data:yield(ft=pt.data,typeof createImageBitmap=="function"?a.f(ft):a.h(ft)),cacheControl:pt.cacheControl,expires:pt.expires})}catch(pt){delete Q.abortController,Ae(pt)}finally{d--,F()}var ft}),F=()=>{const Q=(()=>{for(const ae of Object.keys(E))if(E[ae]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ae=d;ae<Q&&s.length>0;ae++){const be=s.shift();be.abortController.signal.aborted?ae--:L(be)}},X=(Q,ae)=>new Promise((be,Ae)=>{const Pe=new Image,qe=Q.url,Ze=Q.credentials;Ze&&Ze==="include"?Pe.crossOrigin="use-credentials":(Ze&&Ze==="same-origin"||!a.d(qe))&&(Pe.crossOrigin="anonymous"),ae.signal.addEventListener("abort",()=>{Pe.src="",Ae(a.c())}),Pe.fetchPriority="high",Pe.onload=()=>{Pe.onerror=Pe.onload=null,be({data:Pe})},Pe.onerror=()=>{Pe.onerror=Pe.onload=null,ae.signal.aborted||Ae(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Pe.src=qe})}(z||(z={})),z.resetRequestQueue();class q{constructor(s){this._transformRequestFn=s}transformRequest(s,d){return this._transformRequestFn&&this._transformRequestFn(s,d)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function V(R){const s=[];if(typeof R=="string")s.push({id:"default",url:R});else if(R&&R.length>0){const d=[];for(const{id:x,url:E}of R){const L=`${x}${E}`;d.indexOf(L)===-1&&(d.push(L),s.push({id:x,url:E}))}}return s}function W(R,s,d){try{const x=new URL(R);return x.pathname+=`${s}${d}`,x.toString()}catch{throw new Error(`Invalid sprite URL "${R}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Y{constructor(s,d,x,E){this.context=s,this.format=x,this.texture=s.gl.createTexture(),this.update(d,E)}update(s,d,x){const{width:E,height:L}=s,F=!(this.size&&this.size[0]===E&&this.size[1]===L||x),{context:X}=this,{gl:Q}=X;if(this.useMipmap=!!(d&&d.useMipmap),Q.bindTexture(Q.TEXTURE_2D,this.texture),X.pixelStoreUnpackFlipY.set(!1),X.pixelStoreUnpack.set(1),X.pixelStoreUnpackPremultiplyAlpha.set(this.format===Q.RGBA&&(!d||d.premultiply!==!1)),F)this.size=[E,L],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||a.b(s)?Q.texImage2D(Q.TEXTURE_2D,0,this.format,this.format,Q.UNSIGNED_BYTE,s):Q.texImage2D(Q.TEXTURE_2D,0,this.format,E,L,0,this.format,Q.UNSIGNED_BYTE,s.data);else{const{x:ae,y:be}=x||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||a.b(s)?Q.texSubImage2D(Q.TEXTURE_2D,0,ae,be,Q.RGBA,Q.UNSIGNED_BYTE,s):Q.texSubImage2D(Q.TEXTURE_2D,0,ae,be,E,L,Q.RGBA,Q.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Q.generateMipmap(Q.TEXTURE_2D)}bind(s,d,x){const{context:E}=this,{gl:L}=E;L.bindTexture(L.TEXTURE_2D,this.texture),x!==L.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(x=L.LINEAR),s!==this.filter&&(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,s),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,x||s),this.filter=s),d!==this.wrap&&(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,d),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function Z(R){const{userImage:s}=R;return!!(s&&s.render&&s.render())&&(R.data.replace(new Uint8Array(s.data.buffer)),!0)}class j extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:d,promiseResolve:x}of this.requestors)x(this._getImagesForIds(d));this.requestors=[]}}getImage(s){const d=this.images[s];if(d&&!d.data&&d.spriteData){const x=d.spriteData;d.data=new a.R({width:x.width,height:x.height},x.context.getImageData(x.x,x.y,x.width,x.height).data),d.spriteData=null}return d}addImage(s,d){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let x=!0;const E=d.data||d.spriteData;return this._validateStretch(d.stretchX,E&&E.width)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchX" value`))),x=!1),this._validateStretch(d.stretchY,E&&E.height)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchY" value`))),x=!1),this._validateContent(d.content,d)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "content" value`))),x=!1),x}_validateStretch(s,d){if(!s)return!0;let x=0;for(const E of s){if(E[0]<x||E[1]<E[0]||d<E[1])return!1;x=E[1]}return!0}_validateContent(s,d){if(!s)return!0;if(s.length!==4)return!1;const x=d.spriteData,E=x&&x.width||d.data.width,L=x&&x.height||d.data.height;return!(s[0]<0||E<s[0]||s[1]<0||L<s[1]||s[2]<0||E<s[2]||s[3]<0||L<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,d,x=!0){const E=this.getImage(s);if(x&&(E.data.width!==d.data.width||E.data.height!==d.data.height))throw new Error(`size mismatch between old image (${E.data.width}x${E.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=E.version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){const d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((d,x)=>{let E=!0;if(!this.isLoaded())for(const L of s)this.images[L]||(E=!1);this.isLoaded()||E?d(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:d})})}_getImagesForIds(s){const d={};for(const x of s){let E=this.getImage(x);E||(this.fire(new a.l("styleimagemissing",{id:x})),E=this.getImage(x)),E?d[x]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,textFitWidth:E.textFitWidth,textFitHeight:E.textFitHeight,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:a.w(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){const d=this.patterns[s],x=this.getImage(s);if(!x)return null;if(d&&d.position.version===x.version)return d.position;if(d)d.position.version=x.version;else{const E={w:x.data.width+2,h:x.data.height+2,x:0,y:0},L=new a.I(E,x);this.patterns[s]={bin:E,position:L}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Y(s,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const L in this.patterns)s.push(this.patterns[L].bin);const{w:d,h:x}=a.p(s),E=this.atlasImage;E.resize({width:d||1,height:x||1});for(const L in this.patterns){const{bin:F}=this.patterns[L],X=F.x+1,Q=F.y+1,ae=this.getImage(L).data,be=ae.width,Ae=ae.height;a.R.copy(ae,E,{x:0,y:0},{x:X,y:Q},{width:be,height:Ae}),a.R.copy(ae,E,{x:0,y:Ae-1},{x:X,y:Q-1},{width:be,height:1}),a.R.copy(ae,E,{x:0,y:0},{x:X,y:Q+Ae},{width:be,height:1}),a.R.copy(ae,E,{x:be-1,y:0},{x:X-1,y:Q},{width:1,height:Ae}),a.R.copy(ae,E,{x:0,y:0},{x:X+be,y:Q},{width:1,height:Ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const x=this.getImage(d);x||a.w(`Image with ID: "${d}" was not found`),Z(x)&&this.updateImage(d,x)}}}const K=1e20;function re(R,s,d,x,E,L,F,X,Q){for(let ae=s;ae<s+x;ae++)ie(R,d*L+ae,L,E,F,X,Q);for(let ae=d;ae<d+E;ae++)ie(R,ae*L+s,1,x,F,X,Q)}function ie(R,s,d,x,E,L,F){L[0]=0,F[0]=-1e20,F[1]=K,E[0]=R[s];for(let X=1,Q=0,ae=0;X<x;X++){E[X]=R[s+X*d];const be=X*X;do{const Ae=L[Q];ae=(E[X]-E[Ae]+be-Ae*Ae)/(X-Ae)/2}while(ae<=F[Q]&&--Q>-1);Q++,L[Q]=X,F[Q]=ae,F[Q+1]=K}for(let X=0,Q=0;X<x;X++){for(;F[Q+1]<X;)Q++;const ae=L[Q],be=X-ae;R[s+X*d]=E[ae]+be*be}}class se{constructor(s,d){this.requestManager=s,this.localIdeographFontFamily=d,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return a._(this,void 0,void 0,function*(){const d=[];for(const L in s)for(const F of s[L])d.push(this._getAndCacheGlyphsPromise(L,F));const x=yield Promise.all(d),E={};for(const{stack:L,id:F,glyph:X}of x)E[L]||(E[L]={}),E[L][F]=X&&{id:X.id,bitmap:X.bitmap.clone(),metrics:X.metrics};return E})}_getAndCacheGlyphsPromise(s,d){return a._(this,void 0,void 0,function*(){let x=this.entries[s];x||(x=this.entries[s]={glyphs:{},requests:{},ranges:{}});let E=x.glyphs[d];if(E!==void 0)return{stack:s,id:d,glyph:E};if(E=this._tinySDF(x,s,d),E)return x.glyphs[d]=E,{stack:s,id:d,glyph:E};const L=Math.floor(d/256);if(256*L>65535)throw new Error("glyphs > 65535 not supported");if(x.ranges[L])return{stack:s,id:d,glyph:E};if(!this.url)throw new Error("glyphsUrl is not set");if(!x.requests[L]){const X=se.loadGlyphRange(s,L,this.url,this.requestManager);x.requests[L]=X}const F=yield x.requests[L];for(const X in F)this._doesCharSupportLocalGlyph(+X)||(x.glyphs[+X]=F[+X]);return x.ranges[L]=!0,{stack:s,id:d,glyph:F[d]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||a.u["CJK Unified Ideographs"](s)||a.u["Hangul Syllables"](s)||a.u.Hiragana(s)||a.u.Katakana(s)||a.u["CJK Symbols and Punctuation"](s)||a.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,d,x){const E=this.localIdeographFontFamily;if(!E||!this._doesCharSupportLocalGlyph(x))return;let L=s.tinySDF;if(!L){let X="400";/bold/i.test(d)?X="900":/medium/i.test(d)?X="500":/light/i.test(d)&&(X="200"),L=s.tinySDF=new se.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:E,fontWeight:X})}const F=L.draw(String.fromCharCode(x));return{id:x,bitmap:new a.q({width:F.width||60,height:F.height||60},F.data),metrics:{width:F.glyphWidth/2||24,height:F.glyphHeight/2||24,left:F.glyphLeft/2+.5||0,top:F.glyphTop/2-27.5||-8,advance:F.glyphAdvance/2||24,isDoubleResolution:!0}}}}se.loadGlyphRange=function(R,s,d,x){return a._(this,void 0,void 0,function*(){const E=256*s,L=E+255,F=x.transformRequest(d.replace("{fontstack}",R).replace("{range}",`${E}-${L}`),"Glyphs"),X=yield a.n(F,new AbortController);if(!X||!X.data)throw new Error(`Could not load glyph range. range: ${s}, ${E}-${L}`);const Q={};for(const ae of a.o(X.data))Q[ae.id]=ae;return Q})},se.TinySDF=class{constructor({fontSize:R=24,buffer:s=3,radius:d=8,cutoff:x=.25,fontFamily:E="sans-serif",fontWeight:L="normal",fontStyle:F="normal"}={}){this.buffer=s,this.cutoff=x,this.radius=d;const X=this.size=R+4*s,Q=this._createCanvas(X),ae=this.ctx=Q.getContext("2d",{willReadFrequently:!0});ae.font=`${F} ${L} ${R}px ${E}`,ae.textBaseline="alphabetic",ae.textAlign="left",ae.fillStyle="black",this.gridOuter=new Float64Array(X*X),this.gridInner=new Float64Array(X*X),this.f=new Float64Array(X),this.z=new Float64Array(X+1),this.v=new Uint16Array(X)}_createCanvas(R){const s=document.createElement("canvas");return s.width=s.height=R,s}draw(R){const{width:s,actualBoundingBoxAscent:d,actualBoundingBoxDescent:x,actualBoundingBoxLeft:E,actualBoundingBoxRight:L}=this.ctx.measureText(R),F=Math.ceil(d),X=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(L-E))),Q=Math.min(this.size-this.buffer,F+Math.ceil(x)),ae=X+2*this.buffer,be=Q+2*this.buffer,Ae=Math.max(ae*be,0),Pe=new Uint8ClampedArray(Ae),qe={data:Pe,width:ae,height:be,glyphWidth:X,glyphHeight:Q,glyphTop:F,glyphLeft:0,glyphAdvance:s};if(X===0||Q===0)return qe;const{ctx:Ze,buffer:dt,gridInner:ft,gridOuter:pt}=this;Ze.clearRect(dt,dt,X,Q),Ze.fillText(R,dt,dt+F);const Tt=Ze.getImageData(dt,dt,X,Q);pt.fill(K,0,Ae),ft.fill(0,0,Ae);for(let Nt=0;Nt<Q;Nt++)for(let kt=0;kt<X;kt++){const Bt=Tt.data[4*(Nt*X+kt)+3]/255;if(Bt===0)continue;const Wt=(Nt+dt)*ae+kt+dt;if(Bt===1)pt[Wt]=0,ft[Wt]=K;else{const Gt=.5-Bt;pt[Wt]=Gt>0?Gt*Gt:0,ft[Wt]=Gt<0?Gt*Gt:0}}re(pt,0,0,ae,be,ae,this.f,this.v,this.z),re(ft,dt,dt,X,Q,ae,this.f,this.v,this.z);for(let Nt=0;Nt<Ae;Nt++){const kt=Math.sqrt(pt[Nt])-Math.sqrt(ft[Nt]);Pe[Nt]=Math.round(255-255*(kt/this.radius+this.cutoff))}return qe}};class de{constructor(){this.specification=a.v.light.position}possiblyEvaluate(s,d){return a.z(s.expression.evaluate(d))}interpolate(s,d,x){return{x:a.B.number(s.x,d.x,x),y:a.B.number(s.y,d.y,x),z:a.B.number(s.z,d.z,x)}}}let ue;class Te extends a.E{constructor(s){super(),ue=ue||new a.r({anchor:new a.D(a.v.light.anchor),position:new de,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(ue),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(a.t,s,d))for(const x in s){const E=s[x];x.endsWith("-transition")?this._transitionable.setTransition(x.slice(0,-11),E):this._transitionable.setValue(x,E)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,x){return(!x||x.validate!==!1)&&a.x(this,s.call(a.y,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const pe=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class De extends a.E{constructor(s){super(),this._transitionable=new a.T(pe),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.C(0))}setSky(s,d={}){if(!this._validate(a.F,s,d)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const x in s){const E=s[x];x.endsWith("-transition")?this._transitionable.setTransition(x.slice(0,-11),E):this._transitionable.setValue(x,E)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,x={}){return(x==null?void 0:x.validate)!==!1&&a.x(this,s.call(a.y,a.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class me{constructor(s,d){this.width=s,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,d){const x=s.join(",")+String(d);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(s,d)),this.dashEntry[x]}getDashRanges(s,d,x){const E=[];let L=s.length%2==1?-s[s.length-1]*x:0,F=s[0]*x,X=!0;E.push({left:L,right:F,isDash:X,zeroLength:s[0]===0});let Q=s[0];for(let ae=1;ae<s.length;ae++){X=!X;const be=s[ae];L=Q*x,Q+=be,F=Q*x,E.push({left:L,right:F,isDash:X,zeroLength:be===0})}return E}addRoundDash(s,d,x){const E=d/2;for(let L=-x;L<=x;L++){const F=this.width*(this.nextRow+x+L);let X=0,Q=s[X];for(let ae=0;ae<this.width;ae++){ae/Q.right>1&&(Q=s[++X]);const be=Math.abs(ae-Q.left),Ae=Math.abs(ae-Q.right),Pe=Math.min(be,Ae);let qe;const Ze=L/x*(E+1);if(Q.isDash){const dt=E-Math.abs(Ze);qe=Math.sqrt(Pe*Pe+dt*dt)}else qe=E-Math.sqrt(Pe*Pe+Ze*Ze);this.data[F+ae]=Math.max(0,Math.min(255,qe+128))}}}addRegularDash(s){for(let X=s.length-1;X>=0;--X){const Q=s[X],ae=s[X+1];Q.zeroLength?s.splice(X,1):ae&&ae.isDash===Q.isDash&&(ae.left=Q.left,s.splice(X,1))}const d=s[0],x=s[s.length-1];d.isDash===x.isDash&&(d.left=x.left-this.width,x.right=d.right+this.width);const E=this.width*this.nextRow;let L=0,F=s[L];for(let X=0;X<this.width;X++){X/F.right>1&&(F=s[++L]);const Q=Math.abs(X-F.left),ae=Math.abs(X-F.right),be=Math.min(Q,ae);this.data[E+X]=Math.max(0,Math.min(255,(F.isDash?be:-be)+128))}}addDash(s,d){const x=d?7:0,E=2*x+1;if(this.nextRow+E>this.height)return a.w("LineAtlas out of space"),null;let L=0;for(let X=0;X<s.length;X++)L+=s[X];if(L!==0){const X=this.width/L,Q=this.getDashRanges(s,this.width,X);d?this.addRoundDash(Q,X,x):this.addRegularDash(Q)}const F={y:(this.nextRow+x+.5)/this.height,height:2*x/this.height,width:L};return this.nextRow+=E,this.dirty=!0,F}bind(s){const d=s.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const Me="maplibre_preloaded_worker_pool";class fe{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<fe.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Me]}numActive(){return Object.keys(this.active).length}}const ve=Math.floor(w.hardwareConcurrency/2);let le,ye;function Se(){return le||(le=new fe),le}fe.workerCount=a.G(globalThis)?Math.max(Math.min(ve,3),1):1;class Be{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=d;const x=this.workerPool.acquire(d);for(let E=0;E<x.length;E++){const L=new a.H(x[E],d);L.name=`Worker ${E}`,this.actors.push(L)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,d){const x=[];for(const E of this.actors)x.push(E.sendAsync({type:s,data:d}));return Promise.all(x)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,d){for(const x of this.actors)x.registerMessageHandler(s,d)}}function Ve(){return ye||(ye=new Be(Se(),a.J),ye.registerMessageHandler("GR",(R,s,d)=>a.m(s,d))),ye}function tt(R,s){const d=a.K();return a.L(d,d,[1,1,0]),a.M(d,d,[.5*R.width,.5*R.height,1]),R.calculatePosMatrix?a.N(d,d,R.calculatePosMatrix(s.toUnwrapped())):d}function ht(R,s,d,x,E,L){var F;const X=function(Ae,Pe,qe){if(Ae)for(const Ze of Ae){const dt=Pe[Ze];if(dt&&dt.source===qe&&dt.type==="fill-extrusion")return!0}else for(const Ze in Pe){const dt=Pe[Ze];if(dt.source===qe&&dt.type==="fill-extrusion")return!0}return!1}((F=E==null?void 0:E.layers)!==null&&F!==void 0?F:null,s,R.id),Q=L.maxPitchScaleFactor(),ae=R.tilesIn(x,Q,X);ae.sort(it);const be=[];for(const Ae of ae)be.push({wrappedTileID:Ae.tileID.wrapped().key,queryResults:Ae.tile.queryRenderedFeatures(s,d,R._state,Ae.queryGeometry,Ae.cameraQueryGeometry,Ae.scale,E,L,Q,tt(R.transform,Ae.tileID))});return function(Ae,Pe){for(const qe in Ae)for(const Ze of Ae[qe])gt(Ze,Pe);return Ae}(function(Ae){const Pe={},qe={};for(const Ze of Ae){const dt=Ze.queryResults,ft=Ze.wrappedTileID,pt=qe[ft]=qe[ft]||{};for(const Tt in dt){const Nt=dt[Tt],kt=pt[Tt]=pt[Tt]||{},Bt=Pe[Tt]=Pe[Tt]||[];for(const Wt of Nt)kt[Wt.featureIndex]||(kt[Wt.featureIndex]=!0,Bt.push(Wt))}}return Pe}(be),R)}function it(R,s){const d=R.tileID,x=s.tileID;return d.overscaledZ-x.overscaledZ||d.canonical.y-x.canonical.y||d.wrap-x.wrap||d.canonical.x-x.canonical.x}function gt(R,s){const d=R.feature,x=s.getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source,d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]),d.state=x}function $t(R,s,d){return a._(this,void 0,void 0,function*(){let x=R;if(R.url?x=(yield a.j(s.transformRequest(R.url,"Source"),d)).data:yield w.frameAsync(d),!x)return null;const E=a.O(a.e(x,R),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in x&&x.vector_layers&&(E.vectorLayerIds=x.vector_layers.map(L=>L.id)),E})}class He{constructor(s,d){s&&(d?this.setSouthWest(s).setNorthEast(d):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof a.Q?new a.Q(s.lng,s.lat):a.Q.convert(s),this}setSouthWest(s){return this._sw=s instanceof a.Q?new a.Q(s.lng,s.lat):a.Q.convert(s),this}extend(s){const d=this._sw,x=this._ne;let E,L;if(s instanceof a.Q)E=s,L=s;else{if(!(s instanceof He))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(He.convert(s)):this.extend(a.Q.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(a.Q.convert(s)):this;if(E=s._sw,L=s._ne,!E||!L)return this}return d||x?(d.lng=Math.min(E.lng,d.lng),d.lat=Math.min(E.lat,d.lat),x.lng=Math.max(L.lng,x.lng),x.lat=Math.max(L.lat,x.lat)):(this._sw=new a.Q(E.lng,E.lat),this._ne=new a.Q(L.lng,L.lat)),this}getCenter(){return new a.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.Q(this.getWest(),this.getNorth())}getSouthEast(){return new a.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:d,lat:x}=a.Q.convert(s);let E=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(E=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&E}static convert(s){return s instanceof He?s:s&&new He(s)}static fromLngLat(s,d=0){const x=360*d/40075017,E=x/Math.cos(Math.PI/180*s.lat);return new He(new a.Q(s.lng-E,s.lat-x),new a.Q(s.lng+E,s.lat+x))}adjustAntiMeridian(){const s=new a.Q(this._sw.lng,this._sw.lat),d=new a.Q(this._ne.lng,this._ne.lat);return new He(s,s.lng>d.lng?new a.Q(d.lng+360,d.lat):d)}}class Ct{constructor(s,d,x){this.bounds=He.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=x||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const d=Math.pow(2,s.z),x=Math.floor(a.U(this.bounds.getWest())*d),E=Math.floor(a.S(this.bounds.getNorth())*d),L=Math.ceil(a.U(this.bounds.getEast())*d),F=Math.ceil(a.S(this.bounds.getSouth())*d);return s.x>=x&&s.x<L&&s.y>=E&&s.y<F}}class Xe extends a.E{constructor(s,d,x,E){if(super(),this.id=s,this.dispatcher=x,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.O(d,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(a.e(this,s),s.bounds&&(this.tileBounds=new Ct(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new a.k(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(s){return a._(this,void 0,void 0,function*(){const d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x={request:this.map._requestManager.transformRequest(d,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};x.request.collectResourceTiming=this._collectResourceTiming;let E="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((L,F)=>{s.reloadPromise={resolve:L,reject:F}})}else s.actor=this.dispatcher.getActor(),E="LT";s.abortController=new AbortController;try{const L=yield s.actor.sendAsync({type:E,data:x},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,L)}catch(L){if(delete s.abortController,s.aborted)return;if(L&&L.status!==404)throw L;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,d){if(d&&d.resourceTiming&&(s.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&s.setExpiryData(d),s.loadVectorData(d,this.map.painter),s.reloadPromise){const x=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(x.resolve).catch(x.reject)}}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class tn extends a.E{constructor(s,d,x,E){super(),this.id=s,this.dispatcher=x,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},d),a.e(this,a.O(d,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(s=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const d=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,d&&(a.e(this,d),d.bounds&&(this.tileBounds=new Ct(d.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(d){this._tileJSONRequest=null,this.fire(new a.k(d))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return a.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return a._(this,void 0,void 0,function*(){const d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const x=yield z.getImage(this.map._requestManager.transformRequest(d,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(x&&x.data){this.map._refreshExpiredTiles&&x.cacheControl&&x.expires&&s.setExpiryData({cacheControl:x.cacheControl,expires:x.expires});const E=this.map.painter.context,L=E.gl,F=x.data;s.texture=this.map.painter.getTileTexture(F.width),s.texture?s.texture.update(F,{useMipmap:!0}):(s.texture=new Y(E,F,L.RGBA,{useMipmap:!0}),s.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(x){if(delete s.abortController,s.aborted)s.state="unloaded";else if(x)throw s.state="errored",x}})}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class Kt extends tn{constructor(s,d,x,E){super(s,d,x,E),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(s){return a._(this,void 0,void 0,function*(){const d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x=this.map._requestManager.transformRequest(d,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const E=yield z.getImage(x,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(E&&E.data){const L=E.data;this.map._refreshExpiredTiles&&E.cacheControl&&E.expires&&s.setExpiryData({cacheControl:E.cacheControl,expires:E.expires});const F=a.b(L)&&a.V()?L:yield this.readImageNow(L),X={type:this.type,uid:s.uid,source:this.id,rawImageData:F,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const Q=yield s.actor.sendAsync({type:"LDT",data:X});s.dem=Q,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(E){if(delete s.abortController,s.aborted)s.state="unloaded";else if(E)throw s.state="errored",E}})}readImageNow(s){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.W()){const d=s.width+2,x=s.height+2;try{return new a.R({width:d,height:x},yield a.X(s,-1,-1,d,x))}catch{}}return w.getImageData(s,1)})}_getNeighboringTiles(s){const d=s.canonical,x=Math.pow(2,d.z),E=(d.x-1+x)%x,L=d.x===0?s.wrap-1:s.wrap,F=(d.x+1+x)%x,X=d.x+1===x?s.wrap+1:s.wrap,Q={};return Q[new a.Y(s.overscaledZ,L,d.z,E,d.y).key]={backfilled:!1},Q[new a.Y(s.overscaledZ,X,d.z,F,d.y).key]={backfilled:!1},d.y>0&&(Q[new a.Y(s.overscaledZ,L,d.z,E,d.y-1).key]={backfilled:!1},Q[new a.Y(s.overscaledZ,s.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},Q[new a.Y(s.overscaledZ,X,d.z,F,d.y-1).key]={backfilled:!1}),d.y+1<x&&(Q[new a.Y(s.overscaledZ,L,d.z,E,d.y+1).key]={backfilled:!1},Q[new a.Y(s.overscaledZ,s.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},Q[new a.Y(s.overscaledZ,X,d.z,F,d.y+1).key]={backfilled:!1}),Q}unloadTile(s){return a._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class Jt extends a.E{constructor(s,d,x,E){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=x.getActor(),this.setEventedParent(E),this._data=d.data,this._options=a.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId,d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(d.buffer!==void 0?d.buffer:128),tolerance:this._pixelsToTileUnits(d.tolerance!==void 0?d.tolerance:.375),extent:a.Z,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.Z,radius:this._pixelsToTileUnits(d.clusterRadius||50),log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(a.Z/this.tileSize)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}getData(){return a._(this,void 0,void 0,function*(){const s=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,d,x){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:d,offset:x}})}_updateWorkerData(s){return a._(this,void 0,void 0,function*(){const d=a.e({type:this.type},this.workerOptions);s?d.dataDiff=s:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(w.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{const x=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||x.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let E=null;x.resourceTiming&&x.resourceTiming[this.id]&&(E=x.resourceTiming[this.id].slice(0));const L={dataType:"source"};this._collectResourceTiming&&E&&E.length>0&&a.e(L,{resourceTiming:E}),this.fire(new a.l("data",Object.assign(Object.assign({},L),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},L),{sourceDataType:"content"})))}catch(x){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(x))}})}loaded(){return this._pendingLoads===0}loadTile(s){return a._(this,void 0,void 0,function*(){const d=s.actor?"RT":"LT";s.actor=this.actor;const x={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};s.abortController=new AbortController;const E=yield this.actor.sendAsync({type:d,data:x},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(E,this.map.painter,d==="RT")})}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Ht extends a.E{constructor(s,d,x,E){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=x,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=d}load(s){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,s&&(this.coordinates=s),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new a.k(d))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const d=s.map(a.$.fromLngLat);var x;return this.tileID=function(E){let L=1/0,F=1/0,X=-1/0,Q=-1/0;for(const Pe of E)L=Math.min(L,Pe.x),F=Math.min(F,Pe.y),X=Math.max(X,Pe.x),Q=Math.max(Q,Pe.y);const ae=Math.max(X-L,Q-F),be=Math.max(0,Math.floor(-Math.log(ae)/Math.LN2)),Ae=Math.pow(2,be);return new a.a0(be,Math.floor((L+X)/2*Ae),Math.floor((F+Q)/2*Ae))}(d),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=d.map(E=>this.tileID.getTilePoint(E)._round()),this.flippedWindingOrder=((x=this.tileCoords)[1].x-x[0].x)*(x[2].y-x[0].y)-(x[1].y-x[0].y)*(x[2].x-x[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,d=s.gl;this.texture||(this.texture=new Y(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let x=!1;for(const E in this.tiles){const L=this.tiles[E];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,x=!0)}x&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class $e extends Ht{constructor(s,d,x,E){super(s,d,x,E),this.roundZoom=!0,this.type="video",this.options=d}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const d of s.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield a.a1(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new a.k(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const d=this.video.seekable;s<d.start(0)||s>d.end(0)?this.fire(new a.k(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,d=s.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new Y(s,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let x=!1;for(const E in this.tiles){const L=this.tiles[E];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,x=!0)}x&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ee extends Ht{constructor(s,d,x,E){super(s,d,x,E),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(L=>!Array.isArray(L)||L.length!==2||L.some(F=>typeof F!="number"))||this.fire(new a.k(new a.a2(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a2(`sources.${s}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.k(new a.a2(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a2(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a2(`sources.${s}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,x=d.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Y(d,this.canvas,x.RGBA,{premultiply:!0});let E=!1;for(const L in this.tiles){const F=this.tiles[L];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture,E=!0)}E&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const _t={},jt=R=>{switch(R){case"geojson":return Jt;case"image":return Ht;case"raster":return tn;case"raster-dem":return Kt;case"vector":return Xe;case"video":return $e;case"canvas":return Ee}return _t[R]},vt="RTLPluginLoaded";class Pt extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ve()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return a._(this,arguments,void 0,function*(d,x=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=w.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!x)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(vt))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let vn=null;function hn(){return vn||(vn=new Pt),vn}class pn{constructor(s,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=a.a3(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const d=s+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,d,x){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(E,L){const F={};if(!L)return F;for(const X of E){const Q=X.layerIds.map(ae=>L.getLayer(ae)).filter(Boolean);if(Q.length!==0){X.layers=Q,X.stateDependentLayerIds&&(X.stateDependentLayers=X.stateDependentLayerIds.map(ae=>Q.filter(be=>be.id===ae)[0]));for(const ae of Q)F[ae.id]=X}}return F}(s.buckets,d==null?void 0:d.style),this.hasSymbolBuckets=!1;for(const E in this.buckets){const L=this.buckets[E];if(L instanceof a.a5){if(this.hasSymbolBuckets=!0,!x)break;L.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const E in this.buckets){const L=this.buckets[E];if(L instanceof a.a5&&L.hasRTLText){this.hasRTLText=!0,hn().lazyLoad();break}}this.queryPadding=0;for(const E in this.buckets){const L=this.buckets[E];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(E).queryRadius(L))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new a.a4}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const x in this.buckets){const E=this.buckets[x];E.uploadPending()&&E.upload(s)}const d=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Y(s,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Y(s,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,d,x,E,L,F,X,Q,ae,be){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:E,cameraQueryGeometry:L,scale:F,tileSize:this.tileSize,pixelPosMatrix:be,transform:Q,params:X,queryPadding:this.queryPadding*ae},s,d,x):{}}querySourceFeatures(s,d){const x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;const E=x.loadVTLayers(),L=d&&d.sourceLayer?d.sourceLayer:"",F=E._geojsonTileLayer||E[L];if(!F)return;const X=a.a6(d&&d.filter),{z:Q,x:ae,y:be}=this.tileID.canonical,Ae={z:Q,x:ae,y:be};for(let Pe=0;Pe<F.length;Pe++){const qe=F.feature(Pe);if(X.needGeometry){const ft=a.a7(qe,!0);if(!X.filter(new a.C(this.tileID.overscaledZ),ft,this.tileID.canonical))continue}else if(!X.filter(new a.C(this.tileID.overscaledZ),qe))continue;const Ze=x.getId(qe,L),dt=new a.a8(qe,Q,ae,be,Ze);dt.tile=Ae,s.push(dt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const d=this.expirationTime;if(s.cacheControl){const x=a.a9(s.cacheControl);x["max-age"]&&(this.expirationTime=Date.now()+1e3*x["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const x=Date.now();let E=!1;if(this.expirationTime>x)E=!1;else if(d)if(this.expirationTime<d)E=!0;else{const L=this.expirationTime-d;L?this.expirationTime=x+Math.max(L,3e4):E=!0}else E=!0;E?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const x=this.latestFeatureIndex.loadVTLayers();for(const E in this.buckets){if(!d.style.hasLayer(E))continue;const L=this.buckets[E],F=L.layers[0].sourceLayer||"_geojsonTileLayer",X=x[F],Q=s[F];if(!X||!Q||Object.keys(Q).length===0)continue;L.update(Q,X,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ae=d&&d.style&&d.style.getLayer(E);ae&&(this.queryPadding=Math.max(this.queryPadding,ae.queryRadius(L)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<w.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=w.now()+s}setDependencies(s,d){const x={};for(const E of d)x[E]=!0;this.dependencies[s]=x}hasDependency(s,d){for(const x of s){const E=this.dependencies[x];if(E){for(const L of d)if(E[L])return!0}}return!1}}class nn{constructor(s,d){this.max=s,this.onRemove=d,this.reset()}reset(){for(const s in this.data)for(const d of this.data[s])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(s,d,x){const E=s.wrapped().key;this.data[E]===void 0&&(this.data[E]=[]);const L={value:d,timeout:void 0};if(x!==void 0&&(L.timeout=setTimeout(()=>{this.remove(s,L)},x)),this.data[E].push(L),this.order.push(E),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const d=this.data[s].shift();return d.timeout&&clearTimeout(d.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),d.value}getByKey(s){const d=this.data[s];return d?d[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,d){if(!this.has(s))return this;const x=s.wrapped().key,E=d===void 0?0:this.data[x].indexOf(d),L=this.data[x][E];return this.data[x].splice(E,1),L.timeout&&clearTimeout(L.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(L.value),this.order.splice(this.order.indexOf(x),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(s){const d=[];for(const x in this.data)for(const E of this.data[x])s(E.value)||d.push(E);for(const x of d)this.remove(x.value.tileID,x)}}class Ft{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,d,x){const E=String(d);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][E]=this.stateChanges[s][E]||{},a.e(this.stateChanges[s][E],x),this.deletedStates[s]===null){this.deletedStates[s]={};for(const L in this.state[s])L!==E&&(this.deletedStates[s][L]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][E]===null){this.deletedStates[s][E]={};for(const L in this.state[s][E])x[L]||(this.deletedStates[s][E][L]=null)}else for(const L in x)this.deletedStates[s]&&this.deletedStates[s][E]&&this.deletedStates[s][E][L]===null&&delete this.deletedStates[s][E][L]}removeFeatureState(s,d,x){if(this.deletedStates[s]===null)return;const E=String(d);if(this.deletedStates[s]=this.deletedStates[s]||{},x&&d!==void 0)this.deletedStates[s][E]!==null&&(this.deletedStates[s][E]=this.deletedStates[s][E]||{},this.deletedStates[s][E][x]=null);else if(d!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][E])for(x in this.deletedStates[s][E]={},this.stateChanges[s][E])this.deletedStates[s][E][x]=null;else this.deletedStates[s][E]=null;else this.deletedStates[s]=null}getState(s,d){const x=String(d),E=a.e({},(this.state[s]||{})[x],(this.stateChanges[s]||{})[x]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const L=this.deletedStates[s][d];if(L===null)return{};for(const F in L)delete E[F]}return E}initializeTileState(s,d){s.setFeatureState(this.state,d)}coalesceChanges(s,d){const x={};for(const E in this.stateChanges){this.state[E]=this.state[E]||{};const L={};for(const F in this.stateChanges[E])this.state[E][F]||(this.state[E][F]={}),a.e(this.state[E][F],this.stateChanges[E][F]),L[F]=this.state[E][F];x[E]=L}for(const E in this.deletedStates){this.state[E]=this.state[E]||{};const L={};if(this.deletedStates[E]===null)for(const F in this.state[E])L[F]={},this.state[E][F]={};else for(const F in this.deletedStates[E]){if(this.deletedStates[E][F]===null)this.state[E][F]={};else for(const X of Object.keys(this.deletedStates[E][F]))delete this.state[E][F][X];L[F]=this.state[E][F]}x[E]=x[E]||{},a.e(x[E],L)}if(this.stateChanges={},this.deletedStates={},Object.keys(x).length!==0)for(const E in s)s[E].setFeatureState(x,d)}}function In(R,s,d){const x=s.intersectsFrustum(R);if(!d)return x;const E=s.intersectsPlane(d);return x===0||E===0?0:x===2&&E===2?2:1}function Pn(R,s,d,x,E){let L=R;const F=Math.atan(s/d),X=Math.hypot(s,d);return L=R+a.aa(x/X/Math.max(.5,Math.cos(a.ac(E/2)))),L+=1*a.aa(Math.cos(F))/2,L+=a.ad(R-L,-0,0),L}function ir(R,s){const d=(s.roundZoom?Math.round:Math.floor)(R.zoom+a.aa(R.tileSize/s.tileSize));return Math.max(0,d)}function mt(R,s){const d=R.getCameraFrustum(),x=R.getClippingPlane(),E=R.screenPointToMercatorCoordinate(R.getCameraPoint()),L=a.$.fromLngLat(R.center,R.elevation);E.z=L.z+Math.cos(R.pitchInRadians)*R.cameraToCenterDistance/R.worldSize;const F=R.getCoveringTilesDetailsProvider(),X=F.allowVariableZoom(R,s),Q=ir(R,s),ae=s.minzoom||0,be=s.maxzoom!==void 0?s.maxzoom:R.maxZoom,Ae=Math.min(Math.max(0,Q),be),Pe=Math.pow(2,Ae),qe=[Pe*E.x,Pe*E.y,0],Ze=[Pe*L.x,Pe*L.y,0],dt=Math.hypot(L.x-E.x,L.y-E.y),ft=Math.abs(L.z-E.z),pt=Math.hypot(dt,ft),Tt=Bt=>({zoom:0,x:0,y:0,wrap:Bt,fullyVisible:!1}),Nt=[],kt=[];if(R.renderWorldCopies&&F.allowWorldCopies())for(let Bt=1;Bt<=3;Bt++)Nt.push(Tt(-Bt)),Nt.push(Tt(Bt));for(Nt.push(Tt(0));Nt.length>0;){const Bt=Nt.pop(),Wt=Bt.x,Gt=Bt.y;let xn=Bt.fullyVisible;const En={x:Wt,y:Gt,z:Bt.zoom},zn=F.getTileAABB(En,Bt.wrap,R.elevation,s);if(!xn){const dr=In(d,zn,x);if(dr===0)continue;xn=dr===2}const Un=F.distanceToTile2d(E.x,E.y,En,zn);let kn=Q;X&&(kn=(s.calculateTileZoom||Pn)(R.zoom+a.aa(R.tileSize/s.tileSize),Un,ft,pt,R.fov)),kn=(s.roundZoom?Math.round:Math.floor)(kn),kn=Math.max(0,kn);const wr=Math.min(kn,be);if(Bt.wrap=F.getWrap(L,En,Bt.wrap),Bt.zoom>=wr){if(Bt.zoom<ae)continue;const dr=Ae-Bt.zoom,Kn=qe[0]-.5-(Wt<<dr),Nr=qe[1]-.5-(Gt<<dr),Fr=s.reparseOverscaled?Math.max(Bt.zoom,kn):Bt.zoom;kt.push({tileID:new a.Y(Bt.zoom===be?Fr:Bt.zoom,Bt.wrap,Bt.zoom,Wt,Gt),distanceSq:a.ab([Ze[0]-.5-Wt,Ze[1]-.5-Gt]),tileDistanceToCamera:Math.sqrt(Kn*Kn+Nr*Nr)})}else for(let dr=0;dr<4;dr++)Nt.push({zoom:Bt.zoom+1,x:(Wt<<1)+dr%2,y:(Gt<<1)+(dr>>1),wrap:Bt.wrap,fullyVisible:xn})}return kt.sort((Bt,Wt)=>Bt.distanceSq-Wt.distanceSq).map(Bt=>Bt.tileID)}class ge extends a.E{constructor(s,d,x){super(),this.id=s,this.dispatcher=x,this.on("data",E=>this._dataHandler(E)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((E,L,F,X)=>{const Q=new(jt(L.type))(E,L,F,X);if(Q.id!==E)throw new Error(`Expected Source id to be ${E} instead of ${Q.id}`);return Q})(s,d,x,this),this._tiles={},this._cache=new nn(0,E=>this._unloadTile(E)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ft,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const d=this._tiles[s];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,d,x){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,d,x)}catch(E){s.state="errored",E.status!==404?this._source.fire(new a.k(E,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new a.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const x=this._tiles[d];x.upload(s),x.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(ke).map(s=>s.key)}getRenderableIds(s){const d=[];for(const x in this._tiles)this._isIdRenderable(x,s)&&d.push(this._tiles[x]);return s?d.sort((x,E)=>{const L=x.tileID,F=E.tileID,X=new a.P(L.canonical.x,L.canonical.y)._rotate(-this.transform.bearingInRadians),Q=new a.P(F.canonical.x,F.canonical.y)._rotate(-this.transform.bearingInRadians);return L.overscaledZ-F.overscaledZ||Q.y-X.y||Q.x-X.x}).map(x=>x.tileID.key):d.map(x=>x.tileID).sort(ke).map(x=>x.key)}hasRenderableParent(s){const d=this.findLoadedParent(s,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(s,d){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(d||!this._tiles[s].holdingForFade())}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)(s||this._tiles[d].state!=="errored")&&this._reloadTile(d,"reloading")}}_reloadTile(s,d){return a._(this,void 0,void 0,function*(){const x=this._tiles[s];x&&(x.state!=="loading"&&(x.state=d),yield this._loadTile(x,s,d))})}_tileLoaded(s,d,x){s.timeAdded=w.now(),x==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(d,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const d=this.getRenderableIds();for(let E=0;E<d.length;E++){const L=d[E];if(s.neighboringTiles&&s.neighboringTiles[L]){const F=this.getTileByID(L);x(s,F),x(F,s)}}function x(E,L){E.needsHillshadePrepare=!0,E.needsTerrainPrepare=!0;let F=L.tileID.canonical.x-E.tileID.canonical.x;const X=L.tileID.canonical.y-E.tileID.canonical.y,Q=Math.pow(2,E.tileID.canonical.z),ae=L.tileID.key;F===0&&X===0||Math.abs(X)>1||(Math.abs(F)>1&&(Math.abs(F+Q)===1?F+=Q:Math.abs(F-Q)===1&&(F-=Q)),L.dem&&E.dem&&(E.dem.backfillBorder(L.dem,F,X),E.neighboringTiles&&E.neighboringTiles[ae]&&(E.neighboringTiles[ae].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,d,x,E){for(const L in this._tiles){let F=this._tiles[L];if(E[L]||!F.hasData()||F.tileID.overscaledZ<=d||F.tileID.overscaledZ>x)continue;let X=F.tileID;for(;F&&F.tileID.overscaledZ>d+1;){const ae=F.tileID.scaledTo(F.tileID.overscaledZ-1);F=this._tiles[ae.key],F&&F.hasData()&&(X=ae)}let Q=X;for(;Q.overscaledZ>d;)if(Q=Q.scaledTo(Q.overscaledZ-1),s[Q.key]||s[Q.canonical.key]){E[X.key]=X;break}}}findLoadedParent(s,d){if(s.key in this._loadedParentTiles){const x=this._loadedParentTiles[s.key];return x&&x.tileID.overscaledZ>=d?x:null}for(let x=s.overscaledZ-1;x>=d;x--){const E=s.scaledTo(x),L=this._getLoadedTile(E);if(L)return L}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){const d=this._tiles[s.key];return d&&d.hasData()?d:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const d=Math.ceil(s.width/this._source.tileSize)+1,x=Math.ceil(s.height/this._source.tileSize)+1,E=Math.floor(d*x*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),L=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(L)}handleWrapJump(s){const d=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,d){const x={};for(const E in this._tiles){const L=this._tiles[E];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+d),x[L.tileID.key]=L}this._tiles=x;for(const E in this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(const E in this._tiles)this._setTileReloadTimer(E,this._tiles[E])}}_updateCoveredAndRetainedTiles(s,d,x,E,L,F){const X={},Q={},ae=Object.keys(s),be=w.now();for(const Ae of ae){const Pe=s[Ae],qe=this._tiles[Ae];if(!qe||qe.fadeEndTime!==0&&qe.fadeEndTime<=be)continue;const Ze=this.findLoadedParent(Pe,d),dt=this.findLoadedSibling(Pe),ft=Ze||dt||null;ft&&(this._addTile(ft.tileID),X[ft.tileID.key]=ft.tileID),Q[Ae]=Pe}this._retainLoadedChildren(Q,E,x,s);for(const Ae in X)s[Ae]||(this._coveredTiles[Ae]=!0,s[Ae]=X[Ae]);if(F){const Ae={},Pe={};for(const qe of L)this._tiles[qe.key].hasData()?Ae[qe.key]=qe:Pe[qe.key]=qe;for(const qe in Pe){const Ze=Pe[qe].children(this._source.maxzoom);this._tiles[Ze[0].key]&&this._tiles[Ze[1].key]&&this._tiles[Ze[2].key]&&this._tiles[Ze[3].key]&&(Ae[Ze[0].key]=s[Ze[0].key]=Ze[0],Ae[Ze[1].key]=s[Ze[1].key]=Ze[1],Ae[Ze[2].key]=s[Ze[2].key]=Ze[2],Ae[Ze[3].key]=s[Ze[3].key]=Ze[3],delete Pe[qe])}for(const qe in Pe){const Ze=Pe[qe],dt=this.findLoadedParent(Ze,this._source.minzoom),ft=this.findLoadedSibling(Ze),pt=dt||ft||null;if(pt){Ae[pt.tileID.key]=s[pt.tileID.key]=pt.tileID;for(const Tt in Ae)Ae[Tt].isChildOf(pt.tileID)&&delete Ae[Tt]}}for(const qe in this._tiles)Ae[qe]||(this._coveredTiles[qe]=!0)}}update(s,d){if(!this._sourceLoaded||this._paused)return;let x;this.transform=s,this.terrain=d,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?x=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(be=>new a.Y(be.canonical.z,be.wrap,be.canonical.z,be.canonical.x,be.canonical.y)):(x=mt(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(x=x.filter(be=>this._source.hasTile(be)))):x=[];const E=ir(s,this._source),L=Math.max(E-ge.maxOverzooming,this._source.minzoom),F=Math.max(E+ge.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const be={};for(const Ae of x)if(Ae.canonical.z>this._source.minzoom){const Pe=Ae.scaledTo(Ae.canonical.z-1);be[Pe.key]=Pe;const qe=Ae.scaledTo(Math.max(this._source.minzoom,Math.min(Ae.canonical.z,5)));be[qe.key]=qe}x=x.concat(Object.values(be))}const X=x.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,X&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const Q=this._updateRetainedTiles(x,E);We(this._source.type)&&this._updateCoveredAndRetainedTiles(Q,L,F,E,x,d);for(const be in Q)this._tiles[be].clearFadeHold();const ae=a.ae(this._tiles,Q);for(const be of ae){const Ae=this._tiles[be];Ae.hasSymbolBuckets&&!Ae.holdingForFade()?Ae.setHoldDuration(this.map._fadeDuration):Ae.hasSymbolBuckets&&!Ae.symbolFadeFinished()||this._removeTile(be)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,d){var x;const E={},L={},F=Math.max(d-ge.maxOverzooming,this._source.minzoom),X=Math.max(d+ge.maxUnderzooming,this._source.minzoom),Q={};for(const ae of s){const be=this._addTile(ae);E[ae.key]=ae,be.hasData()||d<this._source.maxzoom&&(Q[ae.key]=ae)}this._retainLoadedChildren(Q,d,X,E);for(const ae of s){let be=this._tiles[ae.key];if(be.hasData())continue;if(d+1>this._source.maxzoom){const Pe=ae.children(this._source.maxzoom)[0],qe=this.getTile(Pe);if(qe&&qe.hasData()){E[Pe.key]=Pe;continue}}else{const Pe=ae.children(this._source.maxzoom);if(E[Pe[0].key]&&E[Pe[1].key]&&E[Pe[2].key]&&E[Pe[3].key])continue}let Ae=be.wasRequested();for(let Pe=ae.overscaledZ-1;Pe>=F;--Pe){const qe=ae.scaledTo(Pe);if(L[qe.key])break;if(L[qe.key]=!0,be=this.getTile(qe),!be&&Ae&&(be=this._addTile(qe)),be){const Ze=be.hasData();if((Ze||!(!((x=this.map)===null||x===void 0)&&x.cancelPendingTileRequestsWhileZooming)||Ae)&&(E[qe.key]=qe),Ae=be.wasRequested(),Ze)break}}}return E}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const d=[];let x,E=this._tiles[s].tileID;for(;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){x=this._loadedParentTiles[E.key];break}d.push(E.key);const L=E.scaledTo(E.overscaledZ-1);if(x=this._getLoadedTile(L),x)break;E=L}for(const L of d)this._loadedParentTiles[L]=x}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const s in this._tiles){const d=this._tiles[s].tileID,x=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=x}}_addTile(s){let d=this._tiles[s.key];if(d)return d;d=this._cache.getAndRemove(s),d&&(this._setTileReloadTimer(s.key,d),d.tileID=s,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,d)));const x=d;return d||(d=new pn(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(d,s.key,d.state)),d.uses++,this._tiles[s.key]=d,x||this._source.fire(new a.l("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(s,d){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const x=d.getExpiryTimeout();x&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},x))}_removeTile(s){const d=this._tiles[s];d&&(d.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(s){const d=s.sourceDataType;s.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&d==="content"&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,d,x){const E=[],L=this.transform;if(!L)return E;const F=x?L.getCameraQueryGeometry(s):s,X=s.map(Ze=>L.screenPointToMercatorCoordinate(Ze,this.terrain)),Q=F.map(Ze=>L.screenPointToMercatorCoordinate(Ze,this.terrain)),ae=this.getIds();let be=1/0,Ae=1/0,Pe=-1/0,qe=-1/0;for(const Ze of Q)be=Math.min(be,Ze.x),Ae=Math.min(Ae,Ze.y),Pe=Math.max(Pe,Ze.x),qe=Math.max(qe,Ze.y);for(let Ze=0;Ze<ae.length;Ze++){const dt=this._tiles[ae[Ze]];if(dt.holdingForFade())continue;const ft=dt.tileID,pt=Math.pow(2,L.zoom-dt.tileID.overscaledZ),Tt=d*dt.queryPadding*a.Z/dt.tileSize/pt,Nt=[ft.getTilePoint(new a.$(be,Ae)),ft.getTilePoint(new a.$(Pe,qe))];if(Nt[0].x-Tt<a.Z&&Nt[0].y-Tt<a.Z&&Nt[1].x+Tt>=0&&Nt[1].y+Tt>=0){const kt=X.map(Wt=>ft.getTilePoint(Wt)),Bt=Q.map(Wt=>ft.getTilePoint(Wt));E.push({tile:dt,tileID:ft,queryGeometry:kt,cameraQueryGeometry:Bt,scale:pt})}}return E}getVisibleCoordinates(s){const d=this.getRenderableIds(s).map(x=>this._tiles[x].tileID);return this.transform&&this.transform.populateCache(d),d}hasTransition(){if(this._source.hasTransition())return!0;if(We(this._source.type)){const s=w.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=s)return!0}return!1}setFeatureState(s,d,x){this._state.updateState(s=s||"_geojsonTileLayer",d,x)}removeFeatureState(s,d,x){this._state.removeFeatureState(s=s||"_geojsonTileLayer",d,x)}getFeatureState(s,d){return this._state.getState(s=s||"_geojsonTileLayer",d)}setDependencies(s,d,x){const E=this._tiles[s];E&&E.setDependencies(d,x)}reloadTilesForDependencies(s,d){for(const x in this._tiles)this._tiles[x].hasDependency(s,d)&&this._reloadTile(x,"reloading");this._cache.filter(x=>!x.hasDependency(s,d))}}function ke(R,s){const d=Math.abs(2*R.wrap)-+(R.wrap<0),x=Math.abs(2*s.wrap)-+(s.wrap<0);return R.overscaledZ-s.overscaledZ||x-d||s.canonical.y-R.canonical.y||s.canonical.x-R.canonical.x}function We(R){return R==="raster"||R==="image"||R==="video"}ge.maxOverzooming=10,ge.maxUnderzooming=3;class Ce{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.ad(s,0,1);let d=1,x=this._distances[d];const E=s*this.paddedLength+this.padding;for(;x<E&&d<this._distances.length;)x=this._distances[++d];const L=d-1,F=this._distances[L],X=x-F,Q=X>0?(E-F)/X:0;return this.points[L].mult(1-Q).add(this.points[d].mult(Q))}}function Qe(R,s){let d=!0;return R==="always"||R!=="never"&&s!=="never"||(d=!1),d}class et{constructor(s,d,x){const E=this.boxCells=[],L=this.circleCells=[];this.xCellCount=Math.ceil(s/x),this.yCellCount=Math.ceil(d/x);for(let F=0;F<this.xCellCount*this.yCellCount;F++)E.push([]),L.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,x,E,L){this._forEachCell(d,x,E,L,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(x),this.bboxes.push(E),this.bboxes.push(L)}insertCircle(s,d,x,E){this._forEachCell(d-E,x-E,d+E,x+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(x),this.circles.push(E)}_insertBoxCell(s,d,x,E,L,F){this.boxCells[L].push(F)}_insertCircleCell(s,d,x,E,L,F){this.circleCells[L].push(F)}_query(s,d,x,E,L,F,X){if(x<0||s>this.width||E<0||d>this.height)return[];const Q=[];if(s<=0&&d<=0&&this.width<=x&&this.height<=E){if(L)return[{key:null,x1:s,y1:d,x2:x,y2:E}];for(let ae=0;ae<this.boxKeys.length;ae++)Q.push({key:this.boxKeys[ae],x1:this.bboxes[4*ae],y1:this.bboxes[4*ae+1],x2:this.bboxes[4*ae+2],y2:this.bboxes[4*ae+3]});for(let ae=0;ae<this.circleKeys.length;ae++){const be=this.circles[3*ae],Ae=this.circles[3*ae+1],Pe=this.circles[3*ae+2];Q.push({key:this.circleKeys[ae],x1:be-Pe,y1:Ae-Pe,x2:be+Pe,y2:Ae+Pe})}}else this._forEachCell(s,d,x,E,this._queryCell,Q,{hitTest:L,overlapMode:F,seenUids:{box:{},circle:{}}},X);return Q}query(s,d,x,E){return this._query(s,d,x,E,!1,null)}hitTest(s,d,x,E,L,F){return this._query(s,d,x,E,!0,L,F).length>0}hitTestCircle(s,d,x,E,L){const F=s-x,X=s+x,Q=d-x,ae=d+x;if(X<0||F>this.width||ae<0||Q>this.height)return!1;const be=[];return this._forEachCell(F,Q,X,ae,this._queryCellCircle,be,{hitTest:!0,overlapMode:E,circle:{x:s,y:d,radius:x},seenUids:{box:{},circle:{}}},L),be.length>0}_queryCell(s,d,x,E,L,F,X,Q){const{seenUids:ae,hitTest:be,overlapMode:Ae}=X,Pe=this.boxCells[L];if(Pe!==null){const Ze=this.bboxes;for(const dt of Pe)if(!ae.box[dt]){ae.box[dt]=!0;const ft=4*dt,pt=this.boxKeys[dt];if(s<=Ze[ft+2]&&d<=Ze[ft+3]&&x>=Ze[ft+0]&&E>=Ze[ft+1]&&(!Q||Q(pt))&&(!be||!Qe(Ae,pt.overlapMode))&&(F.push({key:pt,x1:Ze[ft],y1:Ze[ft+1],x2:Ze[ft+2],y2:Ze[ft+3]}),be))return!0}}const qe=this.circleCells[L];if(qe!==null){const Ze=this.circles;for(const dt of qe)if(!ae.circle[dt]){ae.circle[dt]=!0;const ft=3*dt,pt=this.circleKeys[dt];if(this._circleAndRectCollide(Ze[ft],Ze[ft+1],Ze[ft+2],s,d,x,E)&&(!Q||Q(pt))&&(!be||!Qe(Ae,pt.overlapMode))){const Tt=Ze[ft],Nt=Ze[ft+1],kt=Ze[ft+2];if(F.push({key:pt,x1:Tt-kt,y1:Nt-kt,x2:Tt+kt,y2:Nt+kt}),be)return!0}}}return!1}_queryCellCircle(s,d,x,E,L,F,X,Q){const{circle:ae,seenUids:be,overlapMode:Ae}=X,Pe=this.boxCells[L];if(Pe!==null){const Ze=this.bboxes;for(const dt of Pe)if(!be.box[dt]){be.box[dt]=!0;const ft=4*dt,pt=this.boxKeys[dt];if(this._circleAndRectCollide(ae.x,ae.y,ae.radius,Ze[ft+0],Ze[ft+1],Ze[ft+2],Ze[ft+3])&&(!Q||Q(pt))&&!Qe(Ae,pt.overlapMode))return F.push(!0),!0}}const qe=this.circleCells[L];if(qe!==null){const Ze=this.circles;for(const dt of qe)if(!be.circle[dt]){be.circle[dt]=!0;const ft=3*dt,pt=this.circleKeys[dt];if(this._circlesCollide(Ze[ft],Ze[ft+1],Ze[ft+2],ae.x,ae.y,ae.radius)&&(!Q||Q(pt))&&!Qe(Ae,pt.overlapMode))return F.push(!0),!0}}}_forEachCell(s,d,x,E,L,F,X,Q){const ae=this._convertToXCellCoord(s),be=this._convertToYCellCoord(d),Ae=this._convertToXCellCoord(x),Pe=this._convertToYCellCoord(E);for(let qe=ae;qe<=Ae;qe++)for(let Ze=be;Ze<=Pe;Ze++)if(L.call(this,s,d,x,E,this.xCellCount*Ze+qe,F,X,Q))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,x,E,L,F){const X=E-s,Q=L-d,ae=x+F;return ae*ae>X*X+Q*Q}_circleAndRectCollide(s,d,x,E,L,F,X){const Q=(F-E)/2,ae=Math.abs(s-(E+Q));if(ae>Q+x)return!1;const be=(X-L)/2,Ae=Math.abs(d-(L+be));if(Ae>be+x)return!1;if(ae<=Q||Ae<=be)return!0;const Pe=ae-Q,qe=Ae-be;return Pe*Pe+qe*qe<=x*x}}function ut(R,s,d){const x=a.K();if(!R){const{vecSouth:Ae,vecEast:Pe}=xt(s),qe=f();qe[0]=Pe[0],qe[1]=Pe[1],qe[2]=Ae[0],qe[3]=Ae[1],E=qe,(be=(F=(L=qe)[0])*(ae=L[3])-(Q=L[2])*(X=L[1]))&&(E[0]=ae*(be=1/be),E[1]=-X*be,E[2]=-Q*be,E[3]=F*be),x[0]=qe[0],x[1]=qe[1],x[4]=qe[2],x[5]=qe[3]}var E,L,F,X,Q,ae,be;return a.M(x,x,[1/d,1/d,1]),x}function lt(R,s,d,x){if(R){const E=a.K();if(!s){const{vecSouth:L,vecEast:F}=xt(d);E[0]=F[0],E[1]=F[1],E[4]=L[0],E[5]=L[1]}return a.M(E,E,[x,x,1]),E}return d.pixelsToClipSpaceMatrix}function xt(R){const s=Math.cos(R.rollInRadians),d=Math.sin(R.rollInRadians),x=Math.cos(R.pitchInRadians),E=Math.cos(R.bearingInRadians),L=Math.sin(R.bearingInRadians),F=a.aj();F[0]=-E*x*d-L*s,F[1]=-L*x*d+E*s;const X=a.ak(F);X<1e-9?a.al(F):a.am(F,F,1/X);const Q=a.aj();Q[0]=E*x*s-L*d,Q[1]=L*x*s+E*d;const ae=a.ak(Q);return ae<1e-9?a.al(Q):a.am(Q,Q,1/ae),{vecEast:Q,vecSouth:F}}function Dt(R,s,d,x){let E;x?(E=[R,s,x(R,s),1],a.ao(E,E,d)):(E=[R,s,0,1],Vi(E,E,d));const L=E[3];return{point:new a.P(E[0]/L,E[1]/L),signedDistanceFromCamera:L,isOccluded:!1}}function zt(R,s){return .5+R/s*.5}function Tn(R,s){return R.x>=-s[0]&&R.x<=s[0]&&R.y>=-s[1]&&R.y<=s[1]}function qt(R,s,d,x,E,L,F,X,Q,ae,be,Ae,Pe){const qe=d?R.textSizeData:R.iconSizeData,Ze=a.af(qe,s.transform.zoom),dt=[256/s.width*2+1,256/s.height*2+1],ft=d?R.text.dynamicLayoutVertexArray:R.icon.dynamicLayoutVertexArray;ft.clear();const pt=R.lineVertexArray,Tt=d?R.text.placedSymbolArray:R.icon.placedSymbolArray,Nt=s.transform.width/s.transform.height;let kt=!1;for(let Bt=0;Bt<Tt.length;Bt++){const Wt=Tt.get(Bt);if(Wt.hidden||Wt.writingMode===a.ag.vertical&&!kt){ci(Wt.numGlyphs,ft);continue}kt=!1;const Gt=new a.P(Wt.anchorX,Wt.anchorY),xn={getElevation:Pe,pitchedLabelPlaneMatrix:x,lineVertexArray:pt,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:Gt,unwrappedTileID:Q,width:ae,height:be,translation:Ae},En=Hn(Wt.anchorX,Wt.anchorY,xn);if(!Tn(En.point,dt)){ci(Wt.numGlyphs,ft);continue}const zn=zt(s.transform.cameraToCenterDistance,En.signedDistanceFromCamera),Un=a.ah(qe,Ze,Wt),kn=L?Un*s.transform.getPitchedTextCorrection(Wt.anchorX,Wt.anchorY,Q)/zn:Un*zn,wr=we({projectionContext:xn,pitchedLabelPlaneMatrixInverse:E,symbol:Wt,fontSize:kn,flip:!1,keepUpright:F,glyphOffsetArray:R.glyphOffsetArray,dynamicLayoutVertexArray:ft,aspectRatio:Nt,rotateToLine:X});kt=wr.useVertical,(wr.notEnoughRoom||kt||wr.needsFlipping&&we({projectionContext:xn,pitchedLabelPlaneMatrixInverse:E,symbol:Wt,fontSize:kn,flip:!0,keepUpright:F,glyphOffsetArray:R.glyphOffsetArray,dynamicLayoutVertexArray:ft,aspectRatio:Nt,rotateToLine:X}).notEnoughRoom)&&ci(Wt.numGlyphs,ft)}d?R.text.dynamicLayoutVertexBuffer.updateData(ft):R.icon.dynamicLayoutVertexBuffer.updateData(ft)}function Zn(R,s,d,x,E,L,F,X){const Q=L.glyphStartIndex+L.numGlyphs,ae=L.lineStartIndex,be=L.lineStartIndex+L.lineLength,Ae=s.getoffsetX(L.glyphStartIndex),Pe=s.getoffsetX(Q-1),qe=lr(R*Ae,d,x,E,L.segment,ae,be,X,F);if(!qe)return null;const Ze=lr(R*Pe,d,x,E,L.segment,ae,be,X,F);return Ze?X.projectionCache.anyProjectionOccluded?null:{first:qe,last:Ze}:null}function Gn(R,s,d,x){return R===a.ag.horizontal&&Math.abs(d.y-s.y)>Math.abs(d.x-s.x)*x?{useVertical:!0}:(R===a.ag.vertical?s.y<d.y:s.x>d.x)?{needsFlipping:!0}:null}function we(R){const{projectionContext:s,pitchedLabelPlaneMatrixInverse:d,symbol:x,fontSize:E,flip:L,keepUpright:F,glyphOffsetArray:X,dynamicLayoutVertexArray:Q,aspectRatio:ae,rotateToLine:be}=R,Ae=E/24,Pe=x.lineOffsetX*Ae,qe=x.lineOffsetY*Ae;let Ze;if(x.numGlyphs>1){const dt=x.glyphStartIndex+x.numGlyphs,ft=x.lineStartIndex,pt=x.lineStartIndex+x.lineLength,Tt=Zn(Ae,X,Pe,qe,L,x,be,s);if(!Tt)return{notEnoughRoom:!0};const Nt=sn(Tt.first.point.x,Tt.first.point.y,s,d),kt=sn(Tt.last.point.x,Tt.last.point.y,s,d);if(F&&!L){const Bt=Gn(x.writingMode,Nt,kt,ae);if(Bt)return Bt}Ze=[Tt.first];for(let Bt=x.glyphStartIndex+1;Bt<dt-1;Bt++)Ze.push(lr(Ae*X.getoffsetX(Bt),Pe,qe,L,x.segment,ft,pt,s,be));Ze.push(Tt.last)}else{if(F&&!L){const ft=At(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,pt=x.lineStartIndex+x.segment+1,Tt=new a.P(s.lineVertexArray.getx(pt),s.lineVertexArray.gety(pt)),Nt=At(Tt.x,Tt.y,s),kt=Nt.signedDistanceFromCamera>0?Nt.point:Ne(s.tileAnchorPoint,Tt,ft,1,s),Bt=sn(ft.x,ft.y,s,d),Wt=sn(kt.x,kt.y,s,d),Gt=Gn(x.writingMode,Bt,Wt,ae);if(Gt)return Gt}const dt=lr(Ae*X.getoffsetX(x.glyphStartIndex),Pe,qe,L,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,s,be);if(!dt||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ze=[dt]}for(const dt of Ze)a.an(Q,dt.point,dt.angle);return{}}function Ne(R,s,d,x,E){const L=R.add(R.sub(s)._unit()),F=At(L.x,L.y,E).point,X=d.sub(F);return d.add(X._mult(x/X.mag()))}function je(R,s,d){const x=s.projectionCache;if(x.projections[R])return x.projections[R];const E=new a.P(s.lineVertexArray.getx(R),s.lineVertexArray.gety(R)),L=At(E.x,E.y,s);if(L.signedDistanceFromCamera>0)return x.projections[R]=L.point,x.anyProjectionOccluded=x.anyProjectionOccluded||L.isOccluded,L.point;const F=R-d.direction;return Ne(d.distanceFromAnchor===0?s.tileAnchorPoint:new a.P(s.lineVertexArray.getx(F),s.lineVertexArray.gety(F)),E,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,s)}function At(R,s,d){const x=R+d.translation[0],E=s+d.translation[1];let L;return d.pitchWithMap?(L=Dt(x,E,d.pitchedLabelPlaneMatrix,d.getElevation),L.isOccluded=!1):(L=d.transform.projectTileCoordinates(x,E,d.unwrappedTileID,d.getElevation),L.point.x=(.5*L.point.x+.5)*d.width,L.point.y=(.5*-L.point.y+.5)*d.height),L}function sn(R,s,d,x){if(d.pitchWithMap){const E=[R,s,0,1];return a.ao(E,E,x),d.transform.projectTileCoordinates(E[0]/E[3],E[1]/E[3],d.unwrappedTileID,d.getElevation).point}return{x:R/d.width*2-1,y:s/d.height*2-1}}function Hn(R,s,d){return d.transform.projectTileCoordinates(R,s,d.unwrappedTileID,d.getElevation)}function or(R,s,d){return R._unit()._perp()._mult(s*d)}function Er(R,s,d,x,E,L,F,X,Q){if(X.projectionCache.offsets[R])return X.projectionCache.offsets[R];const ae=d.add(s);if(R+Q.direction<x||R+Q.direction>=E)return X.projectionCache.offsets[R]=ae,ae;const be=je(R+Q.direction,X,Q),Ae=or(be.sub(d),F,Q.direction),Pe=d.add(Ae),qe=be.add(Ae);return X.projectionCache.offsets[R]=a.ap(L,ae,Pe,qe)||ae,X.projectionCache.offsets[R]}function lr(R,s,d,x,E,L,F,X,Q){const ae=x?R-s:R+s;let be=ae>0?1:-1,Ae=0;x&&(be*=-1,Ae=Math.PI),be<0&&(Ae+=Math.PI);let Pe,qe=be>0?L+E:L+E+1;X.projectionCache.cachedAnchorPoint?Pe=X.projectionCache.cachedAnchorPoint:(Pe=At(X.tileAnchorPoint.x,X.tileAnchorPoint.y,X).point,X.projectionCache.cachedAnchorPoint=Pe);let Ze,dt,ft=Pe,pt=Pe,Tt=0,Nt=0;const kt=Math.abs(ae),Bt=[];let Wt;for(;Tt+Nt<=kt;){if(qe+=be,qe<L||qe>=F)return null;Tt+=Nt,pt=ft,dt=Ze;const En={absOffsetX:kt,direction:be,distanceFromAnchor:Tt,previousVertex:pt};if(ft=je(qe,X,En),d===0)Bt.push(pt),Wt=ft.sub(pt);else{let zn;const Un=ft.sub(pt);zn=Un.mag()===0?or(je(qe+be,X,En).sub(ft),d,be):or(Un,d,be),dt||(dt=pt.add(zn)),Ze=Er(qe,zn,ft,L,F,dt,d,X,En),Bt.push(dt),Wt=Ze.sub(dt)}Nt=Wt.mag()}const Gt=Wt._mult((kt-Tt)/Nt)._add(dt||pt),xn=Ae+Math.atan2(ft.y-pt.y,ft.x-pt.x);return Bt.push(Gt),{point:Gt,angle:Q?xn:0,path:Bt}}const Ri=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ci(R,s){for(let d=0;d<R;d++){const x=s.length;s.resize(x+4),s.float32.set(Ri,3*x)}}function Vi(R,s,d){const x=s[0],E=s[1];return R[0]=d[0]*x+d[4]*E+d[12],R[1]=d[1]*x+d[5]*E+d[13],R[3]=d[3]*x+d[7]*E+d[15],R}const Vr=100;class Ca{constructor(s,d=new et(s.width+200,s.height+200,25),x=new et(s.width+200,s.height+200,25)){this.transform=s,this.grid=d,this.ignoredGrid=x,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Vr,this.screenBottomBoundary=s.height+Vr,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,d,x,E,L,F,X,Q,ae,be,Ae,Pe){const qe=this.projectAndGetPerspectiveRatio(s.anchorPointX+Q[0],s.anchorPointY+Q[1],L,be,Pe),Ze=x*qe.perspectiveRatio;let dt;if(F||X)dt=this._projectCollisionBox(s,Ze,E,L,F,X,Q,qe,be,Ae,Pe);else{const Wt=qe.x+(Ae?Ae.x*Ze:0),Gt=qe.y+(Ae?Ae.y*Ze:0);dt={allPointsOccluded:!1,box:[Wt+s.x1*Ze,Gt+s.y1*Ze,Wt+s.x2*Ze,Gt+s.y2*Ze]}}const[ft,pt,Tt,Nt]=dt.box,kt=F?dt.allPointsOccluded:qe.isOccluded;let Bt=kt;return Bt||(Bt=qe.perspectiveRatio<this.perspectiveRatioCutoff),Bt||(Bt=!this.isInsideGrid(ft,pt,Tt,Nt)),Bt||d!=="always"&&this.grid.hitTest(ft,pt,Tt,Nt,d,ae)?{box:[ft,pt,Tt,Nt],placeable:!1,offscreen:!1,occluded:kt}:{box:[ft,pt,Tt,Nt],placeable:!0,offscreen:this.isOffscreen(ft,pt,Tt,Nt),occluded:kt}}placeCollisionCircles(s,d,x,E,L,F,X,Q,ae,be,Ae,Pe,qe,Ze){const dt=[],ft=new a.P(d.anchorX,d.anchorY),pt=this.getPerspectiveRatio(ft.x,ft.y,F,Ze),Tt=(ae?L*this.transform.getPitchedTextCorrection(d.anchorX,d.anchorY,F)/pt:L*pt)/a.au,Nt={getElevation:Ze,pitchedLabelPlaneMatrix:X,lineVertexArray:x,pitchWithMap:ae,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ft,unwrappedTileID:F,width:this.transform.width,height:this.transform.height,translation:qe},kt=Zn(Tt,E,d.lineOffsetX*Tt,d.lineOffsetY*Tt,!1,d,!1,Nt);let Bt=!1,Wt=!1,Gt=!0;if(kt){const xn=.5*Ae*pt+Pe,En=new a.P(-100,-100),zn=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Un=new Ce,kn=kt.first,wr=kt.last;let dr=[];for(let Fr=kn.path.length-1;Fr>=1;Fr--)dr.push(kn.path[Fr]);for(let Fr=1;Fr<wr.path.length;Fr++)dr.push(wr.path[Fr]);const Kn=2.5*xn;if(ae){const Fr=this.projectPathToScreenSpace(dr,Nt);dr=Fr.some(fa=>fa.signedDistanceFromCamera<=0)?[]:Fr.map(fa=>fa.point)}let Nr=[];if(dr.length>0){const Fr=dr[0].clone(),fa=dr[0].clone();for(let Za=1;Za<dr.length;Za++)Fr.x=Math.min(Fr.x,dr[Za].x),Fr.y=Math.min(Fr.y,dr[Za].y),fa.x=Math.max(fa.x,dr[Za].x),fa.y=Math.max(fa.y,dr[Za].y);Nr=Fr.x>=En.x&&fa.x<=zn.x&&Fr.y>=En.y&&fa.y<=zn.y?[dr]:fa.x<En.x||Fr.x>zn.x||fa.y<En.y||Fr.y>zn.y?[]:a.aq([dr],En.x,En.y,zn.x,zn.y)}for(const Fr of Nr){Un.reset(Fr,.25*xn);let fa=0;fa=Un.length<=.5*xn?1:Math.ceil(Un.paddedLength/Kn)+1;for(let Za=0;Za<fa;Za++){const za=Za/Math.max(fa-1,1),Ua=Un.lerp(za),Ea=Ua.x+Vr,oa=Ua.y+Vr;dt.push(Ea,oa,xn,0);const Ia=Ea-xn,ps=oa-xn,Ya=Ea+xn,ho=oa+xn;if(Gt=Gt&&this.isOffscreen(Ia,ps,Ya,ho),Wt=Wt||this.isInsideGrid(Ia,ps,Ya,ho),s!=="always"&&this.grid.hitTestCircle(Ea,oa,xn,s,be)&&(Bt=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:Bt}}}}return{circles:!Q&&Bt||!Wt||pt<this.perspectiveRatioCutoff?[]:dt,offscreen:Gt,collisionDetected:Bt}}projectPathToScreenSpace(s,d){const x=function(E,L){const F=a.K();return a.ai(F,L.pitchedLabelPlaneMatrix),E.map(X=>{const Q=Dt(X.x,X.y,F,L.getElevation),ae=L.transform.projectTileCoordinates(Q.point.x,Q.point.y,L.unwrappedTileID,L.getElevation);return ae.point.x=(.5*ae.point.x+.5)*L.width,ae.point.y=(.5*-ae.point.y+.5)*L.height,ae})}(s,d);return function(E){let L=0,F=0,X=0,Q=0;for(let ae=0;ae<E.length;ae++)E[ae].isOccluded?(X=ae+1,Q=0):(Q++,Q>F&&(F=Q,L=X));return E.slice(L,L+F)}(x)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let x=1/0,E=1/0,L=-1/0,F=-1/0;for(const be of s){const Ae=new a.P(be.x+Vr,be.y+Vr);x=Math.min(x,Ae.x),E=Math.min(E,Ae.y),L=Math.max(L,Ae.x),F=Math.max(F,Ae.y),d.push(Ae)}const X=this.grid.query(x,E,L,F).concat(this.ignoredGrid.query(x,E,L,F)),Q={},ae={};for(const be of X){const Ae=be.key;if(Q[Ae.bucketInstanceId]===void 0&&(Q[Ae.bucketInstanceId]={}),Q[Ae.bucketInstanceId][Ae.featureIndex])continue;const Pe=[new a.P(be.x1,be.y1),new a.P(be.x2,be.y1),new a.P(be.x2,be.y2),new a.P(be.x1,be.y2)];a.ar(d,Pe)&&(Q[Ae.bucketInstanceId][Ae.featureIndex]=!0,ae[Ae.bucketInstanceId]===void 0&&(ae[Ae.bucketInstanceId]=[]),ae[Ae.bucketInstanceId].push(Ae.featureIndex))}return ae}insertCollisionBox(s,d,x,E,L,F){(x?this.ignoredGrid:this.grid).insert({bucketInstanceId:E,featureIndex:L,collisionGroupID:F,overlapMode:d},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,x,E,L,F){const X=x?this.ignoredGrid:this.grid,Q={bucketInstanceId:E,featureIndex:L,collisionGroupID:F,overlapMode:d};for(let ae=0;ae<s.length;ae+=4)X.insertCircle(Q,s[ae],s[ae+1],s[ae+2])}projectAndGetPerspectiveRatio(s,d,x,E,L){if(L){let F;E?(F=[s,d,E(s,d),1],a.ao(F,F,L)):(F=[s,d,0,1],Vi(F,F,L));const X=F[3];return{x:(F[0]/X+1)/2*this.transform.width+Vr,y:(-F[1]/X+1)/2*this.transform.height+Vr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/X*.5,isOccluded:!1,signedDistanceFromCamera:X}}{const F=this.transform.projectTileCoordinates(s,d,x,E);return{x:(F.point.x+1)/2*this.transform.width+Vr,y:(1-F.point.y)/2*this.transform.height+Vr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/F.signedDistanceFromCamera*.5,isOccluded:F.isOccluded,signedDistanceFromCamera:F.signedDistanceFromCamera}}}getPerspectiveRatio(s,d,x,E){const L=this.transform.projectTileCoordinates(s,d,x,E);return .5+this.transform.cameraToCenterDistance/L.signedDistanceFromCamera*.5}isOffscreen(s,d,x,E){return x<Vr||s>=this.screenRightBoundary||E<Vr||d>this.screenBottomBoundary}isInsideGrid(s,d,x,E){return x>=0&&s<this.gridRightBoundary&&E>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const s=a.as([]);return a.L(s,s,[-100,-100,0]),s}_projectCollisionBox(s,d,x,E,L,F,X,Q,ae,be,Ae){let Pe=1,qe=0,Ze=0,dt=1;const ft=s.anchorPointX+X[0],pt=s.anchorPointY+X[1];if(F&&!L){const dr=this.projectAndGetPerspectiveRatio(ft+1,pt,E,ae,Ae),Kn=dr.x-Q.x,Nr=Math.atan((dr.y-Q.y)/Kn)+(Kn<0?Math.PI:0),Fr=Math.sin(Nr),fa=Math.cos(Nr);Pe=fa,qe=Fr,Ze=-Fr,dt=fa}else if(!F&&L){const dr=xt(this.transform);Pe=dr.vecEast[0],qe=dr.vecEast[1],Ze=dr.vecSouth[0],dt=dr.vecSouth[1]}let Tt=Q.x,Nt=Q.y,kt=d;L&&(Tt=ft,Nt=pt,kt=Math.pow(2,-(this.transform.zoom-x.overscaledZ)),kt*=this.transform.getPitchedTextCorrection(ft,pt,E),be||(kt*=a.ad(.5+Q.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),be&&(Tt+=Pe*be.x*kt+Ze*be.y*kt,Nt+=qe*be.x*kt+dt*be.y*kt);const Bt=s.x1*kt,Wt=s.x2*kt,Gt=(Bt+Wt)/2,xn=s.y1*kt,En=s.y2*kt,zn=(xn+En)/2,Un=[{offsetX:Bt,offsetY:xn},{offsetX:Gt,offsetY:xn},{offsetX:Wt,offsetY:xn},{offsetX:Wt,offsetY:zn},{offsetX:Wt,offsetY:En},{offsetX:Gt,offsetY:En},{offsetX:Bt,offsetY:En},{offsetX:Bt,offsetY:zn}];let kn=[];for(const{offsetX:dr,offsetY:Kn}of Un)kn.push(new a.P(Tt+Pe*dr+Ze*Kn,Nt+qe*dr+dt*Kn));let wr=!1;if(L){const dr=kn.map(Kn=>this.projectAndGetPerspectiveRatio(Kn.x,Kn.y,E,ae,Ae));wr=dr.some(Kn=>!Kn.isOccluded),kn=dr.map(Kn=>new a.P(Kn.x,Kn.y))}else wr=!0;return{box:a.at(kn),allPointsOccluded:!wr}}}class ra{constructor(s,d,x,E){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):E&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class mi{constructor(s,d,x,E,L){this.text=new ra(s?s.text:null,d,x,L),this.icon=new ra(s?s.icon:null,d,E,L)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class no{constructor(s,d,x){this.text=s,this.icon=d,this.skipFade=x}}class nt{constructor(s,d,x,E,L){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=x,this.bucketIndex=E,this.tileID=L}}class an{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:x=>x.collisionGroupID===d}}return this.collisionGroups[s]}}function gn(R,s,d,x,E){const{horizontalAlign:L,verticalAlign:F}=a.aA(R);return new a.P(-(L-.5)*s+x[0]*E,-(F-.5)*d+x[1]*E)}class _n{constructor(s,d,x,E,L){this.transform=s.clone(),this.terrain=d,this.collisionIndex=new Ca(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=x,this.retainedQueryData={},this.collisionGroups=new an(E),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=L,L&&(L.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const d=this.terrain;return d?(x,E)=>d.getElevation(s,x,E):null}getBucketParts(s,d,x,E){const L=x.getBucket(d),F=x.latestFeatureIndex;if(!L||!F||d.id!==L.layerIds[0])return;const X=x.collisionBoxArray,Q=L.layers[0].layout,ae=L.layers[0].paint,be=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),Ae=x.tileSize/a.Z,Pe=x.tileID.toUnwrapped(),qe=Q.get("text-rotation-alignment")==="map",Ze=a.av(x,1,this.transform.zoom),dt=a.aw(this.collisionIndex.transform,x,ae.get("text-translate"),ae.get("text-translate-anchor")),ft=a.aw(this.collisionIndex.transform,x,ae.get("icon-translate"),ae.get("icon-translate-anchor")),pt=ut(qe,this.transform,Ze);this.retainedQueryData[L.bucketInstanceId]=new nt(L.bucketInstanceId,F,L.sourceLayerIndex,L.index,x.tileID);const Tt={bucket:L,layout:Q,translationText:dt,translationIcon:ft,unwrappedTileID:Pe,pitchedLabelPlaneMatrix:pt,scale:be,textPixelRatio:Ae,holdingForFade:x.holdingForFade(),collisionBoxArray:X,partiallyEvaluatedTextSize:a.af(L.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(L.sourceID)};if(E)for(const Nt of L.sortKeyRanges){const{sortKey:kt,symbolInstanceStart:Bt,symbolInstanceEnd:Wt}=Nt;s.push({sortKey:kt,symbolInstanceStart:Bt,symbolInstanceEnd:Wt,parameters:Tt})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:L.symbolInstances.length,parameters:Tt})}attemptAnchorPlacement(s,d,x,E,L,F,X,Q,ae,be,Ae,Pe,qe,Ze,dt,ft,pt,Tt,Nt,kt){const Bt=a.ax[s.textAnchor],Wt=[s.textOffset0,s.textOffset1],Gt=gn(Bt,x,E,Wt,L),xn=this.collisionIndex.placeCollisionBox(d,Pe,Q,ae,be,X,F,ft,Ae.predicate,Nt,Gt,kt);if((!Tt||this.collisionIndex.placeCollisionBox(Tt,Pe,Q,ae,be,X,F,pt,Ae.predicate,Nt,Gt,kt).placeable)&&xn.placeable){let En;if(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID].text&&(En=this.prevPlacement.variableOffsets[qe.crossTileID].anchor),qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[qe.crossTileID]={textOffset:Wt,width:x,height:E,anchor:Bt,textBoxScale:L,prevAnchor:En},this.markUsedJustification(Ze,Bt,qe,dt),Ze.allowVerticalPlacement&&(this.markUsedOrientation(Ze,dt,qe),this.placedOrientations[qe.crossTileID]=dt),{shift:Gt,placedGlyphBoxes:xn}}}placeLayerBucketPart(s,d,x){const{bucket:E,layout:L,translationText:F,translationIcon:X,unwrappedTileID:Q,pitchedLabelPlaneMatrix:ae,textPixelRatio:be,holdingForFade:Ae,collisionBoxArray:Pe,partiallyEvaluatedTextSize:qe,collisionGroup:Ze}=s.parameters,dt=L.get("text-optional"),ft=L.get("icon-optional"),pt=a.ay(L,"text-overlap","text-allow-overlap"),Tt=pt==="always",Nt=a.ay(L,"icon-overlap","icon-allow-overlap"),kt=Nt==="always",Bt=L.get("text-rotation-alignment")==="map",Wt=L.get("text-pitch-alignment")==="map",Gt=L.get("icon-text-fit")!=="none",xn=L.get("symbol-z-order")==="viewport-y",En=Tt&&(kt||!E.hasIconData()||ft),zn=kt&&(Tt||!E.hasTextData()||dt);!E.collisionArrays&&Pe&&E.deserializeCollisionBoxes(Pe);const Un=this.retainedQueryData[E.bucketInstanceId].tileID,kn=this._getTerrainElevationFunc(Un),wr=this.transform.getFastPathSimpleProjectionMatrix(Un),dr=(Kn,Nr,Fr)=>{var fa,Za;if(d[Kn.crossTileID])return;if(Ae)return void(this.placements[Kn.crossTileID]=new no(!1,!1,!1));let za=!1,Ua=!1,Ea=!0,oa=null,Ia={box:null,placeable:!1,offscreen:null,occluded:!1},ps={placeable:!1},Ya=null,ho=null,Ka=null,hl=0,Ql=0,cs=0;Nr.textFeatureIndex?hl=Nr.textFeatureIndex:Kn.useRuntimeCollisionCircles&&(hl=Kn.featureIndex),Nr.verticalTextFeatureIndex&&(Ql=Nr.verticalTextFeatureIndex);const hs=Nr.textBox;if(hs){const tu=io=>{let Ja=a.ag.horizontal;if(E.allowVerticalPlacement&&!io&&this.prevPlacement){const Is=this.prevPlacement.placedOrientations[Kn.crossTileID];Is&&(this.placedOrientations[Kn.crossTileID]=Is,Ja=Is,this.markUsedOrientation(E,Ja,Kn))}return Ja},tc=(io,Ja)=>{if(E.allowVerticalPlacement&&Kn.numVerticalGlyphVertices>0&&Nr.verticalTextBox){for(const Is of E.writingModes)if(Is===a.ag.vertical?(Ia=Ja(),ps=Ia):Ia=io(),Ia&&Ia.placeable)break}else Ia=io()},nu=Kn.textAnchorOffsetStartIndex,Ol=Kn.textAnchorOffsetEndIndex;if(Ol===nu){const io=(Ja,Is)=>{const Os=this.collisionIndex.placeCollisionBox(Ja,pt,be,Un,Q,Wt,Bt,F,Ze.predicate,kn,void 0,wr);return Os&&Os.placeable&&(this.markUsedOrientation(E,Is,Kn),this.placedOrientations[Kn.crossTileID]=Is),Os};tc(()=>io(hs,a.ag.horizontal),()=>{const Ja=Nr.verticalTextBox;return E.allowVerticalPlacement&&Kn.numVerticalGlyphVertices>0&&Ja?io(Ja,a.ag.vertical):{box:null,offscreen:null}}),tu(Ia&&Ia.placeable)}else{let io=a.ax[(Za=(fa=this.prevPlacement)===null||fa===void 0?void 0:fa.variableOffsets[Kn.crossTileID])===null||Za===void 0?void 0:Za.anchor];const Ja=(Os,If,Q0)=>{const Zs=Os.x2-Os.x1,Ys=Os.y2-Os.y1,_g=Kn.textBoxScale,ef=Gt&&Nt==="never"?If:null;let ju=null,hm=pt==="never"?1:2,bg="never";io&&hm++;for(let tf=0;tf<hm;tf++){for(let Ed=nu;Ed<Ol;Ed++){const xg=E.textAnchorOffsets.get(Ed);if(io&&xg.textAnchor!==io)continue;const gp=this.attemptAnchorPlacement(xg,Os,Zs,Ys,_g,Bt,Wt,be,Un,Q,Ze,bg,Kn,E,Q0,F,X,ef,kn);if(gp&&(ju=gp.placedGlyphBoxes,ju&&ju.placeable))return za=!0,oa=gp.shift,ju}io?io=null:bg=pt}return x&&!ju&&(ju={box:this.collisionIndex.placeCollisionBox(hs,"always",be,Un,Q,Wt,Bt,F,Ze.predicate,kn,void 0,wr).box,offscreen:!1,placeable:!1,occluded:!1}),ju};tc(()=>Ja(hs,Nr.iconBox,a.ag.horizontal),()=>{const Os=Nr.verticalTextBox;return E.allowVerticalPlacement&&(!Ia||!Ia.placeable)&&Kn.numVerticalGlyphVertices>0&&Os?Ja(Os,Nr.verticalIconBox,a.ag.vertical):{box:null,occluded:!0,offscreen:null}}),Ia&&(za=Ia.placeable,Ea=Ia.offscreen);const Is=tu(Ia&&Ia.placeable);if(!za&&this.prevPlacement){const Os=this.prevPlacement.variableOffsets[Kn.crossTileID];Os&&(this.variableOffsets[Kn.crossTileID]=Os,this.markUsedJustification(E,Os.anchor,Kn,Is))}}}if(Ya=Ia,za=Ya&&Ya.placeable,Ea=Ya&&Ya.offscreen,Kn.useRuntimeCollisionCircles){const tu=E.text.placedSymbolArray.get(Kn.centerJustifiedTextSymbolIndex),tc=a.ah(E.textSizeData,qe,tu),nu=L.get("text-padding");ho=this.collisionIndex.placeCollisionCircles(pt,tu,E.lineVertexArray,E.glyphOffsetArray,tc,Q,ae,x,Wt,Ze.predicate,Kn.collisionCircleDiameter,nu,F,kn),ho.circles.length&&ho.collisionDetected&&!x&&a.w("Collisions detected, but collision boxes are not shown"),za=Tt||ho.circles.length>0&&!ho.collisionDetected,Ea=Ea&&ho.offscreen}if(Nr.iconFeatureIndex&&(cs=Nr.iconFeatureIndex),Nr.iconBox){const tu=tc=>this.collisionIndex.placeCollisionBox(tc,Nt,be,Un,Q,Wt,Bt,X,Ze.predicate,kn,Gt&&oa?oa:void 0,wr);ps&&ps.placeable&&Nr.verticalIconBox?(Ka=tu(Nr.verticalIconBox),Ua=Ka.placeable):(Ka=tu(Nr.iconBox),Ua=Ka.placeable),Ea=Ea&&Ka.offscreen}const Il=dt||Kn.numHorizontalGlyphVertices===0&&Kn.numVerticalGlyphVertices===0,eu=ft||Kn.numIconVertices===0;Il||eu?eu?Il||(Ua=Ua&&za):za=Ua&&za:Ua=za=Ua&&za;const Uu=Ua&&Ka.placeable;if(za&&Ya.placeable&&this.collisionIndex.insertCollisionBox(Ya.box,pt,L.get("text-ignore-placement"),E.bucketInstanceId,ps&&ps.placeable&&Ql?Ql:hl,Ze.ID),Uu&&this.collisionIndex.insertCollisionBox(Ka.box,Nt,L.get("icon-ignore-placement"),E.bucketInstanceId,cs,Ze.ID),ho&&za&&this.collisionIndex.insertCollisionCircles(ho.circles,pt,L.get("text-ignore-placement"),E.bucketInstanceId,hl,Ze.ID),x&&this.storeCollisionData(E.bucketInstanceId,Fr,Nr,Ya,Ka,ho),Kn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(E.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Kn.crossTileID]=new no((za||En)&&!(Ya!=null&&Ya.occluded),(Ua||zn)&&!(Ka!=null&&Ka.occluded),Ea||E.justReloaded),d[Kn.crossTileID]=!0};if(xn){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Kn=E.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Nr=Kn.length-1;Nr>=0;--Nr){const Fr=Kn[Nr];dr(E.symbolInstances.get(Fr),E.collisionArrays[Fr],Fr)}}else for(let Kn=s.symbolInstanceStart;Kn<s.symbolInstanceEnd;Kn++)dr(E.symbolInstances.get(Kn),E.collisionArrays[Kn],Kn);E.justReloaded=!1}storeCollisionData(s,d,x,E,L,F){if(x.textBox||x.iconBox){let X,Q;this.collisionBoxArrays.has(s)?X=this.collisionBoxArrays.get(s):(X=new Map,this.collisionBoxArrays.set(s,X)),X.has(d)?Q=X.get(d):(Q={text:null,icon:null},X.set(d,Q)),x.textBox&&(Q.text=E.box),x.iconBox&&(Q.icon=L.box)}if(F){let X=this.collisionCircleArrays[s];X===void 0&&(X=this.collisionCircleArrays[s]=[]);for(let Q=0;Q<F.circles.length;Q+=4)X.push(F.circles[Q+0]-Vr),X.push(F.circles[Q+1]-Vr),X.push(F.circles[Q+2]),X.push(F.collisionDetected?1:0)}}markUsedJustification(s,d,x,E){let L;L=E===a.ag.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[a.az(d)];const F=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];for(const X of F)X>=0&&(s.text.placedSymbolArray.get(X).crossTileID=L>=0&&X!==L?0:x.crossTileID)}markUsedOrientation(s,d,x){const E=d===a.ag.horizontal||d===a.ag.horizontalOnly?d:0,L=d===a.ag.vertical?d:0,F=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];for(const X of F)s.text.placedSymbolArray.get(X).placedOrientation=E;x.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=L)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let x=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const E=d?d.symbolFadeChange(s):1,L=d?d.opacities:{},F=d?d.variableOffsets:{},X=d?d.placedOrientations:{};for(const Q in this.placements){const ae=this.placements[Q],be=L[Q];be?(this.opacities[Q]=new mi(be,E,ae.text,ae.icon),x=x||ae.text!==be.text.placed||ae.icon!==be.icon.placed):(this.opacities[Q]=new mi(null,E,ae.text,ae.icon,ae.skipFade),x=x||ae.text||ae.icon)}for(const Q in L){const ae=L[Q];if(!this.opacities[Q]){const be=new mi(ae,E,!1,!1);be.isHidden()||(this.opacities[Q]=be,x=x||ae.text.placed||ae.icon.placed)}}for(const Q in F)this.variableOffsets[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.variableOffsets[Q]=F[Q]);for(const Q in X)this.placedOrientations[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.placedOrientations[Q]=X[Q]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");x?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){const x={};for(const E of d){const L=E.getBucket(s);L&&E.latestFeatureIndex&&s.id===L.layerIds[0]&&this.updateBucketOpacities(L,E.tileID,x,E.collisionBoxArray)}}updateBucketOpacities(s,d,x,E){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const L=s.layers[0],F=L.layout,X=new mi(null,0,!1,!1,!0),Q=F.get("text-allow-overlap"),ae=F.get("icon-allow-overlap"),be=L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ae=F.get("text-rotation-alignment")==="map",Pe=F.get("text-pitch-alignment")==="map",qe=F.get("icon-text-fit")!=="none",Ze=new mi(null,0,Q&&(ae||!s.hasIconData()||F.get("icon-optional")),ae&&(Q||!s.hasTextData()||F.get("text-optional")),!0);!s.collisionArrays&&E&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(E);const dt=(pt,Tt,Nt)=>{for(let kt=0;kt<Tt/4;kt++)pt.opacityVertexArray.emplaceBack(Nt);pt.hasVisibleVertices=pt.hasVisibleVertices||Nt!==vi},ft=this.collisionBoxArrays.get(s.bucketInstanceId);for(let pt=0;pt<s.symbolInstances.length;pt++){const Tt=s.symbolInstances.get(pt),{numHorizontalGlyphVertices:Nt,numVerticalGlyphVertices:kt,crossTileID:Bt}=Tt;let Wt=this.opacities[Bt];x[Bt]?Wt=X:Wt||(Wt=Ze,this.opacities[Bt]=Wt),x[Bt]=!0;const Gt=Tt.numIconVertices>0,xn=this.placedOrientations[Tt.crossTileID],En=xn===a.ag.vertical,zn=xn===a.ag.horizontal||xn===a.ag.horizontalOnly;if(Nt>0||kt>0){const kn=gi(Wt.text);dt(s.text,Nt,En?vi:kn),dt(s.text,kt,zn?vi:kn);const wr=Wt.text.isHidden();[Tt.rightJustifiedTextSymbolIndex,Tt.centerJustifiedTextSymbolIndex,Tt.leftJustifiedTextSymbolIndex].forEach(Nr=>{Nr>=0&&(s.text.placedSymbolArray.get(Nr).hidden=wr||En?1:0)}),Tt.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(Tt.verticalPlacedTextSymbolIndex).hidden=wr||zn?1:0);const dr=this.variableOffsets[Tt.crossTileID];dr&&this.markUsedJustification(s,dr.anchor,Tt,xn);const Kn=this.placedOrientations[Tt.crossTileID];Kn&&(this.markUsedJustification(s,"left",Tt,Kn),this.markUsedOrientation(s,Kn,Tt))}if(Gt){const kn=gi(Wt.icon),wr=!(qe&&Tt.verticalPlacedIconSymbolIndex&&En);Tt.placedIconSymbolIndex>=0&&(dt(s.icon,Tt.numIconVertices,wr?kn:vi),s.icon.placedSymbolArray.get(Tt.placedIconSymbolIndex).hidden=Wt.icon.isHidden()),Tt.verticalPlacedIconSymbolIndex>=0&&(dt(s.icon,Tt.numVerticalIconVertices,wr?vi:kn),s.icon.placedSymbolArray.get(Tt.verticalPlacedIconSymbolIndex).hidden=Wt.icon.isHidden())}const Un=ft&&ft.has(pt)?ft.get(pt):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const kn=s.collisionArrays[pt];if(kn){let wr=new a.P(0,0);if(kn.textBox||kn.verticalTextBox){let dr=!0;if(be){const Kn=this.variableOffsets[Bt];Kn?(wr=gn(Kn.anchor,Kn.width,Kn.height,Kn.textOffset,Kn.textBoxScale),Ae&&wr._rotate(Pe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):dr=!1}if(kn.textBox||kn.verticalTextBox){let Kn;kn.textBox&&(Kn=En),kn.verticalTextBox&&(Kn=zn),fn(s.textCollisionBox.collisionVertexArray,Wt.text.placed,!dr||Kn,Un.text,wr.x,wr.y)}}if(kn.iconBox||kn.verticalIconBox){const dr=!!(!zn&&kn.verticalIconBox);let Kn;kn.iconBox&&(Kn=dr),kn.verticalIconBox&&(Kn=!dr),fn(s.iconCollisionBox.collisionVertexArray,Wt.icon.placed,Kn,Un.icon,qe?wr.x:0,qe?wr.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){const x=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*x>s}setStale(){this.stale=!0}}function fn(R,s,d,x,E,L){x&&x.length!==0||(x=[0,0,0,0]);const F=x[0]-Vr,X=x[1]-Vr,Q=x[2]-Vr,ae=x[3]-Vr;R.emplaceBack(s?1:0,d?1:0,E||0,L||0,F,X),R.emplaceBack(s?1:0,d?1:0,E||0,L||0,Q,X),R.emplaceBack(s?1:0,d?1:0,E||0,L||0,Q,ae),R.emplaceBack(s?1:0,d?1:0,E||0,L||0,F,ae)}const cr=Math.pow(2,25),hr=Math.pow(2,24),Ar=Math.pow(2,17),Pr=Math.pow(2,16),ei=Math.pow(2,9),Xr=Math.pow(2,8),Hr=Math.pow(2,1);function gi(R){if(R.opacity===0&&!R.placed)return 0;if(R.opacity===1&&R.placed)return 4294967295;const s=R.placed?1:0,d=Math.floor(127*R.opacity);return d*cr+s*hr+d*Ar+s*Pr+d*ei+s*Xr+d*Hr+s}const vi=0;class yi{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,d,x,E,L){const F=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(F,E,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,L())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((X,Q)=>X.sortKey-Q.sortKey));this._currentPartIndex<F.length;)if(d.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,L())return!0;return!1}}class Wi{constructor(s,d,x,E,L,F,X,Q){this.placement=new _n(s,d,F,X,Q),this._currentPlacementIndex=x.length-1,this._forceFullPlacement=E,this._showCollisionBoxes=L,this._done=!1}isDone(){return this._done}continuePlacement(s,d,x){const E=w.now(),L=()=>!this._forceFullPlacement&&w.now()-E>2;for(;this._currentPlacementIndex>=0;){const F=d[s[this._currentPlacementIndex]],X=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=X)&&(!F.maxzoom||F.maxzoom>X)){if(this._inProgressLayer||(this._inProgressLayer=new yi(F)),this._inProgressLayer.continuePlacement(x[F.source],this.placement,this._showCollisionBoxes,F,L))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const ii=512/a.Z/2;class Zr{constructor(s,d,x){this.tileID=s,this.bucketInstanceId=x,this._symbolsByKey={};const E=new Map;for(let L=0;L<d.length;L++){const F=d.get(L),X=F.key,Q=E.get(X);Q?Q.push(F):E.set(X,[F])}for(const[L,F]of E){const X={positions:F.map(Q=>({x:Math.floor(Q.anchorX*ii),y:Math.floor(Q.anchorY*ii)})),crossTileIDs:F.map(Q=>Q.crossTileID)};if(X.positions.length>128){const Q=new a.aB(X.positions.length,16,Uint16Array);for(const{x:ae,y:be}of X.positions)Q.add(ae,be);Q.finish(),delete X.positions,X.index=Q}this._symbolsByKey[L]=X}}getScaledCoordinates(s,d){const{x,y:E,z:L}=this.tileID.canonical,{x:F,y:X,z:Q}=d.canonical,ae=ii/Math.pow(2,Q-L),be=(X*a.Z+s.anchorY)*ae,Ae=E*a.Z*ii;return{x:Math.floor((F*a.Z+s.anchorX)*ae-x*a.Z*ii),y:Math.floor(be-Ae)}}findMatches(s,d,x){const E=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let L=0;L<s.length;L++){const F=s.get(L);if(F.crossTileID)continue;const X=this._symbolsByKey[F.key];if(!X)continue;const Q=this.getScaledCoordinates(F,d);if(X.index){const ae=X.index.range(Q.x-E,Q.y-E,Q.x+E,Q.y+E).sort();for(const be of ae){const Ae=X.crossTileIDs[be];if(!x[Ae]){x[Ae]=!0,F.crossTileID=Ae;break}}}else if(X.positions)for(let ae=0;ae<X.positions.length;ae++){const be=X.positions[ae],Ae=X.crossTileIDs[ae];if(Math.abs(be.x-Q.x)<=E&&Math.abs(be.y-Q.y)<=E&&!x[Ae]){x[Ae]=!0,F.crossTileID=Ae;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class $a{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Di{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const d=Math.round((s-this.lng)/360);if(d!==0)for(const x in this.indexes){const E=this.indexes[x],L={};for(const F in E){const X=E[F];X.tileID=X.tileID.unwrapTo(X.tileID.wrap+d),L[X.tileID.key]=X}this.indexes[x]=L}this.lng=s}addBucket(s,d,x){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let L=0;L<d.symbolInstances.length;L++)d.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const E=this.usedCrossTileIDs[s.overscaledZ];for(const L in this.indexes){const F=this.indexes[L];if(Number(L)>s.overscaledZ)for(const X in F){const Q=F[X];Q.tileID.isChildOf(s)&&Q.findMatches(d.symbolInstances,s,E)}else{const X=F[s.scaledTo(Number(L)).key];X&&X.findMatches(d.symbolInstances,s,E)}}for(let L=0;L<d.symbolInstances.length;L++){const F=d.symbolInstances.get(L);F.crossTileID||(F.crossTileID=x.generate(),E[F.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new Zr(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(const x of d.getCrossTileIDsLists())for(const E of x)delete this.usedCrossTileIDs[s][E]}removeStaleBuckets(s){let d=!1;for(const x in this.indexes){const E=this.indexes[x];for(const L in E)s[E[L].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,E[L]),delete E[L],d=!0)}return d}}class ja{constructor(){this.layerIndexes={},this.crossTileIDs=new $a,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,x){let E=this.layerIndexes[s.id];E===void 0&&(E=this.layerIndexes[s.id]=new Di);let L=!1;const F={};E.handleWrapJump(x);for(const X of d){const Q=X.getBucket(s);Q&&s.id===Q.layerIds[0]&&(Q.bucketInstanceId||(Q.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(X.tileID,Q,this.crossTileIDs)&&(L=!0),F[Q.bucketInstanceId]=!0)}return E.removeStaleBuckets(F)&&(L=!0),L}pruneUnusedLayers(s){const d={};s.forEach(x=>{d[x]=!0});for(const x in this.layerIndexes)d[x]||delete this.layerIndexes[x]}}var lo="void main() {fragColor=vec4(1.0);}";const Gi={prelude:ti(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ti("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ti("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ti(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ti(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ti(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ti(lo,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ti(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ti(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ti("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ti("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ti("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ti(lo,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ti(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ti(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ti(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ti(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ti(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ti(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ti(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ti(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ti(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ti(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ti(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ti(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ti(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ti(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ti(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ti(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ti("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ti("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ti("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ti("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ti(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ti("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ti(R,s){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x=s.match(/in ([\w]+) ([\w]+)/g),E=R.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),L=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=L?L.concat(E):E,X={};return{fragmentSource:R=R.replace(d,(Q,ae,be,Ae,Pe)=>(X[Pe]=!0,ae==="define"?`
#ifndef HAS_UNIFORM_u_${Pe}
in ${be} ${Ae} ${Pe};
#else
uniform ${be} ${Ae} u_${Pe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Pe}
    ${be} ${Ae} ${Pe} = u_${Pe};
#endif
`)),vertexSource:s=s.replace(d,(Q,ae,be,Ae,Pe)=>{const qe=Ae==="float"?"vec2":"vec4",Ze=Pe.match(/color/)?"color":qe;return X[Pe]?ae==="define"?`
#ifndef HAS_UNIFORM_u_${Pe}
uniform lowp float u_${Pe}_t;
in ${be} ${qe} a_${Pe};
out ${be} ${Ae} ${Pe};
#else
uniform ${be} ${Ae} u_${Pe};
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_${Pe}
    ${Pe} = a_${Pe};
#else
    ${be} ${Ae} ${Pe} = u_${Pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Pe}
    ${Pe} = unpack_mix_${Ze}(a_${Pe}, u_${Pe}_t);
#else
    ${be} ${Ae} ${Pe} = u_${Pe};
#endif
`:ae==="define"?`
#ifndef HAS_UNIFORM_u_${Pe}
uniform lowp float u_${Pe}_t;
in ${be} ${qe} a_${Pe};
#else
uniform ${be} ${Ae} u_${Pe};
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_${Pe}
    ${be} ${Ae} ${Pe} = a_${Pe};
#else
    ${be} ${Ae} ${Pe} = u_${Pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Pe}
    ${be} ${Ae} ${Pe} = unpack_mix_${Ze}(a_${Pe}, u_${Pe}_t);
#else
    ${be} ${Ae} ${Pe} = u_${Pe};
#endif
`}),staticAttributes:x,staticUniforms:F}}class Pi{constructor(s,d,x){this.vertexBuffer=s,this.indexBuffer=d,this.segments=x}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var xa=a.aC([{name:"a_pos",type:"Int16",components:2}]);const H="#define PROJECTION_MERCATOR",he="mercator";class Ge{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return he}get shaderDefine(){return H}get shaderPreludeCode(){return Gi.projectionMercator}get vertexShaderPreludeCode(){return Gi.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aD.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,d,x,E,L){if(this._cachedMesh)return this._cachedMesh;const F=new a.aE;F.emplaceBack(0,0),F.emplaceBack(a.Z,0),F.emplaceBack(0,a.Z),F.emplaceBack(a.Z,a.Z);const X=s.createVertexBuffer(F,xa.members),Q=a.aF.simpleSegment(0,0,4,2),ae=new a.aG;ae.emplaceBack(1,0,2),ae.emplaceBack(1,2,3);const be=s.createIndexBuffer(ae);return this._cachedMesh=new Pi(X,be,Q),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}function St(R,s){const d=a.ad(s.lat,-85.051129,a.aI);return new a.P(a.U(s.lng)*R,a.S(d)*R)}function Lt(R,s){return new a.$(s.x/R,s.y/R).toLngLat()}function Ut(R){return R.cameraToCenterDistance*Math.min(.85*Math.tan(a.ac(90-R.pitch)),Math.tan(a.ac(89.25-R.pitch)))}function Yt(R,s){const d=R.canonical,x=s/a.aH(d.z),E=d.x+Math.pow(2,d.z)*R.wrap,L=a.as(new Float64Array(16));return a.L(L,L,[E*x,d.y*x,0]),a.M(L,L,[x/a.Z,x/a.Z,1]),L}function sr(R,s,d,x,E){const L=a.$.fromLngLat(R,s),F=E*a.aJ(1,R.lat),X=F*Math.cos(a.ac(d)),Q=Math.sqrt(F*F-X*X),ae=Q*Math.sin(a.ac(-x)),be=Q*Math.cos(a.ac(-x));return new a.$(L.x+ae,L.y+be,L.z+X)}class Wn{constructor(s=0,d=0,x=0,E=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(x)||x<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=x,this.right=E}interpolate(s,d,x){return d.top!=null&&s.top!=null&&(this.top=a.B.number(s.top,d.top,x)),d.bottom!=null&&s.bottom!=null&&(this.bottom=a.B.number(s.bottom,d.bottom,x)),d.left!=null&&s.left!=null&&(this.left=a.B.number(s.left,d.left,x)),d.right!=null&&s.right!=null&&(this.right=a.B.number(s.right,d.right,x)),this}getCenter(s,d){const x=a.ad((this.left+s-this.right)/2,0,s),E=a.ad((this.top+d-this.bottom)/2,0,d);return new a.P(x,E)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Wn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function mr(R,s){if(!R.renderWorldCopies||R.lngRange)return;const d=s.lng-R.center.lng;s.lng+=d>180?-360:d<-180?360:0}function vr(R){return Math.max(0,Math.floor(R))}class xr{constructor(s,d,x,E,L,F){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=F===void 0||!!F,this._minZoom=d||0,this._maxZoom=x||22,this._minPitch=E??0,this._maxPitch=L??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=vr(this._zoom),this._scale=a.aH(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Wn,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,d,x){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=vr(this._zoom),this._scale=a.aH(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new Wn(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!x&&s.autoCalculateNearFarZ,d&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){const d=a.aK(s,-180,180)*Math.PI/180;var x,E,L,F,X,Q,ae,be,Ae;this._bearingInRadians!==d&&(this._unmodified=!1,this._bearingInRadians=d,this._calcMatrices(),this._rotationMatrix=f(),x=this._rotationMatrix,L=-this._bearingInRadians,F=(E=this._rotationMatrix)[0],X=E[1],Q=E[2],ae=E[3],be=Math.sin(L),Ae=Math.cos(L),x[0]=F*Ae+Q*be,x[1]=X*Ae+ae*be,x[2]=F*-be+Q*Ae,x[3]=X*-be+ae*Ae)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){const d=a.ad(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==d&&(this._unmodified=!1,this._pitchInRadians=d,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){const d=s/180*Math.PI;this._rollInRadians!==d&&(this._unmodified=!1,this._rollInRadians=d,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aL(this._fovInRadians)}setFov(s){s=a.ad(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=a.ac(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){const d=this.getConstrained(this._center,s).zoom;this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this._tileZoom=Math.max(0,Math.floor(d)),this._scale=a.aH(d),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,d){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=d,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,x){this._unmodified=!1,this._edgeInsets.interpolate(s,d,x),this._constrain(),this._calcMatrices()}resize(s,d,x=!0){this._width=s,this._height=d,x&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new He([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,a.aI])}getConstrained(s,d){return this._callbacks.getConstrained(s,d)}getCameraQueryGeometry(s,d){if(d.length===1)return[d[0],s];{let x=s.x,E=s.y,L=s.x,F=s.y;for(const X of d)x=Math.min(x,X.x),E=Math.min(E,X.y),L=Math.max(L,X.x),F=Math.max(F,X.y);return[new a.P(x,E),new a.P(L,E),new a.P(L,F),new a.P(x,F),new a.P(x,E)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:d,zoom:x}=this.getConstrained(this.center,this.zoom);this.setCenter(d),this.setZoom(x),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=a.as(new Float64Array(16));a.M(s,s,[this._width/2,-this._height/2,1]),a.L(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=a.as(new Float64Array(16)),a.M(s,s,[1,-1,1]),a.L(s,s,[-1,-1,0]),a.M(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,d,x,E){const L=x!==void 0?x:this.bearing,F=E=E!==void 0?E:this.pitch,X=a.$.fromLngLat(s,d),Q=-Math.cos(a.ac(F)),ae=Math.sin(a.ac(F)),be=ae*Math.sin(a.ac(L)),Ae=-ae*Math.cos(a.ac(L));let Pe=this.elevation;const qe=d-Pe;let Ze;Q*qe>=0||Math.abs(Q)<.1?(Ze=1e4,Pe=d+Ze*Q):Ze=-qe/Q;let dt,ft,pt=a.aM(1,X.y),Tt=0;do{if(Tt+=1,Tt>10)break;ft=Ze/pt,dt=new a.$(X.x+be*ft,X.y+Ae*ft),pt=1/dt.meterInMercatorCoordinateUnits()}while(Math.abs(Ze-ft*pt)>1e-12);return{center:dt.toLngLat(),elevation:Pe,zoom:a.aa(this.height/2/Math.tan(this.fovInRadians/2)/ft/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;const d=a.aJ(1,this.center.lat)*this.worldSize,x=this.cameraToCenterDistance/d,E=a.$.fromLngLat(this.center,this.elevation),L=sr(this.center,this.elevation,this.pitch,this.bearing,x);this._elevation=s;const F=this.calculateCenterFromCameraLngLatAlt(L.toLngLat(),a.aM(L.z,E.y),this.bearing,this.pitch);this._elevation=F.elevation,this._center=F.center,this.setZoom(F.zoom)}getCameraPoint(){const s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const s=a.aJ(1,this.center.lat)*this.worldSize;return sr(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];const d=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/d,s.canonical.y/d,1/d/a.Z,1/d/a.Z]}}class Lr{constructor(s,d){this.min=s,this.max=d,this.center=a.aN([],a.aO([],this.min,this.max),.5)}quadrant(s){const d=[s%2==0,s<2],x=a.aP(this.min),E=a.aP(this.max);for(let L=0;L<d.length;L++)x[L]=d[L]?this.min[L]:this.center[L],E[L]=d[L]?this.center[L]:this.max[L];return E[2]=this.max[2],new Lr(x,E)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let d=!0;for(let x=0;x<s.planes.length;x++){const E=this.intersectsPlane(s.planes[x]);if(E===0)return 0;E===1&&(d=!1)}return d?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let d=s[3],x=s[3];for(let E=0;E<3;E++)s[E]>0?(d+=s[E]*this.min[E],x+=s[E]*this.max[E]):(x+=s[E]*this.min[E],d+=s[E]*this.max[E]);return d>=0?2:x<0?0:1}}class Ti{distanceToTile2d(s,d,x,E){const L=E.distanceX([s,d]),F=E.distanceY([s,d]);return Math.hypot(L,F)}getWrap(s,d,x){return x}getTileAABB(s,d,x,E){var L,F;let X=x,Q=x;if(E.terrain){const be=new a.Y(s.z,d,s.z,s.x,s.y),Ae=E.terrain.getMinMaxElevation(be);X=(L=Ae.minElevation)!==null&&L!==void 0?L:x,Q=(F=Ae.maxElevation)!==null&&F!==void 0?F:x}const ae=1<<s.z;return new Lr([d+s.x/ae,s.y/ae,X],[d+(s.x+1)/ae,(s.y+1)/ae,Q])}allowVariableZoom(s,d){const x=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,E=a.ad(78.5-x/2,0,60);return!!d.terrain||s.pitch>E}allowWorldCopies(){return!0}recalculateCache(){}}class Yr{constructor(s,d,x){this.points=s,this.planes=d,this.aabb=x}static fromInvProjectionMatrix(s,d=1,x=0){const E=Math.pow(2,x),L=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ae=>{const be=1/(ae=a.ao([],ae,s))[3]/d*E;return a.aQ(ae,ae,[be,be,1/ae[3],be])}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ae=>{const be=a.aR([],L[ae[0]],L[ae[1]]),Ae=a.aR([],L[ae[2]],L[ae[1]]),Pe=a.aS([],a.aT([],be,Ae)),qe=-a.aU(Pe,L[ae[1]]);return Pe.concat(qe)}),X=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Q=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ae of L)for(let be=0;be<3;be++)X[be]=Math.min(X[be],ae[be]),Q[be]=Math.max(Q[be],ae[be]);return new Yr(L,F,new Lr(X,Q))}}class Cr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,x){return this._helper.interpolatePadding(s,d,x)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d,x=!0){this._helper.resize(s,d,x)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,d){}constructor(s,d,x,E,L){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new xr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(F,X)=>this.getConstrained(F,X)},s,d,x,E,L),this._coveringTilesDetailsProvider=new Ti}clone(){const s=new Cr;return s.apply(this),s}apply(s,d,x){this._helper.apply(s,d,x)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){const d=[new a.aV(0,s)];if(this._helper._renderWorldCopies){const x=this.screenPointToMercatorCoordinate(new a.P(0,0)),E=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),L=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),F=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),X=Math.floor(Math.min(x.x,E.x,L.x,F.x)),Q=Math.floor(Math.max(x.x,E.x,L.x,F.x)),ae=1;for(let be=X-ae;be<=Q+ae;be++)be!==0&&d.push(new a.aV(be,s))}return d}getCameraFrustum(){return Yr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){const d=this.screenPointToLocation(this.centerPoint,s),x=s?s.getElevationForLngLatZoom(d,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(x)}setLocationAtPoint(s,d){const x=a.aJ(this.elevation,this.center.lat),E=this.screenPointToMercatorCoordinateAtZ(d,x),L=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,x),F=a.$.fromLngLat(s),X=new a.$(F.x-(E.x-L.x),F.y-(E.y-L.y));this.setCenter(X==null?void 0:X.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,d){return d?this.coordinatePoint(a.$.fromLngLat(s),d.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.$.fromLngLat(s))}screenPointToLocation(s,d){var x;return(x=this.screenPointToMercatorCoordinate(s,d))===null||x===void 0?void 0:x.toLngLat()}screenPointToMercatorCoordinate(s,d){if(d){const x=d.pointCoordinate(s);if(x!=null)return x}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,d){const x=d||0,E=[s.x,s.y,0,1],L=[s.x,s.y,1,1];a.ao(E,E,this._pixelMatrixInverse),a.ao(L,L,this._pixelMatrixInverse);const F=E[3],X=L[3],Q=E[1]/F,ae=L[1]/X,be=E[2]/F,Ae=L[2]/X,Pe=be===Ae?0:(x-be)/(Ae-be);return new a.$(a.B.number(E[0]/F,L[0]/X,Pe)/this.worldSize,a.B.number(Q,ae,Pe)/this.worldSize,x)}coordinatePoint(s,d=0,x=this._pixelMatrix){const E=[s.x*this.worldSize,s.y*this.worldSize,d,1];return a.ao(E,E,x),new a.P(E[0]/E[3],E[1]/E[3])}getBounds(){const s=Math.max(0,this._helper._height/2-Ut(this));return new He().extend(this.screenPointToLocation(new a.P(0,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(s,d){return d?d.pointCoordinate(s)!=null:s.y>this.height/2-Ut(this)}calculatePosMatrix(s,d=!1,x){var E;const L=(E=s.key)!==null&&E!==void 0?E:a.aW(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),F=d?this._alignedPosMatrixCache:this._posMatrixCache;if(F.has(L)){const ae=F.get(L);return x?ae.f32:ae.f64}const X=Yt(s,this.worldSize);a.N(X,d?this._alignedProjMatrix:this._viewProjMatrix,X);const Q={f64:X,f32:new Float32Array(X)};return F.set(L,Q),x?Q.f32:Q.f64}calculateFogMatrix(s){const d=s.key,x=this._fogMatrixCacheF32;if(x.has(d))return x.get(d);const E=Yt(s,this.worldSize);return a.N(E,this._fogMatrix,E),x.set(d,new Float32Array(E)),x.get(d)}getConstrained(s,d){d=a.ad(+d,this.minZoom,this.maxZoom);const x={center:new a.Q(s.lng,s.lat),zoom:d};let E=this._helper._lngRange;this._helper._renderWorldCopies||E!==null||(E=[-179.9999999999,180-1e-10]);const L=this.tileSize*a.aH(x.zoom);let F=0,X=L,Q=0,ae=L,be=0,Ae=0;const{x:Pe,y:qe}=this.size;if(this._helper._latRange){const Nt=this._helper._latRange;F=a.S(Nt[1])*L,X=a.S(Nt[0])*L,X-F<qe&&(be=qe/(X-F))}E&&(Q=a.aK(a.U(E[0])*L,0,L),ae=a.aK(a.U(E[1])*L,0,L),ae<Q&&(ae+=L),ae-Q<Pe&&(Ae=Pe/(ae-Q)));const{x:Ze,y:dt}=St(L,s);let ft,pt;const Tt=Math.max(Ae||0,be||0);if(Tt){const Nt=new a.P(Ae?(ae+Q)/2:Ze,be?(X+F)/2:dt);return x.center=Lt(L,Nt).wrap(),x.zoom+=a.aa(Tt),x}if(this._helper._latRange){const Nt=qe/2;dt-Nt<F&&(pt=F+Nt),dt+Nt>X&&(pt=X-Nt)}if(E){const Nt=(Q+ae)/2;let kt=Ze;this._helper._renderWorldCopies&&(kt=a.aK(Ze,Nt-L/2,Nt+L/2));const Bt=Pe/2;kt-Bt<Q&&(ft=Q+Bt),kt+Bt>ae&&(ft=ae-Bt)}if(ft!==void 0||pt!==void 0){const Nt=new a.P(ft??Ze,pt??dt);x.center=Lt(L,Nt).wrap()}return x}calculateCenterFromCameraLngLatAlt(s,d,x,E){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,x,E)}_calculateNearFarZIfNeeded(s,d,x){if(!this._helper.autoCalculateNearFarZ)return;const E=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),L=s-E*this._helper._pixelPerMeter/Math.cos(d),F=E<0?L:s,X=Math.PI/2+this.pitchInRadians,Q=a.ac(this.fov)*(Math.abs(Math.cos(a.ac(this.roll)))*this.height+Math.abs(Math.sin(a.ac(this.roll)))*this.width)/this.height*(.5+x.y/this.height),ae=Math.sin(Q)*F/Math.sin(a.ad(Math.PI-X-Q,.01,Math.PI-.01)),be=Ut(this),Ae=Math.atan(be/this._helper.cameraToCenterDistance),Pe=a.ac(.75),qe=Ae>Pe?2*Ae*(.5+x.y/(2*be)):Pe,Ze=Math.sin(qe)*F/Math.sin(a.ad(Math.PI-X-qe,.01,Math.PI-.01)),dt=Math.min(ae,Ze);this._helper._farZ=1.01*(Math.cos(Math.PI/2-d)*dt+F),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const s=this.centerOffset,d=St(this.worldSize,this.center),x=d.x,E=d.y;this._helper._pixelPerMeter=a.aJ(1,this.center.lat)*this.worldSize;const L=a.ac(Math.min(this.pitch,89.25)),F=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(L));let X;this._calculateNearFarZIfNeeded(F,L,s),X=new Float64Array(16),a.aX(X,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.ai(this._invProjMatrix,X),X[8]=2*-s.x/this._helper._width,X[9]=2*s.y/this._helper._height,this._projectionMatrix=a.aY(X),a.M(X,X,[1,-1,1]),a.L(X,X,[0,0,-this._helper.cameraToCenterDistance]),a.aZ(X,X,-this.rollInRadians),a.a_(X,X,this.pitchInRadians),a.aZ(X,X,-this.bearingInRadians),a.L(X,X,[-x,-E,0]),this._mercatorMatrix=a.M([],X,[this.worldSize,this.worldSize,this.worldSize]),a.M(X,X,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,X),a.L(X,X,[0,0,-this.elevation]),this._viewProjMatrix=X,this._invViewProjMatrix=a.ai([],X);const Q=[0,0,-1,1];a.ao(Q,Q,this._invViewProjMatrix),this._cameraPosition=[Q[0]/Q[3],Q[1]/Q[3],Q[2]/Q[3]],this._fogMatrix=new Float64Array(16),a.aX(this._fogMatrix,this.fovInRadians,this.width/this.height,F,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,a.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.aZ(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.a_(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.aZ(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.L(this._fogMatrix,this._fogMatrix,[-x,-E,0]),a.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,X);const ae=this._helper._width%2/2,be=this._helper._height%2/2,Ae=Math.cos(this.bearingInRadians),Pe=Math.sin(-this.bearingInRadians),qe=x-Math.round(x)+Ae*ae+Pe*be,Ze=E-Math.round(E)+Ae*be+Pe*ae,dt=new Float64Array(X);if(a.L(dt,dt,[qe>.5?qe-1:qe,Ze>.5?Ze-1:Ze,0]),this._alignedProjMatrix=dt,X=a.ai(new Float64Array(16),this._pixelMatrix),!X)throw new Error("failed to invert matrix");this._pixelMatrixInverse=X,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const s=this.screenPointToMercatorCoordinate(new a.P(0,0)),d=[s.x*this.worldSize,s.y*this.worldSize,0,1];return a.ao(d,d,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const s=a.aJ(1,this.center.lat)*this.worldSize;return sr(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,d){const x=a.$.fromLngLat(s),E=[x.x*this.worldSize,x.y*this.worldSize,d,1];return a.ao(E,E,this._viewProjMatrix),E[2]/E[3]}getProjectionData(s){const{overscaledTileID:d,aligned:x,applyTerrainMatrix:E}=s,L=this._helper.getMercatorTileCoordinates(d),F=d?this.calculatePosMatrix(d,x,!0):null;let X;return X=d&&d.terrainRttPosMatrix32f&&E?d.terrainRttPosMatrix32f:F||a.a$(),{mainMatrix:X,tileMercatorCoords:L,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:X}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,d,x){return 1}transformLightDirection(s){return a.aP(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,d,x,E){const L=this.calculatePosMatrix(x);let F;E?(F=[s,d,E(s,d),1],a.ao(F,F,L)):(F=[s,d,0,1],Vi(F,F,L));const X=F[3];return{point:new a.P(F[0]/X,F[1]/X),signedDistanceFromCamera:X,isOccluded:!1}}populateCache(s){for(const d of s)this.calculatePosMatrix(d)}getMatrixForModel(s,d){const x=a.$.fromLngLat(s,d),E=x.meterInMercatorCoordinateUnits(),L=a.b0();return a.L(L,L,[x.x,x.y,x.z]),a.aZ(L,L,Math.PI),a.a_(L,L,Math.PI/2),a.M(L,L,[-E,E,E]),L}getProjectionDataForCustomLayer(s=!0){const d=new a.Y(0,0,0,0,0),x=this.getProjectionData({overscaledTileID:d,applyGlobeMatrix:s}),E=Yt(d,this.worldSize);a.N(E,this._viewProjMatrix,E),x.tileMercatorCoords=[0,0,1,1];const L=[a.Z,a.Z,this.worldSize/this._helper.pixelsPerMeter],F=a.b1();return a.M(F,E,L),x.fallbackMatrix=F,x.mainMatrix=F,x}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function $n(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Rr(R){if(R.useSlerp)if(R.k<1){const s=a.b2(R.startEulerAngles.roll,R.startEulerAngles.pitch,R.startEulerAngles.bearing),d=a.b2(R.endEulerAngles.roll,R.endEulerAngles.pitch,R.endEulerAngles.bearing),x=new Float64Array(4);a.b3(x,s,d,R.k);const E=a.b4(x);R.tr.setRoll(E.roll),R.tr.setPitch(E.pitch),R.tr.setBearing(E.bearing)}else R.tr.setRoll(R.endEulerAngles.roll),R.tr.setPitch(R.endEulerAngles.pitch),R.tr.setBearing(R.endEulerAngles.bearing);else R.tr.setRoll(a.B.number(R.startEulerAngles.roll,R.endEulerAngles.roll,R.k)),R.tr.setPitch(a.B.number(R.startEulerAngles.pitch,R.endEulerAngles.pitch,R.k)),R.tr.setBearing(a.B.number(R.startEulerAngles.bearing,R.endEulerAngles.bearing,R.k))}function Ni(R,s,d,x,E){const L=E.padding,F=St(E.worldSize,d.getNorthWest()),X=St(E.worldSize,d.getNorthEast()),Q=St(E.worldSize,d.getSouthEast()),ae=St(E.worldSize,d.getSouthWest()),be=a.ac(-x),Ae=F.rotate(be),Pe=X.rotate(be),qe=Q.rotate(be),Ze=ae.rotate(be),dt=new a.P(Math.max(Ae.x,Pe.x,Ze.x,qe.x),Math.max(Ae.y,Pe.y,Ze.y,qe.y)),ft=new a.P(Math.min(Ae.x,Pe.x,Ze.x,qe.x),Math.min(Ae.y,Pe.y,Ze.y,qe.y)),pt=dt.sub(ft),Tt=(E.width-(L.left+L.right+s.left+s.right))/pt.x,Nt=(E.height-(L.top+L.bottom+s.top+s.bottom))/pt.y;if(Nt<0||Tt<0)return void $n();const kt=Math.min(a.aa(E.scale*Math.min(Tt,Nt)),R.maxZoom),Bt=a.P.convert(R.offset),Wt=new a.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(a.ac(x)),Gt=Bt.add(Wt).mult(E.scale/a.aH(kt));return{center:Lt(E.worldSize,F.add(Q).div(2).sub(Gt)),zoom:kt,bearing:x}}class ta{get useGlobeControls(){return!1}handlePanInertia(s,d){return{easingOffset:s,easingCenter:d.center}}handleMapControlsRollPitchBearingZoom(s,d){s.bearingDelta&&d.setBearing(d.bearing+s.bearingDelta),s.pitchDelta&&d.setPitch(d.pitch+s.pitchDelta),s.rollDelta&&d.setRoll(d.roll+s.rollDelta),s.zoomDelta&&d.setZoom(d.zoom+s.zoomDelta)}handleMapControlsPan(s,d,x){s.around.distSqr(d.centerPoint)<.01||d.setLocationAtPoint(x,s.around)}cameraForBoxAndBearing(s,d,x,E,L){return Ni(s,d,x,E,L)}handleJumpToCenterZoom(s,d){s.zoom!==(d.zoom!==void 0?+d.zoom:s.zoom)&&s.setZoom(+d.zoom),d.center!==void 0&&s.setCenter(a.Q.convert(d.center))}handleEaseTo(s,d){const x=s.zoom,E=s.padding,L={roll:s.roll,pitch:s.pitch,bearing:s.bearing},F={roll:d.roll===void 0?s.roll:d.roll,pitch:d.pitch===void 0?s.pitch:d.pitch,bearing:d.bearing===void 0?s.bearing:d.bearing},X=d.zoom!==void 0,Q=!s.isPaddingEqual(d.padding);let ae=!1;const be=X?+d.zoom:s.zoom;let Ae=s.centerPoint.add(d.offsetAsPoint);const Pe=s.screenPointToLocation(Ae),{center:qe,zoom:Ze}=s.getConstrained(a.Q.convert(d.center||Pe),be??x);mr(s,qe);const dt=St(s.worldSize,Pe),ft=St(s.worldSize,qe).sub(dt),pt=a.aH(Ze-x);return ae=Ze!==x,{easeFunc:Tt=>{if(ae&&s.setZoom(a.B.number(x,Ze,Tt)),a.b5(L,F)||Rr({startEulerAngles:L,endEulerAngles:F,tr:s,k:Tt,useSlerp:L.roll!=F.roll}),Q&&(s.interpolatePadding(E,d.padding,Tt),Ae=s.centerPoint.add(d.offsetAsPoint)),d.around)s.setLocationAtPoint(d.around,d.aroundPoint);else{const Nt=a.aH(s.zoom-x),kt=Ze>x?Math.min(2,pt):Math.max(.5,pt),Bt=Math.pow(kt,1-Tt),Wt=Lt(s.worldSize,dt.add(ft.mult(Tt*Bt)).mult(Nt));s.setLocationAtPoint(s.renderWorldCopies?Wt.wrap():Wt,Ae)}},isZooming:ae,elevationCenter:qe}}handleFlyTo(s,d){const x=d.zoom!==void 0,E=s.zoom,L=s.getConstrained(a.Q.convert(d.center||d.locationAtOffset),x?+d.zoom:E),F=L.center,X=L.zoom;mr(s,F);const Q=St(s.worldSize,d.locationAtOffset),ae=St(s.worldSize,F).sub(Q),be=ae.mag(),Ae=a.aH(X-E);let Pe;if(d.minZoom!==void 0){const qe=Math.min(+d.minZoom,E,X),Ze=s.getConstrained(F,qe).zoom;Pe=a.aH(Ze-E)}return{easeFunc:(qe,Ze,dt,ft)=>{s.setZoom(qe===1?X:E+a.aa(Ze));const pt=qe===1?F:Lt(s.worldSize,Q.add(ae.mult(dt)).mult(Ze));s.setLocationAtPoint(s.renderWorldCopies?pt.wrap():pt,ft)},scaleOfZoom:Ae,targetCenter:F,scaleOfMinZoom:Pe,pixelPathLength:be}}}class di{constructor(s,d,x){this.blendFunction=s,this.blendColor=d,this.mask=x}}di.Replace=[1,0],di.disabled=new di(di.Replace,a.b6.transparent,[!1,!1,!1,!1]),di.unblended=new di(di.Replace,a.b6.transparent,[!0,!0,!0,!0]),di.alphaBlended=new di([1,771],a.b6.transparent,[!0,!0,!0,!0]);const js=2305;class _i{constructor(s,d,x){this.enable=s,this.mode=d,this.frontFace=x}}_i.disabled=new _i(!1,1029,js),_i.backCCW=new _i(!0,1029,js),_i.frontCCW=new _i(!0,1028,js);class Ir{constructor(s,d,x){this.func=s,this.mask=d,this.range=x}}Ir.ReadOnly=!1,Ir.ReadWrite=!0,Ir.disabled=new Ir(519,Ir.ReadOnly,[0,1]);const Gl=7680;class ji{constructor(s,d,x,E,L,F){this.test=s,this.ref=d,this.mask=x,this.fail=E,this.depthFail=L,this.pass=F}}ji.disabled=new ji({func:519,mask:0},0,0,Gl,Gl,Gl);const Po=new WeakMap;function vo(R){var s;if(Po.has(R))return Po.get(R);{const d=(s=R.getParameter(R.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Po.set(R,d),d}}class tl{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;const d=s.context,x=d.gl;this._texFormat=x.RGBA,this._texType=x.UNSIGNED_BYTE;const E=new a.aE;E.emplaceBack(-1,-1),E.emplaceBack(2,-1),E.emplaceBack(-1,2);const L=new a.aG;L.emplaceBack(0,1,2),this._fullscreenTriangle=new Pi(d.createVertexBuffer(E,xa.members),d.createIndexBuffer(L),a.aF.simpleSegment(0,0,E.length,L.length)),this._resultBuffer=new Uint8Array(4),d.activeTexture.set(x.TEXTURE1);const F=x.createTexture();x.bindTexture(x.TEXTURE_2D,F),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texImage2D(x.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=d.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(F),vo(x)&&(this._pbo=x.createBuffer(),x.bindBuffer(x.PIXEL_PACK_BUFFER,this._pbo),x.bufferData(x.PIXEL_PACK_BUFFER,4,x.STREAM_READ),x.bindBuffer(x.PIXEL_PACK_BUFFER,null))}destroy(){const s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,d){const x=this._updateCount;return this._readbackQueue?x>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():x>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,d),this._updateCount++,this._measuredError}_bindFramebuffer(){const s=this._cachedRenderContext.context,d=s.gl;s.activeTexture.set(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,d){const x=this._cachedRenderContext.context,E=x.gl;if(this._bindFramebuffer(),x.viewport.set([0,0,this._texWidth,this._texHeight]),x.clear({color:a.b6.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(x,E.TRIANGLES,Ir.disabled,ji.disabled,di.unblended,_i.disabled,((L,F)=>({u_input:L,u_output_expected:F}))(s,d),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&vo(E)){E.bindBuffer(E.PIXEL_PACK_BUFFER,this._pbo),E.readBuffer(E.COLOR_ATTACHMENT0),E.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),E.bindBuffer(E.PIXEL_PACK_BUFFER,null);const L=E.fenceSync(E.SYNC_GPU_COMMANDS_COMPLETE,0);E.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:L}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&vo(s)){const d=s.clientWaitSync(this._readbackQueue.sync,0,0);if(d===s.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(d===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=tl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let d=0;return d+=s[0]/256,d+=s[1]/65536,d+=s[2]/16777216,s[3]<127&&(d=-d),d/128}}const Ro=a.Z/128;function jo(R,s){const d=R.granularity!==void 0?Math.max(R.granularity,1):1,x=d+(R.generateBorders?2:0),E=d+(R.extendToNorthPole||R.generateBorders?1:0)+(R.extendToSouthPole||R.generateBorders?1:0),L=x+1,F=E+1,X=R.generateBorders?-1:0,Q=R.generateBorders||R.extendToNorthPole?-1:0,ae=d+(R.generateBorders?1:0),be=d+(R.generateBorders||R.extendToSouthPole?1:0),Ae=L*F,Pe=x*E*6,qe=L*F>65536;if(qe&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ze=qe||s==="32bit",dt=new Int16Array(2*Ae);let ft=0;for(let Nt=Q;Nt<=be;Nt++)for(let kt=X;kt<=ae;kt++){let Bt=kt/d*a.Z;kt===-1&&(Bt=-64),kt===d+1&&(Bt=a.Z+Ro);let Wt=Nt/d*a.Z;Nt===-1&&(Wt=R.extendToNorthPole?a.b8:-64),Nt===d+1&&(Wt=R.extendToSouthPole?a.b9:a.Z+Ro),dt[ft++]=Bt,dt[ft++]=Wt}const pt=Ze?new Uint32Array(Pe):new Uint16Array(Pe);let Tt=0;for(let Nt=0;Nt<E;Nt++)for(let kt=0;kt<x;kt++){const Bt=kt+1+Nt*L,Wt=kt+(Nt+1)*L,Gt=kt+1+(Nt+1)*L;pt[Tt++]=kt+Nt*L,pt[Tt++]=Wt,pt[Tt++]=Bt,pt[Tt++]=Bt,pt[Tt++]=Wt,pt[Tt++]=Gt}return{vertices:dt.buffer.slice(0),indices:pt.buffer.slice(0),uses32bitIndices:Ze}}const nl=new a.aD({fill:new a.ba(128,2),line:new a.ba(512,0),tile:new a.ba(128,32),stencil:new a.ba(128,1),circle:3});class Es{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Gi.projectionGlobe}get vertexShaderPreludeCode(){return Gi.projectionMercator.vertexSource}get subdivisionGranularity(){return nl}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new tl(s));const d=a.S(this._errorQueryLatitudeDegrees),x=2*Math.atan(Math.exp(Math.PI-d*Math.PI*2))-.5*Math.PI,E=this._errorMeasurement.updateErrorLoop(d,x),L=w.now();E!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=E,this._errorMeasurementLastChangeTime=L);const F=Math.min(Math.max((L-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bb(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bc(F))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,d,x,E,L){const F=(L==="stencil"?nl.stencil:nl.tile).getGranularityForZoomLevel(d.z);return this._getMesh(s,{granularity:F,generateBorders:x,extendToNorthPole:d.y===0&&E,extendToSouthPole:d.y===(1<<d.z)-1&&E})}_getMesh(s,d){const x=this._getMeshKey(d);if(x in this._tileMeshCache)return this._tileMeshCache[x];const E=function(L,F){const X=jo(F,"16bit"),Q=a.aE.deserialize({arrayBuffer:X.vertices,length:X.vertices.byteLength/2/2}),ae=a.aG.deserialize({arrayBuffer:X.indices,length:X.indices.byteLength/2/3});return new Pi(L.createVertexBuffer(Q,xa.members),L.createIndexBuffer(ae),a.aF.simpleSegment(0,0,Q.length,ae.length))}(s,d);return this._tileMeshCache[x]=E,E}recalculate(s){}hasTransition(){const s=w.now();let d=!1;return d=d||(s-this._errorMeasurementLastChangeTime)/1e3<.7,d=d||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,d}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}const Kh=new a.r({type:new a.D(a.v.projection.type)});class Zu extends a.E{constructor(s){super(),this._transitionable=new a.T(Kh),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.C(0)),this._mercatorProjection=new Ge,this._verticalPerspectiveProjection=new Es}get transitionState(){const s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof a.bd){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,d,x,E,L){return this.currentProjection.getMeshFromTileID(s,d,x,E,L)}setProjection(s){this._transitionable.setValue("type",(s==null?void 0:s.type)||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function hc(R){const s=Wa(R.worldSize,R.center.lat);return 2*Math.PI*s}function Ml(R,s,d,x,E){const L=1/(1<<E),F=s/a.Z*L+x*L,X=a.bf((R/a.Z*L+d*L)*Math.PI*2+Math.PI,2*Math.PI),Q=2*Math.atan(Math.exp(Math.PI-F*Math.PI*2))-.5*Math.PI,ae=Math.cos(Q),be=new Float64Array(3);return be[0]=Math.sin(X)*ae,be[1]=Math.sin(Q),be[2]=Math.cos(X)*ae,be}function Pa(R){return function(s,d){const x=Math.cos(d),E=new Float64Array(3);return E[0]=Math.sin(s)*x,E[1]=Math.sin(d),E[2]=Math.cos(s)*x,E}(R.lng*Math.PI/180,R.lat*Math.PI/180)}function Wa(R,s){return R/(2*Math.PI)/Math.cos(s*Math.PI/180)}function eh(R){const s=Math.asin(R[1])/Math.PI*180,d=Math.sqrt(R[0]*R[0]+R[2]*R[2]);if(d>1e-6){const x=R[0]/d,E=Math.acos(R[2]/d),L=(x>0?E:-E)/Math.PI*180;return new a.Q(a.aK(L,-180,180),s)}return new a.Q(0,s)}function Do(R){return Math.cos(R*Math.PI/180)}function ia(R,s){const d=Do(R),x=Do(s);return a.aa(x/d)}function hu(R,s){const d=R.rotate(s.bearingInRadians),x=s.zoom+ia(s.center.lat,0),E=a.bb(1/Do(s.center.lat),1/Do(Math.min(Math.abs(s.center.lat),60)),a.be(x,7,3,0,1)),L=360/hc({worldSize:s.worldSize,center:{lat:s.center.lat}});return new a.Q(s.center.lng-d.x*L*E,a.ad(s.center.lat+d.y*L,-85.051129,a.aI))}function fu(R){const s=.5*R,d=Math.sin(s),x=Math.cos(s);return Math.log(d+x)-Math.log(x-d)}function as(R,s,d,x){const E=R.lat+d*x;if(Math.abs(d)>1){const L=(Math.sign(R.lat+d)!==Math.sign(R.lat)?-Math.abs(R.lat):Math.abs(R.lat))*Math.PI/180,F=Math.abs(R.lat+d)*Math.PI/180,X=fu(L+x*(F-L)),Q=fu(L),ae=fu(F);return new a.Q(R.lng+s*((X-Q)/(ae-Q)),E)}return new a.Q(R.lng+s*x,E)}class Nc{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=s}recalculateCache(){if(!this._hadAnyChanges)return;const s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(s,d,x,E){const L=`${s.z}_${s.x}_${s.y}`,F=this._cache.get(L);if(F)return F;const X=this._cachePrevious.get(L);if(X)return this._cache.set(L,X),X;const Q=this._aabbFactory(s,d,x,E);return this._cache.set(L,Q),this._hadAnyChanges=!0,Q}}function kc(R,s,d){const x=R-s;return x<0?-x:Math.max(0,x-d)}function Fc(R,s,d,x,E){const L=R-d;let F;return F=L<0?Math.min(-L,1+L-E):L>1?Math.min(Math.max(L-E,0),1-L):0,Math.max(F,kc(s,x,E))}class Bc{constructor(){this._aabbCache=new Nc(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(s,d,x,E){const L=1<<x.z,F=1/L,X=x.x/L,Q=x.y/L;let ae=2;return ae=Math.min(ae,Fc(s,d,X,Q,F)),ae=Math.min(ae,Fc(s,d,X+.5,-Q-F,F)),ae=Math.min(ae,Fc(s,d,X+.5,2-Q-F,F)),ae}getWrap(s,d,x){const E=1<<d.z,L=1/E,F=d.x/E,X=kc(s.x,F,L),Q=kc(s.x,F-1,L),ae=kc(s.x,F+1,L),be=Math.min(X,Q,ae);return be===ae?1:be===Q?-1:0}allowVariableZoom(s,d){return ir(s,d)>4}allowWorldCopies(){return!1}getTileAABB(s,d,x,E){return this._aabbCache.getTileAABB(s,d,x,E)}_computeTileAABB(s,d,x,E){if(s.z<=0)return new Lr([-1,-1,-1],[1,1,1]);if(s.z===1)return new Lr([s.x===0?-1:0,s.y===0?0:-1,-1],[s.x===0?0:1,s.y===0?1:0,1]);{const L=[Ml(0,0,s.x,s.y,s.z),Ml(a.Z,0,s.x,s.y,s.z),Ml(a.Z,a.Z,s.x,s.y,s.z),Ml(0,a.Z,s.x,s.y,s.z)],F=[1,1,1],X=[-1,-1,-1];for(const Q of L)for(let ae=0;ae<3;ae++)F[ae]=Math.min(F[ae],Q[ae]),X[ae]=Math.max(X[ae],Q[ae]);if(s.y===0||s.y===(1<<s.z)-1){const Q=[0,s.y===0?1:-1,0];for(let ae=0;ae<3;ae++)F[ae]=Math.min(F[ae],Q[ae]),X[ae]=Math.max(X[ae],Q[ae])}return new Lr(F,X)}}}class Cu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,x){return this._helper.interpolatePadding(s,d,x)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d){this._helper.resize(s,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=a.bg(),this._projectionMatrix=a.b0(),this._globeViewProjMatrix32f=a.a$(),this._globeViewProjMatrixNoCorrection=a.b0(),this._globeViewProjMatrixNoCorrectionInverted=a.b0(),this._globeProjMatrixInverted=a.b0(),this._cameraPosition=a.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new xr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,d)=>this.getConstrained(s,d)}),this._coveringTilesDetailsProvider=new Bc}clone(){const s=new Cu;return s.apply(this),s}apply(s,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const s=a.bh();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){const{overscaledTileID:d,applyGlobeMatrix:x}=s,E=this._helper.getMercatorTileCoordinates(d);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:E,clippingPlane:this._cachedClippingPlane,projectionTransition:x?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){const d=this.pitchInRadians,x=this.cameraToCenterDistance/s,E=Math.sin(d)*x,L=Math.cos(d)*x+1,F=1/Math.sqrt(E*E+L*L)*1;let X=-E,Q=L;const ae=Math.sqrt(X*X+Q*Q);X/=ae,Q/=ae;const be=[0,X,Q];return a.bi(be,be,[0,0,0],-this.bearingInRadians),a.bj(be,be,[0,0,0],-1*this.center.lat*Math.PI/180),a.bk(be,be,[0,0,0],this.center.lng*Math.PI/180),a.aN(be,be,.25),[...be,.25*-F]}isLocationOccluded(s){return!this.isSurfacePointVisible(Pa(s))}transformLightDirection(s){const d=this._helper._center.lng*Math.PI/180,x=this._helper._center.lat*Math.PI/180,E=Math.cos(x),L=[Math.sin(d)*E,Math.sin(x),Math.cos(d)*E],F=[L[2],0,-L[0]],X=[0,0,0];a.aT(X,F,L),a.aS(F,F),a.aS(X,X);const Q=[0,0,0];return a.aS(Q,[F[0]*s[0]+X[0]*s[1]+L[0]*s[2],F[1]*s[0]+X[1]*s[1]+L[1]*s[2],F[2]*s[0]+X[2]*s[1]+L[2]*s[2]]),Q}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,d,x){const E=function(X,Q,ae){const be=1/(1<<ae.z);return new a.$(X/a.Z*be+ae.x*be,Q/a.Z*be+ae.y*be)}(s,d,x.canonical),L=(F=E.y,[a.bf(E.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-F*Math.PI*2))-.5*Math.PI]);var F;return this.getCircleRadiusCorrection()/Math.cos(L[1])}projectTileCoordinates(s,d,x,E){const L=x.canonical,F=Ml(s,d,L.x,L.y,L.z),X=1+(E?E(s,d):0)/a.bq,Q=[F[0]*X,F[1]*X,F[2]*X,1];a.ao(Q,Q,this._globeViewProjMatrixNoCorrection);const ae=this._cachedClippingPlane,be=ae[0]*F[0]+ae[1]*F[1]+ae[2]*F[2]+ae[3]<0;return{point:new a.P(Q[0]/Q[3],Q[1]/Q[3]),signedDistanceFromCamera:Q[3],isOccluded:be}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const s=Wa(this.worldSize,this.center.lat),d=a.b1(),x=a.b1();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),a.aX(d,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const E=this.centerOffset;d[8]=2*-E.x/this._helper._width,d[9]=2*E.y/this._helper._height,this._projectionMatrix=a.aY(d),this._globeProjMatrixInverted=a.b1(),a.ai(this._globeProjMatrixInverted,d),a.L(d,d,[0,0,-this.cameraToCenterDistance]),a.aZ(d,d,this.rollInRadians),a.a_(d,d,-this.pitchInRadians),a.aZ(d,d,this.bearingInRadians),a.L(d,d,[0,0,-s]);const L=a.bh();L[0]=s,L[1]=s,L[2]=s,a.a_(x,d,this.center.lat*Math.PI/180),a.bl(x,x,-this.center.lng*Math.PI/180),a.M(x,x,L),this._globeViewProjMatrixNoCorrection=x,a.a_(d,d,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bl(d,d,-this.center.lng*Math.PI/180),a.M(d,d,L),this._globeViewProjMatrix32f=new Float32Array(d),this._globeViewProjMatrixNoCorrectionInverted=a.b1(),a.ai(this._globeViewProjMatrixNoCorrectionInverted,x);const F=a.bh();this._cameraPosition=a.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/s,a.bi(this._cameraPosition,this._cameraPosition,F,-this.rollInRadians),a.bj(this._cameraPosition,this._cameraPosition,F,this.pitchInRadians),a.bi(this._cameraPosition,this._cameraPosition,F,-this.bearingInRadians),a.aO(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bj(this._cameraPosition,this._cameraPosition,F,-this.center.lat*Math.PI/180),a.bk(this._cameraPosition,this._cameraPosition,F,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);const X=a.aY(this._globeViewProjMatrixNoCorrectionInverted);a.M(X,X,[1,1,-1]),this._cachedFrustum=Yr.fromInvProjectionMatrix(X)}calculateFogMatrix(s){a.w("calculateFogMatrix is not supported on globe projection.");const d=a.b1();return a.as(d),d}getVisibleUnwrappedCoordinates(s){return[new a.aV(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,d){if(!this._globeViewProjMatrixNoCorrection)return 1;const x=Pa(s);a.aN(x,x,1+d/a.bq);const E=a.bg();return a.ao(E,[x[0],x[1],x[2],1],this._globeViewProjMatrixNoCorrection),E[2]/E[3]}populateCache(s){}getBounds(){const s=.5*this.width,d=.5*this.height,x=[new a.P(0,0),new a.P(s,0),new a.P(this.width,0),new a.P(this.width,d),new a.P(this.width,this.height),new a.P(s,this.height),new a.P(0,this.height),new a.P(0,d)],E=[];for(const Ae of x)E.push(this.unprojectScreenPoint(Ae));let L=0,F=0,X=0,Q=0;const ae=this.center;for(const Ae of E){const Pe=a.bm(ae.lng,Ae.lng),qe=a.bm(ae.lat,Ae.lat);Pe<F&&(F=Pe),Pe>L&&(L=Pe),qe<Q&&(Q=qe),qe>X&&(X=qe)}const be=[ae.lng+F,ae.lat+Q,ae.lng+L,ae.lat+X];return this.isSurfacePointOnScreen([0,1,0])&&(be[3]=90,be[0]=-180,be[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(be[1]=-90,be[0]=-180,be[2]=180),new He(be)}getConstrained(s,d){const x=a.ad(s.lat,-85.051129,a.aI),E=a.ad(+d,this.minZoom+ia(0,x),this.maxZoom);return{center:new a.Q(s.lng,x),zoom:E}}calculateCenterFromCameraLngLatAlt(s,d,x,E){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,x,E)}setLocationAtPoint(s,d){const x=Pa(this.unprojectScreenPoint(d)),E=Pa(s),L=a.bh();a.bn(L);const F=a.bh();a.bk(F,x,L,-this.center.lng*Math.PI/180),a.bj(F,F,L,this.center.lat*Math.PI/180);const X=E[0]*E[0]+E[2]*E[2],Q=F[0]*F[0];if(X<Q)return;const ae=Math.sqrt(X-Q),be=-ae,Ae=a.bo(E[0],E[2],F[0],ae),Pe=a.bo(E[0],E[2],F[0],be),qe=a.bh();a.bk(qe,E,L,-Ae);const Ze=a.bo(qe[1],qe[2],F[1],F[2]),dt=a.bh();a.bk(dt,E,L,-Pe);const ft=a.bo(dt[1],dt[2],F[1],F[2]),pt=.5*Math.PI,Tt=Ze>=-pt&&Ze<=pt,Nt=ft>=-pt&&ft<=pt;let kt,Bt;if(Tt&&Nt){const En=this.center.lng*Math.PI/180,zn=this.center.lat*Math.PI/180;a.br(Ae,En)+a.br(Ze,zn)<a.br(Pe,En)+a.br(ft,zn)?(kt=Ae,Bt=Ze):(kt=Pe,Bt=ft)}else if(Tt)kt=Ae,Bt=Ze;else{if(!Nt)return;kt=Pe,Bt=ft}const Wt=kt/Math.PI*180,Gt=Bt/Math.PI*180,xn=this.center.lat;this.setCenter(new a.Q(Wt,a.ad(Gt,-90,90))),this.setZoom(this.zoom+ia(xn,this.center.lat))}locationToScreenPoint(s,d){const x=Pa(s);if(d){const E=d.getElevationForLngLatZoom(s,this._helper._tileZoom);a.aN(x,x,1+E/a.bq)}return this._projectSurfacePointToScreen(x)}_projectSurfacePointToScreen(s){const d=a.bg();return a.ao(d,[...s,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],new a.P((.5*d[0]+.5)*this.width,(.5*-d[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,d){if(d){const x=d.pointCoordinate(s);if(x)return x}return a.$.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,d){var x;return(x=this.screenPointToMercatorCoordinate(s,d))===null||x===void 0?void 0:x.toLngLat()}isPointOnMapSurface(s,d){const x=this._cameraPosition,E=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(x,E)}getRayDirectionFromPixel(s){const d=a.bg();d[0]=s.x/this.width*2-1,d[1]=-1*(s.y/this.height*2-1),d[2]=1,d[3]=1,a.ao(d,d,this._globeViewProjMatrixNoCorrectionInverted),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3];const x=a.bh();x[0]=d[0]-this._cameraPosition[0],x[1]=d[1]-this._cameraPosition[1],x[2]=d[2]-this._cameraPosition[2];const E=a.bh();return a.aS(E,x),E}isSurfacePointVisible(s){const d=this._cachedClippingPlane;return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]+d[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;const d=a.bg();return a.ao(d,[...s,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3],d[0]>-1&&d[0]<1&&d[1]>-1&&d[1]<1&&d[2]>-1&&d[2]<1}rayPlanetIntersection(s,d){const x=a.aU(s,d),E=a.bh(),L=a.bh();a.aN(L,d,x),a.aR(E,s,L);const F=1-a.aU(E,E);if(F<0)return null;const X=a.aU(s,s)-1,Q=-x+(x<0?1:-1)*Math.sqrt(F),ae=X/Q,be=Q;return{tMin:Math.min(ae,be),tMax:Math.max(ae,be)}}unprojectScreenPoint(s){const d=this._cameraPosition,x=this.getRayDirectionFromPixel(s),E=this.rayPlanetIntersection(d,x);if(E){const ae=a.bh();a.aO(ae,d,[x[0]*E.tMin,x[1]*E.tMin,x[2]*E.tMin]);const be=a.bh();return a.aS(be,ae),eh(be)}const L=this._cachedClippingPlane[0]*x[0]+this._cachedClippingPlane[1]*x[1]+this._cachedClippingPlane[2]*x[2],F=-a.bp(this._cachedClippingPlane,d)/L,X=a.bh();if(F>0)a.aO(X,d,[x[0]*F,x[1]*F,x[2]*F]);else{const ae=a.bh();a.aO(ae,d,[2*x[0],2*x[1],2*x[2]]);const be=a.bp(this._cachedClippingPlane,ae);a.aR(X,ae,[this._cachedClippingPlane[0]*be,this._cachedClippingPlane[1]*be,this._cachedClippingPlane[2]*be])}const Q=a.bh();return a.aS(Q,X),eh(Q)}getMatrixForModel(s,d){const x=a.Q.convert(s),E=1/a.bq,L=a.b0();return a.bl(L,L,x.lng/180*Math.PI),a.a_(L,L,-x.lat/180*Math.PI),a.L(L,L,[0,0,1+d/a.bq]),a.a_(L,L,.5*Math.PI),a.M(L,L,[E,E,E]),L}getProjectionDataForCustomLayer(s=!0){const d=this.getProjectionData({overscaledTileID:new a.Y(0,0,0,0,0),applyGlobeMatrix:s});return d.tileMercatorCoords=[0,0,1,1],d}getFastPathSimpleProjectionMatrix(s){}}class Pu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,x){return this._helper.interpolatePadding(s,d,x)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d,x=!0){this._helper.resize(s,d,x)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,d){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=d,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new xr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,d)=>this.getConstrained(s,d)}),this._globeness=1,this._mercatorTransform=new Cr,this._verticalPerspectiveTransform=new Cu}clone(){const s=new Pu;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){const d=this._mercatorTransform.getProjectionData(s),x=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?x.mainMatrix:d.mainMatrix,clippingPlane:x.clippingPlane,tileMercatorCoords:x.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:d.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return a.bb(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bb(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,d,x){const E=this._mercatorTransform.getPitchedTextCorrection(s,d,x),L=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,d,x);return a.bb(E,L,this._globeness)}projectTileCoordinates(s,d,x,E){return this.currentTransform.projectTileCoordinates(s,d,x,E)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,d){return this.currentTransform.lngLatToCameraDepth(s,d)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,d){return this.currentTransform.getConstrained(s,d)}calculateCenterFromCameraLngLatAlt(s,d,x,E){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,x,E)}setLocationAtPoint(s,d){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,d),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,d),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,d){return this.currentTransform.locationToScreenPoint(s,d)}screenPointToMercatorCoordinate(s,d){return this.currentTransform.screenPointToMercatorCoordinate(s,d)}screenPointToLocation(s,d){return this.currentTransform.screenPointToLocation(s,d)}isPointOnMapSurface(s,d){return this.currentTransform.isPointOnMapSurface(s,d)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,d){return this.currentTransform.getMatrixForModel(s,d)}getProjectionDataForCustomLayer(s=!0){const d=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return d;const x=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return x.fallbackMatrix=d.mainMatrix,x}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class Vo{get useGlobeControls(){return!0}handlePanInertia(s,d){const x=hu(s,d);return Math.abs(x.lng-d.center.lng)>180&&(x.lng=d.center.lng+179.5*Math.sign(x.lng-d.center.lng)),{easingCenter:x,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,d){const x=s.around,E=d.screenPointToLocation(x);s.bearingDelta&&d.setBearing(d.bearing+s.bearingDelta),s.pitchDelta&&d.setPitch(d.pitch+s.pitchDelta),s.rollDelta&&d.setRoll(d.roll+s.rollDelta);const L=d.zoom;s.zoomDelta&&d.setZoom(d.zoom+s.zoomDelta);const F=d.zoom-L;if(F===0)return;const X=a.bm(d.center.lng,E.lng),Q=X/(Math.abs(X/180)+1),ae=a.bm(d.center.lat,E.lat),be=d.getRayDirectionFromPixel(x),Ae=d.cameraPosition,Pe=-1*a.aU(Ae,be),qe=a.bh();a.aO(qe,Ae,[be[0]*Pe,be[1]*Pe,be[2]*Pe]);const Ze=a.bs(qe)-1,dt=Math.exp(.5*-Math.max(Ze-.3,0)),ft=Wa(d.worldSize,d.center.lat)/Math.min(d.width,d.height),pt=a.be(ft,.9,.5,1,.25),Tt=(1-a.aH(-F))*Math.min(dt,pt),Nt=d.center.lat,kt=d.zoom,Bt=new a.Q(d.center.lng+Q*Tt,a.ad(d.center.lat+ae*Tt,-85.051129,a.aI));d.setLocationAtPoint(E,x);const Wt=d.center,Gt=a.be(Math.abs(X),45,85,0,1),xn=a.be(ft,.75,.35,0,1),En=Math.pow(Math.max(Gt,xn),.25),zn=a.bm(Wt.lng,Bt.lng),Un=a.bm(Wt.lat,Bt.lat);d.setCenter(new a.Q(Wt.lng+zn*En,Wt.lat+Un*En).wrap()),d.setZoom(kt+ia(Nt,d.center.lat))}handleMapControlsPan(s,d,x){if(!s.panDelta)return;const E=d.center.lat,L=d.zoom;d.setCenter(hu(s.panDelta,d).wrap()),d.setZoom(L+ia(E,d.center.lat))}cameraForBoxAndBearing(s,d,x,E,L){const F=Ni(s,d,x,E,L),X=d.left/L.width*2-1,Q=(L.width-d.right)/L.width*2-1,ae=d.top/L.height*-2+1,be=(L.height-d.bottom)/L.height*-2+1,Ae=a.bm(x.getWest(),x.getEast())<0,Pe=Ae?x.getEast():x.getWest(),qe=Ae?x.getWest():x.getEast(),Ze=Math.max(x.getNorth(),x.getSouth()),dt=Math.min(x.getNorth(),x.getSouth()),ft=Pe+.5*a.bm(Pe,qe),pt=Ze+.5*a.bm(Ze,dt),Tt=L.clone();Tt.setCenter(F.center),Tt.setBearing(F.bearing),Tt.setPitch(0),Tt.setRoll(0),Tt.setZoom(F.zoom);const Nt=Tt.modelViewProjectionMatrix,kt=[Pa(x.getNorthWest()),Pa(x.getNorthEast()),Pa(x.getSouthWest()),Pa(x.getSouthEast()),Pa(new a.Q(qe,pt)),Pa(new a.Q(Pe,pt)),Pa(new a.Q(ft,Ze)),Pa(new a.Q(ft,dt))],Bt=Pa(F.center);let Wt=Number.POSITIVE_INFINITY;for(const Gt of kt)X<0&&(Wt=Vo.getLesserNonNegativeNonNull(Wt,Vo.solveVectorScale(Gt,Bt,Nt,"x",X))),Q>0&&(Wt=Vo.getLesserNonNegativeNonNull(Wt,Vo.solveVectorScale(Gt,Bt,Nt,"x",Q))),ae>0&&(Wt=Vo.getLesserNonNegativeNonNull(Wt,Vo.solveVectorScale(Gt,Bt,Nt,"y",ae))),be<0&&(Wt=Vo.getLesserNonNegativeNonNull(Wt,Vo.solveVectorScale(Gt,Bt,Nt,"y",be)));if(Number.isFinite(Wt)&&Wt!==0)return F.zoom=Tt.zoom+a.aa(Wt),F;$n()}handleJumpToCenterZoom(s,d){const x=s.center.lat,E=s.getConstrained(d.center?a.Q.convert(d.center):s.center,s.zoom).center;s.setCenter(E.wrap());const L=d.zoom!==void 0?+d.zoom:s.zoom+ia(x,E.lat);s.zoom!==L&&s.setZoom(L)}handleEaseTo(s,d){const x=s.zoom,E=s.center,L=s.padding,F={roll:s.roll,pitch:s.pitch,bearing:s.bearing},X={roll:d.roll===void 0?s.roll:d.roll,pitch:d.pitch===void 0?s.pitch:d.pitch,bearing:d.bearing===void 0?s.bearing:d.bearing},Q=d.zoom!==void 0,ae=!s.isPaddingEqual(d.padding);let be=!1;const Ae=d.center?a.Q.convert(d.center):E,Pe=s.getConstrained(Ae,x).center;mr(s,Pe);const qe=s.clone();qe.setCenter(Pe),qe.setZoom(Q?+d.zoom:x+ia(E.lat,Ae.lat)),qe.setBearing(d.bearing);const Ze=new a.P(a.ad(s.centerPoint.x+d.offsetAsPoint.x,0,s.width),a.ad(s.centerPoint.y+d.offsetAsPoint.y,0,s.height));qe.setLocationAtPoint(Pe,Ze);const dt=(d.offset&&d.offsetAsPoint.mag())>0?qe.center:Pe,ft=Q?+d.zoom:x+ia(E.lat,dt.lat),pt=x+ia(E.lat,0),Tt=ft+ia(dt.lat,0),Nt=a.bm(E.lng,dt.lng),kt=a.bm(E.lat,dt.lat),Bt=a.aH(Tt-pt);return be=ft!==x,{easeFunc:Wt=>{if(a.b5(F,X)||Rr({startEulerAngles:F,endEulerAngles:X,tr:s,k:Wt,useSlerp:F.roll!=X.roll}),ae&&s.interpolatePadding(L,d.padding,Wt),d.around)a.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(d.around,d.aroundPoint);else{const Gt=Tt>pt?Math.min(2,Bt):Math.max(.5,Bt),xn=Math.pow(Gt,1-Wt),En=as(E,Nt,kt,Wt*xn);s.setCenter(En.wrap())}if(be){const Gt=a.B.number(pt,Tt,Wt)+ia(0,s.center.lat);s.setZoom(Gt)}},isZooming:be,elevationCenter:dt}}handleFlyTo(s,d){const x=d.zoom!==void 0,E=s.center,L=s.zoom,F=s.padding,X=!s.isPaddingEqual(d.padding),Q=s.getConstrained(a.Q.convert(d.center||d.locationAtOffset),L).center,ae=x?+d.zoom:s.zoom+ia(s.center.lat,Q.lat),be=s.clone();be.setCenter(Q),be.setZoom(ae),be.setBearing(d.bearing);const Ae=new a.P(a.ad(s.centerPoint.x+d.offsetAsPoint.x,0,s.width),a.ad(s.centerPoint.y+d.offsetAsPoint.y,0,s.height));be.setLocationAtPoint(Q,Ae);const Pe=be.center;mr(s,Pe);const qe=function(kt,Bt,Wt){const Gt=Pa(Bt),xn=Pa(Wt),En=a.aU(Gt,xn),zn=Math.acos(En),Un=hc(kt);return zn/(2*Math.PI)*Un}(s,E,Pe),Ze=L+ia(E.lat,0),dt=ae+ia(Pe.lat,0),ft=a.aH(dt-Ze);let pt;if(typeof d.minZoom=="number"){const kt=+d.minZoom+ia(Pe.lat,0),Bt=Math.min(kt,Ze,dt)+ia(0,Pe.lat),Wt=s.getConstrained(Pe,Bt).zoom+ia(Pe.lat,0);pt=a.aH(Wt-Ze)}const Tt=a.bm(E.lng,Pe.lng),Nt=a.bm(E.lat,Pe.lat);return{easeFunc:(kt,Bt,Wt,Gt)=>{const xn=as(E,Tt,Nt,Wt);X&&s.interpolatePadding(F,d.padding,kt);const En=kt===1?Pe:xn;s.setCenter(En.wrap());const zn=Ze+a.aa(Bt);s.setZoom(kt===1?ae:zn+ia(0,En.lat))},scaleOfZoom:ft,targetCenter:Pe,scaleOfMinZoom:pt,pixelPathLength:qe}}static solveVectorScale(s,d,x,E,L){const F=E==="x"?[x[0],x[4],x[8],x[12]]:[x[1],x[5],x[9],x[13]],X=[x[3],x[7],x[11],x[15]],Q=s[0]*F[0]+s[1]*F[1]+s[2]*F[2],ae=s[0]*X[0]+s[1]*X[1]+s[2]*X[2],be=d[0]*F[0]+d[1]*F[1]+d[2]*F[2],Ae=d[0]*X[0]+d[1]*X[1]+d[2]*X[2];return be+L*ae===Q+L*Ae||X[3]*(Q-be)+F[3]*(Ae-ae)+Q*Ae==be*ae?null:(be+F[3]-L*Ae-L*X[3])/(be-Q-L*Ae+L*ae)}static getLesserNonNegativeNonNull(s,d){return d!==null&&d>=0&&d<s?d:s}}class fc{constructor(s){this._globe=s,this._mercatorCameraHelper=new ta,this._verticalPerspectiveCameraHelper=new Vo}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,d){return this.currentHelper.handlePanInertia(s,d)}handleMapControlsRollPitchBearingZoom(s,d){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,d)}handleMapControlsPan(s,d,x){this.currentHelper.handleMapControlsPan(s,d,x)}cameraForBoxAndBearing(s,d,x,E,L){return this.currentHelper.cameraForBoxAndBearing(s,d,x,E,L)}handleJumpToCenterZoom(s,d){this.currentHelper.handleJumpToCenterZoom(s,d)}handleEaseTo(s,d){return this.currentHelper.handleEaseTo(s,d)}handleFlyTo(s,d){return this.currentHelper.handleFlyTo(s,d)}}const os=(R,s)=>a.x(R,s&&s.filter(d=>d.identifier!=="source.canvas")),th=a.bt();class Ru extends a.E{constructor(s,d={}){super(),this._rtlPluginLoaded=()=>{for(const x in this.sourceCaches){const E=this.sourceCaches[x].getSource().type;E!=="vector"&&E!=="geojson"||this.sourceCaches[x].reload()}},this.map=s,this.dispatcher=new Be(Se(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(x,E)=>this.getGlyphs(x,E)),this.dispatcher.registerMessageHandler("GI",(x,E)=>this.getImages(x,E)),this.imageManager=new j,this.imageManager.setEventedParent(this),this.glyphManager=new se(s._requestManager,d.localIdeographFontFamily),this.lineAtlas=new me(256,512),this.crossTileSymbolIndex=new ja,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bu,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.bv()),hn().on(vt,this._rtlPluginLoaded),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const E=this.sourceCaches[x.sourceId];if(!E)return;const L=E.getSource();if(L&&L.vectorLayerIds)for(const F in this._layers){const X=this._layers[F];X.source===L.id&&this._validateLayer(X)}})}loadURL(s,d={},x){this.fire(new a.l("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const E=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const L=this._loadStyleRequest;a.j(E,this._loadStyleRequest).then(F=>{this._loadStyleRequest=null,this._load(F.data,d,x)}).catch(F=>{this._loadStyleRequest=null,F&&!L.signal.aborted&&this.fire(new a.k(F))})}loadJSON(s,d={},x){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(s,d,x)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(th,{validate:!1})}_load(s,d,x){var E,L;const F=d.transformStyle?d.transformStyle(x,s):s;if(!d.validate||!os(this,a.y(F))){this._loaded=!0,this.stylesheet=F;for(const X in F.sources)this.addSource(X,F.sources[X],{validate:!1});F.sprite?this._loadSprite(F.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(F.glyphs),this._createLayers(),this.light=new Te(this.stylesheet.light),this._setProjectionInternal(((E=this.stylesheet.projection)===null||E===void 0?void 0:E.type)||"mercator"),this.sky=new De(this.stylesheet.sky),this.map.setTerrain((L=this.stylesheet.terrain)!==null&&L!==void 0?L:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){const s=a.bw(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of s){const x=a.bx(d);x.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=x}}_loadSprite(s,d=!1,x=void 0){let E;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(L,F,X,Q){return a._(this,void 0,void 0,function*(){const ae=V(L),be=X>1?"@2x":"",Ae={},Pe={};for(const{id:qe,url:Ze}of ae){const dt=F.transformRequest(W(Ze,be,".json"),"SpriteJSON");Ae[qe]=a.j(dt,Q);const ft=F.transformRequest(W(Ze,be,".png"),"SpriteImage");Pe[qe]=z.getImage(ft,Q)}return yield Promise.all([...Object.values(Ae),...Object.values(Pe)]),function(qe,Ze){return a._(this,void 0,void 0,function*(){const dt={};for(const ft in qe){dt[ft]={};const pt=w.getImageCanvasContext((yield Ze[ft]).data),Tt=(yield qe[ft]).data;for(const Nt in Tt){const{width:kt,height:Bt,x:Wt,y:Gt,sdf:xn,pixelRatio:En,stretchX:zn,stretchY:Un,content:kn,textFitWidth:wr,textFitHeight:dr}=Tt[Nt];dt[ft][Nt]={data:null,pixelRatio:En,sdf:xn,stretchX:zn,stretchY:Un,content:kn,textFitWidth:wr,textFitHeight:dr,spriteData:{width:kt,height:Bt,x:Wt,y:Gt,context:pt}}}}return dt})}(Ae,Pe)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(L=>{if(this._spriteRequest=null,L)for(const F in L){this._spritesImagesIds[F]=[];const X=this._spritesImagesIds[F]?this._spritesImagesIds[F].filter(Q=>!(Q in L)):[];for(const Q of X)this.imageManager.removeImage(Q),this._changedImages[Q]=!0;for(const Q in L[F]){const ae=F==="default"?Q:`${F}:${Q}`;this._spritesImagesIds[F].push(ae),ae in this.imageManager.images?this.imageManager.updateImage(ae,L[F][Q],!1):this.imageManager.addImage(ae,L[F][Q]),d&&(this._changedImages[ae]=!0)}}}).catch(L=>{this._spriteRequest=null,E=L,this.fire(new a.k(E))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),x&&x(E)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(s){const d=this.sourceCaches[s.source];if(!d)return;const x=s.sourceLayer;if(!x)return;const E=d.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(x)===-1)&&this.fire(new a.k(new Error(`Source layer "${x}" does not exist on source "${E.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,d=!1){const x=this._serializedAllLayers();if(!s||s.length===0)return Object.values(d?a.by(x):x);const E=[];for(const L of s)if(x[L]){const F=d?a.by(x[L]):x[L];E.push(F)}return E}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const d=Object.keys(this._layers);for(const x of d){const E=this._layers[x];E.type!=="custom"&&(s[x]=E.serialize())}return s}hasTransitions(){var s,d,x;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((d=this.sky)===null||d===void 0)&&d.hasTransition()||!((x=this.projection)===null||x===void 0)&&x.hasTransition())return!0;for(const E in this.sourceCaches)if(this.sourceCaches[E].hasTransition())return!0;for(const E in this._layers)if(this._layers[E].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const d=this._changed;if(d){const E=Object.keys(this._updatedLayers),L=Object.keys(this._removedLayers);(E.length||L.length)&&this._updateWorkerLayers(E,L);for(const F in this._updatedSources){const X=this._updatedSources[F];if(X==="reload")this._reloadSource(F);else{if(X!=="clear")throw new Error(`Invalid action ${X}`);this._clearSource(F)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const x={};for(const E in this.sourceCaches){const L=this.sourceCaches[E];x[E]=L.used,L.used=!1}for(const E of this._order){const L=this._layers[E];L.recalculate(s,this._availableImages),!L.isHidden(s.zoom)&&L.source&&(this.sourceCaches[L.source].used=!0)}for(const E in x){const L=this.sourceCaches[E];!!x[E]!=!!L.used&&L.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:E}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,d&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,d={}){var x;this._checkLoaded();const E=this.serialize();if(s=d.transformStyle?d.transformStyle(E,s):s,((x=d.validate)===null||x===void 0||x)&&os(this,a.y(s)))return!1;(s=a.by(s)).layers=a.bw(s.layers);const L=a.bz(E,s),F=this._getOperationsToPerform(L);if(F.unimplemented.length>0)throw new Error(`Unimplemented: ${F.unimplemented.join(", ")}.`);if(F.operations.length===0)return!1;for(const X of F.operations)X();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const d=[],x=[];for(const E of s)switch(E.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,E.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,E.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,E.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,E.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,E.args));break;case"addSource":d.push(()=>this.addSource.apply(this,E.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,E.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,E.args));break;case"setLight":d.push(()=>this.setLight.apply(this,E.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,E.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,E.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,E.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,E.args));break;case"setSky":d.push(()=>this.setSky.apply(this,E.args));break;case"setProjection":this.setProjection.apply(this,E.args);break;case"setTransition":d.push(()=>{});break;default:x.push(E.command)}return{operations:d,unimplemented:x}}addImage(s,d){if(this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,d),this._afterImageUpdated(s)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,d,x={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(a.y.source,`sources.${s}`,d,null,x))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const E=this.sourceCaches[s]=new ge(s,d,this.dispatcher);E.style=this,E.setEventedParent(this,()=>({isSourceLoaded:E.loaded(),source:E.serialize(),sourceId:s})),E.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===s)return this.fire(new a.k(new Error(`Source "${s}" cannot be removed while layer "${x}" is using it.`)));const d=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],d.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,d){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const x=this.sourceCaches[s].getSource();if(x.type!=="geojson")throw new Error(`geojsonSource.type is ${x.type}, which is !== 'geojson`);x.setData(d),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,d,x={}){this._checkLoaded();const E=s.id;if(this.getLayer(E))return void this.fire(new a.k(new Error(`Layer "${E}" already exists on this map.`)));let L;if(s.type==="custom"){if(os(this,a.bA(s)))return;L=a.bx(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(E,s.source),s=a.by(s),s=a.e(s,{source:E})),this._validate(a.y.layer,`layers.${E}`,s,{arrayIndex:-1},x))return;L=a.bx(s),this._validateLayer(L),L.setEventedParent(this,{layer:{id:E}})}const F=d?this._order.indexOf(d):this._order.length;if(d&&F===-1)this.fire(new a.k(new Error(`Cannot add layer "${E}" before non-existing layer "${d}".`)));else{if(this._order.splice(F,0,E),this._layerOrderChanged=!0,this._layers[E]=L,this._removedLayers[E]&&L.source&&L.type!=="custom"){const X=this._removedLayers[E];delete this._removedLayers[E],X.type!==L.type?this._updatedSources[L.source]="clear":(this._updatedSources[L.source]="reload",this.sourceCaches[L.source].pause())}this._updateLayer(L),L.onAdd&&L.onAdd(this.map)}}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;const x=this._order.indexOf(s);this._order.splice(x,1);const E=d?this._order.indexOf(d):this._order.length;d&&E===-1?this.fire(new a.k(new Error(`Cannot move layer "${s}" before non-existing layer "${d}".`))):(this._order.splice(E,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const d=this._layers[s];if(!d)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${s}".`)));d.setEventedParent(null);const x=this._order.indexOf(s);this._order.splice(x,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,d,x){this._checkLoaded();const E=this.getLayer(s);E?E.minzoom===d&&E.maxzoom===x||(d!=null&&(E.minzoom=d),x!=null&&(E.maxzoom=x),this._updateLayer(E)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,d,x={}){this._checkLoaded();const E=this.getLayer(s);if(E){if(!a.bB(E.filter,d))return d==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(a.y.filter,`layers.${E.id}.filter`,d,null,x)||(E.filter=a.by(d),this._updateLayer(E)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return a.by(this.getLayer(s).filter)}setLayoutProperty(s,d,x,E={}){this._checkLoaded();const L=this.getLayer(s);L?a.bB(L.getLayoutProperty(d),x)||(L.setLayoutProperty(d,x,E),this._updateLayer(L)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,d){const x=this.getLayer(s);if(x)return x.getLayoutProperty(d);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,d,x,E={}){this._checkLoaded();const L=this.getLayer(s);L?a.bB(L.getPaintProperty(d),x)||(L.setPaintProperty(d,x,E)&&this._updateLayer(L),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,d){return this.getLayer(s).getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();const x=s.source,E=s.sourceLayer,L=this.sourceCaches[x];if(L===void 0)return void this.fire(new a.k(new Error(`The source '${x}' does not exist in the map's style.`)));const F=L.getSource().type;F==="geojson"&&E?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):F!=="vector"||E?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),L.setFeatureState(E,s.id,d)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,d){this._checkLoaded();const x=s.source,E=this.sourceCaches[x];if(E===void 0)return void this.fire(new a.k(new Error(`The source '${x}' does not exist in the map's style.`)));const L=E.getSource().type,F=L==="vector"?s.sourceLayer:void 0;L!=="vector"||F?d&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(F,s.id,d):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const d=s.source,x=s.sourceLayer,E=this.sourceCaches[d];if(E!==void 0)return E.getSource().type!=="vector"||x?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),E.getFeatureState(x,s.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=a.bC(this.sourceCaches,L=>L.serialize()),d=this._serializeByIds(this._order,!0),x=this.map.getTerrain()||void 0,E=this.stylesheet;return a.bD({version:E.version,name:E.name,metadata:E.metadata,light:E.light,sky:E.sky,center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,sprite:E.sprite,glyphs:E.glyphs,transition:E.transition,projection:E.projection,sources:s,layers:d,terrain:x},L=>L!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const d=F=>this._layers[F].type==="fill-extrusion",x={},E=[];for(let F=this._order.length-1;F>=0;F--){const X=this._order[F];if(d(X)){x[X]=F;for(const Q of s){const ae=Q[X];if(ae)for(const be of ae)E.push(be)}}}E.sort((F,X)=>X.intersectionZ-F.intersectionZ);const L=[];for(let F=this._order.length-1;F>=0;F--){const X=this._order[F];if(d(X))for(let Q=E.length-1;Q>=0;Q--){const ae=E[Q].feature;if(x[ae.layer.id]<F)break;L.push(ae),E.pop()}else for(const Q of s){const ae=Q[X];if(ae)for(const be of ae)L.push(be.feature)}}return L}queryRenderedFeatures(s,d,x){d&&d.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",d.filter,null,d);const E={};if(d&&d.layers){if(!(Array.isArray(d.layers)||d.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ae of d.layers){const be=this._layers[ae];if(!be)return this.fire(new a.k(new Error(`The layer '${ae}' does not exist in the map's style and cannot be queried for features.`))),[];E[be.source]=!0}}const L=[];d.availableImages=this._availableImages;const F=this._serializedAllLayers(),X=d.layers instanceof Set?d.layers:Array.isArray(d.layers)?new Set(d.layers):null,Q=Object.assign(Object.assign({},d),{layers:X});for(const ae in this.sourceCaches)d.layers&&!E[ae]||L.push(ht(this.sourceCaches[ae],this._layers,F,s,Q,x));return this.placement&&L.push(function(ae,be,Ae,Pe,qe,Ze,dt){const ft={},pt=Ze.queryRenderedSymbols(Pe),Tt=[];for(const Nt of Object.keys(pt).map(Number))Tt.push(dt[Nt]);Tt.sort(it);for(const Nt of Tt){const kt=Nt.featureIndex.lookupSymbolFeatures(pt[Nt.bucketInstanceId],be,Nt.bucketIndex,Nt.sourceLayerIndex,qe.filter,qe.layers,qe.availableImages,ae);for(const Bt in kt){const Wt=ft[Bt]=ft[Bt]||[],Gt=kt[Bt];Gt.sort((xn,En)=>{const zn=Nt.featureSortOrder;if(zn){const Un=zn.indexOf(xn.featureIndex);return zn.indexOf(En.featureIndex)-Un}return En.featureIndex-xn.featureIndex});for(const xn of Gt)Wt.push(xn)}}return function(Nt,kt,Bt){for(const Wt in Nt)for(const Gt of Nt[Wt])gt(Gt,Bt[kt[Wt].source]);return Nt}(ft,ae,Ae)}(this._layers,F,this.sourceCaches,s,Q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(L)}querySourceFeatures(s,d){d&&d.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",d.filter,null,d);const x=this.sourceCaches[s];return x?function(E,L){const F=E.getRenderableIds().map(ae=>E.getTileByID(ae)),X=[],Q={};for(let ae=0;ae<F.length;ae++){const be=F[ae],Ae=be.tileID.canonical.key;Q[Ae]||(Q[Ae]=!0,be.querySourceFeatures(X,L))}return X}(x,d):[]}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();const x=this.light.getLight();let E=!1;for(const F in s)if(!a.bB(s[F],x[F])){E=!0;break}if(!E)return;const L={now:w.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,d),this.light.updateTransitions(L)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,d={}){this._checkLoaded();const x=this.getSky();let E=!1;if(!s&&!x)return;if(s&&!x)E=!0;else if(!s&&x)E=!0;else for(const F in s)if(!a.bB(s[F],x[F])){E=!0;break}if(!E)return;const L={now:w.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,d),this.sky.updateTransitions(L)}_setProjectionInternal(s){const d=function(x){if(Array.isArray(x)){const E=new Zu({type:x});return{projection:E,transform:new Pu,cameraHelper:new fc(E)}}switch(x){case"mercator":return{projection:new Ge,transform:new Cr,cameraHelper:new ta};case"globe":{const E=new Zu({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:E,transform:new Pu,cameraHelper:new fc(E)}}case"vertical-perspective":return{projection:new Es,transform:new Cu,cameraHelper:new Vo};default:return a.w(`Unknown projection name: ${x}. Falling back to mercator projection.`),{projection:new Ge,transform:new Cr,cameraHelper:new ta}}}(s);this.projection=d.projection,this.map.migrateProjection(d.transform,d.cameraHelper);for(const x in this.sourceCaches)this.sourceCaches[x].reload()}_validate(s,d,x,E,L={}){return(!L||L.validate!==!1)&&os(this,s.call(a.y,a.e({key:d,style:this.serialize(),value:x,styleSpec:a.v},E)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),hn().off(vt,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const x=this.sourceCaches[d];x.setEventedParent(null),x.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const d in this.sourceCaches)this.sourceCaches[d].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,d,x,E,L=!1){let F=!1,X=!1;const Q={};for(const ae of this._order){const be=this._layers[ae];if(be.type!=="symbol")continue;if(!Q[be.source]){const Pe=this.sourceCaches[be.source];Q[be.source]=Pe.getRenderableIds(!0).map(qe=>Pe.getTileByID(qe)).sort((qe,Ze)=>Ze.tileID.overscaledZ-qe.tileID.overscaledZ||(qe.tileID.isLessThan(Ze.tileID)?-1:1))}const Ae=this.crossTileSymbolIndex.addLayer(be,Q[be.source],s.center.lng);F=F||Ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((L=L||this._layerOrderChanged||x===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.now(),s.zoom))&&(this.pauseablePlacement=new Wi(s,this.map.terrain,this._order,L,d,x,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.now()),X=!0),F&&this.pauseablePlacement.placement.setStale()),X||F)for(const ae of this._order){const be=this._layers[ae];be.type==="symbol"&&this.placement.updateLayerOpacities(be,Q[be.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d){return a._(this,void 0,void 0,function*(){const x=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const E=this.sourceCaches[d.source];return E&&E.setDependencies(d.tileID.key,d.type,d.icons),x})}getGlyphs(s,d){return a._(this,void 0,void 0,function*(){const x=yield this.glyphManager.getGlyphs(d.stacks),E=this.sourceCaches[d.source];return E&&E.setDependencies(d.tileID.key,d.type,[""]),x})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,d={}){this._checkLoaded(),s&&this._validate(a.y.glyphs,"glyphs",s,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,d,x={},E){this._checkLoaded();const L=[{id:s,url:d}],F=[...V(this.stylesheet.sprite),...L];this._validate(a.y.sprite,"sprite",F,null,x)||(this.stylesheet.sprite=F,this._loadSprite(L,!0,E))}removeSprite(s){this._checkLoaded();const d=V(this.stylesheet.sprite);if(d.find(x=>x.id===s)){if(this._spritesImagesIds[s])for(const x of this._spritesImagesIds[s])this.imageManager.removeImage(x),this._changedImages[x]=!0;d.splice(d.findIndex(x=>x.id===s),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return V(this.stylesheet.sprite)}setSprite(s,d={},x){this._checkLoaded(),s&&this._validate(a.y.sprite,"sprite",s,null,d)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,x):(this._unloadSprite(),x&&x(null)))}}var Ts=a.aC([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class dc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,d,x,E,L,F,X,Q,ae){this.context=s;let be=this.boundPaintVertexBuffers.length!==E.length;for(let Ae=0;!be&&Ae<E.length;Ae++)this.boundPaintVertexBuffers[Ae]!==E[Ae]&&(be=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==x||be||this.boundIndexBuffer!==L||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==X||this.boundDynamicVertexBuffer2!==Q||this.boundDynamicVertexBuffer3!==ae?this.freshBind(d,x,E,L,F,X,Q,ae):(s.bindVertexArray.set(this.vao),X&&X.bind(),L&&L.dynamicDraw&&L.bind(),Q&&Q.bind(),ae&&ae.bind())}freshBind(s,d,x,E,L,F,X,Q){const ae=s.numAttributes,be=this.context,Ae=be.gl;this.vao&&this.destroy(),this.vao=be.createVertexArray(),be.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=E,this.boundVertexOffset=L,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=X,this.boundDynamicVertexBuffer3=Q,d.enableAttributes(Ae,s);for(const Pe of x)Pe.enableAttributes(Ae,s);F&&F.enableAttributes(Ae,s),X&&X.enableAttributes(Ae,s),Q&&Q.enableAttributes(Ae,s),d.bind(),d.setVertexAttribPointers(Ae,s,L);for(const Pe of x)Pe.bind(),Pe.setVertexAttribPointers(Ae,s,L);F&&(F.bind(),F.setVertexAttribPointers(Ae,s,L)),E&&E.bind(),X&&(X.bind(),X.setVertexAttribPointers(Ae,s,L)),Q&&(Q.bind(),Q.setVertexAttribPointers(Ae,s,L)),be.currentNumAttributes=ae}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const rl=(R,s,d,x,E)=>({u_texture:0,u_ele_delta:R,u_fog_matrix:s,u_fog_color:d?d.properties.get("fog-color"):a.b6.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:E?0:d?d.calculateFogBlendOpacity(x):0,u_horizon_color:d?d.properties.get("horizon-color"):a.b6.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1,u_is_globe_mode:E?1:0}),du={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function ee(R){const s=[];for(let d=0;d<R.length;d++){if(R[d]===null)continue;const x=R[d].split(" ");s.push(x.pop())}return s}class Ue{constructor(s,d,x,E,L,F,X,Q){const ae=s.gl;this.program=ae.createProgram();const be=ee(d.staticAttributes),Ae=x?x.getBinderAttributes():[],Pe=be.concat(Ae),qe=Gi.prelude.staticUniforms?ee(Gi.prelude.staticUniforms):[],Ze=X.staticUniforms?ee(X.staticUniforms):[],dt=d.staticUniforms?ee(d.staticUniforms):[],ft=x?x.getBinderUniforms():[],pt=qe.concat(Ze).concat(dt).concat(ft),Tt=[];for(const En of pt)Tt.indexOf(En)<0&&Tt.push(En);const Nt=x?x.defines():[];vo(ae)&&Nt.unshift("#version 300 es"),L&&Nt.push("#define OVERDRAW_INSPECTOR;"),F&&Nt.push("#define TERRAIN3D;"),Q&&Nt.push(Q);let kt=Nt.concat(Gi.prelude.fragmentSource,X.fragmentSource,d.fragmentSource).join(`
`),Bt=Nt.concat(Gi.prelude.vertexSource,X.vertexSource,d.vertexSource).join(`
`);vo(ae)||(kt=function(En){return En.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(kt),Bt=function(En){return En.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Bt));const Wt=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(Wt,kt),ae.compileShader(Wt),!ae.getShaderParameter(Wt,ae.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ae.getShaderInfoLog(Wt)}`);ae.attachShader(this.program,Wt);const Gt=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(Gt,Bt),ae.compileShader(Gt),!ae.getShaderParameter(Gt,ae.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ae.getShaderInfoLog(Gt)}`);ae.attachShader(this.program,Gt),this.attributes={};const xn={};this.numAttributes=Pe.length;for(let En=0;En<this.numAttributes;En++)Pe[En]&&(ae.bindAttribLocation(this.program,En,Pe[En]),this.attributes[Pe[En]]=En);if(ae.linkProgram(this.program),!ae.getProgramParameter(this.program,ae.LINK_STATUS))throw new Error(`Program failed to link: ${ae.getProgramInfoLog(this.program)}`);ae.deleteShader(Gt),ae.deleteShader(Wt);for(let En=0;En<Tt.length;En++){const zn=Tt[En];if(zn&&!xn[zn]){const Un=ae.getUniformLocation(this.program,zn);Un&&(xn[zn]=Un)}}this.fixedUniforms=E(s,xn),this.terrainUniforms=((En,zn)=>({u_depth:new a.bE(En,zn.u_depth),u_terrain:new a.bE(En,zn.u_terrain),u_terrain_dim:new a.b7(En,zn.u_terrain_dim),u_terrain_matrix:new a.bG(En,zn.u_terrain_matrix),u_terrain_unpack:new a.bH(En,zn.u_terrain_unpack),u_terrain_exaggeration:new a.b7(En,zn.u_terrain_exaggeration)}))(s,xn),this.projectionUniforms=((En,zn)=>({u_projection_matrix:new a.bG(En,zn.u_projection_matrix),u_projection_tile_mercator_coords:new a.bH(En,zn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bH(En,zn.u_projection_clipping_plane),u_projection_transition:new a.b7(En,zn.u_projection_transition),u_projection_fallback_matrix:new a.bG(En,zn.u_projection_fallback_matrix)}))(s,xn),this.binderUniforms=x?x.getUniforms(s,xn):[]}draw(s,d,x,E,L,F,X,Q,ae,be,Ae,Pe,qe,Ze,dt,ft,pt,Tt,Nt){const kt=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(x),s.setStencilMode(E),s.setColorMode(L),s.setCullFace(F),Q){s.activeTexture.set(kt.TEXTURE2),kt.bindTexture(kt.TEXTURE_2D,Q.depthTexture),s.activeTexture.set(kt.TEXTURE3),kt.bindTexture(kt.TEXTURE_2D,Q.texture);for(const Wt in this.terrainUniforms)this.terrainUniforms[Wt].set(Q[Wt])}if(ae)for(const Wt in ae)this.projectionUniforms[du[Wt]].set(ae[Wt]);if(X)for(const Wt in this.fixedUniforms)this.fixedUniforms[Wt].set(X[Wt]);ft&&ft.setUniforms(s,this.binderUniforms,Ze,{zoom:dt});let Bt=0;switch(d){case kt.LINES:Bt=2;break;case kt.TRIANGLES:Bt=3;break;case kt.LINE_STRIP:Bt=1}for(const Wt of qe.get()){const Gt=Wt.vaos||(Wt.vaos={});(Gt[be]||(Gt[be]=new dc)).bind(s,this,Ae,ft?ft.getPaintVertexBuffers():[],Pe,Wt.vertexOffset,pt,Tt,Nt),kt.drawElements(d,Wt.primitiveLength*Bt,kt.UNSIGNED_SHORT,Wt.primitiveOffset*Bt*2)}}}function Mt(R,s,d){const x=1/a.av(d,1,s.transform.tileZoom),E=Math.pow(2,d.tileID.overscaledZ),L=d.tileSize*Math.pow(2,s.transform.tileZoom)/E,F=L*(d.tileID.canonical.x+d.tileID.wrap*E),X=L*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[x,R.fromScale,R.toScale],u_fade:R.t,u_pixel_coord_upper:[F>>16,X>>16],u_pixel_coord_lower:[65535&F,65535&X]}}const Zt=(R,s,d,x)=>{const E=R.style.light,L=E.properties.get("position"),F=[L.x,L.y,L.z],X=a.bK();E.properties.get("anchor")==="viewport"&&a.bL(X,R.transform.bearingInRadians),a.bM(F,F,X);const Q=R.transform.transformLightDirection(F),ae=E.properties.get("color");return{u_lightpos:F,u_lightpos_globe:Q,u_lightintensity:E.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+s,u_opacity:d,u_fill_translate:x}},yn=(R,s,d,x,E,L,F)=>a.e(Zt(R,s,d,x),Mt(L,R,F),{u_height_factor:-Math.pow(2,E.overscaledZ)/F.tileSize/8}),qn=(R,s,d,x)=>a.e(Mt(s,R,d),{u_fill_translate:x}),fr=(R,s)=>({u_world:R,u_fill_translate:s}),Or=(R,s,d,x,E)=>a.e(qn(R,s,d,E),{u_world:x}),Gr=(R,s,d,x,E)=>{const L=R.transform;let F,X,Q=0;if(d.paint.get("circle-pitch-alignment")==="map"){const ae=a.av(s,1,L.zoom);F=!0,X=[ae,ae],Q=ae/(a.Z*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*E}else F=!1,X=L.pixelsToGLUnits;return{u_camera_to_center_distance:L.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+F,u_device_pixel_ratio:R.pixelRatio,u_extrude_scale:X,u_globe_extrude_scale:Q,u_translate:x}},wi=R=>({u_pixel_extrude_scale:[1/R.width,1/R.height]}),oi=R=>({u_viewport_size:[R.width,R.height]}),Mi=(R,s=1)=>({u_color:R,u_overlay:0,u_overlay_scale:s}),ya=(R,s,d,x)=>{const E=a.av(R,1,s)/(a.Z*Math.pow(2,R.tileID.overscaledZ))*2*Math.PI*x;return{u_extrude_scale:a.av(R,1,s),u_intensity:d,u_globe_extrude_scale:E}},ka=(R,s,d,x)=>{const E=a.K();a.bN(E,0,R.width,R.height,0,0,1);const L=R.context.gl;return{u_matrix:E,u_world:[L.drawingBufferWidth,L.drawingBufferHeight],u_image:d,u_color_ramp:x,u_opacity:s.paint.get("heatmap-opacity")}},aa=(R,s,d)=>{const x=d.paint.get("hillshade-shadow-color"),E=d.paint.get("hillshade-highlight-color"),L=d.paint.get("hillshade-accent-color");let F=d.paint.get("hillshade-illumination-direction")*(Math.PI/180);return d.paint.get("hillshade-illumination-anchor")==="viewport"&&(F+=R.transform.bearingInRadians),{u_image:0,u_latrange:_o(0,s.tileID),u_light:[d.paint.get("hillshade-exaggeration"),F],u_shadow:x,u_highlight:E,u_accent:L}},yo=(R,s)=>{const d=s.stride,x=a.K();return a.bN(x,0,a.Z,-8192,0,0,1),a.L(x,x,[0,-8192,0]),{u_matrix:x,u_image:1,u_dimension:[d,d],u_zoom:R.overscaledZ,u_unpack:s.getUnpackVector()}};function _o(R,s){const d=Math.pow(2,s.canonical.z),x=s.canonical.y;return[new a.$(0,x/d).toLngLat().lat,new a.$(0,(x+1)/d).toLngLat().lat]}const So=(R,s,d,x)=>{const E=R.transform;return{u_translation:ql(R,s,d),u_ratio:x/a.av(s,1,E.zoom),u_device_pixel_ratio:R.pixelRatio,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},il=(R,s,d,x,E)=>a.e(So(R,s,d,x),{u_image:0,u_image_height:E}),Vs=(R,s,d,x,E)=>{const L=R.transform,F=Du(s,L);return{u_translation:ql(R,s,d),u_texsize:s.imageAtlasTexture.size,u_ratio:x/a.av(s,1,L.zoom),u_device_pixel_ratio:R.pixelRatio,u_image:0,u_scale:[F,E.fromScale,E.toScale],u_fade:E.t,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},Sh=(R,s,d,x,E,L)=>{const F=R.lineAtlas,X=Du(s,R.transform),Q=d.layout.get("line-cap")==="round",ae=F.getDash(E.from,Q),be=F.getDash(E.to,Q),Ae=ae.width*L.fromScale,Pe=be.width*L.toScale;return a.e(So(R,s,d,x),{u_patternscale_a:[X/Ae,-ae.height/2],u_patternscale_b:[X/Pe,-be.height/2],u_sdfgamma:F.width/(256*Math.min(Ae,Pe)*R.pixelRatio)/2,u_image:0,u_tex_y_a:ae.y,u_tex_y_b:be.y,u_mix:L.t})};function Du(R,s){return 1/a.av(R,1,s.tileZoom)}function ql(R,s,d){return a.aw(R.transform,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const pc=(R,s,d,x,E)=>{return{u_tl_parent:R,u_scale_parent:s,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(F=x.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(L=x.paint.get("raster-contrast"),L>0?1/(1-L):1+L),u_spin_weights:Hl(x.paint.get("raster-hue-rotate")),u_coords_top:[E[0].x,E[0].y,E[1].x,E[1].y],u_coords_bottom:[E[3].x,E[3].y,E[2].x,E[2].y]};var L,F};function Hl(R){R*=Math.PI/180;const s=Math.sin(R),d=Math.cos(R);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}const al=(R,s,d,x,E,L,F,X,Q,ae,be,Ae,Pe)=>{const qe=F.transform;return{u_is_size_zoom_constant:+(R==="constant"||R==="source"),u_is_size_feature_constant:+(R==="constant"||R==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:qe.cameraToCenterDistance,u_pitch:qe.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:qe.width/qe.height,u_fade_change:F.options.fadeDuration?F.symbolFadeChange:1,u_label_plane_matrix:X,u_coord_matrix:Q,u_is_text:+be,u_pitch_with_map:+x,u_is_along_line:E,u_is_variable_anchor:L,u_texsize:Ae,u_texture:0,u_translation:ae,u_pitched_scale:Pe}},Yu=(R,s,d,x,E,L,F,X,Q,ae,be,Ae,Pe,qe)=>{const Ze=F.transform;return a.e(al(R,s,d,x,E,L,F,X,Q,ae,be,Ae,qe),{u_gamma_scale:x?Math.cos(Ze.pitch*Math.PI/180)*Ze.cameraToCenterDistance:1,u_device_pixel_ratio:F.pixelRatio,u_is_halo:1})},Ra=(R,s,d,x,E,L,F,X,Q,ae,be,Ae,Pe)=>a.e(Yu(R,s,d,x,E,L,F,X,Q,ae,!0,be,0,Pe),{u_texsize_icon:Ae,u_texture_icon:1}),Ms=(R,s)=>({u_opacity:R,u_color:s}),Gs=(R,s,d,x,E)=>a.e(function(L,F,X,Q){const ae=X.imageManager.getPattern(L.from.toString()),be=X.imageManager.getPattern(L.to.toString()),{width:Ae,height:Pe}=X.imageManager.getPixelSize(),qe=Math.pow(2,Q.tileID.overscaledZ),Ze=Q.tileSize*Math.pow(2,X.transform.tileZoom)/qe,dt=Ze*(Q.tileID.canonical.x+Q.tileID.wrap*qe),ft=Ze*Q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:be.tl,u_pattern_br_b:be.br,u_texsize:[Ae,Pe],u_mix:F.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:be.displaySize,u_scale_a:F.fromScale,u_scale_b:F.toScale,u_tile_units_to_pixels:1/a.av(Q,1,X.transform.tileZoom),u_pixel_coord_upper:[dt>>16,ft>>16],u_pixel_coord_lower:[65535&dt,65535&ft]}}(d,E,s,x),{u_opacity:R}),pu=(R,s)=>{},mc={fillExtrusion:(R,s)=>({u_lightpos:new a.bI(R,s.u_lightpos),u_lightpos_globe:new a.bI(R,s.u_lightpos_globe),u_lightintensity:new a.b7(R,s.u_lightintensity),u_lightcolor:new a.bI(R,s.u_lightcolor),u_vertical_gradient:new a.b7(R,s.u_vertical_gradient),u_opacity:new a.b7(R,s.u_opacity),u_fill_translate:new a.bJ(R,s.u_fill_translate)}),fillExtrusionPattern:(R,s)=>({u_lightpos:new a.bI(R,s.u_lightpos),u_lightpos_globe:new a.bI(R,s.u_lightpos_globe),u_lightintensity:new a.b7(R,s.u_lightintensity),u_lightcolor:new a.bI(R,s.u_lightcolor),u_vertical_gradient:new a.b7(R,s.u_vertical_gradient),u_height_factor:new a.b7(R,s.u_height_factor),u_opacity:new a.b7(R,s.u_opacity),u_fill_translate:new a.bJ(R,s.u_fill_translate),u_image:new a.bE(R,s.u_image),u_texsize:new a.bJ(R,s.u_texsize),u_pixel_coord_upper:new a.bJ(R,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bJ(R,s.u_pixel_coord_lower),u_scale:new a.bI(R,s.u_scale),u_fade:new a.b7(R,s.u_fade)}),fill:(R,s)=>({u_fill_translate:new a.bJ(R,s.u_fill_translate)}),fillPattern:(R,s)=>({u_image:new a.bE(R,s.u_image),u_texsize:new a.bJ(R,s.u_texsize),u_pixel_coord_upper:new a.bJ(R,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bJ(R,s.u_pixel_coord_lower),u_scale:new a.bI(R,s.u_scale),u_fade:new a.b7(R,s.u_fade),u_fill_translate:new a.bJ(R,s.u_fill_translate)}),fillOutline:(R,s)=>({u_world:new a.bJ(R,s.u_world),u_fill_translate:new a.bJ(R,s.u_fill_translate)}),fillOutlinePattern:(R,s)=>({u_world:new a.bJ(R,s.u_world),u_image:new a.bE(R,s.u_image),u_texsize:new a.bJ(R,s.u_texsize),u_pixel_coord_upper:new a.bJ(R,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bJ(R,s.u_pixel_coord_lower),u_scale:new a.bI(R,s.u_scale),u_fade:new a.b7(R,s.u_fade),u_fill_translate:new a.bJ(R,s.u_fill_translate)}),circle:(R,s)=>({u_camera_to_center_distance:new a.b7(R,s.u_camera_to_center_distance),u_scale_with_map:new a.bE(R,s.u_scale_with_map),u_pitch_with_map:new a.bE(R,s.u_pitch_with_map),u_extrude_scale:new a.bJ(R,s.u_extrude_scale),u_device_pixel_ratio:new a.b7(R,s.u_device_pixel_ratio),u_globe_extrude_scale:new a.b7(R,s.u_globe_extrude_scale),u_translate:new a.bJ(R,s.u_translate)}),collisionBox:(R,s)=>({u_pixel_extrude_scale:new a.bJ(R,s.u_pixel_extrude_scale)}),collisionCircle:(R,s)=>({u_viewport_size:new a.bJ(R,s.u_viewport_size)}),debug:(R,s)=>({u_color:new a.bF(R,s.u_color),u_overlay:new a.bE(R,s.u_overlay),u_overlay_scale:new a.b7(R,s.u_overlay_scale)}),depth:pu,clippingMask:pu,heatmap:(R,s)=>({u_extrude_scale:new a.b7(R,s.u_extrude_scale),u_intensity:new a.b7(R,s.u_intensity),u_globe_extrude_scale:new a.b7(R,s.u_globe_extrude_scale)}),heatmapTexture:(R,s)=>({u_matrix:new a.bG(R,s.u_matrix),u_world:new a.bJ(R,s.u_world),u_image:new a.bE(R,s.u_image),u_color_ramp:new a.bE(R,s.u_color_ramp),u_opacity:new a.b7(R,s.u_opacity)}),hillshade:(R,s)=>({u_image:new a.bE(R,s.u_image),u_latrange:new a.bJ(R,s.u_latrange),u_light:new a.bJ(R,s.u_light),u_shadow:new a.bF(R,s.u_shadow),u_highlight:new a.bF(R,s.u_highlight),u_accent:new a.bF(R,s.u_accent)}),hillshadePrepare:(R,s)=>({u_matrix:new a.bG(R,s.u_matrix),u_image:new a.bE(R,s.u_image),u_dimension:new a.bJ(R,s.u_dimension),u_zoom:new a.b7(R,s.u_zoom),u_unpack:new a.bH(R,s.u_unpack)}),line:(R,s)=>({u_translation:new a.bJ(R,s.u_translation),u_ratio:new a.b7(R,s.u_ratio),u_device_pixel_ratio:new a.b7(R,s.u_device_pixel_ratio),u_units_to_pixels:new a.bJ(R,s.u_units_to_pixels)}),lineGradient:(R,s)=>({u_translation:new a.bJ(R,s.u_translation),u_ratio:new a.b7(R,s.u_ratio),u_device_pixel_ratio:new a.b7(R,s.u_device_pixel_ratio),u_units_to_pixels:new a.bJ(R,s.u_units_to_pixels),u_image:new a.bE(R,s.u_image),u_image_height:new a.b7(R,s.u_image_height)}),linePattern:(R,s)=>({u_translation:new a.bJ(R,s.u_translation),u_texsize:new a.bJ(R,s.u_texsize),u_ratio:new a.b7(R,s.u_ratio),u_device_pixel_ratio:new a.b7(R,s.u_device_pixel_ratio),u_image:new a.bE(R,s.u_image),u_units_to_pixels:new a.bJ(R,s.u_units_to_pixels),u_scale:new a.bI(R,s.u_scale),u_fade:new a.b7(R,s.u_fade)}),lineSDF:(R,s)=>({u_translation:new a.bJ(R,s.u_translation),u_ratio:new a.b7(R,s.u_ratio),u_device_pixel_ratio:new a.b7(R,s.u_device_pixel_ratio),u_units_to_pixels:new a.bJ(R,s.u_units_to_pixels),u_patternscale_a:new a.bJ(R,s.u_patternscale_a),u_patternscale_b:new a.bJ(R,s.u_patternscale_b),u_sdfgamma:new a.b7(R,s.u_sdfgamma),u_image:new a.bE(R,s.u_image),u_tex_y_a:new a.b7(R,s.u_tex_y_a),u_tex_y_b:new a.b7(R,s.u_tex_y_b),u_mix:new a.b7(R,s.u_mix)}),raster:(R,s)=>({u_tl_parent:new a.bJ(R,s.u_tl_parent),u_scale_parent:new a.b7(R,s.u_scale_parent),u_buffer_scale:new a.b7(R,s.u_buffer_scale),u_fade_t:new a.b7(R,s.u_fade_t),u_opacity:new a.b7(R,s.u_opacity),u_image0:new a.bE(R,s.u_image0),u_image1:new a.bE(R,s.u_image1),u_brightness_low:new a.b7(R,s.u_brightness_low),u_brightness_high:new a.b7(R,s.u_brightness_high),u_saturation_factor:new a.b7(R,s.u_saturation_factor),u_contrast_factor:new a.b7(R,s.u_contrast_factor),u_spin_weights:new a.bI(R,s.u_spin_weights),u_coords_top:new a.bH(R,s.u_coords_top),u_coords_bottom:new a.bH(R,s.u_coords_bottom)}),symbolIcon:(R,s)=>({u_is_size_zoom_constant:new a.bE(R,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bE(R,s.u_is_size_feature_constant),u_size_t:new a.b7(R,s.u_size_t),u_size:new a.b7(R,s.u_size),u_camera_to_center_distance:new a.b7(R,s.u_camera_to_center_distance),u_pitch:new a.b7(R,s.u_pitch),u_rotate_symbol:new a.bE(R,s.u_rotate_symbol),u_aspect_ratio:new a.b7(R,s.u_aspect_ratio),u_fade_change:new a.b7(R,s.u_fade_change),u_label_plane_matrix:new a.bG(R,s.u_label_plane_matrix),u_coord_matrix:new a.bG(R,s.u_coord_matrix),u_is_text:new a.bE(R,s.u_is_text),u_pitch_with_map:new a.bE(R,s.u_pitch_with_map),u_is_along_line:new a.bE(R,s.u_is_along_line),u_is_variable_anchor:new a.bE(R,s.u_is_variable_anchor),u_texsize:new a.bJ(R,s.u_texsize),u_texture:new a.bE(R,s.u_texture),u_translation:new a.bJ(R,s.u_translation),u_pitched_scale:new a.b7(R,s.u_pitched_scale)}),symbolSDF:(R,s)=>({u_is_size_zoom_constant:new a.bE(R,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bE(R,s.u_is_size_feature_constant),u_size_t:new a.b7(R,s.u_size_t),u_size:new a.b7(R,s.u_size),u_camera_to_center_distance:new a.b7(R,s.u_camera_to_center_distance),u_pitch:new a.b7(R,s.u_pitch),u_rotate_symbol:new a.bE(R,s.u_rotate_symbol),u_aspect_ratio:new a.b7(R,s.u_aspect_ratio),u_fade_change:new a.b7(R,s.u_fade_change),u_label_plane_matrix:new a.bG(R,s.u_label_plane_matrix),u_coord_matrix:new a.bG(R,s.u_coord_matrix),u_is_text:new a.bE(R,s.u_is_text),u_pitch_with_map:new a.bE(R,s.u_pitch_with_map),u_is_along_line:new a.bE(R,s.u_is_along_line),u_is_variable_anchor:new a.bE(R,s.u_is_variable_anchor),u_texsize:new a.bJ(R,s.u_texsize),u_texture:new a.bE(R,s.u_texture),u_gamma_scale:new a.b7(R,s.u_gamma_scale),u_device_pixel_ratio:new a.b7(R,s.u_device_pixel_ratio),u_is_halo:new a.bE(R,s.u_is_halo),u_translation:new a.bJ(R,s.u_translation),u_pitched_scale:new a.b7(R,s.u_pitched_scale)}),symbolTextAndIcon:(R,s)=>({u_is_size_zoom_constant:new a.bE(R,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bE(R,s.u_is_size_feature_constant),u_size_t:new a.b7(R,s.u_size_t),u_size:new a.b7(R,s.u_size),u_camera_to_center_distance:new a.b7(R,s.u_camera_to_center_distance),u_pitch:new a.b7(R,s.u_pitch),u_rotate_symbol:new a.bE(R,s.u_rotate_symbol),u_aspect_ratio:new a.b7(R,s.u_aspect_ratio),u_fade_change:new a.b7(R,s.u_fade_change),u_label_plane_matrix:new a.bG(R,s.u_label_plane_matrix),u_coord_matrix:new a.bG(R,s.u_coord_matrix),u_is_text:new a.bE(R,s.u_is_text),u_pitch_with_map:new a.bE(R,s.u_pitch_with_map),u_is_along_line:new a.bE(R,s.u_is_along_line),u_is_variable_anchor:new a.bE(R,s.u_is_variable_anchor),u_texsize:new a.bJ(R,s.u_texsize),u_texsize_icon:new a.bJ(R,s.u_texsize_icon),u_texture:new a.bE(R,s.u_texture),u_texture_icon:new a.bE(R,s.u_texture_icon),u_gamma_scale:new a.b7(R,s.u_gamma_scale),u_device_pixel_ratio:new a.b7(R,s.u_device_pixel_ratio),u_is_halo:new a.bE(R,s.u_is_halo),u_translation:new a.bJ(R,s.u_translation),u_pitched_scale:new a.b7(R,s.u_pitched_scale)}),background:(R,s)=>({u_opacity:new a.b7(R,s.u_opacity),u_color:new a.bF(R,s.u_color)}),backgroundPattern:(R,s)=>({u_opacity:new a.b7(R,s.u_opacity),u_image:new a.bE(R,s.u_image),u_pattern_tl_a:new a.bJ(R,s.u_pattern_tl_a),u_pattern_br_a:new a.bJ(R,s.u_pattern_br_a),u_pattern_tl_b:new a.bJ(R,s.u_pattern_tl_b),u_pattern_br_b:new a.bJ(R,s.u_pattern_br_b),u_texsize:new a.bJ(R,s.u_texsize),u_mix:new a.b7(R,s.u_mix),u_pattern_size_a:new a.bJ(R,s.u_pattern_size_a),u_pattern_size_b:new a.bJ(R,s.u_pattern_size_b),u_scale_a:new a.b7(R,s.u_scale_a),u_scale_b:new a.b7(R,s.u_scale_b),u_pixel_coord_upper:new a.bJ(R,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bJ(R,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.b7(R,s.u_tile_units_to_pixels)}),terrain:(R,s)=>({u_texture:new a.bE(R,s.u_texture),u_ele_delta:new a.b7(R,s.u_ele_delta),u_fog_matrix:new a.bG(R,s.u_fog_matrix),u_fog_color:new a.bF(R,s.u_fog_color),u_fog_ground_blend:new a.b7(R,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.b7(R,s.u_fog_ground_blend_opacity),u_horizon_color:new a.bF(R,s.u_horizon_color),u_horizon_fog_blend:new a.b7(R,s.u_horizon_fog_blend),u_is_globe_mode:new a.b7(R,s.u_is_globe_mode)}),terrainDepth:(R,s)=>({u_ele_delta:new a.b7(R,s.u_ele_delta)}),terrainCoords:(R,s)=>({u_texture:new a.bE(R,s.u_texture),u_terrain_coords_id:new a.b7(R,s.u_terrain_coords_id),u_ele_delta:new a.b7(R,s.u_ele_delta)}),projectionErrorMeasurement:(R,s)=>({u_input:new a.b7(R,s.u_input),u_output_expected:new a.b7(R,s.u_output_expected)}),atmosphere:(R,s)=>({u_sun_pos:new a.bI(R,s.u_sun_pos),u_atmosphere_blend:new a.b7(R,s.u_atmosphere_blend),u_globe_position:new a.bI(R,s.u_globe_position),u_globe_radius:new a.b7(R,s.u_globe_radius),u_inv_proj_matrix:new a.bG(R,s.u_inv_proj_matrix)}),sky:(R,s)=>({u_sky_color:new a.bF(R,s.u_sky_color),u_horizon_color:new a.bF(R,s.u_horizon_color),u_horizon:new a.bJ(R,s.u_horizon),u_horizon_normal:new a.bJ(R,s.u_horizon_normal),u_sky_horizon_blend:new a.b7(R,s.u_sky_horizon_blend),u_sky_blend:new a.b7(R,s.u_sky_blend)})};class ss{constructor(s,d,x){this.context=s;const E=s.gl;this.buffer=E.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const zc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $l{constructor(s,d,x,E){this.length=d.length,this.attributes=x,this.itemSize=d.bytesPerElement,this.dynamicDraw=E,this.context=s;const L=s.gl;this.buffer=L.createBuffer(),s.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let x=0;x<this.attributes.length;x++){const E=d.attributes[this.attributes[x].name];E!==void 0&&s.enableVertexAttribArray(E)}}setVertexAttribPointers(s,d,x){for(let E=0;E<this.attributes.length;E++){const L=this.attributes[E],F=d.attributes[L.name];F!==void 0&&s.vertexAttribPointer(F,L.components,s[zc[L.type]],!1,this.itemSize,L.offset+this.itemSize*(x||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class qi{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Al extends qi{getDefault(){return a.b6.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class bo extends qi{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Ku extends qi{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Eh extends qi{getDefault(){return[!0,!0,!0,!0]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class ln extends qi{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class On extends qi{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class _r extends qi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Dr extends qi{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class na extends qi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class Si extends qi{getDefault(){return[0,1]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Xi extends qi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class la extends qi{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Fa extends qi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class si extends qi{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Qa extends qi{getDefault(){return a.b6.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class wa extends qi{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Va extends qi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class Ba extends qi{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class As extends qi{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Go extends qi{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class qs extends qi{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class Cs extends qi{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class ol extends qi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class Cl extends qi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class mu extends qi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class gc extends qi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Zi extends qi{getDefault(){return null}set(s){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Br extends qi{getDefault(){return null}set(s){var d;if(s===this.current&&!this.dirty)return;const x=this.gl;vo(x)?x.bindVertexArray(s):(d=x.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class qo extends qi{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Da extends qi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class zi extends qi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class bi extends qi{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class Sa extends bi{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class La extends bi{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class ds extends bi{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}const gu="Framebuffer is not complete";class Lo{constructor(s,d,x,E,L){this.context=s,this.width=d,this.height=x;const F=s.gl,X=this.framebuffer=F.createFramebuffer();if(this.colorAttachment=new Sa(s,X),E)this.depthAttachment=L?new ds(s,X):new La(s,X);else if(L)throw new Error("Stencil cannot be set without depth");if(F.checkFramebufferStatus(F.FRAMEBUFFER)!==F.FRAMEBUFFER_COMPLETE)throw new Error(gu)}destroy(){const s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){const x=this.depthAttachment.get();x&&s.deleteRenderbuffer(x)}s.deleteFramebuffer(this.framebuffer)}}class sl{constructor(s){var d,x;if(this.gl=s,this.clearColor=new Al(this),this.clearDepth=new bo(this),this.clearStencil=new Ku(this),this.colorMask=new Eh(this),this.depthMask=new ln(this),this.stencilMask=new On(this),this.stencilFunc=new _r(this),this.stencilOp=new Dr(this),this.stencilTest=new na(this),this.depthRange=new Si(this),this.depthTest=new Xi(this),this.depthFunc=new la(this),this.blend=new Fa(this),this.blendFunc=new si(this),this.blendColor=new Qa(this),this.blendEquation=new wa(this),this.cullFace=new Va(this),this.cullFaceSide=new Ba(this),this.frontFace=new As(this),this.program=new Go(this),this.activeTexture=new qs(this),this.viewport=new Cs(this),this.bindFramebuffer=new ol(this),this.bindRenderbuffer=new Cl(this),this.bindTexture=new mu(this),this.bindVertexBuffer=new gc(this),this.bindElementBuffer=new Zi(this),this.bindVertexArray=new Br(this),this.pixelStoreUnpack=new qo(this),this.pixelStoreUnpackPremultiplyAlpha=new Da(this),this.pixelStoreUnpackFlipY=new zi(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),vo(s)){this.HALF_FLOAT=s.HALF_FLOAT;const E=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=s.RGBA16F)!==null&&d!==void 0?d:E==null?void 0:E.RGBA16F_EXT,this.RGB16F=(x=s.RGB16F)!==null&&x!==void 0?x:E==null?void 0:E.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const E=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=E==null?void 0:E.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new ss(this,s,d)}createVertexBuffer(s,d,x){return new $l(this,s,d,x)}createRenderbuffer(s,d,x){const E=this.gl,L=E.createRenderbuffer();return this.bindRenderbuffer.set(L),E.renderbufferStorage(E.RENDERBUFFER,s,d,x),this.bindRenderbuffer.set(null),L}createFramebuffer(s,d,x,E){return new Lo(this,s,d,x,E)}clear({color:s,depth:d,stencil:x}){const E=this.gl;let L=0;s&&(L|=E.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(L|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),x!==void 0&&(L|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),E.clear(L)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){a.bB(s.blendFunction,di.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return vo(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var d;return vo(this.gl)?this.gl.deleteVertexArray(s):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let Pl;function Hs(R,s,d,x,E){const L=R.context,F=R.transform,X=L.gl,Q=R.useProgram("collisionBox"),ae=[];let be=0,Ae=0;for(let pt=0;pt<x.length;pt++){const Tt=x[pt],Nt=s.getTile(Tt).getBucket(d);if(!Nt)continue;const kt=E?Nt.textCollisionBox:Nt.iconCollisionBox,Bt=Nt.collisionCircleArray;Bt.length>0&&(ae.push({circleArray:Bt,circleOffset:Ae,coord:Tt}),be+=Bt.length/4,Ae=be),kt&&Q.draw(L,X.LINES,Ir.disabled,ji.disabled,R.colorModeForRenderPass(),_i.disabled,wi(R.transform),R.style.map.terrain&&R.style.map.terrain.getTerrainData(Tt),F.getProjectionData({overscaledTileID:Tt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,null,R.transform.zoom,null,null,kt.collisionVertexBuffer)}if(!E||!ae.length)return;const Pe=R.useProgram("collisionCircle"),qe=new a.bO;qe.resize(4*be),qe._trim();let Ze=0;for(const pt of ae)for(let Tt=0;Tt<pt.circleArray.length/4;Tt++){const Nt=4*Tt,kt=pt.circleArray[Nt+0],Bt=pt.circleArray[Nt+1],Wt=pt.circleArray[Nt+2],Gt=pt.circleArray[Nt+3];qe.emplace(Ze++,kt,Bt,Wt,Gt,0),qe.emplace(Ze++,kt,Bt,Wt,Gt,1),qe.emplace(Ze++,kt,Bt,Wt,Gt,2),qe.emplace(Ze++,kt,Bt,Wt,Gt,3)}(!Pl||Pl.length<2*be)&&(Pl=function(pt){const Tt=2*pt,Nt=new a.bQ;Nt.resize(Tt),Nt._trim();for(let kt=0;kt<Tt;kt++){const Bt=6*kt;Nt.uint16[Bt+0]=4*kt+0,Nt.uint16[Bt+1]=4*kt+1,Nt.uint16[Bt+2]=4*kt+2,Nt.uint16[Bt+3]=4*kt+2,Nt.uint16[Bt+4]=4*kt+3,Nt.uint16[Bt+5]=4*kt+0}return Nt}(be));const dt=L.createIndexBuffer(Pl,!0),ft=L.createVertexBuffer(qe,a.bP.members,!0);for(const pt of ae){const Tt=oi(R.transform);Pe.draw(L,X.TRIANGLES,Ir.disabled,ji.disabled,R.colorModeForRenderPass(),_i.disabled,Tt,R.style.map.terrain&&R.style.map.terrain.getTerrainData(pt.coord),null,d.id,ft,dt,a.aF.simpleSegment(0,2*pt.circleOffset,pt.circleArray.length,pt.circleArray.length/2),null,R.transform.zoom,null,null,null)}ft.destroy(),dt.destroy()}const ls=a.as(new Float32Array(16));function Ga(R,s,d,x,E,L){const{horizontalAlign:F,verticalAlign:X}=a.aA(R);return new a.P((-(F-.5)*s/E+x[0])*L,(-(X-.5)*d/E+x[1])*L)}function $s(R,s,d,x,E,L){const F=s.tileAnchorPoint.add(new a.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let X=x.mult(L);d||(X=X.rotate(-E));const Q=F.add(X);return Dt(Q.x,Q.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(d){const X=At(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(R),Q=Math.atan(X.y/X.x)+(X.x<0?Math.PI:0);return R.add(x.rotate(Q))}return R.add(x)}function Rl(R,s,d,x,E,L,F,X,Q,ae,be,Ae){const Pe=R.text.placedSymbolArray,qe=R.text.dynamicLayoutVertexArray,Ze=R.icon.dynamicLayoutVertexArray,dt={};qe.clear();for(let ft=0;ft<Pe.length;ft++){const pt=Pe.get(ft),Tt=pt.hidden||!pt.crossTileID||R.allowVerticalPlacement&&!pt.placedOrientation?null:x[pt.crossTileID];if(Tt){const Nt=new a.P(pt.anchorX,pt.anchorY),kt={getElevation:Ae,width:E.width,height:E.height,pitchedLabelPlaneMatrix:L,pitchWithMap:d,transform:E,tileAnchorPoint:Nt,translation:ae,unwrappedTileID:be},Bt=d?Hn(Nt.x,Nt.y,kt):At(Nt.x,Nt.y,kt),Wt=zt(E.cameraToCenterDistance,Bt.signedDistanceFromCamera);let Gt=a.ah(R.textSizeData,X,pt)*Wt/a.au;d&&(Gt*=R.tilePixelRatio/F);const{width:xn,height:En,anchor:zn,textOffset:Un,textBoxScale:kn}=Tt,wr=Ga(zn,xn,En,Un,kn,Gt),dr=E.getPitchedTextCorrection(Nt.x+ae[0],Nt.y+ae[1],be),Kn=$s(Bt.point,kt,s,wr,-E.bearingInRadians,dr),Nr=R.allowVerticalPlacement&&pt.placedOrientation===a.ag.vertical?Math.PI/2:0;for(let Fr=0;Fr<pt.numGlyphs;Fr++)a.an(qe,Kn,Nr);Q&&pt.associatedIconIndex>=0&&(dt[pt.associatedIconIndex]={shiftedAnchor:Kn,angle:Nr})}else ci(pt.numGlyphs,qe)}if(Q){Ze.clear();const ft=R.icon.placedSymbolArray;for(let pt=0;pt<ft.length;pt++){const Tt=ft.get(pt);if(Tt.hidden)ci(Tt.numGlyphs,Ze);else{const Nt=dt[pt];if(Nt)for(let kt=0;kt<Tt.numGlyphs;kt++)a.an(Ze,Nt.shiftedAnchor,Nt.angle);else ci(Tt.numGlyphs,Ze)}}R.icon.dynamicLayoutVertexBuffer.updateData(Ze)}R.text.dynamicLayoutVertexBuffer.updateData(qe)}function Lu(R,s,d){return d.iconsInText&&s?"symbolTextAndIcon":R?"symbolSDF":"symbolIcon"}function vu(R,s,d,x,E,L,F,X,Q,ae,be,Ae,Pe){const qe=R.context,Ze=qe.gl,dt=R.transform,ft=X==="map",pt=Q==="map",Tt=X!=="viewport"&&d.layout.get("symbol-placement")!=="point",Nt=ft&&!pt&&!Tt,kt=!d.layout.get("symbol-sort-key").isConstant();let Bt=!1;const Wt=R.getDepthModeForSublayer(0,Ir.ReadOnly),Gt=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),xn=[],En=dt.getCircleRadiusCorrection();for(const zn of x){const Un=s.getTile(zn),kn=Un.getBucket(d);if(!kn)continue;const wr=E?kn.text:kn.icon;if(!wr||!wr.segments.get().length||!wr.hasVisibleVertices)continue;const dr=wr.programConfigurations.get(d.id),Kn=E||kn.sdfIcons,Nr=E?kn.textSizeData:kn.iconSizeData,Fr=pt||dt.pitch!==0,fa=R.useProgram(Lu(Kn,E,kn),dr),Za=a.af(Nr,dt.zoom),za=R.style.map.terrain&&R.style.map.terrain.getTerrainData(zn);let Ua,Ea,oa,Ia,ps=[0,0],Ya=null;if(E)Ea=Un.glyphAtlasTexture,oa=Ze.LINEAR,Ua=Un.glyphAtlasTexture.size,kn.iconsInText&&(ps=Un.imageAtlasTexture.size,Ya=Un.imageAtlasTexture,Ia=Fr||R.options.rotating||R.options.zooming||Nr.kind==="composite"||Nr.kind==="camera"?Ze.LINEAR:Ze.NEAREST);else{const io=d.layout.get("icon-size").constantOr(0)!==1||kn.iconsNeedLinear;Ea=Un.imageAtlasTexture,oa=Kn||R.options.rotating||R.options.zooming||io||Fr?Ze.LINEAR:Ze.NEAREST,Ua=Un.imageAtlasTexture.size}const ho=a.av(Un,1,R.transform.zoom),Ka=ut(ft,R.transform,ho),hl=a.K();a.ai(hl,Ka);const Ql=lt(pt,ft,R.transform,ho),cs=a.aw(dt,Un,L,F),hs=dt.getProjectionData({overscaledTileID:zn,applyGlobeMatrix:!Pe,applyTerrainMatrix:!0}),Il=Gt&&kn.hasTextData(),eu=d.layout.get("icon-text-fit")!=="none"&&Il&&kn.hasIconData();if(Tt){const io=R.style.map.terrain?(Is,Os)=>R.style.map.terrain.getElevation(zn,Is,Os):null,Ja=d.layout.get("text-rotation-alignment")==="map";qt(kn,R,E,Ka,hl,pt,ae,Ja,zn.toUnwrapped(),dt.width,dt.height,cs,io)}const Uu=E&&Gt||eu,tu=Tt||Uu?ls:pt?Ka:R.transform.clipSpaceToPixelsMatrix,tc=Kn&&d.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let nu;nu=Kn?kn.iconsInText?Ra(Nr.kind,Za,Nt,pt,Tt,Uu,R,tu,Ql,cs,Ua,ps,En):Yu(Nr.kind,Za,Nt,pt,Tt,Uu,R,tu,Ql,cs,E,Ua,0,En):al(Nr.kind,Za,Nt,pt,Tt,Uu,R,tu,Ql,cs,E,Ua,En);const Ol={program:fa,buffers:wr,uniformValues:nu,projectionData:hs,atlasTexture:Ea,atlasTextureIcon:Ya,atlasInterpolation:oa,atlasInterpolationIcon:Ia,isSDF:Kn,hasHalo:tc};if(kt&&kn.canOverlap){Bt=!0;const io=wr.segments.get();for(const Ja of io)xn.push({segments:new a.aF([Ja]),sortKey:Ja.sortKey,state:Ol,terrainData:za})}else xn.push({segments:wr.segments,sortKey:0,state:Ol,terrainData:za})}Bt&&xn.sort((zn,Un)=>zn.sortKey-Un.sortKey);for(const zn of xn){const Un=zn.state;if(qe.activeTexture.set(Ze.TEXTURE0),Un.atlasTexture.bind(Un.atlasInterpolation,Ze.CLAMP_TO_EDGE),Un.atlasTextureIcon&&(qe.activeTexture.set(Ze.TEXTURE1),Un.atlasTextureIcon&&Un.atlasTextureIcon.bind(Un.atlasInterpolationIcon,Ze.CLAMP_TO_EDGE)),Un.isSDF){const kn=Un.uniformValues;Un.hasHalo&&(kn.u_is_halo=1,Ps(Un.buffers,zn.segments,d,R,Un.program,Wt,be,Ae,kn,Un.projectionData,zn.terrainData)),kn.u_is_halo=0}Ps(Un.buffers,zn.segments,d,R,Un.program,Wt,be,Ae,Un.uniformValues,Un.projectionData,zn.terrainData)}}function Ps(R,s,d,x,E,L,F,X,Q,ae,be){const Ae=x.context;E.draw(Ae,Ae.gl.TRIANGLES,L,F,X,_i.backCCW,Q,be,ae,d.id,R.layoutVertexBuffer,R.indexBuffer,s,d.paint,x.transform.zoom,R.programConfigurations.get(d.id),R.dynamicLayoutVertexBuffer,R.opacityVertexBuffer)}function Wl(R,s,d,x,E){const L=R.context,F=L.gl,X=ji.disabled,Q=new di([F.ONE,F.ONE],a.b6.transparent,[!0,!0,!0,!0]),ae=s.getBucket(d);if(!ae)return;const be=x.key;let Ae=d.heatmapFbos.get(be);Ae||(Ae=Dl(L,s.tileSize,s.tileSize),d.heatmapFbos.set(be,Ae)),L.bindFramebuffer.set(Ae.framebuffer),L.viewport.set([0,0,s.tileSize,s.tileSize]),L.clear({color:a.b6.transparent});const Pe=ae.programConfigurations.get(d.id),qe=R.useProgram("heatmap",Pe,!E),Ze=R.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),dt=R.style.map.terrain.getTerrainData(x);qe.draw(L,F.TRIANGLES,Ir.disabled,X,Q,_i.disabled,ya(s,R.transform.zoom,d.paint.get("heatmap-intensity"),1),dt,Ze,d.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,d.paint,R.transform.zoom,Pe)}function Uc(R,s,d,x,E){const L=R.context,F=L.gl,X=R.transform;L.setColorMode(R.colorModeForRenderPass());const Q=Xl(L,s),ae=d.key,be=s.heatmapFbos.get(ae);if(!be)return;L.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,be.colorAttachment.get()),L.activeTexture.set(F.TEXTURE1),Q.bind(F.LINEAR,F.CLAMP_TO_EDGE);const Ae=X.getProjectionData({overscaledTileID:d,applyTerrainMatrix:E,applyGlobeMatrix:!x});R.useProgram("heatmapTexture").draw(L,F.TRIANGLES,Ir.disabled,ji.disabled,R.colorModeForRenderPass(),_i.disabled,ka(R,s,0,1),null,Ae,s.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments,s.paint,X.zoom),be.destroy(),s.heatmapFbos.delete(ae)}function Dl(R,s,d){var x,E;const L=R.gl,F=L.createTexture();L.bindTexture(L.TEXTURE_2D,F),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.LINEAR),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.LINEAR);const X=(x=R.HALF_FLOAT)!==null&&x!==void 0?x:L.UNSIGNED_BYTE,Q=(E=R.RGBA16F)!==null&&E!==void 0?E:L.RGBA;L.texImage2D(L.TEXTURE_2D,0,Q,s,d,0,L.RGBA,X,null);const ae=R.createFramebuffer(s,d,!1,!1);return ae.colorAttachment.set(F),ae}function Xl(R,s){return s.colorRampTexture||(s.colorRampTexture=new Y(R,s.colorRamp,R.gl.RGBA)),s.colorRampTexture}function Iu(R,s,d,x,E){if(!d||!x||!x.imageAtlas)return;const L=x.imageAtlas.patternPositions;let F=L[d.to.toString()],X=L[d.from.toString()];if(!F&&X&&(F=X),!X&&F&&(X=F),!F||!X){const Q=E.getPaintProperty(s);F=L[Q],X=L[Q]}F&&X&&R.setConstantPatternPositions(F,X)}function Jh(R,s,d,x,E,L,F,X){const Q=R.context.gl,ae="fill-pattern",be=d.paint.get(ae),Ae=be&&be.constantOr(1),Pe=d.getCrossfadeParameters();let qe,Ze,dt,ft,pt;const Tt=R.transform,Nt=d.paint.get("fill-translate"),kt=d.paint.get("fill-translate-anchor");F?(Ze=Ae&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",qe=Q.LINES):(Ze=Ae?"fillPattern":"fill",qe=Q.TRIANGLES);const Bt=be.constantOr(null);for(const Wt of x){const Gt=s.getTile(Wt);if(Ae&&!Gt.patternsLoaded())continue;const xn=Gt.getBucket(d);if(!xn)continue;const En=xn.programConfigurations.get(d.id),zn=R.useProgram(Ze,En),Un=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Wt);Ae&&(R.context.activeTexture.set(Q.TEXTURE0),Gt.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),En.updatePaintBuffers(Pe)),Iu(En,ae,Bt,Gt,d);const kn=Tt.getProjectionData({overscaledTileID:Wt,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),wr=a.aw(Tt,Gt,Nt,kt);if(F){ft=xn.indexBuffer2,pt=xn.segments2;const Kn=[Q.drawingBufferWidth,Q.drawingBufferHeight];dt=Ze==="fillOutlinePattern"&&Ae?Or(R,Pe,Gt,Kn,wr):fr(Kn,wr)}else ft=xn.indexBuffer,pt=xn.segments,dt=Ae?qn(R,Pe,Gt,wr):{u_fill_translate:wr};let dr;if(R.renderPass==="translucent"&&X){const[Kn]=R.getStencilConfigForOverlapAndUpdateStencilID(x);dr=Kn[Wt.overscaledZ]}else dr=R.stencilModeForClipping(Wt);zn.draw(R.context,qe,E,dr,L,_i.backCCW,dt,Un,kn,d.id,xn.layoutVertexBuffer,ft,pt,d.paint,R.transform.zoom,En)}}function nh(R,s,d,x,E,L,F,X){const Q=R.context,ae=Q.gl,be="fill-extrusion-pattern",Ae=d.paint.get(be),Pe=Ae.constantOr(1),qe=d.getCrossfadeParameters(),Ze=d.paint.get("fill-extrusion-opacity"),dt=Ae.constantOr(null),ft=R.transform;for(const pt of x){const Tt=s.getTile(pt),Nt=Tt.getBucket(d);if(!Nt)continue;const kt=R.style.map.terrain&&R.style.map.terrain.getTerrainData(pt),Bt=Nt.programConfigurations.get(d.id),Wt=R.useProgram(Pe?"fillExtrusionPattern":"fillExtrusion",Bt);Pe&&(R.context.activeTexture.set(ae.TEXTURE0),Tt.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Bt.updatePaintBuffers(qe));const Gt=ft.getProjectionData({overscaledTileID:pt,applyGlobeMatrix:!X,applyTerrainMatrix:!0});Iu(Bt,be,dt,Tt,d);const xn=a.aw(ft,Tt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),En=d.paint.get("fill-extrusion-vertical-gradient"),zn=Pe?yn(R,En,Ze,xn,pt,qe,Tt):Zt(R,En,Ze,xn);Wt.draw(Q,Q.gl.TRIANGLES,E,L,F,_i.backCCW,zn,kt,Gt,d.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,d.paint,R.transform.zoom,Bt,R.style.map.terrain&&Nt.centroidVertexBuffer)}}function Th(R,s,d,x,E,L,F,X,Q){var ae;const be=R.style.projection,Ae=R.context,Pe=R.transform,qe=Ae.gl,Ze=R.useProgram("hillshade"),dt=!R.options.moving;for(const ft of x){const pt=s.getTile(ft),Tt=pt.fbo;if(!Tt)continue;const Nt=be.getMeshFromTileID(Ae,ft.canonical,X,!0,"raster"),kt=(ae=R.style.map.terrain)===null||ae===void 0?void 0:ae.getTerrainData(ft);Ae.activeTexture.set(qe.TEXTURE0),qe.bindTexture(qe.TEXTURE_2D,Tt.colorAttachment.get());const Bt=Pe.getProjectionData({overscaledTileID:ft,aligned:dt,applyGlobeMatrix:!Q,applyTerrainMatrix:!0});Ze.draw(Ae,qe.TRIANGLES,L,E[ft.overscaledZ],F,_i.backCCW,aa(R,pt,d),kt,Bt,d.id,Nt.vertexBuffer,Nt.indexBuffer,Nt.segments)}}const Rs=[new a.P(0,0),new a.P(a.Z,0),new a.P(a.Z,a.Z),new a.P(0,a.Z)];function Ho(R,s,d,x,E,L,F,X,Q=!1,ae=!1){const be=x[x.length-1].overscaledZ,Ae=R.context,Pe=Ae.gl,qe=R.useProgram("raster"),Ze=R.transform,dt=R.style.projection,ft=R.colorModeForRenderPass(),pt=!R.options.moving;for(const Tt of x){const Nt=R.getDepthModeForSublayer(Tt.overscaledZ-be,d.paint.get("raster-opacity")===1?Ir.ReadWrite:Ir.ReadOnly,Pe.LESS),kt=s.getTile(Tt);kt.registerFadeDuration(d.paint.get("raster-fade-duration"));const Bt=s.findLoadedParent(Tt,0),Wt=s.findLoadedSibling(Tt),Gt=hi(kt,Bt||Wt||null,s,d,R.transform,R.style.map.terrain);let xn,En;const zn=d.paint.get("raster-resampling")==="nearest"?Pe.NEAREST:Pe.LINEAR;Ae.activeTexture.set(Pe.TEXTURE0),kt.texture.bind(zn,Pe.CLAMP_TO_EDGE,Pe.LINEAR_MIPMAP_NEAREST),Ae.activeTexture.set(Pe.TEXTURE1),Bt?(Bt.texture.bind(zn,Pe.CLAMP_TO_EDGE,Pe.LINEAR_MIPMAP_NEAREST),xn=Math.pow(2,Bt.tileID.overscaledZ-kt.tileID.overscaledZ),En=[kt.tileID.canonical.x*xn%1,kt.tileID.canonical.y*xn%1]):kt.texture.bind(zn,Pe.CLAMP_TO_EDGE,Pe.LINEAR_MIPMAP_NEAREST),kt.texture.useMipmap&&Ae.extTextureFilterAnisotropic&&R.transform.pitch>20&&Pe.texParameterf(Pe.TEXTURE_2D,Ae.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ae.extTextureFilterAnisotropicMax);const Un=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Tt),kn=Ze.getProjectionData({overscaledTileID:Tt,aligned:pt,applyGlobeMatrix:!ae,applyTerrainMatrix:!0}),wr=pc(En||[0,0],xn||1,Gt,d,X),dr=dt.getMeshFromTileID(Ae,Tt.canonical,L,F,"raster");qe.draw(Ae,Pe.TRIANGLES,Nt,E?E[Tt.overscaledZ]:ji.disabled,ft,Q?_i.frontCCW:_i.backCCW,wr,Un,kn,d.id,dr.vertexBuffer,dr.indexBuffer,dr.segments)}}function hi(R,s,d,x,E,L){const F=x.paint.get("raster-fade-duration");if(!L&&F>0){const X=w.now(),Q=(X-R.timeAdded)/F,ae=s?(X-s.timeAdded)/F:-1,be=d.getSource(),Ae=ir(E,{tileSize:be.tileSize,roundZoom:be.roundZoom}),Pe=!s||Math.abs(s.tileID.overscaledZ-Ae)>Math.abs(R.tileID.overscaledZ-Ae),qe=Pe&&R.refreshedUponExpiration?1:a.ad(Pe?Q:1-ae,0,1);return R.refreshedUponExpiration&&Q>=1&&(R.refreshedUponExpiration=!1),s?{opacity:1,mix:1-qe}:{opacity:qe,mix:0}}return{opacity:1,mix:0}}const Ws=new a.b6(1,0,0,1),$o=new a.b6(0,1,0,1),Cf=new a.b6(0,0,1,1),Ju=new a.b6(1,0,1,1),Pf=new a.b6(0,1,1,1);function Ou(R,s,d,x){yc(R,0,s+d/2,R.transform.width,d,x)}function vc(R,s,d,x){yc(R,s-d/2,0,d,R.transform.height,x)}function yc(R,s,d,x,E,L){const F=R.context,X=F.gl;X.enable(X.SCISSOR_TEST),X.scissor(s*R.pixelRatio,d*R.pixelRatio,x*R.pixelRatio,E*R.pixelRatio),F.clear({color:L}),X.disable(X.SCISSOR_TEST)}function Mh(R,s,d){const x=R.context,E=x.gl,L=R.useProgram("debug"),F=Ir.disabled,X=ji.disabled,Q=R.colorModeForRenderPass(),ae="$debug",be=R.style.map.terrain&&R.style.map.terrain.getTerrainData(d);x.activeTexture.set(E.TEXTURE0);const Ae=s.getTileByID(d.key).latestRawTileData,Pe=Math.floor((Ae&&Ae.byteLength||0)/1024),qe=s.getTile(d).tileSize,Ze=512/Math.min(qe,512)*(d.overscaledZ/R.transform.zoom)*.5;let dt=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(dt+=` => ${d.overscaledZ}`),function(pt,Tt){pt.initDebugOverlayCanvas();const Nt=pt.debugOverlayCanvas,kt=pt.context.gl,Bt=pt.debugOverlayCanvas.getContext("2d");Bt.clearRect(0,0,Nt.width,Nt.height),Bt.shadowColor="white",Bt.shadowBlur=2,Bt.lineWidth=1.5,Bt.strokeStyle="white",Bt.textBaseline="top",Bt.font="bold 36px Open Sans, sans-serif",Bt.fillText(Tt,5,5),Bt.strokeText(Tt,5,5),pt.debugOverlayTexture.update(Nt),pt.debugOverlayTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}(R,`${dt} ${Pe}kB`);const ft=R.transform.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!0,applyTerrainMatrix:!0});L.draw(x,E.TRIANGLES,F,X,di.alphaBlended,_i.disabled,Mi(a.b6.transparent,Ze),null,ft,ae,R.debugBuffer,R.quadTriangleIndexBuffer,R.debugSegments),L.draw(x,E.LINE_STRIP,F,X,Q,_i.disabled,Mi(a.b6.red),be,ft,ae,R.debugBuffer,R.tileBorderIndexBuffer,R.debugSegments)}function Ah(R,s,d,x){const{isRenderingGlobe:E}=x,L=R.context,F=L.gl,X=R.transform,Q=R.colorModeForRenderPass(),ae=R.getDepthModeFor3D(),be=R.useProgram("terrain");L.bindFramebuffer.set(null),L.viewport.set([0,0,R.width,R.height]);for(const Ae of d){const Pe=s.getTerrainMesh(Ae.tileID),qe=R.renderToTexture.getTexture(Ae),Ze=s.getTerrainData(Ae.tileID);L.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,qe.texture);const dt=s.getMeshFrameDelta(X.zoom),ft=X.calculateFogMatrix(Ae.tileID.toUnwrapped()),pt=rl(dt,ft,R.style.sky,X.pitch,E),Tt=X.getProjectionData({overscaledTileID:Ae.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});be.draw(L,F.TRIANGLES,ae,ji.disabled,Q,_i.backCCW,pt,Ze,Tt,"terrain",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}}function bd(R,s){if(!s.mesh){const d=new a.aE;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1);const x=new a.aG;x.emplaceBack(0,1,2),x.emplaceBack(0,2,3),s.mesh=new Pi(R.createVertexBuffer(d,xa.members),R.createIndexBuffer(x),a.aF.simpleSegment(0,0,d.length,x.length))}return s.mesh}class xd{constructor(s,d){this.context=new sl(s),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ge.maxUnderzooming+ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ja}resize(s,d,x){if(this.width=Math.floor(s*x),this.height=Math.floor(d*x),this.pixelRatio=x,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const E of this.style._order)this.style._layers[E].resize()}setup(){const s=this.context,d=new a.aE;d.emplaceBack(0,0),d.emplaceBack(a.Z,0),d.emplaceBack(0,a.Z),d.emplaceBack(a.Z,a.Z),this.tileExtentBuffer=s.createVertexBuffer(d,xa.members),this.tileExtentSegments=a.aF.simpleSegment(0,0,4,2);const x=new a.aE;x.emplaceBack(0,0),x.emplaceBack(a.Z,0),x.emplaceBack(0,a.Z),x.emplaceBack(a.Z,a.Z),this.debugBuffer=s.createVertexBuffer(x,xa.members),this.debugSegments=a.aF.simpleSegment(0,0,4,5);const E=new a.bV;E.emplaceBack(0,0,0,0),E.emplaceBack(a.Z,0,a.Z,0),E.emplaceBack(0,a.Z,0,a.Z),E.emplaceBack(a.Z,a.Z,a.Z,a.Z),this.rasterBoundsBuffer=s.createVertexBuffer(E,Ts.members),this.rasterBoundsSegments=a.aF.simpleSegment(0,0,4,2);const L=new a.aE;L.emplaceBack(0,0),L.emplaceBack(a.Z,0),L.emplaceBack(0,a.Z),L.emplaceBack(a.Z,a.Z),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(L,xa.members),this.rasterBoundsSegmentsPosOnly=a.aF.simpleSegment(0,0,4,5);const F=new a.aE;F.emplaceBack(0,0),F.emplaceBack(1,0),F.emplaceBack(0,1),F.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(F,xa.members),this.viewportSegments=a.aF.simpleSegment(0,0,4,2);const X=new a.bW;X.emplaceBack(0),X.emplaceBack(1),X.emplaceBack(3),X.emplaceBack(2),X.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(X);const Q=new a.aG;Q.emplaceBack(1,0,2),Q.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(Q);const ae=this.context.gl;this.stencilClearMode=new ji({func:ae.ALWAYS,mask:0},0,255,ae.ZERO,ae.ZERO,ae.ZERO),this.tileExtentMesh=new Pi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const x=a.K();a.bN(x,0,this.width,this.height,0,0,1),a.M(x,x,[d.drawingBufferWidth,d.drawingBufferHeight,0]);const E={mainMatrix:x,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:x};this.useProgram("clippingMask",null,!0).draw(s,d.TRIANGLES,Ir.disabled,this.stencilClearMode,di.disabled,_i.disabled,null,null,E,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,d,x){if(this.currentStencilSource===s.source||!s.isTileClipped()||!d||!d.length)return;this.currentStencilSource=s.source,this.nextStencilID+d.length>256&&this.clearStencil();const E=this.context;E.setColorMode(di.disabled),E.setDepthMode(Ir.disabled);const L={};for(const F of d)L[F.key]=this.nextStencilID++;this._renderTileMasks(L,d,x,!0),this._renderTileMasks(L,d,x,!1),this._tileClippingMaskIDs=L}_renderTileMasks(s,d,x,E){const L=this.context,F=L.gl,X=this.style.projection,Q=this.transform,ae=this.useProgram("clippingMask");for(const be of d){const Ae=s[be.key],Pe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(be),qe=X.getMeshFromTileID(this.context,be.canonical,E,!0,"stencil"),Ze=Q.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!0,applyTerrainMatrix:!0});ae.draw(L,F.TRIANGLES,Ir.disabled,new ji({func:F.ALWAYS,mask:0},Ae,255,F.KEEP,F.KEEP,F.REPLACE),di.disabled,x?_i.disabled:_i.backCCW,null,Pe,Ze,"$clipping",qe.vertexBuffer,qe.indexBuffer,qe.segments)}}_renderTilesDepthBuffer(){const s=this.context,d=s.gl,x=this.style.projection,E=this.transform,L=this.useProgram("depth"),F=this.getDepthModeFor3D(),X=mt(E,{tileSize:E.tileSize});for(const Q of X){const ae=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Q),be=x.getMeshFromTileID(this.context,Q.canonical,!0,!0,"raster"),Ae=E.getProjectionData({overscaledTileID:Q,applyGlobeMatrix:!0,applyTerrainMatrix:!0});L.draw(s,d.TRIANGLES,F,ji.disabled,di.disabled,_i.backCCW,null,ae,Ae,"$clipping",be.vertexBuffer,be.indexBuffer,be.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,d=this.context.gl;return new ji({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){const d=this.context.gl;return new ji({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){const d=this.context.gl,x=s.sort((F,X)=>X.overscaledZ-F.overscaledZ),E=x[x.length-1].overscaledZ,L=x[0].overscaledZ-E+1;if(L>1){this.currentStencilSource=void 0,this.nextStencilID+L>256&&this.clearStencil();const F={};for(let X=0;X<L;X++)F[X+E]=new ji({func:d.GEQUAL,mask:255},X+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=L,[F,x]}return[{[E]:ji.disabled},x]}stencilConfigForOverlapTwoPass(s){const d=this.context.gl,x=s.sort((F,X)=>X.overscaledZ-F.overscaledZ),E=x[x.length-1].overscaledZ,L=x[0].overscaledZ-E+1;if(this.clearStencil(),L>1){const F={},X={};for(let Q=0;Q<L;Q++)F[Q+E]=new ji({func:d.GREATER,mask:255},L+1+Q,255,d.KEEP,d.KEEP,d.REPLACE),X[Q+E]=new ji({func:d.GREATER,mask:255},1+Q,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID=2*L+1,[F,X,x]}return this.nextStencilID=3,[{[E]:new ji({func:d.GREATER,mask:255},2,255,d.KEEP,d.KEEP,d.REPLACE)},{[E]:new ji({func:d.GREATER,mask:255},1,255,d.KEEP,d.KEEP,d.REPLACE)},x]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new di([s.CONSTANT_COLOR,s.ONE],new a.b6(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?di.unblended:di.alphaBlended}getDepthModeForSublayer(s,d,x){if(!this.opaquePassEnabledForLayer())return Ir.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new Ir(x||this.context.gl.LEQUAL,d,[E,E])}getDepthModeFor3D(){return new Ir(this.context.gl.LEQUAL,Ir.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){var x,E;this.style=s,this.options=d,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(w.now()),this.imageManager.beginFrame();const L=this.style._order,F=this.style.sourceCaches,X={},Q={},ae={},be={isRenderingToTexture:!1,isRenderingGlobe:((x=s.projection)===null||x===void 0?void 0:x.transitionState)>0};for(const Pe in F){const qe=F[Pe];qe.used&&qe.prepare(this.context),X[Pe]=qe.getVisibleCoordinates(!1),Q[Pe]=X[Pe].slice().reverse(),ae[Pe]=qe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Pe=0;Pe<L.length;Pe++)if(this.style._layers[L[Pe]].is3D()){this.opaquePassCutoff=Pe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Pe of L){const qe=this.style._layers[Pe];if(!qe.hasOffscreenPass()||qe.isHidden(this.transform.zoom))continue;const Ze=Q[qe.source];(qe.type==="custom"||Ze.length)&&this.renderLayer(this,F[qe.source],qe,Ze,be)}if((E=this.style.projection)===null||E===void 0||E.updateGPUdependent({context:this.context,useProgram:Pe=>this.useProgram(Pe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?a.b6.black:a.b6.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Pe,qe){const Ze=Pe.context,dt=Ze.gl,ft=((Wt,Gt,xn)=>{const En=Math.cos(Gt.rollInRadians),zn=Math.sin(Gt.rollInRadians),Un=Ut(Gt),kn=Gt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Wt.properties.get("sky-color"),u_horizon_color:Wt.properties.get("horizon-color"),u_horizon:[(Gt.width/2-Un*zn)*xn,(Gt.height/2+Un*En)*xn],u_horizon_normal:[-zn,En],u_sky_horizon_blend:Wt.properties.get("sky-horizon-blend")*Gt.height/2*xn,u_sky_blend:kn}})(qe,Pe.style.map.transform,Pe.pixelRatio),pt=new Ir(dt.LEQUAL,Ir.ReadWrite,[0,1]),Tt=ji.disabled,Nt=Pe.colorModeForRenderPass(),kt=Pe.useProgram("sky"),Bt=bd(Ze,qe);kt.draw(Ze,dt.TRIANGLES,pt,Tt,Nt,_i.disabled,ft,null,void 0,"sky",Bt.vertexBuffer,Bt.indexBuffer,Bt.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){const Pe=this.style._layers[L[this.currentLayer]],qe=F[Pe.source],Ze=X[Pe.source];this._renderTileClippingMasks(Pe,Ze,!1),this.renderLayer(this,qe,Pe,Ze,be)}this.renderPass="translucent";let Ae=!1;for(this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){const Pe=this.style._layers[L[this.currentLayer]],qe=F[Pe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Pe,be))continue;this.opaquePassEnabledForLayer()||Ae||(Ae=!0,be.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ze=(Pe.type==="symbol"?ae:Q)[Pe.source];this._renderTileClippingMasks(Pe,X[Pe.source],!1),this.renderLayer(this,qe,Pe,Ze,be)}if(be.isRenderingGlobe&&function(Pe,qe,Ze){const dt=Pe.context,ft=dt.gl,pt=Pe.useProgram("atmosphere"),Tt=new Ir(ft.LEQUAL,Ir.ReadOnly,[0,1]),Nt=Pe.transform,kt=function(kn,wr){const dr=kn.properties.get("position"),Kn=[-dr.x,-dr.y,-dr.z],Nr=a.as(new Float64Array(16));return kn.properties.get("anchor")==="map"&&(a.aZ(Nr,Nr,wr.rollInRadians),a.a_(Nr,Nr,-wr.pitchInRadians),a.aZ(Nr,Nr,wr.bearingInRadians),a.a_(Nr,Nr,wr.center.lat*Math.PI/180),a.bl(Nr,Nr,-wr.center.lng*Math.PI/180)),a.bU(Kn,Kn,Nr),Kn}(Ze,Pe.transform),Bt=Nt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Wt=qe.properties.get("atmosphere-blend")*Bt.projectionTransition;if(Wt===0)return;const Gt=Wa(Nt.worldSize,Nt.center.lat),xn=Nt.inverseProjectionMatrix,En=new Float64Array(4);En[3]=1,a.ao(En,En,Nt.modelViewProjectionMatrix),En[0]/=En[3],En[1]/=En[3],En[2]/=En[3],En[3]=1,a.ao(En,En,xn),En[0]/=En[3],En[1]/=En[3],En[2]/=En[3],En[3]=1;const zn=((kn,wr,dr,Kn,Nr)=>({u_sun_pos:kn,u_atmosphere_blend:wr,u_globe_position:dr,u_globe_radius:Kn,u_inv_proj_matrix:Nr}))(kt,Wt,[En[0],En[1],En[2]],Gt,xn),Un=bd(dt,qe);pt.draw(dt,ft.TRIANGLES,Tt,ji.disabled,di.alphaBlended,_i.disabled,zn,null,null,"atmosphere",Un.vertexBuffer,Un.indexBuffer,Un.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Pe=function(qe,Ze){let dt=null;const ft=Object.values(qe._layers).flatMap(kt=>kt.source&&!kt.isHidden(Ze)?[qe.sourceCaches[kt.source]]:[]),pt=ft.filter(kt=>kt.getSource().type==="vector"),Tt=ft.filter(kt=>kt.getSource().type!=="vector"),Nt=kt=>{(!dt||dt.getSource().maxzoom<kt.getSource().maxzoom)&&(dt=kt)};return pt.forEach(kt=>Nt(kt)),dt||Tt.forEach(kt=>Nt(kt)),dt}(this.style,this.transform.zoom);Pe&&function(qe,Ze,dt){for(let ft=0;ft<dt.length;ft++)Mh(qe,Ze,dt[ft])}(this,Pe,Pe.getVisibleCoordinates())}this.options.showPadding&&function(Pe){const qe=Pe.transform.padding;Ou(Pe,Pe.transform.height-(qe.top||0),3,Ws),Ou(Pe,qe.bottom||0,3,$o),vc(Pe,qe.left||0,3,Cf),vc(Pe,Pe.transform.width-(qe.right||0),3,Ju);const Ze=Pe.transform.centerPoint;(function(dt,ft,pt,Tt){yc(dt,ft-1,pt-10,2,20,Tt),yc(dt,ft-10,pt-1,20,2,Tt)})(Pe,Ze.x,Pe.transform.height-Ze.y,Pf)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,x=this.transform.modelViewProjectionMatrix;let E=this.terrainFacilitator.dirty;E||(E=s?!a.bX(d,x):!a.bY(d,x)),E||(E=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),E&&(a.bZ(d,x),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(L,F){const X=L.context,Q=X.gl,ae=L.transform,be=di.unblended,Ae=new Ir(Q.LEQUAL,Ir.ReadWrite,[0,1]),Pe=F.sourceCache.getRenderableTiles(),qe=L.useProgram("terrainDepth");X.bindFramebuffer.set(F.getFramebuffer("depth").framebuffer),X.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),X.clear({color:a.b6.transparent,depth:1});for(const Ze of Pe){const dt=F.getTerrainMesh(Ze.tileID),ft=F.getTerrainData(Ze.tileID),pt=ae.getProjectionData({overscaledTileID:Ze.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Tt={u_ele_delta:F.getMeshFrameDelta(ae.zoom)};qe.draw(X,Q.TRIANGLES,Ae,ji.disabled,be,_i.backCCW,Tt,ft,pt,"terrain",dt.vertexBuffer,dt.indexBuffer,dt.segments)}X.bindFramebuffer.set(null),X.viewport.set([0,0,L.width,L.height])}(this,this.style.map.terrain),function(L,F){const X=L.context,Q=X.gl,ae=L.transform,be=di.unblended,Ae=new Ir(Q.LEQUAL,Ir.ReadWrite,[0,1]),Pe=F.getCoordsTexture(),qe=F.sourceCache.getRenderableTiles(),Ze=L.useProgram("terrainCoords");X.bindFramebuffer.set(F.getFramebuffer("coords").framebuffer),X.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),X.clear({color:a.b6.transparent,depth:1}),F.coordsIndex=[];for(const dt of qe){const ft=F.getTerrainMesh(dt.tileID),pt=F.getTerrainData(dt.tileID);X.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,Pe.texture);const Tt={u_terrain_coords_id:(255-F.coordsIndex.length)/255,u_texture:0,u_ele_delta:F.getMeshFrameDelta(ae.zoom)},Nt=ae.getProjectionData({overscaledTileID:dt.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ze.draw(X,Q.TRIANGLES,Ae,ji.disabled,be,_i.backCCW,Tt,pt,Nt,"terrain",ft.vertexBuffer,ft.indexBuffer,ft.segments),F.coordsIndex.push(dt.tileID.key)}X.bindFramebuffer.set(null),X.viewport.set([0,0,L.width,L.height])}(this,this.style.map.terrain))}renderLayer(s,d,x,E,L){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="custom"||(E||[]).length)&&(this.id=x.id,a.b_(x)?function(F,X,Q,ae,be,Ae){if(F.renderPass!=="translucent")return;const{isRenderingToTexture:Pe}=Ae,qe=ji.disabled,Ze=F.colorModeForRenderPass();(Q._unevaluatedLayout.hasValue("text-variable-anchor")||Q._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(dt,ft,pt,Tt,Nt,kt,Bt,Wt,Gt){const xn=ft.transform,En=ft.style.map.terrain,zn=Nt==="map",Un=kt==="map";for(const kn of dt){const wr=Tt.getTile(kn),dr=wr.getBucket(pt);if(!dr||!dr.text||!dr.text.segments.get().length)continue;const Kn=a.af(dr.textSizeData,xn.zoom),Nr=a.av(wr,1,ft.transform.zoom),Fr=ut(zn,ft.transform,Nr),fa=pt.layout.get("icon-text-fit")!=="none"&&dr.hasIconData();if(Kn){const Za=Math.pow(2,xn.zoom-wr.tileID.overscaledZ),za=En?(Ua,Ea)=>En.getElevation(kn,Ua,Ea):null;Rl(dr,zn,Un,Gt,xn,Fr,Za,Kn,fa,a.aw(xn,wr,Bt,Wt),kn.toUnwrapped(),za)}}}(ae,F,Q,X,Q.layout.get("text-rotation-alignment"),Q.layout.get("text-pitch-alignment"),Q.paint.get("text-translate"),Q.paint.get("text-translate-anchor"),be),Q.paint.get("icon-opacity").constantOr(1)!==0&&vu(F,X,Q,ae,!1,Q.paint.get("icon-translate"),Q.paint.get("icon-translate-anchor"),Q.layout.get("icon-rotation-alignment"),Q.layout.get("icon-pitch-alignment"),Q.layout.get("icon-keep-upright"),qe,Ze,Pe),Q.paint.get("text-opacity").constantOr(1)!==0&&vu(F,X,Q,ae,!0,Q.paint.get("text-translate"),Q.paint.get("text-translate-anchor"),Q.layout.get("text-rotation-alignment"),Q.layout.get("text-pitch-alignment"),Q.layout.get("text-keep-upright"),qe,Ze,Pe),X.map.showCollisionBoxes&&(Hs(F,X,Q,ae,!0),Hs(F,X,Q,ae,!1))}(s,d,x,E,this.style.placement.variableOffsets,L):a.b$(x)?function(F,X,Q,ae,be){if(F.renderPass!=="translucent")return;const{isRenderingToTexture:Ae}=be,Pe=Q.paint.get("circle-opacity"),qe=Q.paint.get("circle-stroke-width"),Ze=Q.paint.get("circle-stroke-opacity"),dt=!Q.layout.get("circle-sort-key").isConstant();if(Pe.constantOr(1)===0&&(qe.constantOr(1)===0||Ze.constantOr(1)===0))return;const ft=F.context,pt=ft.gl,Tt=F.transform,Nt=F.getDepthModeForSublayer(0,Ir.ReadOnly),kt=ji.disabled,Bt=F.colorModeForRenderPass(),Wt=[],Gt=Tt.getCircleRadiusCorrection();for(let xn=0;xn<ae.length;xn++){const En=ae[xn],zn=X.getTile(En),Un=zn.getBucket(Q);if(!Un)continue;const kn=Q.paint.get("circle-translate"),wr=Q.paint.get("circle-translate-anchor"),dr=a.aw(Tt,zn,kn,wr),Kn=Un.programConfigurations.get(Q.id),Nr=F.useProgram("circle",Kn),Fr=Un.layoutVertexBuffer,fa=Un.indexBuffer,Za=F.style.map.terrain&&F.style.map.terrain.getTerrainData(En),za={programConfiguration:Kn,program:Nr,layoutVertexBuffer:Fr,indexBuffer:fa,uniformValues:Gr(F,zn,Q,dr,Gt),terrainData:Za,projectionData:Tt.getProjectionData({overscaledTileID:En,applyGlobeMatrix:!Ae,applyTerrainMatrix:!0})};if(dt){const Ua=Un.segments.get();for(const Ea of Ua)Wt.push({segments:new a.aF([Ea]),sortKey:Ea.sortKey,state:za})}else Wt.push({segments:Un.segments,sortKey:0,state:za})}dt&&Wt.sort((xn,En)=>xn.sortKey-En.sortKey);for(const xn of Wt){const{programConfiguration:En,program:zn,layoutVertexBuffer:Un,indexBuffer:kn,uniformValues:wr,terrainData:dr,projectionData:Kn}=xn.state;zn.draw(ft,pt.TRIANGLES,Nt,kt,Bt,_i.backCCW,wr,dr,Kn,Q.id,Un,kn,xn.segments,Q.paint,F.transform.zoom,En)}}(s,d,x,E,L):a.c0(x)?function(F,X,Q,ae,be){if(Q.paint.get("heatmap-opacity")===0)return;const Ae=F.context,{isRenderingToTexture:Pe,isRenderingGlobe:qe}=be;if(F.style.map.terrain){for(const Ze of ae){const dt=X.getTile(Ze);X.hasRenderableParent(Ze)||(F.renderPass==="offscreen"?Wl(F,dt,Q,Ze,qe):F.renderPass==="translucent"&&Uc(F,Q,Ze,Pe,qe))}Ae.viewport.set([0,0,F.width,F.height])}else F.renderPass==="offscreen"?function(Ze,dt,ft,pt){const Tt=Ze.context,Nt=Tt.gl,kt=Ze.transform,Bt=ji.disabled,Wt=new di([Nt.ONE,Nt.ONE],a.b6.transparent,[!0,!0,!0,!0]);(function(Gt,xn,En){const zn=Gt.gl;Gt.activeTexture.set(zn.TEXTURE1),Gt.viewport.set([0,0,xn.width/4,xn.height/4]);let Un=En.heatmapFbos.get(a.bR);Un?(zn.bindTexture(zn.TEXTURE_2D,Un.colorAttachment.get()),Gt.bindFramebuffer.set(Un.framebuffer)):(Un=Dl(Gt,xn.width/4,xn.height/4),En.heatmapFbos.set(a.bR,Un))})(Tt,Ze,ft),Tt.clear({color:a.b6.transparent});for(let Gt=0;Gt<pt.length;Gt++){const xn=pt[Gt];if(dt.hasRenderableParent(xn))continue;const En=dt.getTile(xn),zn=En.getBucket(ft);if(!zn)continue;const Un=zn.programConfigurations.get(ft.id),kn=Ze.useProgram("heatmap",Un),wr=kt.getProjectionData({overscaledTileID:xn,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),dr=kt.getCircleRadiusCorrection();kn.draw(Tt,Nt.TRIANGLES,Ir.disabled,Bt,Wt,_i.backCCW,ya(En,kt.zoom,ft.paint.get("heatmap-intensity"),dr),null,wr,ft.id,zn.layoutVertexBuffer,zn.indexBuffer,zn.segments,ft.paint,kt.zoom,Un)}Tt.viewport.set([0,0,Ze.width,Ze.height])}(F,X,Q,ae):F.renderPass==="translucent"&&function(Ze,dt){const ft=Ze.context,pt=ft.gl;ft.setColorMode(Ze.colorModeForRenderPass());const Tt=dt.heatmapFbos.get(a.bR);Tt&&(ft.activeTexture.set(pt.TEXTURE0),pt.bindTexture(pt.TEXTURE_2D,Tt.colorAttachment.get()),ft.activeTexture.set(pt.TEXTURE1),Xl(ft,dt).bind(pt.LINEAR,pt.CLAMP_TO_EDGE),Ze.useProgram("heatmapTexture").draw(ft,pt.TRIANGLES,Ir.disabled,ji.disabled,Ze.colorModeForRenderPass(),_i.disabled,ka(Ze,dt,0,1),null,null,dt.id,Ze.viewportBuffer,Ze.quadTriangleIndexBuffer,Ze.viewportSegments,dt.paint,Ze.transform.zoom))}(F,Q)}(s,d,x,E,L):a.c1(x)?function(F,X,Q,ae,be){if(F.renderPass!=="translucent")return;const{isRenderingToTexture:Ae}=be,Pe=Q.paint.get("line-opacity"),qe=Q.paint.get("line-width");if(Pe.constantOr(1)===0||qe.constantOr(1)===0)return;const Ze=F.getDepthModeForSublayer(0,Ir.ReadOnly),dt=F.colorModeForRenderPass(),ft=Q.paint.get("line-dasharray"),pt=Q.paint.get("line-pattern"),Tt=pt.constantOr(1),Nt=Q.paint.get("line-gradient"),kt=Q.getCrossfadeParameters(),Bt=Tt?"linePattern":ft?"lineSDF":Nt?"lineGradient":"line",Wt=F.context,Gt=Wt.gl,xn=F.transform;let En=!0;for(const zn of ae){const Un=X.getTile(zn);if(Tt&&!Un.patternsLoaded())continue;const kn=Un.getBucket(Q);if(!kn)continue;const wr=kn.programConfigurations.get(Q.id),dr=F.context.program.get(),Kn=F.useProgram(Bt,wr),Nr=En||Kn.program!==dr,Fr=F.style.map.terrain&&F.style.map.terrain.getTerrainData(zn),fa=pt.constantOr(null);if(fa&&Un.imageAtlas){const oa=Un.imageAtlas,Ia=oa.patternPositions[fa.to.toString()],ps=oa.patternPositions[fa.from.toString()];Ia&&ps&&wr.setConstantPatternPositions(Ia,ps)}const Za=xn.getProjectionData({overscaledTileID:zn,applyGlobeMatrix:!Ae,applyTerrainMatrix:!0}),za=xn.getPixelScale(),Ua=Tt?Vs(F,Un,Q,za,kt):ft?Sh(F,Un,Q,za,ft,kt):Nt?il(F,Un,Q,za,kn.lineClipsArray.length):So(F,Un,Q,za);if(Tt)Wt.activeTexture.set(Gt.TEXTURE0),Un.imageAtlasTexture.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),wr.updatePaintBuffers(kt);else if(ft&&(Nr||F.lineAtlas.dirty))Wt.activeTexture.set(Gt.TEXTURE0),F.lineAtlas.bind(Wt);else if(Nt){const oa=kn.gradients[Q.id];let Ia=oa.texture;if(Q.gradientVersion!==oa.version){let ps=256;if(Q.stepInterpolant){const Ya=X.getSource().maxzoom,ho=zn.canonical.z===Ya?Math.ceil(1<<F.transform.maxZoom-zn.canonical.z):1;ps=a.ad(a.bS(kn.maxLineLength/a.Z*1024*ho),256,Wt.maxTextureSize)}oa.gradient=a.bT({expression:Q.gradientExpression(),evaluationKey:"lineProgress",resolution:ps,image:oa.gradient||void 0,clips:kn.lineClipsArray}),oa.texture?oa.texture.update(oa.gradient):oa.texture=new Y(Wt,oa.gradient,Gt.RGBA),oa.version=Q.gradientVersion,Ia=oa.texture}Wt.activeTexture.set(Gt.TEXTURE0),Ia.bind(Q.stepInterpolant?Gt.NEAREST:Gt.LINEAR,Gt.CLAMP_TO_EDGE)}let Ea;if(Ae){const[oa]=F.getStencilConfigForOverlapAndUpdateStencilID(ae);Ea=oa[zn.overscaledZ]}else Ea=F.stencilModeForClipping(zn);Kn.draw(Wt,Gt.TRIANGLES,Ze,Ea,dt,_i.disabled,Ua,Fr,Za,Q.id,kn.layoutVertexBuffer,kn.indexBuffer,kn.segments,Q.paint,F.transform.zoom,wr,kn.layoutVertexBuffer2),En=!1}}(s,d,x,E,L):a.c2(x)?function(F,X,Q,ae,be){const Ae=Q.paint.get("fill-color"),Pe=Q.paint.get("fill-opacity");if(Pe.constantOr(1)===0)return;const{isRenderingToTexture:qe}=be,Ze=F.colorModeForRenderPass(),dt=Q.paint.get("fill-pattern"),ft=F.opaquePassEnabledForLayer()&&!dt.constantOr(1)&&Ae.constantOr(a.b6.transparent).a===1&&Pe.constantOr(0)===1?"opaque":"translucent";if(F.renderPass===ft){const pt=F.getDepthModeForSublayer(1,F.renderPass==="opaque"?Ir.ReadWrite:Ir.ReadOnly);Jh(F,X,Q,ae,pt,Ze,!1,qe)}if(F.renderPass==="translucent"&&Q.paint.get("fill-antialias")){const pt=F.getDepthModeForSublayer(Q.getPaintProperty("fill-outline-color")?2:0,Ir.ReadOnly);Jh(F,X,Q,ae,pt,Ze,!0,qe)}}(s,d,x,E,L):a.c3(x)?function(F,X,Q,ae,be){const Ae=Q.paint.get("fill-extrusion-opacity");if(Ae===0)return;const{isRenderingToTexture:Pe}=be;if(F.renderPass==="translucent"){const qe=new Ir(F.context.gl.LEQUAL,Ir.ReadWrite,F.depthRangeFor3D);if(Ae!==1||Q.paint.get("fill-extrusion-pattern").constantOr(1))nh(F,X,Q,ae,qe,ji.disabled,di.disabled,Pe),nh(F,X,Q,ae,qe,F.stencilModeFor3D(),F.colorModeForRenderPass(),Pe);else{const Ze=F.colorModeForRenderPass();nh(F,X,Q,ae,qe,ji.disabled,Ze,Pe)}}}(s,d,x,E,L):a.c4(x)?function(F,X,Q,ae,be){if(F.renderPass!=="offscreen"&&F.renderPass!=="translucent")return;const{isRenderingToTexture:Ae}=be,Pe=F.context,qe=F.style.projection.useSubdivision,Ze=F.getDepthModeForSublayer(0,Ir.ReadOnly),dt=F.colorModeForRenderPass();if(F.renderPass==="offscreen")(function(ft,pt,Tt,Nt,kt,Bt,Wt){const Gt=ft.context,xn=Gt.gl;for(const En of Tt){const zn=pt.getTile(En),Un=zn.dem;if(!Un||!Un.data||!zn.needsHillshadePrepare)continue;const kn=Un.dim,wr=Un.stride,dr=Un.getPixels();if(Gt.activeTexture.set(xn.TEXTURE1),Gt.pixelStoreUnpackPremultiplyAlpha.set(!1),zn.demTexture=zn.demTexture||ft.getTileTexture(wr),zn.demTexture){const Nr=zn.demTexture;Nr.update(dr,{premultiply:!1}),Nr.bind(xn.NEAREST,xn.CLAMP_TO_EDGE)}else zn.demTexture=new Y(Gt,dr,xn.RGBA,{premultiply:!1}),zn.demTexture.bind(xn.NEAREST,xn.CLAMP_TO_EDGE);Gt.activeTexture.set(xn.TEXTURE0);let Kn=zn.fbo;if(!Kn){const Nr=new Y(Gt,{width:kn,height:kn,data:null},xn.RGBA);Nr.bind(xn.LINEAR,xn.CLAMP_TO_EDGE),Kn=zn.fbo=Gt.createFramebuffer(kn,kn,!0,!1),Kn.colorAttachment.set(Nr.texture)}Gt.bindFramebuffer.set(Kn.framebuffer),Gt.viewport.set([0,0,kn,kn]),ft.useProgram("hillshadePrepare").draw(Gt,xn.TRIANGLES,kt,Bt,Wt,_i.disabled,yo(zn.tileID,Un),null,null,Nt.id,ft.rasterBoundsBuffer,ft.quadTriangleIndexBuffer,ft.rasterBoundsSegments),zn.needsHillshadePrepare=!1}})(F,X,ae,Q,Ze,ji.disabled,dt),Pe.viewport.set([0,0,F.width,F.height]);else if(F.renderPass==="translucent")if(qe){const[ft,pt,Tt]=F.stencilConfigForOverlapTwoPass(ae);Th(F,X,Q,Tt,ft,Ze,dt,!1,Ae),Th(F,X,Q,Tt,pt,Ze,dt,!0,Ae)}else{const[ft,pt]=F.getStencilConfigForOverlapAndUpdateStencilID(ae);Th(F,X,Q,pt,ft,Ze,dt,!1,Ae)}}(s,d,x,E,L):a.c5(x)?function(F,X,Q,ae,be){if(F.renderPass!=="translucent"||Q.paint.get("raster-opacity")===0||!ae.length)return;const{isRenderingToTexture:Ae}=be,Pe=X.getSource(),qe=F.style.projection.useSubdivision;if(Pe instanceof Ht)Ho(F,X,Q,ae,null,!1,!1,Pe.tileCoords,Pe.flippedWindingOrder,Ae);else if(qe){const[Ze,dt,ft]=F.stencilConfigForOverlapTwoPass(ae);Ho(F,X,Q,ft,Ze,!1,!0,Rs,!1,Ae),Ho(F,X,Q,ft,dt,!0,!0,Rs,!1,Ae)}else{const[Ze,dt]=F.getStencilConfigForOverlapAndUpdateStencilID(ae);Ho(F,X,Q,dt,Ze,!1,!0,Rs,!1,Ae)}}(s,d,x,E,L):a.c6(x)?function(F,X,Q,ae,be){const Ae=Q.paint.get("background-color"),Pe=Q.paint.get("background-opacity");if(Pe===0)return;const{isRenderingToTexture:qe}=be,Ze=F.context,dt=Ze.gl,ft=F.style.projection,pt=F.transform,Tt=pt.tileSize,Nt=Q.paint.get("background-pattern");if(F.isPatternMissing(Nt))return;const kt=!Nt&&Ae.a===1&&Pe===1&&F.opaquePassEnabledForLayer()?"opaque":"translucent";if(F.renderPass!==kt)return;const Bt=ji.disabled,Wt=F.getDepthModeForSublayer(0,kt==="opaque"?Ir.ReadWrite:Ir.ReadOnly),Gt=F.colorModeForRenderPass(),xn=F.useProgram(Nt?"backgroundPattern":"background"),En=ae||mt(pt,{tileSize:Tt,terrain:F.style.map.terrain});Nt&&(Ze.activeTexture.set(dt.TEXTURE0),F.imageManager.bind(F.context));const zn=Q.getCrossfadeParameters();for(const Un of En){const kn=pt.getProjectionData({overscaledTileID:Un,applyGlobeMatrix:!qe,applyTerrainMatrix:!0}),wr=Nt?Gs(Pe,F,Nt,{tileID:Un,tileSize:Tt},zn):Ms(Pe,Ae),dr=F.style.map.terrain&&F.style.map.terrain.getTerrainData(Un),Kn=ft.getMeshFromTileID(Ze,Un.canonical,!1,!0,"raster");xn.draw(Ze,dt.TRIANGLES,Wt,Bt,Gt,_i.backCCW,wr,dr,kn,Q.id,Kn.vertexBuffer,Kn.indexBuffer,Kn.segments)}}(s,0,x,E,L):a.c7(x)&&function(F,X,Q,ae){const{isRenderingGlobe:be}=ae,Ae=F.context,Pe=Q.implementation,qe=F.style.projection,Ze=F.transform,dt=Ze.getProjectionDataForCustomLayer(be),ft={farZ:Ze.farZ,nearZ:Ze.nearZ,fov:Ze.fov*Math.PI/180,modelViewProjectionMatrix:Ze.modelViewProjectionMatrix,projectionMatrix:Ze.projectionMatrix,shaderData:{variantName:qe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${qe.shaderPreludeCode.vertexSource}`,define:qe.shaderDefine},defaultProjectionData:dt},pt=Pe.renderingMode?Pe.renderingMode:"2d";if(F.renderPass==="offscreen"){const Tt=Pe.prerender;Tt&&(F.setCustomLayerDefaults(),Ae.setColorMode(F.colorModeForRenderPass()),Tt.call(Pe,Ae.gl,ft),Ae.setDirty(),F.setBaseState())}else if(F.renderPass==="translucent"){F.setCustomLayerDefaults(),Ae.setColorMode(F.colorModeForRenderPass()),Ae.setStencilMode(ji.disabled);const Tt=pt==="3d"?F.getDepthModeFor3D():F.getDepthModeForSublayer(0,Ir.ReadOnly);Ae.setDepthMode(Tt),Pe.render(Ae.gl,ft),Ae.setDirty(),F.setBaseState(),Ae.bindFramebuffer.set(null)}}(s,0,x,L))}saveTileTexture(s){const d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const d=this.imageManager.getPattern(s.from.toString()),x=this.imageManager.getPattern(s.to.toString());return!d||!x}useProgram(s,d,x=!1){this.cache=this.cache||{};const E=!!this.style.map.terrain,L=this.style.projection,F=s+(d?d.cacheKey:"")+`/${x?he:L.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(E?"/terrain":"");return this.cache[F]||(this.cache[F]=new Ue(this.context,Gi[s],d,mc[s],this._showOverdrawInspector,E,x?Gi.projectionMercator:L.shaderPreludeCode,x?H:L.shaderDefine)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Y(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:d}=this.context.gl;return this.width!==s||this.height!==d}}function wd(R,s){let d,x=!1,E=null,L=null;const F=()=>{E=null,x&&(R.apply(L,d),E=setTimeout(F,s),x=!1)};return(...X)=>(x=!0,L=this,d=X,E||F(),E)}class Ds{constructor(s){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let x;return d.split("&").map(E=>E.split("=")).forEach(E=>{E[0]===this._hashName&&(x=E)}),(x&&x[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(!this._isValidHash(d))return!1;const x=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:x,pitch:+(d[4]||0)}),!0},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const x=d.join("/");let E=x;E.split("&").length>0&&(E=E.split("&")[0]),this._hashName&&(E=`${this._hashName}=${x}`);let L=window.location.hash.replace(E,"");L.startsWith("#&")?L=L.slice(0,1)+L.slice(2):L==="#"&&(L="");let F=window.location.href.replace(/(#.+)?$/,L);F=F.replace("&&","&"),window.history.replaceState(window.history.state,null,F)},this._updateHash=wd(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const d=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,E=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),L=Math.pow(10,E),F=Math.round(d.lng*L)/L,X=Math.round(d.lat*L)/L,Q=this._map.getBearing(),ae=this._map.getPitch();let be="";if(be+=s?`/${F}/${X}/${x}`:`${x}/${X}/${F}`,(Q||ae)&&(be+="/"+Math.round(10*Q)/10),ae&&(be+=`/${Math.round(ae)}`),this._hashName){const Ae=this._hashName;let Pe=!1;const qe=window.location.hash.slice(1).split("&").map(Ze=>{const dt=Ze.split("=")[0];return dt===Ae?(Pe=!0,`${dt}=${be}`):Ze}).filter(Ze=>Ze);return Pe||qe.push(`${Ae}=${be}`),`#${qe.join("&")}`}return`#${be}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new a.Q(+s[2],+s[1])}catch{return!1}const d=+s[0],x=+(s[3]||0),E=+(s[4]||0);return d>=this._map.getMinZoom()&&d<=this._map.getMaxZoom()&&x>=-180&&x<=180&&E>=this._map.getMinPitch()&&E<=this._map.getMaxPitch()}}const Xs={linearity:.3,easing:a.c8(0,0,.3,1)},Zl=a.e({deceleration:2500,maxSpeed:1400},Xs),mp=a.e({deceleration:20,maxSpeed:1400},Xs),rh=a.e({deceleration:1e3,maxSpeed:360},Xs),yu=a.e({deceleration:1e3,maxSpeed:90},Xs),ll=a.e({deceleration:1e3,maxSpeed:360},Xs);class Qh{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,d=w.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:L}of this._inertiaBuffer)d.zoom+=L.zoomDelta||0,d.bearing+=L.bearingDelta||0,d.pitch+=L.pitchDelta||0,d.roll+=L.rollDelta||0,L.panDelta&&d.pan._add(L.panDelta),L.around&&(d.around=L.around),L.pinchAround&&(d.pinchAround=L.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(d.pan.mag()){const L=ih(d.pan.mag(),x,a.e({},Zl,s||{})),F=d.pan.mult(L.amount/d.pan.mag()),X=this._map.cameraHelper.handlePanInertia(F,this._map.transform);E.center=X.easingCenter,E.offset=X.easingOffset,Qu(E,L)}if(d.zoom){const L=ih(d.zoom,x,mp);E.zoom=this._map.transform.zoom+L.amount,Qu(E,L)}if(d.bearing){const L=ih(d.bearing,x,rh);E.bearing=this._map.transform.bearing+a.ad(L.amount,-179,179),Qu(E,L)}if(d.pitch){const L=ih(d.pitch,x,yu);E.pitch=this._map.transform.pitch+L.amount,Qu(E,L)}if(d.roll){const L=ih(d.roll,x,ll);E.roll=this._map.transform.roll+a.ad(L.amount,-179,179),Qu(E,L)}if(E.zoom||E.bearing){const L=d.pinchAround===void 0?d.around:d.pinchAround;E.around=L?this._map.unproject(L):this._map.getCenter()}return this.clear(),a.e(E,{noMoveStart:!0})}}function Qu(R,s){(!R.duration||R.duration<s.duration)&&(R.duration=s.duration,R.easing=s.easing)}function ih(R,s,d){const{maxSpeed:x,linearity:E,deceleration:L}=d,F=a.ad(R*E/(s/1e3),-x,x),X=Math.abs(F)/(L*E);return{easing:d.easing,duration:1e3*X,amount:F*(X/2)}}class uo extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,x,E={}){const L=b.mousePos(d.getCanvas(),x),F=d.unproject(L);super(s,a.e({point:L,lngLat:F,originalEvent:x},E)),this._defaultPrevented=!1,this.target=d}}class Wo extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,x){const E=s==="touchend"?x.changedTouches:x.touches,L=b.touchPos(d.getCanvasContainer(),E),F=L.map(Q=>d.unproject(Q)),X=L.reduce((Q,ae,be,Ae)=>Q.add(ae.div(Ae.length)),new a.P(0,0));super(s,{points:L,point:X,lngLats:F,lngLat:d.unproject(X),originalEvent:x}),this._defaultPrevented=!1}}class Rf extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,x){super(s,{originalEvent:x}),this._defaultPrevented=!1}}class Ll{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Rf(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new uo(s.type,this._map,s))}mouseup(s){this._map.fire(new uo(s.type,this._map,s))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new uo(s.type,this._map,s))}dblclick(s){return this._firePreventable(new uo(s.type,this._map,s))}mouseover(s){this._map.fire(new uo(s.type,this._map,s))}mouseout(s){this._map.fire(new uo(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Wo(s.type,this._map,s))}touchmove(s){this._map.fire(new Wo(s.type,this._map,s))}touchend(s){this._map.fire(new Wo(s.type,this._map,s))}touchcancel(s){this._map.fire(new Wo(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Nu{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new uo(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new uo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new uo(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jc{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(a.P.convert(s),this._map.terrain)}}class ah{constructor(s,d){this._map=s,this._tr=new jc(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(b.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;const x=d;if(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)return;const E=this._startPos;this._lastPos=x,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const L=Math.min(E.x,x.x),F=Math.max(E.x,x.x),X=Math.min(E.y,x.y),Q=Math.max(E.y,x.y);b.setTransform(this._box,`translate(${L}px,${X}px)`),this._box.style.width=F-L+"px",this._box.style.height=Q-X+"px"}mouseupWindow(s,d){if(!this._active||s.button!==0)return;const x=this._startPos,E=d;if(this.reset(),b.suppressClick(),x.x!==E.x||x.y!==E.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:s})),{cameraAnimation:L=>L.fitScreenCoordinates(x,E,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new a.l(s,{originalEvent:d}))}}function Ch(R,s){if(R.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${R.length}, points ${s.length}`);const d={};for(let x=0;x<R.length;x++)d[R[x].identifier]=s[x];return d}class ku{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,d,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),x.length===this.numTouches&&(this.centroid=function(E){const L=new a.P(0,0);for(const F of E)L._add(F);return L.div(E.length)}(d),this.touches=Ch(x,d)))}touchmove(s,d,x){if(this.aborted||!this.centroid)return;const E=Ch(x,d);for(const L in this.touches){const F=E[L];(!F||F.dist(this.touches[L])>30)&&(this.aborted=!0)}}touchend(s,d,x){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class Yl{constructor(s){this.singleTap=new ku(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,d,x){this.singleTap.touchstart(s,d,x)}touchmove(s,d,x){this.singleTap.touchmove(s,d,x)}touchend(s,d,x){const E=this.singleTap.touchend(s,d,x);if(E){const L=s.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(E)<30;if(L&&F||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class Fu{constructor(s){this._tr=new jc(s),this._zoomIn=new Yl({numTouches:1,numTaps:2}),this._zoomOut=new Yl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,x){this._zoomIn.touchstart(s,d,x),this._zoomOut.touchstart(s,d,x)}touchmove(s,d,x){this._zoomIn.touchmove(s,d,x),this._zoomOut.touchmove(s,d,x)}touchend(s,d,x){const E=this._zoomIn.touchend(s,d,x),L=this._zoomOut.touchend(s,d,x),F=this._tr;return E?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:X=>X.easeTo({duration:300,zoom:F.zoom+1,around:F.unproject(E)},{originalEvent:s})}):L?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:X=>X.easeTo({duration:300,zoom:F.zoom-1,around:F.unproject(L)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kl{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const d=this._moveFunction(...s);if(d.bearingDelta||d.pitchDelta||d.rollDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(s,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(d)?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,d){if(!this.isEnabled())return;const x=this._lastPoint;if(!x)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const E=Array.isArray(d)?d[0]:d;return!this._moved&&E.dist(x)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=E,this._move(x,E))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&b.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Mr={0:1,2:2};class Jl{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const d=b.mouseButton(s);this._eventButton=d}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(d,x){const E=Mr[x];return d.buttons===void 0||(d.buttons&E)!==E}(s,this._eventButton)}isValidEndEvent(s){return b.mouseButton(s)===this._eventButton}}class Xo{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class Df{constructor(s=new Jl({checkCorrectEvent:()=>!0}),d=new Xo){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=d}_executeRelevantHandler(s,d,x){return s instanceof MouseEvent?d(s):typeof TouchEvent<"u"&&s instanceof TouchEvent?x(s):void 0}startMove(s){this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.startMove(d),d=>this.oneFingerTouchMoveStateManager.startMove(d))}endMove(s){this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.endMove(d),d=>this.oneFingerTouchMoveStateManager.endMove(d))}isValidStartEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidStartEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidStartEvent(d))}isValidMoveEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidMoveEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(d))}isValidEndEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidEndEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidEndEvent(d))}}const Vc=R=>{R.mousedown=R.dragStart,R.mousemoveWindow=R.dragMove,R.mouseup=R.dragEnd,R.contextmenu=s=>{s.preventDefault()}};class oh{constructor(s,d){this._clickTolerance=s.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,d,x){return this._calculateTransform(s,d,x)}touchmove(s,d,x){if(this._active){if(!this._shouldBePrevented(x.length))return s.preventDefault(),this._calculateTransform(s,d,x);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,d,x){this._calculateTransform(s,d,x),this._active&&this._shouldBePrevented(x.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,x){x.length>0&&(this._active=!0);const E=Ch(x,d),L=new a.P(0,0),F=new a.P(0,0);let X=0;for(const ae in E){const be=E[ae],Ae=this._touches[ae];Ae&&(L._add(be),F._add(be.sub(Ae)),X++,E[ae]=be)}if(this._touches=E,this._shouldBePrevented(X)||!F.mag())return;const Q=F.div(X);return this._sum._add(Q),this._sum.mag()<this._clickTolerance?void 0:{around:L.div(X),panDelta:Q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,d,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,x){if(!this._firstTwoTouches)return;s.preventDefault();const[E,L]=this._firstTwoTouches,F=Jr(x,d,E),X=Jr(x,d,L);if(!F||!X)return;const Q=this._aroundCenter?null:F.add(X).div(2);return this._move([F,X],Q,s)}touchend(s,d,x){if(!this._firstTwoTouches)return;const[E,L]=this._firstTwoTouches,F=Jr(x,d,E),X=Jr(x,d,L);F&&X||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Jr(R,s,d){for(let x=0;x<R.length;x++)if(R[x].identifier===d)return s[x]}function Ph(R,s){return Math.log(R/s)/Math.LN2}class N extends Sd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){const x=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Ph(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ph(this._distance,x),pinchAround:d}}}function $(R,s){return 180*R.angleWith(s)/Math.PI}class oe extends Sd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d,x){const E=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$(this._vector,E),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const d=25/(Math.PI*this._minDiameter)*360,x=$(s,this._startVector);return Math.abs(x)<d}}function xe(R){return Math.abs(R.y)>Math.abs(R.x)}class ze extends Sd{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,d,x){super.touchstart(s,d,x),this._currentTouchCount=x.length}_start(s){this._lastPoints=s,xe(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,x){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const E=s[0].sub(this._lastPoints[0]),L=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(E,L,x.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(E.y+L.y)/2*-.5}):void 0}gestureBeginsVertically(s,d,x){if(this._valid!==void 0)return this._valid;const E=s.mag()>=2,L=d.mag()>=2;if(!E&&!L)return;if(!E||!L)return this._firstMove===void 0&&(this._firstMove=x),x-this._firstMove<100&&void 0;const F=s.y>0==d.y>0;return xe(s)&&xe(d)&&F}}const Ke={panStep:100,bearingStep:15,pitchStep:10};class Je{constructor(s){this._tr=new jc(s);const d=Ke;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,x=0,E=0,L=0,F=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?x=-1:(s.preventDefault(),L=-1);break;case 39:s.shiftKey?x=1:(s.preventDefault(),L=1);break;case 38:s.shiftKey?E=1:(s.preventDefault(),F=-1);break;case 40:s.shiftKey?E=-1:(s.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(x=0,E=0),{cameraAnimation:X=>{const Q=this._tr;X.easeTo({duration:300,easeId:"keyboardHandler",easing:rt,zoom:d?Math.round(Q.zoom)+d*(s.shiftKey?2:1):Q.zoom,bearing:Q.bearing+x*this._bearingStep,pitch:Q.pitch+E*this._pitchStep,offset:[-L*this._panStep,-F*this._panStep],center:Q.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rt(R){return R*(2-R)}const ot=4.000244140625;class yt{constructor(s,d){this._onTimeout=x=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(x)},this._map=s,this._tr=new jc(s),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let d=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const x=w.now(),E=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,d!==0&&d%ot==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(E*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=b.mousePos(this._map.getCanvas(),s),x=this._tr;this._aroundPoint=this._aroundCenter?x.transform.locationToScreenPoint(a.Q.convert(x.center)):d,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const X=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=X),typeof this._targetZoom=="number"&&(this._targetZoom+=X)}if(this._delta!==0){const X=this._type==="wheel"&&Math.abs(this._delta)>ot?this._wheelZoomRate:this._defaultZoomRate;let Q=2/(1+Math.exp(-Math.abs(this._delta*X)));this._delta<0&&Q!==0&&(Q=1/Q);const ae=typeof this._targetZoom!="number"?s.scale:a.aH(this._targetZoom);this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,a.aa(ae*Q))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,x=this._startZoom,E=this._easing;let L,F=!1;if(this._type==="wheel"&&x&&E){const X=w.now()-this._lastWheelEventTime,Q=Math.min((X+5)/200,1),ae=E(Q);L=a.B.number(x,d,ae),Q<1?this._frameId||(this._frameId=!0):F=!0}else L=d,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=L,{noInertia:!0,needsRenderFrame:!F,zoomDelta:L-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=a.ca;if(this._prevEase){const x=this._prevEase,E=(w.now()-x.start)/x.duration,L=x.easing(E+.01)-x.easing(E),F=.27/Math.sqrt(L*L+1e-4)*.01,X=Math.sqrt(.0729-F*F);d=a.c8(F,X,.25,1)}return this._prevEase={start:w.now(),duration:s,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class en{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class bn{constructor(s){this._tr=new jc(s),this.reset()}reset(){this._active=!1}dblclick(s,d){return s.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mn{constructor(){this._tap=new Yl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,d,x){if(!this._swipePoint)if(this._tapTime){const E=d[0],L=s.timeStamp-this._tapTime<500,F=this._tapPoint.dist(E)<30;L&&F?x.length>0&&(this._swipePoint=E,this._swipeTouch=x[0].identifier):this.reset()}else this._tap.touchstart(s,d,x)}touchmove(s,d,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const E=d[0],L=E.y-this._swipePoint.y;return this._swipePoint=E,s.preventDefault(),this._active=!0,{zoomDelta:L/128}}}else this._tap.touchmove(s,d,x)}touchend(s,d,x){if(this._tapTime)this._swipePoint&&x.length===0&&this.reset();else{const E=this._tap.touchend(s,d,x);E&&(this._tapTime=s.timeStamp,this._tapPoint=E)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class un{constructor(s,d,x){this._el=s,this._mousePan=d,this._touchPan=x}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Rn{constructor(s,d,x,E){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=d,this._mousePitch=x,this._mouseRoll=E}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Mn{constructor(s,d,x,E){this._el=s,this._touchZoom=d,this._touchRotate=x,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Vt{constructor(s,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=b.create("div","maplibregl-cooperative-gesture-screen",s);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const x=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),E=document.createElement("div");E.className="maplibregl-desktop-message",E.textContent=d,this._container.appendChild(E);const L=document.createElement("div");L.className="maplibregl-mobile-message",L.textContent=x,this._container.appendChild(L),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(b.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,d){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:s,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const on=R=>R.zoom||R.drag||R.roll||R.pitch||R.rotate;class Yn extends a.l{}function Xn(R){return R.panDelta&&R.panDelta.mag()||R.zoomDelta||R.bearingDelta||R.pitchDelta||R.rollDelta}class Qn{constructor(s,d){this.handleWindowEvent=E=>{this.handleEvent(E,`${E.type}Window`)},this.handleEvent=(E,L)=>{if(E.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const F=E.type==="renderFrame"?void 0:E,X={needsRenderFrame:!1},Q={},ae={},be=E.touches,Ae=be?this._getMapTouches(be):void 0,Pe=Ae?b.touchPos(this._map.getCanvas(),Ae):b.mousePos(this._map.getCanvas(),E);for(const{handlerName:dt,handler:ft,allowed:pt}of this._handlers){if(!ft.isEnabled())continue;let Tt;this._blockedByActive(ae,pt,dt)?ft.reset():ft[L||E.type]&&(Tt=ft[L||E.type](E,Pe,Ae),this.mergeHandlerResult(X,Q,Tt,dt,F),Tt&&Tt.needsRenderFrame&&this._triggerRenderFrame()),(Tt||ft.isActive())&&(ae[dt]=ft)}const qe={};for(const dt in this._previousActiveHandlers)ae[dt]||(qe[dt]=F);this._previousActiveHandlers=ae,(Object.keys(qe).length||Xn(X))&&(this._changes.push([X,Q,qe]),this._triggerRenderFrame()),(Object.keys(ae).length||Xn(X))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ze}=X;Ze&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ze(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Qh(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[window,"blur",void 0]];for(const[E,L,F]of this._listeners)b.addEventListener(E,L,E===document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[s,d,x]of this._listeners)b.removeEventListener(s,d,s===document?this.handleWindowEvent:this.handleEvent,x)}_addDefaultHandlers(s){const d=this._map,x=d.getCanvasContainer();this._add("mapEvent",new Ll(d,s));const E=d.boxZoom=new ah(d,s);this._add("boxZoom",E),s.interactive&&s.boxZoom&&E.enable();const L=d.cooperativeGestures=new Vt(d,s.cooperativeGestures);this._add("cooperativeGestures",L),s.cooperativeGestures&&L.enable();const F=new Fu(d),X=new bn(d);d.doubleClickZoom=new en(X,F),this._add("tapZoom",F),this._add("clickZoom",X),s.interactive&&s.doubleClickZoom&&d.doubleClickZoom.enable();const Q=new mn;this._add("tapDragZoom",Q);const ae=d.touchPitch=new ze(d);this._add("touchPitch",ae),s.interactive&&s.touchPitch&&d.touchPitch.enable(s.touchPitch);const be=()=>d.project(d.getCenter()),Ae=function({enable:kt,clickTolerance:Bt,aroundCenter:Wt=!0,minPixelCenterThreshold:Gt=100,rotateDegreesPerPixelMoved:xn=.8},En){const zn=new Jl({checkCorrectEvent:Un=>b.mouseButton(Un)===0&&Un.ctrlKey||b.mouseButton(Un)===2&&!Un.ctrlKey});return new Kl({clickTolerance:Bt,move:(Un,kn)=>{const wr=En();if(Wt&&Math.abs(wr.y-Un.y)>Gt)return{bearingDelta:a.c9(new a.P(Un.x,kn.y),kn,wr)};let dr=(kn.x-Un.x)*xn;return Wt&&kn.y<wr.y&&(dr=-dr),{bearingDelta:dr}},moveStateManager:zn,enable:kt,assignEvents:Vc})}(s,be),Pe=function({enable:kt,clickTolerance:Bt,pitchDegreesPerPixelMoved:Wt=-.5}){const Gt=new Jl({checkCorrectEvent:xn=>b.mouseButton(xn)===0&&xn.ctrlKey||b.mouseButton(xn)===2});return new Kl({clickTolerance:Bt,move:(xn,En)=>({pitchDelta:(En.y-xn.y)*Wt}),moveStateManager:Gt,enable:kt,assignEvents:Vc})}(s),qe=function({enable:kt,clickTolerance:Bt,rollDegreesPerPixelMoved:Wt=.3},Gt){const xn=new Jl({checkCorrectEvent:En=>b.mouseButton(En)===2&&En.ctrlKey});return new Kl({clickTolerance:Bt,move:(En,zn)=>{const Un=Gt();let kn=(zn.x-En.x)*Wt;return zn.y<Un.y&&(kn=-kn),{rollDelta:kn}},moveStateManager:xn,enable:kt,assignEvents:Vc})}(s,be);d.dragRotate=new Rn(s,Ae,Pe,qe),this._add("mouseRotate",Ae,["mousePitch"]),this._add("mousePitch",Pe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",qe,["mousePitch"]),s.interactive&&s.dragRotate&&d.dragRotate.enable();const Ze=function({enable:kt,clickTolerance:Bt}){const Wt=new Jl({checkCorrectEvent:Gt=>b.mouseButton(Gt)===0&&!Gt.ctrlKey});return new Kl({clickTolerance:Bt,move:(Gt,xn)=>({around:xn,panDelta:xn.sub(Gt)}),activateOnStart:!0,moveStateManager:Wt,enable:kt,assignEvents:Vc})}(s),dt=new oh(s,d);d.dragPan=new un(x,Ze,dt),this._add("mousePan",Ze),this._add("touchPan",dt,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&d.dragPan.enable(s.dragPan);const ft=new oe,pt=new N;d.touchZoomRotate=new Mn(x,pt,ft,Q),this._add("touchRotate",ft,["touchPan","touchZoom"]),this._add("touchZoom",pt,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&d.touchZoomRotate.enable(s.touchZoomRotate);const Tt=d.scrollZoom=new yt(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Tt,["mousePan"]),s.interactive&&s.scrollZoom&&d.scrollZoom.enable(s.scrollZoom);const Nt=d.keyboard=new Je(d);this._add("keyboard",Nt),s.interactive&&s.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new Nu(d))}_add(s,d,x){this._handlers.push({handlerName:s,handler:d,allowed:x}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!on(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,d,x){for(const E in s)if(E!==x&&(!d||d.indexOf(E)<0))return!0;return!1}_getMapTouches(s){const d=[];for(const x of s)this._el.contains(x.target)&&d.push(x);return d}mergeHandlerResult(s,d,x,E,L){if(!x)return;a.e(s,x);const F={handlerName:E,originalEvent:x.originalEvent||L};x.zoomDelta!==void 0&&(d.zoom=F),x.panDelta!==void 0&&(d.drag=F),x.rollDelta!==void 0&&(d.roll=F),x.pitchDelta!==void 0&&(d.pitch=F),x.bearingDelta!==void 0&&(d.rotate=F)}_applyChanges(){const s={},d={},x={};for(const[E,L,F]of this._changes)E.panDelta&&(s.panDelta=(s.panDelta||new a.P(0,0))._add(E.panDelta)),E.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+E.pitchDelta),E.rollDelta&&(s.rollDelta=(s.rollDelta||0)+E.rollDelta),E.around!==void 0&&(s.around=E.around),E.pinchAround!==void 0&&(s.pinchAround=E.pinchAround),E.noInertia&&(s.noInertia=E.noInertia),a.e(d,L),a.e(x,F);this._updateMapTransform(s,d,x),this._changes=[]}_updateMapTransform(s,d,x){const E=this._map,L=E._getTransformForUpdate(),F=E.terrain;if(!(Xn(s)||F&&this._terrainMovement))return this._fireEvents(d,x,!0);E._stop(!0);let{panDelta:X,zoomDelta:Q,bearingDelta:ae,pitchDelta:be,rollDelta:Ae,around:Pe,pinchAround:qe}=s;qe!==void 0&&(Pe=qe),Pe=Pe||E.transform.centerPoint,F&&!L.isPointOnMapSurface(Pe)&&(Pe=L.centerPoint);const Ze={panDelta:X,zoomDelta:Q,rollDelta:Ae,pitchDelta:be,bearingDelta:ae,around:Pe};this._map.cameraHelper.useGlobeControls&&!L.isPointOnMapSurface(Pe)&&(Pe=L.centerPoint);const dt=Pe.distSqr(L.centerPoint)<.01?L.center:L.screenPointToLocation(X?Pe.sub(X):Pe);F?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Ze,L),this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?L.setCenter(L.screenPointToLocation(L.centerPoint.sub(X))):this._map.cameraHelper.handleMapControlsPan(Ze,L,dt):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Ze,L,dt))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Ze,L),this._map.cameraHelper.handleMapControlsPan(Ze,L,dt)),E._applyUpdatedTransform(L),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,x,!0)}_fireEvents(s,d,x){const E=on(this._eventsInProgress),L=on(s),F={};for(const Ae in s){const{originalEvent:Pe}=s[Ae];this._eventsInProgress[Ae]||(F[`${Ae}start`]=Pe),this._eventsInProgress[Ae]=s[Ae]}!E&&L&&this._fireEvent("movestart",L.originalEvent);for(const Ae in F)this._fireEvent(Ae,F[Ae]);L&&this._fireEvent("move",L.originalEvent);for(const Ae in s){const{originalEvent:Pe}=s[Ae];this._fireEvent(Ae,Pe)}const X={};let Q;for(const Ae in this._eventsInProgress){const{handlerName:Pe,originalEvent:qe}=this._eventsInProgress[Ae];this._handlersById[Pe].isActive()||(delete this._eventsInProgress[Ae],Q=d[Pe]||qe,X[`${Ae}end`]=Q)}for(const Ae in X)this._fireEvent(Ae,X[Ae]);const ae=on(this._eventsInProgress),be=(E||L)&&!ae;if(be&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Ae=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Ae.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Ae)}if(x&&be){this._updatingCamera=!0;const Ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Pe=qe=>qe!==0&&-this._bearingSnap<qe&&qe<this._bearingSnap;!Ae||!Ae.essential&&w.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:Q})),Pe(this._map.getBearing())&&this._map.resetNorth()):(Pe(Ae.bearing||this._map.getBearing())&&(Ae.bearing=0),Ae.freezeElevation=!0,this._map.easeTo(Ae,{originalEvent:Q})),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new a.l(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new Yn("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class jn extends a.E{constructor(s,d,x){super(),this._renderFrameCallback=()=>{const E=Math.min((w.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(E)),E<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=x.bearingSnap,this.cameraHelper=d,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(s,d){s.apply(this.transform),this.transform=s,this.cameraHelper=d}getCenter(){return new a.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,d){return this.jumpTo({elevation:s},d),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,d,x){return s=a.P.convert(s).mult(-1),this.panTo(this.transform.center,a.e({offset:s},d),x)}panTo(s,d,x){return this.easeTo(a.e({center:s},d),x)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,x){return this.easeTo(a.e({zoom:s},d),x)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,d){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new a.l("movestart",d)).fire(new a.l("move",d)).fire(new a.l("moveend",d))),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,x){return this.easeTo(a.e({bearing:s},d),x)}resetNorth(s,d){return this.rotateTo(0,a.e({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}getRoll(){return this.transform.roll}setRoll(s,d){return this.jumpTo({roll:s},d),this}cameraForBounds(s,d){s=He.convert(s).adjustAntiMeridian();const x=d&&d.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),x,d)}_cameraForBoxAndBearing(s,d,x,E){const L={top:0,bottom:0,right:0,left:0};if(typeof(E=a.e({padding:L,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){const ae=E.padding;E.padding={top:ae,bottom:ae,right:ae,left:ae}}const F=a.e(L,E.padding);E.padding=F;const X=this.transform,Q=new He(s,d);return this.cameraHelper.cameraForBoxAndBearing(E,F,Q,x,X)}fitBounds(s,d,x){return this._fitInternal(this.cameraForBounds(s,d),d,x)}fitScreenCoordinates(s,d,x,E,L){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(s)),this.transform.screenPointToLocation(a.P.convert(d)),x,E),E,L)}_fitInternal(s,d,x){return s?(delete(d=a.e(s,d)).padding,d.linear?this.easeTo(d,x):this.flyTo(d,x)):this}jumpTo(s,d){this.stop();const x=this._getTransformForUpdate();let E=!1,L=!1,F=!1;const X=x.zoom;this.cameraHelper.handleJumpToCenterZoom(x,s);const Q=x.zoom!==X;return"elevation"in s&&x.elevation!==+s.elevation&&x.setElevation(+s.elevation),"bearing"in s&&x.bearing!==+s.bearing&&(E=!0,x.setBearing(+s.bearing)),"pitch"in s&&x.pitch!==+s.pitch&&(L=!0,x.setPitch(+s.pitch)),"roll"in s&&x.roll!==+s.roll&&(F=!0,x.setRoll(+s.roll)),s.padding==null||x.isPaddingEqual(s.padding)||x.setPadding(s.padding),this._applyUpdatedTransform(x),this.fire(new a.l("movestart",d)).fire(new a.l("move",d)),Q&&this.fire(new a.l("zoomstart",d)).fire(new a.l("zoom",d)).fire(new a.l("zoomend",d)),E&&this.fire(new a.l("rotatestart",d)).fire(new a.l("rotate",d)).fire(new a.l("rotateend",d)),L&&this.fire(new a.l("pitchstart",d)).fire(new a.l("pitch",d)).fire(new a.l("pitchend",d)),F&&this.fire(new a.l("rollstart",d)).fire(new a.l("roll",d)).fire(new a.l("rollend",d)),this.fire(new a.l("moveend",d))}calculateCameraOptionsFromTo(s,d,x,E=0){const L=a.$.fromLngLat(s,d),F=a.$.fromLngLat(x,E),X=F.x-L.x,Q=F.y-L.y,ae=F.z-L.z,be=Math.hypot(X,Q,ae);if(be===0)throw new Error("Can't calculate camera options with same From and To");const Ae=Math.hypot(X,Q),Pe=a.aa(this.transform.cameraToCenterDistance/be/this.transform.tileSize),qe=180*Math.atan2(X,-Q)/Math.PI;let Ze=180*Math.acos(Ae/be)/Math.PI;return Ze=ae<0?90-Ze:90+Ze,{center:F.toLngLat(),elevation:E,zoom:Pe,pitch:Ze,bearing:qe}}calculateCameraOptionsFromCameraLngLatAltRotation(s,d,x,E,L){const F=this.transform.calculateCenterFromCameraLngLatAlt(s,d,x,E);return{center:F.center,elevation:F.elevation,zoom:F.zoom,bearing:x,pitch:E,roll:L}}easeTo(s,d){this._stop(!1,s.easeId),((s=a.e({offset:[0,0],duration:500,easing:a.ca},s)).animate===!1||!s.essential&&w.prefersReducedMotion)&&(s.duration=0);const x=this._getTransformForUpdate(),E=this.getBearing(),L=x.pitch,F=x.roll,X="bearing"in s?this._normalizeBearing(s.bearing,E):E,Q="pitch"in s?+s.pitch:L,ae="roll"in s?this._normalizeBearing(s.roll,F):F,be="padding"in s?s.padding:x.padding,Ae=a.P.convert(s.offset);let Pe,qe;s.around&&(Pe=a.Q.convert(s.around),qe=x.locationToScreenPoint(Pe));const Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},dt=this.cameraHelper.handleEaseTo(x,{bearing:X,pitch:Q,roll:ae,padding:be,around:Pe,aroundPoint:qe,offsetAsPoint:Ae,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||E!==X,this._pitching=this._pitching||Q!==L,this._rolling=this._rolling||ae!==F,this._padding=!x.isPaddingEqual(be),this._zooming=this._zooming||dt.isZooming,this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,Ze),this.terrain&&this._prepareElevation(dt.elevationCenter),this._ease(ft=>{dt.easeFunc(ft),this.terrain&&!s.freezeElevation&&this._updateElevation(ft),this._applyUpdatedTransform(x),this._fireMoveEvents(d)},ft=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d,ft)},s),this}_prepareEase(s,d,x={}){this._moving=!0,d||x.moving||this.fire(new a.l("movestart",s)),this._zooming&&!x.zooming&&this.fire(new a.l("zoomstart",s)),this._rotating&&!x.rotating&&this.fire(new a.l("rotatestart",s)),this._pitching&&!x.pitching&&this.fire(new a.l("pitchstart",s)),this._rolling&&!x.rolling&&this.fire(new a.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&d!==this._elevationTarget){const x=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(x-(d-(x*s+this._elevationStart))/(1-s)),this._elevationTarget=d}this.transform.setElevation(a.B.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};const d=s.getCameraLngLat(),x=s.getCameraAltitude(),E=this.terrain?this.terrain.getElevationForLngLatZoom(d,s.zoom):0;if(x<E){const L=this.calculateCameraOptionsFromTo(d,E,s.center,s.elevation);return{pitch:L.pitch,zoom:L.zoom}}return{}}_applyUpdatedTransform(s){const d=[];if(d.push(E=>this._elevateCameraIfInsideTerrain(E)),this.transformCameraUpdate&&d.push(E=>this.transformCameraUpdate(E)),!d.length)return;const x=s.clone();for(const E of d){const L=x.clone(),{center:F,zoom:X,roll:Q,pitch:ae,bearing:be,elevation:Ae}=E(L);F&&L.setCenter(F),Ae!==void 0&&L.setElevation(Ae),X!==void 0&&L.setZoom(X),Q!==void 0&&L.setRoll(Q),ae!==void 0&&L.setPitch(ae),be!==void 0&&L.setBearing(be),x.apply(L)}this.transform.apply(x)}_fireMoveEvents(s){this.fire(new a.l("move",s)),this._zooming&&this.fire(new a.l("zoom",s)),this._rotating&&this.fire(new a.l("rotate",s)),this._pitching&&this.fire(new a.l("pitch",s)),this._rolling&&this.fire(new a.l("roll",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const x=this._zooming,E=this._rotating,L=this._pitching,F=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,x&&this.fire(new a.l("zoomend",s)),E&&this.fire(new a.l("rotateend",s)),L&&this.fire(new a.l("pitchend",s)),F&&this.fire(new a.l("rollend",s)),this.fire(new a.l("moveend",s))}flyTo(s,d){if(!s.essential&&w.prefersReducedMotion){const kn=a.O(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(kn,d)}this.stop(),s=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.ca},s);const x=this._getTransformForUpdate(),E=x.bearing,L=x.pitch,F=x.roll,X=x.padding,Q="bearing"in s?this._normalizeBearing(s.bearing,E):E,ae="pitch"in s?+s.pitch:L,be="roll"in s?this._normalizeBearing(s.roll,F):F,Ae="padding"in s?s.padding:x.padding,Pe=a.P.convert(s.offset);let qe=x.centerPoint.add(Pe);const Ze=x.screenPointToLocation(qe),dt=this.cameraHelper.handleFlyTo(x,{bearing:Q,pitch:ae,roll:be,padding:Ae,locationAtOffset:Ze,offsetAsPoint:Pe,center:s.center,minZoom:s.minZoom,zoom:s.zoom});let ft=s.curve;const pt=Math.max(x.width,x.height),Tt=pt/dt.scaleOfZoom,Nt=dt.pixelPathLength;typeof dt.scaleOfMinZoom=="number"&&(ft=Math.sqrt(pt/dt.scaleOfMinZoom/Nt*2));const kt=ft*ft;function Bt(kn){const wr=(Tt*Tt-pt*pt+(kn?-1:1)*kt*kt*Nt*Nt)/(2*(kn?Tt:pt)*kt*Nt);return Math.log(Math.sqrt(wr*wr+1)-wr)}function Wt(kn){return(Math.exp(kn)-Math.exp(-kn))/2}function Gt(kn){return(Math.exp(kn)+Math.exp(-kn))/2}const xn=Bt(!1);let En=function(kn){return Gt(xn)/Gt(xn+ft*kn)},zn=function(kn){return pt*((Gt(xn)*(Wt(wr=xn+ft*kn)/Gt(wr))-Wt(xn))/kt)/Nt;var wr},Un=(Bt(!0)-xn)/ft;if(Math.abs(Nt)<2e-6||!isFinite(Un)){if(Math.abs(pt-Tt)<1e-6)return this.easeTo(s,d);const kn=Tt<pt?-1:1;Un=Math.abs(Math.log(Tt/pt))/ft,zn=()=>0,En=wr=>Math.exp(kn*ft*wr)}return s.duration="duration"in s?+s.duration:1e3*Un/("screenSpeed"in s?+s.screenSpeed/ft:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=E!==Q,this._pitching=ae!==L,this._rolling=be!==F,this._padding=!x.isPaddingEqual(Ae),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(dt.targetCenter),this._ease(kn=>{const wr=kn*Un,dr=1/En(wr),Kn=zn(wr);this._rotating&&x.setBearing(a.B.number(E,Q,kn)),this._pitching&&x.setPitch(a.B.number(L,ae,kn)),this._rolling&&x.setRoll(a.B.number(F,be,kn)),this._padding&&(x.interpolatePadding(X,Ae,kn),qe=x.centerPoint.add(Pe)),dt.easeFunc(kn,dr,Kn,qe),this.terrain&&!s.freezeElevation&&this._updateElevation(kn),this._applyUpdatedTransform(x),this._fireMoveEvents(d)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){var x;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const E=this._onEaseEnd;delete this._onEaseEnd,E.call(this,d)}return s||(x=this.handlers)===null||x===void 0||x.stop(!1),this}_ease(s,d,x){x.animate===!1||x.duration===0?(s(1),d()):(this._easeStart=w.now(),this._easeOptions=x,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,d){s=a.aK(s,-180,180);const x=Math.abs(s-d);return Math.abs(s-360-d)<x&&(s-=360),Math.abs(s+360-d)<x&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(a.Q.convert(s),this.transform.tileZoom):null}}const Bn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ri{constructor(s=Bn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._sanitizedAttributionHTML=void 0}_setElementTitle(s,d){const x=this._map._getUIString(`AttributionControl.${d}`);s.title=x,s.setAttribute("aria-label",x)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(E=>typeof E!="string"?"":E)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const d=this._map.style.sourceCaches;for(const E in d){const L=d[E];if(L.used||L.usedForTerrain){const F=L.getSource();F.attribution&&s.indexOf(F.attribution)<0&&s.push(F.attribution)}}s=s.filter(E=>String(E).trim()),s.sort((E,L)=>E.length-L.length),s=s.filter((E,L)=>{for(let F=L+1;F<s.length;F++)if(s[F].indexOf(E)>=0)return!1;return!0});const x=s.join(" | ");x!==this._sanitizedAttributionHTML&&(this._sanitizedAttributionHTML=b.sanitize(x),s.length?(this._innerContainer.innerHTML=this._sanitizedAttributionHTML,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class br{constructor(s={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const x=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&x.classList.add("maplibregl-compact"):x.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const d=b.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ua{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){const d=this._currentlyRunning,x=d?this._queue.concat(d):this._queue;for(const E of x)if(E.id===s)return void(E.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const x of d)if(!x.cancelled&&(x.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Li=a.aC([{name:"a_pos3d",type:"Int16",components:3}]);class ca extends a.E{constructor(s){super(),this._lastTilesetChange=w.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*2**this.deltaZoom,s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,d){this.sourceCache.update(s,d),this._renderableTilesKeys=[];const x={};for(const E of mt(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))x[E.key]=!0,this._renderableTilesKeys.push(E.key),this._tiles[E.key]||(E.terrainRttPosMatrix32f=new Float64Array(16),a.bN(E.terrainRttPosMatrix32f,0,a.Z,a.Z,0,0,1),this._tiles[E.key]=new pn(E,this.tileSize),this._lastTilesetChange=w.now());for(const E in this._tiles)x[E]||delete this._tiles[E]}freeRtt(s){for(const d in this._tiles){const x=this._tiles[d];(!s||x.tileID.equals(s)||x.tileID.isChildOf(s)||s.isChildOf(x.tileID))&&(x.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){const d={};for(const x of this._renderableTilesKeys){const E=this._tiles[x].tileID,L=s.clone(),F=a.b1();if(E.canonical.equals(s.canonical))a.bN(F,0,a.Z,a.Z,0,0,1);else if(E.canonical.isChildOf(s.canonical)){const X=E.canonical.z-s.canonical.z,Q=E.canonical.x-(E.canonical.x>>X<<X),ae=E.canonical.y-(E.canonical.y>>X<<X),be=a.Z>>X;a.bN(F,0,be,be,0,0,1),a.L(F,F,[-Q*be,-ae*be,0])}else{if(!s.canonical.isChildOf(E.canonical))continue;{const X=s.canonical.z-E.canonical.z,Q=s.canonical.x-(s.canonical.x>>X<<X),ae=s.canonical.y-(s.canonical.y>>X<<X),be=a.Z>>X;a.bN(F,0,a.Z,a.Z,0,0,1),a.L(F,F,[Q*be,ae*be,0]),a.M(F,F,[1/2**X,1/2**X,0])}}L.terrainRttPosMatrix32f=new Float32Array(F),d[x]=L}return d}getSourceTile(s,d){const x=this.sourceCache._source;let E=s.overscaledZ-this.deltaZoom;if(E>x.maxzoom&&(E=x.maxzoom),E<x.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(E).key);let L=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!L||!L.dem)&&d)for(;E>=x.minzoom&&(!L||!L.dem);)L=this.sourceCache.getTileByID(s.scaledTo(E--).key);return L}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}}class Ai{constructor(s,d,x){this._meshCache={},this.painter=s,this.sourceCache=new ca(d),this.options=x,this.exaggeration=typeof x.exaggeration=="number"?x.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,d,x,E=a.Z){var L;if(!(d>=0&&d<E&&x>=0&&x<E))return 0;const F=this.getTerrainData(s),X=(L=F.tile)===null||L===void 0?void 0:L.dem;if(!X)return 0;const Q=a.cb([],[d/E*a.Z,x/E*a.Z],F.u_terrain_matrix),ae=[Q[0]*X.dim,Q[1]*X.dim],be=Math.floor(ae[0]),Ae=Math.floor(ae[1]),Pe=ae[0]-be,qe=ae[1]-Ae;return X.get(be,Ae)*(1-Pe)*(1-qe)+X.get(be+1,Ae)*Pe*(1-qe)+X.get(be,Ae+1)*(1-Pe)*qe+X.get(be+1,Ae+1)*Pe*qe}getElevationForLngLatZoom(s,d){if(!a.cc(d,s.wrap()))return 0;const{tileID:x,mercatorX:E,mercatorY:L}=this._getOverscaledTileIDFromLngLatZoom(s,d);return this.getElevation(x,E%a.Z,L%a.Z,a.Z)}getElevation(s,d,x,E=a.Z){return this.getDEMElevation(s,d,x,E)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const E=this.painter.context,L=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Y(E,L,E.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Y(E,new a.R({width:1,height:1}),E.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.as([])}const d=this.sourceCache.getSourceTile(s,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const E=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new Y(E,d.dem.getPixels(),E.gl.RGBA,{premultiply:!1}),d.demTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const x=d&&d+d.tileID.key+s.key;if(x&&!this._demMatrixCache[x]){const E=this.sourceCache.sourceCache._source.maxzoom;let L=s.canonical.z-d.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=E?L=s.canonical.z-E:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const F=s.canonical.x-(s.canonical.x>>L<<L),X=s.canonical.y-(s.canonical.y>>L<<L),Q=a.cd(new Float64Array(16),[1/(a.Z<<L),1/(a.Z<<L),0]);a.L(Q,Q,[F*a.Z,X*a.Z,0]),this._demMatrixCache[s.key]={matrix:Q,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:x?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(s){const d=this.painter,x=d.width/devicePixelRatio,E=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===x&&this._fbo.height===E||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Y(d.context,{width:x,height:E,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Y(d.context,{width:x,height:E,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(x,E,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,x,E))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let L=0,F=0;L<this._coordsTextureSize;L++)for(let X=0;X<this._coordsTextureSize;X++,F+=4)d[F+0]=255&X,d[F+1]=255&L,d[F+2]=X>>8<<4|L>>8,d[F+3]=0;const x=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),E=new Y(s,x,s.gl.RGBA,{premultiply:!1});return E.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=E,E}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),x=this.painter.context,E=x.gl,L=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),F=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),X=Math.round(this.painter.height/devicePixelRatio);x.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),E.readPixels(L,X-F-1,1,1,E.RGBA,E.UNSIGNED_BYTE,d),x.bindFramebuffer.set(null);const Q=d[0]+(d[2]>>4<<8),ae=d[1]+((15&d[2])<<8),be=this.coordsIndex[255-d[3]],Ae=be&&this.sourceCache.getTileByID(be);if(!Ae)return null;const Pe=this._coordsTextureSize,qe=(1<<Ae.tileID.canonical.z)*Pe;return new a.$((Ae.tileID.canonical.x*Pe+Q)/qe+Ae.tileID.wrap,(Ae.tileID.canonical.y*Pe+ae)/qe,this.getElevation(Ae.tileID,Q,ae,Pe))}depthAtPoint(s){const d=new Uint8Array(4),x=this.painter.context,E=x.gl;return x.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),E.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,E.RGBA,E.UNSIGNED_BYTE,d),x.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(s){var d;const x=((d=this.painter.style.projection)===null||d===void 0?void 0:d.transitionState)>0,E=x&&s.canonical.y===0,L=x&&s.canonical.y===(1<<s.canonical.z)-1,F=`m_${E?"n":""}_${L?"s":""}`;if(this._meshCache[F])return this._meshCache[F];const X=this.painter.context,Q=new a.ce,ae=new a.aG,be=this.meshSize,Ae=a.Z/be,Pe=be*be;for(let Gt=0;Gt<=be;Gt++)for(let xn=0;xn<=be;xn++)Q.emplaceBack(xn*Ae,Gt*Ae,0);for(let Gt=0;Gt<Pe;Gt+=be+1)for(let xn=0;xn<be;xn++)ae.emplaceBack(xn+Gt,be+xn+Gt+1,be+xn+Gt+2),ae.emplaceBack(xn+Gt,be+xn+Gt+2,xn+Gt+1);const qe=Q.length,Ze=qe+(be+1),dt=(be+1)*be,ft=E?a.b8:0,pt=E?0:1,Tt=L?a.b9:a.Z,Nt=L?0:1;for(let Gt=0;Gt<=be;Gt++)Q.emplaceBack(Gt*Ae,ft,pt);for(let Gt=0;Gt<=be;Gt++)Q.emplaceBack(Gt*Ae,Tt,Nt);for(let Gt=0;Gt<be;Gt++)ae.emplaceBack(dt+Gt,Ze+Gt,Ze+Gt+1),ae.emplaceBack(dt+Gt,Ze+Gt+1,dt+Gt+1),ae.emplaceBack(0+Gt,qe+Gt+1,qe+Gt),ae.emplaceBack(0+Gt,0+Gt+1,qe+Gt+1);const kt=Q.length,Bt=kt+2*(be+1);for(const Gt of[0,1])for(let xn=0;xn<=be;xn++)for(const En of[0,1])Q.emplaceBack(Gt*a.Z,xn*Ae,En);for(let Gt=0;Gt<2*be;Gt+=2)ae.emplaceBack(kt+Gt,kt+Gt+1,kt+Gt+3),ae.emplaceBack(kt+Gt,kt+Gt+3,kt+Gt+2),ae.emplaceBack(Bt+Gt,Bt+Gt+3,Bt+Gt+1),ae.emplaceBack(Bt+Gt,Bt+Gt+2,Bt+Gt+3);const Wt=new Pi(X.createVertexBuffer(Q,Li.members),X.createIndexBuffer(ae),a.aF.simpleSegment(0,0,Q.length,ae.length));return this._meshCache[F]=Wt,Wt}getMeshFrameDelta(s){return 2*Math.PI*a.bq/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,d){var x;const{tileID:E}=this._getOverscaledTileIDFromLngLatZoom(s,d);return(x=this.getMinMaxElevation(E).minElevation)!==null&&x!==void 0?x:0}getMinMaxElevation(s){const d=this.getTerrainData(s).tile,x={minElevation:null,maxElevation:null};return d&&d.dem&&(x.minElevation=d.dem.min*this.exaggeration,x.maxElevation=d.dem.max*this.exaggeration),x}_getOverscaledTileIDFromLngLatZoom(s,d){const x=a.$.fromLngLat(s.wrap()),E=(1<<d)*a.Z,L=x.x*E,F=x.y*E,X=Math.floor(L/a.Z),Q=Math.floor(F/a.Z);return{tileID:new a.Y(d,0,d,X,Q),mercatorX:L,mercatorY:F}}}class eo{constructor(s,d,x){this._context=s,this._size=d,this._tileSize=x,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),x=new Y(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return x.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(x.texture),{id:s,fbo:d,texture:x,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>s.id!==d),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}const Yi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class jr{constructor(s,d){this.painter=s,this.terrain=d,this.pool=new eo(s.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(x=>!s._layers[x].isHidden(d)),this._coordsAscending={};for(const x in s.sourceCaches){this._coordsAscending[x]={};const E=s.sourceCaches[x].getVisibleCoordinates();for(const L of E){const F=this.terrain.sourceCache.getTerrainCoords(L);for(const X in F)this._coordsAscending[x][X]||(this._coordsAscending[x][X]=[]),this._coordsAscending[x][X].push(F[X])}}this._coordsAscendingStr={};for(const x of s._order){const E=s._layers[x],L=E.source;if(Yi[E.type]&&!this._coordsAscendingStr[L]){this._coordsAscendingStr[L]={};for(const F in this._coordsAscending[L])this._coordsAscendingStr[L][F]=this._coordsAscending[L][F].map(X=>X.key).sort().join()}}for(const x of this._renderableTiles)for(const E in this._coordsAscendingStr){const L=this._coordsAscendingStr[E][x.tileID.key];L&&L!==x.rttCoords[E]&&(x.rtt=[])}}renderLayer(s,d){if(s.isHidden(this.painter.transform.zoom))return!1;const x=Object.assign(Object.assign({},d),{isRenderingToTexture:!0}),E=s.type,L=this.painter,F=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Yi[E]&&(this._prevType&&Yi[this._prevType]||this._stacks.push([]),this._prevType=E,this._stacks[this._stacks.length-1].push(s.id),!F))return!0;if(Yi[this._prevType]||Yi[E]&&F){this._prevType=E;const X=this._stacks.length-1,Q=this._stacks[X]||[];for(const ae of this._renderableTiles){if(this.pool.isFull()&&(Ah(this.painter,this.terrain,this._rttTiles,x),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ae),ae.rtt[X]){const Ae=this.pool.getObjectForId(ae.rtt[X].id);if(Ae.stamp===ae.rtt[X].stamp){this.pool.useObject(Ae);continue}}const be=this.pool.getOrCreateFreeObject();this.pool.useObject(be),this.pool.stampObject(be),ae.rtt[X]={id:be.id,stamp:be.stamp},L.context.bindFramebuffer.set(be.fbo.framebuffer),L.context.clear({color:a.b6.transparent,stencil:0}),L.currentStencilSource=void 0;for(let Ae=0;Ae<Q.length;Ae++){const Pe=L.style._layers[Q[Ae]],qe=Pe.source?this._coordsAscending[Pe.source][ae.tileID.key]:[ae.tileID];L.context.viewport.set([0,0,be.fbo.width,be.fbo.height]),L._renderTileClippingMasks(Pe,qe,!0),L.renderLayer(L,L.style.sourceCaches[Pe.source],Pe,qe,x),Pe.source&&(ae.rttCoords[Pe.source]=this._coordsAscendingStr[Pe.source][ae.tileID.key])}}return Ah(this.painter,this.terrain,this._rttTiles,x),this._rttTiles=[],this.pool.freeAllObjects(),Yi[E]}return!1}}const Ui={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Xa=h,Ii={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Bn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},us={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ha{constructor(s,d,x=!1){this.mousedown=L=>{this.startMove(L,b.mousePos(this.element,L)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=L=>{this.move(L,b.mousePos(this.element,L))},this.mouseup=L=>{this._rotatePitchHanlder.dragEnd(L),this.offTemp()},this.touchstart=L=>{L.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,L.targetTouches)[0],this.startMove(L,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=L=>{L.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,L.targetTouches)[0],this.move(L,this._lastPos))},this.touchend=L=>{L.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=d;const E=new Df;this._rotatePitchHanlder=new Kl({clickTolerance:3,move:(L,F)=>{const X=d.getBoundingClientRect(),Q=new a.P((X.bottom-X.top)/2,(X.right-X.left)/2);return{bearingDelta:a.c9(new a.P(L.x,F.y),F,Q),pitchDelta:x?-.5*(F.y-L.y):void 0}},moveStateManager:E,enable:!0,assignEvents:()=>{}}),this.map=s,b.addEventListener(d,"mousedown",this.mousedown),b.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(d,"touchcancel",this.reset)}startMove(s,d){this._rotatePitchHanlder.dragStart(s,d),b.disableDrag()}move(s,d){const x=this.map,{bearingDelta:E,pitchDelta:L}=this._rotatePitchHanlder.dragMove(s,d)||{};E&&x.setBearing(x.getBearing()+E),L&&x.setPitch(x.getPitch()+L)}off(){const s=this.element;b.removeEventListener(s,"mousedown",this.mousedown),b.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let xo;function Ls(R,s,d){const x=new a.Q(R.lng,R.lat);if(R=new a.Q(R.lng,R.lat),s){const E=new a.Q(R.lng-360,R.lat),L=new a.Q(R.lng+360,R.lat),F=d.locationToScreenPoint(R).distSqr(s);d.locationToScreenPoint(E).distSqr(s)<F?R=E:d.locationToScreenPoint(L).distSqr(s)<F&&(R=L)}for(;Math.abs(R.lng-d.center.lng)>180;){const E=d.locationToScreenPoint(R);if(E.x>=0&&E.y>=0&&E.x<=d.width&&E.y<=d.height)break;R.lng>d.center.lng?R.lng-=360:R.lng+=360}return R.lng!==x.lng&&d.isPointOnMapSurface(d.locationToScreenPoint(R))?R:x}const Aa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Eo(R,s,d){const x=R.classList;for(const E in Aa)x.remove(`maplibregl-${d}-anchor-${E}`);x.add(`maplibregl-${d}-anchor-${s}`)}class Zo extends a.E{constructor(s){if(super(),this._onKeyPress=d=>{const x=d.code,E=d.charCode||d.keyCode;x!=="Space"&&x!=="Enter"&&E!==32&&E!==13||this.togglePopup()},this._onMapClick=d=>{const x=d.originalEvent.target,E=this._element;this._popup&&(x===E||E.contains(x))&&this.togglePopup()},this._update=d=>{var x;if(!this._map)return;const E=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!E)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ls(this._lngLat,this._flatPos,this._map.transform):(x=this._lngLat)===null||x===void 0?void 0:x.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let L="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?L=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(L=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let F="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?F="rotateX(0deg)":this._pitchAlignment==="map"&&(F=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${Aa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${F} ${L}`),w.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const x=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=x}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=a.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div");const d=b.createNS("http://www.w3.org/2000/svg","svg"),x=41,E=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${x}px`),d.setAttributeNS(null,"width",`${E}px`),d.setAttributeNS(null,"viewBox",`0 0 ${E} ${x}`);const L=b.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"stroke","none"),L.setAttributeNS(null,"stroke-width","1"),L.setAttributeNS(null,"fill","none"),L.setAttributeNS(null,"fill-rule","evenodd");const F=b.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");const X=b.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(3.0, 29.0)"),X.setAttributeNS(null,"fill","#000000");const Q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pt of Q){const Tt=b.createNS("http://www.w3.org/2000/svg","ellipse");Tt.setAttributeNS(null,"opacity","0.04"),Tt.setAttributeNS(null,"cx","10.5"),Tt.setAttributeNS(null,"cy","5.80029008"),Tt.setAttributeNS(null,"rx",pt.rx),Tt.setAttributeNS(null,"ry",pt.ry),X.appendChild(Tt)}const ae=b.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill",this._color);const be=b.createNS("http://www.w3.org/2000/svg","path");be.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(be);const Ae=b.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"opacity","0.25"),Ae.setAttributeNS(null,"fill","#000000");const Pe=b.createNS("http://www.w3.org/2000/svg","path");Pe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ae.appendChild(Pe);const qe=b.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),qe.setAttributeNS(null,"fill","#FFFFFF");const Ze=b.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"transform","translate(8.0, 8.0)");const dt=b.createNS("http://www.w3.org/2000/svg","circle");dt.setAttributeNS(null,"fill","#000000"),dt.setAttributeNS(null,"opacity","0.25"),dt.setAttributeNS(null,"cx","5.5"),dt.setAttributeNS(null,"cy","5.5"),dt.setAttributeNS(null,"r","5.4999962");const ft=b.createNS("http://www.w3.org/2000/svg","circle");ft.setAttributeNS(null,"fill","#FFFFFF"),ft.setAttributeNS(null,"cx","5.5"),ft.setAttributeNS(null,"cy","5.5"),ft.setAttributeNS(null,"r","5.4999962"),Ze.appendChild(dt),Ze.appendChild(ft),F.appendChild(X),F.appendChild(ae),F.appendChild(Ae),F.appendChild(qe),F.appendChild(Ze),d.appendChild(F),d.setAttributeNS(null,"height",x*this._scale+"px"),d.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(d),this._offset=a.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Eo(this._element,this._anchor,"marker"),s&&s.className)for(const d of s.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.Q.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const E=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(38.1-13.5+E)],"bottom-right":[-E,-1*(38.1-13.5+E)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var d,x;if(!(!((d=this._map)===null||d===void 0)&&d.terrain)){const Ae=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Ae&&(this._element.style.opacity=Ae))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const E=this._map,L=E.terrain.depthAtPoint(this._pos),F=E.terrain.getElevationForLngLatZoom(this._lngLat,E.transform.tileZoom);if(E.transform.lngLatToCameraDepth(this._lngLat,F)-L<.006)return void(this._element.style.opacity=this._opacity);const X=-this._offset.y/E.transform.pixelsPerMeter,Q=Math.sin(E.getPitch()*Math.PI/180)*X,ae=E.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),be=E.transform.lngLatToCameraDepth(this._lngLat,F+Q)-ae>.006;!((x=this._popup)===null||x===void 0)&&x.isOpen()&&be&&this._popup.remove(),this._element.style.opacity=be?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=a.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,d){return(this._opacity===void 0||s===void 0&&d===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const ul={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let cl=0,co=!1;const Bu={maxWidth:100,unit:"metric"};function ec(R,s,d){const x=d&&d.maxWidth||100,E=R._container.clientHeight/2,L=R._container.clientWidth/2,F=R.unproject([L-x/2,E]),X=R.unproject([L+x/2,E]),Q=Math.round(R.project(X).x-R.project(F).x),ae=Math.min(x,Q,R._container.clientWidth),be=F.distanceTo(X);if(d&&d.unit==="imperial"){const Ae=3.2808*be;Ae>5280?_u(s,ae,Ae/5280,R._getUIString("ScaleControl.Miles")):_u(s,ae,Ae,R._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?_u(s,ae,be/1852,R._getUIString("ScaleControl.NauticalMiles")):be>=1e3?_u(s,ae,be/1e3,R._getUIString("ScaleControl.Kilometers")):_u(s,ae,be,R._getUIString("ScaleControl.Meters"))}function _u(R,s,d,x){const E=function(L){const F=Math.pow(10,`${Math.floor(L)}`.length-1);let X=L/F;return X=X>=10?10:X>=5?5:X>=3?3:X>=2?2:X>=1?1:function(Q){const ae=Math.pow(10,Math.ceil(-Math.log(Q)/Math.LN10));return Math.round(Q*ae)/ae}(X),F*X}(d);R.style.width=s*(E/d)+"px",R.innerHTML=`${E}&nbsp;${x}`}const zu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ro=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Rh(R){if(R){if(typeof R=="number"){const s=Math.round(Math.abs(R)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,R),"top-left":new a.P(s,s),"top-right":new a.P(-s,s),bottom:new a.P(0,-R),"bottom-left":new a.P(s,-s),"bottom-right":new a.P(-s,-s),left:new a.P(R,0),right:new a.P(-R,0)}}if(R instanceof a.P||Array.isArray(R)){const s=a.P.convert(R);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:a.P.convert(R.center||[0,0]),top:a.P.convert(R.top||[0,0]),"top-left":a.P.convert(R["top-left"]||[0,0]),"top-right":a.P.convert(R["top-right"]||[0,0]),bottom:a.P.convert(R.bottom||[0,0]),"bottom-left":a.P.convert(R["bottom-left"]||[0,0]),"bottom-right":a.P.convert(R["bottom-right"]||[0,0]),left:a.P.convert(R.left||[0,0]),right:a.P.convert(R.right||[0,0])}}return Rh(new a.P(0,0))}const Lf=h;l.AJAXError=a.ci,l.Event=a.l,l.Evented=a.E,l.LngLat=a.Q,l.MercatorCoordinate=a.$,l.Point=a.P,l.addProtocol=a.cj,l.config=a.a,l.removeProtocol=a.ck,l.AttributionControl=ri,l.BoxZoomHandler=ah,l.CanvasSource=Ee,l.CooperativeGesturesHandler=Vt,l.DoubleClickZoomHandler=en,l.DragPanHandler=un,l.DragRotateHandler=Rn,l.EdgeInsets=Wn,l.FullscreenControl=class extends a.E{constructor(R={}){super(),this._onFullscreenChange=()=>{var s;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=d==null?void 0:d.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,R&&R.container&&(R.container instanceof HTMLElement?this._container=R.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const R=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",R).setAttribute("aria-hidden","true"),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Jt,l.GeolocateControl=class extends a.E{constructor(R){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{const d=new a.Q(s.coords.longitude,s.coords.latitude),x=s.coords.accuracy,E=this._map.getBearing(),L=a.e({bearing:E},this.options.fitBoundsOptions),F=He.fromLngLat(d,x);this._map.fitBounds(F,L,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const d=new a.Q(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&co)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Zo({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Zo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},ul,R)}onAdd(R){return this._map=R,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(s=!1){if(xo!==void 0&&!s)return xo;if(window.navigator.permissions===void 0)return xo=!!window.navigator.geolocation,xo;try{xo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{xo=!!window.navigator.geolocation}return xo})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,cl=0,co=!1}_isOutOfMapMaxBounds(R){const s=this._map.getMaxBounds(),d=R.coords;return s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const R=this._map.getBounds(),s=R.getSouthEast(),d=R.getNorthEast(),x=s.distanceTo(d),E=Math.ceil(this._accuracy/(x/this._map._container.clientHeight)*2);this._circleElement.style.width=`${E}px`,this._circleElement.style.height=`${E}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":cl--,co=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let R;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),cl++,cl>1?(R={maximumAge:6e5,timeout:0},co=!0):(R=this.options.positionOptions,co=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,R)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var R;const s=(R=this._map.getProjection())===null||R===void 0?void 0:R.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var R;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((R=this._map.getProjection())===null||R===void 0?void 0:R.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(R){return this._map=R,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=b.create("button","maplibregl-ctrl-globe",this._container),b.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=Ds,l.ImageSource=Ht,l.KeyboardHandler=Je,l.LngLatBounds=He,l.LogoControl=br,l.Map=class extends jn{constructor(R){var s,d;a.cf.mark(a.cg.create);const x=Object.assign(Object.assign(Object.assign({},Ii),R),{canvasContextAttributes:Object.assign(Object.assign({},Ii.canvasContextAttributes),R.canvasContextAttributes)});if(x.minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(x.minPitch!=null&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(x.maxPitch!=null&&x.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const E=new Cr,L=new ta;if(x.minZoom!==void 0&&E.setMinZoom(x.minZoom),x.maxZoom!==void 0&&E.setMaxZoom(x.maxZoom),x.minPitch!==void 0&&E.setMinPitch(x.minPitch),x.maxPitch!==void 0&&E.setMaxPitch(x.maxPitch),x.renderWorldCopies!==void 0&&E.setRenderWorldCopies(x.renderWorldCopies),super(E,L,{bearingSnap:x.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ua,this._controls=[],this._mapId=a.a3(),this._contextLost=X=>{X.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:X}))},this._contextRestored=X=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:X}))},this._onMapScroll=X=>{if(X.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=x.interactive,this._maxTileCacheSize=x.maxTileCacheSize,this._maxTileCacheZoomLevels=x.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},x.canvasContextAttributes),this._trackResize=x.trackResize===!0,this._bearingSnap=x.bearingSnap,this._centerClampedToGround=x.centerClampedToGround,this._refreshExpiredTiles=x.refreshExpiredTiles===!0,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions===!0,this._collectResourceTiming=x.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ui),x.locale),this._clickTolerance=x.clickTolerance,this._overridePixelRatio=x.pixelRatio,this._maxCanvasSize=x.maxCanvasSize,this.transformCameraUpdate=x.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=x.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=z.addThrottleControl(()=>this.isMoving()),this._requestManager=new q(x.transformRequest),typeof x.container=="string"){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let X=!1;const Q=wd(ae=>{this._trackResize&&!this._removed&&(this.resize(ae),this.redraw())},50);this._resizeObserver=new ResizeObserver(ae=>{X?Q(ae):X=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Qn(this,x),this._hash=x.hash&&new Ds(typeof x.hash=="string"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,elevation:x.elevation,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch,roll:x.roll}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,a.e({},x.fitBoundsOptions,{duration:0}))));const F=typeof x.style=="string"||((d=(s=x.style)===null||s===void 0?void 0:s.projection)===null||d===void 0?void 0:d.type)!=="globe";this.resize(null,F),this._localIdeographFontFamily=x.localIdeographFontFamily,this._validateStyle=x.validateStyle,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new ri(typeof x.attributionControl=="boolean"?void 0:x.attributionControl)),x.maplibreLogo&&this.addControl(new br,x.logoPosition),this.on("style.load",()=>{if(F||this._resizeTransform(),this.transform.unmodified){const X=a.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(X)}}),this.on("data",X=>{this._update(X.dataType==="style"),this.fire(new a.l(`${X.dataType}data`,X))}),this.on("dataloading",X=>{this.fire(new a.l(`${X.dataType}dataloading`,X))}),this.on("dataabort",X=>{this.fire(new a.l("sourcedataabort",X))})}_getMapId(){return this._mapId}addControl(R,s){if(s===void 0&&(s=R.getDefaultPosition?R.getDefaultPosition():"top-right"),!R||!R.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=R.onAdd(this);this._controls.push(R);const x=this._controlPositions[s];return s.indexOf("bottom")!==-1?x.insertBefore(d,x.firstChild):x.appendChild(d),this}removeControl(R){if(!R||!R.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(R);return s>-1&&this._controls.splice(s,1),R.onRemove(this),this}hasControl(R){return this._controls.indexOf(R)>-1}calculateCameraOptionsFromTo(R,s,d,x){return x==null&&this.terrain&&(x=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(R,s,d,x)}resize(R,s=!0){const[d,x]=this._containerDimensions(),E=this._getClampedPixelRatio(d,x);if(this._resizeCanvas(d,x,E),this.painter.resize(d,x,E),this.painter.overLimit()){const F=this.painter.context.gl;this._maxCanvasSize=[F.drawingBufferWidth,F.drawingBufferHeight];const X=this._getClampedPixelRatio(d,x);this._resizeCanvas(d,x,X),this.painter.resize(d,x,X)}this._resizeTransform(s);const L=!this._moving;return L&&(this.stop(),this.fire(new a.l("movestart",R)).fire(new a.l("move",R))),this.fire(new a.l("resize",R)),L&&this.fire(new a.l("moveend",R)),this}_resizeTransform(R=!0){var s;const[d,x]=this._containerDimensions();this.transform.resize(d,x,R),(s=this._requestedCameraState)===null||s===void 0||s.resize(d,x,R)}_getClampedPixelRatio(R,s){const{0:d,1:x}=this._maxCanvasSize,E=this.getPixelRatio(),L=R*E,F=s*E;return Math.min(L>d?d/L:1,F>x?x/F:1)*E}getPixelRatio(){var R;return(R=this._overridePixelRatio)!==null&&R!==void 0?R:devicePixelRatio}setPixelRatio(R){this._overridePixelRatio=R,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(R){return this.transform.setMaxBounds(He.convert(R)),this._update()}setMinZoom(R){if((R=R??-2)>=-2&&R<=this.transform.maxZoom)return this.transform.setMinZoom(R),this._update(),this.getZoom()<R&&this.setZoom(R),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(R){if((R=R??22)>=this.transform.minZoom)return this.transform.setMaxZoom(R),this._update(),this.getZoom()>R&&this.setZoom(R),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(R){if((R=R??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(R>=0&&R<=this.transform.maxPitch)return this.transform.setMinPitch(R),this._update(),this.getPitch()<R&&this.setPitch(R),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(R){if((R=R??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(R>=this.transform.minPitch)return this.transform.setMaxPitch(R),this._update(),this.getPitch()>R&&this.setPitch(R),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(R){return this.transform.setRenderWorldCopies(R),this._update()}project(R){return this.transform.locationToScreenPoint(a.Q.convert(R),this.style&&this.terrain)}unproject(R){return this.transform.screenPointToLocation(a.P.convert(R),this.terrain)}isMoving(){var R;return this._moving||((R=this.handlers)===null||R===void 0?void 0:R.isMoving())}isZooming(){var R;return this._zooming||((R=this.handlers)===null||R===void 0?void 0:R.isZooming())}isRotating(){var R;return this._rotating||((R=this.handlers)===null||R===void 0?void 0:R.isRotating())}_createDelegatedListener(R,s,d){if(R==="mouseenter"||R==="mouseover"){let x=!1;return{layers:s,listener:d,delegates:{mousemove:L=>{const F=s.filter(Q=>this.getLayer(Q)),X=F.length!==0?this.queryRenderedFeatures(L.point,{layers:F}):[];X.length?x||(x=!0,d.call(this,new uo(R,this,L.originalEvent,{features:X}))):x=!1},mouseout:()=>{x=!1}}}}if(R==="mouseleave"||R==="mouseout"){let x=!1;return{layers:s,listener:d,delegates:{mousemove:F=>{const X=s.filter(Q=>this.getLayer(Q));(X.length!==0?this.queryRenderedFeatures(F.point,{layers:X}):[]).length?x=!0:x&&(x=!1,d.call(this,new uo(R,this,F.originalEvent)))},mouseout:F=>{x&&(x=!1,d.call(this,new uo(R,this,F.originalEvent)))}}}}{const x=E=>{const L=s.filter(X=>this.getLayer(X)),F=L.length!==0?this.queryRenderedFeatures(E.point,{layers:L}):[];F.length&&(E.features=F,d.call(this,E),delete E.features)};return{layers:s,listener:d,delegates:{[R]:x}}}}_saveDelegatedListener(R,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[R]=this._delegatedListeners[R]||[],this._delegatedListeners[R].push(s)}_removeDelegatedListener(R,s,d){if(!this._delegatedListeners||!this._delegatedListeners[R])return;const x=this._delegatedListeners[R];for(let E=0;E<x.length;E++){const L=x[E];if(L.listener===d&&L.layers.length===s.length&&L.layers.every(F=>s.includes(F))){for(const F in L.delegates)this.off(F,L.delegates[F]);return void x.splice(E,1)}}}on(R,s,d){if(d===void 0)return super.on(R,s);const x=typeof s=="string"?[s]:s,E=this._createDelegatedListener(R,x,d);this._saveDelegatedListener(R,E);for(const L in E.delegates)this.on(L,E.delegates[L]);return{unsubscribe:()=>{this._removeDelegatedListener(R,x,d)}}}once(R,s,d){if(d===void 0)return super.once(R,s);const x=typeof s=="string"?[s]:s,E=this._createDelegatedListener(R,x,d);for(const L in E.delegates){const F=E.delegates[L];E.delegates[L]=(...X)=>{this._removeDelegatedListener(R,x,d),F(...X)}}this._saveDelegatedListener(R,E);for(const L in E.delegates)this.once(L,E.delegates[L]);return this}off(R,s,d){return d===void 0?super.off(R,s):(this._removeDelegatedListener(R,typeof s=="string"?[s]:s,d),this)}queryRenderedFeatures(R,s){if(!this.style)return[];let d;const x=R instanceof a.P||Array.isArray(R),E=x?R:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(x?{}:R)||{},E instanceof a.P||typeof E[0]=="number")d=[a.P.convert(E)];else{const L=a.P.convert(E[0]),F=a.P.convert(E[1]);d=[L,new a.P(F.x,L.y),F,new a.P(L.x,F.y),L]}return this.style.queryRenderedFeatures(d,s,this.transform)}querySourceFeatures(R,s){return this.style.querySourceFeatures(R,s)}setStyle(R,s){return(s=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&R?(this._diffStyle(R,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(R,s))}setTransformRequest(R){return this._requestManager.setTransformRequest(R),this}_getUIString(R){const s=this._locale[R];if(s==null)throw new Error(`Missing UI string '${R}'`);return s}_updateStyle(R,s){var d,x;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(R,s));const E=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!R)),R?(this.style=new Ru(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof R=="string"?this.style.loadURL(R,s,E):this.style.loadJSON(R,s,E),this):((x=(d=this.style)===null||d===void 0?void 0:d.projection)===null||x===void 0||x.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ru(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(R,s){if(typeof R=="string"){const d=this._requestManager.transformRequest(R,"Style");a.j(d,new AbortController).then(x=>{this._updateDiff(x.data,s)}).catch(x=>{x&&this.fire(new a.k(x))})}else typeof R=="object"&&this._updateDiff(R,s)}_updateDiff(R,s){try{this.style.setState(R,s)&&this._update(!0)}catch(d){a.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(R,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(R,s){return this._lazyInitEmptyStyle(),this.style.addSource(R,s),this._update(!0)}isSourceLoaded(R){const s=this.style&&this.style.sourceCaches[R];if(s!==void 0)return s.loaded();this.fire(new a.k(new Error(`There is no source with ID '${R}'`)))}setTerrain(R){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),R){const s=this.style.sourceCaches[R.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${R.source}`);this.terrain===null&&s.reload();for(const d in this.style._layers){const x=this.style._layers[d];x.type==="hillshade"&&x.source===R.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ai(this.painter,s,R),this.painter.renderToTexture=new jr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==R.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:R})),this}getTerrain(){var R,s;return(s=(R=this.terrain)===null||R===void 0?void 0:R.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const R=this.style&&this.style.sourceCaches;for(const s in R){const d=R[s]._tiles;for(const x in d){const E=d[x];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0}removeSource(R){return this.style.removeSource(R),this._update(!0)}getSource(R){return this.style.getSource(R)}addImage(R,s,d={}){const{pixelRatio:x=1,sdf:E=!1,stretchX:L,stretchY:F,content:X,textFitWidth:Q,textFitHeight:ae}=d;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||a.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:be,height:Ae,data:Pe}=s,qe=s;return this.style.addImage(R,{data:new a.R({width:be,height:Ae},new Uint8Array(Pe)),pixelRatio:x,stretchX:L,stretchY:F,content:X,textFitWidth:Q,textFitHeight:ae,sdf:E,version:0,userImage:qe}),qe.onAdd&&qe.onAdd(this,R),this}}{const{width:be,height:Ae,data:Pe}=w.getImageData(s);this.style.addImage(R,{data:new a.R({width:be,height:Ae},Pe),pixelRatio:x,stretchX:L,stretchY:F,content:X,textFitWidth:Q,textFitHeight:ae,sdf:E,version:0})}}updateImage(R,s){const d=this.style.getImage(R);if(!d)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=s instanceof HTMLImageElement||a.b(s)?w.getImageData(s):s,{width:E,height:L,data:F}=x;if(E===void 0||L===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(E!==d.data.width||L!==d.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const X=!(s instanceof HTMLImageElement||a.b(s));return d.data.replace(F,X),this.style.updateImage(R,d),this}getImage(R){return this.style.getImage(R)}hasImage(R){return R?!!this.style.getImage(R):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(R){this.style.removeImage(R)}loadImage(R){return z.getImage(this._requestManager.transformRequest(R,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(R,s){return this._lazyInitEmptyStyle(),this.style.addLayer(R,s),this._update(!0)}moveLayer(R,s){return this.style.moveLayer(R,s),this._update(!0)}removeLayer(R){return this.style.removeLayer(R),this._update(!0)}getLayer(R){return this.style.getLayer(R)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(R,s,d){return this.style.setLayerZoomRange(R,s,d),this._update(!0)}setFilter(R,s,d={}){return this.style.setFilter(R,s,d),this._update(!0)}getFilter(R){return this.style.getFilter(R)}setPaintProperty(R,s,d,x={}){return this.style.setPaintProperty(R,s,d,x),this._update(!0)}getPaintProperty(R,s){return this.style.getPaintProperty(R,s)}setLayoutProperty(R,s,d,x={}){return this.style.setLayoutProperty(R,s,d,x),this._update(!0)}getLayoutProperty(R,s){return this.style.getLayoutProperty(R,s)}setGlyphs(R,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(R,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(R,s,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(R,s,d,x=>{x||this._update(!0)}),this}removeSprite(R){return this._lazyInitEmptyStyle(),this.style.removeSprite(R),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(R,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(R,s,d=>{d||this._update(!0)}),this}setLight(R,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(R,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(R,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(R,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(R,s){return this.style.setFeatureState(R,s),this._update()}removeFeatureState(R,s){return this.style.removeFeatureState(R,s),this._update()}getFeatureState(R){return this.style.getFeatureState(R)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let R=0,s=0;return this._container&&(R=this._container.clientWidth||400,s=this._container.clientHeight||300),[R,s]}_setupContainer(){const R=this._container;R.classList.add("maplibregl-map");const s=this._canvasContainer=b.create("div","maplibregl-canvas-container",R);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),x=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],x);const E=this._controlContainer=b.create("div","maplibregl-control-container",R),L=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(F=>{L[F]=b.create("div",`maplibregl-ctrl-${F} `,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(R,s,d){this._canvas.width=Math.floor(d*R),this._canvas.height=Math.floor(d*s),this._canvas.style.width=`${R}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const R=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let s=null;this._canvas.addEventListener("webglcontextcreationerror",x=>{s={requestedAttributes:R},x&&(s.statusMessage=x.statusMessage,s.type=x.type)},{once:!0});let d=null;if(d=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,R):this._canvas.getContext("webgl2",R)||this._canvas.getContext("webgl",R),!d){const x="Failed to initialize WebGL";throw s?(s.message=x,new Error(JSON.stringify(s))):new Error(x)}this.painter=new xd(d,this.transform),A.testSupport(d)}migrateProjection(R,s){super.migrateProjection(R,s),this.painter.transform=R,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(R){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||R,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(R){return this._update(),this._renderTaskQueue.add(R)}_cancelRenderFrame(R){this._renderTaskQueue.remove(R)}_render(R){var s,d,x,E,L;const F=this._idleTriggered?this._fadeDuration:0,X=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(R),this._removed)return;let Q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Ae=this.transform.zoom,Pe=w.now();this.style.zoomHistory.update(Ae,Pe);const qe=new a.C(Ae,{now:Pe,fadeDuration:F,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ze=qe.crossFadingFactor();Ze===1&&Ze===this._crossFadingFactor||(Q=!0,this._crossFadingFactor=Ze),this.style.update(qe)}const ae=((d=this.style.projection)===null||d===void 0?void 0:d.transitionState)>0!==X;(x=this.style.projection)===null||x===void 0||x.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((E=this.style.projection)===null||E===void 0?void 0:E.transitionState,(L=this.style.projection)===null||L===void 0?void 0:L.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ae)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,F,this._crossSourceCollisions,ae),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:F,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cf.mark(a.cg.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||Q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const be=this._sourcesDirty||this._styleDirty||this._placementDirty;return be||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||be||(this._fullyLoaded=!0,a.cf.mark(a.cg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var R;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),z.removeThrottleControl(this._imageQueueHandle),(R=this._resizeObserver)===null||R===void 0||R.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cf.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,w.frame(this._frameRequest,R=>{a.cf.frame(R),this._frameRequest=null;try{this._render(R)}catch(s){if(!a.ch(s)&&!function(d){return d.message===gu}(s))throw s}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(R){this._showTileBoundaries!==R&&(this._showTileBoundaries=R,this._update())}get showPadding(){return!!this._showPadding}set showPadding(R){this._showPadding!==R&&(this._showPadding=R,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(R){this._showCollisionBoxes!==R&&(this._showCollisionBoxes=R,R?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(R){this._showOverdrawInspector!==R&&(this._showOverdrawInspector=R,this._update())}get repaint(){return!!this._repaint}set repaint(R){this._repaint!==R&&(this._repaint=R,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(R){this._vertices=R,this._update()}get version(){return Xa}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(R){return this._lazyInitEmptyStyle(),this.style.setProjection(R),this._update(!0)}},l.MapMouseEvent=uo,l.MapTouchEvent=Wo,l.MapWheelEvent=Rf,l.Marker=Zo,l.NavigationControl=class{constructor(R){this._updateZoomButtons=()=>{const s=this._map.getZoom(),d=s===this._map.getMaxZoom(),x=s===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,d)=>{const x=this._map._getUIString(`NavigationControl.${d}`);s.title=x,s.setAttribute("aria-label",x)},this.options=a.e({},us,R),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ha(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(R,s){const d=b.create("button",R,this._container);return d.type="button",d.addEventListener("click",s),d}},l.Popup=class extends a.E{constructor(R){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._closeButton&&this._closeButton.removeEventListener("click",this._onClose),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const X of this.options.className.split(" "))this._container.classList.add(X);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ls(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._trackPointer&&!s)return;const x=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let E=this.options.anchor;const L=Rh(this.options.offset);if(!E){const X=this._container.offsetWidth,Q=this._container.offsetHeight;let ae;ae=x.y+L.bottom.y<Q?["top"]:x.y>this._map.transform.height-Q?["bottom"]:[],x.x<X/2?ae.push("left"):x.x>this._map.transform.width-X/2&&ae.push("right"),E=ae.length===0?"bottom":ae.join("-")}let F=x.add(L[E]);this.options.subpixelPositioning||(F=F.round()),b.setTransform(this._container,`${Aa[E]} translate(${F.x}px,${F.y}px)`),Eo(this._container,E,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(zu),R)}addTo(R){return this._map&&this.remove(),this._map=R,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(R){return this._lngLat=a.Q.convert(R),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(R){return this.setDOMContent(document.createTextNode(R))}setHTML(R){const s=document.createDocumentFragment(),d=document.createElement("body");let x;for(d.innerHTML=R;x=d.firstChild,x;)s.appendChild(x);return this.setDOMContent(s)}getMaxWidth(){var R;return(R=this._container)===null||R===void 0?void 0:R.style.maxWidth}setMaxWidth(R){return this.options.maxWidth=R,this._update(),this}setDOMContent(R){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(R),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(R){return this._container&&this._container.classList.add(R),this}removeClassName(R){return this._container&&this._container.classList.remove(R),this}setOffset(R){return this.options.offset=R,this._update(),this}toggleClassName(R){if(this._container)return this._container.classList.toggle(R)}setSubpixelPositioning(R){this.options.subpixelPositioning=R}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const R=this._container.querySelector(ro);R&&R.focus()}},l.RasterDEMTileSource=Kt,l.RasterTileSource=tn,l.ScaleControl=class{constructor(R){this._onMove=()=>{ec(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,ec(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Bu),R)}getDefaultPosition(){return"bottom-left"}onAdd(R){return this._map=R,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=yt,l.Style=Ru,l.TerrainControl=class{constructor(R){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=R}onAdd(R){return this._map=R,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=ze,l.TwoFingersTouchRotateHandler=oe,l.TwoFingersTouchZoomHandler=N,l.TwoFingersTouchZoomRotateHandler=Mn,l.VectorTileSource=Xe,l.VideoSource=$e,l.addSourceType=(R,s)=>a._(void 0,void 0,void 0,function*(){if(jt(R))throw new Error(`A source type called "${R}" already exists.`);((d,x)=>{_t[d]=x})(R,s)}),l.clearPrewarmedResources=function(){const R=le;R&&(R.isPreloaded()&&R.numActive()===1?(R.release(Me),le=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=jo,l.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return hn().getRTLTextPluginStatus()},l.getVersion=function(){return Lf},l.getWorkerCount=function(){return fe.workerCount},l.getWorkerUrl=function(){return a.a.WORKER_URL},l.importScriptInWorkers=function(R){return Ve().broadcast("IS",R)},l.prewarm=function(){Se().acquire(Me)},l.setMaxParallelImageRequests=function(R){a.a.MAX_PARALLEL_IMAGE_REQUESTS=R},l.setRTLTextPlugin=function(R,s){return hn().setRTLTextPlugin(R,s)},l.setWorkerCount=function(R){fe.workerCount=R},l.setWorkerUrl=function(R){a.a.WORKER_URL=R}});var o=n;return o})}(gw)),gw.exports}var LX=DX();const ic=[];for(let t=0;t<256;++t)ic.push((t+256).toString(16).slice(1));function IX(t,e=0){return(ic[t[e+0]]+ic[t[e+1]]+ic[t[e+2]]+ic[t[e+3]]+"-"+ic[t[e+4]]+ic[t[e+5]]+"-"+ic[t[e+6]]+ic[t[e+7]]+"-"+ic[t[e+8]]+ic[t[e+9]]+"-"+ic[t[e+10]]+ic[t[e+11]]+ic[t[e+12]]+ic[t[e+13]]+ic[t[e+14]]+ic[t[e+15]]).toLowerCase()}let hT;const OX=new Uint8Array(16);function NX(){if(!hT){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");hT=crypto.getRandomValues.bind(crypto)}return hT(OX)}const kX=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),RI={randomUUID:kX};function gR(t,e,n){var i;if(RI.randomUUID&&!t)return RI.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??NX();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,IX(r)}const FX="modulepreload",BX=function(t,e){return new URL(t,e).href},DI={},GC=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const l=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),h=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(f=>{if(f=BX(f,r),f in DI)return;DI[f]=!0;const v=f.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(!!r)for(let A=l.length-1;A>=0;A--){const M=l[A];if(M.href===f&&(!v||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=v?"stylesheet":FX,v||(b.as="script"),b.crossOrigin="",b.href=f,h&&b.setAttribute("nonce",h),document.head.appendChild(b),v)return new Promise((A,M)=>{b.addEventListener("load",A),b.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return i.then(l=>{for(const a of l||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};function Co(t){"@babel/helpers - typeof";return Co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Co(t)}var Lc=Uint8Array,jh=Uint16Array,vR=Int32Array,GS=new Lc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qS=new Lc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qC=new Lc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vz=function(t,e){for(var n=new jh(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new vR(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},Gz=Vz(GS,2),qz=Gz.b,HC=Gz.r;qz[28]=258,HC[258]=28;var Hz=Vz(qS,0),zX=Hz.b,LI=Hz.r,$C=new jh(32768);for(var xs=0;xs<32768;++xs){var Nm=(xs&43690)>>1|(xs&21845)<<1;Nm=(Nm&52428)>>2|(Nm&13107)<<2,Nm=(Nm&61680)>>4|(Nm&3855)<<4,$C[xs]=((Nm&65280)>>8|(Nm&255)<<8)>>1}var ap=function(t,e,n){for(var r=t.length,i=0,o=new jh(e);i<r;++i)t[i]&&++o[t[i]-1];var l=new jh(e);for(i=1;i<e;++i)l[i]=l[i-1]+o[i-1]<<1;var a;if(n){a=new jh(1<<e);var h=15-e;for(i=0;i<r;++i)if(t[i])for(var f=i<<4|t[i],v=e-t[i],y=l[t[i]-1]++<<v,w=y|(1<<v)-1;y<=w;++y)a[$C[y]>>h]=f}else for(a=new jh(r),i=0;i<r;++i)t[i]&&(a[i]=$C[l[t[i]-1]++]>>15-t[i]);return a},sg=new Lc(288);for(var xs=0;xs<144;++xs)sg[xs]=8;for(var xs=144;xs<256;++xs)sg[xs]=9;for(var xs=256;xs<280;++xs)sg[xs]=7;for(var xs=280;xs<288;++xs)sg[xs]=8;var Nb=new Lc(32);for(var xs=0;xs<32;++xs)Nb[xs]=5;var UX=ap(sg,9,0),jX=ap(sg,9,1),VX=ap(Nb,5,0),GX=ap(Nb,5,1),fT=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Wf=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},dT=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},yR=function(t){return(t+7)/8|0},$z=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Lc(t.subarray(e,n))},qX=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ed=function(t,e,n){var r=new Error(e||qX[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ed),!n)throw r;return r},HX=function(t,e,n,r){var i=t.length,o=0;if(!i||e.f&&!e.l)return n||new Lc(0);var l=!n,a=l||e.i!=2,h=e.i;l&&(n=new Lc(i*3));var f=function(it){var gt=n.length;if(it>gt){var $t=new Lc(Math.max(gt*2,it));$t.set(n),n=$t}},v=e.f||0,y=e.p||0,w=e.b||0,b=e.l,A=e.d,M=e.m,P=e.n,C=i*8;do{if(!b){v=Wf(t,y,1);var k=Wf(t,y+1,3);if(y+=3,k)if(k==1)b=jX,A=GX,M=9,P=5;else if(k==2){var V=Wf(t,y,31)+257,W=Wf(t,y+10,15)+4,Y=V+Wf(t,y+5,31)+1;y+=14;for(var Z=new Lc(Y),j=new Lc(19),K=0;K<W;++K)j[qC[K]]=Wf(t,y+K*3,7);y+=W*3;for(var re=fT(j),ie=(1<<re)-1,se=ap(j,re,1),K=0;K<Y;){var de=se[Wf(t,y,ie)];y+=de&15;var B=de>>4;if(B<16)Z[K++]=B;else{var ue=0,Te=0;for(B==16?(Te=3+Wf(t,y,3),y+=2,ue=Z[K-1]):B==17?(Te=3+Wf(t,y,7),y+=3):B==18&&(Te=11+Wf(t,y,127),y+=7);Te--;)Z[K++]=ue}}var pe=Z.subarray(0,V),De=Z.subarray(V);M=fT(pe),P=fT(De),b=ap(pe,M,1),A=ap(De,P,1)}else ed(1);else{var B=yR(y)+4,z=t[B-4]|t[B-3]<<8,q=B+z;if(q>i){h&&ed(0);break}a&&f(w+z),n.set(t.subarray(B,q),w),e.b=w+=z,e.p=y=q*8,e.f=v;continue}if(y>C){h&&ed(0);break}}a&&f(w+131072);for(var me=(1<<M)-1,Me=(1<<P)-1,fe=y;;fe=y){var ue=b[dT(t,y)&me],ve=ue>>4;if(y+=ue&15,y>C){h&&ed(0);break}if(ue||ed(2),ve<256)n[w++]=ve;else if(ve==256){fe=y,b=null;break}else{var le=ve-254;if(ve>264){var K=ve-257,ye=GS[K];le=Wf(t,y,(1<<ye)-1)+qz[K],y+=ye}var Se=A[dT(t,y)&Me],Be=Se>>4;Se||ed(3),y+=Se&15;var De=zX[Be];if(Be>3){var ye=qS[Be];De+=dT(t,y)&(1<<ye)-1,y+=ye}if(y>C){h&&ed(0);break}a&&f(w+131072);var Ve=w+le;if(w<De){var tt=o-De,ht=Math.min(De,Ve);for(tt+w<0&&ed(3);w<ht;++w)n[w]=r[tt+w]}for(;w<Ve;++w)n[w]=n[w-De]}}e.l=b,e.p=fe,e.b=w,e.f=v,b&&(v=1,e.m=M,e.d=A,e.n=P)}while(!v);return w!=n.length&&l?$z(n,0,w):n.subarray(0,w)},Op=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},D1=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},pT=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return{t:Xz,l:0};if(i==1){var l=new Lc(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort(function(q,V){return q.f-V.f}),n.push({s:-1,f:25001});var a=n[0],h=n[1],f=0,v=1,y=2;for(n[0]={s:-1,f:a.f+h.f,l:a,r:h};v!=i-1;)a=n[n[f].f<n[y].f?f++:y++],h=n[f!=v&&n[f].f<n[y].f?f++:y++],n[v++]={s:-1,f:a.f+h.f,l:a,r:h};for(var w=o[0].s,r=1;r<i;++r)o[r].s>w&&(w=o[r].s);var b=new jh(w+1),A=WC(n[v-1],b,0);if(A>e){var r=0,M=0,P=A-e,C=1<<P;for(o.sort(function(V,W){return b[W.s]-b[V.s]||V.f-W.f});r<i;++r){var k=o[r].s;if(b[k]>e)M+=C-(1<<A-b[k]),b[k]=e;else break}for(M>>=P;M>0;){var B=o[r].s;b[B]<e?M-=1<<e-b[B]++-1:++r}for(;r>=0&&M;--r){var z=o[r].s;b[z]==e&&(--b[z],++M)}A=e}return{t:new Lc(b),l:A}},WC=function(t,e,n){return t.s==-1?Math.max(WC(t.l,e,n+1),WC(t.r,e,n+1)):e[t.s]=n},II=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new jh(++e),r=0,i=t[0],o=1,l=function(h){n[r++]=h},a=1;a<=e;++a)if(t[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(i),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(i);o=1,i=t[a]}return{c:n.subarray(0,r),n:e}},L1=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Wz=function(t,e,n){var r=n.length,i=yR(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var o=0;o<r;++o)t[i+o+4]=n[o];return(i+4+r)*8},OI=function(t,e,n,r,i,o,l,a,h,f,v){Op(e,v++,n),++i[256];for(var y=pT(i,15),w=y.t,b=y.l,A=pT(o,15),M=A.t,P=A.l,C=II(w),k=C.c,B=C.n,z=II(M),q=z.c,V=z.n,W=new jh(19),Y=0;Y<k.length;++Y)++W[k[Y]&31];for(var Y=0;Y<q.length;++Y)++W[q[Y]&31];for(var Z=pT(W,7),j=Z.t,K=Z.l,re=19;re>4&&!j[qC[re-1]];--re);var ie=f+5<<3,se=L1(i,sg)+L1(o,Nb)+l,de=L1(i,w)+L1(o,M)+l+14+3*re+L1(W,j)+2*W[16]+3*W[17]+7*W[18];if(h>=0&&ie<=se&&ie<=de)return Wz(e,v,t.subarray(h,h+f));var ue,Te,pe,De;if(Op(e,v,1+(de<se)),v+=2,de<se){ue=ap(w,b,0),Te=w,pe=ap(M,P,0),De=M;var me=ap(j,K,0);Op(e,v,B-257),Op(e,v+5,V-1),Op(e,v+10,re-4),v+=14;for(var Y=0;Y<re;++Y)Op(e,v+3*Y,j[qC[Y]]);v+=3*re;for(var Me=[k,q],fe=0;fe<2;++fe)for(var ve=Me[fe],Y=0;Y<ve.length;++Y){var le=ve[Y]&31;Op(e,v,me[le]),v+=j[le],le>15&&(Op(e,v,ve[Y]>>5&127),v+=ve[Y]>>12)}}else ue=UX,Te=sg,pe=VX,De=Nb;for(var Y=0;Y<a;++Y){var ye=r[Y];if(ye>255){var le=ye>>18&31;D1(e,v,ue[le+257]),v+=Te[le+257],le>7&&(Op(e,v,ye>>23&31),v+=GS[le]);var Se=ye&31;D1(e,v,pe[Se]),v+=De[Se],Se>3&&(D1(e,v,ye>>5&8191),v+=qS[Se])}else D1(e,v,ue[ye]),v+=Te[ye]}return D1(e,v,ue[256]),v+Te[256]},$X=new vR([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Xz=new Lc(0),WX=function(t,e,n,r,i,o){var l=o.z||t.length,a=new Lc(r+l+5*(1+Math.ceil(l/7e3))+i),h=a.subarray(r,a.length-i),f=o.l,v=(o.r||0)&7;if(e){v&&(h[0]=o.r>>3);for(var y=$X[e-1],w=y>>13,b=y&8191,A=(1<<n)-1,M=o.p||new jh(32768),P=o.h||new jh(A+1),C=Math.ceil(n/3),k=2*C,B=function(He){return(t[He]^t[He+1]<<C^t[He+2]<<k)&A},z=new vR(25e3),q=new jh(288),V=new jh(32),W=0,Y=0,Z=o.i||0,j=0,K=o.w||0,re=0;Z+2<l;++Z){var ie=B(Z),se=Z&32767,de=P[ie];if(M[se]=de,P[ie]=se,K<=Z){var ue=l-Z;if((W>7e3||j>24576)&&(ue>423||!f)){v=OI(t,h,0,z,q,V,Y,j,re,Z-re,v),j=W=Y=0,re=Z;for(var Te=0;Te<286;++Te)q[Te]=0;for(var Te=0;Te<30;++Te)V[Te]=0}var pe=2,De=0,me=b,Me=se-de&32767;if(ue>2&&ie==B(Z-Me))for(var fe=Math.min(w,ue)-1,ve=Math.min(32767,Z),le=Math.min(258,ue);Me<=ve&&--me&&se!=de;){if(t[Z+pe]==t[Z+pe-Me]){for(var ye=0;ye<le&&t[Z+ye]==t[Z+ye-Me];++ye);if(ye>pe){if(pe=ye,De=Me,ye>fe)break;for(var Se=Math.min(Me,ye-2),Be=0,Te=0;Te<Se;++Te){var Ve=Z-Me+Te&32767,tt=M[Ve],ht=Ve-tt&32767;ht>Be&&(Be=ht,de=Ve)}}}se=de,de=M[se],Me+=se-de&32767}if(De){z[j++]=268435456|HC[pe]<<18|LI[De];var it=HC[pe]&31,gt=LI[De]&31;Y+=GS[it]+qS[gt],++q[257+it],++V[gt],K=Z+pe,++W}else z[j++]=t[Z],++q[t[Z]]}}for(Z=Math.max(Z,K);Z<l;++Z)z[j++]=t[Z],++q[t[Z]];v=OI(t,h,f,z,q,V,Y,j,re,Z-re,v),f||(o.r=v&7|h[v/8|0]<<3,v-=7,o.h=P,o.p=M,o.i=Z,o.w=K)}else{for(var Z=o.w||0;Z<l+f;Z+=65535){var $t=Z+65535;$t>=l&&(h[v/8|0]=f,$t=l),v=Wz(h,v+1,t.subarray(Z,$t))}o.i=l}return $z(a,0,r+yR(v)+i)},Zz=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length|0,l=0;l!=o;){for(var a=Math.min(l+2655,o);l<a;++l)i+=r+=n[l];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},XX=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),l=new Lc(o.length+t.length);l.set(o),l.set(t,o.length),t=l,i.w=o.length}return WX(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},Yz=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},ZX=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=Zz();i.p(e.dictionary),Yz(t,2,i.d())}},YX=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ed(6,"invalid zlib data"),(t[1]>>5&1)==1&&ed(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function XC(t,e){e||(e={});var n=Zz();n.p(t);var r=XX(t,e,e.dictionary?6:2,4);return ZX(r,e),Yz(r,r.length-4,n.d()),r}function KX(t,e){return HX(t.subarray(YX(t),-4),{i:2},e,e)}var JX=typeof TextDecoder<"u"&&new TextDecoder,QX=0;try{JX.decode(Xz,{stream:!0}),QX=1}catch{}var Fi=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function mT(){Fi.console&&typeof Fi.console.log=="function"&&Fi.console.log.apply(Fi.console,arguments)}var is={log:mT,warn:function(t){Fi.console&&(typeof Fi.console.warn=="function"?Fi.console.warn.apply(Fi.console,arguments):mT.call(null,arguments))},error:function(t){Fi.console&&(typeof Fi.console.error=="function"?Fi.console.error.apply(Fi.console,arguments):mT(t))}};function gT(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s0(r.response,e,n)},r.onerror=function(){is.error("could not download file")},r.send()}function NI(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function i2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var vb,ZC,s0=Fi.saveAs||((typeof window>"u"?"undefined":Co(window))!=="object"||window!==Fi?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Fi.URL||Fi.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?NI(i.href)?gT(t,e,n):i2(i,i.target="_blank"):i2(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){i2(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(NI(t))gT(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){i2(r)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:Co(o)!=="object"&&(is.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return gT(t,e,n);var i=t.type==="application/octet-stream",o=/constructor/i.test(Fi.HTMLElement)||Fi.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&o)&&(typeof FileReader>"u"?"undefined":Co(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var v=a.result;v=l?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=v:location=v,r=null},a.readAsDataURL(t)}else{var h=Fi.URL||Fi.webkitURL,f=h.createObjectURL(t);r?r.location=f:location.href=f,r=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Kz(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,l=i.exec(t);l&&(e=o(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return a.length==1&&(a="0"+a),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+a+h+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function vT(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n=Ec(n,r,i,o,e[0],7,-680876936),o=Ec(o,n,r,i,e[1],12,-389564586),i=Ec(i,o,n,r,e[2],17,606105819),r=Ec(r,i,o,n,e[3],22,-1044525330),n=Ec(n,r,i,o,e[4],7,-176418897),o=Ec(o,n,r,i,e[5],12,1200080426),i=Ec(i,o,n,r,e[6],17,-1473231341),r=Ec(r,i,o,n,e[7],22,-45705983),n=Ec(n,r,i,o,e[8],7,1770035416),o=Ec(o,n,r,i,e[9],12,-1958414417),i=Ec(i,o,n,r,e[10],17,-42063),r=Ec(r,i,o,n,e[11],22,-1990404162),n=Ec(n,r,i,o,e[12],7,1804603682),o=Ec(o,n,r,i,e[13],12,-40341101),i=Ec(i,o,n,r,e[14],17,-1502002290),n=Tc(n,r=Ec(r,i,o,n,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Tc(o,n,r,i,e[6],9,-1069501632),i=Tc(i,o,n,r,e[11],14,643717713),r=Tc(r,i,o,n,e[0],20,-373897302),n=Tc(n,r,i,o,e[5],5,-701558691),o=Tc(o,n,r,i,e[10],9,38016083),i=Tc(i,o,n,r,e[15],14,-660478335),r=Tc(r,i,o,n,e[4],20,-405537848),n=Tc(n,r,i,o,e[9],5,568446438),o=Tc(o,n,r,i,e[14],9,-1019803690),i=Tc(i,o,n,r,e[3],14,-187363961),r=Tc(r,i,o,n,e[8],20,1163531501),n=Tc(n,r,i,o,e[13],5,-1444681467),o=Tc(o,n,r,i,e[2],9,-51403784),i=Tc(i,o,n,r,e[7],14,1735328473),n=Mc(n,r=Tc(r,i,o,n,e[12],20,-1926607734),i,o,e[5],4,-378558),o=Mc(o,n,r,i,e[8],11,-2022574463),i=Mc(i,o,n,r,e[11],16,1839030562),r=Mc(r,i,o,n,e[14],23,-35309556),n=Mc(n,r,i,o,e[1],4,-1530992060),o=Mc(o,n,r,i,e[4],11,1272893353),i=Mc(i,o,n,r,e[7],16,-155497632),r=Mc(r,i,o,n,e[10],23,-1094730640),n=Mc(n,r,i,o,e[13],4,681279174),o=Mc(o,n,r,i,e[0],11,-358537222),i=Mc(i,o,n,r,e[3],16,-722521979),r=Mc(r,i,o,n,e[6],23,76029189),n=Mc(n,r,i,o,e[9],4,-640364487),o=Mc(o,n,r,i,e[12],11,-421815835),i=Mc(i,o,n,r,e[15],16,530742520),n=Ac(n,r=Mc(r,i,o,n,e[2],23,-995338651),i,o,e[0],6,-198630844),o=Ac(o,n,r,i,e[7],10,1126891415),i=Ac(i,o,n,r,e[14],15,-1416354905),r=Ac(r,i,o,n,e[5],21,-57434055),n=Ac(n,r,i,o,e[12],6,1700485571),o=Ac(o,n,r,i,e[3],10,-1894986606),i=Ac(i,o,n,r,e[10],15,-1051523),r=Ac(r,i,o,n,e[1],21,-2054922799),n=Ac(n,r,i,o,e[8],6,1873313359),o=Ac(o,n,r,i,e[15],10,-30611744),i=Ac(i,o,n,r,e[6],15,-1560198380),r=Ac(r,i,o,n,e[13],21,1309151649),n=Ac(n,r,i,o,e[4],6,-145523070),o=Ac(o,n,r,i,e[11],10,-1120210379),i=Ac(i,o,n,r,e[2],15,718787259),r=Ac(r,i,o,n,e[9],21,-343485551),t[0]=Zm(n,t[0]),t[1]=Zm(r,t[1]),t[2]=Zm(i,t[2]),t[3]=Zm(o,t[3])}function HS(t,e,n,r,i,o){return e=Zm(Zm(e,t),Zm(r,o)),Zm(e<<i|e>>>32-i,n)}function Ec(t,e,n,r,i,o,l){return HS(e&n|~e&r,t,e,i,o,l)}function Tc(t,e,n,r,i,o,l){return HS(e&r|n&~r,t,e,i,o,l)}function Mc(t,e,n,r,i,o,l){return HS(e^n^r,t,e,i,o,l)}function Ac(t,e,n,r,i,o,l){return HS(n^(e|~r),t,e,i,o,l)}function Jz(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)vT(r,eZ(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(vT(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,vT(r,i),r}function eZ(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}vb=Fi.atob.bind(Fi),ZC=Fi.btoa.bind(Fi);var kI="0123456789abcdef".split("");function tZ(t){for(var e="",n=0;n<4;n++)e+=kI[t>>8*n+4&15]+kI[t>>8*n&15];return e}function nZ(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function YC(t){return Jz(t).map(nZ).join("")}var rZ=function(t){for(var e=0;e<t.length;e++)t[e]=tZ(t[e]);return t.join("")}(Jz("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zm(t,e){if(rZ){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function KC(t,e){var n,r,i,o;if(t!==n){for(var l=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),a=[],h=0;h<256;h++)a[h]=h;var f=0;for(h=0;h<256;h++){var v=a[h];f=(f+v+l.charCodeAt(h))%256,a[h]=a[f],a[f]=v}n=t,r=a}else a=r;var y=e.length,w=0,b=0,A="";for(h=0;h<y;h++)b=(b+(v=a[w=(w+1)%256]))%256,a[w]=a[b],a[b]=v,l=a[(a[w]+a[b])%256],A+=String.fromCharCode(e.charCodeAt(h)^l);return A}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var FI={print:4,modify:8,copy:16,"annot-forms":32};function gy(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(FI.perm!==void 0)throw new Error("Invalid permission: "+a);i+=FI[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(e+this.padding).substr(0,32),l=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^i)),this.encryptionKey=YC(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=KC(this.encryptionKey,this.padding)}function vy(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function BI(t){if(Co(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[r,!!i],o},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[n]){var l=e[n][o];try{l[0].apply(t,r)}catch(a){Fi.console&&is.error("jsPDF PubSub Error",a.message,a)}l[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Vw(t){if(!(this instanceof Vw))return new Vw(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Qz(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function h0(t,e,n,r,i){if(!(this instanceof h0))return new h0(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Qz.call(this,r,i)}function ky(t,e,n,r,i){if(!(this instanceof ky))return new ky(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Qz.call(this,r,i)}function ki(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],l=[],a=1,h=16,f="S",v=null;Co(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,o=t.compress||t.compressPdf||o,(v=t.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(h=t.floatPrecision),f=t.defaultPathOperation||"S"),l=t.filters||(o===!0?["FlateEncode"]:l),r=r||"mm",n=(""+(n||"P")).toLowerCase();var y=t.putOnlyUsedFonts||!1,w={},b={internal:{},__private__:{}};b.__private__.PubSub=BI;var A="1.3",M=b.__private__.getPdfVersion=function(){return A};b.__private__.setPdfVersion=function(ee){A=ee};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return P};var C=b.__private__.getPageFormat=function(ee){return P[ee]};i=i||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},B=k.COMPAT;function z(){this.saveGraphicsState(),Xe(new Gn(Ft,0,0,-Ft,0,rl()*Ft).toString()+" cm"),this.setFontSize(this.getFontSize()/Ft),f="n",B=k.ADVANCED}function q(){this.restoreGraphicsState(),f="S",B=k.COMPAT}var V=b.__private__.combineFontStyleAndFontWeight=function(ee,Ue){if(ee=="bold"&&Ue=="normal"||ee=="bold"&&Ue==400||ee=="normal"&&Ue=="italic"||ee=="bold"&&Ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ue&&(ee=Ue==400||Ue==="normal"?ee==="italic"?"italic":"normal":Ue!=700&&Ue!=="bold"||ee!=="normal"?(Ue==700?"bold":Ue)+""+ee:"bold"),ee};b.advancedAPI=function(ee){var Ue=B===k.COMPAT;return Ue&&z.call(this),typeof ee!="function"||(ee(this),Ue&&q.call(this)),this},b.compatAPI=function(ee){var Ue=B===k.ADVANCED;return Ue&&q.call(this),typeof ee!="function"||(ee(this),Ue&&z.call(this)),this},b.isAdvancedAPI=function(){return B===k.ADVANCED};var W,Y=function(ee){if(B!==k.ADVANCED)throw new Error(ee+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Z=b.roundToPrecision=b.__private__.roundToPrecision=function(ee,Ue){var Mt=e||Ue;if(isNaN(ee)||isNaN(Mt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ee.toFixed(Mt).replace(/0+$/,"")};W=b.hpf=b.__private__.hpf=typeof h=="number"?function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(ee,h)}:h==="smart"?function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(ee,ee>-1&&ee<1?16:5)}:function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(ee,16)};var j=b.f2=b.__private__.f2=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.f2");return Z(ee,2)},K=b.__private__.f3=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.f3");return Z(ee,3)},re=b.scale=b.__private__.scale=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.scale");return B===k.COMPAT?ee*Ft:B===k.ADVANCED?ee:void 0},ie=function(ee){return B===k.COMPAT?rl()-ee:B===k.ADVANCED?ee:void 0},se=function(ee){return re(ie(ee))};b.__private__.setPrecision=b.setPrecision=function(ee){typeof parseInt(ee,10)=="number"&&(e=parseInt(ee,10))};var de,ue="00000000000000000000000000000000",Te=b.__private__.getFileId=function(){return ue},pe=b.__private__.setFileId=function(ee){return ue=ee!==void 0&&/^[a-fA-F0-9]{32}$/.test(ee)?ee.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(Lr=new gy(v.userPermissions,v.userPassword,v.ownerPassword,ue)),ue};b.setFileId=function(ee){return pe(ee),this},b.getFileId=function(){return Te()};var De=b.__private__.convertDateToPDFDate=function(ee){var Ue=ee.getTimezoneOffset(),Mt=Ue<0?"+":"-",Zt=Math.floor(Math.abs(Ue/60)),yn=Math.abs(Ue%60),qn=[Mt,le(Zt),"'",le(yn),"'"].join("");return["D:",ee.getFullYear(),le(ee.getMonth()+1),le(ee.getDate()),le(ee.getHours()),le(ee.getMinutes()),le(ee.getSeconds()),qn].join("")},me=b.__private__.convertPDFDateToDate=function(ee){var Ue=parseInt(ee.substr(2,4),10),Mt=parseInt(ee.substr(6,2),10)-1,Zt=parseInt(ee.substr(8,2),10),yn=parseInt(ee.substr(10,2),10),qn=parseInt(ee.substr(12,2),10),fr=parseInt(ee.substr(14,2),10);return new Date(Ue,Mt,Zt,yn,qn,fr,0)},Me=b.__private__.setCreationDate=function(ee){var Ue;if(ee===void 0&&(ee=new Date),ee instanceof Date)Ue=De(ee);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ee))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ue=ee}return de=Ue},fe=b.__private__.getCreationDate=function(ee){var Ue=de;return ee==="jsDate"&&(Ue=me(de)),Ue};b.setCreationDate=function(ee){return Me(ee),this},b.getCreationDate=function(ee){return fe(ee)};var ve,le=b.__private__.padd2=function(ee){return("0"+parseInt(ee)).slice(-2)},ye=b.__private__.padd2Hex=function(ee){return("00"+(ee=ee.toString())).substr(ee.length)},Se=0,Be=[],Ve=[],tt=0,ht=[],it=[],gt=!1,$t=Ve,He=function(){Se=0,tt=0,Ve=[],Be=[],ht=[],Er=sn(),lr=sn()};b.__private__.setCustomOutputDestination=function(ee){gt=!0,$t=ee};var Ct=function(ee){gt||($t=ee)};b.__private__.resetCustomOutputDestination=function(){gt=!1,$t=Ve};var Xe=b.__private__.out=function(ee){return ee=ee.toString(),tt+=ee.length+1,$t.push(ee),$t},tn=b.__private__.write=function(ee){return Xe(arguments.length===1?ee.toString():Array.prototype.join.call(arguments," "))},Kt=b.__private__.getArrayBuffer=function(ee){for(var Ue=ee.length,Mt=new ArrayBuffer(Ue),Zt=new Uint8Array(Mt);Ue--;)Zt[Ue]=ee.charCodeAt(Ue);return Mt},Jt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Jt};var Ht=t.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(ee){return Ht=B===k.ADVANCED?ee/Ft:ee,this};var $e,Ee=b.__private__.getFontSize=b.getFontSize=function(){return B===k.COMPAT?Ht:Ht*Ft},_t=t.R2L||!1;b.__private__.setR2L=b.setR2L=function(ee){return _t=ee,this},b.__private__.getR2L=b.getR2L=function(){return _t};var jt,vt=b.__private__.setZoomMode=function(ee){var Ue=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ee))$e=ee;else if(isNaN(ee)){if(Ue.indexOf(ee)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ee+'" is not recognized.');$e=ee}else $e=parseInt(ee,10)};b.__private__.getZoomMode=function(){return $e};var Pt,vn=b.__private__.setPageMode=function(ee){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ee)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ee+'" is not recognized.');jt=ee};b.__private__.getPageMode=function(){return jt};var hn=b.__private__.setLayoutMode=function(ee){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ee)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ee+'" is not recognized.');Pt=ee};b.__private__.getLayoutMode=function(){return Pt},b.__private__.setDisplayMode=b.setDisplayMode=function(ee,Ue,Mt){return vt(ee),hn(Ue),vn(Mt),this};var pn={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(ee){if(Object.keys(pn).indexOf(ee)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pn[ee]},b.__private__.getDocumentProperties=function(){return pn},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(ee){for(var Ue in pn)pn.hasOwnProperty(Ue)&&ee[Ue]&&(pn[Ue]=ee[Ue]);return this},b.__private__.setDocumentProperty=function(ee,Ue){if(Object.keys(pn).indexOf(ee)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pn[ee]=Ue};var nn,Ft,In,Pn,ir,mt={},ge={},ke=[],We={},Ce={},Qe={},et={},ut=null,lt=0,xt=[],Dt=new BI(b),zt=t.hotfixes||[],Tn={},qt={},Zn=[],Gn=function ee(Ue,Mt,Zt,yn,qn,fr){if(!(this instanceof ee))return new ee(Ue,Mt,Zt,yn,qn,fr);isNaN(Ue)&&(Ue=1),isNaN(Mt)&&(Mt=0),isNaN(Zt)&&(Zt=0),isNaN(yn)&&(yn=1),isNaN(qn)&&(qn=0),isNaN(fr)&&(fr=0),this._matrix=[Ue,Mt,Zt,yn,qn,fr]};Object.defineProperty(Gn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ee){this._matrix[0]=ee}}),Object.defineProperty(Gn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ee){this._matrix[1]=ee}}),Object.defineProperty(Gn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ee){this._matrix[2]=ee}}),Object.defineProperty(Gn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ee){this._matrix[3]=ee}}),Object.defineProperty(Gn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ee){this._matrix[4]=ee}}),Object.defineProperty(Gn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ee){this._matrix[5]=ee}}),Object.defineProperty(Gn.prototype,"a",{get:function(){return this._matrix[0]},set:function(ee){this._matrix[0]=ee}}),Object.defineProperty(Gn.prototype,"b",{get:function(){return this._matrix[1]},set:function(ee){this._matrix[1]=ee}}),Object.defineProperty(Gn.prototype,"c",{get:function(){return this._matrix[2]},set:function(ee){this._matrix[2]=ee}}),Object.defineProperty(Gn.prototype,"d",{get:function(){return this._matrix[3]},set:function(ee){this._matrix[3]=ee}}),Object.defineProperty(Gn.prototype,"e",{get:function(){return this._matrix[4]},set:function(ee){this._matrix[4]=ee}}),Object.defineProperty(Gn.prototype,"f",{get:function(){return this._matrix[5]},set:function(ee){this._matrix[5]=ee}}),Object.defineProperty(Gn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Gn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Gn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Gn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Gn.prototype.join=function(ee){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(W).join(ee)},Gn.prototype.multiply=function(ee){var Ue=ee.sx*this.sx+ee.shy*this.shx,Mt=ee.sx*this.shy+ee.shy*this.sy,Zt=ee.shx*this.sx+ee.sy*this.shx,yn=ee.shx*this.shy+ee.sy*this.sy,qn=ee.tx*this.sx+ee.ty*this.shx+this.tx,fr=ee.tx*this.shy+ee.ty*this.sy+this.ty;return new Gn(Ue,Mt,Zt,yn,qn,fr)},Gn.prototype.decompose=function(){var ee=this.sx,Ue=this.shy,Mt=this.shx,Zt=this.sy,yn=this.tx,qn=this.ty,fr=Math.sqrt(ee*ee+Ue*Ue),Or=(ee/=fr)*Mt+(Ue/=fr)*Zt;Mt-=ee*Or,Zt-=Ue*Or;var Gr=Math.sqrt(Mt*Mt+Zt*Zt);return Or/=Gr,ee*(Zt/=Gr)<Ue*(Mt/=Gr)&&(ee=-ee,Ue=-Ue,Or=-Or,fr=-fr),{scale:new Gn(fr,0,0,Gr,0,0),translate:new Gn(1,0,0,1,yn,qn),rotate:new Gn(ee,Ue,-Ue,ee,0,0),skew:new Gn(1,0,Or,1,0,0)}},Gn.prototype.toString=function(ee){return this.join(" ")},Gn.prototype.inversed=function(){var ee=this.sx,Ue=this.shy,Mt=this.shx,Zt=this.sy,yn=this.tx,qn=this.ty,fr=1/(ee*Zt-Ue*Mt),Or=Zt*fr,Gr=-Ue*fr,wi=-Mt*fr,oi=ee*fr;return new Gn(Or,Gr,wi,oi,-Or*yn-wi*qn,-Gr*yn-oi*qn)},Gn.prototype.applyToPoint=function(ee){var Ue=ee.x*this.sx+ee.y*this.shx+this.tx,Mt=ee.x*this.shy+ee.y*this.sy+this.ty;return new Pu(Ue,Mt)},Gn.prototype.applyToRectangle=function(ee){var Ue=this.applyToPoint(ee),Mt=this.applyToPoint(new Pu(ee.x+ee.w,ee.y+ee.h));return new Vo(Ue.x,Ue.y,Mt.x-Ue.x,Mt.y-Ue.y)},Gn.prototype.clone=function(){var ee=this.sx,Ue=this.shy,Mt=this.shx,Zt=this.sy,yn=this.tx,qn=this.ty;return new Gn(ee,Ue,Mt,Zt,yn,qn)},b.Matrix=Gn;var we=b.matrixMult=function(ee,Ue){return Ue.multiply(ee)},Ne=new Gn(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Ne;var je=function(ee,Ue){if(!Ce[ee]){var Mt=(Ue instanceof h0?"Sh":"P")+(Object.keys(We).length+1).toString(10);Ue.id=Mt,Ce[ee]=Mt,We[Mt]=Ue,Dt.publish("addPattern",Ue)}};b.ShadingPattern=h0,b.TilingPattern=ky,b.addShadingPattern=function(ee,Ue){return Y("addShadingPattern()"),je(ee,Ue),this},b.beginTilingPattern=function(ee){Y("beginTilingPattern()"),os(ee.boundingBox[0],ee.boundingBox[1],ee.boundingBox[2]-ee.boundingBox[0],ee.boundingBox[3]-ee.boundingBox[1],ee.matrix)},b.endTilingPattern=function(ee,Ue){Y("endTilingPattern()"),Ue.stream=it[ve].join(`
`),je(ee,Ue),Dt.publish("endTilingPattern",Ue),Zn.pop().restore()};var At=b.__private__.newObject=function(){var ee=sn();return Hn(ee,!0),ee},sn=b.__private__.newObjectDeferred=function(){return Se++,Be[Se]=function(){return tt},Se},Hn=function(ee,Ue){return Ue=typeof Ue=="boolean"&&Ue,Be[ee]=tt,Ue&&Xe(ee+" 0 obj"),ee},or=b.__private__.newAdditionalObject=function(){var ee={objId:sn(),content:""};return ht.push(ee),ee},Er=sn(),lr=sn(),Ri=b.__private__.decodeColorString=function(ee){var Ue=ee.split(" ");if(Ue.length!==2||Ue[1]!=="g"&&Ue[1]!=="G")Ue.length===5&&(Ue[4]==="k"||Ue[4]==="K")&&(Ue=[(1-Ue[0])*(1-Ue[3]),(1-Ue[1])*(1-Ue[3]),(1-Ue[2])*(1-Ue[3]),"r"]);else{var Mt=parseFloat(Ue[0]);Ue=[Mt,Mt,Mt,"r"]}for(var Zt="#",yn=0;yn<3;yn++)Zt+=("0"+Math.floor(255*parseFloat(Ue[yn])).toString(16)).slice(-2);return Zt},ci=b.__private__.encodeColorString=function(ee){var Ue;typeof ee=="string"&&(ee={ch1:ee});var Mt=ee.ch1,Zt=ee.ch2,yn=ee.ch3,qn=ee.ch4,fr=ee.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Mt=="string"&&Mt.charAt(0)!=="#"){var Or=new Kz(Mt);if(Or.ok)Mt=Or.toHex();else if(!/^\d*\.?\d*$/.test(Mt))throw new Error('Invalid color "'+Mt+'" passed to jsPDF.encodeColorString.')}if(typeof Mt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Mt)&&(Mt="#"+Mt[1]+Mt[1]+Mt[2]+Mt[2]+Mt[3]+Mt[3]),typeof Mt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Mt)){var Gr=parseInt(Mt.substr(1),16);Mt=Gr>>16&255,Zt=Gr>>8&255,yn=255&Gr}if(Zt===void 0||qn===void 0&&Mt===Zt&&Zt===yn)if(typeof Mt=="string")Ue=Mt+" "+fr[0];else switch(ee.precision){case 2:Ue=j(Mt/255)+" "+fr[0];break;case 3:default:Ue=K(Mt/255)+" "+fr[0]}else if(qn===void 0||Co(qn)==="object"){if(qn&&!isNaN(qn.a)&&qn.a===0)return Ue=["1.","1.","1.",fr[1]].join(" ");if(typeof Mt=="string")Ue=[Mt,Zt,yn,fr[1]].join(" ");else switch(ee.precision){case 2:Ue=[j(Mt/255),j(Zt/255),j(yn/255),fr[1]].join(" ");break;default:case 3:Ue=[K(Mt/255),K(Zt/255),K(yn/255),fr[1]].join(" ")}}else if(typeof Mt=="string")Ue=[Mt,Zt,yn,qn,fr[2]].join(" ");else switch(ee.precision){case 2:Ue=[j(Mt),j(Zt),j(yn),j(qn),fr[2]].join(" ");break;case 3:default:Ue=[K(Mt),K(Zt),K(yn),K(qn),fr[2]].join(" ")}return Ue},Vi=b.__private__.getFilters=function(){return l},Vr=b.__private__.putStream=function(ee){var Ue=(ee=ee||{}).data||"",Mt=ee.filters||Vi(),Zt=ee.alreadyAppliedFilters||[],yn=ee.addLength1||!1,qn=Ue.length,fr=ee.objectId,Or=function(yo){return yo};if(v!==null&&fr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(Or=Lr.encryptor(fr,0));var Gr={};Mt===!0&&(Mt=["FlateEncode"]);var wi=ee.additionalKeyValues||[],oi=(Gr=ki.API.processDataByFilters!==void 0?ki.API.processDataByFilters(Ue,Mt):{data:Ue,reverseChain:[]}).reverseChain+(Array.isArray(Zt)?Zt.join(" "):Zt.toString());if(Gr.data.length!==0&&(wi.push({key:"Length",value:Gr.data.length}),yn===!0&&wi.push({key:"Length1",value:qn})),oi.length!=0)if(oi.split("/").length-1==1)wi.push({key:"Filter",value:oi});else{wi.push({key:"Filter",value:"["+oi+"]"});for(var Mi=0;Mi<wi.length;Mi+=1)if(wi[Mi].key==="DecodeParms"){for(var ya=[],ka=0;ka<Gr.reverseChain.split("/").length-1;ka+=1)ya.push("null");ya.push(wi[Mi].value),wi[Mi].value="["+ya.join(" ")+"]"}}Xe("<<");for(var aa=0;aa<wi.length;aa++)Xe("/"+wi[aa].key+" "+wi[aa].value);Xe(">>"),Gr.data.length!==0&&(Xe("stream"),Xe(Or(Gr.data)),Xe("endstream"))},Ca=b.__private__.putPage=function(ee){var Ue=ee.number,Mt=ee.data,Zt=ee.objId,yn=ee.contentsObjId;Hn(Zt,!0),Xe("<</Type /Page"),Xe("/Parent "+ee.rootDictionaryObjId+" 0 R"),Xe("/Resources "+ee.resourceDictionaryObjId+" 0 R"),Xe("/MediaBox ["+parseFloat(W(ee.mediaBox.bottomLeftX))+" "+parseFloat(W(ee.mediaBox.bottomLeftY))+" "+W(ee.mediaBox.topRightX)+" "+W(ee.mediaBox.topRightY)+"]"),ee.cropBox!==null&&Xe("/CropBox ["+W(ee.cropBox.bottomLeftX)+" "+W(ee.cropBox.bottomLeftY)+" "+W(ee.cropBox.topRightX)+" "+W(ee.cropBox.topRightY)+"]"),ee.bleedBox!==null&&Xe("/BleedBox ["+W(ee.bleedBox.bottomLeftX)+" "+W(ee.bleedBox.bottomLeftY)+" "+W(ee.bleedBox.topRightX)+" "+W(ee.bleedBox.topRightY)+"]"),ee.trimBox!==null&&Xe("/TrimBox ["+W(ee.trimBox.bottomLeftX)+" "+W(ee.trimBox.bottomLeftY)+" "+W(ee.trimBox.topRightX)+" "+W(ee.trimBox.topRightY)+"]"),ee.artBox!==null&&Xe("/ArtBox ["+W(ee.artBox.bottomLeftX)+" "+W(ee.artBox.bottomLeftY)+" "+W(ee.artBox.topRightX)+" "+W(ee.artBox.topRightY)+"]"),typeof ee.userUnit=="number"&&ee.userUnit!==1&&Xe("/UserUnit "+ee.userUnit),Dt.publish("putPage",{objId:Zt,pageContext:xt[Ue],pageNumber:Ue,page:Mt}),Xe("/Contents "+yn+" 0 R"),Xe(">>"),Xe("endobj");var qn=Mt.join(`
`);return B===k.ADVANCED&&(qn+=`
Q`),Hn(yn,!0),Vr({data:qn,filters:Vi(),objectId:yn}),Xe("endobj"),Zt},ra=b.__private__.putPages=function(){var ee,Ue,Mt=[];for(ee=1;ee<=lt;ee++)xt[ee].objId=sn(),xt[ee].contentsObjId=sn();for(ee=1;ee<=lt;ee++)Mt.push(Ca({number:ee,data:it[ee],objId:xt[ee].objId,contentsObjId:xt[ee].contentsObjId,mediaBox:xt[ee].mediaBox,cropBox:xt[ee].cropBox,bleedBox:xt[ee].bleedBox,trimBox:xt[ee].trimBox,artBox:xt[ee].artBox,userUnit:xt[ee].userUnit,rootDictionaryObjId:Er,resourceDictionaryObjId:lr}));Hn(Er,!0),Xe("<</Type /Pages");var Zt="/Kids [";for(Ue=0;Ue<lt;Ue++)Zt+=Mt[Ue]+" 0 R ";Xe(Zt+"]"),Xe("/Count "+lt),Xe(">>"),Xe("endobj"),Dt.publish("postPutPages")},mi=function(ee){Dt.publish("putFont",{font:ee,out:Xe,newObject:At,putStream:Vr}),ee.isAlreadyPutted!==!0&&(ee.objectNumber=At(),Xe("<<"),Xe("/Type /Font"),Xe("/BaseFont /"+vy(ee.postScriptName)),Xe("/Subtype /Type1"),typeof ee.encoding=="string"&&Xe("/Encoding /"+ee.encoding),Xe("/FirstChar 32"),Xe("/LastChar 255"),Xe(">>"),Xe("endobj"))},no=function(){for(var ee in mt)mt.hasOwnProperty(ee)&&(y===!1||y===!0&&w.hasOwnProperty(ee))&&mi(mt[ee])},nt=function(ee){ee.objectNumber=At();var Ue=[];Ue.push({key:"Type",value:"/XObject"}),Ue.push({key:"Subtype",value:"/Form"}),Ue.push({key:"BBox",value:"["+[W(ee.x),W(ee.y),W(ee.x+ee.width),W(ee.y+ee.height)].join(" ")+"]"}),Ue.push({key:"Matrix",value:"["+ee.matrix.toString()+"]"});var Mt=ee.pages[1].join(`
`);Vr({data:Mt,additionalKeyValues:Ue,objectId:ee.objectNumber}),Xe("endobj")},an=function(){for(var ee in Tn)Tn.hasOwnProperty(ee)&&nt(Tn[ee])},gn=function(ee,Ue){var Mt,Zt=[],yn=1/(Ue-1);for(Mt=0;Mt<1;Mt+=yn)Zt.push(Mt);if(Zt.push(1),ee[0].offset!=0){var qn={offset:0,color:ee[0].color};ee.unshift(qn)}if(ee[ee.length-1].offset!=1){var fr={offset:1,color:ee[ee.length-1].color};ee.push(fr)}for(var Or="",Gr=0,wi=0;wi<Zt.length;wi++){for(Mt=Zt[wi];Mt>ee[Gr+1].offset;)Gr++;var oi=ee[Gr].offset,Mi=(Mt-oi)/(ee[Gr+1].offset-oi),ya=ee[Gr].color,ka=ee[Gr+1].color;Or+=ye(Math.round((1-Mi)*ya[0]+Mi*ka[0]).toString(16))+ye(Math.round((1-Mi)*ya[1]+Mi*ka[1]).toString(16))+ye(Math.round((1-Mi)*ya[2]+Mi*ka[2]).toString(16))}return Or.trim()},_n=function(ee,Ue){Ue||(Ue=21);var Mt=At(),Zt=gn(ee.colors,Ue),yn=[];yn.push({key:"FunctionType",value:"0"}),yn.push({key:"Domain",value:"[0.0 1.0]"}),yn.push({key:"Size",value:"["+Ue+"]"}),yn.push({key:"BitsPerSample",value:"8"}),yn.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yn.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Vr({data:Zt,additionalKeyValues:yn,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Mt}),Xe("endobj"),ee.objectNumber=At(),Xe("<< /ShadingType "+ee.type),Xe("/ColorSpace /DeviceRGB");var qn="/Coords ["+W(parseFloat(ee.coords[0]))+" "+W(parseFloat(ee.coords[1]))+" ";ee.type===2?qn+=W(parseFloat(ee.coords[2]))+" "+W(parseFloat(ee.coords[3])):qn+=W(parseFloat(ee.coords[2]))+" "+W(parseFloat(ee.coords[3]))+" "+W(parseFloat(ee.coords[4]))+" "+W(parseFloat(ee.coords[5])),Xe(qn+="]"),ee.matrix&&Xe("/Matrix ["+ee.matrix.toString()+"]"),Xe("/Function "+Mt+" 0 R"),Xe("/Extend [true true]"),Xe(">>"),Xe("endobj")},fn=function(ee,Ue){var Mt=sn(),Zt=At();Ue.push({resourcesOid:Mt,objectOid:Zt}),ee.objectNumber=Zt;var yn=[];yn.push({key:"Type",value:"/Pattern"}),yn.push({key:"PatternType",value:"1"}),yn.push({key:"PaintType",value:"1"}),yn.push({key:"TilingType",value:"1"}),yn.push({key:"BBox",value:"["+ee.boundingBox.map(W).join(" ")+"]"}),yn.push({key:"XStep",value:W(ee.xStep)}),yn.push({key:"YStep",value:W(ee.yStep)}),yn.push({key:"Resources",value:Mt+" 0 R"}),ee.matrix&&yn.push({key:"Matrix",value:"["+ee.matrix.toString()+"]"}),Vr({data:ee.stream,additionalKeyValues:yn,objectId:ee.objectNumber}),Xe("endobj")},cr=function(ee){var Ue;for(Ue in We)We.hasOwnProperty(Ue)&&(We[Ue]instanceof h0?_n(We[Ue]):We[Ue]instanceof ky&&fn(We[Ue],ee))},hr=function(ee){for(var Ue in ee.objectNumber=At(),Xe("<<"),ee)switch(Ue){case"opacity":Xe("/ca "+j(ee[Ue]));break;case"stroke-opacity":Xe("/CA "+j(ee[Ue]))}Xe(">>"),Xe("endobj")},Ar=function(){var ee;for(ee in Qe)Qe.hasOwnProperty(ee)&&hr(Qe[ee])},Pr=function(){for(var ee in Xe("/XObject <<"),Tn)Tn.hasOwnProperty(ee)&&Tn[ee].objectNumber>=0&&Xe("/"+ee+" "+Tn[ee].objectNumber+" 0 R");Dt.publish("putXobjectDict"),Xe(">>")},ei=function(){Lr.oid=At(),Xe("<<"),Xe("/Filter /Standard"),Xe("/V "+Lr.v),Xe("/R "+Lr.r),Xe("/U <"+Lr.toHexString(Lr.U)+">"),Xe("/O <"+Lr.toHexString(Lr.O)+">"),Xe("/P "+Lr.P),Xe(">>"),Xe("endobj")},Xr=function(){for(var ee in Xe("/Font <<"),mt)mt.hasOwnProperty(ee)&&(y===!1||y===!0&&w.hasOwnProperty(ee))&&Xe("/"+ee+" "+mt[ee].objectNumber+" 0 R");Xe(">>")},Hr=function(){if(Object.keys(We).length>0){for(var ee in Xe("/Shading <<"),We)We.hasOwnProperty(ee)&&We[ee]instanceof h0&&We[ee].objectNumber>=0&&Xe("/"+ee+" "+We[ee].objectNumber+" 0 R");Dt.publish("putShadingPatternDict"),Xe(">>")}},gi=function(ee){if(Object.keys(We).length>0){for(var Ue in Xe("/Pattern <<"),We)We.hasOwnProperty(Ue)&&We[Ue]instanceof b.TilingPattern&&We[Ue].objectNumber>=0&&We[Ue].objectNumber<ee&&Xe("/"+Ue+" "+We[Ue].objectNumber+" 0 R");Dt.publish("putTilingPatternDict"),Xe(">>")}},vi=function(){if(Object.keys(Qe).length>0){var ee;for(ee in Xe("/ExtGState <<"),Qe)Qe.hasOwnProperty(ee)&&Qe[ee].objectNumber>=0&&Xe("/"+ee+" "+Qe[ee].objectNumber+" 0 R");Dt.publish("putGStateDict"),Xe(">>")}},yi=function(ee){Hn(ee.resourcesOid,!0),Xe("<<"),Xe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Xr(),Hr(),gi(ee.objectOid),vi(),Pr(),Xe(">>"),Xe("endobj")},Wi=function(){var ee=[];no(),Ar(),an(),cr(ee),Dt.publish("putResources"),ee.forEach(yi),yi({resourcesOid:lr,objectOid:Number.MAX_SAFE_INTEGER}),Dt.publish("postPutResources")},ii=function(){Dt.publish("putAdditionalObjects");for(var ee=0;ee<ht.length;ee++){var Ue=ht[ee];Hn(Ue.objId,!0),Xe(Ue.content),Xe("endobj")}Dt.publish("postPutAdditionalObjects")},Zr=function(ee){ge[ee.fontName]=ge[ee.fontName]||{},ge[ee.fontName][ee.fontStyle]=ee.id},$a=function(ee,Ue,Mt,Zt,yn){var qn={id:"F"+(Object.keys(mt).length+1).toString(10),postScriptName:ee,fontName:Ue,fontStyle:Mt,encoding:Zt,isStandardFont:yn||!1,metadata:{}};return Dt.publish("addFont",{font:qn,instance:this}),mt[qn.id]=qn,Zr(qn),qn.id},Di=function(ee){for(var Ue=0,Mt=Jt.length;Ue<Mt;Ue++){var Zt=$a.call(this,ee[Ue][0],ee[Ue][1],ee[Ue][2],Jt[Ue][3],!0);y===!1&&(w[Zt]=!0);var yn=ee[Ue][0].split("-");Zr({id:Zt,fontName:yn[0],fontStyle:yn[1]||""})}Dt.publish("addFonts",{fonts:mt,dictionary:ge})},ja=function(ee){return ee.foo=function(){try{return ee.apply(this,arguments)}catch(Zt){var Ue=Zt.stack||"";~Ue.indexOf(" at ")&&(Ue=Ue.split(" at ")[1]);var Mt="Error in function "+Ue.split(`
`)[0].split("<")[0]+": "+Zt.message;if(!Fi.console)throw new Error(Mt);Fi.console.error(Mt,Zt),Fi.alert&&alert(Mt)}},ee.foo.bar=ee,ee.foo},lo=function(ee,Ue){var Mt,Zt,yn,qn,fr,Or,Gr,wi,oi;if(yn=(Ue=Ue||{}).sourceEncoding||"Unicode",fr=Ue.outputEncoding,(Ue.autoencode||fr)&&mt[nn].metadata&&mt[nn].metadata[yn]&&mt[nn].metadata[yn].encoding&&(qn=mt[nn].metadata[yn].encoding,!fr&&mt[nn].encoding&&(fr=mt[nn].encoding),!fr&&qn.codePages&&(fr=qn.codePages[0]),typeof fr=="string"&&(fr=qn[fr]),fr)){for(Gr=!1,Or=[],Mt=0,Zt=ee.length;Mt<Zt;Mt++)(wi=fr[ee.charCodeAt(Mt)])?Or.push(String.fromCharCode(wi)):Or.push(ee[Mt]),Or[Mt].charCodeAt(0)>>8&&(Gr=!0);ee=Or.join("")}for(Mt=ee.length;Gr===void 0&&Mt!==0;)ee.charCodeAt(Mt-1)>>8&&(Gr=!0),Mt--;if(!Gr)return ee;for(Or=Ue.noBOM?[]:[254,255],Mt=0,Zt=ee.length;Mt<Zt;Mt++){if((oi=(wi=ee.charCodeAt(Mt))>>8)>>8)throw new Error("Character at position "+Mt+" of string '"+ee+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Or.push(oi),Or.push(wi-(oi<<8))}return String.fromCharCode.apply(void 0,Or)},Gi=b.__private__.pdfEscape=b.pdfEscape=function(ee,Ue){return lo(ee,Ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ti=b.__private__.beginPage=function(ee){it[++lt]=[],xt[lt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ee[0]),topRightY:Number(ee[1])}},H(lt),Ct(it[ve])},Pi=function(ee,Ue){var Mt,Zt,yn;switch(n=Ue||n,typeof ee=="string"&&(Mt=C(ee.toLowerCase()),Array.isArray(Mt)&&(Zt=Mt[0],yn=Mt[1])),Array.isArray(ee)&&(Zt=ee[0]*Ft,yn=ee[1]*Ft),isNaN(Zt)&&(Zt=i[0],yn=i[1]),(Zt>14400||yn>14400)&&(is.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Zt=Math.min(14400,Zt),yn=Math.min(14400,yn)),i=[Zt,yn],n.substr(0,1)){case"l":yn>Zt&&(i=[yn,Zt]);break;case"p":Zt>yn&&(i=[yn,Zt])}ti(i),Kh(nl),Xe(ia),Fc!==0&&Xe(Fc+" J"),Bc!==0&&Xe(Bc+" j"),Dt.publish("addPage",{pageNumber:lt})},xa=function(ee){ee>0&&ee<=lt&&(it.splice(ee,1),xt.splice(ee,1),lt--,ve>lt&&(ve=lt),this.setPage(ve))},H=function(ee){ee>0&&ee<=lt&&(ve=ee)},he=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return it.length-1},Ge=function(ee,Ue,Mt){var Zt,yn=void 0;return Mt=Mt||{},ee=ee!==void 0?ee:mt[nn].fontName,Ue=Ue!==void 0?Ue:mt[nn].fontStyle,Zt=ee.toLowerCase(),ge[Zt]!==void 0&&ge[Zt][Ue]!==void 0?yn=ge[Zt][Ue]:ge[ee]!==void 0&&ge[ee][Ue]!==void 0?yn=ge[ee][Ue]:Mt.disableWarning===!1&&is.warn("Unable to look up font label for font '"+ee+"', '"+Ue+"'. Refer to getFontList() for available fonts."),yn||Mt.noFallback||(yn=ge.times[Ue])==null&&(yn=ge.times.normal),yn},St=b.__private__.putInfo=function(){var ee=At(),Ue=function(Zt){return Zt};for(var Mt in v!==null&&(Ue=Lr.encryptor(ee,0)),Xe("<<"),Xe("/Producer ("+Gi(Ue("jsPDF "+ki.version))+")"),pn)pn.hasOwnProperty(Mt)&&pn[Mt]&&Xe("/"+Mt.substr(0,1).toUpperCase()+Mt.substr(1)+" ("+Gi(Ue(pn[Mt]))+")");Xe("/CreationDate ("+Gi(Ue(de))+")"),Xe(">>"),Xe("endobj")},Lt=b.__private__.putCatalog=function(ee){var Ue=(ee=ee||{}).rootDictionaryObjId||Er;switch(At(),Xe("<<"),Xe("/Type /Catalog"),Xe("/Pages "+Ue+" 0 R"),$e||($e="fullwidth"),$e){case"fullwidth":Xe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Xe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Xe("/OpenAction [3 0 R /Fit]");break;case"original":Xe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Mt=""+$e;Mt.substr(Mt.length-1)==="%"&&($e=parseInt($e)/100),typeof $e=="number"&&Xe("/OpenAction [3 0 R /XYZ null null "+j($e)+"]")}switch(Pt||(Pt="continuous"),Pt){case"continuous":Xe("/PageLayout /OneColumn");break;case"single":Xe("/PageLayout /SinglePage");break;case"two":case"twoleft":Xe("/PageLayout /TwoColumnLeft");break;case"tworight":Xe("/PageLayout /TwoColumnRight")}jt&&Xe("/PageMode /"+jt),Dt.publish("putCatalog"),Xe(">>"),Xe("endobj")},Ut=b.__private__.putTrailer=function(){Xe("trailer"),Xe("<<"),Xe("/Size "+(Se+1)),Xe("/Root "+Se+" 0 R"),Xe("/Info "+(Se-1)+" 0 R"),v!==null&&Xe("/Encrypt "+Lr.oid+" 0 R"),Xe("/ID [ <"+ue+"> <"+ue+"> ]"),Xe(">>")},Yt=b.__private__.putHeader=function(){Xe("%PDF-"+A),Xe("%ºß¬à")},sr=b.__private__.putXRef=function(){var ee="0000000000";Xe("xref"),Xe("0 "+(Se+1)),Xe("0000000000 65535 f ");for(var Ue=1;Ue<=Se;Ue++)typeof Be[Ue]=="function"?Xe((ee+Be[Ue]()).slice(-10)+" 00000 n "):Be[Ue]!==void 0?Xe((ee+Be[Ue]).slice(-10)+" 00000 n "):Xe("0000000000 00000 n ")},Wn=b.__private__.buildDocument=function(){He(),Ct(Ve),Dt.publish("buildDocument"),Yt(),ra(),ii(),Wi(),v!==null&&ei(),St(),Lt();var ee=tt;return sr(),Ut(),Xe("startxref"),Xe(""+ee),Xe("%%EOF"),Ct(it[ve]),Ve.join(`
`)},mr=b.__private__.getBlob=function(ee){return new Blob([Kt(ee)],{type:"application/pdf"})},vr=b.output=b.__private__.output=ja(function(ee,Ue){switch(typeof(Ue=Ue||{})=="string"?Ue={filename:Ue}:Ue.filename=Ue.filename||"generated.pdf",ee){case void 0:return Wn();case"save":b.save(Ue.filename);break;case"arraybuffer":return Kt(Wn());case"blob":return mr(Wn());case"bloburi":case"bloburl":if(Fi.URL!==void 0&&typeof Fi.URL.createObjectURL=="function")return Fi.URL&&Fi.URL.createObjectURL(mr(Wn()))||void 0;is.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Mt="",Zt=Wn();try{Mt=ZC(Zt)}catch{Mt=ZC(unescape(encodeURIComponent(Zt)))}return"data:application/pdf;filename="+Ue.filename+";base64,"+Mt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Fi)==="[object Window]"){var yn="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qn=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ue.pdfObjectUrl&&(yn=Ue.pdfObjectUrl,qn="");var fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+yn+'"'+qn+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ue)+");<\/script></body></html>",Or=Fi.open();return Or!==null&&Or.document.write(fr),Or}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Fi)==="[object Window]"){var Gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ue.filename+'" width="500px" height="400px" /></body></html>',wi=Fi.open();if(wi!==null){wi.document.write(Gr);var oi=this;wi.document.documentElement.querySelector("#pdfViewer").onload=function(){wi.document.title=Ue.filename,wi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(oi.output("bloburl"))}}return wi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Fi)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Mi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ue)+'"></iframe></body></html>',ya=Fi.open();if(ya!==null&&(ya.document.write(Mi),ya.document.title=Ue.filename),ya||typeof safari>"u")return ya;break;case"datauri":case"dataurl":return Fi.document.location.href=this.output("datauristring",Ue);default:return null}}),xr=function(ee){return Array.isArray(zt)===!0&&zt.indexOf(ee)>-1};switch(r){case"pt":Ft=1;break;case"mm":Ft=72/25.4;break;case"cm":Ft=72/2.54;break;case"in":Ft=72;break;case"px":Ft=xr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ft=12;break;case"ex":Ft=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ft=r}var Lr=null;Me(),pe();var Ti=function(ee){return v!==null?Lr.encryptor(ee,0):function(Ue){return Ue}},Yr=b.__private__.getPageInfo=b.getPageInfo=function(ee){if(isNaN(ee)||ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:xt[ee].objId,pageNumber:ee,pageContext:xt[ee]}},Cr=b.__private__.getPageInfoByObjId=function(ee){if(isNaN(ee)||ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ue in xt)if(xt[Ue].objId===ee)break;return Yr(Ue)},$n=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:xt[ve].objId,pageNumber:ve,pageContext:xt[ve]}};b.addPage=function(){return Pi.apply(this,arguments),this},b.setPage=function(){return H.apply(this,arguments),Ct.call(this,it[ve]),this},b.insertPage=function(ee){return this.addPage(),this.movePage(ve,ee),this},b.movePage=function(ee,Ue){var Mt,Zt;if(ee>Ue){Mt=it[ee],Zt=xt[ee];for(var yn=ee;yn>Ue;yn--)it[yn]=it[yn-1],xt[yn]=xt[yn-1];it[Ue]=Mt,xt[Ue]=Zt,this.setPage(Ue)}else if(ee<Ue){Mt=it[ee],Zt=xt[ee];for(var qn=ee;qn<Ue;qn++)it[qn]=it[qn+1],xt[qn]=xt[qn+1];it[Ue]=Mt,xt[Ue]=Zt,this.setPage(Ue)}return this},b.deletePage=function(){return xa.apply(this,arguments),this},b.__private__.text=b.text=function(ee,Ue,Mt,Zt,yn){var qn,fr,Or,Gr,wi,oi,Mi,ya,ka,aa=(Zt=Zt||{}).scope||this;if(typeof ee=="number"&&typeof Ue=="number"&&(typeof Mt=="string"||Array.isArray(Mt))){var yo=Mt;Mt=Ue,Ue=ee,ee=yo}if(arguments[3]instanceof Gn?(Y("The transform parameter of text() with a Matrix value"),ka=yn):(Or=arguments[4],Gr=arguments[5],Co(Mi=arguments[3])==="object"&&Mi!==null||(typeof Or=="string"&&(Gr=Or,Or=null),typeof Mi=="string"&&(Gr=Mi,Mi=null),typeof Mi=="number"&&(Or=Mi,Mi=null),Zt={flags:Mi,angle:Or,align:Gr})),isNaN(Ue)||isNaN(Mt)||ee==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ee.length===0)return aa;var _o="",So=!1,il=typeof Zt.lineHeightFactor=="number"?Zt.lineHeightFactor:jo,Vs=aa.internal.scaleFactor;function Sh(zi){return zi=zi.split("	").join(Array(Zt.TabLen||9).join(" ")),Gi(zi,Mi)}function Du(zi){for(var bi,Sa=zi.concat(),La=[],ds=Sa.length;ds--;)typeof(bi=Sa.shift())=="string"?La.push(bi):Array.isArray(zi)&&(bi.length===1||bi[1]===void 0&&bi[2]===void 0)?La.push(bi[0]):La.push([bi[0],bi[1],bi[2]]);return La}function ql(zi,bi){var Sa;if(typeof zi=="string")Sa=bi(zi)[0];else if(Array.isArray(zi)){for(var La,ds,gu=zi.concat(),Lo=[],sl=gu.length;sl--;)typeof(La=gu.shift())=="string"?Lo.push(bi(La)[0]):Array.isArray(La)&&typeof La[0]=="string"&&(ds=bi(La[0],La[1],La[2]),Lo.push([ds[0],ds[1],ds[2]]));Sa=Lo}return Sa}var pc=!1,Hl=!0;if(typeof ee=="string")pc=!0;else if(Array.isArray(ee)){var al=ee.concat();fr=[];for(var Yu,Ra=al.length;Ra--;)(typeof(Yu=al.shift())!="string"||Array.isArray(Yu)&&typeof Yu[0]!="string")&&(Hl=!1);pc=Hl}if(pc===!1)throw new Error('Type of text must be string or Array. "'+ee+'" is not recognized.');typeof ee=="string"&&(ee=ee.match(/[\r?\n]/)?ee.split(/\r\n|\r|\n/g):[ee]);var Ms=Ht/aa.internal.scaleFactor,Gs=Ms*(il-1);switch(Zt.baseline){case"bottom":Mt-=Gs;break;case"top":Mt+=Ms-Gs;break;case"hanging":Mt+=Ms-2*Gs;break;case"middle":Mt+=Ms/2-Gs}if((oi=Zt.maxWidth||0)>0&&(typeof ee=="string"?ee=aa.splitTextToSize(ee,oi):Object.prototype.toString.call(ee)==="[object Array]"&&(ee=ee.reduce(function(zi,bi){return zi.concat(aa.splitTextToSize(bi,oi))},[]))),qn={text:ee,x:Ue,y:Mt,options:Zt,mutex:{pdfEscape:Gi,activeFontKey:nn,fonts:mt,activeFontSize:Ht}},Dt.publish("preProcessText",qn),ee=qn.text,Or=(Zt=qn.options).angle,!(ka instanceof Gn)&&Or&&typeof Or=="number"){Or*=Math.PI/180,Zt.rotationDirection===0&&(Or=-Or),B===k.ADVANCED&&(Or=-Or);var pu=Math.cos(Or),mc=Math.sin(Or);ka=new Gn(pu,mc,-mc,pu,0,0)}else Or&&Or instanceof Gn&&(ka=Or);B!==k.ADVANCED||ka||(ka=Ne),(wi=Zt.charSpace||Nc)!==void 0&&(_o+=W(re(wi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ya=Zt.horizontalScale)!==void 0&&(_o+=W(100*ya)+` Tz
`),Zt.lang;var ss=-1,zc=Zt.renderingMode!==void 0?Zt.renderingMode:Zt.stroke,$l=aa.internal.getCurrentPageInfo().pageContext;switch(zc){case 0:case!1:case"fill":ss=0;break;case 1:case!0:case"stroke":ss=1;break;case 2:case"fillThenStroke":ss=2;break;case 3:case"invisible":ss=3;break;case 4:case"fillAndAddForClipping":ss=4;break;case 5:case"strokeAndAddPathForClipping":ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ss=6;break;case 7:case"addToPathForClipping":ss=7}var qi=$l.usedRenderingMode!==void 0?$l.usedRenderingMode:-1;ss!==-1?_o+=ss+` Tr
`:qi!==-1&&(_o+=`0 Tr
`),ss!==-1&&($l.usedRenderingMode=ss),Gr=Zt.align||"left";var Al,bo=Ht*il,Ku=aa.internal.pageSize.getWidth(),Eh=mt[nn];wi=Zt.charSpace||Nc,oi=Zt.maxWidth||0,Mi=Object.assign({autoencode:!0,noBOM:!0},Zt.flags);var ln=[],On=function(zi){return aa.getStringUnitWidth(zi,{font:Eh,charSpace:wi,fontSize:Ht,doKerning:!1})*Ht/Vs};if(Object.prototype.toString.call(ee)==="[object Array]"){var _r;fr=Du(ee),Gr!=="left"&&(Al=fr.map(On));var Dr,na=0;if(Gr==="right"){Ue-=Al[0],ee=[],Ra=fr.length;for(var Si=0;Si<Ra;Si++)Si===0?(Dr=Pa(Ue),_r=Wa(Mt)):(Dr=re(na-Al[Si]),_r=-bo),ee.push([fr[Si],Dr,_r]),na=Al[Si]}else if(Gr==="center"){Ue-=Al[0]/2,ee=[],Ra=fr.length;for(var Xi=0;Xi<Ra;Xi++)Xi===0?(Dr=Pa(Ue),_r=Wa(Mt)):(Dr=re((na-Al[Xi])/2),_r=-bo),ee.push([fr[Xi],Dr,_r]),na=Al[Xi]}else if(Gr==="left"){ee=[],Ra=fr.length;for(var la=0;la<Ra;la++)ee.push(fr[la])}else if(Gr==="justify"&&Eh.encoding==="Identity-H"){ee=[],Ra=fr.length,oi=oi!==0?oi:Ku;for(var Fa=0,si=0;si<Ra;si++)if(_r=si===0?Wa(Mt):-bo,Dr=si===0?Pa(Ue):Fa,si<Ra-1){var Qa=re((oi-Al[si])/(fr[si].split(" ").length-1)),wa=fr[si].split(" ");ee.push([wa[0]+" ",Dr,_r]),Fa=0;for(var Va=1;Va<wa.length;Va++){var Ba=(On(wa[Va-1]+" "+wa[Va])-On(wa[Va]))*Vs+Qa;Va==wa.length-1?ee.push([wa[Va],Ba,0]):ee.push([wa[Va]+" ",Ba,0]),Fa-=Ba}}else ee.push([fr[si],Dr,_r]);ee.push(["",Fa,0])}else{if(Gr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ee=[],Ra=fr.length,oi=oi!==0?oi:Ku,si=0;si<Ra;si++)_r=si===0?Wa(Mt):-bo,Dr=si===0?Pa(Ue):0,si<Ra-1?ln.push(W(re((oi-Al[si])/(fr[si].split(" ").length-1)))):ln.push(0),ee.push([fr[si],Dr,_r])}}var As=typeof Zt.R2L=="boolean"?Zt.R2L:_t;As===!0&&(ee=ql(ee,function(zi,bi,Sa){return[zi.split("").reverse().join(""),bi,Sa]})),qn={text:ee,x:Ue,y:Mt,options:Zt,mutex:{pdfEscape:Gi,activeFontKey:nn,fonts:mt,activeFontSize:Ht}},Dt.publish("postProcessText",qn),ee=qn.text,So=qn.mutex.isHex||!1;var Go=mt[nn].encoding;Go!=="WinAnsiEncoding"&&Go!=="StandardEncoding"||(ee=ql(ee,function(zi,bi,Sa){return[Sh(zi),bi,Sa]})),fr=Du(ee),ee=[];for(var qs,Cs,ol,Cl=0,mu=1,gc=Array.isArray(fr[0])?mu:Cl,Zi="",Br=function(zi,bi,Sa){var La="";return Sa instanceof Gn?(Sa=typeof Zt.angle=="number"?we(Sa,new Gn(1,0,0,1,zi,bi)):we(new Gn(1,0,0,1,zi,bi),Sa),B===k.ADVANCED&&(Sa=we(new Gn(1,0,0,-1,0,0),Sa)),La=Sa.join(" ")+` Tm
`):La=W(zi)+" "+W(bi)+` Td
`,La},qo=0;qo<fr.length;qo++){switch(Zi="",gc){case mu:ol=(So?"<":"(")+fr[qo][0]+(So?">":")"),qs=parseFloat(fr[qo][1]),Cs=parseFloat(fr[qo][2]);break;case Cl:ol=(So?"<":"(")+fr[qo]+(So?">":")"),qs=Pa(Ue),Cs=Wa(Mt)}ln!==void 0&&ln[qo]!==void 0&&(Zi=ln[qo]+` Tw
`),qo===0?ee.push(Zi+Br(qs,Cs,ka)+ol):gc===Cl?ee.push(Zi+ol):gc===mu&&ee.push(Zi+Br(qs,Cs,ka)+ol)}ee=gc===Cl?ee.join(` Tj
T* `):ee.join(` Tj
`),ee+=` Tj
`;var Da=`BT
/`;return Da+=nn+" "+Ht+` Tf
`,Da+=W(Ht*il)+` TL
`,Da+=fu+`
`,Da+=_o,Da+=ee,Xe(Da+="ET"),w[nn]=!0,aa};var Rr=b.__private__.clip=b.clip=function(ee){return Xe(ee==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Rr("evenodd")},b.__private__.discardPath=b.discardPath=function(){return Xe("n"),this};var Ni=b.__private__.isValidStyle=function(ee){var Ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ee)!==-1&&(Ue=!0),Ue};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(ee){return Ni(ee)&&(f=ee),this};var ta=b.__private__.getStyle=b.getStyle=function(ee){var Ue=f;switch(ee){case"D":case"S":Ue="S";break;case"F":Ue="f";break;case"FD":case"DF":Ue="B";break;case"f":case"f*":case"B":case"B*":Ue=ee}return Ue},di=b.close=function(){return Xe("h"),this};b.stroke=function(){return Xe("S"),this},b.fill=function(ee){return js("f",ee),this},b.fillEvenOdd=function(ee){return js("f*",ee),this},b.fillStroke=function(ee){return js("B",ee),this},b.fillStrokeEvenOdd=function(ee){return js("B*",ee),this};var js=function(ee,Ue){Co(Ue)==="object"?Gl(Ue,ee):Xe(ee)},_i=function(ee){ee===null||B===k.ADVANCED&&ee===void 0||(ee=ta(ee),Xe(ee))};function Ir(ee,Ue,Mt,Zt,yn){var qn=new ky(Ue||this.boundingBox,Mt||this.xStep,Zt||this.yStep,this.gState,yn||this.matrix);qn.stream=this.stream;var fr=ee+"$$"+this.cloneIndex+++"$$";return je(fr,qn),qn}var Gl=function(ee,Ue){var Mt=Ce[ee.key],Zt=We[Mt];if(Zt instanceof h0)Xe("q"),Xe(ji(Ue)),Zt.gState&&b.setGState(Zt.gState),Xe(ee.matrix.toString()+" cm"),Xe("/"+Mt+" sh"),Xe("Q");else if(Zt instanceof ky){var yn=new Gn(1,0,0,-1,0,rl());ee.matrix&&(yn=yn.multiply(ee.matrix||Ne),Mt=Ir.call(Zt,ee.key,ee.boundingBox,ee.xStep,ee.yStep,yn).id),Xe("q"),Xe("/Pattern cs"),Xe("/"+Mt+" scn"),Zt.gState&&b.setGState(Zt.gState),Xe(Ue),Xe("Q")}},ji=function(ee){switch(ee){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Po=b.moveTo=function(ee,Ue){return Xe(W(re(ee))+" "+W(se(Ue))+" m"),this},vo=b.lineTo=function(ee,Ue){return Xe(W(re(ee))+" "+W(se(Ue))+" l"),this},tl=b.curveTo=function(ee,Ue,Mt,Zt,yn,qn){return Xe([W(re(ee)),W(se(Ue)),W(re(Mt)),W(se(Zt)),W(re(yn)),W(se(qn)),"c"].join(" ")),this};b.__private__.line=b.line=function(ee,Ue,Mt,Zt,yn){if(isNaN(ee)||isNaN(Ue)||isNaN(Mt)||isNaN(Zt)||!Ni(yn))throw new Error("Invalid arguments passed to jsPDF.line");return B===k.COMPAT?this.lines([[Mt-ee,Zt-Ue]],ee,Ue,[1,1],yn||"S"):this.lines([[Mt-ee,Zt-Ue]],ee,Ue,[1,1]).stroke()},b.__private__.lines=b.lines=function(ee,Ue,Mt,Zt,yn,qn){var fr,Or,Gr,wi,oi,Mi,ya,ka,aa,yo,_o,So;if(typeof ee=="number"&&(So=Mt,Mt=Ue,Ue=ee,ee=So),Zt=Zt||[1,1],qn=qn||!1,isNaN(Ue)||isNaN(Mt)||!Array.isArray(ee)||!Array.isArray(Zt)||!Ni(yn)||typeof qn!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Po(Ue,Mt),fr=Zt[0],Or=Zt[1],wi=ee.length,yo=Ue,_o=Mt,Gr=0;Gr<wi;Gr++)(oi=ee[Gr]).length===2?(yo=oi[0]*fr+yo,_o=oi[1]*Or+_o,vo(yo,_o)):(Mi=oi[0]*fr+yo,ya=oi[1]*Or+_o,ka=oi[2]*fr+yo,aa=oi[3]*Or+_o,yo=oi[4]*fr+yo,_o=oi[5]*Or+_o,tl(Mi,ya,ka,aa,yo,_o));return qn&&di(),_i(yn),this},b.path=function(ee){for(var Ue=0;Ue<ee.length;Ue++){var Mt=ee[Ue],Zt=Mt.c;switch(Mt.op){case"m":Po(Zt[0],Zt[1]);break;case"l":vo(Zt[0],Zt[1]);break;case"c":tl.apply(this,Zt);break;case"h":di()}}return this},b.__private__.rect=b.rect=function(ee,Ue,Mt,Zt,yn){if(isNaN(ee)||isNaN(Ue)||isNaN(Mt)||isNaN(Zt)||!Ni(yn))throw new Error("Invalid arguments passed to jsPDF.rect");return B===k.COMPAT&&(Zt=-Zt),Xe([W(re(ee)),W(se(Ue)),W(re(Mt)),W(re(Zt)),"re"].join(" ")),_i(yn),this},b.__private__.triangle=b.triangle=function(ee,Ue,Mt,Zt,yn,qn,fr){if(isNaN(ee)||isNaN(Ue)||isNaN(Mt)||isNaN(Zt)||isNaN(yn)||isNaN(qn)||!Ni(fr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Mt-ee,Zt-Ue],[yn-Mt,qn-Zt],[ee-yn,Ue-qn]],ee,Ue,[1,1],fr,!0),this},b.__private__.roundedRect=b.roundedRect=function(ee,Ue,Mt,Zt,yn,qn,fr){if(isNaN(ee)||isNaN(Ue)||isNaN(Mt)||isNaN(Zt)||isNaN(yn)||isNaN(qn)||!Ni(fr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Or=4/3*(Math.SQRT2-1);return yn=Math.min(yn,.5*Mt),qn=Math.min(qn,.5*Zt),this.lines([[Mt-2*yn,0],[yn*Or,0,yn,qn-qn*Or,yn,qn],[0,Zt-2*qn],[0,qn*Or,-yn*Or,qn,-yn,qn],[2*yn-Mt,0],[-yn*Or,0,-yn,-qn*Or,-yn,-qn],[0,2*qn-Zt],[0,-qn*Or,yn*Or,-qn,yn,-qn]],ee+yn,Ue,[1,1],fr,!0),this},b.__private__.ellipse=b.ellipse=function(ee,Ue,Mt,Zt,yn){if(isNaN(ee)||isNaN(Ue)||isNaN(Mt)||isNaN(Zt)||!Ni(yn))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qn=4/3*(Math.SQRT2-1)*Mt,fr=4/3*(Math.SQRT2-1)*Zt;return Po(ee+Mt,Ue),tl(ee+Mt,Ue-fr,ee+qn,Ue-Zt,ee,Ue-Zt),tl(ee-qn,Ue-Zt,ee-Mt,Ue-fr,ee-Mt,Ue),tl(ee-Mt,Ue+fr,ee-qn,Ue+Zt,ee,Ue+Zt),tl(ee+qn,Ue+Zt,ee+Mt,Ue+fr,ee+Mt,Ue),_i(yn),this},b.__private__.circle=b.circle=function(ee,Ue,Mt,Zt){if(isNaN(ee)||isNaN(Ue)||isNaN(Mt)||!Ni(Zt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ee,Ue,Mt,Mt,Zt)},b.setFont=function(ee,Ue,Mt){return Mt&&(Ue=V(Ue,Mt)),nn=Ge(ee,Ue,{disableWarning:!1}),this};var Ro=b.__private__.getFont=b.getFont=function(){return mt[Ge.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var ee,Ue,Mt={};for(ee in ge)if(ge.hasOwnProperty(ee))for(Ue in Mt[ee]=[],ge[ee])ge[ee].hasOwnProperty(Ue)&&Mt[ee].push(Ue);return Mt},b.addFont=function(ee,Ue,Mt,Zt,yn){var qn=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qn.indexOf(arguments[3])!==-1?yn=arguments[3]:arguments[3]&&qn.indexOf(arguments[3])==-1&&(Mt=V(Mt,Zt)),yn=yn||"Identity-H",$a.call(this,ee,Ue,Mt,yn)};var jo,nl=t.lineWidth||.200025,Es=b.__private__.getLineWidth=b.getLineWidth=function(){return nl},Kh=b.__private__.setLineWidth=b.setLineWidth=function(ee){return nl=ee,Xe(W(re(ee))+" w"),this};b.__private__.setLineDash=ki.API.setLineDash=ki.API.setLineDashPattern=function(ee,Ue){if(ee=ee||[],Ue=Ue||0,isNaN(Ue)||!Array.isArray(ee))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ee=ee.map(function(Mt){return W(re(Mt))}).join(" "),Ue=W(re(Ue)),Xe("["+ee+"] "+Ue+" d"),this};var Zu=b.__private__.getLineHeight=b.getLineHeight=function(){return Ht*jo};b.__private__.getLineHeight=b.getLineHeight=function(){return Ht*jo};var hc=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(ee){return typeof(ee=ee||1.15)=="number"&&(jo=ee),this},Ml=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return jo};hc(t.lineHeight);var Pa=b.__private__.getHorizontalCoordinate=function(ee){return re(ee)},Wa=b.__private__.getVerticalCoordinate=function(ee){return B===k.ADVANCED?ee:xt[ve].mediaBox.topRightY-xt[ve].mediaBox.bottomLeftY-re(ee)},eh=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(ee){return W(Pa(ee))},Do=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(ee){return W(Wa(ee))},ia=t.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Ri(ia)},b.__private__.setStrokeColor=b.setDrawColor=function(ee,Ue,Mt,Zt){return ia=ci({ch1:ee,ch2:Ue,ch3:Mt,ch4:Zt,pdfColorType:"draw",precision:2}),Xe(ia),this};var hu=t.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Ri(hu)},b.__private__.setFillColor=b.setFillColor=function(ee,Ue,Mt,Zt){return hu=ci({ch1:ee,ch2:Ue,ch3:Mt,ch4:Zt,pdfColorType:"fill",precision:2}),Xe(hu),this};var fu=t.textColor||"0 g",as=b.__private__.getTextColor=b.getTextColor=function(){return Ri(fu)};b.__private__.setTextColor=b.setTextColor=function(ee,Ue,Mt,Zt){return fu=ci({ch1:ee,ch2:Ue,ch3:Mt,ch4:Zt,pdfColorType:"text",precision:3}),this};var Nc=t.charSpace,kc=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Nc||0)};b.__private__.setCharSpace=b.setCharSpace=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Nc=ee,this};var Fc=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(ee){var Ue=b.CapJoinStyles[ee];if(Ue===void 0)throw new Error("Line cap style of '"+ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fc=Ue,Xe(Ue+" J"),this};var Bc=0;b.__private__.setLineJoin=b.setLineJoin=function(ee){var Ue=b.CapJoinStyles[ee];if(Ue===void 0)throw new Error("Line join style of '"+ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bc=Ue,Xe(Ue+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(ee){if(ee=ee||0,isNaN(ee))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Xe(W(re(ee))+" M"),this},b.GState=Vw,b.setGState=function(ee){(ee=typeof ee=="string"?Qe[et[ee]]:Cu(null,ee)).equals(ut)||(Xe("/"+ee.id+" gs"),ut=ee)};var Cu=function(ee,Ue){if(!ee||!et[ee]){var Mt=!1;for(var Zt in Qe)if(Qe.hasOwnProperty(Zt)&&Qe[Zt].equals(Ue)){Mt=!0;break}if(Mt)Ue=Qe[Zt];else{var yn="GS"+(Object.keys(Qe).length+1).toString(10);Qe[yn]=Ue,Ue.id=yn}return ee&&(et[ee]=Ue.id),Dt.publish("addGState",Ue),Ue}};b.addGState=function(ee,Ue){return Cu(ee,Ue),this},b.saveGraphicsState=function(){return Xe("q"),ke.push({key:nn,size:Ht,color:fu}),this},b.restoreGraphicsState=function(){Xe("Q");var ee=ke.pop();return nn=ee.key,Ht=ee.size,fu=ee.color,ut=null,this},b.setCurrentTransformationMatrix=function(ee){return Xe(ee.toString()+" cm"),this},b.comment=function(ee){return Xe("#"+ee),this};var Pu=function(ee,Ue){var Mt=ee||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Mt},set:function(qn){isNaN(qn)||(Mt=parseFloat(qn))}});var Zt=Ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Zt},set:function(qn){isNaN(qn)||(Zt=parseFloat(qn))}});var yn="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return yn},set:function(qn){yn=qn.toString()}}),this},Vo=function(ee,Ue,Mt,Zt){Pu.call(this,ee,Ue),this.type="rect";var yn=Mt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return yn},set:function(fr){isNaN(fr)||(yn=parseFloat(fr))}});var qn=Zt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qn},set:function(fr){isNaN(fr)||(qn=parseFloat(fr))}}),this},fc=function(){this.page=lt,this.currentPage=ve,this.pages=it.slice(0),this.pagesContext=xt.slice(0),this.x=In,this.y=Pn,this.matrix=ir,this.width=Ts(ve),this.height=rl(ve),this.outputDestination=$t,this.id="",this.objectNumber=-1};fc.prototype.restore=function(){lt=this.page,ve=this.currentPage,xt=this.pagesContext,it=this.pages,In=this.x,Pn=this.y,ir=this.matrix,dc(ve,this.width),du(ve,this.height),$t=this.outputDestination};var os=function(ee,Ue,Mt,Zt,yn){Zn.push(new fc),lt=ve=0,it=[],In=ee,Pn=Ue,ir=yn,ti([Mt,Zt])},th=function(ee){if(qt[ee])Zn.pop().restore();else{var Ue=new fc,Mt="Xo"+(Object.keys(Tn).length+1).toString(10);Ue.id=Mt,qt[ee]=Mt,Tn[Mt]=Ue,Dt.publish("addFormObject",Ue),Zn.pop().restore()}};for(var Ru in b.beginFormObject=function(ee,Ue,Mt,Zt,yn){return os(ee,Ue,Mt,Zt,yn),this},b.endFormObject=function(ee){return th(ee),this},b.doFormObject=function(ee,Ue){var Mt=Tn[qt[ee]];return Xe("q"),Xe(Ue.toString()+" cm"),Xe("/"+Mt.id+" Do"),Xe("Q"),this},b.getFormObject=function(ee){var Ue=Tn[qt[ee]];return{x:Ue.x,y:Ue.y,width:Ue.width,height:Ue.height,matrix:Ue.matrix}},b.save=function(ee,Ue){return ee=ee||"generated.pdf",(Ue=Ue||{}).returnPromise=Ue.returnPromise||!1,Ue.returnPromise===!1?(s0(mr(Wn()),ee),typeof s0.unload=="function"&&Fi.setTimeout&&setTimeout(s0.unload,911),this):new Promise(function(Mt,Zt){try{var yn=s0(mr(Wn()),ee);typeof s0.unload=="function"&&Fi.setTimeout&&setTimeout(s0.unload,911),Mt(yn)}catch(qn){Zt(qn.message)}})},ki.API)ki.API.hasOwnProperty(Ru)&&(Ru==="events"&&ki.API.events.length?function(ee,Ue){var Mt,Zt,yn;for(yn=Ue.length-1;yn!==-1;yn--)Mt=Ue[yn][0],Zt=Ue[yn][1],ee.subscribe.apply(ee,[Mt].concat(typeof Zt=="function"?[Zt]:Zt))}(Dt,ki.API.events):b[Ru]=ki.API[Ru]);var Ts=b.getPageWidth=function(ee){return(xt[ee=ee||ve].mediaBox.topRightX-xt[ee].mediaBox.bottomLeftX)/Ft},dc=b.setPageWidth=function(ee,Ue){xt[ee].mediaBox.topRightX=Ue*Ft+xt[ee].mediaBox.bottomLeftX},rl=b.getPageHeight=function(ee){return(xt[ee=ee||ve].mediaBox.topRightY-xt[ee].mediaBox.bottomLeftY)/Ft},du=b.setPageHeight=function(ee,Ue){xt[ee].mediaBox.topRightY=Ue*Ft+xt[ee].mediaBox.bottomLeftY};return b.internal={pdfEscape:Gi,getStyle:ta,getFont:Ro,getFontSize:Ee,getCharSpace:kc,getTextColor:as,getLineHeight:Zu,getLineHeightFactor:Ml,getLineWidth:Es,write:tn,getHorizontalCoordinate:Pa,getVerticalCoordinate:Wa,getCoordinateString:eh,getVerticalCoordinateString:Do,collections:{},newObject:At,newAdditionalObject:or,newObjectDeferred:sn,newObjectDeferredBegin:Hn,getFilters:Vi,putStream:Vr,events:Dt,scaleFactor:Ft,pageSize:{getWidth:function(){return Ts(ve)},setWidth:function(ee){dc(ve,ee)},getHeight:function(){return rl(ve)},setHeight:function(ee){du(ve,ee)}},encryptionOptions:v,encryption:Lr,getEncryptor:Ti,output:vr,getNumberOfPages:he,pages:it,out:Xe,f2:j,f3:K,getPageInfo:Yr,getPageInfoByObjId:Cr,getCurrentPageInfo:$n,getPDFVersion:M,Point:Pu,Rectangle:Vo,Matrix:Gn,hasHotfix:xr},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Ts(ve)},set:function(ee){dc(ve,ee)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return rl(ve)},set:function(ee){du(ve,ee)},enumerable:!0,configurable:!0}),Di.call(b,Jt),nn="F1",Pi(i,n),Dt.publish("initialized"),b}gy.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},gy.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gy.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},gy.prototype.processOwnerPassword=function(t,e){return KC(YC(e).substr(0,5),t)},gy.prototype.encryptor=function(t,e){var n=YC(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return KC(n,r)}},Vw.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Co(t)!==Co(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},ki.API={events:[]},ki.version="3.0.1";var wl=ki.API,_R=1,V0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uv=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ea=function(t){return t.toFixed(2)},km=function(t){return t.toFixed(5)};wl.__acroform__={};var bh=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},zI=function(t){return t*_R},Zd=function(t){var e=new t8,n=ni.internal.getHeight(t)||0,r=ni.internal.getWidth(t)||0;return e.BBox=[0,0,Number(ea(r)),Number(ea(n))],e},iZ=wl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},aZ=wl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},oZ=wl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Bl=wl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return oZ(t,e-1)},zl=wl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return iZ(t,e-1)},Ul=wl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return aZ(t,e-1)},sZ=wl.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],o=t[1],l=t[2],a=t[3],h={};return h.lowerLeft_X=n(i)||0,h.lowerLeft_Y=r(o+a)||0,h.upperRight_X=n(i+l)||0,h.upperRight_Y=r(o)||0,[Number(ea(h.lowerLeft_X)),Number(ea(h.lowerLeft_Y)),Number(ea(h.upperRight_X)),Number(ea(h.upperRight_Y))]},lZ=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=JC(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+ea(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Zd(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},JC=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(K){return K.split(`
`)}):i.map(function(K){return[K]});var o=n,l=ni.internal.getHeight(t)||0;l=l<0?-l:l;var a=ni.internal.getWidth(t)||0;a=a<0?-a:a;var h=function(K,re,ie){if(K+1<i.length){var se=re+" "+i[K+1][0];return a2(se,t,ie).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var f,v,y=a2("3",t,o).height,w=t.multiline?l-o:(l-y)/2,b=w+=2,A=0,M=0,P=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+a2(e,t,o=12).width+", FieldWidth:"+a+`
`;break}for(var C="",k=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var z=!1;if(i[B].length!==1&&P!==i[B].length-1){if((y+2)*(k+2)+2>l)continue e;C+=i[B][P],z=!0,M=B,B--}else{C=(C+=i[B][P]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var q=parseInt(B),V=h(q,C,o),W=B>=i.length-1;if(V&&!W){C+=" ",P=0;continue}if(V||W){if(W)M=q;else if(t.multiline&&(y+2)*(k+2)+2>l)continue e}else{if(!t.multiline||(y+2)*(k+2)+2>l)continue e;M=q}}for(var Y="",Z=A;Z<=M;Z++){var j=i[Z];if(t.multiline){if(Z===M){Y+=j[P]+" ",P=(P+1)%j.length;continue}if(Z===A){Y+=j[j.length-1]+" ";continue}}Y+=j[0]+" "}switch(Y=Y.substr(Y.length-1)==" "?Y.substr(0,Y.length-1):Y,v=a2(Y,t,o).width,t.textAlign){case"right":f=a-v-2;break;case"center":f=(a-v)/2;break;case"left":default:f=2}e+=ea(f)+" "+ea(b)+` Td
`,e+="("+V0(Y)+`) Tj
`,e+=-ea(f)+` 0 Td
`,b=-(o+2),v=0,A=z?M:M+1,k++,C=""}break}return r.text=e,r.fontSize=o,r},a2=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},uZ={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},cZ=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},hZ=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Co(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},fZ=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(md.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(uZ)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_R=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new n8,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&cZ(o,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var o=!r;for(var l in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(l)){var a=r[l],h=[],f=a.Rect;if(a.Rect&&(a.Rect=sZ(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ni.createDefaultAppearanceStream(a),Co(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(h=a.getKeyValueListForStream()),a.Rect=f,a.hasAppearanceStream&&!a.appearanceStreamContent){var v=lZ(a);h.push({key:"AP",value:"<</N "+v+">>"}),i.internal.acroformPlugin.xForms.push(v)}if(a.appearanceStreamContent){var y="";for(var w in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(w)){var b=a.appearanceStreamContent[w];if(y+="/"+w+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var l in b)if(b.hasOwnProperty(l)){var A=b[l];typeof A=="function"&&(A=A.call(i,a)),y+="/"+l+" "+A+" ",i.internal.acroformPlugin.xForms.indexOf(A)>=0||i.internal.acroformPlugin.xForms.push(A)}}else typeof(A=b)=="function"&&(A=A.call(i,a)),y+="/"+l+" "+A,i.internal.acroformPlugin.xForms.indexOf(A)>=0||i.internal.acroformPlugin.xForms.push(A);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:a.objId}),i.internal.out("endobj")}o&&hZ(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},e8=wl.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(l){return l};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(o!==0&&(i+=" "),Co(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+V0(r(t[o].toString()))+")"):i+=t[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},yT=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+V0(r(t))+")"},tp=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};tp.prototype.toString=function(){return this.objId+" 0 R"},tp.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},tp.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:e8(i,this.objId,this.scope)}):i instanceof tp?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var t8=function(){tp.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};bh(t8,tp);var n8=function(){tp.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+V0(n(t))+")"}},set:function(n){t=n}})};bh(n8,tp);var md=function t(){tp.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Bl(e,3)},set:function(C){C?this.F=zl(e,3):this.F=Ul(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');n=C}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(C){r=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(C){r[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(C){r[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(C){r[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(C){r[3]=C}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Gw)return;o="FieldObject"+t.FieldNum++}var C=function(k){return k};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+V0(C(o))+")"},set:function(C){o=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(C){o=C}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(C){l=C}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(C){a=C}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(C){h=C}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/_R:f},set:function(C){f=C}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(C){v=C}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Gw||this instanceof S0))return yT(y,this.objId,this.scope)},set:function(C){C=C.toString(),y=C}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Wu?w:yT(w,this.objId,this.scope)},set:function(C){C=C.toString(),w=this instanceof Wu?C:C.substr(0,1)==="("?Uv(C.substr(1,C.length-2)):Uv(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wu?Uv(w.substr(1,w.length-1)):w},set:function(C){C=C.toString(),w=this instanceof Wu?"/"+C:C}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Wu?b:yT(b,this.objId,this.scope)},set:function(C){C=C.toString(),b=this instanceof Wu?C:C.substr(0,1)==="("?Uv(C.substr(1,C.length-2)):Uv(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wu?Uv(b.substr(1,b.length-1)):b},set:function(C){C=C.toString(),b=this instanceof Wu?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,M=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return M},set:function(C){C=!!C,M=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(C){A=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,1)},set:function(C){C?this.Ff=zl(this.Ff,1):this.Ff=Ul(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,2)},set:function(C){C?this.Ff=zl(this.Ff,2):this.Ff=Ul(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,3)},set:function(C){C?this.Ff=zl(this.Ff,3):this.Ff=Ul(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');P=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(P){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:P=2;break;case"center":case 1:P=1;break;case"left":case 0:default:P=0}}})};bh(md,tp);var Yy=function(){md.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return e8(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(o,l,a){a||(a=1);for(var h,f=[];h=l.exec(o);)f.push(h[a]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,18)},set:function(n){n?this.Ff=zl(this.Ff,18):this.Ff=Ul(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=zl(this.Ff,19):this.Ff=Ul(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,20)},set:function(n){n?(this.Ff=zl(this.Ff,20),e.sort()):this.Ff=Ul(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,22)},set:function(n){n?this.Ff=zl(this.Ff,22):this.Ff=Ul(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,23)},set:function(n){n?this.Ff=zl(this.Ff,23):this.Ff=Ul(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,27)},set:function(n){n?this.Ff=zl(this.Ff,27):this.Ff=Ul(this.Ff,27)}}),this.hasAppearanceStream=!1};bh(Yy,md);var Ky=function(){Yy.call(this),this.fontName="helvetica",this.combo=!1};bh(Ky,Yy);var Jy=function(){Ky.call(this),this.combo=!0};bh(Jy,Ky);var vw=function(){Jy.call(this),this.edit=!0};bh(vw,Jy);var Wu=function(){md.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,15)},set:function(n){n?this.Ff=zl(this.Ff,15):this.Ff=Ul(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,16)},set:function(n){n?this.Ff=zl(this.Ff,16):this.Ff=Ul(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,17)},set:function(n){n?this.Ff=zl(this.Ff,17):this.Ff=Ul(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,26)},set:function(n){n?this.Ff=zl(this.Ff,26):this.Ff=Ul(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+V0(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Co(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};bh(Wu,md);var yw=function(){Wu.call(this),this.pushButton=!0};bh(yw,Wu);var Qy=function(){Wu.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};bh(Qy,Wu);var Gw=function(){var t,e;md.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),r)l.push("/"+o+" ("+V0(i(r[o]))+")");return l.push(">>"),l.join(`
`)},set:function(i){Co(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ni.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bh(Gw,md),Qy.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Qy.prototype.createOption=function(t){var e=new Gw;return e.Parent=this,e.optionName=t,this.Kids.push(e),dZ.call(this.scope,e),e};var _w=function(){Wu.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ni.CheckBox.createAppearanceStream()};bh(_w,Wu);var S0=function(){md.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,13)},set:function(e){e?this.Ff=zl(this.Ff,13):this.Ff=Ul(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,21)},set:function(e){e?this.Ff=zl(this.Ff,21):this.Ff=Ul(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,23)},set:function(e){e?this.Ff=zl(this.Ff,23):this.Ff=Ul(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,24)},set:function(e){e?this.Ff=zl(this.Ff,24):this.Ff=Ul(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,25)},set:function(e){e?this.Ff=zl(this.Ff,25):this.Ff=Ul(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,26)},set:function(e){e?this.Ff=zl(this.Ff,26):this.Ff=Ul(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bh(S0,md);var bw=function(){S0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,14)},set:function(t){t?this.Ff=zl(this.Ff,14):this.Ff=Ul(this.Ff,14)}}),this.password=!0};bh(bw,S0);var ni={CheckBox:{createAppearanceStream:function(){return{N:{On:ni.CheckBox.YesNormal},D:{On:ni.CheckBox.YesPushDown,Off:ni.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Zd(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=JC(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+ea(ni.internal.getWidth(t))+" "+ea(ni.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ea(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Zd(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],o=ni.internal.getHeight(t),l=ni.internal.getWidth(t),a=JC(t,t.caption);return i.push("1 g"),i.push("0 0 "+ea(l)+" "+ea(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ea(l-1)+" "+ea(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+ea(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Zd(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ea(ni.internal.getWidth(t))+" "+ea(ni.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ni.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ni.RadioButton.Circle.YesNormal,e.D[t]=ni.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Zd(t);e.scope=t.scope;var n=[],r=ni.internal.getWidth(t)<=ni.internal.getHeight(t)?ni.internal.getWidth(t)/4:ni.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=ni.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+km(ni.internal.getWidth(t)/2)+" "+km(ni.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Zd(t);e.scope=t.scope;var n=[],r=ni.internal.getWidth(t)<=ni.internal.getHeight(t)?ni.internal.getWidth(t)/4:ni.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*ni.internal.Bezier_C).toFixed(5)),l=Number((r*ni.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+km(ni.internal.getWidth(t)/2)+" "+km(ni.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+km(ni.internal.getWidth(t)/2)+" "+km(ni.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Zd(t);e.scope=t.scope;var n=[],r=ni.internal.getWidth(t)<=ni.internal.getHeight(t)?ni.internal.getWidth(t)/4:ni.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*ni.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+km(ni.internal.getWidth(t)/2)+" "+km(ni.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ni.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ni.RadioButton.Cross.YesNormal,e.D[t]=ni.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Zd(t);e.scope=t.scope;var n=[],r=ni.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+ea(ni.internal.getWidth(t)-2)+" "+ea(ni.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(ea(r.x1.x)+" "+ea(r.x1.y)+" m"),n.push(ea(r.x2.x)+" "+ea(r.x2.y)+" l"),n.push(ea(r.x4.x)+" "+ea(r.x4.y)+" m"),n.push(ea(r.x3.x)+" "+ea(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Zd(t);e.scope=t.scope;var n=ni.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+ea(ni.internal.getWidth(t))+" "+ea(ni.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ea(ni.internal.getWidth(t)-2)+" "+ea(ni.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ea(n.x1.x)+" "+ea(n.x1.y)+" m"),r.push(ea(n.x2.x)+" "+ea(n.x2.y)+" l"),r.push(ea(n.x4.x)+" "+ea(n.x4.y)+" m"),r.push(ea(n.x3.x)+" "+ea(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Zd(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ea(ni.internal.getWidth(t))+" "+ea(ni.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ni.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ni.internal.getWidth(t),n=ni.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},ni.internal.getWidth=function(t){var e=0;return Co(t)==="object"&&(e=zI(t.Rect[2])),e},ni.internal.getHeight=function(t){var e=0;return Co(t)==="object"&&(e=zI(t.Rect[3])),e};var dZ=wl.addField=function(t){if(fZ(this,t),!(t instanceof md))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};wl.AcroFormChoiceField=Yy,wl.AcroFormListBox=Ky,wl.AcroFormComboBox=Jy,wl.AcroFormEditBox=vw,wl.AcroFormButton=Wu,wl.AcroFormPushButton=yw,wl.AcroFormRadioButton=Qy,wl.AcroFormCheckBox=_w,wl.AcroFormTextField=S0,wl.AcroFormPasswordField=bw,wl.AcroFormAppearance=ni,wl.AcroForm={ChoiceField:Yy,ListBox:Ky,ComboBox:Jy,EditBox:vw,Button:Wu,PushButton:yw,RadioButton:Qy,CheckBox:_w,TextField:S0,PasswordField:bw,Appearance:ni},ki.AcroForm={ChoiceField:Yy,ListBox:Ky,ComboBox:Jy,EditBox:vw,Button:Wu,PushButton:yw,RadioButton:Qy,CheckBox:_w,TextField:S0,PasswordField:bw,Appearance:ni};ki.AcroForm;function r8(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(K,re){var ie,se,de,ue,Te,pe=e;if((re=re||e)==="RGBA"||K.data!==void 0&&K.data instanceof Uint8ClampedArray&&"height"in K&&"width"in K)return"RGBA";if(V(K))for(Te in n)for(de=n[Te],ie=0;ie<de.length;ie+=1){for(ue=!0,se=0;se<de[ie].length;se+=1)if(de[ie][se]!==void 0&&de[ie][se]!==K[se]){ue=!1;break}if(ue===!0){pe=Te;break}}else for(Te in n)for(de=n[Te],ie=0;ie<de.length;ie+=1){for(ue=!0,se=0;se<de[ie].length;se+=1)if(de[ie][se]!==void 0&&de[ie][se]!==K.charCodeAt(se)){ue=!1;break}if(ue===!0){pe=Te;break}}return pe===e&&re!==e&&(pe=re),pe},i=function K(re){for(var ie=this.internal.write,se=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);re.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:re.width}),ue.push({key:"Height",value:re.height}),re.colorSpace===P.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(re.palette.length/3-1)+" "+("sMask"in re&&re.sMask!==void 0?re.objectId+2:re.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+re.colorSpace}),re.colorSpace===P.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:re.bitsPerComponent}),"decodeParameters"in re&&re.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+re.decodeParameters+">>"}),"transparency"in re&&Array.isArray(re.transparency)){for(var Te="",pe=0,De=re.transparency.length;pe<De;pe++)Te+=re.transparency[pe]+" "+re.transparency[pe]+" ";ue.push({key:"Mask",value:"["+Te+"]"})}re.sMask!==void 0&&ue.push({key:"SMask",value:re.objectId+1+" 0 R"});var me=re.filter!==void 0?["/"+re.filter]:void 0;if(se({data:re.data,additionalKeyValues:ue,alreadyAppliedFilters:me,objectId:re.objectId}),ie("endobj"),"sMask"in re&&re.sMask!==void 0){var Me="/Predictor "+re.predictor+" /Colors 1 /BitsPerComponent "+re.bitsPerComponent+" /Columns "+re.width,fe={width:re.width,height:re.height,colorSpace:"DeviceGray",bitsPerComponent:re.bitsPerComponent,decodeParameters:Me,data:re.sMask};"filter"in re&&(fe.filter=re.filter),K.call(this,fe)}if(re.colorSpace===P.INDEXED){var ve=this.internal.newObject();se({data:Y(new Uint8Array(re.palette)),objectId:ve}),ie("endobj")}},o=function(){var K=this.internal.collections.addImage_images;for(var re in K)i.call(this,K[re])},l=function(){var K,re=this.internal.collections.addImage_images,ie=this.internal.write;for(var se in re)ie("/I"+(K=re[se]).index,K.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},h=function(){var K=this.internal.collections.addImage_images;return a.call(this),K},f=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function(K){return typeof t["process"+K.toUpperCase()]=="function"},y=function(K){return Co(K)==="object"&&K.nodeType===1},w=function(K,re){if(K.nodeName==="IMG"&&K.hasAttribute("src")){var ie=""+K.getAttribute("src");if(ie.indexOf("data:image/")===0)return vb(unescape(ie).split("base64,").pop());var se=t.loadFile(ie,!0);if(se!==void 0)return se}if(K.nodeName==="CANVAS"){if(K.width===0||K.height===0)throw new Error("Given canvas must have data. Canvas width: "+K.width+", height: "+K.height);var de;switch(re){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;case"JPEG":case"JPG":default:de="image/jpeg"}return vb(K.toDataURL(de,1).split("base64,").pop())}},b=function(K){var re=this.internal.collections.addImage_images;if(re){for(var ie in re)if(K===re[ie].alias)return re[ie]}},A=function(K,re,ie){return K||re||(K=-96,re=-96),K<0&&(K=-1*ie.width*72/K/this.internal.scaleFactor),re<0&&(re=-1*ie.height*72/re/this.internal.scaleFactor),K===0&&(K=re*ie.width/ie.height),re===0&&(re=K*ie.height/ie.width),[K,re]},M=function(K,re,ie,se,de,ue){var Te=A.call(this,ie,se,de),pe=this.internal.getCoordinateString,De=this.internal.getVerticalCoordinateString,me=h.call(this);if(ie=Te[0],se=Te[1],me[de.index]=de,ue){ue*=Math.PI/180;var Me=Math.cos(ue),fe=Math.sin(ue),ve=function(ye){return ye.toFixed(4)},le=[ve(Me),ve(fe),ve(-1*fe),ve(Me),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,pe(K),De(re+se),"cm"].join(" ")),this.internal.write(le.join(" ")),this.internal.write([pe(ie),"0","0",pe(se),"0","0","cm"].join(" "))):this.internal.write([pe(ie),"0","0",pe(se),pe(K),De(re+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},P=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(K){var re,ie,se=0;if(typeof K=="string")for(ie=K.length,re=0;re<ie;re++)se=(se<<5)-se+K.charCodeAt(re),se|=0;else if(V(K))for(ie=K.byteLength/2,re=0;re<ie;re++)se=(se<<5)-se+K[re],se|=0;return se},B=t.__addimage__.validateStringAsBase64=function(K){(K=K||"").toString().trim();var re=!0;return K.length===0&&(re=!1),K.length%4!=0&&(re=!1),/^[A-Za-z0-9+/]+$/.test(K.substr(0,K.length-2))===!1&&(re=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(K.substr(-2))===!1&&(re=!1),re},z=t.__addimage__.extractImageFromDataUrl=function(K){if(K==null||!(K=K.trim()).startsWith("data:"))return null;var re=K.indexOf(",");return re<0?null:K.substring(0,re).trim().endsWith("base64")?K.substring(re+1):null},q=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(K){return q()&&K instanceof ArrayBuffer};var V=t.__addimage__.isArrayBufferView=function(K){return q()&&typeof Uint32Array<"u"&&(K instanceof Int8Array||K instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&K instanceof Uint8ClampedArray||K instanceof Int16Array||K instanceof Uint16Array||K instanceof Int32Array||K instanceof Uint32Array||K instanceof Float32Array||K instanceof Float64Array)},W=t.__addimage__.binaryStringToUint8Array=function(K){for(var re=K.length,ie=new Uint8Array(re),se=0;se<re;se++)ie[se]=K.charCodeAt(se);return ie},Y=t.__addimage__.arrayBufferToBinaryString=function(K){for(var re="",ie=V(K)?K:new Uint8Array(K),se=0;se<ie.length;se+=8192)re+=String.fromCharCode.apply(null,ie.subarray(se,se+8192));return re};t.addImage=function(){var K,re,ie,se,de,ue,Te,pe,De;if(typeof arguments[1]=="number"?(re=e,ie=arguments[1],se=arguments[2],de=arguments[3],ue=arguments[4],Te=arguments[5],pe=arguments[6],De=arguments[7]):(re=arguments[1],ie=arguments[2],se=arguments[3],de=arguments[4],ue=arguments[5],Te=arguments[6],pe=arguments[7],De=arguments[8]),Co(K=arguments[0])==="object"&&!y(K)&&"imageData"in K){var me=K;K=me.imageData,re=me.format||re||e,ie=me.x||ie||0,se=me.y||se||0,de=me.w||me.width||de,ue=me.h||me.height||ue,Te=me.alias||Te,pe=me.compression||pe,De=me.rotation||me.angle||De}var Me=this.internal.getFilters();if(pe===void 0&&Me.indexOf("FlateEncode")!==-1&&(pe="SLOW"),isNaN(ie)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var fe=Z.call(this,K,re,Te,pe);return M.call(this,ie,se,de,ue,fe,De),this};var Z=function(K,re,ie,se){var de,ue,Te;if(typeof K=="string"&&r(K)===e){K=unescape(K);var pe=j(K,!1);(pe!==""||(pe=t.loadFile(K,!0))!==void 0)&&(K=pe)}if(y(K)&&(K=w(K,re)),re=r(K,re),!v(re))throw new Error("addImage does not support files of type '"+re+"', please ensure that a plugin for '"+re+"' support is added.");if(((Te=ie)==null||Te.length===0)&&(ie=function(De){return typeof De=="string"||V(De)?k(De):V(De.data)?k(De.data):null}(K)),(de=b.call(this,ie))||(q()&&(K instanceof Uint8Array||re==="RGBA"||(ue=K,K=W(K))),de=this["process"+re.toUpperCase()](K,f.call(this),ie,function(De){return De&&typeof De=="string"&&(De=De.toUpperCase()),De in t.image_compression?De:C.NONE}(se),ue)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},j=t.__addimage__.convertBase64ToBinaryString=function(K,re){re=typeof re!="boolean"||re;var ie,se="";if(typeof K=="string"){var de;ie=(de=z(K))!==null&&de!==void 0?de:K;try{se=vb(ie)}catch(ue){if(re)throw B(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};t.getImageProperties=function(K){var re,ie,se="";if(y(K)&&(K=w(K)),typeof K=="string"&&r(K)===e&&((se=j(K,!1))===""&&(se=t.loadFile(K)||""),K=se),ie=r(K),!v(ie))throw new Error("addImage does not support files of type '"+ie+"', please ensure that a plugin for '"+ie+"' support is added.");if(!q()||K instanceof Uint8Array||(K=W(K)),!(re=this["process"+ie.toUpperCase()](K)))throw new Error("An unknown error occurred whilst processing the image");return re.fileType=ie,re}})(ki.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};ki.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,o,l=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(n.objId),f=n.pageContext.annotations,v=!1,y=0;y<f.length&&!v;y++)switch((r=f[y]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var w=0;w<f.length;w++){r=f[w];var b=this.internal.pdfEscape,A=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var M=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(M.objId),k=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+l(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+l(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+b(C(r.contents))+")",o+=" /Popup "+P.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+b(C(k))+") >>",M.content=o;var B=M.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+l(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+l(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+B,r.open&&(o+=" /Open true"),o+=" >>",P.content=o,this.internal.write(M.objId,"0 R",P.objId,"0 R");break;case"freetext":i="/Rect ["+l(r.bounds.x)+" "+a(r.bounds.y)+" "+l(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var z=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+b(A(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+z+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var q=this.annotations._nameMap[r.options.name];r.options.pageNumber=q.page,r.options.top=q.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+b(A(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var V=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+V+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,o,l){var a=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:h(n),y:f(r),w:h(n+i),h:f(r+o)},options:l,type:"link"})},t.textWithLink=function(n,r,i,o){var l,a,h=this.getTextWidth(n),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var v=this.splitTextToSize(n,a).length;l=Math.ceil(f*v)}else a=h,l=f;return this.text(n,r,i,o),i+=.2*f,o.align==="center"&&(r-=h/2),o.align==="right"&&(r-=h),this.link(r,i-f,a,l,o),h},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(ki.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(M){return e[M.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function(M){return typeof M=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(M)},a=t.__arabicParser__.isArabicEndLetter=function(M){return l(M)&&o(M)&&e[M.charCodeAt(0)].length<=2},h=t.__arabicParser__.isArabicAlfLetter=function(M){return l(M)&&i.indexOf(M.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(M){return l(M)&&o(M)&&e[M.charCodeAt(0)].length>=1};var f=t.__arabicParser__.arabicLetterHasFinalForm=function(M){return l(M)&&o(M)&&e[M.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(M){return l(M)&&o(M)&&e[M.charCodeAt(0)].length>=3};var v=t.__arabicParser__.arabicLetterHasMedialForm=function(M){return l(M)&&o(M)&&e[M.charCodeAt(0)].length==4},y=t.__arabicParser__.resolveLigatures=function(M){var P=0,C=n,k="",B=0;for(P=0;P<M.length;P+=1)C[M.charCodeAt(P)]!==void 0?(B++,typeof(C=C[M.charCodeAt(P)])=="number"&&(k+=String.fromCharCode(C),C=n,B=0),P===M.length-1&&(C=n,k+=M.charAt(P-(B-1)),P-=B-1,B=0)):(C=n,k+=M.charAt(P-B),P-=B,B=0);return k};t.__arabicParser__.isArabicDiacritic=function(M){return M!==void 0&&r[M.charCodeAt(0)]!==void 0};var w=t.__arabicParser__.getCorrectForm=function(M,P,C){return l(M)?o(M)===!1?-1:!f(M)||!l(P)&&!l(C)||!l(C)&&a(P)||a(M)&&!l(P)||a(M)&&h(P)||a(M)&&a(P)?0:v(M)&&l(P)&&!a(P)&&l(C)&&f(C)?3:a(M)||!l(C)?1:2:-1},b=function(M){var P=0,C=0,k=0,B="",z="",q="",V=(M=M||"").split("\\s+"),W=[];for(P=0;P<V.length;P+=1){for(W.push(""),C=0;C<V[P].length;C+=1)B=V[P][C],z=V[P][C-1],q=V[P][C+1],l(B)?(k=w(B,z,q),W[P]+=k!==-1?String.fromCharCode(e[B.charCodeAt(0)][k]):B):W[P]+=B;W[P]=y(W[P])}return W.join(" ")},A=t.__arabicParser__.processArabic=t.processArabic=function(){var M,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(P)){var k=0;for(C=[],k=0;k<P.length;k+=1)Array.isArray(P[k])?C.push([b(P[k][0]),P[k][1],P[k][2]]):C.push([b(P[k])]);M=C}else M=b(P);return typeof arguments[0]=="string"?M:(arguments[0].text=M,arguments[0])};t.events.push(["preProcessText",A])}(ki.API),ki.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(a){l=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ki.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(M){h=M}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(M){f=M}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(M){v=M}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(M){y=M}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(M){w=M}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(M){b=M}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(M){A=M}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},t.getTextDimensions=function(h,f){r.call(this);var v=(f=f||{}).fontSize||this.getFontSize(),y=f.font||this.getFont(),w=f.scaleFactor||this.internal.scaleFactor,b=0,A=0,M=0,P=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var C=f.maxWidth;C>0?typeof h=="string"?h=this.splitTextToSize(h,C):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(B,z){return B.concat(P.splitTextToSize(z,C))},[])):h=Array.isArray(h)?h:[h];for(var k=0;k<h.length;k++)b<(M=this.getStringUnitWidth(h[k],{font:y})*v)&&(b=M);return b!==0&&(A=h.length),{w:b/=w,h:Math.max((A*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/w,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,b&&w&&(this.printHeaderRow(h.lineNumber,!0),h.y+=w[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,n===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-v,h.y+v,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+v,{align:"center",baseline:"top",maxWidth:h.width-v-v}):this.text(h.text,h.x+v,h.y+v,{align:"left",baseline:"top",maxWidth:h.width-v-v})),this.internal.__cell__.lastCell=h,this};t.table=function(h,f,v,y,w){if(r.call(this),!v)throw new Error("No data for PDF table.");var b,A,M,P,C=[],k=[],B=[],z={},q={},V=[],W=[],Y=(w=w||{}).autoSize||!1,Z=w.printHeaders!==!1,j=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,K=w.margins||Object.assign({width:this.getPageWidth()},e),re=typeof w.padding=="number"?w.padding:3,ie=w.headerBackgroundColor||"#c8c8c8",se=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=Z,this.internal.__cell__.margins=K,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=re,this.internal.__cell__.headerBackgroundColor=ie,this.internal.__cell__.headerTextColor=se,this.setFontSize(j),y==null)k=C=Object.keys(v[0]),B=C.map(function(){return"left"});else if(Array.isArray(y)&&Co(y[0])==="object")for(C=y.map(function(me){return me.name}),k=y.map(function(me){return me.prompt||me.name||""}),B=y.map(function(me){return me.align||"left"}),b=0;b<y.length;b+=1)q[y[b].name]=y[b].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&(k=C=y,B=C.map(function(){return"left"}));if(Y||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<C.length;b+=1){for(z[P=C[b]]=v.map(function(me){return me[P]}),this.setFont(void 0,"bold"),V.push(this.getTextDimensions(k[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=z[P],this.setFont(void 0,"normal"),M=0;M<A.length;M+=1)V.push(this.getTextDimensions(A[M],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[P]=Math.max.apply(null,V)+re+re,V=[]}if(Z){var de={};for(b=0;b<C.length;b+=1)de[C[b]]={},de[C[b]].text=k[b],de[C[b]].align=B[b];var ue=a.call(this,de,q);W=C.map(function(me){return new o(h,f,q[me],ue,de[me].text,void 0,de[me].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var Te=y.reduce(function(me,Me){return me[Me.name]=Me.align,me},{});for(b=0;b<v.length;b+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:b,data:v[b]},this);var pe=a.call(this,v[b],q);for(M=0;M<C.length;M+=1){var De=v[b][C[M]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:b,col:M,data:De},this),l.call(this,new o(h,f,q[C[M]],pe,De,b+2,Te[C[M]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var a=function(h,f){var v=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(h).map(function(b){var A=h[b];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,f[b]-v-v)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/w+v+v},this).reduce(function(b,A){return Math.max(b,A)},0)};t.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},t.printHeaderRow=function(h,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){v=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(v.y=this.internal.__cell__.margins.top||0,w.push(v)),v.lineNumber=h;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,v),this.setTextColor(A)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}}(ki.API);var i8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},a8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],QC=r8(a8),o8=[100,200,300,400,500,600,700,800,900],pZ=r8(o8);function e3(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(o){return i8[o=o||"normal"]?o:"normal"}(t.style),r=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(o){return typeof QC[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function UI(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var mZ={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},jI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function VI(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function gZ(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},mZ,n.genericFontFamilies||{}),o=null,l=null,a=0;a<e.length;++a)if(i[(o=e3(e[a])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){l=t[o.family];break}if(!(l=l||t[r]))throw new Error("Could not find a font-family for the rule '"+VI(o)+"' and default family '"+r+"'.");if(l=function(h,f){if(f[h])return f[h];var v=QC[h],y=v<=QC.normal?-1:1,w=UI(f,a8,v,y);if(!w)throw new Error("Could not find a matching font-stretch value for "+h);return w}(o.stretch,l),l=function(h,f){if(f[h])return f[h];for(var v=i8[h],y=0;y<v.length;++y)if(f[v[y]])return f[v[y]];throw new Error("Could not find a matching font-style for "+h)}(o.style,l),!(l=function(h,f){if(f[h])return f[h];if(h===400&&f[500])return f[500];if(h===500&&f[400])return f[400];var v=pZ[h],y=UI(f,o8,v,h<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+h);return y}(o.weight,l)))throw new Error("Failed to resolve a font for the rule '"+VI(o)+"'.");return l}function GI(t){return t.trimLeft()}function vZ(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function yZ(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var o2,qI,HI,_T=["times"];(function(t){var e,n,r,i,o,l,a,h,f,v=function(fe){return fe=fe||{},this.isStrokeTransparent=fe.isStrokeTransparent||!1,this.strokeOpacity=fe.strokeOpacity||1,this.strokeStyle=fe.strokeStyle||"#000000",this.fillStyle=fe.fillStyle||"#000000",this.isFillTransparent=fe.isFillTransparent||!1,this.fillOpacity=fe.fillOpacity||1,this.font=fe.font||"10px sans-serif",this.textBaseline=fe.textBaseline||"alphabetic",this.textAlign=fe.textAlign||"left",this.lineWidth=fe.lineWidth||1,this.lineJoin=fe.lineJoin||"miter",this.lineCap=fe.lineCap||"butt",this.path=fe.path||[],this.transform=fe.transform!==void 0?fe.transform.clone():new h,this.globalCompositeOperation=fe.globalCompositeOperation||"normal",this.globalAlpha=fe.globalAlpha||1,this.clip_path=fe.clip_path||[],this.currentPoint=fe.currentPoint||new l,this.miterLimit=fe.miterLimit||10,this.lastPoint=fe.lastPoint||new l,this.lineDashOffset=fe.lineDashOffset||0,this.lineDash=fe.lineDash||[],this.margin=fe.margin||[0,0,0,0],this.prevPageLastElemOffset=fe.prevPageLastElemOffset||0,this.ignoreClearRect=typeof fe.ignoreClearRect!="boolean"||fe.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,a=this.internal.Rectangle,h=this.internal.Matrix,f=new v}]);var y=function(fe){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ve=fe;Object.defineProperty(this,"pdf",{get:function(){return ve}});var le=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return le},set:function(Ct){le=!!Ct}});var ye=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ye},set:function(Ct){ye=!!Ct}});var Se=0;Object.defineProperty(this,"posX",{get:function(){return Se},set:function(Ct){isNaN(Ct)||(Se=Ct)}});var Be=0;Object.defineProperty(this,"posY",{get:function(){return Be},set:function(Ct){isNaN(Ct)||(Be=Ct)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(Ct){var Xe;typeof Ct=="number"?Xe=[Ct,Ct,Ct,Ct]:((Xe=new Array(4))[0]=Ct[0],Xe[1]=Ct.length>=2?Ct[1]:Xe[0],Xe[2]=Ct.length>=3?Ct[2]:Xe[0],Xe[3]=Ct.length>=4?Ct[3]:Xe[1]),f.margin=Xe}});var Ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ve},set:function(Ct){Ve=Ct}});var tt=0;Object.defineProperty(this,"lastBreak",{get:function(){return tt},set:function(Ct){tt=Ct}});var ht=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ht},set:function(Ct){ht=Ct}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(Ct){Ct instanceof v&&(f=Ct)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(Ct){f.path=Ct}});var it=[];Object.defineProperty(this,"ctxStack",{get:function(){return it},set:function(Ct){it=Ct}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ct){var Xe;Xe=w(Ct),this.ctx.fillStyle=Xe.style,this.ctx.isFillTransparent=Xe.a===0,this.ctx.fillOpacity=Xe.a,this.pdf.setFillColor(Xe.r,Xe.g,Xe.b,{a:Xe.a}),this.pdf.setTextColor(Xe.r,Xe.g,Xe.b,{a:Xe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ct){var Xe=w(Ct);this.ctx.strokeStyle=Xe.style,this.ctx.isStrokeTransparent=Xe.a===0,this.ctx.strokeOpacity=Xe.a,Xe.a===0?this.pdf.setDrawColor(255,255,255):(Xe.a,this.pdf.setDrawColor(Xe.r,Xe.g,Xe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ct){["butt","round","square"].indexOf(Ct)!==-1&&(this.ctx.lineCap=Ct,this.pdf.setLineCap(Ct))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ct){isNaN(Ct)||(this.ctx.lineWidth=Ct,this.pdf.setLineWidth(Ct))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ct){["bevel","round","miter"].indexOf(Ct)!==-1&&(this.ctx.lineJoin=Ct,this.pdf.setLineJoin(Ct))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ct){isNaN(Ct)||(this.ctx.miterLimit=Ct,this.pdf.setMiterLimit(Ct))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ct){this.ctx.textBaseline=Ct}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ct){["right","end","center","left","start"].indexOf(Ct)!==-1&&(this.ctx.textAlign=Ct)}});var gt=null;function $t(Ct,Xe){if(gt===null){var tn=function(Kt){var Jt=[];return Object.keys(Kt).forEach(function(Ht){Kt[Ht].forEach(function($e){var Ee=null;switch($e){case"bold":Ee={family:Ht,weight:"bold"};break;case"italic":Ee={family:Ht,style:"italic"};break;case"bolditalic":Ee={family:Ht,weight:"bold",style:"italic"};break;case"":case"normal":Ee={family:Ht}}Ee!==null&&(Ee.ref={name:Ht,style:$e},Jt.push(Ee))})}),Jt}(Ct.getFontList());gt=function(Kt){for(var Jt={},Ht=0;Ht<Kt.length;++Ht){var $e=e3(Kt[Ht]),Ee=$e.family,_t=$e.stretch,jt=$e.style,vt=$e.weight;Jt[Ee]=Jt[Ee]||{},Jt[Ee][_t]=Jt[Ee][_t]||{},Jt[Ee][_t][jt]=Jt[Ee][_t][jt]||{},Jt[Ee][_t][jt][vt]=$e}return Jt}(tn.concat(Xe))}return gt}var He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(Ct){gt=null,He=Ct}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ct){var Xe;if(this.ctx.font=Ct,(Xe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ct))!==null){var tn=Xe[1];Xe[2];var Kt=Xe[3],Jt=Xe[4];Xe[5];var Ht=Xe[6],$e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Jt)[2];Jt=Math.floor($e==="px"?parseFloat(Jt)*this.pdf.internal.scaleFactor:$e==="em"?parseFloat(Jt)*this.pdf.getFontSize():parseFloat(Jt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Jt);var Ee=function(pn){var nn,Ft,In=[],Pn=pn.trim();if(Pn==="")return _T;if(Pn in jI)return[jI[Pn]];for(;Pn!=="";){switch(Ft=null,nn=(Pn=GI(Pn)).charAt(0)){case'"':case"'":Ft=vZ(Pn.substring(1),nn);break;default:Ft=yZ(Pn)}if(Ft===null||(In.push(Ft[0]),(Pn=GI(Ft[1]))!==""&&Pn.charAt(0)!==","))return _T;Pn=Pn.replace(/^,/,"")}return In}(Ht);if(this.fontFaces){var _t=gZ($t(this.pdf,this.fontFaces),Ee.map(function(pn){return{family:pn,stretch:"normal",weight:Kt,style:tn}}));this.pdf.setFont(_t.ref.name,_t.ref.style)}else{var jt="";(Kt==="bold"||parseInt(Kt,10)>=700||tn==="bold")&&(jt="bold"),tn==="italic"&&(jt+="italic"),jt.length===0&&(jt="normal");for(var vt="",Pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},vn=0;vn<Ee.length;vn++){if(this.pdf.internal.getFont(Ee[vn],jt,{noFallback:!0,disableWarning:!0})!==void 0){vt=Ee[vn];break}if(jt==="bolditalic"&&this.pdf.internal.getFont(Ee[vn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)vt=Ee[vn],jt="bold";else if(this.pdf.internal.getFont(Ee[vn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){vt=Ee[vn],jt="normal";break}}if(vt===""){for(var hn=0;hn<Ee.length;hn++)if(Pt[Ee[hn]]){vt=Pt[Ee[hn]];break}}vt=vt===""?"Times":vt,this.pdf.setFont(vt,jt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ct){this.ctx.globalCompositeOperation=Ct}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ct){this.ctx.globalAlpha=Ct}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ct){this.ctx.lineDashOffset=Ct,Me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ct){this.ctx.lineDash=Ct,Me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ct){this.ctx.ignoreClearRect=!!Ct}})};y.prototype.setLineDash=function(fe){this.lineDash=fe},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){z.call(this,"fill",!1)},y.prototype.stroke=function(){z.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(fe,ve){if(isNaN(fe)||isNaN(ve))throw is.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var le=this.ctx.transform.applyToPoint(new l(fe,ve));this.path.push({type:"mt",x:le.x,y:le.y}),this.ctx.lastPoint=new l(fe,ve)},y.prototype.closePath=function(){var fe=new l(0,0),ve=0;for(ve=this.path.length-1;ve!==-1;ve--)if(this.path[ve].type==="begin"&&Co(this.path[ve+1])==="object"&&typeof this.path[ve+1].x=="number"){fe=new l(this.path[ve+1].x,this.path[ve+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(fe.x,fe.y)},y.prototype.lineTo=function(fe,ve){if(isNaN(fe)||isNaN(ve))throw is.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var le=this.ctx.transform.applyToPoint(new l(fe,ve));this.path.push({type:"lt",x:le.x,y:le.y}),this.ctx.lastPoint=new l(le.x,le.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),z.call(this,null,!0)},y.prototype.quadraticCurveTo=function(fe,ve,le,ye){if(isNaN(le)||isNaN(ye)||isNaN(fe)||isNaN(ve))throw is.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Se=this.ctx.transform.applyToPoint(new l(le,ye)),Be=this.ctx.transform.applyToPoint(new l(fe,ve));this.path.push({type:"qct",x1:Be.x,y1:Be.y,x:Se.x,y:Se.y}),this.ctx.lastPoint=new l(Se.x,Se.y)},y.prototype.bezierCurveTo=function(fe,ve,le,ye,Se,Be){if(isNaN(Se)||isNaN(Be)||isNaN(fe)||isNaN(ve)||isNaN(le)||isNaN(ye))throw is.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ve=this.ctx.transform.applyToPoint(new l(Se,Be)),tt=this.ctx.transform.applyToPoint(new l(fe,ve)),ht=this.ctx.transform.applyToPoint(new l(le,ye));this.path.push({type:"bct",x1:tt.x,y1:tt.y,x2:ht.x,y2:ht.y,x:Ve.x,y:Ve.y}),this.ctx.lastPoint=new l(Ve.x,Ve.y)},y.prototype.arc=function(fe,ve,le,ye,Se,Be){if(isNaN(fe)||isNaN(ve)||isNaN(le)||isNaN(ye)||isNaN(Se))throw is.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Be=!!Be,!this.ctx.transform.isIdentity){var Ve=this.ctx.transform.applyToPoint(new l(fe,ve));fe=Ve.x,ve=Ve.y;var tt=this.ctx.transform.applyToPoint(new l(0,le)),ht=this.ctx.transform.applyToPoint(new l(0,0));le=Math.sqrt(Math.pow(tt.x-ht.x,2)+Math.pow(tt.y-ht.y,2))}Math.abs(Se-ye)>=2*Math.PI&&(ye=0,Se=2*Math.PI),this.path.push({type:"arc",x:fe,y:ve,radius:le,startAngle:ye,endAngle:Se,counterclockwise:Be})},y.prototype.arcTo=function(fe,ve,le,ye,Se){throw new Error("arcTo not implemented.")},y.prototype.rect=function(fe,ve,le,ye){if(isNaN(fe)||isNaN(ve)||isNaN(le)||isNaN(ye))throw is.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(fe,ve),this.lineTo(fe+le,ve),this.lineTo(fe+le,ve+ye),this.lineTo(fe,ve+ye),this.lineTo(fe,ve),this.lineTo(fe+le,ve),this.lineTo(fe,ve)},y.prototype.fillRect=function(fe,ve,le,ye){if(isNaN(fe)||isNaN(ve)||isNaN(le)||isNaN(ye))throw is.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var Se={};this.lineCap!=="butt"&&(Se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(fe,ve,le,ye),this.fill(),Se.hasOwnProperty("lineCap")&&(this.lineCap=Se.lineCap),Se.hasOwnProperty("lineJoin")&&(this.lineJoin=Se.lineJoin)}},y.prototype.strokeRect=function(fe,ve,le,ye){if(isNaN(fe)||isNaN(ve)||isNaN(le)||isNaN(ye))throw is.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(fe,ve,le,ye),this.stroke())},y.prototype.clearRect=function(fe,ve,le,ye){if(isNaN(fe)||isNaN(ve)||isNaN(le)||isNaN(ye))throw is.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(fe,ve,le,ye))},y.prototype.save=function(fe){fe=typeof fe!="boolean"||fe;for(var ve=this.pdf.internal.getCurrentPageInfo().pageNumber,le=0;le<this.pdf.internal.getNumberOfPages();le++)this.pdf.setPage(le+1),this.pdf.internal.out("q");if(this.pdf.setPage(ve),fe){this.ctx.fontSize=this.pdf.internal.getFontSize();var ye=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ye}},y.prototype.restore=function(fe){fe=typeof fe!="boolean"||fe;for(var ve=this.pdf.internal.getCurrentPageInfo().pageNumber,le=0;le<this.pdf.internal.getNumberOfPages();le++)this.pdf.setPage(le+1),this.pdf.internal.out("Q");this.pdf.setPage(ve),fe&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(fe){var ve,le,ye,Se;if(fe.isCanvasGradient===!0&&(fe=fe.getColor()),!fe)return{r:0,g:0,b:0,a:0,style:fe};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(fe))ve=0,le=0,ye=0,Se=0;else{var Be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(fe);if(Be!==null)ve=parseInt(Be[1]),le=parseInt(Be[2]),ye=parseInt(Be[3]),Se=1;else if((Be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(fe))!==null)ve=parseInt(Be[1]),le=parseInt(Be[2]),ye=parseInt(Be[3]),Se=parseFloat(Be[4]);else{if(Se=1,typeof fe=="string"&&fe.charAt(0)!=="#"){var Ve=new Kz(fe);fe=Ve.ok?Ve.toHex():"#000000"}fe.length===4?(ve=fe.substring(1,2),ve+=ve,le=fe.substring(2,3),le+=le,ye=fe.substring(3,4),ye+=ye):(ve=fe.substring(1,3),le=fe.substring(3,5),ye=fe.substring(5,7)),ve=parseInt(ve,16),le=parseInt(le,16),ye=parseInt(ye,16)}}return{r:ve,g:le,b:ye,a:Se,style:fe}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(fe,ve,le,ye){if(isNaN(ve)||isNaN(le)||typeof fe!="string")throw is.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ye=isNaN(ye)?void 0:ye,!b.call(this)){var Se=pe(this.ctx.transform.rotation),Be=this.ctx.transform.scaleX;re.call(this,{text:fe,x:ve,y:le,scale:Be,angle:Se,align:this.textAlign,maxWidth:ye})}},y.prototype.strokeText=function(fe,ve,le,ye){if(isNaN(ve)||isNaN(le)||typeof fe!="string")throw is.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){ye=isNaN(ye)?void 0:ye;var Se=pe(this.ctx.transform.rotation),Be=this.ctx.transform.scaleX;re.call(this,{text:fe,x:ve,y:le,scale:Be,renderingMode:"stroke",angle:Se,align:this.textAlign,maxWidth:ye})}},y.prototype.measureText=function(fe){if(typeof fe!="string")throw is.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ve=this.pdf,le=this.pdf.internal.scaleFactor,ye=ve.internal.getFontSize(),Se=ve.getStringUnitWidth(fe)*ye/ve.internal.scaleFactor,Be=function(Ve){var tt=(Ve=Ve||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return tt}}),this};return new Be({width:Se*=Math.round(96*le/72*1e4)/1e4})},y.prototype.scale=function(fe,ve){if(isNaN(fe)||isNaN(ve))throw is.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var le=new h(fe,0,0,ve,0,0);this.ctx.transform=this.ctx.transform.multiply(le)},y.prototype.rotate=function(fe){if(isNaN(fe))throw is.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ve=new h(Math.cos(fe),Math.sin(fe),-Math.sin(fe),Math.cos(fe),0,0);this.ctx.transform=this.ctx.transform.multiply(ve)},y.prototype.translate=function(fe,ve){if(isNaN(fe)||isNaN(ve))throw is.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var le=new h(1,0,0,1,fe,ve);this.ctx.transform=this.ctx.transform.multiply(le)},y.prototype.transform=function(fe,ve,le,ye,Se,Be){if(isNaN(fe)||isNaN(ve)||isNaN(le)||isNaN(ye)||isNaN(Se)||isNaN(Be))throw is.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ve=new h(fe,ve,le,ye,Se,Be);this.ctx.transform=this.ctx.transform.multiply(Ve)},y.prototype.setTransform=function(fe,ve,le,ye,Se,Be){fe=isNaN(fe)?1:fe,ve=isNaN(ve)?0:ve,le=isNaN(le)?0:le,ye=isNaN(ye)?1:ye,Se=isNaN(Se)?0:Se,Be=isNaN(Be)?0:Be,this.ctx.transform=new h(fe,ve,le,ye,Se,Be)};var M=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(fe,ve,le,ye,Se,Be,Ve,tt,ht){var it=this.pdf.getImageProperties(fe),gt=1,$t=1,He=1,Ct=1;ye!==void 0&&tt!==void 0&&(He=tt/ye,Ct=ht/Se,gt=it.width/ye*tt/ye,$t=it.height/Se*ht/Se),Be===void 0&&(Be=ve,Ve=le,ve=0,le=0),ye!==void 0&&tt===void 0&&(tt=ye,ht=Se),ye===void 0&&tt===void 0&&(tt=it.width,ht=it.height);for(var Xe,tn=this.ctx.transform.decompose(),Kt=pe(tn.rotate.shx),Jt=new h,Ht=(Jt=(Jt=(Jt=Jt.multiply(tn.translate)).multiply(tn.skew)).multiply(tn.scale)).applyToRectangle(new a(Be-ve*He,Ve-le*Ct,ye*gt,Se*$t)),$e=P.call(this,Ht),Ee=[],_t=0;_t<$e.length;_t+=1)Ee.indexOf($e[_t])===-1&&Ee.push($e[_t]);if(B(Ee),this.autoPaging)for(var jt=Ee[0],vt=Ee[Ee.length-1],Pt=jt;Pt<vt+1;Pt++){this.pdf.setPage(Pt);var vn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],hn=Pt===1?this.posY+this.margin[0]:this.margin[0],pn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ft=Pt===1?0:pn+(Pt-2)*nn;if(this.ctx.clip_path.length!==0){var In=this.path;Xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Xe,this.posX+this.margin[3],-Ft+hn+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=In}var Pn=JSON.parse(JSON.stringify(Ht));Pn=k([Pn],this.posX+this.margin[3],-Ft+hn+this.ctx.prevPageLastElemOffset)[0];var ir=(Pt>jt||Pt<vt)&&M.call(this);ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vn,nn,null).clip().discardPath()),this.pdf.addImage(fe,"JPEG",Pn.x,Pn.y,Pn.w,Pn.h,null,null,Kt),ir&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(fe,"JPEG",Ht.x,Ht.y,Ht.w,Ht.h,null,null,Kt)};var P=function(fe,ve,le){var ye=[];ve=ve||this.pdf.internal.pageSize.width,le=le||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Se=this.posY+this.ctx.prevPageLastElemOffset;switch(fe.type){default:case"mt":case"lt":ye.push(Math.floor((fe.y+Se)/le)+1);break;case"arc":ye.push(Math.floor((fe.y+Se-fe.radius)/le)+1),ye.push(Math.floor((fe.y+Se+fe.radius)/le)+1);break;case"qct":var Be=De(this.ctx.lastPoint.x,this.ctx.lastPoint.y,fe.x1,fe.y1,fe.x,fe.y);ye.push(Math.floor((Be.y+Se)/le)+1),ye.push(Math.floor((Be.y+Be.h+Se)/le)+1);break;case"bct":var Ve=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,fe.x1,fe.y1,fe.x2,fe.y2,fe.x,fe.y);ye.push(Math.floor((Ve.y+Se)/le)+1),ye.push(Math.floor((Ve.y+Ve.h+Se)/le)+1);break;case"rect":ye.push(Math.floor((fe.y+Se)/le)+1),ye.push(Math.floor((fe.y+fe.h+Se)/le)+1)}for(var tt=0;tt<ye.length;tt+=1)for(;this.pdf.internal.getNumberOfPages()<ye[tt];)C.call(this);return ye},C=function(){var fe=this.fillStyle,ve=this.strokeStyle,le=this.font,ye=this.lineCap,Se=this.lineWidth,Be=this.lineJoin;this.pdf.addPage(),this.fillStyle=fe,this.strokeStyle=ve,this.font=le,this.lineCap=ye,this.lineWidth=Se,this.lineJoin=Be},k=function(fe,ve,le){for(var ye=0;ye<fe.length;ye++)switch(fe[ye].type){case"bct":fe[ye].x2+=ve,fe[ye].y2+=le;case"qct":fe[ye].x1+=ve,fe[ye].y1+=le;case"mt":case"lt":case"arc":default:fe[ye].x+=ve,fe[ye].y+=le}return fe},B=function(fe){return fe.sort(function(ve,le){return ve-le})},z=function(fe,ve){for(var le,ye,Se=this.fillStyle,Be=this.strokeStyle,Ve=this.lineCap,tt=this.lineWidth,ht=Math.abs(tt*this.ctx.transform.scaleX),it=this.lineJoin,gt=JSON.parse(JSON.stringify(this.path)),$t=JSON.parse(JSON.stringify(this.path)),He=[],Ct=0;Ct<$t.length;Ct++)if($t[Ct].x!==void 0)for(var Xe=P.call(this,$t[Ct]),tn=0;tn<Xe.length;tn+=1)He.indexOf(Xe[tn])===-1&&He.push(Xe[tn]);for(var Kt=0;Kt<He.length;Kt++)for(;this.pdf.internal.getNumberOfPages()<He[Kt];)C.call(this);if(B(He),this.autoPaging)for(var Jt=He[0],Ht=He[He.length-1],$e=Jt;$e<Ht+1;$e++){this.pdf.setPage($e),this.fillStyle=Se,this.strokeStyle=Be,this.lineCap=Ve,this.lineWidth=ht,this.lineJoin=it;var Ee=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=$e===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pt=$e===1?0:jt+($e-2)*vt;if(this.ctx.clip_path.length!==0){var vn=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(le,this.posX+this.margin[3],-Pt+_t+this.ctx.prevPageLastElemOffset),q.call(this,fe,!0),this.path=vn}if(ye=JSON.parse(JSON.stringify(gt)),this.path=k(ye,this.posX+this.margin[3],-Pt+_t+this.ctx.prevPageLastElemOffset),ve===!1||$e===0){var hn=($e>Jt||$e<Ht)&&M.call(this);hn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ee,vt,null).clip().discardPath()),q.call(this,fe,ve),hn&&this.pdf.restoreGraphicsState()}this.lineWidth=tt}else this.lineWidth=ht,q.call(this,fe,ve),this.lineWidth=tt;this.path=gt},q=function(fe,ve){if((fe!=="stroke"||ve||!A.call(this))&&(fe==="stroke"||ve||!b.call(this))){for(var le,ye,Se=[],Be=this.path,Ve=0;Ve<Be.length;Ve++){var tt=Be[Ve];switch(tt.type){case"begin":Se.push({begin:!0});break;case"close":Se.push({close:!0});break;case"mt":Se.push({start:tt,deltas:[],abs:[]});break;case"lt":var ht=Se.length;if(Be[Ve-1]&&!isNaN(Be[Ve-1].x)&&(le=[tt.x-Be[Ve-1].x,tt.y-Be[Ve-1].y],ht>0)){for(;ht>=0;ht--)if(Se[ht-1].close!==!0&&Se[ht-1].begin!==!0){Se[ht-1].deltas.push(le),Se[ht-1].abs.push(tt);break}}break;case"bct":le=[tt.x1-Be[Ve-1].x,tt.y1-Be[Ve-1].y,tt.x2-Be[Ve-1].x,tt.y2-Be[Ve-1].y,tt.x-Be[Ve-1].x,tt.y-Be[Ve-1].y],Se[Se.length-1].deltas.push(le);break;case"qct":var it=Be[Ve-1].x+2/3*(tt.x1-Be[Ve-1].x),gt=Be[Ve-1].y+2/3*(tt.y1-Be[Ve-1].y),$t=tt.x+2/3*(tt.x1-tt.x),He=tt.y+2/3*(tt.y1-tt.y),Ct=tt.x,Xe=tt.y;le=[it-Be[Ve-1].x,gt-Be[Ve-1].y,$t-Be[Ve-1].x,He-Be[Ve-1].y,Ct-Be[Ve-1].x,Xe-Be[Ve-1].y],Se[Se.length-1].deltas.push(le);break;case"arc":Se.push({deltas:[],abs:[],arc:!0}),Array.isArray(Se[Se.length-1].abs)&&Se[Se.length-1].abs.push(tt)}}ye=ve?null:fe==="stroke"?"stroke":"fill";for(var tn=!1,Kt=0;Kt<Se.length;Kt++)if(Se[Kt].arc)for(var Jt=Se[Kt].abs,Ht=0;Ht<Jt.length;Ht++){var $e=Jt[Ht];$e.type==="arc"?Y.call(this,$e.x,$e.y,$e.radius,$e.startAngle,$e.endAngle,$e.counterclockwise,void 0,ve,!tn):ie.call(this,$e.x,$e.y),tn=!0}else if(Se[Kt].close===!0)this.pdf.internal.out("h"),tn=!1;else if(Se[Kt].begin!==!0){var Ee=Se[Kt].start.x,_t=Se[Kt].start.y;se.call(this,Se[Kt].deltas,Ee,_t),tn=!0}ye&&Z.call(this,ye),ve&&j.call(this)}},V=function(fe){var ve=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,le=ve*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return fe-le;case"top":return fe+ve-le;case"hanging":return fe+ve-2*le;case"middle":return fe+ve/2-le;case"ideographic":return fe;case"alphabetic":default:return fe}},W=function(fe){return fe+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var fe=function(){};return fe.colorStops=[],fe.addColorStop=function(ve,le){this.colorStops.push([ve,le])},fe.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},fe.isCanvasGradient=!0,fe},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Y=function(fe,ve,le,ye,Se,Be,Ve,tt,ht){for(var it=ue.call(this,le,ye,Se,Be),gt=0;gt<it.length;gt++){var $t=it[gt];gt===0&&(ht?K.call(this,$t.x1+fe,$t.y1+ve):ie.call(this,$t.x1+fe,$t.y1+ve)),de.call(this,fe,ve,$t.x2,$t.y2,$t.x3,$t.y3,$t.x4,$t.y4)}tt?j.call(this):Z.call(this,Ve)},Z=function(fe){switch(fe){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},K=function(fe,ve){this.pdf.internal.out(n(fe)+" "+r(ve)+" m")},re=function(fe){var ve;switch(fe.align){case"right":case"end":ve="right";break;case"center":ve="center";break;case"left":case"start":default:ve="left"}var le=this.pdf.getTextDimensions(fe.text),ye=V.call(this,fe.y),Se=W.call(this,ye)-le.h,Be=this.ctx.transform.applyToPoint(new l(fe.x,ye)),Ve=this.ctx.transform.decompose(),tt=new h;tt=(tt=(tt=tt.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale);for(var ht,it,gt,$t=this.ctx.transform.applyToRectangle(new a(fe.x,ye,le.w,le.h)),He=tt.applyToRectangle(new a(fe.x,Se,le.w,le.h)),Ct=P.call(this,He),Xe=[],tn=0;tn<Ct.length;tn+=1)Xe.indexOf(Ct[tn])===-1&&Xe.push(Ct[tn]);if(B(Xe),this.autoPaging)for(var Kt=Xe[0],Jt=Xe[Xe.length-1],Ht=Kt;Ht<Jt+1;Ht++){this.pdf.setPage(Ht);var $e=Ht===1?this.posY+this.margin[0]:this.margin[0],Ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[2],jt=_t-this.margin[0],vt=this.pdf.internal.pageSize.width-this.margin[1],Pt=vt-this.margin[3],vn=Ht===1?0:Ee+(Ht-2)*jt;if(this.ctx.clip_path.length!==0){var hn=this.path;ht=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(ht,this.posX+this.margin[3],-1*vn+$e),q.call(this,"fill",!0),this.path=hn}var pn=k([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-vn+$e+this.ctx.prevPageLastElemOffset)[0];fe.scale>=.01&&(it=this.pdf.internal.getFontSize(),this.pdf.setFontSize(it*fe.scale),gt=this.lineWidth,this.lineWidth=gt*fe.scale);var nn=this.autoPaging!=="text";if(nn||pn.y+pn.h<=_t){if(nn||pn.y>=$e&&pn.x<=vt){var Ft=nn?fe.text:this.pdf.splitTextToSize(fe.text,fe.maxWidth||vt-pn.x)[0],In=k([JSON.parse(JSON.stringify($t))],this.posX+this.margin[3],-vn+$e+this.ctx.prevPageLastElemOffset)[0],Pn=nn&&(Ht>Kt||Ht<Jt)&&M.call(this);Pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,jt,null).clip().discardPath()),this.pdf.text(Ft,In.x,In.y,{angle:fe.angle,align:ve,renderingMode:fe.renderingMode}),Pn&&this.pdf.restoreGraphicsState()}}else pn.y<_t&&(this.ctx.prevPageLastElemOffset+=_t-pn.y);fe.scale>=.01&&(this.pdf.setFontSize(it),this.lineWidth=gt)}else fe.scale>=.01&&(it=this.pdf.internal.getFontSize(),this.pdf.setFontSize(it*fe.scale),gt=this.lineWidth,this.lineWidth=gt*fe.scale),this.pdf.text(fe.text,Be.x+this.posX,Be.y+this.posY,{angle:fe.angle,align:ve,renderingMode:fe.renderingMode,maxWidth:fe.maxWidth}),fe.scale>=.01&&(this.pdf.setFontSize(it),this.lineWidth=gt)},ie=function(fe,ve,le,ye){le=le||0,ye=ye||0,this.pdf.internal.out(n(fe+le)+" "+r(ve+ye)+" l")},se=function(fe,ve,le){return this.pdf.lines(fe,ve,le,null,null)},de=function(fe,ve,le,ye,Se,Be,Ve,tt){this.pdf.internal.out([e(i(le+fe)),e(o(ye+ve)),e(i(Se+fe)),e(o(Be+ve)),e(i(Ve+fe)),e(o(tt+ve)),"c"].join(" "))},ue=function(fe,ve,le,ye){for(var Se=2*Math.PI,Be=Math.PI/2;ve>le;)ve-=Se;var Ve=Math.abs(le-ve);Ve<Se&&ye&&(Ve=Se-Ve);for(var tt=[],ht=ye?-1:1,it=ve;Ve>1e-5;){var gt=it+ht*Math.min(Ve,Be);tt.push(Te.call(this,fe,it,gt)),Ve-=Math.abs(gt-it),it=gt}return tt},Te=function(fe,ve,le){var ye=(le-ve)/2,Se=fe*Math.cos(ye),Be=fe*Math.sin(ye),Ve=Se,tt=-Be,ht=Ve*Ve+tt*tt,it=ht+Ve*Se+tt*Be,gt=4/3*(Math.sqrt(2*ht*it)-it)/(Ve*Be-tt*Se),$t=Ve-gt*tt,He=tt+gt*Ve,Ct=$t,Xe=-He,tn=ye+ve,Kt=Math.cos(tn),Jt=Math.sin(tn);return{x1:fe*Math.cos(ve),y1:fe*Math.sin(ve),x2:$t*Kt-He*Jt,y2:$t*Jt+He*Kt,x3:Ct*Kt-Xe*Jt,y3:Ct*Jt+Xe*Kt,x4:fe*Math.cos(le),y4:fe*Math.sin(le)}},pe=function(fe){return 180*fe/Math.PI},De=function(fe,ve,le,ye,Se,Be){var Ve=fe+.5*(le-fe),tt=ve+.5*(ye-ve),ht=Se+.5*(le-Se),it=Be+.5*(ye-Be),gt=Math.min(fe,Se,Ve,ht),$t=Math.max(fe,Se,Ve,ht),He=Math.min(ve,Be,tt,it),Ct=Math.max(ve,Be,tt,it);return new a(gt,He,$t-gt,Ct-He)},me=function(fe,ve,le,ye,Se,Be,Ve,tt){var ht,it,gt,$t,He,Ct,Xe,tn,Kt,Jt,Ht,$e,Ee,_t,jt=le-fe,vt=ye-ve,Pt=Se-le,vn=Be-ye,hn=Ve-Se,pn=tt-Be;for(it=0;it<41;it++)Kt=(Xe=(gt=fe+(ht=it/40)*jt)+ht*((He=le+ht*Pt)-gt))+ht*(He+ht*(Se+ht*hn-He)-Xe),Jt=(tn=($t=ve+ht*vt)+ht*((Ct=ye+ht*vn)-$t))+ht*(Ct+ht*(Be+ht*pn-Ct)-tn),it==0?(Ht=Kt,$e=Jt,Ee=Kt,_t=Jt):(Ht=Math.min(Ht,Kt),$e=Math.min($e,Jt),Ee=Math.max(Ee,Kt),_t=Math.max(_t,Jt));return new a(Math.round(Ht),Math.round($e),Math.round(Ee-Ht),Math.round(_t-$e))},Me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var fe,ve,le=(fe=this.ctx.lineDash,ve=this.ctx.lineDashOffset,JSON.stringify({lineDash:fe,lineDashOffset:ve}));this.prevLineDash!==le&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=le)}}})(ki.API),function(t){var e=function(o){var l,a,h,f,v,y,w,b,A,M;for(a=[],h=0,f=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;f>h;h+=4)(v=(o.charCodeAt(h)<<24)+(o.charCodeAt(h+1)<<16)+(o.charCodeAt(h+2)<<8)+o.charCodeAt(h+3))!==0?(y=(v=((v=((v=((v=(v-(M=v%85))/85)-(A=v%85))/85)-(b=v%85))/85)-(w=v%85))/85)%85,a.push(y+33,w+33,b+33,A+33,M+33)):a.push(122);return function(P,C){for(var k=C;k>0;k--)P.pop()}(a,l.length),String.fromCharCode.apply(String,a)+"~>"},n=function(o){var l,a,h,f,v,y=String,w="length",b=255,A="charCodeAt",M="slice",P="replace";for(o[M](-2),o=o[M](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),h=[],f=0,v=(o+=l="uuuuu"[M](o[w]%5||5))[w];v>f;f+=5)a=52200625*(o[A](f)-33)+614125*(o[A](f+1)-33)+7225*(o[A](f+2)-33)+85*(o[A](f+3)-33)+(o[A](f+4)-33),h.push(b&a>>24,b&a>>16,b&a>>8,b&a);return function(C,k){for(var B=k;B>0;B--)C.pop()}(h,l[w]),y.fromCharCode.apply(y,h)},r=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var a="",h=0;h<o.length;h+=2)a+=String.fromCharCode("0x"+(o[h]+o[h+1]));return a},i=function(o){for(var l=new Uint8Array(o.length),a=o.length;a--;)l[a]=o.charCodeAt(a);return o=(l=XC(l)).reduce(function(h,f){return h+String.fromCharCode(f)},"")};t.processDataByFilters=function(o,l){var a=0,h=o||"",f=[];for(typeof(l=l||[])=="string"&&(l=[l]),a=0;a<l.length;a+=1)switch(l[a]){case"ASCII85Decode":case"/ASCII85Decode":h=n(h),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=e(h),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=r(h),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=i(h),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[a]+'" is not implemented')}return{data:h,reverseChain:f.reverse().join(" ")}}}(ki.API),function(t){t.loadFile=function(e,n,r){return function(i,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var a=void 0;try{a=function(h,f,v){var y=new XMLHttpRequest,w=0,b=function(A){var M=A.length,P=[],C=String.fromCharCode;for(w=0;w<M;w+=1)P.push(C(255&A.charCodeAt(w)));return P.join("")};if(y.open("GET",h,!f),y.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(y.onload=function(){y.status===200?v(b(this.responseText)):v(void 0)}),y.send(null),f&&y.status===200)return b(y.responseText)}(i,o,l)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(ki.API),function(t){function e(){return(Fi.html2canvas?Promise.resolve(Fi.html2canvas):GC(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(Fi.DOMPurify?Promise.resolve(Fi.DOMPurify):GC(()=>import("./purify.es-Ci5xwkH_.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var r=function(l){var a=Co(l);return a==="undefined"?"undefined":a==="string"||l instanceof String?"string":a==="number"||l instanceof Number?"number":a==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(l,a){var h=document.createElement(l);for(var f in a.className&&(h.className=a.className),a.innerHTML&&a.dompurify&&(h.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)h.style[f]=a.style[f];return h},o=function l(a){var h=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),f=l.convert(Promise.resolve(),h);return f=(f=f.setProgress(1,l,1,[l])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,a){return l.__proto__=a||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,a){return this.then(function(){switch(a=a||function(h){switch(r(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(n).then(function(h){return this.set({src:i("div",{innerHTML:l,dompurify:h})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function h(f,v){for(var y=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),w=f.firstChild;w;w=w.nextSibling)v!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||y.appendChild(h(w,v));return f.nodeType===1&&(f.nodeName==="CANVAS"?(y.width=f.width,y.height=f.height,y.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(y.value=f.value),y.addEventListener("load",function(){y.scrollTop=f.scrollTop,y.scrollLeft=f.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(a){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,a(this.prop.container,h)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(a){var h=this.opt.jsPDF,f=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=f,f)for(var w=0;w<f.length;++w){var b=f[w],A=b.src.find(function(M){return M.format==="truetype"});A&&h.addFont(A.url,b.ref.name,b.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,h.context2d.save(!0),a(this.prop.container,y)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,a,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(l,a):this.outputPdf(l,a)},o.prototype.outputPdf=function(l,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,a)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(r(l)!=="object")return this;var a=Object.keys(l||{}).map(function(h){if(h in o.template.prop)return function(){this.prop[h]=l[h]};switch(h){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[h]=l[h]}}},this);return this.then(function(){return this.thenList(a)})},o.prototype.get=function(l,a){return this.then(function(){var h=l in o.template.prop?this.prop[l]:this.opt[l];return a?a(h):h})},o.prototype.setMargin=function(l){return this.then(function(){switch(r(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function a(h,f){return Math.floor(h*f/72*96)}return this.then(function(){(l=l||ki.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:a(l.inner.width,l.k),height:a(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,a,h,f){return l!=null&&(this.progress.val=l),a!=null&&(this.progress.state=a),h!=null&&(this.progress.n=h),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,a,h,f){return this.setProgress(l?this.progress.val+l:null,a||null,h?this.progress.n+h:null,f?this.progress.stack.concat(f):null)},o.prototype.then=function(l,a){var h=this;return this.thenCore(l,a,function(f,v){return h.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(y){return h.updateProgress(null,f),y}).then(f,v).then(function(y){return h.updateProgress(1),y})})},o.prototype.thenCore=function(l,a,h){h=h||Promise.prototype.then,l&&(l=l.bind(this)),a&&(a=a.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),v=h.call(f,l,a);return o.convert(v,this.__proto__)},o.prototype.thenExternal=function(l,a){return Promise.prototype.then.call(this,l,a)},o.prototype.thenList=function(l){var a=this;return l.forEach(function(h){a=a.thenCore(h)}),a},o.prototype.catch=function(l){l&&(l=l.bind(this));var a=Promise.prototype.catch.call(this,l);return o.convert(a,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,ki.getPageSize=function(l,a,h){if(Co(l)==="object"){var f=l;l=f.orientation,a=f.unit||a,h=f.format||h}a=a||"mm",h=h||"a4",l=(""+(l||"P")).toLowerCase();var v,y=(""+h).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+a}var b,A=0,M=0;if(w.hasOwnProperty(y))A=w[y][1]/v,M=w[y][0]/v;else try{A=h[1],M=h[0]}catch{throw new Error("Invalid format: "+h)}if(l==="p"||l==="portrait")l="p",M>A&&(b=M,M=A,A=b);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",A>M&&(b=M,M=A,A=b)}return{width:M,height:A,unit:a,k:v,orientation:l}},t.html=function(l,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(e3):null;var h=new o(a);return a.worker?h:h.from(l).doCallback()}}(ki.API),ki.API.addJS=function(t){return HI=t,this.internal.events.subscribe("postPutResources",function(){o2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(o2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),qI=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+HI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){o2!==void 0&&qI!==void 0&&this.internal.out("/Names <</JavaScript "+o2+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),o=0;o<i.length;o++){var l=i[o],a=r.exec(l);if(a!=null){var h=a[1];n.internal.newObjectDeferredBegin(h,!1)}n.internal.write(l)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,v=[];for(o=0;o<f;o++){var y=n.internal.newObject();v.push(y);var w=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var b=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<v.length;o++)n.internal.write("(page_"+(o+1)+")"+v[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+b+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,o){var l={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(l),l},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var l=r.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var a=this.count=this.count_r({count:0},l);if(a>0&&this.line("/Count "+a),l.options&&l.options.pageNumber){var h=n.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])}(ki.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,o,l,a){var h,f=this.decode.DCT_DECODE,v=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=l||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(h=function(y){for(var w,b=256*y.charCodeAt(4)+y.charCodeAt(5),A=y.length,M={width:0,height:0,numcomponents:1},P=4;P<A;P+=2){if(P+=b,e.indexOf(y.charCodeAt(P+1))!==-1){w=256*y.charCodeAt(P+5)+y.charCodeAt(P+6),M={width:256*y.charCodeAt(P+7)+y.charCodeAt(P+8),height:w,numcomponents:y.charCodeAt(P+9)};break}b=256*y.charCodeAt(P+2)+y.charCodeAt(P+3)}return M}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}v={data:n,width:h.width,height:h.height,colorSpace:a,bitsPerComponent:8,filter:f,index:r,alias:i}}return v}}(ki.API);var jv,s2,$I,WI,XI,_Z=function(){var t,e,n;function r(o){var l,a,h,f,v,y,w,b,A,M,P,C,k,B;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(l=this.readUInt32(),A=(function(){var z,q;for(q=[],z=0;z<4;++z)q.push(String.fromCharCode(this.data[this.pos++]));return q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),f=this.readUInt16()||100,y.delay=1e3*v/f,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(A==="fdAT"&&(this.pos+=4,l-=4),o=(y!=null?y.data:void 0)||this.imgData,C=0;0<=l?C<l:C>l;0<=l?++C:--C)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((M=h-this.transparency.indexed.length)>0)for(k=0;0<=M?k<M:k>M;0<=M?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":w=(P=this.read(l)).indexOf(0),b=String.fromCharCode.apply(String,P.slice(0,w)),this.text[b]=String.fromCharCode.apply(String,P.slice(w+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(B=this.colorType)===4||B===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var l,a;for(a=[],l=0;0<=o?l<o:l>o;0<=o?++l:--l)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var l=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*l),h=0,f=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function v(y,w,b,A){var M,P,C,k,B,z,q,V,W,Y,Z,j,K,re,ie,se,de,ue,Te,pe,De,me=Math.ceil((f.width-y)/b),Me=Math.ceil((f.height-w)/A),fe=f.width==me&&f.height==Me;for(re=l*me,j=fe?a:new Uint8Array(re*Me),z=o.length,K=0,P=0;K<Me&&h<z;){switch(o[h++]){case 0:for(k=de=0;de<re;k=de+=1)j[P++]=o[h++];break;case 1:for(k=ue=0;ue<re;k=ue+=1)M=o[h++],B=k<l?0:j[P-l],j[P++]=(M+B)%256;break;case 2:for(k=Te=0;Te<re;k=Te+=1)M=o[h++],C=(k-k%l)/l,ie=K&&j[(K-1)*re+C*l+k%l],j[P++]=(ie+M)%256;break;case 3:for(k=pe=0;pe<re;k=pe+=1)M=o[h++],C=(k-k%l)/l,B=k<l?0:j[P-l],ie=K&&j[(K-1)*re+C*l+k%l],j[P++]=(M+Math.floor((B+ie)/2))%256;break;case 4:for(k=De=0;De<re;k=De+=1)M=o[h++],C=(k-k%l)/l,B=k<l?0:j[P-l],K===0?ie=se=0:(ie=j[(K-1)*re+C*l+k%l],se=C&&j[(K-1)*re+(C-1)*l+k%l]),q=B+ie-se,V=Math.abs(q-B),Y=Math.abs(q-ie),Z=Math.abs(q-se),W=V<=Y&&V<=Z?B:Y<=Z?ie:se,j[P++]=(M+W)%256;break;default:throw new Error("Invalid filter algorithm: "+o[h-1])}if(!fe){var ve=((w+K*A)*f.width+y)*l,le=K*re;for(k=0;k<me;k+=1){for(var ye=0;ye<l;ye+=1)a[ve++]=j[le++];ve+=(b-1)*l}}K++}}return o=KX(o),f.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),a},r.prototype.decodePalette=function(){var o,l,a,h,f,v,y,w,b;for(a=this.palette,v=this.transparency.indexed||[],f=new Uint8Array((v.length||0)+a.length),h=0,o=0,l=y=0,w=a.length;y<w;l=y+=3)f[h++]=a[l],f[h++]=a[l+1],f[h++]=a[l+2],f[h++]=(b=v[o++])!=null?b:255;return f},r.prototype.copyToImageData=function(o,l){var a,h,f,v,y,w,b,A,M,P,C;if(h=this.colors,M=null,a=this.hasAlphaChannel,this.palette.length&&(M=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),h=4,a=!0),A=(f=o.data||o).length,y=M||l,v=w=0,h===1)for(;v<A;)b=M?4*l[v/4]:w,P=y[b++],f[v++]=P,f[v++]=P,f[v++]=P,f[v++]=a?y[b++]:255,w=b;else for(;v<A;)b=M?4*l[v/4]:w,f[v++]=y[b++],f[v++]=y[b++],f[v++]=y[b++],f[v++]=a?y[b++]:255,w=b},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(Fi)==="[object Window]"){try{e=Fi.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(o){var l;if(i()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(l=new Image).src=e.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var l,a,h,f,v,y,w,b;if(this.animation){for(b=[],a=v=0,y=(w=this.animation.frames).length;v<y;a=++v)l=w[a],h=o.createImageData(l.width,l.height),f=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(h,f),l.imageData=h,b.push(l.image=t(h));return b}},r.prototype.renderFrame=function(o,l){var a,h,f;return a=(h=this.animation.frames)[l],f=h[l-1],l===0&&o.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?o.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&o.putImageData(f.imageData,f.xOffset,f.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(o){var l,a,h,f,v,y,w=this;return a=0,y=this.animation,f=y.numFrames,h=y.frames,v=y.numPlays,(l=function(){var b,A;if(b=a++%f,A=h[b],w.renderFrame(o,b),f>1&&a/f<v)return w.animation._timeout=setTimeout(l,A.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var l,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,l=o.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(a=l.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),l.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function bZ(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,l=1<<(7&i)+1;t[e++],t[e++];var a=null,h=null;o&&(a=e,h=l,e+=3*l);var f=!0,v=[],y=0,w=null,b=0,A=null;for(this.width=n,this.height=r;f&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,A=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((K=t[e++])>=0))throw Error("Invalid block size");if(K===0)break;e+=K}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var M=t[e++];y=t[e++]|t[e++]<<8,w=t[e++],(1&M)==0&&(w=null),b=M>>2&7,e++;break;case 254:for(;;){if(!((K=t[e++])>=0))throw Error("Invalid block size");if(K===0)break;e+=K}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var P=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,B=t[e++]|t[e++]<<8,z=t[e++],q=z>>6&1,V=1<<(7&z)+1,W=a,Y=h,Z=!1;z>>7&&(Z=!0,W=e,Y=V,e+=3*V);var j=e;for(e++;;){var K;if(!((K=t[e++])>=0))throw Error("Invalid block size");if(K===0)break;e+=K}v.push({x:P,y:C,width:k,height:B,has_local_palette:Z,palette_offset:W,palette_size:Y,data_offset:j,data_length:e-j,transparent_index:w,interlaced:!!q,delay:y,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return A},this.frameInfo=function(re){if(re<0||re>=v.length)throw new Error("Frame index out of range.");return v[re]},this.decodeAndBlitFrameBGRA=function(re,ie){var se=this.frameInfo(re),de=se.width*se.height,ue=new Uint8Array(de);ZI(t,se.data_offset,ue,de);var Te=se.palette_offset,pe=se.transparent_index;pe===null&&(pe=256);var De=se.width,me=n-De,Me=De,fe=4*(se.y*n+se.x),ve=4*((se.y+se.height)*n+se.x),le=fe,ye=4*me;se.interlaced===!0&&(ye+=4*n*7);for(var Se=8,Be=0,Ve=ue.length;Be<Ve;++Be){var tt=ue[Be];if(Me===0&&(Me=De,(le+=ye)>=ve&&(ye=4*me+4*n*(Se-1),le=fe+(De+me)*(Se<<1),Se>>=1)),tt===pe)le+=4;else{var ht=t[Te+3*tt],it=t[Te+3*tt+1],gt=t[Te+3*tt+2];ie[le++]=gt,ie[le++]=it,ie[le++]=ht,ie[le++]=255}--Me}},this.decodeAndBlitFrameRGBA=function(re,ie){var se=this.frameInfo(re),de=se.width*se.height,ue=new Uint8Array(de);ZI(t,se.data_offset,ue,de);var Te=se.palette_offset,pe=se.transparent_index;pe===null&&(pe=256);var De=se.width,me=n-De,Me=De,fe=4*(se.y*n+se.x),ve=4*((se.y+se.height)*n+se.x),le=fe,ye=4*me;se.interlaced===!0&&(ye+=4*n*7);for(var Se=8,Be=0,Ve=ue.length;Be<Ve;++Be){var tt=ue[Be];if(Me===0&&(Me=De,(le+=ye)>=ve&&(ye=4*me+4*n*(Se-1),le=fe+(De+me)*(Se<<1),Se>>=1)),tt===pe)le+=4;else{var ht=t[Te+3*tt],it=t[Te+3*tt+1],gt=t[Te+3*tt+2];ie[le++]=ht,ie[le++]=it,ie[le++]=gt,ie[le++]=255}--Me}}}function ZI(t,e,n,r){for(var i=t[e++],o=1<<i,l=o+1,a=l+1,h=i+1,f=(1<<h)-1,v=0,y=0,w=0,b=t[e++],A=new Int32Array(4096),M=null;;){for(;v<16&&b!==0;)y|=t[e++]<<v,v+=8,b===1?b=t[e++]:--b;if(v<h)break;var P=y&f;if(y>>=h,v-=h,P!==o){if(P===l)break;for(var C=P<a?P:M,k=0,B=C;B>o;)B=A[B]>>8,++k;var z=B;if(w+k+(C!==P?1:0)>r)return void is.log("Warning, gif stream longer than expected.");n[w++]=z;var q=w+=k;for(C!==P&&(n[w++]=z),B=C;k--;)B=A[B],n[--q]=255&B,B>>=8;M!==null&&a<4096&&(A[a++]=M<<8|z,a>=f+1&&h<12&&(++h,f=f<<1|1)),M=P}else a=l+1,f=(1<<(h=i+1))-1,M=null}return w!==r&&is.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bT(t){var e,n,r,i,o,l=Math.floor,a=new Array(64),h=new Array(64),f=new Array(64),v=new Array(64),y=new Array(65535),w=new Array(65535),b=new Array(64),A=new Array(64),M=[],P=0,C=7,k=new Array(64),B=new Array(64),z=new Array(64),q=new Array(256),V=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],K=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],re=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ie=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(fe,ve){for(var le=0,ye=0,Se=new Array,Be=1;Be<=16;Be++){for(var Ve=1;Ve<=fe[Be];Ve++)Se[ve[ye]]=[],Se[ve[ye]][0]=le,Se[ve[ye]][1]=Be,ye++,le++;le*=2}return Se}function Te(fe){for(var ve=fe[0],le=fe[1]-1;le>=0;)ve&1<<le&&(P|=1<<C),le--,--C<0&&(P==255?(pe(255),pe(0)):pe(P),C=7,P=0)}function pe(fe){M.push(fe)}function De(fe){pe(fe>>8&255),pe(255&fe)}function me(fe,ve,le,ye,Se){for(var Be,Ve=Se[0],tt=Se[240],ht=function(Jt,Ht){var $e,Ee,_t,jt,vt,Pt,vn,hn,pn,nn,Ft=0;for(pn=0;pn<8;++pn){$e=Jt[Ft],Ee=Jt[Ft+1],_t=Jt[Ft+2],jt=Jt[Ft+3],vt=Jt[Ft+4],Pt=Jt[Ft+5],vn=Jt[Ft+6];var In=$e+(hn=Jt[Ft+7]),Pn=$e-hn,ir=Ee+vn,mt=Ee-vn,ge=_t+Pt,ke=_t-Pt,We=jt+vt,Ce=jt-vt,Qe=In+We,et=In-We,ut=ir+ge,lt=ir-ge;Jt[Ft]=Qe+ut,Jt[Ft+4]=Qe-ut;var xt=.707106781*(lt+et);Jt[Ft+2]=et+xt,Jt[Ft+6]=et-xt;var Dt=.382683433*((Qe=Ce+ke)-(lt=mt+Pn)),zt=.5411961*Qe+Dt,Tn=1.306562965*lt+Dt,qt=.707106781*(ut=ke+mt),Zn=Pn+qt,Gn=Pn-qt;Jt[Ft+5]=Gn+zt,Jt[Ft+3]=Gn-zt,Jt[Ft+1]=Zn+Tn,Jt[Ft+7]=Zn-Tn,Ft+=8}for(Ft=0,pn=0;pn<8;++pn){$e=Jt[Ft],Ee=Jt[Ft+8],_t=Jt[Ft+16],jt=Jt[Ft+24],vt=Jt[Ft+32],Pt=Jt[Ft+40],vn=Jt[Ft+48];var we=$e+(hn=Jt[Ft+56]),Ne=$e-hn,je=Ee+vn,At=Ee-vn,sn=_t+Pt,Hn=_t-Pt,or=jt+vt,Er=jt-vt,lr=we+or,Ri=we-or,ci=je+sn,Vi=je-sn;Jt[Ft]=lr+ci,Jt[Ft+32]=lr-ci;var Vr=.707106781*(Vi+Ri);Jt[Ft+16]=Ri+Vr,Jt[Ft+48]=Ri-Vr;var Ca=.382683433*((lr=Er+Hn)-(Vi=At+Ne)),ra=.5411961*lr+Ca,mi=1.306562965*Vi+Ca,no=.707106781*(ci=Hn+At),nt=Ne+no,an=Ne-no;Jt[Ft+40]=an+ra,Jt[Ft+24]=an-ra,Jt[Ft+8]=nt+mi,Jt[Ft+56]=nt-mi,Ft++}for(pn=0;pn<64;++pn)nn=Jt[pn]*Ht[pn],b[pn]=nn>0?nn+.5|0:nn-.5|0;return b}(fe,ve),it=0;it<64;++it)A[W[it]]=ht[it];var gt=A[0]-le;le=A[0],gt==0?Te(ye[0]):(Te(ye[w[Be=32767+gt]]),Te(y[Be]));for(var $t=63;$t>0&&A[$t]==0;)$t--;if($t==0)return Te(Ve),le;for(var He,Ct=1;Ct<=$t;){for(var Xe=Ct;A[Ct]==0&&Ct<=$t;)++Ct;var tn=Ct-Xe;if(tn>=16){He=tn>>4;for(var Kt=1;Kt<=He;++Kt)Te(tt);tn&=15}Be=32767+A[Ct],Te(Se[(tn<<4)+w[Be]]),Te(y[Be]),Ct++}return $t!=63&&Te(Ve),le}function Me(fe){fe=Math.min(Math.max(fe,1),100),o!=fe&&(function(ve){for(var le=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ye=0;ye<64;ye++){var Se=l((le[ye]*ve+50)/100);Se=Math.min(Math.max(Se,1),255),a[W[ye]]=Se}for(var Be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ve=0;Ve<64;Ve++){var tt=l((Be[Ve]*ve+50)/100);tt=Math.min(Math.max(tt,1),255),h[W[Ve]]=tt}for(var ht=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],it=0,gt=0;gt<8;gt++)for(var $t=0;$t<8;$t++)f[it]=1/(a[W[it]]*ht[gt]*ht[$t]*8),v[it]=1/(h[W[it]]*ht[gt]*ht[$t]*8),it++}(fe<50?Math.floor(5e3/fe):Math.floor(200-2*fe)),o=fe)}this.encode=function(fe,ve){ve&&Me(ve),M=new Array,P=0,C=7,De(65496),De(65504),De(16),pe(74),pe(70),pe(73),pe(70),pe(0),pe(1),pe(1),pe(0),De(1),De(1),pe(0),pe(0),function(){De(65499),De(132),pe(0);for(var Ee=0;Ee<64;Ee++)pe(a[Ee]);pe(1);for(var _t=0;_t<64;_t++)pe(h[_t])}(),function(Ee,_t){De(65472),De(17),pe(8),De(_t),De(Ee),pe(3),pe(1),pe(17),pe(0),pe(2),pe(17),pe(1),pe(3),pe(17),pe(1)}(fe.width,fe.height),function(){De(65476),De(418),pe(0);for(var Ee=0;Ee<16;Ee++)pe(Y[Ee+1]);for(var _t=0;_t<=11;_t++)pe(Z[_t]);pe(16);for(var jt=0;jt<16;jt++)pe(j[jt+1]);for(var vt=0;vt<=161;vt++)pe(K[vt]);pe(1);for(var Pt=0;Pt<16;Pt++)pe(re[Pt+1]);for(var vn=0;vn<=11;vn++)pe(ie[vn]);pe(17);for(var hn=0;hn<16;hn++)pe(se[hn+1]);for(var pn=0;pn<=161;pn++)pe(de[pn])}(),De(65498),De(12),pe(3),pe(1),pe(0),pe(2),pe(17),pe(3),pe(17),pe(0),pe(63),pe(0);var le=0,ye=0,Se=0;P=0,C=7,this.encode.displayName="_encode_";for(var Be,Ve,tt,ht,it,gt,$t,He,Ct,Xe=fe.data,tn=fe.width,Kt=fe.height,Jt=4*tn,Ht=0;Ht<Kt;){for(Be=0;Be<Jt;){for(it=Jt*Ht+Be,$t=-1,He=0,Ct=0;Ct<64;Ct++)gt=it+(He=Ct>>3)*Jt+($t=4*(7&Ct)),Ht+He>=Kt&&(gt-=Jt*(Ht+1+He-Kt)),Be+$t>=Jt&&(gt-=Be+$t-Jt+4),Ve=Xe[gt++],tt=Xe[gt++],ht=Xe[gt++],k[Ct]=(V[Ve]+V[tt+256>>0]+V[ht+512>>0]>>16)-128,B[Ct]=(V[Ve+768>>0]+V[tt+1024>>0]+V[ht+1280>>0]>>16)-128,z[Ct]=(V[Ve+1280>>0]+V[tt+1536>>0]+V[ht+1792>>0]>>16)-128;le=me(k,f,le,e,r),ye=me(B,v,ye,n,i),Se=me(z,v,Se,n,i),Be+=32}Ht+=8}if(C>=0){var $e=[];$e[1]=C+1,$e[0]=(1<<C+1)-1,Te($e)}return De(65497),new Uint8Array(M)},t=t||50,function(){for(var fe=String.fromCharCode,ve=0;ve<256;ve++)q[ve]=fe(ve)}(),e=ue(Y,Z),n=ue(re,ie),r=ue(j,K),i=ue(se,de),function(){for(var fe=1,ve=2,le=1;le<=15;le++){for(var ye=fe;ye<ve;ye++)w[32767+ye]=le,y[32767+ye]=[],y[32767+ye][1]=le,y[32767+ye][0]=ye;for(var Se=-(ve-1);Se<=-fe;Se++)w[32767+Se]=le,y[32767+Se]=[],y[32767+Se][1]=le,y[32767+Se][0]=ve-1+Se;fe<<=1,ve<<=1}}(),function(){for(var fe=0;fe<256;fe++)V[fe]=19595*fe,V[fe+256>>0]=38470*fe,V[fe+512>>0]=7471*fe+32768,V[fe+768>>0]=-11059*fe,V[fe+1024>>0]=-21709*fe,V[fe+1280>>0]=32768*fe+8421375,V[fe+1536>>0]=-27439*fe,V[fe+1792>>0]=-5329*fe}(),Me(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Xf(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function YI(t){function e(Y){if(!Y)throw Error("assert :P")}function n(Y,Z,j){for(var K=0;4>K;K++)if(Y[Z+K]!=j.charCodeAt(K))return!0;return!1}function r(Y,Z,j,K,re){for(var ie=0;ie<re;ie++)Y[Z+ie]=j[K+ie]}function i(Y,Z,j,K){for(var re=0;re<K;re++)Y[Z+re]=j}function o(Y){return new Int32Array(Y)}function l(Y,Z){for(var j=[],K=0;K<Y;K++)j.push(new Z);return j}function a(Y,Z){var j=[];return function K(re,ie,se){for(var de=se[ie],ue=0;ue<de&&(re.push(se.length>ie+1?[]:new Z),!(se.length<ie+1));ue++)K(re[ue],ie+1,se)}(j,0,Y),j}var h=function(){var Y=this;function Z(N,$){for(var oe=1<<$-1>>>0;N&oe;)oe>>>=1;return oe?(N&oe-1)+oe:N}function j(N,$,oe,xe,ze){e(!(xe%oe));do N[$+(xe-=oe)]=ze;while(0<xe)}function K(N,$,oe,xe,ze){if(e(2328>=ze),512>=ze)var Ke=o(512);else if((Ke=o(ze))==null)return 0;return function(Je,rt,ot,yt,en,bn){var mn,un,Rn=rt,Mn=1<<ot,Vt=o(16),on=o(16);for(e(en!=0),e(yt!=null),e(Je!=null),e(0<ot),un=0;un<en;++un){if(15<yt[un])return 0;++Vt[yt[un]]}if(Vt[0]==en)return 0;for(on[1]=0,mn=1;15>mn;++mn){if(Vt[mn]>1<<mn)return 0;on[mn+1]=on[mn]+Vt[mn]}for(un=0;un<en;++un)mn=yt[un],0<yt[un]&&(bn[on[mn]++]=un);if(on[15]==1)return(yt=new re).g=0,yt.value=bn[0],j(Je,Rn,1,Mn,yt),Mn;var Yn,Xn=-1,Qn=Mn-1,jn=0,Bn=1,ri=1,br=1<<ot;for(un=0,mn=1,en=2;mn<=ot;++mn,en<<=1){if(Bn+=ri<<=1,0>(ri-=Vt[mn]))return 0;for(;0<Vt[mn];--Vt[mn])(yt=new re).g=mn,yt.value=bn[un++],j(Je,Rn+jn,en,br,yt),jn=Z(jn,mn)}for(mn=ot+1,en=2;15>=mn;++mn,en<<=1){if(Bn+=ri<<=1,0>(ri-=Vt[mn]))return 0;for(;0<Vt[mn];--Vt[mn]){if(yt=new re,(jn&Qn)!=Xn){for(Rn+=br,Yn=1<<(Xn=mn)-ot;15>Xn&&!(0>=(Yn-=Vt[Xn]));)++Xn,Yn<<=1;Mn+=br=1<<(Yn=Xn-ot),Je[rt+(Xn=jn&Qn)].g=Yn+ot,Je[rt+Xn].value=Rn-rt-Xn}yt.g=mn-ot,yt.value=bn[un++],j(Je,Rn+(jn>>ot),en,br,yt),jn=Z(jn,mn)}}return Bn!=2*on[15]-1?0:Mn}(N,$,oe,xe,ze,Ke)}function re(){this.value=this.g=0}function ie(){this.value=this.g=0}function se(){this.G=l(5,re),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Ra,ie)}function de(N,$,oe,xe){e(N!=null),e($!=null),e(2147483648>xe),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=$,N.pa=oe,N.Jd=$,N.Yc=oe+xe,N.Zc=4<=xe?oe+xe-4+1:oe,Be(N)}function ue(N,$){for(var oe=0;0<$--;)oe|=tt(N,128)<<$;return oe}function Te(N,$){var oe=ue(N,$);return Ve(N)?-oe:oe}function pe(N,$,oe,xe){var ze,Ke=0;for(e(N!=null),e($!=null),e(4294967288>xe),N.Sb=xe,N.Ra=0,N.u=0,N.h=0,4<xe&&(xe=4),ze=0;ze<xe;++ze)Ke+=$[oe+ze]<<8*ze;N.Ra=Ke,N.bb=xe,N.oa=$,N.pa=oe}function De(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<pu-8>>>0,++N.bb,N.u-=8;le(N)&&(N.h=1,N.u=0)}function me(N,$){if(e(0<=$),!N.h&&$<=Gs){var oe=ve(N)&Ms[$];return N.u+=$,De(N),oe}return N.h=1,N.u=0}function Me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function fe(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ve(N){return N.Ra>>>(N.u&pu-1)>>>0}function le(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>pu}function ye(N,$){N.u=$,N.h=le(N)}function Se(N){N.u>=mc&&(e(N.u>=mc),De(N))}function Be(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function Ve(N){return ue(N,1)}function tt(N,$){var oe=N.Ca;0>N.b&&Be(N);var xe=N.b,ze=oe*$>>>8,Ke=(N.I>>>xe>ze)+0;for(Ke?(oe-=ze,N.I-=ze+1<<xe>>>0):oe=ze+1,xe=oe,ze=0;256<=xe;)ze+=8,xe>>=8;return xe=7^ze+ss[xe],N.b-=xe,N.Ca=(oe<<xe)-1,Ke}function ht(N,$,oe){N[$+0]=oe>>24&255,N[$+1]=oe>>16&255,N[$+2]=oe>>8&255,N[$+3]=oe>>0&255}function it(N,$){return N[$+0]<<0|N[$+1]<<8}function gt(N,$){return it(N,$)|N[$+2]<<16}function $t(N,$){return it(N,$)|it(N,$+2)<<16}function He(N,$){var oe=1<<$;return e(N!=null),e(0<$),N.X=o(oe),N.X==null?0:(N.Mb=32-$,N.Xa=$,1)}function Ct(N,$){e(N!=null),e($!=null),e(N.Xa==$.Xa),r($.X,0,N.X,0,1<<$.Xa)}function Xe(){this.X=[],this.Xa=this.Mb=0}function tn(N,$,oe,xe){e(oe!=null),e(xe!=null);var ze=oe[0],Ke=xe[0];return ze==0&&(ze=(N*Ke+$/2)/$),Ke==0&&(Ke=($*ze+N/2)/N),0>=ze||0>=Ke?0:(oe[0]=ze,xe[0]=Ke,1)}function Kt(N,$){return N+(1<<$)-1>>>$}function Jt(N,$){return((4278255360&N)+(4278255360&$)>>>0&4278255360)+((16711935&N)+(16711935&$)>>>0&16711935)>>>0}function Ht(N,$){Y[$]=function(oe,xe,ze,Ke,Je,rt,ot){var yt;for(yt=0;yt<Je;++yt){var en=Y[N](rt[ot+yt-1],ze,Ke+yt);rt[ot+yt]=Jt(oe[xe+yt],en)}}}function $e(){this.ud=this.hd=this.jd=0}function Ee(N,$){return((4278124286&(N^$))>>>1)+(N&$)>>>0}function _t(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function jt(N,$){return _t(N+(N-$+.5>>1))}function vt(N,$,oe){return Math.abs($-oe)-Math.abs(N-oe)}function Pt(N,$,oe,xe,ze,Ke,Je){for(xe=Ke[Je-1],oe=0;oe<ze;++oe)Ke[Je+oe]=xe=Jt(N[$+oe],xe)}function vn(N,$,oe,xe,ze){var Ke;for(Ke=0;Ke<oe;++Ke){var Je=N[$+Ke],rt=Je>>8&255,ot=16711935&(ot=(ot=16711935&Je)+((rt<<16)+rt));xe[ze+Ke]=(4278255360&Je)+ot>>>0}}function hn(N,$){$.jd=N>>0&255,$.hd=N>>8&255,$.ud=N>>16&255}function pn(N,$,oe,xe,ze,Ke){var Je;for(Je=0;Je<xe;++Je){var rt=$[oe+Je],ot=rt>>>8,yt=rt,en=255&(en=(en=rt>>>16)+((N.jd<<24>>24)*(ot<<24>>24)>>>5));yt=255&(yt=(yt=yt+((N.hd<<24>>24)*(ot<<24>>24)>>>5))+((N.ud<<24>>24)*(en<<24>>24)>>>5)),ze[Ke+Je]=(4278255360&rt)+(en<<16)+yt}}function nn(N,$,oe,xe,ze){Y[$]=function(Ke,Je,rt,ot,yt,en,bn,mn,un){for(ot=bn;ot<mn;++ot)for(bn=0;bn<un;++bn)yt[en++]=ze(rt[xe(Ke[Je++])])},Y[N]=function(Ke,Je,rt,ot,yt,en,bn){var mn=8>>Ke.b,un=Ke.Ea,Rn=Ke.K[0],Mn=Ke.w;if(8>mn)for(Ke=(1<<Ke.b)-1,Mn=(1<<mn)-1;Je<rt;++Je){var Vt,on=0;for(Vt=0;Vt<un;++Vt)Vt&Ke||(on=xe(ot[yt++])),en[bn++]=ze(Rn[on&Mn]),on>>=mn}else Y["VP8LMapColor"+oe](ot,yt,Rn,Mn,en,bn,Je,rt,un)}}function Ft(N,$,oe,xe,ze){for(oe=$+oe;$<oe;){var Ke=N[$++];xe[ze++]=Ke>>16&255,xe[ze++]=Ke>>8&255,xe[ze++]=Ke>>0&255}}function In(N,$,oe,xe,ze){for(oe=$+oe;$<oe;){var Ke=N[$++];xe[ze++]=Ke>>16&255,xe[ze++]=Ke>>8&255,xe[ze++]=Ke>>0&255,xe[ze++]=Ke>>24&255}}function Pn(N,$,oe,xe,ze){for(oe=$+oe;$<oe;){var Ke=(Je=N[$++])>>16&240|Je>>12&15,Je=Je>>0&240|Je>>28&15;xe[ze++]=Ke,xe[ze++]=Je}}function ir(N,$,oe,xe,ze){for(oe=$+oe;$<oe;){var Ke=(Je=N[$++])>>16&248|Je>>13&7,Je=Je>>5&224|Je>>3&31;xe[ze++]=Ke,xe[ze++]=Je}}function mt(N,$,oe,xe,ze){for(oe=$+oe;$<oe;){var Ke=N[$++];xe[ze++]=Ke>>0&255,xe[ze++]=Ke>>8&255,xe[ze++]=Ke>>16&255}}function ge(N,$,oe,xe,ze,Ke){if(Ke==0)for(oe=$+oe;$<oe;)ht(xe,((Ke=N[$++])[0]>>24|Ke[1]>>8&65280|Ke[2]<<8&16711680|Ke[3]<<24)>>>0),ze+=32;else r(xe,ze,N,$,oe)}function ke(N,$){Y[$][0]=Y[N+"0"],Y[$][1]=Y[N+"1"],Y[$][2]=Y[N+"2"],Y[$][3]=Y[N+"3"],Y[$][4]=Y[N+"4"],Y[$][5]=Y[N+"5"],Y[$][6]=Y[N+"6"],Y[$][7]=Y[N+"7"],Y[$][8]=Y[N+"8"],Y[$][9]=Y[N+"9"],Y[$][10]=Y[N+"10"],Y[$][11]=Y[N+"11"],Y[$][12]=Y[N+"12"],Y[$][13]=Y[N+"13"],Y[$][14]=Y[N+"0"],Y[$][15]=Y[N+"0"]}function We(N){return N==Dl||N==Xl||N==Iu||N==Jh}function Ce(){this.eb=[],this.size=this.A=this.fb=0}function Qe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function et(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ce,this.f.kb=new Qe,this.sd=null}function ut(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function xt(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function Dt(N,$){var oe=N.T,xe=$.ba.f.RGBA,ze=xe.eb,Ke=xe.fb+N.ka*xe.A,Je=ll[$.ba.S],rt=N.y,ot=N.O,yt=N.f,en=N.N,bn=N.ea,mn=N.W,un=$.cc,Rn=$.dc,Mn=$.Mc,Vt=$.Nc,on=N.ka,Yn=N.ka+N.T,Xn=N.U,Qn=Xn+1>>1;for(on==0?Je(rt,ot,null,null,yt,en,bn,mn,yt,en,bn,mn,ze,Ke,null,null,Xn):(Je($.ec,$.fc,rt,ot,un,Rn,Mn,Vt,yt,en,bn,mn,ze,Ke-xe.A,ze,Ke,Xn),++oe);on+2<Yn;on+=2)un=yt,Rn=en,Mn=bn,Vt=mn,en+=N.Rc,mn+=N.Rc,Ke+=2*xe.A,Je(rt,(ot+=2*N.fa)-N.fa,rt,ot,un,Rn,Mn,Vt,yt,en,bn,mn,ze,Ke-xe.A,ze,Ke,Xn);return ot+=N.fa,N.j+Yn<N.o?(r($.ec,$.fc,rt,ot,Xn),r($.cc,$.dc,yt,en,Qn),r($.Mc,$.Nc,bn,mn,Qn),oe--):1&Yn||Je(rt,ot,null,null,yt,en,bn,mn,yt,en,bn,mn,ze,Ke+xe.A,null,null,Xn),oe}function zt(N,$,oe){var xe=N.F,ze=[N.J];if(xe!=null){var Ke=N.U,Je=$.ba.S,rt=Je==Ps||Je==Iu;$=$.ba.f.RGBA;var ot=[0],yt=N.ka;ot[0]=N.T,N.Kb&&(yt==0?--ot[0]:(--yt,ze[0]-=N.width),N.j+N.ka+N.T==N.o&&(ot[0]=N.o-N.j-yt));var en=$.eb;yt=$.fb+yt*$.A,N=bi(xe,ze[0],N.width,Ke,ot,en,yt+(rt?0:3),$.A),e(oe==ot),N&&We(Je)&&Da(en,yt,rt,Ke,ot,$.A)}return 0}function Tn(N){var $=N.ma,oe=$.ba.S,xe=11>oe,ze=oe==Rl||oe==vu||oe==Ps||oe==Wl||oe==12||We(oe);if($.memory=null,$.Ib=null,$.Jb=null,$.Nd=null,!Hl($.Oa,N,ze?11:12))return 0;if(ze&&We(oe)&&fr(),N.da)alert("todo:use_scaling");else{if(xe){if($.Ib=xt,N.Kb){if(oe=N.U+1>>1,$.memory=o(N.U+2*oe),$.memory==null)return 0;$.ec=$.memory,$.fc=0,$.cc=$.ec,$.dc=$.fc+N.U,$.Mc=$.cc,$.Nc=$.dc+oe,$.Ib=Dt,fr()}}else alert("todo:EmitYUV");ze&&($.Jb=zt,xe&&yn())}if(xe&&!Yl){for(N=0;256>N;++N)Fu[N]=89858*(N-128)+jc>>Nu,Jl[N]=-22014*(N-128)+jc,Mr[N]=-45773*(N-128),Kl[N]=113618*(N-128)+jc>>Nu;for(N=ah;N<Ch;++N)$=76283*(N-16)+jc>>Nu,Xo[N-ah]=il($,255),Df[N-ah]=il($+8>>4,15);Yl=1}return 1}function qt(N){var $=N.ma,oe=N.U,xe=N.T;return e(!(1&N.ka)),0>=oe||0>=xe?0:(oe=$.Ib(N,$),$.Jb!=null&&$.Jb(N,$,oe),$.Dc+=oe,1)}function Zn(N){N.ma.memory=null}function Gn(N,$,oe,xe){return me(N,8)!=47?0:($[0]=me(N,14)+1,oe[0]=me(N,14)+1,xe[0]=me(N,1),me(N,3)!=0?0:!N.h)}function we(N,$){if(4>N)return N+1;var oe=N-2>>1;return(2+(1&N)<<oe)+me($,oe)+1}function Ne(N,$){return 120<$?$-120:1<=(oe=((oe=Ws[$-1])>>4)*N+(8-(15&oe)))?oe:1;var oe}function je(N,$,oe){var xe=ve(oe),ze=N[$+=255&xe].g-8;return 0<ze&&(ye(oe,oe.u+8),xe=ve(oe),$+=N[$].value,$+=xe&(1<<ze)-1),ye(oe,oe.u+N[$].g),N[$].value}function At(N,$,oe){return oe.g+=N.g,oe.value+=N.value<<$>>>0,e(8>=oe.g),N.g}function sn(N,$,oe){var xe=N.xc;return e(($=xe==0?0:N.vc[N.md*(oe>>xe)+($>>xe)])<N.Wb),N.Ya[$]}function Hn(N,$,oe,xe){var ze=N.ab,Ke=N.c*$,Je=N.C;$=Je+$;var rt=oe,ot=xe;for(xe=N.Ta,oe=N.Ua;0<ze--;){var yt=N.gc[ze],en=Je,bn=$,mn=rt,un=ot,Rn=(ot=xe,rt=oe,yt.Ea);switch(e(en<bn),e(bn<=yt.nc),yt.hc){case 2:qi(mn,un,(bn-en)*Rn,ot,rt);break;case 0:var Mn=en,Vt=bn,on=ot,Yn=rt,Xn=(br=yt).Ea;Mn==0&&(zc(mn,un,null,null,1,on,Yn),Pt(mn,un+1,0,0,Xn-1,on,Yn+1),un+=Xn,Yn+=Xn,++Mn);for(var Qn=1<<br.b,jn=Qn-1,Bn=Kt(Xn,br.b),ri=br.K,br=br.w+(Mn>>br.b)*Bn;Mn<Vt;){var ua=ri,Li=br,ca=1;for($l(mn,un,on,Yn-Xn,1,on,Yn);ca<Xn;){var Ai=(ca&~jn)+Qn;Ai>Xn&&(Ai=Xn),(0,ln[ua[Li++]>>8&15])(mn,un+ +ca,on,Yn+ca-Xn,Ai-ca,on,Yn+ca),ca=Ai}un+=Xn,Yn+=Xn,++Mn&jn||(br+=Bn)}bn!=yt.nc&&r(ot,rt-Rn,ot,rt+(bn-en-1)*Rn,Rn);break;case 1:for(Rn=mn,Vt=un,Xn=(mn=yt.Ea)-(Yn=mn&~(on=(un=1<<yt.b)-1)),Mn=Kt(mn,yt.b),Qn=yt.K,yt=yt.w+(en>>yt.b)*Mn;en<bn;){for(jn=Qn,Bn=yt,ri=new $e,br=Vt+Yn,ua=Vt+mn;Vt<br;)hn(jn[Bn++],ri),On(ri,Rn,Vt,un,ot,rt),Vt+=un,rt+=un;Vt<ua&&(hn(jn[Bn++],ri),On(ri,Rn,Vt,Xn,ot,rt),Vt+=Xn,rt+=Xn),++en&on||(yt+=Mn)}break;case 3:if(mn==ot&&un==rt&&0<yt.b){for(Vt=ot,mn=Rn=rt+(bn-en)*Rn-(Yn=(bn-en)*Kt(yt.Ea,yt.b)),un=ot,on=rt,Mn=[],Yn=(Xn=Yn)-1;0<=Yn;--Yn)Mn[Yn]=un[on+Yn];for(Yn=Xn-1;0<=Yn;--Yn)Vt[mn+Yn]=Mn[Yn];Al(yt,en,bn,ot,Rn,ot,rt)}else Al(yt,en,bn,mn,un,ot,rt)}rt=xe,ot=oe}ot!=oe&&r(xe,oe,rt,ot,Ke)}function or(N,$){var oe=N.V,xe=N.Ba+N.c*N.C,ze=$-N.C;if(e($<=N.l.o),e(16>=ze),0<ze){var Ke=N.l,Je=N.Ta,rt=N.Ua,ot=Ke.width;if(Hn(N,ze,oe,xe),ze=rt=[rt],e((oe=N.C)<(xe=$)),e(Ke.v<Ke.va),xe>Ke.o&&(xe=Ke.o),oe<Ke.j){var yt=Ke.j-oe;oe=Ke.j,ze[0]+=yt*ot}if(oe>=xe?oe=0:(ze[0]+=4*Ke.v,Ke.ka=oe-Ke.j,Ke.U=Ke.va-Ke.v,Ke.T=xe-oe,oe=1),oe){if(rt=rt[0],11>(oe=N.ca).S){var en=oe.f.RGBA,bn=(xe=oe.S,ze=Ke.U,Ke=Ke.T,yt=en.eb,en.A),mn=Ke;for(en=en.fb+N.Ma*en.A;0<mn--;){var un=Je,Rn=rt,Mn=ze,Vt=yt,on=en;switch(xe){case $s:_r(un,Rn,Mn,Vt,on);break;case Rl:Dr(un,Rn,Mn,Vt,on);break;case Dl:Dr(un,Rn,Mn,Vt,on),Da(Vt,on,0,Mn,1,0);break;case Lu:Xi(un,Rn,Mn,Vt,on);break;case vu:ge(un,Rn,Mn,Vt,on,1);break;case Xl:ge(un,Rn,Mn,Vt,on,1),Da(Vt,on,0,Mn,1,0);break;case Ps:ge(un,Rn,Mn,Vt,on,0);break;case Iu:ge(un,Rn,Mn,Vt,on,0),Da(Vt,on,1,Mn,1,0);break;case Wl:na(un,Rn,Mn,Vt,on);break;case Jh:na(un,Rn,Mn,Vt,on),zi(Vt,on,Mn,1,0);break;case Uc:Si(un,Rn,Mn,Vt,on);break;default:e(0)}rt+=ot,en+=bn}N.Ma+=Ke}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=oe.height)}}N.C=$,e(N.C<=N.i)}function Er(N){var $;if(0<N.ua)return 0;for($=0;$<N.Wb;++$){var oe=N.Ya[$].G,xe=N.Ya[$].H;if(0<oe[1][xe[1]+0].g||0<oe[2][xe[2]+0].g||0<oe[3][xe[3]+0].g)return 0}return 1}function lr(N,$,oe,xe,ze,Ke){if(N.Z!=0){var Je=N.qd,rt=N.rd;for(e(yu[N.Z]!=null);$<oe;++$)yu[N.Z](Je,rt,xe,ze,xe,ze,Ke),Je=xe,rt=ze,ze+=Ke;N.qd=Je,N.rd=rt}}function Ri(N,$){var oe=N.l.ma,xe=oe.Z==0||oe.Z==1?N.l.j:N.C;if(xe=N.C<xe?xe:N.C,e($<=N.l.o),$>xe){var ze=N.l.width,Ke=oe.ca,Je=oe.tb+ze*xe,rt=N.V,ot=N.Ba+N.c*xe,yt=N.gc;e(N.ab==1),e(yt[0].hc==3),Ku(yt[0],xe,$,rt,ot,Ke,Je),lr(oe,xe,$,Ke,Je,ze)}N.C=N.Ma=$}function ci(N,$,oe,xe,ze,Ke,Je){var rt=N.$/xe,ot=N.$%xe,yt=N.m,en=N.s,bn=oe+N.$,mn=bn;ze=oe+xe*ze;var un=oe+xe*Ke,Rn=280+en.ua,Mn=N.Pb?rt:16777216,Vt=0<en.ua?en.Wa:null,on=en.wc,Yn=bn<un?sn(en,ot,rt):null;e(N.C<Ke),e(un<=ze);var Xn=!1;e:for(;;){for(;Xn||bn<un;){var Qn=0;if(rt>=Mn){var jn=bn-oe;e((Mn=N).Pb),Mn.wd=Mn.m,Mn.xd=jn,0<Mn.s.ua&&Ct(Mn.s.Wa,Mn.s.vb),Mn=rt+Cf}if(ot&on||(Yn=sn(en,ot,rt)),e(Yn!=null),Yn.Qb&&($[bn]=Yn.qb,Xn=!0),!Xn)if(Se(yt),Yn.jc){Qn=yt,jn=$;var Bn=bn,ri=Yn.pd[ve(Qn)&Ra-1];e(Yn.jc),256>ri.g?(ye(Qn,Qn.u+ri.g),jn[Bn]=ri.value,Qn=0):(ye(Qn,Qn.u+ri.g-256),e(256<=ri.value),Qn=ri.value),Qn==0&&(Xn=!0)}else Qn=je(Yn.G[0],Yn.H[0],yt);if(yt.h)break;if(Xn||256>Qn){if(!Xn)if(Yn.nd)$[bn]=(Yn.qb|Qn<<8)>>>0;else{if(Se(yt),Xn=je(Yn.G[1],Yn.H[1],yt),Se(yt),jn=je(Yn.G[2],Yn.H[2],yt),Bn=je(Yn.G[3],Yn.H[3],yt),yt.h)break;$[bn]=(Bn<<24|Xn<<16|Qn<<8|jn)>>>0}if(Xn=!1,++bn,++ot>=xe&&(ot=0,++rt,Je!=null&&rt<=Ke&&!(rt%16)&&Je(N,rt),Vt!=null))for(;mn<bn;)Qn=$[mn++],Vt.X[(506832829*Qn&4294967295)>>>Vt.Mb]=Qn}else if(280>Qn){if(Qn=we(Qn-256,yt),jn=je(Yn.G[4],Yn.H[4],yt),Se(yt),jn=Ne(xe,jn=we(jn,yt)),yt.h)break;if(bn-oe<jn||ze-bn<Qn)break e;for(Bn=0;Bn<Qn;++Bn)$[bn+Bn]=$[bn+Bn-jn];for(bn+=Qn,ot+=Qn;ot>=xe;)ot-=xe,++rt,Je!=null&&rt<=Ke&&!(rt%16)&&Je(N,rt);if(e(bn<=ze),ot&on&&(Yn=sn(en,ot,rt)),Vt!=null)for(;mn<bn;)Qn=$[mn++],Vt.X[(506832829*Qn&4294967295)>>>Vt.Mb]=Qn}else{if(!(Qn<Rn))break e;for(Xn=Qn-280,e(Vt!=null);mn<bn;)Qn=$[mn++],Vt.X[(506832829*Qn&4294967295)>>>Vt.Mb]=Qn;Qn=bn,e(!(Xn>>>(jn=Vt).Xa)),$[Qn]=jn.X[Xn],Xn=!0}Xn||e(yt.h==le(yt))}if(N.Pb&&yt.h&&bn<ze)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Ct(N.s.vb,N.s.Wa);else{if(yt.h)break e;Je!=null&&Je(N,rt>Ke?Ke:rt),N.a=0,N.$=bn-oe}return 1}return N.a=3,0}function Vi(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var $=N.Wa;$!=null&&($.X=null),N.vb=null,e(N!=null)}function Vr(){var N=new th;return N==null?null:(N.a=0,N.xb=rh,ke("Predictor","VP8LPredictors"),ke("Predictor","VP8LPredictors_C"),ke("PredictorAdd","VP8LPredictorsAdd"),ke("PredictorAdd","VP8LPredictorsAdd_C"),qi=vn,On=pn,_r=Ft,Dr=In,na=Pn,Si=ir,Xi=mt,Y.VP8LMapColor32b=bo,Y.VP8LMapColor8b=Eh,N)}function Ca(N,$,oe,xe,ze){var Ke=1,Je=[N],rt=[$],ot=xe.m,yt=xe.s,en=null,bn=0;e:for(;;){if(oe)for(;Ke&&me(ot,1);){var mn=Je,un=rt,Rn=xe,Mn=1,Vt=Rn.m,on=Rn.gc[Rn.ab],Yn=me(Vt,2);if(Rn.Oc&1<<Yn)Ke=0;else{switch(Rn.Oc|=1<<Yn,on.hc=Yn,on.Ea=mn[0],on.nc=un[0],on.K=[null],++Rn.ab,e(4>=Rn.ab),Yn){case 0:case 1:on.b=me(Vt,3)+2,Mn=Ca(Kt(on.Ea,on.b),Kt(on.nc,on.b),0,Rn,on.K),on.K=on.K[0];break;case 3:var Xn,Qn=me(Vt,8)+1,jn=16<Qn?0:4<Qn?1:2<Qn?2:3;if(mn[0]=Kt(on.Ea,jn),on.b=jn,Xn=Mn=Ca(Qn,1,0,Rn,on.K)){var Bn,ri=Qn,br=on,ua=1<<(8>>br.b),Li=o(ua);if(Li==null)Xn=0;else{var ca=br.K[0],Ai=br.w;for(Li[0]=br.K[0][0],Bn=1;Bn<1*ri;++Bn)Li[Bn]=Jt(ca[Ai+Bn],Li[Bn-1]);for(;Bn<4*ua;++Bn)Li[Bn]=0;br.K[0]=null,br.K[0]=Li,Xn=1}}Mn=Xn;break;case 2:break;default:e(0)}Ke=Mn}}if(Je=Je[0],rt=rt[0],Ke&&me(ot,1)&&!(Ke=1<=(bn=me(ot,4))&&11>=bn)){xe.a=3;break e}var eo;if(eo=Ke)t:{var Yi,jr,Ui,Xa=xe,Ii=Je,us=rt,ha=bn,xo=oe,Ls=Xa.m,Aa=Xa.s,Eo=[null],Zo=1,ul=0,cl=$o[ha];n:for(;;){if(xo&&me(Ls,1)){var co=me(Ls,3)+2,Bu=Kt(Ii,co),ec=Kt(us,co),_u=Bu*ec;if(!Ca(Bu,ec,0,Xa,Eo))break n;for(Eo=Eo[0],Aa.xc=co,Yi=0;Yi<_u;++Yi){var zu=Eo[Yi]>>8&65535;Eo[Yi]=zu,zu>=Zo&&(Zo=zu+1)}}if(Ls.h)break n;for(jr=0;5>jr;++jr){var ro=Rs[jr];!jr&&0<ha&&(ro+=1<<ha),ul<ro&&(ul=ro)}var Rh=l(Zo*cl,re),Lf=Zo,R=l(Lf,se);if(R==null)var s=null;else e(65536>=Lf),s=R;var d=o(ul);if(s==null||d==null||Rh==null){Xa.a=1;break n}var x=Rh;for(Yi=Ui=0;Yi<Zo;++Yi){var E=s[Yi],L=E.G,F=E.H,X=0,Q=1,ae=0;for(jr=0;5>jr;++jr){ro=Rs[jr],L[jr]=x,F[jr]=Ui,!jr&&0<ha&&(ro+=1<<ha);i:{var be,Ae=ro,Pe=Xa,qe=d,Ze=x,dt=Ui,ft=0,pt=Pe.m,Tt=me(pt,1);if(i(qe,0,0,Ae),Tt){var Nt=me(pt,1)+1,kt=me(pt,1),Bt=me(pt,kt==0?1:8);qe[Bt]=1,Nt==2&&(qe[Bt=me(pt,8)]=1);var Wt=1}else{var Gt=o(19),xn=me(pt,4)+4;if(19<xn){Pe.a=3;var En=0;break i}for(be=0;be<xn;++be)Gt[hi[be]]=me(pt,3);var zn=void 0,Un=void 0,kn=Pe,wr=Gt,dr=Ae,Kn=qe,Nr=0,Fr=kn.m,fa=8,Za=l(128,re);r:for(;K(Za,0,7,wr,19);){if(me(Fr,1)){var za=2+2*me(Fr,3);if((zn=2+me(Fr,za))>dr)break r}else zn=dr;for(Un=0;Un<dr&&zn--;){Se(Fr);var Ua=Za[0+(127&ve(Fr))];ye(Fr,Fr.u+Ua.g);var Ea=Ua.value;if(16>Ea)Kn[Un++]=Ea,Ea!=0&&(fa=Ea);else{var oa=Ea==16,Ia=Ea-16,ps=Th[Ia],Ya=me(Fr,nh[Ia])+ps;if(Un+Ya>dr)break r;for(var ho=oa?fa:0;0<Ya--;)Kn[Un++]=ho}}Nr=1;break r}Nr||(kn.a=3),Wt=Nr}(Wt=Wt&&!pt.h)&&(ft=K(Ze,dt,8,qe,Ae)),Wt&&ft!=0?En=ft:(Pe.a=3,En=0)}if(En==0)break n;if(Q&&Ho[jr]==1&&(Q=x[Ui].g==0),X+=x[Ui].g,Ui+=En,3>=jr){var Ka,hl=d[0];for(Ka=1;Ka<ro;++Ka)d[Ka]>hl&&(hl=d[Ka]);ae+=hl}}if(E.nd=Q,E.Qb=0,Q&&(E.qb=(L[3][F[3]+0].value<<24|L[1][F[1]+0].value<<16|L[2][F[2]+0].value)>>>0,X==0&&256>L[0][F[0]+0].value&&(E.Qb=1,E.qb+=L[0][F[0]+0].value<<8)),E.jc=!E.Qb&&6>ae,E.jc){var Ql,cs=E;for(Ql=0;Ql<Ra;++Ql){var hs=Ql,Il=cs.pd[hs],eu=cs.G[0][cs.H[0]+hs];256<=eu.value?(Il.g=eu.g+256,Il.value=eu.value):(Il.g=0,Il.value=0,hs>>=At(eu,8,Il),hs>>=At(cs.G[1][cs.H[1]+hs],16,Il),hs>>=At(cs.G[2][cs.H[2]+hs],0,Il),At(cs.G[3][cs.H[3]+hs],24,Il))}}}Aa.vc=Eo,Aa.Wb=Zo,Aa.Ya=s,Aa.yc=Rh,eo=1;break t}eo=0}if(!(Ke=eo)){xe.a=3;break e}if(0<bn){if(yt.ua=1<<bn,!He(yt.Wa,bn)){xe.a=1,Ke=0;break e}}else yt.ua=0;var Uu=xe,tu=Je,tc=rt,nu=Uu.s,Ol=nu.xc;if(Uu.c=tu,Uu.i=tc,nu.md=Kt(tu,Ol),nu.wc=Ol==0?-1:(1<<Ol)-1,oe){xe.xb=mp;break e}if((en=o(Je*rt))==null){xe.a=1,Ke=0;break e}Ke=(Ke=ci(xe,en,0,Je,rt,rt,null))&&!ot.h;break e}return Ke?(ze!=null?ze[0]=en:(e(en==null),e(oe)),xe.$=0,oe||Vi(yt)):Vi(yt),Ke}function ra(N,$){var oe=N.c*N.i,xe=oe+$+16*$;return e(N.c<=$),N.V=o(xe),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+oe+$,1)}function mi(N,$){var oe=N.C,xe=$-oe,ze=N.V,Ke=N.Ba+N.c*oe;for(e($<=N.l.o);0<xe;){var Je=16<xe?16:xe,rt=N.l.ma,ot=N.l.width,yt=ot*Je,en=rt.ca,bn=rt.tb+ot*oe,mn=N.Ta,un=N.Ua;Hn(N,Je,ze,Ke),Sa(mn,un,en,bn,yt),lr(rt,oe,oe+Je,en,bn,ot),xe-=Je,ze+=Je*N.c,oe+=Je}e(oe==$),N.C=N.Ma=$}function no(){this.ub=this.yd=this.td=this.Rb=0}function nt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function an(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function gn(){this.Yb=function(){var N=[];return function $(oe,xe,ze){for(var Ke=ze[xe],Je=0;Je<Ke&&(oe.push(ze.length>xe+1?[]:0),!(ze.length<xe+1));Je++)$(oe[Je],xe+1,ze)}(N,0,[3,11]),N}()}function _n(){this.jb=o(3),this.Wc=a([4,8],gn),this.Xc=a([4,17],gn)}function fn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function cr(){this.ld=this.La=this.dd=this.tc=0}function hr(){this.Na=this.la=0}function Ar(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pr(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ei(){this.uc=this.M=this.Nb=0,this.wa=Array(new cr),this.Y=0,this.ya=Array(new Pr),this.aa=0,this.l=new gi}function Xr(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Hr(){this.cb=this.a=0,this.sc="",this.m=new Me,this.Od=new no,this.Kc=new nt,this.ed=new fn,this.Qa=new an,this.Ic=this.$c=this.Aa=0,this.D=new ei,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,Me),this.ia=0,this.pb=l(4,Ar),this.Pa=new _n,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Xr),this.Hd=0,this.rb=Array(new hr),this.sb=0,this.wa=Array(new cr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pr),this.L=this.aa=0,this.gd=a([4,2],cr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function gi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function vi(){var N=new Hr;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,Ou||(Ou=Zr)),N}function yi(N,$,oe){return N.a==0&&(N.a=$,N.sc=oe,N.cb=0),0}function Wi(N,$,oe){return 3<=oe&&N[$+0]==157&&N[$+1]==1&&N[$+2]==42}function ii(N,$){if(N==null)return 0;if(N.a=0,N.sc="OK",$==null)return yi(N,2,"null VP8Io passed to VP8GetHeaders()");var oe=$.data,xe=$.w,ze=$.ha;if(4>ze)return yi(N,7,"Truncated header.");var Ke=oe[xe+0]|oe[xe+1]<<8|oe[xe+2]<<16,Je=N.Od;if(Je.Rb=!(1&Ke),Je.td=Ke>>1&7,Je.yd=Ke>>4&1,Je.ub=Ke>>5,3<Je.td)return yi(N,3,"Incorrect keyframe parameters.");if(!Je.yd)return yi(N,4,"Frame not displayable.");xe+=3,ze-=3;var rt=N.Kc;if(Je.Rb){if(7>ze)return yi(N,7,"cannot parse picture header");if(!Wi(oe,xe,ze))return yi(N,3,"Bad code word");rt.c=16383&(oe[xe+4]<<8|oe[xe+3]),rt.Td=oe[xe+4]>>6,rt.i=16383&(oe[xe+6]<<8|oe[xe+5]),rt.Ud=oe[xe+6]>>6,xe+=7,ze-=7,N.za=rt.c+15>>4,N.Ub=rt.i+15>>4,$.width=rt.c,$.height=rt.i,$.Da=0,$.j=0,$.v=0,$.va=$.width,$.o=$.height,$.da=0,$.ib=$.width,$.hb=$.height,$.U=$.width,$.T=$.height,i((Ke=N.Pa).jb,0,255,Ke.jb.length),e((Ke=N.Qa)!=null),Ke.Cb=0,Ke.Bb=0,Ke.Fb=1,i(Ke.Zb,0,0,Ke.Zb.length),i(Ke.Lb,0,0,Ke.Lb)}if(Je.ub>ze)return yi(N,7,"bad partition length");de(Ke=N.m,oe,xe,Je.ub),xe+=Je.ub,ze-=Je.ub,Je.Rb&&(rt.Ld=Ve(Ke),rt.Kd=Ve(Ke)),rt=N.Qa;var ot,yt=N.Pa;if(e(Ke!=null),e(rt!=null),rt.Cb=Ve(Ke),rt.Cb){if(rt.Bb=Ve(Ke),Ve(Ke)){for(rt.Fb=Ve(Ke),ot=0;4>ot;++ot)rt.Zb[ot]=Ve(Ke)?Te(Ke,7):0;for(ot=0;4>ot;++ot)rt.Lb[ot]=Ve(Ke)?Te(Ke,6):0}if(rt.Bb)for(ot=0;3>ot;++ot)yt.jb[ot]=Ve(Ke)?ue(Ke,8):255}else rt.Bb=0;if(Ke.Ka)return yi(N,3,"cannot parse segment header");if((rt=N.ed).zd=Ve(Ke),rt.Tb=ue(Ke,6),rt.wb=ue(Ke,3),rt.Pc=Ve(Ke),rt.Pc&&Ve(Ke)){for(yt=0;4>yt;++yt)Ve(Ke)&&(rt.vd[yt]=Te(Ke,6));for(yt=0;4>yt;++yt)Ve(Ke)&&(rt.od[yt]=Te(Ke,6))}if(N.L=rt.Tb==0?0:rt.zd?1:2,Ke.Ka)return yi(N,3,"cannot parse filter header");var en=ze;if(ze=ot=xe,xe=ot+en,rt=en,N.Xb=(1<<ue(N.m,2))-1,en<3*(yt=N.Xb))oe=7;else{for(ot+=3*yt,rt-=3*yt,en=0;en<yt;++en){var bn=oe[ze+0]|oe[ze+1]<<8|oe[ze+2]<<16;bn>rt&&(bn=rt),de(N.Jc[+en],oe,ot,bn),ot+=bn,rt-=bn,ze+=3}de(N.Jc[+yt],oe,ot,rt),oe=ot<xe?0:5}if(oe!=0)return yi(N,oe,"cannot parse partitions");for(oe=ue(ot=N.m,7),ze=Ve(ot)?Te(ot,4):0,xe=Ve(ot)?Te(ot,4):0,rt=Ve(ot)?Te(ot,4):0,yt=Ve(ot)?Te(ot,4):0,ot=Ve(ot)?Te(ot,4):0,en=N.Qa,bn=0;4>bn;++bn){if(en.Cb){var mn=en.Zb[bn];en.Fb||(mn+=oe)}else{if(0<bn){N.pb[bn]=N.pb[0];continue}mn=oe}var un=N.pb[bn];un.Sc[0]=Ju[il(mn+ze,127)],un.Sc[1]=Pf[il(mn+0,127)],un.Eb[0]=2*Ju[il(mn+xe,127)],un.Eb[1]=101581*Pf[il(mn+rt,127)]>>16,8>un.Eb[1]&&(un.Eb[1]=8),un.Qc[0]=Ju[il(mn+yt,117)],un.Qc[1]=Pf[il(mn+ot,127)],un.lc=mn+ot}if(!Je.Rb)return yi(N,4,"Not a key frame.");for(Ve(Ke),Je=N.Pa,oe=0;4>oe;++oe){for(ze=0;8>ze;++ze)for(xe=0;3>xe;++xe)for(rt=0;11>rt;++rt)yt=tt(Ke,xd[oe][ze][xe][rt])?ue(Ke,8):Ah[oe][ze][xe][rt],Je.Wc[oe][ze].Yb[xe][rt]=yt;for(ze=0;17>ze;++ze)Je.Xc[oe][ze]=Je.Wc[oe][wd[ze]]}return N.kc=Ve(Ke),N.kc&&(N.Bd=ue(Ke,8)),N.cb=1}function Zr(N,$,oe,xe,ze,Ke,Je){var rt=$[ze].Yb[oe];for(oe=0;16>ze;++ze){if(!tt(N,rt[oe+0]))return ze;for(;!tt(N,rt[oe+1]);)if(rt=$[++ze].Yb[0],oe=0,ze==16)return 16;var ot=$[ze+1].Yb;if(tt(N,rt[oe+2])){var yt=N,en=0;if(tt(yt,(mn=rt)[(bn=oe)+3]))if(tt(yt,mn[bn+6])){for(rt=0,bn=2*(en=tt(yt,mn[bn+8]))+(mn=tt(yt,mn[bn+9+en])),en=0,mn=vc[bn];mn[rt];++rt)en+=en+tt(yt,mn[rt]);en+=3+(8<<bn)}else tt(yt,mn[bn+7])?(en=7+2*tt(yt,165),en+=tt(yt,145)):en=5+tt(yt,159);else en=tt(yt,mn[bn+4])?3+tt(yt,mn[bn+5]):2;rt=ot[2]}else en=1,rt=ot[1];ot=Je+yc[ze],0>(yt=N).b&&Be(yt);var bn,mn=yt.b,un=(bn=yt.Ca>>1)-(yt.I>>mn)>>31;--yt.b,yt.Ca+=un,yt.Ca|=1,yt.I-=(bn+1&un)<<mn,Ke[ot]=((en^un)-un)*xe[(0<ze)+0]}return 16}function $a(N){var $=N.rb[N.sb-1];$.la=0,$.Na=0,i(N.zc,0,0,N.zc.length),N.ja=0}function Di(N,$){if(N==null)return 0;if($==null)return yi(N,2,"NULL VP8Io parameter in VP8Decode().");if(!N.cb&&!ii(N,$))return 0;if(e(N.cb),$.ac==null||$.ac($)){$.ob&&(N.L=0);var oe=oh[N.L];if(N.L==2?(N.yb=0,N.zb=0):(N.yb=$.v-oe>>4,N.zb=$.j-oe>>4,0>N.yb&&(N.yb=0),0>N.zb&&(N.zb=0)),N.Va=$.o+15+oe>>4,N.Hb=$.va+15+oe>>4,N.Hb>N.za&&(N.Hb=N.za),N.Va>N.Ub&&(N.Va=N.Ub),0<N.L){var xe=N.ed;for(oe=0;4>oe;++oe){var ze;if(N.Qa.Cb){var Ke=N.Qa.Lb[oe];N.Qa.Fb||(Ke+=xe.Tb)}else Ke=xe.Tb;for(ze=0;1>=ze;++ze){var Je=N.gd[oe][ze],rt=Ke;if(xe.Pc&&(rt+=xe.vd[0],ze&&(rt+=xe.od[0])),0<(rt=0>rt?0:63<rt?63:rt)){var ot=rt;0<xe.wb&&(ot=4<xe.wb?ot>>2:ot>>1)>9-xe.wb&&(ot=9-xe.wb),1>ot&&(ot=1),Je.dd=ot,Je.tc=2*rt+ot,Je.ld=40<=rt?2:15<=rt?1:0}else Je.tc=0;Je.La=ze}}}oe=0}else yi(N,6,"Frame setup failed"),oe=N.a;if(oe=oe==0){if(oe){N.$c=0,0<N.Aa||(N.Ic=Jr);e:{oe=N.Ic,xe=4*(ot=N.za);var yt=32*ot,en=ot+1,bn=0<N.L?ot*(0<N.Aa?2:1):0,mn=(N.Aa==2?2:1)*ot;if((Je=xe+832+(ze=3*(16*oe+oh[N.L])/2*yt)+(Ke=N.Fa!=null&&0<N.Fa.length?N.Kc.c*N.Kc.i:0))!=Je)oe=0;else{if(Je>N.Vb){if(N.Vb=0,N.Ec=o(Je),N.Fc=0,N.Ec==null){oe=yi(N,1,"no memory during frame initialization.");break e}N.Vb=Je}Je=N.Ec,rt=N.Fc,N.Ac=Je,N.Bc=rt,rt+=xe,N.Gd=l(yt,Xr),N.Hd=0,N.rb=l(en+1,hr),N.sb=1,N.wa=bn?l(bn,cr):null,N.Y=0,N.D.Nb=0,N.D.wa=N.wa,N.D.Y=N.Y,0<N.Aa&&(N.D.Y+=ot),e(!0),N.oc=Je,N.pc=rt,rt+=832,N.ya=l(mn,Pr),N.aa=0,N.D.ya=N.ya,N.D.aa=N.aa,N.Aa==2&&(N.D.aa+=ot),N.R=16*ot,N.B=8*ot,ot=(yt=oh[N.L])*N.R,yt=yt/2*N.B,N.sa=Je,N.ta=rt+ot,N.qa=N.sa,N.ra=N.ta+16*oe*N.R+yt,N.Ha=N.qa,N.Ia=N.ra+8*oe*N.B+yt,N.$c=0,rt+=ze,N.mb=Ke?Je:null,N.nb=Ke?rt:null,e(rt+Ke<=N.Fc+N.Vb),$a(N),i(N.Ac,N.Bc,0,xe),oe=1}}if(oe){if($.ka=0,$.y=N.sa,$.O=N.ta,$.f=N.qa,$.N=N.ra,$.ea=N.Ha,$.Vd=N.Ia,$.fa=N.R,$.Rc=N.B,$.F=null,$.J=0,!sl){for(oe=-255;255>=oe;++oe)La[255+oe]=0>oe?-oe:oe;for(oe=-1020;1020>=oe;++oe)ds[1020+oe]=-128>oe?-128:127<oe?127:oe;for(oe=-112;112>=oe;++oe)gu[112+oe]=-16>oe?-16:15<oe?15:oe;for(oe=-255;510>=oe;++oe)Lo[255+oe]=0>oe?0:255<oe?255:oe;sl=1}la=St,Fa=xa,Qa=H,wa=he,Va=Ge,si=Pi,Ba=hu,As=fu,Go=kc,qs=Fc,Cs=as,ol=Nc,Cl=Bc,mu=Cu,gc=Ml,Zi=Pa,Br=Wa,qo=eh,Xs[0]=Ni,Xs[1]=Ut,Xs[2]=$n,Xs[3]=Rr,Xs[4]=ta,Xs[5]=js,Xs[6]=di,Xs[7]=_i,Xs[8]=Gl,Xs[9]=Ir,Ds[0]=xr,Ds[1]=sr,Ds[2]=Wn,Ds[3]=mr,Ds[4]=Lr,Ds[5]=Ti,Ds[6]=Yr,Zl[0]=tl,Zl[1]=Yt,Zl[2]=ji,Zl[3]=Po,Zl[4]=jo,Zl[5]=Ro,Zl[6]=nl,oe=1}else oe=0}oe&&(oe=function(un,Rn){for(un.M=0;un.M<un.Va;++un.M){var Mn,Vt=un.Jc[un.M&un.Xb],on=un.m,Yn=un;for(Mn=0;Mn<Yn.za;++Mn){var Xn=on,Qn=Yn,jn=Qn.Ac,Bn=Qn.Bc+4*Mn,ri=Qn.zc,br=Qn.ya[Qn.aa+Mn];if(Qn.Qa.Bb?br.$b=tt(Xn,Qn.Pa.jb[0])?2+tt(Xn,Qn.Pa.jb[2]):tt(Xn,Qn.Pa.jb[1]):br.$b=0,Qn.kc&&(br.Ad=tt(Xn,Qn.Bd)),br.Za=!tt(Xn,145)+0,br.Za){var ua=br.Ob,Li=0;for(Qn=0;4>Qn;++Qn){var ca,Ai=ri[0+Qn];for(ca=0;4>ca;++ca){Ai=bd[jn[Bn+ca]][Ai];for(var eo=Mh[tt(Xn,Ai[0])];0<eo;)eo=Mh[2*eo+tt(Xn,Ai[eo])];Ai=-eo,jn[Bn+ca]=Ai}r(ua,Li,jn,Bn,4),Li+=4,ri[0+Qn]=Ai}}else Ai=tt(Xn,156)?tt(Xn,128)?1:3:tt(Xn,163)?2:0,br.Ob[0]=Ai,i(jn,Bn,Ai,4),i(ri,0,Ai,4);br.Dd=tt(Xn,142)?tt(Xn,114)?tt(Xn,183)?1:3:2:0}if(Yn.m.Ka)return yi(un,7,"Premature end-of-partition0 encountered.");for(;un.ja<un.za;++un.ja){if(Yn=Vt,Xn=(on=un).rb[on.sb-1],jn=on.rb[on.sb+on.ja],Mn=on.ya[on.aa+on.ja],Bn=on.kc?Mn.Ad:0)Xn.la=jn.la=0,Mn.Za||(Xn.Na=jn.Na=0),Mn.Hc=0,Mn.Gc=0,Mn.ia=0;else{var Yi,jr;if(Xn=jn,jn=Yn,Bn=on.Pa.Xc,ri=on.ya[on.aa+on.ja],br=on.pb[ri.$b],Qn=ri.ad,ua=0,Li=on.rb[on.sb-1],Ai=ca=0,i(Qn,ua,0,384),ri.Za)var Ui=0,Xa=Bn[3];else{eo=o(16);var Ii=Xn.Na+Li.Na;if(Ii=Ou(jn,Bn[1],Ii,br.Eb,0,eo,0),Xn.Na=Li.Na=(0<Ii)+0,1<Ii)la(eo,0,Qn,ua);else{var us=eo[0]+3>>3;for(eo=0;256>eo;eo+=16)Qn[ua+eo]=us}Ui=1,Xa=Bn[0]}var ha=15&Xn.la,xo=15&Li.la;for(eo=0;4>eo;++eo){var Ls=1&xo;for(us=jr=0;4>us;++us)ha=ha>>1|(Ls=(Ii=Ou(jn,Xa,Ii=Ls+(1&ha),br.Sc,Ui,Qn,ua))>Ui)<<7,jr=jr<<2|(3<Ii?3:1<Ii?2:Qn[ua+0]!=0),ua+=16;ha>>=4,xo=xo>>1|Ls<<7,ca=(ca<<8|jr)>>>0}for(Xa=ha,Ui=xo>>4,Yi=0;4>Yi;Yi+=2){for(jr=0,ha=Xn.la>>4+Yi,xo=Li.la>>4+Yi,eo=0;2>eo;++eo){for(Ls=1&xo,us=0;2>us;++us)Ii=Ls+(1&ha),ha=ha>>1|(Ls=0<(Ii=Ou(jn,Bn[2],Ii,br.Qc,0,Qn,ua)))<<3,jr=jr<<2|(3<Ii?3:1<Ii?2:Qn[ua+0]!=0),ua+=16;ha>>=2,xo=xo>>1|Ls<<5}Ai|=jr<<4*Yi,Xa|=ha<<4<<Yi,Ui|=(240&xo)<<Yi}Xn.la=Xa,Li.la=Ui,ri.Hc=ca,ri.Gc=Ai,ri.ia=43690&Ai?0:br.ia,Bn=!(ca|Ai)}if(0<on.L&&(on.wa[on.Y+on.ja]=on.gd[Mn.$b][Mn.Za],on.wa[on.Y+on.ja].La|=!Bn),Yn.Ka)return yi(un,7,"Premature end-of-file encountered.")}if($a(un),on=Rn,Yn=1,Mn=(Vt=un).D,Xn=0<Vt.L&&Vt.M>=Vt.zb&&Vt.M<=Vt.Va,Vt.Aa==0)e:{if(Mn.M=Vt.M,Mn.uc=Xn,ql(Vt,Mn),Yn=1,Mn=(jr=Vt.D).Nb,Xn=(Ai=oh[Vt.L])*Vt.R,jn=Ai/2*Vt.B,eo=16*Mn*Vt.R,us=8*Mn*Vt.B,Bn=Vt.sa,ri=Vt.ta-Xn+eo,br=Vt.qa,Qn=Vt.ra-jn+us,ua=Vt.Ha,Li=Vt.Ia-jn+us,xo=(ha=jr.M)==0,ca=ha>=Vt.Va-1,Vt.Aa==2&&ql(Vt,jr),jr.uc)for(Ls=(Ii=Vt).D.M,e(Ii.D.uc),jr=Ii.yb;jr<Ii.Hb;++jr){Ui=jr,Xa=Ls;var Aa=(Eo=(ro=Ii).D).Nb;Yi=ro.R;var Eo=Eo.wa[Eo.Y+Ui],Zo=ro.sa,ul=ro.ta+16*Aa*Yi+16*Ui,cl=Eo.dd,co=Eo.tc;if(co!=0)if(e(3<=co),ro.L==1)0<Ui&&Zi(Zo,ul,Yi,co+4),Eo.La&&qo(Zo,ul,Yi,co),0<Xa&&gc(Zo,ul,Yi,co+4),Eo.La&&Br(Zo,ul,Yi,co);else{var Bu=ro.B,ec=ro.qa,_u=ro.ra+8*Aa*Bu+8*Ui,zu=ro.Ha,ro=ro.Ia+8*Aa*Bu+8*Ui;Aa=Eo.ld,0<Ui&&(As(Zo,ul,Yi,co+4,cl,Aa),qs(ec,_u,zu,ro,Bu,co+4,cl,Aa)),Eo.La&&(ol(Zo,ul,Yi,co,cl,Aa),mu(ec,_u,zu,ro,Bu,co,cl,Aa)),0<Xa&&(Ba(Zo,ul,Yi,co+4,cl,Aa),Go(ec,_u,zu,ro,Bu,co+4,cl,Aa)),Eo.La&&(Cs(Zo,ul,Yi,co,cl,Aa),Cl(ec,_u,zu,ro,Bu,co,cl,Aa))}}if(Vt.ia&&alert("todo:DitherRow"),on.put!=null){if(jr=16*ha,ha=16*(ha+1),xo?(on.y=Vt.sa,on.O=Vt.ta+eo,on.f=Vt.qa,on.N=Vt.ra+us,on.ea=Vt.Ha,on.W=Vt.Ia+us):(jr-=Ai,on.y=Bn,on.O=ri,on.f=br,on.N=Qn,on.ea=ua,on.W=Li),ca||(ha-=Ai),ha>on.o&&(ha=on.o),on.F=null,on.J=null,Vt.Fa!=null&&0<Vt.Fa.length&&jr<ha&&(on.J=du(Vt,on,jr,ha-jr),on.F=Vt.mb,on.F==null&&on.F.length==0)){Yn=yi(Vt,3,"Could not decode alpha data.");break e}jr<on.j&&(Ai=on.j-jr,jr=on.j,e(!(1&Ai)),on.O+=Vt.R*Ai,on.N+=Vt.B*(Ai>>1),on.W+=Vt.B*(Ai>>1),on.F!=null&&(on.J+=on.width*Ai)),jr<ha&&(on.O+=on.v,on.N+=on.v>>1,on.W+=on.v>>1,on.F!=null&&(on.J+=on.v),on.ka=jr-on.j,on.U=on.va-on.v,on.T=ha-jr,Yn=on.put(on))}Mn+1!=Vt.Ic||ca||(r(Vt.sa,Vt.ta-Xn,Bn,ri+16*Vt.R,Xn),r(Vt.qa,Vt.ra-jn,br,Qn+8*Vt.B,jn),r(Vt.Ha,Vt.Ia-jn,ua,Li+8*Vt.B,jn))}if(!Yn)return yi(un,6,"Output aborted.")}return 1}(N,$)),$.bc!=null&&$.bc($),oe&=1}return oe?(N.cb=0,oe):0}function ja(N,$,oe,xe,ze){ze=N[$+oe+32*xe]+(ze>>3),N[$+oe+32*xe]=-256&ze?0>ze?0:255:ze}function lo(N,$,oe,xe,ze,Ke){ja(N,$,0,oe,xe+ze),ja(N,$,1,oe,xe+Ke),ja(N,$,2,oe,xe-Ke),ja(N,$,3,oe,xe-ze)}function Gi(N){return(20091*N>>16)+N}function ti(N,$,oe,xe){var ze,Ke=0,Je=o(16);for(ze=0;4>ze;++ze){var rt=N[$+0]+N[$+8],ot=N[$+0]-N[$+8],yt=(35468*N[$+4]>>16)-Gi(N[$+12]),en=Gi(N[$+4])+(35468*N[$+12]>>16);Je[Ke+0]=rt+en,Je[Ke+1]=ot+yt,Je[Ke+2]=ot-yt,Je[Ke+3]=rt-en,Ke+=4,$++}for(ze=Ke=0;4>ze;++ze)rt=(N=Je[Ke+0]+4)+Je[Ke+8],ot=N-Je[Ke+8],yt=(35468*Je[Ke+4]>>16)-Gi(Je[Ke+12]),ja(oe,xe,0,0,rt+(en=Gi(Je[Ke+4])+(35468*Je[Ke+12]>>16))),ja(oe,xe,1,0,ot+yt),ja(oe,xe,2,0,ot-yt),ja(oe,xe,3,0,rt-en),Ke++,xe+=32}function Pi(N,$,oe,xe){var ze=N[$+0]+4,Ke=35468*N[$+4]>>16,Je=Gi(N[$+4]),rt=35468*N[$+1]>>16;lo(oe,xe,0,ze+Je,N=Gi(N[$+1]),rt),lo(oe,xe,1,ze+Ke,N,rt),lo(oe,xe,2,ze-Ke,N,rt),lo(oe,xe,3,ze-Je,N,rt)}function xa(N,$,oe,xe,ze){ti(N,$,oe,xe),ze&&ti(N,$+16,oe,xe+4)}function H(N,$,oe,xe){Fa(N,$+0,oe,xe,1),Fa(N,$+32,oe,xe+128,1)}function he(N,$,oe,xe){var ze;for(N=N[$+0]+4,ze=0;4>ze;++ze)for($=0;4>$;++$)ja(oe,xe,$,ze,N)}function Ge(N,$,oe,xe){N[$+0]&&wa(N,$+0,oe,xe),N[$+16]&&wa(N,$+16,oe,xe+4),N[$+32]&&wa(N,$+32,oe,xe+128),N[$+48]&&wa(N,$+48,oe,xe+128+4)}function St(N,$,oe,xe){var ze,Ke=o(16);for(ze=0;4>ze;++ze){var Je=N[$+0+ze]+N[$+12+ze],rt=N[$+4+ze]+N[$+8+ze],ot=N[$+4+ze]-N[$+8+ze],yt=N[$+0+ze]-N[$+12+ze];Ke[0+ze]=Je+rt,Ke[8+ze]=Je-rt,Ke[4+ze]=yt+ot,Ke[12+ze]=yt-ot}for(ze=0;4>ze;++ze)Je=(N=Ke[0+4*ze]+3)+Ke[3+4*ze],rt=Ke[1+4*ze]+Ke[2+4*ze],ot=Ke[1+4*ze]-Ke[2+4*ze],yt=N-Ke[3+4*ze],oe[xe+0]=Je+rt>>3,oe[xe+16]=yt+ot>>3,oe[xe+32]=Je-rt>>3,oe[xe+48]=yt-ot>>3,xe+=64}function Lt(N,$,oe){var xe,ze=$-32,Ke=ls,Je=255-N[ze-1];for(xe=0;xe<oe;++xe){var rt,ot=Ke,yt=Je+N[$-1];for(rt=0;rt<oe;++rt)N[$+rt]=ot[yt+N[ze+rt]];$+=32}}function Ut(N,$){Lt(N,$,4)}function Yt(N,$){Lt(N,$,8)}function sr(N,$){Lt(N,$,16)}function Wn(N,$){var oe;for(oe=0;16>oe;++oe)r(N,$+32*oe,N,$-32,16)}function mr(N,$){var oe;for(oe=16;0<oe;--oe)i(N,$,N[$-1],16),$+=32}function vr(N,$,oe){var xe;for(xe=0;16>xe;++xe)i($,oe+32*xe,N,16)}function xr(N,$){var oe,xe=16;for(oe=0;16>oe;++oe)xe+=N[$-1+32*oe]+N[$+oe-32];vr(xe>>5,N,$)}function Lr(N,$){var oe,xe=8;for(oe=0;16>oe;++oe)xe+=N[$-1+32*oe];vr(xe>>4,N,$)}function Ti(N,$){var oe,xe=8;for(oe=0;16>oe;++oe)xe+=N[$+oe-32];vr(xe>>4,N,$)}function Yr(N,$){vr(128,N,$)}function Cr(N,$,oe){return N+2*$+oe+2>>2}function $n(N,$){var oe,xe=$-32;for(xe=new Uint8Array([Cr(N[xe-1],N[xe+0],N[xe+1]),Cr(N[xe+0],N[xe+1],N[xe+2]),Cr(N[xe+1],N[xe+2],N[xe+3]),Cr(N[xe+2],N[xe+3],N[xe+4])]),oe=0;4>oe;++oe)r(N,$+32*oe,xe,0,xe.length)}function Rr(N,$){var oe=N[$-1],xe=N[$-1+32],ze=N[$-1+64],Ke=N[$-1+96];ht(N,$+0,16843009*Cr(N[$-1-32],oe,xe)),ht(N,$+32,16843009*Cr(oe,xe,ze)),ht(N,$+64,16843009*Cr(xe,ze,Ke)),ht(N,$+96,16843009*Cr(ze,Ke,Ke))}function Ni(N,$){var oe,xe=4;for(oe=0;4>oe;++oe)xe+=N[$+oe-32]+N[$-1+32*oe];for(xe>>=3,oe=0;4>oe;++oe)i(N,$+32*oe,xe,4)}function ta(N,$){var oe=N[$-1+0],xe=N[$-1+32],ze=N[$-1+64],Ke=N[$-1-32],Je=N[$+0-32],rt=N[$+1-32],ot=N[$+2-32],yt=N[$+3-32];N[$+0+96]=Cr(xe,ze,N[$-1+96]),N[$+1+96]=N[$+0+64]=Cr(oe,xe,ze),N[$+2+96]=N[$+1+64]=N[$+0+32]=Cr(Ke,oe,xe),N[$+3+96]=N[$+2+64]=N[$+1+32]=N[$+0+0]=Cr(Je,Ke,oe),N[$+3+64]=N[$+2+32]=N[$+1+0]=Cr(rt,Je,Ke),N[$+3+32]=N[$+2+0]=Cr(ot,rt,Je),N[$+3+0]=Cr(yt,ot,rt)}function di(N,$){var oe=N[$+1-32],xe=N[$+2-32],ze=N[$+3-32],Ke=N[$+4-32],Je=N[$+5-32],rt=N[$+6-32],ot=N[$+7-32];N[$+0+0]=Cr(N[$+0-32],oe,xe),N[$+1+0]=N[$+0+32]=Cr(oe,xe,ze),N[$+2+0]=N[$+1+32]=N[$+0+64]=Cr(xe,ze,Ke),N[$+3+0]=N[$+2+32]=N[$+1+64]=N[$+0+96]=Cr(ze,Ke,Je),N[$+3+32]=N[$+2+64]=N[$+1+96]=Cr(Ke,Je,rt),N[$+3+64]=N[$+2+96]=Cr(Je,rt,ot),N[$+3+96]=Cr(rt,ot,ot)}function js(N,$){var oe=N[$-1+0],xe=N[$-1+32],ze=N[$-1+64],Ke=N[$-1-32],Je=N[$+0-32],rt=N[$+1-32],ot=N[$+2-32],yt=N[$+3-32];N[$+0+0]=N[$+1+64]=Ke+Je+1>>1,N[$+1+0]=N[$+2+64]=Je+rt+1>>1,N[$+2+0]=N[$+3+64]=rt+ot+1>>1,N[$+3+0]=ot+yt+1>>1,N[$+0+96]=Cr(ze,xe,oe),N[$+0+64]=Cr(xe,oe,Ke),N[$+0+32]=N[$+1+96]=Cr(oe,Ke,Je),N[$+1+32]=N[$+2+96]=Cr(Ke,Je,rt),N[$+2+32]=N[$+3+96]=Cr(Je,rt,ot),N[$+3+32]=Cr(rt,ot,yt)}function _i(N,$){var oe=N[$+0-32],xe=N[$+1-32],ze=N[$+2-32],Ke=N[$+3-32],Je=N[$+4-32],rt=N[$+5-32],ot=N[$+6-32],yt=N[$+7-32];N[$+0+0]=oe+xe+1>>1,N[$+1+0]=N[$+0+64]=xe+ze+1>>1,N[$+2+0]=N[$+1+64]=ze+Ke+1>>1,N[$+3+0]=N[$+2+64]=Ke+Je+1>>1,N[$+0+32]=Cr(oe,xe,ze),N[$+1+32]=N[$+0+96]=Cr(xe,ze,Ke),N[$+2+32]=N[$+1+96]=Cr(ze,Ke,Je),N[$+3+32]=N[$+2+96]=Cr(Ke,Je,rt),N[$+3+64]=Cr(Je,rt,ot),N[$+3+96]=Cr(rt,ot,yt)}function Ir(N,$){var oe=N[$-1+0],xe=N[$-1+32],ze=N[$-1+64],Ke=N[$-1+96];N[$+0+0]=oe+xe+1>>1,N[$+2+0]=N[$+0+32]=xe+ze+1>>1,N[$+2+32]=N[$+0+64]=ze+Ke+1>>1,N[$+1+0]=Cr(oe,xe,ze),N[$+3+0]=N[$+1+32]=Cr(xe,ze,Ke),N[$+3+32]=N[$+1+64]=Cr(ze,Ke,Ke),N[$+3+64]=N[$+2+64]=N[$+0+96]=N[$+1+96]=N[$+2+96]=N[$+3+96]=Ke}function Gl(N,$){var oe=N[$-1+0],xe=N[$-1+32],ze=N[$-1+64],Ke=N[$-1+96],Je=N[$-1-32],rt=N[$+0-32],ot=N[$+1-32],yt=N[$+2-32];N[$+0+0]=N[$+2+32]=oe+Je+1>>1,N[$+0+32]=N[$+2+64]=xe+oe+1>>1,N[$+0+64]=N[$+2+96]=ze+xe+1>>1,N[$+0+96]=Ke+ze+1>>1,N[$+3+0]=Cr(rt,ot,yt),N[$+2+0]=Cr(Je,rt,ot),N[$+1+0]=N[$+3+32]=Cr(oe,Je,rt),N[$+1+32]=N[$+3+64]=Cr(xe,oe,Je),N[$+1+64]=N[$+3+96]=Cr(ze,xe,oe),N[$+1+96]=Cr(Ke,ze,xe)}function ji(N,$){var oe;for(oe=0;8>oe;++oe)r(N,$+32*oe,N,$-32,8)}function Po(N,$){var oe;for(oe=0;8>oe;++oe)i(N,$,N[$-1],8),$+=32}function vo(N,$,oe){var xe;for(xe=0;8>xe;++xe)i($,oe+32*xe,N,8)}function tl(N,$){var oe,xe=8;for(oe=0;8>oe;++oe)xe+=N[$+oe-32]+N[$-1+32*oe];vo(xe>>4,N,$)}function Ro(N,$){var oe,xe=4;for(oe=0;8>oe;++oe)xe+=N[$+oe-32];vo(xe>>3,N,$)}function jo(N,$){var oe,xe=4;for(oe=0;8>oe;++oe)xe+=N[$-1+32*oe];vo(xe>>3,N,$)}function nl(N,$){vo(128,N,$)}function Es(N,$,oe){var xe=N[$-oe],ze=N[$+0],Ke=3*(ze-xe)+Pl[1020+N[$-2*oe]-N[$+oe]],Je=Hs[112+(Ke+4>>3)];N[$-oe]=ls[255+xe+Hs[112+(Ke+3>>3)]],N[$+0]=ls[255+ze-Je]}function Kh(N,$,oe,xe){var ze=N[$+0],Ke=N[$+oe];return Ga[255+N[$-2*oe]-N[$-oe]]>xe||Ga[255+Ke-ze]>xe}function Zu(N,$,oe,xe){return 4*Ga[255+N[$-oe]-N[$+0]]+Ga[255+N[$-2*oe]-N[$+oe]]<=xe}function hc(N,$,oe,xe,ze){var Ke=N[$-3*oe],Je=N[$-2*oe],rt=N[$-oe],ot=N[$+0],yt=N[$+oe],en=N[$+2*oe],bn=N[$+3*oe];return 4*Ga[255+rt-ot]+Ga[255+Je-yt]>xe?0:Ga[255+N[$-4*oe]-Ke]<=ze&&Ga[255+Ke-Je]<=ze&&Ga[255+Je-rt]<=ze&&Ga[255+bn-en]<=ze&&Ga[255+en-yt]<=ze&&Ga[255+yt-ot]<=ze}function Ml(N,$,oe,xe){var ze=2*xe+1;for(xe=0;16>xe;++xe)Zu(N,$+xe,oe,ze)&&Es(N,$+xe,oe)}function Pa(N,$,oe,xe){var ze=2*xe+1;for(xe=0;16>xe;++xe)Zu(N,$+xe*oe,1,ze)&&Es(N,$+xe*oe,1)}function Wa(N,$,oe,xe){var ze;for(ze=3;0<ze;--ze)Ml(N,$+=4*oe,oe,xe)}function eh(N,$,oe,xe){var ze;for(ze=3;0<ze;--ze)Pa(N,$+=4,oe,xe)}function Do(N,$,oe,xe,ze,Ke,Je,rt){for(Ke=2*Ke+1;0<ze--;){if(hc(N,$,oe,Ke,Je))if(Kh(N,$,oe,rt))Es(N,$,oe);else{var ot=N,yt=$,en=oe,bn=ot[yt-2*en],mn=ot[yt-en],un=ot[yt+0],Rn=ot[yt+en],Mn=ot[yt+2*en],Vt=27*(Yn=Pl[1020+3*(un-mn)+Pl[1020+bn-Rn]])+63>>7,on=18*Yn+63>>7,Yn=9*Yn+63>>7;ot[yt-3*en]=ls[255+ot[yt-3*en]+Yn],ot[yt-2*en]=ls[255+bn+on],ot[yt-en]=ls[255+mn+Vt],ot[yt+0]=ls[255+un-Vt],ot[yt+en]=ls[255+Rn-on],ot[yt+2*en]=ls[255+Mn-Yn]}$+=xe}}function ia(N,$,oe,xe,ze,Ke,Je,rt){for(Ke=2*Ke+1;0<ze--;){if(hc(N,$,oe,Ke,Je))if(Kh(N,$,oe,rt))Es(N,$,oe);else{var ot=N,yt=$,en=oe,bn=ot[yt-en],mn=ot[yt+0],un=ot[yt+en],Rn=Hs[112+((Mn=3*(mn-bn))+4>>3)],Mn=Hs[112+(Mn+3>>3)],Vt=Rn+1>>1;ot[yt-2*en]=ls[255+ot[yt-2*en]+Vt],ot[yt-en]=ls[255+bn+Mn],ot[yt+0]=ls[255+mn-Rn],ot[yt+en]=ls[255+un-Vt]}$+=xe}}function hu(N,$,oe,xe,ze,Ke){Do(N,$,oe,1,16,xe,ze,Ke)}function fu(N,$,oe,xe,ze,Ke){Do(N,$,1,oe,16,xe,ze,Ke)}function as(N,$,oe,xe,ze,Ke){var Je;for(Je=3;0<Je;--Je)ia(N,$+=4*oe,oe,1,16,xe,ze,Ke)}function Nc(N,$,oe,xe,ze,Ke){var Je;for(Je=3;0<Je;--Je)ia(N,$+=4,1,oe,16,xe,ze,Ke)}function kc(N,$,oe,xe,ze,Ke,Je,rt){Do(N,$,ze,1,8,Ke,Je,rt),Do(oe,xe,ze,1,8,Ke,Je,rt)}function Fc(N,$,oe,xe,ze,Ke,Je,rt){Do(N,$,1,ze,8,Ke,Je,rt),Do(oe,xe,1,ze,8,Ke,Je,rt)}function Bc(N,$,oe,xe,ze,Ke,Je,rt){ia(N,$+4*ze,ze,1,8,Ke,Je,rt),ia(oe,xe+4*ze,ze,1,8,Ke,Je,rt)}function Cu(N,$,oe,xe,ze,Ke,Je,rt){ia(N,$+4,1,ze,8,Ke,Je,rt),ia(oe,xe+4,1,ze,8,Ke,Je,rt)}function Pu(){this.ba=new et,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Vo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function fc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function os(){this.ua=0,this.Wa=new Xe,this.vb=new Xe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new se,this.yc=new re}function th(){this.xb=this.a=0,this.l=new gi,this.ca=new et,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new fe,this.Pb=0,this.wd=new fe,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new os,this.ab=0,this.gc=l(4,fc),this.Oc=0}function Ru(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new gi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ts(N,$,oe,xe,ze,Ke,Je){for(N=N==null?0:N[$+0],$=0;$<Je;++$)ze[Ke+$]=N+oe[xe+$]&255,N=ze[Ke+$]}function dc(N,$,oe,xe,ze,Ke,Je){var rt;if(N==null)Ts(null,null,oe,xe,ze,Ke,Je);else for(rt=0;rt<Je;++rt)ze[Ke+rt]=N[$+rt]+oe[xe+rt]&255}function rl(N,$,oe,xe,ze,Ke,Je){if(N==null)Ts(null,null,oe,xe,ze,Ke,Je);else{var rt,ot=N[$+0],yt=ot,en=ot;for(rt=0;rt<Je;++rt)yt=en+(ot=N[$+rt])-yt,en=oe[xe+rt]+(-256&yt?0>yt?0:255:yt)&255,yt=ot,ze[Ke+rt]=en}}function du(N,$,oe,xe){var ze=$.width,Ke=$.o;if(e(N!=null&&$!=null),0>oe||0>=xe||oe+xe>Ke)return null;if(!N.Cc){if(N.ga==null){var Je;if(N.ga=new Ru,(Je=N.ga==null)||(Je=$.width*$.o,e(N.Gb.length==0),N.Gb=o(Je),N.Uc=0,N.Gb==null?Je=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Je=1),Je=!Je),!Je){Je=N.ga;var rt=N.Fa,ot=N.P,yt=N.qc,en=N.mb,bn=N.nb,mn=ot+1,un=yt-1,Rn=Je.l;if(e(rt!=null&&en!=null&&$!=null),yu[0]=null,yu[1]=Ts,yu[2]=dc,yu[3]=rl,Je.ca=en,Je.tb=bn,Je.c=$.width,Je.i=$.height,e(0<Je.c&&0<Je.i),1>=yt)$=0;else if(Je.$a=rt[ot+0]>>0&3,Je.Z=rt[ot+0]>>2&3,Je.Lc=rt[ot+0]>>4&3,ot=rt[ot+0]>>6&3,0>Je.$a||1<Je.$a||4<=Je.Z||1<Je.Lc||ot)$=0;else if(Rn.put=qt,Rn.ac=Tn,Rn.bc=Zn,Rn.ma=Je,Rn.width=$.width,Rn.height=$.height,Rn.Da=$.Da,Rn.v=$.v,Rn.va=$.va,Rn.j=$.j,Rn.o=$.o,Je.$a)e:{e(Je.$a==1),$=Vr();t:for(;;){if($==null){$=0;break e}if(e(Je!=null),Je.mc=$,$.c=Je.c,$.i=Je.i,$.l=Je.l,$.l.ma=Je,$.l.width=Je.c,$.l.height=Je.i,$.a=0,pe($.m,rt,mn,un),!Ca(Je.c,Je.i,1,$,null)||($.ab==1&&$.gc[0].hc==3&&Er($.s)?(Je.ic=1,rt=$.c*$.i,$.Ta=null,$.Ua=0,$.V=o(rt),$.Ba=0,$.V==null?($.a=1,$=0):$=1):(Je.ic=0,$=ra($,Je.c)),!$))break t;$=1;break e}Je.mc=null,$=0}else $=un>=Je.c*Je.i;Je=!$}if(Je)return null;N.ga.Lc!=1?N.Ga=0:xe=Ke-oe}e(N.ga!=null),e(oe+xe<=Ke);e:{if($=(rt=N.ga).c,Ke=rt.l.o,rt.$a==0){if(mn=N.rc,un=N.Vc,Rn=N.Fa,ot=N.P+1+oe*$,yt=N.mb,en=N.nb+oe*$,e(ot<=N.P+N.qc),rt.Z!=0)for(e(yu[rt.Z]!=null),Je=0;Je<xe;++Je)yu[rt.Z](mn,un,Rn,ot,yt,en,$),mn=yt,un=en,en+=$,ot+=$;else for(Je=0;Je<xe;++Je)r(yt,en,Rn,ot,$),mn=yt,un=en,en+=$,ot+=$;N.rc=mn,N.Vc=un}else{if(e(rt.mc!=null),$=oe+xe,e((Je=rt.mc)!=null),e($<=Je.i),Je.C>=$)$=1;else if(rt.ic||yn(),rt.ic){rt=Je.V,mn=Je.Ba,un=Je.c;var Mn=Je.i,Vt=(Rn=1,ot=Je.$/un,yt=Je.$%un,en=Je.m,bn=Je.s,Je.$),on=un*Mn,Yn=un*$,Xn=bn.wc,Qn=Vt<Yn?sn(bn,yt,ot):null;e(Vt<=on),e($<=Mn),e(Er(bn));t:for(;;){for(;!en.h&&Vt<Yn;){if(yt&Xn||(Qn=sn(bn,yt,ot)),e(Qn!=null),Se(en),256>(Mn=je(Qn.G[0],Qn.H[0],en)))rt[mn+Vt]=Mn,++Vt,++yt>=un&&(yt=0,++ot<=$&&!(ot%16)&&Ri(Je,ot));else{if(!(280>Mn)){Rn=0;break t}Mn=we(Mn-256,en);var jn,Bn=je(Qn.G[4],Qn.H[4],en);if(Se(en),!(Vt>=(Bn=Ne(un,Bn=we(Bn,en)))&&on-Vt>=Mn)){Rn=0;break t}for(jn=0;jn<Mn;++jn)rt[mn+Vt+jn]=rt[mn+Vt+jn-Bn];for(Vt+=Mn,yt+=Mn;yt>=un;)yt-=un,++ot<=$&&!(ot%16)&&Ri(Je,ot);Vt<Yn&&yt&Xn&&(Qn=sn(bn,yt,ot))}e(en.h==le(en))}Ri(Je,ot>$?$:ot);break t}!Rn||en.h&&Vt<on?(Rn=0,Je.a=en.h?5:3):Je.$=Vt,$=Rn}else $=ci(Je,Je.V,Je.Ba,Je.c,Je.i,$,mi);if(!$){xe=0;break e}}oe+xe>=Ke&&(N.Cc=1),xe=1}if(!xe)return null;if(N.Cc&&((xe=N.ga)!=null&&(xe.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+oe*ze}function ee(N,$,oe,xe,ze,Ke){for(;0<ze--;){var Je,rt=N,ot=$+(oe?1:0),yt=N,en=$+(oe?0:3);for(Je=0;Je<xe;++Je){var bn=yt[en+4*Je];bn!=255&&(bn*=32897,rt[ot+4*Je+0]=rt[ot+4*Je+0]*bn>>23,rt[ot+4*Je+1]=rt[ot+4*Je+1]*bn>>23,rt[ot+4*Je+2]=rt[ot+4*Je+2]*bn>>23)}$+=Ke}}function Ue(N,$,oe,xe,ze){for(;0<xe--;){var Ke;for(Ke=0;Ke<oe;++Ke){var Je=N[$+2*Ke+0],rt=15&(yt=N[$+2*Ke+1]),ot=4369*rt,yt=(240&yt|yt>>4)*ot>>16;N[$+2*Ke+0]=(240&Je|Je>>4)*ot>>16&240|(15&Je|Je<<4)*ot>>16>>4&15,N[$+2*Ke+1]=240&yt|rt}$+=ze}}function Mt(N,$,oe,xe,ze,Ke,Je,rt){var ot,yt,en=255;for(yt=0;yt<ze;++yt){for(ot=0;ot<xe;++ot){var bn=N[$+ot];Ke[Je+4*ot]=bn,en&=bn}$+=oe,Je+=rt}return en!=255}function Zt(N,$,oe,xe,ze){var Ke;for(Ke=0;Ke<ze;++Ke)oe[xe+Ke]=N[$+Ke]>>8}function yn(){Da=ee,zi=Ue,bi=Mt,Sa=Zt}function qn(N,$,oe){Y[N]=function(xe,ze,Ke,Je,rt,ot,yt,en,bn,mn,un,Rn,Mn,Vt,on,Yn,Xn){var Qn,jn=Xn-1>>1,Bn=rt[ot+0]|yt[en+0]<<16,ri=bn[mn+0]|un[Rn+0]<<16;e(xe!=null);var br=3*Bn+ri+131074>>2;for($(xe[ze+0],255&br,br>>16,Mn,Vt),Ke!=null&&(br=3*ri+Bn+131074>>2,$(Ke[Je+0],255&br,br>>16,on,Yn)),Qn=1;Qn<=jn;++Qn){var ua=rt[ot+Qn]|yt[en+Qn]<<16,Li=bn[mn+Qn]|un[Rn+Qn]<<16,ca=Bn+ua+ri+Li+524296,Ai=ca+2*(ua+ri)>>3;br=Ai+Bn>>1,Bn=(ca=ca+2*(Bn+Li)>>3)+ua>>1,$(xe[ze+2*Qn-1],255&br,br>>16,Mn,Vt+(2*Qn-1)*oe),$(xe[ze+2*Qn-0],255&Bn,Bn>>16,Mn,Vt+(2*Qn-0)*oe),Ke!=null&&(br=ca+ri>>1,Bn=Ai+Li>>1,$(Ke[Je+2*Qn-1],255&br,br>>16,on,Yn+(2*Qn-1)*oe),$(Ke[Je+2*Qn+0],255&Bn,Bn>>16,on,Yn+(2*Qn+0)*oe)),Bn=ua,ri=Li}1&Xn||(br=3*Bn+ri+131074>>2,$(xe[ze+Xn-1],255&br,br>>16,Mn,Vt+(Xn-1)*oe),Ke!=null&&(br=3*ri+Bn+131074>>2,$(Ke[Je+Xn-1],255&br,br>>16,on,Yn+(Xn-1)*oe)))}}function fr(){ll[$s]=Qh,ll[Rl]=ih,ll[Lu]=Qu,ll[vu]=uo,ll[Ps]=Wo,ll[Wl]=Rf,ll[Uc]=Ll,ll[Dl]=ih,ll[Xl]=uo,ll[Iu]=Wo,ll[Jh]=Rf}function Or(N){return N&-16384?0>N?0:255:N>>ku}function Gr(N,$){return Or((19077*N>>8)+(26149*$>>8)-14234)}function wi(N,$,oe){return Or((19077*N>>8)-(6419*$>>8)-(13320*oe>>8)+8708)}function oi(N,$){return Or((19077*N>>8)+(33050*$>>8)-17685)}function Mi(N,$,oe,xe,ze){xe[ze+0]=Gr(N,oe),xe[ze+1]=wi(N,$,oe),xe[ze+2]=oi(N,$)}function ya(N,$,oe,xe,ze){xe[ze+0]=oi(N,$),xe[ze+1]=wi(N,$,oe),xe[ze+2]=Gr(N,oe)}function ka(N,$,oe,xe,ze){var Ke=wi(N,$,oe);$=Ke<<3&224|oi(N,$)>>3,xe[ze+0]=248&Gr(N,oe)|Ke>>5,xe[ze+1]=$}function aa(N,$,oe,xe,ze){var Ke=240&oi(N,$)|15;xe[ze+0]=240&Gr(N,oe)|wi(N,$,oe)>>4,xe[ze+1]=Ke}function yo(N,$,oe,xe,ze){xe[ze+0]=255,Mi(N,$,oe,xe,ze+1)}function _o(N,$,oe,xe,ze){ya(N,$,oe,xe,ze),xe[ze+3]=255}function So(N,$,oe,xe,ze){Mi(N,$,oe,xe,ze),xe[ze+3]=255}function il(N,$){return 0>N?0:N>$?$:N}function Vs(N,$,oe){Y[N]=function(xe,ze,Ke,Je,rt,ot,yt,en,bn){for(var mn=en+(-2&bn)*oe;en!=mn;)$(xe[ze+0],Ke[Je+0],rt[ot+0],yt,en),$(xe[ze+1],Ke[Je+0],rt[ot+0],yt,en+oe),ze+=2,++Je,++ot,en+=2*oe;1&bn&&$(xe[ze+0],Ke[Je+0],rt[ot+0],yt,en)}}function Sh(N,$,oe){return oe==0?N==0?$==0?6:5:$==0?4:0:oe}function Du(N,$,oe,xe,ze){switch(N>>>30){case 3:Fa($,oe,xe,ze,0);break;case 2:si($,oe,xe,ze);break;case 1:wa($,oe,xe,ze)}}function ql(N,$){var oe,xe,ze=$.M,Ke=$.Nb,Je=N.oc,rt=N.pc+40,ot=N.oc,yt=N.pc+584,en=N.oc,bn=N.pc+600;for(oe=0;16>oe;++oe)Je[rt+32*oe-1]=129;for(oe=0;8>oe;++oe)ot[yt+32*oe-1]=129,en[bn+32*oe-1]=129;for(0<ze?Je[rt-1-32]=ot[yt-1-32]=en[bn-1-32]=129:(i(Je,rt-32-1,127,21),i(ot,yt-32-1,127,9),i(en,bn-32-1,127,9)),xe=0;xe<N.za;++xe){var mn=$.ya[$.aa+xe];if(0<xe){for(oe=-1;16>oe;++oe)r(Je,rt+32*oe-4,Je,rt+32*oe+12,4);for(oe=-1;8>oe;++oe)r(ot,yt+32*oe-4,ot,yt+32*oe+4,4),r(en,bn+32*oe-4,en,bn+32*oe+4,4)}var un=N.Gd,Rn=N.Hd+xe,Mn=mn.ad,Vt=mn.Hc;if(0<ze&&(r(Je,rt-32,un[Rn].y,0,16),r(ot,yt-32,un[Rn].f,0,8),r(en,bn-32,un[Rn].ea,0,8)),mn.Za){var on=Je,Yn=rt-32+16;for(0<ze&&(xe>=N.za-1?i(on,Yn,un[Rn].y[15],4):r(on,Yn,un[Rn+1].y,0,4)),oe=0;4>oe;oe++)on[Yn+128+oe]=on[Yn+256+oe]=on[Yn+384+oe]=on[Yn+0+oe];for(oe=0;16>oe;++oe,Vt<<=2)on=Je,Yn=rt+Vc[oe],Xs[mn.Ob[oe]](on,Yn),Du(Vt,Mn,16*+oe,on,Yn)}else if(on=Sh(xe,ze,mn.Ob[0]),Ds[on](Je,rt),Vt!=0)for(oe=0;16>oe;++oe,Vt<<=2)Du(Vt,Mn,16*+oe,Je,rt+Vc[oe]);for(oe=mn.Gc,on=Sh(xe,ze,mn.Dd),Zl[on](ot,yt),Zl[on](en,bn),Vt=Mn,on=ot,Yn=yt,255&(mn=oe>>0)&&(170&mn?Qa(Vt,256,on,Yn):Va(Vt,256,on,Yn)),mn=en,Vt=bn,255&(oe>>=8)&&(170&oe?Qa(Mn,320,mn,Vt):Va(Mn,320,mn,Vt)),ze<N.Ub-1&&(r(un[Rn].y,0,Je,rt+480,16),r(un[Rn].f,0,ot,yt+224,8),r(un[Rn].ea,0,en,bn+224,8)),oe=8*Ke*N.B,un=N.sa,Rn=N.ta+16*xe+16*Ke*N.R,Mn=N.qa,mn=N.ra+8*xe+oe,Vt=N.Ha,on=N.Ia+8*xe+oe,oe=0;16>oe;++oe)r(un,Rn+oe*N.R,Je,rt+32*oe,16);for(oe=0;8>oe;++oe)r(Mn,mn+oe*N.B,ot,yt+32*oe,8),r(Vt,on+oe*N.B,en,bn+32*oe,8)}}function pc(N,$,oe,xe,ze,Ke,Je,rt,ot){var yt=[0],en=[0],bn=0,mn=ot!=null?ot.kd:0,un=ot??new Vo;if(N==null||12>oe)return 7;un.data=N,un.w=$,un.ha=oe,$=[$],oe=[oe],un.gb=[un.gb];e:{var Rn=$,Mn=oe,Vt=un.gb;if(e(N!=null),e(Mn!=null),e(Vt!=null),Vt[0]=0,12<=Mn[0]&&!n(N,Rn[0],"RIFF")){if(n(N,Rn[0]+8,"WEBP")){Vt=3;break e}var on=$t(N,Rn[0]+4);if(12>on||4294967286<on){Vt=3;break e}if(mn&&on>Mn[0]-8){Vt=7;break e}Vt[0]=on,Rn[0]+=12,Mn[0]-=12}Vt=0}if(Vt!=0)return Vt;for(on=0<un.gb[0],oe=oe[0];;){e:{var Yn=N;Mn=$,Vt=oe;var Xn=yt,Qn=en,jn=Rn=[0];if((br=bn=[bn])[0]=0,8>Vt[0])Vt=7;else{if(!n(Yn,Mn[0],"VP8X")){if($t(Yn,Mn[0]+4)!=10){Vt=3;break e}if(18>Vt[0]){Vt=7;break e}var Bn=$t(Yn,Mn[0]+8),ri=1+gt(Yn,Mn[0]+12);if(2147483648<=ri*(Yn=1+gt(Yn,Mn[0]+15))){Vt=3;break e}jn!=null&&(jn[0]=Bn),Xn!=null&&(Xn[0]=ri),Qn!=null&&(Qn[0]=Yn),Mn[0]+=18,Vt[0]-=18,br[0]=1}Vt=0}}if(bn=bn[0],Rn=Rn[0],Vt!=0)return Vt;if(Mn=!!(2&Rn),!on&&bn)return 3;if(Ke!=null&&(Ke[0]=!!(16&Rn)),Je!=null&&(Je[0]=Mn),rt!=null&&(rt[0]=0),Je=yt[0],Rn=en[0],bn&&Mn&&ot==null){Vt=0;break}if(4>oe){Vt=7;break}if(on&&bn||!on&&!bn&&!n(N,$[0],"ALPH")){oe=[oe],un.na=[un.na],un.P=[un.P],un.Sa=[un.Sa];e:{Bn=N,Vt=$,on=oe;var br=un.gb;Xn=un.na,Qn=un.P,jn=un.Sa,ri=22,e(Bn!=null),e(on!=null),Yn=Vt[0];var ua=on[0];for(e(Xn!=null),e(jn!=null),Xn[0]=null,Qn[0]=null,jn[0]=0;;){if(Vt[0]=Yn,on[0]=ua,8>ua){Vt=7;break e}var Li=$t(Bn,Yn+4);if(4294967286<Li){Vt=3;break e}var ca=8+Li+1&-2;if(ri+=ca,0<br&&ri>br){Vt=3;break e}if(!n(Bn,Yn,"VP8 ")||!n(Bn,Yn,"VP8L")){Vt=0;break e}if(ua[0]<ca){Vt=7;break e}n(Bn,Yn,"ALPH")||(Xn[0]=Bn,Qn[0]=Yn+8,jn[0]=Li),Yn+=ca,ua-=ca}}if(oe=oe[0],un.na=un.na[0],un.P=un.P[0],un.Sa=un.Sa[0],Vt!=0)break}oe=[oe],un.Ja=[un.Ja],un.xa=[un.xa];e:if(br=N,Vt=$,on=oe,Xn=un.gb[0],Qn=un.Ja,jn=un.xa,Bn=Vt[0],Yn=!n(br,Bn,"VP8 "),ri=!n(br,Bn,"VP8L"),e(br!=null),e(on!=null),e(Qn!=null),e(jn!=null),8>on[0])Vt=7;else{if(Yn||ri){if(br=$t(br,Bn+4),12<=Xn&&br>Xn-12){Vt=3;break e}if(mn&&br>on[0]-8){Vt=7;break e}Qn[0]=br,Vt[0]+=8,on[0]-=8,jn[0]=ri}else jn[0]=5<=on[0]&&br[Bn+0]==47&&!(br[Bn+4]>>5),Qn[0]=on[0];Vt=0}if(oe=oe[0],un.Ja=un.Ja[0],un.xa=un.xa[0],$=$[0],Vt!=0)break;if(4294967286<un.Ja)return 3;if(rt==null||Mn||(rt[0]=un.xa?2:1),Je=[Je],Rn=[Rn],un.xa){if(5>oe){Vt=7;break}rt=Je,mn=Rn,Mn=Ke,N==null||5>oe?N=0:5<=oe&&N[$+0]==47&&!(N[$+4]>>5)?(on=[0],br=[0],Xn=[0],pe(Qn=new fe,N,$,oe),Gn(Qn,on,br,Xn)?(rt!=null&&(rt[0]=on[0]),mn!=null&&(mn[0]=br[0]),Mn!=null&&(Mn[0]=Xn[0]),N=1):N=0):N=0}else{if(10>oe){Vt=7;break}rt=Rn,N==null||10>oe||!Wi(N,$+3,oe-3)?N=0:(mn=N[$+0]|N[$+1]<<8|N[$+2]<<16,Mn=16383&(N[$+7]<<8|N[$+6]),N=16383&(N[$+9]<<8|N[$+8]),1&mn||3<(mn>>1&7)||!(mn>>4&1)||mn>>5>=un.Ja||!Mn||!N?N=0:(Je&&(Je[0]=Mn),rt&&(rt[0]=N),N=1))}if(!N||(Je=Je[0],Rn=Rn[0],bn&&(yt[0]!=Je||en[0]!=Rn)))return 3;ot!=null&&(ot[0]=un,ot.offset=$-ot.w,e(4294967286>$-ot.w),e(ot.offset==ot.ha-oe));break}return Vt==0||Vt==7&&bn&&ot==null?(Ke!=null&&(Ke[0]|=un.na!=null&&0<un.na.length),xe!=null&&(xe[0]=Je),ze!=null&&(ze[0]=Rn),0):Vt}function Hl(N,$,oe){var xe=$.width,ze=$.height,Ke=0,Je=0,rt=xe,ot=ze;if($.Da=N!=null&&0<N.Da,$.Da&&(rt=N.cd,ot=N.bd,Ke=N.v,Je=N.j,11>oe||(Ke&=-2,Je&=-2),0>Ke||0>Je||0>=rt||0>=ot||Ke+rt>xe||Je+ot>ze))return 0;if($.v=Ke,$.j=Je,$.va=Ke+rt,$.o=Je+ot,$.U=rt,$.T=ot,$.da=N!=null&&0<N.da,$.da){if(!tn(rt,ot,oe=[N.ib],Ke=[N.hb]))return 0;$.ib=oe[0],$.hb=Ke[0]}return $.ob=N!=null&&N.ob,$.Kb=N==null||!N.Sd,$.da&&($.ob=$.ib<3*xe/4&&$.hb<3*ze/4,$.Kb=0),1}function al(N){if(N==null)return 2;if(11>N.S){var $=N.f.RGBA;$.fb+=(N.height-1)*$.A,$.A=-$.A}else $=N.f.kb,N=N.height,$.O+=(N-1)*$.fa,$.fa=-$.fa,$.N+=(N-1>>1)*$.Ab,$.Ab=-$.Ab,$.W+=(N-1>>1)*$.Db,$.Db=-$.Db,$.F!=null&&($.J+=(N-1)*$.lb,$.lb=-$.lb);return 0}function Yu(N,$,oe,xe){if(xe==null||0>=N||0>=$)return 2;if(oe!=null){if(oe.Da){var ze=oe.cd,Ke=oe.bd,Je=-2&oe.v,rt=-2&oe.j;if(0>Je||0>rt||0>=ze||0>=Ke||Je+ze>N||rt+Ke>$)return 2;N=ze,$=Ke}if(oe.da){if(!tn(N,$,ze=[oe.ib],Ke=[oe.hb]))return 2;N=ze[0],$=Ke[0]}}xe.width=N,xe.height=$;e:{var ot=xe.width,yt=xe.height;if(N=xe.S,0>=ot||0>=yt||!(N>=$s&&13>N))N=2;else{if(0>=xe.Rd&&xe.sd==null){Je=Ke=ze=$=0;var en=(rt=ot*Ph[N])*yt;if(11>N||(Ke=(yt+1)/2*($=(ot+1)/2),N==12&&(Je=(ze=ot)*yt)),(yt=o(en+2*Ke+Je))==null){N=1;break e}xe.sd=yt,11>N?((ot=xe.f.RGBA).eb=yt,ot.fb=0,ot.A=rt,ot.size=en):((ot=xe.f.kb).y=yt,ot.O=0,ot.fa=rt,ot.Fd=en,ot.f=yt,ot.N=0+en,ot.Ab=$,ot.Cd=Ke,ot.ea=yt,ot.W=0+en+Ke,ot.Db=$,ot.Ed=Ke,N==12&&(ot.F=yt,ot.J=0+en+2*Ke),ot.Tc=Je,ot.lb=ze)}if($=1,ze=xe.S,Ke=xe.width,Je=xe.height,ze>=$s&&13>ze)if(11>ze)N=xe.f.RGBA,$&=(rt=Math.abs(N.A))*(Je-1)+Ke<=N.size,$&=rt>=Ke*Ph[ze],$&=N.eb!=null;else{N=xe.f.kb,rt=(Ke+1)/2,en=(Je+1)/2,ot=Math.abs(N.fa),yt=Math.abs(N.Ab);var bn=Math.abs(N.Db),mn=Math.abs(N.lb),un=mn*(Je-1)+Ke;$&=ot*(Je-1)+Ke<=N.Fd,$&=yt*(en-1)+rt<=N.Cd,$=($&=bn*(en-1)+rt<=N.Ed)&ot>=Ke&yt>=rt&bn>=rt,$&=N.y!=null,$&=N.f!=null,$&=N.ea!=null,ze==12&&($&=mn>=Ke,$&=un<=N.Tc,$&=N.F!=null)}else $=0;N=$?0:2}}return N!=0||oe!=null&&oe.fd&&(N=al(xe)),N}var Ra=64,Ms=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Gs=24,pu=32,mc=8,ss=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ht("Predictor0","PredictorAdd0"),Y.Predictor0=function(){return 4278190080},Y.Predictor1=function(N){return N},Y.Predictor2=function(N,$,oe){return $[oe+0]},Y.Predictor3=function(N,$,oe){return $[oe+1]},Y.Predictor4=function(N,$,oe){return $[oe-1]},Y.Predictor5=function(N,$,oe){return Ee(Ee(N,$[oe+1]),$[oe+0])},Y.Predictor6=function(N,$,oe){return Ee(N,$[oe-1])},Y.Predictor7=function(N,$,oe){return Ee(N,$[oe+0])},Y.Predictor8=function(N,$,oe){return Ee($[oe-1],$[oe+0])},Y.Predictor9=function(N,$,oe){return Ee($[oe+0],$[oe+1])},Y.Predictor10=function(N,$,oe){return Ee(Ee(N,$[oe-1]),Ee($[oe+0],$[oe+1]))},Y.Predictor11=function(N,$,oe){var xe=$[oe+0];return 0>=vt(xe>>24&255,N>>24&255,($=$[oe-1])>>24&255)+vt(xe>>16&255,N>>16&255,$>>16&255)+vt(xe>>8&255,N>>8&255,$>>8&255)+vt(255&xe,255&N,255&$)?xe:N},Y.Predictor12=function(N,$,oe){var xe=$[oe+0];return(_t((N>>24&255)+(xe>>24&255)-(($=$[oe-1])>>24&255))<<24|_t((N>>16&255)+(xe>>16&255)-($>>16&255))<<16|_t((N>>8&255)+(xe>>8&255)-($>>8&255))<<8|_t((255&N)+(255&xe)-(255&$)))>>>0},Y.Predictor13=function(N,$,oe){var xe=$[oe-1];return(jt((N=Ee(N,$[oe+0]))>>24&255,xe>>24&255)<<24|jt(N>>16&255,xe>>16&255)<<16|jt(N>>8&255,xe>>8&255)<<8|jt(N>>0&255,xe>>0&255))>>>0};var zc=Y.PredictorAdd0;Y.PredictorAdd1=Pt,Ht("Predictor2","PredictorAdd2"),Ht("Predictor3","PredictorAdd3"),Ht("Predictor4","PredictorAdd4"),Ht("Predictor5","PredictorAdd5"),Ht("Predictor6","PredictorAdd6"),Ht("Predictor7","PredictorAdd7"),Ht("Predictor8","PredictorAdd8"),Ht("Predictor9","PredictorAdd9"),Ht("Predictor10","PredictorAdd10"),Ht("Predictor11","PredictorAdd11"),Ht("Predictor12","PredictorAdd12"),Ht("Predictor13","PredictorAdd13");var $l=Y.PredictorAdd2;nn("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),nn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var qi,Al=Y.ColorIndexInverseTransform,bo=Y.MapARGB,Ku=Y.VP8LColorIndexInverseTransformAlpha,Eh=Y.MapAlpha,ln=Y.VP8LPredictorsAdd=[];ln.length=16,(Y.VP8LPredictors=[]).length=16,(Y.VP8LPredictorsAdd_C=[]).length=16,(Y.VP8LPredictors_C=[]).length=16;var On,_r,Dr,na,Si,Xi,la,Fa,si,Qa,wa,Va,Ba,As,Go,qs,Cs,ol,Cl,mu,gc,Zi,Br,qo,Da,zi,bi,Sa,La=o(511),ds=o(2041),gu=o(225),Lo=o(767),sl=0,Pl=ds,Hs=gu,ls=Lo,Ga=La,$s=0,Rl=1,Lu=2,vu=3,Ps=4,Wl=5,Uc=6,Dl=7,Xl=8,Iu=9,Jh=10,nh=[2,3,7],Th=[3,3,11],Rs=[280,256,256,256,40],Ho=[0,1,1,1,0],hi=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ws=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$o=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Cf=8,Ju=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Pf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ou=null,vc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],yc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Mh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ah=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],bd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wd=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ds=[],Xs=[],Zl=[],mp=1,rh=2,yu=[],ll=[];qn("UpsampleRgbLinePair",Mi,3),qn("UpsampleBgrLinePair",ya,3),qn("UpsampleRgbaLinePair",So,4),qn("UpsampleBgraLinePair",_o,4),qn("UpsampleArgbLinePair",yo,4),qn("UpsampleRgba4444LinePair",aa,2),qn("UpsampleRgb565LinePair",ka,2);var Qh=Y.UpsampleRgbLinePair,Qu=Y.UpsampleBgrLinePair,ih=Y.UpsampleRgbaLinePair,uo=Y.UpsampleBgraLinePair,Wo=Y.UpsampleArgbLinePair,Rf=Y.UpsampleRgba4444LinePair,Ll=Y.UpsampleRgb565LinePair,Nu=16,jc=1<<Nu-1,ah=-227,Ch=482,ku=6,Yl=0,Fu=o(256),Kl=o(256),Mr=o(256),Jl=o(256),Xo=o(Ch-ah),Df=o(Ch-ah);Vs("YuvToRgbRow",Mi,3),Vs("YuvToBgrRow",ya,3),Vs("YuvToRgbaRow",So,4),Vs("YuvToBgraRow",_o,4),Vs("YuvToArgbRow",yo,4),Vs("YuvToRgba4444Row",aa,2),Vs("YuvToRgb565Row",ka,2);var Vc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],oh=[0,2,8],Sd=[8,7,6,4,4,2,2,2,1,1,1,1],Jr=1;this.WebPDecodeRGBA=function(N,$,oe,xe,ze){var Ke=Rl,Je=new Pu,rt=new et;Je.ba=rt,rt.S=Ke,rt.width=[rt.width],rt.height=[rt.height];var ot=rt.width,yt=rt.height,en=new ut;if(en==null||N==null)var bn=2;else e(en!=null),bn=pc(N,$,oe,en.width,en.height,en.Pd,en.Qd,en.format,null);if(bn!=0?ot=0:(ot!=null&&(ot[0]=en.width[0]),yt!=null&&(yt[0]=en.height[0]),ot=1),ot){rt.width=rt.width[0],rt.height=rt.height[0],xe!=null&&(xe[0]=rt.width),ze!=null&&(ze[0]=rt.height);e:{if(xe=new gi,(ze=new Vo).data=N,ze.w=$,ze.ha=oe,ze.kd=1,$=[0],e(ze!=null),((N=pc(ze.data,ze.w,ze.ha,null,null,null,$,null,ze))==0||N==7)&&$[0]&&(N=4),($=N)==0){if(e(Je!=null),xe.data=ze.data,xe.w=ze.w+ze.offset,xe.ha=ze.ha-ze.offset,xe.put=qt,xe.ac=Tn,xe.bc=Zn,xe.ma=Je,ze.xa){if((N=Vr())==null){Je=1;break e}if(function(mn,un){var Rn=[0],Mn=[0],Vt=[0];t:for(;;){if(mn==null)return 0;if(un==null)return mn.a=2,0;if(mn.l=un,mn.a=0,pe(mn.m,un.data,un.w,un.ha),!Gn(mn.m,Rn,Mn,Vt)){mn.a=3;break t}if(mn.xb=rh,un.width=Rn[0],un.height=Mn[0],!Ca(Rn[0],Mn[0],1,mn,null))break t;return 1}return e(mn.a!=0),0}(N,xe)){if(xe=($=Yu(xe.width,xe.height,Je.Oa,Je.ba))==0){t:{xe=N;n:for(;;){if(xe==null){xe=0;break t}if(e(xe.s.yc!=null),e(xe.s.Ya!=null),e(0<xe.s.Wb),e((oe=xe.l)!=null),e((ze=oe.ma)!=null),xe.xb!=0){if(xe.ca=ze.ba,xe.tb=ze.tb,e(xe.ca!=null),!Hl(ze.Oa,oe,vu)){xe.a=2;break n}if(!ra(xe,oe.width)||oe.da)break n;if((oe.da||We(xe.ca.S))&&yn(),11>xe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),xe.ca.f.kb.F!=null&&yn()),xe.Pb&&0<xe.s.ua&&xe.s.vb.X==null&&!He(xe.s.vb,xe.s.Wa.Xa)){xe.a=1;break n}xe.xb=0}if(!ci(xe,xe.V,xe.Ba,xe.c,xe.i,oe.o,or))break n;ze.Dc=xe.Ma,xe=1;break t}e(xe.a!=0),xe=0}xe=!xe}xe&&($=N.a)}else $=N.a}else{if((N=new vi)==null){Je=1;break e}if(N.Fa=ze.na,N.P=ze.P,N.qc=ze.Sa,ii(N,xe)){if(($=Yu(xe.width,xe.height,Je.Oa,Je.ba))==0){if(N.Aa=0,oe=Je.Oa,e((ze=N)!=null),oe!=null){if(0<(ot=0>(ot=oe.Md)?0:100<ot?255:255*ot/100)){for(yt=en=0;4>yt;++yt)12>(bn=ze.pb[yt]).lc&&(bn.ia=ot*Sd[0>bn.lc?0:bn.lc]>>3),en|=bn.ia;en&&(alert("todo:VP8InitRandom"),ze.ia=1)}ze.Ga=oe.Id,100<ze.Ga?ze.Ga=100:0>ze.Ga&&(ze.Ga=0)}Di(N,xe)||($=N.a)}}else $=N.a}$==0&&Je.Oa!=null&&Je.Oa.fd&&($=al(Je.ba))}Je=$}Ke=Je!=0?null:11>Ke?rt.f.RGBA.eb:rt.f.kb.y}else Ke=null;return Ke};var Ph=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(Y,Z){for(var j="",K=0;K<4;K++)j+=String.fromCharCode(Y[Z++]);return j}function v(Y,Z){return(Y[Z+0]<<0|Y[Z+1]<<8|Y[Z+2]<<16)>>>0}function y(Y,Z){return(Y[Z+0]<<0|Y[Z+1]<<8|Y[Z+2]<<16|Y[Z+3]<<24)>>>0}new h;var w=[0],b=[0],A=[],M=new h,P=t,C=function(Y,Z){var j={},K=0,re=!1,ie=0,se=0;if(j.frames=[],!function(ve,le,ye,Se){for(var Be=0;Be<Se;Be++)if(ve[le+Be]!=ye.charCodeAt(Be))return!0;return!1}(Y,Z,"RIFF",4)){for(y(Y,Z+=4),Z+=8;Z<Y.length;){var de=f(Y,Z),ue=y(Y,Z+=4);Z+=4;var Te=ue+(1&ue);switch(de){case"VP8 ":case"VP8L":j.frames[K]===void 0&&(j.frames[K]={}),(me=j.frames[K]).src_off=re?se:Z-8,me.src_size=ie+ue+8,K++,re&&(re=!1,ie=0,se=0);break;case"VP8X":(me=j.header={}).feature_flags=Y[Z];var pe=Z+4;me.canvas_width=1+v(Y,pe),pe+=3,me.canvas_height=1+v(Y,pe),pe+=3;break;case"ALPH":re=!0,ie=Te+8,se=Z-8;break;case"ANIM":(me=j.header).bgcolor=y(Y,Z),pe=Z+4,me.loop_count=(Me=Y)[(fe=pe)+0]<<0|Me[fe+1]<<8,pe+=2;break;case"ANMF":var De,me;(me=j.frames[K]={}).offset_x=2*v(Y,Z),Z+=3,me.offset_y=2*v(Y,Z),Z+=3,me.width=1+v(Y,Z),Z+=3,me.height=1+v(Y,Z),Z+=3,me.duration=v(Y,Z),Z+=3,De=Y[Z++],me.dispose=1&De,me.blend=De>>1&1}de!="ANMF"&&(Z+=Te)}var Me,fe;return j}}(P,0);C.response=P,C.rgbaoutput=!0,C.dataurl=!1;var k=C.header?C.header:null,B=C.frames?C.frames:null;if(k){k.loop_counter=k.loop_count,w=[k.canvas_height],b=[k.canvas_width];for(var z=0;z<B.length&&B[z].blend!=0;z++);}var q=B[0],V=M.WebPDecodeRGBA(P,q.src_off,q.src_size,b,w);q.rgba=V,q.imgwidth=b[0],q.imgheight=w[0];for(var W=0;W<b[0]*w[0]*4;W++)A[W]=V[W];return this.width=b,this.height=w,this.data=A,this}(function(t){var e=function(){return typeof XC=="function"},n=function(w,b,A,M){var P=4,C=l;switch(M){case t.image_compression.FAST:P=1,C=o;break;case t.image_compression.MEDIUM:P=6,C=a;break;case t.image_compression.SLOW:P=9,C=h}w=r(w,b,A,C);var k=XC(w,{level:P});return t.__addimage__.arrayBufferToBinaryString(k)},r=function(w,b,A,M){for(var P,C,k,B=w.length/b,z=new Uint8Array(w.length+B),q=v(),V=0;V<B;V+=1){if(k=V*b,P=w.subarray(k,k+b),M)z.set(M(P,A,C),k+V);else{for(var W,Y=q.length,Z=[];W<Y;W+=1)Z[W]=q[W](P,A,C);var j=y(Z.concat());z.set(Z[j],k+V)}C=P}return z},i=function(w){var b=Array.apply([],w);return b.unshift(0),b},o=function(w,b){var A,M=[],P=w.length;M[0]=1;for(var C=0;C<P;C+=1)A=w[C-b]||0,M[C+1]=w[C]-A+256&255;return M},l=function(w,b,A){var M,P=[],C=w.length;P[0]=2;for(var k=0;k<C;k+=1)M=A&&A[k]||0,P[k+1]=w[k]-M+256&255;return P},a=function(w,b,A){var M,P,C=[],k=w.length;C[0]=3;for(var B=0;B<k;B+=1)M=w[B-b]||0,P=A&&A[B]||0,C[B+1]=w[B]+256-(M+P>>>1)&255;return C},h=function(w,b,A){var M,P,C,k,B=[],z=w.length;B[0]=4;for(var q=0;q<z;q+=1)M=w[q-b]||0,P=A&&A[q]||0,C=A&&A[q-b]||0,k=f(M,P,C),B[q+1]=w[q]-k+256&255;return B},f=function(w,b,A){if(w===b&&b===A)return w;var M=Math.abs(b-A),P=Math.abs(w-A),C=Math.abs(w+b-A-A);return M<=P&&M<=C?w:P<=C?b:A},v=function(){return[i,o,l,a,h]},y=function(w){var b=w.map(function(A){return A.reduce(function(M,P){return M+Math.abs(P)},0)});return b.indexOf(Math.min.apply(null,b))};t.processPNG=function(w,b,A,M){var P,C,k,B,z,q,V,W,Y,Z,j,K,re,ie,se,de=this.decode.FLATE_DECODE,ue="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(k=new _Z(w)).imgData,C=k.bits,P=k.colorSpace,z=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){Y=(W=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,j=new Uint8Array(Y*k.colors),Z=new Uint8Array(Y);var Te,pe=k.pixelBitlength-k.bits;for(ie=0,se=0;ie<Y;ie++){for(re=W[ie],Te=0;Te<pe;)j[se++]=re>>>Te&255,Te+=k.bits;Z[ie]=re>>>Te&255}}if(k.bits===16){Y=(W=new Uint32Array(k.decodePixels().buffer)).length,j=new Uint8Array(Y*(32/k.pixelBitlength)*k.colors),Z=new Uint8Array(Y*(32/k.pixelBitlength)),K=k.colors>1,ie=0,se=0;for(var De=0;ie<Y;)re=W[ie++],j[se++]=re>>>0&255,K&&(j[se++]=re>>>16&255,re=W[ie++],j[se++]=re>>>0&255),Z[De++]=re>>>16&255;C=8}M!==t.image_compression.NONE&&e()?(w=n(j,k.width*k.colors,k.colors,M),V=n(Z,k.width,1,M)):(w=j,V=Z,de=void 0)}if(k.colorType===3&&(P=this.color_spaces.INDEXED,q=k.palette,k.transparency.indexed)){var me=k.transparency.indexed,Me=0;for(ie=0,Y=me.length;ie<Y;++ie)Me+=me[ie];if((Me/=255)===Y-1&&me.indexOf(0)!==-1)B=[me.indexOf(0)];else if(Me!==Y){for(W=k.decodePixels(),Z=new Uint8Array(W.length),ie=0,Y=W.length;ie<Y;ie++)Z[ie]=me[W[ie]];V=n(Z,k.width,1)}}var fe=function(ve){var le;switch(ve){case t.image_compression.FAST:le=11;break;case t.image_compression.MEDIUM:le=13;break;case t.image_compression.SLOW:le=14;break;default:le=12}return le}(M);return de===this.decode.FLATE_DECODE&&(ue="/Predictor "+fe+" "),ue+="/Colors "+z+" /BitsPerComponent "+C+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(V&&this.__addimage__.isArrayBuffer(V)||this.__addimage__.isArrayBufferView(V))&&(V=this.__addimage__.arrayBufferToBinaryString(V)),{alias:A,data:w,index:b,filter:de,decodeParameters:ue,transparency:B,palette:q,sMask:V,predictor:fe,width:k.width,height:k.height,bitsPerComponent:C,colorSpace:P}}}})(ki.API),function(t){t.processGIF89A=function(e,n,r,i){var o=new bZ(e),l=o.width,a=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:l,height:a},v=new bT(100).encode(f,100);return t.processJPEG.call(this,v,n,r,i)},t.processGIF87A=t.processGIF89A}(ki.API),Xf.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xf.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){is.log("bit decode error:"+n)}},Xf.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var h=this.palette[o>>7-a&1];this.data[l+4*a]=h.blue,this.data[l+4*a+1]=h.green,this.data[l+4*a+2]=h.red,this.data[l+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Xf.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+2*i*4,a=o>>4,h=15&o,f=this.palette[a];if(this.data[l]=f.blue,this.data[l+1]=f.green,this.data[l+2]=f.red,this.data[l+3]=255,2*i+1>=this.width)break;f=this.palette[h],this.data[l+4]=f.blue,this.data[l+4+1]=f.green,this.data[l+4+2]=f.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},Xf.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var l=this.palette[i];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Xf.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,f=o>>15?255:0,v=r*this.width*4+4*i;this.data[v]=h,this.data[v+1]=a,this.data[v+2]=l,this.data[v+3]=f}this.pos+=t}},Xf.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(l&e)/e*255|0,h=(l>>5&n)/n*255|0,f=(l>>11)/e*255|0,v=i*this.width*4+4*o;this.data[v]=f,this.data[v+1]=h,this.data[v+2]=a,this.data[v+3]=255}this.pos+=t}},Xf.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=o,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=255}this.pos+=this.width%4}},Xf.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=l}},Xf.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var o=new Xf(e,!1),l=o.width,a=o.height,h={data:o.getData(),width:l,height:a},f=new bT(100).encode(h,100);return t.processJPEG.call(this,f,n,r,i)}}(ki.API),YI.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var o=new YI(e),l=o.width,a=o.height,h={data:o.getData(),width:l,height:a},f=new bT(100).encode(h,100);return t.processJPEG.call(this,f,n,r,i)}}(ki.API),ki.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,o=new Uint8Array(i/4*3),l=new Uint8Array(i/4),a=0,h=0,f=0;f<i;f+=4){var v=r[f],y=r[f+1],w=r[f+2],b=r[f+3];o[a++]=v,o[a++]=y,o[a++]=w,l[h++]=b}var A=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:A,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ki.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},jv=ki.API,s2=jv.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,h=a.fof?a.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,v=f.fof?f.fof:1,y=e.doKerning!==!1,w=0,b=t.length,A=0,M=a[0]||h,P=[];for(n=0;n<b;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?P.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+l*(1e3/o)||0)/1e3):(w=y&&Co(f[r])==="object"&&!isNaN(parseInt(f[r][A],10))?f[r][A]/v:0,P.push((a[r]||M)/h+w)),A=r;return P},$I=jv.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return jv.processArabic&&(t=jv.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:s2.apply(this,arguments).reduce(function(o,l){return o+l},0)},WI=function(t,e,n,r){for(var i=[],o=0,l=t.length,a=0;o!==l&&a+e[o]<n;)a+=e[o],o++;i.push(t.slice(0,o));var h=o;for(a=0;o!==l;)a+e[o]>r&&(i.push(t.slice(h,o)),a=0,h=o),a+=e[o],o++;return h!==o&&i.push(t.slice(h,o)),i},XI=function(t,e,n){n||(n={});var r,i,o,l,a,h,f,v=[],y=[v],w=n.textIndent||0,b=0,A=0,M=t.split(" "),P=s2.apply(this,[" ",n])[0];if(h=n.lineIndent===-1?M[0].length+2:n.lineIndent||0){var C=Array(h).join(" "),k=[];M.map(function(z){(z=z.split(/\s*\n/)).length>1?k=k.concat(z.map(function(q,V){return(V&&q.length?`
`:"")+q})):k.push(z[0])}),M=k,h=$I.apply(this,[C,n])}for(o=0,l=M.length;o<l;o++){var B=0;if(r=M[o],h&&r[0]==`
`&&(r=r.substr(1),B=1),w+b+(A=(i=s2.apply(this,[r,n])).reduce(function(z,q){return z+q},0))>e||B){if(A>e){for(a=WI.apply(this,[r,i,e-(w+b),e]),v.push(a.shift()),v=[a.pop()];a.length;)y.push([a.shift()]);A=i.slice(r.length-(v[0]?v[0].length:0)).reduce(function(z,q){return z+q},0)}else v=[r];y.push(v),w=A+h,b=P}else v.push(r),w+=b+A,b=P}return f=h?function(z,q){return(q?C:"")+z.join(" ")}:function(z){return z.join(" ")},y.map(f)},jv.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var y=this.internal.getFont(v.fontName,v.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var a,h,f=[];for(a=0,h=r.length;a<h;a++)f=f.concat(XI.apply(this,[r[a],l,o]));return f},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(y){return"0x"+parseInt(y,10).toString(16)},l=t.__fontmetrics__.compress=function(y){var w,b,A,M,P=["{"];for(var C in y){if(w=y[C],isNaN(parseInt(C,10))?b="'"+C+"'":(C=parseInt(C,10),b=(b=o(C).slice(2)).slice(0,-1)+r[b.slice(-1)]),typeof w=="number")w<0?(A=o(w).slice(3),M="-"):(A=o(w).slice(2),M=""),A=M+A.slice(0,-1)+r[A.slice(-1)];else{if(Co(w)!=="object")throw new Error("Don't know what to do with value type "+Co(w)+".");A=l(w)}P.push(b+A)}return P.push("}"),P.join("")},a=t.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,b,A,M,P={},C=1,k=P,B=[],z="",q="",V=y.length-1,W=1;W<V;W+=1)(M=y[W])=="'"?w?(A=w.join(""),w=void 0):w=[]:w?w.push(M):M=="{"?(B.push([k,A]),k={},A=void 0):M=="}"?((b=B.pop())[0][b[1]]=k,A=void 0,k=b[0]):M=="-"?C=-1:A===void 0?n.hasOwnProperty(M)?(z+=n[M],A=parseInt(z,16)*C,C=1,z=""):z+=M:n.hasOwnProperty(M)?(q+=n[M],k[A]=parseInt(q,16)*C,C=1,A=void 0,q=""):q+=M;return P},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},v={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(y){var w=y.font,b=v.Unicode[w.postScriptName];b&&(w.metadata.Unicode={},w.metadata.Unicode.widths=b.widths,w.metadata.Unicode.kerning=b.kerning);var A=f.Unicode[w.postScriptName];A&&(w.metadata.Unicode.encoding=A,w.encoding=A.codePages[0])}])}(ki.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(vb(a)),l.metadata=t.API.TTFFont.open(a),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,r)}}])}(ki),function(t){function e(){return(Fi.canvg?Promise.resolve(Fi.canvg):GC(()=>import("./index.es-4XD0pXbg.js"),[],import.meta.url)).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}ki.API.addSvgAsImage=function(n,r,i,o,l,a,h,f){if(isNaN(r)||isNaN(i))throw is.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(l))throw is.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=o,v.height=l;var y=v.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,v.width,v.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return e().then(function(A){return A.fromString(y,n,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(w)}).then(function(){b.addImage(v.toDataURL("image/jpeg",1),r,i,o,l,h,f)})}}(),ki.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},ki.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(l),h=[],f=0,v=0,y=0;function w(A,M){var P,C=!1;for(P=0;P<A.length;P+=1)A[P]===M&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var b=a.length;for(y=0;y<b;y+=1)n[a[y]].value=n[a[y]].defaultValue,n[a[y]].explicitSet=!1}if(Co(t)==="object"){for(i in t)if(o=t[i],w(a,i)&&o!==void 0){if(n[i].type==="boolean"&&typeof o=="boolean")n[i].value=o;else if(n[i].type==="name"&&w(n[i].valueSet,o))n[i].value=o;else if(n[i].type==="integer"&&Number.isInteger(o))n[i].value=o;else if(n[i].type==="array"){for(f=0;f<o.length;f+=1)if(r=!0,o[f].length===1&&typeof o[f][0]=="number")h.push(String(o[f]-1));else if(o[f].length>1){for(v=0;v<o[f].length;v+=1)typeof o[f][v]!="number"&&(r=!1);r===!0&&h.push([o[f][0]-1,o[f][1]-1].join(" "))}n[i].value="["+h.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,M=[];for(A in n)n[A].explicitSet===!0&&(n[A].type==="name"?M.push("/"+A+" /"+n[A].value):M.push("/"+A+" "+n[A].value));M.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+M.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=o.length+l.length+a.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+o+l+a+h),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(ki.API),function(t){var e=t.API,n=e.pdfEscape16=function(o,l){for(var a,h=l.metadata.Unicode.widths,f=["","0","00","000","0000"],v=[""],y=0,w=o.length;y<w;++y){if(a=l.metadata.characterToGlyph(o.charCodeAt(y)),l.metadata.glyIdsUsed.push(a),l.metadata.toUnicode[a]=o.charCodeAt(y),h.indexOf(a)==-1&&(h.push(a),h.push([parseInt(l.metadata.widthOfGlyph(a),10)])),a=="0")return v.join("");a=a.toString(16),v.push(f[4-a.length],a)}return v.join("")},r=function(o){var l,a,h,f,v,y,w;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,w=(a=Object.keys(o).sort(function(b,A){return b-A})).length;y<w;y++)l=a[y],h.length>=100&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(f=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+f+">"));return h.length&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(l){var a=l.font,h=l.out,f=l.newObject,v=l.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var y=a.metadata.Unicode.widths,w=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),b="",A=0;A<w.length;A++)b+=String.fromCharCode(w[A]);var M=f();v({data:b,addLength1:!0,objectId:M}),h("endobj");var P=f();v({data:r(a.metadata.toUnicode),addLength1:!0,objectId:P}),h("endobj");var C=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+vy(a.fontName)),h("/FontFile2 "+M+" 0 R"),h("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),h("/Flags "+a.metadata.flags),h("/StemV "+a.metadata.stemV),h("/ItalicAngle "+a.metadata.italicAngle),h("/Ascent "+a.metadata.ascender),h("/Descent "+a.metadata.decender),h("/CapHeight "+a.metadata.capHeight),h(">>"),h("endobj");var k=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+vy(a.fontName)),h("/FontDescriptor "+C+" 0 R"),h("/W "+t.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+a.encoding+")"),h(">>"),h(">>"),h("endobj"),a.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+P+" 0 R"),h("/BaseFont /"+vy(a.fontName)),h("/Encoding /"+a.encoding),h("/DescendantFonts ["+k+" 0 R]"),h(">>"),h("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(l){var a=l.font,h=l.out,f=l.newObject,v=l.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var y=a.metadata.rawData,w="",b=0;b<y.length;b++)w+=String.fromCharCode(y[b]);var A=f();v({data:w,addLength1:!0,objectId:A}),h("endobj");var M=f();v({data:r(a.metadata.toUnicode),addLength1:!0,objectId:M}),h("endobj");var P=f();h("<<"),h("/Descent "+a.metadata.decender),h("/CapHeight "+a.metadata.capHeight),h("/StemV "+a.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+A+" 0 R"),h("/Flags 96"),h("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),h("/FontName /"+vy(a.fontName)),h("/ItalicAngle "+a.metadata.italicAngle),h("/Ascent "+a.metadata.ascender),h(">>"),h("endobj"),a.objectNumber=f();for(var C=0;C<a.metadata.hmtx.widths.length;C++)a.metadata.hmtx.widths[C]=parseInt(a.metadata.hmtx.widths[C]*(1e3/a.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+M+" 0 R/BaseFont/"+vy(a.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),h("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var l,a=o.text||"",h=o.x,f=o.y,v=o.options||{},y=o.mutex||{},w=y.pdfEscape,b=y.activeFontKey,A=y.fonts,M=b,P="",C=0,k="",B=A[M].encoding;if(A[M].encoding!=="Identity-H")return{text:a,x:h,y:f,options:v,mutex:y};for(k=a,M=b,Array.isArray(a)&&(k=a[0]),C=0;C<k.length;C+=1)A[M].metadata.hasOwnProperty("cmap")&&(l=A[M].metadata.cmap.unicode.codeMap[k[C].charCodeAt(0)]),l||k[C].charCodeAt(0)<256&&A[M].metadata.hasOwnProperty("Unicode")?P+=k[C]:P+="";var z="";return parseInt(M.slice(1))<14||B==="WinAnsiEncoding"?z=w(P,M).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(z=n(P,A[M])),y.isHex=!0,{text:z,x:h,y:f,options:v,mutex:y}};e.events.push(["postProcessText",function(o){var l=o.text||"",a=[],h={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var f=0;for(f=0;f<l.length;f+=1)Array.isArray(l[f])&&l[f].length===3?a.push([i(Object.assign({},h,{text:l[f][0]})).text,l[f][1],l[f][2]]):a.push(i(Object.assign({},h,{text:l[f]})).text);o.text=a}else o.text=i(Object.assign({},h,{text:l})).text}])}(ki),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ki.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,o,l,a,h,f,v,y=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},M={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,B=0;this.__bidiEngine__={};var z=function(K){var re=K.charCodeAt(),ie=re>>8,se=M[ie];return se!==void 0?y[256*se+(255&re)]:ie===252||ie===253?"AL":C.test(ie)?"L":ie===8?"R":"N"},q=function(K){for(var re,ie=0;ie<K.length;ie++){if((re=z(K.charAt(ie)))==="L")return!1;if(re==="R")return!0}return!1},V=function(K,re,ie,se){var de,ue,Te,pe,De=re[se];switch(De){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(De="AN");break;case"AL":k=!0,De="R";break;case"WS":De="N";break;case"CS":se<1||se+1>=re.length||(de=ie[se-1])!=="EN"&&de!=="AN"||(ue=re[se+1])!=="EN"&&ue!=="AN"?De="N":k&&(ue="AN"),De=ue===de?ue:"N";break;case"ES":De=(de=se>0?ie[se-1]:"B")==="EN"&&se+1<re.length&&re[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&ie[se-1]==="EN"){De="EN";break}if(k){De="N";break}for(Te=se+1,pe=re.length;Te<pe&&re[Te]==="ET";)Te++;De=Te<pe&&re[Te]==="EN"?"EN":"N";break;case"NSM":if(l&&!a){for(pe=re.length,Te=se+1;Te<pe&&re[Te]==="NSM";)Te++;if(Te<pe){var me=K[se],Me=me>=1425&&me<=2303||me===64286;if(de=re[Te],Me&&(de==="R"||de==="AL")){De="R";break}}}De=se<1||(de=re[se-1])==="B"?"N":ie[se-1];break;case"B":k=!1,i=!0,De=B;break;case"S":o=!0,De="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":De="N"}return De},W=function(K,re,ie){var se=K.split("");return ie&&Y(se,ie,{hiLevel:B}),se.reverse(),re&&re.reverse(),se.join("")},Y=function(K,re,ie){var se,de,ue,Te,pe,De=-1,me=K.length,Me=0,fe=[],ve=B?b:w,le=[];for(k=!1,i=!1,o=!1,de=0;de<me;de++)le[de]=z(K[de]);for(ue=0;ue<me;ue++){if(pe=Me,fe[ue]=V(K,le,fe,ue),se=240&(Me=ve[pe][A[fe[ue]]]),Me&=15,re[ue]=Te=ve[Me][5],se>0)if(se===16){for(de=De;de<ue;de++)re[de]=1;De=-1}else De=-1;if(ve[Me][6])De===-1&&(De=ue);else if(De>-1){for(de=De;de<ue;de++)re[de]=Te;De=-1}le[ue]==="B"&&(re[ue]=0),ie.hiLevel|=Te}o&&function(ye,Se,Be){for(var Ve=0;Ve<Be;Ve++)if(ye[Ve]==="S"){Se[Ve]=B;for(var tt=Ve-1;tt>=0&&ye[tt]==="WS";tt--)Se[tt]=B}}(le,re,me)},Z=function(K,re,ie,se,de){if(!(de.hiLevel<K)){if(K===1&&B===1&&!i)return re.reverse(),void(ie&&ie.reverse());for(var ue,Te,pe,De,me=re.length,Me=0;Me<me;){if(se[Me]>=K){for(pe=Me+1;pe<me&&se[pe]>=K;)pe++;for(De=Me,Te=pe-1;De<Te;De++,Te--)ue=re[De],re[De]=re[Te],re[Te]=ue,ie&&(ue=ie[De],ie[De]=ie[Te],ie[Te]=ue);Me=pe}Me++}}},j=function(K,re,ie){var se=K.split(""),de={hiLevel:B};return ie||(ie=[]),Y(se,ie,de),function(ue,Te,pe){if(pe.hiLevel!==0&&v)for(var De,me=0;me<ue.length;me++)Te[me]===1&&(De=P.indexOf(ue[me]))>=0&&(ue[me]=P[De+1])}(se,ie,de),Z(2,se,re,ie,de),Z(1,se,re,ie,de),se.join("")};return this.__bidiEngine__.doBidiReorder=function(K,re,ie){if(function(de,ue){if(ue)for(var Te=0;Te<de.length;Te++)ue[Te]=Te;a===void 0&&(a=q(de)),f===void 0&&(f=q(de))}(K,re),l||!h||f)if(l&&h&&a^f)B=a?1:0,K=W(K,re,ie);else if(!l&&h&&f)B=a?1:0,K=j(K,re,ie),K=W(K,re);else if(!l||a||h||f){if(l&&!h&&a^f)K=W(K,re),a?(B=0,K=j(K,re,ie)):(B=1,K=j(K,re,ie),K=W(K,re));else if(l&&a&&!h&&f)B=1,K=j(K,re,ie),K=W(K,re);else if(!l&&!h&&a^f){var se=v;a?(B=1,K=j(K,re,ie),B=0,v=!1,K=j(K,re,ie),v=se):(B=0,K=j(K,re,ie),K=W(K,re),B=1,v=!1,K=j(K,re,ie),v=se,K=W(K,re))}}else B=0,K=j(K,re,ie);else B=a?1:0,K=j(K,re,ie);return K},this.__bidiEngine__.setOptions=function(K){K&&(l=K.isInputVisual,h=K.isOutputVisual,a=K.isInputRtl,f=K.isOutputRtl,v=K.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var l=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(l=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?l.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):l.push([n.doBidiReorder(i[a])]);r.text=l}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(ki),ki.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new lg(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new NZ(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new xZ(this.contents),this.head=new SZ(this),this.name=new CZ(this),this.cmap=new s8(this),this.toUnicode={},this.hhea=new EZ(this),this.maxp=new PZ(this),this.hmtx=new RZ(this),this.post=new MZ(this),this.os2=new TZ(this),this.loca=new OZ(this),this.glyf=new DZ(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,a,h,f;for(f=[],l=0,a=(h=this.bbox).length;l<a;l++)e=h[l],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(n=i>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,o,l,a;for(l=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return l*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var gd,lg=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,o,l,a,h;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),a=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^l)+256*(255^a)+(255^h)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*o+65536*l+256*a+h},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],o.push(this.writeByte(n));return o},t}(),xZ=function(){var t;function e(n){var r,i,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,o,l,a,h,f,v,y,w,b,A,M;for(M in b=Object.keys(n).length,h=Math.log(2),y=16*Math.floor(Math.log(b)/h),l=Math.floor(y/h),v=16*b-y,(i=new lg).writeInt(this.scalarType),i.writeShort(b),i.writeShort(y),i.writeShort(l),i.writeShort(v),o=16*b,f=i.pos+o,a=null,A=[],n)for(w=n[M],i.writeString(M),i.writeInt(t(w)),i.writeInt(f),i.writeInt(w.length),A=A.concat(w),M==="head"&&(a=f),f+=w.length;f%4;)A.push(0),f++;return i.write(A),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,o,l;for(n=l8.call(n);n.length%4;)n.push(0);for(o=new lg(n),i=0,r=0,l=n.length;r<l;r=r+=4)i+=o.readUInt32();return 4294967295&i},e}(),wZ={}.hasOwnProperty,hp=function(t,e){for(var n in e)wZ.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};gd=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var SZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hp(e,gd),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new lg).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),KI=function(){function t(e,n){var r,i,o,l,a,h,f,v,y,w,b,A,M,P,C,k,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(b=e.readUInt16(),w=b/2,e.pos+=6,o=function(){var z,q;for(q=[],h=z=0;0<=w?z<w:z>w;h=0<=w?++z:--z)q.push(e.readUInt16());return q}(),e.pos+=2,M=function(){var z,q;for(q=[],h=z=0;0<=w?z<w:z>w;h=0<=w?++z:--z)q.push(e.readUInt16());return q}(),f=function(){var z,q;for(q=[],h=z=0;0<=w?z<w:z>w;h=0<=w?++z:--z)q.push(e.readUInt16());return q}(),v=function(){var z,q;for(q=[],h=z=0;0<=w?z<w:z>w;h=0<=w?++z:--z)q.push(e.readUInt16());return q}(),i=(this.length-e.pos+this.offset)/2,a=function(){var z,q;for(q=[],h=z=0;0<=i?z<i:z>i;h=0<=i?++z:--z)q.push(e.readUInt16());return q}(),h=C=0,B=o.length;C<B;h=++C)for(P=o[h],r=k=A=M[h];A<=P?k<=P:k>=P;r=A<=P?++k:--k)v[h]===0?l=r+f[h]:(l=a[v[h]/2+(r-A)-(w-h)]||0)!==0&&(l+=f[h]),this.codeMap[r]=65535&l}e.pos=y}return t.encode=function(e,n){var r,i,o,l,a,h,f,v,y,w,b,A,M,P,C,k,B,z,q,V,W,Y,Z,j,K,re,ie,se,de,ue,Te,pe,De,me,Me,fe,ve,le,ye,Se,Be,Ve,tt,ht,it,gt;switch(se=new lg,l=Object.keys(e).sort(function($t,He){return $t-He}),n){case"macroman":for(M=0,P=function(){var $t=[];for(A=0;A<256;++A)$t.push(0);return $t}(),k={0:0},o={},de=0,De=l.length;de<De;de++)k[tt=e[i=l[de]]]==null&&(k[tt]=++M),o[i]={old:e[i],new:k[e[i]]},P[i]=k[e[i]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(P),{charMap:o,subtable:se.data,maxGlyphID:M+1};case"unicode":for(re=[],y=[],B=0,k={},r={},C=f=null,ue=0,me=l.length;ue<me;ue++)k[q=e[i=l[ue]]]==null&&(k[q]=++B),r[i]={old:q,new:k[q]},a=k[q]-i,C!=null&&a===f||(C&&y.push(C),re.push(i),f=a),C=i;for(C&&y.push(C),y.push(65535),re.push(65535),j=2*(Z=re.length),Y=2*Math.pow(Math.log(Z)/Math.LN2,2),w=Math.log(Y/2)/Math.LN2,W=2*Z-Y,h=[],V=[],b=[],A=Te=0,Me=re.length;Te<Me;A=++Te){if(K=re[A],v=y[A],K===65535){h.push(0),V.push(0);break}if(K-(ie=r[K].new)>=32768)for(h.push(0),V.push(2*(b.length+Z-A)),i=pe=K;K<=v?pe<=v:pe>=v;i=K<=v?++pe:--pe)b.push(r[i].new);else h.push(ie-K),V.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*Z+2*b.length),se.writeUInt16(0),se.writeUInt16(j),se.writeUInt16(Y),se.writeUInt16(w),se.writeUInt16(W),Be=0,fe=y.length;Be<fe;Be++)i=y[Be],se.writeUInt16(i);for(se.writeUInt16(0),Ve=0,ve=re.length;Ve<ve;Ve++)i=re[Ve],se.writeUInt16(i);for(ht=0,le=h.length;ht<le;ht++)a=h[ht],se.writeUInt16(a);for(it=0,ye=V.length;it<ye;it++)z=V[it],se.writeUInt16(z);for(gt=0,Se=b.length;gt<Se;gt++)M=b[gt],se.writeUInt16(M);return{charMap:r,subtable:se.data,maxGlyphID:B+1}}},t}(),s8=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hp(e,gd),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new KI(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,o;return r==null&&(r="macroman"),i=KI.encode(n,r),(o=new lg).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e}(),EZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hp(e,gd),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),TZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hp(e,gd),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),MZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hp(e,gd),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var l;for(i=n.readUInt16(),this.glyphNameIndex=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,h,f;for(f=[],l=a=0,h=this.file.maxp.numGlyphs;0<=h?a<h:a>h;l=0<=h?++a:--a)f.push(n.readUInt32());return f}).call(this)}},e}(),AZ=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},CZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hp(e,gd),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,o,l,a,h,f,v,y,w,b;for(n.pos=this.offset,n.readShort(),r=n.readShort(),h=n.readShort(),i=[],l=0;0<=r?l<r:l>r;l=0<=r?++l:--l)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+h+n.readShort()});for(f={},l=y=0,w=i.length;y<w;l=++y)o=i[l],n.pos=o.offset,v=n.readString(o.length),a=new AZ(v,o),f[b=o.nameID]==null&&(f[b]=[]),f[o.nameID].push(a);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e}(),PZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hp(e,gd),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),RZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hp(e,gd),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,o,l,a,h,f;for(n.pos=this.offset,this.metrics=[],r=0,h=this.file.hhea.numberOfMetrics;0<=h?r<h:r>h;r=0<=h?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var v,y;for(y=[],r=v=0;0<=o?v<o:v>o;r=0<=o?++v:--v)y.push(n.readInt16());return y}(),this.widths=(function(){var v,y,w,b;for(b=[],v=0,y=(w=this.metrics).length;v<y;v++)l=w[v],b.push(l.advance);return b}).call(this),i=this.widths[this.widths.length-1],f=[],r=a=0;0<=o?a<o:a>o;r=0<=o?++a:--a)f.push(this.widths.push(i));return f},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),l8=[].slice,DZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hp(e,gd),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,o,l,a,h,f,v,y,w;return n in this.cache?this.cache[n]:(l=this.file.loca,r=this.file.contents,i=l.indexOf(n),(o=l.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(h=new lg(r.read(o))).readShort(),v=h.readShort(),w=h.readShort(),f=h.readShort(),y=h.readShort(),this.cache[n]=a===-1?new IZ(h,v,w,f,y):new LZ(h,a,v,w,f,y),this.cache[n]))},e.prototype.encode=function(n,r,i){var o,l,a,h,f;for(a=[],l=[],h=0,f=r.length;h<f;h++)o=n[r[h]],l.push(a.length),o&&(a=a.concat(o.encode(i)));return l.push(a.length),{table:a,offsets:l}},e}(),LZ=function(){function t(e,n,r,i,o,l){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),IZ=function(){function t(e,n,r,i,o){var l,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;a=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&a;)l.pos+=1&a?4:2,128&a?l.pos+=8:64&a?l.pos+=4:8&a&&(l.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new lg(l8.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),OZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hp(e,gd),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,l;for(l=[],i=0,o=this.length;i<o;i+=2)l.push(2*n.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],i=0,o=this.length;i<o;i+=4)l.push(n.readUInt32());return l}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),o=0,l=0,a=0;a<i.length;++a)if(i[a]=o,l<r.length&&r[l]==a){++l,i[a]=o;var h=this.offsets[a],f=this.offsets[a+1]-h;f>0&&(o+=f)}for(var v=new Array(4*i.length),y=0;y<i.length;++y)v[4*y+3]=255&i[y],v[4*y+2]=(65280&i[y])>>8,v[4*y+1]=(16711680&i[y])>>16,v[4*y]=(4278190080&i[y])>>24;return v},e}(),NZ=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,o;for(n in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,o,l,a,h;for(i={},l=0,a=e.length;l<a;l++)i[o=e[l]]=this.font.glyf.glyphFor(o);for(o in n=[],i)(r=i[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in h=this.glyphsFor(n))r=h[o],i[o]=r;return i},t.prototype.encode=function(e,n){var r,i,o,l,a,h,f,v,y,w,b,A,M,P,C;for(i in r=s8.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),b={0:0},C=r.charMap)b[(h=C[i]).old]=h.new;for(A in w=r.maxGlyphID,l)A in b||(b[A]=w++);return v=function(k){var B,z;for(B in z={},k)z[k[B]]=B;return z}(b),y=Object.keys(v).sort(function(k,B){return k-B}),M=function(){var k,B,z;for(z=[],k=0,B=y.length;k<B;k++)a=y[k],z.push(v[a]);return z}(),o=this.font.glyf.encode(l,M,b),f=this.font.loca.encode(o.offsets,M),P={cmap:this.font.cmap.raw(),glyf:o.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},t}();ki.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,o,l;if(Array.isArray(n))return"["+function(){var a,h,f;for(f=[],a=0,h=n.length;a<h;a++)r=n[a],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in o=["<<"],n)l=n[i],o.push("/"+i+" "+e.convert(l));return o.push(">>"),o.join(`
`)}return""+n},e}();function bR(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function u8(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function c8(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function xR(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function kZ(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function FZ(t,e){var n=xR("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function t3(t){return t.replace(/_/g,".")}function J1(t,e){var n=null,r="-1";return bR(t,function(i){var o=xR("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!o||i.brand?!1:(n=i,r=o[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=FZ(i.versionTest.toLowerCase(),e)||r),r=t3(r),!0)}),{preset:n,version:r}}function l2(t,e){var n={brand:"",version:"-1"};return bR(t,function(r){var i=h8(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function h8(t,e){return u8(t,function(n){var r=n.brand;return xR(""+e.test,r.toLowerCase())})}var f8=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],d8=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],n3=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],p8=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],m8=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function g8(t){return!!J1(p8,t).preset}function BZ(t){var e=c8(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:g8(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=J1(f8,e),l=o.preset,a=o.version,h=J1(m8,e),f=h.preset,v=h.version,y=J1(d8,e);if(r.chromium=!!y.preset,r.chromiumVersion=y.version,!r.chromium){var w=J1(n3,e);r.webkit=!!w.preset,r.webkitVersion=w.version}return f&&(i.name=f.id,i.version=v,i.majorVersion=parseInt(v,10)),l&&(r.name=l.id,r.version=a,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function zZ(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],o=(e.platform||navigator.platform).toLowerCase(),l={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!l2(p8,n).brand||g8(c8())},a={name:"unknown",version:"-1",majorVersion:-1};l.webkit=!l.chromium&&bR(n3,function(w){return h8(n,w)});var h=l2(d8,n);if(l.chromium=!!h.brand,l.chromiumVersion=h.version||"-1",!l.chromium){var f=l2(n3,n);l.webkit=!!f.brand,l.webkitVersion=f.version||"-1"}var v=u8(m8,function(w){return new RegExp(""+w.test,"g").exec(o)});a.name=v?v.id:"";{var y=l2(f8,n);l.name=y.brand||l.name,l.version=y.brand&&t?t.uaFullVersion:y.version}return l.webkit&&(a.name=r?"ios":"mac"),a.name==="ios"&&l.webview&&(l.version="-1"),a.version=t3(a.version),l.version=t3(l.version),a.majorVersion=parseInt(a.version,10),l.majorVersion=parseInt(l.version,10),{browser:l,os:a,isMobile:r,isHints:!0}}function UZ(t){return kZ()?zZ():BZ(t)}function jZ(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function VZ(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function E0(t,e){return function(n){n&&(t[e]=n)}}function v8(t,e,n){return function(r){r&&(t[e][n]=r)}}function GZ(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var o=e[i]||i;o in n||(n[o]=function(){for(var l,a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];var f=(l=this[r])[i].apply(l,a);return f===this[r]?this:f})})}}var qZ="function",HZ="object",$Z="string",WZ="number",wR="undefined",y8=typeof window!==wR,XZ=typeof document!==wR&&document,ZZ=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],cu=1e-7,u2={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function YZ(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],l=0,a=o.length;l<a;l++,i++)r[i]=o[l];return r}function qw(t,e,n,r){return(t*r+e*n)/(n+r)}function SR(t){return typeof t===wR}function ud(t){return t&&typeof t===HZ}function Xu(t){return Array.isArray(t)}function sm(t){return typeof t===$Z}function kb(t){return typeof t===WZ}function ER(t){return typeof t===qZ}function KZ(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function _8(t,e,n,r,i){var o=TR(t,e,n);return o?n:JZ(t,e,n+1,r,i)}function TR(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function JZ(t,e,n,r,i){for(var o=function(f){var v=e[f].trim();if(v===t.close&&!TR(t,e,f))return{value:f};var y=f,w=Hh(i,function(b){var A=b.open;return A===v});if(w&&(y=_8(w,e,f,r,i)),y===-1)return l=f,"break";f=y,l=f},l,a=n;a<r;++a){var h=o(a);if(a=l,typeof h=="object")return h.value;if(h==="break")break}return-1}function MR(t,e){var n=sm(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,o=n.isSeparateFirst,l=n.isSeparateOnlyOpenClose,a=n.isSeparateOpenClose,h=a===void 0?l:a,f=n.openCloseCharacters,v=f===void 0?ZZ:f,y=v.map(function(W){var Y=W.open,Z=W.close;return Y===Z?Y:Y+"|"+Z}).join("|"),w="(\\s*"+i+"\\s*|"+y+"|\\s+)",b=new RegExp(w,"g"),A=t.split(b).filter(function(W){return W&&W!=="undefined"}),M=A.length,P=[],C=[];function k(){return C.length?(P.push(C.join("")),C=[],!0):!1}for(var B=function(W){var Y=A[W].trim(),Z=W,j=Hh(v,function(ie){var se=ie.open;return se===Y}),K=Hh(v,function(ie){var se=ie.close;return se===Y});if(j){if(Z=_8(j,A,W,M,v),Z!==-1&&h)return k()&&o||(P.push(A.slice(W,Z+1).join("")),W=Z,o)?(z=W,"break"):(z=W,"continue")}else if(K&&!TR(K,A,W)){var re=YZ(v);return re.splice(v.indexOf(K),1),{value:MR(t,{separator:i,isSeparateFirst:o,isSeparateOnlyOpenClose:l,isSeparateOpenClose:h,openCloseCharacters:re})}}else if(KZ(Y,i)&&!l)return k(),o?(z=W,"break"):(z=W,"continue");Z===-1&&(Z=M-1),C.push(A.slice(W,Z+1).join("")),W=Z,z=W},z,q=0;q<M;++q){var V=B(q);if(q=z,typeof V=="object")return V.value;if(V==="break")break}return C.length&&P.push(C.join("")),P}function ug(t){return MR(t,"")}function _0(t){return MR(t,",")}function b8(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function ix(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function QZ(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Fb(){return Date.now?Date.now():new Date().getTime()}function em(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Hh(t,e,n){var r=em(t,e);return r>-1?t[r]:n}var x8=function(){var t=Fb(),e=y8&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Fb(),i=setTimeout(function(){n(r-t)},1e3/60);return i}}(),eY=function(){var t=y8&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function M_(t){return Object.keys(t)}function Bo(t,e){var n=ix(t),r=n.value,i=n.unit;if(ud(e)){var o=e[i];if(o){if(ER(o))return o(r);if(u2[i])return u2[i](r,o)}}else if(i==="%")return r*e/100;return u2[i]?u2[i](r):r}function r3(t,e,n){return Math.max(e,Math.min(t,n))}function JI(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[Qi(e[0],cu),Qi(e[0]/r,cu)],[Qi(e[1]*r,cu),Qi(e[1],cu)]].filter(function(i){return i.every(function(o,l){var a=e[l],h=Qi(a,cu);return n?o<=a||o<=h:o>=a||o>=h})})[0]||t}function w8(t,e,n,r){if(!r)return t.map(function(b,A){return r3(b,e[A],n[A])});var i=t[0],o=t[1],l=r===!0?i/o:r,a=JI(t,e,!1,l),h=a[0],f=a[1],v=JI(t,n,!0,l),y=v[0],w=v[1];return i<h||o<f?(i=h,o=f):(i>y||o>w)&&(i=y,o=w),[i,o]}function tY(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function i3(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function jl(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function nY(t){return[0,1].map(function(e){return i3(t.map(function(n){return n[e]}))})}function QI(t){var e=nY(t),n=jl(e,t[0]),r=jl(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function Zp(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Qi(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function e4(t,e){return t.forEach(function(n,r){t[r]=Qi(t[r],e)}),t}function rY(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function iY(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Su(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function S8(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function E8(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Cc(t,e,n,r){t.addEventListener(e,n,r)}function rc(t,e,n,r){t.removeEventListener(e,n,r)}function AR(t){return(t==null?void 0:t.ownerDocument)||XZ}function CR(t){return AR(t).documentElement}function vg(t){return AR(t).body}function eg(t){var e;return((e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function T8(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function PR(t){return ud(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}function aY(t,e,n,r,i,o){for(var l=0;l<i;++l){var a=n+l*i,h=r+l*i;t[a]+=t[h]*o,e[a]+=e[h]*o}}function oY(t,e,n,r,i){for(var o=0;o<i;++o){var l=n+o*i,a=r+o*i,h=t[l],f=e[l];t[l]=t[a],t[a]=h,e[l]=e[a],e[a]=f}}function sY(t,e,n,r,i){for(var o=0;o<r;++o){var l=n+o*r;t[l]/=i,e[l]/=i}}function M8(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function cp(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=bs(e),i=0;i<e;++i){var o=e*i+i;if(!Qi(n[o],cu)){for(var l=i+1;l<e;++l)if(n[e*i+l]){oY(n,r,i,l,e);break}}if(!Qi(n[o],cu))return[];sY(n,r,i,e,n[o]);for(var l=0;l<e;++l){var a=l,h=l+i*e,f=n[h];!Qi(f,cu)||i===l||aY(n,r,a,i,e,-f)}}return r}function lY(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function A8(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function uY(t,e){for(var n=bs(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function C0(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function cd(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=bs(n),i=Math.min(e,n),o=0;o<i-1;++o){for(var l=0;l<i-1;++l)r[o*n+l]=t[o*e+l];r[(o+1)*n-1]=t[(o+1)*e-1],r[(n-1)*n+o]=t[(e-1)*e+o]}return r[n*n-1]=t[e*e-1],r}function Hw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=bs(t);return e.forEach(function(i){r=Uo(r,i,t)}),r}function Uo(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,o=e.length/i;if(i){if(!o)return t}else return e;for(var l=0;l<n;++l)for(var a=0;a<o;++a){r[a*n+l]=0;for(var h=0;h<i;++h)r[a*n+l]+=t[h*n+l]*e[a*i+h]}return r}function to(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Ei(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function cY(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function C8(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Oc(t,e,n){n===void 0&&(n=e.length);var r=Uo(t,e,n),i=r[n-1];return r.map(function(o){return o/i})}function hY(t,e){return Uo(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function fY(t,e){return Uo(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function dY(t,e){return Uo(t,ox(e,4))}function c2(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],o=i===void 0?1:i,l=e[2],a=l===void 0?1:l;return Uo(t,[r,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1],4)}function ax(t,e){return Oc(ox(e,3),C0(t,3))}function xT(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],o=i===void 0?0:i,l=e[2],a=l===void 0?0:l;return Uo(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,a,1],4)}function t4(t,e){return Uo(t,e,4)}function ox(t,e){var n=Math.cos(t),r=Math.sin(t),i=bs(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function bs(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function RR(t,e){for(var n=bs(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function P0(t,e){for(var n=bs(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function DR(t,e,n,r,i,o,l,a){var h=t[0],f=t[1],v=e[0],y=e[1],w=n[0],b=n[1],A=r[0],M=r[1],P=i[0],C=i[1],k=o[0],B=o[1],z=l[0],q=l[1],V=a[0],W=a[1],Y=[h,0,v,0,w,0,A,0,f,0,y,0,b,0,M,0,1,0,1,0,1,0,1,0,0,h,0,v,0,w,0,A,0,f,0,y,0,b,0,M,0,1,0,1,0,1,0,1,-P*h,-C*h,-k*v,-B*v,-z*w,-q*w,-V*A,-W*A,-P*f,-C*f,-k*y,-B*y,-z*b,-q*b,-V*M,-W*M],Z=cp(Y,8);if(!Z.length)return[];var j=Uo(Z,[P,C,k,B,z,q,V,W],8);return j[8]=1,cd(lY(j),3,4)}var yb=function(){return yb=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},yb.apply(this,arguments)};function pY(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Bb(t,e){return e===void 0&&(e=0),yy(s_(t,e))}function mY(t,e){var n=Oc(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function yy(t){var e=pY();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function s_(t,e){e===void 0&&(e=0);var n=Xu(t)?t:ug(t);return n.map(function(r){var i=b8(r),o=i.prefix,l=i.value,a=null,h=o,f="";if(o==="translate"||o==="translateX"||o==="translate3d"){var v=ud(e)?yb(yb({},e),{"o%":e["%"]}):{"%":e,"o%":e},y=_0(l).map(function(ie,se){return se===0&&"x%"in v?v["%"]=e["x%"]:se===1&&"y%"in v?v["%"]=e["y%"]:v["%"]=e["o%"],Bo(ie,v)}),w=y[0],b=y[1],A=b===void 0?0:b,M=y[2],P=M===void 0?0:M;a=xT,f=[w,A,P]}else if(o==="translateY"){var C=ud(e)?yb({"%":e["y%"]},e):{"%":e},A=Bo(l,C);a=xT,f=[0,A,0]}else if(o==="translateZ"){var P=parseFloat(l);a=xT,f=[0,0,P]}else if(o==="scale"||o==="scale3d"){var k=_0(l).map(function(ie){return parseFloat(ie)}),B=k[0],z=k[1],q=z===void 0?B:z,V=k[2],W=V===void 0?1:V;a=c2,f=[B,q,W]}else if(o==="scaleX"){var B=parseFloat(l);a=c2,f=[B,1,1]}else if(o==="scaleY"){var q=parseFloat(l);a=c2,f=[1,q,1]}else if(o==="scaleZ"){var W=parseFloat(l);a=c2,f=[1,1,W]}else if(o==="rotate"||o==="rotateZ"||o==="rotateX"||o==="rotateY"){var Y=ix(l),Z=Y.unit,j=Y.value,K=Z==="rad"?j:j*Math.PI/180;o==="rotate"||o==="rotateZ"?(h="rotateZ",a=dY):o==="rotateX"?a=hY:o==="rotateY"&&(a=fY),f=K}else if(o==="matrix3d")a=t4,f=_0(l).map(function(ie){return parseFloat(ie)});else if(o==="matrix"){var re=_0(l).map(function(ie){return parseFloat(ie)});a=t4,f=[re[0],re[1],0,0,re[2],re[3],0,0,0,0,1,0,re[4],re[5],0,1]}else h="";return{name:o,functionName:h,value:l,matrixFunction:a,functionValue:f}})}var gY=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,o=this.values,l=i.indexOf(n),a=l===-1?i.length:l;i[a]=n,o[a]=r},t}(),vY=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),yY=typeof Map=="function",_Y=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function bY(t,e){var n=[],r=[];return t.forEach(function(i){var o=i[0],l=i[1],a=new _Y;n[o]=a,r[l]=a}),n.forEach(function(i,o){i.connect(n[o-1])}),t.filter(function(i,o){return!e[o]}).map(function(i,o){var l=i[0],a=i[1];if(l===a)return[0,0];var h=n[l],f=r[a-1],v=h.getIndex();h.disconnect(),f?h.connect(f,f.next):h.connect(void 0,n[0]);var y=h.getIndex();return[v,y]})}var xY=function(){function t(n,r,i,o,l,a,h,f){this.prevList=n,this.list=r,this.added=i,this.removed=o,this.changed=l,this.maintained=a,this.changedBeforeAdded=h,this.fixed=f}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=bY(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(o,l){var a=o[0],h=o[1],f=r[l],v=f[0],y=f[1];if(a!==h)return i.push([v,y]),!0}),this.cachePureChanged=i},t}();function LR(t,e,n){var r=yY?Map:n?vY:gY,i=n||function(k){return k},o=[],l=[],a=[],h=t.map(i),f=e.map(i),v=new r,y=new r,w=[],b=[],A={},M=[],P=0,C=0;return h.forEach(function(k,B){v.set(k,B)}),f.forEach(function(k,B){y.set(k,B)}),h.forEach(function(k,B){var z=y.get(k);typeof z>"u"?(++C,l.push(B)):A[z]=C}),f.forEach(function(k,B){var z=v.get(k);typeof z>"u"?(o.push(B),++P):(a.push([z,B]),C=A[B]||0,w.push([z-C,B-P]),b.push(B===z),z!==B&&M.push([z,B]))}),l.reverse(),new xY(t,e,o,l,M,a,w,b)}var wY=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=LR(this.list,r,this.findKeyCallback);return this.list=r,i},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var a3=function(t,e){return a3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},a3(t,e)};function SY(t,e){a3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var P8=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),R8=function(t){SY(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,P8)||this}return e}(wY);function EY(t,e){return LR(t,e,P8)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var o3=function(){return o3=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o3.apply(this,arguments)};function TY(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],l=0,a=o.length;l<a;l++,i++)r[i]=o[l];return r}var IR=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(ud(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(ud(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var o=this._events[n];if(o){var l=em(o,function(a){return a.listener===r});l>-1&&o.splice(l,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(o){i._addEvent(n,o,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var o=this._events[n];if(!n||!o)return!0;var l=!1;return r.eventType=n,r.stop=function(){l=!0},r.currentTarget=this,TY(o).forEach(function(a){a.listener(r),a.once&&i.off(n,a.listener)}),!l},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var o=this._events;o[n]=o[n]||[];var l=o[n];l.push(o3({listener:r},i))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var s3=function(t,e){return s3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},s3(t,e)};function MY(t,e){s3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Fy=function(){return Fy=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Fy.apply(this,arguments)};function AY(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function n4(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function h2(t){if(t){if(sm(t))return document.querySelector(t)}else return null;if(ER(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var CY=function(t){MY(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(o){r.checkScroll({container:i.container,inputEvent:o})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var o=h2(i.container);if(!o){this._flag=!1;return}var l=0,a=0,h=0,f=0;if(o===document.body)h=window.innerWidth,f=window.innerHeight;else{var v=o.getBoundingClientRect();l=v.top,a=v.left,h=v.width,f=v.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:l,left:a,width:h,height:f},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var o=r.clientX,l=r.clientY,a=i.threshold,h=a===void 0?0:a,f=this,v=f._startRect,y=f._startPos;this._currentOptions=i;var w=[0,0];return v.top>l-h?(y[1]>v.top||l<y[1])&&(w[1]=-1):v.top+v.height<l+h&&(y[1]<v.top+v.height||l>y[1])&&(w[1]=1),v.left>o-h?(y[0]>v.left||o<y[0])&&(w[0]=-1):v.left+v.width<o+h&&(y[0]<v.left+v.width||o>y[0])&&(w[0]=1),!w[0]&&!w[1]?!1:this._continueDrag(Fy(Fy({},i),{direction:w,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var o=r.prevScrollPos,l=o===void 0?this._prevScrollPos:o,a=r.direction,h=r.throttleTime,f=h===void 0?0:h,v=r.inputEvent,y=r.isDrag,w=this._getScrollPosition(a||[0,0],r),b=w[0]-l[0],A=w[1]-l[1],M=a||[b?Math.abs(b)/b:0,A?Math.abs(A)/A:0];return this._prevScrollPos=w,this._lock=!1,!b&&!A?!1:(this.emit("move",{offsetX:M[0]?b:0,offsetY:M[1]?A:0,inputEvent:v}),f&&y&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},f)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var o=i.container,l=i.getScrollPosition,a=l===void 0?AY:l;return a({container:h2(o),direction:r})},n._continueDrag=function(r){var i=this,o,l=r.container,a=r.direction,h=r.throttleTime,f=r.useScroll,v=r.isDrag,y=r.inputEvent;if(!(!this._flag||v&&this._isWait)){var w=Fb(),b=Math.max(h+this._prevTime-w,0);if(b>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},b),!1;this._prevTime=w;var A=this._getScrollPosition(a,r);this._prevScrollPos=A,v&&(this._isWait=!0),f||(this._lock=!0);var M={container:h2(l),direction:a,inputEvent:y};return(o=r.requestScroll)===null||o===void 0||o.call(r,M),this.emit("scroll",M),this._isWait=!1,f||this.checkScroll(Fy(Fy({},r),{prevScrollPos:A,direction:a,inputEvent:y}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var o=i===!0?n4:i,l=h2(r.container);i===!0&&(l===document.body||l===document.documentElement)?this._unregister=n4(window,this._onScroll):this._unregister=o(l,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(IR);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function PY(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],l=0,a=o.length;l<a;l++,i++)r[i]=o[l];return r}function ph(t){return Qi(t,cu)}function RY(t,e){return t.every(function(n,r){return ph(n-e[r])===0})}function DY(t,e){return!ph(t[0]-e[0])&&!ph(t[1]-e[1])}function D8(t){return t.length<3?0:Math.abs(tY(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function r4(t,e){var n=e.width,r=e.height,i=e.left,o=e.top,l=R0(t),a=l.minX,h=l.minY,f=l.maxX,v=l.maxY,y=n/(f-a),w=r/(v-h);return t.map(function(b){return[i+(b[0]-a)*y,o+(b[1]-h)*w]})}function R0(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function l3(t,e,n){var r=t[0],i=t[1],o=R0(e),l=o.minX,a=o.maxX,h=[[l,i],[a,i]],f=$w(h[0],h[1]),v=u3(e),y=[];if(v.forEach(function(A){var M=$w(A[0],A[1]),P=A[0];if(RY(f,M))y.push({pos:t,line:A,type:"line"});else{var C=L8(OR(f,M),[h,A]);C.forEach(function(k){A.some(function(B){return DY(B,k)})?y.push({pos:k,line:A,type:"point"}):ph(P[1]-i)!==0&&y.push({pos:k,line:A,type:"intersection"})})}}),Hh(y,function(A){return A[0]===r}))return!0;var w=0,b={};return y.forEach(function(A){var M=A.pos,P=A.type,C=A.line;if(!(M[0]>r))if(P==="intersection")++w;else{if(P==="line")return;if(P==="point"){var k=Hh(C,function(q){return q[1]!==i}),B=b[M[0]],z=k[1]>i?1:-1;B?B!==z&&++w:b[M[0]]=z}}}),w%2===1}function $w(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],l=i-n,a=o-r;Math.abs(l)<cu&&(l=0),Math.abs(a)<cu&&(a=0);var h=0,f=0,v=0;return l?a?(h=-a/l,f=1,v=-h*n-r):(f=1,v=-r):a&&(h=-1,v=n),[h,f,v]}function OR(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],l=e[1],a=e[2],h=n===0&&o===0,f=r===0&&l===0,v=[];if(h&&f)return[];if(h){var y=-i/r,w=-a/l;return y!==w?[]:[[-1/0,y],[1/0,y]]}else if(f){var b=-i/n,A=-a/o;return b!==A?[]:[[b,-1/0],[b,1/0]]}else if(n===0){var M=-i/r,P=-(l*M+a)/o;v=[[P,M]]}else if(o===0){var M=-a/l,P=-(r*M+i)/n;v=[[P,M]]}else if(r===0){var P=-i/n,M=-(o*P+a)/l;v=[[P,M]]}else if(l===0){var P=-a/o,M=-(n*P+i)/r;v=[[P,M]]}else{var P=(r*a-l*i)/(l*n-r*o),M=-(n*P+i)/r;v=[[P,M]]}return v.map(function(C){return[C[0],C[1]]})}function L8(t,e){var n=e.map(function(y){return[0,1].map(function(w){return[Math.min(y[0][w],y[1][w]),Math.max(y[0][w],y[1][w])]})}),r=[];if(t.length===2){var i=t[0],o=i[0],l=i[1];if(ph(o-t[1][0])){if(!ph(l-t[1][1])){var f=Math.max.apply(Math,n.map(function(y){return y[0][0]})),v=Math.min.apply(Math,n.map(function(y){return y[0][1]}));if(ph(f-v)>0)return[];r=[[f,l],[v,l]]}}else{var a=Math.max.apply(Math,n.map(function(y){return y[1][0]})),h=Math.min.apply(Math,n.map(function(y){return y[1][1]}));if(ph(a-h)>0)return[];r=[[o,a],[o,h]]}}return r.length||(r=t.filter(function(y){var w=y[0],b=y[1];return n.every(function(A){return 0<=ph(w-A[0][0])&&0<=ph(A[0][1]-w)&&0<=ph(b-A[1][0])&&0<=ph(A[1][1]-b)})})),r.map(function(y){return[ph(y[0]),ph(y[1])]})}function u3(t){return PY(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function LY(t,e){var n=t.slice(),r=e.slice();QI(n)===-1&&n.reverse(),QI(r)===-1&&r.reverse();var i=u3(n),o=u3(r),l=i.map(function(v){return $w(v[0],v[1])}),a=o.map(function(v){return $w(v[0],v[1])}),h=[];l.forEach(function(v,y){var w=i[y],b=[];a.forEach(function(A,M){var P=OR(v,A),C=L8(P,[w,o[M]]);b.push.apply(b,C.map(function(k){return{index1:y,index2:M,pos:k,type:"intersection"}}))}),b.sort(function(A,M){return Zp(w[0],A.pos)-Zp(w[0],M.pos)}),h.push.apply(h,b),l3(w[1],r)&&h.push({index1:y,index2:-1,pos:w[1],type:"inside"})}),o.forEach(function(v,y){if(l3(v[1],n)){var w=!1,b=em(h,function(A){var M=A.index2;return M===y?(w=!0,!1):!!w});b===-1&&(w=!1,b=em(h,function(A){var M=A.index1,P=A.index2;return M===-1&&P+1===y?(w=!0,!1):!!w})),b===-1?h.push({index1:-1,index2:y,pos:v[1],type:"inside"}):h.splice(b,0,{index1:-1,index2:y,pos:v[1],type:"inside"})}});var f={};return h.filter(function(v){var y=v.pos,w=y[0]+"x"+y[1];return f[w]?!1:(f[w]=!0,!0)})}function IY(t,e){var n=LY(t,e);return n.map(function(r){var i=r.pos;return i})}function OY(t,e){var n=IY(t,e);return D8(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c3=function(t,e){return c3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},c3(t,e)};function NY(t,e){c3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var lu=function(){return lu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},lu.apply(this,arguments)};function kY(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function wT(t){return kY([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function FY(t){return t.touches&&t.touches.length>=2}function f2(t){return t?t.touches?zY(t.touches):[I8(t)]:[]}function BY(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function i4(t,e,n){var r=n.length,i=_b(t,r),o=i.clientX,l=i.clientY,a=i.originalClientX,h=i.originalClientY,f=_b(e,r),v=f.clientX,y=f.clientY,w=_b(n,r),b=w.clientX,A=w.clientY,M=o-v,P=l-y,C=o-b,k=l-A;return{clientX:a,clientY:h,deltaX:M,deltaY:P,distX:C,distY:k}}function ST(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function zY(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(I8(t[r]));return n}function I8(t){return{clientX:t.clientX,clientY:t.clientY}}function _b(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var o=t[i];n.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,n.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,n.clientX+=o.clientX,n.clientY+=o.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var ET=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),wT(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),wT(e)-wT(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=i4(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,o=r.deltaY;return this.movement+=Math.sqrt(i*i+o*o),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),o=[],l=0;l<i;++l)o[l]=i4([e[l]],[n[l]],[r[l]]);return o},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=_b(e,this.length),i=_b(this.prevClients,this.length),o=r.clientX-i.clientX,l=r.clientY-i.clientY;return Math.sqrt(o*o+l*l)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),ST(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),ST(e)/ST(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),a4=["textarea","input"],UY=function(t){NY(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(w,b){if(b===void 0&&(b=!0),!(!i.flag&&w.cancelable===!1)){var A=w.type.indexOf("drag")>=-1;if(!(i.flag&&A)){i._isDragAPI=!0;var M=i.options,P=M.container,C=M.pinchOutside,k=M.preventWheelClick,B=M.preventRightClick,z=M.preventDefault,q=M.checkInput,V=M.dragFocusedInput,W=M.preventClickEventOnDragStart,Y=M.preventClickEventOnDrag,Z=M.preventClickEventByCondition,j=i._useTouch,K=!i.flag;if(i._isSecondaryButton=w.which===3||w.button===2,k&&(w.which===2||w.button===1)||B&&(w.which===3||w.button===2))return i.stop(),!1;if(K){var re=i._window.document.activeElement,ie=w.target;if(ie){var se=ie.tagName.toLowerCase(),de=a4.indexOf(se)>-1,ue=ie.isContentEditable;if(de||ue){if(q||!V&&re===ie)return!1;if(re&&(re===ie||ue&&re.isContentEditable&&re.contains(ie)))if(V)ie.blur();else return!1}else if((z||w.type==="touchstart")&&re){var Te=re.tagName.toLowerCase();(re.isContentEditable||a4.indexOf(Te)>-1)&&re.blur()}(W||Y||Z)&&Cc(i._window,"click",i._onClick,!0)}i.clientStores=[new ET(f2(w))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=b,i._dragFlag=!0,i._prevInputEvent=w,i.data={},i.doubleFlag=Fb()-i.prevTime<200,i._isMouseEvent=BY(w),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var pe=i._preventMouseEvent||i.emit("dragStart",lu(lu({data:i.data,datas:i.data,inputEvent:w,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:b,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){w.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));pe===!1&&i.stop(),i._isMouseEvent&&i.flag&&z&&w.preventDefault()}if(!i.flag)return!1;var De=0;if(K?(i._attchDragEvent(),j&&C&&(De=setTimeout(function(){Cc(P,"touchstart",i.onDragStart,{passive:!1})}))):j&&C&&rc(P,"touchstart",i.onDragStart),i.flag&&FY(w)){if(clearTimeout(De),K&&w.touches.length!==w.changedTouches.length)return;i.pinchFlag||i.onPinchStart(w)}}}},i.onDrag=function(w,b){if(i.flag){var A=i.options.preventDefault;!i._isMouseEvent&&A&&w.preventDefault(),i._prevInputEvent=w;var M=f2(w),P=i.moveClients(M,w,!1);if(i._dragFlag){if(i.pinchFlag||P.deltaX||P.deltaY){var C=i._preventMouseEvent||i.emit("drag",lu(lu({},P),{isScroll:!!b,inputEvent:w}));if(C===!1){i.stop();return}}i.pinchFlag&&i.onPinch(w,M)}i.getCurrentStore().getPosition(M,!0)}},i.onDragEnd=function(w){if(i.flag){var b=i.options,A=b.pinchOutside,M=b.container,P=b.preventClickEventOnDrag,C=b.preventClickEventOnDragStart,k=b.preventClickEventByCondition,B=i.isDrag;(P||C||k)&&requestAnimationFrame(function(){i._allowClickEvent()}),!k&&!C&&P&&!B&&i._allowClickEvent(),i._useTouch&&A&&rc(M,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(w);var z=w!=null&&w.touches?f2(w):[],q=z.length;q===0||!i.options.keepDragging?i.flag=!1:i._addStore(new ET(z));var V=i._getPosition(),W=Fb(),Y=!B&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=B||Y?0:W,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",lu({data:i.data,datas:i.data,isDouble:Y,isDrag:B,isClick:!B,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:w,isTrusted:i._isTrusted},V)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){rc(i._window,"click",i._onClick,!0)},i._onClick=function(w){i._allowClickEvent(),i._allowMouseEvent();var b=i.options.preventClickEventByCondition;b!=null&&b(w)||(w.stopPropagation(),w.preventDefault())},i._onContextMenu=function(w){var b=i.options;b.preventRightClick?i.onDragEnd(w):w.preventDefault()},i._passCallback=function(){};var o=[].concat(n),l=o[0];i._window=T8(l)?l:eg(l),i.options=lu({checkInput:!1,container:l&&!("document"in l)?eg(l):l,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var a=i.options,h=a.container,f=a.events,v=a.checkWindowBlur;if(i._useDrag=f.indexOf("drag")>-1,i._useTouch=f.indexOf("touch")>-1,i._useMouse=f.indexOf("mouse")>-1,i.targets=o,i._useDrag&&o.forEach(function(w){Cc(w,"dragstart",i.onDragStart)}),i._useMouse&&(o.forEach(function(w){Cc(w,"mousedown",i.onDragStart),Cc(w,"mousemove",i._passCallback)}),Cc(h,"contextmenu",i._onContextMenu)),v&&Cc(eg(),"blur",i.onBlur),i._useTouch){var y={passive:!1};o.forEach(function(w){Cc(w,"touchstart",i.onDragStart,y),Cc(w,"touchmove",i._passCallback,y)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(n,r),o&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],o=n[1],l=this.getCurrentStore(),a=l.prevClients;return this.moveClients(a.map(function(h){var f=h.clientX,v=h.clientY;return{clientX:f+i,clientY:v+o,originalClientX:f,originalClientY:v}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),lu(lu({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),rc(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(o){rc(o,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(o){rc(o,"mousedown",n.onDragStart)}),rc(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(o){rc(o,"touchstart",n.onDragStart)}),rc(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var o=new ET(f2(n));this.pinchFlag=!0,this._addStore(o);var l=this.emit("pinchStart",lu(lu({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));l===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",lu(lu({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",lu(lu({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var o=this._getPosition(n,i),l=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!l&&this.isDrag&&(a=!0),lu(lu({data:this.data,datas:this.data},o),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:a})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),o=i.getPosition(n,r),l=this.clientStores.slice(1).reduce(function(f,v){var y=v.getPosition();return f.distX+=y.distX,f.distY+=y.distY,f},o),a=l.distX,h=l.distY;return lu(lu({},o),{distX:a,distY:h})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Cc(r,"dragover",this.onDrag,i),Cc(n,"dragend",this.onDragEnd)),this._useMouse&&(Cc(r,"mousemove",this.onDrag),Cc(n,"mouseup",this.onDragEnd)),this._useTouch&&(Cc(r,"touchmove",this.onDrag,i),Cc(n,"touchend",this.onDragEnd,i),Cc(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(rc(r,"dragover",this.onDrag),rc(n,"dragend",this.onDragEnd)),this._useMouse&&(rc(r,"mousemove",this.onDrag),rc(n,"mouseup",this.onDragEnd)),this._useTouch&&(rc(r,"touchstart",this.onDragStart),rc(r,"touchmove",this.onDrag),rc(n,"touchend",this.onDragEnd),rc(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(IR);function jY(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var VY=jY;function GY(t){return VY(t).toString(36)}function qY(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function HY(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var o=i.trim();return(o?_0(o):[""]).map(function(l){var a=l.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(t))):a?".".concat(t," ").concat(a):".".concat(t)}).join(", ")+" {"})}function $Y(t,e,n,r,i){var o=AR(r),l=o.createElement("style");return l.setAttribute("type","text/css"),l.setAttribute("data-styled-id",t),l.setAttribute("data-styled-count","1"),n.nonce&&l.setAttribute("nonce",n.nonce),l.innerHTML=HY(t,e,n),(i||o.head||o.body).appendChild(l),l}function WY(t){var e="rCS"+GY(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=qY(n),o=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!o)o=$Y(e,t,r,n,i);else{var l=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(l+1))}return{destroy:function(){var a,h=parseFloat(o.getAttribute("data-styled-count"))||0;h<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(h-1))}}}}}var h3=function(){return h3=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h3.apply(this,arguments)};function XY(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function O8(t,e){var n=WY(e),r=n.className;return Et.forwardRef(function(i,o){var l=i.className,a=l===void 0?"":l;i.cspNonce;var h=XY(i,["className","cspNonce"]),f=Et.useRef();return Et.useImperativeHandle(o,function(){return f.current},[]),Et.useEffect(function(){var v=n.inject(f.current,{nonce:i.cspNonce});return function(){v.destroy()}},[]),Et.createElement(t,h3({ref:f,"data-styled-id":r,className:"".concat(a," ").concat(r)},h))})}var f3=function(t,e){return f3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},f3(t,e)};function sx(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Qt=function(){return Qt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qt.apply(this,arguments)};function ZY(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function YY(t,e,n,r){var i=arguments.length,o=i<3?e:r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(l=t[a])&&(o=(i<3?l(o):i>3?l(e,n,o):l(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function KY(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rn(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){l={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o}function Tr(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function lx(t,e){return Qt({events:[],props:[],name:t},e)}var JY=["n","w","s","e"],NR=["n","w","s","e","nw","ne","sw","se"];function QY(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function eK(t){var e=QY(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var A_=UZ(),N8=A_.browser.webkit,k8=N8&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),F8=A_.browser.name,B8=parseInt(A_.browser.version,10),tK=F8==="chrome",nK=A_.browser.chromium,rK=parseInt(A_.browser.chromiumVersion,10)||0,iK=tK&&B8>=109||nK&&rK>=109,aK=F8==="firefox",oK=parseInt(A_.browser.webkitVersion,10)>=612||B8>=15,kR="moveable-",sK=NR.map(function(t){var e="",n="",r="center",i="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(o,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(o,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),lK=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(sK,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(eK(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(k8?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),uK=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],d3=1e-4,Qc=1e-7,d2=1e-9,p3=Math.pow(10,10),o4=-p3,cK={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},FR={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},z8={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},hK=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function ux(t,e,n,r,i,o){var l,a;o===void 0&&(o="draggable");var h=(a=(l=e.gestos[o])===null||l===void 0?void 0:l.move(n,t.inputEvent))!==null&&a!==void 0?a:{},f=h.originalDatas||h.datas,v=f[o]||(f[o]={});return Qt(Qt({},h),{isPinch:!!r,parentEvent:!0,datas:v,originalDatas:t.originalDatas})}var l_=function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),Qt(Qt({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,o=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var l=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!l&&this.isDrag&&(o=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:o,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function e_(t,e,n,r){var i=t.length===16,o=i?4:3,l=q0(t,n,r,o),a=rn(l,4),h=rn(a[0],2),f=h[0],v=h[1],y=rn(a[1],2),w=y[0],b=y[1],A=rn(a[2],2),M=A[0],P=A[1],C=rn(a[3],2),k=C[0],B=C[1],z=rn(Js(t,e,o),2),q=z[0],V=z[1],W=Math.min(f,w,M,k),Y=Math.min(v,b,P,B),Z=Math.max(f,w,M,k),j=Math.max(v,b,P,B);f=f-W||0,w=w-W||0,M=M-W||0,k=k-W||0,v=v-Y||0,b=b-Y||0,P=P-Y||0,B=B-Y||0,q=q-W||0,V=V-Y||0;var K=t[0],re=t[o+1],ie=Yc(K*re);return{left:W,top:Y,right:Z,bottom:j,origin:[q,V],pos1:[f,v],pos2:[w,b],pos3:[M,P],pos4:[k,B],direction:ie}}function U8(t,e){var n=e.clientX,r=e.clientY,i=e.datas,o=t.state,l=o.moveableClientRect,a=o.rootMatrix,h=o.is3d,f=o.pos1,v=l.left,y=l.top,w=h?4:3,b=rn(Ei(h_(a,[n-v,r-y],w),f),2),A=b[0],M=b[1],P=rn(fp({datas:i,distX:A,distY:M}),2),C=P[0],k=P[1];return[C,k]}function G0(t,e){var n=e.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,l=r.is3d,a=r.left,h=r.top,f=r.origin,v=r.offsetMatrix,y=r.targetMatrix,w=r.transformOrigin,b=l?4:3;n.is3d=l,n.matrix=i,n.targetMatrix=y,n.beforeMatrix=o,n.offsetMatrix=v,n.transformOrigin=w,n.inverseMatrix=cp(i,b),n.inverseBeforeMatrix=cp(o,b),n.absoluteOrigin=C0(to([a,h],f),b),n.startDragBeforeDist=Oc(n.inverseBeforeMatrix,n.absoluteOrigin,b),n.startDragDist=Oc(n.inverseMatrix,n.absoluteOrigin,b)}function fK(t){return e_(t.datas.beforeTransform,[50,50],100,100).direction}function $S(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,o=r.transformIndex,l=i.nextTransforms,a=l.length,h=i.nextTransformAppendedIndexes,f=-1;o===-1?(n==="translate"?f=0:n==="rotate"&&(f=em(l,function(b){return b.match(/scale\(/g)})),f===-1&&(f=l.length),r.transformIndex=f):Hh(h,function(b){return b.index===o&&b.functionName===n})?f=o:f=o+h.filter(function(b){return b.index<o}).length;var v=BJ(l,t.state,f),y=v.targetFunction,w=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=v.beforeFunctionTexts,r.afterFunctionTexts=v.afterFunctionTexts,r.beforeTransform=v.beforeFunctionMatrix,r.beforeTransform2=v.beforeFunctionMatrix2,r.targetTansform=v.targetFunctionMatrix,r.afterTransform=v.afterFunctionMatrix,r.afterTransform2=v.afterFunctionMatrix2,r.targetAllTransform=v.allFunctionMatrix,y.functionName===w?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):a>f&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Tr(Tr([],rn(h),!1),[{functionName:n,index:f,isAppend:!0}],!1))}function WS(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function dK(t){var e=t.datas,n=t.distX,r=t.distY,i=rn(V8({datas:e,distX:n,distY:r}),2),o=i[0],l=i[1],a=j8(e,uY([o,l],4));return Oc(a,C0([0,0,0],4),4)}function j8(t,e,n){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,l=t.afterTransform2,a=t.targetAllTransform,h=n?Uo(a,e,4):Uo(e,a,4),f=Uo(cp(n?o:r,4),h,4),v=Uo(f,cp(n?l:i,4),4);return v}function V8(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,o=e.is3d,l=e.startDragBeforeDist,a=e.absoluteOrigin,h=o?4:3;return Ei(Oc(i,to(a,[n,r]),h),l)}function fp(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.inverseBeforeMatrix,l=n.inverseMatrix,a=n.is3d,h=n.startDragBeforeDist,f=n.startDragDist,v=n.absoluteOrigin,y=a?4:3;return Ei(Oc(e?o:l,to(v,[r,i]),y),e?h:f)}function pK(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var o=n.matrix,l=n.is3d;n.startDragBeforeDist;var a=n.startDragDist,h=n.absoluteOrigin,f=l?4:3;return Ei(Oc(o,to(a,[r,i]),f),h)}function mK(t,e,n,r,i,o){return r===void 0&&(r=e),i===void 0&&(i=n),o===void 0&&(o=[0,0]),t?t.map(function(l,a){var h=ix(l),f=h.value,v=h.unit,y=a?i:r,w=a?n:e;if(l==="%"||isNaN(f)){var b=y?o[a]/y:0;return w*b}else if(v!=="%")return f;return w*f/100}):o}function G8(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function gK(t,e){return G8(e).map(function(n){return t[n]})}function TT(t,e){var n=(e+1)/2;return[qw(t[0][0],t[1][0],n,1-n),qw(t[0][1],t[1][1],n,1-n)]}function Eu(t,e){var n=TT([t[0],t[1]],e[0]),r=TT([t[2],t[3]],e[0]);return TT([n,r],e[1])}function vK(t,e,n,r,i,o){var l=q0(e,n,r,i),a=Eu(l,o),h=t[0]-a[0],f=t[1]-a[1];return[h,f]}function cx(t,e,n,r){return Uo(t,xb(e,r,n),r)}function yK(t,e,n,r){var i=t.transformOrigin,o=t.offsetMatrix,l=t.is3d,a=l?4:3,h;if(sm(n)){var f=e.beforeTransform,v=e.afterTransform;r?h=cd(Bb(n),4,a):h=cd(Uo(Uo(f,Bb([n]),4),v,4),4,a)}else h=n;return cx(o,h,i,a)}function _K(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,o=t.targetMatrix,l=t.targetAllTransform,a=i?4:3;return cx(r,Uo(l||o,RR(e,a),a),n,a)}function XS(t,e){var n=C_(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=Xu(r)?r:ug(r),m3(t,e,i)},setTransformIndex:function(r){m3(t,e,r)}}}function ZS(t,e,n){var r=C_(e),i=r.startTransforms;m3(t,e,em(i,function(o){return o.indexOf("".concat(n,"("))===0}))}function m3(t,e,n){var r=C_(e),i=e.datas;if(i.transformIndex=n,n!==-1){var o=r.startTransforms[n];if(o){var l=t.state,a=s_([o],{"x%":function(h){return h/100*l.offsetWidth},"y%":function(h){return h/100*l.offsetHeight}});i.startValue=a[0].functionValue}}}function BR(t,e){var n=C_(t);n.nextTransforms=ug(e)}function C_(t){return t.originalDatas.beforeRenderable}function Ww(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function p2(t){return(Ww(t)||[]).join(" ")}function m2(t){return C_(t).nextStyle}function q8(t,e,n,r,i){BR(i,e);var o=Zc.drag(t,ux(i,t.state,n,r)),l=o?o.transform:e;return Qt(Qt({transform:e,drag:o},Jc({transform:l},i)),{afterTransform:l})}function zR(t,e,n,r,i,o){var l=yK(t.state,i,e,o),a=wK(t,n,r,l);return a}function H8(t,e,n,r,i,o,l){var a=zR(t,e,n,i,o,l),h=t.state,f=h.left,v=h.top,y=t.props.groupable,w=y?f:0,b=y?v:0,A=Ei(r,a);return Ei(A,[w,b])}function bK(t,e,n,r,i,o,l){var a=H8(t,e,n,r,i,o,l);return a}function xK(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function wK(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,o=i.width,l=i.height,a=i.is3d,h=a?4:3,f=[o/2*(1+e[0])+n[0],l/2*(1+e[1])+n[1]];return Js(r,f,h)}function SK(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,o=n.fixedOffset;return H8(t,"rotate(".concat(e,"deg)"),r,i,o,n)}function EK(t,e,n,r,i,o){var l=t.props.groupable,a=t.state,h=a.transformOrigin,f=a.offsetMatrix,v=a.is3d,y=a.width,w=a.height,b=a.left,A=a.top,M=o.fixedDirection,P=o.nextTargetMatrix||a.targetMatrix,C=v?4:3,k=mK(i,e,n,y,w,h),B=l?b:0,z=l?A:0,q=cx(f,P,k,C),V=vK(r,q,e,n,C,M);return Ei(V,[B,z])}function TK(t,e){return Eu(Tf(t.state),e)}function MK(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n!=null&&n.isFlag()&&(i=n.getEventData()[e]),!i&&(r!=null&&r.isFlag())&&(i=r.getEventData()[e]),i||{}}function AK(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function CK(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function $8(t,e,n){for(var r=t,i=[],o=CR(t)||vg(t),l=!n&&t===e||t===o,a=l,h=!1,f=3,v,y,w,b=!1,A=Ub(e,e,!0).offsetParent,M=1;r&&!a;){a=l;var P=_h(r),C=P("position"),k=gU(r),B=C==="fixed",z=CK(P),q=cY(TJ(k)),V=void 0,W=!1,Y=!1,Z=0,j=0,K=0,re=0,ie={hasTransform:!1,fixedContainer:null};B&&(b=!0,ie=RJ(r),A=ie.fixedContainer);var se=q.length;!h&&(se===16||z.length)&&(h=!0,f=4,x3(i),w&&(w=cd(w,3,4))),h&&se===9&&(q=cd(q,3,4));var de=PJ(r,t),ue=de.tagName,Te=de.hasOffset,pe=de.isSVG,De=de.origin,me=de.targetOrigin,Me=de.offset,fe=rn(Me,2),ve=fe[0],le=fe[1];ue==="svg"&&!r.ownerSVGElement&&w&&(i.push({type:"target",target:r,matrix:DJ(r,f)}),i.push({type:"offset",target:r,matrix:bs(f)}));var ye=parseFloat(P("zoom"))||1;if(B)V=ie.fixedContainer,W=!0;else{var Se=Ub(r,e,!1,!0,P),Be=Se.offsetZoom;if(V=Se.offsetParent,W=Se.isEnd,Y=Se.isStatic,M*=Be,(Se.isCustomElement||Be!==1)&&Y)ve-=V.offsetLeft,le-=V.offsetTop;else if(aK||iK){var Ve=Se.parentSlotElement;if(Ve){for(var tt=V,ht=0,it=0;tt&&AK(tt);)ht+=tt.offsetLeft,it+=tt.offsetTop,tt=tt.offsetParent;ve-=ht,le-=it}}}if(N8&&!oK&&Te&&!pe&&Y&&(C==="relative"||C==="static")&&(ve-=V.offsetLeft,le-=V.offsetTop,l=l||W),B)Te&&ie.hasTransform&&(K=V.clientLeft,re=V.clientTop);else if(Te&&A!==V&&(Z=V.clientLeft,j=V.clientTop),Te&&V===o){var gt=vU(r,!1);ve+=gt[0],le+=gt[1]}if(i.push({type:"target",target:r,matrix:xb(q,f,De)}),z.length&&(i.push({type:"offset",target:r,matrix:bs(f)}),i.push({type:"target",target:r,matrix:xb(Bb(z),f,De)})),Te){var $t=r===t,He=$t?0:r.scrollLeft,Ct=$t?0:r.scrollTop;i.push({type:"offset",target:r,matrix:P0([ve-He+Z-K,le-Ct+j-re],f)})}else i.push({type:"offset",target:r,origin:De});if(ye!==1&&i.push({type:"zoom",target:r,matrix:xb(RR([ye,ye],f),f,[0,0])}),w||(w=q),v||(v=De),y||(y=me),a||B)break;r=V,l=W,(!n||r===o)&&(a=l)}return w||(w=bs(f)),v||(v=[0,0]),y||(y=[0,0]),{zoom:M,offsetContainer:A,matrixes:i,targetMatrix:w,transformOrigin:v,targetOrigin:y,is3d:h,hasFixed:b}}var f0=null,d0=null,By=null;function u_(t){t?(window.Map&&(f0=new Map,d0=new Map),By=[]):(f0=null,By=null,d0=null)}function PK(t){var e=d0==null?void 0:d0.get(t);if(e)return e;var n=wb(t,!0);return d0&&d0.set(t,n),n}function RK(t,e){if(By){var n=Hh(By,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=$8(t,e,!0);return By&&By.push([[t,e],r]),r}function _h(t){var e=f0==null?void 0:f0.get(t);if(!e){var n=eg(t).getComputedStyle(t);if(!f0)return function(o){return n[o]};e={style:n,cached:{}},f0.set(t,e)}var r=e.cached,i=e.style;return function(o){return o in r||(r[o]=i[o]),r[o]}}function od(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(l,a){return o[a]=o[a]||{},o[a][e]=o[a][e]||{},Qt(Qt({},n),{isRequestChild:!0,datas:o[a][e],originalDatas:o[a]})})}function MT(t,e,n,r,i,o,l){var a=!!n.match(/Start$/g),h=!!n.match(/End$/g),f=i.isPinch,v=i.datas,y=od(t,e.name,i),w=t.moveables,b=[],A=y.map(function(M,P){var C=w[P],k=C.state,B=k.gestos,z=M;if(a)z=new l_(l).dragStart(r,M),b.push(z);else{if(B[l]||(B[l]=v.childGestos[P]),!B[l])return;z=ux(M,k,r,f,o,l),b.push(z)}var q=e[n](C,Qt(Qt({},z),{parentFlag:!0}));return h&&(B[l]=null),q});return a&&(v.childGestos=w.map(function(M){return M.state.gestos[l]})),{eventParams:A,childEvents:b}}function Yp(t,e,n,r,i,o){i===void 0&&(i=function(v,y){return y});var l=!!n.match(/End$/g),a=od(t,e.name,r),h=t.moveables,f=a.map(function(v,y){var w=h[y],b=v;b=i(w,v);var A=e[n](w,Qt(Qt({},b),{parentFlag:!0}));return l&&(w.state.gestos={}),A});return f}function Xw(t,e,n,r){var i=n.fixedDirection,o=n.fixedPosition,l=r.datas.startPositions||Tf(e.state),a=Eu(l,i),h=rn(Oc(ox(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),f=h[0],v=h[1];return r.datas.originalX=f,r.datas.originalY=v,r}function W8(t,e,n,r){var i=t.getState(),o=i.renderPoses,l=i.rotation,a=i.direction,h=D0(t.props,e).zoom,f=bb(l/Math.PI*180),v={},y=t.renderState;y.renderDirectionMap||(y.renderDirectionMap={});var w=y.renderDirectionMap;n.forEach(function(A){var M=A.dir;v[M]=!0});var b=Yc(a);return n.map(function(A){var M=A.data,P=A.classNames,C=A.dir,k=FR[C];if(!k||!v[C])return null;w[C]=!0;var B=(Qi(f,15)+b*z8[C]+720)%180,z={};return M_(M).forEach(function(q){z["data-".concat(q)]=M[q]}),r.createElement("div",Qt({className:xi.apply(void 0,Tr(["control","direction",C,e],rn(P),!1)),"data-rotation":B,"data-direction":C},z,{key:"direction-".concat(C),style:Jw.apply(void 0,Tr([l,h],rn(k.map(function(q){return o[q]})),!1))}))})}function X8(t,e,n,r){var i=D0(t.props,n),o=i.renderDirections,l=o===void 0?e:o,a=i.displayAroundControls;if(!l)return[];var h=l===!0?NR:l;return Tr(Tr([],rn(a?J8(t,r,n,h):[]),!1),rn(W8(t,n,h.map(function(f){return{data:{},classNames:[],dir:f}}),r)),!1)}function zb(t,e,n,r,i,o){for(var l=[],a=6;a<arguments.length;a++)l[a-6]=arguments[a];var h=jl(n,r),f=e?Qi(h/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(o),className:xi.apply(void 0,Tr(["line","direction",e?"edge":"",e],rn(l),!1)),"data-rotation":f,"data-line-key":o,"data-direction":e,style:eb(n,r,i,h)})}function Z8(t,e,n,r,i){var o=n===!0?JY:n;return o.map(function(l,a){var h=rn(FR[l],2),f=h[0],v=h[1];if(v!=null)return zb(t,l,r[f],r[v],i,"".concat(e,"Edge").concat(a),e)}).filter(Boolean)}function Y8(t){return function(e,n){var r=D0(e.props,t).edge;return r&&(r===!0||r.length)?Tr(Tr([],rn(Z8(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),rn(DK(e,t,n)),!1):K8(e,t,n)}}function K8(t,e,n){return X8(t,NR,e,n)}function DK(t,e,n){return X8(t,["nw","ne","sw","se"],e,n)}function J8(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var o=t.getState(),l=o.renderPoses,a=o.rotation,h=o.direction,f=i.renderDirectionMap,v=t.props.zoom,y=Yc(h),w=a/Math.PI*180;return(r||M_(f)).map(function(b){var A=FR[b];if(!A)return null;var M=(Qi(w,15)+y*z8[b]+720)%180,P=["around-control"];return n&&P.push("direction",n),e.createElement("div",{className:xi.apply(void 0,Tr([],rn(P),!1)),"data-rotation":M,"data-direction":b,key:"direction-around-".concat(b),style:Jw.apply(void 0,Tr([a,v],rn(A.map(function(C){return l[C]})),!1))})})}function UR(t,e,n){var r=t||{},i=r.position,o=i===void 0?"client":i,l=r.left,a=l===void 0?-1/0:l,h=r.top,f=h===void 0?-1/0:h,v=r.right,y=v===void 0?1/0:v,w=r.bottom,b=w===void 0?1/0:w,A={position:o,left:a,top:f,right:y,bottom:b};return{vertical:s4(A,e,!0),horizontal:s4(A,n,!1)}}function YS(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,o=r.clientWidth,l=r.clientLeft,a=r.clientTop,h=n.snapOffset,f=h.left,v=h.top,y=h.right,w=h.bottom,b=e||t.props.bounds||{},A=b.position||"client",M=A==="css",P=b.left,C=P===void 0?-1/0:P,k=b.top,B=k===void 0?-1/0:k,z=b.right,q=z===void 0?M?-1/0:1/0:z,V=b.bottom,W=V===void 0?M?-1/0:1/0:V;return M&&(q=o+y-f-q,W=i+w-v-W),{left:C+f-l,right:q+f-l,top:B+v-a,bottom:W+v-a}}function LK(t,e,n){var r=YS(t),i=r.left,o=r.top,l=r.right,a=r.bottom,h=rn(n,2),f=h[0],v=h[1],y=rn(Ei(n,e),2),w=y[0],b=y[1];gr(w)<Qc&&(w=0),gr(b)<Qc&&(b=0);var A=b>0,M=w>0,P={isBound:!1,offset:0,pos:0},C={isBound:!1,offset:0,pos:0};if(w===0&&b===0)return{vertical:P,horizontal:C};if(w===0)A?a<v&&(C.pos=a,C.offset=v-a):o>v&&(C.pos=o,C.offset=v-o);else if(b===0)M?l<f&&(P.pos=l,P.offset=f-l):i>f&&(P.pos=i,P.offset=f-i);else{var k=b/w,B=n[1]-k*f,z=0,q=0,V=!1;M&&l<=f?(z=k*l+B,q=l,V=!0):!M&&f<=i&&(z=k*i+B,q=i,V=!0),V&&(z<o||z>a)&&(V=!1),V||(A&&a<=v?(z=a,q=(z-B)/k,V=!0):!A&&v<=o&&(z=o,q=(z-B)/k,V=!0)),V&&(P.isBound=!0,P.pos=q,P.offset=f-q,C.isBound=!0,C.pos=z,C.offset=v-z)}return{vertical:P,horizontal:C}}function s4(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],o=Math.min.apply(Math,Tr([],rn(e),!1)),l=Math.max.apply(Math,Tr([],rn(e),!1)),a=[];return r+1>o&&a.push({direction:"start",isBound:!0,offset:o-r,pos:r}),i-1<l&&a.push({direction:"end",isBound:!0,offset:l-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(h,f){return gr(f.offset)-gr(h.offset)})}function l4(t,e,n){var r=n?t.map(function(i){return ax(i,n)}):t;return r.some(function(i){return i[0]<e.left&&gr(i[0]-e.left)>.1||i[0]>e.right&&gr(i[0]-e.right)>.1||i[1]<e.top&&gr(i[1]-e.top)>.1||i[1]>e.bottom&&gr(i[1]-e.bottom)>.1})}function IK(t,e,n){var r=Ef(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(o,l){return gr(o-t[n?0:1])-gr(l-t[n?0:1])}).map(function(o){return jl([0,0],n?[o,e]:[e,o])})}function OK(t,e,n,r,i){if(!t.props.bounds)return[];var o=i*Math.PI/180,l=YS(t),a=l.left,h=l.top,f=l.right,v=l.bottom,y=a-r[0],w=f-r[0],b=h-r[1],A=v-r[1],M={left:y,top:b,right:w,bottom:A};if(!l4(n,M,0))return[];var P=[];return[[y,0],[w,0],[b,1],[A,1]].forEach(function(C){var k=rn(C,2),B=k[0],z=k[1];n.forEach(function(q){var V=jl([0,0],q);P.push.apply(P,Tr([],rn(IK(q,B,z).map(function(W){return o+W-V}).filter(function(W){return!l4(e,M,W)}).map(function(W){return Qi(W*180/Math.PI,Qc)})),!1))})}),P}var NK=["left","right","center"],kK=["top","bottom","middle"],u4={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},cg={start:"left",end:"right",center:"center"},hg={start:"top",end:"bottom",center:"middle"};function zy(){return{left:!1,top:!1,right:!1,bottom:!1}}function P_(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.innerBounds,l=n.verticalGuidelines,a=n.horizontalGuidelines,h=n.snapGridWidth,f=n.snapGridHeight,v=t.state,y=v.guidelines,w=v.enableSnap;return!r||!w||e&&r!==!0&&r.indexOf(e)<0?!1:!!(h||f||i||o||y&&y.length||l&&l.length||a&&a.length)}function jR(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function FK(t,e){var n=jR(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function VR(t,e){var n=FK(t,e),r=kK.filter(function(o){return o in n}),i=NK.filter(function(o){return o in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(o){return n[o]}),vertical:i.map(function(o){return n[o]})}}function BK(t,e,n){var r=Js(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function zK(t){var e=rn(t,2),n=e[0],r=e[1],i=r[0]-n[0],o=r[1]-n[1];Math.abs(i)<cu&&(i=0),Math.abs(o)<cu&&(o=0);var l=0,a=0,h=0;return i?o?(l=-o/i,a=1,h=l*n[0]-n[1]):(a=1,h=-n[1]):(l=-1,h=n[0]),[l,a,h].map(function(f){return Qi(f,cu)})}var Q8="snapRotationThreshold",eU="snapRotationDegrees",tU="snapHorizontalThreshold",nU="snapVerticalThreshold";function KS(t,e,n,r,i,o,l){var a;r===void 0&&(r=[]),i===void 0&&(i=[]);var h=t.props,f=((a=t.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],v=E4(l,h[tU],5),y=E4(o,h[nU],5);return rU(t.state.guidelines,e,n,r,i,v,y,f)}function rU(t,e,n,r,i,o,l,a){return{vertical:h4(t,"vertical",e,l*a[0],r),horizontal:h4(t,"horizontal",n,o*a[1],i)}}function UK(t,e,n){var r=rn(n,2),i=r[0],o=r[1],l=rn(e,2),a=l[0],h=l[1],f=rn(Ei(n,e),2),v=f[0],y=f[1],w=y>0,b=v>0;v=Qw(v),y=Qw(y);var A={isSnap:!1,offset:0,pos:0},M={isSnap:!1,offset:0,pos:0};if(v===0&&y===0)return{vertical:A,horizontal:M};var P=KS(t,v?[i]:[],y?[o]:[],[],[],void 0,void 0),C=P.vertical,k=P.horizontal;C.posInfos.filter(function(ue){var Te=ue.pos;return b?Te>=a:Te<=a}),k.posInfos.filter(function(ue){var Te=ue.pos;return w?Te>=h:Te<=h}),C.isSnap=C.posInfos.length>0,k.isSnap=k.posInfos.length>0;var B=g3(C),z=B.isSnap,q=B.guideline,V=g3(k),W=V.isSnap,Y=V.guideline,Z=W?Y.pos[1]:0,j=z?q.pos[0]:0;if(v===0)W&&(M.isSnap=!0,M.pos=Y.pos[1],M.offset=o-M.pos);else if(y===0)z&&(A.isSnap=!0,A.pos=j,A.offset=i-j);else{var K=y/v,re=n[1]-K*i,ie=0,se=0,de=!1;z?(se=j,ie=K*se+re,de=!0):W&&(ie=Z,se=(ie-re)/K,de=!0),de&&(A.isSnap=!0,A.pos=se,A.offset=i-se,M.isSnap=!0,M.pos=ie,M.offset=o-ie)}return{vertical:A,horizontal:M}}function Ym(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function c4(t,e,n,r){var i=VR(t.props.snapDirections,e),o=KS(t,i.vertical,i.horizontal,i.verticalNames.map(function(h){return Ym(h)}),i.horizontalNames.map(function(h){return Ym(h)}),n,r),l=Ym(i.horizontalNames[o.horizontal.index]),a=Ym(i.verticalNames[o.vertical.index]);return{vertical:Qt(Qt({},o.vertical),{direction:a}),horizontal:Qt(Qt({},o.horizontal),{direction:l})}}function g3(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,o=r.dist,l=r.guideline;return{isSnap:e,offset:i,dist:o,pos:n.pos,guideline:l}}function h4(t,e,n,r,i){var o,l;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=e==="vertical",h=a?0:1,f=n.map(function(y,w){var b=i[w]||"",A=t.map(function(M){var P=M.pos,C=y-P[h];return{offset:C,dist:gr(C),guideline:M,direction:b}}).filter(function(M){var P=M.guideline,C=M.dist,k=P.type;return!(k!==e||C>r)}).sort(function(M,P){return M.dist-P.dist});return{pos:y,index:w,guidelineInfos:A,direction:b}}).filter(function(y){return y.guidelineInfos.length>0}).sort(function(y,w){return y.guidelineInfos[0].dist-w.guidelineInfos[0].dist}),v=f.length>0;return{isSnap:v,index:v?f[0].index:-1,direction:(l=(o=f[0])===null||o===void 0?void 0:o.direction)!==null&&l!==void 0?l:"",posInfos:f}}function jK(t,e,n,r,i){var o=[];n[0]&&n[1]?o=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(w,b,A){var M=A[b+1]||A[0];o.push(w),o.push([(w[0]+M[0])/2,(w[1]+M[1])/2])}):t.props.keepRatio?o.push([-1,-1],[-1,1],[1,-1],[1,1],n):(o.push.apply(o,Tr([],rn(gK([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),o.length>1&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]));var l=o.map(function(w){return Eu(e,w)}),a=l.map(function(w){return w[0]}),h=l.map(function(w){return w[1]}),f=KS(t,a,h,o.map(function(w){return Ym(w[0])}),o.map(function(w){return Ym(w[1])}),r,i),v=Ym(o.map(function(w){return w[0]})[f.vertical.index]),y=Ym(o.map(function(w){return w[1]})[f.horizontal.index]);return{vertical:Qt(Qt({},f.vertical),{direction:v}),horizontal:Qt(Qt({},f.horizontal),{direction:y})}}function iU(t,e){var n=gr(t.offset),r=gr(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Qc?1:r<Qc?-1:n-r}function Zw(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],o=r.sign[e],l=n.offset[e],a=r.offset[e];if(i){if(!o)return-1}else return 1;return iU({isBound:n.isBound,isSnap:n.isSnap,offset:l},{isBound:r.isBound,isSnap:r.isSnap,offset:a})})[0]}function VK(t,e,n){var r=[];if(n)gr(e[0])!==1||gr(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(l){[1,-1].forEach(function(a){var h=[l*i[0],a*i[1]];e[0]===h[0]&&e[1]===h[1]||r.push([e,h])})})}else if(t[0]){var o=gr(e[0])===1?[1]:[1,-1];o.forEach(function(l){r.push([[e[0],-1],[l*t[0],-1]],[[e[0],0],[l*t[0],0]],[[e[0],1],[l*t[0],1]])})}else if(t[1]){var o=gr(e[1])===1?[1]:[1,-1];o.forEach(function(a){r.push([[-1,e[1]],[-1,a*t[1]]],[[0,e[1]],[0,a*t[1]]],[[1,e[1]],[1,a*t[1]]])})}return r}function aU(t,e){var n=i3([e[0][0],e[1][0]]),r=i3([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function GR(t,e){var n=rn(e,2),r=n[0],i=n[1],o=i[0]-r[0],l=i[1]-r[1];gr(o)<Qc&&(o=0),gr(l)<Qc&&(l=0);var a,h;if(!o)a=r[0],h=t[0];else if(!l)a=r[1],h=t[1];else{var f=l/o;a=f*(t[0]-r[0])+r[1],h=t[1]}return a-h}function oU(t,e,n,r){return r===void 0&&(r=Qc),t.every(function(i){var o=GR(i,e),l=o<=0;return l===n||gr(o)<=r})}function f4(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function GK(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,o=e.horizontalSign,l=e.lineConstants,a=t.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var h=a.left,f=a.top,v=a.width,y=a.height,w=[[h,f],[h,f+y]],b=[[h,f],[h+v,f]],A=[[h+v,f],[h+v,f+y]],M=[[h,f+y],[h+v,f+y]];if(oU([[h,f],[h+v,f],[h,f+y],[h+v,f+y]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var P=Km(n,l,b,i),C=Km(n,l,M,i),k=Km(n,l,w,o),B=Km(n,l,A,o),z=P.isBound&&C.isBound,q=P.isBound||C.isBound,V=k.isBound&&B.isBound,W=k.isBound||B.isBound,Y=c_(P.offset,C.offset),Z=c_(k.offset,B.offset),j=[0,0],K=!1,re=!1;return gr(Z)<gr(Y)?(j=[Y,0],K=q,re=z):(j=[0,Z],K=W,re=V),{isAllBound:re,isVerticalBound:q,isHorizontalBound:W,isBound:K,offset:j}}function Km(t,e,n,r,i,o){var l=rn(e,2),a=l[0],h=l[1],f=t[0],v=n[0],y=n[1],w=Qw(y[1]-v[1]),b=Qw(y[0]-v[0]),A=h,M=a,P=-a/h;if(b){if(!w){if(o&&!A)return{isBound:!1,offset:0};if(M){var z=(v[1]-f[1])/P+f[0];return f4(z,v[0],y[0],r,i)}else{var k=v[1]-f[1],B=gr(k)<=(i||0);return{isBound:B,offset:B?k:0}}}}else{if(o&&!M)return{isBound:!1,offset:0};if(A){var C=P*(v[0]-f[0])+f[1];return f4(C,v[1],y[1],r,i)}else{var k=v[0]-f[0],B=gr(k)<=(i||0);return{isBound:B,offset:B?k:0}}}return{isBound:!1,offset:0}}function sU(t,e,n){return e.map(function(r){var i=GK(t,r),o=i.isBound,l=i.offset,a=i.isVerticalBound,h=i.isHorizontalBound,f=r.multiple,v=fp({datas:n,distX:l[0],distY:l[1]}).map(function(y,w){return y*(f[w]?2/f[w]:0)});return{sign:f,isBound:o,isVerticalBound:a,isHorizontalBound:h,isSnap:!1,offset:v}})}function qK(t,e,n){var r,i=qR(t,e,[0,0],!1).map(function(w){return Qt(Qt({},w),{multiple:w.multiple.map(function(b){return gr(b)*2})})}),o=sU(t,i,n),l=Zw(o,0),a=Zw(o,1),h=0,f=0,v=l.isVerticalBound||a.isVerticalBound,y=l.isHorizontalBound||a.isHorizontalBound;return(v||y)&&(r=rn(pK({datas:n,distX:-l.offset[0],distY:-a.offset[1]}),2),h=r[0],f=r[1]),{vertical:{isBound:v,offset:h},horizontal:{isBound:y,offset:f}}}function HK(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function qR(t,e,n,r){var i=t.state,o=i.allMatrix,l=i.is3d,a=q0(o,100,100,l?4:3),h=Eu(a,[0,0]);return HK(n,r).map(function(f){var v=rn(f,3),y=v[0],w=v[1],b=v[2],A=[Eu(a,w),Eu(a,b)],M=zK(A),P=aU(h,A),C=P.vertical,k=P.horizontal,B=GR(h,A)<=0;return{multiple:y,centerSign:B,verticalSign:C,horizontalSign:k,lineConstants:M,line:[Eu(e,w),Eu(e,b)]}})}function d4(t,e,n,r){var i=r?t.map(function(o){return ax(o,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(o){var l=GR(n,o)<=0;return!oU(e,o,l)})}function $K(t){var e=rn(t,2),n=e[0],r=e[1],i=r[0]-n[0],o=r[1]-n[1];if(!i)return gr(n[0]);if(!o)return gr(n[1]);var l=o/i;return gr((-l*n[0]+n[1])/Math.sqrt(Math.pow(l,2)+1))}function WK(t){var e=rn(t,2),n=e[0],r=e[1],i=r[0]-n[0],o=r[1]-n[1];if(!i)return[n[0],0];if(!o)return[0,n[1]];var l=o/i,a=-l*n[0]+n[1];return[-a/(l+1/l),a/(l*l+1)]}function XK(t,e,n,r,i){var o=t.props.innerBounds,l=i*Math.PI/180;if(!o)return[];var a=o.left,h=o.top,f=o.width,v=o.height,y=a-r[0],w=a+f-r[0],b=h-r[1],A=h+v-r[1],M=[[y,b],[w,b],[y,A],[w,A]],P=Eu(n,[0,0]);if(!d4(n,M,P,0))return[];var C=[],k=M.map(function(B){return[Ef(B),jl([0,0],B)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(B){var z=jl([0,0],WK(B)),q=$K(B);C.push.apply(C,Tr([],rn(k.filter(function(V){var W=rn(V,1),Y=W[0];return Y&&q<=Y}).map(function(V){var W=rn(V,2),Y=W[0],Z=W[1],j=Math.acos(Y?q/Y:0),K=Z+j,re=Z-j;return[l+K-z,l+re-z]}).reduce(function(V,W){return V.push.apply(V,Tr([],rn(W),!1)),V},[]).filter(function(V){return!d4(e,M,P,V)}).map(function(V){return Qi(V*180/Math.PI,Qc)})),!1))}),C}function ZK(t){var e=t.props.innerBounds,n=zy();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,o=r.pos2,l=r.pos3,a=r.pos4,h=[i,o,l,a],f=Eu(h,[0,0]),v=e.left,y=e.top,w=e.width,b=e.height,A=[[v,y],[v,y+b]],M=[[v,y],[v+w,y]],P=[[v+w,y],[v+w,y+b]],C=[[v,y+b],[v+w,y+b]],k=qR(t,h,[0,0],!1),B=[],z=[];return k.forEach(function(q){var V=q.line,W=q.lineConstants,Y=aU(f,V),Z=Y.horizontal,j=Y.vertical,K=Km(V,W,M,j,1,!0),re=Km(V,W,C,j,1,!0),ie=Km(V,W,A,Z,1,!0),se=Km(V,W,P,Z,1,!0);K.isBound&&!n.top&&(B.push(y),n.top=!0),re.isBound&&!n.bottom&&(B.push(y+b),n.bottom=!0),ie.isBound&&!n.left&&(z.push(v),n.left=!0),se.isBound&&!n.right&&(z.push(v+w),n.right=!0)}),{boundMap:n,horizontal:B,vertical:z}}function YK(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];if(gr(i)<cu&&(i=0),gr(o)<cu&&(o=0),!i)return r?[0,0]:[0,n];if(!o)return r?[n,0]:[0,0];var l=o/i,a=t[1]-l*t[0];if(r){var h=l*(e[0]+n)+a;return[n,h-e[1]]}else{var f=(e[1]+n-a)/l;return[f-e[0],n]}}function v3(t,e,n,r,i){var o=YK(t,e,n,r);if(!o)return{isOutside:!1,offset:[0,0]};var l=Zp(t,e),a=Zp(o,t),h=Zp(o,e),f=a>l||h>l,v=rn(fp({datas:i,distX:o[0],distY:o[1]}),2),y=v[0],w=v[1];return{offset:[y,w],isOutside:f}}function Yw(t,e){return t.isBound?t.offset:e.isSnap?g3(e).offset:0}function KK(t,e,n,r,i){var o=rn(e,2),l=o[0],a=o[1],h=rn(n,2),f=h[0],v=h[1],y=rn(r,2),w=y[0],b=y[1],A=rn(i,2),M=A[0],P=A[1],C=-M,k=-P;if(t&&l&&a){C=0,k=0;var B=[];if(f&&v?B.push([0,P],[M,0]):f?B.push([M,0]):v?B.push([0,P]):w&&b?B.push([0,P],[M,0]):w?B.push([M,0]):b&&B.push([0,P]),B.length){B.sort(function(W,Y){return Ef(Ei([l,a],W))-Ef(Ei([l,a],Y))});var z=B[0];if(z[0]&&gr(l)>cu)C=-z[0],k=a*gr(l+C)/gr(l)-a;else if(z[1]&&gr(a)>cu){var q=a;k=-z[1],C=l*gr(a+k)/gr(q)-l}if(t&&v&&f)if(gr(C)>cu&&gr(C)<gr(M)){var V=gr(M)/gr(C);C*=V,k*=V}else if(gr(k)>cu&&gr(k)<gr(P)){var V=gr(P)/gr(k);C*=V,k*=V}else C=c_(-M,C),k=c_(-P,k)}}else C=l||f?-M:0,k=a||v?-P:0;return[C,k]}function JK(t,e,n,r,i,o){if(!P_(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var l=WR(o.absolutePoses,[e,n]),a=Sf(l),h=a.left,f=a.right,v=a.top,y=a.bottom,w={horizontal:l.map(function(se){return se[1]}),vertical:l.map(function(se){return se[0]})},b=jR(t.props.snapDirections),A=VR(b,{left:h,right:f,top:v,bottom:y,center:(h+f)/2,middle:(v+y)/2}),M=JS(t,i,A,w),P=M.vertical,C=M.horizontal,k=qK(t,l,o),B=k.vertical,z=k.horizontal,q=P.isSnap,V=C.isSnap,W=P.isBound||B.isBound,Y=C.isBound||z.isBound,Z=c_(P.offset,B.offset),j=c_(C.offset,z.offset),K=rn(KK(r,[e,n],[W,Y],[q,V],[Z,j]),2),re=K[0],ie=K[1];return[{isBound:W,isSnap:q,offset:re},{isBound:Y,isSnap:V,offset:ie}]}function JS(t,e,n,r){r===void 0&&(r=n);var i=UR(YS(t),r.vertical,r.horizontal),o=i.horizontal,l=i.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:KS(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),h=a.horizontal,f=a.vertical,v=Yw(o[0],h),y=Yw(l[0],f),w=gr(v),b=gr(y);return{horizontal:{isBound:o[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:v,dist:w,bounds:o,snap:h},vertical:{isBound:l[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:y,dist:b,bounds:l,snap:f}}}function p4(t,e,n,r,i,o,l){l===void 0&&(l=[1,1]);var a=UR(e,n,r),h=a.horizontal,f=a.vertical,v=rU(t,n,r,[],[],i,o,l),y=v.horizontal,w=v.vertical,b=Yw(h[0],y),A=Yw(f[0],w),M=gr(b),P=gr(A);return{horizontal:{isBound:h[0].isBound,isSnap:y.isSnap,snapIndex:y.index,offset:b,dist:M,bounds:h,snap:y},vertical:{isBound:f[0].isBound,isSnap:w.isSnap,snapIndex:w.index,offset:A,dist:P,bounds:f,snap:w}}}function QK(t,e,n,r){var i=jl(t,e)/Math.PI*180,o=n.vertical,l=o.isBound,a=o.isSnap,h=o.dist,f=n.horizontal,v=f.isBound,y=f.isSnap,w=f.dist,b=i%180,A=b<3||b>177,M=b>87&&b<93;return w<h&&(l||a&&!M&&(!r||!A))?"vertical":v||y&&!A&&(!r||!M)?"horizontal":""}function eJ(t,e,n,r,i,o){return n.map(function(l){var a=rn(l,2),h=a[0],f=a[1],v=Eu(e,h),y=Eu(e,f),w=r?tJ(t,v,y,i):JS(t,i,{vertical:[y[0]],horizontal:[y[1]]}),b=w.horizontal,A=b.offset,M=b.isBound,P=b.isSnap,C=w.vertical,k=C.offset,B=C.isBound,z=C.isSnap,q=Ei(f,h);if(!k&&!A)return{isBound:B||M,isSnap:z||P,sign:q,offset:[0,0]};var V=QK(v,y,w,r);if(!V)return{sign:q,isBound:!1,isSnap:!1,offset:[0,0]};var W=V==="vertical",Y=[0,0];return!r&&gr(f[0])===1&&gr(f[1])===1&&h[0]!==f[0]&&h[1]!==f[1]?Y=fp({datas:o,distX:-k,distY:-A}):Y=v3(v,y,-(W?k:A),W,o).offset,Y=Y.map(function(Z,j){return Z*(q[j]?2/q[j]:0)}),{sign:q,isBound:W?B:M,isSnap:W?z:P,offset:Y}})}function m4(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function tJ(t,e,n,r){var i=LK(t,e,n),o=i.horizontal,l=i.vertical,a=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:UK(t,e,n),h=a.horizontal,f=a.vertical,v=m4(o,h),y=m4(l,f),w=gr(v),b=gr(y);return{horizontal:{isBound:o.isBound,isSnap:h.isSnap,offset:v,dist:w},vertical:{isBound:l.isBound,isSnap:f.isSnap,offset:y,dist:b}}}function nJ(t,e,n,r,i){var o=[-n[0],-n[1]],l=t.state,a=l.width,h=l.height,f=t.props.bounds,v=1/0,y=1/0;if(f){var w=[[n[0],-n[1]],[-n[0],n[1]]],b=f.left,A=b===void 0?-1/0:b,M=f.top,P=M===void 0?-1/0:M,C=f.right,k=C===void 0?1/0:C,B=f.bottom,z=B===void 0?1/0:B;w.forEach(function(q){var V=q[0]!==o[0],W=q[1]!==o[1],Y=Eu(e,q),Z=jl(r,Y)*360/Math.PI;if(W){var j=Y.slice();(gr(Z-360)<2||gr(Z-180)<2)&&(j[1]=r[1]);var K=v3(r,j,(r[1]<Y[1]?z:P)-Y[1],!1,i),re=rn(K.offset,2),ie=re[1],se=K.isOutside;isNaN(ie)||(y=h+(se?1:-1)*gr(ie))}if(V){var j=Y.slice();(gr(Z-90)<2||gr(Z-270)<2)&&(j[0]=r[0]);var de=v3(r,j,(r[0]<Y[0]?k:A)-Y[0],!0,i),ue=rn(de.offset,1),Te=ue[0],pe=de.isOutside;isNaN(Te)||(v=a+(pe?1:-1)*gr(Te))}})}return{maxWidth:v,maxHeight:y}}var Zc={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,o=n.zoom,l=t.getState(),a=l.dragInfo,h=l.beforeOrigin;if(r||!i||!a)return[];var f=a.dist;if(!f[0]&&!f[1])return[];var v=Ef(f),y=jl(f,[0,0]);return[e.createElement("div",{className:xi("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(v,"px"),transform:"translate(".concat(h[0],"px, ").concat(h[1],"px) rotate(").concat(y,"rad) scaleY(").concat(o,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,o=t.state,l=o.gestos,a=o.style;if(l.draggable)return!1;l.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(a.left||"")||0,n.top=parseFloat(a.top||"")||0,n.bottom=parseFloat(a.bottom||"")||0,n.right=parseFloat(a.right||"")||0,n.startValue=[0,0],G0(t,e),ZS(t,e,"translate"),xJ(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var h=sa(t,e,Qt({set:function(v){n.startValue=v}},XS(t,e))),f=r||$r(t,"onDragStart",h);return f!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(l.draggable=null,n.isPinch=!1),n.isDrag?h:!1},drag:function(t,e){if(e){$S(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,l=e.deltaOffset,a=e.useSnap,h=e.isRequest,f=e.isGroup,v=e.parentThrottleDrag,y=e.distX,w=e.distY,b=n.isDrag,A=n.prevDist,M=n.prevBeforeDist,P=n.startValue;if(b){l&&(y+=l[0],w+=l[1]);var C=t.props,k=C.parentMoveable,B=f?0:C.throttleDrag||v||0,z=r?0:C.throttleDragRotate||0,q=0,V=!1,W=!1,Y=!1,Z=!1;if(!r&&z>0&&(y||w)){var j=C.startDragRotate||0,K=Qi(j+jl([0,0],[y,w])*180/Math.PI,z)-j,re=w*Math.abs(Math.cos((K-90)/180*Math.PI)),ie=y*Math.abs(Math.cos(K/180*Math.PI)),se=Ef([ie,re]);q=K*Math.PI/180,y=se*Math.cos(q),w=se*Math.sin(q)}if(!o&&!r&&!i){var de=rn(JK(t,y,w,z,!a&&h||l,n),2),ue=de[0],Te=de[1];V=ue.isSnap,W=ue.isBound,Y=Te.isSnap,Z=Te.isBound;var pe=ue.offset,De=Te.offset;y+=pe,w+=De}var me=to(V8({datas:n,distX:y,distY:w}),P),Me=to(dK({datas:n,distX:y,distY:w}),P);e4(Me,Qc),e4(me,Qc),z||(!V&&!W&&(Me[0]=Qi(Me[0],B),me[0]=Qi(me[0],B)),!Y&&!Z&&(Me[1]=Qi(Me[1],B),me[1]=Qi(me[1],B)));var fe=Ei(me,P),ve=Ei(Me,P),le=Ei(ve,A),ye=Ei(fe,M);n.prevDist=ve,n.prevBeforeDist=fe,n.passDelta=le,n.passDist=ve;var Se=n.left+fe[0],Be=n.top+fe[1],Ve=n.right-fe[0],tt=n.bottom-fe[1],ht=WS(n,"translate(".concat(Me[0],"px, ").concat(Me[1],"px)"),"translate(".concat(ve[0],"px, ").concat(ve[1],"px)"));if(BR(e,ht),t.state.dragInfo.dist=r?[0,0]:ve,!(!r&&!k&&le.every(function(Ct){return!Ct})&&ye.some(function(Ct){return!Ct}))){var it=t.state,gt=it.width,$t=it.height,He=sa(t,e,Qt({transform:ht,dist:ve,delta:le,translate:Me,beforeDist:fe,beforeDelta:ye,beforeTranslate:me,left:Se,top:Be,right:Ve,bottom:tt,width:gt,height:$t,isPinch:o},Jc({transform:ht},e)));return!r&&$r(t,"onDrag",He),He}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,Qt(Qt({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=$h(t,e,{});return!n&&$r(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,o=e.clientX,l=e.clientY,a=this.dragStart(t,e);if(!a)return!1;var h=MT(t,this,"dragStart",[o||0,l||0],e,!1,"draggable"),f=h.childEvents,v=h.eventParams,y=Qt(Qt({},a),{targets:t.props.targets,events:v}),w=$r(t,"onDragGroupStart",y);i.isDrag=w!==!1;var b=(r=(n=f[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[b[0]%1,b[1]%1],i.isDrag?a:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,Qt(Qt({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,o=MT(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var l=Qt({targets:t.props.targets,events:o},r);return $r(t,"onDragGroup",l),l}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=MT(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return $r(t,"onDragGroupEnd",$h(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=!1;return{isControl:!1,requestStart:function(l){return o=l.useSnap,{datas:e,useSnap:o}},request:function(l){return"x"in l?r=l.x-n.left:"deltaX"in l&&(r+=l.deltaX),"y"in l?i=l.y-n.top:"deltaY"in l&&(i+=l.deltaY),{datas:e,distX:r,distY:i,useSnap:o}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:o}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function lU(t,e){var n=Eu(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function rJ(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,o=t.height,l=r?4:3,a=[i/2*(1+e[0]),o/2*(1+e[1])],h=Js(n,a,l),f=[0,0];return{fixedPosition:h,fixedDirection:e,fixedOffset:f}}function uU(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,o=t.height,l=r?4:3,a=xK(e,i,o),h=Js(n,e,l),f=[i?0:e[0],o?0:e[1]];return{fixedPosition:h,fixedDirection:a,fixedOffset:f}}var g4=YR("resizable"),y3={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:Y8("resizable"),dragControlCondition:g4,viewClassName:ZR("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,o=e.isGroup,l=e.parentDirection,a=e.parentGesto,h=e.datas,f=e.parentFixedDirection,v=e.parentEvent,y=wU(l,i,r,h),w=t.state,b=w.target,A=w.width,M=w.height,P=w.gestos;if(!y||!b||P.resizable)return!1;P.resizable=a||t.controlGesto,!i&&G0(t,e),h.datas={},h.direction=y,h.startOffsetWidth=A,h.startOffsetHeight=M,h.prevWidth=0,h.prevHeight=0,h.minSize=[0,0],h.startWidth=w.inlineCSSWidth||w.cssWidth,h.startHeight=w.inlineCSSHeight||w.cssHeight,h.maxSize=[1/0,1/0],o||(h.minSize=[w.minOffsetWidth,w.minOffsetHeight],h.maxSize=[w.maxOffsetWidth,w.maxOffsetHeight]);var C=t.props.transformOrigin||"% %";h.transformOrigin=sm(C)?C.split(" "):C,h.startOffsetMatrix=w.offsetMatrix,h.startTransformOrigin=w.transformOrigin,h.isWidth=(n=e==null?void 0:e.parentIsWidth)!==null&&n!==void 0?n:!y[0]&&!y[1]||y[0]||!y[1];function k(Z){h.ratio=Z&&isFinite(Z)?Z:0}h.startPositions=Tf(t.state);function B(Z){var j=lU(h.startPositions,Z);h.fixedDirection=j.fixedDirection,h.fixedPosition=j.fixedPosition,h.fixedOffset=j.fixedOffset}function z(Z){var j=uU(t.state,Z);h.fixedDirection=j.fixedDirection,h.fixedPosition=j.fixedPosition,h.fixedOffset=j.fixedOffset}function q(Z){h.minSize=[Bo("".concat(Z[0]),0)||0,Bo("".concat(Z[1]),0)||0]}function V(Z){var j=[Z[0]||1/0,Z[1]||1/0];(!kb(j[0])||isFinite(j[0]))&&(j[0]=Bo("".concat(j[0]),0)||1/0),(!kb(j[1])||isFinite(j[1]))&&(j[1]=Bo("".concat(j[1]),0)||1/0),h.maxSize=j}k(A/M),B(f||[-y[0],-y[1]]),h.setFixedDirection=B,h.setFixedPosition=z,h.setMin=q,h.setMax=V;var W=sa(t,e,{direction:y,startRatio:h.ratio,set:function(Z){var j=rn(Z,2),K=j[0],re=j[1];h.startWidth=K,h.startHeight=re},setMin:q,setMax:V,setRatio:k,setFixedDirection:B,setFixedPosition:z,setOrigin:function(Z){h.transformOrigin=Z},dragStart:Zc.dragStart(t,new l_().dragStart([0,0],e))}),Y=v||$r(t,"onResizeStart",W);return h.startFixedDirection=h.fixedDirection,h.startFixedPosition=h.fixedPosition,Y!==!1&&(h.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:y}),h.isResize?W:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,o=e.isPinch,l=e.parentKeepRatio,a=e.dragClient,h=e.parentDist,f=e.useSnap,v=e.isRequest,y=e.isGroup,w=e.parentEvent,b=e.resolveMatrix,A=r.isResize,M=r.transformOrigin,P=r.startWidth,C=r.startHeight,k=r.prevWidth,B=r.prevHeight,z=r.minSize,q=r.maxSize,V=r.ratio,W=r.startOffsetWidth,Y=r.startOffsetHeight,Z=r.isWidth;if(!A)return;if(b){var j=t.state.is3d,K=r.startOffsetMatrix,re=r.startTransformOrigin,ie=j?4:3,se=Bb(Ww(e)),de=Math.sqrt(se.length);ie!==de&&(se=cd(se,de,ie));var ue=cx(K,se,re,ie),Te=q0(ue,W,Y,ie);r.startPositions=Te,r.nextTargetMatrix=se,r.nextAllMatrix=ue}var pe=D0(t.props,"resizable"),De=pe.resizeFormat,me=pe.throttleResize,Me=me===void 0?i?0:1:me,fe=pe.parentMoveable,ve=pe.keepRatioFinally,le=r.direction,ye=le,Se=0,Be=0;!le[0]&&!le[1]&&(ye=[1,1]);var Ve=V&&(l??pe.keepRatio)||!1;function tt(){var jt=r.fixedDirection,vt=CU(ye,Ve,r,e);Se=vt.distWidth,Be=vt.distHeight;var Pt=ye[0]-jt[0]||Ve?Math.max(W+Se,Qc):W,vn=ye[1]-jt[1]||Ve?Math.max(Y+Be,Qc):Y;return Ve&&W&&Y&&(Z?vn=Pt/V:Pt=vn*V),[Pt,vn]}var ht=rn(tt(),2),it=ht[0],gt=ht[1];w||(r.setFixedDirection(r.fixedDirection),$r(t,"onBeforeResize",sa(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(jt){var vt;return r.setFixedDirection(jt),vt=rn(tt(),2),it=vt[0],gt=vt[1],[it,gt]},setFixedPosition:function(jt){var vt;return r.setFixedPosition(jt),vt=rn(tt(),2),it=vt[0],gt=vt[1],[it,gt]},boundingWidth:it,boundingHeight:gt,setSize:function(jt){var vt;vt=rn(jt,2),it=vt[0],gt=vt[1]}},!0)));var $t=a;a||(!i&&o?$t=TK(t,[0,0]):$t=r.fixedPosition);var He=[0,0];o||(He=_J(t,it,gt,le,$t,!f&&v,r)),h&&(!h[0]&&(He[0]=0),!h[1]&&(He[1]=0));function Ct(){var jt;De&&(jt=rn(De([it,gt]),2),it=jt[0],gt=jt[1]),it=Qi(it,Me),gt=Qi(gt,Me)}if(Ve){ye[0]&&ye[1]&&He[0]&&He[1]&&(gr(He[0])>gr(He[1])?He[1]=0:He[0]=0);var Xe=!He[0]&&!He[1];Xe&&Ct(),ye[0]&&!ye[1]||He[0]&&!He[1]||Xe&&Z?(it+=He[0],gt=it/V):(!ye[0]&&ye[1]||!He[0]&&He[1]||Xe&&!Z)&&(gt+=He[1],it=gt*V)}else it+=He[0],gt+=He[1],it=Math.max(0,it),gt=Math.max(0,gt);n=rn(w8([it,gt],z,q,Ve?V:!1),2),it=n[0],gt=n[1],Ct(),Ve&&(y||ve)&&(Z?gt=it/V:it=gt*V),Se=it-W,Be=gt-Y;var tn=[Se-k,Be-B];r.prevWidth=Se,r.prevHeight=Be;var Kt=EK(t,it,gt,$t,M,r);if(!(!fe&&tn.every(function(jt){return!jt})&&Kt.every(function(jt){return!jt}))){var Jt=Zc.drag(t,ux(e,t.state,Kt,!!o,!1,"draggable")),Ht=Jt.transform,$e=P+Se,Ee=C+Be,_t=sa(t,e,Qt({width:$e,height:Ee,offsetWidth:Math.round(it),offsetHeight:Math.round(gt),startRatio:V,boundingWidth:it,boundingHeight:gt,direction:le,dist:[Se,Be],delta:tn,isPinch:!!o,drag:Jt},EU({style:{width:"".concat($e,"px"),height:"".concat(Ee,"px")},transform:Ht},Jt,e)));return!w&&$r(t,"onResize",_t),_t}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,l=n.prevWidth,a=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var h=t.state,f=h.width,v=h.height,y=f-(i+l),w=v-(o+a),b=gr(y)>3,A=gr(w)>3;if(b&&(n.startWidth+=y,n.startOffsetWidth+=y,n.prevWidth+=y),A&&(n.startHeight+=w,n.startOffsetHeight+=w,n.prevHeight+=w),b||A)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=$h(t,e,{});return!r&&$r(t,"onResizeEnd",i),i}},dragGroupControlCondition:g4,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,Qt(Qt({},e),{isGroup:!0}));if(!r)return!1;var i=od(t,"resizable",e),o=n.startOffsetWidth,l=n.startOffsetHeight;function a(){var b=n.minSize;i.forEach(function(A){var M=A.datas,P=M.minSize,C=M.startOffsetWidth,k=M.startOffsetHeight,B=o*(C?P[0]/C:0),z=l*(k?P[1]/k:0);b[0]=Math.max(b[0],B),b[1]=Math.max(b[1],z)})}function h(){var b=n.maxSize;i.forEach(function(A){var M=A.datas,P=M.maxSize,C=M.startOffsetWidth,k=M.startOffsetHeight,B=o*(C?P[0]/C:0),z=l*(k?P[1]/k:0);b[0]=Math.min(b[0],B),b[1]=Math.min(b[1],z)})}var f=Yp(t,this,"dragControlStart",e,function(b,A){return Xw(t,b,n,A)});a(),h();var v=function(b){r.setFixedDirection(b),f.forEach(function(A,M){A.setFixedDirection(b),Xw(t,A.moveable,n,i[M])})};n.setFixedDirection=v;var y=Qt(Qt({},r),{targets:t.props.targets,events:f.map(function(b){return Qt(Qt({},b),{setMin:function(A){b.setMin(A),a()},setMax:function(A){b.setMax(A),h()}})}),setFixedDirection:v,setMin:function(b){r.setMin(b),a()},setMax:function(b){r.setMax(b),h()}}),w=$r(t,"onResizeGroupStart",y);return n.isResize=w!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=D0(t.props,"resizable");eE(t,"onBeforeResize",function(b){$r(t,"onBeforeResizeGroup",sa(t,e,Qt(Qt({},b),{targets:r.targets}),!0))});var i=this.dragControl(t,Qt(Qt({},e),{isGroup:!0}));if(i){var o=i.boundingWidth,l=i.boundingHeight,a=i.dist,h=r.keepRatio,f=[o/(o-a[0]),l/(l-a[1])],v=n.fixedPosition,y=Yp(t,this,"dragControl",e,function(b,A){var M=rn(Oc(ox(t.rotation/180*Math.PI,3),[A.datas.originalX*f[0],A.datas.originalY*f[1],1],3),2),P=M[0],C=M[1];return Qt(Qt({},A),{parentDist:null,parentScale:f,dragClient:to(v,[P,C]),parentKeepRatio:h})}),w=Qt({targets:r.targets,events:y},i);return $r(t,"onResizeGroup",w),w}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=Yp(t,this,"dragControlEnd",e),o=$h(t,e,{targets:t.props.targets,events:i});return $r(t,"onResizeGroupEnd",o),n}},request:function(t){var e={},n=0,r=0,i=!1,o=t.getRect();return{isControl:!0,requestStart:function(l){var a;return i=l.useSnap,{datas:e,parentDirection:l.direction||[1,1],parentIsWidth:(a=l==null?void 0:l.horizontal)!==null&&a!==void 0?a:!0,useSnap:i}},request:function(l){return"offsetWidth"in l?n=l.offsetWidth-o.offsetWidth:"deltaWidth"in l&&(n+=l.deltaWidth),"offsetHeight"in l?r=l.offsetHeight-o.offsetHeight:"deltaHeight"in l&&(r+=l.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:l.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function AT(t,e,n,r,i){var o=t.props.groupable,l=t.state,a=l.is3d?4:3,h=e.origin,f=Js(t.state.rootMatrix,Ei([h[0],h[1]],o?[0,0]:[l.left,l.top]),a),v=to([i.left,i.top],f);e.startAbsoluteOrigin=v,e.prevDeg=jl(v,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Zp(v,[n,r])}function xw(t,e,n){var r=n.defaultDeg,i=n.prevDeg,o=i%360,l=Math.floor(i/360);o<0&&(o+=360),o>t&&o>270&&t<90?++l:o<t&&o<90&&t>270&&--l;var a=e*(l*360+t-r);return n.prevDeg=r+a,a}function CT(t,e,n,r){return xw(jl(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function PT(t,e,n,r,i,o){var l=t.props.throttleRotate,a=l===void 0?0:l,h=n.prevSnapDeg,f=0,v=!1;if(o){var y=yJ(t,e,r,i+r);v=y.isSnap,f=i+y.dist}v||(f=Qi(i+r,a));var w=f-i;return n.prevSnapDeg=w,[w-h,w,f]}function cU(t,e,n){var r=rn(e,4),i=r[0],o=r[1],l=r[2],a=r[3];if(t==="none")return[];if(Xu(t))return t.map(function(P){return cU(P,[i,o,l,a],n)[0]});var h=rn((t||"top").split("-"),2),f=h[0],v=h[1],y=[i,o];f==="left"?y=[l,i]:f==="right"?y=[o,a]:f==="bottom"&&(y=[a,l]);var w=[(y[0][0]+y[1][0])/2,(y[0][1]+y[1][1])/2],b=bU(y,n);if(v){var A=v==="top"||v==="left",M=f==="bottom"||f==="left";w=y[A&&!M||!A&&M?0:1]}return[[w,b]]}function _3(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Su(n,xi("rotation-control"))||t.props.rotateAroundControls&&Su(n,xi("around-control"))||Su(n,xi("control"))&&Su(n,xi("rotatable")))return!0;var r=t.props.rotationTarget;return r?KR(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var iJ=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,aJ={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[iJ],viewClassName:function(t){return t.isDragging("rotatable")?xi("view-rotation-dragging"):""},render:function(t,e){var n=D0(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,o=n.zoom,l=n.renderDirections,a=n.rotateAroundControls,h=n.resolveAblesWithRotatable,f=t.getState(),v=f.renderPoses,y=f.direction;if(!r)return null;var w=cU(i,v,y),b=[];if(w.forEach(function(C,k){var B=rn(C,2),z=B[0],q=B[1];b.push(e.createElement("div",{key:"rotation".concat(k),className:xi("rotation"),style:{transform:"translate(-50%) translate(".concat(z[0],"px, ").concat(z[1],"px) rotate(").concat(q,"rad)")}},e.createElement("div",{className:xi("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:xi("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}),l){var A=M_(h||{}),M={};A.forEach(function(C){h[C].forEach(function(k){M[k]=C})});var P=[];Xu(l)&&(P=l.map(function(C){var k=M[C];return{data:k?{resolve:k}:{},classNames:k?["move"]:[],dir:C}})),b.push.apply(b,Tr([],rn(W8(t,"rotatable",P,e)),!1))}return a&&b.push.apply(b,Tr([],rn(J8(t,e)),!1)),b},dragControlCondition:_3,dragControlStart:function(t,e){var n,r,i=e.datas,o=e.clientX,l=e.clientY,a=e.parentRotate,h=e.parentFlag,f=e.isPinch,v=e.isRequest,y=t.state,w=y.target,b=y.left,A=y.top,M=y.direction,P=y.beforeDirection,C=y.targetTransform,k=y.moveableClientRect,B=y.offsetMatrix,z=y.targetMatrix,q=y.allMatrix,V=y.width,W=y.height;if(!v&&!w)return!1;var Y=t.getRect();i.rect=Y,i.transform=C,i.left=b,i.top=A;var Z=function(ye){var Se=uU(t.state,ye);i.fixedDirection=Se.fixedDirection,i.fixedOffset=Se.fixedOffset,i.fixedPosition=Se.fixedPosition,Me&&Me.setFixedPosition(ye)},j=function(ye){var Se=rJ(t.state,ye);i.fixedDirection=Se.fixedDirection,i.fixedOffset=Se.fixedOffset,i.fixedPosition=Se.fixedPosition,Me&&Me.setFixedDirection(ye)},K=o,re=l;if(v||f||h){var ie=a||0;i.beforeInfo={origin:Y.beforeOrigin,prevDeg:ie,defaultDeg:ie,prevSnapDeg:0,startDist:0},i.afterInfo=Qt(Qt({},i.beforeInfo),{origin:Y.origin}),i.absoluteInfo=Qt(Qt({},i.beforeInfo),{origin:Y.origin,startValue:ie})}else{var se=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(se){var de=se.getAttribute("data-direction")||"",ue=cK[de];if(ue){i.isControl=!0,i.isAroundControl=Su(se,xi("around-control")),i.controlDirection=ue;var Te=se.getAttribute("data-resolve");Te&&(i.resolveAble=Te);var pe=OJ(y.rootMatrix,y.renderPoses,k);n=rn(Eu(pe,ue),2),K=n[0],re=n[1]}}i.beforeInfo={origin:Y.beforeOrigin},i.afterInfo={origin:Y.origin},i.absoluteInfo={origin:Y.origin,startValue:Y.rotation};var De=Z;Z=function(ye){var Se=y.is3d?4:3,Be=rn(to(A8(z,Se),ye),2),Ve=Be[0],tt=Be[1],ht=Oc(B,C0([Ve,tt],Se)),it=Oc(q,C0([ye[0],ye[1]],Se));De(ye);var gt=y.posDelta;i.beforeInfo.origin=Ei(ht,gt),i.afterInfo.origin=Ei(it,gt),i.absoluteInfo.origin=Ei(it,gt),AT(t,i.beforeInfo,K,re,k),AT(t,i.afterInfo,K,re,k),AT(t,i.absoluteInfo,K,re,k)},j=function(ye){var Se=Eu([[0,0],[V,0],[0,W],[V,W]],ye);Z(Se)}}i.startClientX=K,i.startClientY=re,i.direction=M,i.beforeDirection=P,i.startValue=0,i.datas={},ZS(t,e,"rotate");var me=!1,Me=!1;if(i.isControl&&i.resolveAble){var fe=i.resolveAble;fe==="resizable"&&(Me=y3.dragControlStart(t,Qt(Qt({},new l_("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}Me||(me=Zc.dragStart(t,new l_().dragStart([0,0],e))),Z(NJ(t));var ve=sa(t,e,Qt(Qt({set:function(ye){i.startValue=ye*Math.PI/180},setFixedDirection:j,setFixedPosition:Z},XS(t,e)),{dragStart:me,resizeStart:Me})),le=$r(t,"onRotateStart",ve);return i.isRotate=le!==!1,y.snapRenderInfo={request:e.isRequest},i.isRotate?ve:!1},dragControl:function(t,e){var n,r,i,o=e.datas,l=e.clientDistX,a=e.clientDistY,h=e.parentRotate,f=e.parentFlag,v=e.isPinch,y=e.groupDelta,w=e.resolveMatrix,b=o.beforeDirection,A=o.beforeInfo,M=o.afterInfo,P=o.absoluteInfo,C=o.isRotate,k=o.startValue,B=o.rect,z=o.startClientX,q=o.startClientY;if(C){$S(t,e,"rotate");var V=fK(e),W=b*V,Y=t.props.parentMoveable,Z=0,j,K,re=0,ie,se,de=0,ue,Te,pe=180/Math.PI*k,De=P.startValue,me=!1,Me=z+l,fe=q+a;if(!f&&"parentDist"in e){var ve=e.parentDist;j=ve,ie=ve,ue=ve}else v||f?(j=xw(h,b,A),ie=xw(h,W,M),ue=xw(h,W,P)):(j=CT(Me,fe,b,A),ie=CT(Me,fe,W,M),ue=CT(Me,fe,W,P),me=!0);if(K=pe+j,se=pe+ie,Te=De+ue,$r(t,"onBeforeRotate",sa(t,e,{beforeRotation:K,rotation:se,absoluteRotation:Te,setRotation:function($t){ie=$t-pe,j=ie,ue=ie}},!0)),n=rn(PT(t,B,A,j,pe,me),3),Z=n[0],j=n[1],K=n[2],r=rn(PT(t,B,M,ie,pe,me),3),re=r[0],ie=r[1],se=r[2],i=rn(PT(t,B,P,ue,De,me),3),de=i[0],ue=i[1],Te=i[2],!(!de&&!re&&!Z&&!Y&&!w)){var le=WS(o,"rotate(".concat(se,"deg)"),"rotate(".concat(ie,"deg)"));w&&(o.fixedPosition=zR(t,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var ye=SK(t,ie,o),Se=Ei(to(y||[0,0],ye),o.prevInverseDist||[0,0]);o.prevInverseDist=ye,o.requestValue=null;var Be=q8(t,le,Se,v,e),Ve=Be,tt=Zp([Me,fe],P.startAbsoluteOrigin)-P.startDist,ht=void 0;if(o.resolveAble==="resizable"){var it=y3.dragControl(t,Qt(Qt({},ux(e,t.state,[e.deltaX,e.deltaY],!!v,!1,"resizable")),{resolveMatrix:!0,parentDistance:tt}));it&&(ht=it,Ve=EU(Ve,it,e))}var gt=sa(t,e,Qt(Qt({delta:re,dist:ie,rotate:se,rotation:se,beforeDist:j,beforeDelta:Z,beforeRotate:K,beforeRotation:K,absoluteDist:ue,absoluteDelta:de,absoluteRotate:Te,absoluteRotation:Te,isPinch:!!v,resize:ht},Be),Ve));return $r(t,"onRotate",gt),gt}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=$h(t,e,{});return $r(t,"onRotateEnd",r),r}},dragGroupControlCondition:_3,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,o=r.top,l=r.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(n.beforeDirection*t.rotation);var h=Yp(t,this,"dragControlStart",e,function(y,w){var b=y.state,A=b.left,M=b.top,P=b.beforeOrigin,C=to(Ei([A,M],[i,o]),Ei(P,l));return w.datas.startGroupClient=C,w.datas.groupClient=C,Qt(Qt({},w),{parentRotate:0})}),f=Qt(Qt({},a),{targets:t.props.targets,events:h}),v=$r(t,"onRotateGroupStart",f);return n.isRotate=v!==!1,n.isRotate?a:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){eE(t,"onBeforeRotate",function(f){$r(t,"onBeforeRotateGroup",sa(t,e,Qt(Qt({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,o=r.beforeDist,l=o/180*Math.PI,a=Yp(t,this,"dragControl",e,function(f,v){var y=v.datas.startGroupClient,w=rn(v.datas.groupClient,2),b=w[0],A=w[1],M=rn(ax(y,l*i),2),P=M[0],C=M[1],k=[P-b,C-A];return v.datas.groupClient=[P,C],Qt(Qt({},v),{parentRotate:o,groupDelta:k})});t.rotation=i*r.beforeRotation;var h=Qt({targets:t.props.targets,events:a,set:function(f){t.rotation=f},setGroupRotation:function(f){t.rotation=f}},r);return $r(t,"onRotateGroup",h),h}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=Yp(t,this,"dragControlEnd",e),o=$h(t,e,{targets:t.props.targets,events:i});return $r(t,"onRotateGroupEnd",o),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function oJ(t,e){var n,r=t.direction,i=t.classNames,o=t.size,l=t.pos,a=t.zoom,h=t.key,f=r==="horizontal",v=f?"Y":"X";return e.createElement("div",{key:h,className:i.join(" "),style:(n={},n[f?"width":"height"]="".concat(o),n.transform="translate(".concat(l[0],", ").concat(l[1],") translate").concat(v,"(-50%) scale").concat(v,"(").concat(a,")"),n)})}function HR(t,e){return oJ(Qt(Qt({},t),{classNames:Tr([xi("line","guideline",t.direction)],rn(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(Qi(n,.1),"px")})}),e)}function v4(t,e,n,r,i,o,l,a){var h=t.props.zoom;return n.map(function(f,v){var y=f.type,w=f.pos,b=[0,0];return b[l]=r,b[l?0:1]=-i+w,HR({key:"".concat(e,"TargetGuideline").concat(v),classNames:[xi("target","bold",y)],posValue:b,sizeValue:o,zoom:h,direction:e},a)})}function y4(t,e,n,r,i,o){var l=t.props,a=l.zoom,h=l.isDisplayInnerSnapDigit,f=e==="horizontal"?cg:hg,v=i[f.start],y=i[f.end];return n.filter(function(w){var b=w.hide,A=w.elementRect;if(b)return!1;if(h&&A){var M=A.rect;if(M[f.start]<=v&&y<=M[f.end])return!1}return!0}).map(function(w,b){var A=w.pos,M=w.size,P=w.element,C=w.className,k=[-r[0]+A[0],-r[1]+A[1]];return HR({key:"".concat(e,"-default-guideline-").concat(b),classNames:P?[xi("bold"),C]:[xi("normal"),C],direction:e,posValue:k,sizeValue:M,zoom:a},o)})}function Q1(t,e,n,r,i,o,l,a){var h,f=t.props,v=f.snapDigit,y=v===void 0?0:v,w=f.isDisplaySnapDigit,b=w===void 0?!0:w,A=f.snapDistFormat,M=A===void 0?function(q,V){return q}:A,P=f.zoom,C=e==="horizontal"?"X":"Y",k=e==="vertical"?"height":"width",B=Math.abs(i),z=b?parseFloat(B.toFixed(y)):0;return a.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:xi("guideline-group",e),style:(h={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},h[k]="".concat(B,"px"),h)},HR({direction:e,classNames:[xi(n),l],size:"100%",posValue:[0,0],sizeValue:B,zoom:P},a),a.createElement("div",{className:xi("size-value","gap"),style:{transform:"translate".concat(C,"(-50%) scale(").concat(P,")")}},z>0?M(z,e):""))}function sJ(t,e,n,r){var i=t==="vertical"?0:1,o=t==="vertical"?1:0,l=i?cg:hg,a=n[l.start],h=n[l.end];return TU(e,function(f){return f.pos[i]}).map(function(f){var v=[],y=[],w=[];return f.forEach(function(b){var A,M,P=b.element,C=b.elementRect.rect;if(C[l.end]<a)v.push(b);else if(h<C[l.start])y.push(b);else if(C[l.start]<=a&&h<=C[l.end]&&r){var k=b.pos,B={element:P,rect:Qt(Qt({},C),(A={},A[l.end]=C[l.start],A))},z={element:P,rect:Qt(Qt({},C),(M={},M[l.start]=C[l.end],M))},q=[0,0],V=[0,0];q[i]=k[i],q[o]=k[o],V[i]=k[i],V[o]=k[o]+b.size,v.push({type:t,pos:q,size:0,elementRect:B,direction:"",elementDirection:"end"}),y.push({type:t,pos:V,size:0,elementRect:z,direction:"",elementDirection:"start"})}}),v.sort(function(b,A){return A.pos[o]-b.pos[o]}),y.sort(function(b,A){return b.pos[o]-A.pos[o]}),{total:f,start:v,end:y,inner:w}})}function lJ(t,e,n,r,i){var o=t.props.isDisplayInnerSnapDigit,l=[];return["vertical","horizontal"].forEach(function(a){var h=e.filter(function(P){return P.type===a}),f=a==="vertical"?1:0,v=f?0:1,y=sJ(a,h,r,o),w=f?hg:cg,b=f?cg:hg,A=r[w.start],M=r[w.end];y.forEach(function(P){var C=P.total,k=P.start,B=P.end,z=P.inner,q=n[v]+C[0].pos[v]-r[b.start],V=r;k.forEach(function(W){var Y=W.elementRect.rect,Z=V[w.start]-Y[w.end];if(Z>0){var j=[0,0];j[f]=n[f]+V[w.start]-A-Z,j[v]=q,l.push(Q1(t,a,"dashed",l.length,Z,j,W.className,i))}V=Y}),V=r,B.forEach(function(W){var Y=W.elementRect.rect,Z=Y[w.start]-V[w.end];if(Z>0){var j=[0,0];j[f]=n[f]+V[w.end]-A,j[v]=q,l.push(Q1(t,a,"dashed",l.length,Z,j,W.className,i))}V=Y}),z.forEach(function(W){var Y=W.elementRect.rect,Z=A-Y[w.start],j=Y[w.end]-M,K=[0,0],re=[0,0];K[f]=n[f]-Z,K[v]=q,re[f]=n[f]+M-A,re[v]=q,l.push(Q1(t,a,"dashed",l.length,Z,K,W.className,i)),l.push(Q1(t,a,"dashed",l.length,j,re,W.className,i))})})}),l}function uJ(t,e,n,r,i){var o=[];return["horizontal","vertical"].forEach(function(l){var a=e.filter(function(P){return P.type===l}).slice(0,1),h=l==="vertical"?0:1,f=h?0:1,v=h?hg:cg,y=h?cg:hg,w=r[v.start],b=r[v.end],A=r[y.start],M=r[y.end];a.forEach(function(P){var C=P.gap,k=P.gapRects,B=Math.max.apply(Math,Tr([A],rn(k.map(function(V){var W=V.rect;return W[y.start]})),!1)),z=Math.min.apply(Math,Tr([M],rn(k.map(function(V){var W=V.rect;return W[y.end]})),!1)),q=(B+z)/2;B===z||q===(A+M)/2||k.forEach(function(V){var W=V.rect,Y=V.className,Z=[n[0],n[1]];if(W[v.end]<w)Z[h]+=W[v.end]-w;else if(b<W[v.start])Z[h]+=W[v.start]-w-C;else return;Z[f]+=q-A,o.push(Q1(t,h?"vertical":"horizontal","gap",o.length,C,Z,Y,i))})})}),o}function b3(t){var e,n,r=t.state,i=r.containerClientRect,o=r.hasFixed,l=i.overflow,a=i.scrollHeight,h=i.scrollWidth,f=i.clientHeight,v=i.clientWidth,y=i.clientLeft,w=i.clientTop,b=t.props,A=b.snapGap,M=A===void 0?!0:A,P=b.verticalGuidelines,C=b.horizontalGuidelines,k=b.snapThreshold,B=k===void 0?5:k,z=b.maxSnapElementGuidelineDistance,q=z===void 0?1/0:z,V=b.isDisplayGridGuidelines,W=Sf(Tf(t.state)),Y=W.top,Z=W.left,j=W.bottom,K=W.right,re={top:Y,left:Z,bottom:j,right:K,center:(Z+K)/2,middle:(Y+j)/2},ie=dJ(t),se=Tr([],rn(ie),!1),de=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(De){return De*B});M&&se.push.apply(se,Tr([],rn(cJ(t,re,de)),!1));var ue=Qt({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(se.push.apply(se,Tr([],rn(fJ(t,l?h:v,l?a:f,y,w,ue,V)),!1)),o){var Te=i.left,pe=i.top;ue.left+=Te,ue.top+=pe,ue.right+=Te,ue.bottom+=pe}return se.push.apply(se,Tr([],rn(fU(C||!1,P||!1,l?h:v,l?a:f,y,w,ue)),!1)),se=se.filter(function(De){var me=De.element,Me=De.elementRect,fe=De.type;if(!me||!Me)return!0;var ve=Me.rect;return hU(re,ve,fe,q)}),se}function cJ(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,o=i===void 0?1/0:i,l=r.maxSnapElementGapDistance,a=l===void 0?1/0:l,h=t.state.elementRects,f=[];return[["vertical",cg,hg],["horizontal",hg,cg]].forEach(function(v){var y=rn(v,3),w=y[0],b=y[1],A=y[2],M=e[b.start],P=e[b.end],C=e[b.center],k=e[A.start],B=e[A.end],z={left:n[0],top:n[1]};function q(Y){var Z=Y.rect,j=z[b.start];return Z[b.end]<M+j?M-Z[b.end]:P-j<Z[b.start]?Z[b.start]-P:-1}var V=h.filter(function(Y){var Z=Y.rect;return Z[A.start]>B||Z[A.end]<k?!1:q(Y)>0}).sort(function(Y,Z){return q(Y)-q(Z)}),W=[];V.forEach(function(Y){V.forEach(function(Z){if(Y!==Z){var j=Y.rect,K=Z.rect,re=j[A.start],ie=j[A.end],se=K[A.start],de=K[A.end];re>de||se>ie||W.push([Y,Z])}})}),W.forEach(function(Y){var Z=rn(Y,2),j=Z[0],K=Z[1],re=j.rect,ie=K.rect,se=re[b.start],de=re[b.end],ue=ie[b.start],Te=ie[b.end],pe=z[b.start],De=0,me=0,Me=!1,fe=!1,ve=!1;if(de<=M&&P<=ue){if(fe=!0,De=(ue-de-(P-M))/2,me=de+De+(P-M)/2,gr(me-C)>pe)return}else if(de<ue&&Te<M+pe){if(Me=!0,De=ue-de,me=Te+De,gr(me-M)>pe)return}else if(de<ue&&P-pe<se){if(ve=!0,De=ue-de,me=se-De,gr(me-P)>pe)return}else return;De&&hU(e,ie,w,o)&&(De>a||f.push({type:w,pos:w==="vertical"?[me,0]:[0,me],element:K.element,size:0,className:K.className,isStart:Me,isCenter:fe,isEnd:ve,gap:De,hide:!0,gapRects:[j,K],direction:"",elementDirection:""}))})}),f}function hJ(t,e,n,r){var i,o,l=t.props,a=t.state,h=l.snapGridAll,f=l.snapGridWidth,v=f===void 0?0:f,y=l.snapGridHeight,w=y===void 0?0:y,b=a.snapRenderInfo,A=b&&(((i=b.direction)===null||i===void 0?void 0:i[0])||((o=b.direction)===null||o===void 0?void 0:o[1])),M=t.moveables;if(h&&M&&A&&(v||w)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var P=t.getRect(),C=P.children,k=b.direction;if(C){var B=k.map(function(q,V){var W=V===0?{snapSize:v,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:w,posName:"top",sizeName:"height",clientOffset:r.top-n},Y=W.snapSize,Z=W.posName,j=W.sizeName,K=W.clientOffset;if(!Y)return{dir:q,multiple:1,snapSize:Y,snapOffset:0};var re=P[j],ie=P[Z],se=iY(C.map(function(Me){return[Me[Z]-ie,Me[j],re-Me[j]-Me[Z]+ie]})).filter(function(Me){return Me}).sort(function(Me,fe){return Me-fe}),de=se[0],ue=se.map(function(Me){return Qi(Me/de,.1)*Y}),Te=1,pe=Qi(re/de,.1);for(Te=1;Te<=10&&!ue.every(function(Me){return Me*Te%1===0});++Te);var De=(-q+1)/2,me=qw(ie-K,ie-K+re,De,1-De);return{multiple:pe*Te,dir:q,snapSize:Y,snapOffset:Math.round(me/Y)}}),z=B.map(function(q){return q.multiple||1});a.snapThresholdInfo.multiples=z,a.snapThresholdInfo.offset=B.map(function(q){return q.snapOffset}),B.forEach(function(q,V){q.snapSize})}}else a.snapThresholdInfo=null}function fJ(t,e,n,r,i,o,l){r===void 0&&(r=0),i===void 0&&(i=0);var a=t.props,h=t.state,f=a.snapGridWidth,v=f===void 0?0:f,y=a.snapGridHeight,w=y===void 0?0:y,b=[],A=o.left,M=o.top,P=[0,0];hJ(t,r,i,o);var C=h.snapThresholdInfo,k=v,B=w;if(C&&(v*=C.multiples[0]||1,w*=C.multiples[1]||1,P=C.offset),w){for(var z=function(V){b.push({type:"horizontal",pos:[A,Qi(P[1]*B+V-i+M,.1)],className:xi("grid-guideline"),size:e,hide:!l,direction:"",grid:!0})},q=0;q<=n*2;q+=w)z(q);for(var q=-w;q>=-n;q-=w)z(q)}if(v){for(var z=function(W){b.push({type:"vertical",pos:[Qi(P[0]*k+W-r+A,.1),M],className:xi("grid-guideline"),size:n,hide:!l,direction:"",grid:!0})},q=0;q<=e*2;q+=v)z(q);for(var q=-v;q>=-e;q-=v)z(q)}return b}function hU(t,e,n,r){return n==="horizontal"?gr(t.right-e.left)<=r||gr(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?gr(t.bottom-e.top)<=r||gr(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function dJ(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(w){return!w.refresh}),o=r.map(function(w){return ud(w)&&"element"in w?Qt(Qt({},w),{element:op(w.element,!0)}):{element:op(w,!0)}}).filter(function(w){return w.element}),l=EY(i.map(function(w){return w.element}),o.map(function(w){return w.element})),a=l.maintained,h=l.added,f=[];a.forEach(function(w){var b=rn(w,2),A=b[0],M=b[1];f[M]=i[A]}),pJ(t,h.map(function(w){return o[w]})).map(function(w,b){f[h[b]]=w}),e.elementRects=f;var v=jR(t.props.elementSnapDirections),y=[];return f.forEach(function(w){var b=w.element,A=w.top,M=A===void 0?v.top:A,P=w.left,C=P===void 0?v.left:P,k=w.right,B=k===void 0?v.right:k,z=w.bottom,q=z===void 0?v.bottom:z,V=w.center,W=V===void 0?v.center:V,Y=w.middle,Z=Y===void 0?v.middle:Y,j=w.className,K=w.rect,re=VR({top:M,right:B,left:C,bottom:q,center:W,middle:Z},K),ie=re.horizontal,se=re.vertical,de=re.horizontalNames,ue=re.verticalNames,Te=K.top,pe=K.left,De=K.right-pe,me=K.bottom-Te,Me=[De,me];se.forEach(function(fe,ve){y.push({type:"vertical",element:b,pos:[Qi(fe,.1),Te],size:me,sizes:Me,className:j,elementRect:w,elementDirection:u4[ue[ve]]||ue[ve],direction:""})}),ie.forEach(function(fe,ve){y.push({type:"horizontal",element:b,pos:[pe,Qi(fe,.1)],size:De,sizes:Me,className:j,elementRect:w,elementDirection:u4[de[ve]]||de[ve],direction:""})})}),y}function _4(t,e){return t?t.map(function(n){var r=ud(n)?n:{pos:n},i=r.pos;return kb(i)?r:Qt(Qt({},r),{pos:Bo(i,e)})}):[]}function fU(t,e,n,r,i,o,l){i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l={left:0,top:0,right:0,bottom:0});var a=[],h=l.left,f=l.top,v=l.bottom,y=l.right,w=n+y-h,b=r+v-f;return _4(t,b).forEach(function(A){a.push({type:"horizontal",pos:[h,Qi(A.pos-o+f,.1)],size:w,className:A.className,direction:""})}),_4(e,w).forEach(function(A){a.push({type:"vertical",pos:[Qi(A.pos-i+h,.1),f],size:b,className:A.className,direction:""})}),a}function pJ(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,o=r.rootMatrix,l=r.is3d,a=r.offsetDelta,h=l?4:3,f=rn(BK(o,i,h),2),v=f[0],y=f[1],w=n?0:a[0],b=n?0:a[1];return e.map(function(A){var M=A.element.getBoundingClientRect(),P=M.left-v-w,C=M.top-y-b,k=C+M.height,B=P+M.width,z=rn(h_(o,[P,C],h),2),q=z[0],V=z[1],W=rn(h_(o,[B,k],h),2),Y=W[0],Z=W[1];return Qt(Qt({},A),{rect:{left:q,right:Y,top:V,bottom:Z,center:(q+Y)/2,middle:(V+Z)/2}})})}function g2(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(n!==r){var l=op(r,!0);if(l){var a=wb(l),h=T4(e,[a.left-i.left,a.top-i.top]),f=T4(e,[a.right-i.right,a.bottom-i.bottom]);o.left=Qi(h[0],1e-5),o.top=Qi(h[1],1e-5),o.right=Qi(f[0],1e-5),o.bottom=Qi(f[1],1e-5)}}return e.snapContainer=r,e.snapOffset=o,e.guidelines=b3(t),e.enableSnap=!0,!0}function dU(t,e,n,r,i,o){var l=q0(t,e,n,o?4:3),a=Eu(l,r);return WR(l,Ei(i,a))}function b4(t){return t?t/gr(t):0}function mJ(t,e,n,r,i,o){var l=o.fixedDirection,a=VK(n,l,r),h=qR(t,e,n,r),f=Tr(Tr([],rn(eJ(t,e,a,r,i,o)),!1),rn(sU(t,h,o)),!1),v=Zw(f,0),y=Zw(f,1);return{width:{isBound:v.isBound,offset:v.offset[0]},height:{isBound:y.isBound,offset:y.offset[1]}}}function gJ(t,e,n,r,i,o,l,a,h){var f=Eu(e,l),v=JS(t,a,{vertical:[f[0]],horizontal:[f[1]]}),y=v.horizontal.offset,w=v.vertical.offset;if(Qi(w,d3)||Qi(y,d3)){var b=rn(fp({datas:h,distX:-w,distY:-y}),2),A=b[0],M=b[1],P=Math.min(i||1/0,n+l[0]*A),C=Math.min(o||1/0,r+l[1]*M);return[P-n,C-r]}return[0,0]}function pU(t,e,n,r,i,o,l,a){for(var h=Tf(t.state),f=t.props.keepRatio,v=0,y=0,w=0;w<2;++w){var b=e(v,y),A=mJ(t,b,i,f,l,a),M=A.width,P=A.height,C=M.isBound,k=P.isBound,B=M.offset,z=P.offset;if(w===1&&(C||(B=0),k||(z=0)),w===0&&l&&!C&&!k)return[0,0];if(f){var q=gr(B)*(n?1/n:1),V=gr(z)*(r?1/r:1),W=C&&k?q<V:k||!C&&q<V;W?B=n*z/r:z=r*B/n}v+=B,y+=z}if(!f&&i[0]&&i[1]){var Y=nJ(t,h,i,o,a),Z=Y.maxWidth,j=Y.maxHeight,K=rn(gJ(t,e(v,y).map(function(se){return se.map(function(de){return Qi(de,d3)})}),n+v,r+y,Z,j,i,l,a),2),B=K[0],z=K[1];v+=B,y+=z}return[v,y]}function bb(t){return t<0&&(t=t%360+360),t%=360,t}function vJ(t,e){e=bb(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return gr(t-r)<gr(t-i)?r:i}function RT(t,e){t=bb(t),e=bb(e);var n=bb(t-e);return Math.min(n,360-n)}function yJ(t,e,n,r){var i,o=t.props,l=(i=o[Q8])!==null&&i!==void 0?i:5,a=o[eU];if(P_(t,"rotatable")){var h=e.pos1,f=e.pos2,v=e.pos3,y=e.pos4,w=e.origin,b=n*Math.PI/180,A=[h,f,v,y].map(function(z){return Ei(z,w)}),M=A.map(function(z){return ax(z,b)}),P=Tr(Tr([],rn(OK(t,A,M,w,n)),!1),rn(XK(t,A,M,w,n)),!1);P.sort(function(z,q){return gr(z-n)-gr(q-n)});var C=P.length>0;if(C)return{isSnap:C,dist:C?P[0]:n}}if(a!=null&&a.length&&l){var k=a.slice().sort(function(z,q){return RT(z,r)-RT(q,r)}),B=k[0];if(RT(B,r)<=l)return{isSnap:!0,dist:n+vJ(r,B)-r}}return{isSnap:!1,dist:n}}function _J(t,e,n,r,i,o,l){if(!P_(t,"resizable"))return[0,0];var a=l.fixedDirection,h=l.nextAllMatrix,f=t.state,v=f.allMatrix,y=f.is3d;return pU(t,function(w,b){return dU(h||v,e+w,n+b,a,i,y)},e,n,r,i,o,l)}function bJ(t,e,n,r,i){if(!P_(t,"scalable"))return[0,0];var o=i.startOffsetWidth,l=i.startOffsetHeight,a=i.fixedPosition,h=i.fixedDirection,f=i.is3d,v=pU(t,function(y,w){return dU(_K(i,to(e,[y/o,w/l])),o,l,h,a,f)},o,l,n,a,r,i);return[v[0]/o,v[1]/l]}function xJ(t,e){e.absolutePoses=Tf(t.state)}function x4(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Hh(e,function(o){return o.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return Qt(Qt({},r),{direction:i.direction})})}function w4(t,e,n,r,i,o){var l=UR(YS(t,o),e,n),a=l.vertical,h=l.horizontal,f=zy();a.forEach(function(A){A.isBound&&(A.direction==="start"&&(f.left=!0),A.direction==="end"&&(f.right=!0),r.push({type:"bounds",pos:A.pos}))}),h.forEach(function(A){A.isBound&&(A.direction==="start"&&(f.top=!0),A.direction==="end"&&(f.bottom=!0),i.push({type:"bounds",pos:A.pos}))});var v=ZK(t),y=v.boundMap,w=v.vertical,b=v.horizontal;return w.forEach(function(A){em(r,function(M){var P=M.type,C=M.pos;return P==="bounds"&&C===A})>=0||r.push({type:"bounds",pos:A})}),b.forEach(function(A){em(i,function(M){var P=M.type,C=M.pos;return P==="bounds"&&C===A})>=0||i.push({type:"bounds",pos:A})}),{boundMap:f,innerBoundMap:y}}var wJ=YR("",["resizable","scalable"]),SJ={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",Q8,eU,tU,nU,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,l=n.pos2,a=n.pos3,h=n.pos4,f=n.snapRenderInfo,v=t.props.snapRenderThreshold,y=v===void 0?1:v;if(!f||!f.render||!P_(t,""))return jy(t,"boundMap",zy(),function(le){return JSON.stringify(le)}),jy(t,"innerBoundMap",zy(),function(le){return JSON.stringify(le)}),[];n.guidelines=b3(t);var w=Math.min(o[0],l[0],a[0],h[0]),b=Math.min(o[1],l[1],a[1],h[1]),A=f.externalPoses||[],M=Tf(t.state),P=[],C=[],k=[],B=[],z=[],q=Sf(M),V=q.width,W=q.height,Y=q.top,Z=q.left,j=q.bottom,K=q.right,re={left:Z,right:K,top:Y,bottom:j,center:(Z+K)/2,middle:(Y+j)/2},ie=A.length>0,se=ie?Sf(A):{};if(!f.request){if(f.direction&&z.push(jK(t,M,f.direction,y,y)),f.snap){var de=Sf(M);f.center&&(de.middle=(de.top+de.bottom)/2,de.center=(de.left+de.right)/2),z.push(c4(t,de,y,y))}ie&&(f.center&&(se.middle=(se.top+se.bottom)/2,se.center=(se.left+se.right)/2),z.push(c4(t,se,y,y))),z.forEach(function(le){var ye=le.vertical.posInfos,Se=le.horizontal.posInfos;P.push.apply(P,Tr([],rn(ye.filter(function(Be){var Ve=Be.guidelineInfos;return Ve.some(function(tt){var ht=tt.guideline;return!ht.hide})}).map(function(Be){return{type:"snap",pos:Be.pos}})),!1)),C.push.apply(C,Tr([],rn(Se.filter(function(Be){var Ve=Be.guidelineInfos;return Ve.some(function(tt){var ht=tt.guideline;return!ht.hide})}).map(function(Be){return{type:"snap",pos:Be.pos}})),!1)),k.push.apply(k,Tr([],rn(x4(ye)),!1)),B.push.apply(B,Tr([],rn(x4(Se)),!1))})}var ue=w4(t,[Z,K],[Y,j],P,C),Te=ue.boundMap,pe=ue.innerBoundMap;ie&&w4(t,[se.left,se.right],[se.top,se.bottom],P,C,f.externalBounds);var De=Tr(Tr([],rn(k),!1),rn(B),!1),me=De.filter(function(le){return le.element&&!le.gapRects}),Me=De.filter(function(le){return le.gapRects}).sort(function(le,ye){return le.gap-ye.gap});$r(t,"onSnap",{guidelines:De.filter(function(le){var ye=le.element;return!ye}),elements:me,gaps:Me},!0);var fe=jy(t,"boundMap",Te,function(le){return JSON.stringify(le)},zy()),ve=jy(t,"innerBoundMap",pe,function(le){return JSON.stringify(le)},zy());return(Te===fe||pe===ve)&&$r(t,"onBound",{bounds:Te,innerBounds:pe},!0),Tr(Tr(Tr(Tr(Tr(Tr([],rn(lJ(t,me,[w,b],re,e)),!1),rn(uJ(t,Me,[w,b],re,e)),!1),rn(y4(t,"horizontal",B,[i,r],re,e)),!1),rn(y4(t,"vertical",k,[i,r],re,e)),!1),rn(v4(t,"horizontal",C,w,r,V,0,e)),!1),rn(v4(t,"vertical",P,b,i,W,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},g2(t)},drag:function(t){var e=t.state;g2(t)||(e.guidelines=b3(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(wJ(t,e)||_3(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Su(e.inputEvent.target,xi("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,g2(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,g2(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function EJ(t,e){return[t[0]*e[0],t[1]*e[1]]}function xi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jZ.apply(void 0,Tr([kR],rn(t),!1))}function mU(t){t()}function TJ(t){return!t||t==="none"?[1,0,0,1,0,0]:ud(t)?t:Bb(t)}function xb(t,e,n){return Hw(e,P0(n,e),t,P0(n.map(function(r){return-r}),e))}function MJ(t,e,n){if(e==="%"){var r=$R(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function AJ(t){var e=CJ(XR(t,":before"));return e.map(function(n,r){var i=ix(n),o=i.value,l=i.unit;return o*MJ(t,l,r===0)})}function Kw(t){return t?t.split(" "):["0","0"]}function CJ(t){return Kw(t.transformOrigin)}function gU(t){var e=_h(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var o=i.length;if(!o)return"";for(var l=[],a=function(f){var v=i[f].matrix;l.push("matrix(".concat(["a","b","c","d","e","f"].map(function(y){return v[y]}).join(", "),")"))},h=0;h<o;++h)a(h);return l.join(" ")}return""}function Ub(t,e,n,r,i){var o,l,a=CR(t)||vg(t),h=!1,f,v;if(!t||n)f=t;else{var y=(o=t==null?void 0:t.assignedSlot)===null||o===void 0?void 0:o.parentElement,w=t.parentElement;y?(h=!0,v=w,f=y):f=w}for(var b=!1,A=t===e||f===e,M="relative",P=1,C=parseFloat(i==null?void 0:i("zoom"))||1,k=i==null?void 0:i("position");f&&f!==a;){e===f&&(A=!0);var B=_h(f),z=f.tagName.toLowerCase(),q=gU(f),V=B("willChange"),W=parseFloat(B("zoom"))||1;if(M=B("position"),r&&W!==1){P=W;break}if(!n&&r&&C!==1&&k&&k!=="absolute"||z==="svg"||z==="foreignobject"||M!=="static"||q&&q!=="none"||V==="transform")break;var Y=(l=t==null?void 0:t.assignedSlot)===null||l===void 0?void 0:l.parentNode,Z=f.parentNode;Y&&(h=!0,v=Z);var j=Z;if(j&&j.nodeType===11){f=j.host,b=!0,M=_h(f)("position");break}f=j,M="relative"}return{offsetZoom:P,hasSlot:h,parentSlotElement:v,isCustomElement:b,isStatic:M==="static",isEnd:A||!f||f===a,offsetParent:f||a}}function PJ(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,o=t.offsetTop,l=_h(t),a=SR(i),h=!a,f,v;return!h&&(r!=="svg"||t.ownerSVGElement)?(f=k8?AJ(t):Kw(l("transformOrigin")).map(function(y){return parseFloat(y)}),v=f.slice(),h=!0,r==="svg"?(i=0,o=0):(n=rn(LJ(t,f,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],o=n[1],f[0]=n[2],f[1]=n[3])):(f=Kw(l("transformOrigin")).map(function(y){return parseFloat(y)}),v=f.slice()),{tagName:r,isSVG:a,hasOffset:h,offset:[i||0,o||0],origin:f,targetOrigin:v}}function vU(t,e){var n=_h(t),r=_h(vg(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var o=parseInt(r("marginLeft"),10),l=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(l=0),(n("left")!=="auto"||n("right")!=="auto")&&(o=0)),[o,l]}function x3(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=cd(n,3,4))})}function RJ(t){for(var e=t.parentElement,n=!1,r=vg(t);e;){var i=XR(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function QS(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(C8(t,!e).join(","),")")}function $R(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function DJ(t,e){var n,r=$R(t),i=r.width,o=r.height,l=r.clientWidth,a=r.clientHeight,h=l/i,f=a/o,v=t.preserveAspectRatio.baseVal,y=v.align,w=v.meetOrSlice,b=[0,0],A=[h,f],M=[0,0];if(y!==1){var P=(y-2)%3,C=Math.floor((y-2)/3);b[0]=i*P/2,b[1]=o*C/2;var k=w===2?Math.max(f,h):Math.min(h,f);A[0]=k,A[1]=k,M[0]=(l-i)/2*P,M[1]=(a-o)/2*C}var B=RR(A,e);return n=rn(M,2),B[e*(e-1)]=n[0],B[e*(e-1)+1]=n[1],xb(B,e,b)}function LJ(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=_h(t),o=i("transform-box")==="fill-box",l=t.getBBox(),a=$R(t.ownerSVGElement),h=l.x,f=l.y;r==="foreignobject"&&!h&&!f&&(h=parseFloat(t.getAttribute("x"))||0,f=parseFloat(t.getAttribute("y"))||0);var v=h-a.x,y=f-a.y,w=o?e[0]:e[0]-v,b=o?e[1]:e[1]-y;return[v,y,w,b]}function Js(t,e,n){return Oc(t,C0(e,n),n)}function q0(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Js(t,i,r)})}function Sf(t){var e=t.map(function(f){return f[0]}),n=t.map(function(f){return f[1]}),r=Math.min.apply(Math,Tr([],rn(e),!1)),i=Math.min.apply(Math,Tr([],rn(n),!1)),o=Math.max.apply(Math,Tr([],rn(e),!1)),l=Math.max.apply(Math,Tr([],rn(n),!1)),a=o-r,h=l-i;return{left:r,top:i,right:o,bottom:l,width:a,height:h}}function S4(t,e,n,r){var i=q0(t,e,n,r);return Sf(i)}function IJ(t,e,n,r,i){var o,l=t.target,a=t.origin,h=e.matrix,f=_U(l),v=f.offsetWidth,y=f.offsetHeight,w=n.getBoundingClientRect(),b=[0,0];n===vg(n)&&(b=vU(l,!0));for(var A=l.getBoundingClientRect(),M=A.left-w.left+n.scrollLeft-(n.clientLeft||0)+b[0],P=A.top-w.top+n.scrollTop-(n.clientTop||0)+b[1],C=A.width,k=A.height,B=Hw(r,i,h),z=S4(B,v,y,r),q=z.left,V=z.top,W=z.width,Y=z.height,Z=Js(B,a,r),j=Ei(Z,[q,V]),K=[M+j[0]*C/W,P+j[1]*k/Y],re=[0,0],ie=0;++ie<10;){var se=cp(i,r);o=rn(Ei(Js(se,K,r),Js(se,Z,r)),2),re[0]=o[0],re[1]=o[1];var de=Hw(r,i,P0(re,r),h),ue=S4(de,v,y,r),Te=ue.left,pe=ue.top,De=Te-M,me=pe-P;if(gr(De)<2&&gr(me)<2)break;K[0]-=De,K[1]-=me}return re.map(function(Me){return Math.round(Me)})}function OJ(t,e,n){var r=t.length===16,i=r?4:3,o=e.map(function(h){return Js(t,h,i)}),l=n.left,a=n.top;return o.map(function(h){return[h[0]+l,h[1]+a]})}function Ef(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function yU(t,e){return Ef([e[0]-t[0],e[1]-t[1]])}function eb(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=jl(t,e));var i=yU(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function Jw(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,o=n.reduce(function(a,h){return a+h[0]},0)/i,l=n.reduce(function(a,h){return a+h[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(l,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function D0(t,e){var n=t[e];return ud(n)?Qt(Qt({},t),n):t}function _U(t){var e=t&&!SR(t.offsetWidth),n=0,r=0,i=0,o=0,l=0,a=0,h=0,f=0,v=0,y=0,w=0,b=0,A=1/0,M=1/0,P=1/0,C=1/0,k=0,B=0,z=!1;if(t)if(!e&&t.ownerSVGElement){var q=t.getBBox();z=!0,n=q.width,r=q.height,l=n,a=r,h=n,f=r,i=n,o=r}else{var V=_h(t),W=t.style,Y=V("boxSizing")==="border-box",Z=parseFloat(V("borderLeftWidth"))||0,j=parseFloat(V("borderRightWidth"))||0,K=parseFloat(V("borderTopWidth"))||0,re=parseFloat(V("borderBottomWidth"))||0,ie=parseFloat(V("paddingLeft"))||0,se=parseFloat(V("paddingRight"))||0,de=parseFloat(V("paddingTop"))||0,ue=parseFloat(V("paddingBottom"))||0,Te=ie+se,pe=de+ue,De=Z+j,me=K+re,Me=Te+De,fe=pe+me,ve=V("position"),le=0,ye=0;if("clientLeft"in t){var Se=null;if(ve==="absolute"){var Be=Ub(t,vg(t));Se=Be.offsetParent}else Se=t.parentElement;if(Se){var Ve=_h(Se);le=parseFloat(Ve("width")),ye=parseFloat(Ve("height"))}}v=Math.max(Te,Bo(V("minWidth"),le)||0),y=Math.max(pe,Bo(V("minHeight"),ye)||0),A=Bo(V("maxWidth"),le),M=Bo(V("maxHeight"),ye),isNaN(A)&&(A=1/0),isNaN(M)&&(M=1/0),k=Bo(W.width,0)||0,B=Bo(W.height,0)||0,l=parseFloat(V("width"))||0,a=parseFloat(V("height"))||0,h=gr(l-k)<1?r3(v,k||l,A):l,f=gr(a-B)<1?r3(y,B||a,M):a,n=h,r=f,i=h,o=f,Y?(P=A,C=M,w=v,b=y,h=n-Me,f=r-fe):(P=A+Me,C=M+fe,w=v+Me,b=y+fe,n=h+Me,r=f+fe),i=h+Te,o=f+pe}return{svg:z,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:o,contentWidth:h,contentHeight:f,inlineCSSWidth:k,inlineCSSHeight:B,cssWidth:l,cssHeight:a,minWidth:v,minHeight:y,maxWidth:A,maxHeight:M,minOffsetWidth:w,minOffsetHeight:b,maxOffsetWidth:P,maxOffsetHeight:C}}function bU(t,e){return jl(e>0?t[0]:t[1],e>0?t[1]:t[0])}function v2(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function xU(t,e){var n=t===vg(t)||t===CR(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=_h(t)("overflow")!=="visible",Qt(Qt({},e),r)}function DT(t,e,n,r){var i=t.left,o=t.right,l=t.top,a=t.bottom,h=e.top,f=e.left,v={left:f+i,top:h+l,right:f+o,bottom:h+a,width:o-i,height:a-l};return n&&r?xU(n,v):v}function wb(t,e){var n=0,r=0,i=0,o=0;if(t){var l=t.getBoundingClientRect();n=l.left,r=l.top,i=l.width,o=l.height}var a={left:n,top:r,width:i,height:o,right:n+i,bottom:r+o};return t&&e?xU(t,a):a}function NJ(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),o=i.offsetWidth,l=i.offsetHeight,a=i.svg,h=i.transformOrigin;return!n&&a&&r?JR(r,o,l):h}function wU(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var o=n.target;i=SU(o,r)}return i}function SU(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function WR(t,e){return[to(e,t[0]),to(e,t[1]),to(e,t[2]),to(e,t[3])]}function Tf(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,o=t.pos3,l=t.pos4;return WR([r,i,o,l],[e,n])}function w3(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function Uy(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];(r==null?void 0:r.isIdle())===!1&&w3(t,e),r==null||r.unset(),t[n]=null}function Jc(t,e){if(e){var n=C_(e);n.nextStyle=Qt(Qt({},n.nextStyle),t)}return{style:t,cssText:M_(t).map(function(r){return"".concat(QZ(r,"-"),": ").concat(t[r],";")}).join("")}}function EU(t,e,n){var r=e.afterTransform||e.transform;return Qt(Qt({},Jc(Qt(Qt(Qt({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function sa(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var o=Qt(Qt({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var l;(l=e.stop)===null||l===void 0||l.call(e)}});return i.isStartEvent?r||(i.lastEvent=o):i.isStartEvent=!0,o}function $h(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),Qt(Qt({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function eE(t,e,n){t._emitter.on(e,n)}function $r(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function XR(t,e){return eg(t).getComputedStyle(t,e)}function y2(t,e,n){var r={},i={};return t.filter(function(o){var l=o.name;if(r[l]||!e.some(function(a){return o[a]}))return!1;if(!n&&o.ableGroup){if(i[o.ableGroup])return!1;i[o.ableGroup]=!0}return r[l]=!0,!0})}function S3(t,e){return t===e||t==null&&e==null}function E4(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!SR(i))return i}return t[n]}function TU(t,e){var n=[],r=[];return t.forEach(function(i,o){var l=e(i,o,t),a=r.indexOf(l),h=n[a]||[];a===-1&&(r.push(l),n.push(h)),h.push(i)}),n}function kJ(t,e){var n=[],r={};return t.forEach(function(i,o){var l=e(i,o,t),a=r[l];a||(a=[],r[l]=a,n.push(a)),a.push(i)}),n}function MU(t){return t.reduce(function(e,n){return e.concat(n)},[])}function c_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return gr(r)-gr(n)}),t[0]}function h_(t,e,n){return Oc(cp(t,n),C0(e,n),n)}function FJ(t,e){var n,r=t.is3d,i=t.rootMatrix,o=r?4:3;return n=rn(h_(i,[e.distX,e.distY],o),2),e.distX=n[0],e.distY=n[1],e}function hf(t,e,n,r){if(!n[0]&&!n[1])return e;var i=Js(t,[b4(n[0]||1),0],r),o=Js(t,[0,b4(n[1]||1)],r),l=Js(t,[n[0]/Ef(i),n[1]/Ef(o)],r);return to(e,l)}function td(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Qw(t){return gr(t)<=Qc?0:t}function ZR(t){return function(e){if(!e.isDragging(t))return"";var n=MK(e,t),r=n.deg;return r?xi("view-control-rotation".concat(r)):""}}function YR(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(o){return r.requestAble===o})?r.parentDirection:!1;var i=r.inputEvent.target;return Su(i,xi("direction"))&&(!t||Su(i,xi(t)))}}function BJ(t,e,n){var r,i=s_(t,{"x%":function(q){return q/100*e.offsetWidth},"y%":function(q){return q/100*e.offsetHeight}}),o=t.slice(0,n<0?void 0:n),l=t.slice(0,n<0?void 0:n+1),a=t[n]||"",h=n<0?[]:t.slice(n),f=n<0?[]:t.slice(n+1),v=i.slice(0,n<0?void 0:n),y=i.slice(0,n<0?void 0:n+1),w=(r=i[n])!==null&&r!==void 0?r:s_([""])[0],b=n<0?[]:i.slice(n),A=n<0?[]:i.slice(n+1),M=w?[w]:[],P=yy(v),C=yy(y),k=yy(b),B=yy(A),z=Uo(P,k,4);return{transforms:t,beforeFunctionMatrix:P,beforeFunctionMatrix2:C,targetFunctionMatrix:yy(M),afterFunctionMatrix:k,afterFunctionMatrix2:B,allFunctionMatrix:z,beforeFunctions:v,beforeFunctions2:y,targetFunction:M[0],afterFunctions:b,afterFunctions2:A,beforeFunctionTexts:o,beforeFunctionTexts2:l,targetFunctionText:a,afterFunctionTexts:h,afterFunctionTexts2:f}}function zJ(t){return!t||!ud(t)||PR(t)?!1:Xu(t)||"length"in t}function op(t,e){return t?PR(t)?t:sm(t)?e?document.querySelector(t):t:ER(t)?t():T8(t)?t:"current"in t?t.current:t:null}function KR(t,e){if(!t)return[];var n=zJ(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return sm(i)&&e?Tr(Tr([],rn(r),!1),rn([].slice.call(document.querySelectorAll(i))),!1):(Xu(i)?r.push(KR(i,e)):r.push(op(i,e)),r)},[])}function UJ(t,e,n){var r=jl(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function T4(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,o=cp(n,i);return r||(o=cd(o,3,4)),o[12]=0,o[13]=0,o[14]=0,mY(o,e)}function AU(t,e,n,r,i){var o=rn(t,2),l=o[0],a=o[1],h=0,f=0;if(i&&l&&a){var v=jl([0,0],e),y=jl([0,0],r),w=Ef(e),b=Math.cos(v-y)*w;if(!r[0])f=b,h=f*n;else if(!r[1])h=b,f=h/n;else{var A=r[0]*l,M=r[1]*a,P=Math.atan2(A+e[0],M+e[1]),C=Math.atan2(A,M);P<0&&(P+=Math.PI*2),C<0&&(C+=Math.PI*2);var k=0;gr(P-C)<Math.PI/2||gr(P-C)>Math.PI/2*3||(C+=Math.PI),k=P-C,k>Math.PI*2?k-=Math.PI*2:k>Math.PI?k=2*Math.PI-k:k<-Math.PI&&(k=-2*Math.PI-k);var B=Ef([A+e[0],M+e[1]])*Math.cos(k);h=B*Math.sin(C)-A,f=B*Math.cos(C)-M,r[0]<0&&(h*=-1),r[1]<0&&(f*=-1)}}else h=r[0]*e[0],f=r[1]*e[1];return[h,f]}function CU(t,e,n,r){var i,o=n.ratio,l=n.startOffsetWidth,a=n.startOffsetHeight,h=0,f=0,v=r.distX,y=r.distY,w=r.pinchScale,b=r.parentDistance,A=r.parentDist,M=r.parentScale,P=n.fixedDirection,C=[0,1].map(function(W){return gr(t[W]-P[W])}),k=[0,1].map(function(W){var Y=C[W];return Y!==0&&(Y=2/Y),Y});if(A)h=A[0],f=A[1],e&&(h?f||(f=h/o):h=f*o);else if(kb(w))h=(w-1)*l,f=(w-1)*a;else if(M)h=(M[0]-1)*l,f=(M[1]-1)*a;else if(b){var B=l*C[0],z=a*C[1],q=Ef([B,z]);h=b/q*B*k[0],f=b/q*z*k[1]}else{var V=fp({datas:n,distX:v,distY:y});V=k.map(function(W,Y){return V[Y]*W}),i=rn(AU([l,a],V,o,t,e),2),h=i[0],f=i[1]}return{distWidth:h,distHeight:f}}function E3(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=rn(t.split(" "),2),r=n[0],i=n[1],o=E3(r||""),l=E3(i||""),a=Qt(Qt({},o),l),h={x:"50%",y:"50%"};return a.x&&(h.x=a.x),a.y&&(h.y=a.y),a.value&&(a.x&&!a.y&&(h.y=a.value),!a.x&&a.y&&(h.x=a.value)),h}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function JR(t,e,n){var r=E3(t,!0),i=r.x,o=r.y;return[Bo(i,e)||0,Bo(o,n)||0]}function jJ(t,e,n){var r=t.map(function(o){return Ei(o,e)}),i=r.map(function(o){return ax(o,n)});return{prev:r,next:i,result:i.map(function(o){return to(o,e)})}}function PU(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],o=Xu(n),l=Xu(i);return o&&l?PU(n,i):!o&&!l?n===i:!1})}function jy(t,e,n,r,i){var o=t._store,l=o[e];if(!(e in o))if(i!=null)o[e]=i,l=i;else return o[e]=n,n;return l===n||r(l)===r(n)?l:(o[e]=n,n)}function Yc(t){return t>=0?1:-1}function gr(t){return Math.abs(t)}function LT(t,e){return rY(t).map(function(n){return e(n)})}function RU(t){return kb(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var VJ=lx("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,o=e.originalDatas,l=t.props,a=l.pinchable,h=l.ables;if(!a)return!1;var f="onPinch".concat(r?"Group":"","Start"),v="drag".concat(r?"Group":"","ControlStart"),y=(a===!0?t.controlAbles:h.filter(function(M){return a.indexOf(M.name)>-1})).filter(function(M){return M.canPinch&&M[v]}),w=sa(t,e,{});r&&(w.targets=r);var b=$r(t,f,w);n.isPinch=b!==!1,n.ables=y;var A=n.isPinch;return A?(y.forEach(function(M){if(o[M.name]=o[M.name]||{},!!M[v]){var P=Qt(Qt({},e),{datas:o[M.name],parentRotate:i,isPinch:!0});M[v](t,P)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},A):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,o=e.originalDatas,l=e.inputEvent,a=e.targets,h=e.angle;if(n.isPinch){var f=i*(1-1/r),v=sa(t,e,{});a&&(v.targets=a);var y="onPinch".concat(a?"Group":"");$r(t,y,v);var w=n.ables,b="drag".concat(a?"Group":"","Control");return w.forEach(function(A){A[b]&&A[b](t,Qt(Qt({},e),{datas:o[A.name],inputEvent:l,resolveMatrix:!0,pinchScale:r,parentDistance:f,parentRotate:h,isPinch:!0}))}),v}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.targets,l=e.originalDatas;if(n.isPinch){var a="onPinch".concat(o?"Group":"","End"),h=$h(t,e,{isDrag:r});o&&(h.targets=o),$r(t,a,h);var f=n.ables,v="drag".concat(o?"Group":"","ControlEnd");return f.forEach(function(y){y[v]&&y[v](t,Qt(Qt({},e),{isDrag:r,datas:l[y.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,Qt(Qt({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Qt(Qt({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Qt(Qt({},e),{targets:t.props.targets}))}}),M4=YR("scalable"),GJ={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:Y8("scalable"),dragControlCondition:M4,viewClassName:ZR("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.parentDirection,l=wU(o,r,i,n),a=t.state,h=a.width,f=a.height,v=a.targetTransform,y=a.target,w=a.pos1,b=a.pos2,A=a.pos4;if(!l||!y)return!1;r||G0(t,e),n.datas={},n.transform=v,n.prevDist=[1,1],n.direction=l,n.startOffsetWidth=h,n.startOffsetHeight=f,n.startValue=[1,1];var M=!l[0]&&!l[1]||l[0]||!l[1];ZS(t,e,"scale"),n.isWidth=M;function P(V){n.ratio=V&&isFinite(V)?V:0}n.startPositions=Tf(t.state);function C(V){var W=lU(n.startPositions,V);n.fixedDirection=W.fixedDirection,n.fixedPosition=W.fixedPosition,n.fixedOffset=W.fixedOffset}n.setFixedDirection=C,P(Zp(w,b)/Zp(b,A)),C([-l[0],-l[1]]);var k=function(V){n.minScaleSize=V},B=function(V){n.maxScaleSize=V};k([-1/0,-1/0]),B([1/0,1/0]);var z=sa(t,e,Qt(Qt({direction:l,set:function(V){n.startValue=V},setRatio:P,setFixedDirection:C,setMinScaleSize:k,setMaxScaleSize:B},XS(t,e)),{dragStart:Zc.dragStart(t,new l_().dragStart([0,0],e))})),q=$r(t,"onScaleStart",z);return n.startFixedDirection=n.fixedDirection,q!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:l}),n.isScale?z:!1},dragControl:function(t,e){$S(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,o=e.isPinch,l=e.dragClient,a=e.isRequest,h=e.useSnap,f=e.resolveMatrix,v=n.prevDist,y=n.direction,w=n.startOffsetWidth,b=n.startOffsetHeight,A=n.isScale,M=n.startValue,P=n.isWidth,C=n.ratio;if(!A)return!1;var k=t.props,B=k.throttleScale,z=k.parentMoveable,q=y;!y[0]&&!y[1]&&(q=[1,1]);var V=C&&(r??k.keepRatio)||!1,W=t.state,Y=[M[0],M[1]];function Z(){var it=CU(q,V,n,e),gt=it.distWidth,$t=it.distHeight,He=w?(w+gt)/w:1,Ct=b?(b+$t)/b:1;M[0]||(Y[0]=gt/w),M[1]||(Y[1]=$t/b);var Xe=(q[0]||V?He:1)*Y[0],tn=(q[1]||V?Ct:1)*Y[1];return Xe===0&&(Xe=Yc(v[0])*d2),tn===0&&(tn=Yc(v[1])*d2),[Xe,tn]}var j=Z();if(!o&&t.props.groupable){var K=W.snapRenderInfo||{},re=K.direction;Xu(re)&&(re[0]||re[1])&&(W.snapRenderInfo={direction:y,request:e.isRequest})}$r(t,"onBeforeScale",sa(t,e,{scale:j,setFixedDirection:function(it){return n.setFixedDirection(it),j=Z(),j},startFixedDirection:n.startFixedDirection,setScale:function(it){j=it}},!0));var ie=[j[0]/Y[0],j[1]/Y[1]],se=l,de=[0,0],ue=Yc(ie[0]*ie[1]),Te=!l&&!i&&o;if(Te||f?se=zR(t,n.targetAllTransform,[0,0],[0,0],n):l||(se=n.fixedPosition),o||(de=bJ(t,ie,y,!h&&a,n)),V){q[0]&&q[1]&&de[0]&&de[1]&&(Math.abs(de[0]*w)>Math.abs(de[1]*b)?de[1]=0:de[0]=0);var pe=!de[0]&&!de[1];if(pe&&(P?ie[0]=Qi(ie[0]*Y[0],B)/Y[0]:ie[1]=Qi(ie[1]*Y[1],B)/Y[1]),q[0]&&!q[1]||de[0]&&!de[1]||pe&&P){ie[0]+=de[0];var De=w*ie[0]*Y[0]/C;ie[1]=Yc(ue*ie[0])*gr(De/b/Y[1])}else if(!q[0]&&q[1]||!de[0]&&de[1]||pe&&!P){ie[1]+=de[1];var me=b*ie[1]*Y[1]*C;ie[0]=Yc(ue*ie[1])*gr(me/w/Y[0])}}else ie[0]+=de[0],ie[1]+=de[1],de[0]||(ie[0]=Qi(ie[0]*Y[0],B)/Y[0]),de[1]||(ie[1]=Qi(ie[1]*Y[1],B)/Y[1]);ie[0]===0&&(ie[0]=Yc(v[0])*d2),ie[1]===0&&(ie[1]=Yc(v[1])*d2),j=EJ(ie,[Y[0],Y[1]]);var Me=[w,b],fe=[w*j[0],b*j[1]];fe=w8(fe,n.minScaleSize,n.maxScaleSize,V?C:!1),j=LT(2,function(it){return Me[it]?fe[it]/Me[it]:fe[it]}),ie=LT(2,function(it){return j[it]/Y[it]});var ve=LT(2,function(it){return v[it]?ie[it]/v[it]:ie[it]}),le="scale(".concat(ie.join(", "),")"),ye="scale(".concat(j.join(", "),")"),Se=WS(n,ye,le),Be=!M[0]||!M[1],Ve=bK(t,Be?ye:le,n.fixedDirection,se,n.fixedOffset,n,Be),tt=Te?Ve:Ei(Ve,n.prevInverseDist||[0,0]);if(n.prevDist=ie,n.prevInverseDist=Ve,j[0]===v[0]&&j[1]===v[1]&&tt.every(function(it){return!it})&&!z&&!Te)return!1;var ht=sa(t,e,Qt({offsetWidth:w,offsetHeight:b,direction:y,scale:j,dist:ie,delta:ve,isPinch:!!o},q8(t,Se,tt,o,e)));return $r(t,"onScale",ht),ht},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=$h(t,e,{});return $r(t,"onScaleEnd",r),r},dragGroupControlCondition:M4,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=od(t,"resizable",e);n.moveableScale=t.scale;var o=Yp(t,this,"dragControlStart",e,function(f,v){return Xw(t,f,n,v)}),l=function(f){r.setFixedDirection(f),o.forEach(function(v,y){v.setFixedDirection(f),Xw(t,v.moveable,n,i[y])})};n.setFixedDirection=l;var a=Qt(Qt({},r),{targets:t.props.targets,events:o,setFixedDirection:l}),h=$r(t,"onScaleGroupStart",a);return n.isScale=h!==!1,n.isScale?a:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){eE(t,"onBeforeScale",function(v){$r(t,"onBeforeScaleGroup",sa(t,e,Qt(Qt({},v),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,o=n.moveableScale;t.scale=[i[0]*o[0],i[1]*o[1]];var l=t.props.keepRatio,a=n.fixedPosition,h=Yp(t,this,"dragControl",e,function(v,y){var w=rn(Oc(ox(t.rotation/180*Math.PI,3),[y.datas.originalX*i[0],y.datas.originalY*i[1],1],3),2),b=w[0],A=w[1];return Qt(Qt({},y),{parentDist:null,parentScale:i,parentKeepRatio:l,dragClient:to(a,[b,A])})}),f=Qt({targets:t.props.targets,events:h},r);return $r(t,"onScaleGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=Yp(t,this,"dragControlEnd",e),o=$h(t,e,{targets:t.props.targets,events:i});return $r(t,"onScaleGroupEnd",o),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Fm(t,e){return t.map(function(n,r){return qw(n,e[r],1,2)})}function A4(t,e,n){var r=jl(t,e),i=jl(t,n),o=i-r;return o>=0?o:o+2*Math.PI}function qJ(t,e){var n=A4(t[0],t[1],t[2]),r=A4(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var HJ={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:ZR("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable,l=n.zoom;if(r||i||!o)return[];var a=t.state,h=a.pos1,f=a.pos2,v=a.pos3,y=a.pos4,w=Fm(h,f),b=Fm(f,h),A=Fm(h,v),M=Fm(v,h),P=Fm(v,y),C=Fm(y,v),k=Fm(f,y),B=Fm(y,f);return Tr([e.createElement("div",{className:xi("line"),key:"middeLine1",style:eb(w,P,l)}),e.createElement("div",{className:xi("line"),key:"middeLine2",style:eb(b,C,l)}),e.createElement("div",{className:xi("line"),key:"middeLine3",style:eb(A,k,l)}),e.createElement("div",{className:xi("line"),key:"middeLine4",style:eb(M,B,l)})],rn(K8(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Su(n,xi("direction"))&&Su(n,xi("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,o=r.target,l=SU(o,n);if(!l||!i)return!1;var a=t.state,h=a.transformOrigin,f=a.is3d,v=a.targetTransform,y=a.targetMatrix,w=a.width,b=a.height,A=a.left,M=a.top;n.datas={},n.targetTransform=v,n.warpTargetMatrix=f?y:cd(y,3,4),n.targetInverseMatrix=M8(cp(n.warpTargetMatrix,4),3,4),n.direction=l,n.left=A,n.top=M,n.poses=[[0,0],[w,0],[0,b],[w,b]].map(function(k){return Ei(k,h)}),n.nextPoses=n.poses.map(function(k){var B=rn(k,2),z=B[0],q=B[1];return Oc(n.warpTargetMatrix,[z,q,0,1],4)}),n.startValue=bs(4),n.prevMatrix=bs(4),n.absolutePoses=Tf(a),n.posIndexes=G8(l),G0(t,e),ZS(t,e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:l};var P=sa(t,e,Qt({set:function(k){n.startValue=k}},XS(t,e))),C=$r(t,"onWarpStart",P);return C!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,o=e.distY,l=n.targetInverseMatrix,a=n.prevMatrix,h=n.isWarp,f=n.startValue,v=n.poses,y=n.posIndexes,w=n.absolutePoses;if(!h)return!1;if($S(t,e,"matrix3d"),P_(t,"warpable")){var b=y.map(function(Z){return w[Z]});b.length>1&&b.push([(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]);var A=JS(t,r,{horizontal:b.map(function(Z){return Z[1]+o}),vertical:b.map(function(Z){return Z[0]+i})}),M=A.horizontal,P=A.vertical;o-=M.offset,i-=P.offset}var C=fp({datas:n,distX:i,distY:o},!0),k=n.nextPoses.slice();if(y.forEach(function(Z){k[Z]=to(k[Z],C)}),!uK.every(function(Z){return qJ(Z.map(function(j){return v[j]}),Z.map(function(j){return k[j]}))}))return!1;var B=DR(v[0],v[2],v[1],v[3],k[0],k[2],k[1],k[3]);if(!B.length)return!1;var z=Uo(l,B,4),q=j8(n,z,!0),V=Uo(cp(a,4),q,4);n.prevMatrix=q;var W=Uo(f,q,4),Y=WS(n,"matrix3d(".concat(W.join(", "),")"),"matrix3d(".concat(q.join(", "),")"));return BR(e,Y),$r(t,"onWarp",sa(t,e,Qt({delta:V,matrix:W,dist:q,multiply:Uo,transform:Y},Jc({transform:Y},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,$r(t,"onWarpEnd",$h(t,e,{})),r):!1}},$J=xi("area-pieces"),_2=xi("area-piece"),DU=xi("avoid"),WJ=xi("view-dragging");function IT(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;E8(e,DU),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function C4(t){return t.createElement("div",{key:"area_pieces",className:$J},t.createElement("div",{className:_2}),t.createElement("div",{className:_2}),t.createElement("div",{className:_2}),t.createElement("div",{className:_2}))}var LU={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,l=n.passDragArea,a=t.getState(),h=a.width,f=a.height,v=a.renderPoses,y=l?xi("area","pass"):xi("area");if(o)return[e.createElement("div",{key:"area",ref:E0(t,"areaElement"),className:y}),C4(e)];if(!r||!i)return[];var w=DR([0,0],[h,0],[0,f],[h,f],v[0],v[1],v[2],v[3]),b=w.length?QS(w,!0):"none";return[e.createElement("div",{key:"area",ref:E0(t,"areaElement"),className:y,style:{top:"0px",left:"0px",width:"".concat(h,"px"),height:"".concat(f,"px"),transformOrigin:"0 0",transform:b}}),C4(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=e.inputEvent;if(!o)return!1;n.isDragArea=!1;var l=t.areaElement,a=t.state,h=a.moveableClientRect,f=a.renderPoses,v=a.rootMatrix,y=a.is3d,w=h.left,b=h.top,A=Sf(f),M=A.left,P=A.top,C=A.width,k=A.height,B=y?4:3,z=rn(h_(v,[r-w,i-b],B),2),q=z[0],V=z[1];q-=M,V-=P;var W=[{left:M,top:P,width:C,height:V-10},{left:M,top:P,width:q-10,height:k},{left:M,top:P+V+10,width:C,height:k-V-10},{left:M+q+10,top:P,width:C-q-10,height:k}],Y=[].slice.call(l.nextElementSibling.children);W.forEach(function(Z,j){Y[j].style.cssText="left: ".concat(Z.left,"px;top: ").concat(Z.top,"px; width: ").concat(Z.width,"px; height: ").concat(Z.height,"px;")}),S8(l,DU),a.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,IT(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||IT(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){IT(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&x8(function(){e.disableNativeEvent=!1})}},XJ=lx("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,o=n.groupable,l=t.getState(),a=l.beforeOrigin,h=l.rotation,f=l.svg,v=l.allMatrix,y=l.is3d,w=l.left,b=l.top,A=l.offsetWidth,M=l.offsetHeight,P;if(!o&&f&&i){var C=rn(JR(i,A,M),2),k=C[0],B=C[1],z=y?4:3,q=Js(v,[k,B],z);P=Jw(h,r,Ei(q,[w,b]))}else P=Jw(h,r,a);return[e.createElement("div",{className:xi("control","origin"),style:P,key:"beforeOrigin"})]}});function ZJ(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var YJ={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,o=n.scrollOptions,l=new CY,a=op(i,!0);e.datas.dragScroll=l,t.state.dragScroll=l;var h=e.isControl?"controlGesto":"targetGesto",f=e.targets;l.on("scroll",function(v){var y=v.container,w=v.direction,b=sa(t,e,{scrollContainer:y,direction:w}),A=f?"onScrollGroup":"onScroll";f&&(b.targets=f),$r(t,A,b)}).on("move",function(v){var y=v.offsetX,w=v.offsetY,b=v.inputEvent;t[h].scrollBy(y,w,b.inputEvent,!1)}).on("scrollDrag",function(v){var y=v.next;y(t[h].getCurrentEvent())}),l.dragStart(e,Qt({container:a},o))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,o=i===void 0?t.getContainer():i,l=r.scrollThreshold,a=l===void 0?0:l,h=r.scrollThrottleTime,f=h===void 0?0:h,v=r.getScrollPosition,y=v===void 0?ZJ:v,w=r.scrollOptions;return n.drag(e,Qt({container:o,threshold:a,throttleTime:f,getScrollPosition:function(b){return y({scrollContainer:b.container,direction:b.direction})}},w)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Qt(Qt({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Qt(Qt({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Qt(Qt({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Qt(Qt({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Qt(Qt({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,Qt(Qt({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Qt(Qt({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},IU={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},KJ=lx("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=RU(n.padding||{}),i=r.left,o=r.top,l=r.right,a=r.bottom,h=t.getState(),f=h.renderPoses,v=h.pos1,y=h.pos2,w=h.pos3,b=h.pos4,A=[v,y,w,b],M=[];return i>0&&M.push([0,2]),o>0&&M.push([0,1]),l>0&&M.push([1,3]),a>0&&M.push([2,3]),M.map(function(P,C){var k=rn(P,2),B=k[0],z=k[1],q=A[B],V=A[z],W=f[B],Y=f[z],Z=DR([0,0],[100,0],[0,100],[100,100],q,V,W,Y);if(Z.length)return e.createElement("div",{key:"padding".concat(C),className:xi("padding"),style:{transform:QS(Z,!0)}})})}}),P4=["nw","ne","se","sw"];function b2(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var JJ=[1,2,5,6],QJ=[0,3,4,7],p0=[1,-1,-1,1],m0=[1,1,-1,-1];function QR(t,e,n,r,i,o,l,a){i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=n),a===void 0&&(a=r);var h=[],f=!1,v=t.filter(function(w){return!w.virtual}),y=v.map(function(w){var b=w.horizontal,A=w.vertical,M=w.pos;if(A&&!f&&(f=!0,h.push("/")),f){var P=Math.max(0,A===1?M[1]-o:a-M[1]);return h.push(td(P,r,e)),P}else{var P=Math.max(0,b===1?M[0]-i:l-M[0]);return h.push(td(P,n,e)),P}});return{radiusPoses:v,styles:h,raws:y}}function OU(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),o.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function NU(t,e,n,r,i,o,l){var a,h,f,v;o===void 0&&(o=[0,0]),l===void 0&&(l=!1);var y=t.indexOf("/"),w=(y>-1?t.slice(0,y):t).length,b=t.slice(0,w),A=t.slice(w+1),M=b.length,P=A.length,C=P>0,k=rn(b,4),B=k[0],z=B===void 0?"0px":B,q=k[1],V=q===void 0?z:q,W=k[2],Y=W===void 0?z:W,Z=k[3],j=Z===void 0?V:Z,K=rn(A,4),re=K[0],ie=re===void 0?z:re,se=K[1],de=se===void 0?C?ie:V:se,ue=K[2],Te=ue===void 0?C?ie:Y:ue,pe=K[3],De=pe===void 0?C?de:j:pe,me=[z,V,Y,j].map(function(Se){return Bo(Se,e)}),Me=[ie,de,Te,De].map(function(Se){return Bo(Se,n)}),fe=me.slice(),ve=Me.slice();a=rn(b2([fe[0],fe[1]],e),2),fe[0]=a[0],fe[1]=a[1],h=rn(b2([fe[3],fe[2]],e),2),fe[3]=h[0],fe[2]=h[1],f=rn(b2([ve[0],ve[3]],n),2),ve[0]=f[0],ve[3]=f[1],v=rn(b2([ve[1],ve[2]],n),2),ve[1]=v[0],ve[2]=v[1];var le=l?fe:fe.slice(0,Math.max(o[0],M)),ye=l?ve:ve.slice(0,Math.max(o[1],P));return Tr(Tr([],rn(le.map(function(Se,Be){var Ve=P4[Be];return{virtual:Be>=M,horizontal:p0[Be],vertical:0,pos:[r+Se,i+(m0[Be]===-1?n:0)],sub:!0,raw:me[Be],direction:Ve}})),!1),rn(ye.map(function(Se,Be){var Ve=P4[Be];return{virtual:Be>=P,horizontal:0,vertical:m0[Be],pos:[r+(p0[Be]===-1?e:0),i+Se],sub:!0,raw:Me[Be],direction:Ve}})),!1)}function eQ(t,e,n,r,i){i===void 0&&(i=e.length);var o=OU(t.slice(r)),l=o.horizontalRange,a=o.verticalRange,h=n-r,f=0;if(h===0)f=i;else if(h>0&&h<l[1])f=l[1]-h;else if(h>=a[0])f=a[0]+a[1]-h;else return;t.splice(n,f),e.splice(n,f)}function tQ(t,e,n,r,i,o,l,a,h,f,v){f===void 0&&(f=0),v===void 0&&(v=0);var y=OU(t.slice(n)),w=y.horizontalRange,b=y.verticalRange;if(r>-1)for(var A=p0[r]===1?o-f:a-o,M=w[1];M<=r;++M){var P=m0[M]===1?v:h,C=0;if(r===M?C=o:M===0?C=f+A:p0[M]===-1&&(C=a-(e[n][0]-f)),t.splice(n+M,0,{horizontal:p0[M],vertical:0,pos:[C,P]}),e.splice(n+M,0,[C,P]),M===0)break}else if(i>-1){var k=m0[i]===1?l-v:h-l;if(w[1]===0&&b[1]===0){var B=[f+k,v];t.push({horizontal:p0[0],vertical:0,pos:B}),e.push(B)}for(var z=b[0],M=b[1];M<=i;++M){var C=p0[M]===1?f:a,P=0;if(i===M?P=l:M===0?P=v+k:m0[M]===1?P=e[n+z][1]:m0[M]===-1&&(P=h-(e[n+z][1]-v)),t.push({horizontal:0,vertical:m0[M],pos:[C,P]}),e.push([C,P]),M===0)break}}}function nQ(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,o){return i.horizontal?e[o]:null}).filter(function(i){return i!=null}),r=t.map(function(i,o){return i.vertical?e[o]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var rQ=[[0,-1,"n"],[1,0,"e"]],iQ=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function eD(t,e,n){var r=t.props.clipRelative,i=t.state,o=i.width,l=i.height,a=e,h=a.type,f=a.poses,v=h==="rect",y=h==="circle";if(h==="polygon")return n.map(function(V){return"".concat(td(V[0],o,r)," ").concat(td(V[1],l,r))});if(v||h==="inset"){var w=n[1][1],b=n[3][0],A=n[7][0],M=n[5][1];if(v)return[w,b,M,A].map(function(V){return"".concat(V,"px")});var P=[w,o-b,l-M,A].map(function(V,W){return td(V,W%2?o:l,r)});if(n.length>8){var C=rn(Ei(n[4],n[0]),2),k=C[0],B=C[1];P.push.apply(P,Tr(["round"],rn(QR(f.slice(8).map(function(V,W){return Qt(Qt({},V),{pos:n[W]})}),r,k,B,A,w,b,M).styles),!1))}return P}else if(y||h==="ellipse"){var z=n[0],q=td(gr(n[1][1]-z[1]),y?Math.sqrt((o*o+l*l)/2):l,r),P=y?[q]:[td(gr(n[2][0]-z[0]),o,r),q];return P.push("at",td(z[0],o,r),td(z[1],l,r)),P}}function eS(t,e,n,r){var i=[r,(r+e)/2,e],o=[t,(t+n)/2,n];return iQ.map(function(l){var a=rn(l,3),h=a[0],f=a[1],v=a[2],y=i[h+1],w=o[f+1];return{vertical:gr(f),horizontal:gr(h),direction:v,pos:[y,w]}})}function kU(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[gr(e[1]-e[0]),gr(n[1]-n[0])]}function R4(t,e,n,r,i){var o,l,a,h,f,v,y,w,b;if(t){var A=i;if(!A){var M=_h(t),P=M("clipPath");A=P!=="none"?P:M("clip")}if(!((!A||A==="none"||A==="auto")&&(A=r,!A))){var C=b8(A),k=C.prefix,B=k===void 0?A:k,z=C.value,q=z===void 0?"":z,V=B==="circle",W=" ";if(B==="polygon"){var Y=_0(q||"0% 0%, 100% 0%, 100% 100%, 0% 100%");W=",";var Z=Y.map(function($e){var Ee=rn($e.split(" "),2),_t=Ee[0],jt=Ee[1];return{vertical:1,horizontal:1,pos:[Bo(_t,e),Bo(jt,n)]}}),j=R0(Z.map(function($e){return $e.pos}));return{type:B,clipText:A,poses:Z,splitter:W,left:j.minX,right:j.maxX,top:j.minY,bottom:j.maxY}}else if(V||B==="ellipse"){var K="",re="",ie=0,se=0,Y=ug(q);if(V){var de="";o=rn(Y,4),l=o[0],de=l===void 0?"50%":l,a=o[2],K=a===void 0?"50%":a,h=o[3],re=h===void 0?"50%":h,ie=Bo(de,Math.sqrt((e*e+n*n)/2)),se=ie}else{var ue="",Te="";f=rn(Y,5),v=f[0],ue=v===void 0?"50%":v,y=f[1],Te=y===void 0?"50%":y,w=f[3],K=w===void 0?"50%":w,b=f[4],re=b===void 0?"50%":b,ie=Bo(ue,e),se=Bo(Te,n)}var pe=[Bo(K,e),Bo(re,n)],Z=Tr([{vertical:1,horizontal:1,pos:pe,direction:"nesw"}],rn(rQ.slice(0,V?1:2).map(function(_t){return{vertical:gr(_t[1]),horizontal:_t[0],direction:_t[2],sub:!0,pos:[pe[0]+_t[0]*ie,pe[1]+_t[1]*se]}})),!1);return{type:B,clipText:A,radiusX:ie,radiusY:se,left:pe[0]-ie,top:pe[1]-se,right:pe[0]+ie,bottom:pe[1]+se,poses:Z,splitter:W}}else if(B==="inset"){var Y=ug(q||"0 0 0 0"),De=Y.indexOf("round"),me=(De>-1?Y.slice(0,De):Y).length,Me=Y.slice(me+1),fe=rn(Y.slice(0,me),4),ve=fe[0],le=fe[1],ye=le===void 0?ve:le,Se=fe[2],Be=Se===void 0?ve:Se,Ve=fe[3],tt=Ve===void 0?ye:Ve,ht=rn([ve,Be].map(function(_t){return Bo(_t,n)}),2),it=ht[0],gt=ht[1],$t=rn([tt,ye].map(function(_t){return Bo(_t,e)}),2),He=$t[0],Ct=$t[1],Xe=e-Ct,tn=n-gt,Kt=NU(Me,Xe-He,tn-it,He,it),Z=Tr(Tr([],rn(eS(it,Xe,tn,He)),!1),rn(Kt),!1);return{type:"inset",clipText:A,poses:Z,top:it,left:He,right:Xe,bottom:tn,radius:Me,splitter:W}}else if(B==="rect"){var Y=_0(q||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));W=",";var Jt=rn(Y.map(function(Pt){var vn=ix(Pt).value;return vn}),4),Ht=Jt[0],Ct=Jt[1],gt=Jt[2],He=Jt[3],Z=eS(Ht,Ct,gt,He);return{type:"rect",clipText:A,poses:Z,top:Ht,right:Ct,bottom:gt,left:He,values:Y,splitter:W}}}}}function aQ(t,e,n,r,i){var o=t[e],l=o.direction,a=o.sub,h=t.map(function(){return[0,0]}),f=l?l.split(""):[];if(r&&e<8){var v=f.filter(function(ie){return ie==="w"||ie==="e"}),y=f.filter(function(ie){return ie==="n"||ie==="s"}),w=v[0],b=y[0];h[e]=n;var A=rn(kU(t),2),M=A[0],P=A[1],C=M&&P?M/P:0;if(C&&i){var k=(e+4)%8,B=t[k].pos,z=[0,0];l.indexOf("w")>-1?z[0]=-1:l.indexOf("e")>-1&&(z[0]=1),l.indexOf("n")>-1?z[1]=-1:l.indexOf("s")>-1&&(z[1]=1);var q=AU([M,P],n,C,z,!0),V=M+q[0],W=P+q[1],Y=B[1],Z=B[1],j=B[0],K=B[0];z[0]===-1?j=K-V:z[0]===1?K=j+V:(j=j-V/2,K=K+V/2),z[1]===-1?Y=Z-W:(z[1]===1||(Y=Z-W/2),Z=Y+W);var re=eS(Y,K,Z,j);t.forEach(function(ie,se){h[se][0]=re[se].pos[0]-ie.pos[0],h[se][1]=re[se].pos[1]-ie.pos[1]})}else t.forEach(function(ie,se){var de=ie.direction;de&&(de.indexOf(w)>-1&&(h[se][0]=n[0]),de.indexOf(b)>-1&&(h[se][1]=n[1]))}),w&&(h[1][0]=n[0]/2,h[5][0]=n[0]/2),b&&(h[3][1]=n[1]/2,h[7][1]=n[1]/2)}else l&&!a?f.forEach(function(ie){var se=ie==="n"||ie==="s";t.forEach(function(de,ue){var Te=de.direction,pe=de.horizontal,De=de.vertical;!Te||Te.indexOf(ie)===-1||(h[ue]=[se||!pe?0:n[0],!se||!De?0:n[1]])})}):h[e]=n;return h}function oQ(t,e){var n=rn(U8(t,e),2),r=n[0],i=n[1],o=e.datas,l=o.clipPath,a=o.clipIndex,h=l,f=h.type,v=h.poses,y=h.splitter,w=v.map(function(k){return k.pos});if(f==="polygon")w.splice(a,0,[r,i]);else if(f==="inset"){var b=JJ.indexOf(a),A=QJ.indexOf(a),M=v.length;if(tQ(v,w,8,b,A,r,i,w[4][0],w[4][1],w[0][0],w[0][1]),M===v.length)return}else return;var P=eD(t,l,w),C="".concat(f,"(").concat(P.join(y),")");$r(t,"onClip",sa(t,e,Qt({clipEventType:"added",clipType:f,poses:w,clipStyles:P,clipStyle:C,distX:0,distY:0},Jc({clipPath:C},e))))}function sQ(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,o=r,l=o.type,a=o.poses,h=o.splitter,f=a.map(function(b){return b.pos}),v=f.length;if(l==="polygon")a.splice(i,1),f.splice(i,1);else if(l==="inset"){if(i<8||(eQ(a,f,i,8,v),v===a.length))return}else return;var y=eD(t,r,f),w="".concat(l,"(").concat(y.join(h),")");$r(t,"onClip",sa(t,e,Qt({clipEventType:"removed",clipType:l,poses:f,clipStyles:y,clipStyle:w,distX:0,distY:0},Jc({clipPath:w},e))))}var lQ={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,o=n.clipArea,l=n.zoom,a=n.groupable,h=t.getState(),f=h.target,v=h.width,y=h.height,w=h.allMatrix,b=h.is3d,A=h.left,M=h.top,P=h.pos1,C=h.pos2,k=h.pos3,B=h.pos4,z=h.clipPathState,q=h.snapBoundInfos,V=h.rotation;if(!f||a)return[];var W=R4(f,v,y,i||"inset",z||r);if(!W)return[];var Y=b?4:3,Z=W.type,j=W.poses,K=j.map(function(Ct){var Xe=Js(w,Ct.pos,Y);return[Xe[0]-A,Xe[1]-M]}),re=[],ie=[],se=Z==="rect",de=Z==="inset",ue=Z==="polygon";if(se||de||ue){var Te=de?K.slice(0,8):K;ie=Te.map(function(Ct,Xe){var tn=Xe===0?Te[Te.length-1]:Te[Xe-1],Kt=jl(tn,Ct),Jt=yU(tn,Ct);return e.createElement("div",{key:"clipLine".concat(Xe),className:xi("line","clip-line","snap-control"),"data-clip-index":Xe,style:{width:"".concat(Jt,"px"),transform:"translate(".concat(tn[0],"px, ").concat(tn[1],"px) rotate(").concat(Kt,"rad) scaleY(").concat(l,")")}})})}if(re=K.map(function(Ct,Xe){return e.createElement("div",{key:"clipControl".concat(Xe),className:xi("control","clip-control","snap-control"),"data-clip-index":Xe,style:{transform:"translate(".concat(Ct[0],"px, ").concat(Ct[1],"px) rotate(").concat(V,"rad) scale(").concat(l,")")}})}),de&&re.push.apply(re,Tr([],rn(K.slice(8).map(function(Ct,Xe){return e.createElement("div",{key:"clipRadiusControl".concat(Xe),className:xi("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Xe,style:{transform:"translate(".concat(Ct[0],"px, ").concat(Ct[1],"px) rotate(").concat(V,"rad) scale(").concat(l,")")}})})),!1)),Z==="circle"||Z==="ellipse"){var pe=W.left,De=W.top,me=W.radiusX,Me=W.radiusY,fe=rn(Ei(Js(w,[pe,De],Y),Js(w,[0,0],Y)),2),ve=fe[0],le=fe[1],ye="none";if(!o){for(var Se=Math.max(10,me/5,Me/5),Be=[],Ve=0;Ve<=Se;++Ve){var tt=Math.PI*2/Se*Ve;Be.push([me+(me-l)*Math.cos(tt),Me+(Me-l)*Math.sin(tt)])}Be.push([me,-2]),Be.push([-2,-2]),Be.push([-2,Me*2+2]),Be.push([me*2+2,Me*2+2]),Be.push([me*2+2,-2]),Be.push([me,-2]),ye="polygon(".concat(Be.map(function(Ct){return"".concat(Ct[0],"px ").concat(Ct[1],"px")}).join(", "),")")}re.push(e.createElement("div",{key:"clipEllipse",className:xi("clip-ellipse","snap-control"),style:{width:"".concat(me*2,"px"),height:"".concat(Me*2,"px"),clipPath:ye,transform:"translate(".concat(-A+ve,"px, ").concat(-M+le,"px) ").concat(QS(w))}}))}if(o){var ht=Sf(Tr([P,C,k,B],rn(K),!1)),it=ht.width,gt=ht.height,$t=ht.left,He=ht.top;if(ue||se||de){var Be=de?K.slice(0,8):K;re.push(e.createElement("div",{key:"clipArea",className:xi("clip-area","snap-control"),style:{width:"".concat(it,"px"),height:"".concat(gt,"px"),transform:"translate(".concat($t,"px, ").concat(He,"px)"),clipPath:"polygon(".concat(Be.map(function(Xe){return"".concat(Xe[0]-$t,"px ").concat(Xe[1]-He,"px")}).join(", "),")")}}))}}return q&&["vertical","horizontal"].forEach(function(Ct){var Xe=q[Ct],tn=Ct==="horizontal";Xe.isSnap&&ie.push.apply(ie,Tr([],rn(Xe.snap.posInfos.map(function(Kt,Jt){var Ht=Kt.pos,$e=Ei(Js(w,tn?[0,Ht]:[Ht,0],Y),[A,M]),Ee=Ei(Js(w,tn?[v,Ht]:[Ht,y],Y),[A,M]);return zb(e,"",$e,Ee,l,"clip".concat(Ct,"snap").concat(Jt),"guideline")})),!1)),Xe.isBound&&ie.push.apply(ie,Tr([],rn(Xe.bounds.map(function(Kt,Jt){var Ht=Kt.pos,$e=Ei(Js(w,tn?[0,Ht]:[Ht,0],Y),[A,M]),Ee=Ei(Js(w,tn?[v,Ht]:[Ht,y],Y),[A,M]);return zb(e,"",$e,Ee,l,"clip".concat(Ct,"bounds").concat(Jt),"guideline","bounds","bold")})),!1))}),Tr(Tr([],rn(re),!1),rn(ie),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,Qt(Qt({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,l=n.target,a=n.width,h=n.height,f=e.inputEvent?e.inputEvent.target:null,v=f&&f.getAttribute("class")||"",y=e.datas,w=R4(l,a,h,i||"inset",o);if(!w)return!1;var b=w.clipText,A=w.type,M=w.poses,P=$r(t,"onClipStart",sa(t,e,{clipType:A,clipStyle:b,poses:M.map(function(C){return C.pos})}));return P===!1?(y.isClipStart=!1,!1):(y.isControl=v&&v.indexOf("clip-control")>-1,y.isLine=v.indexOf("clip-line")>-1,y.isArea=v.indexOf("clip-area")>-1||v.indexOf("clip-ellipse")>-1,y.clipIndex=f?parseInt(f.getAttribute("data-clip-index"),10):-1,y.clipPath=w,y.isClipStart=!0,n.clipPathState=b,G0(t,e),!0)},dragControl:function(t,e){var n,r,i,o=e.datas,l=e.originalDatas,a=e.isDragTarget;if(!o.isClipStart)return!1;var h=o,f=h.isControl,v=h.isLine,y=h.isArea,w=h.clipIndex,b=h.clipPath;if(!b)return!1;var A=D0(t.props,"clippable"),M=A.keepRatio,P=0,C=0,k=l.draggable,B=fp(e);a&&k?(n=rn(k.prevBeforeDist,2),P=n[0],C=n[1]):(r=rn(B,2),P=r[0],C=r[1]);var z=[P,C],q=t.state,V=q.width,W=q.height,Y=!y&&!f&&!v,Z=b.type,j=b.poses,K=b.splitter,re=j.map(function(Qe){return Qe.pos});Y&&(P=-P,C=-C);var ie=!f||j[w].direction==="nesw",se=Z==="inset"||Z==="rect",de=j.map(function(){return[0,0]});if(f&&!ie){var ue=j[w],Te=ue.horizontal,pe=ue.vertical,De=[P*gr(Te),C*gr(pe)];de=aQ(j,w,De,se,M)}else ie&&(de=re.map(function(){return[P,C]}));var me=re.map(function(Qe,et){return to(Qe,de[et])}),Me=Tr([],rn(me),!1);q.snapBoundInfos=null;var fe=b.type==="circle",ve=b.type==="ellipse";if(fe||ve){var le=Sf(me),ye=gr(le.bottom-le.top),Se=gr(ve?le.right-le.left:ye),Be=me[0][1]+ye,Ve=me[0][0]-Se,tt=me[0][0]+Se;fe&&(Me.push([tt,le.bottom]),de.push([1,0])),Me.push([le.left,Be]),de.push([0,1]),Me.push([Ve,le.bottom]),de.push([1,0])}var ht=fU((A.clipHorizontalGuidelines||[]).map(function(Qe){return Bo("".concat(Qe),W)}),(A.clipVerticalGuidelines||[]).map(function(Qe){return Bo("".concat(Qe),V)}),V,W),it=[],gt=[];if(fe||ve)it=[Me[4][0],Me[2][0]],gt=[Me[1][1],Me[3][1]];else if(se){var $t=[Me[0],Me[2],Me[4],Me[6]],He=[de[0],de[2],de[4],de[6]];it=$t.filter(function(Qe,et){return He[et][0]}).map(function(Qe){return Qe[0]}),gt=$t.filter(function(Qe,et){return He[et][1]}).map(function(Qe){return Qe[1]})}else it=Me.filter(function(Qe,et){return de[et][0]}).map(function(Qe){return Qe[0]}),gt=Me.filter(function(Qe,et){return de[et][1]}).map(function(Qe){return Qe[1]});var Ct=[0,0],Xe=p4(ht,A.clipTargetBounds&&{left:0,top:0,right:V,bottom:W},it,gt,5,5),tn=Xe.horizontal,Kt=Xe.vertical,Jt=tn.offset,Ht=Kt.offset;if(tn.isBound&&(Ct[1]+=Jt),Kt.isBound&&(Ct[0]+=Ht),(ve||fe)&&de[0][0]===0&&de[0][1]===0){var le=Sf(me),$e=le.bottom-le.top,Ee=ve?le.right-le.left:$e,_t=Kt.isBound?gr(Ht):Kt.snapIndex===0?-Ht:Ht,jt=tn.isBound?gr(Jt):tn.snapIndex===0?-Jt:Jt;Ee-=_t,$e-=jt,fe&&($e=iU(Kt,tn)>0?$e:Ee,Ee=$e);var vt=Me[0];Me[1][1]=vt[1]-$e,Me[2][0]=vt[0]+Ee,Me[3][1]=vt[1]+$e,Me[4][0]=vt[0]-Ee}else if(se&&M&&f){var Pt=rn(kU(j),2),vn=Pt[0],hn=Pt[1],pn=vn&&hn?vn/hn:0,nn=j[w],Ft=nn.direction||"",In=Me[1][1],Be=Me[5][1],Ve=Me[7][0],tt=Me[3][0];gr(Jt)<=gr(Ht)?Jt=Yc(Jt)*gr(Ht)/pn:Ht=Yc(Ht)*gr(Jt)*pn,Ft.indexOf("w")>-1?Ve-=Ht:Ft.indexOf("e")>-1?tt-=Ht:(Ve+=Ht/2,tt-=Ht/2),Ft.indexOf("n")>-1?In-=Jt:Ft.indexOf("s")>-1?Be-=Jt:(In+=Jt/2,Be-=Jt/2);var Pn=eS(In,tt,Be,Ve);Me.forEach(function(lt,xt){var Dt;Dt=rn(Pn[xt].pos,2),lt[0]=Dt[0],lt[1]=Dt[1]})}else Me.forEach(function(Qe,et){var ut=de[et];ut[0]&&(Qe[0]-=Ht),ut[1]&&(Qe[1]-=Jt)});var ir=eD(t,b,me),mt="".concat(Z,"(").concat(ir.join(K),")");if(q.clipPathState=mt,fe||ve)it=[Me[4][0],Me[2][0]],gt=[Me[1][1],Me[3][1]];else if(se){var $t=[Me[0],Me[2],Me[4],Me[6]];it=$t.map(function(et){return et[0]}),gt=$t.map(function(et){return et[1]})}else it=Me.map(function(Qe){return Qe[0]}),gt=Me.map(function(Qe){return Qe[1]});if(q.snapBoundInfos=p4(ht,A.clipTargetBounds&&{left:0,top:0,right:V,bottom:W},it,gt,1,1),k){var ge=q.is3d,ke=q.allMatrix,We=ge?4:3,Ce=Ct;a&&(Ce=[z[0]+Ct[0]-B[0],z[1]+Ct[1]-B[1]]),k.deltaOffset=Uo(ke,[Ce[0],Ce[1],0,0],We)}return $r(t,"onClip",sa(t,e,Qt({clipEventType:"changed",clipType:Z,poses:me,clipStyle:mt,clipStyles:ir,distX:P,distY:C},Jc((i={},i[Z==="rect"?"clip":"clipPath"]=mt,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,l=r.isClipStart,a=r.isControl;return l?($r(t,"onClipEnd",$h(t,e,{})),i&&(a?sQ(t,e):o&&oQ(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},uQ={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Su(e.inputEvent.target,xi("origin"))},dragControlStart:function(t,e){var n=e.datas;G0(t,e);var r=sa(t,e,{dragStart:Zc.dragStart(t,new l_().dragStart([0,0],e))}),i=$r(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var o=rn(fp(e),2),l=o[0],a=o[1],h=t.state,f=h.width,v=h.height,y=h.offsetMatrix,w=h.targetMatrix,b=h.is3d,A=t.props.originRelative,M=A===void 0?!0:A,P=b?4:3,C=[l,a];if(i){var k=e.distOrigin;(k[0]||k[1])&&(C=k)}var B=to(n.startOrigin,C),z=to(n.startTargetOrigin,C),q=Ei(C,n.prevOrigin),V=cx(y,w,B,P),W=t.getRect(),Y=Sf(q0(V,f,v,P)),Z=[W.left-Y.left,W.top-Y.top];n.prevOrigin=C;var j=[td(z[0],f,M),td(z[1],v,M)].join(" "),K=Zc.drag(t,ux(e,t.state,Z,!!r)),re=sa(t,e,Qt(Qt({width:f,height:v,origin:B,dist:C,delta:q,transformOrigin:j,drag:K},Jc({transformOrigin:j,transform:K.transform},e)),{afterTransform:K.transform}));return $r(t,"onDragOrigin",re),re},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?($r(t,"onDragOriginEnd",$h(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=n.transformOrigin,l=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaOrigin"in a?(l[0]+=a.deltaOrigin[0],l[1]+=a.deltaOrigin[1]):"origin"in a?(l[0]=a.origin[0]-o[0],l[1]=a.origin[1]-o[1]):("x"in a?r=a.x-n.left:"deltaX"in a&&(r+=a.deltaX),"y"in a?i=a.y-n.top:"deltaY"in a&&(i+=a.deltaY)),{datas:e,distX:r,distY:i,distOrigin:l}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function cQ(t,e,n,r){var i=t.filter(function(h){var f=h.virtual,v=h.horizontal;return v&&!f}).length,o=t.filter(function(h){var f=h.virtual,v=h.vertical;return v&&!f}).length,l=-1;if(e===0&&(i===0?l=0:i===1&&(l=1)),e===2&&(i<=2?l=2:i<=3&&(l=3)),e===3&&(o===0?l=4:o<4&&(l=7)),e===1&&(o<=1?l=5:o<=2&&(l=6)),!(l===-1||!t[l].virtual)){var a=t[l];hQ(t,l),l<4?a.pos[0]=n:a.pos[1]=r}}function hQ(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function fQ(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function D4(t,e,n,r,i){r===void 0&&(r=[0,0]);var o=[];return!t||t==="0px"?o=[]:o=ug(t),NU(o,e,n,0,0,r,i)}function L4(t,e,n,r,i){var o=t.state,l=o.width,a=o.height,h=QR(i,t.props.roundRelative,l,a),f=h.raws,v=h.styles,y=h.radiusPoses,w=nQ(y,f),b=w.horizontals,A=w.verticals,M=v.join(" ");o.borderRadiusState=M;var P=sa(t,e,Qt({horizontals:b,verticals:A,borderRadius:M,width:l,height:a,delta:r,dist:n},Jc({borderRadius:M},e)));return $r(t,"onRound",P),P}function I4(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var o=t.moveables[0],l=t.getTargets()[0];l&&((o==null?void 0:o.props.target)===l?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=XR(l).borderRadius,r.borderRadius=i))}return i}var dQ={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?xi("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,o=n.height,l=n.allMatrix,a=n.is3d,h=n.left,f=n.top,v=n.borderRadiusState,y=t.props,w=y.minRoundControls,b=w===void 0?[0,0]:w,A=y.maxRoundControls,M=A===void 0?[4,4]:A,P=y.zoom,C=y.roundPadding,k=C===void 0?0:C,B=y.isDisplayShadowRoundControls,z=y.groupable;if(!r)return null;var q=v||I4(t),V=a?4:3,W=D4(q,i,o,b,!0);if(!W)return null;var Y=0,Z=0,j=z?[0,0]:[h,f];return W.map(function(K,re){var ie=K.horizontal,se=K.vertical,de=K.direction||"",ue=Tr([],rn(K.pos),!1);Z+=Math.abs(ie),Y+=Math.abs(se),ie&&de.indexOf("n")>-1&&(ue[1]-=k),se&&de.indexOf("w")>-1&&(ue[0]-=k),ie&&de.indexOf("s")>-1&&(ue[1]+=k),se&&de.indexOf("e")>-1&&(ue[0]+=k);var Te=Ei(Js(l,ue,V),j),pe=B&&B!=="horizontal",De=K.vertical?Y<=M[1]&&(pe||!K.virtual):Z<=M[0]&&(B||!K.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(re),className:xi("control","border-radius",K.vertical?"vertical":"",K.virtual?"virtual":""),"data-radius-index":re,style:{display:De?"block":"none",transform:"translate(".concat(Te[0],"px, ").concat(Te[1],"px) scale(").concat(P,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,o=i.getAttribute("class")||"",l=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,h=l?parseInt(i.getAttribute("data-radius-index"),10):-1,f=-1;if(a){var v=i.getAttribute("data-line-key")||"";v&&(f=parseInt(v.replace(/render-line-/g,""),10),isNaN(f)&&(f=-1))}if(!l&&!a)return!1;var y=sa(t,e,{}),w=$r(t,"onRoundStart",y);if(w===!1)return!1;r.lineIndex=f,r.controlIndex=h,r.isControl=l,r.isLine=a,G0(t,e);var b=t.props,A=b.roundRelative,M=b.minRoundControls,P=M===void 0?[0,0]:M,C=t.state,k=C.width,B=C.height;r.isRound=!0,r.prevDist=[0,0];var z=I4(t),q=D4(z||"",k,B,P,!0)||[];return r.controlPoses=q,C.borderRadiusState=QR(q,A,k,B).styles.join(" "),y},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,o=rn(fp(e),2),l=o[0],a=o[1],h=[l,a],f=Ei(h,n.prevDist),v=t.props.maxRoundControls,y=v===void 0?[4,4]:v,w=t.state,b=w.width,A=w.height,M=r[i],P=M.vertical,C=M.horizontal,k=r.map(function(z){var q=z.horizontal,V=z.vertical,W=[q*C*h[0],V*P*h[1]];if(q){if(y[0]===1)return W;if(y[0]<4&&q!==C)return W}else{if(y[1]===0)return W[1]=V*C*h[0]/b*A,W;if(P){if(y[1]===1)return W;if(y[1]<4&&V!==P)return W}}return[0,0]});k[i]=h;var B=r.map(function(z,q){return Qt(Qt({},z),{pos:to(z.pos,k[q])})});return i<4?B.slice(0,i+1).forEach(function(z){z.virtual=!1}):B.slice(4,i+1).forEach(function(z){z.virtual=!1}),n.prevDist=[l,a],L4(t,e,h,f,B)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var o=r.isControl,l=r.controlIndex,a=r.isLine,h=r.lineIndex,f=r.controlPoses,v=f.filter(function(C){var k=C.virtual;return k}).length,y=t.props.roundClickable,w=y===void 0?!0:y;if(i&&w){if(o&&(w===!0||w==="control"))fQ(f,l);else if(a&&(w===!0||w==="line")){var b=rn(U8(t,e),2),A=b[0],M=b[1];cQ(f,h,A,M)}v!==f.filter(function(C){var k=C.virtual;return k}).length&&L4(t,e,[0,0],[0,0],f)}var P=$h(t,e,{});return $r(t,"onRoundEnd",P),n.borderRadiusState="",P},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,o=od(t,"roundable",e),l=Qt({targets:t.props.targets,events:o.map(function(a,h){return Qt(Qt({},a),{target:i[h],moveable:r[h],currentTarget:r[h]})})},n);return $r(t,"onRoundGroupStart",l),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,o=od(t,"roundable",e),l=Qt({targets:t.props.targets,events:o.map(function(a,h){return Qt(Qt(Qt({},a),{target:i[h],moveable:r[h],currentTarget:r[h]}),Jc({borderRadius:n.borderRadius},a))})},n);return $r(t,"onRoundGroup",l),l},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=od(t,"roundable",e);eE(t,"onRound",function(a){var h=Qt({targets:t.props.targets,events:i.map(function(f,v){return Qt(Qt(Qt({},f),{target:r[v],moveable:n[v],currentTarget:n[v]}),Jc({borderRadius:a.borderRadius},f))})},a);$r(t,"onRoundGroup",h)});var o=this.dragControlEnd(t,e);if(!o)return!1;var l=Qt({targets:t.props.targets,events:i.map(function(a,h){var f;return Qt(Qt({},a),{target:r[h],moveable:n[h],currentTarget:n[h],lastEvent:(f=a.datas)===null||f===void 0?void 0:f.lastEvent})})},o);return $r(t,"onRoundGroupEnd",l),l},unset:function(t){t.state.borderRadiusState=""}};function pQ(t,e){var n=e?4:3,r=bs(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var FU={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,o=n.inlineTransform,l=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(C8(i,!0),")"),a=!o||o==="none"?l:o;e.datas.startTransforms=pQ(a,r)?[]:ug(a)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return sa(t,e,{setTransform:function(n){e.datas.startTransforms=Xu(n)?n:ug(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return sa(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),$r(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),$r(t,"onBeforeRender",sa(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),$r(t,"onBeforeRenderEnd",sa(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=od(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(l,a){var h=i[a];return n.setTransform(h,l),n.resetStyle(l),n.fillDragStartParams(h,l)});$r(t,"onBeforeRenderGroupStart",sa(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=od(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(l,a){var h=i[a];return n.resetStyle(l),n.fillDragParams(h,l)});$r(t,"onBeforeRenderGroup",sa(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),$r(t,"onBeforeRenderGroupEnd",sa(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},BU={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){$r(t,"onRenderStart",sa(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){$r(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){$r(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){$r(t,"onRenderGroupStart",sa(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=od(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(l,a){var h=i[a];return n.fillDragParams(h,l)});$r(t,"onRenderGroup",sa(t,e,Qt(Qt({isPinch:!!e.isPinch,targets:t.props.targets,transform:p2(e),transformObject:{}},Jc(m2(e))),{events:o})))},dragGroupEnd:function(t,e){var n=this,r=od(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(l,a){var h=i[a];return n.fillDragEndParams(h,l)});$r(t,"onRenderGroupEnd",sa(t,e,Qt({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o,transformObject:{},transform:p2(e)},Jc(m2(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return s_(Ww(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),sa(t,e,Qt({isPinch:!!e.isPinch,transformObject:n,transform:p2(e)},Jc(m2(e))))},fillDragEndParams:function(t,e){var n={};return s_(Ww(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),sa(t,e,Qt({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:p2(e)},Jc(m2(e))))}};function Sb(t,e,n,r,i,o,l){o.clientDistX=o.distX,o.clientDistY=o.distY;var a=i==="Start",h=i==="End",f=i==="After",v=t.state.target,y=o.isRequest,w=r.indexOf("Control")>-1;if(!v||a&&w&&!y&&t.areaElement===o.inputEvent.target)return!1;var b=Tr([],rn(e),!1);if(y){var A=o.requestAble;b.some(function(re){return re.name===A})||b.push.apply(b,Tr([],rn(t.props.ables.filter(function(re){return re.name===A})),!1))}if(!b.length||b.every(function(re){return re.dragRelation}))return!1;var M=o.inputEvent,P;h&&M&&(P=document.elementFromPoint(o.clientX,o.clientY)||M.target);var C=!1,k=function(){var re;C=!0,(re=o.stop)===null||re===void 0||re.call(o)},B=a&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());B&&t.updateRect(i,!0,!1);var z=o.datas,q=w?"controlGesto":"targetGesto",V=t[q],W=function(re,ie,se){if(!(ie in re)||V!==t[q])return!1;var de=re.name,ue=z[de]||(z[de]={});if(a&&(ue.isEventStart=!se||!re[se]||re[se](t,o)),!ue.isEventStart)return!1;var Te=re[ie](t,Qt(Qt({},o),{stop:k,datas:ue,originalDatas:z,inputTarget:P}));return t._emitter.off(),a&&Te===!1&&(ue.isEventStart=!1),Te};B&&b.forEach(function(re){re.unset&&re.unset(t)}),W(FU,"drag".concat(r).concat(i));var Y=0,Z=0;n.forEach(function(re){if(C)return!1;var ie="".concat(re).concat(r).concat(i),se="".concat(re).concat(r,"Condition");i===""&&!y&&FJ(t.state,o);var de=b.filter(function(pe){return pe[ie]});de=de.filter(function(pe,De){return pe.name&&de.indexOf(pe)===De});var ue=de.filter(function(pe){return W(pe,ie,se)}),Te=ue.length;C&&++Y,Te&&++Z,!C&&a&&de.length&&!Te&&(Y+=de.filter(function(pe){var De=pe.name,me=z[De];return me.isEventStart?pe.dragRelation!=="strong":!1}).length?1:0)}),(!f||Z)&&W(BU,"drag".concat(r).concat(i));var j=V!==t[q]||Y===n.length;if((h||C||j)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(re){re.state.gestos={}}),b.forEach(function(re){re.unset&&re.unset(t)})),a&&!j&&!y&&Z&&t.props.preventDefault&&(o==null||o.preventDefault()),t.isUnmounted||j)return!1;if(!a&&Z&&!l||h){var K=t.props.flushSync||mU;K(function(){t.updateRect(h?i:"",!0,!1),t.forceUpdate()})}return!a&&!h&&!f&&Z&&!l&&Sb(t,e,n,r,i+"After",o),!0}function tD(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var o=r,l=t.areaElement,a=t._dragTarget;return!a||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:o===a||a.contains(o)||o===l||!t.isMoveableElement(o)&&!t.controlBox.contains(o)||Su(o,"moveable-area")||Su(o,"moveable-padding")||Su(o,"moveable-edgeDraggable")}}function zU(t,e,n){var r=t.controlBox,i=[],o=t.props,l=o.dragArea,a=t.state.target,h=o.dragTarget;i.push(r),(!l||h)&&i.push(e),!l&&h&&a&&e!==a&&o.dragTargetSelf&&i.push(a);var f=tD(t);return jU(t,i,"targetAbles",n,{dragStart:f,pinchStart:f})}function UU(t,e){var n=t.controlBox,r=[];r.push(n);var i=tD(t,!0),o=function(l,a){if(a===void 0&&(a=l.inputEvent.target),a===n)return!0;var h=i(l,a);return!h};return jU(t,r,"controlAbles",e,{dragStart:o,pinchStart:o})}function jU(t,e,n,r,i){i===void 0&&(i={});var o=n==="targetAbles",l=t.props,a=l.pinchOutside,h=l.pinchThreshold,f=l.preventClickEventOnDrag,v=l.preventClickDefault,y=l.checkInput,w=l.dragFocusedInput,b=l.preventDefault,A=b===void 0?!0:b,M=l.preventRightClick,P=M===void 0?!0:M,C=l.preventWheelClick,k=C===void 0?!0:C,B=l.dragContainer,z=op(B,!0),q={preventDefault:A,preventRightClick:P,preventWheelClick:k,container:z||eg(t.getControlBoxElement()),pinchThreshold:h,pinchOutside:a,preventClickEventOnDrag:o?f:!1,preventClickEventOnDragStart:o?v:!1,preventClickEventByCondition:o?null:function(Y){return t.controlBox.contains(Y.target)},checkInput:o?y:!1,dragFocusedInput:w},V=new UY(e,q),W=r==="Control";return["drag","pinch"].forEach(function(Y){["Start","","End"].forEach(function(Z){V.on("".concat(Y).concat(Z),function(j){var K,re=j.eventType,ie=Y==="drag"&&j.isPinch;if(i[re]&&!i[re](j)){j.stop();return}if(!ie){var se=Y==="drag"?[Y]:["drag",Y],de=Tr([],rn(t[n]),!1),ue=Sb(t,de,se,r,Z,j);ue?(t.props.stopPropagation||Z==="Start"&&W)&&((K=j==null?void 0:j.inputEvent)===null||K===void 0||K.stopPropagation()):j.stop()}})})}),V}var mQ=function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(o){var l=i.eventName,a=i.moveable;a.state.disableNativeEvent||i.ables.forEach(function(h){h[l](a,{inputEvent:o})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function gQ(t,e,n,r){var i;n===void 0&&(n=e);var o=$8(t,e),l=o.matrixes,a=o.is3d,h=o.targetMatrix,f=o.transformOrigin,v=o.targetOrigin,y=o.offsetContainer,w=o.hasFixed,b=o.zoom,A=RK(y,n),M=A.matrixes,P=A.is3d,C=A.offsetContainer,k=A.zoom,B=r,z=4,q=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,V=h,W=bs(z),Y=bs(z),Z=bs(z),j=bs(z),K=l.length,re=M.map(function(De){return Qt(Qt({},De),{matrix:De.matrix?Tr([],rn(De.matrix),!1):void 0})}).reverse();l.reverse(),!a&&B&&(V=cd(V,3,4),x3(l)),!P&&B&&x3(re),re.forEach(function(De){Y=Uo(Y,De.matrix,z)});var ie=n||vg(t),se=((i=re[0])===null||i===void 0?void 0:i.target)||Ub(ie,ie,!0).offsetParent,de=re.slice(1).reduce(function(De,me){return Uo(De,me.matrix,z)},bs(z));l.forEach(function(De,me){if(K-2===me&&(Z=W.slice()),K-1===me&&(j=W.slice()),!De.matrix){var Me=l[me+1],fe=IJ(De,Me,se,z,Uo(de,W,z));De.matrix=P0(fe,z)}W=Uo(W,De.matrix,z)});var ue=!q&&a;V||(V=bs(ue?4:3));var Te=QS(q&&V.length===16?cd(V,4,3):V,ue),pe=Y;return Y=M8(Y,z,z),{hasZoom:b!==1||k!==1,hasFixed:w,matrixes:l,rootMatrix:Y,originalRootMatrix:pe,beforeMatrix:Z,offsetMatrix:j,allMatrix:W,targetMatrix:V,targetTransform:Te,inlineTransform:t.style.transform,transformOrigin:f,targetOrigin:v,is3d:B,offsetContainer:y,offsetRootContainer:C}}function vQ(t,e,n,r){n===void 0&&(n=e);var i=0,o=0,l=0,a={},h=_U(t);if(t&&(i=h.offsetWidth,o=h.offsetHeight),t){var f=gQ(t,e,n,r),v=e_(f.allMatrix,f.transformOrigin,i,o);a=Qt(Qt({},f),v);var y=e_(f.allMatrix,[50,50],100,100);l=bU([y.pos1,y.pos2],y.direction)}var w=4;return Qt(Qt(Qt({hasZoom:!1,width:i,height:o,rotation:l},h),{originalRootMatrix:bs(w),rootMatrix:bs(w),beforeMatrix:bs(w),offsetMatrix:bs(w),allMatrix:bs(w),targetMatrix:bs(w),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function T3(t,e,n,r,i,o){o===void 0&&(o=[]);var l=1,a=[0,0],h=v2(),f=v2(),v=v2(),y=v2(),w=[0,0],b={},A=vQ(e,n,i,!0);if(e){var M=_h(e);o.forEach(function(re){b[re]=M(re)});var P=A.is3d?4:3,C=e_(A.offsetMatrix,to(A.transformOrigin,A8(A.targetMatrix,P)),A.width,A.height);l=C.direction,a=to(C.origin,[C.left-A.left,C.top-A.top]),y=wb(A.offsetRootContainer);var k=Ub(r,r,!0).offsetParent||A.offsetRootContainer;if(A.hasZoom){var B=e_(Uo(A.originalRootMatrix,A.allMatrix),A.transformOrigin,A.width,A.height),z=e_(A.originalRootMatrix,Kw(_h(k)("transformOrigin")).map(function(re){return parseFloat(re)}),k.offsetWidth,k.offsetHeight);if(h=DT(B,y),v=DT(z,y,k,!0),t){var q=B.left,V=B.top;f=DT({left:q,top:V,bottom:V,right:V},y)}}else{h=wb(e),v=PK(k),t&&(f=wb(t));var W=v.left,Y=v.top,Z=v.clientLeft,j=v.clientTop,K=[h.left-W,h.top-Y];w=Ei(h_(A.rootMatrix,K,4),[Z+A.left,j+A.top])}}return Qt({targetClientRect:h,containerClientRect:v,moveableClientRect:f,rootContainerClientRect:y,beforeDirection:l,beforeOrigin:a,originalBeforeOrigin:a,target:e,style:b,offsetDelta:w},A)}function O4(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var o=R0([e,n,r,i]),l=[o.minX,o.minY],a=Ei(t.origin,l);return e=Ei(e,l),n=Ei(n,l),r=Ei(r,l),i=Ei(i,l),Qt(Qt({},t),{left:t.left,top:t.top,posDelta:l,pos1:e,pos2:n,pos3:r,pos4:i,origin:a,beforeOrigin:a,isPersisted:!0})}var f_=function(t){sx(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=Qt({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},T3(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new IR,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}eY(n._observerId),n._observerId=x8(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,o=n.className,l=n.target,a=n.zoom,h=n.cspNonce,f=n.translateZ,v=n.cssStyled,y=n.groupable,w=n.linePadding,b=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var A=rn(i||[0,0],2),M=A[0],P=A[1],C=r.left,k=r.top,B=r.target,z=r.direction,q=r.hasFixed,V=r.offsetDelta,W=n.targets,Y=this.isDragging(),Z={};this.getEnabledAbles().forEach(function(de){Z["data-able-".concat(de.name.toLowerCase())]=!0});var j=this._getAbleClassName(),K=W&&W.length&&(B||y)||l||!this._hasFirstTarget&&this.state.isPersisted,re=this.controlBox||this.props.firstRenderState||this.props.persistData,ie=[C-M,k-P];!y&&n.useAccuratePosition&&(ie[0]+=V[0],ie[1]+=V[1]);var se={position:q?"fixed":"absolute",display:K?"block":"none",visibility:re?"visible":"hidden",transform:"translate3d(".concat(ie[0],"px, ").concat(ie[1],"px, ").concat(f,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return w&&(se["--moveable-line-padding"]=w),b&&(se["--moveable-control-padding"]=b),Et.createElement(v,Qt({cspNonce:h,ref:E0(this,"controlBox"),className:"".concat(xi("control-box",z===-1?"reverse":"",Y?"dragging":"")," ").concat(j," ").concat(o)},Z,{onClick:this._onPreventClick,style:se}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Uy(this,!1),Uy(this,!0);var o=this.events;for(var l in o){var a=o[l];a&&a.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Hh(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,o=n.container;return o||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(kR)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,o=this.controlGesto;return i&&tD(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):o&&this.isMoveableElement(r)&&(o.isFlag()||o.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,o=r.pos1,l=r.pos2,a=r.pos3,h=r.pos4,f=r.targetClientRect;if(!i)return 0;var v;if(PR(n)){var y=n.getBoundingClientRect();v={left:y.left,top:y.top,width:y.width,height:y.height}}else v=Qt({width:0,height:0},n);var w=v.left,b=v.top,A=v.width,M=v.height,P=r4([o,l,h,a],f),C=OY(P,[[w,b],[w+A,b],[w+A,b+M],[w,b+M]]),k=D8(P);return!C||!k?0:Math.min(100,C/k*100)},e.prototype.isInside=function(n,r){var i=this.state,o=i.target,l=i.pos1,a=i.pos2,h=i.pos3,f=i.pos4,v=i.targetClientRect;return o?l3([n,r],r4([l,a,f,h],v)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var o=this.props,l=!o.parentPosition&&!o.wrapperMoveable;l&&u_(!0);var a=o.parentMoveable,h=this.state,f=h.target||o.target,v=this.getContainer(),y=a?a._rootContainer:this._rootContainer,w=T3(this.controlBox,f,v,v,y||v,this._getRequestStyles());if(!f&&this._hasFirstTarget&&o.persistData){var b=O4(o.persistData);for(var A in b)w[A]=b[A]}l&&u_(),this.updateState(w,a?!1:i)},e.prototype.isDragging=function(n){var r,i,o=this.targetGesto,l=this.controlGesto;if(o!=null&&o.isFlag()){if(!n)return!0;var a=o.getEventData();return!!(!((r=a[n])===null||r===void 0)&&r.isEventStart)}if(l!=null&&l.isFlag()){if(!n)return!0;var a=l.getEventData();return!!(!((i=a[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Tf(this.state),i=rn(r,4),o=i[0],l=i[1],a=i[2],h=i[3],f=Sf(r),v=n.width,y=n.height,w=f.width,b=f.height,A=f.left,M=f.top,P=[n.left,n.top],C=to(P,n.origin),k=to(P,n.beforeOrigin),B=n.transformOrigin;return{width:w,height:b,left:A,top:M,pos1:o,pos2:l,pos3:a,pos4:h,offsetWidth:v,offsetHeight:y,beforeOrigin:k,origin:C,transformOrigin:B,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;(r==null?void 0:r.isIdle())===!1&&w3(this,!1),r==null||r.stop()}if(!n||n==="control"){var r=this.controlGesto;(r==null?void 0:r.isIdle())===!1&&w3(this,!0),r==null||r.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,o=n.direction;return UJ(r,i,o)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var o=this,l=o.props,a=l.parentMoveable||l.wrapperMoveable||o,h=a.props.ables,f=l.groupable,v=Hh(h,function(C){return C.name===n});if(this.isDragging()||!v||!v.request)return{request:function(){return this},requestEnd:function(){return this}};var y=v.request(o),w=i||r.isInstant,b=y.isControl?"controlAbles":"targetAbles",A="".concat(f?"Group":"").concat(y.isControl?"Control":""),M=Tr([],rn(a[b]),!1),P={request:function(C){return Sb(o,M,["drag"],A,"",Qt(Qt({},y.request(C)),{requestAble:n,isRequest:!0}),w),P},requestEnd:function(){return Sb(o,M,["drag"],A,"End",Qt(Qt({},y.requestEnd()),{requestAble:n,isRequest:!0}),w),P}};return Sb(o,M,["drag"],A,"Start",Qt(Qt({},y.requestStart(r)),{requestAble:n,isRequest:!0}),w),w?P.request(r).requestEnd():P},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,o=n.originalBeforeOrigin,l=n.transformOrigin,a=n.allMatrix,h=n.is3d,f=n.pos1,v=n.pos2,y=n.pos3,w=n.pos4,b=n.left,A=n.top,M=n.isPersisted,P=r.zoom||1;if(!i&&P<=1){n.renderPoses=[f,v,y,w],n.renderLines=[[f,v],[v,w],[w,y],[y,f]];return}var C=RU(i||{}),k=C.left,B=C.top,z=C.bottom,q=C.right,V=h?4:3,W=[];M?W=l:this.controlBox&&r.groupable?W=o:W=to(o,[b,A]);var Y=Hw(V,P0(W.map(function(se){return-se}),V),a,P0(l,V)),Z=hf(Y,f,[-k,-B],V),j=hf(Y,v,[q,-B],V),K=hf(Y,y,[-k,z],V),re=hf(Y,w,[q,z],V);n.renderPoses=[Z,j,K,re],n.renderLines=[[Z,j],[j,re],[re,K],[K,Z]];{var ie=P/2;n.renderLines=[[hf(Y,f,[-k-ie,-B],V),hf(Y,v,[q+ie,-B],V)],[hf(Y,v,[q,-B-ie],V),hf(Y,w,[q,z+ie],V)],[hf(Y,w,[q+ie,z],V),hf(Y,y,[-k-ie,z],V)],[hf(Y,y,[-k,z+ie],V),hf(Y,f,[-k,-B-ie],V)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,o=n.parentMoveable,l=this.state,a=l.target,h=l.container;if(!(!a&&!r)){this.updateAbles();var f=!S3(a,r),v=f||!S3(h,i);if(v){var y=i||this.controlBox;y&&this.unsetAbles(),this.updateState({target:r,container:i}),!o&&y&&this.updateRect("End",!1,!1),this._isPropTargetChanged=f}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var o=i[n];return o&&o(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,o=n+r;return i[o]||(i[o]=O8(n,r)),i[o]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,o=r.persistData,l=r.firstRenderState;if(l&&!i)return l;if(!this._hasFirstTarget&&o){var a=O4(o);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,o=i.triggerAblesSimultaneously,l=this.getEnabledAbles(n),a="drag".concat(r,"Start"),h="pinch".concat(r,"Start"),f="drag".concat(r,"ControlStart"),v=y2(l,[a,h],o),y=y2(l,[f],o);this.enabledAbles=l,this.targetAbles=v,this.controlAbles=y},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var o in n)i[o]=n[o]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,o={createElement:Et.createElement};return this.renderState={},kJ(MU(y2(this.getEnabledAbles(),["render"],i).map(function(l){var a=l.render;return a(n,o)||[]})).filter(function(l){return l}),function(l){var a=l.key;return a}).map(function(l){return l[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var o,l,a=(l=(o=i.requestStyle)===null||o===void 0?void 0:o.call(i))!==null&&l!==void 0?l:[];return Tr(Tr([],rn(r),!1),rn(a),!1)},Tr([],rn(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,o=!n&&this.targetGesto||this._isTargetChanged(!0);o&&(Uy(this,!1),this.updateState({gestos:{}})),r||Uy(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=zU(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=UU(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=op(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,o=r.hideDefaultLines,l=r.hideChildMoveableDefaultLines,a=r.parentMoveable;if(o||a&&l)return[];var h=this.getState(),f={createElement:Et.createElement};return h.renderLines.map(function(v,y){return zb(f,"",v[0],v[1],i,"render-line-".concat(y))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,o=this._prevOriginalDragTarget,l=this._prevDragArea,a=r.dragArea,h=!a&&o!==i,f=(n||a)&&l!==a;return h||f||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,o=this.events,l=M_(o);if(this._isTargetChanged())for(var a in o){var h=o[a];h&&h.destroy(),o[a]=null}if(i){var f=this.enabledAbles;l.forEach(function(v){var y=y2(f,[v]),w=y.length>0,b=o[v];if(!w){b&&(b.destroy(),o[v]=null);return}b||(b=new mQ(i,n,v),o[v]=b),b.setAbles(y)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=op(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=op(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Tr(Tr([],rn(this._getAbleViewClassNames()),!1),[this.isDragging()?WJ:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=TU(n.filter(Boolean),function(f){return f}).map(function(f){var v=rn(f,1),y=v[0];return y}),o=this._viewClassNames,l=LR(o,i),a=l.removed,h=l.added;a.forEach(function(f){E8(r,o[f])}),h.forEach(function(f){S8(r,i[f])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),o=this.targetGesto,l=this.controlGesto,a=o!=null&&o.isFlag()?o.getEventData():{},h=l!=null&&l.isFlag()?l.getEventData():{};return i.map(function(f){var v,y,w,b=f.name,A=((v=f.className)===null||v===void 0?void 0:v.call(f,r))||"";return(!((y=a[b])===null||y===void 0)&&y.isEventStart||!((w=h[b])===null||w===void 0)&&w.isEventStart)&&(A+=" ".concat(xi("".concat(b).concat(n,"-dragging")))),A.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,o=i.target,l=eg(this.getControlBoxElement());if(!l.ResizeObserver||!o||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===o&&this._reiszeObserver)){var a=new l.ResizeObserver(this.checkUpdateRect);a.observe(o,{box:"border-box"}),this._reiszeObserver=a}},e.prototype._updateMutationObserver=function(n){var r=this,i,o=this.props,l=o.target,a=eg(this.getControlBoxElement());if(!a.MutationObserver||!l||!o.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===l&&this._mutationObserver)){var h=new a.MutationObserver(function(f){var v,y;try{for(var w=KY(f),b=w.next();!b.done;b=w.next()){var A=b.value;A.type==="attributes"&&A.attributeName==="style"&&r.checkUpdateRect()}}catch(M){v={error:M}}finally{try{b&&!b.done&&(y=w.return)&&y.call(w)}finally{if(v)throw v.error}}});h.observe(l,{attributes:!0}),this._mutationObserver=h}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:mU,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(Et.PureComponent),nD={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],o=t.getState(),l=o.left,a=o.top,h=o.isPersisted,f=r.zoom||1,v=t.renderGroupRects,y=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];h?i=y.map(function(){return null}):y=[];var w=jy(t,"parentPosition",[l,a],function(A){return A.join(",")}),b=jy(t,"requestStyles",t.getRequestChildStyles(),function(A){return A.join(",")});return t.moveables=t.moveables.slice(0,i.length),Tr(Tr([],rn(i.map(function(A,M){return e.createElement(f_,{key:"moveable"+M,ref:v8(t,"moveables",M),target:A,origin:!1,requestStyles:b,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[l,a],persistData:y[M],zoom:f})})),!1),rn(MU(v.map(function(A,M){var P=A.pos1,C=A.pos2,k=A.pos3,B=A.pos4,z=[P,C,k,B];return[[0,1],[1,3],[3,2],[2,0]].map(function(q,V){var W=rn(q,2),Y=W[0],Z=W[1];return zb(e,"",Ei(z[Y],w),Ei(z[Z],w),f,"group-rect-".concat(M,"-").concat(V))})}))),!1)}},yQ=lx("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,o=t.isMoveableElement(i),l=!o&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||l)){var a=n.contains(i);$r(t,"onClick",sa(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,o=i.indexOf(r),l=o>-1,a=!1;o===-1&&(o=em(i,function(h){return h.contains(r)}),a=o>-1),$r(t,"onClickGroup",sa(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:o,isTarget:l,containsTarget:a,moveableTarget:i[o]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Vv(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),Qt(Qt({},t),{datas:e})}var _Q=lx("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?Z8(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Su(i,xi("direction"))&&Su(i,xi("edge"))&&Su(i,xi("edgeDraggable"))},dragStart:function(t,e){return Zc.dragStart(t,Vv(e))},drag:function(t,e){return Zc.drag(t,Vv(e))},dragEnd:function(t,e){return Zc.dragEnd(t,Vv(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Su(i,xi("direction"))&&Su(i,xi("line"))},dragGroupStart:function(t,e){return Zc.dragGroupStart(t,Vv(e))},dragGroup:function(t,e){return Zc.dragGroup(t,Vv(e))},dragGroupEnd:function(t,e){return Zc.dragGroupEnd(t,Vv(e))},unset:function(t){return Zc.unset(t)}}),VU={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},bQ=[FU,IU,SJ,VJ,Zc,_Q,y3,GJ,HJ,aJ,YJ,KJ,XJ,uQ,lQ,dQ,nD,VU,yQ,LU,BU];function N4(t,e){var n=rn(t,3),r=n[0],i=n[1],o=n[2];return(r*e[0]+i*e[1]+o)/Math.sqrt(r*r+i*i)}function x2(t,e){var n=rn(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function k4(t,e){return Math.max.apply(Math,Tr([],rn(t.map(function(n){var r=rn(n,4),i=r[0],o=r[1],l=r[2],a=r[3];return Math.max(i[e],o[e],l[e],a[e])})),!1))}function F4(t,e){return Math.min.apply(Math,Tr([],rn(t.map(function(n){var r=rn(n,4),i=r[0],o=r[1],l=r[2],a=r[3];return Math.min(i[e],o[e],l[e],a[e])})),!1))}function xQ(t,e){var n,r,i,o=[0,0],l=[0,0],a=[0,0],h=[0,0],f=0,v=0;if(!t.length)return{pos1:o,pos2:l,pos3:a,pos4:h,minX:0,minY:0,maxX:0,maxY:0,width:f,height:v,rotation:e};var y=Qi(e,Qc);if(y%90){var w=y/180*Math.PI,b=Math.tan(w),A=-1/b,M=[p3,o4],P=[[0,0],[0,0]],C=[p3,o4],k=[[0,0],[0,0]];t.forEach(function(ve){ve.forEach(function(le){var ye=N4([-b,1,0],le),Se=N4([-A,1,0],le);M[0]>ye&&(P[0]=le,M[0]=ye),M[1]<ye&&(P[1]=le,M[1]=ye),C[0]>Se&&(k[0]=le,C[0]=Se),C[1]<Se&&(k[1]=le,C[1]=Se)})});var B=rn(P,2),z=B[0],q=B[1],V=rn(k,2),W=V[0],Y=V[1],Z=[-b,1,x2([-b,1],z)],j=[-b,1,x2([-b,1],q)],K=[-A,1,x2([-A,1],W)],re=[-A,1,x2([-A,1],Y)];n=rn([[Z,K],[Z,re],[j,K],[j,re]].map(function(ve){var le=rn(ve,2),ye=le[0],Se=le[1];return OR(ye,Se)[0]}),4),o=n[0],l=n[1],a=n[2],h=n[3],f=C[1]-C[0],v=M[1]-M[0]}else{var ie=F4(t,0),se=F4(t,1),de=k4(t,0),ue=k4(t,1);if(o=[ie,se],l=[de,se],a=[ie,ue],h=[de,ue],f=de-ie,v=ue-se,y%180){var Te=[a,o,h,l];r=rn(Te,4),o=r[0],l=r[1],a=r[2],h=r[3],f=ue-se,v=de-ie}}if(y%360>180){var Te=[h,a,l,o];i=rn(Te,4),o=i[0],l=i[1],a=i[2],h=i[3]}var pe=R0([o,l,a,h]),De=pe.minX,me=pe.minY,Me=pe.maxX,fe=pe.maxY;return{pos1:o,pos2:l,pos3:a,pos4:h,width:f,height:v,minX:De,minY:me,maxX:Me,maxY:fe,rotation:e}}function GU(t,e){var n=e.map(function(r){if(Xu(r)){var i=GU(t,r),o=i.length;return o>1?i:o===1?i[0]:null}else{var l=Hh(t,function(a){var h=a.manager;return h.props.target===r});return l?(l.finded=!0,l.manager):null}}).filter(Boolean);return n.length===1&&Xu(n[0])?n[0]:n}var wQ=function(t){sx(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new R8,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var o;i===void 0&&(i=!0);var l=this.state;if(!this.controlBox||l.isPersisted)return;u_(!0),this.moveables.forEach(function(Ve){Ve.updateRect(n,!1,!1)});var a=this.props,h=this.moveables,f=l.target||a.target,v=h.map(function(Ve){return{finded:!1,manager:Ve}}),y=this.props.targetGroups||[],w=GU(v,y),b=a.useDefaultGroupRotate;w.push.apply(w,Tr([],rn(v.filter(function(Ve){var tt=Ve.finded;return!tt}).map(function(Ve){var tt=Ve.manager;return tt})),!1));var A=[],M=!r||n!==""&&a.updateGroup,P=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var C=(o=a.persistData)===null||o===void 0?void 0:o.rotation;C!=null&&(P=C)}function k(Ve,tt,ht){var it=Ve.map(function(Kt){if(Xu(Kt)){var Jt=k(Kt,tt),Ht=[Jt.pos1,Jt.pos2,Jt.pos3,Jt.pos4];return A.push(Jt),{poses:Ht,rotation:Jt.rotation}}else return{poses:Tf(Kt.state),rotation:Kt.getRotation()}}),gt=it.map(function(Kt){var Jt=Kt.rotation;return Jt}),$t=0,He=gt[0],Ct=gt.every(function(Kt){return Math.abs(He-Kt)<.1});M?$t=!b&&Ct?He:P:$t=!b&&!ht&&Ct?He:tt;var Xe=it.map(function(Kt){var Jt=Kt.poses;return Jt}),tn=xQ(Xe,$t);return tn}var B=k(w,this.rotation,!0);M&&(this.rotation=B.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=y,this.renderGroupRects=A;var z=this.transformOrigin,q=this.rotation,V=this.scale,W=B.width,Y=B.height,Z=B.minX,j=B.minY,K=jJ([[0,0],[W,0],[0,Y],[W,Y]],JR(z,W,Y),this.rotation/180*Math.PI),re=R0(K.result),ie=re.minX,se=re.minY,de=" rotate(".concat(q,"deg)")+" scale(".concat(Yc(V[0]),", ").concat(Yc(V[1]),")"),ue="translate(".concat(-ie,"px, ").concat(-se,"px)").concat(de);this.controlBox.style.transform="translate3d(".concat(Z,"px, ").concat(j,"px, ").concat(this.props.translateZ||0,")"),f.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(z,";")+"width:".concat(W,"px;height:").concat(Y,"px;")+"transform: ".concat(ue),l.width=W,l.height=Y;var Te=this.getContainer(),pe=T3(this.controlBox,f,this.controlBox,this.getContainer(),this._rootContainer||Te,[]),De=[pe.left,pe.top],me=rn(Tf(pe),4),Me=me[0],fe=me[1],ve=me[2],le=me[3],ye=R0([Me,fe,ve,le]),Se=[ye.minX,ye.minY],Be=Yc(V[0]*V[1]);pe.pos1=Ei(Me,Se),pe.pos2=Ei(fe,Se),pe.pos3=Ei(ve,Se),pe.pos4=Ei(le,Se),pe.left=Z-pe.left+Se[0],pe.top=j-pe.top+Se[1],pe.origin=Ei(to(De,pe.origin),Se),pe.beforeOrigin=Ei(to(De,pe.beforeOrigin),Se),pe.originalBeforeOrigin=to(De,pe.originalBeforeOrigin),pe.transformOrigin=Ei(to(De,pe.transformOrigin),Se),f.style.transform="translate(".concat(-ie-Se[0],"px, ").concat(-se-Se[1],"px)")+de,u_(),this.updateState(Qt(Qt({},pe),{posDelta:Se,direction:Be,beforeDirection:Be}),i)},e.prototype.getRect=function(){return Qt(Qt({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var o,l,a=(l=(o=i.requestChildStyle)===null||o===void 0?void 0:o.call(i))!==null&&l!==void 0?l:[];return Tr(Tr([],rn(r),!1),rn(a),!1)},[]);return n},e.prototype.getMoveables=function(){return Tr([],rn(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Tr(Tr([],rn(this.props.ables),!1),[nD],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=op(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,o=r.dragTarget||this.areaElement,l=r.targets,a=this.differ.update(l),h=a.added,f=a.changed,v=a.removed,y=h.length||v.length;(y||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Uy(this,!1),Uy(this,!0),this.updateState({gestos:{}})),i!==o&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=zU(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=UU(this,"GroupControl")));var w=!S3(n.container,r.container);w&&(n.container=r.container),(w||y||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||f.length||l.length&&!PU(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!y},e.prototype._updateObserver=function(){},e.defaultProps=Qt(Qt({},f_.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(f_),SQ=function(t){sx(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,o=i.cspNonce,l=i.cssStyled,a=i.persistData,h=i.targets||[],f=h.length,v=this.isUnmounted||!f,y=(r=a==null?void 0:a.children)!==null&&r!==void 0?r:[];return v&&!f&&y.length?h=y.map(function(){return null}):v||(y=[]),Et.createElement(l,{cspNonce:o,ref:E0(this,"controlBox"),className:xi("control-box")},h.map(function(w,b){var A,M,P=(M=(A=i.individualGroupableProps)===null||A===void 0?void 0:A.call(i,w,b))!==null&&M!==void 0?M:{};return Et.createElement(f_,Qt({key:"moveable"+b,ref:v8(n,"moveables",b)},i,P,{target:w,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:y[b]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),u_(!0),this.moveables.forEach(function(o){o.updateRect(n,r,i)}),u_()},e.prototype.getRect=function(){return Qt(Qt({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var o=this.moveables.map(function(h){return h.request(n,Qt(Qt({},r),{isInstant:!1}),!1)}),l=i||r.isInstant,a={request:function(h){return o.forEach(function(f){return f.request(h)}),this},requestEnd:function(){return o.forEach(function(h){return h.requestEnd()}),this}};return l?a.request(r).requestEnd():a},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,o=Hh(this.moveables,function(l){var a=l.getTargets()[0],h=l.getControlBoxElement(),f=l.getDragElement();return!a||!f?!1:f===i||f.contains(i)||f!==a&&a===i||a.contains(i)||h===i||h.contains(i)});return o&&o.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Tr([],rn(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(f_);function qU(t,e){var n=[];return t.forEach(function(r){if(r){if(sm(r)){e[r]&&n.push.apply(n,Tr([],rn(e[r]),!1));return}Xu(r)?n.push.apply(n,Tr([],rn(qU(r,e)),!1)):n.push(r)}}),n}function HU(t,e){var n=[];return t.forEach(function(r){if(r){if(sm(r)){e[r]&&n.push.apply(n,Tr([],rn(e[r]),!1));return}Xu(r)?n.push(HU(r,e)):n.push(r)}}),n}function $U(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?Xu(n)&&Xu(i)?$U(n,i):!0:!1})}var EQ=function(t){sx(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new R8,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(o){var l=o.css;l&&l.forEach(function(a){n[a]=!0})});var i=M_(n).join(`
`);this.defaultStyled=O8("div",VZ(kR,lK+i))},e.getTotalAbles=function(){return Tr([IU,nD,VU,LU],rn(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,o=i.ables,l=i.props,a=ZY(i,["ables","props"]),h=rn(this._updateRefs(!0),2),f=h[0],v=h[1],y=qU(f,v),w=y.length>1,b=r.getTotalAbles(),A=Tr(Tr([],rn(b),!1),rn(o||[]),!1),M=Qt(Qt(Qt({},a),l||{}),{ables:A,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=y;var P=null,C=this.moveable,k=a.persistData;if(k!=null&&k.children&&(w=!0),a.individualGroupable)return Et.createElement(SQ,Qt({key:"individual-group",ref:E0(this,"moveable")},M,{target:null,targets:y}));if(w){var B=HU(f,v);if(C&&!C.props.groupable&&!C.props.individualGroupable){var z=C.props.target;z&&y.indexOf(z)>-1&&(P=Qt({},C.state))}return Et.createElement(wQ,Qt({key:"group",ref:E0(this,"moveable")},M,(n=a.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:y,targetGroups:B,firstRenderState:P}))}else{var q=y[0];if(C&&(C.props.groupable||C.props.individualGroupable)){var V=C.moveables||[],W=Hh(V,function(Y){return Y.props.target===q});W&&(P=Qt({},W.state))}return Et.createElement(f_,Qt({key:"single",ref:E0(this,"moveable")},M,{target:q,firstRenderState:P}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=KR(this.props.target||this.props.targets),o=typeof document<"u",l=$U(r,i),a=this.selectorMap,h={};return this.refTargets.forEach(function f(v){if(sm(v)){var y=a[v];y?h[v]=a[v]:o&&(l=!0,h[v]=[].slice.call(document.querySelectorAll(v)))}else Xu(v)&&v.forEach(f)}),this._tmpRefTargets=i,this._tmpSelectorMap=h,[i,h,!n&&l]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var o=this._differ.update(this._elementTargets),l=o.added,a=o.removed,h=l.length||a.length;h&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var f=rn(this._updateRefs(),3),v=f[0],y=f[1],w=f[2];this.refTargets=v,this.selectorMap=y,w&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,YY([GZ(hK)],e.prototype,"moveable",void 0),e}(Et.PureComponent),TQ=function(t){sx(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=bQ,e}(EQ),Nh=63710088e-1,MQ={centimeters:Nh*100,centimetres:Nh*100,degrees:360/(2*Math.PI),feet:Nh*3.28084,inches:Nh*39.37,kilometers:Nh/1e3,kilometres:Nh/1e3,meters:Nh,metres:Nh,miles:Nh/1609.344,millimeters:Nh*1e3,millimetres:Nh*1e3,nauticalmiles:Nh/1852,radians:1,yards:Nh*1.0936};function AQ(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function WU(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!z4(t[0])||!z4(t[1]))throw new Error("coordinates must contain numbers");return AQ({type:"Point",coordinates:t},e,n)}function CQ(t,e="kilometers"){const n=MQ[e];if(!n)throw new Error(e+" units is invalid");return t/n}function B4(t){return t%(2*Math.PI)*180/Math.PI}function OT(t){return t%360*Math.PI/180}function z4(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function PQ(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function RQ(t,e,n,r={}){const i=PQ(t),o=OT(i[0]),l=OT(i[1]),a=OT(n),h=CQ(e,r.units),f=Math.asin(Math.sin(l)*Math.cos(h)+Math.cos(l)*Math.sin(h)*Math.cos(a)),v=o+Math.atan2(Math.sin(a)*Math.sin(h)*Math.cos(l),Math.cos(h)-Math.sin(l)*Math.sin(f)),y=B4(v),w=B4(f);return WU([y,w],r.properties)}var ww={exports:{}},DQ=ww.exports,U4;function LQ(){return U4||(U4=1,function(t,e){(function(n,r){t.exports=r()})(DQ,function(){var n=function(H,he){var Ge={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},St={on:function(Ut,Yt,sr){if(Ge[Ut]===void 0)throw new Error("Invalid event type: "+Ut);Ge[Ut].push({selector:Yt,fn:sr})},render:function(Ut){he.store.featureChanged(Ut)}},Lt=function(Ut,Yt){for(var sr=Ge[Ut],Wn=sr.length;Wn--;){var mr=sr[Wn];if(mr.selector(Yt)){mr.fn.call(St,Yt)||he.store.render(),he.ui.updateMapClasses();break}}};return H.start.call(St),{render:H.render,stop:function(){H.stop&&H.stop()},trash:function(){H.trash&&(H.trash(),he.store.render())},combineFeatures:function(){H.combineFeatures&&H.combineFeatures()},uncombineFeatures:function(){H.uncombineFeatures&&H.uncombineFeatures()},drag:function(Ut){Lt("drag",Ut)},click:function(Ut){Lt("click",Ut)},mousemove:function(Ut){Lt("mousemove",Ut)},mousedown:function(Ut){Lt("mousedown",Ut)},mouseup:function(Ut){Lt("mouseup",Ut)},mouseout:function(Ut){Lt("mouseout",Ut)},keydown:function(Ut){Lt("keydown",Ut)},keyup:function(Ut){Lt("keyup",Ut)},touchstart:function(Ut){Lt("touchstart",Ut)},touchmove:function(Ut){Lt("touchmove",Ut)},touchend:function(Ut){Lt("touchend",Ut)},tap:function(Ut){Lt("tap",Ut)}}};function r(H){return H&&H.__esModule&&Object.prototype.hasOwnProperty.call(H,"default")?H.default:H}function i(H){if(H.__esModule)return H;var he=H.default;if(typeof he=="function"){var Ge=function St(){if(this instanceof St){var Lt=[null];Lt.push.apply(Lt,arguments);var Ut=Function.bind.apply(he,Lt);return new Ut}return he.apply(this,arguments)};Ge.prototype=he.prototype}else Ge={};return Object.defineProperty(Ge,"__esModule",{value:!0}),Object.keys(H).forEach(function(St){var Lt=Object.getOwnPropertyDescriptor(H,St);Object.defineProperty(Ge,St,Lt.get?Lt:{enumerable:!0,get:function(){return H[St]}})}),Ge}var o={},l={RADIUS:6378137},a=l;function h(H){var he=0;if(H&&H.length>0){he+=Math.abs(f(H[0]));for(var Ge=1;Ge<H.length;Ge++)he-=Math.abs(f(H[Ge]))}return he}function f(H){var he,Ge,St,Lt,Ut,Yt,sr=0,Wn=H.length;if(Wn>2){for(Yt=0;Yt<Wn;Yt++)Yt===Wn-2?(St=Wn-2,Lt=Wn-1,Ut=0):Yt===Wn-1?(St=Wn-1,Lt=0,Ut=1):(St=Yt,Lt=Yt+1,Ut=Yt+2),he=H[St],Ge=H[Lt],sr+=(v(H[Ut][0])-v(he[0]))*Math.sin(v(Ge[1]));sr=sr*a.RADIUS*a.RADIUS/2}return sr}function v(H){return H*Math.PI/180}o.geometry=function H(he){var Ge,St=0;switch(he.type){case"Polygon":return h(he.coordinates);case"MultiPolygon":for(Ge=0;Ge<he.coordinates.length;Ge++)St+=h(he.coordinates[Ge]);return St;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Ge=0;Ge<he.geometries.length;Ge++)St+=H(he.geometries[Ge]);return St}},o.ring=f;var y={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},w={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},b={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},A={POLYGON:"polygon",LINE:"line_string",POINT:"point"},M={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},P={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},C={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},k={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},B={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},z={ACTIVE:"true",INACTIVE:"false"},q=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],V=-85,W=Object.freeze({__proto__:null,classes:y,sources:w,cursors:b,types:A,geojsonTypes:M,modes:P,events:C,updateActions:k,meta:B,activeStates:z,interactions:q,LAT_MIN:-90,LAT_RENDERED_MIN:V,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),Y={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Z(H,he){var Ge=Y[H.geometry.type]-Y[he.geometry.type];return Ge===0&&H.geometry.type===M.POLYGON?H.area-he.area:Ge}function j(H){return H.map(function(he){return he.geometry.type===M.POLYGON&&(he.area=o.geometry({type:M.FEATURE,property:{},geometry:he.geometry})),he}).sort(Z).map(function(he){return delete he.area,he})}function K(H,he){return he===void 0&&(he=0),[[H.point.x-he,H.point.y-he],[H.point.x+he,H.point.y+he]]}function re(H){if(this._items={},this._nums={},this._length=H?H.length:0,H)for(var he=0,Ge=H.length;he<Ge;he++)this.add(H[he]),H[he]!==void 0&&(typeof H[he]=="string"?this._items[H[he]]=he:this._nums[H[he]]=he)}re.prototype.add=function(H){return this.has(H)||(this._length++,typeof H=="string"?this._items[H]=this._length:this._nums[H]=this._length),this},re.prototype.delete=function(H){return this.has(H)===!1||(this._length--,delete this._items[H],delete this._nums[H]),this},re.prototype.has=function(H){return(typeof H=="string"||typeof H=="number")&&(this._items[H]!==void 0||this._nums[H]!==void 0)},re.prototype.values=function(){var H=this,he=[];return Object.keys(this._items).forEach(function(Ge){he.push({k:Ge,v:H._items[Ge]})}),Object.keys(this._nums).forEach(function(Ge){he.push({k:JSON.parse(Ge),v:H._nums[Ge]})}),he.sort(function(Ge,St){return Ge.v-St.v}).map(function(Ge){return Ge.k})},re.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ie=[B.FEATURE,B.MIDPOINT,B.VERTEX],se={click:function(H,he,Ge){return de(H,he,Ge,Ge.options.clickBuffer)},touch:function(H,he,Ge){return de(H,he,Ge,Ge.options.touchBuffer)}};function de(H,he,Ge,St){if(Ge.map===null)return[];var Lt=H?K(H,St):he,Ut={};Ge.options.styles&&(Ut.layers=Ge.options.styles.map(function(mr){return mr.id}).filter(function(mr){return Ge.map.getLayer(mr)!=null}));var Yt=Ge.map.queryRenderedFeatures(Lt,Ut).filter(function(mr){return ie.indexOf(mr.properties.meta)!==-1}),sr=new re,Wn=[];return Yt.forEach(function(mr){var vr=mr.properties.id;sr.has(vr)||(sr.add(vr),Wn.push(mr))}),j(Wn)}function ue(H,he){var Ge=se.click(H,null,he),St={mouse:b.NONE};return Ge[0]&&(St.mouse=Ge[0].properties.active===z.ACTIVE?b.MOVE:b.POINTER,St.feature=Ge[0].properties.meta),he.events.currentModeName().indexOf("draw")!==-1&&(St.mouse=b.ADD),he.ui.queueMapClasses(St),he.ui.updateMapClasses(),Ge[0]}function Te(H,he){var Ge=H.x-he.x,St=H.y-he.y;return Math.sqrt(Ge*Ge+St*St)}function pe(H,he,Ge){Ge===void 0&&(Ge={});var St=Ge.fineTolerance!=null?Ge.fineTolerance:4,Lt=Ge.grossTolerance!=null?Ge.grossTolerance:12,Ut=Ge.interval!=null?Ge.interval:500;H.point=H.point||he.point,H.time=H.time||he.time;var Yt=Te(H.point,he.point);return Yt<St||Yt<Lt&&he.time-H.time<Ut}function De(H,he,Ge){Ge===void 0&&(Ge={});var St=Ge.tolerance!=null?Ge.tolerance:25,Lt=Ge.interval!=null?Ge.interval:250;return H.point=H.point||he.point,H.time=H.time||he.time,Te(H.point,he.point)<St&&he.time-H.time<Lt}var me={exports:{}},Me=me.exports=function(H,he){if(he||(he=16),H===void 0&&(H=128),H<=0)return"0";for(var Ge=Math.log(Math.pow(2,H))/Math.log(he),St=2;Ge===1/0;St*=2)Ge=Math.log(Math.pow(2,H/St))/Math.log(he)*St;var Lt=Ge-Math.floor(Ge),Ut="";for(St=0;St<Math.floor(Ge);St++)Ut=Math.floor(Math.random()*he).toString(he)+Ut;if(Lt){var Yt=Math.pow(he,Lt);Ut=Math.floor(Math.random()*Yt).toString(he)+Ut}var sr=parseInt(Ut,he);return sr!==1/0&&sr>=Math.pow(2,H)?Me(H,he):Ut};Me.rack=function(H,he,Ge){var St=function(Ut){var Yt=0;do{if(Yt++>10){if(!Ge)throw new Error("too many ID collisions, use more bits");H+=Ge}var sr=Me(H,he)}while(Object.hasOwnProperty.call(Lt,sr));return Lt[sr]=Ut,sr},Lt=St.hats={};return St.get=function(Ut){return St.hats[Ut]},St.set=function(Ut,Yt){return St.hats[Ut]=Yt,St},St.bits=H||128,St.base=he||16,St};var fe=r(me.exports),ve=function(H,he){this.ctx=H,this.properties=he.properties||{},this.coordinates=he.geometry.coordinates,this.id=he.id||fe(),this.type=he.geometry.type};ve.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},ve.prototype.incomingCoords=function(H){this.setCoordinates(H)},ve.prototype.setCoordinates=function(H){this.coordinates=H,this.changed()},ve.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},ve.prototype.setProperty=function(H,he){this.properties[H]=he},ve.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:M.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},ve.prototype.internal=function(H){var he={id:this.id,meta:B.FEATURE,"meta:type":this.type,active:z.INACTIVE,mode:H};if(this.ctx.options.userProperties)for(var Ge in this.properties)he["user_"+Ge]=this.properties[Ge];return{type:M.FEATURE,properties:he,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var le=function(H,he){ve.call(this,H,he)};(le.prototype=Object.create(ve.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},le.prototype.updateCoordinate=function(H,he,Ge){this.coordinates=arguments.length===3?[he,Ge]:[H,he],this.changed()},le.prototype.getCoordinate=function(){return this.getCoordinates()};var ye=function(H,he){ve.call(this,H,he)};(ye.prototype=Object.create(ve.prototype)).isValid=function(){return this.coordinates.length>1},ye.prototype.addCoordinate=function(H,he,Ge){this.changed();var St=parseInt(H,10);this.coordinates.splice(St,0,[he,Ge])},ye.prototype.getCoordinate=function(H){var he=parseInt(H,10);return JSON.parse(JSON.stringify(this.coordinates[he]))},ye.prototype.removeCoordinate=function(H){this.changed(),this.coordinates.splice(parseInt(H,10),1)},ye.prototype.updateCoordinate=function(H,he,Ge){var St=parseInt(H,10);this.coordinates[St]=[he,Ge],this.changed()};var Se=function(H,he){ve.call(this,H,he),this.coordinates=this.coordinates.map(function(Ge){return Ge.slice(0,-1)})};(Se.prototype=Object.create(ve.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(H){return H.length>2})},Se.prototype.incomingCoords=function(H){this.coordinates=H.map(function(he){return he.slice(0,-1)}),this.changed()},Se.prototype.setCoordinates=function(H){this.coordinates=H,this.changed()},Se.prototype.addCoordinate=function(H,he,Ge){this.changed();var St=H.split(".").map(function(Lt){return parseInt(Lt,10)});this.coordinates[St[0]].splice(St[1],0,[he,Ge])},Se.prototype.removeCoordinate=function(H){this.changed();var he=H.split(".").map(function(St){return parseInt(St,10)}),Ge=this.coordinates[he[0]];Ge&&(Ge.splice(he[1],1),Ge.length<3&&this.coordinates.splice(he[0],1))},Se.prototype.getCoordinate=function(H){var he=H.split(".").map(function(St){return parseInt(St,10)}),Ge=this.coordinates[he[0]];return JSON.parse(JSON.stringify(Ge[he[1]]))},Se.prototype.getCoordinates=function(){return this.coordinates.map(function(H){return H.concat([H[0]])})},Se.prototype.updateCoordinate=function(H,he,Ge){this.changed();var St=H.split("."),Lt=parseInt(St[0],10),Ut=parseInt(St[1],10);this.coordinates[Lt]===void 0&&(this.coordinates[Lt]=[]),this.coordinates[Lt][Ut]=[he,Ge]};var Be={MultiPoint:le,MultiLineString:ye,MultiPolygon:Se},Ve=function(H,he,Ge,St,Lt){var Ut=Ge.split("."),Yt=parseInt(Ut[0],10),sr=Ut[1]?Ut.slice(1).join("."):null;return H[Yt][he](sr,St,Lt)},tt=function(H,he){if(ve.call(this,H,he),delete this.coordinates,this.model=Be[he.geometry.type],this.model===void 0)throw new TypeError(he.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(he.geometry.coordinates)};function ht(H){this.map=H.map,this.drawConfig=JSON.parse(JSON.stringify(H.options||{})),this._ctx=H}(tt.prototype=Object.create(ve.prototype))._coordinatesToFeatures=function(H){var he=this,Ge=this.model.bind(this);return H.map(function(St){return new Ge(he.ctx,{id:fe(),type:M.FEATURE,properties:{},geometry:{coordinates:St,type:he.type.replace("Multi","")}})})},tt.prototype.isValid=function(){return this.features.every(function(H){return H.isValid()})},tt.prototype.setCoordinates=function(H){this.features=this._coordinatesToFeatures(H),this.changed()},tt.prototype.getCoordinate=function(H){return Ve(this.features,"getCoordinate",H)},tt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(H){return H.type===M.POLYGON?H.getCoordinates():H.coordinates})))},tt.prototype.updateCoordinate=function(H,he,Ge){Ve(this.features,"updateCoordinate",H,he,Ge),this.changed()},tt.prototype.addCoordinate=function(H,he,Ge){Ve(this.features,"addCoordinate",H,he,Ge),this.changed()},tt.prototype.removeCoordinate=function(H){Ve(this.features,"removeCoordinate",H),this.changed()},tt.prototype.getFeatures=function(){return this.features},ht.prototype.setSelected=function(H){return this._ctx.store.setSelected(H)},ht.prototype.setSelectedCoordinates=function(H){var he=this;this._ctx.store.setSelectedCoordinates(H),H.reduce(function(Ge,St){return Ge[St.feature_id]===void 0&&(Ge[St.feature_id]=!0,he._ctx.store.get(St.feature_id).changed()),Ge},{})},ht.prototype.getSelected=function(){return this._ctx.store.getSelected()},ht.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},ht.prototype.isSelected=function(H){return this._ctx.store.isSelected(H)},ht.prototype.getFeature=function(H){return this._ctx.store.get(H)},ht.prototype.select=function(H){return this._ctx.store.select(H)},ht.prototype.deselect=function(H){return this._ctx.store.deselect(H)},ht.prototype.deleteFeature=function(H,he){return he===void 0&&(he={}),this._ctx.store.delete(H,he)},ht.prototype.addFeature=function(H){return this._ctx.store.add(H)},ht.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},ht.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},ht.prototype.setActionableState=function(H){H===void 0&&(H={});var he={trash:H.trash||!1,combineFeatures:H.combineFeatures||!1,uncombineFeatures:H.uncombineFeatures||!1};return this._ctx.events.actionable(he)},ht.prototype.changeMode=function(H,he,Ge){return he===void 0&&(he={}),Ge===void 0&&(Ge={}),this._ctx.events.changeMode(H,he,Ge)},ht.prototype.updateUIClasses=function(H){return this._ctx.ui.queueMapClasses(H)},ht.prototype.activateUIButton=function(H){return this._ctx.ui.setActiveButton(H)},ht.prototype.featuresAt=function(H,he,Ge){if(Ge===void 0&&(Ge="click"),Ge!=="click"&&Ge!=="touch")throw new Error("invalid buffer type");return se[Ge](H,he,this._ctx)},ht.prototype.newFeature=function(H){var he=H.geometry.type;return he===M.POINT?new le(this._ctx,H):he===M.LINE_STRING?new ye(this._ctx,H):he===M.POLYGON?new Se(this._ctx,H):new tt(this._ctx,H)},ht.prototype.isInstanceOf=function(H,he){if(H===M.POINT)return he instanceof le;if(H===M.LINE_STRING)return he instanceof ye;if(H===M.POLYGON)return he instanceof Se;if(H==="MultiFeature")return he instanceof tt;throw new Error("Unknown feature class: "+H)},ht.prototype.doRender=function(H){return this._ctx.store.featureChanged(H)},ht.prototype.onSetup=function(){},ht.prototype.onDrag=function(){},ht.prototype.onClick=function(){},ht.prototype.onMouseMove=function(){},ht.prototype.onMouseDown=function(){},ht.prototype.onMouseUp=function(){},ht.prototype.onMouseOut=function(){},ht.prototype.onKeyUp=function(){},ht.prototype.onKeyDown=function(){},ht.prototype.onTouchStart=function(){},ht.prototype.onTouchMove=function(){},ht.prototype.onTouchEnd=function(){},ht.prototype.onTap=function(){},ht.prototype.onStop=function(){},ht.prototype.onTrash=function(){},ht.prototype.onCombineFeature=function(){},ht.prototype.onUncombineFeature=function(){},ht.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var it={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},gt=Object.keys(it);function $t(H){var he=Object.keys(H);return function(Ge,St){St===void 0&&(St={});var Lt={},Ut=he.reduce(function(Yt,sr){return Yt[sr]=H[sr],Yt},new ht(Ge));return{start:function(){var Yt=this;Lt=Ut.onSetup(St),gt.forEach(function(sr){var Wn,mr=it[sr],vr=function(){return!1};H[mr]&&(vr=function(){return!0}),Yt.on(sr,vr,(Wn=mr,function(xr){return Ut[Wn](Lt,xr)}))})},stop:function(){Ut.onStop(Lt)},trash:function(){Ut.onTrash(Lt)},combineFeatures:function(){Ut.onCombineFeatures(Lt)},uncombineFeatures:function(){Ut.onUncombineFeatures(Lt)},render:function(Yt,sr){Ut.toDisplayFeatures(Lt,Yt,sr)}}}}function He(H){return[].concat(H).filter(function(he){return he!==void 0})}function Ct(){var H=this;if(!(H.ctx.map&&H.ctx.map.getSource(w.HOT)!==void 0))return Wn();var he=H.ctx.events.currentModeName();H.ctx.ui.queueMapClasses({mode:he});var Ge=[],St=[];H.isDirty?St=H.getAllIds():(Ge=H.getChangedIds().filter(function(mr){return H.get(mr)!==void 0}),St=H.sources.hot.filter(function(mr){return mr.properties.id&&Ge.indexOf(mr.properties.id)===-1&&H.get(mr.properties.id)!==void 0}).map(function(mr){return mr.properties.id})),H.sources.hot=[];var Lt=H.sources.cold.length;H.sources.cold=H.isDirty?[]:H.sources.cold.filter(function(mr){var vr=mr.properties.id||mr.properties.parent;return Ge.indexOf(vr)===-1});var Ut=Lt!==H.sources.cold.length||St.length>0;function Yt(mr,vr){var xr=H.get(mr).internal(he);H.ctx.events.currentModeRender(xr,function(Lr){H.sources[vr].push(Lr)})}if(Ge.forEach(function(mr){return Yt(mr,"hot")}),St.forEach(function(mr){return Yt(mr,"cold")}),Ut&&H.ctx.map.getSource(w.COLD).setData({type:M.FEATURE_COLLECTION,features:H.sources.cold}),H.ctx.map.getSource(w.HOT).setData({type:M.FEATURE_COLLECTION,features:H.sources.hot}),H._emitSelectionChange&&(H.ctx.map.fire(C.SELECTION_CHANGE,{features:H.getSelected().map(function(mr){return mr.toGeoJSON()}),points:H.getSelectedCoordinates().map(function(mr){return{type:M.FEATURE,properties:{},geometry:{type:M.POINT,coordinates:mr.coordinates}}})}),H._emitSelectionChange=!1),H._deletedFeaturesToEmit.length){var sr=H._deletedFeaturesToEmit.map(function(mr){return mr.toGeoJSON()});H._deletedFeaturesToEmit=[],H.ctx.map.fire(C.DELETE,{features:sr})}function Wn(){H.isDirty=!1,H.clearChangedIds()}Wn(),H.ctx.map.fire(C.RENDER,{})}function Xe(H){var he,Ge=this;this._features={},this._featureIds=new re,this._selectedFeatureIds=new re,this._selectedCoordinates=[],this._changedFeatureIds=new re,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=H,this.sources={hot:[],cold:[]},this.render=function(){he||(he=requestAnimationFrame(function(){he=null,Ct.call(Ge)}))},this.isDirty=!1}function tn(H,he){var Ge=H._selectedCoordinates.filter(function(St){return H._selectedFeatureIds.has(St.feature_id)});H._selectedCoordinates.length===Ge.length||he.silent||(H._emitSelectionChange=!0),H._selectedCoordinates=Ge}Xe.prototype.createRenderBatch=function(){var H=this,he=this.render,Ge=0;return this.render=function(){Ge++},function(){H.render=he,Ge>0&&H.render()}},Xe.prototype.setDirty=function(){return this.isDirty=!0,this},Xe.prototype.featureChanged=function(H){return this._changedFeatureIds.add(H),this},Xe.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Xe.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Xe.prototype.getAllIds=function(){return this._featureIds.values()},Xe.prototype.add=function(H){return this.featureChanged(H.id),this._features[H.id]=H,this._featureIds.add(H.id),this},Xe.prototype.delete=function(H,he){var Ge=this;return he===void 0&&(he={}),He(H).forEach(function(St){Ge._featureIds.has(St)&&(Ge._featureIds.delete(St),Ge._selectedFeatureIds.delete(St),he.silent||Ge._deletedFeaturesToEmit.indexOf(Ge._features[St])===-1&&Ge._deletedFeaturesToEmit.push(Ge._features[St]),delete Ge._features[St],Ge.isDirty=!0)}),tn(this,he),this},Xe.prototype.get=function(H){return this._features[H]},Xe.prototype.getAll=function(){var H=this;return Object.keys(this._features).map(function(he){return H._features[he]})},Xe.prototype.select=function(H,he){var Ge=this;return he===void 0&&(he={}),He(H).forEach(function(St){Ge._selectedFeatureIds.has(St)||(Ge._selectedFeatureIds.add(St),Ge._changedFeatureIds.add(St),he.silent||(Ge._emitSelectionChange=!0))}),this},Xe.prototype.deselect=function(H,he){var Ge=this;return he===void 0&&(he={}),He(H).forEach(function(St){Ge._selectedFeatureIds.has(St)&&(Ge._selectedFeatureIds.delete(St),Ge._changedFeatureIds.add(St),he.silent||(Ge._emitSelectionChange=!0))}),tn(this,he),this},Xe.prototype.clearSelected=function(H){return H===void 0&&(H={}),this.deselect(this._selectedFeatureIds.values(),{silent:H.silent}),this},Xe.prototype.setSelected=function(H,he){var Ge=this;return he===void 0&&(he={}),H=He(H),this.deselect(this._selectedFeatureIds.values().filter(function(St){return H.indexOf(St)===-1}),{silent:he.silent}),this.select(H.filter(function(St){return!Ge._selectedFeatureIds.has(St)}),{silent:he.silent}),this},Xe.prototype.setSelectedCoordinates=function(H){return this._selectedCoordinates=H,this._emitSelectionChange=!0,this},Xe.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Xe.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Xe.prototype.getSelected=function(){var H=this;return this._selectedFeatureIds.values().map(function(he){return H.get(he)})},Xe.prototype.getSelectedCoordinates=function(){var H=this;return this._selectedCoordinates.map(function(he){return{coordinates:H.get(he.feature_id).getCoordinate(he.coord_path)}})},Xe.prototype.isSelected=function(H){return this._selectedFeatureIds.has(H)},Xe.prototype.setFeatureProperty=function(H,he,Ge){this.get(H).setProperty(he,Ge),this.featureChanged(H)},Xe.prototype.storeMapConfig=function(){var H=this;q.forEach(function(he){H.ctx.map[he]&&(H._mapInitialConfig[he]=H.ctx.map[he].isEnabled())})},Xe.prototype.restoreMapConfig=function(){var H=this;Object.keys(this._mapInitialConfig).forEach(function(he){H._mapInitialConfig[he]?H.ctx.map[he].enable():H.ctx.map[he].disable()})},Xe.prototype.getInitialConfigValue=function(H){return this._mapInitialConfig[H]===void 0||this._mapInitialConfig[H]};var Kt=function(){for(var H=arguments,he={},Ge=0;Ge<arguments.length;Ge++){var St=H[Ge];for(var Lt in St)Jt.call(St,Lt)&&(he[Lt]=St[Lt])}return he},Jt=Object.prototype.hasOwnProperty,Ht=r(Kt),$e=["mode","feature","mouse"];function Ee(H){var he=null,Ge=null,St={onRemove:function(){return H.map.off("load",St.connect),clearInterval(Ge),St.removeLayers(),H.store.restoreMapConfig(),H.ui.removeButtons(),H.events.removeEventListeners(),H.ui.clearMapClasses(),H.boxZoomInitial&&H.map.boxZoom.enable(),H.map=null,H.container=null,H.store=null,he&&he.parentNode&&he.parentNode.removeChild(he),he=null,this},connect:function(){H.map.off("load",St.connect),clearInterval(Ge),St.addLayers(),H.store.storeMapConfig(),H.events.addEventListeners()},onAdd:function(Lt){var Ut=Lt.fire;return Lt.fire=function(Yt,sr){var Wn=arguments;return Ut.length===1&&arguments.length!==1&&(Wn=[Ht({},{type:Yt},sr)]),Ut.apply(Lt,Wn)},H.map=Lt,H.events=function(Yt){var sr=Object.keys(Yt.options.modes).reduce(function($n,Rr){return $n[Rr]=$t(Yt.options.modes[Rr]),$n},{}),Wn={},mr={},vr={},xr=null,Lr=null;vr.drag=function($n,Rr){Rr({point:$n.point,time:new Date().getTime()})?(Yt.ui.queueMapClasses({mouse:b.DRAG}),Lr.drag($n)):$n.originalEvent.stopPropagation()},vr.mousedrag=function($n){vr.drag($n,function(Rr){return!pe(Wn,Rr)})},vr.touchdrag=function($n){vr.drag($n,function(Rr){return!De(mr,Rr)})},vr.mousemove=function($n){if(($n.originalEvent.buttons!==void 0?$n.originalEvent.buttons:$n.originalEvent.which)===1)return vr.mousedrag($n);var Rr=ue($n,Yt);$n.featureTarget=Rr,Lr.mousemove($n)},vr.mousedown=function($n){Wn={time:new Date().getTime(),point:$n.point};var Rr=ue($n,Yt);$n.featureTarget=Rr,Lr.mousedown($n)},vr.mouseup=function($n){var Rr=ue($n,Yt);$n.featureTarget=Rr,pe(Wn,{point:$n.point,time:new Date().getTime()})?Lr.click($n):Lr.mouseup($n)},vr.mouseout=function($n){Lr.mouseout($n)},vr.touchstart=function($n){if(Yt.options.touchEnabled){mr={time:new Date().getTime(),point:$n.point};var Rr=se.touch($n,null,Yt)[0];$n.featureTarget=Rr,Lr.touchstart($n)}},vr.touchmove=function($n){if(Yt.options.touchEnabled)return Lr.touchmove($n),vr.touchdrag($n)},vr.touchend=function($n){if($n.originalEvent.preventDefault(),Yt.options.touchEnabled){var Rr=se.touch($n,null,Yt)[0];$n.featureTarget=Rr,De(mr,{time:new Date().getTime(),point:$n.point})?Lr.tap($n):Lr.touchend($n)}};var Ti=function($n){return!($n===8||$n===46||$n>=48&&$n<=57)};function Yr($n,Rr,Ni){Ni===void 0&&(Ni={}),Lr.stop();var ta=sr[$n];if(ta===void 0)throw new Error($n+" is not valid");xr=$n;var di=ta(Yt,Rr);Lr=n(di,Yt),Ni.silent||Yt.map.fire(C.MODE_CHANGE,{mode:$n}),Yt.store.setDirty(),Yt.store.render()}vr.keydown=function($n){($n.srcElement||$n.target).classList.contains("mapboxgl-canvas")&&($n.keyCode!==8&&$n.keyCode!==46||!Yt.options.controls.trash?Ti($n.keyCode)?Lr.keydown($n):$n.keyCode===49&&Yt.options.controls.point?Yr(P.DRAW_POINT):$n.keyCode===50&&Yt.options.controls.line_string?Yr(P.DRAW_LINE_STRING):$n.keyCode===51&&Yt.options.controls.polygon&&Yr(P.DRAW_POLYGON):($n.preventDefault(),Lr.trash()))},vr.keyup=function($n){Ti($n.keyCode)&&Lr.keyup($n)},vr.zoomend=function(){Yt.store.changeZoom()},vr.data=function($n){if($n.dataType==="style"){var Rr=Yt.setup,Ni=Yt.map,ta=Yt.options,di=Yt.store;ta.styles.some(function(js){return Ni.getLayer(js.id)})||(Rr.addLayers(),di.setDirty(),di.render())}};var Cr={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){xr=Yt.options.defaultMode,Lr=n(sr[xr](Yt),Yt)},changeMode:Yr,actionable:function($n){var Rr=!1;Object.keys($n).forEach(function(Ni){if(Cr[Ni]===void 0)throw new Error("Invalid action type");Cr[Ni]!==$n[Ni]&&(Rr=!0),Cr[Ni]=$n[Ni]}),Rr&&Yt.map.fire(C.ACTIONABLE,{actions:Cr})},currentModeName:function(){return xr},currentModeRender:function($n,Rr){return Lr.render($n,Rr)},fire:function($n,Rr){vr[$n]&&vr[$n](Rr)},addEventListeners:function(){Yt.map.on("mousemove",vr.mousemove),Yt.map.on("mousedown",vr.mousedown),Yt.map.on("mouseup",vr.mouseup),Yt.map.on("data",vr.data),Yt.map.on("touchmove",vr.touchmove),Yt.map.on("touchstart",vr.touchstart),Yt.map.on("touchend",vr.touchend),Yt.container.addEventListener("mouseout",vr.mouseout),Yt.options.keybindings&&(Yt.container.addEventListener("keydown",vr.keydown),Yt.container.addEventListener("keyup",vr.keyup))},removeEventListeners:function(){Yt.map.off("mousemove",vr.mousemove),Yt.map.off("mousedown",vr.mousedown),Yt.map.off("mouseup",vr.mouseup),Yt.map.off("data",vr.data),Yt.map.off("touchmove",vr.touchmove),Yt.map.off("touchstart",vr.touchstart),Yt.map.off("touchend",vr.touchend),Yt.container.removeEventListener("mouseout",vr.mouseout),Yt.options.keybindings&&(Yt.container.removeEventListener("keydown",vr.keydown),Yt.container.removeEventListener("keyup",vr.keyup))},trash:function($n){Lr.trash($n)},combineFeatures:function(){Lr.combineFeatures()},uncombineFeatures:function(){Lr.uncombineFeatures()},getMode:function(){return xr}}}(H),H.ui=function(Yt){var sr={},Wn=null,mr={mode:null,feature:null,mouse:null},vr={mode:null,feature:null,mouse:null};function xr($n){vr=Ht(vr,$n)}function Lr(){var $n,Rr;if(Yt.container){var Ni=[],ta=[];$e.forEach(function(di){vr[di]!==mr[di]&&(Ni.push(di+"-"+mr[di]),vr[di]!==null&&ta.push(di+"-"+vr[di]))}),Ni.length>0&&($n=Yt.container.classList).remove.apply($n,Ni),ta.length>0&&(Rr=Yt.container.classList).add.apply(Rr,ta),mr=Ht(mr,vr)}}function Ti($n,Rr){Rr===void 0&&(Rr={});var Ni=document.createElement("button");return Ni.className=y.CONTROL_BUTTON+" "+Rr.className,Ni.setAttribute("title",Rr.title),Rr.container.appendChild(Ni),Ni.addEventListener("click",function(ta){if(ta.preventDefault(),ta.stopPropagation(),ta.target===Wn)return Yr(),void Rr.onDeactivate();Cr($n),Rr.onActivate()},!0),Ni}function Yr(){Wn&&(Wn.classList.remove(y.ACTIVE_BUTTON),Wn=null)}function Cr($n){Yr();var Rr=sr[$n];Rr&&Rr&&$n!=="trash"&&(Rr.classList.add(y.ACTIVE_BUTTON),Wn=Rr)}return{setActiveButton:Cr,queueMapClasses:xr,updateMapClasses:Lr,clearMapClasses:function(){xr({mode:null,feature:null,mouse:null}),Lr()},addButtons:function(){var $n=Yt.options.controls,Rr=document.createElement("div");return Rr.className=y.CONTROL_GROUP+" "+y.CONTROL_BASE,$n&&($n[A.LINE]&&(sr[A.LINE]=Ti(A.LINE,{container:Rr,className:y.CONTROL_BUTTON_LINE,title:"LineString tool "+(Yt.options.keybindings?"(l)":""),onActivate:function(){return Yt.events.changeMode(P.DRAW_LINE_STRING)},onDeactivate:function(){return Yt.events.trash()}})),$n[A.POLYGON]&&(sr[A.POLYGON]=Ti(A.POLYGON,{container:Rr,className:y.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(Yt.options.keybindings?"(p)":""),onActivate:function(){return Yt.events.changeMode(P.DRAW_POLYGON)},onDeactivate:function(){return Yt.events.trash()}})),$n[A.POINT]&&(sr[A.POINT]=Ti(A.POINT,{container:Rr,className:y.CONTROL_BUTTON_POINT,title:"Marker tool "+(Yt.options.keybindings?"(m)":""),onActivate:function(){return Yt.events.changeMode(P.DRAW_POINT)},onDeactivate:function(){return Yt.events.trash()}})),$n.trash&&(sr.trash=Ti("trash",{container:Rr,className:y.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){Yt.events.trash()}})),$n.combine_features&&(sr.combine_features=Ti("combineFeatures",{container:Rr,className:y.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){Yt.events.combineFeatures()}})),$n.uncombine_features&&(sr.uncombine_features=Ti("uncombineFeatures",{container:Rr,className:y.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){Yt.events.uncombineFeatures()}}))),Rr},removeButtons:function(){Object.keys(sr).forEach(function($n){var Rr=sr[$n];Rr.parentNode&&Rr.parentNode.removeChild(Rr),delete sr[$n]})}}}(H),H.container=Lt.getContainer(),H.store=new Xe(H),he=H.ui.addButtons(),H.options.boxSelect&&(H.boxZoomInitial=Lt.boxZoom.isEnabled(),Lt.boxZoom.disable(),Lt.dragPan.disable(),Lt.dragPan.enable()),Lt.loaded()?St.connect():(Lt.on("load",St.connect),Ge=setInterval(function(){Lt.loaded()&&St.connect()},16)),H.events.start(),he},addLayers:function(){H.map.addSource(w.COLD,{data:{type:M.FEATURE_COLLECTION,features:[]},type:"geojson"}),H.map.addSource(w.HOT,{data:{type:M.FEATURE_COLLECTION,features:[]},type:"geojson"}),H.options.styles.forEach(function(Lt){H.map.addLayer(Lt)}),H.store.setDirty(!0),H.store.render()},removeLayers:function(){H.options.styles.forEach(function(Lt){H.map.getLayer(Lt.id)&&H.map.removeLayer(Lt.id)}),H.map.getSource(w.COLD)&&H.map.removeSource(w.COLD),H.map.getSource(w.HOT)&&H.map.removeSource(w.HOT)}};return H.setup=St,St}var _t=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function jt(H){return function(he){var Ge=he.featureTarget;return!!Ge&&!!Ge.properties&&Ge.properties.meta===H}}function vt(H){return!!H.originalEvent&&!!H.originalEvent.shiftKey&&H.originalEvent.button===0}function Pt(H){return!!H.featureTarget&&!!H.featureTarget.properties&&H.featureTarget.properties.active===z.ACTIVE&&H.featureTarget.properties.meta===B.FEATURE}function vn(H){return!!H.featureTarget&&!!H.featureTarget.properties&&H.featureTarget.properties.active===z.INACTIVE&&H.featureTarget.properties.meta===B.FEATURE}function hn(H){return H.featureTarget===void 0}function pn(H){return!!H.featureTarget&&!!H.featureTarget.properties&&H.featureTarget.properties.meta===B.FEATURE}function nn(H){var he=H.featureTarget;return!!he&&!!he.properties&&he.properties.meta===B.VERTEX}function Ft(H){return!!H.originalEvent&&H.originalEvent.shiftKey===!0}function In(H){return H.keyCode===27}function Pn(H){return H.keyCode===13}var ir=Object.freeze({__proto__:null,isOfMetaType:jt,isShiftMousedown:vt,isActiveFeature:Pt,isInactiveFeature:vn,noTarget:hn,isFeature:pn,isVertex:nn,isShiftDown:Ft,isEscapeKey:In,isEnterKey:Pn,isTrue:function(){return!0}}),mt=ge;function ge(H,he){this.x=H,this.y=he}ge.prototype={clone:function(){return new ge(this.x,this.y)},add:function(H){return this.clone()._add(H)},sub:function(H){return this.clone()._sub(H)},multByPoint:function(H){return this.clone()._multByPoint(H)},divByPoint:function(H){return this.clone()._divByPoint(H)},mult:function(H){return this.clone()._mult(H)},div:function(H){return this.clone()._div(H)},rotate:function(H){return this.clone()._rotate(H)},rotateAround:function(H,he){return this.clone()._rotateAround(H,he)},matMult:function(H){return this.clone()._matMult(H)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(H){return this.x===H.x&&this.y===H.y},dist:function(H){return Math.sqrt(this.distSqr(H))},distSqr:function(H){var he=H.x-this.x,Ge=H.y-this.y;return he*he+Ge*Ge},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(H){return Math.atan2(this.y-H.y,this.x-H.x)},angleWith:function(H){return this.angleWithSep(H.x,H.y)},angleWithSep:function(H,he){return Math.atan2(this.x*he-this.y*H,this.x*H+this.y*he)},_matMult:function(H){var he=H[0]*this.x+H[1]*this.y,Ge=H[2]*this.x+H[3]*this.y;return this.x=he,this.y=Ge,this},_add:function(H){return this.x+=H.x,this.y+=H.y,this},_sub:function(H){return this.x-=H.x,this.y-=H.y,this},_mult:function(H){return this.x*=H,this.y*=H,this},_div:function(H){return this.x/=H,this.y/=H,this},_multByPoint:function(H){return this.x*=H.x,this.y*=H.y,this},_divByPoint:function(H){return this.x/=H.x,this.y/=H.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var H=this.y;return this.y=this.x,this.x=-H,this},_rotate:function(H){var he=Math.cos(H),Ge=Math.sin(H),St=he*this.x-Ge*this.y,Lt=Ge*this.x+he*this.y;return this.x=St,this.y=Lt,this},_rotateAround:function(H,he){var Ge=Math.cos(H),St=Math.sin(H),Lt=he.x+Ge*(this.x-he.x)-St*(this.y-he.y),Ut=he.y+St*(this.x-he.x)+Ge*(this.y-he.y);return this.x=Lt,this.y=Ut,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ge.convert=function(H){return H instanceof ge?H:Array.isArray(H)?new ge(H[0],H[1]):H};var ke=r(mt);function We(H,he){var Ge=he.getBoundingClientRect();return new ke(H.clientX-Ge.left-(he.clientLeft||0),H.clientY-Ge.top-(he.clientTop||0))}function Ce(H,he,Ge,St){return{type:M.FEATURE,properties:{meta:B.VERTEX,parent:H,coord_path:Ge,active:St?z.ACTIVE:z.INACTIVE},geometry:{type:M.POINT,coordinates:he}}}function Qe(H,he,Ge){var St=he.geometry.coordinates,Lt=Ge.geometry.coordinates;if(St[1]>85||St[1]<V||Lt[1]>85||Lt[1]<V)return null;var Ut={lng:(St[0]+Lt[0])/2,lat:(St[1]+Lt[1])/2};return{type:M.FEATURE,properties:{meta:B.MIDPOINT,parent:H,lng:Ut.lng,lat:Ut.lat,coord_path:Ge.properties.coord_path},geometry:{type:M.POINT,coordinates:[Ut.lng,Ut.lat]}}}function et(H,he,Ge){he===void 0&&(he={}),Ge===void 0&&(Ge=null);var St,Lt=H.geometry,Ut=Lt.type,Yt=Lt.coordinates,sr=H.properties&&H.properties.id,Wn=[];function mr(xr,Lr){var Ti="",Yr=null;xr.forEach(function(Cr,$n){var Rr=Lr!=null?Lr+"."+$n:String($n),Ni=Ce(sr,Cr,Rr,vr(Rr));if(he.midpoints&&Yr){var ta=Qe(sr,Yr,Ni);ta&&Wn.push(ta)}Yr=Ni;var di=JSON.stringify(Cr);Ti!==di&&Wn.push(Ni),$n===0&&(Ti=di)})}function vr(xr){return!!he.selectedPaths&&he.selectedPaths.indexOf(xr)!==-1}return Ut===M.POINT?Wn.push(Ce(sr,Yt,Ge,vr(Ge))):Ut===M.POLYGON?Yt.forEach(function(xr,Lr){mr(xr,Ge!==null?Ge+"."+Lr:String(Lr))}):Ut===M.LINE_STRING?mr(Yt,Ge):Ut.indexOf(M.MULTI_PREFIX)===0&&(St=Ut.replace(M.MULTI_PREFIX,""),Yt.forEach(function(xr,Lr){var Ti={type:M.FEATURE,properties:H.properties,geometry:{type:St,coordinates:xr}};Wn=Wn.concat(et(Ti,he,Lr))})),Wn}var ut={enable:function(H){setTimeout(function(){H.map&&H.map.doubleClickZoom&&H._ctx&&H._ctx.store&&H._ctx.store.getInitialConfigValue&&H._ctx.store.getInitialConfigValue("doubleClickZoom")&&H.map.doubleClickZoom.enable()},0)},disable:function(H){setTimeout(function(){H.map&&H.map.doubleClickZoom&&H.map.doubleClickZoom.disable()},0)}},lt={exports:{}},xt=function(H){if(!H||!H.type)return null;var he=Dt[H.type];if(!he)return null;if(he==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:H}]};if(he==="feature")return{type:"FeatureCollection",features:[H]};if(he==="featurecollection")return H},Dt={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},zt=r(xt),Tn=Object.freeze({__proto__:null,default:function H(he){switch(he&&he.type||null){case"FeatureCollection":return he.features=he.features.reduce(function(Ge,St){return Ge.concat(H(St))},[]),he;case"Feature":return he.geometry?H(he.geometry).map(function(Ge){var St={type:"Feature",properties:JSON.parse(JSON.stringify(he.properties)),geometry:Ge};return he.id!==void 0&&(St.id=he.id),St}):[he];case"MultiPoint":return he.coordinates.map(function(Ge){return{type:"Point",coordinates:Ge}});case"MultiPolygon":return he.coordinates.map(function(Ge){return{type:"Polygon",coordinates:Ge}});case"MultiLineString":return he.coordinates.map(function(Ge){return{type:"LineString",coordinates:Ge}});case"GeometryCollection":return he.geometries.map(H).reduce(function(Ge,St){return Ge.concat(St)},[]);case"Point":case"Polygon":case"LineString":return[he]}}}),qt=xt,Zn=i(Tn),Gn=function(H){return function he(Ge){return Array.isArray(Ge)&&Ge.length&&typeof Ge[0]=="number"?[Ge]:Ge.reduce(function(St,Lt){return Array.isArray(Lt)&&Array.isArray(Lt[0])?St.concat(he(Lt)):(St.push(Lt),St)},[])}(H)};Zn instanceof Function||(Zn=Zn.default);var we={exports:{}},Ne=we.exports=function(H){return new je(H)};function je(H){this.value=H}function At(H,he,Ge){var St=[],Lt=[],Ut=!0;return function Yt(sr){var Wn=Ge?sn(sr):sr,mr={},vr=!0,xr={node:Wn,node_:sr,path:[].concat(St),parent:Lt[Lt.length-1],parents:Lt,key:St.slice(-1)[0],isRoot:St.length===0,level:St.length,circular:null,update:function(Yr,Cr){xr.isRoot||(xr.parent.node[xr.key]=Yr),xr.node=Yr,Cr&&(vr=!1)},delete:function(Yr){delete xr.parent.node[xr.key],Yr&&(vr=!1)},remove:function(Yr){Er(xr.parent.node)?xr.parent.node.splice(xr.key,1):delete xr.parent.node[xr.key],Yr&&(vr=!1)},keys:null,before:function(Yr){mr.before=Yr},after:function(Yr){mr.after=Yr},pre:function(Yr){mr.pre=Yr},post:function(Yr){mr.post=Yr},stop:function(){Ut=!1},block:function(){vr=!1}};if(!Ut)return xr;function Lr(){if(typeof xr.node=="object"&&xr.node!==null){xr.keys&&xr.node_===xr.node||(xr.keys=Hn(xr.node)),xr.isLeaf=xr.keys.length==0;for(var Yr=0;Yr<Lt.length;Yr++)if(Lt[Yr].node_===sr){xr.circular=Lt[Yr];break}}else xr.isLeaf=!0,xr.keys=null;xr.notLeaf=!xr.isLeaf,xr.notRoot=!xr.isRoot}Lr();var Ti=he.call(xr,xr.node);return Ti!==void 0&&xr.update&&xr.update(Ti),mr.before&&mr.before.call(xr,xr.node),vr&&(typeof xr.node!="object"||xr.node===null||xr.circular||(Lt.push(xr),Lr(),lr(xr.keys,function(Yr,Cr){St.push(Yr),mr.pre&&mr.pre.call(xr,xr.node[Yr],Yr);var $n=Yt(xr.node[Yr]);Ge&&Ri.call(xr.node,Yr)&&(xr.node[Yr]=$n.node),$n.isLast=Cr==xr.keys.length-1,$n.isFirst=Cr==0,mr.post&&mr.post.call(xr,$n),St.pop()}),Lt.pop()),mr.after&&mr.after.call(xr,xr.node)),xr}(H).node}function sn(H){if(typeof H=="object"&&H!==null){var he;if(Er(H))he=[];else if(or(H)==="[object Date]")he=new Date(H.getTime?H.getTime():H);else if(function(Lt){return or(Lt)==="[object RegExp]"}(H))he=new RegExp(H);else if(function(Lt){return or(Lt)==="[object Error]"}(H))he={message:H.message};else if(function(Lt){return or(Lt)==="[object Boolean]"}(H))he=new Boolean(H);else if(function(Lt){return or(Lt)==="[object Number]"}(H))he=new Number(H);else if(function(Lt){return or(Lt)==="[object String]"}(H))he=new String(H);else if(Object.create&&Object.getPrototypeOf)he=Object.create(Object.getPrototypeOf(H));else if(H.constructor===Object)he={};else{var Ge=H.constructor&&H.constructor.prototype||H.__proto__||{},St=function(){};St.prototype=Ge,he=new St}return lr(Hn(H),function(Lt){he[Lt]=H[Lt]}),he}return H}je.prototype.get=function(H){for(var he=this.value,Ge=0;Ge<H.length;Ge++){var St=H[Ge];if(!he||!Ri.call(he,St)){he=void 0;break}he=he[St]}return he},je.prototype.has=function(H){for(var he=this.value,Ge=0;Ge<H.length;Ge++){var St=H[Ge];if(!he||!Ri.call(he,St))return!1;he=he[St]}return!0},je.prototype.set=function(H,he){for(var Ge=this.value,St=0;St<H.length-1;St++){var Lt=H[St];Ri.call(Ge,Lt)||(Ge[Lt]={}),Ge=Ge[Lt]}return Ge[H[St]]=he,he},je.prototype.map=function(H){return At(this.value,H,!0)},je.prototype.forEach=function(H){return this.value=At(this.value,H,!1),this.value},je.prototype.reduce=function(H,he){var Ge=arguments.length===1,St=Ge?this.value:he;return this.forEach(function(Lt){this.isRoot&&Ge||(St=H.call(this,St,Lt))}),St},je.prototype.paths=function(){var H=[];return this.forEach(function(he){H.push(this.path)}),H},je.prototype.nodes=function(){var H=[];return this.forEach(function(he){H.push(this.node)}),H},je.prototype.clone=function(){var H=[],he=[];return function Ge(St){for(var Lt=0;Lt<H.length;Lt++)if(H[Lt]===St)return he[Lt];if(typeof St=="object"&&St!==null){var Ut=sn(St);return H.push(St),he.push(Ut),lr(Hn(St),function(Yt){Ut[Yt]=Ge(St[Yt])}),H.pop(),he.pop(),Ut}return St}(this.value)};var Hn=Object.keys||function(H){var he=[];for(var Ge in H)he.push(Ge);return he};function or(H){return Object.prototype.toString.call(H)}var Er=Array.isArray||function(H){return Object.prototype.toString.call(H)==="[object Array]"},lr=function(H,he){if(H.forEach)return H.forEach(he);for(var Ge=0;Ge<H.length;Ge++)he(H[Ge],Ge,H)};lr(Hn(je.prototype),function(H){Ne[H]=function(he){var Ge=[].slice.call(arguments,1),St=new je(he);return St[H].apply(St,Ge)}});var Ri=Object.hasOwnProperty||function(H,he){return he in H},ci=we.exports,Vi=Vr;function Vr(H){if(!(this instanceof Vr))return new Vr(H);this._bbox=H||[1/0,1/0,-1/0,-1/0],this._valid=!!H}Vr.prototype.include=function(H){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],H[0]),this._bbox[1]=Math.min(this._bbox[1],H[1]),this._bbox[2]=Math.max(this._bbox[2],H[0]),this._bbox[3]=Math.max(this._bbox[3],H[1]),this},Vr.prototype.equals=function(H){var he;return he=H instanceof Vr?H.bbox():H,this._bbox[0]==he[0]&&this._bbox[1]==he[1]&&this._bbox[2]==he[2]&&this._bbox[3]==he[3]},Vr.prototype.center=function(H){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Vr.prototype.union=function(H){var he;return this._valid=!0,he=H instanceof Vr?H.bbox():H,this._bbox[0]=Math.min(this._bbox[0],he[0]),this._bbox[1]=Math.min(this._bbox[1],he[1]),this._bbox[2]=Math.max(this._bbox[2],he[2]),this._bbox[3]=Math.max(this._bbox[3],he[3]),this},Vr.prototype.bbox=function(){return this._valid?this._bbox:null},Vr.prototype.contains=function(H){if(!H)return this._fastContains();if(!this._valid)return null;var he=H[0],Ge=H[1];return this._bbox[0]<=he&&this._bbox[1]<=Ge&&this._bbox[2]>=he&&this._bbox[3]>=Ge},Vr.prototype.intersect=function(H){return this._valid?(he=H instanceof Vr?H.bbox():H,!(this._bbox[0]>he[2]||this._bbox[2]<he[0]||this._bbox[3]<he[1]||this._bbox[1]>he[3])):null;var he},Vr.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var H="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",H)},Vr.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Ca=function(H){if(!H)return[];var he=Zn(qt(H)),Ge=[];return he.features.forEach(function(St){St.geometry&&(Ge=Ge.concat(Gn(St.geometry.coordinates)))}),Ge},ra=ci,mi=Vi,no={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},nt=Object.keys(no);function an(H){for(var he=mi(),Ge=Ca(H),St=0;St<Ge.length;St++)he.include(Ge[St]);return he}lt.exports=function(H){return an(H).bbox()},lt.exports.polygon=function(H){return an(H).polygon()},lt.exports.bboxify=function(H){return ra(H).map(function(he){he&&nt.some(function(Ge){return!!he[Ge]&&no[Ge].indexOf(he.type)!==-1})&&(he.bbox=an(he).bbox(),this.update(he))})};var gn=r(lt.exports),_n=-90;function fn(H,he){var Ge=_n,St=90,Lt=_n,Ut=90,Yt=270,sr=-270;H.forEach(function(mr){var vr=gn(mr),xr=vr[1],Lr=vr[3],Ti=vr[0],Yr=vr[2];xr>Ge&&(Ge=xr),Lr<St&&(St=Lr),Lr>Lt&&(Lt=Lr),xr<Ut&&(Ut=xr),Ti<Yt&&(Yt=Ti),Yr>sr&&(sr=Yr)});var Wn=he;return Ge+Wn.lat>85&&(Wn.lat=85-Ge),Lt+Wn.lat>90&&(Wn.lat=90-Lt),St+Wn.lat<-85&&(Wn.lat=-85-St),Ut+Wn.lat<_n&&(Wn.lat=_n-Ut),Yt+Wn.lng<=-270&&(Wn.lng+=360*Math.ceil(Math.abs(Wn.lng)/360)),sr+Wn.lng>=270&&(Wn.lng-=360*Math.ceil(Math.abs(Wn.lng)/360)),Wn}function cr(H,he){var Ge=fn(H.map(function(St){return St.toGeoJSON()}),he);H.forEach(function(St){var Lt,Ut=St.getCoordinates(),Yt=function(Wn){var mr={lng:Wn[0]+Ge.lng,lat:Wn[1]+Ge.lat};return[mr.lng,mr.lat]},sr=function(Wn){return Wn.map(function(mr){return Yt(mr)})};St.type===M.POINT?Lt=Yt(Ut):St.type===M.LINE_STRING||St.type===M.MULTI_POINT?Lt=Ut.map(Yt):St.type===M.POLYGON||St.type===M.MULTI_LINE_STRING?Lt=Ut.map(sr):St.type===M.MULTI_POLYGON&&(Lt=Ut.map(function(Wn){return Wn.map(function(mr){return sr(mr)})})),St.incomingCoords(Lt)})}var hr={onSetup:function(H){var he=this,Ge={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:H.featureIds||[]};return this.setSelected(Ge.initiallySelectedFeatureIds.filter(function(St){return he.getFeature(St)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Ge},fireUpdate:function(){this.map.fire(C.UPDATE,{action:k.MOVE,features:this.getSelected().map(function(H){return H.toGeoJSON()})})},fireActionable:function(){var H=this,he=this.getSelected(),Ge=he.filter(function(sr){return H.isInstanceOf("MultiFeature",sr)}),St=!1;if(he.length>1){St=!0;var Lt=he[0].type.replace("Multi","");he.forEach(function(sr){sr.type.replace("Multi","")!==Lt&&(St=!1)})}var Ut=Ge.length>0,Yt=he.length>0;this.setActionableState({combineFeatures:St,uncombineFeatures:Ut,trash:Yt})},getUniqueIds:function(H){return H.length?H.map(function(he){return he.properties.id}).filter(function(he){return he!==void 0}).reduce(function(he,Ge){return he.add(Ge),he},new re).values():[]},stopExtendedInteractions:function(H){H.boxSelectElement&&(H.boxSelectElement.parentNode&&H.boxSelectElement.parentNode.removeChild(H.boxSelectElement),H.boxSelectElement=null),this.map.dragPan.enable(),H.boxSelecting=!1,H.canBoxSelect=!1,H.dragMoving=!1,H.canDragMove=!1},onStop:function(){ut.enable(this)},onMouseMove:function(H,he){return pn(he)&&H.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(H),!0},onMouseOut:function(H){return!H.dragMoving||this.fireUpdate()}};hr.onTap=hr.onClick=function(H,he){return hn(he)?this.clickAnywhere(H,he):jt(B.VERTEX)(he)?this.clickOnVertex(H,he):pn(he)?this.clickOnFeature(H,he):void 0},hr.clickAnywhere=function(H){var he=this,Ge=this.getSelectedIds();Ge.length&&(this.clearSelectedFeatures(),Ge.forEach(function(St){return he.doRender(St)})),ut.enable(this),this.stopExtendedInteractions(H)},hr.clickOnVertex=function(H,he){this.changeMode(P.DIRECT_SELECT,{featureId:he.featureTarget.properties.parent,coordPath:he.featureTarget.properties.coord_path,startPos:he.lngLat}),this.updateUIClasses({mouse:b.MOVE})},hr.startOnActiveFeature=function(H,he){this.stopExtendedInteractions(H),this.map.dragPan.disable(),this.doRender(he.featureTarget.properties.id),H.canDragMove=!0,H.dragMoveLocation=he.lngLat},hr.clickOnFeature=function(H,he){var Ge=this;ut.disable(this),this.stopExtendedInteractions(H);var St=Ft(he),Lt=this.getSelectedIds(),Ut=he.featureTarget.properties.id,Yt=this.isSelected(Ut);if(!St&&Yt&&this.getFeature(Ut).type!==M.POINT)return this.changeMode(P.DIRECT_SELECT,{featureId:Ut});Yt&&St?(this.deselect(Ut),this.updateUIClasses({mouse:b.POINTER}),Lt.length===1&&ut.enable(this)):!Yt&&St?(this.select(Ut),this.updateUIClasses({mouse:b.MOVE})):Yt||St||(Lt.forEach(function(sr){return Ge.doRender(sr)}),this.setSelected(Ut),this.updateUIClasses({mouse:b.MOVE})),this.doRender(Ut)},hr.onMouseDown=function(H,he){return Pt(he)?this.startOnActiveFeature(H,he):this.drawConfig.boxSelect&&vt(he)?this.startBoxSelect(H,he):void 0},hr.startBoxSelect=function(H,he){this.stopExtendedInteractions(H),this.map.dragPan.disable(),H.boxSelectStartLocation=We(he.originalEvent,this.map.getContainer()),H.canBoxSelect=!0},hr.onTouchStart=function(H,he){if(Pt(he))return this.startOnActiveFeature(H,he)},hr.onDrag=function(H,he){return H.canDragMove?this.dragMove(H,he):this.drawConfig.boxSelect&&H.canBoxSelect?this.whileBoxSelect(H,he):void 0},hr.whileBoxSelect=function(H,he){H.boxSelecting=!0,this.updateUIClasses({mouse:b.ADD}),H.boxSelectElement||(H.boxSelectElement=document.createElement("div"),H.boxSelectElement.classList.add(y.BOX_SELECT),this.map.getContainer().appendChild(H.boxSelectElement));var Ge=We(he.originalEvent,this.map.getContainer()),St=Math.min(H.boxSelectStartLocation.x,Ge.x),Lt=Math.max(H.boxSelectStartLocation.x,Ge.x),Ut=Math.min(H.boxSelectStartLocation.y,Ge.y),Yt=Math.max(H.boxSelectStartLocation.y,Ge.y),sr="translate("+St+"px, "+Ut+"px)";H.boxSelectElement.style.transform=sr,H.boxSelectElement.style.WebkitTransform=sr,H.boxSelectElement.style.width=Lt-St+"px",H.boxSelectElement.style.height=Yt-Ut+"px"},hr.dragMove=function(H,he){H.dragMoving=!0,he.originalEvent.stopPropagation();var Ge={lng:he.lngLat.lng-H.dragMoveLocation.lng,lat:he.lngLat.lat-H.dragMoveLocation.lat};cr(this.getSelected(),Ge),H.dragMoveLocation=he.lngLat},hr.onTouchEnd=hr.onMouseUp=function(H,he){var Ge=this;if(H.dragMoving)this.fireUpdate();else if(H.boxSelecting){var St=[H.boxSelectStartLocation,We(he.originalEvent,this.map.getContainer())],Lt=this.featuresAt(null,St,"click"),Ut=this.getUniqueIds(Lt).filter(function(Yt){return!Ge.isSelected(Yt)});Ut.length&&(this.select(Ut),Ut.forEach(function(Yt){return Ge.doRender(Yt)}),this.updateUIClasses({mouse:b.MOVE}))}this.stopExtendedInteractions(H)},hr.toDisplayFeatures=function(H,he,Ge){he.properties.active=this.isSelected(he.properties.id)?z.ACTIVE:z.INACTIVE,Ge(he),this.fireActionable(),he.properties.active===z.ACTIVE&&he.geometry.type!==M.POINT&&et(he).forEach(Ge)},hr.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},hr.onCombineFeatures=function(){var H=this.getSelected();if(!(H.length===0||H.length<2)){for(var he=[],Ge=[],St=H[0].type.replace("Multi",""),Lt=0;Lt<H.length;Lt++){var Ut=H[Lt];if(Ut.type.replace("Multi","")!==St)return;Ut.type.includes("Multi")?Ut.getCoordinates().forEach(function(sr){he.push(sr)}):he.push(Ut.getCoordinates()),Ge.push(Ut.toGeoJSON())}if(Ge.length>1){var Yt=this.newFeature({type:M.FEATURE,properties:Ge[0].properties,geometry:{type:"Multi"+St,coordinates:he}});this.addFeature(Yt),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([Yt.id]),this.map.fire(C.COMBINE_FEATURES,{createdFeatures:[Yt.toGeoJSON()],deletedFeatures:Ge})}this.fireActionable()}},hr.onUncombineFeatures=function(){var H=this,he=this.getSelected();if(he.length!==0){for(var Ge=[],St=[],Lt=function(Yt){var sr=he[Yt];H.isInstanceOf("MultiFeature",sr)&&(sr.getFeatures().forEach(function(Wn){H.addFeature(Wn),Wn.properties=sr.properties,Ge.push(Wn.toGeoJSON()),H.select([Wn.id])}),H.deleteFeature(sr.id,{silent:!0}),St.push(sr.toGeoJSON()))},Ut=0;Ut<he.length;Ut++)Lt(Ut);Ge.length>1&&this.map.fire(C.UNCOMBINE_FEATURES,{createdFeatures:Ge,deletedFeatures:St}),this.fireActionable()}};var Ar=jt(B.VERTEX),Pr=jt(B.MIDPOINT),ei={fireUpdate:function(){this.map.fire(C.UPDATE,{action:k.CHANGE_COORDINATES,features:this.getSelected().map(function(H){return H.toGeoJSON()})})},fireActionable:function(H){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:H.selectedCoordPaths.length>0})},startDragging:function(H,he){this.map.dragPan.disable(),H.canDragMove=!0,H.dragMoveLocation=he.lngLat},stopDragging:function(H){this.map.dragPan.enable(),H.dragMoving=!1,H.canDragMove=!1,H.dragMoveLocation=null},onVertex:function(H,he){this.startDragging(H,he);var Ge=he.featureTarget.properties,St=H.selectedCoordPaths.indexOf(Ge.coord_path);Ft(he)||St!==-1?Ft(he)&&St===-1&&H.selectedCoordPaths.push(Ge.coord_path):H.selectedCoordPaths=[Ge.coord_path];var Lt=this.pathsToCoordinates(H.featureId,H.selectedCoordPaths);this.setSelectedCoordinates(Lt)},onMidpoint:function(H,he){this.startDragging(H,he);var Ge=he.featureTarget.properties;H.feature.addCoordinate(Ge.coord_path,Ge.lng,Ge.lat),this.fireUpdate(),H.selectedCoordPaths=[Ge.coord_path]},pathsToCoordinates:function(H,he){return he.map(function(Ge){return{feature_id:H,coord_path:Ge}})},onFeature:function(H,he){H.selectedCoordPaths.length===0?this.startDragging(H,he):this.stopDragging(H)},dragFeature:function(H,he,Ge){cr(this.getSelected(),Ge),H.dragMoveLocation=he.lngLat},dragVertex:function(H,he,Ge){for(var St=H.selectedCoordPaths.map(function(sr){return H.feature.getCoordinate(sr)}),Lt=fn(St.map(function(sr){return{type:M.FEATURE,properties:{},geometry:{type:M.POINT,coordinates:sr}}}),Ge),Ut=0;Ut<St.length;Ut++){var Yt=St[Ut];H.feature.updateCoordinate(H.selectedCoordPaths[Ut],Yt[0]+Lt.lng,Yt[1]+Lt.lat)}},clickNoTarget:function(){this.changeMode(P.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(P.SIMPLE_SELECT)},clickActiveFeature:function(H){H.selectedCoordPaths=[],this.clearSelectedCoordinates(),H.feature.changed()},onSetup:function(H){var he=H.featureId,Ge=this.getFeature(he);if(!Ge)throw new Error("You must provide a featureId to enter direct_select mode");if(Ge.type===M.POINT)throw new TypeError("direct_select mode doesn't handle point features");var St={featureId:he,feature:Ge,dragMoveLocation:H.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:H.coordPath?[H.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(he,St.selectedCoordPaths)),this.setSelected(he),ut.disable(this),this.setActionableState({trash:!0}),St},onStop:function(){ut.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(H,he,Ge){H.featureId===he.properties.id?(he.properties.active=z.ACTIVE,Ge(he),et(he,{map:this.map,midpoints:!0,selectedPaths:H.selectedCoordPaths}).forEach(Ge)):(he.properties.active=z.INACTIVE,Ge(he)),this.fireActionable(H)},onTrash:function(H){H.selectedCoordPaths.sort(function(he,Ge){return Ge.localeCompare(he,"en",{numeric:!0})}).forEach(function(he){return H.feature.removeCoordinate(he)}),this.fireUpdate(),H.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(H),H.feature.isValid()===!1&&(this.deleteFeature([H.featureId]),this.changeMode(P.SIMPLE_SELECT,{}))},onMouseMove:function(H,he){var Ge=Pt(he),St=Ar(he),Lt=Pr(he),Ut=H.selectedCoordPaths.length===0;return Ge&&Ut||St&&!Ut?this.updateUIClasses({mouse:b.MOVE}):this.updateUIClasses({mouse:b.NONE}),(St||Ge||Lt)&&H.dragMoving&&this.fireUpdate(),this.stopDragging(H),!0},onMouseOut:function(H){return H.dragMoving&&this.fireUpdate(),!0}};ei.onTouchStart=ei.onMouseDown=function(H,he){return Ar(he)?this.onVertex(H,he):Pt(he)?this.onFeature(H,he):Pr(he)?this.onMidpoint(H,he):void 0},ei.onDrag=function(H,he){if(H.canDragMove===!0){H.dragMoving=!0,he.originalEvent.stopPropagation();var Ge={lng:he.lngLat.lng-H.dragMoveLocation.lng,lat:he.lngLat.lat-H.dragMoveLocation.lat};H.selectedCoordPaths.length>0?this.dragVertex(H,he,Ge):this.dragFeature(H,he,Ge),H.dragMoveLocation=he.lngLat}},ei.onClick=function(H,he){return hn(he)?this.clickNoTarget(H,he):Pt(he)?this.clickActiveFeature(H,he):vn(he)?this.clickInactive(H,he):void this.stopDragging(H)},ei.onTap=function(H,he){return hn(he)?this.clickNoTarget(H,he):Pt(he)?this.clickActiveFeature(H,he):vn(he)?this.clickInactive(H,he):void 0},ei.onTouchEnd=ei.onMouseUp=function(H){H.dragMoving&&this.fireUpdate(),this.stopDragging(H)};var Xr={};function Hr(H,he){return!!H.lngLat&&H.lngLat.lng===he[0]&&H.lngLat.lat===he[1]}Xr.onSetup=function(){var H=this.newFeature({type:M.FEATURE,properties:{},geometry:{type:M.POINT,coordinates:[]}});return this.addFeature(H),this.clearSelectedFeatures(),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(A.POINT),this.setActionableState({trash:!0}),{point:H}},Xr.stopDrawingAndRemove=function(H){this.deleteFeature([H.point.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT)},Xr.onTap=Xr.onClick=function(H,he){this.updateUIClasses({mouse:b.MOVE}),H.point.updateCoordinate("",he.lngLat.lng,he.lngLat.lat),this.map.fire(C.CREATE,{features:[H.point.toGeoJSON()]}),this.changeMode(P.SIMPLE_SELECT,{featureIds:[H.point.id]})},Xr.onStop=function(H){this.activateUIButton(),H.point.getCoordinate().length||this.deleteFeature([H.point.id],{silent:!0})},Xr.toDisplayFeatures=function(H,he,Ge){var St=he.properties.id===H.point.id;if(he.properties.active=St?z.ACTIVE:z.INACTIVE,!St)return Ge(he)},Xr.onTrash=Xr.stopDrawingAndRemove,Xr.onKeyUp=function(H,he){if(In(he)||Pn(he))return this.stopDrawingAndRemove(H,he)};var gi={onSetup:function(){var H=this.newFeature({type:M.FEATURE,properties:{},geometry:{type:M.POLYGON,coordinates:[[]]}});return this.addFeature(H),this.clearSelectedFeatures(),ut.disable(this),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(A.POLYGON),this.setActionableState({trash:!0}),{polygon:H,currentVertexPosition:0}},clickAnywhere:function(H,he){if(H.currentVertexPosition>0&&Hr(he,H.polygon.coordinates[0][H.currentVertexPosition-1]))return this.changeMode(P.SIMPLE_SELECT,{featureIds:[H.polygon.id]});this.updateUIClasses({mouse:b.ADD}),H.polygon.updateCoordinate("0."+H.currentVertexPosition,he.lngLat.lng,he.lngLat.lat),H.currentVertexPosition++,H.polygon.updateCoordinate("0."+H.currentVertexPosition,he.lngLat.lng,he.lngLat.lat)},clickOnVertex:function(H){return this.changeMode(P.SIMPLE_SELECT,{featureIds:[H.polygon.id]})},onMouseMove:function(H,he){H.polygon.updateCoordinate("0."+H.currentVertexPosition,he.lngLat.lng,he.lngLat.lat),nn(he)&&this.updateUIClasses({mouse:b.POINTER})}};gi.onTap=gi.onClick=function(H,he){return nn(he)?this.clickOnVertex(H,he):this.clickAnywhere(H,he)},gi.onKeyUp=function(H,he){In(he)?(this.deleteFeature([H.polygon.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT)):Pn(he)&&this.changeMode(P.SIMPLE_SELECT,{featureIds:[H.polygon.id]})},gi.onStop=function(H){this.updateUIClasses({mouse:b.NONE}),ut.enable(this),this.activateUIButton(),this.getFeature(H.polygon.id)!==void 0&&(H.polygon.removeCoordinate("0."+H.currentVertexPosition),H.polygon.isValid()?this.map.fire(C.CREATE,{features:[H.polygon.toGeoJSON()]}):(this.deleteFeature([H.polygon.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT,{},{silent:!0})))},gi.toDisplayFeatures=function(H,he,Ge){var St=he.properties.id===H.polygon.id;if(he.properties.active=St?z.ACTIVE:z.INACTIVE,!St)return Ge(he);if(he.geometry.coordinates.length!==0){var Lt=he.geometry.coordinates[0].length;if(!(Lt<3)){if(he.properties.meta=B.FEATURE,Ge(Ce(H.polygon.id,he.geometry.coordinates[0][0],"0.0",!1)),Lt>3){var Ut=he.geometry.coordinates[0].length-3;Ge(Ce(H.polygon.id,he.geometry.coordinates[0][Ut],"0."+Ut,!1))}if(Lt<=4){var Yt=[[he.geometry.coordinates[0][0][0],he.geometry.coordinates[0][0][1]],[he.geometry.coordinates[0][1][0],he.geometry.coordinates[0][1][1]]];if(Ge({type:M.FEATURE,properties:he.properties,geometry:{coordinates:Yt,type:M.LINE_STRING}}),Lt===3)return}return Ge(he)}}},gi.onTrash=function(H){this.deleteFeature([H.polygon.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT)};var vi={onSetup:function(H){var he,Ge,St=(H=H||{}).featureId,Lt="forward";if(St){if(!(he=this.getFeature(St)))throw new Error("Could not find a feature with the provided featureId");var Ut=H.from;if(Ut&&Ut.type==="Feature"&&Ut.geometry&&Ut.geometry.type==="Point"&&(Ut=Ut.geometry),Ut&&Ut.type==="Point"&&Ut.coordinates&&Ut.coordinates.length===2&&(Ut=Ut.coordinates),!Ut||!Array.isArray(Ut))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Yt=he.coordinates.length-1;if(he.coordinates[Yt][0]===Ut[0]&&he.coordinates[Yt][1]===Ut[1])Ge=Yt+1,he.addCoordinate.apply(he,[Ge].concat(he.coordinates[Yt]));else{if(he.coordinates[0][0]!==Ut[0]||he.coordinates[0][1]!==Ut[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Lt="backwards",Ge=0,he.addCoordinate.apply(he,[Ge].concat(he.coordinates[0]))}}else he=this.newFeature({type:M.FEATURE,properties:{},geometry:{type:M.LINE_STRING,coordinates:[]}}),Ge=0,this.addFeature(he);return this.clearSelectedFeatures(),ut.disable(this),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(A.LINE),this.setActionableState({trash:!0}),{line:he,currentVertexPosition:Ge,direction:Lt}},clickAnywhere:function(H,he){if(H.currentVertexPosition>0&&Hr(he,H.line.coordinates[H.currentVertexPosition-1])||H.direction==="backwards"&&Hr(he,H.line.coordinates[H.currentVertexPosition+1]))return this.changeMode(P.SIMPLE_SELECT,{featureIds:[H.line.id]});this.updateUIClasses({mouse:b.ADD}),H.line.updateCoordinate(H.currentVertexPosition,he.lngLat.lng,he.lngLat.lat),H.direction==="forward"?(H.currentVertexPosition++,H.line.updateCoordinate(H.currentVertexPosition,he.lngLat.lng,he.lngLat.lat)):H.line.addCoordinate(0,he.lngLat.lng,he.lngLat.lat)},clickOnVertex:function(H){return this.changeMode(P.SIMPLE_SELECT,{featureIds:[H.line.id]})},onMouseMove:function(H,he){H.line.updateCoordinate(H.currentVertexPosition,he.lngLat.lng,he.lngLat.lat),nn(he)&&this.updateUIClasses({mouse:b.POINTER})}};vi.onTap=vi.onClick=function(H,he){if(nn(he))return this.clickOnVertex(H,he);this.clickAnywhere(H,he)},vi.onKeyUp=function(H,he){Pn(he)?this.changeMode(P.SIMPLE_SELECT,{featureIds:[H.line.id]}):In(he)&&(this.deleteFeature([H.line.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT))},vi.onStop=function(H){ut.enable(this),this.activateUIButton(),this.getFeature(H.line.id)!==void 0&&(H.line.removeCoordinate(""+H.currentVertexPosition),H.line.isValid()?this.map.fire(C.CREATE,{features:[H.line.toGeoJSON()]}):(this.deleteFeature([H.line.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT,{},{silent:!0})))},vi.onTrash=function(H){this.deleteFeature([H.line.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT)},vi.toDisplayFeatures=function(H,he,Ge){var St=he.properties.id===H.line.id;if(he.properties.active=St?z.ACTIVE:z.INACTIVE,!St)return Ge(he);he.geometry.coordinates.length<2||(he.properties.meta=B.FEATURE,Ge(Ce(H.line.id,he.geometry.coordinates[H.direction==="forward"?he.geometry.coordinates.length-2:1],""+(H.direction==="forward"?he.geometry.coordinates.length-2:1),!1)),Ge(he))};var yi={simple_select:hr,direct_select:ei,draw_point:Xr,draw_polygon:gi,draw_line_string:vi},Wi={defaultMode:P.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:_t,modes:yi,controls:{},userProperties:!1},ii={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Zr={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function $a(H,he){return H.map(function(Ge){return Ge.source?Ge:Ht(Ge,{id:Ge.id+"."+he,source:he==="hot"?w.HOT:w.COLD})})}var Di={exports:{}};(function(H,he){var Ge="__lodash_hash_undefined__",St=9007199254740991,Lt="[object Arguments]",Ut="[object Array]",Yt="[object Boolean]",sr="[object Date]",Wn="[object Error]",mr="[object Function]",vr="[object Map]",xr="[object Number]",Lr="[object Object]",Ti="[object Promise]",Yr="[object RegExp]",Cr="[object Set]",$n="[object String]",Rr="[object Symbol]",Ni="[object WeakMap]",ta="[object ArrayBuffer]",di="[object DataView]",js=/^\[object .+?Constructor\]$/,_i=/^(?:0|[1-9]\d*)$/,Ir={};Ir["[object Float32Array]"]=Ir["[object Float64Array]"]=Ir["[object Int8Array]"]=Ir["[object Int16Array]"]=Ir["[object Int32Array]"]=Ir["[object Uint8Array]"]=Ir["[object Uint8ClampedArray]"]=Ir["[object Uint16Array]"]=Ir["[object Uint32Array]"]=!0,Ir[Lt]=Ir[Ut]=Ir[ta]=Ir[Yt]=Ir[di]=Ir[sr]=Ir[Wn]=Ir[mr]=Ir[vr]=Ir[xr]=Ir[Lr]=Ir[Yr]=Ir[Cr]=Ir[$n]=Ir[Ni]=!1;var Gl=typeof Xm=="object"&&Xm&&Xm.Object===Object&&Xm,ji=typeof self=="object"&&self&&self.Object===Object&&self,Po=Gl||ji||Function("return this")(),vo=he&&!he.nodeType&&he,tl=vo&&H&&!H.nodeType&&H,Ro=tl&&tl.exports===vo,jo=Ro&&Gl.process,nl=function(){try{return jo&&jo.binding&&jo.binding("util")}catch{}}(),Es=nl&&nl.isTypedArray;function Kh(ln,On){for(var _r=-1,Dr=ln==null?0:ln.length;++_r<Dr;)if(On(ln[_r],_r,ln))return!0;return!1}function Zu(ln){var On=-1,_r=Array(ln.size);return ln.forEach(function(Dr,na){_r[++On]=[na,Dr]}),_r}function hc(ln){var On=-1,_r=Array(ln.size);return ln.forEach(function(Dr){_r[++On]=Dr}),_r}var Ml,Pa,Wa,eh=Array.prototype,Do=Function.prototype,ia=Object.prototype,hu=Po["__core-js_shared__"],fu=Do.toString,as=ia.hasOwnProperty,Nc=(Ml=/[^.]+$/.exec(hu&&hu.keys&&hu.keys.IE_PROTO||""))?"Symbol(src)_1."+Ml:"",kc=ia.toString,Fc=RegExp("^"+fu.call(as).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bc=Ro?Po.Buffer:void 0,Cu=Po.Symbol,Pu=Po.Uint8Array,Vo=ia.propertyIsEnumerable,fc=eh.splice,os=Cu?Cu.toStringTag:void 0,th=Object.getOwnPropertySymbols,Ru=Bc?Bc.isBuffer:void 0,Ts=(Pa=Object.keys,Wa=Object,function(ln){return Pa(Wa(ln))}),dc=al(Po,"DataView"),rl=al(Po,"Map"),du=al(Po,"Promise"),ee=al(Po,"Set"),Ue=al(Po,"WeakMap"),Mt=al(Object,"create"),Zt=Gs(dc),yn=Gs(rl),qn=Gs(du),fr=Gs(ee),Or=Gs(Ue),Gr=Cu?Cu.prototype:void 0,wi=Gr?Gr.valueOf:void 0;function oi(ln){var On=-1,_r=ln==null?0:ln.length;for(this.clear();++On<_r;){var Dr=ln[On];this.set(Dr[0],Dr[1])}}function Mi(ln){var On=-1,_r=ln==null?0:ln.length;for(this.clear();++On<_r;){var Dr=ln[On];this.set(Dr[0],Dr[1])}}function ya(ln){var On=-1,_r=ln==null?0:ln.length;for(this.clear();++On<_r;){var Dr=ln[On];this.set(Dr[0],Dr[1])}}function ka(ln){var On=-1,_r=ln==null?0:ln.length;for(this.__data__=new ya;++On<_r;)this.add(ln[On])}function aa(ln){var On=this.__data__=new Mi(ln);this.size=On.size}function yo(ln,On){var _r=ss(ln),Dr=!_r&&mc(ln),na=!_r&&!Dr&&zc(ln),Si=!_r&&!Dr&&!na&&Ku(ln),Xi=_r||Dr||na||Si,la=Xi?function(Qa,wa){for(var Va=-1,Ba=Array(Qa);++Va<Qa;)Ba[Va]=wa(Va);return Ba}(ln.length,String):[],Fa=la.length;for(var si in ln)!as.call(ln,si)||Xi&&(si=="length"||na&&(si=="offset"||si=="parent")||Si&&(si=="buffer"||si=="byteLength"||si=="byteOffset")||Ms(si,Fa))||la.push(si);return la}function _o(ln,On){for(var _r=ln.length;_r--;)if(pu(ln[_r][0],On))return _r;return-1}function So(ln){return ln==null?ln===void 0?"[object Undefined]":"[object Null]":os&&os in Object(ln)?function(On){var _r=as.call(On,os),Dr=On[os];try{On[os]=void 0;var na=!0}catch{}var Si=kc.call(On);return na&&(_r?On[os]=Dr:delete On[os]),Si}(ln):function(On){return kc.call(On)}(ln)}function il(ln){return bo(ln)&&So(ln)==Lt}function Vs(ln,On,_r,Dr,na){return ln===On||(ln==null||On==null||!bo(ln)&&!bo(On)?ln!=ln&&On!=On:function(Si,Xi,la,Fa,si,Qa){var wa=ss(Si),Va=ss(Xi),Ba=wa?Ut:Ra(Si),As=Va?Ut:Ra(Xi),Go=(Ba=Ba==Lt?Lr:Ba)==Lr,qs=(As=As==Lt?Lr:As)==Lr,Cs=Ba==As;if(Cs&&zc(Si)){if(!zc(Xi))return!1;wa=!0,Go=!1}if(Cs&&!Go)return Qa||(Qa=new aa),wa||Ku(Si)?ql(Si,Xi,la,Fa,si,Qa):function(Zi,Br,qo,Da,zi,bi,Sa){switch(qo){case di:if(Zi.byteLength!=Br.byteLength||Zi.byteOffset!=Br.byteOffset)return!1;Zi=Zi.buffer,Br=Br.buffer;case ta:return!(Zi.byteLength!=Br.byteLength||!bi(new Pu(Zi),new Pu(Br)));case Yt:case sr:case xr:return pu(+Zi,+Br);case Wn:return Zi.name==Br.name&&Zi.message==Br.message;case Yr:case $n:return Zi==Br+"";case vr:var La=Zu;case Cr:var ds=1&Da;if(La||(La=hc),Zi.size!=Br.size&&!ds)return!1;var gu=Sa.get(Zi);if(gu)return gu==Br;Da|=2,Sa.set(Zi,Br);var Lo=ql(La(Zi),La(Br),Da,zi,bi,Sa);return Sa.delete(Zi),Lo;case Rr:if(wi)return wi.call(Zi)==wi.call(Br)}return!1}(Si,Xi,Ba,la,Fa,si,Qa);if(!(1&la)){var ol=Go&&as.call(Si,"__wrapped__"),Cl=qs&&as.call(Xi,"__wrapped__");if(ol||Cl){var mu=ol?Si.value():Si,gc=Cl?Xi.value():Xi;return Qa||(Qa=new aa),si(mu,gc,la,Fa,Qa)}}return Cs?(Qa||(Qa=new aa),function(Zi,Br,qo,Da,zi,bi){var Sa=1&qo,La=pc(Zi),ds=La.length,gu=pc(Br).length;if(ds!=gu&&!Sa)return!1;for(var Lo=ds;Lo--;){var sl=La[Lo];if(!(Sa?sl in Br:as.call(Br,sl)))return!1}var Pl=bi.get(Zi);if(Pl&&bi.get(Br))return Pl==Br;var Hs=!0;bi.set(Zi,Br),bi.set(Br,Zi);for(var ls=Sa;++Lo<ds;){var Ga=Zi[sl=La[Lo]],$s=Br[sl];if(Da)var Rl=Sa?Da($s,Ga,sl,Br,Zi,bi):Da(Ga,$s,sl,Zi,Br,bi);if(!(Rl===void 0?Ga===$s||zi(Ga,$s,qo,Da,bi):Rl)){Hs=!1;break}ls||(ls=sl=="constructor")}if(Hs&&!ls){var Lu=Zi.constructor,vu=Br.constructor;Lu==vu||!("constructor"in Zi)||!("constructor"in Br)||typeof Lu=="function"&&Lu instanceof Lu&&typeof vu=="function"&&vu instanceof vu||(Hs=!1)}return bi.delete(Zi),bi.delete(Br),Hs}(Si,Xi,la,Fa,si,Qa)):!1}(ln,On,_r,Dr,Vs,na))}function Sh(ln){return!(!Al(ln)||function(On){return!!Nc&&Nc in On}(ln))&&($l(ln)?Fc:js).test(Gs(ln))}function Du(ln){if(_r=(On=ln)&&On.constructor,Dr=typeof _r=="function"&&_r.prototype||ia,On!==Dr)return Ts(ln);var On,_r,Dr,na=[];for(var Si in Object(ln))as.call(ln,Si)&&Si!="constructor"&&na.push(Si);return na}function ql(ln,On,_r,Dr,na,Si){var Xi=1&_r,la=ln.length,Fa=On.length;if(la!=Fa&&!(Xi&&Fa>la))return!1;var si=Si.get(ln);if(si&&Si.get(On))return si==On;var Qa=-1,wa=!0,Va=2&_r?new ka:void 0;for(Si.set(ln,On),Si.set(On,ln);++Qa<la;){var Ba=ln[Qa],As=On[Qa];if(Dr)var Go=Xi?Dr(As,Ba,Qa,On,ln,Si):Dr(Ba,As,Qa,ln,On,Si);if(Go!==void 0){if(Go)continue;wa=!1;break}if(Va){if(!Kh(On,function(qs,Cs){if(ol=Cs,!Va.has(ol)&&(Ba===qs||na(Ba,qs,_r,Dr,Si)))return Va.push(Cs);var ol})){wa=!1;break}}else if(Ba!==As&&!na(Ba,As,_r,Dr,Si)){wa=!1;break}}return Si.delete(ln),Si.delete(On),wa}function pc(ln){return function(On,_r,Dr){var na=_r(On);return ss(On)?na:function(Si,Xi){for(var la=-1,Fa=Xi.length,si=Si.length;++la<Fa;)Si[si+la]=Xi[la];return Si}(na,Dr(On))}(ln,Eh,Yu)}function Hl(ln,On){var _r,Dr,na=ln.__data__;return((Dr=typeof(_r=On))=="string"||Dr=="number"||Dr=="symbol"||Dr=="boolean"?_r!=="__proto__":_r===null)?na[typeof On=="string"?"string":"hash"]:na.map}function al(ln,On){var _r=function(Dr,na){return Dr==null?void 0:Dr[na]}(ln,On);return Sh(_r)?_r:void 0}oi.prototype.clear=function(){this.__data__=Mt?Mt(null):{},this.size=0},oi.prototype.delete=function(ln){var On=this.has(ln)&&delete this.__data__[ln];return this.size-=On?1:0,On},oi.prototype.get=function(ln){var On=this.__data__;if(Mt){var _r=On[ln];return _r===Ge?void 0:_r}return as.call(On,ln)?On[ln]:void 0},oi.prototype.has=function(ln){var On=this.__data__;return Mt?On[ln]!==void 0:as.call(On,ln)},oi.prototype.set=function(ln,On){var _r=this.__data__;return this.size+=this.has(ln)?0:1,_r[ln]=Mt&&On===void 0?Ge:On,this},Mi.prototype.clear=function(){this.__data__=[],this.size=0},Mi.prototype.delete=function(ln){var On=this.__data__,_r=_o(On,ln);return!(_r<0)&&(_r==On.length-1?On.pop():fc.call(On,_r,1),--this.size,!0)},Mi.prototype.get=function(ln){var On=this.__data__,_r=_o(On,ln);return _r<0?void 0:On[_r][1]},Mi.prototype.has=function(ln){return _o(this.__data__,ln)>-1},Mi.prototype.set=function(ln,On){var _r=this.__data__,Dr=_o(_r,ln);return Dr<0?(++this.size,_r.push([ln,On])):_r[Dr][1]=On,this},ya.prototype.clear=function(){this.size=0,this.__data__={hash:new oi,map:new(rl||Mi),string:new oi}},ya.prototype.delete=function(ln){var On=Hl(this,ln).delete(ln);return this.size-=On?1:0,On},ya.prototype.get=function(ln){return Hl(this,ln).get(ln)},ya.prototype.has=function(ln){return Hl(this,ln).has(ln)},ya.prototype.set=function(ln,On){var _r=Hl(this,ln),Dr=_r.size;return _r.set(ln,On),this.size+=_r.size==Dr?0:1,this},ka.prototype.add=ka.prototype.push=function(ln){return this.__data__.set(ln,Ge),this},ka.prototype.has=function(ln){return this.__data__.has(ln)},aa.prototype.clear=function(){this.__data__=new Mi,this.size=0},aa.prototype.delete=function(ln){var On=this.__data__,_r=On.delete(ln);return this.size=On.size,_r},aa.prototype.get=function(ln){return this.__data__.get(ln)},aa.prototype.has=function(ln){return this.__data__.has(ln)},aa.prototype.set=function(ln,On){var _r=this.__data__;if(_r instanceof Mi){var Dr=_r.__data__;if(!rl||Dr.length<199)return Dr.push([ln,On]),this.size=++_r.size,this;_r=this.__data__=new ya(Dr)}return _r.set(ln,On),this.size=_r.size,this};var Yu=th?function(ln){return ln==null?[]:(ln=Object(ln),function(On,_r){for(var Dr=-1,na=On==null?0:On.length,Si=0,Xi=[];++Dr<na;){var la=On[Dr];_r(la,Dr,On)&&(Xi[Si++]=la)}return Xi}(th(ln),function(On){return Vo.call(ln,On)}))}:function(){return[]},Ra=So;function Ms(ln,On){return!!(On=On??St)&&(typeof ln=="number"||_i.test(ln))&&ln>-1&&ln%1==0&&ln<On}function Gs(ln){if(ln!=null){try{return fu.call(ln)}catch{}try{return ln+""}catch{}}return""}function pu(ln,On){return ln===On||ln!=ln&&On!=On}(dc&&Ra(new dc(new ArrayBuffer(1)))!=di||rl&&Ra(new rl)!=vr||du&&Ra(du.resolve())!=Ti||ee&&Ra(new ee)!=Cr||Ue&&Ra(new Ue)!=Ni)&&(Ra=function(ln){var On=So(ln),_r=On==Lr?ln.constructor:void 0,Dr=_r?Gs(_r):"";if(Dr)switch(Dr){case Zt:return di;case yn:return vr;case qn:return Ti;case fr:return Cr;case Or:return Ni}return On});var mc=il(function(){return arguments}())?il:function(ln){return bo(ln)&&as.call(ln,"callee")&&!Vo.call(ln,"callee")},ss=Array.isArray,zc=Ru||function(){return!1};function $l(ln){if(!Al(ln))return!1;var On=So(ln);return On==mr||On=="[object GeneratorFunction]"||On=="[object AsyncFunction]"||On=="[object Proxy]"}function qi(ln){return typeof ln=="number"&&ln>-1&&ln%1==0&&ln<=St}function Al(ln){var On=typeof ln;return ln!=null&&(On=="object"||On=="function")}function bo(ln){return ln!=null&&typeof ln=="object"}var Ku=Es?function(ln){return function(On){return ln(On)}}(Es):function(ln){return bo(ln)&&qi(ln.length)&&!!Ir[So(ln)]};function Eh(ln){return(On=ln)!=null&&qi(On.length)&&!$l(On)?yo(ln):Du(ln);var On}H.exports=function(ln,On){return Vs(ln,On)}})(Di,Di.exports);var ja=r(Di.exports);function lo(H,he){return H.length===he.length&&JSON.stringify(H.map(function(Ge){return Ge}).sort())===JSON.stringify(he.map(function(Ge){return Ge}).sort())}var Gi={Polygon:Se,LineString:ye,Point:le,MultiPolygon:tt,MultiLineString:tt,MultiPoint:tt},ti=Object.freeze({__proto__:null,CommonSelectors:ir,constrainFeatureMovement:fn,createMidPoint:Qe,createSupplementaryPoints:et,createVertex:Ce,doubleClickZoom:ut,euclideanDistance:Te,featuresAt:se,getFeatureAtAndSetCursors:ue,isClick:pe,isEventAtCoordinates:Hr,isTap:De,mapEventToBoundingBox:K,ModeHandler:n,moveFeatures:cr,sortFeatures:j,stringSetsAreEqual:lo,StringSet:re,theme:_t,toDenseArray:He}),Pi=function(H,he){var Ge={options:H=function(Lt){Lt===void 0&&(Lt={});var Ut=Ht(Lt);return Lt.controls||(Ut.controls={}),Lt.displayControlsDefault===!1?Ut.controls=Ht(Zr,Lt.controls):Ut.controls=Ht(ii,Lt.controls),(Ut=Ht(Wi,Ut)).styles=$a(Ut.styles,"cold").concat($a(Ut.styles,"hot")),Ut}(H)};he=function(Lt,Ut){return Ut.modes=P,Ut.getFeatureIdsAt=function(Yt){return se.click({point:Yt},null,Lt).map(function(sr){return sr.properties.id})},Ut.getSelectedIds=function(){return Lt.store.getSelectedIds()},Ut.getSelected=function(){return{type:M.FEATURE_COLLECTION,features:Lt.store.getSelectedIds().map(function(Yt){return Lt.store.get(Yt)}).map(function(Yt){return Yt.toGeoJSON()})}},Ut.getSelectedPoints=function(){return{type:M.FEATURE_COLLECTION,features:Lt.store.getSelectedCoordinates().map(function(Yt){return{type:M.FEATURE,properties:{},geometry:{type:M.POINT,coordinates:Yt.coordinates}}})}},Ut.set=function(Yt){if(Yt.type===void 0||Yt.type!==M.FEATURE_COLLECTION||!Array.isArray(Yt.features))throw new Error("Invalid FeatureCollection");var sr=Lt.store.createRenderBatch(),Wn=Lt.store.getAllIds().slice(),mr=Ut.add(Yt),vr=new re(mr);return(Wn=Wn.filter(function(xr){return!vr.has(xr)})).length&&Ut.delete(Wn),sr(),mr},Ut.add=function(Yt){var sr=JSON.parse(JSON.stringify(zt(Yt))).features.map(function(Wn){if(Wn.id=Wn.id||fe(),Wn.geometry===null)throw new Error("Invalid geometry: null");if(Lt.store.get(Wn.id)===void 0||Lt.store.get(Wn.id).type!==Wn.geometry.type){var mr=Gi[Wn.geometry.type];if(mr===void 0)throw new Error("Invalid geometry type: "+Wn.geometry.type+".");var vr=new mr(Lt,Wn);Lt.store.add(vr)}else{var xr=Lt.store.get(Wn.id);xr.properties=Wn.properties,ja(xr.properties,Wn.properties)||Lt.store.featureChanged(xr.id),ja(xr.getCoordinates(),Wn.geometry.coordinates)||xr.incomingCoords(Wn.geometry.coordinates)}return Wn.id});return Lt.store.render(),sr},Ut.get=function(Yt){var sr=Lt.store.get(Yt);if(sr)return sr.toGeoJSON()},Ut.getAll=function(){return{type:M.FEATURE_COLLECTION,features:Lt.store.getAll().map(function(Yt){return Yt.toGeoJSON()})}},Ut.delete=function(Yt){return Lt.store.delete(Yt,{silent:!0}),Ut.getMode()!==P.DIRECT_SELECT||Lt.store.getSelectedIds().length?Lt.store.render():Lt.events.changeMode(P.SIMPLE_SELECT,void 0,{silent:!0}),Ut},Ut.deleteAll=function(){return Lt.store.delete(Lt.store.getAllIds(),{silent:!0}),Ut.getMode()===P.DIRECT_SELECT?Lt.events.changeMode(P.SIMPLE_SELECT,void 0,{silent:!0}):Lt.store.render(),Ut},Ut.changeMode=function(Yt,sr){return sr===void 0&&(sr={}),Yt===P.SIMPLE_SELECT&&Ut.getMode()===P.SIMPLE_SELECT?(lo(sr.featureIds||[],Lt.store.getSelectedIds())||(Lt.store.setSelected(sr.featureIds,{silent:!0}),Lt.store.render()),Ut):(Yt===P.DIRECT_SELECT&&Ut.getMode()===P.DIRECT_SELECT&&sr.featureId===Lt.store.getSelectedIds()[0]||Lt.events.changeMode(Yt,sr,{silent:!0}),Ut)},Ut.getMode=function(){return Lt.events.getMode()},Ut.trash=function(){return Lt.events.trash({silent:!0}),Ut},Ut.combineFeatures=function(){return Lt.events.combineFeatures({silent:!0}),Ut},Ut.uncombineFeatures=function(){return Lt.events.uncombineFeatures({silent:!0}),Ut},Ut.setFeatureProperty=function(Yt,sr,Wn){return Lt.store.setFeatureProperty(Yt,sr,Wn),Ut},Ut}(Ge,he),Ge.api=he;var St=Ee(Ge);return he.onAdd=St.onAdd,he.onRemove=St.onRemove,he.types=A,he.options=H,he};function xa(H){Pi(H,this)}return xa.modes=yi,xa.constants=W,xa.lib=ti,xa})}(ww)),ww.exports}LQ();const IQ=pd(Ln.jsx("path",{d:"M15 16v1.26l-6-3v-3.17L11.7 8H16V2h-6v4.9L7.3 10H3v6h5l7 3.5V22h6v-6z"}),"Polyline"),OQ=pd(Ln.jsx("path",{d:"m2 9 4 12h12l4-12-10-7z"}),"Pentagon"),NQ=pd(Ln.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),kQ=pd(Ln.jsx("path",{d:"m16.24 11.51 1.57-1.57-3.75-3.75-1.57 1.57-4.14-4.13c-.78-.78-2.05-.78-2.83 0l-1.9 1.9c-.78.78-.78 2.05 0 2.83l4.13 4.13L3 17.25V21h3.75l4.76-4.76 4.13 4.13c.95.95 2.23.6 2.83 0l1.9-1.9c.78-.78.78-2.05 0-2.83zm-7.06-.44L5.04 6.94l1.89-1.9L8.2 6.31 7.02 7.5l1.41 1.41 1.19-1.19 1.45 1.45zm7.88 7.89-4.13-4.13 1.9-1.9 1.45 1.45-1.19 1.19 1.41 1.41 1.19-1.19 1.27 1.27zm3.65-11.92c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.47-.47-1.12-.29-1.41 0l-1.83 1.83 3.75 3.75z"}),"DesignServices"),FQ=pd(Ln.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers"),BQ=pd(Ln.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}),"PictureAsPdf"),zQ=pd([Ln.jsx("circle",{cx:"7",cy:"14",r:"3"},"0"),Ln.jsx("circle",{cx:"11",cy:"6",r:"3"},"1"),Ln.jsx("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")],"ScatterPlot"),UQ=pd(Ln.jsx("path",{d:"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2zm6 9-4 5h12l-3-4-2.03 2.71zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5M20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2m0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4z"}),"Wallpaper");var hh={},Gv={},NT,j4;function XU(){if(j4)return NT;j4=1;var t=typeof Xm=="object"&&Xm&&Xm.Object===Object&&Xm;return NT=t,NT}var kT,V4;function dp(){if(V4)return kT;V4=1;var t=XU(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return kT=n,kT}var FT,G4;function hx(){if(G4)return FT;G4=1;var t=dp(),e=t.Symbol;return FT=e,FT}var BT,q4;function jQ(){if(q4)return BT;q4=1;var t=hx(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function o(l){var a=n.call(l,i),h=l[i];try{l[i]=void 0;var f=!0}catch{}var v=r.call(l);return f&&(a?l[i]=h:delete l[i]),v}return BT=o,BT}var zT,H4;function VQ(){if(H4)return zT;H4=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return zT=n,zT}var UT,$4;function H0(){if($4)return UT;$4=1;var t=hx(),e=jQ(),n=VQ(),r="[object Null]",i="[object Undefined]",o=t?t.toStringTag:void 0;function l(a){return a==null?a===void 0?i:r:o&&o in Object(a)?e(a):n(a)}return UT=l,UT}var jT,W4;function vd(){if(W4)return jT;W4=1;var t=Array.isArray;return jT=t,jT}var VT,X4;function lm(){if(X4)return VT;X4=1;function t(e){return e!=null&&typeof e=="object"}return VT=t,VT}var GT,Z4;function GQ(){if(Z4)return GT;Z4=1;var t=H0(),e=vd(),n=lm(),r="[object String]";function i(o){return typeof o=="string"||!e(o)&&n(o)&&t(o)==r}return GT=i,GT}var qT,Y4;function qQ(){if(Y4)return qT;Y4=1;function t(e){return function(n,r,i){for(var o=-1,l=Object(n),a=i(n),h=a.length;h--;){var f=a[e?h:++o];if(r(l[f],f,l)===!1)break}return n}}return qT=t,qT}var HT,K4;function HQ(){if(K4)return HT;K4=1;var t=qQ(),e=t();return HT=e,HT}var $T,J4;function $Q(){if(J4)return $T;J4=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return $T=t,$T}var WT,Q4;function WQ(){if(Q4)return WT;Q4=1;var t=H0(),e=lm(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return WT=r,WT}var XT,eO;function ZU(){if(eO)return XT;eO=1;var t=WQ(),e=lm(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,o=t(function(){return arguments}())?t:function(l){return e(l)&&r.call(l,"callee")&&!i.call(l,"callee")};return XT=o,XT}var tb={exports:{}},ZT,tO;function XQ(){if(tO)return ZT;tO=1;function t(){return!1}return ZT=t,ZT}tb.exports;var nO;function rD(){return nO||(nO=1,function(t,e){var n=dp(),r=XQ(),i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,l=o&&o.exports===i,a=l?n.Buffer:void 0,h=a?a.isBuffer:void 0,f=h||r;t.exports=f}(tb,tb.exports)),tb.exports}var YT,rO;function YU(){if(rO)return YT;rO=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var o=typeof r;return i=i??t,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return YT=n,YT}var KT,iO;function iD(){if(iO)return KT;iO=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return KT=e,KT}var JT,aO;function ZQ(){if(aO)return JT;aO=1;var t=H0(),e=iD(),n=lm(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",l="[object Date]",a="[object Error]",h="[object Function]",f="[object Map]",v="[object Number]",y="[object Object]",w="[object RegExp]",b="[object Set]",A="[object String]",M="[object WeakMap]",P="[object ArrayBuffer]",C="[object DataView]",k="[object Float32Array]",B="[object Float64Array]",z="[object Int8Array]",q="[object Int16Array]",V="[object Int32Array]",W="[object Uint8Array]",Y="[object Uint8ClampedArray]",Z="[object Uint16Array]",j="[object Uint32Array]",K={};K[k]=K[B]=K[z]=K[q]=K[V]=K[W]=K[Y]=K[Z]=K[j]=!0,K[r]=K[i]=K[P]=K[o]=K[C]=K[l]=K[a]=K[h]=K[f]=K[v]=K[y]=K[w]=K[b]=K[A]=K[M]=!1;function re(ie){return n(ie)&&e(ie.length)&&!!K[t(ie)]}return JT=re,JT}var QT,oO;function aD(){if(oO)return QT;oO=1;function t(e){return function(n){return e(n)}}return QT=t,QT}var nb={exports:{}};nb.exports;var sO;function oD(){return sO||(sO=1,function(t,e){var n=XU(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,l=o&&n.process,a=function(){try{var h=i&&i.require&&i.require("util").types;return h||l&&l.binding&&l.binding("util")}catch{}}();t.exports=a}(nb,nb.exports)),nb.exports}var eM,lO;function KU(){if(lO)return eM;lO=1;var t=ZQ(),e=aD(),n=oD(),r=n&&n.isTypedArray,i=r?e(r):t;return eM=i,eM}var tM,uO;function JU(){if(uO)return tM;uO=1;var t=$Q(),e=ZU(),n=vd(),r=rD(),i=YU(),o=KU(),l=Object.prototype,a=l.hasOwnProperty;function h(f,v){var y=n(f),w=!y&&e(f),b=!y&&!w&&r(f),A=!y&&!w&&!b&&o(f),M=y||w||b||A,P=M?t(f.length,String):[],C=P.length;for(var k in f)(v||a.call(f,k))&&!(M&&(k=="length"||b&&(k=="offset"||k=="parent")||A&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||i(k,C)))&&P.push(k);return P}return tM=h,tM}var nM,cO;function sD(){if(cO)return nM;cO=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return nM=e,nM}var rM,hO;function QU(){if(hO)return rM;hO=1;function t(e,n){return function(r){return e(n(r))}}return rM=t,rM}var iM,fO;function YQ(){if(fO)return iM;fO=1;var t=QU(),e=t(Object.keys,Object);return iM=e,iM}var aM,dO;function KQ(){if(dO)return aM;dO=1;var t=sD(),e=YQ(),n=Object.prototype,r=n.hasOwnProperty;function i(o){if(!t(o))return e(o);var l=[];for(var a in Object(o))r.call(o,a)&&a!="constructor"&&l.push(a);return l}return aM=i,aM}var oM,pO;function R_(){if(pO)return oM;pO=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return oM=t,oM}var sM,mO;function e7(){if(mO)return sM;mO=1;var t=H0(),e=R_(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function l(a){if(!e(a))return!1;var h=t(a);return h==r||h==i||h==n||h==o}return sM=l,sM}var lM,gO;function tE(){if(gO)return lM;gO=1;var t=e7(),e=iD();function n(r){return r!=null&&e(r.length)&&!t(r)}return lM=n,lM}var uM,vO;function fx(){if(vO)return uM;vO=1;var t=JU(),e=KQ(),n=tE();function r(i){return n(i)?t(i):e(i)}return uM=r,uM}var cM,yO;function t7(){if(yO)return cM;yO=1;var t=HQ(),e=fx();function n(r,i){return r&&t(r,i,e)}return cM=n,cM}var hM,_O;function n7(){if(_O)return hM;_O=1;function t(e){return e}return hM=t,hM}var fM,bO;function JQ(){if(bO)return fM;bO=1;var t=n7();function e(n){return typeof n=="function"?n:t}return fM=e,fM}var dM,xO;function lD(){if(xO)return dM;xO=1;var t=t7(),e=JQ();function n(r,i){return r&&t(r,e(i))}return dM=n,dM}var pM,wO;function uD(){if(wO)return pM;wO=1;var t=QU(),e=t(Object.getPrototypeOf,Object);return pM=e,pM}var mM,SO;function QQ(){if(SO)return mM;SO=1;var t=H0(),e=uD(),n=lm(),r="[object Object]",i=Function.prototype,o=Object.prototype,l=i.toString,a=o.hasOwnProperty,h=l.call(Object);function f(v){if(!n(v)||t(v)!=r)return!1;var y=e(v);if(y===null)return!0;var w=a.call(y,"constructor")&&y.constructor;return typeof w=="function"&&w instanceof w&&l.call(w)==h}return mM=f,mM}var gM,EO;function r7(){if(EO)return gM;EO=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o}return gM=t,gM}var vM,TO;function eee(){if(TO)return vM;TO=1;function t(){this.__data__=[],this.size=0}return vM=t,vM}var yM,MO;function cD(){if(MO)return yM;MO=1;function t(e,n){return e===n||e!==e&&n!==n}return yM=t,yM}var _M,AO;function nE(){if(AO)return _M;AO=1;var t=cD();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return _M=e,_M}var bM,CO;function tee(){if(CO)return bM;CO=1;var t=nE(),e=Array.prototype,n=e.splice;function r(i){var o=this.__data__,l=t(o,i);if(l<0)return!1;var a=o.length-1;return l==a?o.pop():n.call(o,l,1),--this.size,!0}return bM=r,bM}var xM,PO;function nee(){if(PO)return xM;PO=1;var t=nE();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return xM=e,xM}var wM,RO;function ree(){if(RO)return wM;RO=1;var t=nE();function e(n){return t(this.__data__,n)>-1}return wM=e,wM}var SM,DO;function iee(){if(DO)return SM;DO=1;var t=nE();function e(n,r){var i=this.__data__,o=t(i,n);return o<0?(++this.size,i.push([n,r])):i[o][1]=r,this}return SM=e,SM}var EM,LO;function rE(){if(LO)return EM;LO=1;var t=eee(),e=tee(),n=nee(),r=ree(),i=iee();function o(l){var a=-1,h=l==null?0:l.length;for(this.clear();++a<h;){var f=l[a];this.set(f[0],f[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,EM=o,EM}var TM,IO;function aee(){if(IO)return TM;IO=1;var t=rE();function e(){this.__data__=new t,this.size=0}return TM=e,TM}var MM,OO;function oee(){if(OO)return MM;OO=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return MM=t,MM}var AM,NO;function see(){if(NO)return AM;NO=1;function t(e){return this.__data__.get(e)}return AM=t,AM}var CM,kO;function lee(){if(kO)return CM;kO=1;function t(e){return this.__data__.has(e)}return CM=t,CM}var PM,FO;function uee(){if(FO)return PM;FO=1;var t=dp(),e=t["__core-js_shared__"];return PM=e,PM}var RM,BO;function cee(){if(BO)return RM;BO=1;var t=uee(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return RM=n,RM}var DM,zO;function i7(){if(zO)return DM;zO=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return DM=n,DM}var LM,UO;function hee(){if(UO)return LM;UO=1;var t=e7(),e=cee(),n=R_(),r=i7(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,l=Function.prototype,a=Object.prototype,h=l.toString,f=a.hasOwnProperty,v=RegExp("^"+h.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y(w){if(!n(w)||e(w))return!1;var b=t(w)?v:o;return b.test(r(w))}return LM=y,LM}var IM,jO;function fee(){if(jO)return IM;jO=1;function t(e,n){return e==null?void 0:e[n]}return IM=t,IM}var OM,VO;function $0(){if(VO)return OM;VO=1;var t=hee(),e=fee();function n(r,i){var o=e(r,i);return t(o)?o:void 0}return OM=n,OM}var NM,GO;function hD(){if(GO)return NM;GO=1;var t=$0(),e=dp(),n=t(e,"Map");return NM=n,NM}var kM,qO;function iE(){if(qO)return kM;qO=1;var t=$0(),e=t(Object,"create");return kM=e,kM}var FM,HO;function dee(){if(HO)return FM;HO=1;var t=iE();function e(){this.__data__=t?t(null):{},this.size=0}return FM=e,FM}var BM,$O;function pee(){if($O)return BM;$O=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return BM=t,BM}var zM,WO;function mee(){if(WO)return zM;WO=1;var t=iE(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(o){var l=this.__data__;if(t){var a=l[o];return a===e?void 0:a}return r.call(l,o)?l[o]:void 0}return zM=i,zM}var UM,XO;function gee(){if(XO)return UM;XO=1;var t=iE(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var o=this.__data__;return t?o[i]!==void 0:n.call(o,i)}return UM=r,UM}var jM,ZO;function vee(){if(ZO)return jM;ZO=1;var t=iE(),e="__lodash_hash_undefined__";function n(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=t&&i===void 0?e:i,this}return jM=n,jM}var VM,YO;function yee(){if(YO)return VM;YO=1;var t=dee(),e=pee(),n=mee(),r=gee(),i=vee();function o(l){var a=-1,h=l==null?0:l.length;for(this.clear();++a<h;){var f=l[a];this.set(f[0],f[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,VM=o,VM}var GM,KO;function _ee(){if(KO)return GM;KO=1;var t=yee(),e=rE(),n=hD();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return GM=r,GM}var qM,JO;function bee(){if(JO)return qM;JO=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return qM=t,qM}var HM,QO;function aE(){if(QO)return HM;QO=1;var t=bee();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return HM=e,HM}var $M,eN;function xee(){if(eN)return $M;eN=1;var t=aE();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return $M=e,$M}var WM,tN;function wee(){if(tN)return WM;tN=1;var t=aE();function e(n){return t(this,n).get(n)}return WM=e,WM}var XM,nN;function See(){if(nN)return XM;nN=1;var t=aE();function e(n){return t(this,n).has(n)}return XM=e,XM}var ZM,rN;function Eee(){if(rN)return ZM;rN=1;var t=aE();function e(n,r){var i=t(this,n),o=i.size;return i.set(n,r),this.size+=i.size==o?0:1,this}return ZM=e,ZM}var YM,iN;function fD(){if(iN)return YM;iN=1;var t=_ee(),e=xee(),n=wee(),r=See(),i=Eee();function o(l){var a=-1,h=l==null?0:l.length;for(this.clear();++a<h;){var f=l[a];this.set(f[0],f[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,YM=o,YM}var KM,aN;function Tee(){if(aN)return KM;aN=1;var t=rE(),e=hD(),n=fD(),r=200;function i(o,l){var a=this.__data__;if(a instanceof t){var h=a.__data__;if(!e||h.length<r-1)return h.push([o,l]),this.size=++a.size,this;a=this.__data__=new n(h)}return a.set(o,l),this.size=a.size,this}return KM=i,KM}var JM,oN;function dD(){if(oN)return JM;oN=1;var t=rE(),e=aee(),n=oee(),r=see(),i=lee(),o=Tee();function l(a){var h=this.__data__=new t(a);this.size=h.size}return l.prototype.clear=e,l.prototype.delete=n,l.prototype.get=r,l.prototype.has=i,l.prototype.set=o,JM=l,JM}var QM,sN;function Mee(){if(sN)return QM;sN=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return QM=e,QM}var e5,lN;function Aee(){if(lN)return e5;lN=1;function t(e){return this.__data__.has(e)}return e5=t,e5}var t5,uN;function Cee(){if(uN)return t5;uN=1;var t=fD(),e=Mee(),n=Aee();function r(i){var o=-1,l=i==null?0:i.length;for(this.__data__=new t;++o<l;)this.add(i[o])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,t5=r,t5}var n5,cN;function Pee(){if(cN)return n5;cN=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return n5=t,n5}var r5,hN;function Ree(){if(hN)return r5;hN=1;function t(e,n){return e.has(n)}return r5=t,r5}var i5,fN;function a7(){if(fN)return i5;fN=1;var t=Cee(),e=Pee(),n=Ree(),r=1,i=2;function o(l,a,h,f,v,y){var w=h&r,b=l.length,A=a.length;if(b!=A&&!(w&&A>b))return!1;var M=y.get(l),P=y.get(a);if(M&&P)return M==a&&P==l;var C=-1,k=!0,B=h&i?new t:void 0;for(y.set(l,a),y.set(a,l);++C<b;){var z=l[C],q=a[C];if(f)var V=w?f(q,z,C,a,l,y):f(z,q,C,l,a,y);if(V!==void 0){if(V)continue;k=!1;break}if(B){if(!e(a,function(W,Y){if(!n(B,Y)&&(z===W||v(z,W,h,f,y)))return B.push(Y)})){k=!1;break}}else if(!(z===q||v(z,q,h,f,y))){k=!1;break}}return y.delete(l),y.delete(a),k}return i5=o,i5}var a5,dN;function o7(){if(dN)return a5;dN=1;var t=dp(),e=t.Uint8Array;return a5=e,a5}var o5,pN;function Dee(){if(pN)return o5;pN=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,o){r[++n]=[o,i]}),r}return o5=t,o5}var s5,mN;function Lee(){if(mN)return s5;mN=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return s5=t,s5}var l5,gN;function Iee(){if(gN)return l5;gN=1;var t=hx(),e=o7(),n=cD(),r=a7(),i=Dee(),o=Lee(),l=1,a=2,h="[object Boolean]",f="[object Date]",v="[object Error]",y="[object Map]",w="[object Number]",b="[object RegExp]",A="[object Set]",M="[object String]",P="[object Symbol]",C="[object ArrayBuffer]",k="[object DataView]",B=t?t.prototype:void 0,z=B?B.valueOf:void 0;function q(V,W,Y,Z,j,K,re){switch(Y){case k:if(V.byteLength!=W.byteLength||V.byteOffset!=W.byteOffset)return!1;V=V.buffer,W=W.buffer;case C:return!(V.byteLength!=W.byteLength||!K(new e(V),new e(W)));case h:case f:case w:return n(+V,+W);case v:return V.name==W.name&&V.message==W.message;case b:case M:return V==W+"";case y:var ie=i;case A:var se=Z&l;if(ie||(ie=o),V.size!=W.size&&!se)return!1;var de=re.get(V);if(de)return de==W;Z|=a,re.set(V,W);var ue=r(ie(V),ie(W),Z,j,K,re);return re.delete(V),ue;case P:if(z)return z.call(V)==z.call(W)}return!1}return l5=q,l5}var u5,vN;function s7(){if(vN)return u5;vN=1;function t(e,n){for(var r=-1,i=n.length,o=e.length;++r<i;)e[o+r]=n[r];return e}return u5=t,u5}var c5,yN;function l7(){if(yN)return c5;yN=1;var t=s7(),e=vd();function n(r,i,o){var l=i(r);return e(r)?l:t(l,o(r))}return c5=n,c5}var h5,_N;function Oee(){if(_N)return h5;_N=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=0,l=[];++r<i;){var a=e[r];n(a,r,e)&&(l[o++]=a)}return l}return h5=t,h5}var f5,bN;function u7(){if(bN)return f5;bN=1;function t(){return[]}return f5=t,f5}var d5,xN;function pD(){if(xN)return d5;xN=1;var t=Oee(),e=u7(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(l){return l==null?[]:(l=Object(l),t(i(l),function(a){return r.call(l,a)}))}:e;return d5=o,d5}var p5,wN;function c7(){if(wN)return p5;wN=1;var t=l7(),e=pD(),n=fx();function r(i){return t(i,n,e)}return p5=r,p5}var m5,SN;function Nee(){if(SN)return m5;SN=1;var t=c7(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(o,l,a,h,f,v){var y=a&e,w=t(o),b=w.length,A=t(l),M=A.length;if(b!=M&&!y)return!1;for(var P=b;P--;){var C=w[P];if(!(y?C in l:r.call(l,C)))return!1}var k=v.get(o),B=v.get(l);if(k&&B)return k==l&&B==o;var z=!0;v.set(o,l),v.set(l,o);for(var q=y;++P<b;){C=w[P];var V=o[C],W=l[C];if(h)var Y=y?h(W,V,C,l,o,v):h(V,W,C,o,l,v);if(!(Y===void 0?V===W||f(V,W,a,h,v):Y)){z=!1;break}q||(q=C=="constructor")}if(z&&!q){var Z=o.constructor,j=l.constructor;Z!=j&&"constructor"in o&&"constructor"in l&&!(typeof Z=="function"&&Z instanceof Z&&typeof j=="function"&&j instanceof j)&&(z=!1)}return v.delete(o),v.delete(l),z}return m5=i,m5}var g5,EN;function kee(){if(EN)return g5;EN=1;var t=$0(),e=dp(),n=t(e,"DataView");return g5=n,g5}var v5,TN;function Fee(){if(TN)return v5;TN=1;var t=$0(),e=dp(),n=t(e,"Promise");return v5=n,v5}var y5,MN;function Bee(){if(MN)return y5;MN=1;var t=$0(),e=dp(),n=t(e,"Set");return y5=n,y5}var _5,AN;function zee(){if(AN)return _5;AN=1;var t=$0(),e=dp(),n=t(e,"WeakMap");return _5=n,_5}var b5,CN;function oE(){if(CN)return b5;CN=1;var t=kee(),e=hD(),n=Fee(),r=Bee(),i=zee(),o=H0(),l=i7(),a="[object Map]",h="[object Object]",f="[object Promise]",v="[object Set]",y="[object WeakMap]",w="[object DataView]",b=l(t),A=l(e),M=l(n),P=l(r),C=l(i),k=o;return(t&&k(new t(new ArrayBuffer(1)))!=w||e&&k(new e)!=a||n&&k(n.resolve())!=f||r&&k(new r)!=v||i&&k(new i)!=y)&&(k=function(B){var z=o(B),q=z==h?B.constructor:void 0,V=q?l(q):"";if(V)switch(V){case b:return w;case A:return a;case M:return f;case P:return v;case C:return y}return z}),b5=k,b5}var x5,PN;function Uee(){if(PN)return x5;PN=1;var t=dD(),e=a7(),n=Iee(),r=Nee(),i=oE(),o=vd(),l=rD(),a=KU(),h=1,f="[object Arguments]",v="[object Array]",y="[object Object]",w=Object.prototype,b=w.hasOwnProperty;function A(M,P,C,k,B,z){var q=o(M),V=o(P),W=q?v:i(M),Y=V?v:i(P);W=W==f?y:W,Y=Y==f?y:Y;var Z=W==y,j=Y==y,K=W==Y;if(K&&l(M)){if(!l(P))return!1;q=!0,Z=!1}if(K&&!Z)return z||(z=new t),q||a(M)?e(M,P,C,k,B,z):n(M,P,W,C,k,B,z);if(!(C&h)){var re=Z&&b.call(M,"__wrapped__"),ie=j&&b.call(P,"__wrapped__");if(re||ie){var se=re?M.value():M,de=ie?P.value():P;return z||(z=new t),B(se,de,C,k,z)}}return K?(z||(z=new t),r(M,P,C,k,B,z)):!1}return x5=A,x5}var w5,RN;function h7(){if(RN)return w5;RN=1;var t=Uee(),e=lm();function n(r,i,o,l,a){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,o,l,n,a)}return w5=n,w5}var S5,DN;function jee(){if(DN)return S5;DN=1;var t=dD(),e=h7(),n=1,r=2;function i(o,l,a,h){var f=a.length,v=f,y=!h;if(o==null)return!v;for(o=Object(o);f--;){var w=a[f];if(y&&w[2]?w[1]!==o[w[0]]:!(w[0]in o))return!1}for(;++f<v;){w=a[f];var b=w[0],A=o[b],M=w[1];if(y&&w[2]){if(A===void 0&&!(b in o))return!1}else{var P=new t;if(h)var C=h(A,M,b,o,l,P);if(!(C===void 0?e(M,A,n|r,h,P):C))return!1}}return!0}return S5=i,S5}var E5,LN;function f7(){if(LN)return E5;LN=1;var t=R_();function e(n){return n===n&&!t(n)}return E5=e,E5}var T5,IN;function Vee(){if(IN)return T5;IN=1;var t=f7(),e=fx();function n(r){for(var i=e(r),o=i.length;o--;){var l=i[o],a=r[l];i[o]=[l,a,t(a)]}return i}return T5=n,T5}var M5,ON;function d7(){if(ON)return M5;ON=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return M5=t,M5}var A5,NN;function Gee(){if(NN)return A5;NN=1;var t=jee(),e=Vee(),n=d7();function r(i){var o=e(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(l){return l===i||t(l,i,o)}}return A5=r,A5}var C5,kN;function mD(){if(kN)return C5;kN=1;var t=H0(),e=lm(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return C5=r,C5}var P5,FN;function gD(){if(FN)return P5;FN=1;var t=vd(),e=mD(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,l){if(t(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:r.test(o)||!n.test(o)||l!=null&&o in Object(l)}return P5=i,P5}var R5,BN;function qee(){if(BN)return R5;BN=1;var t=fD(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var l=arguments,a=i?i.apply(this,l):l[0],h=o.cache;if(h.has(a))return h.get(a);var f=r.apply(this,l);return o.cache=h.set(a,f)||h,f};return o.cache=new(n.Cache||t),o}return n.Cache=t,R5=n,R5}var D5,zN;function Hee(){if(zN)return D5;zN=1;var t=qee(),e=500;function n(r){var i=t(r,function(l){return o.size===e&&o.clear(),l}),o=i.cache;return i}return D5=n,D5}var L5,UN;function $ee(){if(UN)return L5;UN=1;var t=Hee(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(l,a,h,f){o.push(h?f.replace(n,"$1"):a||l)}),o});return L5=r,L5}var I5,jN;function Wee(){if(jN)return I5;jN=1;var t=hx(),e=r7(),n=vd(),r=mD(),i=t?t.prototype:void 0,o=i?i.toString:void 0;function l(a){if(typeof a=="string")return a;if(n(a))return e(a,l)+"";if(r(a))return o?o.call(a):"";var h=a+"";return h=="0"&&1/a==-1/0?"-0":h}return I5=l,I5}var O5,VN;function Xee(){if(VN)return O5;VN=1;var t=Wee();function e(n){return n==null?"":t(n)}return O5=e,O5}var N5,GN;function p7(){if(GN)return N5;GN=1;var t=vd(),e=gD(),n=$ee(),r=Xee();function i(o,l){return t(o)?o:e(o,l)?[o]:n(r(o))}return N5=i,N5}var k5,qN;function sE(){if(qN)return k5;qN=1;var t=mD();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return k5=e,k5}var F5,HN;function m7(){if(HN)return F5;HN=1;var t=p7(),e=sE();function n(r,i){i=t(i,r);for(var o=0,l=i.length;r!=null&&o<l;)r=r[e(i[o++])];return o&&o==l?r:void 0}return F5=n,F5}var B5,$N;function Zee(){if($N)return B5;$N=1;var t=m7();function e(n,r,i){var o=n==null?void 0:t(n,r);return o===void 0?i:o}return B5=e,B5}var z5,WN;function Yee(){if(WN)return z5;WN=1;function t(e,n){return e!=null&&n in Object(e)}return z5=t,z5}var U5,XN;function Kee(){if(XN)return U5;XN=1;var t=p7(),e=ZU(),n=vd(),r=YU(),i=iD(),o=sE();function l(a,h,f){h=t(h,a);for(var v=-1,y=h.length,w=!1;++v<y;){var b=o(h[v]);if(!(w=a!=null&&f(a,b)))break;a=a[b]}return w||++v!=y?w:(y=a==null?0:a.length,!!y&&i(y)&&r(b,y)&&(n(a)||e(a)))}return U5=l,U5}var j5,ZN;function Jee(){if(ZN)return j5;ZN=1;var t=Yee(),e=Kee();function n(r,i){return r!=null&&e(r,i,t)}return j5=n,j5}var V5,YN;function Qee(){if(YN)return V5;YN=1;var t=h7(),e=Zee(),n=Jee(),r=gD(),i=f7(),o=d7(),l=sE(),a=1,h=2;function f(v,y){return r(v)&&i(y)?o(l(v),y):function(w){var b=e(w,v);return b===void 0&&b===y?n(w,v):t(y,b,a|h)}}return V5=f,V5}var G5,KN;function ete(){if(KN)return G5;KN=1;function t(e){return function(n){return n==null?void 0:n[e]}}return G5=t,G5}var q5,JN;function tte(){if(JN)return q5;JN=1;var t=m7();function e(n){return function(r){return t(r,n)}}return q5=e,q5}var H5,QN;function nte(){if(QN)return H5;QN=1;var t=ete(),e=tte(),n=gD(),r=sE();function i(o){return n(o)?t(r(o)):e(o)}return H5=i,H5}var $5,ek;function rte(){if(ek)return $5;ek=1;var t=Gee(),e=Qee(),n=n7(),r=vd(),i=nte();function o(l){return typeof l=="function"?l:l==null?n:typeof l=="object"?r(l)?e(l[0],l[1]):t(l):i(l)}return $5=o,$5}var W5,tk;function ite(){if(tk)return W5;tk=1;var t=tE();function e(n,r){return function(i,o){if(i==null)return i;if(!t(i))return n(i,o);for(var l=i.length,a=r?l:-1,h=Object(i);(r?a--:++a<l)&&o(h[a],a,h)!==!1;);return i}}return W5=e,W5}var X5,nk;function ate(){if(nk)return X5;nk=1;var t=t7(),e=ite(),n=e(t);return X5=n,X5}var Z5,rk;function ote(){if(rk)return Z5;rk=1;var t=ate(),e=tE();function n(r,i){var o=-1,l=e(r)?Array(r.length):[];return t(r,function(a,h,f){l[++o]=i(a,h,f)}),l}return Z5=n,Z5}var Y5,ik;function ste(){if(ik)return Y5;ik=1;var t=r7(),e=rte(),n=ote(),r=vd();function i(o,l){var a=r(o)?t:n;return a(o,e(l,3))}return Y5=i,Y5}var ak;function lte(){if(ak)return Gv;ak=1,Object.defineProperty(Gv,"__esModule",{value:!0}),Gv.flattenNames=void 0;var t=GQ(),e=h(t),n=lD(),r=h(n),i=QQ(),o=h(i),l=ste(),a=h(l);function h(v){return v&&v.__esModule?v:{default:v}}var f=Gv.flattenNames=function v(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=[];return(0,a.default)(y,function(b){Array.isArray(b)?v(b).map(function(A){return w.push(A)}):(0,o.default)(b)?(0,r.default)(b,function(A,M){A===!0&&w.push(M),w.push(M+"-"+A)}):(0,e.default)(b)&&w.push(b)}),w};return Gv.default=f,Gv}var qv={},K5,ok;function ute(){if(ok)return K5;ok=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return K5=t,K5}var J5,sk;function cte(){if(sk)return J5;sk=1;var t=$0(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return J5=e,J5}var Q5,lk;function g7(){if(lk)return Q5;lk=1;var t=cte();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Q5=e,Q5}var eA,uk;function v7(){if(uk)return eA;uk=1;var t=g7(),e=cD(),n=Object.prototype,r=n.hasOwnProperty;function i(o,l,a){var h=o[l];(!(r.call(o,l)&&e(h,a))||a===void 0&&!(l in o))&&t(o,l,a)}return eA=i,eA}var tA,ck;function lE(){if(ck)return tA;ck=1;var t=v7(),e=g7();function n(r,i,o,l){var a=!o;o||(o={});for(var h=-1,f=i.length;++h<f;){var v=i[h],y=l?l(o[v],r[v],v,o,r):void 0;y===void 0&&(y=r[v]),a?e(o,v,y):t(o,v,y)}return o}return tA=n,tA}var nA,hk;function hte(){if(hk)return nA;hk=1;var t=lE(),e=fx();function n(r,i){return r&&t(i,e(i),r)}return nA=n,nA}var rA,fk;function fte(){if(fk)return rA;fk=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return rA=t,rA}var iA,dk;function dte(){if(dk)return iA;dk=1;var t=R_(),e=sD(),n=fte(),r=Object.prototype,i=r.hasOwnProperty;function o(l){if(!t(l))return n(l);var a=e(l),h=[];for(var f in l)f=="constructor"&&(a||!i.call(l,f))||h.push(f);return h}return iA=o,iA}var aA,pk;function vD(){if(pk)return aA;pk=1;var t=JU(),e=dte(),n=tE();function r(i){return n(i)?t(i,!0):e(i)}return aA=r,aA}var oA,mk;function pte(){if(mk)return oA;mk=1;var t=lE(),e=vD();function n(r,i){return r&&t(i,e(i),r)}return oA=n,oA}var rb={exports:{}};rb.exports;var gk;function mte(){return gk||(gk=1,function(t,e){var n=dp(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,l=o?n.Buffer:void 0,a=l?l.allocUnsafe:void 0;function h(f,v){if(v)return f.slice();var y=f.length,w=a?a(y):new f.constructor(y);return f.copy(w),w}t.exports=h}(rb,rb.exports)),rb.exports}var sA,vk;function gte(){if(vk)return sA;vk=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return sA=t,sA}var lA,yk;function vte(){if(yk)return lA;yk=1;var t=lE(),e=pD();function n(r,i){return t(r,e(r),i)}return lA=n,lA}var uA,_k;function y7(){if(_k)return uA;_k=1;var t=s7(),e=uD(),n=pD(),r=u7(),i=Object.getOwnPropertySymbols,o=i?function(l){for(var a=[];l;)t(a,n(l)),l=e(l);return a}:r;return uA=o,uA}var cA,bk;function yte(){if(bk)return cA;bk=1;var t=lE(),e=y7();function n(r,i){return t(r,e(r),i)}return cA=n,cA}var hA,xk;function _te(){if(xk)return hA;xk=1;var t=l7(),e=y7(),n=vD();function r(i){return t(i,n,e)}return hA=r,hA}var fA,wk;function bte(){if(wk)return fA;wk=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,o=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return fA=n,fA}var dA,Sk;function yD(){if(Sk)return dA;Sk=1;var t=o7();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return dA=e,dA}var pA,Ek;function xte(){if(Ek)return pA;Ek=1;var t=yD();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return pA=e,pA}var mA,Tk;function wte(){if(Tk)return mA;Tk=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return mA=e,mA}var gA,Mk;function Ste(){if(Mk)return gA;Mk=1;var t=hx(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return gA=r,gA}var vA,Ak;function Ete(){if(Ak)return vA;Ak=1;var t=yD();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return vA=e,vA}var yA,Ck;function Tte(){if(Ck)return yA;Ck=1;var t=yD(),e=xte(),n=wte(),r=Ste(),i=Ete(),o="[object Boolean]",l="[object Date]",a="[object Map]",h="[object Number]",f="[object RegExp]",v="[object Set]",y="[object String]",w="[object Symbol]",b="[object ArrayBuffer]",A="[object DataView]",M="[object Float32Array]",P="[object Float64Array]",C="[object Int8Array]",k="[object Int16Array]",B="[object Int32Array]",z="[object Uint8Array]",q="[object Uint8ClampedArray]",V="[object Uint16Array]",W="[object Uint32Array]";function Y(Z,j,K){var re=Z.constructor;switch(j){case b:return t(Z);case o:case l:return new re(+Z);case A:return e(Z,K);case M:case P:case C:case k:case B:case z:case q:case V:case W:return i(Z,K);case a:return new re;case h:case y:return new re(Z);case f:return n(Z);case v:return new re;case w:return r(Z)}}return yA=Y,yA}var _A,Pk;function Mte(){if(Pk)return _A;Pk=1;var t=R_(),e=Object.create,n=function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var o=new r;return r.prototype=void 0,o}}();return _A=n,_A}var bA,Rk;function Ate(){if(Rk)return bA;Rk=1;var t=Mte(),e=uD(),n=sD();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return bA=r,bA}var xA,Dk;function Cte(){if(Dk)return xA;Dk=1;var t=oE(),e=lm(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return xA=r,xA}var wA,Lk;function Pte(){if(Lk)return wA;Lk=1;var t=Cte(),e=aD(),n=oD(),r=n&&n.isMap,i=r?e(r):t;return wA=i,wA}var SA,Ik;function Rte(){if(Ik)return SA;Ik=1;var t=oE(),e=lm(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return SA=r,SA}var EA,Ok;function Dte(){if(Ok)return EA;Ok=1;var t=Rte(),e=aD(),n=oD(),r=n&&n.isSet,i=r?e(r):t;return EA=i,EA}var TA,Nk;function Lte(){if(Nk)return TA;Nk=1;var t=dD(),e=ute(),n=v7(),r=hte(),i=pte(),o=mte(),l=gte(),a=vte(),h=yte(),f=c7(),v=_te(),y=oE(),w=bte(),b=Tte(),A=Ate(),M=vd(),P=rD(),C=Pte(),k=R_(),B=Dte(),z=fx(),q=vD(),V=1,W=2,Y=4,Z="[object Arguments]",j="[object Array]",K="[object Boolean]",re="[object Date]",ie="[object Error]",se="[object Function]",de="[object GeneratorFunction]",ue="[object Map]",Te="[object Number]",pe="[object Object]",De="[object RegExp]",me="[object Set]",Me="[object String]",fe="[object Symbol]",ve="[object WeakMap]",le="[object ArrayBuffer]",ye="[object DataView]",Se="[object Float32Array]",Be="[object Float64Array]",Ve="[object Int8Array]",tt="[object Int16Array]",ht="[object Int32Array]",it="[object Uint8Array]",gt="[object Uint8ClampedArray]",$t="[object Uint16Array]",He="[object Uint32Array]",Ct={};Ct[Z]=Ct[j]=Ct[le]=Ct[ye]=Ct[K]=Ct[re]=Ct[Se]=Ct[Be]=Ct[Ve]=Ct[tt]=Ct[ht]=Ct[ue]=Ct[Te]=Ct[pe]=Ct[De]=Ct[me]=Ct[Me]=Ct[fe]=Ct[it]=Ct[gt]=Ct[$t]=Ct[He]=!0,Ct[ie]=Ct[se]=Ct[ve]=!1;function Xe(tn,Kt,Jt,Ht,$e,Ee){var _t,jt=Kt&V,vt=Kt&W,Pt=Kt&Y;if(Jt&&(_t=$e?Jt(tn,Ht,$e,Ee):Jt(tn)),_t!==void 0)return _t;if(!k(tn))return tn;var vn=M(tn);if(vn){if(_t=w(tn),!jt)return l(tn,_t)}else{var hn=y(tn),pn=hn==se||hn==de;if(P(tn))return o(tn,jt);if(hn==pe||hn==Z||pn&&!$e){if(_t=vt||pn?{}:A(tn),!jt)return vt?h(tn,i(_t,tn)):a(tn,r(_t,tn))}else{if(!Ct[hn])return $e?tn:{};_t=b(tn,hn,jt)}}Ee||(Ee=new t);var nn=Ee.get(tn);if(nn)return nn;Ee.set(tn,_t),B(tn)?tn.forEach(function(Pn){_t.add(Xe(Pn,Kt,Jt,Pn,tn,Ee))}):C(tn)&&tn.forEach(function(Pn,ir){_t.set(ir,Xe(Pn,Kt,Jt,ir,tn,Ee))});var Ft=Pt?vt?v:f:vt?q:z,In=vn?void 0:Ft(tn);return e(In||tn,function(Pn,ir){In&&(ir=Pn,Pn=tn[ir]),n(_t,ir,Xe(Pn,Kt,Jt,ir,tn,Ee))}),_t}return TA=Xe,TA}var MA,kk;function Ite(){if(kk)return MA;kk=1;var t=Lte(),e=1,n=4;function r(i){return t(i,e|n)}return MA=r,MA}var Fk;function Ote(){if(Fk)return qv;Fk=1,Object.defineProperty(qv,"__esModule",{value:!0}),qv.mergeClasses=void 0;var t=lD(),e=o(t),n=Ite(),r=o(n),i=Object.assign||function(a){for(var h=1;h<arguments.length;h++){var f=arguments[h];for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(a[v]=f[v])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var l=qv.mergeClasses=function(h){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],v=h.default&&(0,r.default)(h.default)||{};return f.map(function(y){var w=h[y];return w&&(0,e.default)(w,function(b,A){v[A]||(v[A]={}),v[A]=i({},v[A],w[A])}),y}),v};return qv.default=l,qv}var Hv={},Bk;function Nte(){if(Bk)return Hv;Bk=1,Object.defineProperty(Hv,"__esModule",{value:!0}),Hv.autoprefix=void 0;var t=lD(),e=r(t),n=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var h=arguments[a];for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(l[f]=h[f])}return l};function r(l){return l&&l.__esModule?l:{default:l}}var i={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var h=a&&a.split(" ");return{position:"absolute",top:h&&h[0],right:h&&h[1],bottom:h&&h[2],left:h&&h[3]}},extend:function(a,h){var f=h[a];return f||{extend:a}}},o=Hv.autoprefix=function(a){var h={};return(0,e.default)(a,function(f,v){var y={};(0,e.default)(f,function(w,b){var A=i[b];A?y=n({},y,A(w)):y[b]=w}),h[v]=y}),h};return Hv.default=o,Hv}var $v={},zk;function kte(){if(zk)return $v;zk=1,Object.defineProperty($v,"__esModule",{value:!0}),$v.hover=void 0;var t=Object.assign||function(h){for(var f=1;f<arguments.length;f++){var v=arguments[f];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(h[y]=v[y])}return h},e=U0(),n=r(e);function r(h){return h&&h.__esModule?h:{default:h}}function i(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function o(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function l(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var a=$v.hover=function(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(y){l(w,y);function w(){var b,A,M,P;i(this,w);for(var C=arguments.length,k=Array(C),B=0;B<C;B++)k[B]=arguments[B];return P=(A=(M=o(this,(b=w.__proto__||Object.getPrototypeOf(w)).call.apply(b,[this].concat(k))),M),M.state={hover:!1},M.handleMouseOver=function(){return M.setState({hover:!0})},M.handleMouseOut=function(){return M.setState({hover:!1})},M.render=function(){return n.default.createElement(v,{onMouseOver:M.handleMouseOver,onMouseOut:M.handleMouseOut},n.default.createElement(f,t({},M.props,M.state)))},A),o(M,P)}return w}(n.default.Component)};return $v.default=a,$v}var Wv={},Uk;function Fte(){if(Uk)return Wv;Uk=1,Object.defineProperty(Wv,"__esModule",{value:!0}),Wv.active=void 0;var t=Object.assign||function(h){for(var f=1;f<arguments.length;f++){var v=arguments[f];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(h[y]=v[y])}return h},e=U0(),n=r(e);function r(h){return h&&h.__esModule?h:{default:h}}function i(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function o(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function l(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var a=Wv.active=function(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(y){l(w,y);function w(){var b,A,M,P;i(this,w);for(var C=arguments.length,k=Array(C),B=0;B<C;B++)k[B]=arguments[B];return P=(A=(M=o(this,(b=w.__proto__||Object.getPrototypeOf(w)).call.apply(b,[this].concat(k))),M),M.state={active:!1},M.handleMouseDown=function(){return M.setState({active:!0})},M.handleMouseUp=function(){return M.setState({active:!1})},M.render=function(){return n.default.createElement(v,{onMouseDown:M.handleMouseDown,onMouseUp:M.handleMouseUp},n.default.createElement(f,t({},M.props,M.state)))},A),o(M,P)}return w}(n.default.Component)};return Wv.default=a,Wv}var w2={},jk;function Bte(){if(jk)return w2;jk=1,Object.defineProperty(w2,"__esModule",{value:!0});var t=function(n,r){var i={},o=function(a){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[a]=h};return n===0&&o("first-child"),n===r-1&&o("last-child"),(n===0||n%2===0)&&o("even"),Math.abs(n%2)===1&&o("odd"),o("nth-child",n),i};return w2.default=t,w2}var Vk;function zte(){if(Vk)return hh;Vk=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.ReactCSS=hh.loop=hh.handleActive=hh.handleHover=hh.hover=void 0;var t=lte(),e=w(t),n=Ote(),r=w(n),i=Nte(),o=w(i),l=kte(),a=w(l),h=Fte(),f=w(h),v=Bte(),y=w(v);function w(A){return A&&A.__esModule?A:{default:A}}hh.hover=a.default,hh.handleHover=a.default,hh.handleActive=f.default,hh.loop=y.default;var b=hh.ReactCSS=function(M){for(var P=arguments.length,C=Array(P>1?P-1:0),k=1;k<P;k++)C[k-1]=arguments[k];var B=(0,e.default)(C),z=(0,r.default)(M,B);return(0,o.default)(z)};return hh.default=b,hh}var _D=zte();const $i=S_(_D);var Ute=function(e,n,r,i,o){var l=o.clientWidth,a=o.clientHeight,h=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,v=h-(o.getBoundingClientRect().left+window.pageXOffset),y=f-(o.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var w=void 0;if(y<0?w=0:y>a?w=1:w=Math.round(y*100/a)/100,n.a!==w)return{h:n.h,s:n.s,l:n.l,a:w,source:"rgb"}}else{var b=void 0;if(v<0?b=0:v>l?b=1:b=Math.round(v*100/l)/100,i!==b)return{h:n.h,s:n.s,l:n.l,a:b,source:"rgb"}}return null},AA={},jte=function(e,n,r,i){if(typeof document>"u"&&!i)return null;var o=i?new i:document.createElement("canvas");o.width=r*2,o.height=r*2;var l=o.getContext("2d");return l?(l.fillStyle=e,l.fillRect(0,0,o.width,o.height),l.fillStyle=n,l.fillRect(0,0,r,r),l.translate(r,r),l.fillRect(0,0,r,r),o.toDataURL()):null},Vte=function(e,n,r,i){var o=e+"-"+n+"-"+r+(i?"-server":"");if(AA[o])return AA[o];var l=jte(e,n,r,i);return AA[o]=l,l},Gk=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D_=function(e){var n=e.white,r=e.grey,i=e.size,o=e.renderers,l=e.borderRadius,a=e.boxShadow,h=e.children,f=$i({default:{grid:{borderRadius:l,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+Vte(n,r,i,o.canvas)+") center left"}}});return Et.isValidElement(h)?bt.cloneElement(h,Gk({},h.props,{style:Gk({},h.props.style,f.grid)})):bt.createElement("div",{style:f.grid})};D_.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var Gte=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qte=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Hte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qk(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function $te(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var bD=function(t){$te(e,t);function e(){var n,r,i,o;Hte(this,e);for(var l=arguments.length,a=Array(l),h=0;h<l;h++)a[h]=arguments[h];return o=(r=(i=qk(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),i),i.handleChange=function(f){var v=Ute(f,i.props.hsl,i.props.direction,i.props.a,i.container);v&&typeof i.props.onChange=="function"&&i.props.onChange(v,f)},i.handleMouseDown=function(f){i.handleChange(f),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),qk(i,o)}return qte(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,o=$i({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:Gte({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return bt.createElement("div",{style:o.alpha},bt.createElement("div",{style:o.checkboard},bt.createElement(D_,{renderers:this.props.renderers})),bt.createElement("div",{style:o.gradient}),bt.createElement("div",{style:o.container,ref:function(a){return r.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},bt.createElement("div",{style:o.pointer},this.props.pointer?bt.createElement(this.props.pointer,this.props):bt.createElement("div",{style:o.slider}))))}}]),e}(Et.PureComponent||Et.Component),Wte=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Xte(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yte(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Kte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Jte=1,_7=38,Qte=40,ene=[_7,Qte],tne=function(e){return ene.indexOf(e)>-1},nne=function(e){return Number(String(e).replace(/%/g,""))},rne=1,Ha=function(t){Kte(e,t);function e(n){Zte(this,e);var r=Yte(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var o=nne(i.target.value);if(!isNaN(o)&&tne(i.keyCode)){var l=r.getArrowOffset(),a=i.keyCode===_7?o+l:o-l;r.setUpdatedValue(a,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var o=Math.round(r.props.value+i.movementX);o>=0&&o<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(o),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},r.inputId="rc-editable-input-"+rne++,r}return Wte(e,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return Xte({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Jte}},{key:"setUpdatedValue",value:function(r,i){var o=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(o,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=$i({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return bt.createElement("div",{style:i.wrap},bt.createElement("input",{id:this.inputId,style:i.input,ref:function(l){return r.input=l},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?bt.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(Et.PureComponent||Et.Component),ine=function(e,n,r,i){var o=i.clientWidth,l=i.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,h=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,f=a-(i.getBoundingClientRect().left+window.pageXOffset),v=h-(i.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var y=void 0;if(v<0)y=359;else if(v>l)y=0;else{var w=-(v*100/l)+100;y=360*w/100}if(r.h!==y)return{h:y,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var b=void 0;if(f<0)b=0;else if(f>o)b=359;else{var A=f*100/o;b=360*A/100}if(r.h!==b)return{h:b,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},ane=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function one(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hk(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function sne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var L_=function(t){sne(e,t);function e(){var n,r,i,o;one(this,e);for(var l=arguments.length,a=Array(l),h=0;h<l;h++)a[h]=arguments[h];return o=(r=(i=Hk(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),i),i.handleChange=function(f){var v=ine(f,i.props.direction,i.props.hsl,i.container);v&&typeof i.props.onChange=="function"&&i.props.onChange(v,f)},i.handleMouseDown=function(f){i.handleChange(f),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),Hk(i,o)}return ane(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,o=i===void 0?"horizontal":i,l=$i({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:o==="vertical"});return bt.createElement("div",{style:l.hue},bt.createElement("div",{className:"hue-"+o,style:l.container,ref:function(h){return r.container=h},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},bt.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),bt.createElement("div",{style:l.pointer},this.props.pointer?bt.createElement(this.props.pointer,this.props):bt.createElement("div",{style:l.slider}))))}}]),e}(Et.PureComponent||Et.Component);function lne(){this.__data__=[],this.size=0}function dx(t,e){return t===e||t!==t&&e!==e}function uE(t,e){for(var n=t.length;n--;)if(dx(t[n][0],e))return n;return-1}var une=Array.prototype,cne=une.splice;function hne(t){var e=this.__data__,n=uE(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():cne.call(e,n,1),--this.size,!0}function fne(t){var e=this.__data__,n=uE(e,t);return n<0?void 0:e[n][1]}function dne(t){return uE(this.__data__,t)>-1}function pne(t,e){var n=this.__data__,r=uE(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function um(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}um.prototype.clear=lne;um.prototype.delete=hne;um.prototype.get=fne;um.prototype.has=dne;um.prototype.set=pne;function mne(){this.__data__=new um,this.size=0}function gne(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function vne(t){return this.__data__.get(t)}function yne(t){return this.__data__.has(t)}var b7=typeof global=="object"&&global&&global.Object===Object&&global,_ne=typeof self=="object"&&self&&self.Object===Object&&self,yd=b7||_ne||Function("return this")(),fg=yd.Symbol,x7=Object.prototype,bne=x7.hasOwnProperty,xne=x7.toString,I1=fg?fg.toStringTag:void 0;function wne(t){var e=bne.call(t,I1),n=t[I1];try{t[I1]=void 0;var r=!0}catch{}var i=xne.call(t);return r&&(e?t[I1]=n:delete t[I1]),i}var Sne=Object.prototype,Ene=Sne.toString;function Tne(t){return Ene.call(t)}var Mne="[object Null]",Ane="[object Undefined]",$k=fg?fg.toStringTag:void 0;function W0(t){return t==null?t===void 0?Ane:Mne:$k&&$k in Object(t)?wne(t):Tne(t)}function Mf(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Cne="[object AsyncFunction]",Pne="[object Function]",Rne="[object GeneratorFunction]",Dne="[object Proxy]";function xD(t){if(!Mf(t))return!1;var e=W0(t);return e==Pne||e==Rne||e==Cne||e==Dne}var CA=yd["__core-js_shared__"],Wk=function(){var t=/[^.]+$/.exec(CA&&CA.keys&&CA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Lne(t){return!!Wk&&Wk in t}var Ine=Function.prototype,One=Ine.toString;function X0(t){if(t!=null){try{return One.call(t)}catch{}try{return t+""}catch{}}return""}var Nne=/[\\^$.*+?()[\]{}|]/g,kne=/^\[object .+?Constructor\]$/,Fne=Function.prototype,Bne=Object.prototype,zne=Fne.toString,Une=Bne.hasOwnProperty,jne=RegExp("^"+zne.call(Une).replace(Nne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vne(t){if(!Mf(t)||Lne(t))return!1;var e=xD(t)?jne:kne;return e.test(X0(t))}function Gne(t,e){return t==null?void 0:t[e]}function Z0(t,e){var n=Gne(t,e);return Vne(n)?n:void 0}var jb=Z0(yd,"Map"),Vb=Z0(Object,"create");function qne(){this.__data__=Vb?Vb(null):{},this.size=0}function Hne(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $ne="__lodash_hash_undefined__",Wne=Object.prototype,Xne=Wne.hasOwnProperty;function Zne(t){var e=this.__data__;if(Vb){var n=e[t];return n===$ne?void 0:n}return Xne.call(e,t)?e[t]:void 0}var Yne=Object.prototype,Kne=Yne.hasOwnProperty;function Jne(t){var e=this.__data__;return Vb?e[t]!==void 0:Kne.call(e,t)}var Qne="__lodash_hash_undefined__";function ere(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Vb&&e===void 0?Qne:e,this}function L0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}L0.prototype.clear=qne;L0.prototype.delete=Hne;L0.prototype.get=Zne;L0.prototype.has=Jne;L0.prototype.set=ere;function tre(){this.size=0,this.__data__={hash:new L0,map:new(jb||um),string:new L0}}function nre(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function cE(t,e){var n=t.__data__;return nre(e)?n[typeof e=="string"?"string":"hash"]:n.map}function rre(t){var e=cE(this,t).delete(t);return this.size-=e?1:0,e}function ire(t){return cE(this,t).get(t)}function are(t){return cE(this,t).has(t)}function ore(t,e){var n=cE(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function cm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}cm.prototype.clear=tre;cm.prototype.delete=rre;cm.prototype.get=ire;cm.prototype.has=are;cm.prototype.set=ore;var sre=200;function lre(t,e){var n=this.__data__;if(n instanceof um){var r=n.__data__;if(!jb||r.length<sre-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new cm(r)}return n.set(t,e),this.size=n.size,this}function sp(t){var e=this.__data__=new um(t);this.size=e.size}sp.prototype.clear=mne;sp.prototype.delete=gne;sp.prototype.get=vne;sp.prototype.has=yne;sp.prototype.set=lre;var tS=function(){try{var t=Z0(Object,"defineProperty");return t({},"",{}),t}catch{}}();function wD(t,e,n){e=="__proto__"&&tS?tS(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function M3(t,e,n){(n!==void 0&&!dx(t[e],n)||n===void 0&&!(e in t))&&wD(t,e,n)}function ure(t){return function(e,n,r){for(var i=-1,o=Object(e),l=r(e),a=l.length;a--;){var h=l[++i];if(n(o[h],h,o)===!1)break}return e}}var w7=ure(),S7=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xk=S7&&typeof module=="object"&&module&&!module.nodeType&&module,cre=Xk&&Xk.exports===S7,Zk=cre?yd.Buffer:void 0;Zk&&Zk.allocUnsafe;function hre(t,e){return t.slice()}var nS=yd.Uint8Array;function fre(t){var e=new t.constructor(t.byteLength);return new nS(e).set(new nS(t)),e}function dre(t,e){var n=fre(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}function pre(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Yk=Object.create,mre=function(){function t(){}return function(e){if(!Mf(e))return{};if(Yk)return Yk(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function E7(t,e){return function(n){return t(e(n))}}var T7=E7(Object.getPrototypeOf,Object),gre=Object.prototype;function SD(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||gre;return t===n}function vre(t){return typeof t.constructor=="function"&&!SD(t)?mre(T7(t)):{}}function dg(t){return t!=null&&typeof t=="object"}var yre="[object Arguments]";function Kk(t){return dg(t)&&W0(t)==yre}var M7=Object.prototype,_re=M7.hasOwnProperty,bre=M7.propertyIsEnumerable,rS=Kk(function(){return arguments}())?Kk:function(t){return dg(t)&&_re.call(t,"callee")&&!bre.call(t,"callee")},Wh=Array.isArray,xre=9007199254740991;function ED(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=xre}function I_(t){return t!=null&&ED(t.length)&&!xD(t)}function wre(t){return dg(t)&&I_(t)}function Sre(){return!1}var A7=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Jk=A7&&typeof module=="object"&&module&&!module.nodeType&&module,Ere=Jk&&Jk.exports===A7,Qk=Ere?yd.Buffer:void 0,Tre=Qk?Qk.isBuffer:void 0,iS=Tre||Sre,Mre="[object Object]",Are=Function.prototype,Cre=Object.prototype,C7=Are.toString,Pre=Cre.hasOwnProperty,Rre=C7.call(Object);function Dre(t){if(!dg(t)||W0(t)!=Mre)return!1;var e=T7(t);if(e===null)return!0;var n=Pre.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&C7.call(n)==Rre}var Lre="[object Arguments]",Ire="[object Array]",Ore="[object Boolean]",Nre="[object Date]",kre="[object Error]",Fre="[object Function]",Bre="[object Map]",zre="[object Number]",Ure="[object Object]",jre="[object RegExp]",Vre="[object Set]",Gre="[object String]",qre="[object WeakMap]",Hre="[object ArrayBuffer]",$re="[object DataView]",Wre="[object Float32Array]",Xre="[object Float64Array]",Zre="[object Int8Array]",Yre="[object Int16Array]",Kre="[object Int32Array]",Jre="[object Uint8Array]",Qre="[object Uint8ClampedArray]",eie="[object Uint16Array]",tie="[object Uint32Array]",_s={};_s[Wre]=_s[Xre]=_s[Zre]=_s[Yre]=_s[Kre]=_s[Jre]=_s[Qre]=_s[eie]=_s[tie]=!0;_s[Lre]=_s[Ire]=_s[Hre]=_s[Ore]=_s[$re]=_s[Nre]=_s[kre]=_s[Fre]=_s[Bre]=_s[zre]=_s[Ure]=_s[jre]=_s[Vre]=_s[Gre]=_s[qre]=!1;function nie(t){return dg(t)&&ED(t.length)&&!!_s[W0(t)]}function rie(t){return function(e){return t(e)}}var P7=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Eb=P7&&typeof module=="object"&&module&&!module.nodeType&&module,iie=Eb&&Eb.exports===P7,PA=iie&&b7.process,eF=function(){try{var t=Eb&&Eb.require&&Eb.require("util").types;return t||PA&&PA.binding&&PA.binding("util")}catch{}}(),tF=eF&&eF.isTypedArray,TD=tF?rie(tF):nie;function A3(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var aie=Object.prototype,oie=aie.hasOwnProperty;function sie(t,e,n){var r=t[e];(!(oie.call(t,e)&&dx(r,n))||n===void 0&&!(e in t))&&wD(t,e,n)}function lie(t,e,n,r){var i=!n;n||(n={});for(var o=-1,l=e.length;++o<l;){var a=e[o],h=void 0;h===void 0&&(h=t[a]),i?wD(n,a,h):sie(n,a,h)}return n}function uie(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var cie=9007199254740991,hie=/^(?:0|[1-9]\d*)$/;function MD(t,e){var n=typeof t;return e=e??cie,!!e&&(n=="number"||n!="symbol"&&hie.test(t))&&t>-1&&t%1==0&&t<e}var fie=Object.prototype,die=fie.hasOwnProperty;function R7(t,e){var n=Wh(t),r=!n&&rS(t),i=!n&&!r&&iS(t),o=!n&&!r&&!i&&TD(t),l=n||r||i||o,a=l?uie(t.length,String):[],h=a.length;for(var f in t)(e||die.call(t,f))&&!(l&&(f=="length"||i&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||MD(f,h)))&&a.push(f);return a}function pie(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var mie=Object.prototype,gie=mie.hasOwnProperty;function vie(t){if(!Mf(t))return pie(t);var e=SD(t),n=[];for(var r in t)r=="constructor"&&(e||!gie.call(t,r))||n.push(r);return n}function D7(t){return I_(t)?R7(t,!0):vie(t)}function yie(t){return lie(t,D7(t))}function _ie(t,e,n,r,i,o,l){var a=A3(t,n),h=A3(e,n),f=l.get(h);if(f){M3(t,n,f);return}var v=o?o(a,h,n+"",t,e,l):void 0,y=v===void 0;if(y){var w=Wh(h),b=!w&&iS(h),A=!w&&!b&&TD(h);v=h,w||b||A?Wh(a)?v=a:wre(a)?v=pre(a):b?(y=!1,v=hre(h)):A?(y=!1,v=dre(h)):v=[]:Dre(h)||rS(h)?(v=a,rS(a)?v=yie(a):(!Mf(a)||xD(a))&&(v=vre(h))):y=!1}y&&(l.set(h,v),i(v,h,r,o,l),l.delete(h)),M3(t,n,v)}function L7(t,e,n,r,i){t!==e&&w7(e,function(o,l){if(i||(i=new sp),Mf(o))_ie(t,e,l,n,L7,r,i);else{var a=r?r(A3(t,l),o,l+"",t,e,i):void 0;a===void 0&&(a=o),M3(t,l,a)}},D7)}function hE(t){return t}function bie(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var nF=Math.max;function xie(t,e,n){return e=nF(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=nF(r.length-e,0),l=Array(o);++i<o;)l[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(l),bie(t,this,a)}}function wie(t){return function(){return t}}var Sie=tS?function(t,e){return tS(t,"toString",{configurable:!0,enumerable:!1,value:wie(e),writable:!0})}:hE,Eie=800,Tie=16,Mie=Date.now;function Aie(t){var e=0,n=0;return function(){var r=Mie(),i=Tie-(r-n);if(n=r,i>0){if(++e>=Eie)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Cie=Aie(Sie);function Pie(t,e){return Cie(xie(t,e,hE),t+"")}function Rie(t,e,n){if(!Mf(n))return!1;var r=typeof e;return(r=="number"?I_(n)&&MD(e,n.length):r=="string"&&e in n)?dx(n[e],t):!1}function Die(t){return Pie(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,l&&Rie(n[0],n[1],l)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e})}var xh=Die(function(t,e,n){L7(t,e,n)}),px=function(e){var n=e.zDepth,r=e.radius,i=e.background,o=e.children,l=e.styles,a=l===void 0?{}:l,h=$i(xh({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+n+"px "+n*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":n===1});return bt.createElement("div",{style:h.wrap},bt.createElement("div",{style:h.bg}),bt.createElement("div",{style:h.content},o))};px.propTypes={background:Sr.string,zDepth:Sr.oneOf([0,1,2,3,4,5]),radius:Sr.number,styles:Sr.object};px.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var RA=function(){return yd.Date.now()},Lie=/\s/;function Iie(t){for(var e=t.length;e--&&Lie.test(t.charAt(e)););return e}var Oie=/^\s+/;function Nie(t){return t&&t.slice(0,Iie(t)+1).replace(Oie,"")}var kie="[object Symbol]";function fE(t){return typeof t=="symbol"||dg(t)&&W0(t)==kie}var rF=NaN,Fie=/^[-+]0x[0-9a-f]+$/i,Bie=/^0b[01]+$/i,zie=/^0o[0-7]+$/i,Uie=parseInt;function iF(t){if(typeof t=="number")return t;if(fE(t))return rF;if(Mf(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Mf(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Nie(t);var n=Bie.test(t);return n||zie.test(t)?Uie(t.slice(2),n?2:8):Fie.test(t)?rF:+t}var jie="Expected a function",Vie=Math.max,Gie=Math.min;function I7(t,e,n){var r,i,o,l,a,h,f=0,v=!1,y=!1,w=!0;if(typeof t!="function")throw new TypeError(jie);e=iF(e)||0,Mf(n)&&(v=!!n.leading,y="maxWait"in n,o=y?Vie(iF(n.maxWait)||0,e):o,w="trailing"in n?!!n.trailing:w);function b(V){var W=r,Y=i;return r=i=void 0,f=V,l=t.apply(Y,W),l}function A(V){return f=V,a=setTimeout(C,e),v?b(V):l}function M(V){var W=V-h,Y=V-f,Z=e-W;return y?Gie(Z,o-Y):Z}function P(V){var W=V-h,Y=V-f;return h===void 0||W>=e||W<0||y&&Y>=o}function C(){var V=RA();if(P(V))return k(V);a=setTimeout(C,M(V))}function k(V){return a=void 0,w&&r?b(V):(r=i=void 0,l)}function B(){a!==void 0&&clearTimeout(a),f=0,r=h=i=a=void 0}function z(){return a===void 0?l:k(RA())}function q(){var V=RA(),W=P(V);if(r=arguments,i=this,h=V,W){if(a===void 0)return A(h);if(y)return clearTimeout(a),a=setTimeout(C,e),b(h)}return a===void 0&&(a=setTimeout(C,e)),l}return q.cancel=B,q.flush=z,q}var qie="Expected a function";function Hie(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(qie);return Mf(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),I7(t,e,{leading:r,maxWait:e,trailing:i})}var $ie=function(e,n,r){var i=r.getBoundingClientRect(),o=i.width,l=i.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,h=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,f=a-(r.getBoundingClientRect().left+window.pageXOffset),v=h-(r.getBoundingClientRect().top+window.pageYOffset);f<0?f=0:f>o&&(f=o),v<0?v=0:v>l&&(v=l);var y=f/o,w=1-v/l;return{h:n.h,s:y,v:w,a:n.a,source:"hsv"}},Wie=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Xie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zie(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Yie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var dE=function(t){Yie(e,t);function e(n){Xie(this,e);var r=Zie(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,$ie(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var o=r.getContainerRenderWindow();o.addEventListener("mousemove",r.handleChange),o.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=Hie(function(i,o,l){i(o,l)},50),r}return Wie(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},o=i.color,l=i.white,a=i.black,h=i.pointer,f=i.circle,v=$i({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:o,white:l,black:a,pointer:h,circle:f}},{custom:!!this.props.style});return bt.createElement("div",{style:v.color,ref:function(w){return r.container=w},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},bt.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),bt.createElement("div",{style:v.white,className:"saturation-white"},bt.createElement("div",{style:v.black,className:"saturation-black"}),bt.createElement("div",{style:v.pointer},this.props.pointer?bt.createElement(this.props.pointer,this.props):bt.createElement("div",{style:v.circle}))))}}]),e}(Et.PureComponent||Et.Component);function Kie(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var Jie=E7(Object.keys,Object),Qie=Object.prototype,eae=Qie.hasOwnProperty;function tae(t){if(!SD(t))return Jie(t);var e=[];for(var n in Object(t))eae.call(t,n)&&n!="constructor"&&e.push(n);return e}function AD(t){return I_(t)?R7(t):tae(t)}function nae(t,e){return t&&w7(t,e,AD)}function rae(t,e){return function(n,r){if(n==null)return n;if(!I_(n))return t(n,r);for(var i=n.length,o=-1,l=Object(n);++o<i&&r(l[o],o,l)!==!1;);return n}}var O7=rae(nae);function iae(t){return typeof t=="function"?t:hE}function aae(t,e){var n=Wh(t)?Kie:O7;return n(t,iae(e))}function aS(t){"@babel/helpers - typeof";return aS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aS(t)}var oae=/^\s+/,sae=/\s+$/;function ui(t,e){if(t=t||"",e=e||{},t instanceof ui)return t;if(!(this instanceof ui))return new ui(t,e);var n=lae(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}ui.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,i,o,l,a;return n=e.r/255,r=e.g/255,i=e.b/255,n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?l=r/12.92:l=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*l+.0722*a},setAlpha:function(e){return this._a=N7(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=oF(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=oF(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=aF(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=aF(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return sF(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return fae(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Us(this._r,255)*100)+"%",g:Math.round(Us(this._g,255)*100)+"%",b:Math.round(Us(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Us(this._r,255)*100)+"%, "+Math.round(Us(this._g,255)*100)+"%, "+Math.round(Us(this._b,255)*100)+"%)":"rgba("+Math.round(Us(this._r,255)*100)+"%, "+Math.round(Us(this._g,255)*100)+"%, "+Math.round(Us(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Eae[sF(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+lF(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(e){var o=ui(e);r="#"+lF(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,o=!n&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return ui(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(gae,arguments)},brighten:function(){return this._applyModification(vae,arguments)},darken:function(){return this._applyModification(yae,arguments)},desaturate:function(){return this._applyModification(dae,arguments)},saturate:function(){return this._applyModification(pae,arguments)},greyscale:function(){return this._applyModification(mae,arguments)},spin:function(){return this._applyModification(_ae,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(wae,arguments)},complement:function(){return this._applyCombination(bae,arguments)},monochromatic:function(){return this._applyCombination(Sae,arguments)},splitcomplement:function(){return this._applyCombination(xae,arguments)},triad:function(){return this._applyCombination(uF,[3])},tetrad:function(){return this._applyCombination(uF,[4])}};ui.fromRatio=function(t,e){if(aS(t)=="object"){var n={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?n[r]=t[r]:n[r]=ib(t[r]));t=n}return ui(t,e)};function lae(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,l=!1,a=!1;return typeof t=="string"&&(t=Cae(t)),aS(t)=="object"&&(Np(t.r)&&Np(t.g)&&Np(t.b)?(e=uae(t.r,t.g,t.b),l=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Np(t.h)&&Np(t.s)&&Np(t.v)?(r=ib(t.s),i=ib(t.v),e=hae(t.h,r,i),l=!0,a="hsv"):Np(t.h)&&Np(t.s)&&Np(t.l)&&(r=ib(t.s),o=ib(t.l),e=cae(t.h,r,o),l=!0,a="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=N7(n),{ok:l,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function uae(t,e,n){return{r:Us(t,255)*255,g:Us(e,255)*255,b:Us(n,255)*255}}function aF(t,e,n){t=Us(t,255),e=Us(e,255),n=Us(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o,l,a=(r+i)/2;if(r==i)o=l=0;else{var h=r-i;switch(l=a>.5?h/(2-r-i):h/(r+i),r){case t:o=(e-n)/h+(e<n?6:0);break;case e:o=(n-t)/h+2;break;case n:o=(t-e)/h+4;break}o/=6}return{h:o,s:l,l:a}}function cae(t,e,n){var r,i,o;t=Us(t,360),e=Us(e,100),n=Us(n,100);function l(f,v,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?f+(v-f)*6*y:y<1/2?v:y<2/3?f+(v-f)*(2/3-y)*6:f}if(e===0)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,h=2*n-a;r=l(h,a,t+1/3),i=l(h,a,t),o=l(h,a,t-1/3)}return{r:r*255,g:i*255,b:o*255}}function oF(t,e,n){t=Us(t,255),e=Us(e,255),n=Us(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o,l,a=r,h=r-i;if(l=r===0?0:h/r,r==i)o=0;else{switch(r){case t:o=(e-n)/h+(e<n?6:0);break;case e:o=(n-t)/h+2;break;case n:o=(t-e)/h+4;break}o/=6}return{h:o,s:l,v:a}}function hae(t,e,n){t=Us(t,360)*6,e=Us(e,100),n=Us(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),l=n*(1-i*e),a=n*(1-(1-i)*e),h=r%6,f=[n,l,o,o,a,n][h],v=[a,n,n,l,o,o][h],y=[o,o,a,n,n,l][h];return{r:f*255,g:v*255,b:y*255}}function sF(t,e,n,r){var i=[id(Math.round(t).toString(16)),id(Math.round(e).toString(16)),id(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function fae(t,e,n,r,i){var o=[id(Math.round(t).toString(16)),id(Math.round(e).toString(16)),id(Math.round(n).toString(16)),id(k7(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function lF(t,e,n,r){var i=[id(k7(r)),id(Math.round(t).toString(16)),id(Math.round(e).toString(16)),id(Math.round(n).toString(16))];return i.join("")}ui.equals=function(t,e){return!t||!e?!1:ui(t).toRgbString()==ui(e).toRgbString()};ui.random=function(){return ui.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function dae(t,e){e=e===0?0:e||10;var n=ui(t).toHsl();return n.s-=e/100,n.s=pE(n.s),ui(n)}function pae(t,e){e=e===0?0:e||10;var n=ui(t).toHsl();return n.s+=e/100,n.s=pE(n.s),ui(n)}function mae(t){return ui(t).desaturate(100)}function gae(t,e){e=e===0?0:e||10;var n=ui(t).toHsl();return n.l+=e/100,n.l=pE(n.l),ui(n)}function vae(t,e){e=e===0?0:e||10;var n=ui(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),ui(n)}function yae(t,e){e=e===0?0:e||10;var n=ui(t).toHsl();return n.l-=e/100,n.l=pE(n.l),ui(n)}function _ae(t,e){var n=ui(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,ui(n)}function bae(t){var e=ui(t).toHsl();return e.h=(e.h+180)%360,ui(e)}function uF(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=ui(t).toHsl(),r=[ui(t)],i=360/e,o=1;o<e;o++)r.push(ui({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function xae(t){var e=ui(t).toHsl(),n=e.h;return[ui(t),ui({h:(n+72)%360,s:e.s,l:e.l}),ui({h:(n+216)%360,s:e.s,l:e.l})]}function wae(t,e,n){e=e||6,n=n||30;var r=ui(t).toHsl(),i=360/n,o=[ui(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(ui(r));return o}function Sae(t,e){e=e||6;for(var n=ui(t).toHsv(),r=n.h,i=n.s,o=n.v,l=[],a=1/e;e--;)l.push(ui({h:r,s:i,v:o})),o=(o+a)%1;return l}ui.mix=function(t,e,n){n=n===0?0:n||50;var r=ui(t).toRgb(),i=ui(e).toRgb(),o=n/100,l={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return ui(l)};ui.readability=function(t,e){var n=ui(t),r=ui(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};ui.isReadable=function(t,e,n){var r=ui.readability(t,e),i,o;switch(o=!1,i=Pae(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break}return o};ui.mostReadable=function(t,e,n){var r=null,i=0,o,l,a,h;n=n||{},l=n.includeFallbackColors,a=n.level,h=n.size;for(var f=0;f<e.length;f++)o=ui.readability(t,e[f]),o>i&&(i=o,r=ui(e[f]));return ui.isReadable(t,r,{level:a,size:h})||!l?r:(n.includeFallbackColors=!1,ui.mostReadable(t,["#fff","#000"],n))};var C3=ui.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Eae=ui.hexNames=Tae(C3);function Tae(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function N7(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Us(t,e){Mae(t)&&(t="100%");var n=Aae(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function pE(t){return Math.min(1,Math.max(0,t))}function Bh(t){return parseInt(t,16)}function Mae(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function Aae(t){return typeof t=="string"&&t.indexOf("%")!=-1}function id(t){return t.length==1?"0"+t:""+t}function ib(t){return t<=1&&(t=t*100+"%"),t}function k7(t){return Math.round(parseFloat(t)*255).toString(16)}function cF(t){return Bh(t)/255}var Qf=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Np(t){return!!Qf.CSS_UNIT.exec(t)}function Cae(t){t=t.replace(oae,"").replace(sae,"").toLowerCase();var e=!1;if(C3[t])t=C3[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Qf.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=Qf.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Qf.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=Qf.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Qf.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=Qf.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Qf.hex8.exec(t))?{r:Bh(n[1]),g:Bh(n[2]),b:Bh(n[3]),a:cF(n[4]),format:e?"name":"hex8"}:(n=Qf.hex6.exec(t))?{r:Bh(n[1]),g:Bh(n[2]),b:Bh(n[3]),format:e?"name":"hex"}:(n=Qf.hex4.exec(t))?{r:Bh(n[1]+""+n[1]),g:Bh(n[2]+""+n[2]),b:Bh(n[3]+""+n[3]),a:cF(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=Qf.hex3.exec(t))?{r:Bh(n[1]+""+n[1]),g:Bh(n[2]+""+n[2]),b:Bh(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function Pae(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}var hF=function(e){var n=["r","g","b","a","h","s","l","v"],r=0,i=0;return aae(n,function(o){if(e[o]&&(r+=1,isNaN(e[o])||(i+=1),o==="s"||o==="l")){var l=/^\d+%$/;l.test(e[o])&&(i+=1)}}),r===i?e:!1},ab=function(e,n){var r=e.hex?ui(e.hex):ui(e),i=r.toHsl(),o=r.toHsv(),l=r.toRgb(),a=r.toHex();i.s===0&&(i.h=n||0,o.h=n||0);var h=a==="000000"&&l.a===0;return{hsl:i,hex:h?"transparent":"#"+a,rgb:l,hsv:o,oldHue:e.h||n||i.h,source:e.source}},yg=function(e){if(e==="transparent")return!0;var n=String(e).charAt(0)==="#"?1:0;return e.length!==4+n&&e.length<7+n&&ui(e).isValid()},CD=function(e){if(!e)return"#fff";var n=ab(e);if(n.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(n.rgb.r*299+n.rgb.g*587+n.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},DA=function(e,n){var r=e.replace("°","");return ui(n+" ("+r+")")._ok},O1=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rae=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Dae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lae(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Iae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wh=function(e){var n=function(r){Iae(i,r);function i(o){Dae(this,i);var l=Lae(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return l.handleChange=function(a,h){var f=hF(a);if(f){var v=ab(a,a.h||l.state.oldHue);l.setState(v),l.props.onChangeComplete&&l.debounce(l.props.onChangeComplete,v,h),l.props.onChange&&l.props.onChange(v,h)}},l.handleSwatchHover=function(a,h){var f=hF(a);if(f){var v=ab(a,a.h||l.state.oldHue);l.props.onSwatchHover&&l.props.onSwatchHover(v,h)}},l.state=O1({},ab(o.color,0)),l.debounce=I7(function(a,h,f){a(h,f)},100),l}return Rae(i,[{key:"render",value:function(){var l={};return this.props.onSwatchHover&&(l.onSwatchHover=this.handleSwatchHover),bt.createElement(e,O1({},this.props,this.state,{onChange:this.handleChange},l))}}],[{key:"getDerivedStateFromProps",value:function(l,a){return O1({},ab(l.color,a.oldHue))}}]),i}(Et.PureComponent||Et.Component);return n.propTypes=O1({},e.propTypes),n.defaultProps=O1({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),n},Oae=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nae=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function kae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fF(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Fae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Bae=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){Fae(i,r);function i(){var o,l,a,h;kae(this,i);for(var f=arguments.length,v=Array(f),y=0;y<f;y++)v[y]=arguments[y];return h=(l=(a=fF(this,(o=i.__proto__||Object.getPrototypeOf(i)).call.apply(o,[this].concat(v))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},l),fF(a,h)}return Nae(i,[{key:"render",value:function(){return bt.createElement(n,{onFocus:this.handleFocus,onBlur:this.handleBlur},bt.createElement(e,Oae({},this.props,this.state)))}}]),i}(bt.Component)},dF=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zae=13,Uae=function(e){var n=e.color,r=e.style,i=e.onClick,o=i===void 0?function(){}:i,l=e.onHover,a=e.title,h=a===void 0?n:a,f=e.children,v=e.focus,y=e.focusStyle,w=y===void 0?{}:y,b=n==="transparent",A=$i({default:{swatch:dF({background:n,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,v?w:{})}}),M=function(z){return o(n,z)},P=function(z){return z.keyCode===zae&&o(n,z)},C=function(z){return l(n,z)},k={};return l&&(k.onMouseOver=C),bt.createElement("div",dF({style:A.swatch,onClick:M,title:h,tabIndex:0,onKeyDown:P},k),f,b&&bt.createElement(D_,{borderRadius:A.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Y0=Bae(Uae);var jae=function(e){var n=e.direction,r=$i({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return bt.createElement("div",{style:r.picker})},Vae=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F7=function(e){var n=e.rgb,r=e.hsl,i=e.width,o=e.height,l=e.onChange,a=e.direction,h=e.style,f=e.renderers,v=e.pointer,y=e.className,w=y===void 0?"":y,b=$i({default:{picker:{position:"relative",width:i,height:o},alpha:{radius:"2px",style:h}}});return bt.createElement("div",{style:b.picker,className:"alpha-picker "+w},bt.createElement(bD,Vae({},b.alpha,{rgb:n,hsl:r,pointer:v,renderers:f,onChange:l,direction:a})))};F7.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:jae};wh(F7);function B7(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Gae="__lodash_hash_undefined__";function qae(t){return this.__data__.set(t,Gae),this}function Hae(t){return this.__data__.has(t)}function oS(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new cm;++e<n;)this.add(t[e])}oS.prototype.add=oS.prototype.push=qae;oS.prototype.has=Hae;function $ae(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Wae(t,e){return t.has(e)}var Xae=1,Zae=2;function z7(t,e,n,r,i,o){var l=n&Xae,a=t.length,h=e.length;if(a!=h&&!(l&&h>a))return!1;var f=o.get(t),v=o.get(e);if(f&&v)return f==e&&v==t;var y=-1,w=!0,b=n&Zae?new oS:void 0;for(o.set(t,e),o.set(e,t);++y<a;){var A=t[y],M=e[y];if(r)var P=l?r(M,A,y,e,t,o):r(A,M,y,t,e,o);if(P!==void 0){if(P)continue;w=!1;break}if(b){if(!$ae(e,function(C,k){if(!Wae(b,k)&&(A===C||i(A,C,n,r,o)))return b.push(k)})){w=!1;break}}else if(!(A===M||i(A,M,n,r,o))){w=!1;break}}return o.delete(t),o.delete(e),w}function Yae(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function Kae(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Jae=1,Qae=2,eoe="[object Boolean]",toe="[object Date]",noe="[object Error]",roe="[object Map]",ioe="[object Number]",aoe="[object RegExp]",ooe="[object Set]",soe="[object String]",loe="[object Symbol]",uoe="[object ArrayBuffer]",coe="[object DataView]",pF=fg?fg.prototype:void 0,LA=pF?pF.valueOf:void 0;function hoe(t,e,n,r,i,o,l){switch(n){case coe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case uoe:return!(t.byteLength!=e.byteLength||!o(new nS(t),new nS(e)));case eoe:case toe:case ioe:return dx(+t,+e);case noe:return t.name==e.name&&t.message==e.message;case aoe:case soe:return t==e+"";case roe:var a=Yae;case ooe:var h=r&Jae;if(a||(a=Kae),t.size!=e.size&&!h)return!1;var f=l.get(t);if(f)return f==e;r|=Qae,l.set(t,e);var v=z7(a(t),a(e),r,i,o,l);return l.delete(t),v;case loe:if(LA)return LA.call(t)==LA.call(e)}return!1}function foe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function doe(t,e,n){var r=e(t);return Wh(t)?r:foe(r,n(t))}function poe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var l=t[n];e(l,n,t)&&(o[i++]=l)}return o}function moe(){return[]}var goe=Object.prototype,voe=goe.propertyIsEnumerable,mF=Object.getOwnPropertySymbols,yoe=mF?function(t){return t==null?[]:(t=Object(t),poe(mF(t),function(e){return voe.call(t,e)}))}:moe;function gF(t){return doe(t,AD,yoe)}var _oe=1,boe=Object.prototype,xoe=boe.hasOwnProperty;function woe(t,e,n,r,i,o){var l=n&_oe,a=gF(t),h=a.length,f=gF(e),v=f.length;if(h!=v&&!l)return!1;for(var y=h;y--;){var w=a[y];if(!(l?w in e:xoe.call(e,w)))return!1}var b=o.get(t),A=o.get(e);if(b&&A)return b==e&&A==t;var M=!0;o.set(t,e),o.set(e,t);for(var P=l;++y<h;){w=a[y];var C=t[w],k=e[w];if(r)var B=l?r(k,C,w,e,t,o):r(C,k,w,t,e,o);if(!(B===void 0?C===k||i(C,k,n,r,o):B)){M=!1;break}P||(P=w=="constructor")}if(M&&!P){var z=t.constructor,q=e.constructor;z!=q&&"constructor"in t&&"constructor"in e&&!(typeof z=="function"&&z instanceof z&&typeof q=="function"&&q instanceof q)&&(M=!1)}return o.delete(t),o.delete(e),M}var P3=Z0(yd,"DataView"),R3=Z0(yd,"Promise"),D3=Z0(yd,"Set"),L3=Z0(yd,"WeakMap"),vF="[object Map]",Soe="[object Object]",yF="[object Promise]",_F="[object Set]",bF="[object WeakMap]",xF="[object DataView]",Eoe=X0(P3),Toe=X0(jb),Moe=X0(R3),Aoe=X0(D3),Coe=X0(L3),qm=W0;(P3&&qm(new P3(new ArrayBuffer(1)))!=xF||jb&&qm(new jb)!=vF||R3&&qm(R3.resolve())!=yF||D3&&qm(new D3)!=_F||L3&&qm(new L3)!=bF)&&(qm=function(t){var e=W0(t),n=e==Soe?t.constructor:void 0,r=n?X0(n):"";if(r)switch(r){case Eoe:return xF;case Toe:return vF;case Moe:return yF;case Aoe:return _F;case Coe:return bF}return e});var Poe=1,wF="[object Arguments]",SF="[object Array]",S2="[object Object]",Roe=Object.prototype,EF=Roe.hasOwnProperty;function Doe(t,e,n,r,i,o){var l=Wh(t),a=Wh(e),h=l?SF:qm(t),f=a?SF:qm(e);h=h==wF?S2:h,f=f==wF?S2:f;var v=h==S2,y=f==S2,w=h==f;if(w&&iS(t)){if(!iS(e))return!1;l=!0,v=!1}if(w&&!v)return o||(o=new sp),l||TD(t)?z7(t,e,n,r,i,o):hoe(t,e,h,n,r,i,o);if(!(n&Poe)){var b=v&&EF.call(t,"__wrapped__"),A=y&&EF.call(e,"__wrapped__");if(b||A){var M=b?t.value():t,P=A?e.value():e;return o||(o=new sp),i(M,P,n,r,o)}}return w?(o||(o=new sp),woe(t,e,n,r,i,o)):!1}function PD(t,e,n,r,i){return t===e?!0:t==null||e==null||!dg(t)&&!dg(e)?t!==t&&e!==e:Doe(t,e,n,r,PD,i)}var Loe=1,Ioe=2;function Ooe(t,e,n,r){var i=n.length,o=i;if(t==null)return!o;for(t=Object(t);i--;){var l=n[i];if(l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=n[i];var a=l[0],h=t[a],f=l[1];if(l[2]){if(h===void 0&&!(a in t))return!1}else{var v=new sp,y;if(!(y===void 0?PD(f,h,Loe|Ioe,r,v):y))return!1}}return!0}function U7(t){return t===t&&!Mf(t)}function Noe(t){for(var e=AD(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,U7(i)]}return e}function j7(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function koe(t){var e=Noe(t);return e.length==1&&e[0][2]?j7(e[0][0],e[0][1]):function(n){return n===t||Ooe(n,t,e)}}var Foe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Boe=/^\w*$/;function RD(t,e){if(Wh(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||fE(t)?!0:Boe.test(t)||!Foe.test(t)||e!=null&&t in Object(e)}var zoe="Expected a function";function DD(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(zoe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var l=t.apply(this,r);return n.cache=o.set(i,l)||o,l};return n.cache=new(DD.Cache||cm),n}DD.Cache=cm;var Uoe=500;function joe(t){var e=DD(t,function(r){return n.size===Uoe&&n.clear(),r}),n=e.cache;return e}var Voe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Goe=/\\(\\)?/g,qoe=joe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Voe,function(n,r,i,o){e.push(i?o.replace(Goe,"$1"):r||n)}),e}),TF=fg?fg.prototype:void 0,MF=TF?TF.toString:void 0;function V7(t){if(typeof t=="string")return t;if(Wh(t))return B7(t,V7)+"";if(fE(t))return MF?MF.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Hoe(t){return t==null?"":V7(t)}function G7(t,e){return Wh(t)?t:RD(t,e)?[t]:qoe(Hoe(t))}function mE(t){if(typeof t=="string"||fE(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function q7(t,e){e=G7(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[mE(e[n++])];return n&&n==r?t:void 0}function $oe(t,e,n){var r=t==null?void 0:q7(t,e);return r===void 0?n:r}function Woe(t,e){return t!=null&&e in Object(t)}function Xoe(t,e,n){e=G7(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var l=mE(e[r]);if(!(o=t!=null&&n(t,l)))break;t=t[l]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&ED(i)&&MD(l,i)&&(Wh(t)||rS(t)))}function Zoe(t,e){return t!=null&&Xoe(t,e,Woe)}var Yoe=1,Koe=2;function Joe(t,e){return RD(t)&&U7(e)?j7(mE(t),e):function(n){var r=$oe(n,t);return r===void 0&&r===e?Zoe(n,t):PD(e,r,Yoe|Koe)}}function Qoe(t){return function(e){return e==null?void 0:e[t]}}function ese(t){return function(e){return q7(e,t)}}function tse(t){return RD(t)?Qoe(mE(t)):ese(t)}function nse(t){return typeof t=="function"?t:t==null?hE:typeof t=="object"?Wh(t)?Joe(t[0],t[1]):koe(t):tse(t)}function rse(t,e){var n=-1,r=I_(t)?Array(t.length):[];return O7(t,function(i,o,l){r[++n]=e(i,o,l)}),r}function K0(t,e){var n=Wh(t)?B7:rse;return n(t,nse(e))}var ise=function(e){var n=e.colors,r=e.onClick,i=e.onSwatchHover,o=$i({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return bt.createElement("div",{style:o.swatches},K0(n,function(l){return bt.createElement(Y0,{key:l,color:l,style:o.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+l}})}),bt.createElement("div",{style:o.clear}))},LD=function(e){var n=e.onChange,r=e.onSwatchHover,i=e.hex,o=e.colors,l=e.width,a=e.triangle,h=e.styles,f=h===void 0?{}:h,v=e.className,y=v===void 0?"":v,w=i==="transparent",b=function(P,C){yg(P)&&n({hex:P,source:"hex"},C)},A=$i(xh({default:{card:{width:l,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:CD(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},f),{"hide-triangle":a==="hide"});return bt.createElement("div",{style:A.card,className:"block-picker "+y},bt.createElement("div",{style:A.triangle}),bt.createElement("div",{style:A.head},w&&bt.createElement(D_,{borderRadius:"6px 6px 0 0"}),bt.createElement("div",{style:A.label},i)),bt.createElement("div",{style:A.body},bt.createElement(ise,{colors:o,onClick:b,onSwatchHover:r}),bt.createElement(Ha,{style:{input:A.input},value:i,onChange:b})))};LD.propTypes={width:Sr.oneOfType([Sr.string,Sr.number]),colors:Sr.arrayOf(Sr.string),triangle:Sr.oneOf(["top","hide"]),styles:Sr.object};LD.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};wh(LD);var _y={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},by={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},xy={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},wy={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},Sy={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Ey={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Ty={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},My={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},Ay={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},ob={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},Cy={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},Py={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},Ry={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},Dy={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},Ly={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},Iy={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},Oy={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},Ny={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},H7=function(e){var n=e.color,r=e.onClick,i=e.onSwatchHover,o=e.hover,l=e.active,a=e.circleSize,h=e.circleSpacing,f=$i({default:{swatch:{width:a,height:a,marginRight:h,marginBottom:h,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+n,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+n}}},{hover:o,active:l});return bt.createElement("div",{style:f.swatch},bt.createElement(Y0,{style:f.Swatch,color:n,onClick:r,onHover:i,focusStyle:{boxShadow:f.Swatch.boxShadow+", 0 0 5px "+n}}))};H7.defaultProps={circleSize:28,circleSpacing:14};const ase=_D.handleHover(H7);var ID=function(e){var n=e.width,r=e.onChange,i=e.onSwatchHover,o=e.colors,l=e.hex,a=e.circleSize,h=e.styles,f=h===void 0?{}:h,v=e.circleSpacing,y=e.className,w=y===void 0?"":y,b=$i(xh({default:{card:{width:n,display:"flex",flexWrap:"wrap",marginRight:-v,marginBottom:-v}}},f)),A=function(P,C){return r({hex:P,source:"hex"},C)};return bt.createElement("div",{style:b.card,className:"circle-picker "+w},K0(o,function(M){return bt.createElement(ase,{key:M,color:M,onClick:A,onSwatchHover:i,active:l===M.toLowerCase(),circleSize:a,circleSpacing:v})}))};ID.propTypes={width:Sr.oneOfType([Sr.string,Sr.number]),circleSize:Sr.number,circleSpacing:Sr.number,styles:Sr.object};ID.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[_y[500],by[500],xy[500],wy[500],Sy[500],Ey[500],Ty[500],My[500],Ay[500],ob[500],Cy[500],Py[500],Ry[500],Dy[500],Ly[500],Iy[500],Oy[500],Ny[500]],styles:{}};wh(ID);function AF(t){return t===void 0}var E2={},CF;function ose(){if(CF)return E2;CF=1,Object.defineProperty(E2,"__esModule",{value:!0});var t=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var h=arguments[a];for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(l[f]=h[f])}return l},e=U0(),n=r(e);function r(l){return l&&l.__esModule?l:{default:l}}function i(l,a){var h={};for(var f in l)a.indexOf(f)>=0||Object.prototype.hasOwnProperty.call(l,f)&&(h[f]=l[f]);return h}var o=24;return E2.default=function(l){var a=l.fill,h=a===void 0?"currentColor":a,f=l.width,v=f===void 0?o:f,y=l.height,w=y===void 0?o:y,b=l.style,A=b===void 0?{}:b,M=i(l,["fill","width","height","style"]);return n.default.createElement("svg",t({viewBox:"0 0 "+o+" "+o,style:t({fill:h,width:v,height:w},A)},M),n.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},E2}var sse=ose();const lse=S_(sse);var use=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function cse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hse(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function fse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var $7=function(t){fse(e,t);function e(n){cse(this,e);var r=hse(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,o){i.hex?yg(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},o):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},o):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},o)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(AF(i.s)?r.props.hsl.s:i.s),l:Number(AF(i.l)?r.props.hsl.l:i.l),source:"hsl"},o))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},n.hsl.a!==1&&n.view==="hex"?r.state={view:"rgb"}:r.state={view:n.view},r}return use(e,[{key:"render",value:function(){var r=this,i=$i({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),o=void 0;return this.state.view==="hex"?o=bt.createElement("div",{style:i.fields,className:"flexbox-fix"},bt.createElement("div",{style:i.field},bt.createElement(Ha,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?o=bt.createElement("div",{style:i.fields,className:"flexbox-fix"},bt.createElement("div",{style:i.field},bt.createElement(Ha,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),bt.createElement("div",{style:i.field},bt.createElement(Ha,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),bt.createElement("div",{style:i.field},bt.createElement(Ha,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),bt.createElement("div",{style:i.alpha},bt.createElement(Ha,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(o=bt.createElement("div",{style:i.fields,className:"flexbox-fix"},bt.createElement("div",{style:i.field},bt.createElement(Ha,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),bt.createElement("div",{style:i.field},bt.createElement(Ha,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),bt.createElement("div",{style:i.field},bt.createElement(Ha,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),bt.createElement("div",{style:i.alpha},bt.createElement(Ha,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),bt.createElement("div",{style:i.wrap,className:"flexbox-fix"},o,bt.createElement("div",{style:i.toggle},bt.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return r.icon=a}},bt.createElement(lse,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}(bt.Component);$7.defaultProps={view:"hex"};var PF=function(){var e=$i({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return bt.createElement("div",{style:e.picker})},dse=function(){var e=$i({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return bt.createElement("div",{style:e.picker})},OD=function(e){var n=e.width,r=e.onChange,i=e.disableAlpha,o=e.rgb,l=e.hsl,a=e.hsv,h=e.hex,f=e.renderers,v=e.styles,y=v===void 0?{}:v,w=e.className,b=w===void 0?"":w,A=e.defaultView,M=$i(xh({default:{picker:{width:n,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},y),{disableAlpha:i});return bt.createElement("div",{style:M.picker,className:"chrome-picker "+b},bt.createElement("div",{style:M.saturation},bt.createElement(dE,{style:M.Saturation,hsl:l,hsv:a,pointer:dse,onChange:r})),bt.createElement("div",{style:M.body},bt.createElement("div",{style:M.controls,className:"flexbox-fix"},bt.createElement("div",{style:M.color},bt.createElement("div",{style:M.swatch},bt.createElement("div",{style:M.active}),bt.createElement(D_,{renderers:f}))),bt.createElement("div",{style:M.toggles},bt.createElement("div",{style:M.hue},bt.createElement(L_,{style:M.Hue,hsl:l,pointer:PF,onChange:r})),bt.createElement("div",{style:M.alpha},bt.createElement(bD,{style:M.Alpha,rgb:o,hsl:l,pointer:PF,renderers:f,onChange:r})))),bt.createElement($7,{rgb:o,hsl:l,hex:h,view:A,onChange:r,disableAlpha:i})))};OD.propTypes={width:Sr.oneOfType([Sr.string,Sr.number]),disableAlpha:Sr.bool,styles:Sr.object,defaultView:Sr.oneOf(["hex","rgb","hsl"])};OD.defaultProps={width:225,disableAlpha:!1,styles:{}};wh(OD);var pse=function(e){var n=e.color,r=e.onClick,i=r===void 0?function(){}:r,o=e.onSwatchHover,l=e.active,a=$i({default:{color:{background:n,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:CD(n),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:l,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return bt.createElement(Y0,{style:a.color,color:n,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+n}},bt.createElement("div",{style:a.dot}))},mse=function(e){var n=e.hex,r=e.rgb,i=e.onChange,o=$i({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:n},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(h,f){h.r||h.g||h.b?i({r:h.r||r.r,g:h.g||r.g,b:h.b||r.b,source:"rgb"},f):i({hex:h.hex,source:"hex"},f)};return bt.createElement("div",{style:o.fields,className:"flexbox-fix"},bt.createElement("div",{style:o.active}),bt.createElement(Ha,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:n,onChange:l}),bt.createElement(Ha,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:l}),bt.createElement(Ha,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:l}),bt.createElement(Ha,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:l}))},ND=function(e){var n=e.onChange,r=e.onSwatchHover,i=e.colors,o=e.hex,l=e.rgb,a=e.styles,h=a===void 0?{}:a,f=e.className,v=f===void 0?"":f,y=$i(xh({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},h)),w=function(A,M){A.hex?yg(A.hex)&&n({hex:A.hex,source:"hex"},M):n(A,M)};return bt.createElement(px,{style:y.Compact,styles:h},bt.createElement("div",{style:y.compact,className:"compact-picker "+v},bt.createElement("div",null,K0(i,function(b){return bt.createElement(pse,{key:b,color:b,active:b.toLowerCase()===o,onClick:w,onSwatchHover:r})}),bt.createElement("div",{style:y.clear})),bt.createElement(mse,{hex:o,rgb:l,onChange:w})))};ND.propTypes={colors:Sr.arrayOf(Sr.string),styles:Sr.object};ND.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};wh(ND);var gse=function(e){var n=e.hover,r=e.color,i=e.onClick,o=e.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=$i({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:n});return bt.createElement("div",{style:a.swatch},bt.createElement(Y0,{color:r,onClick:i,onHover:o,focusStyle:l}))};const vse=_D.handleHover(gse);var kD=function(e){var n=e.width,r=e.colors,i=e.onChange,o=e.onSwatchHover,l=e.triangle,a=e.styles,h=a===void 0?{}:a,f=e.className,v=f===void 0?"":f,y=$i(xh({default:{card:{width:n,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},h),{"hide-triangle":l==="hide","top-left-triangle":l==="top-left","top-right-triangle":l==="top-right","bottom-left-triangle":l==="bottom-left","bottom-right-triangle":l==="bottom-right"}),w=function(A,M){return i({hex:A,source:"hex"},M)};return bt.createElement("div",{style:y.card,className:"github-picker "+v},bt.createElement("div",{style:y.triangleShadow}),bt.createElement("div",{style:y.triangle}),K0(r,function(b){return bt.createElement(vse,{color:b,key:b,onClick:w,onSwatchHover:o})}))};kD.propTypes={width:Sr.oneOfType([Sr.string,Sr.number]),colors:Sr.arrayOf(Sr.string),triangle:Sr.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Sr.object};kD.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};wh(kD);var yse=function(e){var n=e.direction,r=$i({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return bt.createElement("div",{style:r.picker})},_se=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FD=function(e){var n=e.width,r=e.height,i=e.onChange,o=e.hsl,l=e.direction,a=e.pointer,h=e.styles,f=h===void 0?{}:h,v=e.className,y=v===void 0?"":v,w=$i(xh({default:{picker:{position:"relative",width:n,height:r},hue:{radius:"2px"}}},f)),b=function(M){return i({a:1,h:M.h,l:.5,s:1})};return bt.createElement("div",{style:w.picker,className:"hue-picker "+y},bt.createElement(L_,_se({},w.hue,{hsl:o,pointer:a,onChange:b,direction:l})))};FD.propTypes={styles:Sr.object};FD.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:yse,styles:{}};wh(FD);var bse=function(e){var n=e.onChange,r=e.hex,i=e.rgb,o=e.styles,l=o===void 0?{}:o,a=e.className,h=a===void 0?"":a,f=$i(xh({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},l)),v=function(w,b){w.hex?yg(w.hex)&&n({hex:w.hex,source:"hex"},b):(w.r||w.g||w.b)&&n({r:w.r||i.r,g:w.g||i.g,b:w.b||i.b,source:"rgb"},b)};return bt.createElement(px,{styles:l},bt.createElement("div",{style:f.material,className:"material-picker "+h},bt.createElement(Ha,{style:{wrap:f.HEXwrap,input:f.HEXinput,label:f.HEXlabel},label:"hex",value:r,onChange:v}),bt.createElement("div",{style:f.split,className:"flexbox-fix"},bt.createElement("div",{style:f.third},bt.createElement(Ha,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"r",value:i.r,onChange:v})),bt.createElement("div",{style:f.third},bt.createElement(Ha,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"g",value:i.g,onChange:v})),bt.createElement("div",{style:f.third},bt.createElement(Ha,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"b",value:i.b,onChange:v})))))};wh(bse);var xse=function(e){var n=e.onChange,r=e.rgb,i=e.hsv,o=e.hex,l=$i({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(f,v){f["#"]?yg(f["#"])&&n({hex:f["#"],source:"hex"},v):f.r||f.g||f.b?n({r:f.r||r.r,g:f.g||r.g,b:f.b||r.b,source:"rgb"},v):(f.h||f.s||f.v)&&n({h:f.h||i.h,s:f.s||i.s,v:f.v||i.v,source:"hsv"},v)};return bt.createElement("div",{style:l.fields},bt.createElement(Ha,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),bt.createElement(Ha,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),bt.createElement(Ha,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),bt.createElement("div",{style:l.divider}),bt.createElement(Ha,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:r.r,onChange:a}),bt.createElement(Ha,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:r.g,onChange:a}),bt.createElement(Ha,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:r.b,onChange:a}),bt.createElement("div",{style:l.divider}),bt.createElement(Ha,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"#",value:o.replace("#",""),onChange:a}),bt.createElement("div",{style:l.fieldSymbols},bt.createElement("div",{style:l.symbol},"°"),bt.createElement("div",{style:l.symbol},"%"),bt.createElement("div",{style:l.symbol},"%")))},wse=function(e){var n=e.hsl,r=$i({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":n.l>.5});return bt.createElement("div",{style:r.picker})},Sse=function(){var e=$i({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return bt.createElement("div",{style:e.pointer},bt.createElement("div",{style:e.left},bt.createElement("div",{style:e.leftInside})),bt.createElement("div",{style:e.right},bt.createElement("div",{style:e.rightInside})))},RF=function(e){var n=e.onClick,r=e.label,i=e.children,o=e.active,l=$i({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return bt.createElement("div",{style:l.button,onClick:n},r||i)},Ese=function(e){var n=e.rgb,r=e.currentColor,i=$i({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+n.r+","+n.g+", "+n.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return bt.createElement("div",null,bt.createElement("div",{style:i.label},"new"),bt.createElement("div",{style:i.swatches},bt.createElement("div",{style:i.new}),bt.createElement("div",{style:i.current})),bt.createElement("div",{style:i.label},"current"))},Tse=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Mse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ase(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Cse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var BD=function(t){Cse(e,t);function e(n){Mse(this,e);var r=Ase(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.state={currentColor:n.hex},r}return Tse(e,[{key:"render",value:function(){var r=this.props,i=r.styles,o=i===void 0?{}:i,l=r.className,a=l===void 0?"":l,h=$i(xh({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},o));return bt.createElement("div",{style:h.picker,className:"photoshop-picker "+a},bt.createElement("div",{style:h.head},this.props.header),bt.createElement("div",{style:h.body,className:"flexbox-fix"},bt.createElement("div",{style:h.saturation},bt.createElement(dE,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:wse,onChange:this.props.onChange})),bt.createElement("div",{style:h.hue},bt.createElement(L_,{direction:"vertical",hsl:this.props.hsl,pointer:Sse,onChange:this.props.onChange})),bt.createElement("div",{style:h.controls},bt.createElement("div",{style:h.top,className:"flexbox-fix"},bt.createElement("div",{style:h.previews},bt.createElement(Ese,{rgb:this.props.rgb,currentColor:this.state.currentColor})),bt.createElement("div",{style:h.actions},bt.createElement(RF,{label:"OK",onClick:this.props.onAccept,active:!0}),bt.createElement(RF,{label:"Cancel",onClick:this.props.onCancel}),bt.createElement(xse,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(bt.Component);BD.propTypes={header:Sr.string,styles:Sr.object};BD.defaultProps={header:"Color Picker",styles:{}};wh(BD);var Pse=function(e){var n=e.onChange,r=e.rgb,i=e.hsl,o=e.hex,l=e.disableAlpha,a=$i({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:l}),h=function(v,y){v.hex?yg(v.hex)&&n({hex:v.hex,source:"hex"},y):v.r||v.g||v.b?n({r:v.r||r.r,g:v.g||r.g,b:v.b||r.b,a:r.a,source:"rgb"},y):v.a&&(v.a<0?v.a=0:v.a>100&&(v.a=100),v.a/=100,n({h:i.h,s:i.s,l:i.l,a:v.a,source:"rgb"},y))};return bt.createElement("div",{style:a.fields,className:"flexbox-fix"},bt.createElement("div",{style:a.double},bt.createElement(Ha,{style:{input:a.input,label:a.label},label:"hex",value:o.replace("#",""),onChange:h})),bt.createElement("div",{style:a.single},bt.createElement(Ha,{style:{input:a.input,label:a.label},label:"r",value:r.r,onChange:h,dragLabel:"true",dragMax:"255"})),bt.createElement("div",{style:a.single},bt.createElement(Ha,{style:{input:a.input,label:a.label},label:"g",value:r.g,onChange:h,dragLabel:"true",dragMax:"255"})),bt.createElement("div",{style:a.single},bt.createElement(Ha,{style:{input:a.input,label:a.label},label:"b",value:r.b,onChange:h,dragLabel:"true",dragMax:"255"})),bt.createElement("div",{style:a.alpha},bt.createElement(Ha,{style:{input:a.input,label:a.label},label:"a",value:Math.round(r.a*100),onChange:h,dragLabel:"true",dragMax:"100"})))},Rse=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W7=function(e){var n=e.colors,r=e.onClick,i=r===void 0?function(){}:r,o=e.onSwatchHover,l=$i({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!n||!n.length}),a=function(f,v){i({hex:f,source:"hex"},v)};return bt.createElement("div",{style:l.colors,className:"flexbox-fix"},n.map(function(h){var f=typeof h=="string"?{color:h}:h,v=""+f.color+(f.title||"");return bt.createElement("div",{key:v,style:l.swatchWrap},bt.createElement(Y0,Rse({},f,{style:l.swatch,onClick:a,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+f.color}})))}))};W7.propTypes={colors:Sr.arrayOf(Sr.oneOfType([Sr.string,Sr.shape({color:Sr.string,title:Sr.string})])).isRequired};var Dse=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zD=function(e){var n=e.width,r=e.rgb,i=e.hex,o=e.hsv,l=e.hsl,a=e.onChange,h=e.onSwatchHover,f=e.disableAlpha,v=e.presetColors,y=e.renderers,w=e.styles,b=w===void 0?{}:w,A=e.className,M=A===void 0?"":A,P=$i(xh({default:Dse({picker:{width:n,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},b),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},b),{disableAlpha:f});return bt.createElement("div",{style:P.picker,className:"sketch-picker "+M},bt.createElement("div",{style:P.saturation},bt.createElement(dE,{style:P.Saturation,hsl:l,hsv:o,onChange:a})),bt.createElement("div",{style:P.controls,className:"flexbox-fix"},bt.createElement("div",{style:P.sliders},bt.createElement("div",{style:P.hue},bt.createElement(L_,{style:P.Hue,hsl:l,onChange:a})),bt.createElement("div",{style:P.alpha},bt.createElement(bD,{style:P.Alpha,rgb:r,hsl:l,renderers:y,onChange:a}))),bt.createElement("div",{style:P.color},bt.createElement(D_,null),bt.createElement("div",{style:P.activeColor}))),bt.createElement(Pse,{rgb:r,hsl:l,hex:i,onChange:a,disableAlpha:f}),bt.createElement(W7,{colors:v,onClick:a,onSwatchHover:h}))};zD.propTypes={disableAlpha:Sr.bool,width:Sr.oneOfType([Sr.string,Sr.number]),styles:Sr.object};zD.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};wh(zD);var N1=function(e){var n=e.hsl,r=e.offset,i=e.onClick,o=i===void 0?function(){}:i,l=e.active,a=e.first,h=e.last,f=$i({default:{swatch:{height:"12px",background:"hsl("+n.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:l,first:a,last:h}),v=function(w){return o({h:n.h,s:.5,l:r,source:"hsl"},w)};return bt.createElement("div",{style:f.swatch,onClick:v})},Lse=function(e){var n=e.onClick,r=e.hsl,i=$i({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return bt.createElement("div",{style:i.swatches},bt.createElement("div",{style:i.swatch},bt.createElement(N1,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<o&&Math.abs(r.s-.5)<o,onClick:n,first:!0})),bt.createElement("div",{style:i.swatch},bt.createElement(N1,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<o&&Math.abs(r.s-.5)<o,onClick:n})),bt.createElement("div",{style:i.swatch},bt.createElement(N1,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<o&&Math.abs(r.s-.5)<o,onClick:n})),bt.createElement("div",{style:i.swatch},bt.createElement(N1,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<o&&Math.abs(r.s-.5)<o,onClick:n})),bt.createElement("div",{style:i.swatch},bt.createElement(N1,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<o&&Math.abs(r.s-.5)<o,onClick:n,last:!0})),bt.createElement("div",{style:i.clear}))},Ise=function(){var e=$i({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return bt.createElement("div",{style:e.picker})},UD=function(e){var n=e.hsl,r=e.onChange,i=e.pointer,o=e.styles,l=o===void 0?{}:o,a=e.className,h=a===void 0?"":a,f=$i(xh({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},l));return bt.createElement("div",{style:f.wrap||{},className:"slider-picker "+h},bt.createElement("div",{style:f.hue},bt.createElement(L_,{style:f.Hue,hsl:n,pointer:i,onChange:r})),bt.createElement("div",{style:f.swatches},bt.createElement(Lse,{hsl:n,onClick:r})))};UD.propTypes={styles:Sr.object};UD.defaultProps={pointer:Ise,styles:{}};wh(UD);var T2={},DF;function Ose(){if(DF)return T2;DF=1,Object.defineProperty(T2,"__esModule",{value:!0});var t=Object.assign||function(l){for(var a=1;a<arguments.length;a++){var h=arguments[a];for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(l[f]=h[f])}return l},e=U0(),n=r(e);function r(l){return l&&l.__esModule?l:{default:l}}function i(l,a){var h={};for(var f in l)a.indexOf(f)>=0||Object.prototype.hasOwnProperty.call(l,f)&&(h[f]=l[f]);return h}var o=24;return T2.default=function(l){var a=l.fill,h=a===void 0?"currentColor":a,f=l.width,v=f===void 0?o:f,y=l.height,w=y===void 0?o:y,b=l.style,A=b===void 0?{}:b,M=i(l,["fill","width","height","style"]);return n.default.createElement("svg",t({viewBox:"0 0 "+o+" "+o,style:t({fill:h,width:v,height:w},A)},M),n.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},T2}var Nse=Ose();const kse=S_(Nse);var Fse=function(e){var n=e.color,r=e.onClick,i=r===void 0?function(){}:r,o=e.onSwatchHover,l=e.first,a=e.last,h=e.active,f=$i({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:n,marginBottom:"1px"},check:{color:CD(n),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:l,last:a,active:h,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return bt.createElement(Y0,{color:n,style:f.color,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+n}},bt.createElement("div",{style:f.check},bt.createElement(kse,null)))},Bse=function(e){var n=e.onClick,r=e.onSwatchHover,i=e.group,o=e.active,l=$i({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return bt.createElement("div",{style:l.group},K0(i,function(a,h){return bt.createElement(Fse,{key:a,color:a,active:a.toLowerCase()===o,first:h===0,last:h===i.length-1,onClick:n,onSwatchHover:r})}))},jD=function(e){var n=e.width,r=e.height,i=e.onChange,o=e.onSwatchHover,l=e.colors,a=e.hex,h=e.styles,f=h===void 0?{}:h,v=e.className,y=v===void 0?"":v,w=$i(xh({default:{picker:{width:n,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},f)),b=function(M,P){return i({hex:M,source:"hex"},P)};return bt.createElement("div",{style:w.picker,className:"swatches-picker "+y},bt.createElement(px,null,bt.createElement("div",{style:w.overflow},bt.createElement("div",{style:w.body},K0(l,function(A){return bt.createElement(Bse,{key:A.toString(),group:A,active:a,onClick:b,onSwatchHover:o})}),bt.createElement("div",{style:w.clear})))))};jD.propTypes={width:Sr.oneOfType([Sr.string,Sr.number]),height:Sr.oneOfType([Sr.string,Sr.number]),colors:Sr.arrayOf(Sr.arrayOf(Sr.string)),styles:Sr.object};jD.defaultProps={width:320,height:240,colors:[[_y[900],_y[700],_y[500],_y[300],_y[100]],[by[900],by[700],by[500],by[300],by[100]],[xy[900],xy[700],xy[500],xy[300],xy[100]],[wy[900],wy[700],wy[500],wy[300],wy[100]],[Sy[900],Sy[700],Sy[500],Sy[300],Sy[100]],[Ey[900],Ey[700],Ey[500],Ey[300],Ey[100]],[Ty[900],Ty[700],Ty[500],Ty[300],Ty[100]],[My[900],My[700],My[500],My[300],My[100]],[Ay[900],Ay[700],Ay[500],Ay[300],Ay[100]],["#194D33",ob[700],ob[500],ob[300],ob[100]],[Cy[900],Cy[700],Cy[500],Cy[300],Cy[100]],[Py[900],Py[700],Py[500],Py[300],Py[100]],[Ry[900],Ry[700],Ry[500],Ry[300],Ry[100]],[Dy[900],Dy[700],Dy[500],Dy[300],Dy[100]],[Ly[900],Ly[700],Ly[500],Ly[300],Ly[100]],[Iy[900],Iy[700],Iy[500],Iy[300],Iy[100]],[Oy[900],Oy[700],Oy[500],Oy[300],Oy[100]],[Ny[900],Ny[700],Ny[500],Ny[300],Ny[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};wh(jD);var VD=function(e){var n=e.onChange,r=e.onSwatchHover,i=e.hex,o=e.colors,l=e.width,a=e.triangle,h=e.styles,f=h===void 0?{}:h,v=e.className,y=v===void 0?"":v,w=$i(xh({default:{card:{width:l,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},f),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),b=function(M,P){yg(M)&&n({hex:M,source:"hex"},P)};return bt.createElement("div",{style:w.card,className:"twitter-picker "+y},bt.createElement("div",{style:w.triangleShadow}),bt.createElement("div",{style:w.triangle}),bt.createElement("div",{style:w.body},K0(o,function(A,M){return bt.createElement(Y0,{key:M,color:A,hex:A,style:w.swatch,onClick:b,onHover:r,focusStyle:{boxShadow:"0 0 4px "+A}})}),bt.createElement("div",{style:w.hash},"#"),bt.createElement(Ha,{label:null,style:{input:w.input},value:i.replace("#",""),onChange:b}),bt.createElement("div",{style:w.clear})))};VD.propTypes={width:Sr.oneOfType([Sr.string,Sr.number]),triangle:Sr.oneOf(["hide","top-left","top-right"]),colors:Sr.arrayOf(Sr.string),styles:Sr.object};VD.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};wh(VD);var GD=function(e){var n=$i({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return bt.createElement("div",{style:n.picker})};GD.propTypes={hsl:Sr.shape({h:Sr.number,s:Sr.number,l:Sr.number,a:Sr.number})};GD.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var qD=function(e){var n=$i({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return bt.createElement("div",{style:n.picker})};qD.propTypes={hsl:Sr.shape({h:Sr.number,s:Sr.number,l:Sr.number,a:Sr.number})};qD.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var zse=function(e){var n=e.onChange,r=e.rgb,i=e.hsl,o=e.hex,l=e.hsv,a=function(b,A){if(b.hex)yg(b.hex)&&n({hex:b.hex,source:"hex"},A);else if(b.rgb){var M=b.rgb.split(",");DA(b.rgb,"rgb")&&n({r:M[0],g:M[1],b:M[2],a:1,source:"rgb"},A)}else if(b.hsv){var P=b.hsv.split(",");DA(b.hsv,"hsv")&&(P[2]=P[2].replace("%",""),P[1]=P[1].replace("%",""),P[0]=P[0].replace("°",""),P[1]==1?P[1]=.01:P[2]==1&&(P[2]=.01),n({h:Number(P[0]),s:Number(P[1]),v:Number(P[2]),source:"hsv"},A))}else if(b.hsl){var C=b.hsl.split(",");DA(b.hsl,"hsl")&&(C[2]=C[2].replace("%",""),C[1]=C[1].replace("%",""),C[0]=C[0].replace("°",""),y[1]==1?y[1]=.01:y[2]==1&&(y[2]=.01),n({h:Number(C[0]),s:Number(C[1]),v:Number(C[2]),source:"hsl"},A))}},h=$i({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),f=r.r+", "+r.g+", "+r.b,v=Math.round(i.h)+"°, "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",y=Math.round(l.h)+"°, "+Math.round(l.s*100)+"%, "+Math.round(l.v*100)+"%";return bt.createElement("div",{style:h.wrap,className:"flexbox-fix"},bt.createElement("div",{style:h.fields},bt.createElement("div",{style:h.double},bt.createElement(Ha,{style:{input:h.input,label:h.label},label:"hex",value:o,onChange:a})),bt.createElement("div",{style:h.column},bt.createElement("div",{style:h.single},bt.createElement(Ha,{style:{input:h.input2,label:h.label2},label:"rgb",value:f,onChange:a})),bt.createElement("div",{style:h.single},bt.createElement(Ha,{style:{input:h.input2,label:h.label2},label:"hsv",value:y,onChange:a})),bt.createElement("div",{style:h.single},bt.createElement(Ha,{style:{input:h.input2,label:h.label2},label:"hsl",value:v,onChange:a})))))},HD=function(e){var n=e.width,r=e.onChange,i=e.rgb,o=e.hsl,l=e.hsv,a=e.hex,h=e.header,f=e.styles,v=f===void 0?{}:f,y=e.className,w=y===void 0?"":y,b=$i(xh({default:{picker:{width:n,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},v));return bt.createElement("div",{style:b.picker,className:"google-picker "+w},bt.createElement("div",{style:b.head},h),bt.createElement("div",{style:b.swatch}),bt.createElement("div",{style:b.saturation},bt.createElement(dE,{hsl:o,hsv:l,pointer:GD,onChange:r})),bt.createElement("div",{style:b.body},bt.createElement("div",{style:b.controls,className:"flexbox-fix"},bt.createElement("div",{style:b.hue},bt.createElement(L_,{style:b.Hue,hsl:o,radius:"4px",pointer:qD,onChange:r}))),bt.createElement(zse,{rgb:i,hsl:o,hex:a,hsv:l,onChange:r})))};HD.propTypes={width:Sr.oneOfType([Sr.string,Sr.number]),styles:Sr.object,header:Sr.string};HD.defaultProps={width:652,styles:{},header:"Color picker"};wh(HD);var LF;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(LF||(LF={}));const Use=Object.freeze({x:0,y:0});var Vy;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Vy||(Vy={}));var IF;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(IF||(IF={}));var gf;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(gf||(gf={}));gf.Space,gf.Enter,gf.Esc,gf.Space,gf.Enter,gf.Tab;var OF;(function(t){t[t.RightClick=2]="RightClick"})(OF||(OF={}));var NF;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(NF||(NF={}));var kF;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(kF||(kF={}));Vy.Backward+"",Vy.Forward+"",Vy.Backward+"",Vy.Forward+"";var I3;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(I3||(I3={}));var O3;(function(t){t.Optimized="optimized"})(O3||(O3={}));I3.WhileDragging,O3.Optimized;({...Use});var FF;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(FF||(FF={}));gf.Down,gf.Right,gf.Up,gf.Left;var qa={},Hu={},BF;function O_(){if(BF)return Hu;BF=1;function t(C,k,B){if(B===void 0&&(B=Array.prototype),C&&typeof B.find=="function")return B.find.call(C,k);for(var z=0;z<C.length;z++)if(n(C,z)){var q=C[z];if(k.call(void 0,q,z,C))return q}}function e(C,k){return k===void 0&&(k=Object),k&&typeof k.getOwnPropertyDescriptors=="function"&&(C=k.create(null,k.getOwnPropertyDescriptors(C))),k&&typeof k.freeze=="function"?k.freeze(C):C}function n(C,k){return Object.prototype.hasOwnProperty.call(C,k)}function r(C,k){if(C===null||typeof C!="object")throw new TypeError("target is not an object");for(var B in k)n(k,B)&&(C[B]=k[B]);return C}var i=e({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function o(C){return n(i,C.toLowerCase())}var l=e({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(C){return n(l,C.toLowerCase())}var h=e({script:!1,style:!1,textarea:!0,title:!0});function f(C){var k=C.toLowerCase();return n(h,k)&&!h[k]}function v(C){var k=C.toLowerCase();return n(h,k)&&h[k]}function y(C){return C===b.HTML}function w(C){return y(C)||C===b.XML_XHTML_APPLICATION}var b=e({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),A=Object.keys(b).map(function(C){return b[C]});function M(C){return A.indexOf(C)>-1}var P=e({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Hu.assign=r,Hu.find=t,Hu.freeze=e,Hu.HTML_BOOLEAN_ATTRIBUTES=i,Hu.HTML_RAW_TEXT_ELEMENTS=h,Hu.HTML_VOID_ELEMENTS=l,Hu.hasDefaultHTMLNamespace=w,Hu.hasOwn=n,Hu.isHTMLBooleanAttribute=o,Hu.isHTMLRawTextElement=f,Hu.isHTMLEscapableRawTextElement=v,Hu.isHTMLMimeType=y,Hu.isHTMLVoidElement=a,Hu.isValidMimeType=M,Hu.MIME_TYPE=b,Hu.NAMESPACE=P,Hu}var Xv={},zF;function gE(){if(zF)return Xv;zF=1;var t=O_();function e(w,b){w.prototype=Object.create(Error.prototype,{constructor:{value:w},name:{value:w.name,enumerable:!0,writable:b}})}var n=t.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),r=Object.keys(n);function i(w){return typeof w=="number"&&w>=1&&w<=25}function o(w){return typeof w=="string"&&w.substring(w.length-n.Error.length)===n.Error}function l(w,b){i(w)?(this.name=r[w],this.message=b||""):(this.message=w,this.name=o(b)?b:n.Error),Error.captureStackTrace&&Error.captureStackTrace(this,l)}e(l,!0),Object.defineProperties(l.prototype,{code:{enumerable:!0,get:function(){var w=r.indexOf(this.name);return i(w)?w:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},h=Object.entries(a),f=0;f<h.length;f++){var v=h[f][0];l[v]=h[f][1]}function y(w,b){this.message=w,this.locator=b,Error.captureStackTrace&&Error.captureStackTrace(this,y)}return e(y),Xv.DOMException=l,Xv.DOMExceptionName=n,Xv.ExceptionCode=a,Xv.ParseError=y,Xv}var _l={},ga={},UF;function X7(){if(UF)return ga;UF=1;function t(xt){try{typeof xt!="function"&&(xt=RegExp);var Dt=new xt("𝌆","u").exec("𝌆");return!!Dt&&Dt[0].length===2}catch{}return!1}var e=t();function n(xt){if(xt.source[0]!=="[")throw new Error(xt+" can not be used with chars");return xt.source.slice(1,xt.source.lastIndexOf("]"))}function r(xt,Dt){if(xt.source[0]!=="[")throw new Error("/"+xt.source+"/ can not be used with chars_without");if(!Dt||typeof Dt!="string")throw new Error(JSON.stringify(Dt)+" is not a valid search");if(xt.source.indexOf(Dt)===-1)throw new Error('"'+Dt+'" is not is /'+xt.source+"/");if(Dt==="-"&&xt.source.indexOf(Dt)!==1)throw new Error('"'+Dt+'" is not at the first postion of /'+xt.source+"/");return new RegExp(xt.source.replace(Dt,""),e?"u":"")}function i(xt){var Dt=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(zt){var Tn=typeof zt=="string";if(Tn&&Dt===void 0&&zt==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return Tn?zt:zt.source}).join(""),e?"mu":"m")}function o(xt){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(o,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var l="�",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;e&&(a=i("[",n(a),"\\u{10000}-\\u{10FFFF}","]"));var h=/[\x20\x09\x0D\x0A]/,f=n(h),v=i(h,"+"),y=i(h,"*"),w=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;e&&(w=i("[",n(w),"\\u{10000}-\\u{10FFFF}","]"));var b=n(w),A=i("[",b,n(/[-.0-9\xB7]/),n(/[\u0300-\u036F\u203F-\u2040]/),"]"),M=i(w,A,"*"),P=i(A,"+"),C=i("&",M,";"),k=o(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),B=o(C,"|",k),z=i("%",M,";"),q=o(i('"',o(/[^%&"]/,"|",z,"|",B),"*",'"'),"|",i("'",o(/[^%&']/,"|",z,"|",B),"*","'")),V=o('"',o(/[^<&"]/,"|",B),"*",'"',"|","'",o(/[^<&']/,"|",B),"*","'"),W=r(w,":"),Y=r(A,":"),Z=i(W,Y,"*"),j=i(Z,o(":",Z),"?"),K=i("^",j,"$"),re=i("(",j,")"),ie=o(/"[^"]*"|'[^']*'/),se=i(/^<\?/,"(",M,")",o(v,"(",a,"*?)"),"?",/\?>/),de=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,ue=o('"',de,'*"',"|","'",r(de,"'"),"*'"),Te="<!--",pe="-->",De=i(Te,o(r(a,"-"),"|",i("-",r(a,"-"))),"*",pe),me="#PCDATA",Me=o(i(/\(/,y,me,o(y,/\|/,y,j),"*",y,/\)\*/),"|",i(/\(/,y,me,y,/\)/)),fe=/[?*+]?/,ve=i(/\([^>]+\)/,fe),le=o("EMPTY","|","ANY","|",Me,"|",ve),ye="<!ELEMENT",Se=i(ye,v,o(j,"|",z),v,o(le,"|",z),y,">"),Be=i("NOTATION",v,/\(/,y,M,o(y,/\|/,y,M),"*",y,/\)/),Ve=i(/\(/,y,P,o(y,/\|/,y,P),"*",y,/\)/),tt=o(Be,"|",Ve),ht=o(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",tt),it=o(/#REQUIRED|#IMPLIED/,"|",o(o("#FIXED",v),"?",V)),gt=o(v,M,v,ht,v,it),$t="<!ATTLIST",He=i($t,v,M,gt,"*",y,">"),Ct="about:legacy-compat",Xe=o('"'+Ct+'"',"|","'"+Ct+"'"),tn="SYSTEM",Kt="PUBLIC",Jt=o(o(tn,v,ie),"|",o(Kt,v,ue,v,ie)),Ht=i("^",o(o(tn,v,"(?<SystemLiteralOnly>",ie,")"),"|",o(Kt,v,"(?<PubidLiteral>",ue,")",v,"(?<SystemLiteral>",ie,")"))),$e=o(v,"NDATA",v,M),Ee=o(q,"|",o(Jt,$e,"?")),_t="<!ENTITY",jt=i(_t,v,M,v,Ee,y,">"),vt=o(q,"|",Jt),Pt=i(_t,v,"%",v,M,v,vt,y,">"),vn=o(jt,"|",Pt),hn=i(Kt,v,ue),pn=i("<!NOTATION",v,M,v,o(Jt,"|",hn),y,">"),nn=i(y,"=",y),Ft=/1[.]\d+/,In=i(v,"version",nn,o("'",Ft,"'","|",'"',Ft,'"')),Pn=/[A-Za-z][-A-Za-z0-9._]*/,ir=o(v,"encoding",nn,o('"',Pn,'"',"|","'",Pn,"'")),mt=o(v,"standalone",nn,o("'",o("yes","|","no"),"'","|",'"',o("yes","|","no"),'"')),ge=i(/^<\?xml/,In,ir,"?",mt,"?",y,/\?>/),ke="<!DOCTYPE",We="<![CDATA[",Ce="]]>",Qe=/<!\[CDATA\[/,et=/\]\]>/,ut=i(a,"*?",et),lt=i(Qe,ut);return ga.chars=n,ga.chars_without=r,ga.detectUnicodeSupport=t,ga.reg=i,ga.regg=o,ga.ABOUT_LEGACY_COMPAT=Ct,ga.ABOUT_LEGACY_COMPAT_SystemLiteral=Xe,ga.AttlistDecl=He,ga.CDATA_START=We,ga.CDATA_END=Ce,ga.CDSect=lt,ga.Char=a,ga.Comment=De,ga.COMMENT_START=Te,ga.COMMENT_END=pe,ga.DOCTYPE_DECL_START=ke,ga.elementdecl=Se,ga.EntityDecl=vn,ga.EntityValue=q,ga.ExternalID=Jt,ga.ExternalID_match=Ht,ga.Name=M,ga.NotationDecl=pn,ga.Reference=B,ga.PEReference=z,ga.PI=se,ga.PUBLIC=Kt,ga.PubidLiteral=ue,ga.QName=j,ga.QName_exact=K,ga.QName_group=re,ga.S=v,ga.SChar_s=f,ga.S_OPT=y,ga.SYSTEM=tn,ga.SystemLiteral=ie,ga.UNICODE_REPLACEMENT_CHARACTER=l,ga.UNICODE_SUPPORT=e,ga.XMLDecl=ge,ga}var jF;function Z7(){if(jF)return _l;jF=1;var t=O_(),e=t.find,n=t.hasDefaultHTMLNamespace,r=t.hasOwn,i=t.isHTMLMimeType,o=t.isHTMLRawTextElement,l=t.isHTMLVoidElement,a=t.MIME_TYPE,h=t.NAMESPACE,f=Symbol(),v=gE(),y=v.DOMException,w=v.DOMExceptionName,b=X7();function A(we){if(we!==f)throw new TypeError("Illegal constructor")}function M(we){return we!==""}function P(we){return we?we.split(/[\t\n\f\r ]+/).filter(M):[]}function C(we,Ne){return r(we,Ne)||(we[Ne]=!0),we}function k(we){if(!we)return[];var Ne=P(we);return Object.keys(Ne.reduce(C,{}))}function B(we){return function(Ne){return we&&we.indexOf(Ne)!==-1}}function z(we){if(!b.QName_exact.test(we))throw new y(y.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+we+'"')}function q(we,Ne){z(Ne),we=we||null;var je=null,At=Ne;if(Ne.indexOf(":")>=0){var sn=Ne.split(":");je=sn[0],At=sn[1]}if(je!==null&&we===null)throw new y(y.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(je==="xml"&&we!==t.NAMESPACE.XML)throw new y(y.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((je==="xmlns"||Ne==="xmlns")&&we!==t.NAMESPACE.XMLNS)throw new y(y.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(we===t.NAMESPACE.XMLNS&&je!=="xmlns"&&Ne!=="xmlns")throw new y(y.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[we,je,At]}function V(we,Ne){for(var je in we)r(we,je)&&(Ne[je]=we[je])}function W(we,Ne){var je=we.prototype;if(!(je instanceof Ne)){let At=function(){};At.prototype=Ne.prototype,At=new At,V(je,At),we.prototype=je=At}je.constructor!=we&&(typeof we!="function"&&console.error("unknown Class:"+we),je.constructor=we)}var Y={},Z=Y.ELEMENT_NODE=1,j=Y.ATTRIBUTE_NODE=2,K=Y.TEXT_NODE=3,re=Y.CDATA_SECTION_NODE=4,ie=Y.ENTITY_REFERENCE_NODE=5,se=Y.ENTITY_NODE=6,de=Y.PROCESSING_INSTRUCTION_NODE=7,ue=Y.COMMENT_NODE=8,Te=Y.DOCUMENT_NODE=9,pe=Y.DOCUMENT_TYPE_NODE=10,De=Y.DOCUMENT_FRAGMENT_NODE=11,me=Y.NOTATION_NODE=12,Me=t.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function fe(we,Ne){if(Ne.length<we.length)return fe(Ne,we);var je=null;for(var At in we){if(we[At]!==Ne[At])return je;je=we[At]}return je}function ve(we){return we.guid||(we.guid=Math.random()),we.guid}function le(){}le.prototype={length:0,item:function(we){return we>=0&&we<this.length?this[we]:null},toString:function(we){for(var Ne=[],je=0;je<this.length;je++)Tn(this[je],Ne,we);return Ne.join("")},filter:function(we){return Array.prototype.filter.call(this,we)},indexOf:function(we){return Array.prototype.indexOf.call(this,we)}},le.prototype[Symbol.iterator]=function(){var we=this,Ne=0;return{next:function(){return Ne<we.length?{value:we[Ne++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function ye(we,Ne){this._node=we,this._refresh=Ne,Se(this)}function Se(we){var Ne=we._node._inc||we._node.ownerDocument._inc;if(we._inc!==Ne){var je=we._refresh(we._node);if(Gn(we,"length",je.length),!we.$$length||je.length<we.$$length)for(var At=je.length;At in we;At++)r(we,At)&&delete we[At];V(je,we),we._inc=Ne}}ye.prototype.item=function(we){return Se(this),this[we]||null},W(ye,le);function Be(){}function Ve(we,Ne){for(var je=0;je<we.length;){if(we[je]===Ne)return je;je++}}function tt(we,Ne,je,At){if(At?Ne[Ve(Ne,At)]=je:(Ne[Ne.length]=je,Ne.length++),we){je.ownerElement=we;var sn=we.ownerDocument;sn&&(At&&tn(sn,we,At),Xe(sn,we,je))}}function ht(we,Ne,je){var At=Ve(Ne,je);if(At>=0){for(var sn=Ne.length-1;At<=sn;)Ne[At]=Ne[++At];if(Ne.length=sn,we){var Hn=we.ownerDocument;Hn&&tn(Hn,we,je),je.ownerElement=null}}}Be.prototype={length:0,item:le.prototype.item,getNamedItem:function(we){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(we=we.toLowerCase());for(var Ne=0;Ne<this.length;){var je=this[Ne];if(je.nodeName===we)return je;Ne++}return null},setNamedItem:function(we){var Ne=we.ownerElement;if(Ne&&Ne!==this._ownerElement)throw new y(y.INUSE_ATTRIBUTE_ERR);var je=this.getNamedItemNS(we.namespaceURI,we.localName);return je===we?we:(tt(this._ownerElement,this,we,je),je)},setNamedItemNS:function(we){return this.setNamedItem(we)},removeNamedItem:function(we){var Ne=this.getNamedItem(we);if(!Ne)throw new y(y.NOT_FOUND_ERR,we);return ht(this._ownerElement,this,Ne),Ne},removeNamedItemNS:function(we,Ne){var je=this.getNamedItemNS(we,Ne);if(!je)throw new y(y.NOT_FOUND_ERR,we?we+" : "+Ne:Ne);return ht(this._ownerElement,this,je),je},getNamedItemNS:function(we,Ne){we||(we=null);for(var je=0;je<this.length;){var At=this[je];if(At.localName===Ne&&At.namespaceURI===we)return At;je++}return null}},Be.prototype[Symbol.iterator]=function(){var we=this,Ne=0;return{next:function(){return Ne<we.length?{value:we[Ne++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function it(){}it.prototype={hasFeature:function(we,Ne){return!0},createDocument:function(we,Ne,je){var At=a.XML_APPLICATION;we===h.HTML?At=a.XML_XHTML_APPLICATION:we===h.SVG&&(At=a.XML_SVG_IMAGE);var sn=new Ct(f,{contentType:At});if(sn.implementation=this,sn.childNodes=new le,sn.doctype=je||null,je&&sn.appendChild(je),Ne){var Hn=sn.createElementNS(we,Ne);sn.appendChild(Hn)}return sn},createDocumentType:function(we,Ne,je,At){z(we);var sn=new ke(f);return sn.name=we,sn.nodeName=we,sn.publicId=Ne||"",sn.systemId=je||"",sn.internalSubset=At||"",sn.childNodes=new le,sn},createHTMLDocument:function(we){var Ne=new Ct(f,{contentType:a.HTML});if(Ne.implementation=this,Ne.childNodes=new le,we!==!1){Ne.doctype=this.createDocumentType("html"),Ne.doctype.ownerDocument=Ne,Ne.appendChild(Ne.doctype);var je=Ne.createElement("html");Ne.appendChild(je);var At=Ne.createElement("head");if(je.appendChild(At),typeof we=="string"){var sn=Ne.createElement("title");sn.appendChild(Ne.createTextNode(we)),At.appendChild(sn)}je.appendChild(Ne.createElement("body"))}return Ne}};function gt(we){A(we)}gt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var we=this.getRootNode();return we&&we.nodeType===we.DOCUMENT_NODE},contains:function(we){if(!we)return!1;var Ne=we;do{if(this===Ne)return!0;Ne=we.parentNode}while(Ne);return!1},getRootNode:function(we){var Ne=this;do{if(!Ne.parentNode)return Ne;Ne=Ne.parentNode}while(Ne)},isEqualNode:function(we){if(!we||this.nodeType!==we.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==we.name||this.publicId!==we.publicId||this.systemId!==we.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==we.namespaceURI||this.prefix!==we.prefix||this.localName!==we.localName||this.attributes.length!==we.attributes.length)return!1;for(var Ne=0;Ne<this.attributes.length;Ne++){var je=this.attributes.item(Ne);if(!je.isEqualNode(we.getAttributeNodeNS(je.namespaceURI,je.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==we.namespaceURI||this.localName!==we.localName||this.value!==we.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==we.target||this.data!==we.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==we.data)return!1;break}if(this.childNodes.length!==we.childNodes.length)return!1;for(var Ne=0;Ne<this.childNodes.length;Ne++)if(!this.childNodes[Ne].isEqualNode(we.childNodes[Ne]))return!1;return!0},isSameNode:function(we){return this===we},insertBefore:function(we,Ne){return nn(this,we,Ne)},replaceChild:function(we,Ne){nn(this,we,Ne,pn),Ne&&this.removeChild(Ne)},removeChild:function(we){return Jt(this,we)},appendChild:function(we){return this.insertBefore(we,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(we){return Zn(this.ownerDocument||this,this,we)},normalize:function(){for(var we=this.firstChild;we;){var Ne=we.nextSibling;Ne&&Ne.nodeType==K&&we.nodeType==K?(this.removeChild(Ne),we.appendData(Ne.data)):(we.normalize(),we=Ne)}},isSupported:function(we,Ne){return this.ownerDocument.implementation.hasFeature(we,Ne)},lookupPrefix:function(we){for(var Ne=this;Ne;){var je=Ne._nsMap;if(je){for(var At in je)if(r(je,At)&&je[At]===we)return At}Ne=Ne.nodeType==j?Ne.ownerDocument:Ne.parentNode}return null},lookupNamespaceURI:function(we){for(var Ne=this;Ne;){var je=Ne._nsMap;if(je&&r(je,we))return je[we];Ne=Ne.nodeType==j?Ne.ownerDocument:Ne.parentNode}return null},isDefaultNamespace:function(we){var Ne=this.lookupPrefix(we);return Ne==null},compareDocumentPosition:function(we){if(this===we)return 0;var Ne=we,je=this,At=null,sn=null;if(Ne instanceof In&&(At=Ne,Ne=At.ownerElement),je instanceof In&&(sn=je,je=sn.ownerElement,At&&Ne&&je===Ne))for(var Hn=0,or;or=je.attributes[Hn];Hn++){if(or===At)return Me.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Me.DOCUMENT_POSITION_PRECEDING;if(or===sn)return Me.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Me.DOCUMENT_POSITION_FOLLOWING}if(!Ne||!je||je.ownerDocument!==Ne.ownerDocument)return Me.DOCUMENT_POSITION_DISCONNECTED+Me.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(ve(je.ownerDocument)>ve(Ne.ownerDocument)?Me.DOCUMENT_POSITION_FOLLOWING:Me.DOCUMENT_POSITION_PRECEDING);if(sn&&Ne===je)return Me.DOCUMENT_POSITION_CONTAINS+Me.DOCUMENT_POSITION_PRECEDING;if(At&&Ne===je)return Me.DOCUMENT_POSITION_CONTAINED_BY+Me.DOCUMENT_POSITION_FOLLOWING;for(var Er=[],lr=Ne.parentNode;lr;){if(!sn&&lr===je)return Me.DOCUMENT_POSITION_CONTAINED_BY+Me.DOCUMENT_POSITION_FOLLOWING;Er.push(lr),lr=lr.parentNode}Er.reverse();for(var Ri=[],ci=je.parentNode;ci;){if(!At&&ci===Ne)return Me.DOCUMENT_POSITION_CONTAINS+Me.DOCUMENT_POSITION_PRECEDING;Ri.push(ci),ci=ci.parentNode}Ri.reverse();var Vi=fe(Er,Ri);for(var Vr in Vi.childNodes){var Ca=Vi.childNodes[Vr];if(Ca===je)return Me.DOCUMENT_POSITION_FOLLOWING;if(Ca===Ne)return Me.DOCUMENT_POSITION_PRECEDING;if(Ri.indexOf(Ca)>=0)return Me.DOCUMENT_POSITION_FOLLOWING;if(Er.indexOf(Ca)>=0)return Me.DOCUMENT_POSITION_PRECEDING}return 0}};function $t(we){return we=="<"&&"&lt;"||we==">"&&"&gt;"||we=="&"&&"&amp;"||we=='"'&&"&quot;"||"&#"+we.charCodeAt()+";"}V(Y,gt),V(Y,gt.prototype),V(Me,gt),V(Me,gt.prototype);function He(we,Ne){if(Ne(we))return!0;if(we=we.firstChild)do if(He(we,Ne))return!0;while(we=we.nextSibling)}function Ct(we,Ne){A(we);var je=Ne||{};this.ownerDocument=this,this.contentType=je.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function Xe(we,Ne,je){we&&we._inc++;var At=je.namespaceURI;At===h.XMLNS&&(Ne._nsMap[je.prefix?je.localName:""]=je.value)}function tn(we,Ne,je,At){we&&we._inc++;var sn=je.namespaceURI;sn===h.XMLNS&&delete Ne._nsMap[je.prefix?je.localName:""]}function Kt(we,Ne,je){if(we&&we._inc){we._inc++;var At=Ne.childNodes;if(je&&!je.nextSibling)At[At.length++]=je;else{for(var sn=Ne.firstChild,Hn=0;sn;)At[Hn++]=sn,sn=sn.nextSibling;At.length=Hn,delete At[At.length]}}}function Jt(we,Ne){if(we!==Ne.parentNode)throw new y(y.NOT_FOUND_ERR,"child's parent is not parent");var je=Ne.previousSibling,At=Ne.nextSibling;return je?je.nextSibling=At:we.firstChild=At,At?At.previousSibling=je:we.lastChild=je,Kt(we.ownerDocument,we),Ne.parentNode=null,Ne.previousSibling=null,Ne.nextSibling=null,Ne}function Ht(we){return we&&(we.nodeType===gt.DOCUMENT_NODE||we.nodeType===gt.DOCUMENT_FRAGMENT_NODE||we.nodeType===gt.ELEMENT_NODE)}function $e(we){return we&&(we.nodeType===gt.CDATA_SECTION_NODE||we.nodeType===gt.COMMENT_NODE||we.nodeType===gt.DOCUMENT_FRAGMENT_NODE||we.nodeType===gt.DOCUMENT_TYPE_NODE||we.nodeType===gt.ELEMENT_NODE||we.nodeType===gt.PROCESSING_INSTRUCTION_NODE||we.nodeType===gt.TEXT_NODE)}function Ee(we){return we&&we.nodeType===gt.DOCUMENT_TYPE_NODE}function _t(we){return we&&we.nodeType===gt.ELEMENT_NODE}function jt(we){return we&&we.nodeType===gt.TEXT_NODE}function vt(we,Ne){var je=we.childNodes||[];if(e(je,_t)||Ee(Ne))return!1;var At=e(je,Ee);return!(Ne&&At&&je.indexOf(At)>je.indexOf(Ne))}function Pt(we,Ne){var je=we.childNodes||[];function At(Hn){return _t(Hn)&&Hn!==Ne}if(e(je,At))return!1;var sn=e(je,Ee);return!(Ne&&sn&&je.indexOf(sn)>je.indexOf(Ne))}function vn(we,Ne,je){if(!Ht(we))throw new y(y.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+we.nodeType);if(je&&je.parentNode!==we)throw new y(y.NOT_FOUND_ERR,"child not in parent");if(!$e(Ne)||Ee(Ne)&&we.nodeType!==gt.DOCUMENT_NODE)throw new y(y.HIERARCHY_REQUEST_ERR,"Unexpected node type "+Ne.nodeType+" for parent node type "+we.nodeType)}function hn(we,Ne,je){var At=we.childNodes||[],sn=Ne.childNodes||[];if(Ne.nodeType===gt.DOCUMENT_FRAGMENT_NODE){var Hn=sn.filter(_t);if(Hn.length>1||e(sn,jt))throw new y(y.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Hn.length===1&&!vt(we,je))throw new y(y.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(_t(Ne)&&!vt(we,je))throw new y(y.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(Ee(Ne)){if(e(At,Ee))throw new y(y.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var or=e(At,_t);if(je&&At.indexOf(or)<At.indexOf(je))throw new y(y.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!je&&or)throw new y(y.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function pn(we,Ne,je){var At=we.childNodes||[],sn=Ne.childNodes||[];if(Ne.nodeType===gt.DOCUMENT_FRAGMENT_NODE){var Hn=sn.filter(_t);if(Hn.length>1||e(sn,jt))throw new y(y.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Hn.length===1&&!Pt(we,je))throw new y(y.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(_t(Ne)&&!Pt(we,je))throw new y(y.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(Ee(Ne)){if(e(At,function(lr){return Ee(lr)&&lr!==je}))throw new y(y.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var or=e(At,_t);if(je&&At.indexOf(or)<At.indexOf(je))throw new y(y.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function nn(we,Ne,je,At){vn(we,Ne,je),we.nodeType===gt.DOCUMENT_NODE&&(At||hn)(we,Ne,je);var sn=Ne.parentNode;if(sn&&sn.removeChild(Ne),Ne.nodeType===De){var Hn=Ne.firstChild;if(Hn==null)return Ne;var or=Ne.lastChild}else Hn=or=Ne;var Er=je?je.previousSibling:we.lastChild;Hn.previousSibling=Er,or.nextSibling=je,Er?Er.nextSibling=Hn:we.firstChild=Hn,je==null?we.lastChild=or:je.previousSibling=or;do Hn.parentNode=we;while(Hn!==or&&(Hn=Hn.nextSibling));return Kt(we.ownerDocument||we,we,Ne),Ne.nodeType==De&&(Ne.firstChild=Ne.lastChild=null),Ne}Ct.prototype={implementation:null,nodeName:"#document",nodeType:Te,doctype:null,documentElement:null,_inc:1,insertBefore:function(we,Ne){if(we.nodeType===De){for(var je=we.firstChild;je;){var At=je.nextSibling;this.insertBefore(je,Ne),je=At}return we}return nn(this,we,Ne),we.ownerDocument=this,this.documentElement===null&&we.nodeType===Z&&(this.documentElement=we),we},removeChild:function(we){var Ne=Jt(this,we);return Ne===this.documentElement&&(this.documentElement=null),Ne},replaceChild:function(we,Ne){nn(this,we,Ne,pn),we.ownerDocument=this,Ne&&this.removeChild(Ne),_t(we)&&(this.documentElement=we)},importNode:function(we,Ne){return qt(this,we,Ne)},getElementById:function(we){var Ne=null;return He(this.documentElement,function(je){if(je.nodeType==Z&&je.getAttribute("id")==we)return Ne=je,!0}),Ne},createElement:function(we){var Ne=new Ft(f);Ne.ownerDocument=this,this.type==="html"&&(we=we.toLowerCase()),n(this.contentType)&&(Ne.namespaceURI=h.HTML),Ne.nodeName=we,Ne.tagName=we,Ne.localName=we,Ne.childNodes=new le;var je=Ne.attributes=new Be;return je._ownerElement=Ne,Ne},createDocumentFragment:function(){var we=new et(f);return we.ownerDocument=this,we.childNodes=new le,we},createTextNode:function(we){var Ne=new ir(f);return Ne.ownerDocument=this,Ne.childNodes=new le,Ne.appendData(we),Ne},createComment:function(we){var Ne=new mt(f);return Ne.ownerDocument=this,Ne.childNodes=new le,Ne.appendData(we),Ne},createCDATASection:function(we){var Ne=new ge(f);return Ne.ownerDocument=this,Ne.childNodes=new le,Ne.appendData(we),Ne},createProcessingInstruction:function(we,Ne){var je=new ut(f);return je.ownerDocument=this,je.childNodes=new le,je.nodeName=je.target=we,je.nodeValue=je.data=Ne,je},createAttribute:function(we){if(!b.QName_exact.test(we))throw new y(y.INVALID_CHARACTER_ERR,'invalid character in name "'+we+'"');return this.type==="html"&&(we=we.toLowerCase()),this._createAttribute(we)},_createAttribute:function(we){var Ne=new In(f);return Ne.ownerDocument=this,Ne.childNodes=new le,Ne.name=we,Ne.nodeName=we,Ne.localName=we,Ne.specified=!0,Ne},createEntityReference:function(we){if(!b.Name.test(we))throw new y(y.INVALID_CHARACTER_ERR,'not a valid xml name "'+we+'"');if(this.type==="html")throw new y("document is an html document",w.NotSupportedError);var Ne=new Qe(f);return Ne.ownerDocument=this,Ne.childNodes=new le,Ne.nodeName=we,Ne},createElementNS:function(we,Ne){var je=q(we,Ne),At=new Ft(f),sn=At.attributes=new Be;return At.childNodes=new le,At.ownerDocument=this,At.nodeName=Ne,At.tagName=Ne,At.namespaceURI=je[0],At.prefix=je[1],At.localName=je[2],sn._ownerElement=At,At},createAttributeNS:function(we,Ne){var je=q(we,Ne),At=new In(f);return At.ownerDocument=this,At.childNodes=new le,At.nodeName=Ne,At.name=Ne,At.specified=!0,At.namespaceURI=je[0],At.prefix=je[1],At.localName=je[2],At}},W(Ct,gt);function Ft(we){A(we),this._nsMap=Object.create(null)}Ft.prototype={nodeType:Z,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===h.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(we){return!!this.getAttributeNode(we)},getAttribute:function(we){var Ne=this.getAttributeNode(we);return Ne?Ne.value:null},getAttributeNode:function(we){return this._isInHTMLDocumentAndNamespace()&&(we=we.toLowerCase()),this.attributes.getNamedItem(we)},setAttribute:function(we,Ne){this._isInHTMLDocumentAndNamespace()&&(we=we.toLowerCase());var je=this.getAttributeNode(we);je?je.value=je.nodeValue=""+Ne:(je=this.ownerDocument._createAttribute(we),je.value=je.nodeValue=""+Ne,this.setAttributeNode(je))},removeAttribute:function(we){var Ne=this.getAttributeNode(we);Ne&&this.removeAttributeNode(Ne)},setAttributeNode:function(we){return this.attributes.setNamedItem(we)},setAttributeNodeNS:function(we){return this.attributes.setNamedItemNS(we)},removeAttributeNode:function(we){return this.attributes.removeNamedItem(we.nodeName)},removeAttributeNS:function(we,Ne){var je=this.getAttributeNodeNS(we,Ne);je&&this.removeAttributeNode(je)},hasAttributeNS:function(we,Ne){return this.getAttributeNodeNS(we,Ne)!=null},getAttributeNS:function(we,Ne){var je=this.getAttributeNodeNS(we,Ne);return je?je.value:null},setAttributeNS:function(we,Ne,je){var At=q(we,Ne),sn=At[2],Hn=this.getAttributeNodeNS(we,sn);Hn?Hn.value=Hn.nodeValue=""+je:(Hn=this.ownerDocument.createAttributeNS(we,Ne),Hn.value=Hn.nodeValue=""+je,this.setAttributeNode(Hn))},getAttributeNodeNS:function(we,Ne){return this.attributes.getNamedItemNS(we,Ne)},getElementsByClassName:function(we){var Ne=k(we);return new ye(this,function(je){var At=[];return Ne.length>0&&He(je,function(sn){if(sn!==je&&sn.nodeType===Z){var Hn=sn.getAttribute("class");if(Hn){var or=we===Hn;if(!or){var Er=k(Hn);or=Ne.every(B(Er))}or&&At.push(sn)}}}),At})},getElementsByTagName:function(we){var Ne=(this.nodeType===Te?this:this.ownerDocument).type==="html",je=we.toLowerCase();return new ye(this,function(At){var sn=[];return He(At,function(Hn){if(!(Hn===At||Hn.nodeType!==Z))if(we==="*")sn.push(Hn);else{var or=Hn.getQualifiedName(),Er=Ne&&Hn.namespaceURI===h.HTML?je:we;or===Er&&sn.push(Hn)}}),sn})},getElementsByTagNameNS:function(we,Ne){return new ye(this,function(je){var At=[];return He(je,function(sn){sn!==je&&sn.nodeType===Z&&(we==="*"||sn.namespaceURI===we)&&(Ne==="*"||sn.localName==Ne)&&At.push(sn)}),At})}},Ct.prototype.getElementsByClassName=Ft.prototype.getElementsByClassName,Ct.prototype.getElementsByTagName=Ft.prototype.getElementsByTagName,Ct.prototype.getElementsByTagNameNS=Ft.prototype.getElementsByTagNameNS,W(Ft,gt);function In(we){A(we),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}In.prototype.nodeType=j,W(In,gt);function Pn(we){A(we)}Pn.prototype={data:"",substringData:function(we,Ne){return this.data.substring(we,we+Ne)},appendData:function(we){we=this.data+we,this.nodeValue=this.data=we,this.length=we.length},insertData:function(we,Ne){this.replaceData(we,0,Ne)},deleteData:function(we,Ne){this.replaceData(we,Ne,"")},replaceData:function(we,Ne,je){var At=this.data.substring(0,we),sn=this.data.substring(we+Ne);je=At+je+sn,this.nodeValue=this.data=je,this.length=je.length}},W(Pn,gt);function ir(we){A(we)}ir.prototype={nodeName:"#text",nodeType:K,splitText:function(we){var Ne=this.data,je=Ne.substring(we);Ne=Ne.substring(0,we),this.data=this.nodeValue=Ne,this.length=Ne.length;var At=this.ownerDocument.createTextNode(je);return this.parentNode&&this.parentNode.insertBefore(At,this.nextSibling),At}},W(ir,Pn);function mt(we){A(we)}mt.prototype={nodeName:"#comment",nodeType:ue},W(mt,Pn);function ge(we){A(we)}ge.prototype={nodeName:"#cdata-section",nodeType:re},W(ge,ir);function ke(we){A(we)}ke.prototype.nodeType=pe,W(ke,gt);function We(we){A(we)}We.prototype.nodeType=me,W(We,gt);function Ce(we){A(we)}Ce.prototype.nodeType=se,W(Ce,gt);function Qe(we){A(we)}Qe.prototype.nodeType=ie,W(Qe,gt);function et(we){A(we)}et.prototype.nodeName="#document-fragment",et.prototype.nodeType=De,W(et,gt);function ut(we){A(we)}ut.prototype.nodeType=de,W(ut,Pn);function lt(){}lt.prototype.serializeToString=function(we,Ne){return xt.call(we,Ne)},gt.prototype.toString=xt;function xt(we){var Ne=[],je=this.nodeType===Te&&this.documentElement||this,At=je.prefix,sn=je.namespaceURI;if(sn&&At==null){var At=je.lookupPrefix(sn);if(At==null)var Hn=[{namespace:sn,prefix:null}]}return Tn(this,Ne,we,Hn),Ne.join("")}function Dt(we,Ne,je){var At=we.prefix||"",sn=we.namespaceURI;if(!sn||At==="xml"&&sn===h.XML||sn===h.XMLNS)return!1;for(var Hn=je.length;Hn--;){var or=je[Hn];if(or.prefix===At)return or.namespace!==sn}return!0}function zt(we,Ne,je){we.push(" ",Ne,'="',je.replace(/[<>&"\t\n\r]/g,$t),'"')}function Tn(we,Ne,je,At){At||(At=[]);var sn=we.nodeType===Te?we:we.ownerDocument,Hn=sn.type==="html";if(je)if(we=je(we),we){if(typeof we=="string"){Ne.push(we);return}}else return;switch(we.nodeType){case Z:var or=we.attributes,Er=or.length,gn=we.firstChild,lr=we.tagName,Ri=lr;if(!Hn&&!we.prefix&&we.namespaceURI){for(var ci,Vi=0;Vi<or.length;Vi++)if(or.item(Vi).name==="xmlns"){ci=or.item(Vi).value;break}if(!ci)for(var Vr=At.length-1;Vr>=0;Vr--){var Ca=At[Vr];if(Ca.prefix===""&&Ca.namespace===we.namespaceURI){ci=Ca.namespace;break}}if(ci!==we.namespaceURI)for(var Vr=At.length-1;Vr>=0;Vr--){var Ca=At[Vr];if(Ca.namespace===we.namespaceURI){Ca.prefix&&(Ri=Ca.prefix+":"+lr);break}}}Ne.push("<",Ri);for(var ra=0;ra<Er;ra++){var mi=or.item(ra);mi.prefix=="xmlns"?At.push({prefix:mi.localName,namespace:mi.value}):mi.nodeName=="xmlns"&&At.push({prefix:"",namespace:mi.value})}for(var ra=0;ra<Er;ra++){var mi=or.item(ra);if(Dt(mi,Hn,At)){var no=mi.prefix||"",nt=mi.namespaceURI;zt(Ne,no?"xmlns:"+no:"xmlns",nt),At.push({prefix:no,namespace:nt})}Tn(mi,Ne,je,At)}if(lr===Ri&&Dt(we,Hn,At)){var no=we.prefix||"",nt=we.namespaceURI;zt(Ne,no?"xmlns:"+no:"xmlns",nt),At.push({prefix:no,namespace:nt})}var an=!gn;if(an&&(Hn||we.namespaceURI===h.HTML)&&(an=l(lr)),an)Ne.push("/>");else{if(Ne.push(">"),Hn&&o(lr))for(;gn;)gn.data?Ne.push(gn.data):Tn(gn,Ne,je,At.slice()),gn=gn.nextSibling;else for(;gn;)Tn(gn,Ne,je,At.slice()),gn=gn.nextSibling;Ne.push("</",Ri,">")}return;case Te:case De:for(var gn=we.firstChild;gn;)Tn(gn,Ne,je,At.slice()),gn=gn.nextSibling;return;case j:return zt(Ne,we.name,we.value);case K:return Ne.push(we.data.replace(/[<&>]/g,$t));case re:return Ne.push(b.CDATA_START,we.data,b.CDATA_END);case ue:return Ne.push(b.COMMENT_START,we.data,b.COMMENT_END);case pe:var _n=we.publicId,fn=we.systemId;Ne.push(b.DOCTYPE_DECL_START," ",we.name),_n?(Ne.push(" ",b.PUBLIC," ",_n),fn&&fn!=="."&&Ne.push(" ",fn)):fn&&fn!=="."&&Ne.push(" ",b.SYSTEM," ",fn),we.internalSubset&&Ne.push(" [",we.internalSubset,"]"),Ne.push(">");return;case de:return Ne.push("<?",we.target," ",we.data,"?>");case ie:return Ne.push("&",we.nodeName,";");default:Ne.push("??",we.nodeName)}}function qt(we,Ne,je){var At;switch(Ne.nodeType){case Z:At=Ne.cloneNode(!1),At.ownerDocument=we;case De:break;case j:je=!0;break}if(At||(At=Ne.cloneNode(!1)),At.ownerDocument=we,At.parentNode=null,je)for(var sn=Ne.firstChild;sn;)At.appendChild(qt(we,sn,je)),sn=sn.nextSibling;return At}function Zn(we,Ne,je){var At=new Ne.constructor(f);for(var sn in Ne)if(r(Ne,sn)){var Hn=Ne[sn];typeof Hn!="object"&&Hn!=At[sn]&&(At[sn]=Hn)}switch(Ne.childNodes&&(At.childNodes=new le),At.ownerDocument=we,At.nodeType){case Z:var or=Ne.attributes,Er=At.attributes=new Be,lr=or.length;Er._ownerElement=At;for(var Ri=0;Ri<lr;Ri++)At.setAttributeNode(Zn(we,or.item(Ri),!0));break;case j:je=!0}if(je)for(var ci=Ne.firstChild;ci;)At.appendChild(Zn(we,ci,je)),ci=ci.nextSibling;return At}function Gn(we,Ne,je){we[Ne]=je}try{if(Object.defineProperty){let we=function(Ne){switch(Ne.nodeType){case Z:case De:var je=[];for(Ne=Ne.firstChild;Ne;)Ne.nodeType!==7&&Ne.nodeType!==8&&je.push(we(Ne)),Ne=Ne.nextSibling;return je.join("");default:return Ne.nodeValue}};Object.defineProperty(ye.prototype,"length",{get:function(){return Se(this),this.$$length}}),Object.defineProperty(gt.prototype,"textContent",{get:function(){return we(this)},set:function(Ne){switch(this.nodeType){case Z:case De:for(;this.firstChild;)this.removeChild(this.firstChild);(Ne||String(Ne))&&this.appendChild(this.ownerDocument.createTextNode(Ne));break;default:this.data=Ne,this.value=Ne,this.nodeValue=Ne}}}),Gn=function(Ne,je,At){Ne["$$"+je]=At}}}catch{}return _l._updateLiveList=Se,_l.Attr=In,_l.CDATASection=ge,_l.CharacterData=Pn,_l.Comment=mt,_l.Document=Ct,_l.DocumentFragment=et,_l.DocumentType=ke,_l.DOMImplementation=it,_l.Element=Ft,_l.Entity=Ce,_l.EntityReference=Qe,_l.LiveNodeList=ye,_l.NamedNodeMap=Be,_l.Node=gt,_l.NodeList=le,_l.Notation=We,_l.Text=ir,_l.ProcessingInstruction=ut,_l.XMLSerializer=lt,_l}var Kg={},IA={},VF;function jse(){return VF||(VF=1,function(t){var e=O_().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES}(IA)),IA}var k1={},GF;function Vse(){if(GF)return k1;GF=1;var t=O_(),e=X7(),n=gE(),r=t.isHTMLEscapableRawTextElement,i=t.isHTMLMimeType,o=t.isHTMLRawTextElement,l=t.hasOwn,a=t.NAMESPACE,h=n.ParseError,f=n.DOMException,v=0,y=1,w=2,b=3,A=4,M=5,P=6,C=7;function k(){}k.prototype={parse:function(de,ue,Te){var pe=this.domBuilder;pe.startDocument(),Z(ue,ue=Object.create(null)),z(de,ue,Te,pe,this.errorHandler),pe.endDocument()}};var B=/&#?\w+;?/g;function z(de,ue,Te,pe,De){var me=i(pe.mimeType);de.indexOf(e.UNICODE_REPLACEMENT_CHARACTER)>=0&&De.warning("Unicode replacement character detected, source encoding issues?");function Me(nn){if(nn>65535){nn-=65536;var Ft=55296+(nn>>10),In=56320+(nn&1023);return String.fromCharCode(Ft,In)}else return String.fromCharCode(nn)}function fe(nn){var Ft=nn[nn.length-1]===";"?nn:nn+";";if(!me&&Ft!==nn)return De.error("EntityRef: expecting ;"),nn;var In=e.Reference.exec(Ft);if(!In||In[0].length!==Ft.length)return De.error("entity not matching Reference production: "+nn),nn;var Pn=Ft.slice(1,-1);return l(Te,Pn)?Te[Pn]:Pn.charAt(0)==="#"?Me(parseInt(Pn.substring(1).replace("x","0x"))):(De.error("entity not found:"+nn),nn)}function ve(nn){if(nn>it){var Ft=de.substring(it,nn).replace(B,fe);Be&&Ve(it),pe.characters(Ft,0,nn-it),it=nn}}var le=0,ye=0,Se=/\r\n?|\n|$/g,Be=pe.locator;function Ve(nn,Ft){for(;nn>=ye&&(Ft=Se.exec(de));)le=ye,ye=Ft.index+Ft[0].length,Be.lineNumber++;Be.columnNumber=nn-le+1}for(var tt=[{currentNSMap:ue}],ht=[],it=0;;){try{var gt=de.indexOf("<",it);if(gt<0){if(!me&&ht.length>0)return De.fatalError("unclosed xml tag(s): "+ht.join(", "));if(!de.substring(it).match(/^\s*$/)){var $t=pe.doc,He=$t.createTextNode(de.substring(it));if($t.documentElement)return De.error("Extra content at the end of the document");$t.appendChild(He),pe.currentElement=He}return}if(gt>it){var Ct=de.substring(it,gt);!me&&ht.length===0&&(Ct=Ct.replace(new RegExp(e.S_OPT.source,"g"),""),Ct&&De.error("Unexpected content outside root element: '"+Ct+"'")),ve(gt)}switch(de.charAt(gt+1)){case"/":var vt=de.indexOf(">",gt+2),Xe=de.substring(gt+2,vt>0?vt:void 0);if(!Xe)return De.fatalError("end tag name missing");var tn=vt>0&&e.reg("^",e.QName_group,e.S_OPT,"$").exec(Xe);if(!tn)return De.fatalError('end tag name contains invalid characters: "'+Xe+'"');if(!pe.currentElement&&!pe.doc.documentElement)return;var Kt=ht[ht.length-1]||pe.currentElement.tagName||pe.doc.documentElement.tagName||"";if(Kt!==tn[1]){var Jt=tn[1].toLowerCase();if(!me||Kt.toLowerCase()!==Jt)return De.fatalError('Opening and ending tag mismatch: "'+Kt+'" != "'+Xe+'"')}var Ht=tt.pop();ht.pop();var $e=Ht.localNSMap;if(pe.endElement(Ht.uri,Ht.localName,Kt),$e)for(var Ee in $e)l($e,Ee)&&pe.endPrefixMapping(Ee);vt++;break;case"?":Be&&Ve(gt),vt=ie(de,gt,pe,De);break;case"!":Be&&Ve(gt),vt=re(de,gt,pe,De,me);break;default:Be&&Ve(gt);var _t=new se,jt=tt[tt.length-1].currentNSMap,vt=V(de,gt,_t,jt,fe,De,me),Pt=_t.length;if(_t.closed||(me&&t.isHTMLVoidElement(_t.tagName)?_t.closed=!0:ht.push(_t.tagName)),Be&&Pt){for(var vn=q(Be,{}),hn=0;hn<Pt;hn++){var pn=_t[hn];Ve(pn.offset),pn.locator=q(Be,{})}pe.locator=vn,W(_t,pe,jt)&&tt.push(_t),pe.locator=Be}else W(_t,pe,jt)&&tt.push(_t);me&&!_t.closed?vt=Y(de,vt,_t.tagName,fe,pe):vt++}}catch(nn){if(nn instanceof h)throw nn;if(nn instanceof f)throw new h(nn.name+": "+nn.message,pe.locator,nn);De.error("element parse error: "+nn),vt=-1}vt>it?it=vt:ve(Math.max(gt,it)+1)}}function q(de,ue){return ue.lineNumber=de.lineNumber,ue.columnNumber=de.columnNumber,ue}function V(de,ue,Te,pe,De,me,Me){function fe(Ve,tt,ht){if(l(Te.attributeNames,Ve))return me.fatalError("Attribute "+Ve+" redefined");if(!Me&&tt.indexOf("<")>=0)return me.fatalError("Unescaped '<' not allowed in attributes values");Te.addValue(Ve,tt.replace(/[\t\n\r]/g," ").replace(B,De),ht)}for(var ve,le,ye=++ue,Se=v;;){var Be=de.charAt(ye);switch(Be){case"=":if(Se===y)ve=de.slice(ue,ye),Se=b;else if(Se===w)Se=b;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(Se===b||Se===y)if(Se===y&&(me.warning('attribute value must after "="'),ve=de.slice(ue,ye)),ue=ye+1,ye=de.indexOf(Be,ue),ye>0)le=de.slice(ue,ye),fe(ve,le,ue-1),Se=M;else throw new Error("attribute value no end '"+Be+"' match");else if(Se==A)le=de.slice(ue,ye),fe(ve,le,ue),me.warning('attribute "'+ve+'" missed start quot('+Be+")!!"),ue=ye+1,Se=M;else throw new Error('attribute value must after "="');break;case"/":switch(Se){case v:Te.setTagName(de.slice(ue,ye));case M:case P:case C:Se=C,Te.closed=!0;case A:case y:break;case w:Te.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return me.error("unexpected end of input"),Se==v&&Te.setTagName(de.slice(ue,ye)),ye;case">":switch(Se){case v:Te.setTagName(de.slice(ue,ye));case M:case P:case C:break;case A:case y:le=de.slice(ue,ye),le.slice(-1)==="/"&&(Te.closed=!0,le=le.slice(0,-1));case w:Se===w&&(le=ve),Se==A?(me.warning('attribute "'+le+'" missed quot(")!'),fe(ve,le,ue)):(Me||me.warning('attribute "'+le+'" missed value!! "'+le+'" instead!!'),fe(le,le,ue));break;case b:if(!Me)return me.fatalError(`AttValue: ' or " expected`)}return ye;case"":Be=" ";default:if(Be<=" ")switch(Se){case v:Te.setTagName(de.slice(ue,ye)),Se=P;break;case y:ve=de.slice(ue,ye),Se=w;break;case A:var le=de.slice(ue,ye);me.warning('attribute "'+le+'" missed quot(")!!'),fe(ve,le,ue);case M:Se=P;break}else switch(Se){case w:Me||me.warning('attribute "'+ve+'" missed value!! "'+ve+'" instead2!!'),fe(ve,ve,ue),ue=ye,Se=y;break;case M:me.warning('attribute space is required"'+ve+'"!!');case P:Se=y,ue=ye;break;case b:Se=A,ue=ye;break;case C:throw new Error("elements closed character '/' and '>' must be connected to")}}ye++}}function W(de,ue,Te){for(var pe=de.tagName,De=null,Se=de.length;Se--;){var me=de[Se],Me=me.qName,fe=me.value,Be=Me.indexOf(":");if(Be>0)var ve=me.prefix=Me.slice(0,Be),le=Me.slice(Be+1),ye=ve==="xmlns"&&le;else le=Me,ve=null,ye=Me==="xmlns"&&"";me.localName=le,ye!==!1&&(De==null&&(De=Object.create(null),Z(Te,Te=Object.create(null))),Te[ye]=De[ye]=fe,me.uri=a.XMLNS,ue.startPrefixMapping(ye,fe))}for(var Se=de.length;Se--;)me=de[Se],me.prefix&&(me.prefix==="xml"&&(me.uri=a.XML),me.prefix!=="xmlns"&&(me.uri=Te[me.prefix]));var Be=pe.indexOf(":");Be>0?(ve=de.prefix=pe.slice(0,Be),le=de.localName=pe.slice(Be+1)):(ve=null,le=de.localName=pe);var Ve=de.uri=Te[ve||""];if(ue.startElement(Ve,le,pe,de),de.closed){if(ue.endElement(Ve,le,pe),De)for(ve in De)l(De,ve)&&ue.endPrefixMapping(ve)}else return de.currentNSMap=Te,de.localNSMap=De,!0}function Y(de,ue,Te,pe,De){var me=r(Te);if(me||o(Te)){var Me=de.indexOf("</"+Te+">",ue),fe=de.substring(ue+1,Me);return me&&(fe=fe.replace(B,pe)),De.characters(fe,0,fe.length),Me}return ue+1}function Z(de,ue){for(var Te in de)l(de,Te)&&(ue[Te]=de[Te])}function j(de,ue){var Te=ue;function pe(ye){return ye=ye||0,de.charAt(Te+ye)}function De(ye){ye=ye||1,Te+=ye}function me(){for(var ye=0;Te<de.length;){var Se=pe();if(Se!==" "&&Se!==`
`&&Se!=="	"&&Se!=="\r")return ye;ye++,De()}return-1}function Me(){return de.substring(Te)}function fe(ye){return de.substring(Te,Te+ye.length)===ye}function ve(ye){return de.substring(Te,Te+ye.length).toUpperCase()===ye.toUpperCase()}function le(ye){var Se=e.reg("^",ye),Be=Se.exec(Me());return Be?(De(Be[0].length),Be[0]):null}return{char:pe,getIndex:function(){return Te},getMatch:le,getSource:function(){return de},skip:De,skipBlanks:me,substringFromIndex:Me,substringStartsWith:fe,substringStartsWithCaseInsensitive:ve}}function K(de,ue){function Te(fe,ve){var le=e.PI.exec(fe.substringFromIndex());return le?le[1].toLowerCase()==="xml"?ve.fatalError("xml declaration is only allowed at the start of the document, but found at position "+fe.getIndex()):(fe.skip(le[0].length),le[0]):ve.fatalError("processing instruction is not well-formed at position "+fe.getIndex())}var pe=de.getSource();if(de.char()==="["){de.skip(1);for(var De=de.getIndex();de.getIndex()<pe.length;){if(de.skipBlanks(),de.char()==="]"){var me=pe.substring(De,de.getIndex());return de.skip(1),me}var Me=null;if(de.char()==="<"&&de.char(1)==="!")switch(de.char(2)){case"E":de.char(3)==="L"?Me=de.getMatch(e.elementdecl):de.char(3)==="N"&&(Me=de.getMatch(e.EntityDecl));break;case"A":Me=de.getMatch(e.AttlistDecl);break;case"N":Me=de.getMatch(e.NotationDecl);break;case"-":Me=de.getMatch(e.Comment);break}else if(de.char()==="<"&&de.char(1)==="?")Me=Te(de,ue);else if(de.char()==="%")Me=de.getMatch(e.PEReference);else return ue.fatalError("Error detected in Markup declaration");if(!Me)return ue.fatalError("Error in internal subset at position "+de.getIndex())}return ue.fatalError("doctype internal subset is not well-formed, missing ]")}}function re(de,ue,Te,pe,De){var me=j(de,ue);switch(De?me.char(2).toUpperCase():me.char(2)){case"-":var Me=me.getMatch(e.Comment);return Me?(Te.comment(Me,e.COMMENT_START.length,Me.length-e.COMMENT_START.length-e.COMMENT_END.length),me.getIndex()):pe.fatalError("comment is not well-formed at position "+me.getIndex());case"[":var fe=me.getMatch(e.CDSect);return fe?!De&&!Te.currentElement?pe.fatalError("CDATA outside of element"):(Te.startCDATA(),Te.characters(fe,e.CDATA_START.length,fe.length-e.CDATA_START.length-e.CDATA_END.length),Te.endCDATA(),me.getIndex()):pe.fatalError("Invalid CDATA starting at position "+ue);case"D":{if(Te.doc&&Te.doc.documentElement)return pe.fatalError("Doctype not allowed inside or after documentElement at position "+me.getIndex());if(De?!me.substringStartsWithCaseInsensitive(e.DOCTYPE_DECL_START):!me.substringStartsWith(e.DOCTYPE_DECL_START))return pe.fatalError("Expected "+e.DOCTYPE_DECL_START+" at position "+me.getIndex());if(me.skip(e.DOCTYPE_DECL_START.length),me.skipBlanks()<1)return pe.fatalError("Expected whitespace after "+e.DOCTYPE_DECL_START+" at position "+me.getIndex());var ve={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(ve.name=me.getMatch(e.Name),!ve.name)return pe.fatalError("doctype name missing or contains unexpected characters at position "+me.getIndex());if(De&&ve.name.toLowerCase()!=="html"&&pe.warning("Unexpected DOCTYPE in HTML document at position "+me.getIndex()),me.skipBlanks(),me.substringStartsWith(e.PUBLIC)||me.substringStartsWith(e.SYSTEM)){var le=e.ExternalID_match.exec(me.substringFromIndex());if(!le)return pe.fatalError("doctype external id is not well-formed at position "+me.getIndex());le.groups.SystemLiteralOnly!==void 0?ve.systemId=le.groups.SystemLiteralOnly:(ve.systemId=le.groups.SystemLiteral,ve.publicId=le.groups.PubidLiteral),me.skip(le[0].length)}else if(De&&me.substringStartsWithCaseInsensitive(e.SYSTEM)){if(me.skip(e.SYSTEM.length),me.skipBlanks()<1)return pe.fatalError("Expected whitespace after "+e.SYSTEM+" at position "+me.getIndex());if(ve.systemId=me.getMatch(e.ABOUT_LEGACY_COMPAT_SystemLiteral),!ve.systemId)return pe.fatalError("Expected "+e.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+e.SYSTEM+" at position "+me.getIndex())}return De&&ve.systemId&&!e.ABOUT_LEGACY_COMPAT_SystemLiteral.test(ve.systemId)&&pe.warning("Unexpected doctype.systemId in HTML document at position "+me.getIndex()),De||(me.skipBlanks(),ve.internalSubset=K(me,pe)),me.skipBlanks(),me.char()!==">"?pe.fatalError("doctype not terminated with > at position "+me.getIndex()):(me.skip(1),Te.startDTD(ve.name,ve.publicId,ve.systemId,ve.internalSubset),Te.endDTD(),me.getIndex())}default:return pe.fatalError('Not well-formed XML starting with "<!" at position '+ue)}}function ie(de,ue,Te,pe){var De=de.substring(ue).match(e.PI);if(!De)return pe.fatalError("Invalid processing instruction starting at position "+ue);if(De[1].toLowerCase()==="xml"){if(ue>0)return pe.fatalError("processing instruction at position "+ue+" is an xml declaration which is only at the start of the document");if(!e.XMLDecl.test(de.substring(ue)))return pe.fatalError("xml declaration is not well-formed")}return Te.processingInstruction(De[1],De[2]),ue+De[0].length}function se(){this.attributeNames=Object.create(null)}return se.prototype={setTagName:function(de){if(!e.QName_exact.test(de))throw new Error("invalid tagName:"+de);this.tagName=de},addValue:function(de,ue,Te){if(!e.QName_exact.test(de))throw new Error("invalid attribute:"+de);this.attributeNames[de]=this.length,this[this.length++]={qName:de,value:ue,offset:Te}},length:0,getLocalName:function(de){return this[de].localName},getLocator:function(de){return this[de].locator},getQName:function(de){return this[de].qName},getURI:function(de){return this[de].uri},getValue:function(de){return this[de].value}},k1.XMLReader=k,k1.parseUtils=j,k1.parseDoctypeCommentOrCData=re,k1}var qF;function Gse(){if(qF)return Kg;qF=1;var t=O_(),e=Z7(),n=gE(),r=jse(),i=Vse(),o=e.DOMImplementation,l=t.hasDefaultHTMLNamespace,a=t.isHTMLMimeType,h=t.isValidMimeType,f=t.MIME_TYPE,v=t.NAMESPACE,y=n.ParseError,w=i.XMLReader;function b(V){return V.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function A(V){if(V=V||{},V.locator===void 0&&(V.locator=!0),this.assign=V.assign||t.assign,this.domHandler=V.domHandler||M,this.onError=V.onError||V.errorHandler,V.errorHandler&&typeof V.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");V.errorHandler&&V.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=V.normalizeLineEndings||b,this.locator=!!V.locator,this.xmlns=this.assign(Object.create(null),V.xmlns)}A.prototype.parseFromString=function(V,W){if(!h(W))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+W+'" is not valid.');var Y=this.assign(Object.create(null),this.xmlns),Z=r.XML_ENTITIES,j=Y[""]||null;l(W)?(Z=r.HTML_ENTITIES,j=v.HTML):W===f.XML_SVG_IMAGE&&(j=v.SVG),Y[""]=j,Y.xml=Y.xml||v.XML;var K=new this.domHandler({mimeType:W,defaultNamespace:j,onError:this.onError}),re=this.locator?{}:void 0;this.locator&&K.setDocumentLocator(re);var ie=new w;ie.errorHandler=K,ie.domBuilder=K;var se=!t.isHTMLMimeType(W);return se&&typeof V!="string"&&ie.errorHandler.fatalError("source is not a string"),ie.parse(this.normalizeLineEndings(String(V)),Y,Z),K.doc.documentElement||ie.errorHandler.fatalError("missing root element"),K.doc};function M(V){var W=V||{};this.mimeType=W.mimeType||f.XML_APPLICATION,this.defaultNamespace=W.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=W.onError}function P(V,W){W.lineNumber=V.lineNumber,W.columnNumber=V.columnNumber}M.prototype={startDocument:function(){var V=new o;this.doc=a(this.mimeType)?V.createHTMLDocument(!1):V.createDocument(this.defaultNamespace,"")},startElement:function(V,W,Y,Z){var j=this.doc,K=j.createElementNS(V,Y||W),re=Z.length;B(this,K),this.currentElement=K,this.locator&&P(this.locator,K);for(var ie=0;ie<re;ie++){var V=Z.getURI(ie),se=Z.getValue(ie),Y=Z.getQName(ie),de=j.createAttributeNS(V,Y);this.locator&&P(Z.getLocator(ie),de),de.value=de.nodeValue=se,K.setAttributeNode(de)}},endElement:function(V,W,Y){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(V,W){},endPrefixMapping:function(V){},processingInstruction:function(V,W){var Y=this.doc.createProcessingInstruction(V,W);this.locator&&P(this.locator,Y),B(this,Y)},ignorableWhitespace:function(V,W,Y){},characters:function(V,W,Y){if(V=k.apply(this,arguments),V){if(this.cdata)var Z=this.doc.createCDATASection(V);else var Z=this.doc.createTextNode(V);this.currentElement?this.currentElement.appendChild(Z):/^\s*$/.test(V)&&this.doc.appendChild(Z),this.locator&&P(this.locator,Z)}},skippedEntity:function(V){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(V){V&&(V.lineNumber=0),this.locator=V},comment:function(V,W,Y){V=k.apply(this,arguments);var Z=this.doc.createComment(V);this.locator&&P(this.locator,Z),B(this,Z)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(V,W,Y,Z){var j=this.doc.implementation;if(j&&j.createDocumentType){var K=j.createDocumentType(V,W,Y,Z);this.locator&&P(this.locator,K),B(this,K),this.doc.doctype=K}},reportError:function(V,W){if(typeof this.onError=="function")try{this.onError(V,W,this)}catch(Y){throw new y("Reporting "+V+' "'+W+'" caused '+Y,this.locator)}else console.error("[xmldom "+V+"]	"+W,C(this.locator))},warning:function(V){this.reportError("warning",V)},error:function(V){this.reportError("error",V)},fatalError:function(V){throw this.reportError("fatalError",V),new y(V,this.locator)}};function C(V){if(V)return`
@#[line:`+V.lineNumber+",col:"+V.columnNumber+"]"}function k(V,W,Y){return typeof V=="string"?V.substr(W,Y):V.length>=W+Y||W?new java.lang.String(V,W,Y)+"":V}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(V){M.prototype[V]=function(){return null}});function B(V,W){V.currentElement?V.currentElement.appendChild(W):V.doc.appendChild(W)}function z(V){if(V==="error")throw"onErrorStopParsing"}function q(){throw"onWarningStopParsing"}return Kg.__DOMHandler=M,Kg.DOMParser=A,Kg.normalizeLineEndings=b,Kg.onErrorStopParsing=z,Kg.onWarningStopParsing=q,Kg}var HF;function qse(){if(HF)return qa;HF=1;var t=O_();qa.assign=t.assign,qa.hasDefaultHTMLNamespace=t.hasDefaultHTMLNamespace,qa.isHTMLMimeType=t.isHTMLMimeType,qa.isValidMimeType=t.isValidMimeType,qa.MIME_TYPE=t.MIME_TYPE,qa.NAMESPACE=t.NAMESPACE;var e=gE();qa.DOMException=e.DOMException,qa.DOMExceptionName=e.DOMExceptionName,qa.ExceptionCode=e.ExceptionCode,qa.ParseError=e.ParseError;var n=Z7();qa.Attr=n.Attr,qa.CDATASection=n.CDATASection,qa.CharacterData=n.CharacterData,qa.Comment=n.Comment,qa.Document=n.Document,qa.DocumentFragment=n.DocumentFragment,qa.DocumentType=n.DocumentType,qa.DOMImplementation=n.DOMImplementation,qa.Element=n.Element,qa.Entity=n.Entity,qa.EntityReference=n.EntityReference,qa.LiveNodeList=n.LiveNodeList,qa.NamedNodeMap=n.NamedNodeMap,qa.Node=n.Node,qa.NodeList=n.NodeList,qa.Notation=n.Notation,qa.ProcessingInstruction=n.ProcessingInstruction,qa.Text=n.Text,qa.XMLSerializer=n.XMLSerializer;var r=Gse();return qa.DOMParser=r.DOMParser,qa.normalizeLineEndings=r.normalizeLineEndings,qa.onErrorStopParsing=r.onErrorStopParsing,qa.onWarningStopParsing=r.onWarningStopParsing,qa}var Hse=qse();/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Oa=t=>t!==void 0,Y7=(t,e,n)=>e in t?t[e]:t[e]=n;const sS={ELEMENT:1,TEXT:3,CDATA_SECTION:4};function $D(t,e){return K7(t,e,[]).join("")}function K7(t,e,n){if(t.nodeType===sS.CDATA_SECTION||t.nodeType===sS.TEXT)n.push(t.nodeValue);else{var r;for(r=t.firstChild;r;r=r.nextSibling)K7(r,e,n)}return n}function $se(t,e,n,r){for(var i=Wse(e);i;i=Xse(i)){var o=i.namespaceURI||null,l=t[o];if(Oa(l)){var a=l[i.localName];Oa(a)&&a.call(r,i,n)}}}function Wse(t){let e=t.firstElementChild||t.firstChild;for(;e&&e.nodeType!==sS.ELEMENT;)e=e.nextSibling;return e}function Xse(t){let e=t.nextElementSibling||t.nextSibling;for(;e&&e.nodeType!==sS.ELEMENT;)e=e.nextSibling;return e}function lc(t,e,n){return Zse(t,e,n)}function Zse(t,e,n){var r=Oa(n)?n:{},i,o;for(i=0,o=t.length;i<o;++i)r[t[i]]=e;return r}function J7(t,e){return function(n,r){var i=t.call(Oa(e)?e:this,n,r);if(Oa(i)){var o=r[r.length-1];o.push(i)}}}function uc(t,e,n,r,i){return r.push(t),$se(e,n,r,i),r.pop()}function li(t,e,n){return function(r,i){let o=t.call(Oa(n)?n:this,r,i);if(Oa(o)){var l=i[i.length-1],a=Oa(e)?e:r.localName;l[a]=o}}}function dh(t,e,n){return function(r,i){var o=t.call(Oa(n)?n:this,r,i);if(Oa(o)){var l=i[i.length-1],a=Oa(e)?e:r.localName,h=Y7(l,a,[]);h.push(o)}}}const Yse=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function Kse(t){return t.replace(Yse,"")}function T0(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return Oa(e[1])||!1}function Gy(t){return Hp($D(t,!1))}function Hp(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function OA(t){return lS($D(t,!1))}function lS(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function so(t){return Kse($D(t,!1))}const Jse="http://www.w3.org/1999/xlink";function WD(t){return t.getAttributeNS(Jse,"href")}function Qse(t,e){return uc({},Tle,t,e)}function Q7(t){return[Hp(t.getAttribute("minx")),Hp(t.getAttribute("miny")),Hp(t.getAttribute("maxx")),Hp(t.getAttribute("maxy"))]}function ele(t,e){const n=Q7(t),r=[Hp(t.getAttribute("resx")),Hp(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS")||t.getAttribute("SRS"),extent:n,res:r}}function tle(t,e){const n=Q7(t);if(!(!Oa(n[0])||!Oa(n[1])||!Oa(n[2])||!Oa(n[3])))return n}function nle(t,e){const n=parseFloat(t.getAttribute("min")),r=parseFloat(t.getAttribute("max"));return{min:n,max:r}}function rle(t,e){const n=uc({},Mle,t,e);if(!Oa(n))return;const r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,l=n.northBoundLatitude;if(!(!Oa(r)||!Oa(i)||!Oa(o)||!Oa(l)))return[r,i,o,l]}function ile(t,e){return uc({},_le,t,e)}function ale(t,e){return uc({},ble,t,e)}function ole(t,e){return uc({},xle,t,e)}function sle(t,e){return uc({},wle,t,e)}function lle(t,e){return uc({},Sle,t,e)}function ule(t,e){return uc([],Ele,t,e)}function cle(t,e){const n=T0(t.getAttribute("queryable"));return uc({queryable:Oa(n)?n:!1},n9,t,e)}function hle(t,e){var n=e[e.length-1];const r=uc({},n9,t,e);if(!Oa(r))return;let i=T0(t.getAttribute("queryable"));Oa(i)||(i=n.queryable),r.queryable=Oa(i)?i:!1;let o=lS(t.getAttribute("cascaded"));Oa(o)||(o=n.cascaded),r.cascaded=o;let l=T0(t.getAttribute("opaque"));Oa(l)||(l=n.opaque),r.opaque=Oa(l)?l:!1;let a=T0(t.getAttribute("noSubsets"));Oa(a)||(a=n.noSubsets),r.noSubsets=Oa(a)?a:!1;let h=Hp(t.getAttribute("fixedWidth"));Oa(h)||(h=n.fixedWidth),r.fixedWidth=h;let f=Hp(t.getAttribute("fixedHeight"));Oa(f)||(f=n.fixedHeight),r.fixedHeight=f;const v=["Style","CRS","AuthorityURL"];for(let w=0,b=v.length;w<b;w++){const A=v[w],M=n[A];if(Oa(M)){let P=Y7(r,A,[]);P=P.concat(M),r[A]=P}}const y=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let w=0,b=y.length;w<b;w++){const A=y[w],M=r[A];if(!Oa(M)){const P=n[A];r[A]=P}}return r}function fle(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:T0(t.getAttribute("multipleValues")),nearestValue:T0(t.getAttribute("nearestValue")),current:T0(t.getAttribute("current")),values:so(t)}}function tm(t,e){return uc({},Lle,t,e)}function dle(t,e){return uc({},Ale,t,e)}function ple(t,e){return uc({},Ple,t,e)}function mle(t,e){return uc({},Rle,t,e)}function NA(t,e){return uc({},Cle,t,e)}function e9(t,e){var n=tm(t,e);if(Oa(n)){const r=[lS(t.getAttribute("width")),lS(t.getAttribute("height"))];return n.size=r,n}}function gle(t,e){var n=tm(t,e);if(Oa(n))return n.name=t.getAttribute("name"),n}function vle(t,e){var n=tm(t,e);if(Oa(n))return n.type=t.getAttribute("type"),n}function yle(t,e){return uc({},Dle,t,e)}function t9(t,e){return uc([],Ile,t,e)}const cc=[null,"http://www.opengis.net/wms"];lc(cc,{Service:li(ale),Capability:li(ile)});const _le=lc(cc,{Request:li(dle),Exception:li(ule),Layer:li(cle)}),ble=lc(cc,{Name:li(so),Title:li(so),Abstract:li(so),KeywordList:li(t9),OnlineResource:li(WD),ContactInformation:li(ole),Fees:li(so),AccessConstraints:li(so),LayerLimit:li(OA),MaxWidth:li(OA),MaxHeight:li(OA)}),xle=lc(cc,{ContactPersonPrimary:li(sle),ContactPosition:li(so),ContactAddress:li(lle),ContactVoiceTelephone:li(so),ContactFacsimileTelephone:li(so),ContactElectronicMailAddress:li(so)}),wle=lc(cc,{ContactPerson:li(so),ContactOrganization:li(so)}),Sle=lc(cc,{AddressType:li(so),Address:li(so),City:li(so),StateOrProvince:li(so),PostCode:li(so),Country:li(so)}),Ele=lc(cc,{Format:J7(so)}),n9=lc(cc,{Name:li(so),Title:li(so),Abstract:li(so),KeywordList:li(t9),CRS:dh(so),SRS:dh(so),EX_GeographicBoundingBox:li(rle),LatLonBoundingBox:li(tle),BoundingBox:dh(ele),Dimension:dh(fle),Attribution:li(Qse),AuthorityURL:dh(gle),Identifier:dh(so),MetadataURL:dh(vle),DataURL:dh(tm),FeatureListURL:dh(tm),Style:dh(yle),MinScaleDenominator:li(Gy),MaxScaleDenominator:li(Gy),ScaleHint:li(nle),Layer:dh(hle)}),Tle=lc(cc,{Title:li(so),OnlineResource:li(WD),LogoURL:li(e9)}),Mle=lc(cc,{westBoundLongitude:li(Gy),eastBoundLongitude:li(Gy),southBoundLatitude:li(Gy),northBoundLatitude:li(Gy)}),Ale=lc(cc,{GetCapabilities:li(NA),GetMap:li(NA),GetFeatureInfo:li(NA)}),Cle=lc(cc,{Format:dh(so),DCPType:dh(ple)}),Ple=lc(cc,{HTTP:li(mle)}),Rle=lc(cc,{Get:li(tm),Post:li(tm)}),Dle=lc(cc,{Name:li(so),Title:li(so),Abstract:li(so),LegendURL:dh(e9),StyleSheetURL:li(tm),StyleURL:li(tm)}),Lle=lc(cc,{Format:li(so),OnlineResource:li(WD)}),Ile=lc(cc,{Keyword:J7(so)});function r9(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+"]"}).join(",")+"}")}function Ole(t,e){var n=r9(t);return function(r,i){return e(n(r),i,t)}}function Nle(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function XD(t){var e=new RegExp('["'+t+`
]`),n=t.charCodeAt(0);function r(f,v){var y,w,b=i(f,function(A,M){if(y)return y(A,M-1);w=A,y=v?Ole(A,v):r9(A)});return b.columns=w,b}function i(f,v){var y={},w={},b=[],A=f.length,M=0,P=0,C,k;function B(){if(M>=A)return w;if(k)return k=!1,y;var q=M,V;if(f.charCodeAt(q)===34){for(var W=q;W++<A;)if(f.charCodeAt(W)===34){if(f.charCodeAt(W+1)!==34)break;++W}return M=W+2,V=f.charCodeAt(W+1),V===13?(k=!0,f.charCodeAt(W+2)===10&&++M):V===10&&(k=!0),f.slice(q+1,W).replace(/""/g,'"')}for(;M<A;){var Y=1;if(V=f.charCodeAt(M++),V===10)k=!0;else if(V===13)k=!0,f.charCodeAt(M)===10&&(++M,++Y);else if(V!==n)continue;return f.slice(q,M-Y)}return f.slice(q)}for(;(C=B())!==w;){for(var z=[];C!==y&&C!==w;)z.push(C),C=B();v&&(z=v(z,P++))==null||b.push(z)}return b}function o(f,v){return v==null&&(v=Nle(f)),[v.map(h).join(t)].concat(f.map(function(y){return v.map(function(w){return h(y[w])}).join(t)})).join(`
`)}function l(f){return f.map(a).join(`
`)}function a(f){return f.map(h).join(t)}function h(f){return f==null?"":e.test(f+="")?'"'+f.replace(/\"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatRows:l}}var vE=XD(","),kle=vE.parse,Fle=vE.parseRows,Ble=vE.format,zle=vE.formatRows,yE=XD("	"),Ule=yE.parse,jle=yE.parseRows,Vle=yE.format,Gle=yE.formatRows;const qle=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:Ble,csvFormatRows:zle,csvParse:kle,csvParseRows:Fle,dsvFormat:XD,tsvFormat:Vle,tsvFormatRows:Gle,tsvParse:Ule,tsvParseRows:jle},Symbol.toStringTag,{value:"Module"})),Hle=Rj(qle);var Jg={exports:{}},$F;function $le(){if($F)return Jg.exports;$F=1,Jg.exports=t,Jg.exports.pair=o,Jg.exports.format=n,Jg.exports.formatPair=e,Jg.exports.coordToDMS=r;function t(a,h){var f=i(a,h);return f===null?null:f.val}function e(a){return n(a.lat,"lat")+" "+n(a.lon,"lon")}function n(a,h){var f=r(a,h);return f.whole+"° "+(f.minutes?f.minutes+"' ":"")+(f.seconds?f.seconds+'" ':"")+f.dir}function r(a,h){var f={lat:["N","S"],lon:["E","W"]}[h]||"",v=f[a>=0?0:1],y=Math.abs(a),w=Math.floor(y),b=y-w,A=b*60,M=Math.floor(A),P=Math.floor((A-M)*60);return{whole:w,minutes:M,seconds:P,dir:v}}function i(a,h){if(h||(h="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var f=/^[\s\,]*([NSEW])?\s*([\-|\—|\―]?[0-9.]+)[°º˚]?\s*(?:([0-9.]+)['’′‘]\s*)?(?:([0-9.]+)(?:''|"|”|″)\s*)?([NSEW])?/,v=a.match(f);if(!v)return null;var y=v[0],w;if(v[1]&&v[5]?(w=v[1],y=y.slice(0,-1)):w=v[1]||v[5],w&&h.indexOf(w)===-1)return null;var b=v[2]?parseFloat(v[2]):0,A=v[3]?parseFloat(v[3])/60:0,M=v[4]?parseFloat(v[4])/3600:0,P=b<0?-1:1;return(w==="S"||w==="W")&&(P*=-1),{val:(Math.abs(b)+A+M)*P,dim:w,matched:y,remain:a.slice(y.length)}}function o(a,h){a=a.trim();var f=i(a,h);if(!f)return null;a=f.remain.trim();var v=i(a,h);return!v||v.remain?null:f.dim?l(f.val,v.val,f.dim):[f.val,v.val]}function l(a,h,f){if(f==="N"||f==="S")return[a,h];if(f==="W"||f==="E")return[h,a]}return Jg.exports}var kA,WF;function Wle(){if(WF)return kA;WF=1;var t=Hle,e=$le(),n=/(Lat)(itude)?/gi,r=/(L)(on|ng)(gitude)?/i;function i(P,C){var k,B,z;for(var q in P)B=q.match(C),B&&(!k||B[0].length/q.length>z)&&(z=B[0].length/q.length,k=q);return k}function o(P){return i(P,n)}function l(P){return i(P,r)}function a(P){return!!P.match(n)}function h(P){return!!P.match(r)}function f(P){return typeof P=="object"?Object.keys(P).length:0}function v(P){var C=[",",";","	","|"],k=[];return C.forEach(function(B){var z=t.dsvFormat(B).parse(P);if(z.length>=1){for(var q=f(z[0]),V=0;V<z.length;V++)if(f(z[V])!==q)return;k.push({delimiter:B,arity:Object.keys(z[0]).length})}}),k.length?k.sort(function(B,z){return z.arity-B.arity})[0].delimiter:null}function y(P){return delete P.columns,P}function w(P){var C=v(P);return C?y(t.dsvFormat(C).parse(P)):null}function b(P,C,k){k||(k=C,C={}),C.delimiter=C.delimiter||",";var B=C.latfield||"",z=C.lonfield||"",q=C.crs||"",V=[],W={type:"FeatureCollection",features:V};if(q!==""&&(W.crs={type:"name",properties:{name:q}}),C.delimiter==="auto"&&typeof P=="string"&&(C.delimiter=v(P),!C.delimiter)){k({type:"Error",message:"Could not autodetect delimiter"});return}var Y=C.numericFields?C.numericFields.split(","):null,Z=typeof P=="string"?t.dsvFormat(C.delimiter).parse(P,function(pe){if(Y)for(var De in pe)Y.includes(De)&&(pe[De]=+pe[De]);return pe}):P;if(!Z.length){k(null,W);return}var j=[],K;B||(B=o(Z[0])),z||(z=l(Z[0]));var re=!B||!z;if(re){for(K=0;K<Z.length;K++)V.push({type:"Feature",properties:Z[K],geometry:null});k(j.length?j:null,W);return}for(K=0;K<Z.length;K++)if(Z[K][z]!==void 0&&Z[K][B]!==void 0){var ie=Z[K][z],se=Z[K][B],de,ue,Te;Te=e(ie,"EW"),Te&&(ie=Te),Te=e(se,"NS"),Te&&(se=Te),de=parseFloat(ie),ue=parseFloat(se),isNaN(de)||isNaN(ue)?j.push({message:"A row contained an invalid value for latitude or longitude",row:Z[K],index:K}):(C.includeLatLon||(delete Z[K][z],delete Z[K][B]),V.push({type:"Feature",properties:Z[K],geometry:{type:"Point",coordinates:[parseFloat(de),parseFloat(ue)]}}))}k(j.length?j:null,W)}function A(P){for(var C=P.features,k={type:"Feature",geometry:{type:"LineString",coordinates:[]}},B=0;B<C.length;B++)k.geometry.coordinates.push(C[B].geometry.coordinates);return k.properties=C.reduce(function(z,q){for(var V in q.properties)z[V]||(z[V]=[]),z[V].push(q.properties[V]);return z},{}),{type:"FeatureCollection",features:[k]}}function M(P){for(var C=P.features,k={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},B=0;B<C.length;B++)k.geometry.coordinates[0].push(C[B].geometry.coordinates);return k.properties=C.reduce(function(z,q){for(var V in q.properties)z[V]||(z[V]=[]),z[V].push(q.properties[V]);return z},{}),{type:"FeatureCollection",features:[k]}}return kA={isLon:h,isLat:a,guessLatHeader:o,guessLonHeader:l,csv:t.csvParse,tsv:t.tsvParse,dsv:t,auto:w,csv2geojson:b,toLine:A,toPolygon:M},kA}Wle();var Zf={},FA={},XF;function N3(){return XF||(XF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WayCollection=t.RefElements=t.LateBinder=t.strToFloat=t.ptInsidePolygon=t.ringDirection=t.isRing=t.coordsToKey=t.last=t.first=void 0,t.purgeProps=e,t.mergeProps=n,t.addPropToFeature=r,t.addPropToFeatures=i,t.addToMap=h,t.removeFromMap=f,t.getFirstFromMap=v;function e(k,B){if(k){const z=Object.assign({},k);if(B)for(const q of B)delete z[q];return z}return{}}function n(k,B){return k=k||{},B=B||{},Object.assign(k,B)}function r(k,B,z){k.properties&&B&&z&&(k.properties[B]=z)}function i(k,B,z){for(const q of k)r(q,B,z)}const o=k=>k[0];t.first=o;const l=k=>k[k.length-1];t.last=l;const a=k=>k.join(",");t.coordsToKey=a;function h(k,B,z){const q=k[B];q?q.push(z):k[B]=[z]}function f(k,B,z){const q=k[B];let V=-1;q&&(V=q.indexOf(z)),V>=0&&q.splice(V,1)}function v(k,B){const z=k[B];return z&&z.length>0?z[0]:null}const y=k=>k.length>3&&(0,t.coordsToKey)((0,t.first)(k))===(0,t.coordsToKey)((0,t.last)(k));t.isRing=y;const w=(k,B,z)=>{B=B||0,z=z||1;const q=k.reduce((de,ue,Te)=>k[de][B||0]>ue[B||0]?de:Te,0),V=q<=0?k.length-2:q-1,W=q>=k.length-1?1:q+1,Y=k[V][B],Z=k[q][B],j=k[W][B],K=k[V][z],re=k[q][z],ie=k[W][z];return(Z-Y)*(ie-K)-(j-Y)*(re-K)<0?"clockwise":"counterclockwise"};t.ringDirection=w;const b=(k,B,z,q)=>{z=z||0,q=q||1;let V=!1;for(let W=0,Y=B.length-1;W<B.length;Y=W++)(B[W][z]<=k[z]&&k[z]<B[Y][z]||B[Y][z]<=k[z]&&k[z]<B[W][z])&&k[q]<(B[Y][q]-B[W][q])*(k[z]-B[W][z])/(B[Y][z]-B[W][z])+B[W][q]&&(V=!V);return V};t.ptInsidePolygon=b;const A=k=>k instanceof Array?k.map(t.strToFloat):parseFloat(k);t.strToFloat=A;class M{constructor(B,z,q,V){this.container=B,this.valueFunc=z,this.ctx=q,this.args=V}bind(){const B=this.valueFunc.apply(this.ctx,this.args);if(this.container instanceof Array){const z=this.container.indexOf(this);if(z>=0){const q=[z,1];B&&q.push(B),Array.prototype.splice.apply(this.container,q)}}else if(typeof this.container=="object"&&!Array.isArray(this.container)){const z=this.container,q=Object.keys(z).find(V=>z[V]===this);q&&(B?z[q]=B:delete z[q])}}}t.LateBinder=M;class P extends Map{constructor(){super(),this.binders=[]}add(B,z){this.set(B,z)}addBinder(B){this.binders.push(B)}bindAll(){this.binders.forEach(B=>B.bind())}}t.RefElements=P;class C extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay(B){const z=B.toCoordsArray();z.length>0&&(this.push(z),h(this.firstMap,(0,t.coordsToKey)((0,t.first)(z)),z),h(this.lastMap,(0,t.coordsToKey)((0,t.last)(z)),z))}toStrings(){const B=[];let z=this.shift();for(;z;){f(this.firstMap,(0,t.coordsToKey)((0,t.first)(z)),z),f(this.lastMap,(0,t.coordsToKey)((0,t.last)(z)),z);let q=z,V;do{const W=(0,t.coordsToKey)((0,t.last)(q));let Y=!1;V=v(this.firstMap,W),V||(V=v(this.lastMap,W),Y=!0),V&&(this.splice(this.indexOf(V),1),f(this.firstMap,(0,t.coordsToKey)((0,t.first)(V)),V),f(this.lastMap,(0,t.coordsToKey)((0,t.last)(V)),V),Y&&(V.length>q.length&&([q,V]=[V,q]),V.reverse()),q=q.concat(V.slice(1)))}while(V);B.push((0,t.strToFloat)(q)),z=this.shift()}return B}toRings(B){const z=this.toStrings(),q=[];let V=z.shift();for(;V;)(0,t.isRing)(V)&&((0,t.ringDirection)(V)!==B&&V.reverse(),q.push(V)),V=z.shift();return q}}t.WayCollection=C}(FA)),FA}const Xle={},Zle={whitelist:["services","rest_area","escape","elevator"]},Yle={blacklist:["coastline","cliff","ridge","arete","tree_row"]},Kle={},Jle={whitelist:["riverbank","dock","boatyard","dam"]},Qle={},eue={},tue={whitelist:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},nue={whitelist:["station","turntable","roundhouse","platform"]},rue={},iue={},aue={blacklist:["cutline","embankment","pipeline"]},oue={whitelist:["plant","substation","generator","transformer"]},sue={},lue={},uue={blacklist:["taxiway"]},cue={},hue={},fue={},due={},pue={},mue={},gue={},vue={},yue={},_ue={building:Xle,highway:Zle,natural:Yle,landuse:Kle,waterway:Jle,amenity:Qle,leisure:eue,barrier:tue,railway:nue,area:rue,boundary:iue,man_made:aue,power:oue,place:sue,shop:lue,aeroway:uue,tourism:cue,historic:hue,public_transport:fue,office:due,"building:part":{},military:pue,ruins:mue,"area:highway":{},craft:gue,golf:vue,indoor:yue};var ZF;function bue(){if(ZF)return Zf;ZF=1;var t=Zf&&Zf.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.Relation=Zf.Way=Zf.Node=void 0;const e=N3(),n=N3(),r=t(_ue);class i{constructor(f,v,y){this.type=f,this.id=v,this.refElems=y,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,y&&y.add(this.getCompositeId(),this)}addTags(f){this.tags=Object.assign(this.tags,f),this.hasTag=!!f}addTag(f,v){this.tags[f]=v,this.hasTag=!!f}addProp(f,v){this.props[f]=v}addProps(f){this.props=Object.assign(this.props,f)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}toFeatureArray(){return[]}}class o extends i{constructor(f,v){super("node",f,v),this.latLng=null}setLatLng(f){this.latLng=f}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:(0,e.strToFloat)([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}Zf.Node=o;class l extends i{constructor(f,v){super("way",f,v),this.latLngArray=[],this.isPolygon=!1}addLatLng(f){this.latLngArray.push(f)}setLatLngArray(f){this.latLngArray=f}addNodeRef(f){const v=new n.LateBinder(this.latLngArray,y=>{const w=this.refElems.get(`node/${y}`);if(w)return w.refCount++,w.getLatLng()},this,[f]);this.latLngArray.push(v),this.refElems.addBinder(v)}addTags(f){super.addTags(f);for(const[v,y]of Object.entries(f))this.analyzeTag(v,y)}addTag(f,v){super.addTag(f,v),this.analyzeTag(f,v)}toCoordsArray(){return this.latLngArray.map(f=>[f.lon,f.lat])}toFeatureArray(){let f=this.toCoordsArray();if(f.length>1){f=(0,e.strToFloat)(f);const v={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:f}};return this.isPolygon&&(0,e.isRing)(f)?((0,e.ringDirection)(f)!=="counterclockwise"&&f.reverse(),v.geometry={type:"Polygon",coordinates:[f]},[v]):[v]}return[]}analyzeTag(f,v){const y=r.default[f];y&&(this.isPolygon=!0,y.whitelist?this.isPolygon=y.whitelist.indexOf(v)>=0:y.blacklist&&(this.isPolygon=!(y.blacklist.indexOf(v)>=0)))}}Zf.Way=l;class a extends i{constructor(f,v){super("relation",f,v),this.relations=[],this.nodes=[],this.bounds=void 0}setBounds(f){this.bounds=f}addMember(f){switch(f.type){case"relation":let v=new n.LateBinder(this.relations,b=>{const A=this.refElems.get(`relation/${b}`);if(A)return A.refCount++,A},this,[f.ref]);this.relations.push(v),this.refElems.addBinder(v);break;case"way":f.role||(f.role="");let y=this[f.role];if(y||(y=this[f.role]=[]),f.geometry){const b=new l(f.ref,this.refElems);b.setLatLngArray(f.geometry),b.refCount++,y.push(b)}else if(f.nodes){const b=new l(f.ref,this.refElems);for(const A of f.nodes)b.addNodeRef(A);b.refCount++,y.push(b)}else{let b=new n.LateBinder(y,A=>{const M=this.refElems.get(`way/${A}`);if(M)return M.refCount++,M},this,[f.ref]);y.push(b),this.refElems.addBinder(b)}break;case"node":let w=null;if(f.lat&&f.lon){w=new o(f.ref,this.refElems),w.setLatLng({lon:f.lon,lat:f.lat}),f.tags&&w.addTags(f.tags);for(const[b,A]of Object.entries(f))["id","type","lat","lon"].indexOf(b)<0&&w.addProp(b,A);w.refCount++,this.nodes.push(w)}else{let b=new n.LateBinder(this.nodes,A=>{const M=this.refElems.get(`node/${A}`);if(M)return M.refCount++,M},this,[f.ref]);this.nodes.push(b),this.refElems.addBinder(b)}}}toFeatureArray(){function f(C){const k=C?C.toStrings():[];return k.length>0?k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}:null}function v(C,k){const B=C?C.toRings("counterclockwise"):[],z=k?k.toRings("clockwise"):[];if(B.length>0){const q=[];let V;for(V of B)q.push([V]);for(V=z.shift();V;){for(const W in B)if((0,e.ptInsidePolygon)((0,e.first)(V),B[W])){q[W].push(V);break}V=z.shift()}return q.length===1?{type:"Polygon",coordinates:q[0]}:{type:"MultiPolygon",coordinates:q}}return null}const y=[],w=[];let b=[];const A=["type","id","refElems","tags","props","refCount","hasTag","relations","nodes","bounds"];for(const C of this.relations)if(C){let k=Object.keys(C).filter(B=>A.indexOf(B)<0);for(const B of k){const z=C[B];if(z){const q=this[B];q?q.push(...z):this[B]=z}}}let M=Object.keys(this).filter(C=>A.indexOf(C)<0);for(const C of M){const k=this[C];if(k){this[C]=new n.WayCollection;for(const B of k)this[C].addWay(B)}}let P={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps(),geometry:null};if(this.bounds||delete P.bbox,this.outer){let C=Object.assign({},P),k=v(this.outer,this.inner);k&&(C.geometry=k,y.push(C))}else{let C={type:"MultiLineString",coordinates:[]};for(let k of M)if(k!=null&&k!=="inner"){let B=this[k];if(B){let z=f(B);if(z){if(z.type==="LineString")C.coordinates.push(z.coordinates);else if(z.type==="MultiLineString"){let q=Object.assign({},P);q.geometry=z,w.push(q)}}}}if(C.coordinates.length>0){let k=Object.assign({},P);k.geometry=C,w.push(k)}}for(let C of this.nodes)b=b.concat(C.toFeatureArray());return[...y,...w,...b]}}return Zf.Relation=a,Zf}var M2={},YF;function xue(){if(YF)return M2;YF=1,Object.defineProperty(M2,"__esModule",{value:!0});function t(i){return i.match(/^(.+?)\[(.+?)\]>$/g)!==null}function e(i){const o=/^(.+?)\[(.+?)\]>$/g.exec(i);return o?{evt:o[1]+">",exp:o[2]}:{evt:i}}function n(i){const o="return "+i.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",o)}class r{constructor(o){this.queryParent=!1,this.progressive=!1,this.parentMap=new WeakMap,o&&(this.queryParent=!!o.queryParent,this.progressive=o.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(o,l,a){a=a?a+".":"";const h=/<([^ >\/]+)(.*?)>/mg,f=[];let v=h.exec(o);for(;v;){const y=v[1],w={$tag:y},b=a+y,A=v[2].trim();let M=!1;(A.endsWith("/")||y.startsWith("?")||y.startsWith("!"))&&(M=!0);const P=/([^ ]+?)="(.+?)"/g,C=/([^ ]+?)='(.+?)'/g;let k=P.exec(A),B=!1;for(;k;)B=!0,w[k[1]]=k[2],k=P.exec(A);if(!B)for(k=C.exec(A);k;)B=!0,w[k[1]]=k[2],k=C.exec(A);if(!B&&A!==""&&(w.text=A),this.progressive&&this.emit(`<${b}>`,w,l),!M){const z=new RegExp(`([^]+?)</${y}>`,"g");z.lastIndex=h.lastIndex;const q=z.exec(o);if(q&&q[1]){h.lastIndex=z.lastIndex;const V=this.parse(q[1],w,b);V.length>0?w.$innerNodes=V:w.$innerText=q[1]}}this.queryParent&&l&&this.parentMap.set(w,l),this.progressive&&this.emit(`</${b}>`,w,l),f.push(w),v=h.exec(o)}return f}getParent(o){return this.queryParent?this.parentMap.get(o):null}addListener(o,l){if(t(o)){const a=e(o);a.exp&&(l.condition=n(a.exp)),o=a.evt}this.$addListener(o,l)}removeListener(o,l){t(o)&&(o=e(o).evt),this.$removeListener(o,l)}on(o,l){this.addListener(o,l)}off(o,l){this.removeListener(o,l)}$addListener(o,l){const a=this.evtListeners[o];a?a.push(l):this.evtListeners[o]=[l]}$removeListener(o,l){const a=this.evtListeners[o];let h=-1;a&&(h=a.indexOf(l)),h>=0&&a.splice(h,1)}emit(o,...l){const a=this.evtListeners[o];if(a)for(const h of a)h.condition?h.condition.apply(null,l)===!0&&h.apply(null,l):h.apply(null,l)}}return M2.default=r,M2}var F1,KF;function wue(){if(KF)return F1;KF=1;var t=F1&&F1.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};const e=bue(),n=N3(),r=t(xue());function i(o,l){let a=!1,h=!1,f=!0;l&&(C=>{if(C){a=!!(C.completeFeature||C.allFeatures),h=!!C.renderTagged;const k=C.suppressWay||C.excludeWay;k!==void 0&&!k&&(f=!1)}})(l);let w=(C=>C.elements?"json":C.indexOf("<osm")>=0?"xml":C.trim().startsWith("{")?"json-raw":"invalid")(o);const b=new n.RefElements;let A=[];const M=C=>{for(const k of o.elements)switch(k.type){case"node":const B=new e.Node(k.id,b);k.tags&&B.addTags(k.tags),B.addProps((0,n.purgeProps)(k,["id","type","tags","lat","lon"])),B.setLatLng(k);break;case"way":const z=new e.Way(k.id,b);if(k.tags&&z.addTags(k.tags),z.addProps((0,n.purgeProps)(k,["id","type","tags","nodes","geometry"])),k.geometry)z.setLatLngArray(k.geometry);else if(k.nodes)for(const V of k.nodes)z.addNodeRef(V);break;case"relation":const q=new e.Relation(k.id,b);if(k.bounds&&q.setBounds([parseFloat(k.bounds.minlon),parseFloat(k.bounds.minlat),parseFloat(k.bounds.maxlon),parseFloat(k.bounds.maxlat)]),k.tags&&q.addTags(k.tags),q.addProps((0,n.purgeProps)(k,["id","type","tags","bounds","members"])),k.members)for(const V of k.members)q.addMember(V)}},P=C=>{const k=new r.default({progressive:!0});k.on("</osm.node>",B=>{const z=new e.Node(B.id,b);for(const[q,V]of Object.entries(B))!q.startsWith("$")&&["id","lon","lat"].indexOf(q)<0&&z.addProp(q,V);if(z.setLatLng(B),B.$innerNodes)for(const q of B.$innerNodes)q.$tag==="tag"&&z.addTag(q.k,q.v)}),k.on("</osm.way>",B=>{const z=new e.Way(B.id,b);for(const[q,V]of Object.entries(B))!q.startsWith("$")&&["id"].indexOf(q)<0&&z.addProp(q,V);if(B.$innerNodes)for(const q of B.$innerNodes)q.$tag==="nd"?q.lon&&q.lat?z.addLatLng(q):q.ref&&z.addNodeRef(q.ref):q.$tag==="tag"&&z.addTag(q.k,q.v)}),k.on("<osm.relation>",B=>new e.Relation(B.id,b)),k.on("</osm.relation.member>",(B,z)=>{const q=b.get(`relation/${z==null?void 0:z.id}`),V={type:B.type,role:B.role?B.role:"",ref:B.ref};if(B.lat&&B.lon){V.lat=B.lat,V.lon=B.lon,V.tags={};for(const[W,Y]of Object.entries(B))!W.startsWith("$")&&["type","lat","lon"].indexOf(W)<0&&(V[W]=Y)}if(B.$innerNodes){const W=[],Y=[];for(const Z of B.$innerNodes)Z.lat&&Z.lon?W.push(Z):Z.ref&&Y.push(Z.ref);W.length>0?V.geometry=W:Y.length>0&&(V.nodes=Y)}q.addMember(V)}),k.on("</osm.relation.bounds>",(B,z)=>{b.get(`relation/${z==null?void 0:z.id}`).setBounds([parseFloat(B.minlon),parseFloat(B.minlat),parseFloat(B.maxlon),parseFloat(B.maxlat)])}),k.on("</osm.relation.tag>",(B,z)=>{b.get(`relation/${z==null?void 0:z.id}`).addTag(B.k,B.v)}),k.parse(C)};w==="json-raw"&&(o=JSON.parse(o),o.elements?w="json":w="invalid"),w==="json"?M():w==="xml"&&P(o),b.bindAll();for(const C of b.values())if(C.refCount<=0||C.hasTag&&h&&!(C instanceof e.Way&&f)){const k=C.toFeatureArray();if(C instanceof e.Relation&&!a&&k.length>0)return k[0].geometry;A=A.concat(k)}return{type:"FeatureCollection",features:A}}return F1=i,F1}wue();var Sue={value:()=>{}};function i9(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Sw(n)}function Sw(t){this._=t}function Eue(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Sw.prototype=i9.prototype={constructor:Sw,on:function(t,e){var n=this._,r=Eue(t+"",n),i,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((i=(t=r[o]).type)&&(i=Tue(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<l;)if(i=(t=r[o]).type)n[i]=JF(n[i],t.name,e);else if(e==null)for(i in n)n[i]=JF(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Sw(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Tue(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function JF(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Sue,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var k3="http://www.w3.org/1999/xhtml";const QF={svg:"http://www.w3.org/2000/svg",xhtml:k3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _E(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),QF.hasOwnProperty(e)?{space:QF[e],local:t}:t}function Mue(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===k3&&e.documentElement.namespaceURI===k3?e.createElement(t):e.createElementNS(n,t)}}function Aue(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function a9(t){var e=_E(t);return(e.local?Aue:Mue)(e)}function Cue(){}function ZD(t){return t==null?Cue:function(){return this.querySelector(t)}}function Pue(t){typeof t!="function"&&(t=ZD(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],l=o.length,a=r[i]=new Array(l),h,f,v=0;v<l;++v)(h=o[v])&&(f=t.call(h,h.__data__,v,o))&&("__data__"in h&&(f.__data__=h.__data__),a[v]=f);return new hd(r,this._parents)}function Rue(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Due(){return[]}function o9(t){return t==null?Due:function(){return this.querySelectorAll(t)}}function Lue(t){return function(){return Rue(t.apply(this,arguments))}}function Iue(t){typeof t=="function"?t=Lue(t):t=o9(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var l=e[o],a=l.length,h,f=0;f<a;++f)(h=l[f])&&(r.push(t.call(h,h.__data__,f,l)),i.push(h));return new hd(r,i)}function s9(t){return function(){return this.matches(t)}}function l9(t){return function(e){return e.matches(t)}}var Oue=Array.prototype.find;function Nue(t){return function(){return Oue.call(this.children,t)}}function kue(){return this.firstElementChild}function Fue(t){return this.select(t==null?kue:Nue(typeof t=="function"?t:l9(t)))}var Bue=Array.prototype.filter;function zue(){return Array.from(this.children)}function Uue(t){return function(){return Bue.call(this.children,t)}}function jue(t){return this.selectAll(t==null?zue:Uue(typeof t=="function"?t:l9(t)))}function Vue(t){typeof t!="function"&&(t=s9(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],l=o.length,a=r[i]=[],h,f=0;f<l;++f)(h=o[f])&&t.call(h,h.__data__,f,o)&&a.push(h);return new hd(r,this._parents)}function u9(t){return new Array(t.length)}function Gue(){return new hd(this._enter||this._groups.map(u9),this._parents)}function uS(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}uS.prototype={constructor:uS,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function que(t){return function(){return t}}function Hue(t,e,n,r,i,o){for(var l=0,a,h=e.length,f=o.length;l<f;++l)(a=e[l])?(a.__data__=o[l],r[l]=a):n[l]=new uS(t,o[l]);for(;l<h;++l)(a=e[l])&&(i[l]=a)}function $ue(t,e,n,r,i,o,l){var a,h,f=new Map,v=e.length,y=o.length,w=new Array(v),b;for(a=0;a<v;++a)(h=e[a])&&(w[a]=b=l.call(h,h.__data__,a,e)+"",f.has(b)?i[a]=h:f.set(b,h));for(a=0;a<y;++a)b=l.call(t,o[a],a,o)+"",(h=f.get(b))?(r[a]=h,h.__data__=o[a],f.delete(b)):n[a]=new uS(t,o[a]);for(a=0;a<v;++a)(h=e[a])&&f.get(w[a])===h&&(i[a]=h)}function Wue(t){return t.__data__}function Xue(t,e){if(!arguments.length)return Array.from(this,Wue);var n=e?$ue:Hue,r=this._parents,i=this._groups;typeof t!="function"&&(t=que(t));for(var o=i.length,l=new Array(o),a=new Array(o),h=new Array(o),f=0;f<o;++f){var v=r[f],y=i[f],w=y.length,b=Zue(t.call(v,v&&v.__data__,f,r)),A=b.length,M=a[f]=new Array(A),P=l[f]=new Array(A),C=h[f]=new Array(w);n(v,y,M,P,C,b,e);for(var k=0,B=0,z,q;k<A;++k)if(z=M[k]){for(k>=B&&(B=k+1);!(q=P[B])&&++B<A;);z._next=q||null}}return l=new hd(l,r),l._enter=a,l._exit=h,l}function Zue(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Yue(){return new hd(this._exit||this._groups.map(u9),this._parents)}function Kue(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Jue(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,l=Math.min(i,o),a=new Array(i),h=0;h<l;++h)for(var f=n[h],v=r[h],y=f.length,w=a[h]=new Array(y),b,A=0;A<y;++A)(b=f[A]||v[A])&&(w[A]=b);for(;h<i;++h)a[h]=n[h];return new hd(a,this._parents)}function Que(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],l;--i>=0;)(l=r[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function ece(t){t||(t=tce);function e(y,w){return y&&w?t(y.__data__,w.__data__):!y-!w}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var l=n[o],a=l.length,h=i[o]=new Array(a),f,v=0;v<a;++v)(f=l[v])&&(h[v]=f);h.sort(e)}return new hd(i,this._parents).order()}function tce(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function nce(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function rce(){return Array.from(this)}function ice(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var l=r[i];if(l)return l}return null}function ace(){let t=0;for(const e of this)++t;return t}function oce(){return!this.node()}function sce(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,l=i.length,a;o<l;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function lce(t){return function(){this.removeAttribute(t)}}function uce(t){return function(){this.removeAttributeNS(t.space,t.local)}}function cce(t,e){return function(){this.setAttribute(t,e)}}function hce(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function fce(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function dce(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function pce(t,e){var n=_E(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?uce:lce:typeof e=="function"?n.local?dce:fce:n.local?hce:cce)(n,e))}function c9(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function mce(t){return function(){this.style.removeProperty(t)}}function gce(t,e,n){return function(){this.style.setProperty(t,e,n)}}function vce(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function yce(t,e,n){return arguments.length>1?this.each((e==null?mce:typeof e=="function"?vce:gce)(t,e,n??"")):d_(this.node(),t)}function d_(t,e){return t.style.getPropertyValue(e)||c9(t).getComputedStyle(t,null).getPropertyValue(e)}function _ce(t){return function(){delete this[t]}}function bce(t,e){return function(){this[t]=e}}function xce(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function wce(t,e){return arguments.length>1?this.each((e==null?_ce:typeof e=="function"?xce:bce)(t,e)):this.node()[t]}function h9(t){return t.trim().split(/^|\s+/)}function YD(t){return t.classList||new f9(t)}function f9(t){this._node=t,this._names=h9(t.getAttribute("class")||"")}f9.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function d9(t,e){for(var n=YD(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function p9(t,e){for(var n=YD(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Sce(t){return function(){d9(this,t)}}function Ece(t){return function(){p9(this,t)}}function Tce(t,e){return function(){(e.apply(this,arguments)?d9:p9)(this,t)}}function Mce(t,e){var n=h9(t+"");if(arguments.length<2){for(var r=YD(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Tce:e?Sce:Ece)(n,e))}function Ace(){this.textContent=""}function Cce(t){return function(){this.textContent=t}}function Pce(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Rce(t){return arguments.length?this.each(t==null?Ace:(typeof t=="function"?Pce:Cce)(t)):this.node().textContent}function Dce(){this.innerHTML=""}function Lce(t){return function(){this.innerHTML=t}}function Ice(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Oce(t){return arguments.length?this.each(t==null?Dce:(typeof t=="function"?Ice:Lce)(t)):this.node().innerHTML}function Nce(){this.nextSibling&&this.parentNode.appendChild(this)}function kce(){return this.each(Nce)}function Fce(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bce(){return this.each(Fce)}function zce(t){var e=typeof t=="function"?t:a9(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Uce(){return null}function jce(t,e){var n=typeof t=="function"?t:a9(t),r=e==null?Uce:typeof e=="function"?e:ZD(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Vce(){var t=this.parentNode;t&&t.removeChild(this)}function Gce(){return this.each(Vce)}function qce(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Hce(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $ce(t){return this.select(t?Hce:qce)}function Wce(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Xce(t){return function(e){t.call(this,e,this.__data__)}}function Zce(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Yce(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Kce(t,e,n){return function(){var r=this.__on,i,o=Xce(e);if(r){for(var l=0,a=r.length;l<a;++l)if((i=r[l]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Jce(t,e,n){var r=Zce(t+""),i,o=r.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var h=0,f=a.length,v;h<f;++h)for(i=0,v=a[h];i<o;++i)if((l=r[i]).type===v.type&&l.name===v.name)return v.value}return}for(a=e?Kce:Yce,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function m9(t,e,n){var r=c9(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Qce(t,e){return function(){return m9(this,t,e)}}function ehe(t,e){return function(){return m9(this,t,e.apply(this,arguments))}}function the(t,e){return this.each((typeof e=="function"?ehe:Qce)(t,e))}function*nhe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,l;i<o;++i)(l=r[i])&&(yield l)}var rhe=[null];function hd(t,e){this._groups=t,this._parents=e}function mx(){return new hd([[document.documentElement]],rhe)}function ihe(){return this}hd.prototype=mx.prototype={constructor:hd,select:Pue,selectAll:Iue,selectChild:Fue,selectChildren:jue,filter:Vue,data:Xue,enter:Gue,exit:Yue,join:Kue,merge:Jue,selection:ihe,order:Que,sort:ece,call:nce,nodes:rce,node:ice,size:ace,empty:oce,each:sce,attr:pce,style:yce,property:wce,classed:Mce,text:Rce,html:Oce,raise:kce,lower:Bce,append:zce,insert:jce,remove:Gce,clone:$ce,datum:Wce,on:Jce,dispatch:the,[Symbol.iterator]:nhe};function KD(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function g9(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function gx(){}var Gb=.7,cS=1/Gb,t_="\\s*([+-]?\\d+)\\s*",qb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ahe=/^#([0-9a-f]{3,8})$/,ohe=new RegExp(`^rgb\\(${t_},${t_},${t_}\\)$`),she=new RegExp(`^rgb\\(${lp},${lp},${lp}\\)$`),lhe=new RegExp(`^rgba\\(${t_},${t_},${t_},${qb}\\)$`),uhe=new RegExp(`^rgba\\(${lp},${lp},${lp},${qb}\\)$`),che=new RegExp(`^hsl\\(${qb},${lp},${lp}\\)$`),hhe=new RegExp(`^hsla\\(${qb},${lp},${lp},${qb}\\)$`),e6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};KD(gx,Hb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:t6,formatHex:t6,formatHex8:fhe,formatHsl:dhe,formatRgb:n6,toString:n6});function t6(){return this.rgb().formatHex()}function fhe(){return this.rgb().formatHex8()}function dhe(){return v9(this).formatHsl()}function n6(){return this.rgb().formatRgb()}function Hb(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ahe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?r6(e):n===3?new gh(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?A2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?A2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ohe.exec(t))?new gh(e[1],e[2],e[3],1):(e=she.exec(t))?new gh(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=lhe.exec(t))?A2(e[1],e[2],e[3],e[4]):(e=uhe.exec(t))?A2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=che.exec(t))?o6(e[1],e[2]/100,e[3]/100,1):(e=hhe.exec(t))?o6(e[1],e[2]/100,e[3]/100,e[4]):e6.hasOwnProperty(t)?r6(e6[t]):t==="transparent"?new gh(NaN,NaN,NaN,0):null}function r6(t){return new gh(t>>16&255,t>>8&255,t&255,1)}function A2(t,e,n,r){return r<=0&&(t=e=n=NaN),new gh(t,e,n,r)}function phe(t){return t instanceof gx||(t=Hb(t)),t?(t=t.rgb(),new gh(t.r,t.g,t.b,t.opacity)):new gh}function F3(t,e,n,r){return arguments.length===1?phe(t):new gh(t,e,n,r??1)}function gh(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}KD(gh,F3,g9(gx,{brighter(t){return t=t==null?cS:Math.pow(cS,t),new gh(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gb:Math.pow(Gb,t),new gh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new gh(M0(this.r),M0(this.g),M0(this.b),hS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i6,formatHex:i6,formatHex8:mhe,formatRgb:a6,toString:a6}));function i6(){return`#${b0(this.r)}${b0(this.g)}${b0(this.b)}`}function mhe(){return`#${b0(this.r)}${b0(this.g)}${b0(this.b)}${b0((isNaN(this.opacity)?1:this.opacity)*255)}`}function a6(){const t=hS(this.opacity);return`${t===1?"rgb(":"rgba("}${M0(this.r)}, ${M0(this.g)}, ${M0(this.b)}${t===1?")":`, ${t})`}`}function hS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function M0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function b0(t){return t=M0(t),(t<16?"0":"")+t.toString(16)}function o6(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nd(t,e,n,r)}function v9(t){if(t instanceof nd)return new nd(t.h,t.s,t.l,t.opacity);if(t instanceof gx||(t=Hb(t)),!t)return new nd;if(t instanceof nd)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),l=NaN,a=o-i,h=(o+i)/2;return a?(e===o?l=(n-r)/a+(n<r)*6:n===o?l=(r-e)/a+2:l=(e-n)/a+4,a/=h<.5?o+i:2-o-i,l*=60):a=h>0&&h<1?0:l,new nd(l,a,h,t.opacity)}function ghe(t,e,n,r){return arguments.length===1?v9(t):new nd(t,e,n,r??1)}function nd(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}KD(nd,ghe,g9(gx,{brighter(t){return t=t==null?cS:Math.pow(cS,t),new nd(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gb:Math.pow(Gb,t),new nd(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new gh(BA(t>=240?t-240:t+120,i,r),BA(t,i,r),BA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new nd(s6(this.h),C2(this.s),C2(this.l),hS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=hS(this.opacity);return`${t===1?"hsl(":"hsla("}${s6(this.h)}, ${C2(this.s)*100}%, ${C2(this.l)*100}%${t===1?")":`, ${t})`}`}}));function s6(t){return t=(t||0)%360,t<0?t+360:t}function C2(t){return Math.max(0,Math.min(1,t||0))}function BA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const y9=t=>()=>t;function vhe(t,e){return function(n){return t+n*e}}function yhe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function _he(t){return(t=+t)==1?_9:function(e,n){return n-e?yhe(e,n,t):y9(isNaN(e)?n:e)}}function _9(t,e){var n=e-t;return n?vhe(t,n):y9(isNaN(t)?e:t)}const l6=function t(e){var n=_he(e);function r(i,o){var l=n((i=F3(i)).r,(o=F3(o)).r),a=n(i.g,o.g),h=n(i.b,o.b),f=_9(i.opacity,o.opacity);return function(v){return i.r=l(v),i.g=a(v),i.b=h(v),i.opacity=f(v),i+""}}return r.gamma=t,r}(1);function Hm(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var B3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zA=new RegExp(B3.source,"g");function bhe(t){return function(){return t}}function xhe(t){return function(e){return t(e)+""}}function whe(t,e){var n=B3.lastIndex=zA.lastIndex=0,r,i,o,l=-1,a=[],h=[];for(t=t+"",e=e+"";(r=B3.exec(t))&&(i=zA.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[l]?a[l]+=o:a[++l]=o),(r=r[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,h.push({i:l,x:Hm(r,i)})),n=zA.lastIndex;return n<e.length&&(o=e.slice(n),a[l]?a[l]+=o:a[++l]=o),a.length<2?h[0]?xhe(h[0].x):bhe(e):(e=h.length,function(f){for(var v=0,y;v<e;++v)a[(y=h[v]).i]=y.x(f);return a.join("")})}var u6=180/Math.PI,z3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function b9(t,e,n,r,i,o){var l,a,h;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(h=t*n+e*r)&&(n-=t*h,r-=e*h),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,h/=a),t*r<e*n&&(t=-t,e=-e,h=-h,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*u6,skewX:Math.atan(h)*u6,scaleX:l,scaleY:a}}var P2;function She(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?z3:b9(e.a,e.b,e.c,e.d,e.e,e.f)}function Ehe(t){return t==null||(P2||(P2=document.createElementNS("http://www.w3.org/2000/svg","g")),P2.setAttribute("transform",t),!(t=P2.transform.baseVal.consolidate()))?z3:(t=t.matrix,b9(t.a,t.b,t.c,t.d,t.e,t.f))}function x9(t,e,n,r){function i(f){return f.length?f.pop()+" ":""}function o(f,v,y,w,b,A){if(f!==y||v!==w){var M=b.push("translate(",null,e,null,n);A.push({i:M-4,x:Hm(f,y)},{i:M-2,x:Hm(v,w)})}else(y||w)&&b.push("translate("+y+e+w+n)}function l(f,v,y,w){f!==v?(f-v>180?v+=360:v-f>180&&(f+=360),w.push({i:y.push(i(y)+"rotate(",null,r)-2,x:Hm(f,v)})):v&&y.push(i(y)+"rotate("+v+r)}function a(f,v,y,w){f!==v?w.push({i:y.push(i(y)+"skewX(",null,r)-2,x:Hm(f,v)}):v&&y.push(i(y)+"skewX("+v+r)}function h(f,v,y,w,b,A){if(f!==y||v!==w){var M=b.push(i(b)+"scale(",null,",",null,")");A.push({i:M-4,x:Hm(f,y)},{i:M-2,x:Hm(v,w)})}else(y!==1||w!==1)&&b.push(i(b)+"scale("+y+","+w+")")}return function(f,v){var y=[],w=[];return f=t(f),v=t(v),o(f.translateX,f.translateY,v.translateX,v.translateY,y,w),l(f.rotate,v.rotate,y,w),a(f.skewX,v.skewX,y,w),h(f.scaleX,f.scaleY,v.scaleX,v.scaleY,y,w),f=v=null,function(b){for(var A=-1,M=w.length,P;++A<M;)y[(P=w[A]).i]=P.x(b);return y.join("")}}}var The=x9(She,"px, ","px)","deg)"),Mhe=x9(Ehe,", ",")",")"),p_=0,sb=0,B1=0,w9=1e3,fS,lb,dS=0,I0=0,bE=0,$b=typeof performance=="object"&&performance.now?performance:Date,S9=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function JD(){return I0||(S9(Ahe),I0=$b.now()+bE)}function Ahe(){I0=0}function pS(){this._call=this._time=this._next=null}pS.prototype=E9.prototype={constructor:pS,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?JD():+n)+(e==null?0:+e),!this._next&&lb!==this&&(lb?lb._next=this:fS=this,lb=this),this._call=t,this._time=n,U3()},stop:function(){this._call&&(this._call=null,this._time=1/0,U3())}};function E9(t,e,n){var r=new pS;return r.restart(t,e,n),r}function Che(){JD(),++p_;for(var t=fS,e;t;)(e=I0-t._time)>=0&&t._call.call(void 0,e),t=t._next;--p_}function c6(){I0=(dS=$b.now())+bE,p_=sb=0;try{Che()}finally{p_=0,Rhe(),I0=0}}function Phe(){var t=$b.now(),e=t-dS;e>w9&&(bE-=e,dS=t)}function Rhe(){for(var t,e=fS,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:fS=n);lb=t,U3(r)}function U3(t){if(!p_){sb&&(sb=clearTimeout(sb));var e=t-I0;e>24?(t<1/0&&(sb=setTimeout(c6,t-$b.now()-bE)),B1&&(B1=clearInterval(B1))):(B1||(dS=$b.now(),B1=setInterval(Phe,w9)),p_=1,S9(c6))}}function h6(t,e,n){var r=new pS;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Dhe=i9("start","end","cancel","interrupt"),Lhe=[],T9=0,f6=1,j3=2,Ew=3,d6=4,V3=5,Tw=6;function xE(t,e,n,r,i,o){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;Ihe(t,n,{name:e,index:r,group:i,on:Dhe,tween:Lhe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:T9})}function QD(t,e){var n=_d(t,e);if(n.state>T9)throw new Error("too late; already scheduled");return n}function pp(t,e){var n=_d(t,e);if(n.state>Ew)throw new Error("too late; already running");return n}function _d(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ihe(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=E9(o,0,n.time);function o(f){n.state=f6,n.timer.restart(l,n.delay,n.time),n.delay<=f&&l(f-n.delay)}function l(f){var v,y,w,b;if(n.state!==f6)return h();for(v in r)if(b=r[v],b.name===n.name){if(b.state===Ew)return h6(l);b.state===d6?(b.state=Tw,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete r[v]):+v<e&&(b.state=Tw,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete r[v])}if(h6(function(){n.state===Ew&&(n.state=d6,n.timer.restart(a,n.delay,n.time),a(f))}),n.state=j3,n.on.call("start",t,t.__data__,n.index,n.group),n.state===j3){for(n.state=Ew,i=new Array(w=n.tween.length),v=0,y=-1;v<w;++v)(b=n.tween[v].value.call(t,t.__data__,n.index,n.group))&&(i[++y]=b);i.length=y+1}}function a(f){for(var v=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(h),n.state=V3,1),y=-1,w=i.length;++y<w;)i[y].call(t,v);n.state===V3&&(n.on.call("end",t,t.__data__,n.index,n.group),h())}function h(){n.state=Tw,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function Ohe(t,e){var n=t.__transition,r,i,o=!0,l;if(n){e=e==null?null:e+"";for(l in n){if((r=n[l]).name!==e){o=!1;continue}i=r.state>j3&&r.state<V3,r.state=Tw,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[l]}o&&delete t.__transition}}function Nhe(t){return this.each(function(){Ohe(this,t)})}function khe(t,e){var n,r;return function(){var i=pp(this,t),o=i.tween;if(o!==n){r=n=o;for(var l=0,a=r.length;l<a;++l)if(r[l].name===e){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function Fhe(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=pp(this,t),l=o.tween;if(l!==r){i=(r=l).slice();for(var a={name:e,value:n},h=0,f=i.length;h<f;++h)if(i[h].name===e){i[h]=a;break}h===f&&i.push(a)}o.tween=i}}function Bhe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=_d(this.node(),n).tween,i=0,o=r.length,l;i<o;++i)if((l=r[i]).name===t)return l.value;return null}return this.each((e==null?khe:Fhe)(n,t,e))}function eL(t,e,n){var r=t._id;return t.each(function(){var i=pp(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return _d(i,r).value[e]}}function M9(t,e){var n;return(typeof e=="number"?Hm:e instanceof Hb?l6:(n=Hb(e))?(e=n,l6):whe)(t,e)}function zhe(t){return function(){this.removeAttribute(t)}}function Uhe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jhe(t,e,n){var r,i=n+"",o;return function(){var l=this.getAttribute(t);return l===i?null:l===r?o:o=e(r=l,n)}}function Vhe(t,e,n){var r,i=n+"",o;return function(){var l=this.getAttributeNS(t.space,t.local);return l===i?null:l===r?o:o=e(r=l,n)}}function Ghe(t,e,n){var r,i,o;return function(){var l,a=n(this),h;return a==null?void this.removeAttribute(t):(l=this.getAttribute(t),h=a+"",l===h?null:l===r&&h===i?o:(i=h,o=e(r=l,a)))}}function qhe(t,e,n){var r,i,o;return function(){var l,a=n(this),h;return a==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),h=a+"",l===h?null:l===r&&h===i?o:(i=h,o=e(r=l,a)))}}function Hhe(t,e){var n=_E(t),r=n==="transform"?Mhe:M9;return this.attrTween(t,typeof e=="function"?(n.local?qhe:Ghe)(n,r,eL(this,"attr."+t,e)):e==null?(n.local?Uhe:zhe)(n):(n.local?Vhe:jhe)(n,r,e))}function $he(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Whe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Xhe(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Whe(t,o)),n}return i._value=e,i}function Zhe(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&$he(t,o)),n}return i._value=e,i}function Yhe(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=_E(t);return this.tween(n,(r.local?Xhe:Zhe)(r,e))}function Khe(t,e){return function(){QD(this,t).delay=+e.apply(this,arguments)}}function Jhe(t,e){return e=+e,function(){QD(this,t).delay=e}}function Qhe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Khe:Jhe)(e,t)):_d(this.node(),e).delay}function efe(t,e){return function(){pp(this,t).duration=+e.apply(this,arguments)}}function tfe(t,e){return e=+e,function(){pp(this,t).duration=e}}function nfe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?efe:tfe)(e,t)):_d(this.node(),e).duration}function rfe(t,e){if(typeof e!="function")throw new Error;return function(){pp(this,t).ease=e}}function ife(t){var e=this._id;return arguments.length?this.each(rfe(e,t)):_d(this.node(),e).ease}function afe(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;pp(this,t).ease=n}}function ofe(t){if(typeof t!="function")throw new Error;return this.each(afe(this._id,t))}function sfe(t){typeof t!="function"&&(t=s9(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],l=o.length,a=r[i]=[],h,f=0;f<l;++f)(h=o[f])&&t.call(h,h.__data__,f,o)&&a.push(h);return new nm(r,this._parents,this._name,this._id)}function lfe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),l=new Array(r),a=0;a<o;++a)for(var h=e[a],f=n[a],v=h.length,y=l[a]=new Array(v),w,b=0;b<v;++b)(w=h[b]||f[b])&&(y[b]=w);for(;a<r;++a)l[a]=e[a];return new nm(l,this._parents,this._name,this._id)}function ufe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function cfe(t,e,n){var r,i,o=ufe(e)?QD:pp;return function(){var l=o(this,t),a=l.on;a!==r&&(i=(r=a).copy()).on(e,n),l.on=i}}function hfe(t,e){var n=this._id;return arguments.length<2?_d(this.node(),n).on.on(t):this.each(cfe(n,t,e))}function ffe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function dfe(){return this.on("end.remove",ffe(this._id))}function pfe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ZD(t));for(var r=this._groups,i=r.length,o=new Array(i),l=0;l<i;++l)for(var a=r[l],h=a.length,f=o[l]=new Array(h),v,y,w=0;w<h;++w)(v=a[w])&&(y=t.call(v,v.__data__,w,a))&&("__data__"in v&&(y.__data__=v.__data__),f[w]=y,xE(f[w],e,n,w,f,_d(v,n)));return new nm(o,this._parents,e,n)}function mfe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=o9(t));for(var r=this._groups,i=r.length,o=[],l=[],a=0;a<i;++a)for(var h=r[a],f=h.length,v,y=0;y<f;++y)if(v=h[y]){for(var w=t.call(v,v.__data__,y,h),b,A=_d(v,n),M=0,P=w.length;M<P;++M)(b=w[M])&&xE(b,e,n,M,w,A);o.push(w),l.push(v)}return new nm(o,l,e,n)}var gfe=mx.prototype.constructor;function vfe(){return new gfe(this._groups,this._parents)}function yfe(t,e){var n,r,i;return function(){var o=d_(this,t),l=(this.style.removeProperty(t),d_(this,t));return o===l?null:o===n&&l===r?i:i=e(n=o,r=l)}}function A9(t){return function(){this.style.removeProperty(t)}}function _fe(t,e,n){var r,i=n+"",o;return function(){var l=d_(this,t);return l===i?null:l===r?o:o=e(r=l,n)}}function bfe(t,e,n){var r,i,o;return function(){var l=d_(this,t),a=n(this),h=a+"";return a==null&&(h=a=(this.style.removeProperty(t),d_(this,t))),l===h?null:l===r&&h===i?o:(i=h,o=e(r=l,a))}}function xfe(t,e){var n,r,i,o="style."+e,l="end."+o,a;return function(){var h=pp(this,t),f=h.on,v=h.value[o]==null?a||(a=A9(e)):void 0;(f!==n||i!==v)&&(r=(n=f).copy()).on(l,i=v),h.on=r}}function wfe(t,e,n){var r=(t+="")=="transform"?The:M9;return e==null?this.styleTween(t,yfe(t,r)).on("end.style."+t,A9(t)):typeof e=="function"?this.styleTween(t,bfe(t,r,eL(this,"style."+t,e))).each(xfe(this._id,t)):this.styleTween(t,_fe(t,r,e),n).on("end.style."+t,null)}function Sfe(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Efe(t,e,n){var r,i;function o(){var l=e.apply(this,arguments);return l!==i&&(r=(i=l)&&Sfe(t,l,n)),r}return o._value=e,o}function Tfe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Efe(t,e,n??""))}function Mfe(t){return function(){this.textContent=t}}function Afe(t){return function(){var e=t(this);this.textContent=e??""}}function Cfe(t){return this.tween("text",typeof t=="function"?Afe(eL(this,"text",t)):Mfe(t==null?"":t+""))}function Pfe(t){return function(e){this.textContent=t.call(this,e)}}function Rfe(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Pfe(i)),e}return r._value=t,r}function Dfe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Rfe(t))}function Lfe(){for(var t=this._name,e=this._id,n=C9(),r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],a=l.length,h,f=0;f<a;++f)if(h=l[f]){var v=_d(h,e);xE(h,t,n,f,l,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new nm(r,this._parents,t,n)}function Ife(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,l){var a={value:l},h={value:function(){--i===0&&o()}};n.each(function(){var f=pp(this,r),v=f.on;v!==t&&(e=(t=v).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(h)),f.on=e}),i===0&&o()})}var Ofe=0;function nm(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function C9(){return++Ofe}var kp=mx.prototype;nm.prototype={constructor:nm,select:pfe,selectAll:mfe,selectChild:kp.selectChild,selectChildren:kp.selectChildren,filter:sfe,merge:lfe,selection:vfe,transition:Lfe,call:kp.call,nodes:kp.nodes,node:kp.node,size:kp.size,empty:kp.empty,each:kp.each,on:hfe,attr:Hhe,attrTween:Yhe,style:wfe,styleTween:Tfe,text:Cfe,textTween:Dfe,remove:dfe,tween:Bhe,delay:Qhe,duration:nfe,ease:ife,easeVarying:ofe,end:Ife,[Symbol.iterator]:kp[Symbol.iterator]};function Nfe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var kfe={time:null,delay:0,duration:250,ease:Nfe};function Ffe(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Bfe(t){var e,n;t instanceof nm?(e=t._id,t=t._name):(e=C9(),(n=kfe).time=JD(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],a=l.length,h,f=0;f<a;++f)(h=l[f])&&xE(h,t,e,f,l,n||Ffe(h,e));return new nm(r,this._parents,t,e)}mx.prototype.interrupt=Nhe;mx.prototype.transition=Bfe;function ub(t,e,n){this.k=t,this.x=e,this.y=n}ub.prototype={constructor:ub,scale:function(t){return t===1?this:new ub(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ub(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ub.prototype;function ac(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var zfe=typeof Symbol=="function"&&Symbol.observable||"@@observable",p6=zfe,UA=()=>Math.random().toString(36).substring(7).split("").join("."),Ufe={INIT:`@@redux/INIT${UA()}`,REPLACE:`@@redux/REPLACE${UA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${UA()}`},mS=Ufe;function tL(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function P9(t,e,n){if(typeof t!="function")throw new Error(ac(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ac(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ac(1));return n(P9)(t,e)}let r=t,i=e,o=new Map,l=o,a=0,h=!1;function f(){l===o&&(l=new Map,o.forEach((P,C)=>{l.set(C,P)}))}function v(){if(h)throw new Error(ac(3));return i}function y(P){if(typeof P!="function")throw new Error(ac(4));if(h)throw new Error(ac(5));let C=!0;f();const k=a++;return l.set(k,P),function(){if(C){if(h)throw new Error(ac(6));C=!1,f(),l.delete(k),o=null}}}function w(P){if(!tL(P))throw new Error(ac(7));if(typeof P.type>"u")throw new Error(ac(8));if(typeof P.type!="string")throw new Error(ac(17));if(h)throw new Error(ac(9));try{h=!0,i=r(i,P)}finally{h=!1}return(o=l).forEach(k=>{k()}),P}function b(P){if(typeof P!="function")throw new Error(ac(10));r=P,w({type:mS.REPLACE})}function A(){const P=y;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(ac(11));function k(){const z=C;z.next&&z.next(v())}return k(),{unsubscribe:P(k)}},[p6](){return this}}}return w({type:mS.INIT}),{dispatch:w,subscribe:y,getState:v,replaceReducer:b,[p6]:A}}function jfe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:mS.INIT})>"u")throw new Error(ac(12));if(typeof n(void 0,{type:mS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ac(13))})}function Vfe(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const l=e[o];typeof t[l]=="function"&&(n[l]=t[l])}const r=Object.keys(n);let i;try{jfe(n)}catch(o){i=o}return function(l={},a){if(i)throw i;let h=!1;const f={};for(let v=0;v<r.length;v++){const y=r[v],w=n[y],b=l[y],A=w(b,a);if(typeof A>"u")throw a&&a.type,new Error(ac(14));f[y]=A,h=h||A!==b}return h=h||r.length!==Object.keys(l).length,h?f:l}}function gS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Gfe(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(ac(15))};const l={getState:i.getState,dispatch:(h,...f)=>o(h,...f)},a=t.map(h=>h(l));return o=gS(...a)(i.dispatch),{...i,dispatch:o}}}function qfe(t){return tL(t)&&"type"in t&&typeof t.type=="string"}var R9=Symbol.for("immer-nothing"),m6=Symbol.for("immer-draftable"),Xh=Symbol.for("immer-state");function rd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var m_=Object.getPrototypeOf;function O0(t){return!!t&&!!t[Xh]}function rm(t){var e;return t?D9(t)||Array.isArray(t)||!!t[m6]||!!((e=t.constructor)!=null&&e[m6])||SE(t)||EE(t):!1}var Hfe=Object.prototype.constructor.toString();function D9(t){if(!t||typeof t!="object")return!1;const e=m_(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Hfe}function vS(t,e){wE(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function wE(t){const e=t[Xh];return e?e.type_:Array.isArray(t)?1:SE(t)?2:EE(t)?3:0}function G3(t,e){return wE(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function L9(t,e,n){const r=wE(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function $fe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function SE(t){return t instanceof Map}function EE(t){return t instanceof Set}function l0(t){return t.copy_||t.base_}function q3(t,e){if(SE(t))return new Map(t);if(EE(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=D9(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Xh];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const l=i[o],a=r[l];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[l]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[l]})}return Object.create(m_(t),r)}else{const r=m_(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function nL(t,e=!1){return TE(t)||O0(t)||!rm(t)||(wE(t)>1&&(t.set=t.add=t.clear=t.delete=Wfe),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>nL(r,!0))),t}function Wfe(){rd(2)}function TE(t){return Object.isFrozen(t)}var Xfe={};function N0(t){const e=Xfe[t];return e||rd(0,t),e}var Wb;function I9(){return Wb}function Zfe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function g6(t,e){e&&(N0("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function H3(t){$3(t),t.drafts_.forEach(Yfe),t.drafts_=null}function $3(t){t===Wb&&(Wb=t.parent_)}function v6(t){return Wb=Zfe(Wb,t)}function Yfe(t){const e=t[Xh];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function y6(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Xh].modified_&&(H3(e),rd(4)),rm(t)&&(t=yS(e,t),e.parent_||_S(e,t)),e.patches_&&N0("Patches").generateReplacementPatches_(n[Xh].base_,t,e.patches_,e.inversePatches_)):t=yS(e,n,[]),H3(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==R9?t:void 0}function yS(t,e,n){if(TE(e))return e;const r=e[Xh];if(!r)return vS(e,(i,o)=>_6(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return _S(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),vS(o,(a,h)=>_6(t,r,i,a,h,n,l)),_S(t,i,!1),n&&t.patches_&&N0("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function _6(t,e,n,r,i,o,l){if(O0(i)){const a=o&&e&&e.type_!==3&&!G3(e.assigned_,r)?o.concat(r):void 0,h=yS(t,i,a);if(L9(n,r,h),O0(h))t.canAutoFreeze_=!1;else return}else l&&n.add(i);if(rm(i)&&!TE(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;yS(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&_S(t,i)}}function _S(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&nL(e,n)}function Kfe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:I9(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=rL;n&&(i=[r],o=Xb);const{revoke:l,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=l,a}var rL={get(t,e){if(e===Xh)return t;const n=l0(t);if(!G3(n,e))return Jfe(t,n,e);const r=n[e];return t.finalized_||!rm(r)?r:r===jA(t.base_,e)?(VA(t),t.copy_[e]=X3(r,t)):r},has(t,e){return e in l0(t)},ownKeys(t){return Reflect.ownKeys(l0(t))},set(t,e,n){const r=O9(l0(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=jA(l0(t),e),o=i==null?void 0:i[Xh];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if($fe(n,i)&&(n!==void 0||G3(t.base_,e)))return!0;VA(t),W3(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return jA(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,VA(t),W3(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=l0(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){rd(11)},getPrototypeOf(t){return m_(t.base_)},setPrototypeOf(){rd(12)}},Xb={};vS(rL,(t,e)=>{Xb[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Xb.deleteProperty=function(t,e){return Xb.set.call(this,t,e,void 0)};Xb.set=function(t,e,n){return rL.set.call(this,t[0],e,n,t[0])};function jA(t,e){const n=t[Xh];return(n?l0(n):t)[e]}function Jfe(t,e,n){var i;const r=O9(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function O9(t,e){if(!(e in t))return;let n=m_(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=m_(n)}}function W3(t){t.modified_||(t.modified_=!0,t.parent_&&W3(t.parent_))}function VA(t){t.copy_||(t.copy_=q3(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Qfe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const l=this;return function(h=o,...f){return l.produce(h,v=>n.call(this,v,...f))}}typeof n!="function"&&rd(6),r!==void 0&&typeof r!="function"&&rd(7);let i;if(rm(e)){const o=v6(this),l=X3(e,void 0);let a=!0;try{i=n(l),a=!1}finally{a?H3(o):$3(o)}return g6(o,r),y6(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===R9&&(i=void 0),this.autoFreeze_&&nL(i,!0),r){const o=[],l=[];N0("Patches").generateReplacementPatches_(e,i,o,l),r(o,l)}return i}else rd(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(l,...a)=>this.produceWithPatches(l,h=>e(h,...a));let r,i;return[this.produce(e,n,(l,a)=>{r=l,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){rm(t)||rd(8),O0(t)&&(t=ede(t));const e=v6(this),n=X3(t,void 0);return n[Xh].isManual_=!0,$3(e),n}finishDraft(t,e){const n=t&&t[Xh];(!n||!n.isManual_)&&rd(9);const{scope_:r}=n;return g6(r,e),y6(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=N0("Patches").applyPatches_;return O0(t)?r(t,e):this.produce(t,i=>r(i,e))}};function X3(t,e){const n=SE(t)?N0("MapSet").proxyMap_(t,e):EE(t)?N0("MapSet").proxySet_(t,e):Kfe(t,e);return(e?e.scope_:I9()).drafts_.push(n),n}function ede(t){return O0(t)||rd(10,t),N9(t)}function N9(t){if(!rm(t)||TE(t))return t;const e=t[Xh];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=q3(t,e.scope_.immer_.useStrictShallowCopy_)}else n=q3(t,!0);return vS(n,(r,i)=>{L9(n,r,N9(i))}),e&&(e.finalized_=!1),n}var Zh=new Qfe,k9=Zh.produce;Zh.produceWithPatches.bind(Zh);Zh.setAutoFreeze.bind(Zh);Zh.setUseStrictShallowCopy.bind(Zh);Zh.applyPatches.bind(Zh);Zh.createDraft.bind(Zh);Zh.finishDraft.bind(Zh);function F9(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var tde=F9(),nde=F9,rde=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?gS:gS.apply(null,arguments)};function b6(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Kp(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>qfe(r)&&r.type===t,n}var B9=class cb extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,cb.prototype)}static get[Symbol.species](){return cb}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new cb(...e[0].concat(this)):new cb(...e.concat(this))}};function x6(t){return rm(t)?k9(t,()=>{}):t}function w6(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function ide(t){return typeof t=="boolean"}var ade=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let l=new B9;return n&&(ide(n)?l.push(tde):l.push(nde(n.extraArgument))),l},ode="RTK_autoBatch",S6=t=>e=>{setTimeout(e,t)},sde=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,l=!1;const a=new Set,h=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:S6(10):t.type==="callback"?t.queueNotification:S6(t.timeout),f=()=>{l=!1,o&&(o=!1,a.forEach(v=>v()))};return Object.assign({},r,{subscribe(v){const y=()=>i&&v(),w=r.subscribe(y);return a.add(v),()=>{w(),a.delete(v)}},dispatch(v){var y;try{return i=!((y=v==null?void 0:v.meta)!=null&&y[ode]),o=!i,o&&(l||(l=!0,h(f))),r.dispatch(v)}finally{i=!0}}})},lde=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new B9(t);return r&&i.push(sde(typeof r=="object"?r:void 0)),i};function ude(t){const e=ade(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(tL(n))a=Vfe(n);else throw new Error(Kp(1));let h;typeof r=="function"?h=r(e):h=e();let f=gS;i&&(f=rde({trace:!1,...typeof i=="object"&&i}));const v=Gfe(...h),y=lde(v);let w=typeof l=="function"?l(y):y();const b=f(...w);return P9(a,o,b)}function z9(t){const e={},n=[];let r;const i={addCase(o,l){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(Kp(28));if(a in e)throw new Error(Kp(29));return e[a]=l,i},addMatcher(o,l){return n.push({matcher:o,reducer:l}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function cde(t){return typeof t=="function"}function hde(t,e){let[n,r,i]=z9(e),o;if(cde(t))o=()=>x6(t());else{const a=x6(t);o=()=>a}function l(a=o(),h){let f=[n[h.type],...r.filter(({matcher:v})=>v(h)).map(({reducer:v})=>v)];return f.filter(v=>!!v).length===0&&(f=[i]),f.reduce((v,y)=>{if(y)if(O0(v)){const b=y(v,h);return b===void 0?v:b}else{if(rm(v))return k9(v,w=>y(w,h));{const w=y(v,h);if(w===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return w}}return v},a)}return l.getInitialState=o,l}var fde=Symbol.for("rtk-slice-createasyncthunk");function dde(t,e){return`${t}/${e}`}function pde({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[fde];return function(i){const{name:o,reducerPath:l=o}=i;if(!o)throw new Error(Kp(11));const a=(typeof i.reducers=="function"?i.reducers(vde()):i.reducers)||{},h=Object.keys(a),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(B,z){const q=typeof B=="string"?B:B.type;if(!q)throw new Error(Kp(12));if(q in f.sliceCaseReducersByType)throw new Error(Kp(13));return f.sliceCaseReducersByType[q]=z,v},addMatcher(B,z){return f.sliceMatchers.push({matcher:B,reducer:z}),v},exposeAction(B,z){return f.actionCreators[B]=z,v},exposeCaseReducer(B,z){return f.sliceCaseReducersByName[B]=z,v}};h.forEach(B=>{const z=a[B],q={reducerName:B,type:dde(o,B),createNotation:typeof i.reducers=="function"};_de(z)?xde(q,z,v,e):yde(q,z,v)});function y(){const[B={},z=[],q=void 0]=typeof i.extraReducers=="function"?z9(i.extraReducers):[i.extraReducers],V={...B,...f.sliceCaseReducersByType};return hde(i.initialState,W=>{for(let Y in V)W.addCase(Y,V[Y]);for(let Y of f.sliceMatchers)W.addMatcher(Y.matcher,Y.reducer);for(let Y of z)W.addMatcher(Y.matcher,Y.reducer);q&&W.addDefaultCase(q)})}const w=B=>B,b=new Map;let A;function M(B,z){return A||(A=y()),A(B,z)}function P(){return A||(A=y()),A.getInitialState()}function C(B,z=!1){function q(W){let Y=W[B];return typeof Y>"u"&&z&&(Y=P()),Y}function V(W=w){const Y=w6(b,z,()=>new WeakMap);return w6(Y,W,()=>{const Z={};for(const[j,K]of Object.entries(i.selectors??{}))Z[j]=mde(K,W,P,z);return Z})}return{reducerPath:B,getSelectors:V,get selectors(){return V(q)},selectSlice:q}}const k={name:o,reducer:M,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:P,...C(l),injectInto(B,{reducerPath:z,...q}={}){const V=z??l;return B.inject({reducerPath:V,reducer:M},q),{...k,...C(V,!0)}}};return k}}function mde(t,e,n,r){function i(o,...l){let a=e(o);return typeof a>"u"&&r&&(a=n()),t(a,...l)}return i.unwrapped=t,i}var gde=pde();function vde(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function yde({type:t,reducerName:e,createNotation:n},r,i){let o,l;if("reducer"in r){if(n&&!bde(r))throw new Error(Kp(17));o=r.reducer,l=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,l?b6(t,l):b6(t))}function _de(t){return t._reducerDefinitionType==="asyncThunk"}function bde(t){return t._reducerDefinitionType==="reducerWithPrepare"}function xde({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Kp(18));const{payloadCreator:o,fulfilled:l,pending:a,rejected:h,settled:f,options:v}=n,y=i(t,o,v);r.exposeAction(e,y),l&&r.addCase(y.fulfilled,l),a&&r.addCase(y.pending,a),h&&r.addCase(y.rejected,h),f&&r.addMatcher(y.settled,f),r.exposeCaseReducer(e,{fulfilled:l||R2,pending:a||R2,rejected:h||R2,settled:f||R2})}function R2(){}function Kp(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Kc=function(){return Kc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Kc.apply(this,arguments)};function wde(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function a(v){try{f(r.next(v))}catch(y){l(y)}}function h(v){try{f(r.throw(v))}catch(y){l(y)}}function f(v){v.done?o(v.value):i(v.value).then(a,h)}f((r=r.apply(t,[])).next())})}function Sde(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function a(f){return function(v){return h([f,v])}}function h(f){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){n.label=f[1];break}if(f[0]===6&&n.label<o[1]){n.label=o[1],o=f;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(f);break}o[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(v){f=[6,v],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Jm(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Ede=function(){function t(e){var n=this,r=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[],addsource:[],addlayer:[]},this.wrapper={on:function(h,f,v,y){if(r.eventHandlers[h]){typeof v=="string"&&(y=v,v={}),r.eventHandlers[h].push({handler:f,options:v});var w=[h,f];y&&typeof y=="string"&&(r.initRegisteredElements(y),r.registeredElements[y].wrapperEvents.push(w))}},off:function(h,f){r.eventHandlers[h]&&(r.eventHandlers[h]=r.eventHandlers[h].filter(function(v){return Object.is(v.handler,f)?!1:v}))},fire:function(h,f){if(r.eventHandlers[h]){var v=f||window,y=new Event(h);r.eventHandlers[h].forEach(function(w){w.handler.call(v,y,r,f)})}},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:function(h){if(h)return{id:h.id,type:h.type,visible:h.visibility!=="none",baseLayer:r.baseLayers.indexOf(h.id)!==-1}},buildLayerObjects:function(){return r.map.style._order.map(function(h){return r.wrapper.buildLayerObject(r.map.style._layers[h])}).filter(function(h){return typeof h<"u"})},refreshLayerState:function(){r.wrapper.layerState=r.wrapper.buildLayerObjects(),JSON.stringify(r.wrapper.layerState)!==r.wrapper.layerStateString&&(r.wrapper.fire("layerchange"),r.wrapper.layerStateString=JSON.stringify(r.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:function(){return typeof r.map.getCenter=="function"?{center:function(h){var f=h.lng,v=h.lat;return{lng:f,lat:v}}(r.map.getCenter()),zoom:r.map.getZoom(),bearing:r.map.getBearing(),pitch:r.map.getPitch()}:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0}},refreshViewport:function(){r.wrapper.viewportState=r.wrapper.getViewport()}},this.cancelled=!1,this.initRegisteredElements=function(h,f){(typeof r.registeredElements[h]>"u"||typeof f<"u"&&f)&&(r.registeredElements[h]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=function(h,f,v){return r.map.style&&(v&&typeof v=="string"&&typeof h.id<"u"&&(r.initRegisteredElements(v),r.registeredElements[v].layers.push(h.id),h!=null&&h.source&&typeof(h==null?void 0:h.source)!="string"&&r.registeredElements[v].sources.push(h.id)),r.map.addLayer(h,f),r.wrapper.fire("addlayer",{layer_id:h.id})),n},this.addSource=function(h,f,v){return r.map.style&&(v&&typeof v=="string"&&typeof h<"u"&&(r.initRegisteredElements(v),r.registeredElements[v].sources.push(h)),r.map.addSource(h,f),r.wrapper.fire("addsource",{source_id:h})),n},this.addImage=function(h,f,v,y){return r.map.style?typeof v=="string"&&typeof y>"u"?r.addImage(h,f,void 0,v):(y&&typeof y=="string"&&typeof h<"u"&&(r.initRegisteredElements(y),r.registeredElements[y].images.push(h)),r.map.addImage(h,f,v),n):n},this.on=function(h,f,v,y){var w;if(typeof v=="string"&&typeof f=="function")return r.on.call(r,h,void 0,f,v);var b=[h,f,v];return f||(b=[h,v]),y&&typeof y=="string"&&(r.initRegisteredElements(y),r.registeredElements[y].events.push(b)),(w=r.map).on.apply(w,b),n},this.addControl=function(h,f,v){return v&&typeof v=="string"&&(r.initRegisteredElements(v),r.registeredElements[v].controls.push(h)),r.map.addControl(h,f),n},this.cleanup=function(h){r.map.style&&typeof r.registeredElements[h]<"u"&&(r.registeredElements[h].layers.forEach(function(f){r.map.style.getLayer(f)&&r.map.style.removeLayer(f)}),r.registeredElements[h].sources.forEach(function(f){r.map.style.getSource(f)&&r.map.style.removeSource(f)}),r.registeredElements[h].images.forEach(function(f){r.map.hasImage(f)&&r.map.style.removeImage(f)}),r.registeredElements[h].events.forEach(function(f){var v;(v=r.map).off.apply(v,f)}),r.registeredElements[h].controls.forEach(function(f){r.map.removeControl(f)}),r.registeredElements[h].wrapperEvents.forEach(function(f){var v;(v=r.wrapper).off.apply(v,f)}),r.initRegisteredElements(h,!0))};var i=["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"];i.forEach(function(h){n[h]=function(){for(var f,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];return r.map&&r.map.style&&typeof r.map.style[h]=="function"&&(f=r.map.style)[h].apply(f,v),r.map._update?r.map._update(!0):void 0}});var o=["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"];o.forEach(function(h){n[h]=function(){for(var f,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];return r.map&&r.map.style?(f=r.map.style)[h].apply(f,v):!1}}),this.addNativeMaplibreFunctionsAndProps=function(){Object.getOwnPropertyNames(Object.getPrototypeOf(n.map)).forEach(function(h){typeof n[h]>"u"&&(n[h]=function(){for(var f,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];return(f=r.map)[h].apply(f,v)})}),Object.keys(n.map).forEach(function(h){typeof n[h]>"u"&&(n[h]=r.map[h])})};var l=["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"];l.forEach(function(h){n[h]=function(){for(var f,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];if(typeof r.map[h]=="function")return(f=r.map[h]).call.apply(f,Jm([r.map],v,!1))}});var a=function(){return wde(n,void 0,void 0,function(){return Sde(this,function(h){switch(h.label){case 0:return typeof e.mapOptions.style=="string"&&e.mapOptions.style.indexOf("mapbox://")===-1?[4,fetch(e.mapOptions.style).then(function(f){if(f.ok)return f.json();throw new Error("error loading map style.json")}).then(function(f){f.layers.forEach(function(v){r.baseLayers.push(v.id),!r.firstSymbolLayer&&v.type==="symbol"&&(r.firstSymbolLayer=v.id)}),r.styleJson=f,e.mapOptions.style=f}).catch(function(f){console.log(f)})]:[3,2];case 1:h.sent(),h.label=2;case 2:return r.map=new LX.Map(e.mapOptions),r.addNativeMaplibreFunctionsAndProps(),r.wrapper.refreshViewport(),r.wrapper.fire("viewportchange"),r.map.on("load",function(){r.addNativeMaplibreFunctionsAndProps()}),r.map.on("move",function(){r.wrapper.viewportState=r.wrapper.getViewport(),r.wrapper.fire("viewportchange")}),r.map.on("idle",function(){r.wrapper.refreshLayerState()}),r.map.on("data",function(){r.wrapper.refreshLayerState()}),typeof e.onReady=="function"&&e.onReady(r.map,r),[2]}})})};a()}return t}(),Tde=T_({palette:{mode:"light"}}),Mde=T_({palette:{mode:"dark"}}),Ade=function(t){return Kc(Kc({},t==="light"?Tde:Mde),{palette:Kc({mode:t},t==="dark"?{primary:{main:"#009EE0"},secondary:{main:"#747577"},background:{paper:"#313131"},text:{primary:"#FFF",contrast:"#000"},topToolbar:{barColor:"#000"},navigation:{navColor:"#313131",navHover:"#747577"},GPS:{GPSActiveColor:"#fff",GPSInactiveColor:"#fff",GPSActiveBackgroundColor:"#747577"},compass:{compColor:"#313131",compHover:"#747577",compStroke:"#d3dce1",compNorth:"#cf003f",compSouth:"#d3dcf0"}}:{primary:{main:"#009EE0"},secondary:{main:"#747577"},text:{primary:"#000",contrast:"#fff"},topToolbar:{barColor:"#fff"},navigation:{navColor:"#fff",navHover:"#f5f5f5"},GPS:{GPSActiveColor:"#009EE0",GPSInactiveColor:"#000",GPSActiveBackgroundColor:"#fff"},compass:{compColor:"#fff",compHover:"#f5f5f5",compStroke:"#009ee0",compNorth:"#cf003f",compSouth:"#d3dcf0"}})})},Cde=function(t){var e,n=Ade(["light","dark"].includes(t)?t:"light");return T_(n,{components:{MuiTypography:{styleOverrides:{root:{}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:n.palette.topToolbar.barColor}}},MuiButton:{variants:[{props:{variant:"navtools"},style:(e={minWidth:"20px",minHeight:"20px",fontWeight:600},e[n.breakpoints.down("md")]={width:"50px",height:"50px",fontSize:"1.4em"},e[n.breakpoints.up("md")]={width:"30px",height:"30px",fontSize:"1.2em"},e.color=n.palette.text.primary,e.backgroundColor=n.palette.navigation.navColor,e.borderRadius="23%",e.margin="0.15px",e.marginTop="4px",e[":hover"]={backgroundColor:n.palette.navigation.navHover},e)}]},MuiListItemText:{styleOverrides:{primary:function(r){var i=r.ownerState;return(i==null?void 0:i.variant)==="layerlist"?{fontSize:"0.9rem"}:{}},secondary:function(r){var i=r.ownerState;return(i==null?void 0:i.variant)==="layerlist"?{fontSize:"0.7rem"}:{}}}}}})},Pde={sourceOptions_tiles:["https://wms.wheregroup.com/tileserver/tile/world-0-14/{z}/{x}/{y}.pbf"]},Rde=bt.createContext({});function Dde(t){var e=bt.useState([]),n=e[0],r=e[1],i=bt.useState([]),o=i[0],l=i[1],a=bt.useState([]),h=a[0],f=a[1],v=bt.useState(Pde.sourceOptions_tiles[0]),y=v[0],w=v[1],b=Et.useMemo(function(){return{layerId:"openmaptiles",sourceOptions:{type:"vector",tiles:[y]}}},[y]),A=function(B){if(B){var z=[],q=[];B.layers.forEach(function(V,W){V.type==="symbol"?q.push(V):(W===0&&(V.id=B.name||"background"),z.push(V))}),l(z),f(q)}};Et.useEffect(function(){if(n.filter(function(z){return!(z!=null&&z.id)}).length){var B=Jm([],n,!0);B.forEach(function(z){z!=null&&z.id||(z.id=gR())}),r(B)}},[n]);var M=Et.useCallback(function(B,z){var q,V=(q=n==null?void 0:n.filter)===null||q===void 0?void 0:q.call(n,function(K){return K.id===B});if(V.length>0){var W=Jm([],n,!0),Y=V[0],Z=n.indexOf(Y),j=z(Z);j>=0&&j<=n.length-1&&(W.splice(Z,1),W.splice(j,0,Y),r(W))}},[n]),P=Et.useCallback(function(B){M(B,function(z){return z+1})},[M]),C=Et.useCallback(function(B){M(B,function(z){return z-1})},[M]),k={layers:n,setLayers:r,backgroundLayers:o,setBackgroundLayers:l,symbolLayers:h,setSymbolLayers:f,updateStyle:A,vtLayerConfig:b,tileUrl:y,setTileUrl:w,moveUp:C,moveDown:P,moveLayer:M};return bt.createElement(Rde.Provider,{value:k},t.children)}var ME=bt.createContext({}),Lde=function(t){var e=t.children,n=Et.useState(void 0),r=n[0],i=n[1],o=Et.useState([]),l=o[0],a=o[1],h=Et.useRef([]),f=Et.useRef({}),v=function(b){if(b){typeof f.current[b]<"u"&&delete f.current[b];var A=h.current.indexOf(b);A>-1&&h.current.splice(A,1),a(Jm([],h.current,!0)),h.current.length===0&&r&&i(void 0)}else v("anonymous_map")},y=function(b){if(i(b),l.length===0){var A="anonymous_map";a(Jm(Jm([],l,!0),[A],!1)),f.current[A]=b}},w={map:r,setMap:y,maps:f.current,mapIds:l,registerMap:function(b,A){b&&A&&(f.current[b]=A,h.current.push(b),a(Jm([],h.current,!0)),(!r||(r==null?void 0:r.cancelled)===!0)&&i(A))},removeMap:v,mapExists:function(b){return b&&Object.keys(f.current).indexOf(b)===-1?!1:!(!b&&!r)},getMap:function(b){return b&&l.indexOf(b)!==-1?f.current[b]:!b&&r?r:null}};return bt.createElement(ME.Provider,{value:w},bt.createElement(Dde,null,bt.createElement(SH,{theme:Cde("light")},e)))},Mw={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",layers:[{id:"_background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}}},U9=function(t){var e,n,r=Et.useRef(null),i=Et.useRef(null),o=Et.useContext(ME),l=Et.useRef(t.mapId),a=Et.useRef(!1),h=Et.useRef((e=t.options)===null||e===void 0?void 0:e.style);return Et.useEffect(function(){var f=l.current;return function(){var v,y;a.current=!1,o.removeMap(f),r.current&&((y=(v=r.current.map)===null||v===void 0?void 0:v.remove)===null||y===void 0||y.call(v),r.current.cancelled=!0,r.current=null)}},[]),Et.useEffect(function(){var f,v;a.current||i.current&&(a.current=!0,r.current=new Ede({mapOptions:Kc(Kc(Kc({style:""},t.options),!((f=t==null?void 0:t.options)===null||f===void 0)&&f.style?{}:{style:(v=Mw==null?void 0:Mw.options)===null||v===void 0?void 0:v.style}),{container:i.current}),onReady:function(y,w){y.once("load",function(){w!=null&&w.cancelled?y.remove():(window._map=y,t.mapId?o.registerMap(t.mapId,w):o.setMap(w))})}}))},[t.options,t.mapId]),Et.useEffect(function(){var f,v;!((f=r.current)===null||f===void 0)&&f.map&&(!((v=t==null?void 0:t.options)===null||v===void 0)&&v.style)&&h.current!==t.options.style&&(h.current=t.options.style,r.current.map.setStyle(t.options.style))},[(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.style]),bt.createElement("div",{ref:i,className:"mapContainer",style:t.style})};U9.defaultProps=Mw;function iL(t){var e=Et.useContext(ME),n=Et.useRef(!1),r=Et.useRef(null),i=Et.useState(),o=i[0],l=i[1],a=Et.useRef(void 0),h=Et.useState([]),f=h[0],v=h[1],y=Et.useRef(""),w=Et.useRef(gR()),b=Et.useCallback(function(M){var P,C;return!(!((P=t==null?void 0:t.filter)===null||P===void 0)&&P.includeBaseLayers)&&(M!=null&&M.baseLayer)?!1:typeof((C=t.filter)===null||C===void 0?void 0:C.matchLayerIds)<"u"?t.filter.matchLayerIds instanceof RegExp?t.filter.matchLayerIds.test(M.id):M.id.includes(t.filter.matchLayerIds):!0},[t.filter]),A=Et.useCallback(function(){if(r.current){var M=r.current.wrapper.layerState.filter(b),P=JSON.stringify(M);y.current!==P&&(y.current=P,v(M))}},[b]);return Et.useEffect(function(){var M=w.current;return function(){r.current&&(r.current.cleanup(M),r.current=null),n.current=!1}},[]),Et.useEffect(function(){var M,P,C,k;if(!(!e.mapExists(t.mapId)||n.current)){if(n.current=!0,r.current=e.getMap(t.mapId),!r.current){n.current=!1;return}!((M=t==null?void 0:t.watch)===null||M===void 0)&&M.viewport&&(l(r.current.wrapper.viewportState),r.current.wrapper.on("viewportchange",function(){var B,z;a.current!==((B=r.current)===null||B===void 0?void 0:B.wrapper.viewportStateString)&&l((z=r.current)===null||z===void 0?void 0:z.wrapper.viewportState)},w.current)),!((P=t==null?void 0:t.watch)===null||P===void 0)&&P.layers&&(A(),r.current.wrapper.on("layerchange",A,{includeBaseLayers:(C=t==null?void 0:t.filter)===null||C===void 0?void 0:C.includeBaseLayers,matchLayerIds:(k=t==null?void 0:t.filter)===null||k===void 0?void 0:k.matchLayerIds},w.current))}},[e.mapIds,e,t.mapId,A,t]),{layers:f,viewport:o}}iL.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}};function Ide(t){var e=Et.useContext(ME),n=Et.useState({map:void 0,ready:!1}),r=n[0],i=n[1],o=iL({mapId:t==null?void 0:t.mapId,watch:{viewport:!1,layers:!!(t!=null&&t.waitForLayer),sources:!1},filter:{includeBaseLayers:!0}}),l=Et.useRef(null),a=Et.useRef(gR()),h=function(){l.current&&l.current.cleanup(a.current)};return Et.useEffect(function(){return function(){h(),l.current=null}},[]),Et.useEffect(function(){var f;if(l.current&&l.current.cancelled===!0&&(l.current=null,i({map:void 0,ready:!1})),!(l.current||!e.mapExists(t==null?void 0:t.mapId))){if(t!=null&&t.waitForLayer){var v=!1;if((f=o==null?void 0:o.layers)===null||f===void 0||f.forEach(function(y){y.id===(t==null?void 0:t.waitForLayer)&&(v=!0)}),!v)return}l.current=e.getMap(t==null?void 0:t.mapId),i({map:l.current,ready:!0})}},[e.mapIds,o.layers,e,t]),{map:r.map,mapIsReady:r.ready,componentId:a.current,layers:o.layers,cleanup:h}}bt.createContext({});Wr(VS)({marginTop:"15px"});j0(pR)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});j0(mR)({minWidth:"30px"});j0(om)({marginRight:"0px",padding:"0px"});j0(kz)({padding:0,marginRight:"5px"});j0(ZG)(function(t){var e=t.open;return{display:e?"block":"none"}});j0(VS)({marginLeft:"50px"});Wr(rx)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});Wr(gg)({marginLeft:"61px"});Wr(pR)(function(t){return{paddingRight:t?"56px":0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}});Wr(om)({padding:"4px",marginTop:"-3px"});Wr(mR)({minWidth:"30px"});Wr(kz)({padding:0});Wr(om)({padding:"4px",marginTop:"-3px"});Wr(om)({marginLeft:"20px"});bt.createElement(bt.Fragment,null);Wr("div")(function(){return{display:"flex",alignItems:"center"}});Wr(gg)(function(t){var e=t.theme;return{width:30,height:6,backgroundColor:e.palette.text.primary,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}});Wr(gg)(function(t){var e,n=t.theme;return e={zIndex:1e3,cursor:"pointer",transform:"scale(1)"},e[n.breakpoints.down("md")]={transform:"scale(1.6)"},e});Wr(gg)(function(t){var e,n=t.theme;return e={position:"absolute",right:"-10px",top:"-52px",width:"52px",height:"52px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},e[n.breakpoints.down("md")]={right:"0px",top:"-52px"},e.circle={fill:n.palette.compass.compColor,stroke:n.palette.compass.compStroke},e.path={fill:n.palette.compass.compStroke},e["&:hover circle"]={fill:n.palette.compass.compHover},e});Wr(gg)(function(t){var e=t.theme;return{display:"flex",flexDirection:"row","path:nth-of-type(2)":{fill:e.palette.compass.compSouth},"path:nth-of-type(1)":{fill:e.palette.compass.compNorth}}});function Tb(t){"@babel/helpers - typeof";return Tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tb(t)}(function(){var t=/\s*/g,e=/^\s*|\s*$/g,n=/\s+/;function r(V){if(!V||!V.length)return 0;for(var W=0,Y=0;W<V.length;W++)Y=(Y<<5)-Y+V.charCodeAt(W)|0;return Y}function i(V,W){return V.getElementsByTagName(W)}function o(V,W){return V.getAttribute(W)}function l(V,W){return parseFloat(o(V,W))}function a(V,W){var Y=i(V,W);return Y.length?Y[0]:null}function h(V){return V.normalize&&V.normalize(),V}function f(V){for(var W=0,Y=[];W<V.length;W++)Y[W]=parseFloat(V[W]);return Y}function v(V){return V&&h(V),V&&V.textContent||""}function y(V,W){var Y={},Z,j;for(j=0;j<W.length;j++)Z=a(V,W[j]),Z&&(Y[W[j]]=v(Z));return Y}function w(V,W){for(var Y in W)V[Y]=W[Y]}function b(V){return f(V.replace(t,"").split(","))}function A(V){for(var W=V.replace(e,"").split(n),Y=[],Z=0;Z<W.length;Z++)Y.push(b(W[Z]));return Y}function M(V){var W=[l(V,"lon"),l(V,"lat")],Y=a(V,"ele"),Z=a(V,"gpxtpx:hr")||a(V,"hr"),j=a(V,"time"),K;return Y&&(K=parseFloat(v(Y)),isNaN(K)||W.push(K)),{coordinates:W,time:j?v(j):null,heartRate:Z?parseFloat(v(Z)):null}}function P(){return{type:"FeatureCollection",features:[]}}var C;if(typeof XMLSerializer<"u")C=new XMLSerializer;else{var k=(typeof process>"u"?"undefined":Tb(process))==="object"&&!process.browser,B=(typeof Titanium>"u"?"undefined":Tb(Titanium))==="object";if((typeof exports>"u"?"undefined":Tb(exports))==="object"&&(k||B))C=Hse.XMLSerializer;else throw new Error("Unable to initialize serializer")}function z(V){return V.xml!==void 0?V.xml:C.serializeToString(V)}var q={kml:function(W){for(var Y=P(),Z={},j={},K={},re=["Polygon","LineString","Point","Track","gx:Track"],ie=i(W,"Placemark"),se=i(W,"Style"),de=i(W,"StyleMap"),ue=0;ue<se.length;ue++){var Te=r(z(se[ue])).toString(16);Z["#"+o(se[ue],"id")]=Te,j[Te]=se[ue]}for(var pe=0;pe<de.length;pe++){Z["#"+o(de[pe],"id")]=r(z(de[pe])).toString(16);for(var De=i(de[pe],"Pair"),me={},Me=0;Me<De.length;Me++)me[v(a(De[Me],"key"))]=v(a(De[Me],"styleUrl"));K["#"+o(de[pe],"id")]=me}for(var fe=0;fe<ie.length;fe++)Y.features=Y.features.concat(Be(ie[fe]));function ve(Ve){var tt,ht;return Ve=Ve||"",Ve.substr(0,1)==="#"&&(Ve=Ve.substr(1)),(Ve.length===6||Ve.length===3)&&(tt=Ve),Ve.length===8&&(ht=parseInt(Ve.substr(0,2),16)/255,tt="#"+Ve.substr(6,2)+Ve.substr(4,2)+Ve.substr(2,2)),[tt,isNaN(ht)?void 0:ht]}function le(Ve){return f(Ve.split(" "))}function ye(Ve){var tt=i(Ve,"coord"),ht=[],it=[];tt.length===0&&(tt=i(Ve,"gx:coord"));for(var gt=0;gt<tt.length;gt++)ht.push(le(v(tt[gt])));for(var $t=i(Ve,"when"),He=0;He<$t.length;He++)it.push(v($t[He]));return{coords:ht,times:it}}function Se(Ve){var tt,ht,it,gt,$t,He=[],Ct=[];if(a(Ve,"MultiGeometry"))return Se(a(Ve,"MultiGeometry"));if(a(Ve,"MultiTrack"))return Se(a(Ve,"MultiTrack"));if(a(Ve,"gx:MultiTrack"))return Se(a(Ve,"gx:MultiTrack"));for(it=0;it<re.length;it++)if(ht=i(Ve,re[it]),ht){for(gt=0;gt<ht.length;gt++)if(tt=ht[gt],re[it]==="Point")He.push({type:"Point",coordinates:b(v(a(tt,"coordinates")))});else if(re[it]==="LineString")He.push({type:"LineString",coordinates:A(v(a(tt,"coordinates")))});else if(re[it]==="Polygon"){var Xe=i(tt,"LinearRing"),tn=[];for($t=0;$t<Xe.length;$t++)tn.push(A(v(a(Xe[$t],"coordinates"))));He.push({type:"Polygon",coordinates:tn})}else if(re[it]==="Track"||re[it]==="gx:Track"){var Kt=ye(tt);He.push({type:"LineString",coordinates:Kt.coords}),Kt.times.length&&Ct.push(Kt.times)}}return{geoms:He,coordTimes:Ct}}function Be(Ve){var tt=Se(Ve),ht,it={},gt=v(a(Ve,"name")),$t=v(a(Ve,"address")),He=v(a(Ve,"styleUrl")),Ct=v(a(Ve,"description")),Xe=a(Ve,"TimeSpan"),tn=a(Ve,"TimeStamp"),Kt=a(Ve,"ExtendedData"),Jt=a(Ve,"LineStyle"),Ht=a(Ve,"PolyStyle"),$e=a(Ve,"visibility");if(!tt.geoms.length)return[];if(gt&&(it.name=gt),$t&&(it.address=$t),He){He[0]!=="#"&&(He="#"+He),it.styleUrl=He,Z[He]&&(it.styleHash=Z[He]),K[He]&&(it.styleMapHash=K[He],it.styleHash=Z[K[He].normal]);var Ee=j[it.styleHash];if(Ee){Jt||(Jt=a(Ee,"LineStyle")),Ht||(Ht=a(Ee,"PolyStyle"));var _t=a(Ee,"IconStyle");if(_t){var jt=a(_t,"Icon");if(jt){var vt=v(a(jt,"href"));vt&&(it.icon=vt)}}}}if(Ct&&(it.description=Ct),Xe){var Pt=v(a(Xe,"begin")),vn=v(a(Xe,"end"));it.timespan={begin:Pt,end:vn}}if(tn&&(it.timestamp=v(a(tn,"when"))),Jt){var hn=ve(v(a(Jt,"color"))),pn=hn[0],nn=hn[1],Ft=parseFloat(v(a(Jt,"width")));pn&&(it.stroke=pn),isNaN(nn)||(it["stroke-opacity"]=nn),isNaN(Ft)||(it["stroke-width"]=Ft)}if(Ht){var In=ve(v(a(Ht,"color"))),Pn=In[0],ir=In[1],mt=v(a(Ht,"fill")),ge=v(a(Ht,"outline"));Pn&&(it.fill=Pn),isNaN(ir)||(it["fill-opacity"]=ir),mt&&(it["fill-opacity"]=mt==="1"?it["fill-opacity"]||1:0),ge&&(it["stroke-opacity"]=ge==="1"?it["stroke-opacity"]||1:0)}if(Kt){var ke=i(Kt,"Data"),We=i(Kt,"SimpleData");for(ht=0;ht<ke.length;ht++)it[ke[ht].getAttribute("name")]=v(a(ke[ht],"value"));for(ht=0;ht<We.length;ht++)it[We[ht].getAttribute("name")]=v(We[ht])}$e&&(it.visibility=v($e)),tt.coordTimes.length&&(it.coordTimes=tt.coordTimes.length===1?tt.coordTimes[0]:tt.coordTimes);var Ce={type:"Feature",geometry:tt.geoms.length===1?tt.geoms[0]:{type:"GeometryCollection",geometries:tt.geoms},properties:it};return o(Ve,"id")&&(Ce.id=o(Ve,"id")),[Ce]}return Y},gpx:function(W){var Y,Z=i(W,"trk"),j=i(W,"rte"),K=i(W,"wpt"),re=P(),ie;for(Y=0;Y<Z.length;Y++)ie=ue(Z[Y]),ie&&re.features.push(ie);for(Y=0;Y<j.length;Y++)ie=Te(j[Y]),ie&&re.features.push(ie);for(Y=0;Y<K.length;Y++)re.features.push(pe(K[Y]));function se(Me,fe){for(var ve=0;ve<fe;ve++)Me.push(null);return Me}function de(Me,fe){var ve=i(Me,fe),le=[],ye=[],Se=[],Be=ve.length;if(Be<2)return{};for(var Ve=0;Ve<Be;Ve++){var tt=M(ve[Ve]);le.push(tt.coordinates),tt.time&&ye.push(tt.time),(tt.heartRate||Se.length)&&(Se.length||se(Se,Ve),Se.push(tt.heartRate||null))}return{line:le,times:ye,heartRates:Se}}function ue(Me){for(var fe=i(Me,"trkseg"),ve=[],le=[],ye=[],Se,Be=0;Be<fe.length;Be++)if(Se=de(fe[Be],"trkpt"),Se&&(Se.line&&ve.push(Se.line),Se.times&&Se.times.length&&le.push(Se.times),ye.length||Se.heartRates&&Se.heartRates.length)){if(!ye.length)for(var Ve=0;Ve<Be;Ve++)ye.push(se([],ve[Ve].length));Se.heartRates&&Se.heartRates.length?ye.push(Se.heartRates):ye.push(se([],Se.line.length||0))}if(ve.length!==0){var tt=me(Me);return w(tt,De(a(Me,"extensions"))),le.length&&(tt.coordTimes=ve.length===1?le[0]:le),ye.length&&(tt.heartRates=ve.length===1?ye[0]:ye),{type:"Feature",properties:tt,geometry:{type:ve.length===1?"LineString":"MultiLineString",coordinates:ve.length===1?ve[0]:ve}}}}function Te(Me){var fe=de(Me,"rtept");if(fe.line){var ve=me(Me);w(ve,De(a(Me,"extensions")));var le={type:"Feature",properties:ve,geometry:{type:"LineString",coordinates:fe.line}};return le}}function pe(Me){var fe=me(Me);return w(fe,y(Me,["sym"])),{type:"Feature",properties:fe,geometry:{type:"Point",coordinates:M(Me).coordinates}}}function De(Me){var fe={};if(Me){var ve=a(Me,"line");if(ve){var le=v(a(ve,"color")),ye=parseFloat(v(a(ve,"opacity"))),Se=parseFloat(v(a(ve,"width")));le&&(fe.stroke=le),isNaN(ye)||(fe["stroke-opacity"]=ye),isNaN(Se)||(fe["stroke-width"]=Se*96/25.4)}}return fe}function me(Me){var fe=y(Me,["name","cmt","desc","type","time","keywords"]),ve=i(Me,"link");ve.length&&(fe.links=[]);for(var le=0,ye;le<ve.length;le++)ye={href:o(ve[le],"href")},w(ye,y(ve[le],["text","type"])),fe.links.push(ye);return fe}return re}};return q})();var Ode=bt.createContext({});Ode.Provider;var Nde=function(){var t=Object.fromEntries(new URLSearchParams(window.location.search));return t.layers=JSON.parse(t!=null&&t.layers?t.layers:"[]"),t};Nde();Sr.string;Sr.string;var kde={visible:!0,urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:256,height:256,styles:""},attribution:"",sourceOptions:{minZoom:0,maxZoom:20},layerOptions:{minZoom:0,maxZoom:20}};Kc({},kde);Sr.string.isRequired,Sr.shape({layers:Sr.string.isRequired,bbox:Sr.string,format:Sr.string,service:Sr.string,version:Sr.string,request:Sr.string,srs:Sr.string,width:Sr.number,height:Sr.number}),Sr.string,Sr.string,Sr.object,Sr.object,Sr.string,Sr.bool;bt.createElement(zQ,null),bt.createElement(IQ,null),bt.createElement(OQ,null);var Fde=bt.createContext({});Fde.Provider;Sr.node.isRequired;Wr(om)({padding:"4px",marginTop:"-3px",background:"none","&:hover":{background:"none"}});bt.createElement(BQ,null),bt.createElement(kQ,null),bt.createElement(FQ,null),bt.createElement(UQ,null);var k0;function j9(t,e,n){e.forEach(function(r){t(r,n),r.layers&&r.layers.length>0&&j9(t,r.layers,r)})}var Bde={mapConfigs:{}},V9=gde({name:"mapConfig",initialState:Bde,reducers:{setMapConfig:function(t,e){var n=e.payload.mapConfig,r=e.payload.key;t.mapConfigs[r]=n},removeMapConfig:function(t,e){delete t.mapConfigs[e.payload.key]},setLayerInMapConfig:function(t,e){var n=e.payload,r=n.mapConfigKey,i=n.layer,o=t.mapConfigs[r];if(o){for(var l=0;l<o.layers.length;l++)if(o.layers[l].uuid===i.uuid){o.layers[l]=i;break}}},removeLayerFromMapConfig:function(t,e){var n=e.payload,r=n.mapConfigKey,i=n.layerUuid,o=t.mapConfigs[r];if(o){var l=o.layers.findIndex(function(a){return a.uuid===i});l!==-1&&(delete o.layers[l],j9(function(a,h){h&&h.layers&&(h.layers=h.layers.filter(function(f){return f.uuid!==i}))},o.layerOrder))}},updateLayerOrder:function(t,e){var n=e.payload,r=n.mapConfigKey,i=n.newOrder,o=t.mapConfigs[r];o&&(o.layerOrder=i)},setMasterVisible:function(t,e){var n,r=e.payload,i=r.mapConfigKey,o=r.layerId,l=r.masterVisible,a=t.mapConfigs[i];if(a){var h=a.layers.findIndex(function(y){return y.uuid===o});if(h!==-1){var f=a.layers[h];if(f){var v=Jm([],a.layers,!0);f.type==="folder"&&a.layerOrder.forEach(function(y){var w;y.uuid===o&&((w=y.layers)===null||w===void 0||w.forEach(function(b){var A,M=a.layers.findIndex(function(C){return C.uuid===b.uuid}),P=v[M];v[M]=Kc(Kc({},P),{masterVisible:l}),(P==null?void 0:P.type)==="vt"&&(!((A=P==null?void 0:P.config)===null||A===void 0)&&A.layers)&&(P.config.layers=P.config.layers.map(function(C){return Kc(Kc({},C),{masterVisible:l})}))}))}),f.type==="vt"&&(!((n=f==null?void 0:f.config)===null||n===void 0)&&n.layers)&&(f.config.layers=f.config.layers.map(function(y){return Kc(Kc({},y),{masterVisible:l})})),t.mapConfigs[i].layers=v}}}}}});ude({reducer:{mapConfig:V9.reducer}});k0=V9.actions,k0.setMapConfig;k0.removeMapConfig;k0.setLayerInMapConfig;k0.removeLayerFromMapConfig;k0.updateLayerOrder;k0.setMasterVisible;Wr(rx)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});Wr(gg)({marginLeft:"61px"});Wr(om)({padding:"4px",marginTop:"-3px"});Wr(om)({marginLeft:"20px"});Wr(pR)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});Wr(mR)({minWidth:"30px"});Wr(om)({marginRight:"0px",padding:"0px"});Wr(gg)(function(t){var e=t.open;return{display:e?"block":"none"}});Wr(VS)({marginLeft:"50px"});Wr(VS)({marginTop:"15px"});function zde(t){const n=window.getComputedStyle(t,null).getPropertyValue("transform");let r=0;if(n!=="none"){const i=n.split("(")[1].split(")")[0].split(","),o=parseFloat(i[0]),l=parseFloat(i[1]);r=Math.round(Math.atan2(l,o)*(180/Math.PI))}return r<0?r+360:r}function D2(t,e,n){const r=getComputedStyle(t),i=[e[0]-n[0],e[1]-n[1]],o=new DOMMatrixReadOnly(r.transform);return[i[0]*o.a+i[1]*o.c+o.e+n[0],i[0]*o.b+i[1]*o.d+o.f+n[1]]}const E6=10;function L2(t,e){const n=e.unproject(t),r=e.unproject([t[0]+E6,t[1]]),i=n.distanceTo(r);return E6/i}function Ude(t){var v,y,w,b,A;const[e,n]=bt.useState(t.options),r=iL({mapId:t.mapId,watch:{layers:!1,viewport:!0}}),i=Et.useRef(null),o=Et.useRef(null),l=Et.useRef(null),a=Ide({mapId:t.mapId});Et.useEffect(()=>{typeof t.setOptions=="function"&&t.setOptions(e)},[e,t]),Et.useEffect(()=>{var C;if(!((C=r==null?void 0:r.viewport)!=null&&C.zoom)||!a.map)return;const M=Math.round(a.map.map._container.clientWidth/2),P=Math.round(a.map.map._container.clientHeight/2);if(!e.scale){const k=1/L2([M,P],a.map.map);n(B=>({...B,scale:[k,k]}))}if(!e.center){const k=a.map.map.unproject([M,P]);n(B=>({...B,center:[k.lng,k.lat]}))}},[a.map,(v=r.viewport)==null?void 0:v.zoom,e==null?void 0:e.scale,e==null?void 0:e.center]),Et.useEffect(()=>{if(!a.map)return;a.map.map.setPitch(0);const M=a.map.map.getMaxPitch();return a.map.map.setMaxPitch(0),()=>{var P;(P=a.map)==null||P.map.setMaxPitch(M)}},[a.map]);const h=Et.useMemo(()=>e.orientation==="portrait"?[e.width/2,e.height/2]:[e.height/2,e.width/2],[e.orientation,e.width,e.height]),f=Et.useMemo(()=>{var q,V;if(!a.map||!e.scale)return"none";const M=a.map.map.project(e.center),P=M.x,C=M.y,k=e.scale[0]*L2([P,C],a.map.map),B=(q=r==null?void 0:r.viewport)!=null&&q.bearing?(V=r.viewport)==null?void 0:V.bearing:0,z=`translate(${Math.floor(M.x-h[0])}px,${Math.floor(M.y-h[1])}px) rotate(${e.rotate-B}deg) scale(${k},${k})`;return i.current&&(i.current.style.transform=z),z},[a.map,r.viewport,e.scale,e.rotate,e.center,h]);return Et.useEffect(()=>{var M;(M=l.current)==null||M.updateTarget()},[f]),Et.useEffect(()=>{if(!a.map||!(e!=null&&e.center)||!(e!=null&&e.fixedScale)||typeof(e==null?void 0:e.fixedScale)<"u"&&o.current===(e==null?void 0:e.fixedScale))return;o.current=e.fixedScale;const M=WU(e.center),P=e.fixedScale*(e.width/1e3),B=RQ(M,P,90,{units:"meters"}),z=a.map.map.project(M.geometry.coordinates),q=a.map.map.project(B.geometry.coordinates),V=Math.round(q.x-z.x)/e.width*(1/L2([z.x,z.y],a.map.map));n(W=>({...W,scale:[V,V]}))},[a.map,e.width,e.center,e.fixedScale]),Et.useEffect(()=>{var M;if(i.current&&a.map){let P=e.width,C=e.height;e.orientation==="portrait"?(i.current.style.width=e.width+"px",i.current.style.height=e.height+"px"):(i.current.style.width=e.height+"px",i.current.style.height=e.width+"px",P=e.height,C=e.width),(M=l.current)==null||M.updateTarget();const k=a.map.map.unproject(D2(i.current,[0,0],h)),B=a.map.map.unproject(D2(i.current,[P,0],h)),z=a.map.map.unproject(D2(i.current,[0,C],h)),q=a.map.map.unproject(D2(i.current,[P,C],h)),V={type:"Feature",bbox:[k.lng,k.lat,q.lng,q.lat],geometry:{type:"Polygon",coordinates:[[[k.lng,k.lat],[B.lng,B.lat],[q.lng,q.lat],[z.lng,z.lat],[k.lng,k.lat]]]},properties:{bearing:zde(i.current)}};t.geojsonRef.current=V}},[a,f,e==null?void 0:e.orientation,e==null?void 0:e.height,e==null?void 0:e.width,t.geojsonRef,r,h]),(A=(b=(w=(y=a==null?void 0:a.map)==null?void 0:y.map)==null?void 0:w._canvas)==null?void 0:b.parentNode)!=null&&A.parentNode?Y1.createPortal(Ln.jsxs(Ln.Fragment,{children:[Ln.jsx("div",{className:"target",ref:i,style:{transform:f,transformOrigin:"center center"}}),Ln.jsx(TQ,{ref:l,target:i,container:null,origin:!0,keepRatio:!0,draggable:!0,onDrag:M=>{var P;if(a.map){let C=M.transform.split("translate(");C=C[1].split("px)")[0].split("px, ");const k=(P=a.map)==null?void 0:P.map.unproject([parseInt(C[0])+h[0],parseInt(C[1])+h[1]]);n(B=>({...B,center:[k.lng,k.lat]}))}},scalable:!e.fixedScale,onScale:M=>{if(a.map){let P=M.drag.transform.split("scale(");P=P[1].split(")")[0].split(", ");const C=a.map.map.project(e.center),k=C.x,B=C.y,z=parseFloat(P[0])*(1/L2([k,B],a.map.map));n(q=>({...q,scale:[z,z]}))}},rotatable:!0,onRotate:M=>{var P;if(a.map&&r.viewport){const k=M.drag.transform.split("rotate(")[1].split("deg)")[0],B=(P=r==null?void 0:r.viewport)!=null&&P.bearing?r.viewport.bearing:0;n(z=>({...z,rotate:parseFloat(k)+B}))}}})]}),a.map.map._canvas.parentNode.parentElement):Ln.jsx(Ln.Fragment,{})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const aL="174",n_={ROTATE:0,DOLLY:1,PAN:2},qy={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},jde=0,T6=1,Vde=2,G9=1,q9=2,Gp=3,pg=0,vh=1,qp=2,tg=0,r_=1,M6=2,A6=3,C6=4,Gde=5,g0=100,qde=101,Hde=102,$de=103,Wde=104,Xde=200,Zde=201,Yde=202,Kde=203,Z3=204,Y3=205,Jde=206,Qde=207,epe=208,tpe=209,npe=210,rpe=211,ipe=212,ape=213,ope=214,K3=0,J3=1,Q3=2,g_=3,eP=4,tP=5,nP=6,rP=7,oL=0,spe=1,lpe=2,ng=0,upe=1,cpe=2,hpe=3,fpe=4,dpe=5,ppe=6,mpe=7,H9=300,v_=301,y_=302,iP=303,aP=304,AE=306,oP=1e3,x0=1001,sP=1002,qh=1003,gpe=1004,I2=1005,np=1006,GA=1007,w0=1008,im=1009,$9=1010,W9=1011,Zb=1012,sL=1013,F0=1014,$p=1015,vx=1016,lL=1017,uL=1018,__=1020,X9=35902,Z9=1021,Y9=1022,xf=1023,K9=1024,J9=1025,i_=1026,b_=1027,Q9=1028,cL=1029,ej=1030,hL=1031,fL=1033,Aw=33776,Cw=33777,Pw=33778,Rw=33779,lP=35840,uP=35841,cP=35842,hP=35843,fP=36196,dP=37492,pP=37496,mP=37808,gP=37809,vP=37810,yP=37811,_P=37812,bP=37813,xP=37814,wP=37815,SP=37816,EP=37817,TP=37818,MP=37819,AP=37820,CP=37821,Dw=36492,PP=36494,RP=36495,tj=36283,DP=36284,LP=36285,IP=36286,vpe=3200,ype=3201,dL=0,_pe=1,Wm="",zh="srgb",x_="srgb-linear",bS="linear",ko="srgb",Zv=7680,P6=519,bpe=512,xpe=513,wpe=514,nj=515,Spe=516,Epe=517,Tpe=518,Mpe=519,OP=35044,R6="300 es",Wp=2e3,xS=2001;class J0{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,l=i.length;o<l;o++)i[o].call(this,e);e.target=null}}}const Pc=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Lw=Math.PI/180,NP=180/Math.PI;function rg(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Pc[t&255]+Pc[t>>8&255]+Pc[t>>16&255]+Pc[t>>24&255]+"-"+Pc[e&255]+Pc[e>>8&255]+"-"+Pc[e>>16&15|64]+Pc[e>>24&255]+"-"+Pc[n&63|128]+Pc[n>>8&255]+"-"+Pc[n>>16&255]+Pc[n>>24&255]+Pc[r&255]+Pc[r>>8&255]+Pc[r>>16&255]+Pc[r>>24&255]).toLowerCase()}function Na(t,e,n){return Math.max(e,Math.min(n,t))}function Ape(t,e){return(t%e+e)%e}function qA(t,e,n){return(1-n)*t+n*e}function ep(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Fo(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Cpe={DEG2RAD:Lw};class Bi{constructor(e=0,n=0){Bi.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Na(this.x,e.x,n.x),this.y=Na(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Na(this.x,e,n),this.y=Na(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Na(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Na(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,l=this.y-e.y;return this.x=o*r-l*i+e.x,this.y=o*i+l*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class va{constructor(e,n,r,i,o,l,a,h,f){va.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,l,a,h,f)}set(e,n,r,i,o,l,a,h,f){const v=this.elements;return v[0]=e,v[1]=i,v[2]=a,v[3]=n,v[4]=o,v[5]=h,v[6]=r,v[7]=l,v[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,l=r[0],a=r[3],h=r[6],f=r[1],v=r[4],y=r[7],w=r[2],b=r[5],A=r[8],M=i[0],P=i[3],C=i[6],k=i[1],B=i[4],z=i[7],q=i[2],V=i[5],W=i[8];return o[0]=l*M+a*k+h*q,o[3]=l*P+a*B+h*V,o[6]=l*C+a*z+h*W,o[1]=f*M+v*k+y*q,o[4]=f*P+v*B+y*V,o[7]=f*C+v*z+y*W,o[2]=w*M+b*k+A*q,o[5]=w*P+b*B+A*V,o[8]=w*C+b*z+A*W,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],l=e[4],a=e[5],h=e[6],f=e[7],v=e[8];return n*l*v-n*a*f-r*o*v+r*a*h+i*o*f-i*l*h}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],l=e[4],a=e[5],h=e[6],f=e[7],v=e[8],y=v*l-a*f,w=a*h-v*o,b=f*o-l*h,A=n*y+r*w+i*b;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/A;return e[0]=y*M,e[1]=(i*f-v*r)*M,e[2]=(a*r-i*l)*M,e[3]=w*M,e[4]=(v*n-i*h)*M,e[5]=(i*o-a*n)*M,e[6]=b*M,e[7]=(r*h-f*n)*M,e[8]=(l*n-r*o)*M,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,l,a){const h=Math.cos(o),f=Math.sin(o);return this.set(r*h,r*f,-r*(h*l+f*a)+l+e,-i*f,i*h,-i*(-f*l+h*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(HA.makeScale(e,n)),this}rotate(e){return this.premultiply(HA.makeRotation(-e)),this}translate(e,n){return this.premultiply(HA.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const HA=new va;function rj(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function wS(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Ppe(){const t=wS("canvas");return t.style.display="block",t}const D6={};function u0(t){t in D6||(D6[t]=!0,console.warn(t))}function Rpe(t,e,n){return new Promise(function(r,i){function o(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:r()}}setTimeout(o,n)})}function Dpe(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Lpe(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const L6=new va().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),I6=new va().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Ipe(){const t={enabled:!0,workingColorSpace:x_,spaces:{},convert:function(i,o,l){return this.enabled===!1||o===l||!o||!l||(this.spaces[o].transfer===ko&&(i.r=Jp(i.r),i.g=Jp(i.g),i.b=Jp(i.b)),this.spaces[o].primaries!==this.spaces[l].primaries&&(i.applyMatrix3(this.spaces[o].toXYZ),i.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===ko&&(i.r=a_(i.r),i.g=a_(i.g),i.b=a_(i.b))),i},fromWorkingColorSpace:function(i,o){return this.convert(i,this.workingColorSpace,o)},toWorkingColorSpace:function(i,o){return this.convert(i,o,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Wm?bS:this.spaces[i].transfer},getLuminanceCoefficients:function(i,o=this.workingColorSpace){return i.fromArray(this.spaces[o].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,o,l){return i.copy(this.spaces[o].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[x_]:{primaries:e,whitePoint:r,transfer:bS,toXYZ:L6,fromXYZ:I6,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:zh},outputColorSpaceConfig:{drawingBufferColorSpace:zh}},[zh]:{primaries:e,whitePoint:r,transfer:ko,toXYZ:L6,fromXYZ:I6,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:zh}}}),t}const oo=Ipe();function Jp(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function a_(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Yv;class Ope{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Yv===void 0&&(Yv=wS("canvas")),Yv.width=e.width,Yv.height=e.height;const r=Yv.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Yv}return n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=wS("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let l=0;l<o.length;l++)o[l]=Jp(o[l]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Jp(n[r]/255)*255):n[r]=Jp(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Npe=0;class pL{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Npe++}),this.uuid=rg(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let l=0,a=i.length;l<a;l++)i[l].isDataTexture?o.push($A(i[l].image)):o.push($A(i[l]))}else o=$A(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function $A(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Ope.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let kpe=0;class Ic extends J0{constructor(e=Ic.DEFAULT_IMAGE,n=Ic.DEFAULT_MAPPING,r=x0,i=x0,o=np,l=w0,a=xf,h=im,f=Ic.DEFAULT_ANISOTROPY,v=Wm){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:kpe++}),this.uuid=rg(),this.name="",this.source=new pL(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=l,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=h,this.offset=new Bi(0,0),this.repeat=new Bi(1,1),this.center=new Bi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new va,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==H9)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case oP:e.x=e.x-Math.floor(e.x);break;case x0:e.x=e.x<0?0:1;break;case sP:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case oP:e.y=e.y-Math.floor(e.y);break;case x0:e.y=e.y<0?0:1;break;case sP:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ic.DEFAULT_IMAGE=null;Ic.DEFAULT_MAPPING=H9;Ic.DEFAULT_ANISOTROPY=1;class Sl{constructor(e=0,n=0,r=0,i=1){Sl.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,l=e.elements;return this.x=l[0]*n+l[4]*r+l[8]*i+l[12]*o,this.y=l[1]*n+l[5]*r+l[9]*i+l[13]*o,this.z=l[2]*n+l[6]*r+l[10]*i+l[14]*o,this.w=l[3]*n+l[7]*r+l[11]*i+l[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const h=e.elements,f=h[0],v=h[4],y=h[8],w=h[1],b=h[5],A=h[9],M=h[2],P=h[6],C=h[10];if(Math.abs(v-w)<.01&&Math.abs(y-M)<.01&&Math.abs(A-P)<.01){if(Math.abs(v+w)<.1&&Math.abs(y+M)<.1&&Math.abs(A+P)<.1&&Math.abs(f+b+C-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const B=(f+1)/2,z=(b+1)/2,q=(C+1)/2,V=(v+w)/4,W=(y+M)/4,Y=(A+P)/4;return B>z&&B>q?B<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(B),i=V/r,o=W/r):z>q?z<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(z),r=V/i,o=Y/i):q<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(q),r=W/o,i=Y/o),this.set(r,i,o,n),this}let k=Math.sqrt((P-A)*(P-A)+(y-M)*(y-M)+(w-v)*(w-v));return Math.abs(k)<.001&&(k=1),this.x=(P-A)/k,this.y=(y-M)/k,this.z=(w-v)/k,this.w=Math.acos((f+b+C-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Na(this.x,e.x,n.x),this.y=Na(this.y,e.y,n.y),this.z=Na(this.z,e.z,n.z),this.w=Na(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Na(this.x,e,n),this.y=Na(this.y,e,n),this.z=Na(this.z,e,n),this.w=Na(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Na(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Fpe extends J0{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Sl(0,0,e,n),this.scissorTest=!1,this.viewport=new Sl(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:np,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const o=new Ic(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const l=r.count;for(let a=0;a<l;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new pL(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class B0 extends Fpe{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class ij extends Ic{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=qh,this.minFilter=qh,this.wrapR=x0,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Bpe extends Ic{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=qh,this.minFilter=qh,this.wrapR=x0,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class z0{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,l,a){let h=r[i+0],f=r[i+1],v=r[i+2],y=r[i+3];const w=o[l+0],b=o[l+1],A=o[l+2],M=o[l+3];if(a===0){e[n+0]=h,e[n+1]=f,e[n+2]=v,e[n+3]=y;return}if(a===1){e[n+0]=w,e[n+1]=b,e[n+2]=A,e[n+3]=M;return}if(y!==M||h!==w||f!==b||v!==A){let P=1-a;const C=h*w+f*b+v*A+y*M,k=C>=0?1:-1,B=1-C*C;if(B>Number.EPSILON){const q=Math.sqrt(B),V=Math.atan2(q,C*k);P=Math.sin(P*V)/q,a=Math.sin(a*V)/q}const z=a*k;if(h=h*P+w*z,f=f*P+b*z,v=v*P+A*z,y=y*P+M*z,P===1-a){const q=1/Math.sqrt(h*h+f*f+v*v+y*y);h*=q,f*=q,v*=q,y*=q}}e[n]=h,e[n+1]=f,e[n+2]=v,e[n+3]=y}static multiplyQuaternionsFlat(e,n,r,i,o,l){const a=r[i],h=r[i+1],f=r[i+2],v=r[i+3],y=o[l],w=o[l+1],b=o[l+2],A=o[l+3];return e[n]=a*A+v*y+h*b-f*w,e[n+1]=h*A+v*w+f*y-a*b,e[n+2]=f*A+v*b+a*w-h*y,e[n+3]=v*A-a*y-h*w-f*b,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,l=e._order,a=Math.cos,h=Math.sin,f=a(r/2),v=a(i/2),y=a(o/2),w=h(r/2),b=h(i/2),A=h(o/2);switch(l){case"XYZ":this._x=w*v*y+f*b*A,this._y=f*b*y-w*v*A,this._z=f*v*A+w*b*y,this._w=f*v*y-w*b*A;break;case"YXZ":this._x=w*v*y+f*b*A,this._y=f*b*y-w*v*A,this._z=f*v*A-w*b*y,this._w=f*v*y+w*b*A;break;case"ZXY":this._x=w*v*y-f*b*A,this._y=f*b*y+w*v*A,this._z=f*v*A+w*b*y,this._w=f*v*y-w*b*A;break;case"ZYX":this._x=w*v*y-f*b*A,this._y=f*b*y+w*v*A,this._z=f*v*A-w*b*y,this._w=f*v*y+w*b*A;break;case"YZX":this._x=w*v*y+f*b*A,this._y=f*b*y+w*v*A,this._z=f*v*A-w*b*y,this._w=f*v*y-w*b*A;break;case"XZY":this._x=w*v*y-f*b*A,this._y=f*b*y-w*v*A,this._z=f*v*A+w*b*y,this._w=f*v*y+w*b*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],l=n[1],a=n[5],h=n[9],f=n[2],v=n[6],y=n[10],w=r+a+y;if(w>0){const b=.5/Math.sqrt(w+1);this._w=.25/b,this._x=(v-h)*b,this._y=(o-f)*b,this._z=(l-i)*b}else if(r>a&&r>y){const b=2*Math.sqrt(1+r-a-y);this._w=(v-h)/b,this._x=.25*b,this._y=(i+l)/b,this._z=(o+f)/b}else if(a>y){const b=2*Math.sqrt(1+a-r-y);this._w=(o-f)/b,this._x=(i+l)/b,this._y=.25*b,this._z=(h+v)/b}else{const b=2*Math.sqrt(1+y-r-a);this._w=(l-i)/b,this._x=(o+f)/b,this._y=(h+v)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Na(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,l=e._w,a=n._x,h=n._y,f=n._z,v=n._w;return this._x=r*v+l*a+i*f-o*h,this._y=i*v+l*h+o*a-r*f,this._z=o*v+l*f+r*h-i*a,this._w=l*v-r*a-i*h-o*f,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,l=this._w;let a=l*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=l,this._x=r,this._y=i,this._z=o,this;const h=1-a*a;if(h<=Number.EPSILON){const b=1-n;return this._w=b*l+n*this._w,this._x=b*r+n*this._x,this._y=b*i+n*this._y,this._z=b*o+n*this._z,this.normalize(),this}const f=Math.sqrt(h),v=Math.atan2(f,a),y=Math.sin((1-n)*v)/f,w=Math.sin(n*v)/f;return this._w=l*y+this._w*w,this._x=r*y+this._x*w,this._y=i*y+this._y*w,this._z=o*y+this._z*w,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Sn{constructor(e=0,n=0,r=0){Sn.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(O6.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(O6.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,l=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*l,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*l,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*l,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,l=e.y,a=e.z,h=e.w,f=2*(l*i-a*r),v=2*(a*n-o*i),y=2*(o*r-l*n);return this.x=n+h*f+l*y-a*v,this.y=r+h*v+a*f-o*y,this.z=i+h*y+o*v-l*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Na(this.x,e.x,n.x),this.y=Na(this.y,e.y,n.y),this.z=Na(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Na(this.x,e,n),this.y=Na(this.y,e,n),this.z=Na(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Na(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,l=n.x,a=n.y,h=n.z;return this.x=i*h-o*a,this.y=o*l-r*h,this.z=r*a-i*l,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return WA.copy(this).projectOnVector(e),this.sub(WA)}reflect(e){return this.sub(WA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Na(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const WA=new Sn,O6=new z0;class ig{constructor(e=new Sn(1/0,1/0,1/0),n=new Sn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Yf.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Yf.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Yf.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let l=0,a=o.count;l<a;l++)e.isMesh===!0?e.getVertexPosition(l,Yf):Yf.fromBufferAttribute(o,l),Yf.applyMatrix4(e.matrixWorld),this.expandByPoint(Yf);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),O2.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),O2.copy(r.boundingBox)),O2.applyMatrix4(e.matrixWorld),this.union(O2)}const i=e.children;for(let o=0,l=i.length;o<l;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Yf),Yf.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(z1),N2.subVectors(this.max,z1),Kv.subVectors(e.a,z1),Jv.subVectors(e.b,z1),Qv.subVectors(e.c,z1),Bm.subVectors(Jv,Kv),zm.subVectors(Qv,Jv),Qg.subVectors(Kv,Qv);let n=[0,-Bm.z,Bm.y,0,-zm.z,zm.y,0,-Qg.z,Qg.y,Bm.z,0,-Bm.x,zm.z,0,-zm.x,Qg.z,0,-Qg.x,-Bm.y,Bm.x,0,-zm.y,zm.x,0,-Qg.y,Qg.x,0];return!XA(n,Kv,Jv,Qv,N2)||(n=[1,0,0,0,1,0,0,0,1],!XA(n,Kv,Jv,Qv,N2))?!1:(k2.crossVectors(Bm,zm),n=[k2.x,k2.y,k2.z],XA(n,Kv,Jv,Qv,N2))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Yf).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Yf).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Fp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fp),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Fp=[new Sn,new Sn,new Sn,new Sn,new Sn,new Sn,new Sn,new Sn],Yf=new Sn,O2=new ig,Kv=new Sn,Jv=new Sn,Qv=new Sn,Bm=new Sn,zm=new Sn,Qg=new Sn,z1=new Sn,N2=new Sn,k2=new Sn,e0=new Sn;function XA(t,e,n,r,i){for(let o=0,l=t.length-3;o<=l;o+=3){e0.fromArray(t,o);const a=i.x*Math.abs(e0.x)+i.y*Math.abs(e0.y)+i.z*Math.abs(e0.z),h=e.dot(e0),f=n.dot(e0),v=r.dot(e0);if(Math.max(-Math.max(h,f,v),Math.min(h,f,v))>a)return!1}return!0}const zpe=new ig,U1=new Sn,ZA=new Sn;class yx{constructor(e=new Sn,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):zpe.setFromPoints(e).getCenter(r);let i=0;for(let o=0,l=e.length;o<l;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;U1.subVectors(e,this.center);const n=U1.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(U1,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ZA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(U1.copy(e.center).add(ZA)),this.expandByPoint(U1.copy(e.center).sub(ZA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Bp=new Sn,YA=new Sn,F2=new Sn,Um=new Sn,KA=new Sn,B2=new Sn,JA=new Sn;class CE{constructor(e=new Sn,n=new Sn(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Bp)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Bp.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Bp.copy(this.origin).addScaledVector(this.direction,n),Bp.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){YA.copy(e).add(n).multiplyScalar(.5),F2.copy(n).sub(e).normalize(),Um.copy(this.origin).sub(YA);const o=e.distanceTo(n)*.5,l=-this.direction.dot(F2),a=Um.dot(this.direction),h=-Um.dot(F2),f=Um.lengthSq(),v=Math.abs(1-l*l);let y,w,b,A;if(v>0)if(y=l*h-a,w=l*a-h,A=o*v,y>=0)if(w>=-A)if(w<=A){const M=1/v;y*=M,w*=M,b=y*(y+l*w+2*a)+w*(l*y+w+2*h)+f}else w=o,y=Math.max(0,-(l*w+a)),b=-y*y+w*(w+2*h)+f;else w=-o,y=Math.max(0,-(l*w+a)),b=-y*y+w*(w+2*h)+f;else w<=-A?(y=Math.max(0,-(-l*o+a)),w=y>0?-o:Math.min(Math.max(-o,-h),o),b=-y*y+w*(w+2*h)+f):w<=A?(y=0,w=Math.min(Math.max(-o,-h),o),b=w*(w+2*h)+f):(y=Math.max(0,-(l*o+a)),w=y>0?o:Math.min(Math.max(-o,-h),o),b=-y*y+w*(w+2*h)+f);else w=l>0?-o:o,y=Math.max(0,-(l*w+a)),b=-y*y+w*(w+2*h)+f;return r&&r.copy(this.origin).addScaledVector(this.direction,y),i&&i.copy(YA).addScaledVector(F2,w),b}intersectSphere(e,n){Bp.subVectors(e.center,this.origin);const r=Bp.dot(this.direction),i=Bp.dot(Bp)-r*r,o=e.radius*e.radius;if(i>o)return null;const l=Math.sqrt(o-i),a=r-l,h=r+l;return h<0?null:a<0?this.at(h,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,l,a,h;const f=1/this.direction.x,v=1/this.direction.y,y=1/this.direction.z,w=this.origin;return f>=0?(r=(e.min.x-w.x)*f,i=(e.max.x-w.x)*f):(r=(e.max.x-w.x)*f,i=(e.min.x-w.x)*f),v>=0?(o=(e.min.y-w.y)*v,l=(e.max.y-w.y)*v):(o=(e.max.y-w.y)*v,l=(e.min.y-w.y)*v),r>l||o>i||((o>r||isNaN(r))&&(r=o),(l<i||isNaN(i))&&(i=l),y>=0?(a=(e.min.z-w.z)*y,h=(e.max.z-w.z)*y):(a=(e.max.z-w.z)*y,h=(e.min.z-w.z)*y),r>h||a>i)||((a>r||r!==r)&&(r=a),(h<i||i!==i)&&(i=h),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Bp)!==null}intersectTriangle(e,n,r,i,o){KA.subVectors(n,e),B2.subVectors(r,e),JA.crossVectors(KA,B2);let l=this.direction.dot(JA),a;if(l>0){if(i)return null;a=1}else if(l<0)a=-1,l=-l;else return null;Um.subVectors(this.origin,e);const h=a*this.direction.dot(B2.crossVectors(Um,B2));if(h<0)return null;const f=a*this.direction.dot(KA.cross(Um));if(f<0||h+f>l)return null;const v=-a*Um.dot(JA);return v<0?null:this.at(v/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ws{constructor(e,n,r,i,o,l,a,h,f,v,y,w,b,A,M,P){ws.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,l,a,h,f,v,y,w,b,A,M,P)}set(e,n,r,i,o,l,a,h,f,v,y,w,b,A,M,P){const C=this.elements;return C[0]=e,C[4]=n,C[8]=r,C[12]=i,C[1]=o,C[5]=l,C[9]=a,C[13]=h,C[2]=f,C[6]=v,C[10]=y,C[14]=w,C[3]=b,C[7]=A,C[11]=M,C[15]=P,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ws().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/ey.setFromMatrixColumn(e,0).length(),o=1/ey.setFromMatrixColumn(e,1).length(),l=1/ey.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*l,n[9]=r[9]*l,n[10]=r[10]*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,l=Math.cos(r),a=Math.sin(r),h=Math.cos(i),f=Math.sin(i),v=Math.cos(o),y=Math.sin(o);if(e.order==="XYZ"){const w=l*v,b=l*y,A=a*v,M=a*y;n[0]=h*v,n[4]=-h*y,n[8]=f,n[1]=b+A*f,n[5]=w-M*f,n[9]=-a*h,n[2]=M-w*f,n[6]=A+b*f,n[10]=l*h}else if(e.order==="YXZ"){const w=h*v,b=h*y,A=f*v,M=f*y;n[0]=w+M*a,n[4]=A*a-b,n[8]=l*f,n[1]=l*y,n[5]=l*v,n[9]=-a,n[2]=b*a-A,n[6]=M+w*a,n[10]=l*h}else if(e.order==="ZXY"){const w=h*v,b=h*y,A=f*v,M=f*y;n[0]=w-M*a,n[4]=-l*y,n[8]=A+b*a,n[1]=b+A*a,n[5]=l*v,n[9]=M-w*a,n[2]=-l*f,n[6]=a,n[10]=l*h}else if(e.order==="ZYX"){const w=l*v,b=l*y,A=a*v,M=a*y;n[0]=h*v,n[4]=A*f-b,n[8]=w*f+M,n[1]=h*y,n[5]=M*f+w,n[9]=b*f-A,n[2]=-f,n[6]=a*h,n[10]=l*h}else if(e.order==="YZX"){const w=l*h,b=l*f,A=a*h,M=a*f;n[0]=h*v,n[4]=M-w*y,n[8]=A*y+b,n[1]=y,n[5]=l*v,n[9]=-a*v,n[2]=-f*v,n[6]=b*y+A,n[10]=w-M*y}else if(e.order==="XZY"){const w=l*h,b=l*f,A=a*h,M=a*f;n[0]=h*v,n[4]=-y,n[8]=f*v,n[1]=w*y+M,n[5]=l*v,n[9]=b*y-A,n[2]=A*y-b,n[6]=a*v,n[10]=M*y+w}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Upe,e,jpe)}lookAt(e,n,r){const i=this.elements;return kh.subVectors(e,n),kh.lengthSq()===0&&(kh.z=1),kh.normalize(),jm.crossVectors(r,kh),jm.lengthSq()===0&&(Math.abs(r.z)===1?kh.x+=1e-4:kh.z+=1e-4,kh.normalize(),jm.crossVectors(r,kh)),jm.normalize(),z2.crossVectors(kh,jm),i[0]=jm.x,i[4]=z2.x,i[8]=kh.x,i[1]=jm.y,i[5]=z2.y,i[9]=kh.y,i[2]=jm.z,i[6]=z2.z,i[10]=kh.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,l=r[0],a=r[4],h=r[8],f=r[12],v=r[1],y=r[5],w=r[9],b=r[13],A=r[2],M=r[6],P=r[10],C=r[14],k=r[3],B=r[7],z=r[11],q=r[15],V=i[0],W=i[4],Y=i[8],Z=i[12],j=i[1],K=i[5],re=i[9],ie=i[13],se=i[2],de=i[6],ue=i[10],Te=i[14],pe=i[3],De=i[7],me=i[11],Me=i[15];return o[0]=l*V+a*j+h*se+f*pe,o[4]=l*W+a*K+h*de+f*De,o[8]=l*Y+a*re+h*ue+f*me,o[12]=l*Z+a*ie+h*Te+f*Me,o[1]=v*V+y*j+w*se+b*pe,o[5]=v*W+y*K+w*de+b*De,o[9]=v*Y+y*re+w*ue+b*me,o[13]=v*Z+y*ie+w*Te+b*Me,o[2]=A*V+M*j+P*se+C*pe,o[6]=A*W+M*K+P*de+C*De,o[10]=A*Y+M*re+P*ue+C*me,o[14]=A*Z+M*ie+P*Te+C*Me,o[3]=k*V+B*j+z*se+q*pe,o[7]=k*W+B*K+z*de+q*De,o[11]=k*Y+B*re+z*ue+q*me,o[15]=k*Z+B*ie+z*Te+q*Me,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],l=e[1],a=e[5],h=e[9],f=e[13],v=e[2],y=e[6],w=e[10],b=e[14],A=e[3],M=e[7],P=e[11],C=e[15];return A*(+o*h*y-i*f*y-o*a*w+r*f*w+i*a*b-r*h*b)+M*(+n*h*b-n*f*w+o*l*w-i*l*b+i*f*v-o*h*v)+P*(+n*f*y-n*a*b-o*l*y+r*l*b+o*a*v-r*f*v)+C*(-i*a*v-n*h*y+n*a*w+i*l*y-r*l*w+r*h*v)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],l=e[4],a=e[5],h=e[6],f=e[7],v=e[8],y=e[9],w=e[10],b=e[11],A=e[12],M=e[13],P=e[14],C=e[15],k=y*P*f-M*w*f+M*h*b-a*P*b-y*h*C+a*w*C,B=A*w*f-v*P*f-A*h*b+l*P*b+v*h*C-l*w*C,z=v*M*f-A*y*f+A*a*b-l*M*b-v*a*C+l*y*C,q=A*y*h-v*M*h-A*a*w+l*M*w+v*a*P-l*y*P,V=n*k+r*B+i*z+o*q;if(V===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const W=1/V;return e[0]=k*W,e[1]=(M*w*o-y*P*o-M*i*b+r*P*b+y*i*C-r*w*C)*W,e[2]=(a*P*o-M*h*o+M*i*f-r*P*f-a*i*C+r*h*C)*W,e[3]=(y*h*o-a*w*o-y*i*f+r*w*f+a*i*b-r*h*b)*W,e[4]=B*W,e[5]=(v*P*o-A*w*o+A*i*b-n*P*b-v*i*C+n*w*C)*W,e[6]=(A*h*o-l*P*o-A*i*f+n*P*f+l*i*C-n*h*C)*W,e[7]=(l*w*o-v*h*o+v*i*f-n*w*f-l*i*b+n*h*b)*W,e[8]=z*W,e[9]=(A*y*o-v*M*o-A*r*b+n*M*b+v*r*C-n*y*C)*W,e[10]=(l*M*o-A*a*o+A*r*f-n*M*f-l*r*C+n*a*C)*W,e[11]=(v*a*o-l*y*o-v*r*f+n*y*f+l*r*b-n*a*b)*W,e[12]=q*W,e[13]=(v*M*i-A*y*i+A*r*w-n*M*w-v*r*P+n*y*P)*W,e[14]=(A*a*i-l*M*i-A*r*h+n*M*h+l*r*P-n*a*P)*W,e[15]=(l*y*i-v*a*i+v*r*h-n*y*h-l*r*w+n*a*w)*W,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,l=e.x,a=e.y,h=e.z,f=o*l,v=o*a;return this.set(f*l+r,f*a-i*h,f*h+i*a,0,f*a+i*h,v*a+r,v*h-i*l,0,f*h-i*a,v*h+i*l,o*h*h+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,l){return this.set(1,r,o,0,e,1,l,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,l=n._y,a=n._z,h=n._w,f=o+o,v=l+l,y=a+a,w=o*f,b=o*v,A=o*y,M=l*v,P=l*y,C=a*y,k=h*f,B=h*v,z=h*y,q=r.x,V=r.y,W=r.z;return i[0]=(1-(M+C))*q,i[1]=(b+z)*q,i[2]=(A-B)*q,i[3]=0,i[4]=(b-z)*V,i[5]=(1-(w+C))*V,i[6]=(P+k)*V,i[7]=0,i[8]=(A+B)*W,i[9]=(P-k)*W,i[10]=(1-(w+M))*W,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=ey.set(i[0],i[1],i[2]).length();const l=ey.set(i[4],i[5],i[6]).length(),a=ey.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Kf.copy(this);const f=1/o,v=1/l,y=1/a;return Kf.elements[0]*=f,Kf.elements[1]*=f,Kf.elements[2]*=f,Kf.elements[4]*=v,Kf.elements[5]*=v,Kf.elements[6]*=v,Kf.elements[8]*=y,Kf.elements[9]*=y,Kf.elements[10]*=y,n.setFromRotationMatrix(Kf),r.x=o,r.y=l,r.z=a,this}makePerspective(e,n,r,i,o,l,a=Wp){const h=this.elements,f=2*o/(n-e),v=2*o/(r-i),y=(n+e)/(n-e),w=(r+i)/(r-i);let b,A;if(a===Wp)b=-(l+o)/(l-o),A=-2*l*o/(l-o);else if(a===xS)b=-l/(l-o),A=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return h[0]=f,h[4]=0,h[8]=y,h[12]=0,h[1]=0,h[5]=v,h[9]=w,h[13]=0,h[2]=0,h[6]=0,h[10]=b,h[14]=A,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,n,r,i,o,l,a=Wp){const h=this.elements,f=1/(n-e),v=1/(r-i),y=1/(l-o),w=(n+e)*f,b=(r+i)*v;let A,M;if(a===Wp)A=(l+o)*y,M=-2*y;else if(a===xS)A=o*y,M=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return h[0]=2*f,h[4]=0,h[8]=0,h[12]=-w,h[1]=0,h[5]=2*v,h[9]=0,h[13]=-b,h[2]=0,h[6]=0,h[10]=M,h[14]=-A,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const ey=new Sn,Kf=new ws,Upe=new Sn(0,0,0),jpe=new Sn(1,1,1),jm=new Sn,z2=new Sn,kh=new Sn,N6=new ws,k6=new z0;class fd{constructor(e=0,n=0,r=0,i=fd.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],l=i[4],a=i[8],h=i[1],f=i[5],v=i[9],y=i[2],w=i[6],b=i[10];switch(n){case"XYZ":this._y=Math.asin(Na(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-v,b),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(w,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Na(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(a,b),this._z=Math.atan2(h,f)):(this._y=Math.atan2(-y,o),this._z=0);break;case"ZXY":this._x=Math.asin(Na(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(-y,b),this._z=Math.atan2(-l,f)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Na(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(w,b),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,f));break;case"YZX":this._z=Math.asin(Na(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-v,f),this._y=Math.atan2(-y,o)):(this._x=0,this._y=Math.atan2(a,b));break;case"XZY":this._z=Math.asin(-Na(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(w,f),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-v,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return N6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(N6,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return k6.setFromEuler(this),this.setFromQuaternion(k6,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}fd.DEFAULT_ORDER="XYZ";class aj{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Vpe=0;const F6=new Sn,ty=new z0,zp=new ws,U2=new Sn,j1=new Sn,Gpe=new Sn,qpe=new z0,B6=new Sn(1,0,0),z6=new Sn(0,1,0),U6=new Sn(0,0,1),j6={type:"added"},Hpe={type:"removed"},ny={type:"childadded",child:null},QA={type:"childremoved",child:null};class Tu extends J0{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Vpe++}),this.uuid=rg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Tu.DEFAULT_UP.clone();const e=new Sn,n=new fd,r=new z0,i=new Sn(1,1,1);function o(){r.setFromEuler(n,!1)}function l(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ws},normalMatrix:{value:new va}}),this.matrix=new ws,this.matrixWorld=new ws,this.matrixAutoUpdate=Tu.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Tu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new aj,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return ty.setFromAxisAngle(e,n),this.quaternion.multiply(ty),this}rotateOnWorldAxis(e,n){return ty.setFromAxisAngle(e,n),this.quaternion.premultiply(ty),this}rotateX(e){return this.rotateOnAxis(B6,e)}rotateY(e){return this.rotateOnAxis(z6,e)}rotateZ(e){return this.rotateOnAxis(U6,e)}translateOnAxis(e,n){return F6.copy(e).applyQuaternion(this.quaternion),this.position.add(F6.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(B6,e)}translateY(e){return this.translateOnAxis(z6,e)}translateZ(e){return this.translateOnAxis(U6,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(zp.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?U2.copy(e):U2.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),j1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zp.lookAt(j1,U2,this.up):zp.lookAt(U2,j1,this.up),this.quaternion.setFromRotationMatrix(zp),i&&(zp.extractRotation(i.matrixWorld),ty.setFromRotationMatrix(zp),this.quaternion.premultiply(ty.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(j6),ny.child=e,this.dispatchEvent(ny),ny.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Hpe),QA.child=e,this.dispatchEvent(QA),QA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),zp.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),zp.multiply(e.parent.matrixWorld)),e.applyMatrix4(zp),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(j6),ny.child=e,this.dispatchEvent(ny),ny.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const l=this.children[r].getObjectByProperty(e,n);if(l!==void 0)return l}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,l=i.length;o<l;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(j1,e,Gpe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(j1,qpe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let o=0,l=i.length;o<l;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,h){return a[h.uuid]===void 0&&(a[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const h=a.shapes;if(Array.isArray(h))for(let f=0,v=h.length;f<v;f++){const y=h[f];o(e.shapes,y)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let h=0,f=this.material.length;h<f;h++)a.push(o(e.materials,this.material[h]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const h=this.animations[a];i.animations.push(o(e.animations,h))}}if(n){const a=l(e.geometries),h=l(e.materials),f=l(e.textures),v=l(e.images),y=l(e.shapes),w=l(e.skeletons),b=l(e.animations),A=l(e.nodes);a.length>0&&(r.geometries=a),h.length>0&&(r.materials=h),f.length>0&&(r.textures=f),v.length>0&&(r.images=v),y.length>0&&(r.shapes=y),w.length>0&&(r.skeletons=w),b.length>0&&(r.animations=b),A.length>0&&(r.nodes=A)}return r.object=i,r;function l(a){const h=[];for(const f in a){const v=a[f];delete v.metadata,h.push(v)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Tu.DEFAULT_UP=new Sn(0,1,0);Tu.DEFAULT_MATRIX_AUTO_UPDATE=!0;Tu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Jf=new Sn,Up=new Sn,eC=new Sn,jp=new Sn,ry=new Sn,iy=new Sn,V6=new Sn,tC=new Sn,nC=new Sn,rC=new Sn,iC=new Sl,aC=new Sl,oC=new Sl;class _f{constructor(e=new Sn,n=new Sn,r=new Sn){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Jf.subVectors(e,n),i.cross(Jf);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){Jf.subVectors(i,n),Up.subVectors(r,n),eC.subVectors(e,n);const l=Jf.dot(Jf),a=Jf.dot(Up),h=Jf.dot(eC),f=Up.dot(Up),v=Up.dot(eC),y=l*f-a*a;if(y===0)return o.set(0,0,0),null;const w=1/y,b=(f*h-a*v)*w,A=(l*v-a*h)*w;return o.set(1-b-A,A,b)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,jp)===null?!1:jp.x>=0&&jp.y>=0&&jp.x+jp.y<=1}static getInterpolation(e,n,r,i,o,l,a,h){return this.getBarycoord(e,n,r,i,jp)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(o,jp.x),h.addScaledVector(l,jp.y),h.addScaledVector(a,jp.z),h)}static getInterpolatedAttribute(e,n,r,i,o,l){return iC.setScalar(0),aC.setScalar(0),oC.setScalar(0),iC.fromBufferAttribute(e,n),aC.fromBufferAttribute(e,r),oC.fromBufferAttribute(e,i),l.setScalar(0),l.addScaledVector(iC,o.x),l.addScaledVector(aC,o.y),l.addScaledVector(oC,o.z),l}static isFrontFacing(e,n,r,i){return Jf.subVectors(r,n),Up.subVectors(e,n),Jf.cross(Up).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Jf.subVectors(this.c,this.b),Up.subVectors(this.a,this.b),Jf.cross(Up).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _f.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return _f.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return _f.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return _f.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _f.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let l,a;ry.subVectors(i,r),iy.subVectors(o,r),tC.subVectors(e,r);const h=ry.dot(tC),f=iy.dot(tC);if(h<=0&&f<=0)return n.copy(r);nC.subVectors(e,i);const v=ry.dot(nC),y=iy.dot(nC);if(v>=0&&y<=v)return n.copy(i);const w=h*y-v*f;if(w<=0&&h>=0&&v<=0)return l=h/(h-v),n.copy(r).addScaledVector(ry,l);rC.subVectors(e,o);const b=ry.dot(rC),A=iy.dot(rC);if(A>=0&&b<=A)return n.copy(o);const M=b*f-h*A;if(M<=0&&f>=0&&A<=0)return a=f/(f-A),n.copy(r).addScaledVector(iy,a);const P=v*A-b*y;if(P<=0&&y-v>=0&&b-A>=0)return V6.subVectors(o,i),a=(y-v)/(y-v+(b-A)),n.copy(i).addScaledVector(V6,a);const C=1/(P+M+w);return l=M*C,a=w*C,n.copy(r).addScaledVector(ry,l).addScaledVector(iy,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const oj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Vm={h:0,s:0,l:0},j2={h:0,s:0,l:0};function sC(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class ba{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=zh){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,oo.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=oo.workingColorSpace){return this.r=e,this.g=n,this.b=r,oo.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=oo.workingColorSpace){if(e=Ape(e,1),n=Na(n,0,1),r=Na(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,l=2*r-o;this.r=sC(l,o,e+1/3),this.g=sC(l,o,e),this.b=sC(l,o,e-1/3)}return oo.toWorkingColorSpace(this,i),this}setStyle(e,n=zh){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=i[1],a=i[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(l===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=zh){const r=oj[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Jp(e.r),this.g=Jp(e.g),this.b=Jp(e.b),this}copyLinearToSRGB(e){return this.r=a_(e.r),this.g=a_(e.g),this.b=a_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=zh){return oo.fromWorkingColorSpace(Rc.copy(this),e),Math.round(Na(Rc.r*255,0,255))*65536+Math.round(Na(Rc.g*255,0,255))*256+Math.round(Na(Rc.b*255,0,255))}getHexString(e=zh){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=oo.workingColorSpace){oo.fromWorkingColorSpace(Rc.copy(this),n);const r=Rc.r,i=Rc.g,o=Rc.b,l=Math.max(r,i,o),a=Math.min(r,i,o);let h,f;const v=(a+l)/2;if(a===l)h=0,f=0;else{const y=l-a;switch(f=v<=.5?y/(l+a):y/(2-l-a),l){case r:h=(i-o)/y+(i<o?6:0);break;case i:h=(o-r)/y+2;break;case o:h=(r-i)/y+4;break}h/=6}return e.h=h,e.s=f,e.l=v,e}getRGB(e,n=oo.workingColorSpace){return oo.fromWorkingColorSpace(Rc.copy(this),n),e.r=Rc.r,e.g=Rc.g,e.b=Rc.b,e}getStyle(e=zh){oo.fromWorkingColorSpace(Rc.copy(this),e);const n=Rc.r,r=Rc.g,i=Rc.b;return e!==zh?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Vm),this.setHSL(Vm.h+e,Vm.s+n,Vm.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Vm),e.getHSL(j2);const r=qA(Vm.h,j2.h,n),i=qA(Vm.s,j2.s,n),o=qA(Vm.l,j2.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Rc=new ba;ba.NAMES=oj;let $pe=0;class dd extends J0{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:$pe++}),this.uuid=rg(),this.name="",this.type="Material",this.blending=r_,this.side=pg,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Z3,this.blendDst=Y3,this.blendEquation=g0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ba(0,0,0),this.blendAlpha=0,this.depthFunc=g_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=P6,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zv,this.stencilZFail=Zv,this.stencilZPass=Zv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==r_&&(r.blending=this.blending),this.side!==pg&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Z3&&(r.blendSrc=this.blendSrc),this.blendDst!==Y3&&(r.blendDst=this.blendDst),this.blendEquation!==g0&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==g_&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==P6&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Zv&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Zv&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Zv&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const l=[];for(const a in o){const h=o[a];delete h.metadata,l.push(h)}return l}if(n){const o=i(e.textures),l=i(e.images);o.length>0&&(r.textures=o),l.length>0&&(r.images=l)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class sj extends dd{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ba(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new fd,this.combine=oL,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const su=new Sn,V2=new Bi;let Wpe=0;class sd{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Wpe++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=OP,this.updateRanges=[],this.gpuType=$p,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)V2.fromBufferAttribute(this,n),V2.applyMatrix3(e),this.setXY(n,V2.x,V2.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)su.fromBufferAttribute(this,n),su.applyMatrix3(e),this.setXYZ(n,su.x,su.y,su.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)su.fromBufferAttribute(this,n),su.applyMatrix4(e),this.setXYZ(n,su.x,su.y,su.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)su.fromBufferAttribute(this,n),su.applyNormalMatrix(e),this.setXYZ(n,su.x,su.y,su.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)su.fromBufferAttribute(this,n),su.transformDirection(e),this.setXYZ(n,su.x,su.y,su.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=ep(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Fo(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ep(n,this.array)),n}setX(e,n){return this.normalized&&(n=Fo(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ep(n,this.array)),n}setY(e,n){return this.normalized&&(n=Fo(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ep(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Fo(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ep(n,this.array)),n}setW(e,n){return this.normalized&&(n=Fo(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Fo(n,this.array),r=Fo(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Fo(n,this.array),r=Fo(r,this.array),i=Fo(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Fo(n,this.array),r=Fo(r,this.array),i=Fo(i,this.array),o=Fo(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==OP&&(e.usage=this.usage),e}}class lj extends sd{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class uj extends sd{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class sc extends sd{constructor(e,n,r){super(new Float32Array(e),n,r)}}let Xpe=0;const ff=new ws,lC=new Tu,ay=new Sn,Fh=new ig,V1=new ig,$u=new Sn;class Yh extends J0{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Xpe++}),this.uuid=rg(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(rj(e)?uj:lj)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new va().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ff.makeRotationFromQuaternion(e),this.applyMatrix4(ff),this}rotateX(e){return ff.makeRotationX(e),this.applyMatrix4(ff),this}rotateY(e){return ff.makeRotationY(e),this.applyMatrix4(ff),this}rotateZ(e){return ff.makeRotationZ(e),this.applyMatrix4(ff),this}translate(e,n,r){return ff.makeTranslation(e,n,r),this.applyMatrix4(ff),this}scale(e,n,r){return ff.makeScale(e,n,r),this.applyMatrix4(ff),this}lookAt(e){return lC.lookAt(e),lC.updateMatrix(),this.applyMatrix4(lC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ay).negate(),this.translate(ay.x,ay.y,ay.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,o=e.length;i<o;i++){const l=e[i];r.push(l.x,l.y,l.z||0)}this.setAttribute("position",new sc(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const o=e[i];n.setXYZ(i,o.x,o.y,o.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ig);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Sn(-1/0,-1/0,-1/0),new Sn(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];Fh.setFromBufferAttribute(o),this.morphTargetsRelative?($u.addVectors(this.boundingBox.min,Fh.min),this.boundingBox.expandByPoint($u),$u.addVectors(this.boundingBox.max,Fh.max),this.boundingBox.expandByPoint($u)):(this.boundingBox.expandByPoint(Fh.min),this.boundingBox.expandByPoint(Fh.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new yx);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Sn,1/0);return}if(e){const r=this.boundingSphere.center;if(Fh.setFromBufferAttribute(e),n)for(let o=0,l=n.length;o<l;o++){const a=n[o];V1.setFromBufferAttribute(a),this.morphTargetsRelative?($u.addVectors(Fh.min,V1.min),Fh.expandByPoint($u),$u.addVectors(Fh.max,V1.max),Fh.expandByPoint($u)):(Fh.expandByPoint(V1.min),Fh.expandByPoint(V1.max))}Fh.getCenter(r);let i=0;for(let o=0,l=e.count;o<l;o++)$u.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared($u));if(n)for(let o=0,l=n.length;o<l;o++){const a=n[o],h=this.morphTargetsRelative;for(let f=0,v=a.count;f<v;f++)$u.fromBufferAttribute(a,f),h&&(ay.fromBufferAttribute(e,f),$u.add(ay)),i=Math.max(i,r.distanceToSquared($u))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new sd(new Float32Array(4*r.count),4));const l=this.getAttribute("tangent"),a=[],h=[];for(let Y=0;Y<r.count;Y++)a[Y]=new Sn,h[Y]=new Sn;const f=new Sn,v=new Sn,y=new Sn,w=new Bi,b=new Bi,A=new Bi,M=new Sn,P=new Sn;function C(Y,Z,j){f.fromBufferAttribute(r,Y),v.fromBufferAttribute(r,Z),y.fromBufferAttribute(r,j),w.fromBufferAttribute(o,Y),b.fromBufferAttribute(o,Z),A.fromBufferAttribute(o,j),v.sub(f),y.sub(f),b.sub(w),A.sub(w);const K=1/(b.x*A.y-A.x*b.y);isFinite(K)&&(M.copy(v).multiplyScalar(A.y).addScaledVector(y,-b.y).multiplyScalar(K),P.copy(y).multiplyScalar(b.x).addScaledVector(v,-A.x).multiplyScalar(K),a[Y].add(M),a[Z].add(M),a[j].add(M),h[Y].add(P),h[Z].add(P),h[j].add(P))}let k=this.groups;k.length===0&&(k=[{start:0,count:e.count}]);for(let Y=0,Z=k.length;Y<Z;++Y){const j=k[Y],K=j.start,re=j.count;for(let ie=K,se=K+re;ie<se;ie+=3)C(e.getX(ie+0),e.getX(ie+1),e.getX(ie+2))}const B=new Sn,z=new Sn,q=new Sn,V=new Sn;function W(Y){q.fromBufferAttribute(i,Y),V.copy(q);const Z=a[Y];B.copy(Z),B.sub(q.multiplyScalar(q.dot(Z))).normalize(),z.crossVectors(V,Z);const K=z.dot(h[Y])<0?-1:1;l.setXYZW(Y,B.x,B.y,B.z,K)}for(let Y=0,Z=k.length;Y<Z;++Y){const j=k[Y],K=j.start,re=j.count;for(let ie=K,se=K+re;ie<se;ie+=3)W(e.getX(ie+0)),W(e.getX(ie+1)),W(e.getX(ie+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new sd(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let w=0,b=r.count;w<b;w++)r.setXYZ(w,0,0,0);const i=new Sn,o=new Sn,l=new Sn,a=new Sn,h=new Sn,f=new Sn,v=new Sn,y=new Sn;if(e)for(let w=0,b=e.count;w<b;w+=3){const A=e.getX(w+0),M=e.getX(w+1),P=e.getX(w+2);i.fromBufferAttribute(n,A),o.fromBufferAttribute(n,M),l.fromBufferAttribute(n,P),v.subVectors(l,o),y.subVectors(i,o),v.cross(y),a.fromBufferAttribute(r,A),h.fromBufferAttribute(r,M),f.fromBufferAttribute(r,P),a.add(v),h.add(v),f.add(v),r.setXYZ(A,a.x,a.y,a.z),r.setXYZ(M,h.x,h.y,h.z),r.setXYZ(P,f.x,f.y,f.z)}else for(let w=0,b=n.count;w<b;w+=3)i.fromBufferAttribute(n,w+0),o.fromBufferAttribute(n,w+1),l.fromBufferAttribute(n,w+2),v.subVectors(l,o),y.subVectors(i,o),v.cross(y),r.setXYZ(w+0,v.x,v.y,v.z),r.setXYZ(w+1,v.x,v.y,v.z),r.setXYZ(w+2,v.x,v.y,v.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)$u.fromBufferAttribute(e,n),$u.normalize(),e.setXYZ(n,$u.x,$u.y,$u.z)}toNonIndexed(){function e(a,h){const f=a.array,v=a.itemSize,y=a.normalized,w=new f.constructor(h.length*v);let b=0,A=0;for(let M=0,P=h.length;M<P;M++){a.isInterleavedBufferAttribute?b=h[M]*a.data.stride+a.offset:b=h[M]*v;for(let C=0;C<v;C++)w[A++]=f[b++]}return new sd(w,v,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Yh,r=this.index.array,i=this.attributes;for(const a in i){const h=i[a],f=e(h,r);n.setAttribute(a,f)}const o=this.morphAttributes;for(const a in o){const h=[],f=o[a];for(let v=0,y=f.length;v<y;v++){const w=f[v],b=e(w,r);h.push(b)}n.morphAttributes[a]=h}n.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let a=0,h=l.length;a<h;a++){const f=l[a];n.addGroup(f.start,f.count,f.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const f in h)h[f]!==void 0&&(e[f]=h[f]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const h in r){const f=r[h];e.data.attributes[h]=f.toJSON(e.data)}const i={};let o=!1;for(const h in this.morphAttributes){const f=this.morphAttributes[h],v=[];for(let y=0,w=f.length;y<w;y++){const b=f[y];v.push(b.toJSON(e.data))}v.length>0&&(i[h]=v,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const f in i){const v=i[f];this.setAttribute(f,v.clone(n))}const o=e.morphAttributes;for(const f in o){const v=[],y=o[f];for(let w=0,b=y.length;w<b;w++)v.push(y[w].clone(n));this.morphAttributes[f]=v}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let f=0,v=l.length;f<v;f++){const y=l[f];this.addGroup(y.start,y.count,y.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const G6=new ws,t0=new CE,G2=new yx,q6=new Sn,q2=new Sn,H2=new Sn,$2=new Sn,uC=new Sn,W2=new Sn,H6=new Sn,X2=new Sn;class wf extends Tu{constructor(e=new Yh,n=new sj){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=i.length;o<l;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,l=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){W2.set(0,0,0);for(let h=0,f=o.length;h<f;h++){const v=a[h],y=o[h];v!==0&&(uC.fromBufferAttribute(y,e),l?W2.addScaledVector(uC,v):W2.addScaledVector(uC.sub(n),v))}n.add(W2)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),G2.copy(r.boundingSphere),G2.applyMatrix4(o),t0.copy(e.ray).recast(e.near),!(G2.containsPoint(t0.origin)===!1&&(t0.intersectSphere(G2,q6)===null||t0.origin.distanceToSquared(q6)>(e.far-e.near)**2))&&(G6.copy(o).invert(),t0.copy(e.ray).applyMatrix4(G6),!(r.boundingBox!==null&&t0.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,t0)))}_computeIntersections(e,n,r){let i;const o=this.geometry,l=this.material,a=o.index,h=o.attributes.position,f=o.attributes.uv,v=o.attributes.uv1,y=o.attributes.normal,w=o.groups,b=o.drawRange;if(a!==null)if(Array.isArray(l))for(let A=0,M=w.length;A<M;A++){const P=w[A],C=l[P.materialIndex],k=Math.max(P.start,b.start),B=Math.min(a.count,Math.min(P.start+P.count,b.start+b.count));for(let z=k,q=B;z<q;z+=3){const V=a.getX(z),W=a.getX(z+1),Y=a.getX(z+2);i=Z2(this,C,e,r,f,v,y,V,W,Y),i&&(i.faceIndex=Math.floor(z/3),i.face.materialIndex=P.materialIndex,n.push(i))}}else{const A=Math.max(0,b.start),M=Math.min(a.count,b.start+b.count);for(let P=A,C=M;P<C;P+=3){const k=a.getX(P),B=a.getX(P+1),z=a.getX(P+2);i=Z2(this,l,e,r,f,v,y,k,B,z),i&&(i.faceIndex=Math.floor(P/3),n.push(i))}}else if(h!==void 0)if(Array.isArray(l))for(let A=0,M=w.length;A<M;A++){const P=w[A],C=l[P.materialIndex],k=Math.max(P.start,b.start),B=Math.min(h.count,Math.min(P.start+P.count,b.start+b.count));for(let z=k,q=B;z<q;z+=3){const V=z,W=z+1,Y=z+2;i=Z2(this,C,e,r,f,v,y,V,W,Y),i&&(i.faceIndex=Math.floor(z/3),i.face.materialIndex=P.materialIndex,n.push(i))}}else{const A=Math.max(0,b.start),M=Math.min(h.count,b.start+b.count);for(let P=A,C=M;P<C;P+=3){const k=P,B=P+1,z=P+2;i=Z2(this,l,e,r,f,v,y,k,B,z),i&&(i.faceIndex=Math.floor(P/3),n.push(i))}}}}function Zpe(t,e,n,r,i,o,l,a){let h;if(e.side===vh?h=r.intersectTriangle(l,o,i,!0,a):h=r.intersectTriangle(i,o,l,e.side===pg,a),h===null)return null;X2.copy(a),X2.applyMatrix4(t.matrixWorld);const f=n.ray.origin.distanceTo(X2);return f<n.near||f>n.far?null:{distance:f,point:X2.clone(),object:t}}function Z2(t,e,n,r,i,o,l,a,h,f){t.getVertexPosition(a,q2),t.getVertexPosition(h,H2),t.getVertexPosition(f,$2);const v=Zpe(t,e,n,r,q2,H2,$2,H6);if(v){const y=new Sn;_f.getBarycoord(H6,q2,H2,$2,y),i&&(v.uv=_f.getInterpolatedAttribute(i,a,h,f,y,new Bi)),o&&(v.uv1=_f.getInterpolatedAttribute(o,a,h,f,y,new Bi)),l&&(v.normal=_f.getInterpolatedAttribute(l,a,h,f,y,new Sn),v.normal.dot(r.direction)>0&&v.normal.multiplyScalar(-1));const w={a,b:h,c:f,normal:new Sn,materialIndex:0};_f.getNormal(q2,H2,$2,w.normal),v.face=w,v.barycoord=y}return v}class _x extends Yh{constructor(e=1,n=1,r=1,i=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:l};const a=this;i=Math.floor(i),o=Math.floor(o),l=Math.floor(l);const h=[],f=[],v=[],y=[];let w=0,b=0;A("z","y","x",-1,-1,r,n,e,l,o,0),A("z","y","x",1,-1,r,n,-e,l,o,1),A("x","z","y",1,1,e,r,n,i,l,2),A("x","z","y",1,-1,e,r,-n,i,l,3),A("x","y","z",1,-1,e,n,r,i,o,4),A("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(h),this.setAttribute("position",new sc(f,3)),this.setAttribute("normal",new sc(v,3)),this.setAttribute("uv",new sc(y,2));function A(M,P,C,k,B,z,q,V,W,Y,Z){const j=z/W,K=q/Y,re=z/2,ie=q/2,se=V/2,de=W+1,ue=Y+1;let Te=0,pe=0;const De=new Sn;for(let me=0;me<ue;me++){const Me=me*K-ie;for(let fe=0;fe<de;fe++){const ve=fe*j-re;De[M]=ve*k,De[P]=Me*B,De[C]=se,f.push(De.x,De.y,De.z),De[M]=0,De[P]=0,De[C]=V>0?1:-1,v.push(De.x,De.y,De.z),y.push(fe/W),y.push(1-me/Y),Te+=1}}for(let me=0;me<Y;me++)for(let Me=0;Me<W;Me++){const fe=w+Me+de*me,ve=w+Me+de*(me+1),le=w+(Me+1)+de*(me+1),ye=w+(Me+1)+de*me;h.push(fe,ve,ye),h.push(ve,le,ye),pe+=6}a.addGroup(b,pe,Z),b+=pe,w+=Te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _x(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function w_(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Xc(t){const e={};for(let n=0;n<t.length;n++){const r=w_(t[n]);for(const i in r)e[i]=r[i]}return e}function Ype(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function cj(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:oo.workingColorSpace}const Kpe={clone:w_,merge:Xc};var Jpe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Qpe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class mg extends dd{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Jpe,this.fragmentShader=Qpe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=w_(e.uniforms),this.uniformsGroups=Ype(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const l=this.uniforms[i].value;l&&l.isTexture?n.uniforms[i]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?n.uniforms[i]={type:"c",value:l.getHex()}:l&&l.isVector2?n.uniforms[i]={type:"v2",value:l.toArray()}:l&&l.isVector3?n.uniforms[i]={type:"v3",value:l.toArray()}:l&&l.isVector4?n.uniforms[i]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?n.uniforms[i]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?n.uniforms[i]={type:"m4",value:l.toArray()}:n.uniforms[i]={value:l}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class hj extends Tu{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ws,this.projectionMatrix=new ws,this.projectionMatrixInverse=new ws,this.coordinateSystem=Wp}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Gm=new Sn,$6=new Bi,W6=new Bi;class vf extends hj{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=NP*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Lw*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return NP*2*Math.atan(Math.tan(Lw*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){Gm.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Gm.x,Gm.y).multiplyScalar(-e/Gm.z),Gm.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Gm.x,Gm.y).multiplyScalar(-e/Gm.z)}getViewSize(e,n){return this.getViewBounds(e,$6,W6),n.subVectors(W6,$6)}setViewOffset(e,n,r,i,o,l){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Lw*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,f=l.fullHeight;o+=l.offsetX*i/h,n-=l.offsetY*r/f,i*=l.width/h,r*=l.height/f}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const oy=-90,sy=1;class eme extends Tu{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new vf(oy,sy,e,n);i.layers=this.layers,this.add(i);const o=new vf(oy,sy,e,n);o.layers=this.layers,this.add(o);const l=new vf(oy,sy,e,n);l.layers=this.layers,this.add(l);const a=new vf(oy,sy,e,n);a.layers=this.layers,this.add(a);const h=new vf(oy,sy,e,n);h.layers=this.layers,this.add(h);const f=new vf(oy,sy,e,n);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,l,a,h]=n;for(const f of n)this.remove(f);if(e===Wp)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else if(e===xS)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of n)this.add(f),f.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,l,a,h,f,v]=this.children,y=e.getRenderTarget(),w=e.getActiveCubeFace(),b=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;const M=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,l),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,h),e.setRenderTarget(r,4,i),e.render(n,f),r.texture.generateMipmaps=M,e.setRenderTarget(r,5,i),e.render(n,v),e.setRenderTarget(y,w,b),e.xr.enabled=A,r.texture.needsPMREMUpdate=!0}}class fj extends Ic{constructor(e,n,r,i,o,l,a,h,f,v){e=e!==void 0?e:[],n=n!==void 0?n:v_,super(e,n,r,i,o,l,a,h,f,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class tme extends B0{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new fj(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:np}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new _x(5,5,5),o=new mg({name:"CubemapFromEquirect",uniforms:w_(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:vh,blending:tg});o.uniforms.tEquirect.value=n;const l=new wf(i,o),a=n.minFilter;return n.minFilter===w0&&(n.minFilter=np),new eme(1,10,this).update(e,l),n.minFilter=a,l.geometry.dispose(),l.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(n,r,i);e.setRenderTarget(o)}}class hb extends Tu{constructor(){super(),this.isGroup=!0,this.type="Group"}}const nme={type:"move"};class cC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new hb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new hb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Sn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Sn),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new hb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Sn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Sn),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,l=null;const a=this._targetRay,h=this._grip,f=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(f&&e.hand){l=!0;for(const M of e.hand.values()){const P=n.getJointPose(M,r),C=this._getHandJoint(f,M);P!==null&&(C.matrix.fromArray(P.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.matrixWorldNeedsUpdate=!0,C.jointRadius=P.radius),C.visible=P!==null}const v=f.joints["index-finger-tip"],y=f.joints["thumb-tip"],w=v.position.distanceTo(y.position),b=.02,A=.005;f.inputState.pinching&&w>b+A?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&w<=b-A&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(nme)))}return a!==null&&(a.visible=i!==null),h!==null&&(h.visible=o!==null),f!==null&&(f.visible=l!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new hb;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class rme extends Tu{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new fd,this.environmentIntensity=1,this.environmentRotation=new fd,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class ime{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=OP,this.updateRanges=[],this.version=0,this.uuid=rg()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=rg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=rg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Wc=new Sn;class SS{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Wc.fromBufferAttribute(this,n),Wc.applyMatrix4(e),this.setXYZ(n,Wc.x,Wc.y,Wc.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Wc.fromBufferAttribute(this,n),Wc.applyNormalMatrix(e),this.setXYZ(n,Wc.x,Wc.y,Wc.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Wc.fromBufferAttribute(this,n),Wc.transformDirection(e),this.setXYZ(n,Wc.x,Wc.y,Wc.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=ep(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Fo(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Fo(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Fo(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Fo(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Fo(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ep(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ep(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ep(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ep(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Fo(n,this.array),r=Fo(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Fo(n,this.array),r=Fo(r,this.array),i=Fo(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(n=Fo(n,this.array),r=Fo(r,this.array),i=Fo(i,this.array),o=Fo(o,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return new sd(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new SS(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class dj extends dd{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ba(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ly;const G1=new Sn,uy=new Sn,cy=new Sn,hy=new Bi,q1=new Bi,pj=new ws,Y2=new Sn,H1=new Sn,K2=new Sn,X6=new Bi,hC=new Bi,Z6=new Bi;class ame extends Tu{constructor(e=new dj){if(super(),this.isSprite=!0,this.type="Sprite",ly===void 0){ly=new Yh;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new ime(n,5);ly.setIndex([0,1,2,0,2,3]),ly.setAttribute("position",new SS(r,3,0,!1)),ly.setAttribute("uv",new SS(r,2,3,!1))}this.geometry=ly,this.material=e,this.center=new Bi(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),uy.setFromMatrixScale(this.matrixWorld),pj.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),cy.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&uy.multiplyScalar(-cy.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const l=this.center;J2(Y2.set(-.5,-.5,0),cy,l,uy,i,o),J2(H1.set(.5,-.5,0),cy,l,uy,i,o),J2(K2.set(.5,.5,0),cy,l,uy,i,o),X6.set(0,0),hC.set(1,0),Z6.set(1,1);let a=e.ray.intersectTriangle(Y2,H1,K2,!1,G1);if(a===null&&(J2(H1.set(-.5,.5,0),cy,l,uy,i,o),hC.set(0,1),a=e.ray.intersectTriangle(Y2,K2,H1,!1,G1),a===null))return;const h=e.ray.origin.distanceTo(G1);h<e.near||h>e.far||n.push({distance:h,point:G1.clone(),uv:_f.getInterpolation(G1,Y2,H1,K2,X6,hC,Z6,new Bi),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function J2(t,e,n,r,i,o){hy.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(q1.x=o*hy.x-i*hy.y,q1.y=i*hy.x+o*hy.y):q1.copy(hy),t.copy(e),t.x+=q1.x,t.y+=q1.y,t.applyMatrix4(pj)}class ome extends Ic{constructor(e=null,n=1,r=1,i,o,l,a,h,f=qh,v=qh,y,w){super(null,l,a,h,f,v,i,o,y,w),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const fC=new Sn,sme=new Sn,lme=new va;class $m{constructor(e=new Sn(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=fC.subVectors(r,n).cross(sme.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(fC),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||lme.getNormalMatrix(e),i=this.coplanarPoint(fC).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const n0=new yx,Q2=new Sn;class mL{constructor(e=new $m,n=new $m,r=new $m,i=new $m,o=new $m,l=new $m){this.planes=[e,n,r,i,o,l]}set(e,n,r,i,o,l){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(l),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Wp){const r=this.planes,i=e.elements,o=i[0],l=i[1],a=i[2],h=i[3],f=i[4],v=i[5],y=i[6],w=i[7],b=i[8],A=i[9],M=i[10],P=i[11],C=i[12],k=i[13],B=i[14],z=i[15];if(r[0].setComponents(h-o,w-f,P-b,z-C).normalize(),r[1].setComponents(h+o,w+f,P+b,z+C).normalize(),r[2].setComponents(h+l,w+v,P+A,z+k).normalize(),r[3].setComponents(h-l,w-v,P-A,z-k).normalize(),r[4].setComponents(h-a,w-y,P-M,z-B).normalize(),n===Wp)r[5].setComponents(h+a,w+y,P+M,z+B).normalize();else if(n===xS)r[5].setComponents(a,y,M,B).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),n0.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),n0.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(n0)}intersectsSprite(e){return n0.center.set(0,0,0),n0.radius=.7071067811865476,n0.applyMatrix4(e.matrixWorld),this.intersectsSphere(n0)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(Q2.x=i.normal.x>0?e.max.x:e.min.x,Q2.y=i.normal.y>0?e.max.y:e.min.y,Q2.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Q2)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Mb extends dd{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ba(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ES=new Sn,TS=new Sn,Y6=new ws,$1=new CE,ew=new yx,dC=new Sn,K6=new Sn;class ume extends Tu{constructor(e=new Yh,n=new Mb){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)ES.fromBufferAttribute(n,i-1),TS.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=ES.distanceTo(TS);e.setAttribute("lineDistance",new sc(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ew.copy(r.boundingSphere),ew.applyMatrix4(i),ew.radius+=o,e.ray.intersectsSphere(ew)===!1)return;Y6.copy(i).invert(),$1.copy(e.ray).applyMatrix4(Y6);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=a*a,f=this.isLineSegments?2:1,v=r.index,w=r.attributes.position;if(v!==null){const b=Math.max(0,l.start),A=Math.min(v.count,l.start+l.count);for(let M=b,P=A-1;M<P;M+=f){const C=v.getX(M),k=v.getX(M+1),B=tw(this,e,$1,h,C,k,M);B&&n.push(B)}if(this.isLineLoop){const M=v.getX(A-1),P=v.getX(b),C=tw(this,e,$1,h,M,P,A-1);C&&n.push(C)}}else{const b=Math.max(0,l.start),A=Math.min(w.count,l.start+l.count);for(let M=b,P=A-1;M<P;M+=f){const C=tw(this,e,$1,h,M,M+1,M);C&&n.push(C)}if(this.isLineLoop){const M=tw(this,e,$1,h,A-1,b,A-1);M&&n.push(M)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=i.length;o<l;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function tw(t,e,n,r,i,o,l){const a=t.geometry.attributes.position;if(ES.fromBufferAttribute(a,i),TS.fromBufferAttribute(a,o),n.distanceSqToSegment(ES,TS,dC,K6)>r)return;dC.applyMatrix4(t.matrixWorld);const f=e.ray.origin.distanceTo(dC);if(!(f<e.near||f>e.far))return{distance:f,point:K6.clone().applyMatrix4(t.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:t}}const J6=new Sn,Q6=new Sn;class kP extends ume{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)J6.fromBufferAttribute(n,i),Q6.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+J6.distanceTo(Q6);e.setAttribute("lineDistance",new sc(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class fb extends dd{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ba(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const eB=new ws,FP=new CE,nw=new yx,rw=new Sn;class pC extends Tu{constructor(e=new Yh,n=new fb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),nw.copy(r.boundingSphere),nw.applyMatrix4(i),nw.radius+=o,e.ray.intersectsSphere(nw)===!1)return;eB.copy(i).invert(),FP.copy(e.ray).applyMatrix4(eB);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=a*a,f=r.index,y=r.attributes.position;if(f!==null){const w=Math.max(0,l.start),b=Math.min(f.count,l.start+l.count);for(let A=w,M=b;A<M;A++){const P=f.getX(A);rw.fromBufferAttribute(y,P),tB(rw,P,h,i,e,n,this)}}else{const w=Math.max(0,l.start),b=Math.min(y.count,l.start+l.count);for(let A=w,M=b;A<M;A++)rw.fromBufferAttribute(y,A),tB(rw,A,h,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=i.length;o<l;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function tB(t,e,n,r,i,o,l){const a=FP.distanceSqToPoint(t);if(a<n){const h=new Sn;FP.closestPointToPoint(t,h),h.applyMatrix4(r);const f=i.ray.origin.distanceTo(h);if(f<i.near||f>i.far)return;o.push({distance:f,distanceToRay:Math.sqrt(a),point:h,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class cme extends Ic{constructor(e,n,r,i,o,l,a,h,f){super(e,n,r,i,o,l,a,h,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class mj extends Ic{constructor(e,n,r,i,o,l,a,h,f,v=i_){if(v!==i_&&v!==b_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&v===i_&&(r=F0),r===void 0&&v===b_&&(r=__),super(null,i,o,l,a,h,v,r,f),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:qh,this.minFilter=h!==void 0?h:qh,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new pL(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class PE extends Yh{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,l=n/2,a=Math.floor(r),h=Math.floor(i),f=a+1,v=h+1,y=e/a,w=n/h,b=[],A=[],M=[],P=[];for(let C=0;C<v;C++){const k=C*w-l;for(let B=0;B<f;B++){const z=B*y-o;A.push(z,-k,0),M.push(0,0,1),P.push(B/a),P.push(1-C/h)}}for(let C=0;C<h;C++)for(let k=0;k<a;k++){const B=k+f*C,z=k+f*(C+1),q=k+1+f*(C+1),V=k+1+f*C;b.push(B,z,V),b.push(z,q,V)}this.setIndex(b),this.setAttribute("position",new sc(A,3)),this.setAttribute("normal",new sc(M,3)),this.setAttribute("uv",new sc(P,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PE(e.width,e.height,e.widthSegments,e.heightSegments)}}class hme extends dd{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ba(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ba(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dL,this.normalScale=new Bi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new fd,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fme extends dd{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ba(16777215),this.specular=new ba(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ba(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dL,this.normalScale=new Bi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new fd,this.combine=oL,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dme extends dd{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=vpe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class pme extends dd{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const nB={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class mme{constructor(e,n,r){const i=this;let o=!1,l=0,a=0,h;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(v){a++,o===!1&&i.onStart!==void 0&&i.onStart(v,l,a),o=!0},this.itemEnd=function(v){l++,i.onProgress!==void 0&&i.onProgress(v,l,a),l===a&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(v){i.onError!==void 0&&i.onError(v)},this.resolveURL=function(v){return h?h(v):v},this.setURLModifier=function(v){return h=v,this},this.addHandler=function(v,y){return f.push(v,y),this},this.removeHandler=function(v){const y=f.indexOf(v);return y!==-1&&f.splice(y,2),this},this.getHandler=function(v){for(let y=0,w=f.length;y<w;y+=2){const b=f[y],A=f[y+1];if(b.global&&(b.lastIndex=0),b.test(v))return A}return null}}}const gme=new mme;class gL{constructor(e){this.manager=e!==void 0?e:gme,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}gL.DEFAULT_MATERIAL_NAME="__DEFAULT";const Vp={};class vme extends Error{constructor(e,n){super(e),this.response=n}}class yme extends gL{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=nB.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(Vp[e]!==void 0){Vp[e].push({onLoad:n,onProgress:r,onError:i});return}Vp[e]=[],Vp[e].push({onLoad:n,onProgress:r,onError:i});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,h=this.responseType;fetch(l).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const v=Vp[e],y=f.body.getReader(),w=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),b=w?parseInt(w):0,A=b!==0;let M=0;const P=new ReadableStream({start(C){k();function k(){y.read().then(({done:B,value:z})=>{if(B)C.close();else{M+=z.byteLength;const q=new ProgressEvent("progress",{lengthComputable:A,loaded:M,total:b});for(let V=0,W=v.length;V<W;V++){const Y=v[V];Y.onProgress&&Y.onProgress(q)}C.enqueue(z),k()}},B=>{C.error(B)})}}});return new Response(P)}else throw new vme(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(h){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(v=>new DOMParser().parseFromString(v,a));case"json":return f.json();default:if(a===void 0)return f.text();{const y=/charset="?([^;"\s]*)"?/i.exec(a),w=y&&y[1]?y[1].toLowerCase():void 0,b=new TextDecoder(w);return f.arrayBuffer().then(A=>b.decode(A))}}}).then(f=>{nB.add(e,f);const v=Vp[e];delete Vp[e];for(let y=0,w=v.length;y<w;y++){const b=v[y];b.onLoad&&b.onLoad(f)}}).catch(f=>{const v=Vp[e];if(v===void 0)throw this.manager.itemError(e),f;delete Vp[e];for(let y=0,w=v.length;y<w;y++){const b=v[y];b.onError&&b.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class gj extends Tu{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ba(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}const mC=new ws,rB=new Sn,iB=new Sn;class _me{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Bi(512,512),this.map=null,this.mapPass=null,this.matrix=new ws,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mL,this._frameExtents=new Bi(1,1),this._viewportCount=1,this._viewports=[new Sl(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;rB.setFromMatrixPosition(e.matrixWorld),n.position.copy(rB),iB.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(iB),n.updateMatrixWorld(),mC.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mC),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(mC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vj extends hj{constructor(e=-1,n=1,r=1,i=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,l=r+e,a=i+n,h=i-n;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=f*this.view.offsetX,l=o+f*this.view.width,a-=v*this.view.offsetY,h=a-v*this.view.height}this.projectionMatrix.makeOrthographic(o,l,a,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class bme extends _me{constructor(){super(new vj(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class gC extends gj{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Tu.DEFAULT_UP),this.updateMatrix(),this.target=new Tu,this.shadow=new bme}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class xme extends gj{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class wme extends vf{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class aB{constructor(e=1,n=0,r=0){this.radius=e,this.phi=n,this.theta=r}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Na(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Na(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Sme extends kP{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Yh;i.setAttribute("position",new sc(n,3)),i.setAttribute("color",new sc(r,3));const o=new Mb({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,n,r){const i=new ba,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Eme extends J0{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function oB(t,e,n,r){const i=Tme(r);switch(n){case Z9:return t*e;case K9:return t*e;case J9:return t*e*2;case Q9:return t*e/i.components*i.byteLength;case cL:return t*e/i.components*i.byteLength;case ej:return t*e*2/i.components*i.byteLength;case hL:return t*e*2/i.components*i.byteLength;case Y9:return t*e*3/i.components*i.byteLength;case xf:return t*e*4/i.components*i.byteLength;case fL:return t*e*4/i.components*i.byteLength;case Aw:case Cw:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Pw:case Rw:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case uP:case hP:return Math.max(t,16)*Math.max(e,8)/4;case lP:case cP:return Math.max(t,8)*Math.max(e,8)/2;case fP:case dP:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case pP:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case mP:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case gP:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case vP:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case yP:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case _P:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case bP:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case xP:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case wP:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case SP:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case EP:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case TP:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case MP:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case AP:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case CP:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Dw:case PP:case RP:return Math.ceil(t/4)*Math.ceil(e/4)*16;case tj:case DP:return Math.ceil(t/4)*Math.ceil(e/4)*8;case LP:case IP:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function Tme(t){switch(t){case im:case $9:return{byteLength:1,components:1};case Zb:case W9:case vx:return{byteLength:2,components:1};case lL:case uL:return{byteLength:2,components:4};case F0:case sL:case $p:return{byteLength:4,components:1};case X9:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:aL}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=aL);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function yj(){let t=null,e=!1,n=null,r=null;function i(o,l){n(o,l),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function Mme(t){const e=new WeakMap;function n(a,h){const f=a.array,v=a.usage,y=f.byteLength,w=t.createBuffer();t.bindBuffer(h,w),t.bufferData(h,f,v),a.onUploadCallback();let b;if(f instanceof Float32Array)b=t.FLOAT;else if(f instanceof Uint16Array)a.isFloat16BufferAttribute?b=t.HALF_FLOAT:b=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)b=t.SHORT;else if(f instanceof Uint32Array)b=t.UNSIGNED_INT;else if(f instanceof Int32Array)b=t.INT;else if(f instanceof Int8Array)b=t.BYTE;else if(f instanceof Uint8Array)b=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)b=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:w,type:b,bytesPerElement:f.BYTES_PER_ELEMENT,version:a.version,size:y}}function r(a,h,f){const v=h.array,y=h.updateRanges;if(t.bindBuffer(f,a),y.length===0)t.bufferSubData(f,0,v);else{y.sort((b,A)=>b.start-A.start);let w=0;for(let b=1;b<y.length;b++){const A=y[w],M=y[b];M.start<=A.start+A.count+1?A.count=Math.max(A.count,M.start+M.count-A.start):(++w,y[w]=M)}y.length=w+1;for(let b=0,A=y.length;b<A;b++){const M=y[b];t.bufferSubData(f,M.start*v.BYTES_PER_ELEMENT,v,M.start,M.count)}h.clearUpdateRanges()}h.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const h=e.get(a);h&&(t.deleteBuffer(h.buffer),e.delete(a))}function l(a,h){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const v=e.get(a);(!v||v.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const f=e.get(a);if(f===void 0)e.set(a,n(a,h));else if(f.version<a.version){if(f.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(f.buffer,a,h),f.version=a.version}}return{get:i,remove:o,update:l}}var Ame=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Cme=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Pme=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Rme=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dme=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Lme=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ime=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ome=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Nme=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,kme=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Fme=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Bme=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,zme=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Ume=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,jme=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Vme=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Gme=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,qme=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Hme=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$me=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Wme=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Xme=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Zme=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Yme=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Kme=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Jme=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Qme=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ege=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,tge=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,nge=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,rge="gl_FragColor = linearToOutputTexel( gl_FragColor );",ige=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,age=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,oge=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,sge=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,lge=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,uge=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,cge=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,hge=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fge=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,dge=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,pge=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,mge=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,gge=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,vge=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,yge=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,_ge=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,bge=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,xge=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,wge=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Sge=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Ege=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Tge=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Mge=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Age=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Cge=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Pge=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Rge=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Dge=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Lge=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Ige=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Oge=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Nge=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,kge=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Fge=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Bge=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zge=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Uge=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,jge=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Vge=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Gge=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,qge=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Hge=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$ge=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Wge=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Xge=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Zge=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Yge=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Kge=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Jge=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Qge=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,e0e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,t0e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,n0e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,r0e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,i0e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,a0e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,o0e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,s0e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,l0e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,u0e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,c0e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,h0e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,f0e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,d0e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,p0e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,m0e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,g0e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,v0e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,y0e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,_0e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,b0e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,x0e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,w0e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,S0e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,E0e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,T0e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const M0e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,A0e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,C0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,P0e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,R0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,D0e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,L0e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,I0e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,O0e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,N0e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,k0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,F0e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,B0e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,z0e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,U0e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,j0e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V0e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,G0e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q0e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,H0e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$0e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,W0e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,X0e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Z0e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y0e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,K0e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,J0e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Q0e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eve=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,tve=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nve=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rve=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ive=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ave=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_a={alphahash_fragment:Ame,alphahash_pars_fragment:Cme,alphamap_fragment:Pme,alphamap_pars_fragment:Rme,alphatest_fragment:Dme,alphatest_pars_fragment:Lme,aomap_fragment:Ime,aomap_pars_fragment:Ome,batching_pars_vertex:Nme,batching_vertex:kme,begin_vertex:Fme,beginnormal_vertex:Bme,bsdfs:zme,iridescence_fragment:Ume,bumpmap_pars_fragment:jme,clipping_planes_fragment:Vme,clipping_planes_pars_fragment:Gme,clipping_planes_pars_vertex:qme,clipping_planes_vertex:Hme,color_fragment:$me,color_pars_fragment:Wme,color_pars_vertex:Xme,color_vertex:Zme,common:Yme,cube_uv_reflection_fragment:Kme,defaultnormal_vertex:Jme,displacementmap_pars_vertex:Qme,displacementmap_vertex:ege,emissivemap_fragment:tge,emissivemap_pars_fragment:nge,colorspace_fragment:rge,colorspace_pars_fragment:ige,envmap_fragment:age,envmap_common_pars_fragment:oge,envmap_pars_fragment:sge,envmap_pars_vertex:lge,envmap_physical_pars_fragment:_ge,envmap_vertex:uge,fog_vertex:cge,fog_pars_vertex:hge,fog_fragment:fge,fog_pars_fragment:dge,gradientmap_pars_fragment:pge,lightmap_pars_fragment:mge,lights_lambert_fragment:gge,lights_lambert_pars_fragment:vge,lights_pars_begin:yge,lights_toon_fragment:bge,lights_toon_pars_fragment:xge,lights_phong_fragment:wge,lights_phong_pars_fragment:Sge,lights_physical_fragment:Ege,lights_physical_pars_fragment:Tge,lights_fragment_begin:Mge,lights_fragment_maps:Age,lights_fragment_end:Cge,logdepthbuf_fragment:Pge,logdepthbuf_pars_fragment:Rge,logdepthbuf_pars_vertex:Dge,logdepthbuf_vertex:Lge,map_fragment:Ige,map_pars_fragment:Oge,map_particle_fragment:Nge,map_particle_pars_fragment:kge,metalnessmap_fragment:Fge,metalnessmap_pars_fragment:Bge,morphinstance_vertex:zge,morphcolor_vertex:Uge,morphnormal_vertex:jge,morphtarget_pars_vertex:Vge,morphtarget_vertex:Gge,normal_fragment_begin:qge,normal_fragment_maps:Hge,normal_pars_fragment:$ge,normal_pars_vertex:Wge,normal_vertex:Xge,normalmap_pars_fragment:Zge,clearcoat_normal_fragment_begin:Yge,clearcoat_normal_fragment_maps:Kge,clearcoat_pars_fragment:Jge,iridescence_pars_fragment:Qge,opaque_fragment:e0e,packing:t0e,premultiplied_alpha_fragment:n0e,project_vertex:r0e,dithering_fragment:i0e,dithering_pars_fragment:a0e,roughnessmap_fragment:o0e,roughnessmap_pars_fragment:s0e,shadowmap_pars_fragment:l0e,shadowmap_pars_vertex:u0e,shadowmap_vertex:c0e,shadowmask_pars_fragment:h0e,skinbase_vertex:f0e,skinning_pars_vertex:d0e,skinning_vertex:p0e,skinnormal_vertex:m0e,specularmap_fragment:g0e,specularmap_pars_fragment:v0e,tonemapping_fragment:y0e,tonemapping_pars_fragment:_0e,transmission_fragment:b0e,transmission_pars_fragment:x0e,uv_pars_fragment:w0e,uv_pars_vertex:S0e,uv_vertex:E0e,worldpos_vertex:T0e,background_vert:M0e,background_frag:A0e,backgroundCube_vert:C0e,backgroundCube_frag:P0e,cube_vert:R0e,cube_frag:D0e,depth_vert:L0e,depth_frag:I0e,distanceRGBA_vert:O0e,distanceRGBA_frag:N0e,equirect_vert:k0e,equirect_frag:F0e,linedashed_vert:B0e,linedashed_frag:z0e,meshbasic_vert:U0e,meshbasic_frag:j0e,meshlambert_vert:V0e,meshlambert_frag:G0e,meshmatcap_vert:q0e,meshmatcap_frag:H0e,meshnormal_vert:$0e,meshnormal_frag:W0e,meshphong_vert:X0e,meshphong_frag:Z0e,meshphysical_vert:Y0e,meshphysical_frag:K0e,meshtoon_vert:J0e,meshtoon_frag:Q0e,points_vert:eve,points_frag:tve,shadow_vert:nve,shadow_frag:rve,sprite_vert:ive,sprite_frag:ave},Ur={common:{diffuse:{value:new ba(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new va},alphaMap:{value:null},alphaMapTransform:{value:new va},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new va}},envmap:{envMap:{value:null},envMapRotation:{value:new va},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new va}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new va}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new va},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new va},normalScale:{value:new Bi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new va},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new va}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new va}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new va}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ba(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ba(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new va},alphaTest:{value:0},uvTransform:{value:new va}},sprite:{diffuse:{value:new ba(16777215)},opacity:{value:1},center:{value:new Bi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new va},alphaMap:{value:null},alphaMapTransform:{value:new va},alphaTest:{value:0}}},Jd={basic:{uniforms:Xc([Ur.common,Ur.specularmap,Ur.envmap,Ur.aomap,Ur.lightmap,Ur.fog]),vertexShader:_a.meshbasic_vert,fragmentShader:_a.meshbasic_frag},lambert:{uniforms:Xc([Ur.common,Ur.specularmap,Ur.envmap,Ur.aomap,Ur.lightmap,Ur.emissivemap,Ur.bumpmap,Ur.normalmap,Ur.displacementmap,Ur.fog,Ur.lights,{emissive:{value:new ba(0)}}]),vertexShader:_a.meshlambert_vert,fragmentShader:_a.meshlambert_frag},phong:{uniforms:Xc([Ur.common,Ur.specularmap,Ur.envmap,Ur.aomap,Ur.lightmap,Ur.emissivemap,Ur.bumpmap,Ur.normalmap,Ur.displacementmap,Ur.fog,Ur.lights,{emissive:{value:new ba(0)},specular:{value:new ba(1118481)},shininess:{value:30}}]),vertexShader:_a.meshphong_vert,fragmentShader:_a.meshphong_frag},standard:{uniforms:Xc([Ur.common,Ur.envmap,Ur.aomap,Ur.lightmap,Ur.emissivemap,Ur.bumpmap,Ur.normalmap,Ur.displacementmap,Ur.roughnessmap,Ur.metalnessmap,Ur.fog,Ur.lights,{emissive:{value:new ba(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_a.meshphysical_vert,fragmentShader:_a.meshphysical_frag},toon:{uniforms:Xc([Ur.common,Ur.aomap,Ur.lightmap,Ur.emissivemap,Ur.bumpmap,Ur.normalmap,Ur.displacementmap,Ur.gradientmap,Ur.fog,Ur.lights,{emissive:{value:new ba(0)}}]),vertexShader:_a.meshtoon_vert,fragmentShader:_a.meshtoon_frag},matcap:{uniforms:Xc([Ur.common,Ur.bumpmap,Ur.normalmap,Ur.displacementmap,Ur.fog,{matcap:{value:null}}]),vertexShader:_a.meshmatcap_vert,fragmentShader:_a.meshmatcap_frag},points:{uniforms:Xc([Ur.points,Ur.fog]),vertexShader:_a.points_vert,fragmentShader:_a.points_frag},dashed:{uniforms:Xc([Ur.common,Ur.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_a.linedashed_vert,fragmentShader:_a.linedashed_frag},depth:{uniforms:Xc([Ur.common,Ur.displacementmap]),vertexShader:_a.depth_vert,fragmentShader:_a.depth_frag},normal:{uniforms:Xc([Ur.common,Ur.bumpmap,Ur.normalmap,Ur.displacementmap,{opacity:{value:1}}]),vertexShader:_a.meshnormal_vert,fragmentShader:_a.meshnormal_frag},sprite:{uniforms:Xc([Ur.sprite,Ur.fog]),vertexShader:_a.sprite_vert,fragmentShader:_a.sprite_frag},background:{uniforms:{uvTransform:{value:new va},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:_a.background_vert,fragmentShader:_a.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new va}},vertexShader:_a.backgroundCube_vert,fragmentShader:_a.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:_a.cube_vert,fragmentShader:_a.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_a.equirect_vert,fragmentShader:_a.equirect_frag},distanceRGBA:{uniforms:Xc([Ur.common,Ur.displacementmap,{referencePosition:{value:new Sn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_a.distanceRGBA_vert,fragmentShader:_a.distanceRGBA_frag},shadow:{uniforms:Xc([Ur.lights,Ur.fog,{color:{value:new ba(0)},opacity:{value:1}}]),vertexShader:_a.shadow_vert,fragmentShader:_a.shadow_frag}};Jd.physical={uniforms:Xc([Jd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new va},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new va},clearcoatNormalScale:{value:new Bi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new va},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new va},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new va},sheen:{value:0},sheenColor:{value:new ba(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new va},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new va},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new va},transmissionSamplerSize:{value:new Bi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new va},attenuationDistance:{value:0},attenuationColor:{value:new ba(0)},specularColor:{value:new ba(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new va},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new va},anisotropyVector:{value:new Bi},anisotropyMap:{value:null},anisotropyMapTransform:{value:new va}}]),vertexShader:_a.meshphysical_vert,fragmentShader:_a.meshphysical_frag};const iw={r:0,b:0,g:0},r0=new fd,ove=new ws;function sve(t,e,n,r,i,o,l){const a=new ba(0);let h=o===!0?0:1,f,v,y=null,w=0,b=null;function A(B){let z=B.isScene===!0?B.background:null;return z&&z.isTexture&&(z=(B.backgroundBlurriness>0?n:e).get(z)),z}function M(B){let z=!1;const q=A(B);q===null?C(a,h):q&&q.isColor&&(C(q,1),z=!0);const V=t.xr.getEnvironmentBlendMode();V==="additive"?r.buffers.color.setClear(0,0,0,1,l):V==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,l),(t.autoClear||z)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function P(B,z){const q=A(z);q&&(q.isCubeTexture||q.mapping===AE)?(v===void 0&&(v=new wf(new _x(1,1,1),new mg({name:"BackgroundCubeMaterial",uniforms:w_(Jd.backgroundCube.uniforms),vertexShader:Jd.backgroundCube.vertexShader,fragmentShader:Jd.backgroundCube.fragmentShader,side:vh,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(V,W,Y){this.matrixWorld.copyPosition(Y.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(v)),r0.copy(z.backgroundRotation),r0.x*=-1,r0.y*=-1,r0.z*=-1,q.isCubeTexture&&q.isRenderTargetTexture===!1&&(r0.y*=-1,r0.z*=-1),v.material.uniforms.envMap.value=q,v.material.uniforms.flipEnvMap.value=q.isCubeTexture&&q.isRenderTargetTexture===!1?-1:1,v.material.uniforms.backgroundBlurriness.value=z.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,v.material.uniforms.backgroundRotation.value.setFromMatrix4(ove.makeRotationFromEuler(r0)),v.material.toneMapped=oo.getTransfer(q.colorSpace)!==ko,(y!==q||w!==q.version||b!==t.toneMapping)&&(v.material.needsUpdate=!0,y=q,w=q.version,b=t.toneMapping),v.layers.enableAll(),B.unshift(v,v.geometry,v.material,0,0,null)):q&&q.isTexture&&(f===void 0&&(f=new wf(new PE(2,2),new mg({name:"BackgroundMaterial",uniforms:w_(Jd.background.uniforms),vertexShader:Jd.background.vertexShader,fragmentShader:Jd.background.fragmentShader,side:pg,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(f)),f.material.uniforms.t2D.value=q,f.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,f.material.toneMapped=oo.getTransfer(q.colorSpace)!==ko,q.matrixAutoUpdate===!0&&q.updateMatrix(),f.material.uniforms.uvTransform.value.copy(q.matrix),(y!==q||w!==q.version||b!==t.toneMapping)&&(f.material.needsUpdate=!0,y=q,w=q.version,b=t.toneMapping),f.layers.enableAll(),B.unshift(f,f.geometry,f.material,0,0,null))}function C(B,z){B.getRGB(iw,cj(t)),r.buffers.color.setClear(iw.r,iw.g,iw.b,z,l)}function k(){v!==void 0&&(v.geometry.dispose(),v.material.dispose(),v=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return a},setClearColor:function(B,z=1){a.set(B),h=z,C(a,h)},getClearAlpha:function(){return h},setClearAlpha:function(B){h=B,C(a,h)},render:M,addToRenderList:P,dispose:k}}function lve(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=w(null);let o=i,l=!1;function a(j,K,re,ie,se){let de=!1;const ue=y(ie,re,K);o!==ue&&(o=ue,f(o.object)),de=b(j,ie,re,se),de&&A(j,ie,re,se),se!==null&&e.update(se,t.ELEMENT_ARRAY_BUFFER),(de||l)&&(l=!1,z(j,K,re,ie),se!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(se).buffer))}function h(){return t.createVertexArray()}function f(j){return t.bindVertexArray(j)}function v(j){return t.deleteVertexArray(j)}function y(j,K,re){const ie=re.wireframe===!0;let se=r[j.id];se===void 0&&(se={},r[j.id]=se);let de=se[K.id];de===void 0&&(de={},se[K.id]=de);let ue=de[ie];return ue===void 0&&(ue=w(h()),de[ie]=ue),ue}function w(j){const K=[],re=[],ie=[];for(let se=0;se<n;se++)K[se]=0,re[se]=0,ie[se]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:re,attributeDivisors:ie,object:j,attributes:{},index:null}}function b(j,K,re,ie){const se=o.attributes,de=K.attributes;let ue=0;const Te=re.getAttributes();for(const pe in Te)if(Te[pe].location>=0){const me=se[pe];let Me=de[pe];if(Me===void 0&&(pe==="instanceMatrix"&&j.instanceMatrix&&(Me=j.instanceMatrix),pe==="instanceColor"&&j.instanceColor&&(Me=j.instanceColor)),me===void 0||me.attribute!==Me||Me&&me.data!==Me.data)return!0;ue++}return o.attributesNum!==ue||o.index!==ie}function A(j,K,re,ie){const se={},de=K.attributes;let ue=0;const Te=re.getAttributes();for(const pe in Te)if(Te[pe].location>=0){let me=de[pe];me===void 0&&(pe==="instanceMatrix"&&j.instanceMatrix&&(me=j.instanceMatrix),pe==="instanceColor"&&j.instanceColor&&(me=j.instanceColor));const Me={};Me.attribute=me,me&&me.data&&(Me.data=me.data),se[pe]=Me,ue++}o.attributes=se,o.attributesNum=ue,o.index=ie}function M(){const j=o.newAttributes;for(let K=0,re=j.length;K<re;K++)j[K]=0}function P(j){C(j,0)}function C(j,K){const re=o.newAttributes,ie=o.enabledAttributes,se=o.attributeDivisors;re[j]=1,ie[j]===0&&(t.enableVertexAttribArray(j),ie[j]=1),se[j]!==K&&(t.vertexAttribDivisor(j,K),se[j]=K)}function k(){const j=o.newAttributes,K=o.enabledAttributes;for(let re=0,ie=K.length;re<ie;re++)K[re]!==j[re]&&(t.disableVertexAttribArray(re),K[re]=0)}function B(j,K,re,ie,se,de,ue){ue===!0?t.vertexAttribIPointer(j,K,re,se,de):t.vertexAttribPointer(j,K,re,ie,se,de)}function z(j,K,re,ie){M();const se=ie.attributes,de=re.getAttributes(),ue=K.defaultAttributeValues;for(const Te in de){const pe=de[Te];if(pe.location>=0){let De=se[Te];if(De===void 0&&(Te==="instanceMatrix"&&j.instanceMatrix&&(De=j.instanceMatrix),Te==="instanceColor"&&j.instanceColor&&(De=j.instanceColor)),De!==void 0){const me=De.normalized,Me=De.itemSize,fe=e.get(De);if(fe===void 0)continue;const ve=fe.buffer,le=fe.type,ye=fe.bytesPerElement,Se=le===t.INT||le===t.UNSIGNED_INT||De.gpuType===sL;if(De.isInterleavedBufferAttribute){const Be=De.data,Ve=Be.stride,tt=De.offset;if(Be.isInstancedInterleavedBuffer){for(let ht=0;ht<pe.locationSize;ht++)C(pe.location+ht,Be.meshPerAttribute);j.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=Be.meshPerAttribute*Be.count)}else for(let ht=0;ht<pe.locationSize;ht++)P(pe.location+ht);t.bindBuffer(t.ARRAY_BUFFER,ve);for(let ht=0;ht<pe.locationSize;ht++)B(pe.location+ht,Me/pe.locationSize,le,me,Ve*ye,(tt+Me/pe.locationSize*ht)*ye,Se)}else{if(De.isInstancedBufferAttribute){for(let Be=0;Be<pe.locationSize;Be++)C(pe.location+Be,De.meshPerAttribute);j.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=De.meshPerAttribute*De.count)}else for(let Be=0;Be<pe.locationSize;Be++)P(pe.location+Be);t.bindBuffer(t.ARRAY_BUFFER,ve);for(let Be=0;Be<pe.locationSize;Be++)B(pe.location+Be,Me/pe.locationSize,le,me,Me*ye,Me/pe.locationSize*Be*ye,Se)}}else if(ue!==void 0){const me=ue[Te];if(me!==void 0)switch(me.length){case 2:t.vertexAttrib2fv(pe.location,me);break;case 3:t.vertexAttrib3fv(pe.location,me);break;case 4:t.vertexAttrib4fv(pe.location,me);break;default:t.vertexAttrib1fv(pe.location,me)}}}}k()}function q(){Y();for(const j in r){const K=r[j];for(const re in K){const ie=K[re];for(const se in ie)v(ie[se].object),delete ie[se];delete K[re]}delete r[j]}}function V(j){if(r[j.id]===void 0)return;const K=r[j.id];for(const re in K){const ie=K[re];for(const se in ie)v(ie[se].object),delete ie[se];delete K[re]}delete r[j.id]}function W(j){for(const K in r){const re=r[K];if(re[j.id]===void 0)continue;const ie=re[j.id];for(const se in ie)v(ie[se].object),delete ie[se];delete re[j.id]}}function Y(){Z(),l=!0,o!==i&&(o=i,f(o.object))}function Z(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:Y,resetDefaultState:Z,dispose:q,releaseStatesOfGeometry:V,releaseStatesOfProgram:W,initAttributes:M,enableAttribute:P,disableUnusedAttributes:k}}function uve(t,e,n){let r;function i(f){r=f}function o(f,v){t.drawArrays(r,f,v),n.update(v,r,1)}function l(f,v,y){y!==0&&(t.drawArraysInstanced(r,f,v,y),n.update(v,r,y))}function a(f,v,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,f,0,v,0,y);let b=0;for(let A=0;A<y;A++)b+=v[A];n.update(b,r,1)}function h(f,v,y,w){if(y===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let A=0;A<f.length;A++)l(f[A],v[A],w[A]);else{b.multiDrawArraysInstancedWEBGL(r,f,0,v,0,w,0,y);let A=0;for(let M=0;M<y;M++)A+=v[M]*w[M];n.update(A,r,1)}}this.setMode=i,this.render=o,this.renderInstances=l,this.renderMultiDraw=a,this.renderMultiDrawInstances=h}function cve(t,e,n,r){let i;function o(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const W=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(W.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function l(W){return!(W!==xf&&r.convert(W)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(W){const Y=W===vx&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(W!==im&&r.convert(W)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&W!==$p&&!Y)}function h(W){if(W==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";W="mediump"}return W==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=n.precision!==void 0?n.precision:"highp";const v=h(f);v!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",v,"instead."),f=v);const y=n.logarithmicDepthBuffer===!0,w=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),b=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),A=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=t.getParameter(t.MAX_TEXTURE_SIZE),P=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),C=t.getParameter(t.MAX_VERTEX_ATTRIBS),k=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),B=t.getParameter(t.MAX_VARYING_VECTORS),z=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),q=A>0,V=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:h,textureFormatReadable:l,textureTypeReadable:a,precision:f,logarithmicDepthBuffer:y,reverseDepthBuffer:w,maxTextures:b,maxVertexTextures:A,maxTextureSize:M,maxCubemapSize:P,maxAttributes:C,maxVertexUniforms:k,maxVaryings:B,maxFragmentUniforms:z,vertexTextures:q,maxSamples:V}}function hve(t){const e=this;let n=null,r=0,i=!1,o=!1;const l=new $m,a=new va,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(y,w){const b=y.length!==0||w||r!==0||i;return i=w,r=y.length,b},this.beginShadows=function(){o=!0,v(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(y,w){n=v(y,w,0)},this.setState=function(y,w,b){const A=y.clippingPlanes,M=y.clipIntersection,P=y.clipShadows,C=t.get(y);if(!i||A===null||A.length===0||o&&!P)o?v(null):f();else{const k=o?0:r,B=k*4;let z=C.clippingState||null;h.value=z,z=v(A,w,B,b);for(let q=0;q!==B;++q)z[q]=n[q];C.clippingState=z,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=k}};function f(){h.value!==n&&(h.value=n,h.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function v(y,w,b,A){const M=y!==null?y.length:0;let P=null;if(M!==0){if(P=h.value,A!==!0||P===null){const C=b+M*4,k=w.matrixWorldInverse;a.getNormalMatrix(k),(P===null||P.length<C)&&(P=new Float32Array(C));for(let B=0,z=b;B!==M;++B,z+=4)l.copy(y[B]).applyMatrix4(k,a),l.normal.toArray(P,z),P[z+3]=l.constant}h.value=P,h.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,P}}function fve(t){let e=new WeakMap;function n(l,a){return a===iP?l.mapping=v_:a===aP&&(l.mapping=y_),l}function r(l){if(l&&l.isTexture){const a=l.mapping;if(a===iP||a===aP)if(e.has(l)){const h=e.get(l).texture;return n(h,l.mapping)}else{const h=l.image;if(h&&h.height>0){const f=new tme(h.height);return f.fromEquirectangularTexture(t,l),e.set(l,f),l.addEventListener("dispose",i),n(f.texture,l.mapping)}else return null}}return l}function i(l){const a=l.target;a.removeEventListener("dispose",i);const h=e.get(a);h!==void 0&&(e.delete(a),h.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}const Hy=4,sB=[.125,.215,.35,.446,.526,.582],v0=20,vC=new vj,lB=new ba;let yC=null,_C=0,bC=0,xC=!1;const c0=(1+Math.sqrt(5))/2,fy=1/c0,uB=[new Sn(-c0,fy,0),new Sn(c0,fy,0),new Sn(-fy,0,c0),new Sn(fy,0,c0),new Sn(0,c0,-fy),new Sn(0,c0,fy),new Sn(-1,1,-1),new Sn(1,1,-1),new Sn(-1,1,1),new Sn(1,1,1)],dve=new Sn;class cB{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100,o={}){const{size:l=256,position:a=dve}=o;yC=this._renderer.getRenderTarget(),_C=this._renderer.getActiveCubeFace(),bC=this._renderer.getActiveMipmapLevel(),xC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(e,r,i,h,a),n>0&&this._blur(h,0,0,n),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=dB(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=fB(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(yC,_C,bC),this._renderer.xr.enabled=xC,e.scissorTest=!1,aw(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===v_||e.mapping===y_?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),yC=this._renderer.getRenderTarget(),_C=this._renderer.getActiveCubeFace(),bC=this._renderer.getActiveMipmapLevel(),xC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:np,minFilter:np,generateMipmaps:!1,type:vx,format:xf,colorSpace:x_,depthBuffer:!1},i=hB(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=hB(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=pve(o)),this._blurMaterial=mve(o,e,n)}return i}_compileMaterial(e){const n=new wf(this._lodPlanes[0],e);this._renderer.compile(n,vC)}_sceneToCubeUV(e,n,r,i,o){const h=new vf(90,1,n,r),f=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],y=this._renderer,w=y.autoClear,b=y.toneMapping;y.getClearColor(lB),y.toneMapping=ng,y.autoClear=!1;const A=new sj({name:"PMREM.Background",side:vh,depthWrite:!1,depthTest:!1}),M=new wf(new _x,A);let P=!1;const C=e.background;C?C.isColor&&(A.color.copy(C),e.background=null,P=!0):(A.color.copy(lB),P=!0);for(let k=0;k<6;k++){const B=k%3;B===0?(h.up.set(0,f[k],0),h.position.set(o.x,o.y,o.z),h.lookAt(o.x+v[k],o.y,o.z)):B===1?(h.up.set(0,0,f[k]),h.position.set(o.x,o.y,o.z),h.lookAt(o.x,o.y+v[k],o.z)):(h.up.set(0,f[k],0),h.position.set(o.x,o.y,o.z),h.lookAt(o.x,o.y,o.z+v[k]));const z=this._cubeSize;aw(i,B*z,k>2?z:0,z,z),y.setRenderTarget(i),P&&y.render(M,h),y.render(e,h)}M.geometry.dispose(),M.material.dispose(),y.toneMapping=b,y.autoClear=w,e.background=C}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===v_||e.mapping===y_;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=dB()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=fB());const o=i?this._cubemapMaterial:this._equirectMaterial,l=new wf(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const h=this._cubeSize;aw(n,0,0,3*h,2*h),r.setRenderTarget(n),r.render(l,vC)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let o=1;o<i;o++){const l=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=uB[(i-o-1)%uB.length];this._blur(e,o-1,o,l,a)}n.autoClear=r}_blur(e,n,r,i,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,n,r,i,"latitudinal",o),this._halfBlur(l,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,l,a){const h=this._renderer,f=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const v=3,y=new wf(this._lodPlanes[i],f),w=f.uniforms,b=this._sizeLods[r]-1,A=isFinite(o)?Math.PI/(2*b):2*Math.PI/(2*v0-1),M=o/A,P=isFinite(o)?1+Math.floor(v*M):v0;P>v0&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${P} samples when the maximum is set to ${v0}`);const C=[];let k=0;for(let W=0;W<v0;++W){const Y=W/M,Z=Math.exp(-Y*Y/2);C.push(Z),W===0?k+=Z:W<P&&(k+=2*Z)}for(let W=0;W<C.length;W++)C[W]=C[W]/k;w.envMap.value=e.texture,w.samples.value=P,w.weights.value=C,w.latitudinal.value=l==="latitudinal",a&&(w.poleAxis.value=a);const{_lodMax:B}=this;w.dTheta.value=A,w.mipInt.value=B-r;const z=this._sizeLods[i],q=3*z*(i>B-Hy?i-B+Hy:0),V=4*(this._cubeSize-z);aw(n,q,V,3*z,2*z),h.setRenderTarget(n),h.render(y,vC)}}function pve(t){const e=[],n=[],r=[];let i=t;const o=t-Hy+1+sB.length;for(let l=0;l<o;l++){const a=Math.pow(2,i);n.push(a);let h=1/a;l>t-Hy?h=sB[l-t+Hy-1]:l===0&&(h=0),r.push(h);const f=1/(a-2),v=-f,y=1+f,w=[v,v,y,v,y,y,v,v,y,y,v,y],b=6,A=6,M=3,P=2,C=1,k=new Float32Array(M*A*b),B=new Float32Array(P*A*b),z=new Float32Array(C*A*b);for(let V=0;V<b;V++){const W=V%3*2/3-1,Y=V>2?0:-1,Z=[W,Y,0,W+2/3,Y,0,W+2/3,Y+1,0,W,Y,0,W+2/3,Y+1,0,W,Y+1,0];k.set(Z,M*A*V),B.set(w,P*A*V);const j=[V,V,V,V,V,V];z.set(j,C*A*V)}const q=new Yh;q.setAttribute("position",new sd(k,M)),q.setAttribute("uv",new sd(B,P)),q.setAttribute("faceIndex",new sd(z,C)),e.push(q),i>Hy&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function hB(t,e,n){const r=new B0(t,e,n);return r.texture.mapping=AE,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function aw(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function mve(t,e,n){const r=new Float32Array(v0),i=new Sn(0,1,0);return new mg({name:"SphericalGaussianBlur",defines:{n:v0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:vL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:tg,depthTest:!1,depthWrite:!1})}function fB(){return new mg({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:tg,depthTest:!1,depthWrite:!1})}function dB(){return new mg({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:tg,depthTest:!1,depthWrite:!1})}function vL(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function gve(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const h=a.mapping,f=h===iP||h===aP,v=h===v_||h===y_;if(f||v){let y=e.get(a);const w=y!==void 0?y.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==w)return n===null&&(n=new cB(t)),y=f?n.fromEquirectangular(a,y):n.fromCubemap(a,y),y.texture.pmremVersion=a.pmremVersion,e.set(a,y),y.texture;if(y!==void 0)return y.texture;{const b=a.image;return f&&b&&b.height>0||v&&b&&i(b)?(n===null&&(n=new cB(t)),y=f?n.fromEquirectangular(a):n.fromCubemap(a),y.texture.pmremVersion=a.pmremVersion,e.set(a,y),a.addEventListener("dispose",o),y.texture):null}}}return a}function i(a){let h=0;const f=6;for(let v=0;v<f;v++)a[v]!==void 0&&h++;return h===f}function o(a){const h=a.target;h.removeEventListener("dispose",o);const f=e.get(h);f!==void 0&&(e.delete(h),f.dispose())}function l(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:l}}function vve(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&u0("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function yve(t,e,n,r){const i={},o=new WeakMap;function l(y){const w=y.target;w.index!==null&&e.remove(w.index);for(const A in w.attributes)e.remove(w.attributes[A]);w.removeEventListener("dispose",l),delete i[w.id];const b=o.get(w);b&&(e.remove(b),o.delete(w)),r.releaseStatesOfGeometry(w),w.isInstancedBufferGeometry===!0&&delete w._maxInstanceCount,n.memory.geometries--}function a(y,w){return i[w.id]===!0||(w.addEventListener("dispose",l),i[w.id]=!0,n.memory.geometries++),w}function h(y){const w=y.attributes;for(const b in w)e.update(w[b],t.ARRAY_BUFFER)}function f(y){const w=[],b=y.index,A=y.attributes.position;let M=0;if(b!==null){const k=b.array;M=b.version;for(let B=0,z=k.length;B<z;B+=3){const q=k[B+0],V=k[B+1],W=k[B+2];w.push(q,V,V,W,W,q)}}else if(A!==void 0){const k=A.array;M=A.version;for(let B=0,z=k.length/3-1;B<z;B+=3){const q=B+0,V=B+1,W=B+2;w.push(q,V,V,W,W,q)}}else return;const P=new(rj(w)?uj:lj)(w,1);P.version=M;const C=o.get(y);C&&e.remove(C),o.set(y,P)}function v(y){const w=o.get(y);if(w){const b=y.index;b!==null&&w.version<b.version&&f(y)}else f(y);return o.get(y)}return{get:a,update:h,getWireframeAttribute:v}}function _ve(t,e,n){let r;function i(w){r=w}let o,l;function a(w){o=w.type,l=w.bytesPerElement}function h(w,b){t.drawElements(r,b,o,w*l),n.update(b,r,1)}function f(w,b,A){A!==0&&(t.drawElementsInstanced(r,b,o,w*l,A),n.update(b,r,A))}function v(w,b,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,b,0,o,w,0,A);let P=0;for(let C=0;C<A;C++)P+=b[C];n.update(P,r,1)}function y(w,b,A,M){if(A===0)return;const P=e.get("WEBGL_multi_draw");if(P===null)for(let C=0;C<w.length;C++)f(w[C]/l,b[C],M[C]);else{P.multiDrawElementsInstancedWEBGL(r,b,0,o,w,0,M,0,A);let C=0;for(let k=0;k<A;k++)C+=b[k]*M[k];n.update(C,r,1)}}this.setMode=i,this.setIndex=a,this.render=h,this.renderInstances=f,this.renderMultiDraw=v,this.renderMultiDrawInstances=y}function bve(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,l,a){switch(n.calls++,l){case t.TRIANGLES:n.triangles+=a*(o/3);break;case t.LINES:n.lines+=a*(o/2);break;case t.LINE_STRIP:n.lines+=a*(o-1);break;case t.LINE_LOOP:n.lines+=a*o;break;case t.POINTS:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function xve(t,e,n){const r=new WeakMap,i=new Sl;function o(l,a,h){const f=l.morphTargetInfluences,v=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,y=v!==void 0?v.length:0;let w=r.get(a);if(w===void 0||w.count!==y){let Z=function(){W.dispose(),r.delete(a),a.removeEventListener("dispose",Z)};w!==void 0&&w.texture.dispose();const b=a.morphAttributes.position!==void 0,A=a.morphAttributes.normal!==void 0,M=a.morphAttributes.color!==void 0,P=a.morphAttributes.position||[],C=a.morphAttributes.normal||[],k=a.morphAttributes.color||[];let B=0;b===!0&&(B=1),A===!0&&(B=2),M===!0&&(B=3);let z=a.attributes.position.count*B,q=1;z>e.maxTextureSize&&(q=Math.ceil(z/e.maxTextureSize),z=e.maxTextureSize);const V=new Float32Array(z*q*4*y),W=new ij(V,z,q,y);W.type=$p,W.needsUpdate=!0;const Y=B*4;for(let j=0;j<y;j++){const K=P[j],re=C[j],ie=k[j],se=z*q*4*j;for(let de=0;de<K.count;de++){const ue=de*Y;b===!0&&(i.fromBufferAttribute(K,de),V[se+ue+0]=i.x,V[se+ue+1]=i.y,V[se+ue+2]=i.z,V[se+ue+3]=0),A===!0&&(i.fromBufferAttribute(re,de),V[se+ue+4]=i.x,V[se+ue+5]=i.y,V[se+ue+6]=i.z,V[se+ue+7]=0),M===!0&&(i.fromBufferAttribute(ie,de),V[se+ue+8]=i.x,V[se+ue+9]=i.y,V[se+ue+10]=i.z,V[se+ue+11]=ie.itemSize===4?i.w:1)}}w={count:y,texture:W,size:new Bi(z,q)},r.set(a,w),a.addEventListener("dispose",Z)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)h.getUniforms().setValue(t,"morphTexture",l.morphTexture,n);else{let b=0;for(let M=0;M<f.length;M++)b+=f[M];const A=a.morphTargetsRelative?1:1-b;h.getUniforms().setValue(t,"morphTargetBaseInfluence",A),h.getUniforms().setValue(t,"morphTargetInfluences",f)}h.getUniforms().setValue(t,"morphTargetsTexture",w.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",w.size)}return{update:o}}function wve(t,e,n,r){let i=new WeakMap;function o(h){const f=r.render.frame,v=h.geometry,y=e.get(h,v);if(i.get(y)!==f&&(e.update(y),i.set(y,f)),h.isInstancedMesh&&(h.hasEventListener("dispose",a)===!1&&h.addEventListener("dispose",a),i.get(h)!==f&&(n.update(h.instanceMatrix,t.ARRAY_BUFFER),h.instanceColor!==null&&n.update(h.instanceColor,t.ARRAY_BUFFER),i.set(h,f))),h.isSkinnedMesh){const w=h.skeleton;i.get(w)!==f&&(w.update(),i.set(w,f))}return y}function l(){i=new WeakMap}function a(h){const f=h.target;f.removeEventListener("dispose",a),n.remove(f.instanceMatrix),f.instanceColor!==null&&n.remove(f.instanceColor)}return{update:o,dispose:l}}const _j=new Ic,pB=new mj(1,1),bj=new ij,xj=new Bpe,wj=new fj,mB=[],gB=[],vB=new Float32Array(16),yB=new Float32Array(9),_B=new Float32Array(4);function N_(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=mB[i];if(o===void 0&&(o=new Float32Array(i),mB[i]=o),e!==0){r.toArray(o,0);for(let l=1,a=0;l!==e;++l)a+=n,t[l].toArray(o,a)}return o}function Mu(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Au(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function RE(t,e){let n=gB[e];n===void 0&&(n=new Int32Array(e),gB[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Sve(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Eve(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mu(n,e))return;t.uniform2fv(this.addr,e),Au(n,e)}}function Tve(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Mu(n,e))return;t.uniform3fv(this.addr,e),Au(n,e)}}function Mve(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mu(n,e))return;t.uniform4fv(this.addr,e),Au(n,e)}}function Ave(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Mu(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Au(n,e)}else{if(Mu(n,r))return;_B.set(r),t.uniformMatrix2fv(this.addr,!1,_B),Au(n,r)}}function Cve(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Mu(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Au(n,e)}else{if(Mu(n,r))return;yB.set(r),t.uniformMatrix3fv(this.addr,!1,yB),Au(n,r)}}function Pve(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Mu(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Au(n,e)}else{if(Mu(n,r))return;vB.set(r),t.uniformMatrix4fv(this.addr,!1,vB),Au(n,r)}}function Rve(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Dve(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mu(n,e))return;t.uniform2iv(this.addr,e),Au(n,e)}}function Lve(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Mu(n,e))return;t.uniform3iv(this.addr,e),Au(n,e)}}function Ive(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mu(n,e))return;t.uniform4iv(this.addr,e),Au(n,e)}}function Ove(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Nve(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mu(n,e))return;t.uniform2uiv(this.addr,e),Au(n,e)}}function kve(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Mu(n,e))return;t.uniform3uiv(this.addr,e),Au(n,e)}}function Fve(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mu(n,e))return;t.uniform4uiv(this.addr,e),Au(n,e)}}function Bve(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let o;this.type===t.SAMPLER_2D_SHADOW?(pB.compareFunction=nj,o=pB):o=_j,n.setTexture2D(e||o,i)}function zve(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||xj,i)}function Uve(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||wj,i)}function jve(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||bj,i)}function Vve(t){switch(t){case 5126:return Sve;case 35664:return Eve;case 35665:return Tve;case 35666:return Mve;case 35674:return Ave;case 35675:return Cve;case 35676:return Pve;case 5124:case 35670:return Rve;case 35667:case 35671:return Dve;case 35668:case 35672:return Lve;case 35669:case 35673:return Ive;case 5125:return Ove;case 36294:return Nve;case 36295:return kve;case 36296:return Fve;case 35678:case 36198:case 36298:case 36306:case 35682:return Bve;case 35679:case 36299:case 36307:return zve;case 35680:case 36300:case 36308:case 36293:return Uve;case 36289:case 36303:case 36311:case 36292:return jve}}function Gve(t,e){t.uniform1fv(this.addr,e)}function qve(t,e){const n=N_(e,this.size,2);t.uniform2fv(this.addr,n)}function Hve(t,e){const n=N_(e,this.size,3);t.uniform3fv(this.addr,n)}function $ve(t,e){const n=N_(e,this.size,4);t.uniform4fv(this.addr,n)}function Wve(t,e){const n=N_(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Xve(t,e){const n=N_(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Zve(t,e){const n=N_(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Yve(t,e){t.uniform1iv(this.addr,e)}function Kve(t,e){t.uniform2iv(this.addr,e)}function Jve(t,e){t.uniform3iv(this.addr,e)}function Qve(t,e){t.uniform4iv(this.addr,e)}function eye(t,e){t.uniform1uiv(this.addr,e)}function tye(t,e){t.uniform2uiv(this.addr,e)}function nye(t,e){t.uniform3uiv(this.addr,e)}function rye(t,e){t.uniform4uiv(this.addr,e)}function iye(t,e,n){const r=this.cache,i=e.length,o=RE(n,i);Mu(r,o)||(t.uniform1iv(this.addr,o),Au(r,o));for(let l=0;l!==i;++l)n.setTexture2D(e[l]||_j,o[l])}function aye(t,e,n){const r=this.cache,i=e.length,o=RE(n,i);Mu(r,o)||(t.uniform1iv(this.addr,o),Au(r,o));for(let l=0;l!==i;++l)n.setTexture3D(e[l]||xj,o[l])}function oye(t,e,n){const r=this.cache,i=e.length,o=RE(n,i);Mu(r,o)||(t.uniform1iv(this.addr,o),Au(r,o));for(let l=0;l!==i;++l)n.setTextureCube(e[l]||wj,o[l])}function sye(t,e,n){const r=this.cache,i=e.length,o=RE(n,i);Mu(r,o)||(t.uniform1iv(this.addr,o),Au(r,o));for(let l=0;l!==i;++l)n.setTexture2DArray(e[l]||bj,o[l])}function lye(t){switch(t){case 5126:return Gve;case 35664:return qve;case 35665:return Hve;case 35666:return $ve;case 35674:return Wve;case 35675:return Xve;case 35676:return Zve;case 5124:case 35670:return Yve;case 35667:case 35671:return Kve;case 35668:case 35672:return Jve;case 35669:case 35673:return Qve;case 5125:return eye;case 36294:return tye;case 36295:return nye;case 36296:return rye;case 35678:case 36198:case 36298:case 36306:case 35682:return iye;case 35679:case 36299:case 36307:return aye;case 35680:case 36300:case 36308:case 36293:return oye;case 36289:case 36303:case 36311:case 36292:return sye}}class uye{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=Vve(n.type)}}class cye{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=lye(n.type)}}class hye{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,l=i.length;o!==l;++o){const a=i[o];a.setValue(e,n[a.id],r)}}}const wC=/(\w+)(\])?(\[|\.)?/g;function bB(t,e){t.seq.push(e),t.map[e.id]=e}function fye(t,e,n){const r=t.name,i=r.length;for(wC.lastIndex=0;;){const o=wC.exec(r),l=wC.lastIndex;let a=o[1];const h=o[2]==="]",f=o[3];if(h&&(a=a|0),f===void 0||f==="["&&l+2===i){bB(n,f===void 0?new uye(a,t,e):new cye(a,t,e));break}else{let y=n.map[a];y===void 0&&(y=new hye(a),bB(n,y)),n=y}}}class Iw{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),l=e.getUniformLocation(n,o.name);fye(o,l,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,l=n.length;o!==l;++o){const a=n[o],h=r[a.id];h.needsUpdate!==!1&&a.setValue(e,h.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const l=e[i];l.id in n&&r.push(l)}return r}}function xB(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const dye=37297;let pye=0;function mye(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let l=i;l<o;l++){const a=l+1;r.push(`${a===e?">":" "} ${a}: ${n[l]}`)}return r.join(`
`)}const wB=new va;function gye(t){oo._getMatrix(wB,oo.workingColorSpace,t);const e=`mat3( ${wB.elements.map(n=>n.toFixed(4))} )`;switch(oo.getTransfer(t)){case bS:return[e,"LinearTransferOETF"];case ko:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function SB(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const l=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+mye(t.getShaderSource(e),l)}else return i}function vye(t,e){const n=gye(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function yye(t,e){let n;switch(e){case upe:n="Linear";break;case cpe:n="Reinhard";break;case hpe:n="Cineon";break;case fpe:n="ACESFilmic";break;case ppe:n="AgX";break;case mpe:n="Neutral";break;case dpe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const ow=new Sn;function _ye(){oo.getLuminanceCoefficients(ow);const t=ow.x.toFixed(4),e=ow.y.toFixed(4),n=ow.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function bye(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(db).join(`
`)}function xye(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function wye(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),l=o.name;let a=1;o.type===t.FLOAT_MAT2&&(a=2),o.type===t.FLOAT_MAT3&&(a=3),o.type===t.FLOAT_MAT4&&(a=4),n[l]={type:o.type,location:t.getAttribLocation(e,l),locationSize:a}}return n}function db(t){return t!==""}function EB(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function TB(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Sye=/^[ \t]*#include +<([\w\d./]+)>/gm;function BP(t){return t.replace(Sye,Tye)}const Eye=new Map;function Tye(t,e){let n=_a[e];if(n===void 0){const r=Eye.get(e);if(r!==void 0)n=_a[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return BP(n)}const Mye=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function MB(t){return t.replace(Mye,Aye)}function Aye(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function AB(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Cye(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===G9?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===q9?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Gp&&(e="SHADOWMAP_TYPE_VSM"),e}function Pye(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case v_:case y_:e="ENVMAP_TYPE_CUBE";break;case AE:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Rye(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case y_:e="ENVMAP_MODE_REFRACTION";break}return e}function Dye(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case oL:e="ENVMAP_BLENDING_MULTIPLY";break;case spe:e="ENVMAP_BLENDING_MIX";break;case lpe:e="ENVMAP_BLENDING_ADD";break}return e}function Lye(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Iye(t,e,n,r){const i=t.getContext(),o=n.defines;let l=n.vertexShader,a=n.fragmentShader;const h=Cye(n),f=Pye(n),v=Rye(n),y=Dye(n),w=Lye(n),b=bye(n),A=xye(o),M=i.createProgram();let P,C,k=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(P=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A].filter(db).join(`
`),P.length>0&&(P+=`
`),C=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A].filter(db).join(`
`),C.length>0&&(C+=`
`)):(P=[AB(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(db).join(`
`),C=[AB(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+v:"",n.envMap?"#define "+y:"",w?"#define CUBEUV_TEXEL_WIDTH "+w.texelWidth:"",w?"#define CUBEUV_TEXEL_HEIGHT "+w.texelHeight:"",w?"#define CUBEUV_MAX_MIP "+w.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ng?"#define TONE_MAPPING":"",n.toneMapping!==ng?_a.tonemapping_pars_fragment:"",n.toneMapping!==ng?yye("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",_a.colorspace_pars_fragment,vye("linearToOutputTexel",n.outputColorSpace),_ye(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(db).join(`
`)),l=BP(l),l=EB(l,n),l=TB(l,n),a=BP(a),a=EB(a,n),a=TB(a,n),l=MB(l),a=MB(a),n.isRawShaderMaterial!==!0&&(k=`#version 300 es
`,P=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+P,C=["#define varying in",n.glslVersion===R6?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===R6?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+C);const B=k+P+l,z=k+C+a,q=xB(i,i.VERTEX_SHADER,B),V=xB(i,i.FRAGMENT_SHADER,z);i.attachShader(M,q),i.attachShader(M,V),n.index0AttributeName!==void 0?i.bindAttribLocation(M,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(M,0,"position"),i.linkProgram(M);function W(K){if(t.debug.checkShaderErrors){const re=i.getProgramInfoLog(M).trim(),ie=i.getShaderInfoLog(q).trim(),se=i.getShaderInfoLog(V).trim();let de=!0,ue=!0;if(i.getProgramParameter(M,i.LINK_STATUS)===!1)if(de=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,M,q,V);else{const Te=SB(i,q,"vertex"),pe=SB(i,V,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(M,i.VALIDATE_STATUS)+`

Material Name: `+K.name+`
Material Type: `+K.type+`

Program Info Log: `+re+`
`+Te+`
`+pe)}else re!==""?console.warn("THREE.WebGLProgram: Program Info Log:",re):(ie===""||se==="")&&(ue=!1);ue&&(K.diagnostics={runnable:de,programLog:re,vertexShader:{log:ie,prefix:P},fragmentShader:{log:se,prefix:C}})}i.deleteShader(q),i.deleteShader(V),Y=new Iw(i,M),Z=wye(i,M)}let Y;this.getUniforms=function(){return Y===void 0&&W(this),Y};let Z;this.getAttributes=function(){return Z===void 0&&W(this),Z};let j=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return j===!1&&(j=i.getProgramParameter(M,dye)),j},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(M),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=pye++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=q,this.fragmentShader=V,this}let Oye=0;class Nye{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),l=this._getShaderCacheForMaterial(e);return l.has(i)===!1&&(l.add(i),i.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new kye(e),n.set(e,r)),r}}class kye{constructor(e){this.id=Oye++,this.code=e,this.usedTimes=0}}function Fye(t,e,n,r,i,o,l){const a=new aj,h=new Nye,f=new Set,v=[],y=i.logarithmicDepthBuffer,w=i.vertexTextures;let b=i.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(Z){return f.add(Z),Z===0?"uv":`uv${Z}`}function P(Z,j,K,re,ie){const se=re.fog,de=ie.geometry,ue=Z.isMeshStandardMaterial?re.environment:null,Te=(Z.isMeshStandardMaterial?n:e).get(Z.envMap||ue),pe=Te&&Te.mapping===AE?Te.image.height:null,De=A[Z.type];Z.precision!==null&&(b=i.getMaxPrecision(Z.precision),b!==Z.precision&&console.warn("THREE.WebGLProgram.getParameters:",Z.precision,"not supported, using",b,"instead."));const me=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,Me=me!==void 0?me.length:0;let fe=0;de.morphAttributes.position!==void 0&&(fe=1),de.morphAttributes.normal!==void 0&&(fe=2),de.morphAttributes.color!==void 0&&(fe=3);let ve,le,ye,Se;if(De){const qt=Jd[De];ve=qt.vertexShader,le=qt.fragmentShader}else ve=Z.vertexShader,le=Z.fragmentShader,h.update(Z),ye=h.getVertexShaderID(Z),Se=h.getFragmentShaderID(Z);const Be=t.getRenderTarget(),Ve=t.state.buffers.depth.getReversed(),tt=ie.isInstancedMesh===!0,ht=ie.isBatchedMesh===!0,it=!!Z.map,gt=!!Z.matcap,$t=!!Te,He=!!Z.aoMap,Ct=!!Z.lightMap,Xe=!!Z.bumpMap,tn=!!Z.normalMap,Kt=!!Z.displacementMap,Jt=!!Z.emissiveMap,Ht=!!Z.metalnessMap,$e=!!Z.roughnessMap,Ee=Z.anisotropy>0,_t=Z.clearcoat>0,jt=Z.dispersion>0,vt=Z.iridescence>0,Pt=Z.sheen>0,vn=Z.transmission>0,hn=Ee&&!!Z.anisotropyMap,pn=_t&&!!Z.clearcoatMap,nn=_t&&!!Z.clearcoatNormalMap,Ft=_t&&!!Z.clearcoatRoughnessMap,In=vt&&!!Z.iridescenceMap,Pn=vt&&!!Z.iridescenceThicknessMap,ir=Pt&&!!Z.sheenColorMap,mt=Pt&&!!Z.sheenRoughnessMap,ge=!!Z.specularMap,ke=!!Z.specularColorMap,We=!!Z.specularIntensityMap,Ce=vn&&!!Z.transmissionMap,Qe=vn&&!!Z.thicknessMap,et=!!Z.gradientMap,ut=!!Z.alphaMap,lt=Z.alphaTest>0,xt=!!Z.alphaHash,Dt=!!Z.extensions;let zt=ng;Z.toneMapped&&(Be===null||Be.isXRRenderTarget===!0)&&(zt=t.toneMapping);const Tn={shaderID:De,shaderType:Z.type,shaderName:Z.name,vertexShader:ve,fragmentShader:le,defines:Z.defines,customVertexShaderID:ye,customFragmentShaderID:Se,isRawShaderMaterial:Z.isRawShaderMaterial===!0,glslVersion:Z.glslVersion,precision:b,batching:ht,batchingColor:ht&&ie._colorsTexture!==null,instancing:tt,instancingColor:tt&&ie.instanceColor!==null,instancingMorph:tt&&ie.morphTexture!==null,supportsVertexTextures:w,outputColorSpace:Be===null?t.outputColorSpace:Be.isXRRenderTarget===!0?Be.texture.colorSpace:x_,alphaToCoverage:!!Z.alphaToCoverage,map:it,matcap:gt,envMap:$t,envMapMode:$t&&Te.mapping,envMapCubeUVHeight:pe,aoMap:He,lightMap:Ct,bumpMap:Xe,normalMap:tn,displacementMap:w&&Kt,emissiveMap:Jt,normalMapObjectSpace:tn&&Z.normalMapType===_pe,normalMapTangentSpace:tn&&Z.normalMapType===dL,metalnessMap:Ht,roughnessMap:$e,anisotropy:Ee,anisotropyMap:hn,clearcoat:_t,clearcoatMap:pn,clearcoatNormalMap:nn,clearcoatRoughnessMap:Ft,dispersion:jt,iridescence:vt,iridescenceMap:In,iridescenceThicknessMap:Pn,sheen:Pt,sheenColorMap:ir,sheenRoughnessMap:mt,specularMap:ge,specularColorMap:ke,specularIntensityMap:We,transmission:vn,transmissionMap:Ce,thicknessMap:Qe,gradientMap:et,opaque:Z.transparent===!1&&Z.blending===r_&&Z.alphaToCoverage===!1,alphaMap:ut,alphaTest:lt,alphaHash:xt,combine:Z.combine,mapUv:it&&M(Z.map.channel),aoMapUv:He&&M(Z.aoMap.channel),lightMapUv:Ct&&M(Z.lightMap.channel),bumpMapUv:Xe&&M(Z.bumpMap.channel),normalMapUv:tn&&M(Z.normalMap.channel),displacementMapUv:Kt&&M(Z.displacementMap.channel),emissiveMapUv:Jt&&M(Z.emissiveMap.channel),metalnessMapUv:Ht&&M(Z.metalnessMap.channel),roughnessMapUv:$e&&M(Z.roughnessMap.channel),anisotropyMapUv:hn&&M(Z.anisotropyMap.channel),clearcoatMapUv:pn&&M(Z.clearcoatMap.channel),clearcoatNormalMapUv:nn&&M(Z.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ft&&M(Z.clearcoatRoughnessMap.channel),iridescenceMapUv:In&&M(Z.iridescenceMap.channel),iridescenceThicknessMapUv:Pn&&M(Z.iridescenceThicknessMap.channel),sheenColorMapUv:ir&&M(Z.sheenColorMap.channel),sheenRoughnessMapUv:mt&&M(Z.sheenRoughnessMap.channel),specularMapUv:ge&&M(Z.specularMap.channel),specularColorMapUv:ke&&M(Z.specularColorMap.channel),specularIntensityMapUv:We&&M(Z.specularIntensityMap.channel),transmissionMapUv:Ce&&M(Z.transmissionMap.channel),thicknessMapUv:Qe&&M(Z.thicknessMap.channel),alphaMapUv:ut&&M(Z.alphaMap.channel),vertexTangents:!!de.attributes.tangent&&(tn||Ee),vertexColors:Z.vertexColors,vertexAlphas:Z.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,pointsUvs:ie.isPoints===!0&&!!de.attributes.uv&&(it||ut),fog:!!se,useFog:Z.fog===!0,fogExp2:!!se&&se.isFogExp2,flatShading:Z.flatShading===!0,sizeAttenuation:Z.sizeAttenuation===!0,logarithmicDepthBuffer:y,reverseDepthBuffer:Ve,skinning:ie.isSkinnedMesh===!0,morphTargets:de.morphAttributes.position!==void 0,morphNormals:de.morphAttributes.normal!==void 0,morphColors:de.morphAttributes.color!==void 0,morphTargetsCount:Me,morphTextureStride:fe,numDirLights:j.directional.length,numPointLights:j.point.length,numSpotLights:j.spot.length,numSpotLightMaps:j.spotLightMap.length,numRectAreaLights:j.rectArea.length,numHemiLights:j.hemi.length,numDirLightShadows:j.directionalShadowMap.length,numPointLightShadows:j.pointShadowMap.length,numSpotLightShadows:j.spotShadowMap.length,numSpotLightShadowsWithMaps:j.numSpotLightShadowsWithMaps,numLightProbes:j.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:Z.dithering,shadowMapEnabled:t.shadowMap.enabled&&K.length>0,shadowMapType:t.shadowMap.type,toneMapping:zt,decodeVideoTexture:it&&Z.map.isVideoTexture===!0&&oo.getTransfer(Z.map.colorSpace)===ko,decodeVideoTextureEmissive:Jt&&Z.emissiveMap.isVideoTexture===!0&&oo.getTransfer(Z.emissiveMap.colorSpace)===ko,premultipliedAlpha:Z.premultipliedAlpha,doubleSided:Z.side===qp,flipSided:Z.side===vh,useDepthPacking:Z.depthPacking>=0,depthPacking:Z.depthPacking||0,index0AttributeName:Z.index0AttributeName,extensionClipCullDistance:Dt&&Z.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Dt&&Z.extensions.multiDraw===!0||ht)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:Z.customProgramCacheKey()};return Tn.vertexUv1s=f.has(1),Tn.vertexUv2s=f.has(2),Tn.vertexUv3s=f.has(3),f.clear(),Tn}function C(Z){const j=[];if(Z.shaderID?j.push(Z.shaderID):(j.push(Z.customVertexShaderID),j.push(Z.customFragmentShaderID)),Z.defines!==void 0)for(const K in Z.defines)j.push(K),j.push(Z.defines[K]);return Z.isRawShaderMaterial===!1&&(k(j,Z),B(j,Z),j.push(t.outputColorSpace)),j.push(Z.customProgramCacheKey),j.join()}function k(Z,j){Z.push(j.precision),Z.push(j.outputColorSpace),Z.push(j.envMapMode),Z.push(j.envMapCubeUVHeight),Z.push(j.mapUv),Z.push(j.alphaMapUv),Z.push(j.lightMapUv),Z.push(j.aoMapUv),Z.push(j.bumpMapUv),Z.push(j.normalMapUv),Z.push(j.displacementMapUv),Z.push(j.emissiveMapUv),Z.push(j.metalnessMapUv),Z.push(j.roughnessMapUv),Z.push(j.anisotropyMapUv),Z.push(j.clearcoatMapUv),Z.push(j.clearcoatNormalMapUv),Z.push(j.clearcoatRoughnessMapUv),Z.push(j.iridescenceMapUv),Z.push(j.iridescenceThicknessMapUv),Z.push(j.sheenColorMapUv),Z.push(j.sheenRoughnessMapUv),Z.push(j.specularMapUv),Z.push(j.specularColorMapUv),Z.push(j.specularIntensityMapUv),Z.push(j.transmissionMapUv),Z.push(j.thicknessMapUv),Z.push(j.combine),Z.push(j.fogExp2),Z.push(j.sizeAttenuation),Z.push(j.morphTargetsCount),Z.push(j.morphAttributeCount),Z.push(j.numDirLights),Z.push(j.numPointLights),Z.push(j.numSpotLights),Z.push(j.numSpotLightMaps),Z.push(j.numHemiLights),Z.push(j.numRectAreaLights),Z.push(j.numDirLightShadows),Z.push(j.numPointLightShadows),Z.push(j.numSpotLightShadows),Z.push(j.numSpotLightShadowsWithMaps),Z.push(j.numLightProbes),Z.push(j.shadowMapType),Z.push(j.toneMapping),Z.push(j.numClippingPlanes),Z.push(j.numClipIntersection),Z.push(j.depthPacking)}function B(Z,j){a.disableAll(),j.supportsVertexTextures&&a.enable(0),j.instancing&&a.enable(1),j.instancingColor&&a.enable(2),j.instancingMorph&&a.enable(3),j.matcap&&a.enable(4),j.envMap&&a.enable(5),j.normalMapObjectSpace&&a.enable(6),j.normalMapTangentSpace&&a.enable(7),j.clearcoat&&a.enable(8),j.iridescence&&a.enable(9),j.alphaTest&&a.enable(10),j.vertexColors&&a.enable(11),j.vertexAlphas&&a.enable(12),j.vertexUv1s&&a.enable(13),j.vertexUv2s&&a.enable(14),j.vertexUv3s&&a.enable(15),j.vertexTangents&&a.enable(16),j.anisotropy&&a.enable(17),j.alphaHash&&a.enable(18),j.batching&&a.enable(19),j.dispersion&&a.enable(20),j.batchingColor&&a.enable(21),Z.push(a.mask),a.disableAll(),j.fog&&a.enable(0),j.useFog&&a.enable(1),j.flatShading&&a.enable(2),j.logarithmicDepthBuffer&&a.enable(3),j.reverseDepthBuffer&&a.enable(4),j.skinning&&a.enable(5),j.morphTargets&&a.enable(6),j.morphNormals&&a.enable(7),j.morphColors&&a.enable(8),j.premultipliedAlpha&&a.enable(9),j.shadowMapEnabled&&a.enable(10),j.doubleSided&&a.enable(11),j.flipSided&&a.enable(12),j.useDepthPacking&&a.enable(13),j.dithering&&a.enable(14),j.transmission&&a.enable(15),j.sheen&&a.enable(16),j.opaque&&a.enable(17),j.pointsUvs&&a.enable(18),j.decodeVideoTexture&&a.enable(19),j.decodeVideoTextureEmissive&&a.enable(20),j.alphaToCoverage&&a.enable(21),Z.push(a.mask)}function z(Z){const j=A[Z.type];let K;if(j){const re=Jd[j];K=Kpe.clone(re.uniforms)}else K=Z.uniforms;return K}function q(Z,j){let K;for(let re=0,ie=v.length;re<ie;re++){const se=v[re];if(se.cacheKey===j){K=se,++K.usedTimes;break}}return K===void 0&&(K=new Iye(t,j,Z,o),v.push(K)),K}function V(Z){if(--Z.usedTimes===0){const j=v.indexOf(Z);v[j]=v[v.length-1],v.pop(),Z.destroy()}}function W(Z){h.remove(Z)}function Y(){h.dispose()}return{getParameters:P,getProgramCacheKey:C,getUniforms:z,acquireProgram:q,releaseProgram:V,releaseShaderCache:W,programs:v,dispose:Y}}function Bye(){let t=new WeakMap;function e(l){return t.has(l)}function n(l){let a=t.get(l);return a===void 0&&(a={},t.set(l,a)),a}function r(l){t.delete(l)}function i(l,a,h){t.get(l)[a]=h}function o(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:o}}function zye(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function CB(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function PB(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function l(y,w,b,A,M,P){let C=t[e];return C===void 0?(C={id:y.id,object:y,geometry:w,material:b,groupOrder:A,renderOrder:y.renderOrder,z:M,group:P},t[e]=C):(C.id=y.id,C.object=y,C.geometry=w,C.material=b,C.groupOrder=A,C.renderOrder=y.renderOrder,C.z=M,C.group=P),e++,C}function a(y,w,b,A,M,P){const C=l(y,w,b,A,M,P);b.transmission>0?r.push(C):b.transparent===!0?i.push(C):n.push(C)}function h(y,w,b,A,M,P){const C=l(y,w,b,A,M,P);b.transmission>0?r.unshift(C):b.transparent===!0?i.unshift(C):n.unshift(C)}function f(y,w){n.length>1&&n.sort(y||zye),r.length>1&&r.sort(w||CB),i.length>1&&i.sort(w||CB)}function v(){for(let y=e,w=t.length;y<w;y++){const b=t[y];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:h,finish:v,sort:f}}function Uye(){let t=new WeakMap;function e(r,i){const o=t.get(r);let l;return o===void 0?(l=new PB,t.set(r,[l])):i>=o.length?(l=new PB,o.push(l)):l=o[i],l}function n(){t=new WeakMap}return{get:e,dispose:n}}function jye(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Sn,color:new ba};break;case"SpotLight":n={position:new Sn,direction:new Sn,color:new ba,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Sn,color:new ba,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Sn,skyColor:new ba,groundColor:new ba};break;case"RectAreaLight":n={color:new ba,position:new Sn,halfWidth:new Sn,halfHeight:new Sn};break}return t[e.id]=n,n}}}function Vye(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bi};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bi};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bi,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Gye=0;function qye(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Hye(t){const e=new jye,n=Vye(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)r.probe.push(new Sn);const i=new Sn,o=new ws,l=new ws;function a(f){let v=0,y=0,w=0;for(let Z=0;Z<9;Z++)r.probe[Z].set(0,0,0);let b=0,A=0,M=0,P=0,C=0,k=0,B=0,z=0,q=0,V=0,W=0;f.sort(qye);for(let Z=0,j=f.length;Z<j;Z++){const K=f[Z],re=K.color,ie=K.intensity,se=K.distance,de=K.shadow&&K.shadow.map?K.shadow.map.texture:null;if(K.isAmbientLight)v+=re.r*ie,y+=re.g*ie,w+=re.b*ie;else if(K.isLightProbe){for(let ue=0;ue<9;ue++)r.probe[ue].addScaledVector(K.sh.coefficients[ue],ie);W++}else if(K.isDirectionalLight){const ue=e.get(K);if(ue.color.copy(K.color).multiplyScalar(K.intensity),K.castShadow){const Te=K.shadow,pe=n.get(K);pe.shadowIntensity=Te.intensity,pe.shadowBias=Te.bias,pe.shadowNormalBias=Te.normalBias,pe.shadowRadius=Te.radius,pe.shadowMapSize=Te.mapSize,r.directionalShadow[b]=pe,r.directionalShadowMap[b]=de,r.directionalShadowMatrix[b]=K.shadow.matrix,k++}r.directional[b]=ue,b++}else if(K.isSpotLight){const ue=e.get(K);ue.position.setFromMatrixPosition(K.matrixWorld),ue.color.copy(re).multiplyScalar(ie),ue.distance=se,ue.coneCos=Math.cos(K.angle),ue.penumbraCos=Math.cos(K.angle*(1-K.penumbra)),ue.decay=K.decay,r.spot[M]=ue;const Te=K.shadow;if(K.map&&(r.spotLightMap[q]=K.map,q++,Te.updateMatrices(K),K.castShadow&&V++),r.spotLightMatrix[M]=Te.matrix,K.castShadow){const pe=n.get(K);pe.shadowIntensity=Te.intensity,pe.shadowBias=Te.bias,pe.shadowNormalBias=Te.normalBias,pe.shadowRadius=Te.radius,pe.shadowMapSize=Te.mapSize,r.spotShadow[M]=pe,r.spotShadowMap[M]=de,z++}M++}else if(K.isRectAreaLight){const ue=e.get(K);ue.color.copy(re).multiplyScalar(ie),ue.halfWidth.set(K.width*.5,0,0),ue.halfHeight.set(0,K.height*.5,0),r.rectArea[P]=ue,P++}else if(K.isPointLight){const ue=e.get(K);if(ue.color.copy(K.color).multiplyScalar(K.intensity),ue.distance=K.distance,ue.decay=K.decay,K.castShadow){const Te=K.shadow,pe=n.get(K);pe.shadowIntensity=Te.intensity,pe.shadowBias=Te.bias,pe.shadowNormalBias=Te.normalBias,pe.shadowRadius=Te.radius,pe.shadowMapSize=Te.mapSize,pe.shadowCameraNear=Te.camera.near,pe.shadowCameraFar=Te.camera.far,r.pointShadow[A]=pe,r.pointShadowMap[A]=de,r.pointShadowMatrix[A]=K.shadow.matrix,B++}r.point[A]=ue,A++}else if(K.isHemisphereLight){const ue=e.get(K);ue.skyColor.copy(K.color).multiplyScalar(ie),ue.groundColor.copy(K.groundColor).multiplyScalar(ie),r.hemi[C]=ue,C++}}P>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ur.LTC_FLOAT_1,r.rectAreaLTC2=Ur.LTC_FLOAT_2):(r.rectAreaLTC1=Ur.LTC_HALF_1,r.rectAreaLTC2=Ur.LTC_HALF_2)),r.ambient[0]=v,r.ambient[1]=y,r.ambient[2]=w;const Y=r.hash;(Y.directionalLength!==b||Y.pointLength!==A||Y.spotLength!==M||Y.rectAreaLength!==P||Y.hemiLength!==C||Y.numDirectionalShadows!==k||Y.numPointShadows!==B||Y.numSpotShadows!==z||Y.numSpotMaps!==q||Y.numLightProbes!==W)&&(r.directional.length=b,r.spot.length=M,r.rectArea.length=P,r.point.length=A,r.hemi.length=C,r.directionalShadow.length=k,r.directionalShadowMap.length=k,r.pointShadow.length=B,r.pointShadowMap.length=B,r.spotShadow.length=z,r.spotShadowMap.length=z,r.directionalShadowMatrix.length=k,r.pointShadowMatrix.length=B,r.spotLightMatrix.length=z+q-V,r.spotLightMap.length=q,r.numSpotLightShadowsWithMaps=V,r.numLightProbes=W,Y.directionalLength=b,Y.pointLength=A,Y.spotLength=M,Y.rectAreaLength=P,Y.hemiLength=C,Y.numDirectionalShadows=k,Y.numPointShadows=B,Y.numSpotShadows=z,Y.numSpotMaps=q,Y.numLightProbes=W,r.version=Gye++)}function h(f,v){let y=0,w=0,b=0,A=0,M=0;const P=v.matrixWorldInverse;for(let C=0,k=f.length;C<k;C++){const B=f[C];if(B.isDirectionalLight){const z=r.directional[y];z.direction.setFromMatrixPosition(B.matrixWorld),i.setFromMatrixPosition(B.target.matrixWorld),z.direction.sub(i),z.direction.transformDirection(P),y++}else if(B.isSpotLight){const z=r.spot[b];z.position.setFromMatrixPosition(B.matrixWorld),z.position.applyMatrix4(P),z.direction.setFromMatrixPosition(B.matrixWorld),i.setFromMatrixPosition(B.target.matrixWorld),z.direction.sub(i),z.direction.transformDirection(P),b++}else if(B.isRectAreaLight){const z=r.rectArea[A];z.position.setFromMatrixPosition(B.matrixWorld),z.position.applyMatrix4(P),l.identity(),o.copy(B.matrixWorld),o.premultiply(P),l.extractRotation(o),z.halfWidth.set(B.width*.5,0,0),z.halfHeight.set(0,B.height*.5,0),z.halfWidth.applyMatrix4(l),z.halfHeight.applyMatrix4(l),A++}else if(B.isPointLight){const z=r.point[w];z.position.setFromMatrixPosition(B.matrixWorld),z.position.applyMatrix4(P),w++}else if(B.isHemisphereLight){const z=r.hemi[M];z.direction.setFromMatrixPosition(B.matrixWorld),z.direction.transformDirection(P),M++}}}return{setup:a,setupView:h,state:r}}function RB(t){const e=new Hye(t),n=[],r=[];function i(v){f.camera=v,n.length=0,r.length=0}function o(v){n.push(v)}function l(v){r.push(v)}function a(){e.setup(n)}function h(v){e.setupView(n,v)}const f={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:f,setupLights:a,setupLightsView:h,pushLight:o,pushShadow:l}}function $ye(t){let e=new WeakMap;function n(i,o=0){const l=e.get(i);let a;return l===void 0?(a=new RB(t),e.set(i,[a])):o>=l.length?(a=new RB(t),l.push(a)):a=l[o],a}function r(){e=new WeakMap}return{get:n,dispose:r}}const Wye=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Xye=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Zye(t,e,n){let r=new mL;const i=new Bi,o=new Bi,l=new Sl,a=new dme({depthPacking:ype}),h=new pme,f={},v=n.maxTextureSize,y={[pg]:vh,[vh]:pg,[qp]:qp},w=new mg({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Bi},radius:{value:4}},vertexShader:Wye,fragmentShader:Xye}),b=w.clone();b.defines.HORIZONTAL_PASS=1;const A=new Yh;A.setAttribute("position",new sd(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new wf(A,w),P=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=G9;let C=this.type;this.render=function(V,W,Y){if(P.enabled===!1||P.autoUpdate===!1&&P.needsUpdate===!1||V.length===0)return;const Z=t.getRenderTarget(),j=t.getActiveCubeFace(),K=t.getActiveMipmapLevel(),re=t.state;re.setBlending(tg),re.buffers.color.setClear(1,1,1,1),re.buffers.depth.setTest(!0),re.setScissorTest(!1);const ie=C!==Gp&&this.type===Gp,se=C===Gp&&this.type!==Gp;for(let de=0,ue=V.length;de<ue;de++){const Te=V[de],pe=Te.shadow;if(pe===void 0){console.warn("THREE.WebGLShadowMap:",Te,"has no shadow.");continue}if(pe.autoUpdate===!1&&pe.needsUpdate===!1)continue;i.copy(pe.mapSize);const De=pe.getFrameExtents();if(i.multiply(De),o.copy(pe.mapSize),(i.x>v||i.y>v)&&(i.x>v&&(o.x=Math.floor(v/De.x),i.x=o.x*De.x,pe.mapSize.x=o.x),i.y>v&&(o.y=Math.floor(v/De.y),i.y=o.y*De.y,pe.mapSize.y=o.y)),pe.map===null||ie===!0||se===!0){const Me=this.type!==Gp?{minFilter:qh,magFilter:qh}:{};pe.map!==null&&pe.map.dispose(),pe.map=new B0(i.x,i.y,Me),pe.map.texture.name=Te.name+".shadowMap",pe.camera.updateProjectionMatrix()}t.setRenderTarget(pe.map),t.clear();const me=pe.getViewportCount();for(let Me=0;Me<me;Me++){const fe=pe.getViewport(Me);l.set(o.x*fe.x,o.y*fe.y,o.x*fe.z,o.y*fe.w),re.viewport(l),pe.updateMatrices(Te,Me),r=pe.getFrustum(),z(W,Y,pe.camera,Te,this.type)}pe.isPointLightShadow!==!0&&this.type===Gp&&k(pe,Y),pe.needsUpdate=!1}C=this.type,P.needsUpdate=!1,t.setRenderTarget(Z,j,K)};function k(V,W){const Y=e.update(M);w.defines.VSM_SAMPLES!==V.blurSamples&&(w.defines.VSM_SAMPLES=V.blurSamples,b.defines.VSM_SAMPLES=V.blurSamples,w.needsUpdate=!0,b.needsUpdate=!0),V.mapPass===null&&(V.mapPass=new B0(i.x,i.y)),w.uniforms.shadow_pass.value=V.map.texture,w.uniforms.resolution.value=V.mapSize,w.uniforms.radius.value=V.radius,t.setRenderTarget(V.mapPass),t.clear(),t.renderBufferDirect(W,null,Y,w,M,null),b.uniforms.shadow_pass.value=V.mapPass.texture,b.uniforms.resolution.value=V.mapSize,b.uniforms.radius.value=V.radius,t.setRenderTarget(V.map),t.clear(),t.renderBufferDirect(W,null,Y,b,M,null)}function B(V,W,Y,Z){let j=null;const K=Y.isPointLight===!0?V.customDistanceMaterial:V.customDepthMaterial;if(K!==void 0)j=K;else if(j=Y.isPointLight===!0?h:a,t.localClippingEnabled&&W.clipShadows===!0&&Array.isArray(W.clippingPlanes)&&W.clippingPlanes.length!==0||W.displacementMap&&W.displacementScale!==0||W.alphaMap&&W.alphaTest>0||W.map&&W.alphaTest>0){const re=j.uuid,ie=W.uuid;let se=f[re];se===void 0&&(se={},f[re]=se);let de=se[ie];de===void 0&&(de=j.clone(),se[ie]=de,W.addEventListener("dispose",q)),j=de}if(j.visible=W.visible,j.wireframe=W.wireframe,Z===Gp?j.side=W.shadowSide!==null?W.shadowSide:W.side:j.side=W.shadowSide!==null?W.shadowSide:y[W.side],j.alphaMap=W.alphaMap,j.alphaTest=W.alphaTest,j.map=W.map,j.clipShadows=W.clipShadows,j.clippingPlanes=W.clippingPlanes,j.clipIntersection=W.clipIntersection,j.displacementMap=W.displacementMap,j.displacementScale=W.displacementScale,j.displacementBias=W.displacementBias,j.wireframeLinewidth=W.wireframeLinewidth,j.linewidth=W.linewidth,Y.isPointLight===!0&&j.isMeshDistanceMaterial===!0){const re=t.properties.get(j);re.light=Y}return j}function z(V,W,Y,Z,j){if(V.visible===!1)return;if(V.layers.test(W.layers)&&(V.isMesh||V.isLine||V.isPoints)&&(V.castShadow||V.receiveShadow&&j===Gp)&&(!V.frustumCulled||r.intersectsObject(V))){V.modelViewMatrix.multiplyMatrices(Y.matrixWorldInverse,V.matrixWorld);const ie=e.update(V),se=V.material;if(Array.isArray(se)){const de=ie.groups;for(let ue=0,Te=de.length;ue<Te;ue++){const pe=de[ue],De=se[pe.materialIndex];if(De&&De.visible){const me=B(V,De,Z,j);V.onBeforeShadow(t,V,W,Y,ie,me,pe),t.renderBufferDirect(Y,null,ie,me,V,pe),V.onAfterShadow(t,V,W,Y,ie,me,pe)}}}else if(se.visible){const de=B(V,se,Z,j);V.onBeforeShadow(t,V,W,Y,ie,de,null),t.renderBufferDirect(Y,null,ie,de,V,null),V.onAfterShadow(t,V,W,Y,ie,de,null)}}const re=V.children;for(let ie=0,se=re.length;ie<se;ie++)z(re[ie],W,Y,Z,j)}function q(V){V.target.removeEventListener("dispose",q);for(const Y in f){const Z=f[Y],j=V.target.uuid;j in Z&&(Z[j].dispose(),delete Z[j])}}}const Yye={[K3]:J3,[Q3]:nP,[eP]:rP,[g_]:tP,[J3]:K3,[nP]:Q3,[rP]:eP,[tP]:g_};function Kye(t,e){function n(){let Ce=!1;const Qe=new Sl;let et=null;const ut=new Sl(0,0,0,0);return{setMask:function(lt){et!==lt&&!Ce&&(t.colorMask(lt,lt,lt,lt),et=lt)},setLocked:function(lt){Ce=lt},setClear:function(lt,xt,Dt,zt,Tn){Tn===!0&&(lt*=zt,xt*=zt,Dt*=zt),Qe.set(lt,xt,Dt,zt),ut.equals(Qe)===!1&&(t.clearColor(lt,xt,Dt,zt),ut.copy(Qe))},reset:function(){Ce=!1,et=null,ut.set(-1,0,0,0)}}}function r(){let Ce=!1,Qe=!1,et=null,ut=null,lt=null;return{setReversed:function(xt){if(Qe!==xt){const Dt=e.get("EXT_clip_control");Qe?Dt.clipControlEXT(Dt.LOWER_LEFT_EXT,Dt.ZERO_TO_ONE_EXT):Dt.clipControlEXT(Dt.LOWER_LEFT_EXT,Dt.NEGATIVE_ONE_TO_ONE_EXT);const zt=lt;lt=null,this.setClear(zt)}Qe=xt},getReversed:function(){return Qe},setTest:function(xt){xt?Be(t.DEPTH_TEST):Ve(t.DEPTH_TEST)},setMask:function(xt){et!==xt&&!Ce&&(t.depthMask(xt),et=xt)},setFunc:function(xt){if(Qe&&(xt=Yye[xt]),ut!==xt){switch(xt){case K3:t.depthFunc(t.NEVER);break;case J3:t.depthFunc(t.ALWAYS);break;case Q3:t.depthFunc(t.LESS);break;case g_:t.depthFunc(t.LEQUAL);break;case eP:t.depthFunc(t.EQUAL);break;case tP:t.depthFunc(t.GEQUAL);break;case nP:t.depthFunc(t.GREATER);break;case rP:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ut=xt}},setLocked:function(xt){Ce=xt},setClear:function(xt){lt!==xt&&(Qe&&(xt=1-xt),t.clearDepth(xt),lt=xt)},reset:function(){Ce=!1,et=null,ut=null,lt=null,Qe=!1}}}function i(){let Ce=!1,Qe=null,et=null,ut=null,lt=null,xt=null,Dt=null,zt=null,Tn=null;return{setTest:function(qt){Ce||(qt?Be(t.STENCIL_TEST):Ve(t.STENCIL_TEST))},setMask:function(qt){Qe!==qt&&!Ce&&(t.stencilMask(qt),Qe=qt)},setFunc:function(qt,Zn,Gn){(et!==qt||ut!==Zn||lt!==Gn)&&(t.stencilFunc(qt,Zn,Gn),et=qt,ut=Zn,lt=Gn)},setOp:function(qt,Zn,Gn){(xt!==qt||Dt!==Zn||zt!==Gn)&&(t.stencilOp(qt,Zn,Gn),xt=qt,Dt=Zn,zt=Gn)},setLocked:function(qt){Ce=qt},setClear:function(qt){Tn!==qt&&(t.clearStencil(qt),Tn=qt)},reset:function(){Ce=!1,Qe=null,et=null,ut=null,lt=null,xt=null,Dt=null,zt=null,Tn=null}}}const o=new n,l=new r,a=new i,h=new WeakMap,f=new WeakMap;let v={},y={},w=new WeakMap,b=[],A=null,M=!1,P=null,C=null,k=null,B=null,z=null,q=null,V=null,W=new ba(0,0,0),Y=0,Z=!1,j=null,K=null,re=null,ie=null,se=null;const de=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ue=!1,Te=0;const pe=t.getParameter(t.VERSION);pe.indexOf("WebGL")!==-1?(Te=parseFloat(/^WebGL (\d)/.exec(pe)[1]),ue=Te>=1):pe.indexOf("OpenGL ES")!==-1&&(Te=parseFloat(/^OpenGL ES (\d)/.exec(pe)[1]),ue=Te>=2);let De=null,me={};const Me=t.getParameter(t.SCISSOR_BOX),fe=t.getParameter(t.VIEWPORT),ve=new Sl().fromArray(Me),le=new Sl().fromArray(fe);function ye(Ce,Qe,et,ut){const lt=new Uint8Array(4),xt=t.createTexture();t.bindTexture(Ce,xt),t.texParameteri(Ce,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Ce,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Dt=0;Dt<et;Dt++)Ce===t.TEXTURE_3D||Ce===t.TEXTURE_2D_ARRAY?t.texImage3D(Qe,0,t.RGBA,1,1,ut,0,t.RGBA,t.UNSIGNED_BYTE,lt):t.texImage2D(Qe+Dt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,lt);return xt}const Se={};Se[t.TEXTURE_2D]=ye(t.TEXTURE_2D,t.TEXTURE_2D,1),Se[t.TEXTURE_CUBE_MAP]=ye(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),Se[t.TEXTURE_2D_ARRAY]=ye(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Se[t.TEXTURE_3D]=ye(t.TEXTURE_3D,t.TEXTURE_3D,1,1),o.setClear(0,0,0,1),l.setClear(1),a.setClear(0),Be(t.DEPTH_TEST),l.setFunc(g_),Xe(!1),tn(T6),Be(t.CULL_FACE),He(tg);function Be(Ce){v[Ce]!==!0&&(t.enable(Ce),v[Ce]=!0)}function Ve(Ce){v[Ce]!==!1&&(t.disable(Ce),v[Ce]=!1)}function tt(Ce,Qe){return y[Ce]!==Qe?(t.bindFramebuffer(Ce,Qe),y[Ce]=Qe,Ce===t.DRAW_FRAMEBUFFER&&(y[t.FRAMEBUFFER]=Qe),Ce===t.FRAMEBUFFER&&(y[t.DRAW_FRAMEBUFFER]=Qe),!0):!1}function ht(Ce,Qe){let et=b,ut=!1;if(Ce){et=w.get(Qe),et===void 0&&(et=[],w.set(Qe,et));const lt=Ce.textures;if(et.length!==lt.length||et[0]!==t.COLOR_ATTACHMENT0){for(let xt=0,Dt=lt.length;xt<Dt;xt++)et[xt]=t.COLOR_ATTACHMENT0+xt;et.length=lt.length,ut=!0}}else et[0]!==t.BACK&&(et[0]=t.BACK,ut=!0);ut&&t.drawBuffers(et)}function it(Ce){return A!==Ce?(t.useProgram(Ce),A=Ce,!0):!1}const gt={[g0]:t.FUNC_ADD,[qde]:t.FUNC_SUBTRACT,[Hde]:t.FUNC_REVERSE_SUBTRACT};gt[$de]=t.MIN,gt[Wde]=t.MAX;const $t={[Xde]:t.ZERO,[Zde]:t.ONE,[Yde]:t.SRC_COLOR,[Z3]:t.SRC_ALPHA,[npe]:t.SRC_ALPHA_SATURATE,[epe]:t.DST_COLOR,[Jde]:t.DST_ALPHA,[Kde]:t.ONE_MINUS_SRC_COLOR,[Y3]:t.ONE_MINUS_SRC_ALPHA,[tpe]:t.ONE_MINUS_DST_COLOR,[Qde]:t.ONE_MINUS_DST_ALPHA,[rpe]:t.CONSTANT_COLOR,[ipe]:t.ONE_MINUS_CONSTANT_COLOR,[ape]:t.CONSTANT_ALPHA,[ope]:t.ONE_MINUS_CONSTANT_ALPHA};function He(Ce,Qe,et,ut,lt,xt,Dt,zt,Tn,qt){if(Ce===tg){M===!0&&(Ve(t.BLEND),M=!1);return}if(M===!1&&(Be(t.BLEND),M=!0),Ce!==Gde){if(Ce!==P||qt!==Z){if((C!==g0||z!==g0)&&(t.blendEquation(t.FUNC_ADD),C=g0,z=g0),qt)switch(Ce){case r_:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case M6:t.blendFunc(t.ONE,t.ONE);break;case A6:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case C6:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}else switch(Ce){case r_:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case M6:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case A6:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case C6:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}k=null,B=null,q=null,V=null,W.set(0,0,0),Y=0,P=Ce,Z=qt}return}lt=lt||Qe,xt=xt||et,Dt=Dt||ut,(Qe!==C||lt!==z)&&(t.blendEquationSeparate(gt[Qe],gt[lt]),C=Qe,z=lt),(et!==k||ut!==B||xt!==q||Dt!==V)&&(t.blendFuncSeparate($t[et],$t[ut],$t[xt],$t[Dt]),k=et,B=ut,q=xt,V=Dt),(zt.equals(W)===!1||Tn!==Y)&&(t.blendColor(zt.r,zt.g,zt.b,Tn),W.copy(zt),Y=Tn),P=Ce,Z=!1}function Ct(Ce,Qe){Ce.side===qp?Ve(t.CULL_FACE):Be(t.CULL_FACE);let et=Ce.side===vh;Qe&&(et=!et),Xe(et),Ce.blending===r_&&Ce.transparent===!1?He(tg):He(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.blendColor,Ce.blendAlpha,Ce.premultipliedAlpha),l.setFunc(Ce.depthFunc),l.setTest(Ce.depthTest),l.setMask(Ce.depthWrite),o.setMask(Ce.colorWrite);const ut=Ce.stencilWrite;a.setTest(ut),ut&&(a.setMask(Ce.stencilWriteMask),a.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),a.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),Jt(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),Ce.alphaToCoverage===!0?Be(t.SAMPLE_ALPHA_TO_COVERAGE):Ve(t.SAMPLE_ALPHA_TO_COVERAGE)}function Xe(Ce){j!==Ce&&(Ce?t.frontFace(t.CW):t.frontFace(t.CCW),j=Ce)}function tn(Ce){Ce!==jde?(Be(t.CULL_FACE),Ce!==K&&(Ce===T6?t.cullFace(t.BACK):Ce===Vde?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ve(t.CULL_FACE),K=Ce}function Kt(Ce){Ce!==re&&(ue&&t.lineWidth(Ce),re=Ce)}function Jt(Ce,Qe,et){Ce?(Be(t.POLYGON_OFFSET_FILL),(ie!==Qe||se!==et)&&(t.polygonOffset(Qe,et),ie=Qe,se=et)):Ve(t.POLYGON_OFFSET_FILL)}function Ht(Ce){Ce?Be(t.SCISSOR_TEST):Ve(t.SCISSOR_TEST)}function $e(Ce){Ce===void 0&&(Ce=t.TEXTURE0+de-1),De!==Ce&&(t.activeTexture(Ce),De=Ce)}function Ee(Ce,Qe,et){et===void 0&&(De===null?et=t.TEXTURE0+de-1:et=De);let ut=me[et];ut===void 0&&(ut={type:void 0,texture:void 0},me[et]=ut),(ut.type!==Ce||ut.texture!==Qe)&&(De!==et&&(t.activeTexture(et),De=et),t.bindTexture(Ce,Qe||Se[Ce]),ut.type=Ce,ut.texture=Qe)}function _t(){const Ce=me[De];Ce!==void 0&&Ce.type!==void 0&&(t.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)}function jt(){try{t.compressedTexImage2D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function vt(){try{t.compressedTexImage3D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Pt(){try{t.texSubImage2D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function vn(){try{t.texSubImage3D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function hn(){try{t.compressedTexSubImage2D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function pn(){try{t.compressedTexSubImage3D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function nn(){try{t.texStorage2D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ft(){try{t.texStorage3D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function In(){try{t.texImage2D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Pn(){try{t.texImage3D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ir(Ce){ve.equals(Ce)===!1&&(t.scissor(Ce.x,Ce.y,Ce.z,Ce.w),ve.copy(Ce))}function mt(Ce){le.equals(Ce)===!1&&(t.viewport(Ce.x,Ce.y,Ce.z,Ce.w),le.copy(Ce))}function ge(Ce,Qe){let et=f.get(Qe);et===void 0&&(et=new WeakMap,f.set(Qe,et));let ut=et.get(Ce);ut===void 0&&(ut=t.getUniformBlockIndex(Qe,Ce.name),et.set(Ce,ut))}function ke(Ce,Qe){const ut=f.get(Qe).get(Ce);h.get(Qe)!==ut&&(t.uniformBlockBinding(Qe,ut,Ce.__bindingPointIndex),h.set(Qe,ut))}function We(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),l.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),v={},De=null,me={},y={},w=new WeakMap,b=[],A=null,M=!1,P=null,C=null,k=null,B=null,z=null,q=null,V=null,W=new ba(0,0,0),Y=0,Z=!1,j=null,K=null,re=null,ie=null,se=null,ve.set(0,0,t.canvas.width,t.canvas.height),le.set(0,0,t.canvas.width,t.canvas.height),o.reset(),l.reset(),a.reset()}return{buffers:{color:o,depth:l,stencil:a},enable:Be,disable:Ve,bindFramebuffer:tt,drawBuffers:ht,useProgram:it,setBlending:He,setMaterial:Ct,setFlipSided:Xe,setCullFace:tn,setLineWidth:Kt,setPolygonOffset:Jt,setScissorTest:Ht,activeTexture:$e,bindTexture:Ee,unbindTexture:_t,compressedTexImage2D:jt,compressedTexImage3D:vt,texImage2D:In,texImage3D:Pn,updateUBOMapping:ge,uniformBlockBinding:ke,texStorage2D:nn,texStorage3D:Ft,texSubImage2D:Pt,texSubImage3D:vn,compressedTexSubImage2D:hn,compressedTexSubImage3D:pn,scissor:ir,viewport:mt,reset:We}}function Jye(t,e,n,r,i,o,l){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new Bi,v=new WeakMap;let y;const w=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A($e,Ee){return b?new OffscreenCanvas($e,Ee):wS("canvas")}function M($e,Ee,_t){let jt=1;const vt=Ht($e);if((vt.width>_t||vt.height>_t)&&(jt=_t/Math.max(vt.width,vt.height)),jt<1)if(typeof HTMLImageElement<"u"&&$e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$e instanceof ImageBitmap||typeof VideoFrame<"u"&&$e instanceof VideoFrame){const Pt=Math.floor(jt*vt.width),vn=Math.floor(jt*vt.height);y===void 0&&(y=A(Pt,vn));const hn=Ee?A(Pt,vn):y;return hn.width=Pt,hn.height=vn,hn.getContext("2d").drawImage($e,0,0,Pt,vn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+vt.width+"x"+vt.height+") to ("+Pt+"x"+vn+")."),hn}else return"data"in $e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+vt.width+"x"+vt.height+")."),$e;return $e}function P($e){return $e.generateMipmaps}function C($e){t.generateMipmap($e)}function k($e){return $e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:$e.isWebGL3DRenderTarget?t.TEXTURE_3D:$e.isWebGLArrayRenderTarget||$e.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function B($e,Ee,_t,jt,vt=!1){if($e!==null){if(t[$e]!==void 0)return t[$e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$e+"'")}let Pt=Ee;if(Ee===t.RED&&(_t===t.FLOAT&&(Pt=t.R32F),_t===t.HALF_FLOAT&&(Pt=t.R16F),_t===t.UNSIGNED_BYTE&&(Pt=t.R8)),Ee===t.RED_INTEGER&&(_t===t.UNSIGNED_BYTE&&(Pt=t.R8UI),_t===t.UNSIGNED_SHORT&&(Pt=t.R16UI),_t===t.UNSIGNED_INT&&(Pt=t.R32UI),_t===t.BYTE&&(Pt=t.R8I),_t===t.SHORT&&(Pt=t.R16I),_t===t.INT&&(Pt=t.R32I)),Ee===t.RG&&(_t===t.FLOAT&&(Pt=t.RG32F),_t===t.HALF_FLOAT&&(Pt=t.RG16F),_t===t.UNSIGNED_BYTE&&(Pt=t.RG8)),Ee===t.RG_INTEGER&&(_t===t.UNSIGNED_BYTE&&(Pt=t.RG8UI),_t===t.UNSIGNED_SHORT&&(Pt=t.RG16UI),_t===t.UNSIGNED_INT&&(Pt=t.RG32UI),_t===t.BYTE&&(Pt=t.RG8I),_t===t.SHORT&&(Pt=t.RG16I),_t===t.INT&&(Pt=t.RG32I)),Ee===t.RGB_INTEGER&&(_t===t.UNSIGNED_BYTE&&(Pt=t.RGB8UI),_t===t.UNSIGNED_SHORT&&(Pt=t.RGB16UI),_t===t.UNSIGNED_INT&&(Pt=t.RGB32UI),_t===t.BYTE&&(Pt=t.RGB8I),_t===t.SHORT&&(Pt=t.RGB16I),_t===t.INT&&(Pt=t.RGB32I)),Ee===t.RGBA_INTEGER&&(_t===t.UNSIGNED_BYTE&&(Pt=t.RGBA8UI),_t===t.UNSIGNED_SHORT&&(Pt=t.RGBA16UI),_t===t.UNSIGNED_INT&&(Pt=t.RGBA32UI),_t===t.BYTE&&(Pt=t.RGBA8I),_t===t.SHORT&&(Pt=t.RGBA16I),_t===t.INT&&(Pt=t.RGBA32I)),Ee===t.RGB&&_t===t.UNSIGNED_INT_5_9_9_9_REV&&(Pt=t.RGB9_E5),Ee===t.RGBA){const vn=vt?bS:oo.getTransfer(jt);_t===t.FLOAT&&(Pt=t.RGBA32F),_t===t.HALF_FLOAT&&(Pt=t.RGBA16F),_t===t.UNSIGNED_BYTE&&(Pt=vn===ko?t.SRGB8_ALPHA8:t.RGBA8),_t===t.UNSIGNED_SHORT_4_4_4_4&&(Pt=t.RGBA4),_t===t.UNSIGNED_SHORT_5_5_5_1&&(Pt=t.RGB5_A1)}return(Pt===t.R16F||Pt===t.R32F||Pt===t.RG16F||Pt===t.RG32F||Pt===t.RGBA16F||Pt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Pt}function z($e,Ee){let _t;return $e?Ee===null||Ee===F0||Ee===__?_t=t.DEPTH24_STENCIL8:Ee===$p?_t=t.DEPTH32F_STENCIL8:Ee===Zb&&(_t=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Ee===null||Ee===F0||Ee===__?_t=t.DEPTH_COMPONENT24:Ee===$p?_t=t.DEPTH_COMPONENT32F:Ee===Zb&&(_t=t.DEPTH_COMPONENT16),_t}function q($e,Ee){return P($e)===!0||$e.isFramebufferTexture&&$e.minFilter!==qh&&$e.minFilter!==np?Math.log2(Math.max(Ee.width,Ee.height))+1:$e.mipmaps!==void 0&&$e.mipmaps.length>0?$e.mipmaps.length:$e.isCompressedTexture&&Array.isArray($e.image)?Ee.mipmaps.length:1}function V($e){const Ee=$e.target;Ee.removeEventListener("dispose",V),Y(Ee),Ee.isVideoTexture&&v.delete(Ee)}function W($e){const Ee=$e.target;Ee.removeEventListener("dispose",W),j(Ee)}function Y($e){const Ee=r.get($e);if(Ee.__webglInit===void 0)return;const _t=$e.source,jt=w.get(_t);if(jt){const vt=jt[Ee.__cacheKey];vt.usedTimes--,vt.usedTimes===0&&Z($e),Object.keys(jt).length===0&&w.delete(_t)}r.remove($e)}function Z($e){const Ee=r.get($e);t.deleteTexture(Ee.__webglTexture);const _t=$e.source,jt=w.get(_t);delete jt[Ee.__cacheKey],l.memory.textures--}function j($e){const Ee=r.get($e);if($e.depthTexture&&($e.depthTexture.dispose(),r.remove($e.depthTexture)),$e.isWebGLCubeRenderTarget)for(let jt=0;jt<6;jt++){if(Array.isArray(Ee.__webglFramebuffer[jt]))for(let vt=0;vt<Ee.__webglFramebuffer[jt].length;vt++)t.deleteFramebuffer(Ee.__webglFramebuffer[jt][vt]);else t.deleteFramebuffer(Ee.__webglFramebuffer[jt]);Ee.__webglDepthbuffer&&t.deleteRenderbuffer(Ee.__webglDepthbuffer[jt])}else{if(Array.isArray(Ee.__webglFramebuffer))for(let jt=0;jt<Ee.__webglFramebuffer.length;jt++)t.deleteFramebuffer(Ee.__webglFramebuffer[jt]);else t.deleteFramebuffer(Ee.__webglFramebuffer);if(Ee.__webglDepthbuffer&&t.deleteRenderbuffer(Ee.__webglDepthbuffer),Ee.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Ee.__webglMultisampledFramebuffer),Ee.__webglColorRenderbuffer)for(let jt=0;jt<Ee.__webglColorRenderbuffer.length;jt++)Ee.__webglColorRenderbuffer[jt]&&t.deleteRenderbuffer(Ee.__webglColorRenderbuffer[jt]);Ee.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Ee.__webglDepthRenderbuffer)}const _t=$e.textures;for(let jt=0,vt=_t.length;jt<vt;jt++){const Pt=r.get(_t[jt]);Pt.__webglTexture&&(t.deleteTexture(Pt.__webglTexture),l.memory.textures--),r.remove(_t[jt])}r.remove($e)}let K=0;function re(){K=0}function ie(){const $e=K;return $e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$e+" texture units while this GPU supports only "+i.maxTextures),K+=1,$e}function se($e){const Ee=[];return Ee.push($e.wrapS),Ee.push($e.wrapT),Ee.push($e.wrapR||0),Ee.push($e.magFilter),Ee.push($e.minFilter),Ee.push($e.anisotropy),Ee.push($e.internalFormat),Ee.push($e.format),Ee.push($e.type),Ee.push($e.generateMipmaps),Ee.push($e.premultiplyAlpha),Ee.push($e.flipY),Ee.push($e.unpackAlignment),Ee.push($e.colorSpace),Ee.join()}function de($e,Ee){const _t=r.get($e);if($e.isVideoTexture&&Kt($e),$e.isRenderTargetTexture===!1&&$e.version>0&&_t.__version!==$e.version){const jt=$e.image;if(jt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(jt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(_t,$e,Ee);return}}n.bindTexture(t.TEXTURE_2D,_t.__webglTexture,t.TEXTURE0+Ee)}function ue($e,Ee){const _t=r.get($e);if($e.version>0&&_t.__version!==$e.version){le(_t,$e,Ee);return}n.bindTexture(t.TEXTURE_2D_ARRAY,_t.__webglTexture,t.TEXTURE0+Ee)}function Te($e,Ee){const _t=r.get($e);if($e.version>0&&_t.__version!==$e.version){le(_t,$e,Ee);return}n.bindTexture(t.TEXTURE_3D,_t.__webglTexture,t.TEXTURE0+Ee)}function pe($e,Ee){const _t=r.get($e);if($e.version>0&&_t.__version!==$e.version){ye(_t,$e,Ee);return}n.bindTexture(t.TEXTURE_CUBE_MAP,_t.__webglTexture,t.TEXTURE0+Ee)}const De={[oP]:t.REPEAT,[x0]:t.CLAMP_TO_EDGE,[sP]:t.MIRRORED_REPEAT},me={[qh]:t.NEAREST,[gpe]:t.NEAREST_MIPMAP_NEAREST,[I2]:t.NEAREST_MIPMAP_LINEAR,[np]:t.LINEAR,[GA]:t.LINEAR_MIPMAP_NEAREST,[w0]:t.LINEAR_MIPMAP_LINEAR},Me={[bpe]:t.NEVER,[Mpe]:t.ALWAYS,[xpe]:t.LESS,[nj]:t.LEQUAL,[wpe]:t.EQUAL,[Tpe]:t.GEQUAL,[Spe]:t.GREATER,[Epe]:t.NOTEQUAL};function fe($e,Ee){if(Ee.type===$p&&e.has("OES_texture_float_linear")===!1&&(Ee.magFilter===np||Ee.magFilter===GA||Ee.magFilter===I2||Ee.magFilter===w0||Ee.minFilter===np||Ee.minFilter===GA||Ee.minFilter===I2||Ee.minFilter===w0)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri($e,t.TEXTURE_WRAP_S,De[Ee.wrapS]),t.texParameteri($e,t.TEXTURE_WRAP_T,De[Ee.wrapT]),($e===t.TEXTURE_3D||$e===t.TEXTURE_2D_ARRAY)&&t.texParameteri($e,t.TEXTURE_WRAP_R,De[Ee.wrapR]),t.texParameteri($e,t.TEXTURE_MAG_FILTER,me[Ee.magFilter]),t.texParameteri($e,t.TEXTURE_MIN_FILTER,me[Ee.minFilter]),Ee.compareFunction&&(t.texParameteri($e,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri($e,t.TEXTURE_COMPARE_FUNC,Me[Ee.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Ee.magFilter===qh||Ee.minFilter!==I2&&Ee.minFilter!==w0||Ee.type===$p&&e.has("OES_texture_float_linear")===!1)return;if(Ee.anisotropy>1||r.get(Ee).__currentAnisotropy){const _t=e.get("EXT_texture_filter_anisotropic");t.texParameterf($e,_t.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ee.anisotropy,i.getMaxAnisotropy())),r.get(Ee).__currentAnisotropy=Ee.anisotropy}}}function ve($e,Ee){let _t=!1;$e.__webglInit===void 0&&($e.__webglInit=!0,Ee.addEventListener("dispose",V));const jt=Ee.source;let vt=w.get(jt);vt===void 0&&(vt={},w.set(jt,vt));const Pt=se(Ee);if(Pt!==$e.__cacheKey){vt[Pt]===void 0&&(vt[Pt]={texture:t.createTexture(),usedTimes:0},l.memory.textures++,_t=!0),vt[Pt].usedTimes++;const vn=vt[$e.__cacheKey];vn!==void 0&&(vt[$e.__cacheKey].usedTimes--,vn.usedTimes===0&&Z(Ee)),$e.__cacheKey=Pt,$e.__webglTexture=vt[Pt].texture}return _t}function le($e,Ee,_t){let jt=t.TEXTURE_2D;(Ee.isDataArrayTexture||Ee.isCompressedArrayTexture)&&(jt=t.TEXTURE_2D_ARRAY),Ee.isData3DTexture&&(jt=t.TEXTURE_3D);const vt=ve($e,Ee),Pt=Ee.source;n.bindTexture(jt,$e.__webglTexture,t.TEXTURE0+_t);const vn=r.get(Pt);if(Pt.version!==vn.__version||vt===!0){n.activeTexture(t.TEXTURE0+_t);const hn=oo.getPrimaries(oo.workingColorSpace),pn=Ee.colorSpace===Wm?null:oo.getPrimaries(Ee.colorSpace),nn=Ee.colorSpace===Wm||hn===pn?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Ee.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ee.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Ee.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,nn);let Ft=M(Ee.image,!1,i.maxTextureSize);Ft=Jt(Ee,Ft);const In=o.convert(Ee.format,Ee.colorSpace),Pn=o.convert(Ee.type);let ir=B(Ee.internalFormat,In,Pn,Ee.colorSpace,Ee.isVideoTexture);fe(jt,Ee);let mt;const ge=Ee.mipmaps,ke=Ee.isVideoTexture!==!0,We=vn.__version===void 0||vt===!0,Ce=Pt.dataReady,Qe=q(Ee,Ft);if(Ee.isDepthTexture)ir=z(Ee.format===b_,Ee.type),We&&(ke?n.texStorage2D(t.TEXTURE_2D,1,ir,Ft.width,Ft.height):n.texImage2D(t.TEXTURE_2D,0,ir,Ft.width,Ft.height,0,In,Pn,null));else if(Ee.isDataTexture)if(ge.length>0){ke&&We&&n.texStorage2D(t.TEXTURE_2D,Qe,ir,ge[0].width,ge[0].height);for(let et=0,ut=ge.length;et<ut;et++)mt=ge[et],ke?Ce&&n.texSubImage2D(t.TEXTURE_2D,et,0,0,mt.width,mt.height,In,Pn,mt.data):n.texImage2D(t.TEXTURE_2D,et,ir,mt.width,mt.height,0,In,Pn,mt.data);Ee.generateMipmaps=!1}else ke?(We&&n.texStorage2D(t.TEXTURE_2D,Qe,ir,Ft.width,Ft.height),Ce&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ft.width,Ft.height,In,Pn,Ft.data)):n.texImage2D(t.TEXTURE_2D,0,ir,Ft.width,Ft.height,0,In,Pn,Ft.data);else if(Ee.isCompressedTexture)if(Ee.isCompressedArrayTexture){ke&&We&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Qe,ir,ge[0].width,ge[0].height,Ft.depth);for(let et=0,ut=ge.length;et<ut;et++)if(mt=ge[et],Ee.format!==xf)if(In!==null)if(ke){if(Ce)if(Ee.layerUpdates.size>0){const lt=oB(mt.width,mt.height,Ee.format,Ee.type);for(const xt of Ee.layerUpdates){const Dt=mt.data.subarray(xt*lt/mt.data.BYTES_PER_ELEMENT,(xt+1)*lt/mt.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,et,0,0,xt,mt.width,mt.height,1,In,Dt)}Ee.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,et,0,0,0,mt.width,mt.height,Ft.depth,In,mt.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,et,ir,mt.width,mt.height,Ft.depth,0,mt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ke?Ce&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,et,0,0,0,mt.width,mt.height,Ft.depth,In,Pn,mt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,et,ir,mt.width,mt.height,Ft.depth,0,In,Pn,mt.data)}else{ke&&We&&n.texStorage2D(t.TEXTURE_2D,Qe,ir,ge[0].width,ge[0].height);for(let et=0,ut=ge.length;et<ut;et++)mt=ge[et],Ee.format!==xf?In!==null?ke?Ce&&n.compressedTexSubImage2D(t.TEXTURE_2D,et,0,0,mt.width,mt.height,In,mt.data):n.compressedTexImage2D(t.TEXTURE_2D,et,ir,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ke?Ce&&n.texSubImage2D(t.TEXTURE_2D,et,0,0,mt.width,mt.height,In,Pn,mt.data):n.texImage2D(t.TEXTURE_2D,et,ir,mt.width,mt.height,0,In,Pn,mt.data)}else if(Ee.isDataArrayTexture)if(ke){if(We&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Qe,ir,Ft.width,Ft.height,Ft.depth),Ce)if(Ee.layerUpdates.size>0){const et=oB(Ft.width,Ft.height,Ee.format,Ee.type);for(const ut of Ee.layerUpdates){const lt=Ft.data.subarray(ut*et/Ft.data.BYTES_PER_ELEMENT,(ut+1)*et/Ft.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,ut,Ft.width,Ft.height,1,In,Pn,lt)}Ee.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ft.width,Ft.height,Ft.depth,In,Pn,Ft.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,ir,Ft.width,Ft.height,Ft.depth,0,In,Pn,Ft.data);else if(Ee.isData3DTexture)ke?(We&&n.texStorage3D(t.TEXTURE_3D,Qe,ir,Ft.width,Ft.height,Ft.depth),Ce&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ft.width,Ft.height,Ft.depth,In,Pn,Ft.data)):n.texImage3D(t.TEXTURE_3D,0,ir,Ft.width,Ft.height,Ft.depth,0,In,Pn,Ft.data);else if(Ee.isFramebufferTexture){if(We)if(ke)n.texStorage2D(t.TEXTURE_2D,Qe,ir,Ft.width,Ft.height);else{let et=Ft.width,ut=Ft.height;for(let lt=0;lt<Qe;lt++)n.texImage2D(t.TEXTURE_2D,lt,ir,et,ut,0,In,Pn,null),et>>=1,ut>>=1}}else if(ge.length>0){if(ke&&We){const et=Ht(ge[0]);n.texStorage2D(t.TEXTURE_2D,Qe,ir,et.width,et.height)}for(let et=0,ut=ge.length;et<ut;et++)mt=ge[et],ke?Ce&&n.texSubImage2D(t.TEXTURE_2D,et,0,0,In,Pn,mt):n.texImage2D(t.TEXTURE_2D,et,ir,In,Pn,mt);Ee.generateMipmaps=!1}else if(ke){if(We){const et=Ht(Ft);n.texStorage2D(t.TEXTURE_2D,Qe,ir,et.width,et.height)}Ce&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,In,Pn,Ft)}else n.texImage2D(t.TEXTURE_2D,0,ir,In,Pn,Ft);P(Ee)&&C(jt),vn.__version=Pt.version,Ee.onUpdate&&Ee.onUpdate(Ee)}$e.__version=Ee.version}function ye($e,Ee,_t){if(Ee.image.length!==6)return;const jt=ve($e,Ee),vt=Ee.source;n.bindTexture(t.TEXTURE_CUBE_MAP,$e.__webglTexture,t.TEXTURE0+_t);const Pt=r.get(vt);if(vt.version!==Pt.__version||jt===!0){n.activeTexture(t.TEXTURE0+_t);const vn=oo.getPrimaries(oo.workingColorSpace),hn=Ee.colorSpace===Wm?null:oo.getPrimaries(Ee.colorSpace),pn=Ee.colorSpace===Wm||vn===hn?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Ee.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ee.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Ee.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,pn);const nn=Ee.isCompressedTexture||Ee.image[0].isCompressedTexture,Ft=Ee.image[0]&&Ee.image[0].isDataTexture,In=[];for(let ut=0;ut<6;ut++)!nn&&!Ft?In[ut]=M(Ee.image[ut],!0,i.maxCubemapSize):In[ut]=Ft?Ee.image[ut].image:Ee.image[ut],In[ut]=Jt(Ee,In[ut]);const Pn=In[0],ir=o.convert(Ee.format,Ee.colorSpace),mt=o.convert(Ee.type),ge=B(Ee.internalFormat,ir,mt,Ee.colorSpace),ke=Ee.isVideoTexture!==!0,We=Pt.__version===void 0||jt===!0,Ce=vt.dataReady;let Qe=q(Ee,Pn);fe(t.TEXTURE_CUBE_MAP,Ee);let et;if(nn){ke&&We&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Qe,ge,Pn.width,Pn.height);for(let ut=0;ut<6;ut++){et=In[ut].mipmaps;for(let lt=0;lt<et.length;lt++){const xt=et[lt];Ee.format!==xf?ir!==null?ke?Ce&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,lt,0,0,xt.width,xt.height,ir,xt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,lt,ge,xt.width,xt.height,0,xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ke?Ce&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,lt,0,0,xt.width,xt.height,ir,mt,xt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,lt,ge,xt.width,xt.height,0,ir,mt,xt.data)}}}else{if(et=Ee.mipmaps,ke&&We){et.length>0&&Qe++;const ut=Ht(In[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Qe,ge,ut.width,ut.height)}for(let ut=0;ut<6;ut++)if(Ft){ke?Ce&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,0,0,In[ut].width,In[ut].height,ir,mt,In[ut].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,ge,In[ut].width,In[ut].height,0,ir,mt,In[ut].data);for(let lt=0;lt<et.length;lt++){const Dt=et[lt].image[ut].image;ke?Ce&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,lt+1,0,0,Dt.width,Dt.height,ir,mt,Dt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,lt+1,ge,Dt.width,Dt.height,0,ir,mt,Dt.data)}}else{ke?Ce&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,0,0,ir,mt,In[ut]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,ge,ir,mt,In[ut]);for(let lt=0;lt<et.length;lt++){const xt=et[lt];ke?Ce&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,lt+1,0,0,ir,mt,xt.image[ut]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ut,lt+1,ge,ir,mt,xt.image[ut])}}}P(Ee)&&C(t.TEXTURE_CUBE_MAP),Pt.__version=vt.version,Ee.onUpdate&&Ee.onUpdate(Ee)}$e.__version=Ee.version}function Se($e,Ee,_t,jt,vt,Pt){const vn=o.convert(_t.format,_t.colorSpace),hn=o.convert(_t.type),pn=B(_t.internalFormat,vn,hn,_t.colorSpace),nn=r.get(Ee),Ft=r.get(_t);if(Ft.__renderTarget=Ee,!nn.__hasExternalTextures){const In=Math.max(1,Ee.width>>Pt),Pn=Math.max(1,Ee.height>>Pt);vt===t.TEXTURE_3D||vt===t.TEXTURE_2D_ARRAY?n.texImage3D(vt,Pt,pn,In,Pn,Ee.depth,0,vn,hn,null):n.texImage2D(vt,Pt,pn,In,Pn,0,vn,hn,null)}n.bindFramebuffer(t.FRAMEBUFFER,$e),tn(Ee)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,jt,vt,Ft.__webglTexture,0,Xe(Ee)):(vt===t.TEXTURE_2D||vt>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&vt<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,jt,vt,Ft.__webglTexture,Pt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Be($e,Ee,_t){if(t.bindRenderbuffer(t.RENDERBUFFER,$e),Ee.depthBuffer){const jt=Ee.depthTexture,vt=jt&&jt.isDepthTexture?jt.type:null,Pt=z(Ee.stencilBuffer,vt),vn=Ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,hn=Xe(Ee);tn(Ee)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,hn,Pt,Ee.width,Ee.height):_t?t.renderbufferStorageMultisample(t.RENDERBUFFER,hn,Pt,Ee.width,Ee.height):t.renderbufferStorage(t.RENDERBUFFER,Pt,Ee.width,Ee.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,vn,t.RENDERBUFFER,$e)}else{const jt=Ee.textures;for(let vt=0;vt<jt.length;vt++){const Pt=jt[vt],vn=o.convert(Pt.format,Pt.colorSpace),hn=o.convert(Pt.type),pn=B(Pt.internalFormat,vn,hn,Pt.colorSpace),nn=Xe(Ee);_t&&tn(Ee)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,nn,pn,Ee.width,Ee.height):tn(Ee)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,nn,pn,Ee.width,Ee.height):t.renderbufferStorage(t.RENDERBUFFER,pn,Ee.width,Ee.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ve($e,Ee){if(Ee&&Ee.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,$e),!(Ee.depthTexture&&Ee.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const jt=r.get(Ee.depthTexture);jt.__renderTarget=Ee,(!jt.__webglTexture||Ee.depthTexture.image.width!==Ee.width||Ee.depthTexture.image.height!==Ee.height)&&(Ee.depthTexture.image.width=Ee.width,Ee.depthTexture.image.height=Ee.height,Ee.depthTexture.needsUpdate=!0),de(Ee.depthTexture,0);const vt=jt.__webglTexture,Pt=Xe(Ee);if(Ee.depthTexture.format===i_)tn(Ee)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,vt,0,Pt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,vt,0);else if(Ee.depthTexture.format===b_)tn(Ee)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,vt,0,Pt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,vt,0);else throw new Error("Unknown depthTexture format")}function tt($e){const Ee=r.get($e),_t=$e.isWebGLCubeRenderTarget===!0;if(Ee.__boundDepthTexture!==$e.depthTexture){const jt=$e.depthTexture;if(Ee.__depthDisposeCallback&&Ee.__depthDisposeCallback(),jt){const vt=()=>{delete Ee.__boundDepthTexture,delete Ee.__depthDisposeCallback,jt.removeEventListener("dispose",vt)};jt.addEventListener("dispose",vt),Ee.__depthDisposeCallback=vt}Ee.__boundDepthTexture=jt}if($e.depthTexture&&!Ee.__autoAllocateDepthBuffer){if(_t)throw new Error("target.depthTexture not supported in Cube render targets");Ve(Ee.__webglFramebuffer,$e)}else if(_t){Ee.__webglDepthbuffer=[];for(let jt=0;jt<6;jt++)if(n.bindFramebuffer(t.FRAMEBUFFER,Ee.__webglFramebuffer[jt]),Ee.__webglDepthbuffer[jt]===void 0)Ee.__webglDepthbuffer[jt]=t.createRenderbuffer(),Be(Ee.__webglDepthbuffer[jt],$e,!1);else{const vt=$e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Pt=Ee.__webglDepthbuffer[jt];t.bindRenderbuffer(t.RENDERBUFFER,Pt),t.framebufferRenderbuffer(t.FRAMEBUFFER,vt,t.RENDERBUFFER,Pt)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,Ee.__webglFramebuffer),Ee.__webglDepthbuffer===void 0)Ee.__webglDepthbuffer=t.createRenderbuffer(),Be(Ee.__webglDepthbuffer,$e,!1);else{const jt=$e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,vt=Ee.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,vt),t.framebufferRenderbuffer(t.FRAMEBUFFER,jt,t.RENDERBUFFER,vt)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function ht($e,Ee,_t){const jt=r.get($e);Ee!==void 0&&Se(jt.__webglFramebuffer,$e,$e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),_t!==void 0&&tt($e)}function it($e){const Ee=$e.texture,_t=r.get($e),jt=r.get(Ee);$e.addEventListener("dispose",W);const vt=$e.textures,Pt=$e.isWebGLCubeRenderTarget===!0,vn=vt.length>1;if(vn||(jt.__webglTexture===void 0&&(jt.__webglTexture=t.createTexture()),jt.__version=Ee.version,l.memory.textures++),Pt){_t.__webglFramebuffer=[];for(let hn=0;hn<6;hn++)if(Ee.mipmaps&&Ee.mipmaps.length>0){_t.__webglFramebuffer[hn]=[];for(let pn=0;pn<Ee.mipmaps.length;pn++)_t.__webglFramebuffer[hn][pn]=t.createFramebuffer()}else _t.__webglFramebuffer[hn]=t.createFramebuffer()}else{if(Ee.mipmaps&&Ee.mipmaps.length>0){_t.__webglFramebuffer=[];for(let hn=0;hn<Ee.mipmaps.length;hn++)_t.__webglFramebuffer[hn]=t.createFramebuffer()}else _t.__webglFramebuffer=t.createFramebuffer();if(vn)for(let hn=0,pn=vt.length;hn<pn;hn++){const nn=r.get(vt[hn]);nn.__webglTexture===void 0&&(nn.__webglTexture=t.createTexture(),l.memory.textures++)}if($e.samples>0&&tn($e)===!1){_t.__webglMultisampledFramebuffer=t.createFramebuffer(),_t.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,_t.__webglMultisampledFramebuffer);for(let hn=0;hn<vt.length;hn++){const pn=vt[hn];_t.__webglColorRenderbuffer[hn]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,_t.__webglColorRenderbuffer[hn]);const nn=o.convert(pn.format,pn.colorSpace),Ft=o.convert(pn.type),In=B(pn.internalFormat,nn,Ft,pn.colorSpace,$e.isXRRenderTarget===!0),Pn=Xe($e);t.renderbufferStorageMultisample(t.RENDERBUFFER,Pn,In,$e.width,$e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+hn,t.RENDERBUFFER,_t.__webglColorRenderbuffer[hn])}t.bindRenderbuffer(t.RENDERBUFFER,null),$e.depthBuffer&&(_t.__webglDepthRenderbuffer=t.createRenderbuffer(),Be(_t.__webglDepthRenderbuffer,$e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Pt){n.bindTexture(t.TEXTURE_CUBE_MAP,jt.__webglTexture),fe(t.TEXTURE_CUBE_MAP,Ee);for(let hn=0;hn<6;hn++)if(Ee.mipmaps&&Ee.mipmaps.length>0)for(let pn=0;pn<Ee.mipmaps.length;pn++)Se(_t.__webglFramebuffer[hn][pn],$e,Ee,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+hn,pn);else Se(_t.__webglFramebuffer[hn],$e,Ee,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+hn,0);P(Ee)&&C(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(vn){for(let hn=0,pn=vt.length;hn<pn;hn++){const nn=vt[hn],Ft=r.get(nn);n.bindTexture(t.TEXTURE_2D,Ft.__webglTexture),fe(t.TEXTURE_2D,nn),Se(_t.__webglFramebuffer,$e,nn,t.COLOR_ATTACHMENT0+hn,t.TEXTURE_2D,0),P(nn)&&C(t.TEXTURE_2D)}n.unbindTexture()}else{let hn=t.TEXTURE_2D;if(($e.isWebGL3DRenderTarget||$e.isWebGLArrayRenderTarget)&&(hn=$e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(hn,jt.__webglTexture),fe(hn,Ee),Ee.mipmaps&&Ee.mipmaps.length>0)for(let pn=0;pn<Ee.mipmaps.length;pn++)Se(_t.__webglFramebuffer[pn],$e,Ee,t.COLOR_ATTACHMENT0,hn,pn);else Se(_t.__webglFramebuffer,$e,Ee,t.COLOR_ATTACHMENT0,hn,0);P(Ee)&&C(hn),n.unbindTexture()}$e.depthBuffer&&tt($e)}function gt($e){const Ee=$e.textures;for(let _t=0,jt=Ee.length;_t<jt;_t++){const vt=Ee[_t];if(P(vt)){const Pt=k($e),vn=r.get(vt).__webglTexture;n.bindTexture(Pt,vn),C(Pt),n.unbindTexture()}}}const $t=[],He=[];function Ct($e){if($e.samples>0){if(tn($e)===!1){const Ee=$e.textures,_t=$e.width,jt=$e.height;let vt=t.COLOR_BUFFER_BIT;const Pt=$e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,vn=r.get($e),hn=Ee.length>1;if(hn)for(let pn=0;pn<Ee.length;pn++)n.bindFramebuffer(t.FRAMEBUFFER,vn.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+pn,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,vn.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+pn,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,vn.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,vn.__webglFramebuffer);for(let pn=0;pn<Ee.length;pn++){if($e.resolveDepthBuffer&&($e.depthBuffer&&(vt|=t.DEPTH_BUFFER_BIT),$e.stencilBuffer&&$e.resolveStencilBuffer&&(vt|=t.STENCIL_BUFFER_BIT)),hn){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,vn.__webglColorRenderbuffer[pn]);const nn=r.get(Ee[pn]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,nn,0)}t.blitFramebuffer(0,0,_t,jt,0,0,_t,jt,vt,t.NEAREST),h===!0&&($t.length=0,He.length=0,$t.push(t.COLOR_ATTACHMENT0+pn),$e.depthBuffer&&$e.resolveDepthBuffer===!1&&($t.push(Pt),He.push(Pt),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,He)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,$t))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),hn)for(let pn=0;pn<Ee.length;pn++){n.bindFramebuffer(t.FRAMEBUFFER,vn.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+pn,t.RENDERBUFFER,vn.__webglColorRenderbuffer[pn]);const nn=r.get(Ee[pn]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,vn.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+pn,t.TEXTURE_2D,nn,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,vn.__webglMultisampledFramebuffer)}else if($e.depthBuffer&&$e.resolveDepthBuffer===!1&&h){const Ee=$e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Ee])}}}function Xe($e){return Math.min(i.maxSamples,$e.samples)}function tn($e){const Ee=r.get($e);return $e.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Ee.__useRenderToTexture!==!1}function Kt($e){const Ee=l.render.frame;v.get($e)!==Ee&&(v.set($e,Ee),$e.update())}function Jt($e,Ee){const _t=$e.colorSpace,jt=$e.format,vt=$e.type;return $e.isCompressedTexture===!0||$e.isVideoTexture===!0||_t!==x_&&_t!==Wm&&(oo.getTransfer(_t)===ko?(jt!==xf||vt!==im)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",_t)),Ee}function Ht($e){return typeof HTMLImageElement<"u"&&$e instanceof HTMLImageElement?(f.width=$e.naturalWidth||$e.width,f.height=$e.naturalHeight||$e.height):typeof VideoFrame<"u"&&$e instanceof VideoFrame?(f.width=$e.displayWidth,f.height=$e.displayHeight):(f.width=$e.width,f.height=$e.height),f}this.allocateTextureUnit=ie,this.resetTextureUnits=re,this.setTexture2D=de,this.setTexture2DArray=ue,this.setTexture3D=Te,this.setTextureCube=pe,this.rebindTextures=ht,this.setupRenderTarget=it,this.updateRenderTargetMipmap=gt,this.updateMultisampleRenderTarget=Ct,this.setupDepthRenderbuffer=tt,this.setupFrameBufferTexture=Se,this.useMultisampledRTT=tn}function Qye(t,e){function n(r,i=Wm){let o;const l=oo.getTransfer(i);if(r===im)return t.UNSIGNED_BYTE;if(r===lL)return t.UNSIGNED_SHORT_4_4_4_4;if(r===uL)return t.UNSIGNED_SHORT_5_5_5_1;if(r===X9)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===$9)return t.BYTE;if(r===W9)return t.SHORT;if(r===Zb)return t.UNSIGNED_SHORT;if(r===sL)return t.INT;if(r===F0)return t.UNSIGNED_INT;if(r===$p)return t.FLOAT;if(r===vx)return t.HALF_FLOAT;if(r===Z9)return t.ALPHA;if(r===Y9)return t.RGB;if(r===xf)return t.RGBA;if(r===K9)return t.LUMINANCE;if(r===J9)return t.LUMINANCE_ALPHA;if(r===i_)return t.DEPTH_COMPONENT;if(r===b_)return t.DEPTH_STENCIL;if(r===Q9)return t.RED;if(r===cL)return t.RED_INTEGER;if(r===ej)return t.RG;if(r===hL)return t.RG_INTEGER;if(r===fL)return t.RGBA_INTEGER;if(r===Aw||r===Cw||r===Pw||r===Rw)if(l===ko)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===Aw)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Cw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Pw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Rw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===Aw)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Cw)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Pw)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Rw)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===lP||r===uP||r===cP||r===hP)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===lP)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===uP)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===cP)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===hP)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===fP||r===dP||r===pP)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(r===fP||r===dP)return l===ko?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===pP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===mP||r===gP||r===vP||r===yP||r===_P||r===bP||r===xP||r===wP||r===SP||r===EP||r===TP||r===MP||r===AP||r===CP)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(r===mP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===gP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===vP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===yP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===_P)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===bP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===xP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===wP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===SP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===EP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===TP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===MP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===AP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===CP)return l===ko?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Dw||r===PP||r===RP)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(r===Dw)return l===ko?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===PP)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===RP)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===tj||r===DP||r===LP||r===IP)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(r===Dw)return o.COMPRESSED_RED_RGTC1_EXT;if(r===DP)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===LP)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===IP)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===__?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const e_e=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,t_e=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class n_e{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Ic,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new mg({vertexShader:e_e,fragmentShader:t_e,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new wf(new PE(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class r_e extends J0{constructor(e,n){super();const r=this;let i=null,o=1,l=null,a="local-floor",h=1,f=null,v=null,y=null,w=null,b=null,A=null;const M=new n_e,P=n.getContextAttributes();let C=null,k=null;const B=[],z=[],q=new Bi;let V=null;const W=new vf;W.viewport=new Sl;const Y=new vf;Y.viewport=new Sl;const Z=[W,Y],j=new wme;let K=null,re=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let ye=B[le];return ye===void 0&&(ye=new cC,B[le]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(le){let ye=B[le];return ye===void 0&&(ye=new cC,B[le]=ye),ye.getGripSpace()},this.getHand=function(le){let ye=B[le];return ye===void 0&&(ye=new cC,B[le]=ye),ye.getHandSpace()};function ie(le){const ye=z.indexOf(le.inputSource);if(ye===-1)return;const Se=B[ye];Se!==void 0&&(Se.update(le.inputSource,le.frame,f||l),Se.dispatchEvent({type:le.type,data:le.inputSource}))}function se(){i.removeEventListener("select",ie),i.removeEventListener("selectstart",ie),i.removeEventListener("selectend",ie),i.removeEventListener("squeeze",ie),i.removeEventListener("squeezestart",ie),i.removeEventListener("squeezeend",ie),i.removeEventListener("end",se),i.removeEventListener("inputsourceschange",de);for(let le=0;le<B.length;le++){const ye=z[le];ye!==null&&(z[le]=null,B[le].disconnect(ye))}K=null,re=null,M.reset(),e.setRenderTarget(C),b=null,w=null,y=null,i=null,k=null,ve.stop(),r.isPresenting=!1,e.setPixelRatio(V),e.setSize(q.width,q.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(le){o=le,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){a=le,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||l},this.setReferenceSpace=function(le){f=le},this.getBaseLayer=function(){return w!==null?w:b},this.getBinding=function(){return y},this.getFrame=function(){return A},this.getSession=function(){return i},this.setSession=async function(le){if(i=le,i!==null){if(C=e.getRenderTarget(),i.addEventListener("select",ie),i.addEventListener("selectstart",ie),i.addEventListener("selectend",ie),i.addEventListener("squeeze",ie),i.addEventListener("squeezestart",ie),i.addEventListener("squeezeend",ie),i.addEventListener("end",se),i.addEventListener("inputsourceschange",de),P.xrCompatible!==!0&&await n.makeXRCompatible(),V=e.getPixelRatio(),e.getSize(q),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Se=null,Be=null,Ve=null;P.depth&&(Ve=P.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Se=P.stencil?b_:i_,Be=P.stencil?__:F0);const tt={colorFormat:n.RGBA8,depthFormat:Ve,scaleFactor:o};y=new XRWebGLBinding(i,n),w=y.createProjectionLayer(tt),i.updateRenderState({layers:[w]}),e.setPixelRatio(1),e.setSize(w.textureWidth,w.textureHeight,!1),k=new B0(w.textureWidth,w.textureHeight,{format:xf,type:im,depthTexture:new mj(w.textureWidth,w.textureHeight,Be,void 0,void 0,void 0,void 0,void 0,void 0,Se),stencilBuffer:P.stencil,colorSpace:e.outputColorSpace,samples:P.antialias?4:0,resolveDepthBuffer:w.ignoreDepthValues===!1,resolveStencilBuffer:w.ignoreDepthValues===!1})}else{const Se={antialias:P.antialias,alpha:!0,depth:P.depth,stencil:P.stencil,framebufferScaleFactor:o};b=new XRWebGLLayer(i,n,Se),i.updateRenderState({baseLayer:b}),e.setPixelRatio(1),e.setSize(b.framebufferWidth,b.framebufferHeight,!1),k=new B0(b.framebufferWidth,b.framebufferHeight,{format:xf,type:im,colorSpace:e.outputColorSpace,stencilBuffer:P.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}k.isXRRenderTarget=!0,this.setFoveation(h),f=null,l=await i.requestReferenceSpace(a),ve.setContext(i),ve.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function de(le){for(let ye=0;ye<le.removed.length;ye++){const Se=le.removed[ye],Be=z.indexOf(Se);Be>=0&&(z[Be]=null,B[Be].disconnect(Se))}for(let ye=0;ye<le.added.length;ye++){const Se=le.added[ye];let Be=z.indexOf(Se);if(Be===-1){for(let tt=0;tt<B.length;tt++)if(tt>=z.length){z.push(Se),Be=tt;break}else if(z[tt]===null){z[tt]=Se,Be=tt;break}if(Be===-1)break}const Ve=B[Be];Ve&&Ve.connect(Se)}}const ue=new Sn,Te=new Sn;function pe(le,ye,Se){ue.setFromMatrixPosition(ye.matrixWorld),Te.setFromMatrixPosition(Se.matrixWorld);const Be=ue.distanceTo(Te),Ve=ye.projectionMatrix.elements,tt=Se.projectionMatrix.elements,ht=Ve[14]/(Ve[10]-1),it=Ve[14]/(Ve[10]+1),gt=(Ve[9]+1)/Ve[5],$t=(Ve[9]-1)/Ve[5],He=(Ve[8]-1)/Ve[0],Ct=(tt[8]+1)/tt[0],Xe=ht*He,tn=ht*Ct,Kt=Be/(-He+Ct),Jt=Kt*-He;if(ye.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(Jt),le.translateZ(Kt),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert(),Ve[10]===-1)le.projectionMatrix.copy(ye.projectionMatrix),le.projectionMatrixInverse.copy(ye.projectionMatrixInverse);else{const Ht=ht+Kt,$e=it+Kt,Ee=Xe-Jt,_t=tn+(Be-Jt),jt=gt*it/$e*Ht,vt=$t*it/$e*Ht;le.projectionMatrix.makePerspective(Ee,_t,jt,vt,Ht,$e),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}}function De(le,ye){ye===null?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(ye.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(i===null)return;let ye=le.near,Se=le.far;M.texture!==null&&(M.depthNear>0&&(ye=M.depthNear),M.depthFar>0&&(Se=M.depthFar)),j.near=Y.near=W.near=ye,j.far=Y.far=W.far=Se,(K!==j.near||re!==j.far)&&(i.updateRenderState({depthNear:j.near,depthFar:j.far}),K=j.near,re=j.far),W.layers.mask=le.layers.mask|2,Y.layers.mask=le.layers.mask|4,j.layers.mask=W.layers.mask|Y.layers.mask;const Be=le.parent,Ve=j.cameras;De(j,Be);for(let tt=0;tt<Ve.length;tt++)De(Ve[tt],Be);Ve.length===2?pe(j,W,Y):j.projectionMatrix.copy(W.projectionMatrix),me(le,j,Be)};function me(le,ye,Se){Se===null?le.matrix.copy(ye.matrixWorld):(le.matrix.copy(Se.matrixWorld),le.matrix.invert(),le.matrix.multiply(ye.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0),le.projectionMatrix.copy(ye.projectionMatrix),le.projectionMatrixInverse.copy(ye.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=NP*2*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}this.getCamera=function(){return j},this.getFoveation=function(){if(!(w===null&&b===null))return h},this.setFoveation=function(le){h=le,w!==null&&(w.fixedFoveation=le),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=le)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(j)};let Me=null;function fe(le,ye){if(v=ye.getViewerPose(f||l),A=ye,v!==null){const Se=v.views;b!==null&&(e.setRenderTargetFramebuffer(k,b.framebuffer),e.setRenderTarget(k));let Be=!1;Se.length!==j.cameras.length&&(j.cameras.length=0,Be=!0);for(let ht=0;ht<Se.length;ht++){const it=Se[ht];let gt=null;if(b!==null)gt=b.getViewport(it);else{const He=y.getViewSubImage(w,it);gt=He.viewport,ht===0&&(e.setRenderTargetTextures(k,He.colorTexture,w.ignoreDepthValues?void 0:He.depthStencilTexture),e.setRenderTarget(k))}let $t=Z[ht];$t===void 0&&($t=new vf,$t.layers.enable(ht),$t.viewport=new Sl,Z[ht]=$t),$t.matrix.fromArray(it.transform.matrix),$t.matrix.decompose($t.position,$t.quaternion,$t.scale),$t.projectionMatrix.fromArray(it.projectionMatrix),$t.projectionMatrixInverse.copy($t.projectionMatrix).invert(),$t.viewport.set(gt.x,gt.y,gt.width,gt.height),ht===0&&(j.matrix.copy($t.matrix),j.matrix.decompose(j.position,j.quaternion,j.scale)),Be===!0&&j.cameras.push($t)}const Ve=i.enabledFeatures;if(Ve&&Ve.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&y){const ht=y.getDepthInformation(Se[0]);ht&&ht.isValid&&ht.texture&&M.init(e,ht,i.renderState)}}for(let Se=0;Se<B.length;Se++){const Be=z[Se],Ve=B[Se];Be!==null&&Ve!==void 0&&Ve.update(Be,ye,f||l)}Me&&Me(le,ye),ye.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ye}),A=null}const ve=new yj;ve.setAnimationLoop(fe),this.setAnimationLoop=function(le){Me=le},this.dispose=function(){}}}const i0=new fd,i_e=new ws;function a_e(t,e){function n(P,C){P.matrixAutoUpdate===!0&&P.updateMatrix(),C.value.copy(P.matrix)}function r(P,C){C.color.getRGB(P.fogColor.value,cj(t)),C.isFog?(P.fogNear.value=C.near,P.fogFar.value=C.far):C.isFogExp2&&(P.fogDensity.value=C.density)}function i(P,C,k,B,z){C.isMeshBasicMaterial||C.isMeshLambertMaterial?o(P,C):C.isMeshToonMaterial?(o(P,C),y(P,C)):C.isMeshPhongMaterial?(o(P,C),v(P,C)):C.isMeshStandardMaterial?(o(P,C),w(P,C),C.isMeshPhysicalMaterial&&b(P,C,z)):C.isMeshMatcapMaterial?(o(P,C),A(P,C)):C.isMeshDepthMaterial?o(P,C):C.isMeshDistanceMaterial?(o(P,C),M(P,C)):C.isMeshNormalMaterial?o(P,C):C.isLineBasicMaterial?(l(P,C),C.isLineDashedMaterial&&a(P,C)):C.isPointsMaterial?h(P,C,k,B):C.isSpriteMaterial?f(P,C):C.isShadowMaterial?(P.color.value.copy(C.color),P.opacity.value=C.opacity):C.isShaderMaterial&&(C.uniformsNeedUpdate=!1)}function o(P,C){P.opacity.value=C.opacity,C.color&&P.diffuse.value.copy(C.color),C.emissive&&P.emissive.value.copy(C.emissive).multiplyScalar(C.emissiveIntensity),C.map&&(P.map.value=C.map,n(C.map,P.mapTransform)),C.alphaMap&&(P.alphaMap.value=C.alphaMap,n(C.alphaMap,P.alphaMapTransform)),C.bumpMap&&(P.bumpMap.value=C.bumpMap,n(C.bumpMap,P.bumpMapTransform),P.bumpScale.value=C.bumpScale,C.side===vh&&(P.bumpScale.value*=-1)),C.normalMap&&(P.normalMap.value=C.normalMap,n(C.normalMap,P.normalMapTransform),P.normalScale.value.copy(C.normalScale),C.side===vh&&P.normalScale.value.negate()),C.displacementMap&&(P.displacementMap.value=C.displacementMap,n(C.displacementMap,P.displacementMapTransform),P.displacementScale.value=C.displacementScale,P.displacementBias.value=C.displacementBias),C.emissiveMap&&(P.emissiveMap.value=C.emissiveMap,n(C.emissiveMap,P.emissiveMapTransform)),C.specularMap&&(P.specularMap.value=C.specularMap,n(C.specularMap,P.specularMapTransform)),C.alphaTest>0&&(P.alphaTest.value=C.alphaTest);const k=e.get(C),B=k.envMap,z=k.envMapRotation;B&&(P.envMap.value=B,i0.copy(z),i0.x*=-1,i0.y*=-1,i0.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(i0.y*=-1,i0.z*=-1),P.envMapRotation.value.setFromMatrix4(i_e.makeRotationFromEuler(i0)),P.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,P.reflectivity.value=C.reflectivity,P.ior.value=C.ior,P.refractionRatio.value=C.refractionRatio),C.lightMap&&(P.lightMap.value=C.lightMap,P.lightMapIntensity.value=C.lightMapIntensity,n(C.lightMap,P.lightMapTransform)),C.aoMap&&(P.aoMap.value=C.aoMap,P.aoMapIntensity.value=C.aoMapIntensity,n(C.aoMap,P.aoMapTransform))}function l(P,C){P.diffuse.value.copy(C.color),P.opacity.value=C.opacity,C.map&&(P.map.value=C.map,n(C.map,P.mapTransform))}function a(P,C){P.dashSize.value=C.dashSize,P.totalSize.value=C.dashSize+C.gapSize,P.scale.value=C.scale}function h(P,C,k,B){P.diffuse.value.copy(C.color),P.opacity.value=C.opacity,P.size.value=C.size*k,P.scale.value=B*.5,C.map&&(P.map.value=C.map,n(C.map,P.uvTransform)),C.alphaMap&&(P.alphaMap.value=C.alphaMap,n(C.alphaMap,P.alphaMapTransform)),C.alphaTest>0&&(P.alphaTest.value=C.alphaTest)}function f(P,C){P.diffuse.value.copy(C.color),P.opacity.value=C.opacity,P.rotation.value=C.rotation,C.map&&(P.map.value=C.map,n(C.map,P.mapTransform)),C.alphaMap&&(P.alphaMap.value=C.alphaMap,n(C.alphaMap,P.alphaMapTransform)),C.alphaTest>0&&(P.alphaTest.value=C.alphaTest)}function v(P,C){P.specular.value.copy(C.specular),P.shininess.value=Math.max(C.shininess,1e-4)}function y(P,C){C.gradientMap&&(P.gradientMap.value=C.gradientMap)}function w(P,C){P.metalness.value=C.metalness,C.metalnessMap&&(P.metalnessMap.value=C.metalnessMap,n(C.metalnessMap,P.metalnessMapTransform)),P.roughness.value=C.roughness,C.roughnessMap&&(P.roughnessMap.value=C.roughnessMap,n(C.roughnessMap,P.roughnessMapTransform)),C.envMap&&(P.envMapIntensity.value=C.envMapIntensity)}function b(P,C,k){P.ior.value=C.ior,C.sheen>0&&(P.sheenColor.value.copy(C.sheenColor).multiplyScalar(C.sheen),P.sheenRoughness.value=C.sheenRoughness,C.sheenColorMap&&(P.sheenColorMap.value=C.sheenColorMap,n(C.sheenColorMap,P.sheenColorMapTransform)),C.sheenRoughnessMap&&(P.sheenRoughnessMap.value=C.sheenRoughnessMap,n(C.sheenRoughnessMap,P.sheenRoughnessMapTransform))),C.clearcoat>0&&(P.clearcoat.value=C.clearcoat,P.clearcoatRoughness.value=C.clearcoatRoughness,C.clearcoatMap&&(P.clearcoatMap.value=C.clearcoatMap,n(C.clearcoatMap,P.clearcoatMapTransform)),C.clearcoatRoughnessMap&&(P.clearcoatRoughnessMap.value=C.clearcoatRoughnessMap,n(C.clearcoatRoughnessMap,P.clearcoatRoughnessMapTransform)),C.clearcoatNormalMap&&(P.clearcoatNormalMap.value=C.clearcoatNormalMap,n(C.clearcoatNormalMap,P.clearcoatNormalMapTransform),P.clearcoatNormalScale.value.copy(C.clearcoatNormalScale),C.side===vh&&P.clearcoatNormalScale.value.negate())),C.dispersion>0&&(P.dispersion.value=C.dispersion),C.iridescence>0&&(P.iridescence.value=C.iridescence,P.iridescenceIOR.value=C.iridescenceIOR,P.iridescenceThicknessMinimum.value=C.iridescenceThicknessRange[0],P.iridescenceThicknessMaximum.value=C.iridescenceThicknessRange[1],C.iridescenceMap&&(P.iridescenceMap.value=C.iridescenceMap,n(C.iridescenceMap,P.iridescenceMapTransform)),C.iridescenceThicknessMap&&(P.iridescenceThicknessMap.value=C.iridescenceThicknessMap,n(C.iridescenceThicknessMap,P.iridescenceThicknessMapTransform))),C.transmission>0&&(P.transmission.value=C.transmission,P.transmissionSamplerMap.value=k.texture,P.transmissionSamplerSize.value.set(k.width,k.height),C.transmissionMap&&(P.transmissionMap.value=C.transmissionMap,n(C.transmissionMap,P.transmissionMapTransform)),P.thickness.value=C.thickness,C.thicknessMap&&(P.thicknessMap.value=C.thicknessMap,n(C.thicknessMap,P.thicknessMapTransform)),P.attenuationDistance.value=C.attenuationDistance,P.attenuationColor.value.copy(C.attenuationColor)),C.anisotropy>0&&(P.anisotropyVector.value.set(C.anisotropy*Math.cos(C.anisotropyRotation),C.anisotropy*Math.sin(C.anisotropyRotation)),C.anisotropyMap&&(P.anisotropyMap.value=C.anisotropyMap,n(C.anisotropyMap,P.anisotropyMapTransform))),P.specularIntensity.value=C.specularIntensity,P.specularColor.value.copy(C.specularColor),C.specularColorMap&&(P.specularColorMap.value=C.specularColorMap,n(C.specularColorMap,P.specularColorMapTransform)),C.specularIntensityMap&&(P.specularIntensityMap.value=C.specularIntensityMap,n(C.specularIntensityMap,P.specularIntensityMapTransform))}function A(P,C){C.matcap&&(P.matcap.value=C.matcap)}function M(P,C){const k=e.get(C).light;P.referencePosition.value.setFromMatrixPosition(k.matrixWorld),P.nearDistance.value=k.shadow.camera.near,P.farDistance.value=k.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function o_e(t,e,n,r){let i={},o={},l=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function h(k,B){const z=B.program;r.uniformBlockBinding(k,z)}function f(k,B){let z=i[k.id];z===void 0&&(A(k),z=v(k),i[k.id]=z,k.addEventListener("dispose",P));const q=B.program;r.updateUBOMapping(k,q);const V=e.render.frame;o[k.id]!==V&&(w(k),o[k.id]=V)}function v(k){const B=y();k.__bindingPointIndex=B;const z=t.createBuffer(),q=k.__size,V=k.usage;return t.bindBuffer(t.UNIFORM_BUFFER,z),t.bufferData(t.UNIFORM_BUFFER,q,V),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,B,z),z}function y(){for(let k=0;k<a;k++)if(l.indexOf(k)===-1)return l.push(k),k;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function w(k){const B=i[k.id],z=k.uniforms,q=k.__cache;t.bindBuffer(t.UNIFORM_BUFFER,B);for(let V=0,W=z.length;V<W;V++){const Y=Array.isArray(z[V])?z[V]:[z[V]];for(let Z=0,j=Y.length;Z<j;Z++){const K=Y[Z];if(b(K,V,Z,q)===!0){const re=K.__offset,ie=Array.isArray(K.value)?K.value:[K.value];let se=0;for(let de=0;de<ie.length;de++){const ue=ie[de],Te=M(ue);typeof ue=="number"||typeof ue=="boolean"?(K.__data[0]=ue,t.bufferSubData(t.UNIFORM_BUFFER,re+se,K.__data)):ue.isMatrix3?(K.__data[0]=ue.elements[0],K.__data[1]=ue.elements[1],K.__data[2]=ue.elements[2],K.__data[3]=0,K.__data[4]=ue.elements[3],K.__data[5]=ue.elements[4],K.__data[6]=ue.elements[5],K.__data[7]=0,K.__data[8]=ue.elements[6],K.__data[9]=ue.elements[7],K.__data[10]=ue.elements[8],K.__data[11]=0):(ue.toArray(K.__data,se),se+=Te.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,re,K.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function b(k,B,z,q){const V=k.value,W=B+"_"+z;if(q[W]===void 0)return typeof V=="number"||typeof V=="boolean"?q[W]=V:q[W]=V.clone(),!0;{const Y=q[W];if(typeof V=="number"||typeof V=="boolean"){if(Y!==V)return q[W]=V,!0}else if(Y.equals(V)===!1)return Y.copy(V),!0}return!1}function A(k){const B=k.uniforms;let z=0;const q=16;for(let W=0,Y=B.length;W<Y;W++){const Z=Array.isArray(B[W])?B[W]:[B[W]];for(let j=0,K=Z.length;j<K;j++){const re=Z[j],ie=Array.isArray(re.value)?re.value:[re.value];for(let se=0,de=ie.length;se<de;se++){const ue=ie[se],Te=M(ue),pe=z%q,De=pe%Te.boundary,me=pe+De;z+=De,me!==0&&q-me<Te.storage&&(z+=q-me),re.__data=new Float32Array(Te.storage/Float32Array.BYTES_PER_ELEMENT),re.__offset=z,z+=Te.storage}}}const V=z%q;return V>0&&(z+=q-V),k.__size=z,k.__cache={},this}function M(k){const B={boundary:0,storage:0};return typeof k=="number"||typeof k=="boolean"?(B.boundary=4,B.storage=4):k.isVector2?(B.boundary=8,B.storage=8):k.isVector3||k.isColor?(B.boundary=16,B.storage=12):k.isVector4?(B.boundary=16,B.storage=16):k.isMatrix3?(B.boundary=48,B.storage=48):k.isMatrix4?(B.boundary=64,B.storage=64):k.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",k),B}function P(k){const B=k.target;B.removeEventListener("dispose",P);const z=l.indexOf(B.__bindingPointIndex);l.splice(z,1),t.deleteBuffer(i[B.id]),delete i[B.id],delete o[B.id]}function C(){for(const k in i)t.deleteBuffer(i[k]);l=[],i={},o={}}return{bind:h,update:f,dispose:C}}class s_e{constructor(e={}){const{canvas:n=Ppe(),context:r=null,depth:i=!0,stencil:o=!1,alpha:l=!1,antialias:a=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:f=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:y=!1,reverseDepthBuffer:w=!1}=e;this.isWebGLRenderer=!0;let b;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");b=r.getContextAttributes().alpha}else b=l;const A=new Uint32Array(4),M=new Int32Array(4);let P=null,C=null;const k=[],B=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=zh,this.toneMapping=ng,this.toneMappingExposure=1;const z=this;let q=!1,V=0,W=0,Y=null,Z=-1,j=null;const K=new Sl,re=new Sl;let ie=null;const se=new ba(0);let de=0,ue=n.width,Te=n.height,pe=1,De=null,me=null;const Me=new Sl(0,0,ue,Te),fe=new Sl(0,0,ue,Te);let ve=!1;const le=new mL;let ye=!1,Se=!1;this.transmissionResolutionScale=1;const Be=new ws,Ve=new ws,tt=new Sn,ht=new Sl,it={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let gt=!1;function $t(){return Y===null?pe:1}let He=r;function Ct(nt,an){return n.getContext(nt,an)}try{const nt={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:h,preserveDrawingBuffer:f,powerPreference:v,failIfMajorPerformanceCaveat:y};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${aL}`),n.addEventListener("webglcontextlost",ut,!1),n.addEventListener("webglcontextrestored",lt,!1),n.addEventListener("webglcontextcreationerror",xt,!1),He===null){const an="webgl2";if(He=Ct(an,nt),He===null)throw Ct(an)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(nt){throw console.error("THREE.WebGLRenderer: "+nt.message),nt}let Xe,tn,Kt,Jt,Ht,$e,Ee,_t,jt,vt,Pt,vn,hn,pn,nn,Ft,In,Pn,ir,mt,ge,ke,We,Ce;function Qe(){Xe=new vve(He),Xe.init(),ke=new Qye(He,Xe),tn=new cve(He,Xe,e,ke),Kt=new Kye(He,Xe),tn.reverseDepthBuffer&&w&&Kt.buffers.depth.setReversed(!0),Jt=new bve(He),Ht=new Bye,$e=new Jye(He,Xe,Kt,Ht,tn,ke,Jt),Ee=new fve(z),_t=new gve(z),jt=new Mme(He),We=new lve(He,jt),vt=new yve(He,jt,Jt,We),Pt=new wve(He,vt,jt,Jt),ir=new xve(He,tn,$e),Ft=new hve(Ht),vn=new Fye(z,Ee,_t,Xe,tn,We,Ft),hn=new a_e(z,Ht),pn=new Uye,nn=new $ye(Xe),Pn=new sve(z,Ee,_t,Kt,Pt,b,h),In=new Zye(z,Pt,tn),Ce=new o_e(He,Jt,tn,Kt),mt=new uve(He,Xe,Jt),ge=new _ve(He,Xe,Jt),Jt.programs=vn.programs,z.capabilities=tn,z.extensions=Xe,z.properties=Ht,z.renderLists=pn,z.shadowMap=In,z.state=Kt,z.info=Jt}Qe();const et=new r_e(z,He);this.xr=et,this.getContext=function(){return He},this.getContextAttributes=function(){return He.getContextAttributes()},this.forceContextLoss=function(){const nt=Xe.get("WEBGL_lose_context");nt&&nt.loseContext()},this.forceContextRestore=function(){const nt=Xe.get("WEBGL_lose_context");nt&&nt.restoreContext()},this.getPixelRatio=function(){return pe},this.setPixelRatio=function(nt){nt!==void 0&&(pe=nt,this.setSize(ue,Te,!1))},this.getSize=function(nt){return nt.set(ue,Te)},this.setSize=function(nt,an,gn=!0){if(et.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ue=nt,Te=an,n.width=Math.floor(nt*pe),n.height=Math.floor(an*pe),gn===!0&&(n.style.width=nt+"px",n.style.height=an+"px"),this.setViewport(0,0,nt,an)},this.getDrawingBufferSize=function(nt){return nt.set(ue*pe,Te*pe).floor()},this.setDrawingBufferSize=function(nt,an,gn){ue=nt,Te=an,pe=gn,n.width=Math.floor(nt*gn),n.height=Math.floor(an*gn),this.setViewport(0,0,nt,an)},this.getCurrentViewport=function(nt){return nt.copy(K)},this.getViewport=function(nt){return nt.copy(Me)},this.setViewport=function(nt,an,gn,_n){nt.isVector4?Me.set(nt.x,nt.y,nt.z,nt.w):Me.set(nt,an,gn,_n),Kt.viewport(K.copy(Me).multiplyScalar(pe).round())},this.getScissor=function(nt){return nt.copy(fe)},this.setScissor=function(nt,an,gn,_n){nt.isVector4?fe.set(nt.x,nt.y,nt.z,nt.w):fe.set(nt,an,gn,_n),Kt.scissor(re.copy(fe).multiplyScalar(pe).round())},this.getScissorTest=function(){return ve},this.setScissorTest=function(nt){Kt.setScissorTest(ve=nt)},this.setOpaqueSort=function(nt){De=nt},this.setTransparentSort=function(nt){me=nt},this.getClearColor=function(nt){return nt.copy(Pn.getClearColor())},this.setClearColor=function(){Pn.setClearColor(...arguments)},this.getClearAlpha=function(){return Pn.getClearAlpha()},this.setClearAlpha=function(){Pn.setClearAlpha(...arguments)},this.clear=function(nt=!0,an=!0,gn=!0){let _n=0;if(nt){let fn=!1;if(Y!==null){const cr=Y.texture.format;fn=cr===fL||cr===hL||cr===cL}if(fn){const cr=Y.texture.type,hr=cr===im||cr===F0||cr===Zb||cr===__||cr===lL||cr===uL,Ar=Pn.getClearColor(),Pr=Pn.getClearAlpha(),ei=Ar.r,Xr=Ar.g,Hr=Ar.b;hr?(A[0]=ei,A[1]=Xr,A[2]=Hr,A[3]=Pr,He.clearBufferuiv(He.COLOR,0,A)):(M[0]=ei,M[1]=Xr,M[2]=Hr,M[3]=Pr,He.clearBufferiv(He.COLOR,0,M))}else _n|=He.COLOR_BUFFER_BIT}an&&(_n|=He.DEPTH_BUFFER_BIT),gn&&(_n|=He.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),He.clear(_n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ut,!1),n.removeEventListener("webglcontextrestored",lt,!1),n.removeEventListener("webglcontextcreationerror",xt,!1),Pn.dispose(),pn.dispose(),nn.dispose(),Ht.dispose(),Ee.dispose(),_t.dispose(),Pt.dispose(),We.dispose(),Ce.dispose(),vn.dispose(),et.dispose(),et.removeEventListener("sessionstart",we),et.removeEventListener("sessionend",Ne),je.stop()};function ut(nt){nt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),q=!0}function lt(){console.log("THREE.WebGLRenderer: Context Restored."),q=!1;const nt=Jt.autoReset,an=In.enabled,gn=In.autoUpdate,_n=In.needsUpdate,fn=In.type;Qe(),Jt.autoReset=nt,In.enabled=an,In.autoUpdate=gn,In.needsUpdate=_n,In.type=fn}function xt(nt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",nt.statusMessage)}function Dt(nt){const an=nt.target;an.removeEventListener("dispose",Dt),zt(an)}function zt(nt){Tn(nt),Ht.remove(nt)}function Tn(nt){const an=Ht.get(nt).programs;an!==void 0&&(an.forEach(function(gn){vn.releaseProgram(gn)}),nt.isShaderMaterial&&vn.releaseShaderCache(nt))}this.renderBufferDirect=function(nt,an,gn,_n,fn,cr){an===null&&(an=it);const hr=fn.isMesh&&fn.matrixWorld.determinant()<0,Ar=Vi(nt,an,gn,_n,fn);Kt.setMaterial(_n,hr);let Pr=gn.index,ei=1;if(_n.wireframe===!0){if(Pr=vt.getWireframeAttribute(gn),Pr===void 0)return;ei=2}const Xr=gn.drawRange,Hr=gn.attributes.position;let gi=Xr.start*ei,vi=(Xr.start+Xr.count)*ei;cr!==null&&(gi=Math.max(gi,cr.start*ei),vi=Math.min(vi,(cr.start+cr.count)*ei)),Pr!==null?(gi=Math.max(gi,0),vi=Math.min(vi,Pr.count)):Hr!=null&&(gi=Math.max(gi,0),vi=Math.min(vi,Hr.count));const yi=vi-gi;if(yi<0||yi===1/0)return;We.setup(fn,_n,Ar,gn,Pr);let Wi,ii=mt;if(Pr!==null&&(Wi=jt.get(Pr),ii=ge,ii.setIndex(Wi)),fn.isMesh)_n.wireframe===!0?(Kt.setLineWidth(_n.wireframeLinewidth*$t()),ii.setMode(He.LINES)):ii.setMode(He.TRIANGLES);else if(fn.isLine){let Zr=_n.linewidth;Zr===void 0&&(Zr=1),Kt.setLineWidth(Zr*$t()),fn.isLineSegments?ii.setMode(He.LINES):fn.isLineLoop?ii.setMode(He.LINE_LOOP):ii.setMode(He.LINE_STRIP)}else fn.isPoints?ii.setMode(He.POINTS):fn.isSprite&&ii.setMode(He.TRIANGLES);if(fn.isBatchedMesh)if(fn._multiDrawInstances!==null)u0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),ii.renderMultiDrawInstances(fn._multiDrawStarts,fn._multiDrawCounts,fn._multiDrawCount,fn._multiDrawInstances);else if(Xe.get("WEBGL_multi_draw"))ii.renderMultiDraw(fn._multiDrawStarts,fn._multiDrawCounts,fn._multiDrawCount);else{const Zr=fn._multiDrawStarts,$a=fn._multiDrawCounts,Di=fn._multiDrawCount,ja=Pr?jt.get(Pr).bytesPerElement:1,lo=Ht.get(_n).currentProgram.getUniforms();for(let Gi=0;Gi<Di;Gi++)lo.setValue(He,"_gl_DrawID",Gi),ii.render(Zr[Gi]/ja,$a[Gi])}else if(fn.isInstancedMesh)ii.renderInstances(gi,yi,fn.count);else if(gn.isInstancedBufferGeometry){const Zr=gn._maxInstanceCount!==void 0?gn._maxInstanceCount:1/0,$a=Math.min(gn.instanceCount,Zr);ii.renderInstances(gi,yi,$a)}else ii.render(gi,yi)};function qt(nt,an,gn){nt.transparent===!0&&nt.side===qp&&nt.forceSinglePass===!1?(nt.side=vh,nt.needsUpdate=!0,lr(nt,an,gn),nt.side=pg,nt.needsUpdate=!0,lr(nt,an,gn),nt.side=qp):lr(nt,an,gn)}this.compile=function(nt,an,gn=null){gn===null&&(gn=nt),C=nn.get(gn),C.init(an),B.push(C),gn.traverseVisible(function(fn){fn.isLight&&fn.layers.test(an.layers)&&(C.pushLight(fn),fn.castShadow&&C.pushShadow(fn))}),nt!==gn&&nt.traverseVisible(function(fn){fn.isLight&&fn.layers.test(an.layers)&&(C.pushLight(fn),fn.castShadow&&C.pushShadow(fn))}),C.setupLights();const _n=new Set;return nt.traverse(function(fn){if(!(fn.isMesh||fn.isPoints||fn.isLine||fn.isSprite))return;const cr=fn.material;if(cr)if(Array.isArray(cr))for(let hr=0;hr<cr.length;hr++){const Ar=cr[hr];qt(Ar,gn,fn),_n.add(Ar)}else qt(cr,gn,fn),_n.add(cr)}),C=B.pop(),_n},this.compileAsync=function(nt,an,gn=null){const _n=this.compile(nt,an,gn);return new Promise(fn=>{function cr(){if(_n.forEach(function(hr){Ht.get(hr).currentProgram.isReady()&&_n.delete(hr)}),_n.size===0){fn(nt);return}setTimeout(cr,10)}Xe.get("KHR_parallel_shader_compile")!==null?cr():setTimeout(cr,10)})};let Zn=null;function Gn(nt){Zn&&Zn(nt)}function we(){je.stop()}function Ne(){je.start()}const je=new yj;je.setAnimationLoop(Gn),typeof self<"u"&&je.setContext(self),this.setAnimationLoop=function(nt){Zn=nt,et.setAnimationLoop(nt),nt===null?je.stop():je.start()},et.addEventListener("sessionstart",we),et.addEventListener("sessionend",Ne),this.render=function(nt,an){if(an!==void 0&&an.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(q===!0)return;if(nt.matrixWorldAutoUpdate===!0&&nt.updateMatrixWorld(),an.parent===null&&an.matrixWorldAutoUpdate===!0&&an.updateMatrixWorld(),et.enabled===!0&&et.isPresenting===!0&&(et.cameraAutoUpdate===!0&&et.updateCamera(an),an=et.getCamera()),nt.isScene===!0&&nt.onBeforeRender(z,nt,an,Y),C=nn.get(nt,B.length),C.init(an),B.push(C),Ve.multiplyMatrices(an.projectionMatrix,an.matrixWorldInverse),le.setFromProjectionMatrix(Ve),Se=this.localClippingEnabled,ye=Ft.init(this.clippingPlanes,Se),P=pn.get(nt,k.length),P.init(),k.push(P),et.enabled===!0&&et.isPresenting===!0){const cr=z.xr.getDepthSensingMesh();cr!==null&&At(cr,an,-1/0,z.sortObjects)}At(nt,an,0,z.sortObjects),P.finish(),z.sortObjects===!0&&P.sort(De,me),gt=et.enabled===!1||et.isPresenting===!1||et.hasDepthSensing()===!1,gt&&Pn.addToRenderList(P,nt),this.info.render.frame++,ye===!0&&Ft.beginShadows();const gn=C.state.shadowsArray;In.render(gn,nt,an),ye===!0&&Ft.endShadows(),this.info.autoReset===!0&&this.info.reset();const _n=P.opaque,fn=P.transmissive;if(C.setupLights(),an.isArrayCamera){const cr=an.cameras;if(fn.length>0)for(let hr=0,Ar=cr.length;hr<Ar;hr++){const Pr=cr[hr];Hn(_n,fn,nt,Pr)}gt&&Pn.render(nt);for(let hr=0,Ar=cr.length;hr<Ar;hr++){const Pr=cr[hr];sn(P,nt,Pr,Pr.viewport)}}else fn.length>0&&Hn(_n,fn,nt,an),gt&&Pn.render(nt),sn(P,nt,an);Y!==null&&W===0&&($e.updateMultisampleRenderTarget(Y),$e.updateRenderTargetMipmap(Y)),nt.isScene===!0&&nt.onAfterRender(z,nt,an),We.resetDefaultState(),Z=-1,j=null,B.pop(),B.length>0?(C=B[B.length-1],ye===!0&&Ft.setGlobalState(z.clippingPlanes,C.state.camera)):C=null,k.pop(),k.length>0?P=k[k.length-1]:P=null};function At(nt,an,gn,_n){if(nt.visible===!1)return;if(nt.layers.test(an.layers)){if(nt.isGroup)gn=nt.renderOrder;else if(nt.isLOD)nt.autoUpdate===!0&&nt.update(an);else if(nt.isLight)C.pushLight(nt),nt.castShadow&&C.pushShadow(nt);else if(nt.isSprite){if(!nt.frustumCulled||le.intersectsSprite(nt)){_n&&ht.setFromMatrixPosition(nt.matrixWorld).applyMatrix4(Ve);const hr=Pt.update(nt),Ar=nt.material;Ar.visible&&P.push(nt,hr,Ar,gn,ht.z,null)}}else if((nt.isMesh||nt.isLine||nt.isPoints)&&(!nt.frustumCulled||le.intersectsObject(nt))){const hr=Pt.update(nt),Ar=nt.material;if(_n&&(nt.boundingSphere!==void 0?(nt.boundingSphere===null&&nt.computeBoundingSphere(),ht.copy(nt.boundingSphere.center)):(hr.boundingSphere===null&&hr.computeBoundingSphere(),ht.copy(hr.boundingSphere.center)),ht.applyMatrix4(nt.matrixWorld).applyMatrix4(Ve)),Array.isArray(Ar)){const Pr=hr.groups;for(let ei=0,Xr=Pr.length;ei<Xr;ei++){const Hr=Pr[ei],gi=Ar[Hr.materialIndex];gi&&gi.visible&&P.push(nt,hr,gi,gn,ht.z,Hr)}}else Ar.visible&&P.push(nt,hr,Ar,gn,ht.z,null)}}const cr=nt.children;for(let hr=0,Ar=cr.length;hr<Ar;hr++)At(cr[hr],an,gn,_n)}function sn(nt,an,gn,_n){const fn=nt.opaque,cr=nt.transmissive,hr=nt.transparent;C.setupLightsView(gn),ye===!0&&Ft.setGlobalState(z.clippingPlanes,gn),_n&&Kt.viewport(K.copy(_n)),fn.length>0&&or(fn,an,gn),cr.length>0&&or(cr,an,gn),hr.length>0&&or(hr,an,gn),Kt.buffers.depth.setTest(!0),Kt.buffers.depth.setMask(!0),Kt.buffers.color.setMask(!0),Kt.setPolygonOffset(!1)}function Hn(nt,an,gn,_n){if((gn.isScene===!0?gn.overrideMaterial:null)!==null)return;C.state.transmissionRenderTarget[_n.id]===void 0&&(C.state.transmissionRenderTarget[_n.id]=new B0(1,1,{generateMipmaps:!0,type:Xe.has("EXT_color_buffer_half_float")||Xe.has("EXT_color_buffer_float")?vx:im,minFilter:w0,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:oo.workingColorSpace}));const cr=C.state.transmissionRenderTarget[_n.id],hr=_n.viewport||K;cr.setSize(hr.z*z.transmissionResolutionScale,hr.w*z.transmissionResolutionScale);const Ar=z.getRenderTarget();z.setRenderTarget(cr),z.getClearColor(se),de=z.getClearAlpha(),de<1&&z.setClearColor(16777215,.5),z.clear(),gt&&Pn.render(gn);const Pr=z.toneMapping;z.toneMapping=ng;const ei=_n.viewport;if(_n.viewport!==void 0&&(_n.viewport=void 0),C.setupLightsView(_n),ye===!0&&Ft.setGlobalState(z.clippingPlanes,_n),or(nt,gn,_n),$e.updateMultisampleRenderTarget(cr),$e.updateRenderTargetMipmap(cr),Xe.has("WEBGL_multisampled_render_to_texture")===!1){let Xr=!1;for(let Hr=0,gi=an.length;Hr<gi;Hr++){const vi=an[Hr],yi=vi.object,Wi=vi.geometry,ii=vi.material,Zr=vi.group;if(ii.side===qp&&yi.layers.test(_n.layers)){const $a=ii.side;ii.side=vh,ii.needsUpdate=!0,Er(yi,gn,_n,Wi,ii,Zr),ii.side=$a,ii.needsUpdate=!0,Xr=!0}}Xr===!0&&($e.updateMultisampleRenderTarget(cr),$e.updateRenderTargetMipmap(cr))}z.setRenderTarget(Ar),z.setClearColor(se,de),ei!==void 0&&(_n.viewport=ei),z.toneMapping=Pr}function or(nt,an,gn){const _n=an.isScene===!0?an.overrideMaterial:null;for(let fn=0,cr=nt.length;fn<cr;fn++){const hr=nt[fn],Ar=hr.object,Pr=hr.geometry,ei=_n===null?hr.material:_n,Xr=hr.group;Ar.layers.test(gn.layers)&&Er(Ar,an,gn,Pr,ei,Xr)}}function Er(nt,an,gn,_n,fn,cr){nt.onBeforeRender(z,an,gn,_n,fn,cr),nt.modelViewMatrix.multiplyMatrices(gn.matrixWorldInverse,nt.matrixWorld),nt.normalMatrix.getNormalMatrix(nt.modelViewMatrix),fn.onBeforeRender(z,an,gn,_n,nt,cr),fn.transparent===!0&&fn.side===qp&&fn.forceSinglePass===!1?(fn.side=vh,fn.needsUpdate=!0,z.renderBufferDirect(gn,an,_n,fn,nt,cr),fn.side=pg,fn.needsUpdate=!0,z.renderBufferDirect(gn,an,_n,fn,nt,cr),fn.side=qp):z.renderBufferDirect(gn,an,_n,fn,nt,cr),nt.onAfterRender(z,an,gn,_n,fn,cr)}function lr(nt,an,gn){an.isScene!==!0&&(an=it);const _n=Ht.get(nt),fn=C.state.lights,cr=C.state.shadowsArray,hr=fn.state.version,Ar=vn.getParameters(nt,fn.state,cr,an,gn),Pr=vn.getProgramCacheKey(Ar);let ei=_n.programs;_n.environment=nt.isMeshStandardMaterial?an.environment:null,_n.fog=an.fog,_n.envMap=(nt.isMeshStandardMaterial?_t:Ee).get(nt.envMap||_n.environment),_n.envMapRotation=_n.environment!==null&&nt.envMap===null?an.environmentRotation:nt.envMapRotation,ei===void 0&&(nt.addEventListener("dispose",Dt),ei=new Map,_n.programs=ei);let Xr=ei.get(Pr);if(Xr!==void 0){if(_n.currentProgram===Xr&&_n.lightsStateVersion===hr)return ci(nt,Ar),Xr}else Ar.uniforms=vn.getUniforms(nt),nt.onBeforeCompile(Ar,z),Xr=vn.acquireProgram(Ar,Pr),ei.set(Pr,Xr),_n.uniforms=Ar.uniforms;const Hr=_n.uniforms;return(!nt.isShaderMaterial&&!nt.isRawShaderMaterial||nt.clipping===!0)&&(Hr.clippingPlanes=Ft.uniform),ci(nt,Ar),_n.needsLights=Ca(nt),_n.lightsStateVersion=hr,_n.needsLights&&(Hr.ambientLightColor.value=fn.state.ambient,Hr.lightProbe.value=fn.state.probe,Hr.directionalLights.value=fn.state.directional,Hr.directionalLightShadows.value=fn.state.directionalShadow,Hr.spotLights.value=fn.state.spot,Hr.spotLightShadows.value=fn.state.spotShadow,Hr.rectAreaLights.value=fn.state.rectArea,Hr.ltc_1.value=fn.state.rectAreaLTC1,Hr.ltc_2.value=fn.state.rectAreaLTC2,Hr.pointLights.value=fn.state.point,Hr.pointLightShadows.value=fn.state.pointShadow,Hr.hemisphereLights.value=fn.state.hemi,Hr.directionalShadowMap.value=fn.state.directionalShadowMap,Hr.directionalShadowMatrix.value=fn.state.directionalShadowMatrix,Hr.spotShadowMap.value=fn.state.spotShadowMap,Hr.spotLightMatrix.value=fn.state.spotLightMatrix,Hr.spotLightMap.value=fn.state.spotLightMap,Hr.pointShadowMap.value=fn.state.pointShadowMap,Hr.pointShadowMatrix.value=fn.state.pointShadowMatrix),_n.currentProgram=Xr,_n.uniformsList=null,Xr}function Ri(nt){if(nt.uniformsList===null){const an=nt.currentProgram.getUniforms();nt.uniformsList=Iw.seqWithValue(an.seq,nt.uniforms)}return nt.uniformsList}function ci(nt,an){const gn=Ht.get(nt);gn.outputColorSpace=an.outputColorSpace,gn.batching=an.batching,gn.batchingColor=an.batchingColor,gn.instancing=an.instancing,gn.instancingColor=an.instancingColor,gn.instancingMorph=an.instancingMorph,gn.skinning=an.skinning,gn.morphTargets=an.morphTargets,gn.morphNormals=an.morphNormals,gn.morphColors=an.morphColors,gn.morphTargetsCount=an.morphTargetsCount,gn.numClippingPlanes=an.numClippingPlanes,gn.numIntersection=an.numClipIntersection,gn.vertexAlphas=an.vertexAlphas,gn.vertexTangents=an.vertexTangents,gn.toneMapping=an.toneMapping}function Vi(nt,an,gn,_n,fn){an.isScene!==!0&&(an=it),$e.resetTextureUnits();const cr=an.fog,hr=_n.isMeshStandardMaterial?an.environment:null,Ar=Y===null?z.outputColorSpace:Y.isXRRenderTarget===!0?Y.texture.colorSpace:x_,Pr=(_n.isMeshStandardMaterial?_t:Ee).get(_n.envMap||hr),ei=_n.vertexColors===!0&&!!gn.attributes.color&&gn.attributes.color.itemSize===4,Xr=!!gn.attributes.tangent&&(!!_n.normalMap||_n.anisotropy>0),Hr=!!gn.morphAttributes.position,gi=!!gn.morphAttributes.normal,vi=!!gn.morphAttributes.color;let yi=ng;_n.toneMapped&&(Y===null||Y.isXRRenderTarget===!0)&&(yi=z.toneMapping);const Wi=gn.morphAttributes.position||gn.morphAttributes.normal||gn.morphAttributes.color,ii=Wi!==void 0?Wi.length:0,Zr=Ht.get(_n),$a=C.state.lights;if(ye===!0&&(Se===!0||nt!==j)){const he=nt===j&&_n.id===Z;Ft.setState(_n,nt,he)}let Di=!1;_n.version===Zr.__version?(Zr.needsLights&&Zr.lightsStateVersion!==$a.state.version||Zr.outputColorSpace!==Ar||fn.isBatchedMesh&&Zr.batching===!1||!fn.isBatchedMesh&&Zr.batching===!0||fn.isBatchedMesh&&Zr.batchingColor===!0&&fn.colorTexture===null||fn.isBatchedMesh&&Zr.batchingColor===!1&&fn.colorTexture!==null||fn.isInstancedMesh&&Zr.instancing===!1||!fn.isInstancedMesh&&Zr.instancing===!0||fn.isSkinnedMesh&&Zr.skinning===!1||!fn.isSkinnedMesh&&Zr.skinning===!0||fn.isInstancedMesh&&Zr.instancingColor===!0&&fn.instanceColor===null||fn.isInstancedMesh&&Zr.instancingColor===!1&&fn.instanceColor!==null||fn.isInstancedMesh&&Zr.instancingMorph===!0&&fn.morphTexture===null||fn.isInstancedMesh&&Zr.instancingMorph===!1&&fn.morphTexture!==null||Zr.envMap!==Pr||_n.fog===!0&&Zr.fog!==cr||Zr.numClippingPlanes!==void 0&&(Zr.numClippingPlanes!==Ft.numPlanes||Zr.numIntersection!==Ft.numIntersection)||Zr.vertexAlphas!==ei||Zr.vertexTangents!==Xr||Zr.morphTargets!==Hr||Zr.morphNormals!==gi||Zr.morphColors!==vi||Zr.toneMapping!==yi||Zr.morphTargetsCount!==ii)&&(Di=!0):(Di=!0,Zr.__version=_n.version);let ja=Zr.currentProgram;Di===!0&&(ja=lr(_n,an,fn));let lo=!1,Gi=!1,ti=!1;const Pi=ja.getUniforms(),xa=Zr.uniforms;if(Kt.useProgram(ja.program)&&(lo=!0,Gi=!0,ti=!0),_n.id!==Z&&(Z=_n.id,Gi=!0),lo||j!==nt){Kt.buffers.depth.getReversed()?(Be.copy(nt.projectionMatrix),Dpe(Be),Lpe(Be),Pi.setValue(He,"projectionMatrix",Be)):Pi.setValue(He,"projectionMatrix",nt.projectionMatrix),Pi.setValue(He,"viewMatrix",nt.matrixWorldInverse);const Ge=Pi.map.cameraPosition;Ge!==void 0&&Ge.setValue(He,tt.setFromMatrixPosition(nt.matrixWorld)),tn.logarithmicDepthBuffer&&Pi.setValue(He,"logDepthBufFC",2/(Math.log(nt.far+1)/Math.LN2)),(_n.isMeshPhongMaterial||_n.isMeshToonMaterial||_n.isMeshLambertMaterial||_n.isMeshBasicMaterial||_n.isMeshStandardMaterial||_n.isShaderMaterial)&&Pi.setValue(He,"isOrthographic",nt.isOrthographicCamera===!0),j!==nt&&(j=nt,Gi=!0,ti=!0)}if(fn.isSkinnedMesh){Pi.setOptional(He,fn,"bindMatrix"),Pi.setOptional(He,fn,"bindMatrixInverse");const he=fn.skeleton;he&&(he.boneTexture===null&&he.computeBoneTexture(),Pi.setValue(He,"boneTexture",he.boneTexture,$e))}fn.isBatchedMesh&&(Pi.setOptional(He,fn,"batchingTexture"),Pi.setValue(He,"batchingTexture",fn._matricesTexture,$e),Pi.setOptional(He,fn,"batchingIdTexture"),Pi.setValue(He,"batchingIdTexture",fn._indirectTexture,$e),Pi.setOptional(He,fn,"batchingColorTexture"),fn._colorsTexture!==null&&Pi.setValue(He,"batchingColorTexture",fn._colorsTexture,$e));const H=gn.morphAttributes;if((H.position!==void 0||H.normal!==void 0||H.color!==void 0)&&ir.update(fn,gn,ja),(Gi||Zr.receiveShadow!==fn.receiveShadow)&&(Zr.receiveShadow=fn.receiveShadow,Pi.setValue(He,"receiveShadow",fn.receiveShadow)),_n.isMeshGouraudMaterial&&_n.envMap!==null&&(xa.envMap.value=Pr,xa.flipEnvMap.value=Pr.isCubeTexture&&Pr.isRenderTargetTexture===!1?-1:1),_n.isMeshStandardMaterial&&_n.envMap===null&&an.environment!==null&&(xa.envMapIntensity.value=an.environmentIntensity),Gi&&(Pi.setValue(He,"toneMappingExposure",z.toneMappingExposure),Zr.needsLights&&Vr(xa,ti),cr&&_n.fog===!0&&hn.refreshFogUniforms(xa,cr),hn.refreshMaterialUniforms(xa,_n,pe,Te,C.state.transmissionRenderTarget[nt.id]),Iw.upload(He,Ri(Zr),xa,$e)),_n.isShaderMaterial&&_n.uniformsNeedUpdate===!0&&(Iw.upload(He,Ri(Zr),xa,$e),_n.uniformsNeedUpdate=!1),_n.isSpriteMaterial&&Pi.setValue(He,"center",fn.center),Pi.setValue(He,"modelViewMatrix",fn.modelViewMatrix),Pi.setValue(He,"normalMatrix",fn.normalMatrix),Pi.setValue(He,"modelMatrix",fn.matrixWorld),_n.isShaderMaterial||_n.isRawShaderMaterial){const he=_n.uniformsGroups;for(let Ge=0,St=he.length;Ge<St;Ge++){const Lt=he[Ge];Ce.update(Lt,ja),Ce.bind(Lt,ja)}}return ja}function Vr(nt,an){nt.ambientLightColor.needsUpdate=an,nt.lightProbe.needsUpdate=an,nt.directionalLights.needsUpdate=an,nt.directionalLightShadows.needsUpdate=an,nt.pointLights.needsUpdate=an,nt.pointLightShadows.needsUpdate=an,nt.spotLights.needsUpdate=an,nt.spotLightShadows.needsUpdate=an,nt.rectAreaLights.needsUpdate=an,nt.hemisphereLights.needsUpdate=an}function Ca(nt){return nt.isMeshLambertMaterial||nt.isMeshToonMaterial||nt.isMeshPhongMaterial||nt.isMeshStandardMaterial||nt.isShadowMaterial||nt.isShaderMaterial&&nt.lights===!0}this.getActiveCubeFace=function(){return V},this.getActiveMipmapLevel=function(){return W},this.getRenderTarget=function(){return Y},this.setRenderTargetTextures=function(nt,an,gn){Ht.get(nt.texture).__webglTexture=an,Ht.get(nt.depthTexture).__webglTexture=gn;const _n=Ht.get(nt);_n.__hasExternalTextures=!0,_n.__autoAllocateDepthBuffer=gn===void 0,_n.__autoAllocateDepthBuffer||Xe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),_n.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(nt,an){const gn=Ht.get(nt);gn.__webglFramebuffer=an,gn.__useDefaultFramebuffer=an===void 0};const ra=He.createFramebuffer();this.setRenderTarget=function(nt,an=0,gn=0){Y=nt,V=an,W=gn;let _n=!0,fn=null,cr=!1,hr=!1;if(nt){const Pr=Ht.get(nt);if(Pr.__useDefaultFramebuffer!==void 0)Kt.bindFramebuffer(He.FRAMEBUFFER,null),_n=!1;else if(Pr.__webglFramebuffer===void 0)$e.setupRenderTarget(nt);else if(Pr.__hasExternalTextures)$e.rebindTextures(nt,Ht.get(nt.texture).__webglTexture,Ht.get(nt.depthTexture).__webglTexture);else if(nt.depthBuffer){const Hr=nt.depthTexture;if(Pr.__boundDepthTexture!==Hr){if(Hr!==null&&Ht.has(Hr)&&(nt.width!==Hr.image.width||nt.height!==Hr.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$e.setupDepthRenderbuffer(nt)}}const ei=nt.texture;(ei.isData3DTexture||ei.isDataArrayTexture||ei.isCompressedArrayTexture)&&(hr=!0);const Xr=Ht.get(nt).__webglFramebuffer;nt.isWebGLCubeRenderTarget?(Array.isArray(Xr[an])?fn=Xr[an][gn]:fn=Xr[an],cr=!0):nt.samples>0&&$e.useMultisampledRTT(nt)===!1?fn=Ht.get(nt).__webglMultisampledFramebuffer:Array.isArray(Xr)?fn=Xr[gn]:fn=Xr,K.copy(nt.viewport),re.copy(nt.scissor),ie=nt.scissorTest}else K.copy(Me).multiplyScalar(pe).floor(),re.copy(fe).multiplyScalar(pe).floor(),ie=ve;if(gn!==0&&(fn=ra),Kt.bindFramebuffer(He.FRAMEBUFFER,fn)&&_n&&Kt.drawBuffers(nt,fn),Kt.viewport(K),Kt.scissor(re),Kt.setScissorTest(ie),cr){const Pr=Ht.get(nt.texture);He.framebufferTexture2D(He.FRAMEBUFFER,He.COLOR_ATTACHMENT0,He.TEXTURE_CUBE_MAP_POSITIVE_X+an,Pr.__webglTexture,gn)}else if(hr){const Pr=Ht.get(nt.texture),ei=an;He.framebufferTextureLayer(He.FRAMEBUFFER,He.COLOR_ATTACHMENT0,Pr.__webglTexture,gn,ei)}else if(nt!==null&&gn!==0){const Pr=Ht.get(nt.texture);He.framebufferTexture2D(He.FRAMEBUFFER,He.COLOR_ATTACHMENT0,He.TEXTURE_2D,Pr.__webglTexture,gn)}Z=-1},this.readRenderTargetPixels=function(nt,an,gn,_n,fn,cr,hr){if(!(nt&&nt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ar=Ht.get(nt).__webglFramebuffer;if(nt.isWebGLCubeRenderTarget&&hr!==void 0&&(Ar=Ar[hr]),Ar){Kt.bindFramebuffer(He.FRAMEBUFFER,Ar);try{const Pr=nt.texture,ei=Pr.format,Xr=Pr.type;if(!tn.textureFormatReadable(ei)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!tn.textureTypeReadable(Xr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}an>=0&&an<=nt.width-_n&&gn>=0&&gn<=nt.height-fn&&He.readPixels(an,gn,_n,fn,ke.convert(ei),ke.convert(Xr),cr)}finally{const Pr=Y!==null?Ht.get(Y).__webglFramebuffer:null;Kt.bindFramebuffer(He.FRAMEBUFFER,Pr)}}},this.readRenderTargetPixelsAsync=async function(nt,an,gn,_n,fn,cr,hr){if(!(nt&&nt.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ar=Ht.get(nt).__webglFramebuffer;if(nt.isWebGLCubeRenderTarget&&hr!==void 0&&(Ar=Ar[hr]),Ar){const Pr=nt.texture,ei=Pr.format,Xr=Pr.type;if(!tn.textureFormatReadable(ei))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!tn.textureTypeReadable(Xr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(an>=0&&an<=nt.width-_n&&gn>=0&&gn<=nt.height-fn){Kt.bindFramebuffer(He.FRAMEBUFFER,Ar);const Hr=He.createBuffer();He.bindBuffer(He.PIXEL_PACK_BUFFER,Hr),He.bufferData(He.PIXEL_PACK_BUFFER,cr.byteLength,He.STREAM_READ),He.readPixels(an,gn,_n,fn,ke.convert(ei),ke.convert(Xr),0);const gi=Y!==null?Ht.get(Y).__webglFramebuffer:null;Kt.bindFramebuffer(He.FRAMEBUFFER,gi);const vi=He.fenceSync(He.SYNC_GPU_COMMANDS_COMPLETE,0);return He.flush(),await Rpe(He,vi,4),He.bindBuffer(He.PIXEL_PACK_BUFFER,Hr),He.getBufferSubData(He.PIXEL_PACK_BUFFER,0,cr),He.deleteBuffer(Hr),He.deleteSync(vi),cr}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(nt,an=null,gn=0){nt.isTexture!==!0&&(u0("WebGLRenderer: copyFramebufferToTexture function signature has changed."),an=arguments[0]||null,nt=arguments[1]);const _n=Math.pow(2,-gn),fn=Math.floor(nt.image.width*_n),cr=Math.floor(nt.image.height*_n),hr=an!==null?an.x:0,Ar=an!==null?an.y:0;$e.setTexture2D(nt,0),He.copyTexSubImage2D(He.TEXTURE_2D,gn,0,0,hr,Ar,fn,cr),Kt.unbindTexture()};const mi=He.createFramebuffer(),no=He.createFramebuffer();this.copyTextureToTexture=function(nt,an,gn=null,_n=null,fn=0,cr=null){nt.isTexture!==!0&&(u0("WebGLRenderer: copyTextureToTexture function signature has changed."),_n=arguments[0]||null,nt=arguments[1],an=arguments[2],cr=arguments[3]||0,gn=null),cr===null&&(fn!==0?(u0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),cr=fn,fn=0):cr=0);let hr,Ar,Pr,ei,Xr,Hr,gi,vi,yi;const Wi=nt.isCompressedTexture?nt.mipmaps[cr]:nt.image;if(gn!==null)hr=gn.max.x-gn.min.x,Ar=gn.max.y-gn.min.y,Pr=gn.isBox3?gn.max.z-gn.min.z:1,ei=gn.min.x,Xr=gn.min.y,Hr=gn.isBox3?gn.min.z:0;else{const H=Math.pow(2,-fn);hr=Math.floor(Wi.width*H),Ar=Math.floor(Wi.height*H),nt.isDataArrayTexture?Pr=Wi.depth:nt.isData3DTexture?Pr=Math.floor(Wi.depth*H):Pr=1,ei=0,Xr=0,Hr=0}_n!==null?(gi=_n.x,vi=_n.y,yi=_n.z):(gi=0,vi=0,yi=0);const ii=ke.convert(an.format),Zr=ke.convert(an.type);let $a;an.isData3DTexture?($e.setTexture3D(an,0),$a=He.TEXTURE_3D):an.isDataArrayTexture||an.isCompressedArrayTexture?($e.setTexture2DArray(an,0),$a=He.TEXTURE_2D_ARRAY):($e.setTexture2D(an,0),$a=He.TEXTURE_2D),He.pixelStorei(He.UNPACK_FLIP_Y_WEBGL,an.flipY),He.pixelStorei(He.UNPACK_PREMULTIPLY_ALPHA_WEBGL,an.premultiplyAlpha),He.pixelStorei(He.UNPACK_ALIGNMENT,an.unpackAlignment);const Di=He.getParameter(He.UNPACK_ROW_LENGTH),ja=He.getParameter(He.UNPACK_IMAGE_HEIGHT),lo=He.getParameter(He.UNPACK_SKIP_PIXELS),Gi=He.getParameter(He.UNPACK_SKIP_ROWS),ti=He.getParameter(He.UNPACK_SKIP_IMAGES);He.pixelStorei(He.UNPACK_ROW_LENGTH,Wi.width),He.pixelStorei(He.UNPACK_IMAGE_HEIGHT,Wi.height),He.pixelStorei(He.UNPACK_SKIP_PIXELS,ei),He.pixelStorei(He.UNPACK_SKIP_ROWS,Xr),He.pixelStorei(He.UNPACK_SKIP_IMAGES,Hr);const Pi=nt.isDataArrayTexture||nt.isData3DTexture,xa=an.isDataArrayTexture||an.isData3DTexture;if(nt.isDepthTexture){const H=Ht.get(nt),he=Ht.get(an),Ge=Ht.get(H.__renderTarget),St=Ht.get(he.__renderTarget);Kt.bindFramebuffer(He.READ_FRAMEBUFFER,Ge.__webglFramebuffer),Kt.bindFramebuffer(He.DRAW_FRAMEBUFFER,St.__webglFramebuffer);for(let Lt=0;Lt<Pr;Lt++)Pi&&(He.framebufferTextureLayer(He.READ_FRAMEBUFFER,He.COLOR_ATTACHMENT0,Ht.get(nt).__webglTexture,fn,Hr+Lt),He.framebufferTextureLayer(He.DRAW_FRAMEBUFFER,He.COLOR_ATTACHMENT0,Ht.get(an).__webglTexture,cr,yi+Lt)),He.blitFramebuffer(ei,Xr,hr,Ar,gi,vi,hr,Ar,He.DEPTH_BUFFER_BIT,He.NEAREST);Kt.bindFramebuffer(He.READ_FRAMEBUFFER,null),Kt.bindFramebuffer(He.DRAW_FRAMEBUFFER,null)}else if(fn!==0||nt.isRenderTargetTexture||Ht.has(nt)){const H=Ht.get(nt),he=Ht.get(an);Kt.bindFramebuffer(He.READ_FRAMEBUFFER,mi),Kt.bindFramebuffer(He.DRAW_FRAMEBUFFER,no);for(let Ge=0;Ge<Pr;Ge++)Pi?He.framebufferTextureLayer(He.READ_FRAMEBUFFER,He.COLOR_ATTACHMENT0,H.__webglTexture,fn,Hr+Ge):He.framebufferTexture2D(He.READ_FRAMEBUFFER,He.COLOR_ATTACHMENT0,He.TEXTURE_2D,H.__webglTexture,fn),xa?He.framebufferTextureLayer(He.DRAW_FRAMEBUFFER,He.COLOR_ATTACHMENT0,he.__webglTexture,cr,yi+Ge):He.framebufferTexture2D(He.DRAW_FRAMEBUFFER,He.COLOR_ATTACHMENT0,He.TEXTURE_2D,he.__webglTexture,cr),fn!==0?He.blitFramebuffer(ei,Xr,hr,Ar,gi,vi,hr,Ar,He.COLOR_BUFFER_BIT,He.NEAREST):xa?He.copyTexSubImage3D($a,cr,gi,vi,yi+Ge,ei,Xr,hr,Ar):He.copyTexSubImage2D($a,cr,gi,vi,ei,Xr,hr,Ar);Kt.bindFramebuffer(He.READ_FRAMEBUFFER,null),Kt.bindFramebuffer(He.DRAW_FRAMEBUFFER,null)}else xa?nt.isDataTexture||nt.isData3DTexture?He.texSubImage3D($a,cr,gi,vi,yi,hr,Ar,Pr,ii,Zr,Wi.data):an.isCompressedArrayTexture?He.compressedTexSubImage3D($a,cr,gi,vi,yi,hr,Ar,Pr,ii,Wi.data):He.texSubImage3D($a,cr,gi,vi,yi,hr,Ar,Pr,ii,Zr,Wi):nt.isDataTexture?He.texSubImage2D(He.TEXTURE_2D,cr,gi,vi,hr,Ar,ii,Zr,Wi.data):nt.isCompressedTexture?He.compressedTexSubImage2D(He.TEXTURE_2D,cr,gi,vi,Wi.width,Wi.height,ii,Wi.data):He.texSubImage2D(He.TEXTURE_2D,cr,gi,vi,hr,Ar,ii,Zr,Wi);He.pixelStorei(He.UNPACK_ROW_LENGTH,Di),He.pixelStorei(He.UNPACK_IMAGE_HEIGHT,ja),He.pixelStorei(He.UNPACK_SKIP_PIXELS,lo),He.pixelStorei(He.UNPACK_SKIP_ROWS,Gi),He.pixelStorei(He.UNPACK_SKIP_IMAGES,ti),cr===0&&an.generateMipmaps&&He.generateMipmap($a),Kt.unbindTexture()},this.copyTextureToTexture3D=function(nt,an,gn=null,_n=null,fn=0){return nt.isTexture!==!0&&(u0("WebGLRenderer: copyTextureToTexture3D function signature has changed."),gn=arguments[0]||null,_n=arguments[1]||null,nt=arguments[2],an=arguments[3],fn=arguments[4]||0),u0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(nt,an,gn,_n,fn)},this.initRenderTarget=function(nt){Ht.get(nt).__webglFramebuffer===void 0&&$e.setupRenderTarget(nt)},this.initTexture=function(nt){nt.isCubeTexture?$e.setTextureCube(nt,0):nt.isData3DTexture?$e.setTexture3D(nt,0):nt.isDataArrayTexture||nt.isCompressedArrayTexture?$e.setTexture2DArray(nt,0):$e.setTexture2D(nt,0),Kt.unbindTexture()},this.resetState=function(){V=0,W=0,Y=null,Kt.reset(),We.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Wp}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorspace=oo._getDrawingBufferColorSpace(e),n.unpackColorSpace=oo._getUnpackColorSpace()}}const l_e=/^[og]\s*(.+)?/,u_e=/^mtllib /,c_e=/^usemtl /,h_e=/^usemap /,DB=/\s+/,LB=new Sn,SC=new Sn,IB=new Sn,OB=new Sn,df=new Sn,sw=new ba;function f_e(){const t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,n){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=n!==!1;return}const r=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:n!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(i,o){const l=this._finalize(!1);l&&(l.inherited||l.groupCount<=0)&&this.materials.splice(l.index,1);const a={index:this.materials.length,name:i||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:l!==void 0?l.smooth:this.smooth,groupStart:l!==void 0?l.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(h){const f={index:typeof h=="number"?h:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return f.clone=this.clone.bind(f),f}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(i){const o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),i&&this.materials.length>1)for(let l=this.materials.length-1;l>=0;l--)this.materials[l].groupCount<=0&&this.materials.splice(l,1);return i&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},r&&r.name&&typeof r.clone=="function"){const i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,n){const r=parseInt(e,10);return(r>=0?r-1:r+n/3)*3},parseNormalIndex:function(e,n){const r=parseInt(e,10);return(r>=0?r-1:r+n/3)*3},parseUVIndex:function(e,n){const r=parseInt(e,10);return(r>=0?r-1:r+n/2)*2},addVertex:function(e,n,r){const i=this.vertices,o=this.object.geometry.vertices;o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2]),o.push(i[r+0],i[r+1],i[r+2])},addVertexPoint:function(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])},addVertexLine:function(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])},addNormal:function(e,n,r){const i=this.normals,o=this.object.geometry.normals;o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2]),o.push(i[r+0],i[r+1],i[r+2])},addFaceNormal:function(e,n,r){const i=this.vertices,o=this.object.geometry.normals;LB.fromArray(i,e),SC.fromArray(i,n),IB.fromArray(i,r),df.subVectors(IB,SC),OB.subVectors(LB,SC),df.cross(OB),df.normalize(),o.push(df.x,df.y,df.z),o.push(df.x,df.y,df.z),o.push(df.x,df.y,df.z)},addColor:function(e,n,r){const i=this.colors,o=this.object.geometry.colors;i[e]!==void 0&&o.push(i[e+0],i[e+1],i[e+2]),i[n]!==void 0&&o.push(i[n+0],i[n+1],i[n+2]),i[r]!==void 0&&o.push(i[r+0],i[r+1],i[r+2])},addUV:function(e,n,r){const i=this.uvs,o=this.object.geometry.uvs;o.push(i[e+0],i[e+1]),o.push(i[n+0],i[n+1]),o.push(i[r+0],i[r+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const n=this.uvs;this.object.geometry.uvs.push(n[e+0],n[e+1])},addFace:function(e,n,r,i,o,l,a,h,f){const v=this.vertices.length;let y=this.parseVertexIndex(e,v),w=this.parseVertexIndex(n,v),b=this.parseVertexIndex(r,v);if(this.addVertex(y,w,b),this.addColor(y,w,b),a!==void 0&&a!==""){const A=this.normals.length;y=this.parseNormalIndex(a,A),w=this.parseNormalIndex(h,A),b=this.parseNormalIndex(f,A),this.addNormal(y,w,b)}else this.addFaceNormal(y,w,b);if(i!==void 0&&i!==""){const A=this.uvs.length;y=this.parseUVIndex(i,A),w=this.parseUVIndex(o,A),b=this.parseUVIndex(l,A),this.addUV(y,w,b),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const n=this.vertices.length;for(let r=0,i=e.length;r<i;r++){const o=this.parseVertexIndex(e[r],n);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(e,n){this.object.geometry.type="Line";const r=this.vertices.length,i=this.uvs.length;for(let o=0,l=e.length;o<l;o++)this.addVertexLine(this.parseVertexIndex(e[o],r));for(let o=0,l=n.length;o<l;o++)this.addUVLine(this.parseUVIndex(n[o],i))}};return t.startObject("",!1),t}class d_e extends gL{constructor(e){super(e),this.materials=null}load(e,n,r,i){const o=this,l=new yme(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(a){try{n(o.parse(a))}catch(h){i?i(h):console.error(h),o.manager.itemError(e)}},r,i)}setMaterials(e){return this.materials=e,this}parse(e){const n=new f_e;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const r=e.split(`
`);let i=[];for(let a=0,h=r.length;a<h;a++){const f=r[a].trimStart();if(f.length===0)continue;const v=f.charAt(0);if(v!=="#")if(v==="v"){const y=f.split(DB);switch(y[0]){case"v":n.vertices.push(parseFloat(y[1]),parseFloat(y[2]),parseFloat(y[3])),y.length>=7?(sw.setRGB(parseFloat(y[4]),parseFloat(y[5]),parseFloat(y[6]),zh),n.colors.push(sw.r,sw.g,sw.b)):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(y[1]),parseFloat(y[2]),parseFloat(y[3]));break;case"vt":n.uvs.push(parseFloat(y[1]),parseFloat(y[2]));break}}else if(v==="f"){const w=f.slice(1).trim().split(DB),b=[];for(let M=0,P=w.length;M<P;M++){const C=w[M];if(C.length>0){const k=C.split("/");b.push(k)}}const A=b[0];for(let M=1,P=b.length-1;M<P;M++){const C=b[M],k=b[M+1];n.addFace(A[0],C[0],k[0],A[1],C[1],k[1],A[2],C[2],k[2])}}else if(v==="l"){const y=f.substring(1).trim().split(" ");let w=[];const b=[];if(f.indexOf("/")===-1)w=y;else for(let A=0,M=y.length;A<M;A++){const P=y[A].split("/");P[0]!==""&&w.push(P[0]),P[1]!==""&&b.push(P[1])}n.addLineGeometry(w,b)}else if(v==="p"){const w=f.slice(1).trim().split(" ");n.addPointGeometry(w)}else if((i=l_e.exec(f))!==null){const y=(" "+i[0].slice(1).trim()).slice(1);n.startObject(y)}else if(c_e.test(f))n.object.startMaterial(f.substring(7).trim(),n.materialLibraries);else if(u_e.test(f))n.materialLibraries.push(f.substring(7).trim());else if(h_e.test(f))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(v==="s"){if(i=f.split(" "),i.length>1){const w=i[1].trim().toLowerCase();n.object.smooth=w!=="0"&&w!=="off"}else n.object.smooth=!0;const y=n.object.currentMaterial();y&&(y.smooth=n.object.smooth)}else{if(f==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+f+'"')}}n.finalize();const o=new hb;if(o.materialLibraries=[].concat(n.materialLibraries),!(n.objects.length===1&&n.objects[0].geometry.vertices.length===0)===!0)for(let a=0,h=n.objects.length;a<h;a++){const f=n.objects[a],v=f.geometry,y=f.materials,w=v.type==="Line",b=v.type==="Points";let A=!1;if(v.vertices.length===0)continue;const M=new Yh;M.setAttribute("position",new sc(v.vertices,3)),v.normals.length>0&&M.setAttribute("normal",new sc(v.normals,3)),v.colors.length>0&&(A=!0,M.setAttribute("color",new sc(v.colors,3))),v.hasUVIndices===!0&&M.setAttribute("uv",new sc(v.uvs,2));const P=[];for(let k=0,B=y.length;k<B;k++){const z=y[k],q=z.name+"_"+z.smooth+"_"+A;let V=n.materials[q];if(this.materials!==null){if(V=this.materials.create(z.name),w&&V&&!(V instanceof Mb)){const W=new Mb;dd.prototype.copy.call(W,V),W.color.copy(V.color),V=W}else if(b&&V&&!(V instanceof fb)){const W=new fb({size:10,sizeAttenuation:!1});dd.prototype.copy.call(W,V),W.color.copy(V.color),W.map=V.map,V=W}}V===void 0&&(w?V=new Mb:b?V=new fb({size:1,sizeAttenuation:!1}):V=new fme,V.name=z.name,V.flatShading=!z.smooth,V.vertexColors=A,n.materials[q]=V),P.push(V)}let C;if(P.length>1){for(let k=0,B=y.length;k<B;k++){const z=y[k];M.addGroup(z.groupStart,z.groupCount,k)}w?C=new kP(M,P):b?C=new pC(M,P):C=new wf(M,P)}else w?C=new kP(M,P[0]):b?C=new pC(M,P[0]):C=new wf(M,P[0]);C.name=f.name,o.add(C)}else if(n.vertices.length>0){const a=new fb({size:1,sizeAttenuation:!1}),h=new Yh;h.setAttribute("position",new sc(n.vertices,3)),n.colors.length>0&&n.colors[0]!==void 0&&(h.setAttribute("color",new sc(n.colors,3)),a.vertexColors=!0);const f=new pC(h,a);o.add(f)}return o}}const NB={type:"change"},yL={type:"start"},Sj={type:"end"},lw=new CE,kB=new $m,p_e=Math.cos(70*Cpe.DEG2RAD),wu=new Sn,fh=2*Math.PI,zo={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},EC=1e-6;class m_e extends Eme{constructor(e,n=null){super(e,n),this.state=zo.NONE,this.enabled=!0,this.target=new Sn,this.cursor=new Sn,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:n_.ROTATE,MIDDLE:n_.DOLLY,RIGHT:n_.PAN},this.touches={ONE:qy.ROTATE,TWO:qy.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Sn,this._lastQuaternion=new z0,this._lastTargetPosition=new Sn,this._quat=new z0().setFromUnitVectors(e.up,new Sn(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new aB,this._sphericalDelta=new aB,this._scale=1,this._panOffset=new Sn,this._rotateStart=new Bi,this._rotateEnd=new Bi,this._rotateDelta=new Bi,this._panStart=new Bi,this._panEnd=new Bi,this._panDelta=new Bi,this._dollyStart=new Bi,this._dollyEnd=new Bi,this._dollyDelta=new Bi,this._dollyDirection=new Sn,this._mouse=new Bi,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=v_e.bind(this),this._onPointerDown=g_e.bind(this),this._onPointerUp=y_e.bind(this),this._onContextMenu=T_e.bind(this),this._onMouseWheel=x_e.bind(this),this._onKeyDown=w_e.bind(this),this._onTouchStart=S_e.bind(this),this._onTouchMove=E_e.bind(this),this._onMouseDown=__e.bind(this),this._onMouseMove=b_e.bind(this),this._interceptControlDown=M_e.bind(this),this._interceptControlUp=A_e.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(NB),this.update(),this.state=zo.NONE}update(e=null){const n=this.object.position;wu.copy(n).sub(this.target),wu.applyQuaternion(this._quat),this._spherical.setFromVector3(wu),this.autoRotate&&this.state===zo.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=fh:r>Math.PI&&(r-=fh),i<-Math.PI?i+=fh:i>Math.PI&&(i-=fh),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const l=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=l!=this._spherical.radius}if(wu.setFromSpherical(this._spherical),wu.applyQuaternion(this._quatInverse),n.copy(this.target).add(wu),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let l=null;if(this.object.isPerspectiveCamera){const a=wu.length();l=this._clampDistance(a*this._scale);const h=a-l;this.object.position.addScaledVector(this._dollyDirection,h),this.object.updateMatrixWorld(),o=!!h}else if(this.object.isOrthographicCamera){const a=new Sn(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const h=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=h!==this.object.zoom;const f=new Sn(this._mouse.x,this._mouse.y,0);f.unproject(this.object),this.object.position.sub(f).add(a),this.object.updateMatrixWorld(),l=wu.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;l!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(l).add(this.object.position):(lw.origin.copy(this.object.position),lw.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(lw.direction))<p_e?this.object.lookAt(this.target):(kB.setFromNormalAndCoplanarPoint(this.object.up,this.target),lw.intersectPlane(kB,this.target))))}else if(this.object.isOrthographicCamera){const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),l!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>EC||8*(1-this._lastQuaternion.dot(this.object.quaternion))>EC||this._lastTargetPosition.distanceToSquared(this.target)>EC?(this.dispatchEvent(NB),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?fh/60*this.autoRotateSpeed*e:fh/60/60*this.autoRotateSpeed}_getZoomScale(e){const n=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*n)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,n){wu.setFromMatrixColumn(n,0),wu.multiplyScalar(-e),this._panOffset.add(wu)}_panUp(e,n){this.screenSpacePanning===!0?wu.setFromMatrixColumn(n,1):(wu.setFromMatrixColumn(n,0),wu.crossVectors(this.object.up,wu)),wu.multiplyScalar(e),this._panOffset.add(wu)}_pan(e,n){const r=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;wu.copy(i).sub(this.target);let o=wu.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/r.clientHeight,this.object.matrix),this._panUp(2*n*o/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(n*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,n){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),i=e-r.left,o=n-r.top,l=r.width,a=r.height;this._mouse.x=i/l*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(fh*this._rotateDelta.x/n.clientHeight),this._rotateUp(fh*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let n=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(fh*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),n=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-fh*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),n=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(fh*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),n=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-fh*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),n=!0;break}n&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y,o=Math.sqrt(r*r+i*i);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._rotateEnd.set(i,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(fh*this._rotateDelta.x/n.clientHeight),this._rotateUp(fh*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y,o=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const l=(e.pageX+n.x)*.5,a=(e.pageY+n.y)*.5;this._updateZoomParameters(l,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId){this._pointers.splice(n,1);return}}_isTrackingPointer(e){for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId)return!0;return!1}_trackPointer(e){let n=this._pointerPositions[e.pointerId];n===void 0&&(n=new Bi,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const n=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[n]}_customWheelEvent(e){const n=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(n){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function g_e(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(t)&&(this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t)))}function v_e(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function y_e(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Sj),this.state=zo.NONE;break;case 1:const e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y});break}}function __e(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case n_.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(t),this.state=zo.DOLLY;break;case n_.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=zo.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=zo.ROTATE}break;case n_.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=zo.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=zo.PAN}break;default:this.state=zo.NONE}this.state!==zo.NONE&&this.dispatchEvent(yL)}function b_e(t){switch(this.state){case zo.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(t);break;case zo.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(t);break;case zo.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(t);break}}function x_e(t){this.enabled===!1||this.enableZoom===!1||this.state!==zo.NONE||(t.preventDefault(),this.dispatchEvent(yL),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(Sj))}function w_e(t){this.enabled!==!1&&this._handleKeyDown(t)}function S_e(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case qy.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(t),this.state=zo.TOUCH_ROTATE;break;case qy.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(t),this.state=zo.TOUCH_PAN;break;default:this.state=zo.NONE}break;case 2:switch(this.touches.TWO){case qy.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(t),this.state=zo.TOUCH_DOLLY_PAN;break;case qy.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(t),this.state=zo.TOUCH_DOLLY_ROTATE;break;default:this.state=zo.NONE}break;default:this.state=zo.NONE}this.state!==zo.NONE&&this.dispatchEvent(yL)}function E_e(t){switch(this._trackPointer(t),this.state){case zo.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(t),this.update();break;case zo.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(t),this.update();break;case zo.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(t),this.update();break;case zo.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=zo.NONE}}function T_e(t){this.enabled!==!1&&t.preventDefault()}function M_e(t){t.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function A_e(t){t.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const C_e=({objData:t,open:e,onClose:n})=>{const r=Et.useRef(null),i=Et.useRef(null),[o,l]=Et.useState(!0),[a,h]=Et.useState(null),[f,v]=Et.useState(!1);return Et.useEffect(()=>()=>{i.current&&(r.current&&r.current.contains(i.current.domElement)&&r.current.removeChild(i.current.domElement),i.current.dispose(),i.current=null)},[]),Et.useEffect(()=>{e||v(!1)},[e]),Et.useEffect(()=>{if(!e||!f||!r.current)return;console.log("Starting model load - dialog fully mounted"),l(!0),h(null);const y=setTimeout(()=>{if(!r.current)return;i.current&&(r.current.contains(i.current.domElement)&&r.current.removeChild(i.current.domElement),i.current.dispose(),i.current=null);let w;try{let b=function(se,de){const ue=document.createElement("canvas"),Te=ue.getContext("2d");if(!Te)throw new Error("Failed to get canvas context for axis label.");ue.width=256,ue.height=64,Te.fillStyle=de,Te.font="28px Arial",Te.fillText(se,10,40);const pe=new cme(ue),De=new dj({map:pe,depthTest:!1}),me=new ame(De);return me.scale.set(3,1,1),me};const A=new rme;A.background=new ba(15790320);const M=new xme(4210752);A.add(M);const P=new gC(16777215,.7);P.position.set(1,1,1),A.add(P);const C=new gC(16777215,.5);C.position.set(-1,.5,-1),A.add(C);const k=r.current.clientWidth,B=r.current.clientHeight;if(console.log("Container dimensions:",{width:k,height:B}),k===0||B===0)throw new Error("Container has zero width or height");const z=new vf(50,k/B,.1,2e3);z.position.z=5,i.current=new s_e({antialias:!0,alpha:!0}),i.current.setSize(k,B),i.current.setPixelRatio(window.devicePixelRatio),i.current.shadowMap.enabled=!0,i.current.shadowMap.type=q9,r.current.appendChild(i.current.domElement);const q=new m_e(z,i.current.domElement);q.enableDamping=!0,q.dampingFactor=.05,q.screenSpacePanning=!0,q.minDistance=.1,q.maxDistance=500,console.log("Parsing OBJ data",t.substring(0,100)+"...");const V=new Sme(10);A.add(V);const W=b("X","#ff0000");W.position.set(12,0,0),A.add(W);const Y=b("Y","#00ff00");Y.position.set(0,12,0),A.add(Y);const Z=b("Z","#0000ff");Z.position.set(0,0,12),A.add(Z);const j=new gC(16777215,.6);j.position.set(5,10,7),j.castShadow=!0,j.shadow.mapSize.width=1024,j.shadow.mapSize.height=1024,j.shadow.camera.near=.5,j.shadow.camera.far=100,j.shadow.camera.left=-20,j.shadow.camera.right=20,j.shadow.camera.top=20,j.shadow.camera.bottom=-20,A.add(j);const K=new ome(new Uint8Array([139,69,19,255,100,140,100,255,150,180,150,255,200,220,200,255,255,255,255,255]),1,5,xf);K.needsUpdate=!0;const re=new d_e;try{const se=re.parse(t);console.log("OBJ parsed successfully",se);const de=new ig().setFromObject(se),ue=de.min,Te=de.max;se.traverse(fe=>{fe instanceof wf&&(fe.material=new hme({roughness:.7,metalness:.1,onBeforeCompile:ve=>{ve.uniforms.minZ={value:ue.z},ve.uniforms.maxZ={value:Te.z},ve.uniforms.minY={value:ue.y},ve.uniforms.maxY={value:Te.y},ve.uniforms.gradientMap={value:K},ve.vertexShader=ve.vertexShader.replace("#include <common>",`#include <common>
                    varying float vGradient;
                    uniform float minZ;
                    uniform float maxZ;
                    uniform float minY;
                    uniform float maxY;`),ve.vertexShader=ve.vertexShader.replace("#include <begin_vertex>",`#include <begin_vertex>
                    // Use only Z for a clean back-to-front gradient
                    float normalizedZ = (position.z - minZ) / (maxZ - minZ);
                    vGradient = normalizedZ;`),ve.fragmentShader=ve.fragmentShader.replace("#include <common>",`#include <common>
                    varying float vGradient;
                    uniform sampler2D gradientMap;`),ve.fragmentShader=ve.fragmentShader.replace("#include <color_fragment>",`#include <color_fragment>
                    vec4 gradColor = texture2D(gradientMap, vec2(0.5, vGradient));
                    diffuseColor.rgb = gradColor.rgb;`)}}),fe.castShadow=!0,fe.receiveShadow=!0)});const pe=new ig().setFromObject(se),De=pe.getCenter(new Sn);se.position.sub(De),se.position.y=pe.getSize(new Sn).y/2,A.add(se),((fe,ve,le=1.5)=>{const ye=new ig().setFromObject(ve),Se=ye.getCenter(new Sn),Be=ye.getSize(new Sn),Ve=Math.max(Be.x,Be.y,Be.z),tt=fe.fov*(Math.PI/180);let ht=Math.abs(Ve/(2*Math.tan(tt/2)));ht*=le,fe.position.set(Se.x,Se.y+Be.y/3,Se.z+ht),fe.lookAt(Se),fe.near=.01,fe.far=ht*100,fe.updateProjectionMatrix(),q.target.copy(Se),q.update()})(z,se,2.2);const Me=()=>{i.current&&(w=requestAnimationFrame(Me),q.update(),i.current.render(A,z))};Me(),console.log("Animation started"),l(!1)}catch(se){console.error("Error parsing OBJ:",se),h(`Failed to parse 3D model: ${se instanceof Error?se.message:String(se)}`),l(!1)}const ie=()=>{if(!r.current||!i.current)return;const se=r.current.clientWidth,de=r.current.clientHeight;z.aspect=se/de,z.updateProjectionMatrix(),i.current.setSize(se,de)};return window.addEventListener("resize",ie),()=>{console.log("Cleaning up"),window.removeEventListener("resize",ie),w&&cancelAnimationFrame(w)}}catch(b){console.error("Error setting up 3D scene:",b),h(`Failed to setup 3D viewer: ${b instanceof Error?b.message:String(b)}`),l(!1)}},100);return()=>{clearTimeout(y)}},[t,e,f]),Ln.jsxs(IW,{open:e,onClose:n,maxWidth:"lg",fullWidth:!0,sx:{zIndex:1e4},TransitionProps:{onEntered:()=>{console.log("Dialog fully entered, setting dialogMounted"),v(!0)}},children:[Ln.jsxs(VW,{children:["3D Model Preview",Ln.jsx(om,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8},children:Ln.jsx(NQ,{})})]}),Ln.jsx(zW,{style:{height:"70vh",padding:0},children:Ln.jsxs("div",{ref:r,style:{width:"100%",height:"100%",position:"relative"},"data-testid":"model-container",children:[o&&Ln.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.7)",zIndex:1},children:[Ln.jsx(jS,{size:48}),Ln.jsx("p",{style:{marginTop:16},children:"Loading 3D model..."})]}),a&&Ln.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"red"},children:a})]})})]})};function Qm(t,e){this.x=t,this.y=e}Qm.prototype={clone(){return new Qm(this.x,this.y)},add(t){return this.clone()._add(t)},sub(t){return this.clone()._sub(t)},multByPoint(t){return this.clone()._multByPoint(t)},divByPoint(t){return this.clone()._divByPoint(t)},mult(t){return this.clone()._mult(t)},div(t){return this.clone()._div(t)},rotate(t){return this.clone()._rotate(t)},rotateAround(t,e){return this.clone()._rotateAround(t,e)},matMult(t){return this.clone()._matMult(t)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(t){return this.x===t.x&&this.y===t.y},dist(t){return Math.sqrt(this.distSqr(t))},distSqr(t){const e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith(t){return this.angleWithSep(t.x,t.y)},angleWithSep(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult(t){const e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add(t){return this.x+=t.x,this.y+=t.y,this},_sub(t){return this.x-=t.x,this.y-=t.y,this},_mult(t){return this.x*=t,this.y*=t,this},_div(t){return this.x/=t,this.y/=t,this},_multByPoint(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint(t){return this.x/=t.x,this.y/=t.y,this},_unit(){return this._div(this.mag()),this},_perp(){const t=this.y;return this.y=this.x,this.x=-t,this},_rotate(t){const e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround(t,e){const n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Qm};Qm.convert=function(t){if(t instanceof Qm)return t;if(Array.isArray(t))return new Qm(+t[0],+t[1]);if(t.x!==void 0&&t.y!==void 0)return new Qm(+t.x,+t.y);throw new Error("Expected [x, y] or {x, y} point format")};class Ej{constructor(e,n,r,i,o){this.properties={},this.extent=r,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=o,e.readFields(P_e,this,n)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const n=e.readVarint()+e.pos,r=[];let i,o=1,l=0,a=0,h=0;for(;e.pos<n;){if(l<=0){const f=e.readVarint();o=f&7,l=f>>3}if(l--,o===1||o===2)a+=e.readSVarint(),h+=e.readSVarint(),o===1&&(i&&r.push(i),i=[]),i&&i.push(new Qm(a,h));else if(o===7)i&&i.push(i[0].clone());else throw new Error(`unknown command ${o}`)}return i&&r.push(i),r}bbox(){const e=this._pbf;e.pos=this._geometry;const n=e.readVarint()+e.pos;let r=1,i=0,o=0,l=0,a=1/0,h=-1/0,f=1/0,v=-1/0;for(;e.pos<n;){if(i<=0){const y=e.readVarint();r=y&7,i=y>>3}if(i--,r===1||r===2)o+=e.readSVarint(),l+=e.readSVarint(),o<a&&(a=o),o>h&&(h=o),l<f&&(f=l),l>v&&(v=l);else if(r!==7)throw new Error(`unknown command ${r}`)}return[a,f,h,v]}toGeoJSON(e,n,r){const i=this.extent*Math.pow(2,r),o=this.extent*e,l=this.extent*n,a=this.loadGeometry();function h(w){return[(w.x+o)*360/i-180,360/Math.PI*Math.atan(Math.exp((1-(w.y+l)*2/i)*Math.PI))-90]}function f(w){return w.map(h)}let v;if(this.type===1){const w=[];for(const A of a)w.push(A[0]);const b=f(w);v=w.length===1?{type:"Point",coordinates:b[0]}:{type:"MultiPoint",coordinates:b}}else if(this.type===2){const w=a.map(f);v=w.length===1?{type:"LineString",coordinates:w[0]}:{type:"MultiLineString",coordinates:w}}else if(this.type===3){const w=D_e(a),b=[];for(const A of w)b.push(A.map(f));v=b.length===1?{type:"Polygon",coordinates:b[0]}:{type:"MultiPolygon",coordinates:b}}else throw new Error("unknown feature type");const y={type:"Feature",geometry:v,properties:this.properties};return this.id!=null&&(y.id=this.id),y}}Ej.types=["Unknown","Point","LineString","Polygon"];function P_e(t,e,n){t===1?e.id=n.readVarint():t===2?R_e(n,e):t===3?e.type=n.readVarint():t===4&&(e._geometry=n.pos)}function R_e(t,e){const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}function D_e(t){const e=t.length;if(e<=1)return[t];const n=[];let r,i;for(let o=0;o<e;o++){const l=L_e(t[o]);l!==0&&(i===void 0&&(i=l<0),i===l<0?(r&&n.push(r),r=[t[o]]):r&&r.push(t[o]))}return r&&n.push(r),n}function L_e(t){let e=0;for(let n=0,r=t.length,i=r-1,o,l;n<r;i=n++)o=t[n],l=t[i],e+=(l.x-o.x)*(o.y+l.y);return e}class I_e{constructor(e,n){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(O_e,this,n),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const n=this._pbf.readVarint()+this._pbf.pos;return new Ej(this._pbf,n,this.extent,this._keys,this._values)}}function O_e(t,e,n){t===15?e.version=n.readVarint():t===1?e.name=n.readString():t===5?e.extent=n.readVarint():t===2?e._features.push(n.pos):t===3?e._keys.push(n.readString()):t===4&&e._values.push(N_e(n))}function N_e(t){let e=null;const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=t.readVarint()>>3;e=r===1?t.readString():r===2?t.readFloat():r===3?t.readDouble():r===4?t.readVarint64():r===5?t.readVarint():r===6?t.readSVarint():r===7?t.readBoolean():null}return e}class k_e{constructor(e,n){this.layers=e.readFields(F_e,{},n)}}function F_e(t,e,n){if(t===3){const r=new I_e(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}const zP=65536*65536,FB=1/zP,B_e=12,BB=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),TC=0,uw=1,W1=2,cw=5;class z_e{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,n,r=this.length){for(;this.pos<r;){const i=this.readVarint(),o=i>>3,l=this.pos;this.type=i&7,e(o,n,this),this.pos===l&&this.skip(i)}return n}readMessage(e,n){return this.readFields(e,n,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*zP;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*zP;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const n=this.buf;let r,i;return i=n[this.pos++],r=i&127,i<128||(i=n[this.pos++],r|=(i&127)<<7,i<128)||(i=n[this.pos++],r|=(i&127)<<14,i<128)||(i=n[this.pos++],r|=(i&127)<<21,i<128)?r:(i=n[this.pos],r|=(i&15)<<28,U_e(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,n=this.pos;return this.pos=e,e-n>=B_e&&BB?BB.decode(this.buf.subarray(n,e)):Q_e(this.buf,n,e)}readBytes(){const e=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,e);return this.pos=e,n}readPackedVarint(e=[],n){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(n));return e}readPackedSVarint(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===W1?this.readVarint()+this.pos:this.pos+1}skip(e){const n=e&7;if(n===TC)for(;this.buf[this.pos++]>127;);else if(n===W1)this.pos=this.readVarint()+this.pos;else if(n===cw)this.pos+=4;else if(n===uw)this.pos+=8;else throw new Error(`Unimplemented type: ${n}`)}writeTag(e,n){this.writeVarint(e<<3|n)}realloc(e){let n=this.length||16;for(;n<this.pos+e;)n*=2;if(n!==this.length){const r=new Uint8Array(n);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=n}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*FB),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*FB),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){j_e(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const n=this.pos;this.pos=e1e(this.buf,e,this.pos);const r=this.pos-n;r>=128&&zB(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const n=e.length;this.writeVarint(n),this.realloc(n);for(let r=0;r<n;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,n){this.pos++;const r=this.pos;e(n,this);const i=this.pos-r;i>=128&&zB(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,n,r){this.writeTag(e,W1),this.writeRawMessage(n,r)}writePackedVarint(e,n){n.length&&this.writeMessage(e,q_e,n)}writePackedSVarint(e,n){n.length&&this.writeMessage(e,H_e,n)}writePackedBoolean(e,n){n.length&&this.writeMessage(e,X_e,n)}writePackedFloat(e,n){n.length&&this.writeMessage(e,$_e,n)}writePackedDouble(e,n){n.length&&this.writeMessage(e,W_e,n)}writePackedFixed32(e,n){n.length&&this.writeMessage(e,Z_e,n)}writePackedSFixed32(e,n){n.length&&this.writeMessage(e,Y_e,n)}writePackedFixed64(e,n){n.length&&this.writeMessage(e,K_e,n)}writePackedSFixed64(e,n){n.length&&this.writeMessage(e,J_e,n)}writeBytesField(e,n){this.writeTag(e,W1),this.writeBytes(n)}writeFixed32Field(e,n){this.writeTag(e,cw),this.writeFixed32(n)}writeSFixed32Field(e,n){this.writeTag(e,cw),this.writeSFixed32(n)}writeFixed64Field(e,n){this.writeTag(e,uw),this.writeFixed64(n)}writeSFixed64Field(e,n){this.writeTag(e,uw),this.writeSFixed64(n)}writeVarintField(e,n){this.writeTag(e,TC),this.writeVarint(n)}writeSVarintField(e,n){this.writeTag(e,TC),this.writeSVarint(n)}writeStringField(e,n){this.writeTag(e,W1),this.writeString(n)}writeFloatField(e,n){this.writeTag(e,cw),this.writeFloat(n)}writeDoubleField(e,n){this.writeTag(e,uw),this.writeDouble(n)}writeBooleanField(e,n){this.writeVarintField(e,+n)}}function U_e(t,e,n){const r=n.buf;let i,o;if(o=r[n.pos++],i=(o&112)>>4,o<128||(o=r[n.pos++],i|=(o&127)<<3,o<128)||(o=r[n.pos++],i|=(o&127)<<10,o<128)||(o=r[n.pos++],i|=(o&127)<<17,o<128)||(o=r[n.pos++],i|=(o&127)<<24,o<128)||(o=r[n.pos++],i|=(o&1)<<31,o<128))return dy(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function dy(t,e,n){return n?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function j_e(t,e){let n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(n=~(-t%4294967296),r=~(-t/4294967296),n^4294967295?n=n+1|0:(n=0,r=r+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),V_e(n,r,e),G_e(r,e)}function V_e(t,e,n){n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos]=t&127}function G_e(t,e){const n=(t&7)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function zB(t,e,n){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));n.realloc(r);for(let i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function q_e(t,e){for(let n=0;n<t.length;n++)e.writeVarint(t[n])}function H_e(t,e){for(let n=0;n<t.length;n++)e.writeSVarint(t[n])}function $_e(t,e){for(let n=0;n<t.length;n++)e.writeFloat(t[n])}function W_e(t,e){for(let n=0;n<t.length;n++)e.writeDouble(t[n])}function X_e(t,e){for(let n=0;n<t.length;n++)e.writeBoolean(t[n])}function Z_e(t,e){for(let n=0;n<t.length;n++)e.writeFixed32(t[n])}function Y_e(t,e){for(let n=0;n<t.length;n++)e.writeSFixed32(t[n])}function K_e(t,e){for(let n=0;n<t.length;n++)e.writeFixed64(t[n])}function J_e(t,e){for(let n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Q_e(t,e,n){let r="",i=e;for(;i<n;){const o=t[i];let l=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a>n)break;let h,f,v;a===1?o<128&&(l=o):a===2?(h=t[i+1],(h&192)===128&&(l=(o&31)<<6|h&63,l<=127&&(l=null))):a===3?(h=t[i+1],f=t[i+2],(h&192)===128&&(f&192)===128&&(l=(o&15)<<12|(h&63)<<6|f&63,(l<=2047||l>=55296&&l<=57343)&&(l=null))):a===4&&(h=t[i+1],f=t[i+2],v=t[i+3],(h&192)===128&&(f&192)===128&&(v&192)===128&&(l=(o&15)<<18|(h&63)<<12|(f&63)<<6|v&63,(l<=65535||l>=1114112)&&(l=null))),l===null?(l=65533,a=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),r+=String.fromCharCode(l),i+=a}return r}function e1e(t,e,n){for(let r=0,i,o;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(o)if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||r+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):o=i;continue}else o&&(t[n++]=239,t[n++]=191,t[n++]=189,o=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=i&63|128)}return n}const t1e=async(t,e,n,r,i)=>{const o=_L(t,e,n,r,i);if(o>9)return console.warn(`Skipping building data fetch: area too large (${o} tiles, max allowed: 9)`),[];const l=bL(t,e,n,r,i);console.log(`Fetching building data from ${l.length} tiles`);const a=[];try{const h=document._map;if(!h)return console.error("Map instance not found"),a;const f=h.getStyle();let v=null,y=null;for(const M in f.layers){const P=f.layers[M];if(P.id.toLowerCase().includes("building")||P["source-layer"]&&P["source-layer"].toLowerCase().includes("building")){v=P.source,y=P["source-layer"];break}}(!v||!y)&&(console.warn("Could not find building source layer in map style"),v="openmaptiles",y="building");const w=f.sources[v];if(!w||!w.tiles)return console.warn("Building source doesn't have tile URLs"),a;const b=w.tiles[0];await Promise.all(l.map(async M=>{const P=b.replace("{z}",M.z.toString()).replace("{x}",M.x.toString()).replace("{y}",M.y.toString());console.log(`Fetching buildings from: ${P}`);try{const C=await fetch(P);if(!C.ok){console.warn(`Failed to fetch building tile: ${C.status}`);return}const k=await C.arrayBuffer(),B=Tj(k),z=Mj(B,M,y);a.push(...z)}catch(C){console.error(`Error fetching building tile ${M.z}/${M.x}/${M.y}:`,C)}})),console.log(`Found ${a.length} buildings`);const A=a.filter(M=>{if(!M.geometry||M.geometry.type!=="Polygon"&&M.geometry.type!=="MultiPolygon")return!1;if(M.geometry.type==="Polygon"){for(const P of M.geometry.coordinates)for(const[C,k]of P)if(!isFinite(C)||!isFinite(k))return!1}else for(const P of M.geometry.coordinates)for(const C of P)for(const[k,B]of C)if(!isFinite(k)||!isFinite(B))return!1;return!0});return console.log(`Filtered out invalid buildings, remaining: ${A.length}`),A}catch(h){return console.error("Error fetching building data:",h),[]}},Tj=t=>{try{const e=new z_e(t);return new k_e(e)}catch(e){return console.error("Error parsing vector tile:",e),{}}},Mj=(t,e,n)=>{const r=[];try{if(!t.layers||!t.layers[n])return r;const i=t.layers[n],o=4096;for(let l=0;l<i.length;l++){const a=i.feature(l);if(a.type!==3)continue;const f=a.toGeoJSON(e.x,e.y,e.z);f.geometry.type!=="Polygon"&&f.geometry.type!=="MultiPolygon"||(f.geometry.type==="MultiPolygon"?f.geometry.coordinates.forEach(v=>{r.push({geometry:{type:"Polygon",coordinates:v},properties:{render_height:a.properties.render_height||a.properties.height,height:a.properties.height||a.properties.render_height||5}})}):r.push({geometry:{type:"Polygon",coordinates:f.geometry.coordinates},properties:{render_height:a.properties.render_height||a.properties.height,height:a.properties.height||a.properties.render_height||5}}))}return r}catch(i){return console.error("Error extracting buildings from vector tile:",i),[]}},n1e=async(t,e,n,r,i)=>{const o=_L(t,e,n,r,i);if(o>9)return console.warn(`Skipping direct building data fetch: area too large (${o} tiles, max allowed: 9)`),[];const l=bL(t,e,n,r,i);console.log(`Fetching building data from ${l.length} tiles using direct method`);const a=[];try{const h="https://wms.wheregroup.com/tileserver/tile/world-0-14";return await Promise.all(l.map(async f=>{const v=`${h}/${f.z}/${f.x}/${f.y}.pbf`;console.log(`Fetching buildings from: ${v}`);try{const y=await fetch(v);if(!y.ok){console.warn(`Failed to fetch building tile: ${y.status}`);return}const w=await y.arrayBuffer(),b=Tj(w),A=Mj(b,f,"building");a.push(...A)}catch(y){console.error(`Error fetching building tile ${f.z}/${f.x}/${f.y}:`,y)}})),console.log(`Found ${a.length} buildings`),a}catch(h){return console.error("Error fetching building data:",h),[]}},r1e=(t,e,n,r,i,o,l)=>{const a=[],{width:h,height:f}=n;return t=t.filter(v=>v&&v.geometry&&v.geometry.type==="Polygon").filter(v=>{var y,w;return(w=(y=v.geometry.coordinates)==null?void 0:y[0])==null?void 0:w.length}),t.forEach(v=>{const y=v.geometry.coordinates[0];if(!(y!=null&&y.length))return;let w=!0;for(const z of y){const[q,V]=z;if(q<r||q>o||V<i||V>l){w=!1;break}}if(!w)return;let b=5;v.properties.render_height!==void 0&&!isNaN(v.properties.render_height)?b=v.properties.render_height:v.properties.height!==void 0&&!isNaN(v.properties.height)&&(b=v.properties.height),b=Math.max(5,Math.min(500,b));const A=i1e(y),[M,P]=A,C=Math.floor((M-r)/(o-r||1)*(h-1)),k=Math.floor((P-i)/(l-i||1)*(f-1));let B=0;if(C>=0&&C<h&&k>=0&&k<f)B=e[k][C];else{const z=Math.max(0,Math.min(h-1,C)),q=Math.max(0,Math.min(f-1,k));B=e[q][z]}a.push({footprint:y,height:b,baseElevation:B})}),console.log(`Processed ${a.length} buildings for 3D model`),a},i1e=t=>{let e=0,n=0;for(const r of t)e+=r[0],n+=r[1];return[e/t.length,n/t.length]},_L=(t,e,n,r,i)=>{const o=MS(t,e,i),l=MS(n,r,i),a=Math.abs(l.x-o.x)+1,h=Math.abs(l.y-o.y)+1;return a*h},MS=(t,e,n)=>{const r=Math.pow(2,n),i=Math.floor((t+180)/360*r),o=e*Math.PI/180,l=Math.floor((1-Math.log(Math.tan(o)+1/Math.cos(o))/Math.PI)/2*r);return{x:i,y:l}},bL=(t,e,n,r,i)=>{const o=MS(t,e,i),l=MS(n,r,i),a=[];for(let h=Math.min(o.x,l.x);h<=Math.max(o.x,l.x);h++)for(let f=Math.min(o.y,l.y);f<=Math.max(o.y,l.y);f++)a.push({x:h,y:f,z:i});return a},a1e=function({bboxRef:t}){const[e,n]=Et.useState(""),[r,i]=Et.useState(""),[o,l]=Et.useState(!1),[a,h]=Et.useState(!1),[f,v]=Et.useState(.05),y=(W,Y,Z,j,K,re)=>{let ie=`# OBJ file generated from elevation data
`;ie+="# Bounds: "+[Z,j,K,re].join(", ")+`
`,ie+=`g terrain
`;const se=200,de=200,ue={minLng:Z,minLat:j,maxLng:K,maxLat:re},{width:Te,height:pe}=Y;let De=1/0,me=-1/0;for(let le=0;le<pe;le++)for(let ye=0;ye<Te;ye++)De=Math.min(De,W[le][ye]),me=Math.max(me,W[le][ye]);console.log(`Min elevation: ${De}, Max elevation: ${me}`);const fe=De-10;for(let le=0;le<pe;le++)for(let ye=0;ye<Te;ye++){const Se=Z+(K-Z)*ye/(Te-1),Be=j+(re-j)*le/(pe-1),Ve=W[le][ye],[tt,ht,it]=w(ue,se,de,[Se,Be],Ve,De,me);ie+=`v ${tt.toFixed(4)} ${ht.toFixed(4)} ${it.toFixed(4)}
`}for(let le=0;le<pe;le++)for(let ye=0;ye<Te;ye++){const Se=Z+(K-Z)*ye/(Te-1),Be=j+(re-j)*le/(pe-1),[Ve,tt,ht]=w(ue,se,de,[Se,Be],fe,De,me);ie+=`v ${Ve.toFixed(4)} ${tt.toFixed(4)} ${ht.toFixed(4)}
`}const ve=Te*pe;for(let le=0;le<pe-1;le++)for(let ye=0;ye<Te-1;ye++){const Se=le*Te+ye+1,Be=Se+1,Ve=(le+1)*Te+ye+1,tt=Ve+1;ie+=`f ${Se} ${Be} ${Ve}
`,ie+=`f ${Ve} ${Be} ${tt}
`}for(let le=0;le<pe-1;le++)for(let ye=0;ye<Te-1;ye++){const Se=ve,Be=Se+(le*Te+ye+1),Ve=Be+1,tt=Se+((le+1)*Te+ye+1),ht=tt+1;ie+=`f ${Be} ${tt} ${Ve}
`,ie+=`f ${tt} ${ht} ${Ve}
`}for(let le=0;le<pe-1;le++){const ye=le*Te+1,Se=(le+1)*Te+1,Be=ve+ye,Ve=ve+Se;ie+=`f ${ye} ${Se} ${Be}
`,ie+=`f ${Se} ${Ve} ${Be}
`;const tt=le*Te+Te,ht=(le+1)*Te+Te,it=ve+tt,gt=ve+ht;ie+=`f ${tt} ${it} ${ht}
`,ie+=`f ${ht} ${it} ${gt}
`}for(let le=0;le<Te-1;le++){const ye=le+1,Se=le+2,Be=ve+ye,Ve=ve+Se;ie+=`f ${ye} ${Be} ${Se}
`,ie+=`f ${Se} ${Be} ${Ve}
`;const tt=(pe-1)*Te+le+1,ht=tt+1,it=ve+tt,gt=ve+ht;ie+=`f ${tt} ${ht} ${it}
`,ie+=`f ${ht} ${gt} ${it}
`}return{objContent:ie,minElevation:De,maxElevation:me}},w=(W,Y,Z,j,K,re,ie)=>{const[se,de]=j,ue=(se-W.minLng)/(W.maxLng-W.minLng),Te=(de-W.minLat)/(W.maxLat-W.minLat),pe=(ue-.5)*Y,De=(Te-.5)*Z;let me=0;if(K!==void 0&&re!==void 0&&ie!==void 0){const Me=ie-re;Me>0&&(me=(K-re)/Me*(Y*.2))}return[pe,De,me]},b=async()=>{if(t.current){console.log("Generating 3D model for:",t.current),h(!0);try{const W=t.current;if(!W.geometry||W.geometry.type!=="Polygon"){console.error("Invalid geometry: expected a Polygon"),h(!1);return}const Y=W.geometry.coordinates[0];let Z=1/0,j=1/0,K=-1/0,re=-1/0;Y.forEach(ve=>{const[le,ye]=ve;Z=Math.min(Z,le),j=Math.min(j,ye),K=Math.max(K,le),re=Math.max(re,ye)});let ie=12;for(;ie>0&&!(_L(Z,j,K,re,ie)<=4);)ie--;console.log(`Using zoom level ${ie} for the 3D model`);const se=bL(Z,j,K,re,ie);console.log(`Downloading ${se.length} tiles`);const de=await Promise.all(se.map(ve=>B(ve.z,ve.x,ve.y))),{elevationGrid:ue,gridSize:Te}=z(de,se,Z,j,K,re),pe=14;console.log(`Fetching buildings at fixed zoom level ${pe}`);let De=await t1e(Z,j,K,re,pe);De.length===0&&(console.log("No buildings found with primary method, trying direct fetch"),De=await n1e(Z,j,K,re,pe)),console.log(`Successfully fetched ${De.length} buildings`);const me=r1e(De,ue,Te,Z,j,K,re),Me=A(ue,Te,me,Z,j,K,re);i(Me);const fe=new Blob([Me],{type:"text/plain"});n(URL.createObjectURL(fe)),console.log("3D model generated successfully"),l(!0)}catch(W){console.error("Error generating 3D model:",W)}finally{h(!1)}}},A=(W,Y,Z,j,K,re,ie)=>{const{objContent:se,minElevation:de,maxElevation:ue}=y(W,Y,j,K,re,ie);if(Z.length===0)return se;const Te=M(se);let pe=`
# Building models
`;return Z.forEach((De,me)=>{pe+=`# Building ${me+1}
`,pe+=k(De,Te+P(Z,me),f,j,K,re,ie,W,Y,de,ue)}),se+pe},M=W=>{const Y=W.split(`
`);let Z=0;for(const j of Y)j.startsWith("v ")&&Z++;return Z},P=(W,Y)=>{let Z=0;for(let j=0;j<Y;j++){const K=W[j].footprint.length;Z+=K*2}return Z},C=10,k=(W,Y,Z,j,K,re,ie,se,de,ue,Te)=>{let pe=`g building
`;const{footprint:De,height:me,baseElevation:Me,renderMinHeight:fe}=W;if(!De||De.length<3)return"";const ve=2;let le=Me;fe!==void 0&&!isNaN(fe)&&(le+=fe);const ye=me*C*Z,Se={minLng:j,minLat:K,maxLng:re,maxLat:ie},Be=[],Ve=[];De.forEach(([it,gt])=>{const $t=o1e(it,gt,se,de,Se,ue,Te),[He,Ct]=w(Se,200,200,[it,gt]),Xe=$t+(le-ue)*.2+ye,tn=$t+(le-ue)*.2-ve;Be.push([He,Ct,Xe]),Ve.push([He,Ct,tn])}),Be.forEach(([it,gt,$t])=>{pe+=`v ${it.toFixed(4)} ${gt.toFixed(4)} ${$t.toFixed(4)}
`}),Ve.forEach(([it,gt,$t])=>{pe+=`v ${it.toFixed(4)} ${gt.toFixed(4)} ${$t.toFixed(4)}
`});const tt=Y,ht=Y+Be.length;pe+="f";for(let it=Be.length-1;it>=0;it--)pe+=` ${tt+it+1}`;pe+=`
`,pe+="f";for(let it=0;it<Ve.length;it++)pe+=` ${ht+it+1}`;pe+=`
`;for(let it=0;it<Be.length;it++){const gt=(it+1)%Be.length,$t=tt+it+1,He=tt+gt+1,Ct=ht+it+1,Xe=ht+gt+1;pe+=`f ${$t} ${He} ${Ct}
`,pe+=`f ${He} ${Xe} ${Ct}
`}return pe},B=async(W,Y,Z)=>{const j=`https://wms.wheregroup.com/dem_tileserver/raster_dem/${W}/${Y}/${Z}.webp`;console.log(`Downloading tile: ${j}`);try{const K=await fetch(j);if(!K.ok)throw new Error(`Failed to download tile: ${K.status}`);const re=await K.blob(),ie=await createImageBitmap(re),se=document.createElement("canvas");se.width=ie.width,se.height=ie.height;const de=se.getContext("2d");if(!de)throw new Error("Could not get canvas context");return de.drawImage(ie,0,0),{imageData:de.getImageData(0,0,se.width,se.height),width:se.width,height:se.height,x:Y,y:Z,z:W}}catch(K){throw console.error(`Error downloading tile ${W}/${Y}/${Z}:`,K),K}},z=(W,Y,Z,j,K,re)=>{const ie={width:150,height:150},se=new Array(ie.height).fill(0).map(()=>new Array(ie.width).fill(0)),de=new Array(ie.height).fill(0).map(()=>new Array(ie.width).fill(0));let ue=1/0,Te=-1/0;W.forEach(Me=>{if(!Me.imageData)return;const{imageData:fe,width:ve,height:le}=Me,ye=fe.data;for(let Se=0;Se<le;Se++)for(let Be=0;Be<ve;Be++){const Ve=(Se*ve+Be)*4,tt=ye[Ve],ht=ye[Ve+1],it=ye[Ve+2],gt=-1e4+(tt*65536+ht*256+it)*.1;isFinite(gt)&&!isNaN(gt)&&(ue=Math.min(ue,gt),Te=Math.max(Te,gt))}}),console.log(`Elevation range: ${ue.toFixed(2)}m - ${Te.toFixed(2)}m`),W.forEach(Me=>{if(!Me.imageData)return;const{imageData:fe,width:ve,height:le,x:ye,y:Se,z:Be}=Me,Ve=fe.data,tt=Math.pow(2,Be),ht=ye/tt*360-180,it=(ye+1)/tt*360-180,gt=Math.atan(Math.sinh(Math.PI*(1-2*Se/tt)))*180/Math.PI,$t=Math.atan(Math.sinh(Math.PI*(1-2*(Se+1)/tt)))*180/Math.PI;for(let He=0;He<ie.height;He++)for(let Ct=0;Ct<ie.width;Ct++){const Xe=Z+(K-Z)*(Ct/(ie.width-1)),tn=j+(re-j)*He/(ie.height-1);if(Xe<ht||Xe>it||tn<$t||tn>gt)continue;const Kt=(Xe-ht)/(it-ht)*(ve-1),Jt=(1-(tn-$t)/(gt-$t))*(le-1),Ht=Math.floor(Kt),$e=Math.floor(Jt);if(Ht<0||Ht>=ve-1||$e<0||$e>=le-1)continue;const Ee=Kt-Ht,_t=Jt-$e,jt=[];let vt=!1;for(let ke=0;ke<=1;ke++){for(let We=0;We<=1;We++){const Ce=Ht+We,Qe=$e+ke;if(Ce>=0&&Ce<ve&&Qe>=0&&Qe<le){const et=(Qe*ve+Ce)*4,ut=Ve[et],lt=Ve[et+1],xt=Ve[et+2],Dt=-1e4+(ut*65536+lt*256+xt)*.1;if(!isFinite(Dt)||isNaN(Dt)){vt=!0;break}jt.push(Dt)}else{vt=!0;break}}if(vt)break}if(vt||jt.length!==4)continue;const Pt=jt[0],vn=jt[1],hn=jt[2],pn=jt[3],nn=Pt*(1-Ee)+vn*Ee,Ft=hn*(1-Ee)+pn*Ee,In=nn*(1-_t)+Ft*_t,Pn=Math.abs(2*((Xe-ht)/(it-ht)-.5)),ir=Math.abs(2*((tn-$t)/(gt-$t)-.5)),mt=Math.max(Pn,ir),ge=1-Math.pow(mt,2)*.7;se[He][Ct]+=In*ge,de[He][Ct]+=ge}});let pe=0;for(let Me=0;Me<ie.height;Me++)for(let fe=0;fe<ie.width;fe++)if(de[Me][fe]>0)se[Me][fe]/=de[Me][fe];else{pe++;let ve=null,le=1/0;for(let ye=0;ye<ie.height;ye++)for(let Se=0;Se<ie.width;Se++)if(de[ye][Se]>0){const Be=Math.sqrt(Math.pow(Se-fe,2)+Math.pow(ye-Me,2));Be<le&&(le=Be,ve={x:Se,y:ye})}ve?se[Me][fe]=se[ve.y][ve.x]:se[Me][fe]=(ue+Te)/2}pe>0&&console.log(`Filled ${pe} missing data points`);let De=se;const me=2;for(let Me=0;Me<me;Me++)De=q(De,ie);return{elevationGrid:De,gridSize:ie}},q=(W,Y)=>{const{width:Z,height:j}=Y,K=new Array(j).fill(0).map(()=>new Array(Z).fill(0)),ie=Math.floor(5/2);for(let se=0;se<j;se++)for(let de=0;de<Z;de++){let ue=0,Te=0;for(let pe=-ie;pe<=ie;pe++)for(let De=-ie;De<=ie;De++){const me=se+pe,Me=de+De;if(Me>=0&&Me<Z&&me>=0&&me<j){const fe=Math.sqrt(De*De+pe*pe),ve=Math.exp(-fe*fe/(2*ie*ie));ue+=W[me][Me]*ve,Te+=ve}}Te>0?K[se][de]=ue/Te:K[se][de]=W[se][de]}return K},V=(W,Y)=>{v(Y)};return Ln.jsxs(Ln.Fragment,{children:[Ln.jsxs("div",{style:{position:"absolute",bottom:20,left:20,backgroundColor:"rgba(255,255,255,0.8)",padding:"10px",borderRadius:"4px",width:"300px"},children:[Ln.jsxs(gg,{sx:{mb:2},children:[Ln.jsxs(dR,{id:"vertical-exaggeration-slider",gutterBottom:!0,children:["Vertical Exaggeration: ",f.toFixed(6)]}),Ln.jsx(TX,{value:f,onChange:V,"aria-labelledby":"vertical-exaggeration-slider",min:.01,max:1,step:1e-5,marks:[{value:1e-6,label:"Min"},{value:1e-4,label:"Med"},{value:.001,label:"Max"}]})]}),Ln.jsx(sT,{variant:"contained",color:"primary",onClick:b,disabled:a,sx:{marginBottom:"5px"},children:a?Ln.jsx(jS,{size:24}):"Generate 3D Model"}),e&&Ln.jsxs(Ln.Fragment,{children:[Ln.jsx(sT,{variant:"outlined",onClick:()=>l(!0),sx:{marginBottom:"5px",marginRight:"5px"},children:"Preview"}),Ln.jsx(sT,{variant:"outlined",href:e,download:"model.obj",sx:{marginBottom:"5px"},children:"Download OBJ"})]})]}),Ln.jsx(Et.Suspense,{fallback:null,children:r&&Ln.jsx(C_e,{objData:r,open:o,onClose:()=>l(!1)})})]})};function o1e(t,e,n,r,i,o,l){const{width:a,height:h}=r;if(t<i.minLng||t>i.maxLng||e<i.minLat||e>i.maxLat)return o;const f=(t-i.minLng)/(i.maxLng-i.minLng)*(a-1),v=(e-i.minLat)/(i.maxLat-i.minLat)*(h-1),y=Math.floor(f),w=Math.floor(v),b=Math.min(y+1,a-1),A=Math.min(w+1,h-1),M=f-y,P=v-w,C=n[w][y],k=n[w][b],B=n[A][y],z=n[A][b],q=C*(1-M)+k*M,V=B*(1-M)+z*M,W=q*(1-P)+V*P,Y=l-o||1;return(W-o)/Y*(200*.2)}const s1e=()=>{const t=Et.useRef(void 0);return Ln.jsxs(Ln.Fragment,{children:[Ln.jsx(oW,{}),Ln.jsx(w$,{position:"static",children:Ln.jsx(PX,{children:Ln.jsx(dR,{variant:"h6",children:"3D Model App"})})}),Ln.jsxs(tW,{style:{height:"100vh",width:"100vw"},children:[Ln.jsx(U9,{style:{position:"absolute",top:0,bottom:0,left:0,right:0},options:{center:[11.310180118044855,47.55592195900479],zoom:9,style:"https://wms.wheregroup.com/tileserver/style/osm-bright.json"}}),Ln.jsx(Ude,{geojsonRef:t,options:{center:[11.310180118044855,47.55592195900479],scale:[1,1],rotate:0,orientation:"portrait",width:4e4,height:4e4}}),Ln.jsx(a1e,{bboxRef:t})]})]})};zj.createRoot(document.getElementById("root")).render(Ln.jsx(Et.StrictMode,{children:Ln.jsx(Lde,{children:Ln.jsx(s1e,{})})}));export{Co as _,Xm as c,S_ as g};
